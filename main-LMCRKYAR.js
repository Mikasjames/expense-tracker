import{$ as Xm,A as wD,B as Ui,C as Js,D as Qm,E as Ll,F as Vl,G as ED,H as bD,I as ID,J as CD,K as Bl,L as Da,M as Be,N as lt,O as Bn,P as $i,Q as jl,R as hh,S as ut,T as Dt,U as is,V as TD,W as Ft,X as fh,Y as oe,Z as Ym,_ as Jm,a as dD,aa as ph,b as lh,ba as gh,c as hD,ca as Zm,d as fD,da as Xs,e as z,f as Ia,g as uh,h as pD,i as gD,j as ns,k as Ca,l as Ta,m as mD,n as Wm,o as Km,p as _D,q as Bi,r as yD,s as yi,t as Ys,u as Fl,v as vi,w as ji,x as dh,y as kt,z as vD}from"./chunk-MWGNQXGZ.js";import{a as B,b as ye,c as uD,f as R}from"./chunk-FO65GQC2.js";function VV(t,e){return Object.is(t,e)}var Lt=null,mh=!1,_h=1,Aa=Symbol("SIGNAL");function Pe(t){let e=Lt;return Lt=t,e}var e_={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function DD(t){if(mh)throw new Error("");if(Lt===null)return;Lt.consumerOnSignalRead(t);let e=Lt.nextProducerIndex++;if(Sa(Lt),e<Lt.producerNode.length&&Lt.producerNode[e]!==t&&Ul(Lt)){let n=Lt.producerNode[e];yh(n,Lt.producerIndexOfThis[e])}Lt.producerNode[e]!==t&&(Lt.producerNode[e]=t,Lt.producerIndexOfThis[e]=Ul(Lt)?ND(t,Lt,e):0),Lt.producerLastReadVersion[e]=t.version}function BV(){_h++}function jV(t){if(!(Ul(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===_h)){if(!t.producerMustRecompute(t)&&!t_(t)){t.dirty=!1,t.lastCleanEpoch=_h;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=_h}}function SD(t){if(t.liveConsumerNode===void 0)return;let e=mh;mh=!0;try{for(let n of t.liveConsumerNode)n.dirty||UV(n)}finally{mh=e}}function AD(){return Lt?.consumerAllowSignalWrites!==!1}function UV(t){t.dirty=!0,SD(t),t.consumerMarkedDirty?.(t)}function RD(t){return t&&(t.nextProducerIndex=0),Pe(t)}function MD(t,e){if(Pe(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Ul(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)yh(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function t_(t){Sa(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(jV(n),i!==n.version))return!0}return!1}function xD(t){if(Sa(t),Ul(t))for(let e=0;e<t.producerNode.length;e++)yh(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function ND(t,e,n){if(OD(t),Sa(t),t.liveConsumerNode.length===0)for(let i=0;i<t.producerNode.length;i++)t.producerIndexOfThis[i]=ND(t.producerNode[i],t,i);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function yh(t,e){if(OD(t),Sa(t),t.liveConsumerNode.length===1)for(let i=0;i<t.producerNode.length;i++)yh(t.producerNode[i],t.producerIndexOfThis[i]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];Sa(r),r.producerIndexOfThis[i]=e}}function Ul(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Sa(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function OD(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function $V(){throw new Error}var PD=$V;function kD(){PD()}function FD(t){PD=t}var HV=null;function LD(t){let e=Object.create(BD);e.value=t;let n=()=>(DD(e),e.value);return n[Aa]=e,n}function n_(t,e){AD()||kD(),t.equal(t.value,e)||(t.value=e,GV(t))}function VD(t,e){AD()||kD(),n_(t,e(t.value))}var BD=ye(B({},e_),{equal:VV,value:void 0});function GV(t){t.version++,BV(),SD(t),HV?.()}function ie(t){return typeof t=="function"}function Ra(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var vh=Ra(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Zs(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var it=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(ie(i))try{i()}catch(s){e=s instanceof vh?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{jD(s)}catch(o){e=e??[],o instanceof vh?e=[...e,...o.errors]:e.push(o)}}if(e)throw new vh(e)}}add(e){var n;if(e&&e!==this)if(this.closed)jD(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Zs(n,e)}remove(e){let{_finalizers:n}=this;n&&Zs(n,e),e instanceof t&&e._removeParent(this)}};it.EMPTY=(()=>{let t=new it;return t.closed=!0,t})();var i_=it.EMPTY;function wh(t){return t instanceof it||t&&"closed"in t&&ie(t.remove)&&ie(t.add)&&ie(t.unsubscribe)}function jD(t){ie(t)?t():t.unsubscribe()}var wi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ma={setTimeout(t,e,...n){let{delegate:i}=Ma;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ma;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Eh(t){Ma.setTimeout(()=>{let{onUnhandledError:e}=wi;if(e)e(t);else throw t})}function gr(){}var UD=r_("C",void 0,void 0);function $D(t){return r_("E",void 0,t)}function HD(t){return r_("N",t,void 0)}function r_(t,e,n){return{kind:t,value:e,error:n}}var eo=null;function xa(t){if(wi.useDeprecatedSynchronousErrorHandling){let e=!eo;if(e&&(eo={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=eo;if(eo=null,n)throw i}}else t()}function GD(t){wi.useDeprecatedSynchronousErrorHandling&&eo&&(eo.errorThrown=!0,eo.error=t)}var to=class extends it{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wh(e)&&e.add(this)):this.destination=WV}static create(e,n,i){return new mr(e,n,i)}next(e){this.isStopped?o_(HD(e),this):this._next(e)}error(e){this.isStopped?o_($D(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?o_(UD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},zV=Function.prototype.bind;function s_(t,e){return zV.call(t,e)}var a_=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){bh(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){bh(i)}else bh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){bh(n)}}},mr=class extends to{constructor(e,n,i){super();let r;if(ie(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let s;this&&wi.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&s_(e.next,s),error:e.error&&s_(e.error,s),complete:e.complete&&s_(e.complete,s)}):r=e}this.destination=new a_(r)}};function bh(t){wi.useDeprecatedSynchronousErrorHandling?GD(t):Eh(t)}function qV(t){throw t}function o_(t,e){let{onStoppedNotification:n}=wi;n&&Ma.setTimeout(()=>n(t,e))}var WV={closed:!0,next:gr,error:qV,complete:gr};var Na=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Jt(t){return t}function Ih(...t){return c_(t)}function c_(t){return t.length===0?Jt:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var Q=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let s=QV(n)?n:new mr(n,i,r);return xa(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=zD(i),new i((r,s)=>{let o=new mr({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[Na](){return this}pipe(...n){return c_(n)(this)}toPromise(n){return n=zD(n),new n((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return t.create=e=>new t(e),t})();function zD(t){var e;return(e=t??wi.Promise)!==null&&e!==void 0?e:Promise}function KV(t){return t&&ie(t.next)&&ie(t.error)&&ie(t.complete)}function QV(t){return t&&t instanceof to||KV(t)&&wh(t)}function l_(t){return ie(t?.lift)}function ae(t){return e=>{if(l_(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ee(t,e,n,i,r){return new $l(t,e,n,i,r)}var $l=class extends to{constructor(e,n,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Oa(){return ae((t,e)=>{let n=null;t._refCount++;let i=ee(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let r=t._connection,s=n;n=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}var Pa=class extends Q{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,l_(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new it;let n=this.getSubject();e.add(this.source.subscribe(ee(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=it.EMPTY)}return e}refCount(){return Oa()(this)}};var qD=Ra(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ce=(()=>{class t extends Q{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new Ch(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new qD}next(n){xa(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){xa(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){xa(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:s}=this;return i||r?i_:(this.currentObservers=null,s.push(n),new it(()=>{this.currentObservers=null,Zs(s,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:s}=this;i?n.error(r):s&&n.complete()}asObservable(){let n=new Q;return n.source=this,n}}return t.create=(e,n)=>new Ch(e,n),t})(),Ch=class extends Ce{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:i_}};var tt=class extends Ce{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var Hl={now(){return(Hl.delegate||Date).now()},delegate:void 0};var rs=class extends Ce{constructor(e=1/0,n=1/0,i=Hl){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;n||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){let o=n.now(),a=0;for(let c=1;c<i.length&&i[c]<=o;c+=2)a=c;a&&i.splice(0,a+1)}}};var Th=class extends it{constructor(e,n){super()}schedule(e,n=0){return this}};var Gl={setInterval(t,e,...n){let{delegate:i}=Gl;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Gl;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ka=class extends Th{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,i=0){return Gl.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&Gl.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i=!1,r;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Zs(i,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Fa=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}};Fa.now=Hl.now;var La=class extends Fa{constructor(e,n=Fa.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}};var Zn=new La(ka),u_=Zn;var Dh=class extends ka{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,n,i):(e.flush(this),0)}};var Sh=class extends La{};var d_=new Sh(Dh);var St=new Q(t=>t.complete());function Ah(t){return t&&ie(t.schedule)}function h_(t){return t[t.length-1]}function ss(t){return ie(h_(t))?t.pop():void 0}function Hi(t){return Ah(h_(t))?t.pop():void 0}function WD(t,e){return typeof h_(t)=="number"?t.pop():e}var Va=t=>t&&typeof t.length=="number"&&typeof t!="function";function Rh(t){return ie(t?.then)}function Mh(t){return ie(t[Na])}function xh(t){return Symbol.asyncIterator&&ie(t?.[Symbol.asyncIterator])}function Nh(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function YV(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Oh=YV();function Ph(t){return ie(t?.[Oh])}function kh(t){return hD(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:i,done:r}=yield lh(n.read());if(r)return yield lh(void 0);yield yield lh(i)}}finally{n.releaseLock()}})}function Fh(t){return ie(t?.getReader)}function me(t){if(t instanceof Q)return t;if(t!=null){if(Mh(t))return JV(t);if(Va(t))return XV(t);if(Rh(t))return ZV(t);if(xh(t))return KD(t);if(Ph(t))return e2(t);if(Fh(t))return t2(t)}throw Nh(t)}function JV(t){return new Q(e=>{let n=t[Na]();if(ie(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function XV(t){return new Q(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function ZV(t){return new Q(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Eh)})}function e2(t){return new Q(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function KD(t){return new Q(e=>{n2(t,e).catch(n=>e.error(n))})}function t2(t){return KD(kh(t))}function n2(t,e){var n,i,r,s;return dD(this,void 0,void 0,function*(){try{for(n=fD(t);i=yield n.next(),!i.done;){let o=i.value;if(e.next(o),e.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}e.complete()})}function xn(t,e,n,i=0,r=!1){let s=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(s),!r)return s}function jn(t,e=0){return ae((n,i)=>{n.subscribe(ee(i,r=>xn(i,t,()=>i.next(r),e),()=>xn(i,t,()=>i.complete(),e),r=>xn(i,t,()=>i.error(r),e)))})}function ei(t,e=0){return ae((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function QD(t,e){return me(t).pipe(ei(e),jn(e))}function YD(t,e){return me(t).pipe(ei(e),jn(e))}function JD(t,e){return new Q(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function XD(t,e){return new Q(n=>{let i;return xn(n,e,()=>{i=t[Oh](),xn(n,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){n.error(o);return}s?n.complete():n.next(r)},0,!0)}),()=>ie(i?.return)&&i.return()})}function Lh(t,e){if(!t)throw new Error("Iterable cannot be null");return new Q(n=>{xn(n,e,()=>{let i=t[Symbol.asyncIterator]();xn(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function ZD(t,e){return Lh(kh(t),e)}function e1(t,e){if(t!=null){if(Mh(t))return QD(t,e);if(Va(t))return JD(t,e);if(Rh(t))return YD(t,e);if(xh(t))return Lh(t,e);if(Ph(t))return XD(t,e);if(Fh(t))return ZD(t,e)}throw Nh(t)}function ke(t,e){return e?e1(t,e):me(t)}function G(...t){let e=Hi(t);return ke(t,e)}function Ba(t,e){let n=ie(t)?t:()=>t,i=r=>r.error(n());return new Q(e?r=>e.schedule(i,0,r):i)}function f_(t){return!!t&&(t instanceof Q||ie(t.lift)&&ie(t.subscribe))}var _r=Ra(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function t1(t){return t instanceof Date&&!isNaN(t)}function J(t,e){return ae((n,i)=>{let r=0;n.subscribe(ee(i,s=>{i.next(t.call(e,s,r++))}))})}var{isArray:i2}=Array;function r2(t,e){return i2(e)?t(...e):t(e)}function ja(t){return J(e=>r2(t,e))}var{isArray:s2}=Array,{getPrototypeOf:o2,prototype:a2,keys:c2}=Object;function Vh(t){if(t.length===1){let e=t[0];if(s2(e))return{args:e,keys:null};if(l2(e)){let n=c2(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}function l2(t){return t&&typeof t=="object"&&o2(t)===a2}function Bh(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function no(...t){let e=Hi(t),n=ss(t),{args:i,keys:r}=Vh(t);if(i.length===0)return ke([],e);let s=new Q(u2(i,e,r?o=>Bh(r,o):Jt));return n?s.pipe(ja(n)):s}function u2(t,e,n=Jt){return i=>{n1(e,()=>{let{length:r}=t,s=new Array(r),o=r,a=r;for(let c=0;c<r;c++)n1(e,()=>{let u=ke(t[c],e),d=!1;u.subscribe(ee(i,f=>{s[c]=f,d||(d=!0,a--),a||i.next(n(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}function n1(t,e,n){t?xn(n,t,e):e()}function i1(t,e,n,i,r,s,o,a){let c=[],u=0,d=0,f=!1,g=()=>{f&&!c.length&&!u&&e.complete()},m=D=>u<i?v(D):c.push(D),v=D=>{s&&e.next(D),u++;let C=!1;me(n(D,d++)).subscribe(ee(e,x=>{r?.(x),s?m(x):e.next(x)},()=>{C=!0},void 0,()=>{if(C)try{for(u--;c.length&&u<i;){let x=c.shift();o?xn(e,o,()=>v(x)):v(x)}g()}catch(x){e.error(x)}}))};return t.subscribe(ee(e,m,()=>{f=!0,g()})),()=>{a?.()}}function Ge(t,e,n=1/0){return ie(e)?Ge((i,r)=>J((s,o)=>e(i,s,r,o))(me(t(i,r))),n):(typeof e=="number"&&(n=e),ae((i,r)=>i1(i,r,t,n)))}function zl(t=1/0){return Ge(Jt,t)}function r1(){return zl(1)}function Gi(...t){return r1()(ke(t,Hi(t)))}function jh(t){return new Q(e=>{me(t()).subscribe(e)})}function p_(...t){let e=ss(t),{args:n,keys:i}=Vh(t),r=new Q(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,u=o;for(let d=0;d<o;d++){let f=!1;me(n[d]).subscribe(ee(s,g=>{f||(f=!0,u--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(u||s.next(i?Bh(i,a):a),s.complete())}))}});return e?r.pipe(ja(e)):r}var d2=["addListener","removeListener"],h2=["addEventListener","removeEventListener"],f2=["on","off"];function gn(t,e,n,i){if(ie(n)&&(i=n,n=void 0),i)return gn(t,e,n).pipe(ja(i));let[r,s]=m2(t)?h2.map(o=>a=>t[o](e,a,n)):p2(t)?d2.map(s1(t,e)):g2(t)?f2.map(s1(t,e)):[];if(!r&&Va(t))return Ge(o=>gn(o,e,n))(me(t));if(!r)throw new TypeError("Invalid event target");return new Q(o=>{let a=(...c)=>o.next(1<c.length?c:c[0]);return r(a),()=>s(a)})}function s1(t,e){return n=>i=>t[n](e,i)}function p2(t){return ie(t.addListener)&&ie(t.removeListener)}function g2(t){return ie(t.on)&&ie(t.off)}function m2(t){return ie(t.addEventListener)&&ie(t.removeEventListener)}function os(t=0,e,n=u_){let i=-1;return e!=null&&(Ah(e)?n=e:i=e),new Q(r=>{let s=t1(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function Uh(...t){let e=Hi(t),n=WD(t,1/0),i=t;return i.length?i.length===1?me(i[0]):zl(n)(ke(i,e)):St}var{isArray:_2}=Array;function $h(t){return t.length===1&&_2(t[0])?t[0]:t}function Je(t,e){return ae((n,i)=>{let r=0;n.subscribe(ee(i,s=>t.call(e,s,r++)&&i.next(s)))})}function Hh(...t){return t=$h(t),t.length===1?me(t[0]):new Q(y2(t))}function y2(t){return e=>{let n=[];for(let i=0;n&&!e.closed&&i<t.length;i++)n.push(me(t[i]).subscribe(ee(e,r=>{if(n){for(let s=0;s<n.length;s++)s!==i&&n[s].unsubscribe();n=null}e.next(r)})))}}function ql(...t){let e=ss(t),n=$h(t);return n.length?new Q(i=>{let r=n.map(()=>[]),s=n.map(()=>!1);i.add(()=>{r=s=null});for(let o=0;!i.closed&&o<n.length;o++)me(n[o]).subscribe(ee(i,a=>{if(r[o].push(a),r.every(c=>c.length)){let c=r.map(u=>u.shift());i.next(e?e(...c):c),r.some((u,d)=>!u.length&&s[d])&&i.complete()}},()=>{s[o]=!0,!r[o].length&&i.complete()}));return()=>{r=s=null}}):St}function as(t){return ae((e,n)=>{let i=null,r=!1,s;i=e.subscribe(ee(n,void 0,void 0,o=>{s=me(t(o,as(t)(e))),i?(i.unsubscribe(),i=null,s.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(n))})}function o1(t,e,n,i,r){return(s,o)=>{let a=n,c=e,u=0;s.subscribe(ee(o,d=>{let f=u++;c=a?t(c,d,f):(a=!0,d),i&&o.next(c)},r&&(()=>{a&&o.next(c),o.complete()})))}}function cs(t,e){return ie(e)?Ge(t,e,1):Ge(t,1)}function g_(t,e=Zn){return ae((n,i)=>{let r=null,s=null,o=null,a=()=>{if(r){r.unsubscribe(),r=null;let u=s;s=null,i.next(u)}};function c(){let u=o+t,d=e.now();if(d<u){r=this.schedule(void 0,u-d),i.add(r);return}a()}n.subscribe(ee(i,u=>{s=u,o=e.now(),r||(r=e.schedule(c,t),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}function ls(t){return ae((e,n)=>{let i=!1;e.subscribe(ee(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function gt(t){return t<=0?()=>St:ae((e,n)=>{let i=0;e.subscribe(ee(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function a1(){return ae((t,e)=>{t.subscribe(ee(e,gr))})}function Wl(t){return J(()=>t)}function m_(t,e){return e?n=>Gi(e.pipe(gt(1),a1()),n.pipe(m_(t))):Ge((n,i)=>me(t(n,i)).pipe(gt(1),Wl(n)))}function __(t,e=Zn){let n=os(t,e);return m_(()=>n)}function Kl(t,e=Jt){return t=t??v2,ae((n,i)=>{let r,s=!0;n.subscribe(ee(i,o=>{let a=e(o);(s||!t(r,a))&&(s=!1,r=a,i.next(o))}))})}function v2(t,e){return t===e}function Gh(t=w2){return ae((e,n)=>{let i=!1;e.subscribe(ee(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function w2(){return new _r}function y_(...t){return e=>Gi(e,G(...t))}function io(t){return ae((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Un(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Je((r,s)=>t(r,s,i)):Jt,gt(1),n?ls(e):Gh(()=>new _r))}function v_(t,e,n,i){return ae((r,s)=>{let o;!e||typeof e=="function"?o=e:{duration:n,element:o,connector:i}=e;let a=new Map,c=v=>{a.forEach(v),v(s)},u=v=>c(D=>D.error(v)),d=0,f=!1,g=new $l(s,v=>{try{let D=t(v),C=a.get(D);if(!C){a.set(D,C=i?i():new Ce);let x=m(D,C);if(s.next(x),n){let k=ee(C,()=>{C.complete(),k?.unsubscribe()},void 0,void 0,()=>a.delete(D));g.add(me(n(x)).subscribe(k))}}C.next(o?o(v):v)}catch(D){u(D)}},()=>c(v=>v.complete()),u,()=>a.clear(),()=>(f=!0,d===0));r.subscribe(g);function m(v,D){let C=new Q(x=>{d++;let k=D.subscribe(x);return()=>{k.unsubscribe(),--d===0&&f&&g.unsubscribe()}});return C.key=v,C}})}function Ua(t){return t<=0?()=>St:ae((e,n)=>{let i=[];e.subscribe(ee(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function w_(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Je((r,s)=>t(r,s,i)):Jt,Ua(1),n?ls(e):Gh(()=>new _r))}function zh(){return ae((t,e)=>{let n,i=!1;t.subscribe(ee(e,r=>{let s=n;n=r,i&&e.next([s,r]),i=!0}))})}function qh(t,e){return ae(o1(t,e,arguments.length>=2,!0))}function c1(t={}){let{connector:e=()=>new Ce,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return s=>{let o,a,c,u=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},m=()=>{g(),o=c=void 0,d=f=!1},v=()=>{let D=o;m(),D?.unsubscribe()};return ae((D,C)=>{u++,!f&&!d&&g();let x=c=c??e();C.add(()=>{u--,u===0&&!f&&!d&&(a=E_(v,r))}),x.subscribe(C),!o&&u>0&&(o=new mr({next:k=>x.next(k),error:k=>{f=!0,g(),a=E_(m,n,k),x.error(k)},complete:()=>{d=!0,g(),a=E_(m,i),x.complete()}}),me(D).subscribe(o))})(s)}}function E_(t,e,...n){if(e===!0){t();return}if(e===!1)return;let i=new mr({next:()=>{i.unsubscribe(),t()}});return me(e(...n)).subscribe(i)}function Wh(t,e,n){let i,r=!1;return t&&typeof t=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t:i=t??1/0,c1({connector:()=>new rs(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function ro(...t){let e=Hi(t);return ae((n,i)=>{(e?Gi(t,n,e):Gi(t,n)).subscribe(i)})}function De(t,e){return ae((n,i)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&i.complete();n.subscribe(ee(i,c=>{r?.unsubscribe();let u=0,d=s++;me(t(c,d)).subscribe(r=ee(i,f=>i.next(e?e(c,f,d,u++):f),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Kh(t,e){return ie(e)?De(()=>t,e):De(()=>t)}function At(t){return ae((e,n)=>{me(t).subscribe(ee(n,()=>n.complete(),gr)),!n.closed&&e.subscribe(n)})}function Xe(t,e,n){let i=ie(t)||e||n?{next:t,error:e,complete:n}:t;return i?ae((r,s)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;r.subscribe(ee(s,c=>{var u;(u=i.next)===null||u===void 0||u.call(i,c),s.next(c)},()=>{var c;a=!1,(c=i.complete)===null||c===void 0||c.call(i),s.complete()},c=>{var u;a=!1,(u=i.error)===null||u===void 0||u.call(i,c),s.error(c)},()=>{var c,u;a&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(u=i.finalize)===null||u===void 0||u.call(i)}))}):Jt}function l1(t,e){return ae((n,i)=>{let{leading:r=!0,trailing:s=!1}=e??{},o=!1,a=null,c=null,u=!1,d=()=>{c?.unsubscribe(),c=null,s&&(m(),u&&i.complete())},f=()=>{c=null,u&&i.complete()},g=v=>c=me(t(v)).subscribe(ee(i,d,f)),m=()=>{if(o){o=!1;let v=a;a=null,i.next(v),!u&&g(v)}};n.subscribe(ee(i,v=>{o=!0,a=v,!(c&&!c.closed)&&(r?m():g(v))},()=>{u=!0,!(s&&o&&c&&!c.closed)&&i.complete()}))})}function b_(t,e=Zn,n){let i=os(t,e);return l1(()=>i,n)}function Ql(...t){let e=ss(t);return ae((n,i)=>{let r=t.length,s=new Array(r),o=t.map(()=>!1),a=!1;for(let c=0;c<r;c++)me(t[c]).subscribe(ee(i,u=>{s[c]=u,!a&&!o[c]&&(o[c]=!0,(a=o.every(Jt))&&(o=null))},gr));n.subscribe(ee(i,c=>{if(a){let u=[c,...s];i.next(e?e(...u):u)}}))})}var E2="https://g.co/ng/security#xss",ne=class extends Error{constructor(e,n){super(Mf(e,n)),this.code=e}};function Mf(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function lu(t){return{toString:t}.toString()}var Qh="__parameters__";function b2(t){return function(...n){if(t){let i=t(...n);for(let r in i)this[r]=i[r]}}}function H1(t,e,n){return lu(()=>{let i=b2(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;let o=new r(...s);return a.annotation=o,a;function a(c,u,d){let f=c.hasOwnProperty(Qh)?c[Qh]:Object.defineProperty(c,Qh,{value:[]})[Qh];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),c}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}var Yl=globalThis;function ze(t){for(let e in t)if(t[e]===ze)return e;throw Error("Could not find renamed property on target object.")}function I2(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function yn(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(yn).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function j_(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var C2=ze({__forward_ref__:ze});function Cr(t){return t.__forward_ref__=Cr,t.toString=function(){return yn(this())},t}function mn(t){return G1(t)?t():t}function G1(t){return typeof t=="function"&&t.hasOwnProperty(C2)&&t.__forward_ref__===Cr}function q(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ii(t){return{providers:t.providers||[],imports:t.imports||[]}}function xf(t){return u1(t,q1)||u1(t,W1)}function z1(t){return xf(t)!==null}function u1(t,e){return t.hasOwnProperty(e)?t[e]:null}function T2(t){let e=t&&(t[q1]||t[W1]);return e||null}function d1(t){return t&&(t.hasOwnProperty(h1)||t.hasOwnProperty(D2))?t[h1]:null}var q1=ze({\u0275prov:ze}),h1=ze({\u0275inj:ze}),W1=ze({ngInjectableDef:ze}),D2=ze({ngInjectorDef:ze}),j=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=q({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function K1(t){return t&&!!t.\u0275providers}var S2=ze({\u0275cmp:ze}),A2=ze({\u0275dir:ze}),R2=ze({\u0275pipe:ze}),M2=ze({\u0275mod:ze}),cf=ze({\u0275fac:ze}),Jl=ze({__NG_ELEMENT_ID__:ze}),f1=ze({__NG_ENV_ID__:ze});function Vy(t){return typeof t=="string"?t:t==null?"":String(t)}function x2(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Vy(t)}function N2(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new ne(-200,t)}function By(t,e){throw new ne(-201,!1)}var Ee=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ee||{}),U_;function Q1(){return U_}function Nn(t){let e=U_;return U_=t,e}function Y1(t,e,n){let i=xf(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&Ee.Optional)return null;if(e!==void 0)return e;By(t,"Injector")}var O2={},Xl=O2,$_="__NG_DI_FLAG__",lf="ngTempTokenPath",P2="ngTokenPath",k2=/\n/gm,F2="\u0275",p1="__source",za;function L2(){return za}function us(t){let e=za;return za=t,e}function V2(t,e=Ee.Default){if(za===void 0)throw new ne(-203,!1);return za===null?Y1(t,void 0,e):za.get(t,e&Ee.Optional?null:void 0,e)}function $(t,e=Ee.Default){return(Q1()||V2)(mn(t),e)}function N(t,e=Ee.Default){return $(t,Nf(e))}function Nf(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function H_(t){let e=[];for(let n=0;n<t.length;n++){let i=mn(t[n]);if(Array.isArray(i)){if(i.length===0)throw new ne(900,!1);let r,s=Ee.Default;for(let o=0;o<i.length;o++){let a=i[o],c=B2(a);typeof c=="number"?c===-1?r=a.token:s|=c:r=a}e.push($(r,s))}else e.push($(i))}return e}function J1(t,e){return t[$_]=e,t.prototype[$_]=e,t}function B2(t){return t[$_]}function j2(t,e,n,i){let r=t[lf];throw e[p1]&&r.unshift(e[p1]),t.message=U2(`
`+t.message,r,n,i),t[P2]=r,t[lf]=null,t}function U2(t,e,n,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==F2?t.slice(2):t;let r=yn(e);if(Array.isArray(e))r=e.map(yn).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):yn(a)))}r=`{${s.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(k2,`
  `)}`}var _e=J1(H1("Optional"),8);var X1=J1(H1("SkipSelf"),4);function oo(t,e){let n=t.hasOwnProperty(cf);return n?t[cf]:null}function $2(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],s=e[i];if(n&&(r=n(r),s=n(s)),s!==r)return!1}return!0}function H2(t){return t.flat(Number.POSITIVE_INFINITY)}function jy(t,e){t.forEach(n=>Array.isArray(n)?jy(n,e):e(n))}function Z1(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function uf(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function G2(t,e){let n=[];for(let i=0;i<t;i++)n.push(e);return n}function z2(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let s=r-2;t[r]=t[s],r--}t[e]=n,t[e+1]=i}}function Uy(t,e,n){let i=uu(t,e);return i>=0?t[i|1]=n:(i=~i,z2(t,i,e,n)),i}function I_(t,e){let n=uu(t,e);if(n>=0)return t[n|1]}function uu(t,e){return q2(t,e,1)}function q2(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let s=i+(r-i>>1),o=t[s<<n];if(e===o)return s<<n;o>e?r=s:i=s+1}return~(r<<n)}var Wa={},_n=[],ao=new j(""),eS=new j("",-1),tS=new j(""),df=class{get(e,n=Xl){if(n===Xl){let i=new Error(`NullInjectorError: No provider for ${yn(e)}!`);throw i.name="NullInjectorError",i}return n}},nS=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(nS||{}),Wi=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Wi||{}),Vt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Vt||{});function W2(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let s=e.length;if(r+s===i||t.charCodeAt(r+s)<=32)return r}n=r+1}}function G_(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let s=n[i++],o=n[i++],a=n[i++];t.setAttribute(e,o,a,s)}else{let s=r,o=n[++i];Q2(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),i++}}return i}function K2(t){return t===3||t===4||t===6}function Q2(t){return t.charCodeAt(0)===64}function Zl(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?g1(t,n,r,null,e[++i]):g1(t,n,r,null,null))}}return t}function g1(t,e,n,i,r){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(i===null){r!==null&&(t[s+1]=r);return}else if(i===t[s+1]){t[s+2]=r;return}}s++,i!==null&&s++,r!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),i!==null&&t.splice(s++,0,i),r!==null&&t.splice(s++,0,r)}var iS="ng-template";function Y2(t,e,n,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&W2(e[r+1].toLowerCase(),n,0)!==-1)return!0}else if($y(t))return!1;if(r=e.indexOf(1,r),r>-1){let s;for(;++r<e.length&&typeof(s=e[r])=="string";)if(s.toLowerCase()===n)return!0}return!1}function $y(t){return t.type===4&&t.value!==iS}function J2(t,e,n){let i=t.type===4&&!n?iS:t.value;return e===i}function X2(t,e,n){let i=4,r=t.attrs,s=r!==null?tB(r):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Ei(i)&&!Ei(c))return!1;if(o&&Ei(c))continue;o=!1,i=c|i&1;continue}if(!o)if(i&4){if(i=2|i&1,c!==""&&!J2(t,c,n)||c===""&&e.length===1){if(Ei(i))return!1;o=!0}}else if(i&8){if(r===null||!Y2(t,r,c,n)){if(Ei(i))return!1;o=!0}}else{let u=e[++a],d=Z2(c,r,$y(t),n);if(d===-1){if(Ei(i))return!1;o=!0;continue}if(u!==""){let f;if(d>s?f="":f=r[d+1].toLowerCase(),i&2&&u!==f){if(Ei(i))return!1;o=!0}}}}return Ei(i)||o}function Ei(t){return(t&1)===0}function Z2(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let s=!1;for(;r<e.length;){let o=e[r];if(o===t)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return nB(e,t)}function rS(t,e,n=!1){for(let i=0;i<e.length;i++)if(X2(t,e[i],n))return!0;return!1}function eB(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function tB(t){for(let e=0;e<t.length;e++){let n=t[e];if(K2(n))return e}return t.length}function nB(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function iB(t,e){e:for(let n=0;n<e.length;n++){let i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function m1(t,e){return t?":not("+e.trim()+")":e}function rB(t){let e=t[0],n=1,i=2,r="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(i&2){let a=t[++n];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+o:i&4&&(r+=" "+o);else r!==""&&!Ei(o)&&(e+=m1(s,r),r=""),i=o,s=s||!Ei(i);n++}return r!==""&&(e+=m1(s,r)),e}function sB(t){return t.map(rB).join(",")}function oB(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let s=t[i];if(typeof s=="string")r===2?s!==""&&e.push(s,t[++i]):r===8&&n.push(s);else{if(!Ei(r))break;r=s}i++}return{attrs:e,classes:n}}function Ae(t){return lu(()=>{let e=uS(t),n=ye(B({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===nS.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Wi.Emulated,styles:t.styles||_n,_:null,schemas:t.schemas||null,tView:null,id:""});dS(n);let i=t.dependencies;return n.directiveDefs=y1(i,!1),n.pipeDefs=y1(i,!0),n.id=lB(n),n})}function aB(t){return hs(t)||oS(t)}function cB(t){return t!==null}function ri(t){return lu(()=>({type:t.type,bootstrap:t.bootstrap||_n,declarations:t.declarations||_n,imports:t.imports||_n,exports:t.exports||_n,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function _1(t,e){if(t==null)return Wa;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],s,o,a=Vt.None;Array.isArray(r)?(a=r[0],s=r[1],o=r[2]??s):(s=r,o=r),e?(n[s]=a!==Vt.None?[i,a]:i,e[s]=o):n[s]=i}return n}function mt(t){return lu(()=>{let e=uS(t);return dS(e),e})}function sS(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function hs(t){return t[S2]||null}function oS(t){return t[A2]||null}function aS(t){return t[R2]||null}function cS(t){let e=hs(t)||oS(t)||aS(t);return e!==null?e.standalone:!1}function lS(t,e){let n=t[M2]||null;if(!n&&e===!0)throw new Error(`Type ${yn(t)} does not have '\u0275mod' property.`);return n}function uS(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Wa,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||_n,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:_1(t.inputs,e),outputs:_1(t.outputs),debugInfo:null}}function dS(t){t.features?.forEach(e=>e(t))}function y1(t,e){if(!t)return null;let n=e?aS:aB;return()=>(typeof t=="function"?t():t).map(i=>n(i)).filter(cB)}function lB(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ze(t){return{\u0275providers:t}}function uB(...t){return{\u0275providers:hS(!0,t),\u0275fromNgModule:!0}}function hS(t,...e){let n=[],i=new Set,r,s=o=>{n.push(o)};return jy(e,o=>{let a=o;z_(a,s,[],i)&&(r||=[],r.push(a))}),r!==void 0&&fS(r,s),n}function fS(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];Hy(r,s=>{e(s,i)})}}function z_(t,e,n,i){if(t=mn(t),!t)return!1;let r=null,s=d1(t),o=!s&&hs(t);if(!s&&!o){let c=t.ngModule;if(s=d1(c),s)r=c;else return!1}else{if(o&&!o.standalone)return!1;r=t}let a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of c)z_(u,e,n,i)}}else if(s){if(s.imports!=null&&!a){i.add(r);let u;try{jy(s.imports,d=>{z_(d,e,n,i)&&(u||=[],u.push(d))})}finally{}u!==void 0&&fS(u,e)}if(!a){let u=oo(r)||(()=>new r);e({provide:r,useFactory:u,deps:_n},r),e({provide:tS,useValue:r,multi:!0},r),e({provide:ao,useValue:()=>$(r),multi:!0},r)}let c=s.providers;if(c!=null&&!a){let u=t;Hy(c,d=>{e(d,u)})}}else return!1;return r!==t&&t.providers!==void 0}function Hy(t,e){for(let n of t)K1(n)&&(n=n.\u0275providers),Array.isArray(n)?Hy(n,e):e(n)}var dB=ze({provide:String,useValue:ze});function pS(t){return t!==null&&typeof t=="object"&&dB in t}function hB(t){return!!(t&&t.useExisting)}function fB(t){return!!(t&&t.useFactory)}function Ka(t){return typeof t=="function"}function pB(t){return!!t.useClass}var Of=new j(""),tf={},gB={},C_;function Pf(){return C_===void 0&&(C_=new df),C_}var wn=class{},eu=class extends wn{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,W_(e,o=>this.processProvider(o)),this.records.set(eS,$a(void 0,this)),r.has("environment")&&this.records.set(wn,$a(void 0,this));let s=this.records.get(Of);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(tS,_n,Ee.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Pe(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Pe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=us(this),i=Nn(void 0),r;try{return e()}finally{us(n),Nn(i)}}get(e,n=Xl,i=Ee.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(f1))return e[f1](this);i=Nf(i);let r,s=us(this),o=Nn(void 0);try{if(!(i&Ee.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=wB(e)&&xf(e);u&&this.injectableDefInScope(u)?c=$a(q_(e),tf):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=i&Ee.Self?Pf():this.parent;return n=i&Ee.Optional&&n===Xl?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[lf]=a[lf]||[]).unshift(yn(e)),s)throw a;return j2(a,e,"R3InjectorError",this.source)}else throw a}finally{Nn(o),us(s)}}resolveInjectorInitializers(){let e=Pe(null),n=us(this),i=Nn(void 0),r;try{let s=this.get(ao,_n,Ee.Self);for(let o of s)o()}finally{us(n),Nn(i),Pe(e)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(yn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ne(205,!1)}processProvider(e){e=mn(e);let n=Ka(e)?e:mn(e&&e.provide),i=_B(e);if(!Ka(e)&&e.multi===!0){let r=this.records.get(n);r||(r=$a(void 0,tf,!0),r.factory=()=>H_(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){let i=Pe(null);try{return n.value===tf&&(n.value=gB,n.value=n.factory()),typeof n.value=="object"&&n.value&&vB(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Pe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=mn(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function q_(t){let e=xf(t),n=e!==null?e.factory:oo(t);if(n!==null)return n;if(t instanceof j)throw new ne(204,!1);if(t instanceof Function)return mB(t);throw new ne(204,!1)}function mB(t){if(t.length>0)throw new ne(204,!1);let n=T2(t);return n!==null?()=>n.factory(t):()=>new t}function _B(t){if(pS(t))return $a(void 0,t.useValue);{let e=gS(t);return $a(e,tf)}}function gS(t,e,n){let i;if(Ka(t)){let r=mn(t);return oo(r)||q_(r)}else if(pS(t))i=()=>mn(t.useValue);else if(fB(t))i=()=>t.useFactory(...H_(t.deps||[]));else if(hB(t))i=()=>$(mn(t.useExisting));else{let r=mn(t&&(t.useClass||t.provide));if(yB(t))i=()=>new r(...H_(t.deps));else return oo(r)||q_(r)}return i}function $a(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function yB(t){return!!t.deps}function vB(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function wB(t){return typeof t=="function"||typeof t=="object"&&t instanceof j}function W_(t,e){for(let n of t)Array.isArray(n)?W_(n,e):n&&K1(n)?W_(n.\u0275providers,e):e(n)}function ms(t,e){t instanceof eu&&t.assertNotDestroyed();let n,i=us(t),r=Nn(void 0);try{return e()}finally{us(i),Nn(r)}}function EB(){return Q1()!==void 0||L2()!=null}function bB(t){return typeof t=="function"}var $n=0,de=1,le=2,Bt=3,Ii=4,Gn=5,ti=6,tu=7,ni=8,Qa=9,Ki=10,Ke=11,nu=12,v1=13,ec=14,Hn=15,du=16,Ha=17,vr=18,kf=19,mS=20,ds=21,T_=22,co=23,yt=25,_S=1,iu=6,wr=7,hf=8,Ya=9,vn=10,Gy=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Gy||{});function yr(t){return Array.isArray(t)&&typeof t[_S]=="object"}function Yi(t){return Array.isArray(t)&&t[_S]===!0}function zy(t){return(t.flags&4)!==0}function hu(t){return t.componentOffset>-1}function Ff(t){return(t.flags&1)===1}function fs(t){return!!t.template}function yS(t){return(t[le]&512)!==0}var K_=class{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function vS(t,e,n,i){e!==null?e.applyValueToInputSignal(e,i):t[n]=i}function On(){return wS}function wS(t){return t.type.prototype.ngOnChanges&&(t.setInput=CB),IB}On.ngInherit=!0;function IB(){let t=bS(this),e=t?.current;if(e){let n=t.previous;if(n===Wa)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function CB(t,e,n,i,r){let s=this.declaredInputs[i],o=bS(t)||TB(t,{previous:Wa,current:null}),a=o.current||(o.current={}),c=o.previous,u=c[s];a[s]=new K_(u&&u.currentValue,n,c===Wa),vS(t,e,r,n)}var ES="__ngSimpleChanges__";function bS(t){return t[ES]||null}function TB(t,e){return t[ES]=e}var w1=null;var zi=function(t,e,n){w1?.(t,e,n)},IS="svg",DB="math",SB=!1;function AB(){return SB}function Ci(t){for(;Array.isArray(t);)t=t[$n];return t}function CS(t,e){return Ci(e[t])}function zn(t,e){return Ci(e[t.index])}function qy(t,e){return t.data[e]}function TS(t,e){return t[e]}function _s(t,e){let n=e[t];return yr(n)?n:n[$n]}function RB(t){return(t[le]&4)===4}function Wy(t){return(t[le]&128)===128}function MB(t){return Yi(t[Bt])}function Ja(t,e){return e==null?null:t[e]}function DS(t){t[Ha]=0}function xB(t){t[le]&1024||(t[le]|=1024,Wy(t)&&ru(t))}function NB(t,e){for(;t>0;)e=e[ec],t--;return e}function Ky(t){return!!(t[le]&9216||t[co]?.dirty)}function Q_(t){t[Ki].changeDetectionScheduler?.notify(1),Ky(t)?ru(t):t[le]&64&&(AB()?(t[le]|=1024,ru(t)):t[Ki].changeDetectionScheduler?.notify())}function ru(t){t[Ki].changeDetectionScheduler?.notify();let e=su(t);for(;e!==null&&!(e[le]&8192||(e[le]|=8192,!Wy(e)));)e=su(e)}function SS(t,e){if((t[le]&256)===256)throw new ne(911,!1);t[ds]===null&&(t[ds]=[]),t[ds].push(e)}function OB(t,e){if(t[ds]===null)return;let n=t[ds].indexOf(e);n!==-1&&t[ds].splice(n,1)}function su(t){let e=t[Bt];return Yi(e)?e[Bt]:e}var pe={lFrame:kS(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function PB(){return pe.lFrame.elementDepthCount}function kB(){pe.lFrame.elementDepthCount++}function FB(){pe.lFrame.elementDepthCount--}function AS(){return pe.bindingsEnabled}function tc(){return pe.skipHydrationRootTNode!==null}function LB(t){return pe.skipHydrationRootTNode===t}function VB(t){pe.skipHydrationRootTNode=t}function BB(){pe.skipHydrationRootTNode=null}function Se(){return pe.lFrame.lView}function Rt(){return pe.lFrame.tView}function jt(t){return pe.lFrame.contextLView=t,t[ni]}function Ut(t){return pe.lFrame.contextLView=null,t}function qn(){let t=RS();for(;t!==null&&t.type===64;)t=t.parent;return t}function RS(){return pe.lFrame.currentTNode}function jB(){let t=pe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function go(t,e){let n=pe.lFrame;n.currentTNode=t,n.isParent=e}function Qy(){return pe.lFrame.isParent}function Yy(){pe.lFrame.isParent=!1}function UB(){return pe.lFrame.contextLView}function MS(){let t=pe.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function $B(t){return pe.lFrame.bindingIndex=t}function fu(){return pe.lFrame.bindingIndex++}function xS(t){let e=pe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function HB(){return pe.lFrame.inI18n}function GB(t,e){let n=pe.lFrame;n.bindingIndex=n.bindingRootIndex=t,Y_(e)}function zB(){return pe.lFrame.currentDirectiveIndex}function Y_(t){pe.lFrame.currentDirectiveIndex=t}function qB(t){let e=pe.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function NS(){return pe.lFrame.currentQueryIndex}function Jy(t){pe.lFrame.currentQueryIndex=t}function WB(t){let e=t[de];return e.type===2?e.declTNode:e.type===1?t[Gn]:null}function OS(t,e,n){if(n&Ee.SkipSelf){let r=e,s=t;for(;r=r.parent,r===null&&!(n&Ee.Host);)if(r=WB(s),r===null||(s=s[ec],r.type&10))break;if(r===null)return!1;e=r,t=s}let i=pe.lFrame=PS();return i.currentTNode=e,i.lView=t,!0}function Xy(t){let e=PS(),n=t[de];pe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function PS(){let t=pe.lFrame,e=t===null?null:t.child;return e===null?kS(t):e}function kS(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function FS(){let t=pe.lFrame;return pe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var LS=FS;function Zy(){let t=FS();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function KB(t){return(pe.lFrame.contextLView=NB(t,pe.lFrame.contextLView))[ni]}function mo(){return pe.lFrame.selectedIndex}function lo(t){pe.lFrame.selectedIndex=t}function ev(){let t=pe.lFrame;return qy(t.tView,t.selectedIndex)}function Tr(){pe.lFrame.currentNamespace=IS}function VS(){return pe.lFrame.currentNamespace}var BS=!0;function Lf(){return BS}function Ji(t){BS=t}function QB(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){let o=wS(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}r&&(n.preOrderHooks??=[]).push(0-t,r),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Vf(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function nf(t,e,n){jS(t,e,3,n)}function rf(t,e,n,i){(t[le]&3)===n&&jS(t,e,n,i)}function D_(t,e){let n=t[le];(n&3)===e&&(n&=16383,n+=1,t[le]=n)}function jS(t,e,n,i){let r=i!==void 0?t[Ha]&65535:0,s=i??-1,o=e.length-1,a=0;for(let c=r;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],i!=null&&a>=i)break}else e[c]<0&&(t[Ha]+=65536),(a<s||s==-1)&&(YB(t,n,e,c),t[Ha]=(t[Ha]&4294901760)+c+2),c++}function E1(t,e){zi(4,t,e);let n=Pe(null);try{e.call(t)}finally{Pe(n),zi(5,t,e)}}function YB(t,e,n,i){let r=n[i]<0,s=n[i+1],o=r?-n[i]:n[i],a=t[o];r?t[le]>>14<t[Ha]>>16&&(t[le]&3)===e&&(t[le]+=16384,E1(a,s)):E1(a,s)}var qa=-1,uo=class{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function JB(t){return t instanceof uo}function XB(t){return(t.flags&8)!==0}function ZB(t){return(t.flags&16)!==0}function US(t){return t!==qa}function ff(t){return t&32767}function ej(t){return t>>16}function pf(t,e){let n=ej(t),i=e;for(;n>0;)i=i[ec],n--;return i}var J_=!0;function gf(t){let e=J_;return J_=t,e}var tj=256,$S=tj-1,HS=5,nj=0,qi={};function ij(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Jl)&&(i=n[Jl]),i==null&&(i=n[Jl]=nj++);let r=i&$S,s=1<<r;e.data[t+(r>>HS)]|=s}function mf(t,e){let n=GS(t,e);if(n!==-1)return n;let i=e[de];i.firstCreatePass&&(t.injectorIndex=e.length,S_(i.data,t),S_(e,null),S_(i.blueprint,null));let r=tv(t,e),s=t.injectorIndex;if(US(r)){let o=ff(r),a=pf(r,e),c=a[de].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=r,s}function S_(t,e){t.push(0,0,0,0,0,0,0,0,e)}function GS(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function tv(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=QS(r),i===null)return qa;if(n++,r=r[ec],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return qa}function X_(t,e,n){ij(t,e,n)}function zS(t,e,n){if(n&Ee.Optional||t!==void 0)return t;By(e,"NodeInjector")}function qS(t,e,n,i){if(n&Ee.Optional&&i===void 0&&(i=null),!(n&(Ee.Self|Ee.Host))){let r=t[Qa],s=Nn(void 0);try{return r?r.get(e,i,n&Ee.Optional):Y1(e,i,n&Ee.Optional)}finally{Nn(s)}}return zS(i,e,n)}function WS(t,e,n,i=Ee.Default,r){if(t!==null){if(e[le]&2048&&!(i&Ee.Self)){let o=aj(t,e,n,i,qi);if(o!==qi)return o}let s=KS(t,e,n,i,qi);if(s!==qi)return s}return qS(e,n,i,r)}function KS(t,e,n,i,r){let s=sj(n);if(typeof s=="function"){if(!OS(e,t,i))return i&Ee.Host?zS(r,n,i):qS(e,n,i,r);try{let o;if(o=s(i),o==null&&!(i&Ee.Optional))By(n);else return o}finally{LS()}}else if(typeof s=="number"){let o=null,a=GS(t,e),c=qa,u=i&Ee.Host?e[Hn][Gn]:null;for((a===-1||i&Ee.SkipSelf)&&(c=a===-1?tv(t,e):e[a+8],c===qa||!I1(i,!1)?a=-1:(o=e[de],a=ff(c),e=pf(c,e)));a!==-1;){let d=e[de];if(b1(s,a,d.data)){let f=rj(a,e,n,o,i,u);if(f!==qi)return f}c=e[a+8],c!==qa&&I1(i,e[de].data[a+8]===u)&&b1(s,a,e)?(o=d,a=ff(c),e=pf(c,e)):a=-1}}return r}function rj(t,e,n,i,r,s){let o=e[de],a=o.data[t+8],c=i==null?hu(a)&&J_:i!=o&&(a.type&3)!==0,u=r&Ee.Host&&s===a,d=sf(a,o,n,c,u);return d!==null?ho(e,o,d,a):qi}function sf(t,e,n,i,r){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,u=t.directiveEnd,d=s>>20,f=i?a:a+d,g=r?a+d:u;for(let m=f;m<g;m++){let v=o[m];if(m<c&&n===v||m>=c&&v.type===n)return m}if(r){let m=o[c];if(m&&fs(m)&&m.type===n)return c}return null}function ho(t,e,n,i){let r=t[n],s=e.data;if(JB(r)){let o=r;o.resolving&&N2(x2(s[n]));let a=gf(o.canSeeViewProviders);o.resolving=!0;let c,u=o.injectImpl?Nn(o.injectImpl):null,d=OS(t,i,Ee.Default);try{r=t[n]=o.factory(void 0,s,t,i),e.firstCreatePass&&n>=i.directiveStart&&QB(n,s[n],e)}finally{u!==null&&Nn(u),gf(a),o.resolving=!1,LS()}}return r}function sj(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Jl)?t[Jl]:void 0;return typeof e=="number"?e>=0?e&$S:oj:e}function b1(t,e,n){let i=1<<t;return!!(n[e+(t>>HS)]&i)}function I1(t,e){return!(t&Ee.Self)&&!(t&Ee.Host&&e)}var so=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return WS(this._tNode,this._lView,e,Nf(i),n)}};function oj(){return new so(qn(),Se())}function _o(t){return lu(()=>{let e=t.prototype.constructor,n=e[cf]||Z_(e),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let s=r[cf]||Z_(r);if(s&&s!==n)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Z_(t){return G1(t)?()=>{let e=Z_(mn(t));return e&&e()}:oo(t)}function aj(t,e,n,i,r){let s=t,o=e;for(;s!==null&&o!==null&&o[le]&2048&&!(o[le]&512);){let a=KS(s,o,n,i|Ee.Self,qi);if(a!==qi)return a;let c=s.parent;if(!c){let u=o[mS];if(u){let d=u.get(n,qi,i);if(d!==qi)return d}c=QS(o),o=o[ec]}s=c}return r}function QS(t){let e=t[de],n=e.type;return n===2?e.declTNode:n===1?t[Gn]:null}function C1(t,e=null,n=null,i){let r=YS(t,e,n,i);return r.resolveInjectorInitializers(),r}function YS(t,e=null,n=null,i,r=new Set){let s=[n||_n,uB(t)];return i=i||(typeof t=="object"?void 0:yn(t)),new eu(s,e||Pf(),i||null,r)}var Re=(()=>{let e=class e{static create(i,r){if(Array.isArray(i))return C1({name:""},r,i,"");{let s=i.name??"";return C1({name:s},i.parent,i.providers,s)}}};e.THROW_IF_NOT_FOUND=Xl,e.NULL=new df,e.\u0275prov=q({token:e,providedIn:"any",factory:()=>$(eS)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var cj="ngOriginalError";function A_(t){return t[cj]}var Er=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&A_(e);for(;n&&A_(n);)n=A_(n);return n||null}},JS=new j("",{providedIn:"root",factory:()=>N(Er).handleError.bind(void 0)}),nv=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=lj,e.__NG_ENV_ID__=i=>i;let t=e;return t})(),ey=class extends nv{constructor(e){super(),this._lView=e}onDestroy(e){return SS(this._lView,e),()=>OB(this._lView,e)}};function lj(){return new ey(Se())}function uj(){return nc(qn(),Se())}function nc(t,e){return new Xt(zn(t,e))}var Xt=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=uj;let t=e;return t})();function dj(t){return t instanceof Xt?t.nativeElement:t}var ty=class extends Ce{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,EB()&&(this.destroyRef=N(nv,{optional:!0})??void 0)}emit(e){let n=Pe(null);try{super.next(e)}finally{Pe(n)}}subscribe(e,n,i){let r=e,s=n||(()=>null),o=i;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=R_(s),r&&(r=R_(r)),o&&(o=R_(o)));let a=super.subscribe({next:r,error:s,complete:o});return e instanceof it&&e.add(a),a}};function R_(t){return e=>{setTimeout(t,void 0,e)}}var Ue=ty;function hj(){return this._results[Symbol.iterator]()}var ny=class t{get changes(){return this._changes??=new Ue}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=hj)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let i=H2(e);(this._changesDetected=!$2(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},fj="ngSkipHydration",pj="ngskiphydration";function XS(t){let e=t.mergedAttrs;if(e===null)return!1;for(let n=0;n<e.length;n+=2){let i=e[n];if(typeof i=="number")return!1;if(typeof i=="string"&&i.toLowerCase()===pj)return!0}return!1}function ZS(t){return t.hasAttribute(fj)}function _f(t){return(t.flags&128)===128}function gj(t){if(_f(t))return!0;let e=t.parent;for(;e;){if(_f(t)||XS(e))return!0;e=e.parent}return!1}var eA=new Map,mj=0;function _j(){return mj++}function yj(t){eA.set(t[kf],t)}function vj(t){eA.delete(t[kf])}var T1="__ngContext__";function ps(t,e){yr(e)?(t[T1]=e[kf],yj(e)):t[T1]=e}function tA(t){return iA(t[nu])}function nA(t){return iA(t[Ii])}function iA(t){for(;t!==null&&!Yi(t);)t=t[Ii];return t}var iy;function rA(t){iy=t}function Bf(){if(iy!==void 0)return iy;if(typeof document<"u")return document;throw new ne(210,!1)}var jf=new j("",{providedIn:"root",factory:()=>wj}),wj="ng",iv=new j(""),$t=new j("",{providedIn:"platform",factory:()=>"unknown"});var rv=new j("",{providedIn:"root",factory:()=>Bf().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Ej(){let t=new yo;return N($t)==="browser"&&(t.store=bj(Bf(),N(jf))),t}var yo=(()=>{let e=class e{constructor(){this.store={},this.onSerializeCallbacks={}}get(i,r){return this.store[i]!==void 0?this.store[i]:r}set(i,r){this.store[i]=r}remove(i){delete this.store[i]}hasKey(i){return this.store.hasOwnProperty(i)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(i,r){this.onSerializeCallbacks[i]=r}toJson(){for(let i in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(i))try{this.store[i]=this.onSerializeCallbacks[i]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}};e.\u0275prov=q({token:e,providedIn:"root",factory:Ej});let t=e;return t})();function bj(t,e){let n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(i){console.warn("Exception while restoring TransferState for app "+e,i)}return{}}var sA="h",oA="b",ry=function(t){return t.FirstChild="f",t.NextSibling="n",t}(ry||{}),Ij="e",Cj="t",sv="c",aA="x",yf="r",Tj="i",Dj="n",Sj="d",Aj="__nghData__",cA=Aj,M_="ngh",Rj="nghm",lA=()=>null;function Mj(t,e,n=!1){let i=t.getAttribute(M_);if(i==null)return null;let[r,s]=i.split("|");if(i=n?s:r,!i)return null;let o=s?`|${s}`:"",a=n?r:o,c={};if(i!==""){let d=e.get(yo,null,{optional:!0});d!==null&&(c=d.get(cA,[])[Number(i)])}let u={data:c,firstChild:t.firstChild??null};return n&&(u.firstChild=t,Uf(u,0,t.nextSibling)),a?t.setAttribute(M_,a):t.removeAttribute(M_),u}function xj(){lA=Mj}function ov(t,e,n=!1){return lA(t,e,n)}function Nj(t){let e=t._lView;return e[de].type===2?null:(yS(e)&&(e=e[yt]),e)}function Oj(t){return t.textContent?.replace(/\s/gm,"")}function Pj(t){let e=Bf(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(s){let o=Oj(s);return o==="ngetn"||o==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),i,r=[];for(;i=n.nextNode();)r.push(i);for(let s of r)s.textContent==="ngetn"?s.replaceWith(e.createTextNode("")):s.remove()}function Uf(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function sy(t,e){return t.segmentHeads?.[e]??null}function kj(t,e){let n=t.data,i=n[Ij]?.[e]??null;return i===null&&n[sv]?.[e]&&(i=av(t,e)),i}function uA(t,e){return t.data[sv]?.[e]??null}function av(t,e){let n=uA(t,e)??[],i=0;for(let r of n)i+=r[yf]*(r[aA]??1);return i}function $f(t,e){if(typeof t.disconnectedNodes>"u"){let n=t.data[Sj];t.disconnectedNodes=n?new Set(n):null}return!!t.disconnectedNodes?.has(e)}var Yh=new j(""),dA=!1,hA=new j("",{providedIn:"root",factory:()=>dA}),Fj=new j("");var oy=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${E2})`}};function Hf(t){return t instanceof oy?t.changingThisBreaksApplicationSecurity:t}var Lj=/^>|^->|<!--|-->|--!>|<!-$/g,Vj=/(<|>)/g,Bj="\u200B$1\u200B";function jj(t){return t.replace(Lj,e=>e.replace(Vj,Bj))}function Uj(t){return t.ownerDocument.body}function fA(t){return t instanceof Function?t():t}function Jh(t){return(t??N(Re)).get($t)==="browser"}var br=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(br||{}),$j;function cv(t,e){return $j(t,e)}function Ga(t,e,n,i,r){if(i!=null){let s,o=!1;Yi(i)?s=i:yr(i)&&(o=!0,i=i[$n]);let a=Ci(i);t===0&&n!==null?r==null?_A(e,n,a):wf(e,n,a,r||null,!0):t===1&&n!==null?wf(e,n,a,r||null,!0):t===2?fv(e,a,o):t===3&&e.destroyNode(a),s!=null&&iU(e,t,s,n,r)}}function lv(t,e){return t.createText(e)}function Hj(t,e,n){t.setValue(e,n)}function uv(t,e){return t.createComment(jj(e))}function Gf(t,e,n){return t.createElement(e,n)}function Gj(t,e){pA(t,e),e[$n]=null,e[Gn]=null}function zj(t,e,n,i,r,s){i[$n]=r,i[Gn]=e,qf(t,i,n,1,r,s)}function pA(t,e){e[Ki].changeDetectionScheduler?.notify(1),qf(t,e,e[Ke],2,null,null)}function qj(t){let e=t[nu];if(!e)return x_(t[de],t);for(;e;){let n=null;if(yr(e))n=e[nu];else{let i=e[vn];i&&(n=i)}if(!n){for(;e&&!e[Ii]&&e!==t;)yr(e)&&x_(e[de],e),e=e[Bt];e===null&&(e=t),yr(e)&&x_(e[de],e),n=e&&e[Ii]}e=n}}function Wj(t,e,n,i){let r=vn+i,s=n.length;i>0&&(n[r-1][Ii]=e),i<s-vn?(e[Ii]=n[r],Z1(n,vn+i,e)):(n.push(e),e[Ii]=null),e[Bt]=n;let o=e[du];o!==null&&n!==o&&Kj(o,e);let a=e[vr];a!==null&&a.insertView(t),Q_(e),e[le]|=128}function Kj(t,e){let n=t[Ya],r=e[Bt][Bt][Hn];e[Hn]!==r&&(t[le]|=Gy.HasTransplantedViews),n===null?t[Ya]=[e]:n.push(e)}function gA(t,e){let n=t[Ya],i=n.indexOf(e);n.splice(i,1)}function vf(t,e){if(t.length<=vn)return;let n=vn+e,i=t[n];if(i){let r=i[du];r!==null&&r!==t&&gA(r,i),e>0&&(t[n-1][Ii]=i[Ii]);let s=uf(t,vn+e);Gj(i[de],i);let o=s[vr];o!==null&&o.detachView(s[de]),i[Bt]=null,i[Ii]=null,i[le]&=-129}return i}function dv(t,e){if(!(e[le]&256)){let n=e[Ke];n.destroyNode&&qf(t,e,n,3,null,null),qj(e)}}function x_(t,e){if(e[le]&256)return;let n=Pe(null);try{e[le]&=-129,e[le]|=256,e[co]&&xD(e[co]),Yj(t,e),Qj(t,e),e[de].type===1&&e[Ke].destroy();let i=e[du];if(i!==null&&Yi(e[Bt])){i!==e[Bt]&&gA(i,e);let r=e[vr];r!==null&&r.detachView(t)}vj(e)}finally{Pe(n)}}function Qj(t,e){let n=t.cleanup,i=e[tu];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else{let o=i[n[s+1]];n[s].call(o)}i!==null&&(e[tu]=null);let r=e[ds];if(r!==null){e[ds]=null;for(let s=0;s<r.length;s++){let o=r[s];o()}}}function Yj(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof uo)){let s=n[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],c=s[o+1];zi(4,a,c);try{c.call(a)}finally{zi(5,a,c)}}else{zi(4,r,s);try{s.call(r)}finally{zi(5,r,s)}}}}}function mA(t,e,n){return Jj(t,e.parent,n)}function Jj(t,e,n){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return n[$n];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:s}=t.data[i.directiveStart+r];if(s===Wi.None||s===Wi.Emulated)return null}return zn(i,n)}}function wf(t,e,n,i,r){t.insertBefore(e,n,i,r)}function _A(t,e,n){t.appendChild(e,n)}function D1(t,e,n,i,r){i!==null?wf(t,e,n,i,r):_A(t,e,n)}function Xj(t,e,n,i){t.removeChild(e,n,i)}function hv(t,e){return t.parentNode(e)}function Zj(t,e){return t.nextSibling(e)}function yA(t,e,n){return tU(t,e,n)}function eU(t,e,n){return t.type&40?zn(t,n):null}var tU=eU,S1;function zf(t,e,n,i){let r=mA(t,i,e),s=e[Ke],o=i.parent||e[Gn],a=yA(o,i,e);if(r!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)D1(s,r,n[c],a,!1);else D1(s,r,n,a,!1);S1!==void 0&&S1(s,i,e,n,r)}function of(t,e){if(e!==null){let n=e.type;if(n&3)return zn(e,t);if(n&4)return ay(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return of(t,i);{let r=t[e.index];return Yi(r)?ay(-1,r):Ci(r)}}else{if(n&32)return cv(e,t)()||Ci(t[e.index]);{let i=vA(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=su(t[Hn]);return of(r,i)}else return of(t,e.next)}}}return null}function vA(t,e){if(e!==null){let i=t[Hn][Gn],r=e.projection;return i.projection[r]}return null}function ay(t,e){let n=vn+t+1;if(n<e.length){let i=e[n],r=i[de].firstChild;if(r!==null)return of(i,r)}return e[wr]}function fv(t,e,n){let i=hv(t,e);i&&Xj(t,i,e,n)}function wA(t){t.textContent=""}function pv(t,e,n,i,r,s,o){for(;n!=null;){let a=i[n.index],c=n.type;if(o&&e===0&&(a&&ps(Ci(a),i),n.flags|=2),(n.flags&32)!==32)if(c&8)pv(t,e,n.child,i,r,s,!1),Ga(e,t,r,a,s);else if(c&32){let u=cv(n,i),d;for(;d=u();)Ga(e,t,r,d,s);Ga(e,t,r,a,s)}else c&16?EA(t,e,i,n,r,s):Ga(e,t,r,a,s);n=o?n.projectionNext:n.next}}function qf(t,e,n,i,r,s){pv(n,i,t.firstChild,e,r,s,!1)}function nU(t,e,n){let i=e[Ke],r=mA(t,n,e),s=n.parent||e[Gn],o=yA(s,n,e);EA(i,0,e,n,r,o)}function EA(t,e,n,i,r,s){let o=n[Hn],c=o[Gn].projection[i.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];Ga(e,t,r,d,s)}else{let u=c,d=o[Bt];_f(i)&&(u.flags|=128),pv(t,e,u,d,r,s,!0)}}function iU(t,e,n,i,r){let s=n[wr],o=Ci(n);s!==o&&Ga(e,t,i,s,r);for(let a=vn;a<n.length;a++){let c=n[a];qf(c[de],c,t,e,i,s)}}function rU(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let s=i.indexOf("-")===-1?void 0:br.DashCase;r==null?t.removeStyle(n,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=br.Important),t.setStyle(n,i,r,s))}}function sU(t,e,n){t.setAttribute(e,"style",n)}function bA(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function IA(t,e,n){let{mergedAttrs:i,classes:r,styles:s}=n;i!==null&&G_(t,e,i),r!==null&&bA(t,e,r),s!==null&&sU(t,e,s)}var Dr={};function ce(t=1){CA(Rt(),Se(),mo()+t,!1)}function CA(t,e,n,i){if(!i)if((e[le]&3)===3){let s=t.preOrderCheckHooks;s!==null&&nf(e,s,n)}else{let s=t.preOrderHooks;s!==null&&rf(e,s,0,n)}lo(n)}function Y(t,e=Ee.Default){let n=Se();if(n===null)return $(t,e);let i=qn();return WS(i,n,mn(t),e)}function TA(t,e,n,i,r,s){let o=Pe(null);try{let a=null;r&Vt.SignalBased&&(a=e[i][Aa]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),r&Vt.HasDecoratorInputTransform&&(s=t.inputTransforms[i].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,i):vS(e,a,i,s)}finally{Pe(o)}}function oU(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)lo(~r);else{let s=r,o=n[++i],a=n[++i];GB(o,s);let c=e[s];a(2,c)}}}finally{lo(-1)}}function Wf(t,e,n,i,r,s,o,a,c,u,d){let f=e.blueprint.slice();return f[$n]=r,f[le]=i|4|128|8|64,(u!==null||t&&t[le]&2048)&&(f[le]|=2048),DS(f),f[Bt]=f[ec]=t,f[ni]=n,f[Ki]=o||t&&t[Ki],f[Ke]=a||t&&t[Ke],f[Qa]=c||t&&t[Qa]||null,f[Gn]=s,f[kf]=_j(),f[ti]=d,f[mS]=u,f[Hn]=e.type==2?t[Hn]:f,f}function ic(t,e,n,i,r){let s=t.data[e];if(s===null)s=aU(t,e,n,i,r),HB()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=i,s.attrs=r;let o=jB();s.injectorIndex=o===null?-1:o.injectorIndex}return go(s,!0),s}function aU(t,e,n,i,r){let s=RS(),o=Qy(),a=o?s:s&&s.parent,c=t.data[e]=pU(t,a,n,e,i,r);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function DA(t,e,n,i){if(n===0)return-1;let r=e.length;for(let s=0;s<n;s++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function SA(t,e,n,i,r){let s=mo(),o=i&2;try{lo(-1),o&&e.length>yt&&CA(t,e,yt,!1),zi(o?2:0,r),n(i,r)}finally{lo(s),zi(o?3:1,r)}}function gv(t,e,n){if(zy(e)){let i=Pe(null);try{let r=e.directiveStart,s=e.directiveEnd;for(let o=r;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{Pe(i)}}}function mv(t,e,n){AS()&&(wU(t,e,n,zn(n,e)),(n.flags&64)===64&&NA(t,e,n))}function _v(t,e,n=zn){let i=e.localNames;if(i!==null){let r=e.index+1;for(let s=0;s<i.length;s+=2){let o=i[s+1],a=o===-1?n(e,t):t[o];t[r++]=a}}}function AA(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=yv(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function yv(t,e,n,i,r,s,o,a,c,u,d){let f=yt+i,g=f+r,m=cU(f,g),v=typeof u=="function"?u():u;return m[de]={type:t,blueprint:m,template:n,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:v,incompleteFirstPass:!1,ssrId:d}}function cU(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:Dr);return n}function lU(t,e,n,i){let s=i.get(hA,dA)||n===Wi.ShadowDom,o=t.selectRootElement(e,s);return uU(o),o}function uU(t){RA(t)}var RA=()=>null;function dU(t){ZS(t)?wA(t):Pj(t)}function hU(){RA=dU}function fU(t,e,n,i){let r=kA(e);r.push(n),t.firstCreatePass&&FA(t).push(i,r.length-1)}function pU(t,e,n,i,r,s){let o=e?e.injectorIndex:-1,a=0;return tc()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function A1(t,e,n,i,r){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;i??={};let a,c=Vt.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let u=s;if(r!==null){if(!r.hasOwnProperty(s))continue;u=r[s]}t===0?R1(i,n,u,a,c):R1(i,n,u,a)}return i}function R1(t,e,n,i,r){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,i):s=t[n]=[e,i],r!==void 0&&s.push(r)}function gU(t,e,n){let i=e.directiveStart,r=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,u=null;for(let d=i;d<r;d++){let f=s[d],g=n?n.get(f):null,m=g?g.inputs:null,v=g?g.outputs:null;c=A1(0,f.inputs,d,c,m),u=A1(1,f.outputs,d,u,v);let D=c!==null&&o!==null&&!$y(e)?xU(c,d,o):null;a.push(D)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function mU(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function MA(t,e,n,i,r,s,o,a){let c=zn(e,n),u=e.inputs,d;!a&&u!=null&&(d=u[i])?(wv(t,n,d,i,r),hu(e)&&_U(n,e.index)):e.type&3?(i=mU(i),r=o!=null?o(r,e.value||"",i):r,s.setProperty(c,i,r)):e.type&12}function _U(t,e){let n=_s(e,t);n[le]&16||(n[le]|=64)}function vv(t,e,n,i){if(AS()){let r=i===null?null:{"":-1},s=bU(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&xA(t,e,n,o,r,a),r&&IU(n,i,r)}n.mergedAttrs=Zl(n.mergedAttrs,n.attrs)}function xA(t,e,n,i,r,s){for(let u=0;u<i.length;u++)X_(mf(n,e),t,i[u].type);TU(n,t.data.length,i.length);for(let u=0;u<i.length;u++){let d=i[u];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=DA(t,e,i.length,null);for(let u=0;u<i.length;u++){let d=i[u];n.mergedAttrs=Zl(n.mergedAttrs,d.hostAttrs),DU(t,n,e,c,d),CU(c,d,r),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let f=d.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}gU(t,n,s)}function yU(t,e,n,i,r){let s=r.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;vU(o)!=a&&o.push(a),o.push(n,i,s)}}function vU(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function wU(t,e,n,i){let r=n.directiveStart,s=n.directiveEnd;hu(n)&&SU(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||mf(n,e),ps(i,e);let o=n.initialInputs;for(let a=r;a<s;a++){let c=t.data[a],u=ho(e,t,a,n);if(ps(u,e),o!==null&&MU(e,a-r,u,c,n,o),fs(c)){let d=_s(n.index,e);d[ni]=ho(e,t,a,n)}}}function NA(t,e,n){let i=n.directiveStart,r=n.directiveEnd,s=n.index,o=zB();try{lo(s);for(let a=i;a<r;a++){let c=t.data[a],u=e[a];Y_(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&EU(c,u)}}finally{lo(-1),Y_(o)}}function EU(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function bU(t,e){let n=t.directiveRegistry,i=null,r=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(rS(e,o.selectors,!1))if(i||(i=[]),fs(o))if(o.findHostDirectiveDefs!==null){let a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o);let c=a.length;cy(t,e,c)}else i.unshift(o),cy(t,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return i===null?null:[i,r]}function cy(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function IU(t,e,n){if(e){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let s=n[e[r+1]];if(s==null)throw new ne(-301,!1);i.push(e[r],s)}}}function CU(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;fs(e)&&(n[""]=t)}}function TU(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function DU(t,e,n,i,r){t.data[i]=r;let s=r.factory||(r.factory=oo(r.type,!0)),o=new uo(s,fs(r),Y);t.blueprint[i]=o,n[i]=o,yU(t,e,i,DA(t,n,r.hostVars,Dr),r)}function SU(t,e,n){let i=zn(e,t),r=AA(n),s=t[Ki].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Kf(t,Wf(t,r,null,o,i,e,null,s.createRenderer(i,n),null,null,null));t[e.index]=a}function AU(t,e,n,i,r,s){let o=zn(t,e);RU(e[Ke],o,s,t.value,n,i,r)}function RU(t,e,n,i,r,s,o){if(s==null)t.removeAttribute(e,r,n);else{let a=o==null?Vy(s):o(s,i||"",r);t.setAttribute(e,r,a,n)}}function MU(t,e,n,i,r,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],u=o[a++],d=o[a++],f=o[a++];TA(i,n,c,u,d,f)}}function xU(t,e,n){let i=null,r=0;for(;r<n.length;){let s=n[r];if(s===0){r+=4;continue}else if(s===5){r+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){i===null&&(i=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){i.push(s,o[a+1],o[a+2],n[r+1]);break}}r+=2}return i}function OA(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function PA(t,e){let n=t.contentQueries;if(n!==null){let i=Pe(null);try{for(let r=0;r<n.length;r+=2){let s=n[r],o=n[r+1];if(o!==-1){let a=t.data[o];Jy(s),a.contentQueries(2,e[o],o)}}}finally{Pe(i)}}}function Kf(t,e){return t[nu]?t[v1][Ii]=e:t[nu]=e,t[v1]=e,e}function ly(t,e,n){Jy(0);let i=Pe(null);try{e(t,n)}finally{Pe(i)}}function kA(t){return t[tu]||(t[tu]=[])}function FA(t){return t.cleanup||(t.cleanup=[])}function LA(t,e){let n=t[Qa],i=n?n.get(Er,null):null;i&&i.handleError(e)}function wv(t,e,n,i,r){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],u=e[o],d=t.data[o];TA(d,u,i,a,c,r)}}function NU(t,e,n){let i=CS(e,t);Hj(t[Ke],i,n)}function OU(t,e){let n=_s(e,t),i=n[de];PU(i,n);let r=n[$n];r!==null&&n[ti]===null&&(n[ti]=ov(r,n[Qa])),Ev(i,n,n[ni])}function PU(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Ev(t,e,n){Xy(e);try{let i=t.viewQuery;i!==null&&ly(1,i,n);let r=t.template;r!==null&&SA(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[vr]?.finishViewCreation(t),t.staticContentQueries&&PA(t,e),t.staticViewQueries&&ly(2,t.viewQuery,n);let s=t.components;s!==null&&kU(e,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[le]&=-5,Zy()}}function kU(t,e){for(let n=0;n<e.length;n++)OU(t,e[n])}function VA(t,e,n,i){let r=Pe(null);try{let s=e.tView,a=t[le]&4096?4096:16,c=Wf(t,s,n,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),u=t[e.index];c[du]=u;let d=t[vr];return d!==null&&(c[vr]=d.createEmbeddedView(s)),Ev(s,c,n),c}finally{Pe(r)}}function FU(t,e){let n=vn+e;if(n<t.length)return t[n]}function uy(t,e){return!e||e.firstChild===null||_f(t)}function BA(t,e,n,i=!0){let r=e[de];if(Wj(r,e,t,n),i){let o=ay(n,t),a=e[Ke],c=hv(a,t[wr]);c!==null&&zj(r,t[Gn],a,e,c,o)}let s=e[ti];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function LU(t,e){let n=vf(t,e);return n!==void 0&&dv(n[de],n),n}function Ef(t,e,n,i,r=!1){for(;n!==null;){let s=e[n.index];s!==null&&i.push(Ci(s)),Yi(s)&&VU(s,i);let o=n.type;if(o&8)Ef(t,e,n.child,i);else if(o&32){let a=cv(n,e),c;for(;c=a();)i.push(c)}else if(o&16){let a=vA(e,n);if(Array.isArray(a))i.push(...a);else{let c=su(e[Hn]);Ef(c[de],c,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function VU(t,e){for(let n=vn;n<t.length;n++){let i=t[n],r=i[de].firstChild;r!==null&&Ef(i[de],i,r,e)}t[wr]!==t[$n]&&e.push(t[wr])}var jA=[];function BU(t){return t[co]??jU(t)}function jU(t){let e=jA.pop()??Object.create($U);return e.lView=t,e}function UU(t){t.lView[co]!==t&&(t.lView=null,jA.push(t))}var $U=ye(B({},e_),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ru(t.lView)},consumerOnSignalRead(){this.lView[co]=this}}),UA=100;function $A(t,e=!0,n=0){let i=t[Ki],r=i.rendererFactory,s=!1;s||r.begin?.();try{HU(t,n)}catch(o){throw e&&LA(t,o),o}finally{s||(r.end?.(),i.inlineEffectRunner?.flush())}}function HU(t,e){dy(t,e);let n=0;for(;Ky(t);){if(n===UA)throw new ne(103,!1);n++,dy(t,1)}}function GU(t,e,n,i){let r=e[le];if((r&256)===256)return;let s=!1;!s&&e[Ki].inlineEffectRunner?.flush(),Xy(e);let o=null,a=null;!s&&zU(t)&&(a=BU(e),o=RD(a));try{DS(e),$B(t.bindingStartIndex),n!==null&&SA(t,e,n,2,i);let c=(r&3)===3;if(!s)if(c){let f=t.preOrderCheckHooks;f!==null&&nf(e,f,null)}else{let f=t.preOrderHooks;f!==null&&rf(e,f,0,null),D_(e,0)}if(qU(e),HA(e,0),t.contentQueries!==null&&PA(t,e),!s)if(c){let f=t.contentCheckHooks;f!==null&&nf(e,f)}else{let f=t.contentHooks;f!==null&&rf(e,f,1),D_(e,1)}oU(t,e);let u=t.components;u!==null&&zA(e,u,0);let d=t.viewQuery;if(d!==null&&ly(2,d,i),!s)if(c){let f=t.viewCheckHooks;f!==null&&nf(e,f)}else{let f=t.viewHooks;f!==null&&rf(e,f,2),D_(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[T_]){for(let f of e[T_])f();e[T_]=null}s||(e[le]&=-73)}catch(c){throw ru(e),c}finally{a!==null&&(MD(a,o),UU(a)),Zy()}}function zU(t){return t.type!==2}function HA(t,e){for(let n=tA(t);n!==null;n=nA(n))for(let i=vn;i<n.length;i++){let r=n[i];GA(r,e)}}function qU(t){for(let e=tA(t);e!==null;e=nA(e)){if(!(e[le]&Gy.HasTransplantedViews))continue;let n=e[Ya];for(let i=0;i<n.length;i++){let r=n[i],s=r[Bt];xB(r)}}}function WU(t,e,n){let i=_s(e,t);GA(i,n)}function GA(t,e){Wy(t)&&dy(t,e)}function dy(t,e){let i=t[de],r=t[le],s=t[co],o=!!(e===0&&r&16);if(o||=!!(r&64&&e===0),o||=!!(r&1024),o||=!!(s?.dirty&&t_(s)),s&&(s.dirty=!1),t[le]&=-9217,o)GU(i,t,i.template,t[ni]);else if(r&8192){HA(t,1);let a=i.components;a!==null&&zA(t,a,1)}}function zA(t,e,n){for(let i=0;i<e.length;i++)WU(t,e[i],n)}function bv(t){for(t[Ki].changeDetectionScheduler?.notify();t;){t[le]|=64;let e=su(t);if(yS(t)&&!e)return t;t=e}return null}var fo=class{get rootNodes(){let e=this._lView,n=e[de];return Ef(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ni]}set context(e){this._lView[ni]=e}get destroyed(){return(this._lView[le]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Bt];if(Yi(e)){let n=e[hf],i=n?n.indexOf(this):-1;i>-1&&(vf(e,i),uf(n,i))}this._attachedToViewContainer=!1}dv(this._lView[de],this._lView)}onDestroy(e){SS(this._lView,e)}markForCheck(){bv(this._cdRefInjectingView||this._lView)}detach(){this._lView[le]&=-129}reattach(){Q_(this._lView),this._lView[le]|=128}detectChanges(){this._lView[le]|=1024,$A(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,pA(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ne(902,!1);this._appRef=e,Q_(this._lView)}},Qi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=YU;let t=e;return t})(),KU=Qi,QU=class extends KU{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){let r=VA(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:i});return new fo(r)}};function YU(){return Qf(qn(),Se())}function Qf(t,e){return t.type&4?new QU(e,t,nc(t,e)):null}function qA(t){let e=t[iu]??[],i=t[Bt][Ke];for(let r of e)JU(r,i);t[iu]=_n}function JU(t,e){let n=0,i=t.firstChild;if(i){let r=t.data[yf];for(;n<r;){let s=i.nextSibling;fv(e,i,!1),i=s,n++}}}function WA(t){qA(t);for(let e=vn;e<t.length;e++)bf(t[e])}function XU(t){let e=t[ti]?.i18nNodes;if(e){let n=t[Ke];for(let i of e.values())fv(n,i,!1);t[ti].i18nNodes=void 0}}function bf(t){XU(t);let e=t[de];for(let n=yt;n<e.bindingStartIndex;n++)if(Yi(t[n])){let i=t[n];WA(i)}else yr(t[n])&&bf(t[n])}function ZU(t){let e=t._views;for(let n of e){let i=Nj(n);if(i!==null&&i[$n]!==null)if(yr(i))bf(i);else{let r=i[$n];bf(r),WA(i)}}}var e$=new RegExp(`^(\\d+)*(${oA}|${sA})*(.*)`);function t$(t){let e=t.match(e$),[n,i,r,s]=e,o=i?parseInt(i,10):r,a=[];for(let[c,u,d]of s.matchAll(/(f|n)(\d*)/g)){let f=parseInt(d,10)||1;a.push(u,f)}return[o,...a]}function n$(t){return!t.prev&&t.parent?.type===8}function N_(t){return t.index-yt}function i$(t,e){let n=t.i18nNodes;if(n){let i=n.get(e);return i&&n.delete(e),i}return null}function Yf(t,e,n,i){let r=N_(i),s=i$(t,r);if(!s){let o=t.data[Dj];if(o?.[r])s=s$(o[r],n);else if(e.firstChild===i)s=t.firstChild;else{let a=i.prev===null,c=i.prev??i.parent;if(n$(i)){let u=N_(i.parent);s=sy(t,u)}else{let u=zn(c,n);if(a)s=u.firstChild;else{let d=N_(c),f=sy(t,d);if(c.type===2&&f){let m=av(t,d)+1;s=Jf(m,f)}else s=u.nextSibling}}}}return s}function Jf(t,e){let n=e;for(let i=0;i<t;i++)n=n.nextSibling;return n}function r$(t,e){let n=t;for(let i=0;i<e.length;i+=2){let r=e[i],s=e[i+1];for(let o=0;o<s;o++)switch(r){case ry.FirstChild:n=n.firstChild;break;case ry.NextSibling:n=n.nextSibling;break}}return n}function s$(t,e){let[n,...i]=t$(t),r;if(n===sA)r=e[Hn][$n];else if(n===oA)r=Uj(e[Hn][$n]);else{let s=Number(n);r=Ci(e[s+yt])}return r$(r,i)}function o$(t,e){let n=[];for(let i of e)for(let r=0;r<(i[aA]??1);r++){let s={data:i,firstChild:null};i[yf]>0&&(s.firstChild=t,t=Jf(i[yf],t)),n.push(s)}return[t,n]}var KA=()=>null;function a$(t,e){let n=t[iu];return!e||n===null||n.length===0?null:n[0].data[Tj]===e?n.shift():(qA(t),null)}function c$(){KA=a$}function hy(t,e){return KA(t,e)}var fy=class{},py=class{},If=class{};function l$(t){let e=Error(`No component factory found for ${yn(t)}.`);return e[u$]=t,e}var u$="ngComponent";var gy=class{resolveComponentFactory(e){throw l$(e)}},rc=(()=>{let e=class e{};e.NULL=new gy;let t=e;return t})(),ou=class{},vo=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>d$();let t=e;return t})();function d$(){let t=Se(),e=qn(),n=_s(e.index,t);return(yr(n)?n:t)[Ke]}var h$=(()=>{let e=class e{};e.\u0275prov=q({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),O_={};var M1=new Set;function wo(t){M1.has(t)||(M1.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function x1(...t){}function f$(){let t=typeof Yl.requestAnimationFrame=="function",e=Yl[t?"requestAnimationFrame":"setTimeout"],n=Yl[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);let r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var te=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ue(!1),this.onMicrotaskEmpty=new Ue(!1),this.onStable=new Ue(!1),this.onError=new Ue(!1),typeof Zone>"u")throw new ne(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=f$().nativeRequestAnimationFrame,m$(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new ne(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new ne(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,p$,x1,x1);try{return s.runTask(o,n,i)}finally{s.cancelTask(o)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},p$={};function Iv(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function g$(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Yl,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,my(t),t.isCheckStableRunning=!0,Iv(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),my(t))}function m$(t){let e=()=>{g$(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,s,o,a)=>{if(_$(a))return n.invokeTask(r,s,o,a);try{return N1(t),n.invokeTask(r,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),O1(t)}},onInvoke:(n,i,r,s,o,a,c)=>{try{return N1(t),n.invoke(r,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),O1(t)}},onHasTask:(n,i,r,s)=>{n.hasTask(r,s),i===r&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,my(t),Iv(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,i,r,s)=>(n.handleError(r,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function my(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function N1(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function O1(t){t._nesting--,Iv(t)}function _$(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var QA=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of i)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=q({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Cf(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)r=j_(r,a);else if(s==2){let c=a,u=e[++o];i=j_(i,c+": "+u+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}var Tf=class extends rc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=hs(e);return new Xa(n,this.ngModule)}};function P1(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let i=t[n];i!==void 0&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return e}function y$(t){let e=t.toLowerCase();return e==="svg"?IS:e==="math"?DB:null}var _y=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=Nf(i);let r=this.injector.get(e,O_,i);return r!==O_||n===O_?r:this.parentInjector.get(e,n,i)}},Xa=class extends If{get inputs(){let e=this.componentDef,n=e.inputTransforms,i=P1(e.inputs);if(n!==null)for(let r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return P1(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=sB(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){let s=Pe(null);try{r=r||this.ngModule;let o=r instanceof wn?r:r?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new _y(e,o):e,c=a.get(ou,null);if(c===null)throw new ne(407,!1);let u=a.get(h$,null),d=a.get(QA,null),f=a.get(fy,null),g={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:f},m=c.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",D=i?lU(m,i,this.componentDef.encapsulation,a):Gf(m,v,y$(v)),C=512;this.componentDef.signals?C|=4096:this.componentDef.onPush||(C|=16);let x=null;D!==null&&(x=ov(D,a,!0));let k=yv(0,null,null,1,0,null,null,null,null,null,null),P=Wf(null,k,null,C,null,null,g,m,a,null,x);Xy(P);let F,Z;try{let W=this.componentDef,b,y=null;W.findHostDirectiveDefs?(b=[],y=new Map,W.findHostDirectiveDefs(W,b,y),b.push(W)):b=[W];let w=v$(P,D),I=w$(w,D,W,b,P,g,m);Z=qy(k,yt),D&&I$(m,W,D,i),n!==void 0&&C$(Z,this.ngContentSelectors,n),F=b$(I,W,b,y,P,[T$]),Ev(k,P,null)}finally{Zy()}return new yy(this.componentType,F,nc(Z,P),P,Z)}finally{Pe(s)}}},yy=class extends py{constructor(e,n,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new fo(r,void 0,!1),this.componentType=e}setInput(e,n){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;wv(s[de],s,r,e,n),this.previousInputValues.set(e,n);let o=_s(this._tNode.index,s);bv(o)}}get injector(){return new so(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function v$(t,e){let n=t[de],i=yt;return t[i]=e,ic(n,i,2,"#host",null)}function w$(t,e,n,i,r,s,o){let a=r[de];E$(i,t,e,o);let c=null;e!==null&&(c=ov(e,r[Qa]));let u=s.rendererFactory.createRenderer(e,n),d=16;n.signals?d=4096:n.onPush&&(d=64);let f=Wf(r,AA(n),null,d,r[t.index],t,s,u,null,null,c);return a.firstCreatePass&&cy(a,t,i.length-1),Kf(r,f),r[t.index]=f}function E$(t,e,n,i){for(let r of t)e.mergedAttrs=Zl(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(Cf(e,e.mergedAttrs,!0),n!==null&&IA(i,n,e))}function b$(t,e,n,i,r,s){let o=qn(),a=r[de],c=zn(o,r);xA(a,r,o,n,null,i);for(let d=0;d<n.length;d++){let f=o.directiveStart+d,g=ho(r,a,f,o);ps(g,r)}NA(a,r,o),c&&ps(c,r);let u=ho(r,a,o.directiveStart+o.componentOffset,o);if(t[ni]=r[ni]=u,s!==null)for(let d of s)d(u,e);return gv(a,o,r),u}function I$(t,e,n,i){if(i)G_(t,n,["ng-version","17.3.11"]);else{let{attrs:r,classes:s}=oB(e.selectors[0]);r&&G_(t,n,r),s&&s.length>0&&bA(t,n,s.join(" "))}}function C$(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let s=n[r];i.push(s!=null?Array.from(s):null)}}function T$(){let t=qn();Vf(Se()[de],t)}var Xi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=D$;let t=e;return t})();function D$(){let t=qn();return JA(t,Se())}var S$=Xi,YA=class extends S${constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return nc(this._hostTNode,this._hostLView)}get injector(){return new so(this._hostTNode,this._hostLView)}get parentInjector(){let e=tv(this._hostTNode,this._hostLView);if(US(e)){let n=pf(e,this._hostLView),i=ff(e),r=n[de].data[i+8];return new so(r,n)}else return new so(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=k1(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-vn}createEmbeddedView(e,n,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let o=hy(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,r,uy(this._hostTNode,o)),a}createComponent(e,n,i,r,s){let o=e&&!bB(e),a;if(o)a=n;else{let v=n||{};a=v.index,i=v.injector,r=v.projectableNodes,s=v.environmentInjector||v.ngModuleRef}let c=o?e:new Xa(hs(e)),u=i||this.parentInjector;if(!s&&c.ngModule==null){let D=(o?u:this.parentInjector).get(wn,null);D&&(s=D)}let d=hs(c.componentType??{}),f=hy(this._lContainer,d?.id??null),g=f?.firstChild??null,m=c.create(u,r,g,s);return this.insertImpl(m.hostView,a,uy(this._hostTNode,f)),m}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if(MB(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[Bt],u=new YA(c,c[Gn],c[Bt]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return BA(o,r,s,i),e.attachToViewContainerRef(),Z1(P_(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=k1(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=vf(this._lContainer,n);i&&(uf(P_(this._lContainer),n),dv(i[de],i))}detach(e){let n=this._adjustIndex(e,-1),i=vf(this._lContainer,n);return i&&uf(P_(this._lContainer),n)!=null?new fo(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function k1(t){return t[hf]}function P_(t){return t[hf]||(t[hf]=[])}function JA(t,e){let n,i=e[t.index];return Yi(i)?n=i:(n=OA(i,e,null,t),e[t.index]=n,Kf(e,n)),XA(n,e,t,i),new YA(n,t,e)}function A$(t,e){let n=t[Ke],i=n.createComment(""),r=zn(e,t),s=hv(n,r);return wf(n,s,i,Zj(n,r),!1),i}var XA=ZA,Cv=()=>!1;function R$(t,e,n){return Cv(t,e,n)}function ZA(t,e,n,i){if(t[wr])return;let r;n.type&8?r=Ci(i):r=A$(e,n),t[wr]=r}function M$(t,e,n){if(t[wr]&&t[iu])return!0;let i=n[ti],r=e.index-yt;if(!i||gj(e)||$f(i,r))return!1;let o=sy(i,r),a=i.data[sv]?.[r],[c,u]=o$(o,a);return t[wr]=c,t[iu]=u,!0}function x$(t,e,n,i){Cv(t,n,e)||ZA(t,e,n,i)}function N$(){XA=x$,Cv=M$}var vy=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},wy=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let i=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let s=0;s<i;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];r.push(a.clone())}return new t(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Tv(e,n).matches!==null&&this.queries[n].setDirty()}},Ey=class{constructor(e,n,i=null){this.flags=n,this.read=i,typeof e=="string"?this.predicate=j$(e):this.predicate=e}},by=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Iy=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let s=i[r];this.matchTNodeWithReadOption(e,n,O$(n,s)),this.matchTNodeWithReadOption(e,n,sf(n,e,s,!1,!1))}else i===Qi?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,sf(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Xt||r===Xi||r===Qi&&n.type&4)this.addMatch(n.index,-2);else{let s=sf(n,e,r,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,i)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function O$(t,e){let n=t.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1]}return null}function P$(t,e){return t.type&11?nc(t,e):t.type&4?Qf(t,e):null}function k$(t,e,n,i){return n===-1?P$(e,t):n===-2?F$(t,e,i):ho(t,t[de],n,e)}function F$(t,e,n){if(n===Xt)return nc(e,t);if(n===Qi)return Qf(e,t);if(n===Xi)return JA(e,t)}function eR(t,e,n,i){let r=e[vr].queries[i];if(r.matches===null){let s=t.data,o=n.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let u=o[c];if(u<0)a.push(null);else{let d=s[u];a.push(k$(e,d,o[c+1],n.metadata.read))}}r.matches=a}return r.matches}function Cy(t,e,n,i){let r=t.queries.getByIndex(n),s=r.matches;if(s!==null){let o=eR(t,e,r,n);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)i.push(o[a/2]);else{let u=s[a+1],d=e[-c];for(let f=vn;f<d.length;f++){let g=d[f];g[du]===g[Bt]&&Cy(g[de],g,u,i)}if(d[Ya]!==null){let f=d[Ya];for(let g=0;g<f.length;g++){let m=f[g];Cy(m[de],m,u,i)}}}}}return i}function L$(t,e){return t[vr].queries[e].queryList}function V$(t,e,n){let i=new ny((n&4)===4);return fU(t,e,i,i.destroy),(e[vr]??=new wy).queries.push(new vy(i))-1}function B$(t,e,n){let i=Rt();return i.firstCreatePass&&(U$(i,new Ey(t,e,n),-1),(e&2)===2&&(i.staticViewQueries=!0)),V$(i,Se(),e)}function j$(t){return t.split(",").map(e=>e.trim())}function U$(t,e,n){t.queries===null&&(t.queries=new by),t.queries.track(new Iy(e,n))}function Tv(t,e){return t.queries.getByIndex(e)}function $$(t,e){let n=t[de],i=Tv(n,e);return i.crossesNgTemplate?Cy(n,t,e,[]):eR(n,t,i,e)}function tR(t,e){wo("NgSignals");let n=LD(t),i=n[Aa];return e?.equal&&(i.equal=e.equal),n.set=r=>n_(i,r),n.update=r=>VD(i,r),n.asReadonly=H$.bind(n),n}function H$(){let t=this[Aa];if(t.readonlyFn===void 0){let e=()=>this();e[Aa]=t,t.readonlyFn=e}return t.readonlyFn}function G$(t){return Object.getPrototypeOf(t.prototype).constructor}function Ti(t){let e=G$(t.type),n=!0,i=[t];for(;e;){let r;if(fs(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ne(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);let o=t;o.inputs=Xh(t.inputs),o.inputTransforms=Xh(t.inputTransforms),o.declaredInputs=Xh(t.declaredInputs),o.outputs=Xh(t.outputs);let a=r.hostBindings;a&&Q$(t,a);let c=r.viewQuery,u=r.contentQueries;if(c&&W$(t,c),u&&K$(t,u),z$(t,r),I2(t.outputs,r.outputs),fs(r)&&r.data.animation){let d=t.data;d.animation=(d.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Ti&&(n=!1)}}e=Object.getPrototypeOf(e)}q$(i)}function z$(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let i=e.inputs[n];if(i!==void 0&&(t.inputs[n]=i,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;t.inputTransforms??={},t.inputTransforms[r]=e.inputTransforms[r]}}}function q$(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Zl(r.hostAttrs,n=Zl(n,r.hostAttrs))}}function Xh(t){return t===Wa?{}:t===_n?[]:t}function W$(t,e){let n=t.viewQuery;n?t.viewQuery=(i,r)=>{e(i,r),n(i,r)}:t.viewQuery=e}function K$(t,e){let n=t.contentQueries;n?t.contentQueries=(i,r,s)=>{e(i,r,s),n(i,r,s)}:t.contentQueries=e}function Q$(t,e){let n=t.hostBindings;n?t.hostBindings=(i,r)=>{e(i,r),n(i,r)}:t.hostBindings=e}var gs=class{},au=class{};var Ty=class extends gs{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Tf(this);let r=lS(e);this._bootstrapComponents=fA(r.bootstrap),this._r3Injector=YS(e,n,[{provide:gs,useValue:this},{provide:rc,useValue:this.componentFactoryResolver},...i],yn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Dy=class extends au{constructor(e){super(),this.moduleType=e}create(e){return new Ty(this.moduleType,e,[])}};var Df=class extends gs{constructor(e){super(),this.componentFactoryResolver=new Tf(this),this.instance=null;let n=new eu([...e.providers,{provide:gs,useValue:this},{provide:rc,useValue:this.componentFactoryResolver}],e.parent||Pf(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Dv(t,e,n=null){return new Df({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var pu=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new tt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function nR(t){return J$(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function Y$(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),i;for(;!(i=n.next()).done;)e(i.value)}}function J$(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function X$(t,e,n){return t[e]=n}function ys(t,e,n){let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function gu(t){return(t.flags&32)===32}function Z$(t,e,n,i,r,s,o,a,c){let u=e.consts,d=ic(e,t,4,o||null,Ja(u,a));vv(e,n,d,Ja(u,c)),Vf(e,d);let f=d.tView=yv(2,d,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function rt(t,e,n,i,r,s,o,a){let c=Se(),u=Rt(),d=t+yt,f=u.firstCreatePass?Z$(d,u,c,e,n,i,r,s,o):u.data[d];go(f,!1);let g=iR(u,c,f,t);Lf()&&zf(u,c,g,f),ps(g,c);let m=OA(g,c,g,f);return c[d]=m,Kf(c,m),R$(m,f,c),Ff(f)&&mv(u,c,f),o!=null&&_v(c,f,a),rt}var iR=rR;function rR(t,e,n,i){return Ji(!0),e[Ke].createComment("")}function eH(t,e,n,i){let r=e[ti],s=!r||tc()||gu(n)||$f(r,i);if(Ji(s),s)return rR(t,e,n,i);let o=r.data[Cj]?.[i]??null;o!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=o);let a=Yf(r,t,e,n);Uf(r,i,a);let c=av(r,i);return Jf(c,a)}function tH(){iR=eH}function Eo(t,e,n,i){let r=Se(),s=fu();if(ys(r,s,e)){let o=Rt(),a=ev();AU(a,r,t,e,n,i)}return Eo}function nH(t,e,n,i){return ys(t,fu(),n)?e+Vy(n)+i:Dr}function Zh(t,e){return t<<17|e<<2}function po(t){return t>>17&32767}function iH(t){return(t&2)==2}function rH(t,e){return t&131071|e<<17}function Sy(t){return t|2}function Za(t){return(t&131068)>>2}function k_(t,e){return t&-131069|e<<2}function sH(t){return(t&1)===1}function Ay(t){return t|1}function oH(t,e,n,i,r,s){let o=s?e.classBindings:e.styleBindings,a=po(o),c=Za(o);t[i]=n;let u=!1,d;if(Array.isArray(n)){let f=n;d=f[1],(d===null||uu(f,d)>0)&&(u=!0)}else d=n;if(r)if(c!==0){let g=po(t[a+1]);t[i+1]=Zh(g,a),g!==0&&(t[g+1]=k_(t[g+1],i)),t[a+1]=rH(t[a+1],i)}else t[i+1]=Zh(a,0),a!==0&&(t[a+1]=k_(t[a+1],i)),a=i;else t[i+1]=Zh(c,0),a===0?a=i:t[c+1]=k_(t[c+1],i),c=i;u&&(t[i+1]=Sy(t[i+1])),F1(t,d,i,!0),F1(t,d,i,!1),aH(e,d,t,i,s),o=Zh(a,c),s?e.classBindings=o:e.styleBindings=o}function aH(t,e,n,i,r){let s=r?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&uu(s,e)>=0&&(n[i+1]=Ay(n[i+1]))}function F1(t,e,n,i){let r=t[n+1],s=e===null,o=i?po(r):Za(r),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],u=t[o+1];cH(c,e)&&(a=!0,t[o+1]=i?Ay(u):Sy(u)),o=i?po(u):Za(u)}a&&(t[n+1]=i?Sy(r):Ay(r))}function cH(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?uu(t,e)>=0:!1}var bi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function lH(t){return t.substring(bi.key,bi.keyEnd)}function uH(t){return dH(t),sR(t,oR(t,0,bi.textEnd))}function sR(t,e){let n=bi.textEnd;return n===e?-1:(e=bi.keyEnd=hH(t,bi.key=e,n),oR(t,e,n))}function dH(t){bi.key=0,bi.keyEnd=0,bi.value=0,bi.valueEnd=0,bi.textEnd=t.length}function oR(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function hH(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function ve(t,e,n){let i=Se(),r=fu();if(ys(i,r,e)){let s=Rt(),o=ev();MA(s,o,i,t,e,i[Ke],n,!1)}return ve}function Ry(t,e,n,i,r){let s=e.inputs,o=r?"class":"style";wv(t,n,s[o],o,i)}function bo(t,e,n){return aR(t,e,n,!1),bo}function vs(t,e){return aR(t,e,null,!0),vs}function si(t){pH(wH,fH,t,!0)}function fH(t,e){for(let n=uH(e);n>=0;n=sR(e,n))Uy(t,lH(e),!0)}function aR(t,e,n,i){let r=Se(),s=Rt(),o=xS(2);if(s.firstUpdatePass&&lR(s,t,o,i),e!==Dr&&ys(r,o,e)){let a=s.data[mo()];uR(s,a,r,r[Ke],t,r[o+1]=bH(e,n),i,o)}}function pH(t,e,n,i){let r=Rt(),s=xS(2);r.firstUpdatePass&&lR(r,null,s,i);let o=Se();if(n!==Dr&&ys(o,s,n)){let a=r.data[mo()];if(dR(a,i)&&!cR(r,s)){let c=i?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(n=j_(c,n||"")),Ry(r,a,o,n,i)}else EH(r,a,o,o[Ke],o[s+1],o[s+1]=vH(t,e,n),i,s)}}function cR(t,e){return e>=t.expandoStartIndex}function lR(t,e,n,i){let r=t.data;if(r[n+1]===null){let s=r[mo()],o=cR(t,n);dR(s,i)&&e===null&&!o&&(e=!1),e=gH(r,s,e,i),oH(r,s,e,n,o,i)}}function gH(t,e,n,i){let r=qB(t),s=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=F_(null,t,e,n,i),n=cu(n,e.attrs,i),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==r)if(n=F_(r,t,e,n,i),s===null){let c=mH(t,e,i);c!==void 0&&Array.isArray(c)&&(c=F_(null,t,e,c[1],i),c=cu(c,e.attrs,i),_H(t,e,i,c))}else s=yH(t,e,i)}return s!==void 0&&(i?e.residualClasses=s:e.residualStyles=s),n}function mH(t,e,n){let i=n?e.classBindings:e.styleBindings;if(Za(i)!==0)return t[po(i)]}function _H(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[po(r)]=i}function yH(t,e,n){let i,r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++){let o=t[s].hostAttrs;i=cu(i,o,n)}return cu(i,e.attrs,n)}function F_(t,e,n,i,r){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],i=cu(i,s.hostAttrs,r),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),i}function cu(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?r=o:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Uy(t,o,n?!0:e[++s]))}return t===void 0?null:t}function vH(t,e,n){if(n==null||n==="")return _n;let i=[],r=Hf(n);if(Array.isArray(r))for(let s=0;s<r.length;s++)t(i,r[s],!0);else if(typeof r=="object")for(let s in r)r.hasOwnProperty(s)&&t(i,s,r[s]);else typeof r=="string"&&e(i,r);return i}function wH(t,e,n){let i=String(e);i!==""&&!i.includes(" ")&&Uy(t,i,n)}function EH(t,e,n,i,r,s,o,a){r===Dr&&(r=_n);let c=0,u=0,d=0<r.length?r[0]:null,f=0<s.length?s[0]:null;for(;d!==null||f!==null;){let g=c<r.length?r[c+1]:void 0,m=u<s.length?s[u+1]:void 0,v=null,D;d===f?(c+=2,u+=2,g!==m&&(v=f,D=m)):f===null||d!==null&&d<f?(c+=2,v=d):(u+=2,v=f,D=m),v!==null&&uR(t,e,n,i,v,D,o,a),d=c<r.length?r[c]:null,f=u<s.length?s[u]:null}}function uR(t,e,n,i,r,s,o,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],d=sH(u)?L1(c,e,n,r,Za(u),o):void 0;if(!Sf(d)){Sf(s)||iH(u)&&(s=L1(c,null,n,r,a,o));let f=CS(mo(),n);rU(i,o,f,r,s)}}function L1(t,e,n,i,r,s){let o=e===null,a;for(;r>0;){let c=t[r],u=Array.isArray(c),d=u?c[1]:c,f=d===null,g=n[r+1];g===Dr&&(g=f?_n:void 0);let m=f?I_(g,i):d===i?g:void 0;if(u&&!Sf(m)&&(m=I_(c,i)),Sf(m)&&(a=m,o))return a;let v=t[r+1];r=o?po(v):Za(v)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=I_(c,i))}return a}function Sf(t){return t!==void 0}function bH(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=yn(Hf(t)))),t}function dR(t,e){return(t.flags&(e?8:16))!==0}function Xf(t,e,n){wo("NgControlFlow");let i=Se(),r=fu(),s=IH(i,yt+t),o=0;if(ys(i,r,e)){let a=Pe(null);try{if(LU(s,o),e!==-1){let c=CH(i[de],yt+e),u=hy(s,c.tView.ssrId),d=VA(i,c,n,{dehydratedView:u});BA(s,d,o,uy(c,u))}}finally{Pe(a)}}else{let a=FU(s,o);a!==void 0&&(a[ni]=n)}}function IH(t,e){return t[e]}function CH(t,e){return qy(t,e)}function TH(t,e,n,i,r,s){let o=e.consts,a=Ja(o,r),c=ic(e,t,2,i,a);return vv(e,n,c,Ja(o,s)),c.attrs!==null&&Cf(c,c.attrs,!1),c.mergedAttrs!==null&&Cf(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function U(t,e,n,i){let r=Se(),s=Rt(),o=yt+t,a=r[Ke],c=s.firstCreatePass?TH(o,s,r,e,n,i):s.data[o],u=hR(s,r,c,a,e,t);r[o]=u;let d=Ff(c);return go(c,!0),IA(a,u,c),!gu(c)&&Lf()&&zf(s,r,u,c),PB()===0&&ps(u,r),kB(),d&&(mv(s,r,c),gv(s,c,r)),i!==null&&_v(r,c),U}function H(){let t=qn();Qy()?Yy():(t=t.parent,go(t,!1));let e=t;LB(e)&&BB(),FB();let n=Rt();return n.firstCreatePass&&(Vf(n,t),zy(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&XB(e)&&Ry(n,e,Se(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&ZB(e)&&Ry(n,e,Se(),e.stylesWithoutHost,!1),H}function re(t,e,n,i){return U(t,e,n,i),H(),re}var hR=(t,e,n,i,r,s)=>(Ji(!0),Gf(i,r,VS()));function DH(t,e,n,i,r,s){let o=e[ti],a=!o||tc()||gu(n)||$f(o,s);if(Ji(a),a)return Gf(i,r,VS());let c=Yf(o,t,e,n);return uA(o,s)&&Uf(o,s,c.nextSibling),o&&(XS(n)||ZS(c))&&hu(n)&&(VB(n),wA(c)),c}function SH(){hR=DH}function AH(t,e,n,i,r){let s=e.consts,o=Ja(s,i),a=ic(e,t,8,"ng-container",o);o!==null&&Cf(a,o,!0);let c=Ja(s,r);return vv(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function Sr(t,e,n){let i=Se(),r=Rt(),s=t+yt,o=r.firstCreatePass?AH(s,r,i,e,n):r.data[s];go(o,!0);let a=fR(r,i,o,t);return i[s]=a,Lf()&&zf(r,i,a,o),ps(a,i),Ff(o)&&(mv(r,i,o),gv(r,o,i)),n!=null&&_v(i,o),Sr}function Ar(){let t=qn(),e=Rt();return Qy()?Yy():(t=t.parent,go(t,!1)),e.firstCreatePass&&(Vf(e,t),zy(t)&&e.queries.elementEnd(t)),Ar}var fR=(t,e,n,i)=>(Ji(!0),uv(e[Ke],""));function RH(t,e,n,i){let r,s=e[ti],o=!s||tc()||gu(n);if(Ji(o),o)return uv(e[Ke],"");let a=Yf(s,t,e,n),c=kj(s,i);return Uf(s,i,a),r=Jf(c,a),r}function MH(){fR=RH}function Pn(){return Se()}function Sv(t,e,n){let i=Se(),r=fu();if(ys(i,r,e)){let s=Rt(),o=ev();MA(s,o,i,t,e,i[Ke],n,!0)}return Sv}var Af="en-US";var xH=Af;function NH(t){typeof t=="string"&&(xH=t.toLowerCase().replace(/_/g,"-"))}function pR(t,e,n){let i=t[Ke];switch(n){case Node.COMMENT_NODE:return uv(i,e);case Node.TEXT_NODE:return lv(i,e);case Node.ELEMENT_NODE:return Gf(i,e,null)}}var OH=(t,e,n,i)=>(Ji(!0),pR(t,n,i));function PH(t,e,n,i){return Ji(!0),pR(t,n,i)}function kH(){OH=PH}function qe(t,e,n,i){let r=Se(),s=Rt(),o=qn();return LH(s,r,r[Ke],o,t,e,i),qe}function FH(t,e,n,i){let r=t.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let o=r[s];if(o===n&&r[s+1]===i){let a=e[tu],c=r[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function LH(t,e,n,i,r,s,o){let a=Ff(i),u=t.firstCreatePass&&FA(t),d=e[ni],f=kA(e),g=!0;if(i.type&3||o){let D=zn(i,e),C=o?o(D):D,x=f.length,k=o?F=>o(Ci(F[i.index])):i.index,P=null;if(!o&&a&&(P=FH(t,e,r,i.index)),P!==null){let F=P.__ngLastListenerFn__||P;F.__ngNextListenerFn__=s,P.__ngLastListenerFn__=s,g=!1}else{s=B1(i,e,d,s,!1);let F=n.listen(C,r,s);f.push(s,F),u&&u.push(r,k,x,x+1)}}else s=B1(i,e,d,s,!1);let m=i.outputs,v;if(g&&m!==null&&(v=m[r])){let D=v.length;if(D)for(let C=0;C<D;C+=2){let x=v[C],k=v[C+1],Z=e[x][k].subscribe(s),W=f.length;f.push(s,Z),u&&u.push(r,i.index,W,-(W+1))}}}function V1(t,e,n,i){let r=Pe(null);try{return zi(6,e,n),n(i)!==!1}catch(s){return LA(t,s),!1}finally{zi(7,e,n),Pe(r)}}function B1(t,e,n,i,r){return function s(o){if(o===Function)return i;let a=t.componentOffset>-1?_s(t.index,e):e;bv(a);let c=V1(e,n,i,o),u=s.__ngNextListenerFn__;for(;u;)c=V1(e,n,u,o)&&c,u=u.__ngNextListenerFn__;return r&&c===!1&&o.preventDefault(),c}}function st(t=1){return KB(t)}function VH(t,e){let n=null,i=eB(t);for(let r=0;r<e.length;r++){let s=e[r];if(s==="*"){n=r;continue}if(i===null?rS(t,s,!0):iB(i,s))return r}return n}function Av(t){let e=Se()[Hn][Gn];if(!e.projection){let n=t?t.length:1,i=e.projection=G2(n,null),r=i.slice(),s=e.child;for(;s!==null;){let o=t?VH(s,t):0;o!==null&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function Rv(t,e=0,n){let i=Se(),r=Rt(),s=ic(r,yt+t,16,null,n||null);s.projection===null&&(s.projection=e),Yy(),(!i[ti]||tc())&&(s.flags&32)!==32&&nU(r,i,s)}function Zf(t,e,n){B$(t,e,n)}function mu(t){let e=Se(),n=Rt(),i=NS();Jy(i+1);let r=Tv(n,i);if(t.dirty&&RB(e)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let s=$$(e,i);t.reset(s,dj),t.notifyOnChanges()}return!0}return!1}function _u(){return L$(Se(),NS())}function BH(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}function Mv(t){let e=UB();return TS(e,yt+t)}function we(t,e=""){let n=Se(),i=Rt(),r=t+yt,s=i.firstCreatePass?ic(i,r,1,e,null):i.data[r],o=gR(i,n,s,e,t);n[r]=o,Lf()&&zf(i,n,o,s),go(s,!1)}var gR=(t,e,n,i,r)=>(Ji(!0),lv(e[Ke],i));function jH(t,e,n,i,r){let s=e[ti],o=!s||tc()||gu(n)||$f(s,r);return Ji(o),o?lv(e[Ke],i):Yf(s,t,e,n)}function UH(){gR=jH}function Io(t){return En("",t,""),Io}function En(t,e,n){let i=Se(),r=nH(i,t,e,n);return r!==Dr&&NU(i,mo(),r),En}function $H(t,e,n){let i=Rt();if(i.firstCreatePass){let r=fs(t);My(n,i.data,i.blueprint,r,!0),My(e,i.data,i.blueprint,r,!1)}}function My(t,e,n,i,r){if(t=mn(t),Array.isArray(t))for(let s=0;s<t.length;s++)My(t[s],e,n,i,r);else{let s=Rt(),o=Se(),a=qn(),c=Ka(t)?t:mn(t.provide),u=gS(t),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(Ka(t)||!t.multi){let m=new uo(u,r,Y),v=V_(c,e,r?d:d+g,f);v===-1?(X_(mf(a,o),s,c),L_(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(m),o.push(m)):(n[v]=m,o[v]=m)}else{let m=V_(c,e,d+g,f),v=V_(c,e,d,d+g),D=m>=0&&n[m],C=v>=0&&n[v];if(r&&!C||!r&&!D){X_(mf(a,o),s,c);let x=zH(r?GH:HH,n.length,r,i,u);!r&&C&&(n[v].providerFactory=x),L_(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(x),o.push(x)}else{let x=mR(n[r?v:m],u,!r&&i);L_(s,t,m>-1?m:v,x)}!r&&i&&C&&n[v].componentProviders++}}}function L_(t,e,n,i){let r=Ka(e),s=pB(e);if(r||s){let c=(s?mn(e.useClass):e).prototype.ngOnDestroy;if(c){let u=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){let d=u.indexOf(n);d===-1?u.push(n,[i,c]):u[d+1].push(i,c)}else u.push(n,c)}}}function mR(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function V_(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function HH(t,e,n,i){return xy(this.multi,[])}function GH(t,e,n,i){let r=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=ho(n,n[de],this.providerFactory.index,i);s=a.slice(0,o),xy(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],xy(r,s);return s}function xy(t,e){for(let n=0;n<t.length;n++){let i=t[n];e.push(i())}return e}function zH(t,e,n,i,r){let s=new uo(t,n,Y);return s.multi=[],s.index=e,s.componentProviders=0,mR(s,r,i&&!n),s}function Rr(t,e=[]){return n=>{n.providersResolver=(i,r)=>$H(i,r?r(t):t,e)}}var qH=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=hS(!1,i.type),s=r.length>0?Dv([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,s)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=q({token:e,providedIn:"environment",factory:()=>new e($(wn))});let t=e;return t})();function Me(t){wo("NgStandalone"),t.getStandaloneInjector=e=>e.get(qH).getOrCreateStandaloneInjector(t)}function xv(t,e,n,i){return _R(Se(),MS(),t,e,n,i)}function WH(t,e){let n=t[e];return n===Dr?void 0:n}function _R(t,e,n,i,r,s){let o=e+n;return ys(t,o,r)?X$(t,o+1,s?i.call(s,r):i(r)):WH(t,o+1)}function Nv(t,e){let n=Rt(),i,r=t+yt;n.firstCreatePass?(i=KH(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];let s=i.factory||(i.factory=oo(i.type,!0)),o,a=Nn(Y);try{let c=gf(!1),u=s();return gf(c),BH(n,Se(),r,u),u}finally{Nn(a)}}function KH(t,e){if(e)for(let n=e.length-1;n>=0;n--){let i=e[n];if(t===i.name)return i}}function Ov(t,e,n){let i=t+yt,r=Se(),s=TS(r,i);return QH(r,i)?_R(r,MS(),e,s.transform,n,s):s.transform(n)}function QH(t,e){return t[de].data[e].pure}function yu(t,e){return Qf(t,e)}var Ir=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Pv=new Ir("17.3.11"),ep=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var yR=new j("");function Co(t){return!!t&&typeof t.then=="function"}function vR(t){return!!t&&typeof t.subscribe=="function"}var ws=new j(""),wR=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=N(ws,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let s of this.appInits){let o=s();if(Co(o))i.push(o);else if(vR(o)){let a=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});i.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(s=>{this.reject(s)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),sc=new j("");function YH(){FD(()=>{throw new ne(600,!1)})}function JH(t){return t.isBoundToModule}function XH(t,e,n){try{let i=n();return Co(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}var Di=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=N(JS),this.afterRenderEffectManager=N(QA),this.externalTestViews=new Set,this.beforeRender=new Ce,this.afterTick=new Ce,this.componentTypes=[],this.components=[],this.isStable=N(pu).hasPendingTasks.pipe(J(i=>!i)),this._injector=N(wn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let s=i instanceof If;if(!this._injector.get(wR).done){let m=!s&&cS(i),v=!1;throw new ne(405,v)}let a;s?a=i:a=this._injector.get(rc).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let c=JH(a)?void 0:this._injector.get(gs),u=r||a.selector,d=a.create(Re.NULL,[],u,c),f=d.location.nativeElement,g=d.injector.get(yR,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),B_(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new ne(101,!1);let r=Pe(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,Pe(r)}}detectChangesInAttachedViews(i){let r=0,s=this.afterRenderEffectManager;for(;;){if(r===UA)throw new ne(103,!1);if(i){let o=r===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:c}of this._views)ZH(a,o,c)}if(r++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Ny(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Ny(o))))break}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;B_(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(sc,[]);[...this._bootstrapListeners,...r].forEach(s=>s(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>B_(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new ne(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function B_(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var ef;function kv(t){ef??=new WeakMap;let e=ef.get(t);if(e)return e;let n=t.isStable.pipe(Un(i=>i)).toPromise().then(()=>{});return ef.set(t,n),t.onDestroy(()=>ef?.delete(t)),n}function ZH(t,e,n){!e&&!Ny(t)||eG(t,n,e)}function Ny(t){return Ky(t)}function eG(t,e,n){let i;n?(i=0,t[le]|=1024):t[le]&64?i=0:i=1,$A(t,e,i)}var Oy=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Fv=(()=>{let e=class e{compileModuleSync(i){return new Dy(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),s=lS(i),o=fA(s.declarations).reduce((a,c)=>{let u=hs(c);return u&&a.push(new Xa(u)),a},[]);return new Oy(r,o)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var tG=(()=>{let e=class e{constructor(){this.zone=N(te),this.applicationRef=N(Di)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function nG(t){return[{provide:te,useFactory:t},{provide:ao,multi:!0,useFactory:()=>{let e=N(tG,{optional:!0});return()=>e.initialize()}},{provide:ao,multi:!0,useFactory:()=>{let e=N(oG);return()=>{e.initialize()}}},{provide:JS,useFactory:iG}]}function iG(){let t=N(te),e=N(Er);return n=>t.runOutsideAngular(()=>e.handleError(n))}function rG(t){let e=nG(()=>new te(sG(t)));return Ze([[],e])}function sG(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var oG=(()=>{let e=class e{constructor(){this.subscription=new it,this.initialized=!1,this.zone=N(te),this.pendingTasks=N(pu)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{te.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{te.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function aG(){return typeof $localize<"u"&&$localize.locale||Af}var tp=new j("",{providedIn:"root",factory:()=>N(tp,Ee.Optional|Ee.SkipSelf)||aG()});var ER=new j("");var af=null;function cG(t=[],e){return Re.create({name:e,providers:[{provide:Of,useValue:"platform"},{provide:ER,useValue:new Set([()=>af=null])},...t]})}function lG(t=[]){if(af)return af;let e=cG(t);return af=e,YH(),uG(e),e}function uG(t){t.get(iv,null)?.forEach(n=>n())}function Lv(){return!1}var Mr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=dG;let t=e;return t})();function dG(t){return hG(qn(),Se(),(t&16)===16)}function hG(t,e,n){if(hu(t)&&!n){let i=_s(t.index,e);return new fo(i,i)}else if(t.type&47){let i=e[Hn];return new fo(i,e)}return null}var Py=class{constructor(){}supports(e){return nR(e)}create(e){return new ky(e)}},fG=(t,e)=>e,ky=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||fG}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,s=null;for(;n||i;){let o=!i||n&&n.currentIndex<j1(i,r,s)?n:i,a=j1(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(n=n._next,o.previousIndex==null)r++;else{s||(s=[]);let u=a-r,d=c-r;if(u!=d){for(let g=0;g<u;g++){let m=g<s.length?s[g]:s[g]=0,v=m+g;d<=v&&v<u&&(s[g]=m+1)}let f=o.previousIndex;s[f]=d-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!nR(e))throw new ne(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,i=!1,r,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),i=!0):(i&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else r=0,Y$(e,a=>{o=this._trackByFn(r,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,r),i=!0):(i&&(n=this._verifyReinsertion(n,a,o,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,r)):e=this._addAfter(new Fy(n,i),s,r)),e}_verifyReinsertion(e,n,i,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,s=e._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){let r=n===null?this._itHead:n._next;return e._next=r,e._prev=n,r===null?this._itTail=e:r._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Rf),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,i=e._next;return n===null?this._itHead=i:n._next=i,i===null?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Rf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Fy=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Ly=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;i!==null;i=i._nextDup)if((n===null||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let n=e._prevDup,i=e._nextDup;return n===null?this._head=i:n._nextDup=i,i===null?this._tail=n:i._prevDup=n,this._head===null}},Rf=class{constructor(){this.map=new Map}put(e){let n=e.trackById,i=this.map.get(n);i||(i=new Ly,this.map.set(n,i)),i.add(e)}get(e,n){let i=e,r=this.map.get(i);return r?r.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function j1(t,e,n){let i=t.previousIndex;if(i===null)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}function U1(){return new Vv([new Py])}var Vv=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r!=null){let s=r.factories.slice();i=i.concat(s)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||U1()),deps:[[e,new X1,new _e]]}}find(i){let r=this.factories.find(s=>s.supports(i));if(r!=null)return r;throw new ne(901,!1)}};e.\u0275prov=q({token:e,providedIn:"root",factory:U1});let t=e;return t})();function bR(t){try{let{rootComponent:e,appProviders:n,platformProviders:i}=t,r=lG(i),s=[rG(),...n||[]],a=new Df({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(te);return c.run(()=>{a.resolveInjectorInitializers();let u=a.get(Er,null),d;c.runOutsideAngular(()=>{d=c.onError.subscribe({next:m=>{u.handleError(m)}})});let f=()=>a.destroy(),g=r.get(ER);return g.add(f),a.onDestroy(()=>{d.unsubscribe(),g.delete(f)}),XH(u,c,()=>{let m=a.get(wR);return m.runInitializers(),m.donePromise.then(()=>{let v=a.get(tp,Af);NH(v||Af);let D=a.get(Di);return e!==void 0&&D.bootstrap(e),D})})})}catch(e){return Promise.reject(e)}}var $1=!1,pG=!1;function gG(){$1||($1=!0,xj(),SH(),UH(),MH(),tH(),N$(),c$(),hU(),kH())}function mG(t,e){return kv(t)}function IR(){return Ze([{provide:Yh,useFactory:()=>{let t=!0;return Jh()&&(t=!!N(yo,{optional:!0})?.get(cA,null)),t&&wo("NgHydration"),t}},{provide:ao,useValue:()=>{pG=!!N(Fj,{optional:!0}),Jh()&&N(Yh)&&(_G(),gG())},multi:!0},{provide:hA,useFactory:()=>Jh()&&N(Yh)},{provide:sc,useFactory:()=>{if(Jh()&&N(Yh)){let t=N(Di),e=N(Re);return()=>{mG(t,e).then(()=>{ZU(t)})}}return()=>{}},multi:!0}])}function _G(){let t=Bf(),e;for(let n of t.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===Rj){e=n;break}if(!e)throw new ne(-507,!1)}function np(t,e){let n=hs(t),i=e.elementInjector||Pf();return new Xa(n).create(i,e.projectableNodes,e.hostElement,e.environmentInjector)}var xR=null;function xr(){return xR}function NR(t){xR??=t}var ip=class{};var vt=new j(""),OR=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>N(vG),providedIn:"platform"});let t=e;return t})();var vG=(()=>{let e=class e extends OR{constructor(){super(),this._doc=N(vt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xr().getBaseHref(this._doc)}onPopState(i){let r=xr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=xr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,s){this._history.pushState(i,r,s)}replaceState(i,r,s){this._history.replaceState(i,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function PR(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function CR(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,i=n-(t[n-1]==="/"?1:0);return t.slice(0,i)+t.slice(n)}function To(t){return t&&t[0]!=="?"?"?"+t:t}var sp=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>N(kR),providedIn:"root"});let t=e;return t})(),wG=new j(""),kR=(()=>{let e=class e extends sp{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??N(vt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return PR(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+To(this._platformLocation.search),s=this._platformLocation.hash;return s&&i?`${r}${s}`:r}pushState(i,r,s,o){let a=this.prepareExternalUrl(s+To(o));this._platformLocation.pushState(i,r,a)}replaceState(i,r,s,o){let a=this.prepareExternalUrl(s+To(o));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)($(OR),$(wG,8))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var vu=(()=>{let e=class e{constructor(i){this._subject=new Ue,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=IG(CR(TR(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+To(r))}normalize(i){return e.stripTrailingSlash(bG(this._basePath,TR(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",s=null){this._locationStrategy.pushState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+To(r)),s)}replaceState(i,r="",s=null){this._locationStrategy.replaceState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+To(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(s=>s(i,r))}subscribe(i,r,s){return this._subject.subscribe({next:i,error:r,complete:s})}};e.normalizeQueryParams=To,e.joinWithSlash=PR,e.stripTrailingSlash=CR,e.\u0275fac=function(r){return new(r||e)($(sp))},e.\u0275prov=q({token:e,factory:()=>EG(),providedIn:"root"});let t=e;return t})();function EG(){return new vu($(sp))}function bG(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function TR(t){return t.replace(/\/index.html$/,"")}function IG(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function $v(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,s]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}var Bv=/\s+/,DR=[],FR=(()=>{let e=class e{constructor(i,r){this._ngEl=i,this._renderer=r,this.initialClasses=DR,this.stateMap=new Map}set klass(i){this.initialClasses=i!=null?i.trim().split(Bv):DR}set ngClass(i){this.rawClass=typeof i=="string"?i.trim().split(Bv):i}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let i=this.rawClass;if(Array.isArray(i)||i instanceof Set)for(let r of i)this._updateState(r,!0);else if(i!=null)for(let r of Object.keys(i))this._updateState(r,!!i[r]);this._applyStateDiff()}_updateState(i,r){let s=this.stateMap.get(i);s!==void 0?(s.enabled!==r&&(s.changed=!0,s.enabled=r),s.touched=!0):this.stateMap.set(i,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let i of this.stateMap){let r=i[0],s=i[1];s.changed?(this._toggleClass(r,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),s.touched=!1}}_toggleClass(i,r){i=i.trim(),i.length>0&&i.split(Bv).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(r){return new(r||e)(Y(Xt),Y(vo))},e.\u0275dir=mt({type:e,selectors:[["","ngClass",""]],inputs:{klass:[Vt.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var jv=class{constructor(e,n,i,r){this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Es=(()=>{let e=class e{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,r,s){this._viewContainer=i,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let i=this._ngForOf;if(!this._differ&&i)if(0)try{}catch{}else this._differ=this._differs.find(i).create(this.ngForTrackBy)}if(this._differ){let i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){let r=this._viewContainer;i.forEachOperation((s,o,a)=>{if(s.previousIndex==null)r.createEmbeddedView(this._template,new jv(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(o===null?void 0:o);else if(o!==null){let c=r.get(o);r.move(c,a),SR(c,s)}});for(let s=0,o=r.length;s<o;s++){let c=r.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}i.forEachIdentityChange(s=>{let o=r.get(s.currentIndex);SR(o,s)})}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(Y(Xi),Y(Qi),Y(Vv))},e.\u0275dir=mt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function SR(t,e){t.context.$implicit=e.item}var bs=(()=>{let e=class e{constructor(i,r){this._viewContainer=i,this._context=new Uv,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){AR("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){AR("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(Y(Xi),Y(Qi))},e.\u0275dir=mt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Uv=class{constructor(){this.$implicit=null,this.ngIf=null}};function AR(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${yn(e)}'.`)}function CG(t,e){return new ne(2100,!1)}var TG=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,LR=(()=>{let e=class e{transform(i){if(i==null)return null;if(typeof i!="string")throw CG(e,i);return i.replace(TG,r=>r[0].toUpperCase()+r.slice(1).toLowerCase())}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=sS({name:"titlecase",type:e,pure:!0,standalone:!0});let t=e;return t})();var Zt=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ri({type:e}),e.\u0275inj=ii({});let t=e;return t})(),Hv="browser",DG="server";function Gv(t){return t===Hv}function Nr(t){return t===DG}var rp=class{};var ap=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let i=n.indexOf(":");if(i>0){let r=n.slice(0,i),s=r.toLowerCase(),o=n.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,n);let r=(e.op==="a"?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let i=(Array.isArray(n)?n:[n]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var zR=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(zR||{}),zv=class{constructor(e,n=qR.Ok,i="OK"){this.headers=e.headers||new ap,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var cp=class t extends zv{constructor(e={}){super(e),this.type=zR.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var qR=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(qR||{});var AG=new j("");var VR="b",BR="h",jR="s",UR="st",$R="u",HR="rt",op=new j(""),RG=["GET","HEAD"];function MG(t,e){let f=N(op),{isCacheActive:n}=f,i=uD(f,["isCacheActive"]),{transferCache:r,method:s}=t;if(!n||s==="POST"&&!i.includePostRequests&&!r||s!=="POST"&&!RG.includes(s)||r===!1||i.filter?.(t)===!1)return e(t);let o=N(yo),a=NG(t),c=o.get(a,null),u=i.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(u=r.includeHeaders),c){let{[VR]:g,[HR]:m,[BR]:v,[jR]:D,[UR]:C,[$R]:x}=c,k=g;switch(m){case"arraybuffer":k=new TextEncoder().encode(g).buffer;break;case"blob":k=new Blob([g]);break}let P=new ap(v);return G(new cp({body:k,headers:P,status:D,statusText:C,url:x}))}let d=Nr(N($t));return e(t).pipe(Xe(g=>{g instanceof cp&&d&&o.set(a,{[VR]:g.body,[BR]:xG(g.headers,u),[jR]:g.status,[UR]:g.statusText,[$R]:g.url||"",[HR]:t.responseType})}))}function xG(t,e){if(!e)return{};let n={};for(let i of e){let r=t.getAll(i);r!==null&&(n[i]=r)}return n}function GR(t){return[...t.keys()].sort().map(e=>`${e}=${t.getAll(e)}`).join("&")}function NG(t){let{params:e,method:n,responseType:i,url:r}=t,s=GR(e),o=t.serializeBody();o instanceof URLSearchParams?o=GR(o):typeof o!="string"&&(o="");let a=[n,i,r,o,s].join("|"),c=OG(a);return c}function OG(t){let e=0;for(let n of t)e=Math.imul(31,e)+n.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function WR(t){return[{provide:op,useFactory:()=>(wo("NgHttpTransferCache"),B({isCacheActive:!0},t))},{provide:AG,useValue:MG,multi:!0,deps:[yo,op]},{provide:sc,multi:!0,useFactory:()=>{let e=N(Di),n=N(op);return()=>{kv(e).then(()=>{n.isCacheActive=!1})}}}]}var Kv=class extends ip{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Qv=class t extends Kv{static makeCurrent(){NR(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=PG();return n==null?null:kG(n)}resetBaseElement(){wu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return $v(document.cookie,e)}},wu=null;function PG(){return wu=wu||document.querySelector("base"),wu?wu.getAttribute("href"):null}function kG(t){return new URL(t,document.baseURI).pathname}var FG=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),Yv=new j(""),JR=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new ne(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)($(Yv),$(te))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),lp=class{constructor(e){this._doc=e}},qv="ng-app-id",XR=(()=>{let e=class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Nr(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${qv}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(qv),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(qv,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)($(vt),$(jf),$(rv,8),$($t))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),Wv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Zv=/%COMP%/g,ZR="%COMP%",LG=`_nghost-${ZR}`,VG=`_ngcontent-${ZR}`,BG=!0,jG=new j("",{providedIn:"root",factory:()=>BG});function UG(t){return VG.replace(Zv,t)}function $G(t){return LG.replace(Zv,t)}function eM(t,e){return e.map(n=>n.replace(Zv,t))}var KR=(()=>{let e=class e{constructor(i,r,s,o,a,c,u,d=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Nr(c),this.defaultRenderer=new Eu(i,a,u,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Wi.ShadowDom&&(r=ye(B({},r),{encapsulation:Wi.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof up?s.applyToHost(i):s instanceof bu&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let a=this.doc,c=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case Wi.Emulated:o=new up(u,d,r,this.appId,f,a,c,g);break;case Wi.ShadowDom:return new Jv(u,d,i,r,a,c,this.nonce,g);default:o=new bu(u,d,r,f,a,c,g);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)($(JR),$(XR),$(jf),$(jG),$(vt),$($t),$(te),$(rv))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),Eu=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Wv[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(QR(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(QR(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new ne(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let s=Wv[r];s?e.setAttributeNS(s,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=Wv[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(br.DashCase|br.Important)?e.style.setProperty(n,i,r&br.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&br.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=xr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function QR(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Jv=class extends Eu{constructor(e,n,i,r,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=eM(r.id,r.styles);for(let d of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},bu=class extends Eu{constructor(e,n,i,r,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=c?eM(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},up=class extends bu{constructor(e,n,i,r,s,o,a,c){let u=r+"-"+i.id;super(e,n,i,s,o,a,c,u),this.contentAttr=UG(u),this.hostAttr=$G(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},HG=(()=>{let e=class e extends lp{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)($(vt))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})(),YR=["alt","control","meta","shift"],GG={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},zG={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},qG=(()=>{let e=class e extends lp{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,s){let o=e.parseEventName(r),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xr().onAndCancel(i,o.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),YR.forEach(d=>{let f=r.indexOf(d);f>-1&&(r.splice(f,1),a+=d+".")}),a+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(i,r){let s=GG[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),YR.forEach(a=>{if(a!==s){let c=zG[a];c(i)&&(o+=a+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)($(vt))},e.\u0275prov=q({token:e,factory:e.\u0275fac});let t=e;return t})();function tM(t,e){return bR(B({rootComponent:t},WG(e)))}function WG(t){return{appProviders:[...XG,...t?.providers??[]],platformProviders:JG}}function KG(){Qv.makeCurrent()}function QG(){return new Er}function YG(){return rA(document),document}var JG=[{provide:$t,useValue:Hv},{provide:iv,useValue:KG,multi:!0},{provide:vt,useFactory:YG,deps:[]}];var XG=[{provide:Of,useValue:"root"},{provide:Er,useFactory:QG,deps:[]},{provide:Yv,useClass:HG,multi:!0,deps:[vt,te,$t]},{provide:Yv,useClass:qG,multi:!0,deps:[vt]},KR,XR,JR,{provide:ou,useExisting:KR},{provide:rp,useClass:FG,deps:[]},[]];var dp=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)($(vt))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Xv=function(t){return t[t.NoHttpTransferCache=0]="NoHttpTransferCache",t[t.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",t}(Xv||{});function nM(...t){let e=[],n=new Set,i=n.has(Xv.HttpTransferCacheOptions);for(let{\u0275providers:r,\u0275kind:s}of t)n.add(s),r.length&&e.push(r);return Ze([[],IR(),n.has(Xv.NoHttpTransferCache)||i?[]:WR({}),e])}var ge="primary",Vu=Symbol("RouteTitle"),r0=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function uc(t){return new r0(t)}function e3(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=t[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function t3(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Zi(t[n],e[n]))return!1;return!0}function Zi(t,e){let n=t?s0(t):void 0,i=e?s0(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!lM(t[r],e[r]))return!1;return!0}function s0(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function lM(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,s)=>i[s]===r)}else return t===e}function uM(t){return t.length>0?t[t.length-1]:null}function Ts(t){return f_(t)?t:Co(t)?ke(Promise.resolve(t)):G(t)}var n3={exact:hM,subset:fM},dM={exact:i3,subset:r3,ignored:()=>!0};function rM(t,e,n){return n3[n.paths](t.root,e.root,n.matrixParams)&&dM[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function i3(t,e){return Zi(t,e)}function hM(t,e,n){if(!Ao(t.segments,e.segments)||!pp(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!hM(t.children[i],e.children[i],n))return!1;return!0}function r3(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>lM(t[n],e[n]))}function fM(t,e,n){return pM(t,e,e.segments,n)}function pM(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!Ao(r,n)||e.hasChildren()||!pp(r,n,i))}else if(t.segments.length===n.length){if(!Ao(t.segments,n)||!pp(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!fM(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Ao(t.segments,r)||!pp(t.segments,r,i)||!t.children[ge]?!1:pM(t.children[ge],e,s,i)}}function pp(t,e,n){return e.every((i,r)=>dM[n](t[r].parameters,i.parameters))}var Is=class{constructor(e=new Ve([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=uc(this.queryParams),this._queryParamMap}toString(){return a3.serialize(this)}},Ve=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gp(this)}},So=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=uc(this.parameters),this._parameterMap}toString(){return mM(this)}};function s3(t,e){return Ao(t,e)&&t.every((n,i)=>Zi(n.parameters,e[i].parameters))}function Ao(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function o3(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===ge&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==ge&&(n=n.concat(e(r,i)))}),n}var M0=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>new _p,providedIn:"root"});let t=e;return t})(),_p=class{parse(e){let n=new a0(e);return new Is(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Iu(e.root,!0)}`,i=u3(e.queryParams),r=typeof e.fragment=="string"?`#${c3(e.fragment)}`:"";return`${n}${i}${r}`}},a3=new _p;function gp(t){return t.segments.map(e=>mM(e)).join("/")}function Iu(t,e){if(!t.hasChildren())return gp(t);if(e){let n=t.children[ge]?Iu(t.children[ge],!1):"",i=[];return Object.entries(t.children).forEach(([r,s])=>{r!==ge&&i.push(`${r}:${Iu(s,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=o3(t,(i,r)=>r===ge?[Iu(t.children[ge],!1)]:[`${r}:${Iu(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[ge]!=null?`${gp(t)}/${n[0]}`:`${gp(t)}/(${n.join("//")})`}}function gM(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hp(t){return gM(t).replace(/%3B/gi,";")}function c3(t){return encodeURI(t)}function o0(t){return gM(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function mp(t){return decodeURIComponent(t)}function sM(t){return mp(t.replace(/\+/g,"%20"))}function mM(t){return`${o0(t.path)}${l3(t.parameters)}`}function l3(t){return Object.entries(t).map(([e,n])=>`;${o0(e)}=${o0(n)}`).join("")}function u3(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${hp(n)}=${hp(r)}`).join("&"):`${hp(n)}=${hp(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var d3=/^[^\/()?;#]+/;function e0(t){let e=t.match(d3);return e?e[0]:""}var h3=/^[^\/()?;=#]+/;function f3(t){let e=t.match(h3);return e?e[0]:""}var p3=/^[^=?&#]+/;function g3(t){let e=t.match(p3);return e?e[0]:""}var m3=/^[^&#]+/;function _3(t){let e=t.match(m3);return e?e[0]:""}var a0=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ve([],{}):new Ve([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[ge]=new Ve(e,n)),i}parseSegment(){let e=e0(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ne(4009,!1);return this.capture(e),new So(mp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=f3(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=e0(this.remaining);r&&(i=r,this.capture(i))}e[mp(n)]=mp(i)}parseQueryParam(e){let n=g3(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let o=_3(this.remaining);o&&(i=o,this.capture(i))}let r=sM(n),s=sM(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=e0(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new ne(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ge);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[ge]:new Ve([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ne(4011,!1)}};function _M(t){return t.segments.length>0?new Ve([],{[ge]:t}):t}function yM(t){let e={};for(let[i,r]of Object.entries(t.children)){let s=yM(r);if(i===ge&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let n=new Ve(t.segments,e);return y3(n)}function y3(t){if(t.numberOfChildren===1&&t.children[ge]){let e=t.children[ge];return new Ve(t.segments.concat(e.segments),e.children)}return t}function dc(t){return t instanceof Is}function v3(t,e,n=null,i=null){let r=vM(t);return wM(r,e,n,i)}function vM(t){let e;function n(s){let o={};for(let c of s.children){let u=n(c);o[c.outlet]=u}let a=new Ve(s.url,o);return s===t&&(e=a),a}let i=n(t.root),r=_M(i);return e??r}function wM(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return t0(r,r,r,n,i);let s=w3(e);if(s.toRoot())return t0(r,r,new Ve([],{}),n,i);let o=E3(s,r,t),a=o.processChildren?Du(o.segmentGroup,o.index,s.commands):bM(o.segmentGroup,o.index,s.commands);return t0(r,o.segmentGroup,a,n,i)}function yp(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ru(t){return typeof t=="object"&&t!=null&&t.outlets}function t0(t,e,n,i,r){let s={};i&&Object.entries(i).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let o;t===e?o=n:o=EM(t,e,n);let a=_M(yM(o));return new Is(a,s,r)}function EM(t,e,n){let i={};return Object.entries(t.children).forEach(([r,s])=>{s===e?i[r]=n:i[r]=EM(s,e,n)}),new Ve(t.segments,i)}var vp=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&yp(i[0]))throw new ne(4003,!1);let r=i.find(Ru);if(r&&r!==uM(i))throw new ne(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function w3(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new vp(!0,0,t);let e=0,n=!1,i=t.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new vp(n,e,i)}var cc=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function E3(t,e,n){if(t.isAbsolute)return new cc(e,!0,0);if(!n)return new cc(e,!1,NaN);if(n.parent===null)return new cc(n,!0,0);let i=yp(t.commands[0])?0:1,r=n.segments.length-1+i;return b3(n,r,t.numberOfDoubleDots)}function b3(t,e,n){let i=t,r=e,s=n;for(;s>r;){if(s-=r,i=i.parent,!i)throw new ne(4005,!1);r=i.segments.length}return new cc(i,!1,r-s)}function I3(t){return Ru(t[0])?t[0].outlets:{[ge]:t}}function bM(t,e,n){if(t??=new Ve([],{}),t.segments.length===0&&t.hasChildren())return Du(t,e,n);let i=C3(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let s=new Ve(t.segments.slice(0,i.pathIndex),{});return s.children[ge]=new Ve(t.segments.slice(i.pathIndex),t.children),Du(s,0,r)}else return i.match&&r.length===0?new Ve(t.segments,{}):i.match&&!t.hasChildren()?c0(t,e,n):i.match?Du(t,0,r):c0(t,e,n)}function Du(t,e,n){if(n.length===0)return new Ve(t.segments,{});{let i=I3(n),r={};if(Object.keys(i).some(s=>s!==ge)&&t.children[ge]&&t.numberOfChildren===1&&t.children[ge].segments.length===0){let s=Du(t.children[ge],e,n);return new Ve(t.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=bM(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new Ve(t.segments,r)}}function C3(t,e,n){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return s;let o=t.segments[r],a=n[i];if(Ru(a))break;let c=`${a}`,u=i<n.length-1?n[i+1]:null;if(r>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!aM(c,u,o))return s;i+=2}else{if(!aM(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function c0(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let s=n[r];if(Ru(s)){let c=T3(s.outlets);return new Ve(i,c)}if(r===0&&yp(n[0])){let c=t.segments[e];i.push(new So(c.path,oM(n[0]))),r++;continue}let o=Ru(s)?s.outlets[ge]:`${s}`,a=r<n.length-1?n[r+1]:null;o&&a&&yp(a)?(i.push(new So(o,oM(a))),r+=2):(i.push(new So(o,{})),r++)}return new Ve(i,{})}function T3(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=c0(new Ve([],{}),0,i))}),e}function oM(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function aM(t,e,n){return t==n.path&&Zi(e,n.parameters)}var Su="imperative",en=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(en||{}),oi=class{constructor(e,n){this.id=e,this.url=n}},Mu=class extends oi{constructor(e,n,i="imperative",r=null){super(e,n),this.type=en.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ro=class extends oi{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=en.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Kn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Kn||{}),l0=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(l0||{}),Cs=class extends oi{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=en.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Mo=class extends oi{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=en.NavigationSkipped}},xu=class extends oi{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=en.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},wp=class extends oi{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=en.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},u0=class extends oi{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=en.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},d0=class extends oi{constructor(e,n,i,r,s){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=en.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},h0=class extends oi{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=en.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},f0=class extends oi{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=en.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},p0=class{constructor(e){this.route=e,this.type=en.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},g0=class{constructor(e){this.route=e,this.type=en.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},m0=class{constructor(e){this.snapshot=e,this.type=en.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_0=class{constructor(e){this.snapshot=e,this.type=en.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},y0=class{constructor(e){this.snapshot=e,this.type=en.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nu=class{constructor(e){this.snapshot=e,this.type=en.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ou=class{},Pu=class{constructor(e){this.url=e}};var v0=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Dp,this.attachRef=null}},Dp=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new v0,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ep=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=w0(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=w0(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=E0(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return E0(e,this._root).map(n=>n.value)}};function w0(t,e){if(t===e.value)return e;for(let n of e.children){let i=w0(t,n);if(i)return i}return null}function E0(t,e){if(t===e.value)return[e];for(let n of e.children){let i=E0(t,n);if(i.length)return i.unshift(e),i}return[]}var Wn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ac(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var bp=class extends Ep{constructor(e,n){super(e),this.snapshot=n,N0(this,e)}toString(){return this.snapshot.toString()}};function IM(t){let e=D3(t),n=new tt([new So("",{})]),i=new tt({}),r=new tt({}),s=new tt({}),o=new tt(""),a=new hc(n,i,s,o,r,ge,t,e.root);return a.snapshot=e.root,new bp(new Wn(a,[]),e)}function D3(t){let e={},n={},i={},r="",s=new ku([],e,i,r,n,ge,t,null,{});return new Ip("",new Wn(s,[]))}var hc=class{constructor(e,n,i,r,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(J(u=>u[Vu]))??G(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(J(e=>uc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(J(e=>uc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function x0(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:B(B({},e.params),t.params),data:B(B({},e.data),t.data),resolve:B(B(B(B({},t.data),e.data),r?.data),t._resolvedData)}:i={params:B({},t.params),data:B({},t.data),resolve:B(B({},t.data),t._resolvedData??{})},r&&TM(r)&&(i.resolve[Vu]=r.title),i}var ku=class{get title(){return this.data?.[Vu]}constructor(e,n,i,r,s,o,a,c,u){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=uc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=uc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ip=class extends Ep{constructor(e,n){super(n),this.url=e,N0(this,n)}toString(){return CM(this._root)}};function N0(t,e){e.value._routerState=t,e.children.forEach(n=>N0(t,n))}function CM(t){let e=t.children.length>0?` { ${t.children.map(CM).join(", ")} } `:"";return`${t.value}${e}`}function n0(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Zi(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Zi(e.params,n.params)||t.paramsSubject.next(n.params),t3(e.url,n.url)||t.urlSubject.next(n.url),Zi(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function b0(t,e){let n=Zi(t.params,e.params)&&s3(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||b0(t.parent,e.parent))}function TM(t){return typeof t.title=="string"||t.title===null}var Bu=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ge,this.activateEvents=new Ue,this.deactivateEvents=new Ue,this.attachEvents=new Ue,this.detachEvents=new Ue,this.parentContexts=N(Dp),this.location=N(Xi),this.changeDetector=N(Mr),this.environmentInjector=N(wn),this.inputBinder=N(O0,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ne(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ne(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ne(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new ne(4013,!1);this._activatedRoute=i;let s=this.location,a=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new I0(i,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=mt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[On]});let t=e;return t})(),I0=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===hc?this.route:e===Dp?this.childContexts:this.parent.get(e,n)}},O0=new j("");function S3(t,e,n){let i=Fu(t,e._root,n?n._root:void 0);return new bp(i,e)}function Fu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=A3(t,e,n);return new Wn(i,r)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Fu(t,a)),o}}let i=R3(e.value),r=e.children.map(s=>Fu(t,s));return new Wn(i,r)}}function A3(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Fu(t,i,r);return Fu(t,i)})}function R3(t){return new hc(new tt(t.url),new tt(t.params),new tt(t.queryParams),new tt(t.fragment),new tt(t.data),t.outlet,t.component,t)}var DM="ngNavigationCancelingError";function SM(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=dc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=AM(!1,Kn.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function AM(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[DM]=!0,n.cancellationCode=e,n}function M3(t){return RM(t)&&dc(t.url)}function RM(t){return!!t&&t[DM]}var P0=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["ng-component"]],standalone:!0,features:[Me],decls:1,vars:0,template:function(r,s){r&1&&re(0,"router-outlet")},dependencies:[Bu],encapsulation:2});let t=e;return t})();function x3(t,e){return t.providers&&!t._injector&&(t._injector=Dv(t.providers,e,`Route: ${t.path}`)),t._injector??e}function k0(t){let e=t.children&&t.children.map(k0),n=e?ye(B({},t),{children:e}):B({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ge&&(n.component=P0),n}function er(t){return t.outlet||ge}function N3(t,e){let n=t.filter(i=>er(i)===e);return n.push(...t.filter(i=>er(i)!==e)),n}function ju(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var O3=(t,e,n,i)=>J(r=>(new C0(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),C0=class{constructor(e,n,i,r,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),n0(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=ac(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,i);else s&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=ac(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=ac(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=ac(n);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Nu(s.value.snapshot))}),e.children.length&&this.forwardEvent(new _0(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(n0(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),n0(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=ju(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}},Cp=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},lc=class{constructor(e,n){this.component=e,this.route=n}};function P3(t,e,n){let i=t._root,r=e?e._root:null;return Cu(i,r,n,[i.value])}function k3(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function pc(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!z1(t)?t:e.get(t):i}function Cu(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=ac(e);return t.children.forEach(o=>{F3(o,s[o.value.outlet],n,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Au(a,n.getContext(o),r)),r}function F3(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=L3(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new Cp(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Cu(t,e,a?a.children:null,i,r):Cu(t,e,n,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new lc(a.outlet.component,o))}else o&&Au(e,a,r),r.canActivateChecks.push(new Cp(i)),s.component?Cu(t,null,a?a.children:null,i,r):Cu(t,null,n,i,r);return r}function L3(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ao(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ao(t.url,e.url)||!Zi(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!b0(t,e)||!Zi(t.queryParams,e.queryParams);case"paramsChange":default:return!b0(t,e)}}function Au(t,e,n){let i=ac(t),r=t.value;Object.entries(i).forEach(([s,o])=>{r.component?e?Au(o,e.children.getContext(s),n):Au(o,null,n):Au(o,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new lc(e.outlet.component,r)):n.canDeactivateChecks.push(new lc(null,r)):n.canDeactivateChecks.push(new lc(null,r))}function Uu(t){return typeof t=="function"}function V3(t){return typeof t=="boolean"}function B3(t){return t&&Uu(t.canLoad)}function j3(t){return t&&Uu(t.canActivate)}function U3(t){return t&&Uu(t.canActivateChild)}function $3(t){return t&&Uu(t.canDeactivate)}function H3(t){return t&&Uu(t.canMatch)}function MM(t){return t instanceof _r||t?.name==="EmptyError"}var fp=Symbol("INITIAL_VALUE");function fc(){return De(t=>no(t.map(e=>e.pipe(gt(1),ro(fp)))).pipe(J(e=>{for(let n of e)if(n!==!0){if(n===fp)return fp;if(n===!1||n instanceof Is)return n}return!0}),Je(e=>e!==fp),gt(1)))}function G3(t,e){return Ge(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?G(ye(B({},n),{guardsResult:!0})):z3(o,i,r,t).pipe(Ge(a=>a&&V3(a)?q3(i,s,t,e):G(a)),J(a=>ye(B({},n),{guardsResult:a})))})}function z3(t,e,n,i){return ke(t).pipe(Ge(r=>J3(r.component,r.route,n,e,i)),Un(r=>r!==!0,!0))}function q3(t,e,n,i){return ke(e).pipe(cs(r=>Gi(K3(r.route.parent,i),W3(r.route,i),Y3(t,r.path,n),Q3(t,r.route,n))),Un(r=>r!==!0,!0))}function W3(t,e){return t!==null&&e&&e(new y0(t)),G(!0)}function K3(t,e){return t!==null&&e&&e(new m0(t)),G(!0)}function Q3(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return G(!0);let r=i.map(s=>jh(()=>{let o=ju(e)??n,a=pc(s,o),c=j3(a)?a.canActivate(e,t):ms(o,()=>a(e,t));return Ts(c).pipe(Un())}));return G(r).pipe(fc())}function Y3(t,e,n){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>k3(o)).filter(o=>o!==null).map(o=>jh(()=>{let a=o.guards.map(c=>{let u=ju(o.node)??n,d=pc(c,u),f=U3(d)?d.canActivateChild(i,t):ms(u,()=>d(i,t));return Ts(f).pipe(Un())});return G(a).pipe(fc())}));return G(s).pipe(fc())}function J3(t,e,n,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return G(!0);let o=s.map(a=>{let c=ju(e)??r,u=pc(a,c),d=$3(u)?u.canDeactivate(t,e,n,i):ms(c,()=>u(t,e,n,i));return Ts(d).pipe(Un())});return G(o).pipe(fc())}function X3(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return G(!0);let s=r.map(o=>{let a=pc(o,t),c=B3(a)?a.canLoad(e,n):ms(t,()=>a(e,n));return Ts(c)});return G(s).pipe(fc(),xM(i))}function xM(t){return Ih(Xe(e=>{if(dc(e))throw SM(t,e)}),J(e=>e===!0))}function Z3(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return G(!0);let s=r.map(o=>{let a=pc(o,t),c=H3(a)?a.canMatch(e,n):ms(t,()=>a(e,n));return Ts(c)});return G(s).pipe(fc(),xM(i))}var Lu=class{constructor(e){this.segmentGroup=e||null}},Tp=class extends Error{constructor(e){super(),this.urlTree=e}};function oc(t){return Ba(new Lu(t))}function e4(t){return Ba(new ne(4e3,!1))}function t4(t){return Ba(AM(!1,Kn.GuardRejected))}var T0=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return G(i);if(r.numberOfChildren>1||!r.children[ge])return e4(e.redirectTo);r=r.children[ge]}}applyRedirectCommands(e,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n.startsWith("/"))throw new Tp(r);return r}applyRedirectCreateUrlTree(e,n,i,r){let s=this.createSegmentGroup(e,n.root,i,r);return new Is(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);i[r]=n[a]}else i[r]=s}),i}createSegmentGroup(e,n,i,r){let s=this.createSegments(e,n.segments,i,r),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,i,r)}),new Ve(s,o)}createSegments(e,n,i,r){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new ne(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},D0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function n4(t,e,n,i,r){let s=F0(t,e,n);return s.matched?(i=x3(e,i),Z3(i,e,n,r).pipe(J(o=>o===!0?s:B({},D0)))):G(s)}function F0(t,e,n){if(e.path==="**")return i4(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?B({},D0):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||e3)(n,t,e);if(!r)return B({},D0);let s={};Object.entries(r.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=r.consumed.length>0?B(B({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function i4(t){return{matched:!0,parameters:t.length>0?uM(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function cM(t,e,n,i){return n.length>0&&o4(t,n,i)?{segmentGroup:new Ve(e,s4(i,new Ve(n,t.children))),slicedSegments:[]}:n.length===0&&a4(t,n,i)?{segmentGroup:new Ve(t.segments,r4(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new Ve(t.segments,t.children),slicedSegments:n}}function r4(t,e,n,i){let r={};for(let s of n)if(Sp(t,e,s)&&!i[er(s)]){let o=new Ve([],{});r[er(s)]=o}return B(B({},i),r)}function s4(t,e){let n={};n[ge]=e;for(let i of t)if(i.path===""&&er(i)!==ge){let r=new Ve([],{});n[er(i)]=r}return n}function o4(t,e,n){return n.some(i=>Sp(t,e,i)&&er(i)!==ge)}function a4(t,e,n){return n.some(i=>Sp(t,e,i))}function Sp(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function c4(t,e,n,i){return er(t)!==i&&(i===ge||!Sp(e,n,t))?!1:F0(e,t,n).matched}function l4(t,e,n){return e.length===0&&!t.children[n]}var S0=class{};function u4(t,e,n,i,r,s,o="emptyOnly"){return new A0(t,e,n,i,r,o,s).recognize()}var d4=31,A0=class{constructor(e,n,i,r,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new T0(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ne(4002,`'${e.segmentGroup}'`)}recognize(){let e=cM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(J(n=>{let i=new ku([],Object.freeze({}),Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,{},ge,this.rootComponentType,null,{}),r=new Wn(i,n),s=new Ip("",r),o=v3(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ge).pipe(as(i=>{if(i instanceof Tp)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Lu?this.noMatchError(i):i}))}inheritParamsAndData(e,n){let i=e.value,r=x0(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s,i))}processSegmentGroup(e,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r,!0).pipe(J(s=>s instanceof Wn?[s]:[]))}processChildren(e,n,i){let r=[];for(let s of Object.keys(i.children))s==="primary"?r.unshift(s):r.push(s);return ke(r).pipe(cs(s=>{let o=i.children[s],a=N3(n,s);return this.processSegmentGroup(e,a,o,s)}),qh((s,o)=>(s.push(...o),s)),ls(null),w_(),Ge(s=>{if(s===null)return oc(i);let o=NM(s);return h4(o),G(o)}))}processSegment(e,n,i,r,s,o){return ke(n).pipe(cs(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,i,r,s,o).pipe(as(c=>{if(c instanceof Lu)return G(null);throw c}))),Un(a=>!!a),as(a=>{if(MM(a))return l4(i,r,s)?G(new S0):oc(i);throw a}))}processSegmentAgainstRoute(e,n,i,r,s,o,a){return c4(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,s,o):oc(r):oc(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:d}=F0(n,r,s);if(!a)return oc(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>d4&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,u);return this.applyRedirects.lineralizeSegments(r,f).pipe(Ge(g=>this.processSegment(e,i,n,g.concat(d),o,!1)))}matchSegmentAgainstRoute(e,n,i,r,s){let o=n4(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),o.pipe(De(a=>a.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(De(({routes:c})=>{let u=i._loadedInjector??e,{consumedSegments:d,remainingSegments:f,parameters:g}=a,m=new ku(d,g,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,p4(i),er(i),i.component??i._loadedComponent??null,i,g4(i)),{segmentGroup:v,slicedSegments:D}=cM(n,d,f,c);if(D.length===0&&v.hasChildren())return this.processChildren(u,c,v).pipe(J(x=>x===null?null:new Wn(m,x)));if(c.length===0&&D.length===0)return G(new Wn(m,[]));let C=er(i)===s;return this.processSegment(u,c,v,D,C?ge:s,!0).pipe(J(x=>new Wn(m,x instanceof Wn?[x]:[])))}))):oc(n)))}getChildConfig(e,n,i){return n.children?G({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?G({routes:n._loadedRoutes,injector:n._loadedInjector}):X3(e,n,i,this.urlSerializer).pipe(Ge(r=>r?this.configLoader.loadChildren(e,n).pipe(Xe(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):t4(n))):G({routes:[],injector:e})}};function h4(t){t.sort((e,n)=>e.value.outlet===ge?-1:n.value.outlet===ge?1:e.value.outlet.localeCompare(n.value.outlet))}function f4(t){let e=t.value.routeConfig;return e&&e.path===""}function NM(t){let e=[],n=new Set;for(let i of t){if(!f4(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=NM(i.children);e.push(new Wn(i.value,r))}return e.filter(i=>!n.has(i))}function p4(t){return t.data||{}}function g4(t){return t.resolve||{}}function m4(t,e,n,i,r,s){return Ge(o=>u4(t,e,n,i,o.extractedUrl,r,s).pipe(J(({state:a,tree:c})=>ye(B({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function _4(t,e){return Ge(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return G(n);let s=new Set(r.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of OM(c))o.add(u);let a=0;return ke(o).pipe(cs(c=>s.has(c)?y4(c,i,t,e):(c.data=x0(c,c.parent,t).resolve,G(void 0))),Xe(()=>a++),Ua(1),Ge(c=>a===o.size?G(n):St))})}function OM(t){let e=t.children.map(n=>OM(n)).flat();return[t,...e]}function y4(t,e,n,i){let r=t.routeConfig,s=t._resolve;return r?.title!==void 0&&!TM(r)&&(s[Vu]=r.title),v4(s,t,e,i).pipe(J(o=>(t._resolvedData=o,t.data=x0(t,t.parent,n).resolve,null)))}function v4(t,e,n,i){let r=s0(t);if(r.length===0)return G({});let s={};return ke(r).pipe(Ge(o=>w4(t[o],e,n,i).pipe(Un(),Xe(a=>{s[o]=a}))),Ua(1),Wl(s),as(o=>MM(o)?St:Ba(o)))}function w4(t,e,n,i){let r=ju(e)??i,s=pc(t,r),o=s.resolve?s.resolve(e,n):ms(r,()=>s(e,n));return Ts(o)}function i0(t){return De(e=>{let n=t(e);return n?ke(n).pipe(J(()=>e)):G(e)})}var PM=(()=>{let e=class e{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===ge);return r}getResolvedTitleForRoute(i){return i.data[Vu]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>N(E4),providedIn:"root"});let t=e;return t})(),E4=(()=>{let e=class e extends PM{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)($(dp))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),L0=new j("",{providedIn:"root",factory:()=>({})}),V0=new j(""),b4=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=N(Fv)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return G(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Ts(i.loadComponent()).pipe(J(kM),Xe(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),io(()=>{this.componentLoaders.delete(i)})),s=new Pa(r,()=>new Ce).pipe(Oa());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return G({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=I4(r,this.compiler,i,this.onLoadEndListener).pipe(io(()=>{this.childrenLoaders.delete(r)})),a=new Pa(o,()=>new Ce).pipe(Oa());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function I4(t,e,n,i){return Ts(t.loadChildren()).pipe(J(kM),Ge(r=>r instanceof au||Array.isArray(r)?G(r):ke(e.compileModuleAsync(r))),J(r=>{i&&i(t);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(n).injector,o=s.get(V0,[],{optional:!0,self:!0}).flat()),{routes:o.map(k0),injector:s}}))}function C4(t){return t&&typeof t=="object"&&"default"in t}function kM(t){return C4(t)?t.default:t}var B0=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>N(T4),providedIn:"root"});let t=e;return t})(),T4=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),D4=new j("");var S4=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ce,this.transitionAbortSubject=new Ce,this.configLoader=N(b4),this.environmentInjector=N(wn),this.urlSerializer=N(M0),this.rootContexts=N(Dp),this.location=N(vu),this.inputBindingEnabled=N(O0,{optional:!0})!==null,this.titleStrategy=N(PM),this.options=N(L0,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=N(B0),this.createViewTransition=N(D4,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>G(void 0),this.rootComponentType=null;let i=s=>this.events.next(new p0(s)),r=s=>this.events.next(new g0(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(ye(B(B({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new tt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Su,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Je(o=>o.id!==0),J(o=>ye(B({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),De(o=>{let a=!1,c=!1;return G(o).pipe(De(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Kn.SupersededByNewNavigation),St;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ye(B({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=u.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!d&&f!=="reload"){let g="";return this.events.next(new Mo(u.id,this.urlSerializer.serialize(u.rawUrl),g,l0.IgnoredSameUrlNavigation)),u.resolve(null),St}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return G(u).pipe(De(g=>{let m=this.transitions?.getValue();return this.events.next(new Mu(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),m!==this.transitions?.getValue()?St:Promise.resolve(g)}),m4(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),Xe(g=>{o.targetSnapshot=g.targetSnapshot,o.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=ye(B({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let m=new wp(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(m)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:g,extractedUrl:m,source:v,restoredState:D,extras:C}=u,x=new Mu(g,this.urlSerializer.serialize(m),v,D);this.events.next(x);let k=IM(this.rootComponentType).snapshot;return this.currentTransition=o=ye(B({},u),{targetSnapshot:k,urlAfterRedirects:m,extras:ye(B({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,G(o)}else{let g="";return this.events.next(new Mo(u.id,this.urlSerializer.serialize(u.extractedUrl),g,l0.IgnoredByUrlHandlingStrategy)),u.resolve(null),St}}),Xe(u=>{let d=new u0(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),J(u=>(this.currentTransition=o=ye(B({},u),{guards:P3(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),G3(this.environmentInjector,u=>this.events.next(u)),Xe(u=>{if(o.guardsResult=u.guardsResult,dc(u.guardsResult))throw SM(this.urlSerializer,u.guardsResult);let d=new d0(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),Je(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Kn.GuardRejected),!1)),i0(u=>{if(u.guards.canActivateChecks.length)return G(u).pipe(Xe(d=>{let f=new h0(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),De(d=>{let f=!1;return G(d).pipe(_4(this.paramsInheritanceStrategy,this.environmentInjector),Xe({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",Kn.NoDataFromResolver)}}))}),Xe(d=>{let f=new f0(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),i0(u=>{let d=f=>{let g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(Xe(m=>{f.component=m}),J(()=>{})));for(let m of f.children)g.push(...d(m));return g};return no(d(u.targetSnapshot.root)).pipe(ls(null),gt(1))}),i0(()=>this.afterPreactivation()),De(()=>{let{currentSnapshot:u,targetSnapshot:d}=o,f=this.createViewTransition?.(this.environmentInjector,u.root,d.root);return f?ke(f).pipe(J(()=>o)):G(o)}),J(u=>{let d=S3(i.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=ye(B({},u),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),Xe(()=>{this.events.next(new Ou)}),O3(this.rootContexts,i.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),gt(1),Xe({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ro(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),At(this.transitionAbortSubject.pipe(Xe(u=>{throw u}))),io(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",Kn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),as(u=>{if(c=!0,RM(u))this.events.next(new Cs(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),M3(u)?this.events.next(new Pu(u.url)):o.resolve(!1);else{this.events.next(new xu(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(i.errorHandler(u))}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return St}))}))}cancelNavigationTransition(i,r,s){let o=new Cs(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function A4(t){return t!==Su}var R4=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>N(M4),providedIn:"root"});let t=e;return t})(),R0=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},M4=(()=>{let e=class e extends R0{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=_o(e)))(s||e)}})(),e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),FM=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:()=>N(x4),providedIn:"root"});let t=e;return t})(),x4=(()=>{let e=class e extends FM{constructor(){super(...arguments),this.location=N(vu),this.urlSerializer=N(M0),this.options=N(L0,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=N(B0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Is,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=IM(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof Mu)this.stateMemento=this.createStateMemento();else if(i instanceof Mo)this.rawUrlTree=r.initialUrl;else if(i instanceof wp){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else i instanceof Ou?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Cs&&(i.code===Kn.GuardRejected||i.code===Kn.NoDataFromResolver)?this.restoreHistory(r):i instanceof xu?this.restoreHistory(r,!0):i instanceof Ro&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,a=B(B({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",a)}else{let o=B(B({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=_o(e)))(s||e)}})(),e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Tu=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Tu||{});function N4(t,e){t.events.pipe(Je(n=>n instanceof Ro||n instanceof Cs||n instanceof xu||n instanceof Mo),J(n=>n instanceof Ro||n instanceof Mo?Tu.COMPLETE:(n instanceof Cs?n.code===Kn.Redirect||n.code===Kn.SupersededByNewNavigation:!1)?Tu.REDIRECTING:Tu.FAILED),Je(n=>n!==Tu.REDIRECTING),gt(1)).subscribe(()=>{e()})}function O4(t){throw t}var P4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},k4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},bn=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=N(ep),this.stateManager=N(FM),this.options=N(L0,{optional:!0})||{},this.pendingTasks=N(pu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=N(S4),this.urlSerializer=N(M0),this.location=N(vu),this.urlHandlingStrategy=N(B0),this._events=new Ce,this.errorHandler=this.options.errorHandler||O4,this.navigated=!1,this.routeReuseStrategy=N(R4),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=N(V0,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!N(O0,{optional:!0}),this.eventsSubscription=new it,this.isNgZoneEnabled=N(te)instanceof te&&te.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Cs&&r.code!==Kn.Redirect&&r.code!==Kn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ro)this.navigated=!0;else if(r instanceof Pu){let a=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||A4(s.source)};this.scheduleNavigation(a,Su,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}L4(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Su,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let u=B({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(i);this.scheduleNavigation(c,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(k0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:a,f=null;switch(c){case"merge":f=B(B({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let m=s?s.snapshot:this.routerState.snapshot.root;g=vM(m)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),g=this.currentUrlTree.root}return wM(g,i,f,d??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=dc(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Su,null,r)}navigate(i,r={skipLocationChange:!1}){return F4(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=B({},P4):r===!1?s=B({},k4):s=r,dc(i))return rM(this.currentUrlTree,i,s);let o=this.parseUrl(i);return rM(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,u,d;a?(c=a.resolve,u=a.reject,d=a.promise):d=new Promise((g,m)=>{c=g,u=m});let f=this.pendingTasks.add();return N4(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:c,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function F4(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new ne(4008,!1)}function L4(t){return!(t instanceof Ou)&&!(t instanceof Pu)}var V4=new j("");function LM(t,...e){return Ze([{provide:V0,multi:!0,useValue:t},[],{provide:hc,useFactory:B4,deps:[bn]},{provide:sc,multi:!0,useFactory:j4},e.map(n=>n.\u0275providers)])}function B4(t){return t.routerState.root}function j4(){let t=N(Re);return e=>{let n=t.get(Di);if(e!==n.components[0])return;let i=t.get(bn),r=t.get(U4);t.get($4)===1&&i.initialNavigation(),t.get(H4,null,Ee.Optional)?.setUpPreloading(),t.get(V4,null,Ee.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var U4=new j("",{factory:()=>new Ce}),$4=new j("",{providedIn:"root",factory:()=>1});var H4=new j("");var GM=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(Y(vo),Y(Xt))},e.\u0275dir=mt({type:e});let t=e;return t})(),zM=(()=>{let e=class e extends GM{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=_o(e)))(s||e)}})(),e.\u0275dir=mt({type:e,features:[Ti]});let t=e;return t})(),Fp=new j("");var G4={provide:Fp,useExisting:Cr(()=>tr),multi:!0};function z4(){let t=xr()?xr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var q4=new j(""),tr=(()=>{let e=class e extends GM{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!z4())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(Y(vo),Y(Xt),Y(q4,8))},e.\u0275dir=mt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&qe("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Rr([G4]),Ti]});let t=e;return t})();function Ds(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function qM(t){return t!=null&&typeof t.length=="number"}var G0=new j(""),z0=new j(""),W4=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ai=class{static min(e){return K4(e)}static max(e){return Q4(e)}static required(e){return Y4(e)}static requiredTrue(e){return J4(e)}static email(e){return X4(e)}static minLength(e){return Z4(e)}static maxLength(e){return ez(e)}static pattern(e){return tz(e)}static nullValidator(e){return WM(e)}static compose(e){return ZM(e)}static composeAsync(e){return tx(e)}};function K4(t){return e=>{if(Ds(e.value)||Ds(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function Q4(t){return e=>{if(Ds(e.value)||Ds(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function Y4(t){return Ds(t.value)?{required:!0}:null}function J4(t){return t.value===!0?null:{required:!0}}function X4(t){return Ds(t.value)||W4.test(t.value)?null:{email:!0}}function Z4(t){return e=>Ds(e.value)||!qM(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function ez(t){return e=>qM(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function tz(t){if(!t)return WM;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),i=>{if(Ds(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}function WM(t){return null}function KM(t){return t!=null}function QM(t){return Co(t)?ke(t):t}function YM(t){let e={};return t.forEach(n=>{e=n!=null?B(B({},e),n):e}),Object.keys(e).length===0?null:e}function JM(t,e){return e.map(n=>n(t))}function nz(t){return!t.validate}function XM(t){return t.map(e=>nz(e)?e:n=>e.validate(n))}function ZM(t){if(!t)return null;let e=t.filter(KM);return e.length==0?null:function(n){return YM(JM(n,e))}}function ex(t){return t!=null?ZM(XM(t)):null}function tx(t){if(!t)return null;let e=t.filter(KM);return e.length==0?null:function(n){let i=JM(n,e).map(QM);return p_(i).pipe(J(YM))}}function nx(t){return t!=null?tx(XM(t)):null}function VM(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function ix(t){return t._rawValidators}function rx(t){return t._rawAsyncValidators}function j0(t){return t?Array.isArray(t)?t:[t]:[]}function Rp(t,e){return Array.isArray(t)?t.includes(e):t===e}function BM(t,e){let n=j0(e);return j0(t).forEach(r=>{Rp(n,r)||n.push(r)}),n}function jM(t,e){return j0(e).filter(n=>!Rp(t,n))}var Mp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ex(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=nx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},yc=class extends Mp{get formDirective(){return null}get path(){return null}},xo=class extends Mp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},xp=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},iz={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ece=ye(B({},iz),{"[class.ng-submitted]":"isSubmitted"}),Ss=(()=>{let e=class e extends xp{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(Y(xo,2))},e.\u0275dir=mt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&vs("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Ti]});let t=e;return t})(),wc=(()=>{let e=class e extends xp{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(Y(yc,10))},e.\u0275dir=mt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){r&2&&vs("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Ti]});let t=e;return t})();var $u="VALID",Ap="INVALID",mc="PENDING",Hu="DISABLED";function q0(t){return(Lp(t)?t.validators:t)||null}function rz(t){return Array.isArray(t)?ex(t):t||null}function W0(t,e){return(Lp(e)?e.asyncValidators:t)||null}function sz(t){return Array.isArray(t)?nx(t):t||null}function Lp(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function sx(t,e,n){let i=t.controls;if(!(e?Object.keys(i):i).length)throw new ne(1e3,"");if(!i[n])throw new ne(1001,"")}function ox(t,e,n){t._forEachChild((i,r)=>{if(n[r]===void 0)throw new ne(1002,"")})}var vc=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===$u}get invalid(){return this.status===Ap}get pending(){return this.status==mc}get disabled(){return this.status===Hu}get enabled(){return this.status!==Hu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(BM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(BM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(jM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(jM(e,this._rawAsyncValidators))}hasValidator(e){return Rp(this._rawValidators,e)}hasAsyncValidator(e){return Rp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=mc,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Hu,this.errors=null,this._forEachChild(i=>{i.disable(ye(B({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ye(B({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=$u,this._forEachChild(i=>{i.enable(ye(B({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ye(B({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$u||this.status===mc)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Hu:$u}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=mc,this._hasOwnPendingAsyncValidator=!0;let n=QM(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ue,this.statusChanges=new Ue}_calculateStatus(){return this._allControlsDisabled()?Hu:this.errors?Ap:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(mc)?mc:this._anyControlsHaveStatus(Ap)?Ap:$u}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Lp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=rz(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=sz(this._rawAsyncValidators)}},Np=class extends vc{constructor(e,n,i){super(q0(n),W0(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){ox(this,!0,e),Object.keys(e).forEach(i=>{sx(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,s)=>{i=n(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var U0=class extends Np{};var K0=new j("CallSetDisabledState",{providedIn:"root",factory:()=>Q0}),Q0="always";function oz(t,e){return[...e.path,t]}function $0(t,e,n=Q0){Y0(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),cz(t,e),uz(t,e),lz(t,e),az(t,e)}function Op(t,e,n=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),kp(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Pp(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function az(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Y0(t,e){let n=ix(t);e.validator!==null?t.setValidators(VM(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=rx(t);e.asyncValidator!==null?t.setAsyncValidators(VM(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();Pp(e._rawValidators,r),Pp(e._rawAsyncValidators,r)}function kp(t,e){let n=!1;if(t!==null){if(e.validator!==null){let r=ix(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.validator);s.length!==r.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let r=rx(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(n=!0,t.setAsyncValidators(s))}}}let i=()=>{};return Pp(e._rawValidators,i),Pp(e._rawAsyncValidators,i),n}function cz(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&ax(t,e)})}function lz(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&ax(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function ax(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function uz(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function dz(t,e){t==null,Y0(t,e)}function hz(t,e){return kp(t,e)}function cx(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function fz(t){return Object.getPrototypeOf(t.constructor)===zM}function pz(t,e){t._syncPendingControls(),e.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function lx(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(s=>{s.constructor===tr?n=s:fz(s)?i=s:r=s}),r||i||n||null}function gz(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function UM(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function $M(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var _c=class extends vc{constructor(e=null,n,i){super(q0(n),W0(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Lp(n)&&(n.nonNullable||n.initialValueIsDefault)&&($M(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){UM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){UM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){$M(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var mz=t=>t instanceof _c;var Ec=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=mt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),_z={provide:Fp,useExisting:Cr(()=>J0),multi:!0},J0=(()=>{let e=class e extends zM{writeValue(i){let r=i??"";this.setProperty("value",r)}registerOnChange(i){this.onChange=r=>{i(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=_o(e)))(s||e)}})(),e.\u0275dir=mt({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,s){r&1&&qe("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[Rr([_z]),Ti]});let t=e;return t})();var X0=new j(""),yz={provide:xo,useExisting:Cr(()=>Z0)},Z0=(()=>{let e=class e extends xo{set isDisabled(i){}constructor(i,r,s,o,a){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=a,this.update=new Ue,this._ngModelWarningSent=!1,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=lx(this,s)}ngOnChanges(i){if(this._isControlChanged(i)){let r=i.form.previousValue;r&&Op(r,this,!1),$0(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}cx(i,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Op(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_isControlChanged(i){return i.hasOwnProperty("form")}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(Y(G0,10),Y(z0,10),Y(Fp,10),Y(X0,8),Y(K0,8))},e.\u0275dir=mt({type:e,selectors:[["","formControl",""]],inputs:{form:[Vt.None,"formControl","form"],isDisabled:[Vt.None,"disabled","isDisabled"],model:[Vt.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Rr([yz]),Ti,On]});let t=e;return t})(),vz={provide:yc,useExisting:Cr(()=>No)},No=(()=>{let e=class e extends yc{constructor(i,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Ue,this._setValidators(i),this._setAsyncValidators(r)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(kp(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let r=this.form.get(i.path);return $0(r,i,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),r}getControl(i){return this.form.get(i.path)}removeControl(i){Op(i.control||null,i,!1),gz(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,r){this.form.get(i.path).setValue(r)}onSubmit(i){return this.submitted=!0,pz(this.form,this.directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_updateDomValue(){this.directives.forEach(i=>{let r=i.control,s=this.form.get(i.path);r!==s&&(Op(r||null,i),mz(s)&&($0(s,i,this.callSetDisabledState),i.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let r=this.form.get(i.path);dz(r,i),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let r=this.form.get(i.path);r&&hz(r,i)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Y0(this.form,this),this._oldForm&&kp(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)(Y(G0,10),Y(z0,10),Y(K0,8))},e.\u0275dir=mt({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,s){r&1&&qe("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[Vt.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Rr([vz]),Ti,On]});let t=e;return t})();var wz={provide:xo,useExisting:Cr(()=>Oo)},Oo=(()=>{let e=class e extends xo{set isDisabled(i){}constructor(i,r,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new Ue,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=lx(this,o)}ngOnChanges(i){this._added||this._setUpControl(),cx(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return oz(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(Y(yc,13),Y(G0,10),Y(z0,10),Y(Fp,10),Y(X0,8))},e.\u0275dir=mt({type:e,selectors:[["","formControlName",""]],inputs:{name:[Vt.None,"formControlName","name"],isDisabled:[Vt.None,"disabled","isDisabled"],model:[Vt.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Rr([wz]),Ti,On]});let t=e;return t})();var Ez=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ri({type:e}),e.\u0275inj=ii({});let t=e;return t})(),H0=class extends vc{constructor(e,n,i){super(q0(n),W0(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,i={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,n={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),n&&(this.controls.splice(r,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){ox(this,!1,e),e.forEach((i,r)=>{sx(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,i)=>i._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,i)=>{e(n,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function HM(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var bc=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let i=new e;return i.useNonNullable=!0,i}group(i,r=null){let s=this._reduceControls(i),o={};return HM(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Np(s,o)}record(i,r=null){let s=this._reduceControls(i);return new U0(s,r)}control(i,r,s){let o={};return this.useNonNullable?(HM(r)?o=r:(o.validators=r,o.asyncValidators=s),new _c(i,ye(B({},o),{nonNullable:!0}))):new _c(i,r,s)}array(i,r,s){let o=i.map(a=>this._createControl(a));return new H0(o,r,s)}_reduceControls(i){let r={};return Object.keys(i).forEach(s=>{r[s]=this._createControl(i[s])}),r}_createControl(i){if(i instanceof _c)return i;if(i instanceof vc)return i;if(Array.isArray(i)){let r=i[0],s=i.length>1?i[1]:null,o=i.length>2?i[2]:null;return this.control(r,s,o)}else return this.control(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var As=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:X0,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:K0,useValue:i.callSetDisabledState??Q0}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ri({type:e}),e.\u0275inj=ii({imports:[Ez]});let t=e;return t})();function bz(t,e){if(t&1&&(Sr(0),Tr(),U(1,"svg",1),re(2,"path",2),H(),Ar()),t&2){let n=e.$implicit;ce(),bo("top",n.top)("left",n.left)("width",n.size)("height",n.size)("opacity",n.opacity)}}var Bp=(()=>{let e=class e{constructor(){this.dollarSigns=5,this.minSize=50,this.maxSize=80,this.minOpacity=.05,this.maxOpacity=.15,this.random=!1,this.dollarSignArray=[{top:"70%",left:"25%",size:"200px",opacity:.1},{top:"20%",left:"75%",size:"150px",opacity:.05},{top:"25%",left:"50%",size:"70px",opacity:.15},{top:"60%",left:"40%",size:"80px",opacity:.1}]}ngOnInit(){this.random&&this.generateDollarSigns()}generateDollarSigns(){this.dollarSignArray=Array(this.dollarSigns).fill(null).map(()=>({top:`${this.getRandomNumber(10,90)}%`,left:`${this.getRandomNumber(10,90)}%`,size:`${this.getRandomNumber(this.minSize,this.maxSize)}px`,opacity:this.getRandomNumber(this.minOpacity,this.maxOpacity)}))}getRandomNumber(i,r){return Math.random()*(r-i)+i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-dollar-sign-svgs"]],inputs:{dollarSigns:"dollarSigns",minSize:"minSize",maxSize:"maxSize",minOpacity:"minOpacity",maxOpacity:"maxOpacity",random:"random"},standalone:!0,features:[Me],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["viewBox","0 0 24 24",1,"position-absolute","dollar-sign","z-0"],["fill","#fd7e14","d","M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M11,17H13V16H14A1,1 0 0,0 15,15V12A1,1 0 0,0 14,11H11V10H15V8H13V7H11V8H10A1,1 0 0,0 9,9V12A1,1 0 0,0 10,13H13V14H9V16H11V17Z"]],template:function(r,s){r&1&&rt(0,bz,3,10,"ng-container",0),r&2&&ve("ngForOf",s.dollarSignArray)},dependencies:[Zt,Es],styles:[".dollar-sign[_ngcontent-%COMP%]{pointer-events:none}"]});let t=e;return t})();function Iz(t,e){t&1&&(Sr(0),Tr(),U(1,"svg",1),re(2,"path",2),H(),Ar())}function Cz(t,e){t&1&&(Sr(0),Tr(),U(1,"svg",3),re(2,"path",4),H(),Ar())}var jp=(()=>{let e=class e{constructor(){this.wave="top"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-wave"]],inputs:{wave:"wave"},standalone:!0,features:[Me],decls:2,vars:2,consts:[[4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320",1,"wave-top","z-0"],["fill","#ff9d00","fill-opacity","0.2","d","M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,165.3C1248,171,1344,149,1392,138.7L1440,128L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320",1,"wave-bottom"],["fill","#ff9d00","fill-opacity","0.2","d","M0,224L48,213.3C96,203,192,181,288,181.3C384,181,480,203,576,224C672,245,768,267,864,250.7C960,235,1056,181,1152,165.3C1248,149,1344,171,1392,181.3L1440,192L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"]],template:function(r,s){r&1&&rt(0,Iz,3,0,"ng-container",0)(1,Cz,3,0,"ng-container",0),r&2&&(ve("ngIf",s.wave==="top"),ce(),ve("ngIf",s.wave==="bottom"))},dependencies:[Zt,bs],styles:[".wave-top[_ngcontent-%COMP%], .wave-bottom[_ngcontent-%COMP%]{position:absolute;width:100%}.wave-top[_ngcontent-%COMP%]{top:0}.wave-bottom[_ngcontent-%COMP%]{bottom:0}"]});let t=e;return t})();var ux=(()=>{let e=class e{constructor(){this.size=250}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-loader"]],inputs:{size:"size"},standalone:!0,features:[Me],decls:4,vars:2,consts:[["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24"],["d","M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M11,17H13V16H14A1,1 0 0,0 15,15V12A1,1 0 0,0 14,11H11V10H15V8H13V7H11V8H10A1,1 0 0,0 9,9V12A1,1 0 0,0 10,13H13V14H9V16H11V17Z",1,"loader"]],template:function(r,s){r&1&&(Tr(),U(0,"svg",0)(1,"style"),we(2," @keyframes spin { 0% { transform: rotate(0deg) scale(1); } 25% { transform: rotate(90deg) scale(1.1); } 50% { transform: rotate(180deg) scale(1); } 75% { transform: rotate(270deg) scale(1.1); } 100% { transform: rotate(360deg) scale(1); } } .loader { animation: spin 2s linear infinite; transform-origin: center; fill: #fd7e14; stroke: #000000; stroke-width: 0.5; } "),H(),re(3,"path",1),H()),r&2&&Eo("width",s.size)("height",s.size)},styles:["svg[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}"]});let t=e;return t})();var Tz="firebase",Dz="10.12.3";oe(Tz,Dz,"app");var dt=new Ir("ANGULARFIRE2_VERSION"),Cc=t=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${t} in the constructor, first ensure that ${t} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${t})\`.`;function an(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var tn=(t,e)=>{let n=e?[e]:fh(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},In=class{constructor(){return tn(Sz)}},Sz="app-check";function Ic(){}var Up=class{zone;delegate;constructor(e,n=d_){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,i)}},ew=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ic,{},Ic,Ic)),n.pipe(Xe({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},wt=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Up(Zone.current)),this.insideAngular=n.run(()=>new Up(Zone.current,Zn)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)($(te))};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function $p(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Az(t){return $p().ngZone.runOutsideAngular(()=>t())}function Po(t){return $p().ngZone.run(()=>t())}function tw(t){return Rz($p())(t)}function Rz(t){return function(n){return n=n.lift(new ew(t.ngZone)),n.pipe(ei(t.outsideAngular),jn(t.insideAngular))}}var Mz=(t,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Po(()=>t.apply(void 0,i))},be=(t,e)=>function(){let n,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(e&&(n||=Po(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ic,{},Ic,Ic))),i[s]=Mz(i[s],n));let r=Az(()=>t.apply(this,i));if(!e)if(r instanceof Q){let s=$p();return r.pipe(ei(s.outsideAngular),jn(s.insideAngular))}else return Po(()=>r);return r instanceof Q?r.pipe(tw):r instanceof Promise?Po(()=>new Promise((s,o)=>r.then(a=>Po(()=>s(a)),a=>Po(()=>o(a))))):typeof r=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),r.apply(this,arguments)}:Po(()=>r)};var _t=class{constructor(e){return e}},Mt=class{constructor(){return fh()}};function Nz(t){return t&&t.length===1?t[0]:new _t(Ft())}var nw=new j("angularfire2._apps"),Oz={provide:_t,useFactory:Nz,deps:[[new _e,nw]]},Pz={provide:Mt,deps:[[new _e,nw]]};function kz(t){return(e,n)=>{let i=n.get($t);oe("angularfire",dt.full,"core"),oe("angularfire",dt.full,"app"),oe("angular",Pv.full,i.toString());let r=e.runOutsideAngular(()=>t(n));return new _t(r)}}function dx(t,...e){return Ze([Oz,Pz,{provide:nw,useFactory:kz(t),multi:!0,deps:[te,Re,wt,...e]}])}var hx=be(TD,!0);function px(t){return new Q(function(e){var n=gh(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}function gx(t){return new Q(function(e){var n=ph(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var mx="auth",ci=class{constructor(e){return e}},Si=class{constructor(){return tn(mx)}};var iw=new j("angularfire2.auth-instances");function Rq(t,e){let n=an(mx,t,e);return n&&new ci(n)}function Mq(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new ci(i)}}var xq={provide:Si,deps:[[new _e,iw]]},Nq={provide:ci,useFactory:Rq,deps:[[new _e,iw],_t]};function _x(t,...e){return oe("angularfire",dt.full,"auth"),Ze([Nq,xq,{provide:iw,useFactory:Mq(t),multi:!0,deps:[te,Re,wt,Mt,[new _e,In],...e]}])}var Gu=be(px,!0),yx=be(gx,!0);var vx=be(Ym,!0);var wx=be(Zm,!0);var Ex=be(Jm,!0);var bx=be(Xm,!0);var nr=(()=>{let e=class e{constructor(i,r){this.firebaseAuth=i,this.router=r,this.user$=yx(this.firebaseAuth),this.currentUserSig=tR(void 0)}register(i,r,s){let o=vx(this.firebaseAuth,i,r).then(a=>bx(a.user,{displayName:s}));return ke(o)}login(i,r){let s=Ex(this.firebaseAuth,i,r).then(()=>{});return ke(s)}logout(){this.firebaseAuth.signOut().then(()=>{this.currentUserSig.set(null),this.router.navigateByUrl("/login")})}};e.\u0275fac=function(r){return new(r||e)($(ci),$(bn))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ix=(()=>{let e=class e{constructor(i){this.platformId=i}isBrowser(){return Gv(this.platformId)}isServer(){return Nr(this.platformId)}};e.\u0275fac=function(r){return new(r||e)($($t))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Pq(t,e){t&1&&(U(0,"div"),re(1,"app-loader"),H())}function kq(t,e){if(t&1){let n=Pn();re(0,"app-wave",2),U(1,"div",3),re(2,"app-dollar-sign-svgs",2),U(3,"form",4),qe("ngSubmit",function(){jt(n);let r=st();return Ut(r.login())}),U(4,"div",5)(5,"div",6)(6,"h1",7),we(7,"Login"),H(),U(8,"h5",8),we(9,"Please sign in to continue"),H(),U(10,"div",9),re(11,"input",10),H(),U(12,"div",11),re(13,"input",12),H(),U(14,"button",13),we(15," Login "),re(16,"i",14),H(),U(17,"div",15)(18,"a",16),qe("click",function(){jt(n);let r=st();return Ut(r.navigateToRegister())}),we(19,"Sign Up"),H()()()()()(),re(20,"app-wave",17)}if(t&2){let n=st();ce(3),ve("formGroup",n.loginForm),ce(17),ve("wave","bottom")}}var Cx=(()=>{let e=class e{constructor(i,r,s,o){this.fb=i,this.auth=r,this.router=s,this.platformService=o,this.isLoading=!0,this.loginForm=this.fb.nonNullable.group({email:[""],password:[""]}),this.error=null,this.platformService.isBrowser()&&(this.isLoading=!1)}login(){this.isLoading=!0;let i=this.loginForm.getRawValue();this.auth.login(i.email,i.password).subscribe({next:()=>this.router.navigateByUrl("/dashboard"),error:r=>{this.error=r.code},complete:()=>{this.isLoading=!1}})}navigateToRegister(){this.router.navigateByUrl("/register")}};e.\u0275fac=function(r){return new(r||e)(Y(bc),Y(nr),Y(bn),Y(Ix))},e.\u0275cmp=Ae({type:e,selectors:[["app-login"]],standalone:!0,features:[Me],decls:3,vars:2,consts:[["loginFormTemplate",""],[4,"ngIf","ngIfElse"],[1,"z-0"],[1,"container-fluid","vh-100","d-flex","flex-column","align-items-center","justify-content-center","bg-light","z-n1"],[1,"z-3",3,"ngSubmit","formGroup"],[1,"d-flex","justify-content-center","align-items-center"],[1,"row","col-11","col-md-9","col-lg-7","col-xl-5"],[1,"fs-1","fw-bolder","text-start"],[1,"fs-6","text-muted","mb-4"],[1,"mb-0"],["id","email","type","email","formControlName","email","placeholder","Email",1,"email","w-100","shadow-none"],[1,"mb-4","position-relative"],["id","password","type","password","formControlName","password","placeholder","Password",1,"password","w-100"],["type","submit",1,"col-4","offset-8","btn","btn-warning","text-white","mb-3"],[1,"bi","bi-arrow-right"],[1,"text-end"],["role","button",1,"text-decoration-none","hyperlink",3,"click"],[1,"z-0",3,"wave"]],template:function(r,s){if(r&1&&rt(0,Pq,2,0,"div",1)(1,kq,21,2,"ng-template",null,0,yu),r&2){let o=Mv(2);ve("ngIf",s.isLoading)("ngIfElse",o)}},dependencies:[Zt,bs,As,Ec,tr,Ss,wc,No,Oo,Bp,jp,ux],styles:["svg[_ngcontent-%COMP%]{pointer-events:none}.email[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px;border-bottom:none}.password[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px}"]});let t=e;return t})();var Tx=(()=>{let e=class e{constructor(i,r,s){this.fb=i,this.authService=r,this.router=s,this.registerForm=this.fb.nonNullable.group({email:["",ai.required],username:["",ai.required],password:["",ai.required]}),this.error=null}register(){console.log(this.registerForm.value);let i=this.registerForm.getRawValue();this.authService.register(i.email,i.password,i.username).subscribe({next:()=>this.router.navigate(["/login"]),error:r=>{this.error=r.code}})}navigateToLogin(){this.router.navigateByUrl("/login")}};e.\u0275fac=function(r){return new(r||e)(Y(bc),Y(nr),Y(bn))},e.\u0275cmp=Ae({type:e,selectors:[["app-register"]],standalone:!0,features:[Me],decls:23,vars:2,consts:[[1,"z-0"],[1,"container-fluid","vh-100","d-flex","flex-column","align-items-center","justify-content-center","bg-light","z-n1"],[1,"z-3",3,"ngSubmit","formGroup"],[1,"d-flex","justify-content-center","align-items-center"],[1,"row","col-11","col-md-9","col-lg-7","col-xl-5"],[1,"fs-1","fw-bolder","text-start"],[1,"fs-6","text-muted","mb-4"],[1,"mb-0"],["id","email","type","email","formControlName","email","placeholder","Email",1,"email","w-100","shadow-none"],[1,"mb-0","position-relative"],["id","username","type","text","formControlName","username","placeholder","Username",1,"username","w-100"],[1,"mb-4","position-relative"],["id","password","type","password","formControlName","password","placeholder","Password",1,"password","w-100"],["type","submit",1,"col-4","offset-8","btn","btn-warning","text-white","mb-3"],[1,"bi","bi-arrow-right"],[1,"text-end"],["role","button",1,"text-decoration-none",2,"color","#fd7e14",3,"click"],[1,"z-0",3,"wave"]],template:function(r,s){r&1&&(re(0,"app-wave",0),U(1,"div",1),re(2,"app-dollar-sign-svgs",0),U(3,"form",2),qe("ngSubmit",function(){return s.register()}),U(4,"div",3)(5,"div",4)(6,"h1",5),we(7,"Register"),H(),U(8,"h5",6),we(9,"Please sign up to continue"),H(),U(10,"div",7),re(11,"input",8),H(),U(12,"div",9),re(13,"input",10),H(),U(14,"div",11),re(15,"input",12),H(),U(16,"button",13),we(17," Register "),re(18,"i",14),H(),U(19,"div",15)(20,"a",16),qe("click",function(){return s.navigateToLogin()}),we(21,"Login"),H()()()()()(),re(22,"app-wave",17)),r&2&&(ce(3),ve("formGroup",s.registerForm),ce(19),ve("wave","bottom"))},dependencies:[As,Ec,tr,Ss,wc,No,Oo,jp,Bp],styles:[".email[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px;border-bottom:none}.password[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px;border-top:none}"]});let t=e;return t})();var Fq=(()=>{let e=class e{constructor(i,r){this.auth=i,this.router=r}canActivate(){return Gu(this.auth).pipe(gt(1),J(i=>i?!0:(this.router.navigate(["/login"]),!1)))}};e.\u0275fac=function(r){return new(r||e)($(ci),$(bn))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Lq=(()=>{let e=class e{constructor(i,r){this.auth=i,this.router=r}canActivate(){return Gu(this.auth).pipe(gt(1),J(i=>i?(this.router.navigate(["/dashboard"]),!1):!0))}};e.\u0275fac=function(r){return new(r||e)($(ci),$(bn))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Dx=(t,e)=>N(Fq).canActivate(),Hp=(t,e)=>N(Lq).canActivate();var Et="top",nn="bottom",Ht="right",xt="left",Gp="auto",Rs=[Et,nn,Ht,xt],Or="start",ko="end",Sx="clippingParents",zp="viewport",Tc="popper",Ax="reference",sw=Rs.reduce(function(t,e){return t.concat([e+"-"+Or,e+"-"+ko])},[]),qp=[].concat(Rs,[Gp]).reduce(function(t,e){return t.concat([e,e+"-"+Or,e+"-"+ko])},[]),Vq="beforeRead",Bq="read",jq="afterRead",Uq="beforeMain",$q="main",Hq="afterMain",Gq="beforeWrite",zq="write",qq="afterWrite",Rx=[Vq,Bq,jq,Uq,$q,Hq,Gq,zq,qq];function Gt(t){return t?(t.nodeName||"").toLowerCase():null}function nt(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function li(t){var e=nt(t).Element;return t instanceof e||t instanceof Element}function Nt(t){var e=nt(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Dc(t){if(typeof ShadowRoot>"u")return!1;var e=nt(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Wq(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},r=e.attributes[n]||{},s=e.elements[n];!Nt(s)||!Gt(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(o){var a=r[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function Kq(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],s=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),a=o.reduce(function(c,u){return c[u]="",c},{});!Nt(r)||!Gt(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(c){r.removeAttribute(c)}))})}}var Mx={name:"applyStyles",enabled:!0,phase:"write",fn:Wq,effect:Kq,requires:["computeStyles"]};function zt(t){return t.split("-")[0]}var Ai=Math.max,Fo=Math.min,Pr=Math.round;function Sc(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function qu(){return!/^((?!chrome|android).)*safari/i.test(Sc())}function ui(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=t.getBoundingClientRect(),r=1,s=1;e&&Nt(t)&&(r=t.offsetWidth>0&&Pr(i.width)/t.offsetWidth||1,s=t.offsetHeight>0&&Pr(i.height)/t.offsetHeight||1);var o=li(t)?nt(t):window,a=o.visualViewport,c=!qu()&&n,u=(i.left+(c&&a?a.offsetLeft:0))/r,d=(i.top+(c&&a?a.offsetTop:0))/s,f=i.width/r,g=i.height/s;return{width:f,height:g,top:d,right:u+f,bottom:d+g,left:u,x:u,y:d}}function Lo(t){var e=ui(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function Wu(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Dc(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Cn(t){return nt(t).getComputedStyle(t)}function ow(t){return["table","td","th"].indexOf(Gt(t))>=0}function rn(t){return((li(t)?t.ownerDocument:t.document)||window.document).documentElement}function kr(t){return Gt(t)==="html"?t:t.assignedSlot||t.parentNode||(Dc(t)?t.host:null)||rn(t)}function xx(t){return!Nt(t)||Cn(t).position==="fixed"?null:t.offsetParent}function Qq(t){var e=/firefox/i.test(Sc()),n=/Trident/i.test(Sc());if(n&&Nt(t)){var i=Cn(t);if(i.position==="fixed")return null}var r=kr(t);for(Dc(r)&&(r=r.host);Nt(r)&&["html","body"].indexOf(Gt(r))<0;){var s=Cn(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function Ri(t){for(var e=nt(t),n=xx(t);n&&ow(n)&&Cn(n).position==="static";)n=xx(n);return n&&(Gt(n)==="html"||Gt(n)==="body"&&Cn(n).position==="static")?e:n||Qq(t)||e}function Vo(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Bo(t,e,n){return Ai(t,Fo(e,n))}function Nx(t,e,n){var i=Bo(t,e,n);return i>n?n:i}function Ku(){return{top:0,right:0,bottom:0,left:0}}function Qu(t){return Object.assign({},Ku(),t)}function Yu(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var Yq=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Qu(typeof e!="number"?e:Yu(e,Rs))};function Jq(t){var e,n=t.state,i=t.name,r=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=zt(n.placement),c=Vo(a),u=[xt,Ht].indexOf(a)>=0,d=u?"height":"width";if(!(!s||!o)){var f=Yq(r.padding,n),g=Lo(s),m=c==="y"?Et:xt,v=c==="y"?nn:Ht,D=n.rects.reference[d]+n.rects.reference[c]-o[c]-n.rects.popper[d],C=o[c]-n.rects.reference[c],x=Ri(s),k=x?c==="y"?x.clientHeight||0:x.clientWidth||0:0,P=D/2-C/2,F=f[m],Z=k-g[d]-f[v],W=k/2-g[d]/2+P,b=Bo(F,W,Z),y=c;n.modifiersData[i]=(e={},e[y]=b,e.centerOffset=b-W,e)}}function Xq(t){var e=t.state,n=t.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||Wu(e.elements.popper,r)&&(e.elements.arrow=r))}var aw={name:"arrow",enabled:!0,phase:"main",fn:Jq,effect:Xq,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function di(t){return t.split("-")[1]}var Zq={top:"auto",right:"auto",bottom:"auto",left:"auto"};function e5(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:Pr(n*r)/r||0,y:Pr(i*r)/r||0}}function Ox(t){var e,n=t.popper,i=t.popperRect,r=t.placement,s=t.variation,o=t.offsets,a=t.position,c=t.gpuAcceleration,u=t.adaptive,d=t.roundOffsets,f=t.isFixed,g=o.x,m=g===void 0?0:g,v=o.y,D=v===void 0?0:v,C=typeof d=="function"?d({x:m,y:D}):{x:m,y:D};m=C.x,D=C.y;var x=o.hasOwnProperty("x"),k=o.hasOwnProperty("y"),P=xt,F=Et,Z=window;if(u){var W=Ri(n),b="clientHeight",y="clientWidth";if(W===nt(n)&&(W=rn(n),Cn(W).position!=="static"&&a==="absolute"&&(b="scrollHeight",y="scrollWidth")),W=W,r===Et||(r===xt||r===Ht)&&s===ko){F=nn;var w=f&&W===Z&&Z.visualViewport?Z.visualViewport.height:W[b];D-=w-i.height,D*=c?1:-1}if(r===xt||(r===Et||r===nn)&&s===ko){P=Ht;var I=f&&W===Z&&Z.visualViewport?Z.visualViewport.width:W[y];m-=I-i.width,m*=c?1:-1}}var T=Object.assign({position:a},u&&Zq),A=d===!0?e5({x:m,y:D},nt(n)):{x:m,y:D};if(m=A.x,D=A.y,c){var E;return Object.assign({},T,(E={},E[F]=k?"0":"",E[P]=x?"0":"",E.transform=(Z.devicePixelRatio||1)<=1?"translate("+m+"px, "+D+"px)":"translate3d("+m+"px, "+D+"px, 0)",E))}return Object.assign({},T,(e={},e[F]=k?D+"px":"",e[P]=x?m+"px":"",e.transform="",e))}function t5(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,c=a===void 0?!0:a,u={placement:zt(e.placement),variation:di(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Ox(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:c})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Ox(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var Px={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:t5,data:{}};var Wp={passive:!0};function n5(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,s=r===void 0?!0:r,o=i.resize,a=o===void 0?!0:o,c=nt(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach(function(d){d.addEventListener("scroll",n.update,Wp)}),a&&c.addEventListener("resize",n.update,Wp),function(){s&&u.forEach(function(d){d.removeEventListener("scroll",n.update,Wp)}),a&&c.removeEventListener("resize",n.update,Wp)}}var kx={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:n5,data:{}};var i5={left:"right",right:"left",bottom:"top",top:"bottom"};function Ac(t){return t.replace(/left|right|bottom|top/g,function(e){return i5[e]})}var r5={start:"end",end:"start"};function Kp(t){return t.replace(/start|end/g,function(e){return r5[e]})}function jo(t){var e=nt(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function Uo(t){return ui(rn(t)).left+jo(t).scrollLeft}function cw(t,e){var n=nt(t),i=rn(t),r=n.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,c=0;if(r){s=r.width,o=r.height;var u=qu();(u||!u&&e==="fixed")&&(a=r.offsetLeft,c=r.offsetTop)}return{width:s,height:o,x:a+Uo(t),y:c}}function lw(t){var e,n=rn(t),i=jo(t),r=(e=t.ownerDocument)==null?void 0:e.body,s=Ai(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=Ai(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+Uo(t),c=-i.scrollTop;return Cn(r||n).direction==="rtl"&&(a+=Ai(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:c}}function $o(t){var e=Cn(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function Qp(t){return["html","body","#document"].indexOf(Gt(t))>=0?t.ownerDocument.body:Nt(t)&&$o(t)?t:Qp(kr(t))}function Ms(t,e){var n;e===void 0&&(e=[]);var i=Qp(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),s=nt(i),o=r?[s].concat(s.visualViewport||[],$o(i)?i:[]):i,a=e.concat(o);return r?a:a.concat(Ms(kr(o)))}function Rc(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function s5(t,e){var n=ui(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Fx(t,e,n){return e===zp?Rc(cw(t,n)):li(e)?s5(e,n):Rc(lw(rn(t)))}function o5(t){var e=Ms(kr(t)),n=["absolute","fixed"].indexOf(Cn(t).position)>=0,i=n&&Nt(t)?Ri(t):t;return li(i)?e.filter(function(r){return li(r)&&Wu(r,i)&&Gt(r)!=="body"}):[]}function uw(t,e,n,i){var r=e==="clippingParents"?o5(t):[].concat(e),s=[].concat(r,[n]),o=s[0],a=s.reduce(function(c,u){var d=Fx(t,u,i);return c.top=Ai(d.top,c.top),c.right=Fo(d.right,c.right),c.bottom=Fo(d.bottom,c.bottom),c.left=Ai(d.left,c.left),c},Fx(t,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Ju(t){var e=t.reference,n=t.element,i=t.placement,r=i?zt(i):null,s=i?di(i):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,c;switch(r){case Et:c={x:o,y:e.y-n.height};break;case nn:c={x:o,y:e.y+e.height};break;case Ht:c={x:e.x+e.width,y:a};break;case xt:c={x:e.x-n.width,y:a};break;default:c={x:e.x,y:e.y}}var u=r?Vo(r):null;if(u!=null){var d=u==="y"?"height":"width";switch(s){case Or:c[u]=c[u]-(e[d]/2-n[d]/2);break;case ko:c[u]=c[u]+(e[d]/2-n[d]/2);break;default:}}return c}function xs(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,c=a===void 0?Sx:a,u=n.rootBoundary,d=u===void 0?zp:u,f=n.elementContext,g=f===void 0?Tc:f,m=n.altBoundary,v=m===void 0?!1:m,D=n.padding,C=D===void 0?0:D,x=Qu(typeof C!="number"?C:Yu(C,Rs)),k=g===Tc?Ax:Tc,P=t.rects.popper,F=t.elements[v?k:g],Z=uw(li(F)?F:F.contextElement||rn(t.elements.popper),c,d,o),W=ui(t.elements.reference),b=Ju({reference:W,element:P,strategy:"absolute",placement:r}),y=Rc(Object.assign({},P,b)),w=g===Tc?y:W,I={top:Z.top-w.top+x.top,bottom:w.bottom-Z.bottom+x.bottom,left:Z.left-w.left+x.left,right:w.right-Z.right+x.right},T=t.modifiersData.offset;if(g===Tc&&T){var A=T[r];Object.keys(I).forEach(function(E){var Kt=[Ht,nn].indexOf(E)>=0?1:-1,Ln=[Et,nn].indexOf(E)>=0?"y":"x";I[E]+=A[Ln]*Kt})}return I}function dw(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,u=c===void 0?qp:c,d=di(i),f=d?a?sw:sw.filter(function(v){return di(v)===d}):Rs,g=f.filter(function(v){return u.indexOf(v)>=0});g.length===0&&(g=f);var m=g.reduce(function(v,D){return v[D]=xs(t,{placement:D,boundary:r,rootBoundary:s,padding:o})[zt(D)],v},{});return Object.keys(m).sort(function(v,D){return m[v]-m[D]})}function a5(t){if(zt(t)===Gp)return[];var e=Ac(t);return[Kp(t),e,Kp(e)]}function c5(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,a=o===void 0?!0:o,c=n.fallbackPlacements,u=n.padding,d=n.boundary,f=n.rootBoundary,g=n.altBoundary,m=n.flipVariations,v=m===void 0?!0:m,D=n.allowedAutoPlacements,C=e.options.placement,x=zt(C),k=x===C,P=c||(k||!v?[Ac(C)]:a5(C)),F=[C].concat(P).reduce(function(Yr,Mn){return Yr.concat(zt(Mn)===Gp?dw(e,{placement:Mn,boundary:d,rootBoundary:f,padding:u,flipVariations:v,allowedAutoPlacements:D}):Mn)},[]),Z=e.rects.reference,W=e.rects.popper,b=new Map,y=!0,w=F[0],I=0;I<F.length;I++){var T=F[I],A=zt(T),E=di(T)===Or,Kt=[Et,nn].indexOf(A)>=0,Ln=Kt?"width":"height",fn=xs(e,{placement:T,boundary:d,rootBoundary:f,altBoundary:g,padding:u}),Qt=Kt?E?Ht:xt:E?nn:Et;Z[Ln]>W[Ln]&&(Qt=Ac(Qt));var Fi=Ac(Qt),mi=[];if(s&&mi.push(fn[A]<=0),a&&mi.push(fn[Qt]<=0,fn[Fi]<=0),mi.every(function(Yr){return Yr})){w=T,y=!1;break}b.set(T,mi)}if(y)for(var Hs=v?3:1,pl=function(Mn){var Gs=F.find(function(Li){var hr=b.get(Li);if(hr)return hr.slice(0,Mn).every(function(gl){return gl})});if(Gs)return w=Gs,"break"},Rn=Hs;Rn>0;Rn--){var pt=pl(Rn);if(pt==="break")break}e.placement!==w&&(e.modifiersData[i]._skip=!0,e.placement=w,e.reset=!0)}}var hw={name:"flip",enabled:!0,phase:"main",fn:c5,requiresIfExists:["offset"],data:{_skip:!1}};function l5(t,e,n){var i=zt(t),r=[xt,Et].indexOf(i)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[xt,Ht].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function u5(t){var e=t.state,n=t.options,i=t.name,r=n.offset,s=r===void 0?[0,0]:r,o=qp.reduce(function(d,f){return d[f]=l5(f,e.rects,s),d},{}),a=o[e.placement],c=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=u),e.modifiersData[i]=o}var fw={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:u5};function d5(t){var e=t.state,n=t.name;e.modifiersData[n]=Ju({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var Lx={name:"popperOffsets",enabled:!0,phase:"read",fn:d5,data:{}};function pw(t){return t==="x"?"y":"x"}function h5(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,a=o===void 0?!1:o,c=n.boundary,u=n.rootBoundary,d=n.altBoundary,f=n.padding,g=n.tether,m=g===void 0?!0:g,v=n.tetherOffset,D=v===void 0?0:v,C=xs(e,{boundary:c,rootBoundary:u,padding:f,altBoundary:d}),x=zt(e.placement),k=di(e.placement),P=!k,F=Vo(x),Z=pw(F),W=e.modifiersData.popperOffsets,b=e.rects.reference,y=e.rects.popper,w=typeof D=="function"?D(Object.assign({},e.rects,{placement:e.placement})):D,I=typeof w=="number"?{mainAxis:w,altAxis:w}:Object.assign({mainAxis:0,altAxis:0},w),T=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,A={x:0,y:0};if(W){if(s){var E,Kt=F==="y"?Et:xt,Ln=F==="y"?nn:Ht,fn=F==="y"?"height":"width",Qt=W[F],Fi=Qt+C[Kt],mi=Qt-C[Ln],Hs=m?-y[fn]/2:0,pl=k===Or?b[fn]:y[fn],Rn=k===Or?-y[fn]:-b[fn],pt=e.elements.arrow,Yr=m&&pt?Lo(pt):{width:0,height:0},Mn=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Ku(),Gs=Mn[Kt],Li=Mn[Ln],hr=Bo(0,b[fn],Yr[fn]),gl=P?b[fn]/2-Hs-hr-Gs-I.mainAxis:pl-hr-Gs-I.mainAxis,ga=P?-b[fn]/2+Hs+hr+Li+I.mainAxis:Rn+hr+Li+I.mainAxis,Jr=e.elements.arrow&&Ri(e.elements.arrow),ml=Jr?F==="y"?Jr.clientTop||0:Jr.clientLeft||0:0,ma=(E=T?.[F])!=null?E:0,_l=Qt+gl-ma-ml,yl=Qt+ga-ma,vl=Bo(m?Fo(Fi,_l):Fi,Qt,m?Ai(mi,yl):mi);W[F]=vl,A[F]=vl-Qt}if(a){var wl,Mm=F==="x"?Et:xt,qd=F==="x"?nn:Ht,Vi=W[Z],Xr=Z==="y"?"height":"width",El=Vi+C[Mm],Wd=Vi-C[qd],zs=[Et,xt].indexOf(x)!==-1,_a=(wl=T?.[Z])!=null?wl:0,ya=zs?El:Vi-b[Xr]-y[Xr]-_a+I.altAxis,Tt=zs?Vi+b[Xr]+y[Xr]-_a-I.altAxis:Wd,Pt=m&&zs?Nx(ya,Vi,Tt):Bo(m?ya:El,Vi,m?Tt:Wd);W[Z]=Pt,A[Z]=Pt-Vi}e.modifiersData[i]=A}}var gw={name:"preventOverflow",enabled:!0,phase:"main",fn:h5,requiresIfExists:["offset"]};function mw(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function _w(t){return t===nt(t)||!Nt(t)?jo(t):mw(t)}function f5(t){var e=t.getBoundingClientRect(),n=Pr(e.width)/t.offsetWidth||1,i=Pr(e.height)/t.offsetHeight||1;return n!==1||i!==1}function yw(t,e,n){n===void 0&&(n=!1);var i=Nt(e),r=Nt(e)&&f5(e),s=rn(e),o=ui(t,r,n),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(i||!i&&!n)&&((Gt(e)!=="body"||$o(s))&&(a=_w(e)),Nt(e)?(c=ui(e,!0),c.x+=e.clientLeft,c.y+=e.clientTop):s&&(c.x=Uo(s))),{x:o.left+a.scrollLeft-c.x,y:o.top+a.scrollTop-c.y,width:o.width,height:o.height}}function p5(t){var e=new Map,n=new Set,i=[];t.forEach(function(s){e.set(s.name,s)});function r(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var c=e.get(a);c&&r(c)}}),i.push(s)}return t.forEach(function(s){n.has(s.name)||r(s)}),i}function vw(t){var e=p5(t);return Rx.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function ww(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Ew(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var Vx={placement:"bottom",modifiers:[],strategy:"absolute"};function Bx(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function jx(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,s=r===void 0?Vx:r;return function(a,c,u){u===void 0&&(u=s);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},Vx,s),modifiersData:{},elements:{reference:a,popper:c},attributes:{},styles:{}},f=[],g=!1,m={state:d,setOptions:function(x){var k=typeof x=="function"?x(d.options):x;D(),d.options=Object.assign({},s,d.options,k),d.scrollParents={reference:li(a)?Ms(a):a.contextElement?Ms(a.contextElement):[],popper:Ms(c)};var P=vw(Ew([].concat(i,d.options.modifiers)));return d.orderedModifiers=P.filter(function(F){return F.enabled}),v(),m.update()},forceUpdate:function(){if(!g){var x=d.elements,k=x.reference,P=x.popper;if(Bx(k,P)){d.rects={reference:yw(k,Ri(P),d.options.strategy==="fixed"),popper:Lo(P)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(I){return d.modifiersData[I.name]=Object.assign({},I.data)});for(var F=0;F<d.orderedModifiers.length;F++){if(d.reset===!0){d.reset=!1,F=-1;continue}var Z=d.orderedModifiers[F],W=Z.fn,b=Z.options,y=b===void 0?{}:b,w=Z.name;typeof W=="function"&&(d=W({state:d,options:y,name:w,instance:m})||d)}}}},update:ww(function(){return new Promise(function(C){m.forceUpdate(),C(d)})}),destroy:function(){D(),g=!0}};if(!Bx(a,c))return m;m.setOptions(u).then(function(C){!g&&u.onFirstUpdate&&u.onFirstUpdate(C)});function v(){d.orderedModifiers.forEach(function(C){var x=C.name,k=C.options,P=k===void 0?{}:k,F=C.effect;if(typeof F=="function"){var Z=F({state:d,name:x,instance:m,options:P}),W=function(){};f.push(Z||W)}})}function D(){f.forEach(function(C){return C()}),f=[]}return m}}var g5=[kx,Lx,Px,Mx],bw=jx({defaultModifiers:g5});var Gx=["*"];var m5=["dialog"];var zx={animation:!0,transitionTimerDelayMs:5},qx=(()=>{let e=class e{constructor(){this.animation=zx.animation}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function _5(t){let{transitionDelay:e,transitionDuration:n}=window.getComputedStyle(t),i=parseFloat(e),r=parseFloat(n);return(i+r)*1e3}function Sw(t){return typeof t=="string"}function Iw(t){return t!=null}function y5(t){return t&&t.then}function v5(t,e){return!e||typeof t.closest>"u"?null:t.closest(e)}function Wx(t){return(t||document.body).getBoundingClientRect()}function w5(t){return e=>new Q(n=>{let i=o=>t.run(()=>n.next(o)),r=o=>t.run(()=>n.error(o)),s=()=>t.run(()=>n.complete());return e.subscribe({next:i,error:r,complete:s})})}var E5=()=>{},{transitionTimerDelayMs:b5}=zx,Yp=new Map,Fr=(t,e,n,i)=>{let r=i.context||{},s=Yp.get(e);if(s)switch(i.runningTransition){case"continue":return St;case"stop":t.run(()=>s.transition$.complete()),r=Object.assign(s.context,r),Yp.delete(e)}let o=n(e,i.animation,r)||E5;if(!i.animation||window.getComputedStyle(e).transitionProperty==="none")return t.run(()=>o()),G(void 0).pipe(w5(t));let a=new Ce,c=new Ce,u=a.pipe(y_(!0));Yp.set(e,{transition$:a,complete:()=>{c.next(),c.complete()},context:r});let d=_5(e);return t.runOutsideAngular(()=>{let f=gn(e,"transitionend").pipe(At(u),Je(({target:m})=>m===e)),g=os(d+b5).pipe(At(u));Hh(g,f,c).pipe(At(u)).subscribe(()=>{Yp.delete(e),t.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};var Zp=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}(Zp||{});var Jp=(t,e)=>e?e.some(n=>n.contains(t)):!1,Ux=(t,e)=>!e||v5(t,e)!=null,I5=(()=>{let t=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,e=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(t()||e()):!1})(),C5=t=>I5?()=>setTimeout(()=>t(),100):t;function T5(t,e,n,i,r,s,o,a){n&&t.runOutsideAngular(C5(()=>{let c=g=>{let m=g.target;return g.button===2||Jp(m,o)?!1:n==="inside"?Jp(m,s)&&Ux(m,a):n==="outside"?!Jp(m,s):Ux(m,a)||!Jp(m,s)},u=gn(e,"keydown").pipe(At(r),Je(g=>g.which===Zp.Escape),Xe(g=>g.preventDefault())),d=gn(e,"mousedown").pipe(J(c),At(r)),f=gn(e,"mouseup").pipe(Ql(d),Je(([g,m])=>m),__(0),At(r));Hh([u.pipe(J(g=>0)),f.pipe(J(g=>1))]).subscribe(g=>t.run(()=>i(g)))}))}var D5=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Kx(t){let e=Array.from(t.querySelectorAll(D5)).filter(n=>n.tabIndex!==-1);return[e[0],e[e.length-1]]}var S5=(t,e,n,i=!1)=>{t.runOutsideAngular(()=>{let r=gn(e,"focusin").pipe(At(n),J(s=>s.target));gn(e,"keydown").pipe(At(n),Je(s=>s.which===Zp.Tab),Ql(r)).subscribe(([s,o])=>{let[a,c]=Kx(e);(o===a||o===e)&&s.shiftKey&&(c.focus(),s.preventDefault()),o===c&&!s.shiftKey&&(a.focus(),s.preventDefault())}),i&&gn(e,"click").pipe(At(n),Ql(r),J(s=>s[1])).subscribe(s=>s.focus())})},A5=(()=>{let e=class e{constructor(){this._element=N(vt).documentElement}isRTL(){return(this._element.getAttribute("dir")||"").toLowerCase()==="rtl"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),R5=/\s+/,M5=/  +/gi,x5={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]};function N5(t,e){let[n,i]=x5[t];return e&&i||n}var O5=/^left/,P5=/^right/,k5=/^start/,F5=/^end/;function L5(t,e){let[n,i]=e.split("-"),r=n.replace(O5,"start").replace(P5,"end"),s=[r];if(i){let o=i;(n==="left"||n==="right")&&(o=o.replace(k5,"top").replace(F5,"bottom")),s.push(`${r}-${o}`)}return t&&(s=s.map(o=>`${t}-${o}`)),s.join(" ")}function $x({placement:t,baseClass:e},n){let i=Array.isArray(t)?t:t.split(R5),r=["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"],s=i.findIndex(u=>u==="auto");s>=0&&r.forEach(function(u){i.find(d=>d.search("^"+u)!==-1)==null&&i.splice(s++,1,u)});let o=i.map(u=>N5(u,n.isRTL()));return{placement:o.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!e,phase:"write",fn({state:u}){let d=new RegExp(e+"(-[a-z]+)*","gi"),f=u.elements.popper,g=u.placement,m=f.className;m=m.replace(d,""),m+=` ${L5(e,g)}`,m=m.trim().replace(M5," "),f.className=m}},hw,gw,aw,{enabled:!0,name:"flip",options:{fallbackPlacements:o}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function Hx(t){return t}function V5(){let t=N(A5),e=null;return{createPopper(n){if(!e){let r=(n.updatePopperOptions||Hx)($x(n,t));e=bw(n.hostElement,n.targetElement,r)}},update(){e&&e.update()},setOptions(n){if(e){let r=(n.updatePopperOptions||Hx)($x(n,t));e.setOptions(r)}},destroy(){e&&(e.destroy(),e=null)}}}function B5(t){return e=>(e.modifiers.push(fw,{name:"offset",options:{offset:()=>t}}),e)}var wpe=new Date(1882,10,12),Epe=new Date(2174,10,25);var bpe=1e3*60*60*24;var Aw=1080,j5=24*Aw,U5=12*Aw+793,Ipe=29*j5+U5,Cpe=11*Aw+204;var $5=(()=>{let e=class e{constructor(){this._ngbConfig=N(qx),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(i){this._animation=i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Lr=class{constructor(e,n,i){this.nodes=e,this.viewRef=n,this.componentRef=i}},Cw=class{constructor(e){this._componentType=e,this._windowRef=null,this._contentRef=null,this._document=N(vt),this._applicationRef=N(Di),this._injector=N(Re),this._viewContainerRef=N(Xi),this._ngZone=N(te)}open(e,n,i=!1){this._windowRef||(this._contentRef=this._getContentRef(e,n),this._windowRef=this._viewContainerRef.createComponent(this._componentType,{injector:this._injector,projectableNodes:this._contentRef.nodes}));let{nativeElement:r}=this._windowRef.location,s=this._ngZone.onStable.pipe(gt(1),Ge(()=>Fr(this._ngZone,r,({classList:o})=>o.add("show"),{animation:i,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:s}}close(e=!1){return this._windowRef?Fr(this._ngZone,this._windowRef.location.nativeElement,({classList:n})=>n.remove("show"),{animation:e,runningTransition:"stop"}).pipe(Xe(()=>{this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),this._contentRef?.viewRef&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):G(void 0)}_getContentRef(e,n){if(e)if(e instanceof Qi){let i=e.createEmbeddedView(n);return this._applicationRef.attachView(i),new Lr([i.rootNodes],i)}else return new Lr([[this._document.createTextNode(`${e}`)]]);else return new Lr([])}},H5=(()=>{let e=class e{constructor(){this._document=N(vt)}hide(){let i=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,s=r.style,{overflow:o,paddingRight:a}=s;if(i>0){let c=parseFloat(window.getComputedStyle(r).paddingRight);s.paddingRight=`${c+i}px`}return s.overflow="hidden",()=>{i>0&&(s.paddingRight=a),s.overflow=o}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),G5=(()=>{let e=class e{constructor(){this._nativeElement=N(Xt).nativeElement,this._zone=N(te)}ngOnInit(){this._zone.onStable.asObservable().pipe(gt(1)).subscribe(()=>{Fr(this._zone,this._nativeElement,(i,r)=>{r&&Wx(i),i.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Fr(this._zone,this._nativeElement,({classList:i})=>i.remove("show"),{animation:this.animation,runningTransition:"stop"})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(r,s){r&2&&(si("modal-backdrop"+(s.backdropClass?" "+s.backdropClass:"")),vs("show",!s.animation)("fade",s.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[Me],decls:0,vars:0,template:function(r,s){},encapsulation:2});let t=e;return t})(),Xp=class{update(e){}close(e){}dismiss(e){}},z5=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],q5=["animation","backdropClass"],Tw=class{_applyWindowOptions(e,n){z5.forEach(i=>{Iw(n[i])&&(e[i]=n[i])})}_applyBackdropOptions(e,n){q5.forEach(i=>{Iw(n[i])&&(e[i]=n[i])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(At(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(At(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,n,i,r){this._windowCmptRef=e,this._contentRef=n,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new Ce,this._dismissed=new Ce,this._hidden=new Ce,e.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,o)=>{this._resolve=s,this._reject=o}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(e);else{let n=this._beforeDismiss();y5(n)?n.then(i=>{i!==!1&&this._dismiss(e)},()=>{}):n!==!1&&this._dismiss(e)}}_removeModalElements(){let e=this._windowCmptRef.instance.hide(),n=this._backdropCmptRef?this._backdropCmptRef.instance.hide():G(void 0);e.subscribe(()=>{let{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),n.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),ql(e,n).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},Dw=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}(Dw||{}),W5=(()=>{let e=class e{constructor(){this._document=N(vt),this._elRef=N(Xt),this._zone=N(te),this._closed$=new Ce,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new Ue,this.shown=new Ce,this.hidden=new Ce}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":Sw(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(i){this.dismissEvent.emit(i)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(gt(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:i}=this._elRef,r={animation:this.animation,runningTransition:"stop"},s=Fr(this._zone,i,()=>i.classList.remove("show"),r),o=Fr(this._zone,this._dialogEl.nativeElement,()=>{},r),a=ql(s,o);return a.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),a}_show(){let i={animation:this.animation,runningTransition:"continue"},r=Fr(this._zone,this._elRef.nativeElement,(o,a)=>{a&&Wx(o),o.classList.add("show")},i),s=Fr(this._zone,this._dialogEl.nativeElement,()=>{},i);ql(r,s).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:i}=this._elRef;this._zone.runOutsideAngular(()=>{gn(i,"keydown").pipe(At(this._closed$),Je(s=>s.which===Zp.Escape)).subscribe(s=>{this.keyboard?requestAnimationFrame(()=>{s.defaultPrevented||this._zone.run(()=>this.dismiss(Dw.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let r=!1;gn(this._dialogEl.nativeElement,"mousedown").pipe(At(this._closed$),Xe(()=>r=!1),De(()=>gn(i,"mouseup").pipe(At(this._closed$),gt(1))),Je(({target:s})=>i===s)).subscribe(()=>{r=!0}),gn(i,"click").pipe(At(this._closed$)).subscribe(({target:s})=>{i===s&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!r&&this._zone.run(()=>this.dismiss(Dw.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:i}=this._elRef;if(!i.contains(document.activeElement)){let r=i.querySelector("[ngbAutofocus]"),s=Kx(i)[0];(r||s||i).focus()}}_restoreFocus(){let i=this._document.body,r=this._elWithFocus,s;r&&r.focus&&i.contains(r)?s=r:s=i,this._zone.runOutsideAngular(()=>{setTimeout(()=>s.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&Fr(this._zone,this._elRef.nativeElement,({classList:i})=>(i.add("modal-static"),()=>i.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(r,s){if(r&1&&Zf(m5,7),r&2){let o;mu(o=_u())&&(s._dialogEl=o.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(r,s){r&2&&(Eo("aria-modal",!0)("aria-labelledby",s.ariaLabelledBy)("aria-describedby",s.ariaDescribedBy),si("modal d-block"+(s.windowClass?" "+s.windowClass:"")),vs("fade",s.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[Me],ngContentSelectors:Gx,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(r,s){r&1&&(Av(),U(0,"div",1,0)(2,"div",2),Rv(3),H()()),r&2&&si("modal-dialog"+(s.size?" modal-"+s.size:"")+(s.centered?" modal-dialog-centered":"")+s.fullscreenClass+(s.scrollable?" modal-dialog-scrollable":"")+(s.modalDialogClass?" "+s.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2});let t=e;return t})(),K5=(()=>{let e=class e{constructor(){this._applicationRef=N(Di),this._injector=N(Re),this._environmentInjector=N(wn),this._document=N(vt),this._scrollBar=N(H5),this._activeWindowCmptHasChanged=new Ce,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new Ue;let i=N(te);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let r=this._windowCmpts[this._windowCmpts.length-1];S5(i,r.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(r.location.nativeElement)}})}_restoreScrollBar(){let i=this._scrollBarRestoreFn;i&&(this._scrollBarRestoreFn=null,i())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(i,r,s){let o=s.container instanceof HTMLElement?s.container:Iw(s.container)?this._document.querySelector(s.container):this._document.body;if(!o)throw new Error(`The specified modal container "${s.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let a=new Xp;i=s.injector||i;let c=i.get(wn,null)||this._environmentInjector,u=this._getContentRef(i,c,r,a,s),d=s.backdrop!==!1?this._attachBackdrop(o):void 0,f=this._attachWindowComponent(o,u.nodes),g=new Tw(f,u,d,s.beforeDismiss);return this._registerModalRef(g),this._registerWindowCmpt(f),g.hidden.pipe(gt(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=m=>{g.close(m)},a.dismiss=m=>{g.dismiss(m)},a.update=m=>{g.update(m)},g.update(s),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),d&&d.instance&&d.changeDetectorRef.detectChanges(),f.changeDetectorRef.detectChanges(),g}get activeInstances(){return this._activeInstances}dismissAll(i){this._modalRefs.forEach(r=>r.dismiss(i))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(i){let r=np(G5,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),i.appendChild(r.location.nativeElement),r}_attachWindowComponent(i,r){let s=np(W5,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(s.hostView),i.appendChild(s.location.nativeElement),s}_getContentRef(i,r,s,o,a){return s?s instanceof Qi?this._createFromTemplateRef(s,o):Sw(s)?this._createFromString(s):this._createFromComponent(i,r,s,o,a):new Lr([])}_createFromTemplateRef(i,r){let s={$implicit:r,close(a){r.close(a)},dismiss(a){r.dismiss(a)}},o=i.createEmbeddedView(s);return this._applicationRef.attachView(o),new Lr([o.rootNodes],o)}_createFromString(i){let r=this._document.createTextNode(`${i}`);return new Lr([[r]])}_createFromComponent(i,r,s,o,a){let c=Re.create({providers:[{provide:Xp,useValue:o}],parent:i}),u=np(s,{environmentInjector:r,elementInjector:c}),d=u.location.nativeElement;return a.scrollable&&d.classList.add("component-host-scrollable"),this._applicationRef.attachView(u.hostView),new Lr([[d]],u.hostView,u)}_setAriaHidden(i){let r=i.parentElement;r&&i!==this._document.body&&(Array.from(r.children).forEach(s=>{s!==i&&s.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((i,r)=>{i?r.setAttribute("aria-hidden",i):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(i){let r=()=>{let s=this._modalRefs.indexOf(i);s>-1&&(this._modalRefs.splice(s,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(i),this._activeInstances.emit(this._modalRefs),i.result.then(r,r)}_registerWindowCmpt(i){this._windowCmpts.push(i),this._activeWindowCmptHasChanged.next(),i.onDestroy(()=>{let r=this._windowCmpts.indexOf(i);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Qx=(()=>{let e=class e{constructor(){this._injector=N(Re),this._modalStack=N(K5),this._config=N($5)}open(i,r={}){let s=B(ye(B({},this._config),{animation:this._config.animation}),r);return this._modalStack.open(this._injector,i,s)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(i){this._modalStack.dismissAll(i)}hasOpenModals(){return this._modalStack.hasOpenModals()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Q5={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]};function Y5(t){let e=(t||"").trim();if(e.length===0)return[];let n=e.split(/\s+/).map(r=>r.split(":")).map(r=>Q5[r[0]]||r),i=n.filter(r=>r.includes("manual"));if(i.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(i.length===1&&n.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return i.length?[]:n}function J5(t,e,n,i,r,s=0,o=0){let a=Y5(e);if(a.length===0)return()=>{};let c=new Set,u=[],d;function f(m,v){t.addEventListener(m,v),u.push(()=>t.removeEventListener(m,v))}function g(m,v){clearTimeout(d),v>0?d=setTimeout(m,v):m()}for(let[m,v]of a)v?(f(m,()=>{c.add(m),g(()=>c.size>0&&i(),s)}),f(v,()=>{c.delete(m),g(()=>c.size===0&&r(),o)})):f(m,()=>n()?g(r,o):g(i,s));return()=>u.forEach(m=>m())}var X5=(()=>{let e=class e{constructor(){this._ngbConfig=N(qx),this.autoClose=!0,this.placement="auto",this.popperOptions=i=>i,this.triggers="hover focus",this.disableTooltip=!1,this.openDelay=0,this.closeDelay=0}get animation(){return this._animation??this._ngbConfig.animation}set animation(i){this._animation=i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Z5=0,eW=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["ngb-tooltip-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(r,s){r&2&&(Sv("id",s.id),si("tooltip"+(s.tooltipClass?" "+s.tooltipClass:"")),vs("fade",s.animation))},inputs:{animation:"animation",id:"id",tooltipClass:"tooltipClass"},standalone:!0,features:[Me],ngContentSelectors:Gx,decls:3,vars:0,consts:[["data-popper-arrow","",1,"tooltip-arrow"],[1,"tooltip-inner"]],template:function(r,s){r&1&&(Av(),re(0,"div",0),U(1,"div",1),Rv(2),H())},styles:[`ngb-tooltip-window{pointer-events:none;position:absolute}ngb-tooltip-window .tooltip-inner{pointer-events:auto}ngb-tooltip-window.bs-tooltip-top,ngb-tooltip-window.bs-tooltip-bottom{padding-left:0;padding-right:0}ngb-tooltip-window.bs-tooltip-start,ngb-tooltip-window.bs-tooltip-end{padding-top:0;padding-bottom:0}
`],encapsulation:2,changeDetection:0});let t=e;return t})(),Yx=(()=>{let e=class e{constructor(){this._config=N(X5),this.animation=this._config.animation,this.autoClose=this._config.autoClose,this.placement=this._config.placement,this.popperOptions=this._config.popperOptions,this.triggers=this._config.triggers,this.container=this._config.container,this.disableTooltip=this._config.disableTooltip,this.tooltipClass=this._config.tooltipClass,this.openDelay=this._config.openDelay,this.closeDelay=this._config.closeDelay,this.shown=new Ue,this.hidden=new Ue,this._nativeElement=N(Xt).nativeElement,this._ngZone=N(te),this._document=N(vt),this._changeDetector=N(Mr),this._ngbTooltipWindowId=`ngb-tooltip-${Z5++}`,this._popupService=new Cw(eW),this._windowRef=null,this._positioning=V5()}set ngbTooltip(i){this._ngbTooltip=i,!i&&this._windowRef&&this.close()}get ngbTooltip(){return this._ngbTooltip}open(i){if(!this._windowRef&&this._ngbTooltip&&!this.disableTooltip){let{windowRef:r,transition$:s}=this._popupService.open(this._ngbTooltip,i??this.tooltipContext,this.animation);this._windowRef=r,this._windowRef.setInput("animation",this.animation),this._windowRef.setInput("tooltipClass",this.tooltipClass),this._windowRef.setInput("id",this._ngbTooltipWindowId),this._getPositionTargetElement().setAttribute("aria-describedby",this._ngbTooltipWindowId),this.container==="body"&&this._document.body.appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._getPositionTargetElement(),targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:this.container==="body",baseClass:"bs-tooltip",updatePopperOptions:o=>this.popperOptions(B5([0,6])(o))}),Promise.resolve().then(()=>{this._positioning.update(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positioning.update())})}),T5(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement],[this._nativeElement]),s.subscribe(()=>this.shown.emit())}}close(i=this.animation){this._windowRef!=null&&(this._getPositionTargetElement().removeAttribute("aria-describedby"),this._popupService.close(i).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return this._windowRef!=null}ngOnInit(){this._unregisterListenersFn=J5(this._nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({tooltipClass:i}){i&&this.isOpen()&&this._windowRef.setInput("tooltipClass",i.currentValue)}ngOnDestroy(){this.close(!1),this._unregisterListenersFn?.()}_getPositionTargetElement(){return(Sw(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget)||this._nativeElement}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=mt({type:e,selectors:[["","ngbTooltip",""]],inputs:{animation:"animation",autoClose:"autoClose",placement:"placement",popperOptions:"popperOptions",triggers:"triggers",positionTarget:"positionTarget",container:"container",disableTooltip:"disableTooltip",tooltipClass:"tooltipClass",tooltipContext:"tooltipContext",openDelay:"openDelay",closeDelay:"closeDelay",ngbTooltip:"ngbTooltip"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbTooltip"],standalone:!0,features:[On]});let t=e;return t})(),Jx=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ri({type:e}),e.\u0275inj=ii({});let t=e;return t})();var Tpe=new j("live announcer delay",{providedIn:"root",factory:()=>100});function tW(t,e){if(t&1){let n=Pn();Sr(0),U(1,"div",2),qe("click",function(){let r=jt(n).$implicit;return Ut(r.action())}),re(2,"i"),H(),Ar()}if(t&2){let n=e.$implicit;ce(),si(n.icon==="flex-grow-spacer"?"flex-grow-spacer":"sidebar-item"),ve("ngbTooltip",n.label),ce(),si(n.icon)}}var Zx=(()=>{let e=class e{constructor(i,r){this.authService=i,this.router=r,this.sidebarItems=[{label:"Dashboard",icon:"bi bi-house",action:()=>{this.router.navigateByUrl("/dashboard")}},{label:"Profile",icon:"bi bi-person",action:()=>{this.router.navigateByUrl("/profile")}},{label:"Settings",icon:"bi bi-gear",action:()=>{this.router.navigateByUrl("/settings")}},{label:"",icon:"flex-grow-spacer",action:()=>{}},{label:"Logout",icon:"bi bi-box-arrow-right",action:()=>{this.logout()}}]}logout(){this.authService.logout()}};e.\u0275fac=function(r){return new(r||e)(Y(nr),Y(bn))},e.\u0275cmp=Ae({type:e,selectors:[["app-sidebar"]],inputs:{sidebarItems:"sidebarItems"},standalone:!0,features:[Me],decls:2,vars:1,consts:[[1,"sidebar"],[4,"ngFor","ngForOf"],["placement","right",3,"click","ngbTooltip"]],template:function(r,s){r&1&&(U(0,"div",0),rt(1,tW,3,5,"ng-container",1),H()),r&2&&(ce(),ve("ngForOf",s.sidebarItems))},dependencies:[Zt,Es,Jx,Yx],styles:[".sidebar[_ngcontent-%COMP%]{width:60px;height:100vh;background-color:#1f1f1f;display:flex;flex-direction:column;align-items:center;padding:10px 0;position:fixed;left:0;top:0}.sidebar-item[_ngcontent-%COMP%]{width:100%;padding:15px 0;display:flex;justify-content:center;align-items:center;cursor:pointer;color:#ccc}.sidebar-item[_ngcontent-%COMP%]:hover{background-color:#333}.flex-grow-spacer[_ngcontent-%COMP%]{flex-grow:1}.icon[_ngcontent-%COMP%]{font-size:24px;color:#ccc}.icon[_ngcontent-%COMP%]:hover{color:#fff}"]});let t=e;return t})();var eN=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-dashboard"]],standalone:!0,features:[Me],decls:5,vars:0,consts:[[1,"app-container"],[1,"d-none","d-md-block"],[1,"main-content","ms-md-5","ps-md-4","ps-xl-5"]],template:function(r,s){r&1&&(U(0,"div",0)(1,"aside",1),re(2,"app-sidebar"),H(),U(3,"main",2),re(4,"router-outlet"),H()())},dependencies:[Bu,Zx],styles:[".app-container[_ngcontent-%COMP%]{display:flex;height:100vh}.main-content[_ngcontent-%COMP%]{flex-grow:1;padding:20px;overflow-y:auto}"]});let t=e;return t})();var Rw=class{constructor(){this.subject=new rs(1),this.subscriptions=new it}doFilter(e){this.subject.next(e)}dispose(){this.subscriptions.unsubscribe()}notEmpty(e,n){this.subscriptions.add(this.subject.subscribe(i=>{if(i[e]){let r=i[e].currentValue;r!=null&&n(r)}}))}has(e,n){this.subscriptions.add(this.subject.subscribe(i=>{if(i[e]){let r=i[e].currentValue;n(r)}}))}notFirst(e,n){this.subscriptions.add(this.subject.subscribe(i=>{if(i[e]&&!i[e].isFirstChange()){let r=i[e].currentValue;n(r)}}))}notFirstAndEmpty(e,n){this.subscriptions.add(this.subject.subscribe(i=>{if(i[e]&&!i[e].isFirstChange()){let r=i[e].currentValue;r!=null&&n(r)}}))}},tN=new j("NGX_ECHARTS_CONFIG"),nN=(()=>{let e=class e{constructor(i,r,s){this.el=r,this.ngZone=s,this.options=null,this.theme=null,this.initOpts=null,this.merge=null,this.autoResize=!0,this.loading=!1,this.loadingType="default",this.loadingOpts=null,this.chartInit=new Ue,this.optionsError=new Ue,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartHighlight=this.createLazyEvent("highlight"),this.chartDownplay=this.createLazyEvent("downplay"),this.chartSelectChanged=this.createLazyEvent("selectchanged"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendLegendSelectAll=this.createLazyEvent("legendselectall"),this.chartLegendLegendInverseSelect=this.createLazyEvent("legendinverseselect"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartGraphRoam=this.createLazyEvent("graphroam"),this.chartGeoRoam=this.createLazyEvent("georoam"),this.chartTreeRoam=this.createLazyEvent("treeroam"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartGeoSelectChanged=this.createLazyEvent("geoselectchanged"),this.chartGeoSelected=this.createLazyEvent("geoselected"),this.chartGeoUnselected=this.createLazyEvent("geounselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartGlobalCursorTaken=this.createLazyEvent("globalcursortaken"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.chart$=new rs(1),this.resize$=new Ce,this.changeFilter=new Rw,this.resizeObFired=!1,this.echarts=i.echarts,this.theme=i.theme||null}ngOnChanges(i){this.changeFilter.doFilter(i)}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe(b_(100,Zn,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(i=>{for(let r of i)r.target===this.el.nativeElement&&(this.resizeObFired?this.animationFrameID=window.requestAnimationFrame(()=>{this.resize$.next()}):this.resizeObFired=!0)})),this.resizeOb.observe(this.el.nativeElement)),this.changeFilter.notFirstAndEmpty("options",i=>this.onOptionsChange(i)),this.changeFilter.notFirstAndEmpty("merge",i=>this.setOption(i)),this.changeFilter.has("loading",i=>this.toggleLoading(!!i)),this.changeFilter.notFirst("theme",()=>this.refreshChart())}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.loadingSub&&this.loadingSub.unsubscribe(),this.changeFilter.dispose(),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(i){this.chart?i?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading():this.loadingSub=this.chart$.subscribe(r=>i?r.showLoading(this.loadingType,this.loadingOpts):r.hideLoading())}setOption(i,r){if(this.chart)try{this.chart.setOption(i,r)}catch(s){console.error(s),this.optionsError.emit(s)}}refreshChart(){return R(this,null,function*(){this.dispose(),yield this.initChart()})}createChart(){let i=this.el.nativeElement;if(window&&window.getComputedStyle){let r=window.getComputedStyle(i,null).getPropertyValue("height");(!r||r==="0px")&&(!i.style.height||i.style.height==="0px")&&(i.style.height="400px")}return this.ngZone.runOutsideAngular(()=>(typeof this.echarts=="function"?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:s})=>s(i,this.theme,this.initOpts)))}initChart(){return R(this,null,function*(){yield this.onOptionsChange(this.options),this.merge&&this.chart&&this.setOption(this.merge)})}onOptionsChange(i){return R(this,null,function*(){i&&(this.chart?this.setOption(this.options,!0):(this.chart=yield this.createChart(),this.chart$.next(this.chart),this.chartInit.emit(this.chart),this.setOption(this.options,!0)))})}createLazyEvent(i){return this.chartInit.pipe(De(r=>new Q(s=>(r.on(i,o=>this.ngZone.run(()=>s.next(o))),()=>{this.chart&&(this.chart.isDisposed()||r.off(i))}))))}};e.\u0275fac=function(r){return new(r||e)(Y(tN),Y(Xt),Y(te))},e.\u0275dir=mt({type:e,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loading:"loading",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartHighlight:"chartHighlight",chartDownplay:"chartDownplay",chartSelectChanged:"chartSelectChanged",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendLegendSelectAll:"chartLegendLegendSelectAll",chartLegendLegendInverseSelect:"chartLegendLegendInverseSelect",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartGraphRoam:"chartGraphRoam",chartGeoRoam:"chartGeoRoam",chartTreeRoam:"chartTreeRoam",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartGeoSelectChanged:"chartGeoSelectChanged",chartGeoSelected:"chartGeoSelected",chartGeoUnselected:"chartGeoUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartGlobalCursorTaken:"chartGlobalCursorTaken",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],standalone:!0,features:[On]});let t=e;return t})(),iN=(t={})=>({provide:tN,useFactory:()=>ye(B({},t),{echarts:()=>import("./chunk-CC4FQ6XH.js")})});var rN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sN={};var Ns,Mw;(function(){var t;function e(b,y){function w(){}w.prototype=y.prototype,b.D=y.prototype,b.prototype=new w,b.prototype.constructor=b,b.C=function(I,T,A){for(var E=Array(arguments.length-2),Kt=2;Kt<arguments.length;Kt++)E[Kt-2]=arguments[Kt];return y.prototype[T].apply(I,E)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(b,y,w){w||(w=0);var I=Array(16);if(typeof y=="string")for(var T=0;16>T;++T)I[T]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(T=0;16>T;++T)I[T]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=b.g[0],w=b.g[1],T=b.g[2];var A=b.g[3],E=y+(A^w&(T^A))+I[0]+3614090360&4294967295;y=w+(E<<7&4294967295|E>>>25),E=A+(T^y&(w^T))+I[1]+3905402710&4294967295,A=y+(E<<12&4294967295|E>>>20),E=T+(w^A&(y^w))+I[2]+606105819&4294967295,T=A+(E<<17&4294967295|E>>>15),E=w+(y^T&(A^y))+I[3]+3250441966&4294967295,w=T+(E<<22&4294967295|E>>>10),E=y+(A^w&(T^A))+I[4]+4118548399&4294967295,y=w+(E<<7&4294967295|E>>>25),E=A+(T^y&(w^T))+I[5]+1200080426&4294967295,A=y+(E<<12&4294967295|E>>>20),E=T+(w^A&(y^w))+I[6]+2821735955&4294967295,T=A+(E<<17&4294967295|E>>>15),E=w+(y^T&(A^y))+I[7]+4249261313&4294967295,w=T+(E<<22&4294967295|E>>>10),E=y+(A^w&(T^A))+I[8]+1770035416&4294967295,y=w+(E<<7&4294967295|E>>>25),E=A+(T^y&(w^T))+I[9]+2336552879&4294967295,A=y+(E<<12&4294967295|E>>>20),E=T+(w^A&(y^w))+I[10]+4294925233&4294967295,T=A+(E<<17&4294967295|E>>>15),E=w+(y^T&(A^y))+I[11]+2304563134&4294967295,w=T+(E<<22&4294967295|E>>>10),E=y+(A^w&(T^A))+I[12]+1804603682&4294967295,y=w+(E<<7&4294967295|E>>>25),E=A+(T^y&(w^T))+I[13]+4254626195&4294967295,A=y+(E<<12&4294967295|E>>>20),E=T+(w^A&(y^w))+I[14]+2792965006&4294967295,T=A+(E<<17&4294967295|E>>>15),E=w+(y^T&(A^y))+I[15]+1236535329&4294967295,w=T+(E<<22&4294967295|E>>>10),E=y+(T^A&(w^T))+I[1]+4129170786&4294967295,y=w+(E<<5&4294967295|E>>>27),E=A+(w^T&(y^w))+I[6]+3225465664&4294967295,A=y+(E<<9&4294967295|E>>>23),E=T+(y^w&(A^y))+I[11]+643717713&4294967295,T=A+(E<<14&4294967295|E>>>18),E=w+(A^y&(T^A))+I[0]+3921069994&4294967295,w=T+(E<<20&4294967295|E>>>12),E=y+(T^A&(w^T))+I[5]+3593408605&4294967295,y=w+(E<<5&4294967295|E>>>27),E=A+(w^T&(y^w))+I[10]+38016083&4294967295,A=y+(E<<9&4294967295|E>>>23),E=T+(y^w&(A^y))+I[15]+3634488961&4294967295,T=A+(E<<14&4294967295|E>>>18),E=w+(A^y&(T^A))+I[4]+3889429448&4294967295,w=T+(E<<20&4294967295|E>>>12),E=y+(T^A&(w^T))+I[9]+568446438&4294967295,y=w+(E<<5&4294967295|E>>>27),E=A+(w^T&(y^w))+I[14]+3275163606&4294967295,A=y+(E<<9&4294967295|E>>>23),E=T+(y^w&(A^y))+I[3]+4107603335&4294967295,T=A+(E<<14&4294967295|E>>>18),E=w+(A^y&(T^A))+I[8]+1163531501&4294967295,w=T+(E<<20&4294967295|E>>>12),E=y+(T^A&(w^T))+I[13]+2850285829&4294967295,y=w+(E<<5&4294967295|E>>>27),E=A+(w^T&(y^w))+I[2]+4243563512&4294967295,A=y+(E<<9&4294967295|E>>>23),E=T+(y^w&(A^y))+I[7]+1735328473&4294967295,T=A+(E<<14&4294967295|E>>>18),E=w+(A^y&(T^A))+I[12]+2368359562&4294967295,w=T+(E<<20&4294967295|E>>>12),E=y+(w^T^A)+I[5]+4294588738&4294967295,y=w+(E<<4&4294967295|E>>>28),E=A+(y^w^T)+I[8]+2272392833&4294967295,A=y+(E<<11&4294967295|E>>>21),E=T+(A^y^w)+I[11]+1839030562&4294967295,T=A+(E<<16&4294967295|E>>>16),E=w+(T^A^y)+I[14]+4259657740&4294967295,w=T+(E<<23&4294967295|E>>>9),E=y+(w^T^A)+I[1]+2763975236&4294967295,y=w+(E<<4&4294967295|E>>>28),E=A+(y^w^T)+I[4]+1272893353&4294967295,A=y+(E<<11&4294967295|E>>>21),E=T+(A^y^w)+I[7]+4139469664&4294967295,T=A+(E<<16&4294967295|E>>>16),E=w+(T^A^y)+I[10]+3200236656&4294967295,w=T+(E<<23&4294967295|E>>>9),E=y+(w^T^A)+I[13]+681279174&4294967295,y=w+(E<<4&4294967295|E>>>28),E=A+(y^w^T)+I[0]+3936430074&4294967295,A=y+(E<<11&4294967295|E>>>21),E=T+(A^y^w)+I[3]+3572445317&4294967295,T=A+(E<<16&4294967295|E>>>16),E=w+(T^A^y)+I[6]+76029189&4294967295,w=T+(E<<23&4294967295|E>>>9),E=y+(w^T^A)+I[9]+3654602809&4294967295,y=w+(E<<4&4294967295|E>>>28),E=A+(y^w^T)+I[12]+3873151461&4294967295,A=y+(E<<11&4294967295|E>>>21),E=T+(A^y^w)+I[15]+530742520&4294967295,T=A+(E<<16&4294967295|E>>>16),E=w+(T^A^y)+I[2]+3299628645&4294967295,w=T+(E<<23&4294967295|E>>>9),E=y+(T^(w|~A))+I[0]+4096336452&4294967295,y=w+(E<<6&4294967295|E>>>26),E=A+(w^(y|~T))+I[7]+1126891415&4294967295,A=y+(E<<10&4294967295|E>>>22),E=T+(y^(A|~w))+I[14]+2878612391&4294967295,T=A+(E<<15&4294967295|E>>>17),E=w+(A^(T|~y))+I[5]+4237533241&4294967295,w=T+(E<<21&4294967295|E>>>11),E=y+(T^(w|~A))+I[12]+1700485571&4294967295,y=w+(E<<6&4294967295|E>>>26),E=A+(w^(y|~T))+I[3]+2399980690&4294967295,A=y+(E<<10&4294967295|E>>>22),E=T+(y^(A|~w))+I[10]+4293915773&4294967295,T=A+(E<<15&4294967295|E>>>17),E=w+(A^(T|~y))+I[1]+2240044497&4294967295,w=T+(E<<21&4294967295|E>>>11),E=y+(T^(w|~A))+I[8]+1873313359&4294967295,y=w+(E<<6&4294967295|E>>>26),E=A+(w^(y|~T))+I[15]+4264355552&4294967295,A=y+(E<<10&4294967295|E>>>22),E=T+(y^(A|~w))+I[6]+2734768916&4294967295,T=A+(E<<15&4294967295|E>>>17),E=w+(A^(T|~y))+I[13]+1309151649&4294967295,w=T+(E<<21&4294967295|E>>>11),E=y+(T^(w|~A))+I[4]+4149444226&4294967295,y=w+(E<<6&4294967295|E>>>26),E=A+(w^(y|~T))+I[11]+3174756917&4294967295,A=y+(E<<10&4294967295|E>>>22),E=T+(y^(A|~w))+I[2]+718787259&4294967295,T=A+(E<<15&4294967295|E>>>17),E=w+(A^(T|~y))+I[9]+3951481745&4294967295,b.g[0]=b.g[0]+y&4294967295,b.g[1]=b.g[1]+(T+(E<<21&4294967295|E>>>11))&4294967295,b.g[2]=b.g[2]+T&4294967295,b.g[3]=b.g[3]+A&4294967295}i.prototype.u=function(b,y){y===void 0&&(y=b.length);for(var w=y-this.blockSize,I=this.B,T=this.h,A=0;A<y;){if(T==0)for(;A<=w;)r(this,b,A),A+=this.blockSize;if(typeof b=="string"){for(;A<y;)if(I[T++]=b.charCodeAt(A++),T==this.blockSize){r(this,I),T=0;break}}else for(;A<y;)if(I[T++]=b[A++],T==this.blockSize){r(this,I),T=0;break}}this.h=T,this.o+=y},i.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var y=1;y<b.length-8;++y)b[y]=0;var w=8*this.o;for(y=b.length-8;y<b.length;++y)b[y]=w&255,w/=256;for(this.u(b),b=Array(16),y=w=0;4>y;++y)for(var I=0;32>I;I+=8)b[w++]=this.g[y]>>>I&255;return b};function s(b,y){var w=a;return Object.prototype.hasOwnProperty.call(w,b)?w[b]:w[b]=y(b)}function o(b,y){this.h=y;for(var w=[],I=!0,T=b.length-1;0<=T;T--){var A=b[T]|0;I&&A==y||(w[T]=A,I=!1)}this.g=w}var a={};function c(b){return-128<=b&&128>b?s(b,function(y){return new o([y|0],0>y?-1:0)}):new o([b|0],0>b?-1:0)}function u(b){if(isNaN(b)||!isFinite(b))return f;if(0>b)return C(u(-b));for(var y=[],w=1,I=0;b>=w;I++)y[I]=b/w|0,w*=4294967296;return new o(y,0)}function d(b,y){if(b.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(b.charAt(0)=="-")return C(d(b.substring(1),y));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=u(Math.pow(y,8)),I=f,T=0;T<b.length;T+=8){var A=Math.min(8,b.length-T),E=parseInt(b.substring(T,T+A),y);8>A?(A=u(Math.pow(y,A)),I=I.j(A).add(u(E))):(I=I.j(w),I=I.add(u(E)))}return I}var f=c(0),g=c(1),m=c(16777216);t=o.prototype,t.m=function(){if(D(this))return-C(this).m();for(var b=0,y=1,w=0;w<this.g.length;w++){var I=this.i(w);b+=(0<=I?I:4294967296+I)*y,y*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(v(this))return"0";if(D(this))return"-"+C(this).toString(b);for(var y=u(Math.pow(b,6)),w=this,I="";;){var T=F(w,y).g;w=x(w,T.j(y));var A=((0<w.g.length?w.g[0]:w.h)>>>0).toString(b);if(w=T,v(w))return A+I;for(;6>A.length;)A="0"+A;I=A+I}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function v(b){if(b.h!=0)return!1;for(var y=0;y<b.g.length;y++)if(b.g[y]!=0)return!1;return!0}function D(b){return b.h==-1}t.l=function(b){return b=x(this,b),D(b)?-1:v(b)?0:1};function C(b){for(var y=b.g.length,w=[],I=0;I<y;I++)w[I]=~b.g[I];return new o(w,~b.h).add(g)}t.abs=function(){return D(this)?C(this):this},t.add=function(b){for(var y=Math.max(this.g.length,b.g.length),w=[],I=0,T=0;T<=y;T++){var A=I+(this.i(T)&65535)+(b.i(T)&65535),E=(A>>>16)+(this.i(T)>>>16)+(b.i(T)>>>16);I=E>>>16,A&=65535,E&=65535,w[T]=E<<16|A}return new o(w,w[w.length-1]&-2147483648?-1:0)};function x(b,y){return b.add(C(y))}t.j=function(b){if(v(this)||v(b))return f;if(D(this))return D(b)?C(this).j(C(b)):C(C(this).j(b));if(D(b))return C(this.j(C(b)));if(0>this.l(m)&&0>b.l(m))return u(this.m()*b.m());for(var y=this.g.length+b.g.length,w=[],I=0;I<2*y;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var T=0;T<b.g.length;T++){var A=this.i(I)>>>16,E=this.i(I)&65535,Kt=b.i(T)>>>16,Ln=b.i(T)&65535;w[2*I+2*T]+=E*Ln,k(w,2*I+2*T),w[2*I+2*T+1]+=A*Ln,k(w,2*I+2*T+1),w[2*I+2*T+1]+=E*Kt,k(w,2*I+2*T+1),w[2*I+2*T+2]+=A*Kt,k(w,2*I+2*T+2)}for(I=0;I<y;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=y;I<2*y;I++)w[I]=0;return new o(w,0)};function k(b,y){for(;(b[y]&65535)!=b[y];)b[y+1]+=b[y]>>>16,b[y]&=65535,y++}function P(b,y){this.g=b,this.h=y}function F(b,y){if(v(y))throw Error("division by zero");if(v(b))return new P(f,f);if(D(b))return y=F(C(b),y),new P(C(y.g),C(y.h));if(D(y))return y=F(b,C(y)),new P(C(y.g),y.h);if(30<b.g.length){if(D(b)||D(y))throw Error("slowDivide_ only works with positive integers.");for(var w=g,I=y;0>=I.l(b);)w=Z(w),I=Z(I);var T=W(w,1),A=W(I,1);for(I=W(I,2),w=W(w,2);!v(I);){var E=A.add(I);0>=E.l(b)&&(T=T.add(w),A=E),I=W(I,1),w=W(w,1)}return y=x(b,T.j(y)),new P(T,y)}for(T=f;0<=b.l(y);){for(w=Math.max(1,Math.floor(b.m()/y.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),A=u(w),E=A.j(y);D(E)||0<E.l(b);)w-=I,A=u(w),E=A.j(y);v(A)&&(A=g),T=T.add(A),b=x(b,E)}return new P(T,b)}t.A=function(b){return F(this,b).h},t.and=function(b){for(var y=Math.max(this.g.length,b.g.length),w=[],I=0;I<y;I++)w[I]=this.i(I)&b.i(I);return new o(w,this.h&b.h)},t.or=function(b){for(var y=Math.max(this.g.length,b.g.length),w=[],I=0;I<y;I++)w[I]=this.i(I)|b.i(I);return new o(w,this.h|b.h)},t.xor=function(b){for(var y=Math.max(this.g.length,b.g.length),w=[],I=0;I<y;I++)w[I]=this.i(I)^b.i(I);return new o(w,this.h^b.h)};function Z(b){for(var y=b.g.length+1,w=[],I=0;I<y;I++)w[I]=b.i(I)<<1|b.i(I-1)>>>31;return new o(w,b.h)}function W(b,y){var w=y>>5;y%=32;for(var I=b.g.length-w,T=[],A=0;A<I;A++)T[A]=0<y?b.i(A+w)>>>y|b.i(A+w+1)<<32-y:b.i(A+w);return new o(T,b.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Mw=sN.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Ns=sN.Integer=o}).apply(typeof rN<"u"?rN:typeof self<"u"?self:typeof window<"u"?window:{});var eg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Vr={};var xw,Nw,Mc,Ow,Xu,tg,Pw,kw,Fw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof eg=="object"&&eg];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var i=n(this);function r(l,h){if(h)e:{var p=i;l=l.split(".");for(var _=0;_<l.length-1;_++){var S=l[_];if(!(S in p))break e;p=p[S]}l=l[l.length-1],_=p[l],h=h(_),h!=_&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function s(l,h){l instanceof String&&(l+="");var p=0,_=!1,S={next:function(){if(!_&&p<l.length){var M=p++;return{value:h(M,l[M]),done:!1}}return _=!0,{done:!0,value:void 0}}};return S[Symbol.iterator]=function(){return S},S}r("Array.prototype.values",function(l){return l||function(){return s(this,function(h,p){return p})}});var o=o||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function u(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,p){return l.call.apply(l.bind,arguments)}function f(l,h,p){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var S=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(S,_),l.apply(h,S)}}return function(){return l.apply(h,arguments)}}function g(l,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function m(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function v(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(_,S,M){for(var V=Array(arguments.length-2),He=2;He<arguments.length;He++)V[He-2]=arguments[He];return h.prototype[S].apply(_,V)}}function D(l){let h=l.length;if(0<h){let p=Array(h);for(let _=0;_<h;_++)p[_]=l[_];return p}return[]}function C(l,h){for(let p=1;p<arguments.length;p++){let _=arguments[p];if(c(_)){let S=l.length||0,M=_.length||0;l.length=S+M;for(let V=0;V<M;V++)l[S+V]=_[V]}else l.push(_)}}class x{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function k(l){return/^[\s\xa0]*$/.test(l)}function P(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function F(l){return F[" "](l),l}F[" "]=function(){};var Z=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function W(l,h,p){for(let _ in l)h.call(p,l[_],_,l)}function b(l,h){for(let p in l)h.call(void 0,l[p],p,l)}function y(l){let h={};for(let p in l)h[p]=l[p];return h}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(l,h){let p,_;for(let S=1;S<arguments.length;S++){_=arguments[S];for(p in _)l[p]=_[p];for(let M=0;M<w.length;M++)p=w[M],Object.prototype.hasOwnProperty.call(_,p)&&(l[p]=_[p])}}function T(l){var h=1;l=l.split(":");let p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function A(l){a.setTimeout(()=>{throw l},0)}function E(){var l=mi;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class Kt{constructor(){this.h=this.g=null}add(h,p){let _=Ln.get();_.set(h,p),this.h?this.h.next=_:this.g=_,this.h=_}}var Ln=new x(()=>new fn,l=>l.reset());class fn{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Qt,Fi=!1,mi=new Kt,Hs=()=>{let l=a.Promise.resolve(void 0);Qt=()=>{l.then(pl)}};var pl=()=>{for(var l;l=E();){try{l.h.call(l.g)}catch(p){A(p)}var h=Ln;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}Fi=!1};function Rn(){this.s=this.s,this.C=this.C}Rn.prototype.s=!1,Rn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Rn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pt(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}pt.prototype.h=function(){this.defaultPrevented=!0};var Yr=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return l}();function Mn(l,h){if(pt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(Z){e:{try{F(h.nodeName);var S=!0;break e}catch{}S=!1}S||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Gs[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Mn.aa.h.call(this)}}v(Mn,pt);var Gs={2:"touch",3:"pen",4:"mouse"};Mn.prototype.h=function(){Mn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Li="closure_listenable_"+(1e6*Math.random()|0),hr=0;function gl(l,h,p,_,S){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!_,this.ha=S,this.key=++hr,this.da=this.fa=!1}function ga(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Jr(l){this.src=l,this.g={},this.h=0}Jr.prototype.add=function(l,h,p,_,S){var M=l.toString();l=this.g[M],l||(l=this.g[M]=[],this.h++);var V=ma(l,h,_,S);return-1<V?(h=l[V],p||(h.fa=!1)):(h=new gl(h,this.src,M,!!_,S),h.fa=p,l.push(h)),h};function ml(l,h){var p=h.type;if(p in l.g){var _=l.g[p],S=Array.prototype.indexOf.call(_,h,void 0),M;(M=0<=S)&&Array.prototype.splice.call(_,S,1),M&&(ga(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function ma(l,h,p,_){for(var S=0;S<l.length;++S){var M=l[S];if(!M.da&&M.listener==h&&M.capture==!!p&&M.ha==_)return S}return-1}var _l="closure_lm_"+(1e6*Math.random()|0),yl={};function vl(l,h,p,_,S){if(_&&_.once)return qd(l,h,p,_,S);if(Array.isArray(h)){for(var M=0;M<h.length;M++)vl(l,h[M],p,_,S);return null}return p=ya(p),l&&l[Li]?l.K(h,p,u(_)?!!_.capture:!!_,S):wl(l,h,p,!1,_,S)}function wl(l,h,p,_,S,M){if(!h)throw Error("Invalid event type");var V=u(S)?!!S.capture:!!S,He=zs(l);if(He||(l[_l]=He=new Jr(l)),p=He.add(h,p,_,V,M),p.proxy)return p;if(_=Mm(),p.proxy=_,_.src=l,_.listener=p,l.addEventListener)Yr||(S=V),S===void 0&&(S=!1),l.addEventListener(h.toString(),_,S);else if(l.attachEvent)l.attachEvent(El(h.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Mm(){function l(p){return h.call(l.src,l.listener,p)}let h=Wd;return l}function qd(l,h,p,_,S){if(Array.isArray(h)){for(var M=0;M<h.length;M++)qd(l,h[M],p,_,S);return null}return p=ya(p),l&&l[Li]?l.L(h,p,u(_)?!!_.capture:!!_,S):wl(l,h,p,!0,_,S)}function Vi(l,h,p,_,S){if(Array.isArray(h))for(var M=0;M<h.length;M++)Vi(l,h[M],p,_,S);else _=u(_)?!!_.capture:!!_,p=ya(p),l&&l[Li]?(l=l.i,h=String(h).toString(),h in l.g&&(M=l.g[h],p=ma(M,p,_,S),-1<p&&(ga(M[p]),Array.prototype.splice.call(M,p,1),M.length==0&&(delete l.g[h],l.h--)))):l&&(l=zs(l))&&(h=l.g[h.toString()],l=-1,h&&(l=ma(h,p,_,S)),(p=-1<l?h[l]:null)&&Xr(p))}function Xr(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[Li])ml(h.i,l);else{var p=l.type,_=l.proxy;h.removeEventListener?h.removeEventListener(p,_,l.capture):h.detachEvent?h.detachEvent(El(p),_):h.addListener&&h.removeListener&&h.removeListener(_),(p=zs(h))?(ml(p,l),p.h==0&&(p.src=null,h[_l]=null)):ga(l)}}}function El(l){return l in yl?yl[l]:yl[l]="on"+l}function Wd(l,h){if(l.da)l=!0;else{h=new Mn(h,this);var p=l.listener,_=l.ha||l.src;l.fa&&Xr(l),l=p.call(_,h)}return l}function zs(l){return l=l[_l],l instanceof Jr?l:null}var _a="__closure_events_fn_"+(1e9*Math.random()>>>0);function ya(l){return typeof l=="function"?l:(l[_a]||(l[_a]=function(h){return l.handleEvent(h)}),l[_a])}function Tt(){Rn.call(this),this.i=new Jr(this),this.M=this,this.F=null}v(Tt,Rn),Tt.prototype[Li]=!0,Tt.prototype.removeEventListener=function(l,h,p,_){Vi(this,l,h,p,_)};function Pt(l,h){var p,_=l.F;if(_)for(p=[];_;_=_.F)p.push(_);if(l=l.M,_=h.type||h,typeof h=="string")h=new pt(h,l);else if(h instanceof pt)h.target=h.target||l;else{var S=h;h=new pt(_,l),I(h,S)}if(S=!0,p)for(var M=p.length-1;0<=M;M--){var V=h.g=p[M];S=Kd(V,_,!0,h)&&S}if(V=h.g=l,S=Kd(V,_,!0,h)&&S,S=Kd(V,_,!1,h)&&S,p)for(M=0;M<p.length;M++)V=h.g=p[M],S=Kd(V,_,!1,h)&&S}Tt.prototype.N=function(){if(Tt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],_=0;_<p.length;_++)ga(p[_]);delete l.g[h],l.h--}}this.F=null},Tt.prototype.K=function(l,h,p,_){return this.i.add(String(l),h,!1,p,_)},Tt.prototype.L=function(l,h,p,_){return this.i.add(String(l),h,!0,p,_)};function Kd(l,h,p,_){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var S=!0,M=0;M<h.length;++M){var V=h[M];if(V&&!V.da&&V.capture==p){var He=V.listener,Yt=V.ha||V.src;V.fa&&ml(l.i,V),S=He.call(Yt,_)!==!1&&S}}return S&&!_.defaultPrevented}function gT(l,h,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function mT(l){l.g=gT(()=>{l.g=null,l.i&&(l.i=!1,mT(l))},l.l);let h=l.h;l.h=null,l.m.apply(null,h)}class hV extends Rn{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:mT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bl(l){Rn.call(this),this.h=l,this.g={}}v(bl,Rn);var _T=[];function yT(l){W(l.g,function(h,p){this.g.hasOwnProperty(p)&&Xr(h)},l),l.g={}}bl.prototype.N=function(){bl.aa.N.call(this),yT(this)},bl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xm=a.JSON.stringify,fV=a.JSON.parse,pV=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Nm(){}Nm.prototype.h=null;function vT(l){return l.h||(l.h=l.i())}function wT(){}var Il={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Om(){pt.call(this,"d")}v(Om,pt);function Pm(){pt.call(this,"c")}v(Pm,pt);var qs={},ET=null;function Qd(){return ET=ET||new Tt}qs.La="serverreachability";function bT(l){pt.call(this,qs.La,l)}v(bT,pt);function Cl(l){let h=Qd();Pt(h,new bT(h))}qs.STAT_EVENT="statevent";function IT(l,h){pt.call(this,qs.STAT_EVENT,l),this.stat=h}v(IT,pt);function pn(l){let h=Qd();Pt(h,new IT(h,l))}qs.Ma="timingevent";function CT(l,h){pt.call(this,qs.Ma,l),this.size=h}v(CT,pt);function Tl(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function Dl(){this.g=!0}Dl.prototype.xa=function(){this.g=!1};function gV(l,h,p,_,S,M){l.info(function(){if(l.g)if(M)for(var V="",He=M.split("&"),Yt=0;Yt<He.length;Yt++){var Fe=He[Yt].split("=");if(1<Fe.length){var sn=Fe[0];Fe=Fe[1];var on=sn.split("_");V=2<=on.length&&on[1]=="type"?V+(sn+"="+Fe+"&"):V+(sn+"=redacted&")}}else V=null;else V=M;return"XMLHTTP REQ ("+_+") [attempt "+S+"]: "+h+`
`+p+`
`+V})}function mV(l,h,p,_,S,M,V){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+S+"]: "+h+`
`+p+`
`+M+" "+V})}function va(l,h,p,_){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+yV(l,p)+(_?" "+_:"")})}function _V(l,h){l.info(function(){return"TIMEOUT: "+h})}Dl.prototype.info=function(){};function yV(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var _=p[l];if(!(2>_.length)){var S=_[1];if(Array.isArray(S)&&!(1>S.length)){var M=S[0];if(M!="noop"&&M!="stop"&&M!="close")for(var V=1;V<S.length;V++)S[V]=""}}}}return xm(p)}catch{return h}}var Yd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},TT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},km;function Jd(){}v(Jd,Nm),Jd.prototype.g=function(){return new XMLHttpRequest},Jd.prototype.i=function(){return{}},km=new Jd;function Zr(l,h,p,_){this.j=l,this.i=h,this.l=p,this.R=_||1,this.U=new bl(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new DT}function DT(){this.i=null,this.g="",this.h=!1}var ST={},Fm={};function Lm(l,h,p){l.L=1,l.v=th(fr(h)),l.m=p,l.P=!0,AT(l,null)}function AT(l,h){l.F=Date.now(),Xd(l),l.A=fr(l.v);var p=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),$T(p.i,"t",_),l.C=0,p=l.j.J,l.h=new DT,l.g=oD(l.j,p?h:null,!l.m),0<l.O&&(l.M=new hV(g(l.Y,l,l.g),l.O)),h=l.U,p=l.g,_=l.ca;var S="readystatechange";Array.isArray(S)||(S&&(_T[0]=S.toString()),S=_T);for(var M=0;M<S.length;M++){var V=vl(p,S[M],_||h.handleEvent,!1,h.h||h);if(!V)break;h.g[V.key]=V}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Cl(),gV(l.i,l.u,l.A,l.l,l.R,l.m)}Zr.prototype.ca=function(l){l=l.target;let h=this.M;h&&pr(l)==3?h.j():this.Y(l)},Zr.prototype.Y=function(l){try{if(l==this.g)e:{let on=pr(this.g);var h=this.g.Ba();let ba=this.g.Z();if(!(3>on)&&(on!=3||this.g&&(this.h.h||this.g.oa()||QT(this.g)))){this.J||on!=4||h==7||(h==8||0>=ba?Cl(3):Cl(2)),Vm(this);var p=this.g.Z();this.X=p;t:if(RT(this)){var _=QT(this.g);l="";var S=_.length,M=pr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ws(this),Sl(this);var V="";break t}this.h.i=new a.TextDecoder}for(h=0;h<S;h++)this.h.h=!0,l+=this.h.i.decode(_[h],{stream:!(M&&h==S-1)});_.length=0,this.h.g+=l,this.C=0,V=this.h.g}else V=this.g.oa();if(this.o=p==200,mV(this.i,this.u,this.A,this.l,this.R,on,p),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Yt=this.g;if((He=Yt.g?Yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(He)){var Fe=He;break t}}Fe=null}if(p=Fe)va(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bm(this,p);else{this.o=!1,this.s=3,pn(12),Ws(this),Sl(this);break e}}if(this.P){p=!0;let _i;for(;!this.J&&this.C<V.length;)if(_i=vV(this,V),_i==Fm){on==4&&(this.s=4,pn(14),p=!1),va(this.i,this.l,null,"[Incomplete Response]");break}else if(_i==ST){this.s=4,pn(15),va(this.i,this.l,V,"[Invalid Chunk]"),p=!1;break}else va(this.i,this.l,_i,null),Bm(this,_i);if(RT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),on!=4||V.length!=0||this.h.h||(this.s=1,pn(16),p=!1),this.o=this.o&&p,!p)va(this.i,this.l,V,"[Invalid Chunked Response]"),Ws(this),Sl(this);else if(0<V.length&&!this.W){this.W=!0;var sn=this.j;sn.g==this&&sn.ba&&!sn.M&&(sn.j.info("Great, no buffering proxy detected. Bytes received: "+V.length),zm(sn),sn.M=!0,pn(11))}}else va(this.i,this.l,V,null),Bm(this,V);on==4&&Ws(this),this.o&&!this.J&&(on==4?nD(this.j,this):(this.o=!1,Xd(this)))}else FV(this.g),p==400&&0<V.indexOf("Unknown SID")?(this.s=3,pn(12)):(this.s=0,pn(13)),Ws(this),Sl(this)}}}catch{}finally{}};function RT(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function vV(l,h){var p=l.C,_=h.indexOf(`
`,p);return _==-1?Fm:(p=Number(h.substring(p,_)),isNaN(p)?ST:(_+=1,_+p>h.length?Fm:(h=h.slice(_,_+p),l.C=_+p,h)))}Zr.prototype.cancel=function(){this.J=!0,Ws(this)};function Xd(l){l.S=Date.now()+l.I,MT(l,l.I)}function MT(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Tl(g(l.ba,l),h)}function Vm(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Zr.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(_V(this.i,this.A),this.L!=2&&(Cl(),pn(17)),Ws(this),this.s=2,Sl(this)):MT(this,this.S-l)};function Sl(l){l.j.G==0||l.J||nD(l.j,l)}function Ws(l){Vm(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,yT(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Bm(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||jm(p.h,l))){if(!l.K&&jm(p.h,l)&&p.G==3){try{var _=p.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var S=_;if(S[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)oh(p),rh(p);else break e;Gm(p),pn(18)}}else p.za=S[1],0<p.za-p.T&&37500>S[2]&&p.F&&p.v==0&&!p.C&&(p.C=Tl(g(p.Za,p),6e3));if(1>=OT(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Qs(p,11)}else if((l.K||p.g==l)&&oh(p),!k(h))for(S=p.Da.g.parse(h),h=0;h<S.length;h++){let Fe=S[h];if(p.T=Fe[0],Fe=Fe[1],p.G==2)if(Fe[0]=="c"){p.K=Fe[1],p.ia=Fe[2];let sn=Fe[3];sn!=null&&(p.la=sn,p.j.info("VER="+p.la));let on=Fe[4];on!=null&&(p.Aa=on,p.j.info("SVER="+p.Aa));let ba=Fe[5];ba!=null&&typeof ba=="number"&&0<ba&&(_=1.5*ba,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;let _i=l.g;if(_i){let ch=_i.g?_i.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ch){var M=_.h;M.g||ch.indexOf("spdy")==-1&&ch.indexOf("quic")==-1&&ch.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Um(M,M.h),M.h=null))}if(_.D){let qm=_i.g?_i.g.getResponseHeader("X-HTTP-Session-Id"):null;qm&&(_.ya=qm,Ye(_.I,_.D,qm))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var V=l;if(_.qa=sD(_,_.J?_.ia:null,_.W),V.K){PT(_.h,V);var He=V,Yt=_.L;Yt&&(He.I=Yt),He.B&&(Vm(He),Xd(He)),_.g=V}else eD(_);0<p.i.length&&sh(p)}else Fe[0]!="stop"&&Fe[0]!="close"||Qs(p,7);else p.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Qs(p,7):Hm(p):Fe[0]!="noop"&&p.l&&p.l.ta(Fe),p.v=0)}}Cl(4)}catch{}}var wV=class{constructor(l,h){this.g=l,this.map=h}};function xT(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function NT(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function OT(l){return l.h?1:l.g?l.g.size:0}function jm(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Um(l,h){l.g?l.g.add(h):l.h=h}function PT(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}xT.prototype.cancel=function(){if(this.i=kT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function kT(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(let p of l.g.values())h=h.concat(p.D);return h}return D(l.i)}function EV(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],p=l.length,_=0;_<p;_++)h.push(l[_]);return h}h=[],p=0;for(_ in l)h[p++]=l[_];return h}function bV(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(let _ in l)h[p++]=_;return h}}}function FT(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=bV(l),_=EV(l),S=_.length,M=0;M<S;M++)h.call(void 0,_[M],p&&p[M],l)}var LT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function IV(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var _=l[p].indexOf("="),S=null;if(0<=_){var M=l[p].substring(0,_);S=l[p].substring(_+1)}else M=l[p];h(M,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function Ks(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Ks){this.h=l.h,Zd(this,l.j),this.o=l.o,this.g=l.g,eh(this,l.s),this.l=l.l;var h=l.i,p=new Ml;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),VT(this,p),this.m=l.m}else l&&(h=String(l).match(LT))?(this.h=!1,Zd(this,h[1]||"",!0),this.o=Al(h[2]||""),this.g=Al(h[3]||"",!0),eh(this,h[4]),this.l=Al(h[5]||"",!0),VT(this,h[6]||"",!0),this.m=Al(h[7]||"")):(this.h=!1,this.i=new Ml(null,this.h))}Ks.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Rl(h,BT,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Rl(h,BT,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Rl(p,p.charAt(0)=="/"?DV:TV,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Rl(p,AV)),l.join("")};function fr(l){return new Ks(l)}function Zd(l,h,p){l.j=p?Al(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function eh(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function VT(l,h,p){h instanceof Ml?(l.i=h,RV(l.i,l.h)):(p||(h=Rl(h,SV)),l.i=new Ml(h,l.h))}function Ye(l,h,p){l.i.set(h,p)}function th(l){return Ye(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Al(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Rl(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,CV),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function CV(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var BT=/[#\/\?@]/g,TV=/[#\?:]/g,DV=/[#\?]/g,SV=/[#\?@]/g,AV=/#/g;function Ml(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function es(l){l.g||(l.g=new Map,l.h=0,l.i&&IV(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Ml.prototype,t.add=function(l,h){es(this),this.i=null,l=wa(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function jT(l,h){es(l),h=wa(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function UT(l,h){return es(l),h=wa(l,h),l.g.has(h)}t.forEach=function(l,h){es(this),this.g.forEach(function(p,_){p.forEach(function(S){l.call(h,S,_,this)},this)},this)},t.na=function(){es(this);let l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let _=0;_<h.length;_++){let S=l[_];for(let M=0;M<S.length;M++)p.push(h[_])}return p},t.V=function(l){es(this);let h=[];if(typeof l=="string")UT(this,l)&&(h=h.concat(this.g.get(wa(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return es(this),this.i=null,l=wa(this,l),UT(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function $T(l,h,p){jT(l,h),0<p.length&&(l.i=null,l.g.set(wa(l,h),D(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var _=h[p];let M=encodeURIComponent(String(_)),V=this.V(_);for(_=0;_<V.length;_++){var S=M;V[_]!==""&&(S+="="+encodeURIComponent(String(V[_]))),l.push(S)}}return this.i=l.join("&")};function wa(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function RV(l,h){h&&!l.j&&(es(l),l.i=null,l.g.forEach(function(p,_){var S=_.toLowerCase();_!=S&&(jT(this,_),$T(this,S,p))},l)),l.j=h}function MV(l,h){let p=new Dl;if(a.Image){let _=new Image;_.onload=m(ts,p,"TestLoadImage: loaded",!0,h,_),_.onerror=m(ts,p,"TestLoadImage: error",!1,h,_),_.onabort=m(ts,p,"TestLoadImage: abort",!1,h,_),_.ontimeout=m(ts,p,"TestLoadImage: timeout",!1,h,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else h(!1)}function xV(l,h){let p=new Dl,_=new AbortController,S=setTimeout(()=>{_.abort(),ts(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:_.signal}).then(M=>{clearTimeout(S),M.ok?ts(p,"TestPingServer: ok",!0,h):ts(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(S),ts(p,"TestPingServer: error",!1,h)})}function ts(l,h,p,_,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),_(p)}catch{}}function NV(){this.g=new pV}function OV(l,h,p){let _=p||"";try{FT(l,function(S,M){let V=S;u(S)&&(V=xm(S)),h.push(_+M+"="+encodeURIComponent(V))})}catch(S){throw h.push(_+"type="+encodeURIComponent("_badmap")),S}}function xl(l){this.l=l.Ub||null,this.j=l.eb||!1}v(xl,Nm),xl.prototype.g=function(){return new nh(this.l,this.j)},xl.prototype.i=function(l){return function(){return l}}({});function nh(l,h){Tt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(nh,Tt),t=nh.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Ol(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Nl(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Ol(this)),this.g&&(this.readyState=3,Ol(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;HT(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function HT(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Nl(this):Ol(this),this.readyState==3&&HT(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Nl(this))},t.Qa=function(l){this.g&&(this.response=l,Nl(this))},t.ga=function(){this.g&&Nl(this)};function Nl(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Ol(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function Ol(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(nh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function GT(l){let h="";return W(l,function(p,_){h+=_,h+=":",h+=p,h+=`\r
`}),h}function $m(l,h,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=GT(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):Ye(l,h,p))}function ct(l){Tt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(ct,Tt);var PV=/^https?$/i,kV=["POST","PUT"];t=ct.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():km.g(),this.v=this.o?vT(this.o):vT(km),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(M){zT(this,M);return}if(l=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var S in _)p.set(S,_[S]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(let M of _.keys())p.set(M,_.get(M));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(M=>M.toLowerCase()=="content-type"),S=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(kV,h,void 0))||_||S||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,V]of p)this.g.setRequestHeader(M,V);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{KT(this),this.u=!0,this.g.send(l),this.u=!1}catch(M){zT(this,M)}};function zT(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,qT(l),ih(l)}function qT(l){l.A||(l.A=!0,Pt(l,"complete"),Pt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Pt(this,"complete"),Pt(this,"abort"),ih(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ih(this,!0)),ct.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?WT(this):this.bb())},t.bb=function(){WT(this)};function WT(l){if(l.h&&typeof o<"u"&&(!l.v[1]||pr(l)!=4||l.Z()!=2)){if(l.u&&pr(l)==4)gT(l.Ea,0,l);else if(Pt(l,"readystatechange"),pr(l)==4){l.h=!1;try{let V=l.Z();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var _;if(_=V===0){var S=String(l.D).match(LT)[1]||null;!S&&a.self&&a.self.location&&(S=a.self.location.protocol.slice(0,-1)),_=!PV.test(S?S.toLowerCase():"")}p=_}if(p)Pt(l,"complete"),Pt(l,"success");else{l.m=6;try{var M=2<pr(l)?l.g.statusText:""}catch{M=""}l.l=M+" ["+l.Z()+"]",qT(l)}}finally{ih(l)}}}}function ih(l,h){if(l.g){KT(l);let p=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||Pt(l,"ready");try{p.onreadystatechange=_}catch{}}}function KT(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function pr(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<pr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),fV(h)}};function QT(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function FV(l){let h={};l=(l.g&&2<=pr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(k(l[_]))continue;var p=T(l[_]);let S=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let M=h[S]||[];h[S]=M,M.push(p)}b(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pl(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function YT(l){this.Aa=0,this.i=[],this.j=new Dl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Pl("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Pl("baseRetryDelayMs",5e3,l),this.cb=Pl("retryDelaySeedMs",1e4,l),this.Wa=Pl("forwardChannelMaxRetries",2,l),this.wa=Pl("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new xT(l&&l.concurrentRequestLimit),this.Da=new NV,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=YT.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,_){pn(0),this.W=l,this.H=h||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=sD(this,null,this.W),sh(this)};function Hm(l){if(JT(l),l.G==3){var h=l.U++,p=fr(l.I);if(Ye(p,"SID",l.K),Ye(p,"RID",h),Ye(p,"TYPE","terminate"),kl(l,p),h=new Zr(l,l.j,h),h.L=2,h.v=th(fr(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=oD(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Xd(h)}rD(l)}function rh(l){l.g&&(zm(l),l.g.cancel(),l.g=null)}function JT(l){rh(l),l.u&&(a.clearTimeout(l.u),l.u=null),oh(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function sh(l){if(!NT(l.h)&&!l.s){l.s=!0;var h=l.Ga;Qt||Hs(),Fi||(Qt(),Fi=!0),mi.add(h,l),l.B=0}}function LV(l,h){return OT(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Tl(g(l.Ga,l,h),iD(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let S=new Zr(this,this.j,l),M=this.o;if(this.S&&(M?(M=y(M),I(M,this.S)):M=this.S),this.m!==null||this.O||(S.H=M,M=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=ZT(this,S,h),p=fr(this.I),Ye(p,"RID",l),Ye(p,"CVER",22),this.D&&Ye(p,"X-HTTP-Session-Id",this.D),kl(this,p),M&&(this.O?h="headers="+encodeURIComponent(String(GT(M)))+"&"+h:this.m&&$m(p,this.m,M)),Um(this.h,S),this.Ua&&Ye(p,"TYPE","init"),this.P?(Ye(p,"$req",h),Ye(p,"SID","null"),S.T=!0,Lm(S,p,null)):Lm(S,p,h),this.G=2}}else this.G==3&&(l?XT(this,l):this.i.length==0||NT(this.h)||XT(this))};function XT(l,h){var p;h?p=h.l:p=l.U++;let _=fr(l.I);Ye(_,"SID",l.K),Ye(_,"RID",p),Ye(_,"AID",l.T),kl(l,_),l.m&&l.o&&$m(_,l.m,l.o),p=new Zr(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=ZT(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Um(l.h,p),Lm(p,_,h)}function kl(l,h){l.H&&W(l.H,function(p,_){Ye(h,_,p)}),l.l&&FT({},function(p,_){Ye(h,_,p)})}function ZT(l,h,p){p=Math.min(l.i.length,p);var _=l.l?g(l.l.Na,l.l,l):null;e:{var S=l.i;let M=-1;for(;;){let V=["count="+p];M==-1?0<p?(M=S[0].g,V.push("ofs="+M)):M=0:V.push("ofs="+M);let He=!0;for(let Yt=0;Yt<p;Yt++){let Fe=S[Yt].g,sn=S[Yt].map;if(Fe-=M,0>Fe)M=Math.max(0,S[Yt].g-100),He=!1;else try{OV(sn,V,"req"+Fe+"_")}catch{_&&_(sn)}}if(He){_=V.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,_}function eD(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;Qt||Hs(),Fi||(Qt(),Fi=!0),mi.add(h,l),l.v=0}}function Gm(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Tl(g(l.Fa,l),iD(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,tD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Tl(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pn(10),rh(this),tD(this))};function zm(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function tD(l){l.g=new Zr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=fr(l.qa);Ye(h,"RID","rpc"),Ye(h,"SID",l.K),Ye(h,"AID",l.T),Ye(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ye(h,"TO",l.ja),Ye(h,"TYPE","xmlhttp"),kl(l,h),l.m&&l.o&&$m(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=th(fr(h)),p.m=null,p.P=!0,AT(p,l)}t.Za=function(){this.C!=null&&(this.C=null,rh(this),Gm(this),pn(19))};function oh(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function nD(l,h){var p=null;if(l.g==h){oh(l),zm(l),l.g=null;var _=2}else if(jm(l.h,h))p=h.D,PT(l.h,h),_=1;else return;if(l.G!=0){if(h.o)if(_==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var S=l.B;_=Qd(),Pt(_,new CT(_,p)),sh(l)}else eD(l);else if(S=h.s,S==3||S==0&&0<h.X||!(_==1&&LV(l,h)||_==2&&Gm(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),S){case 1:Qs(l,5);break;case 4:Qs(l,10);break;case 3:Qs(l,6);break;default:Qs(l,2)}}}function iD(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function Qs(l,h){if(l.j.info("Error code "+h),h==2){var p=g(l.fb,l),_=l.Xa;let S=!_;_=new Ks(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Zd(_,"https"),th(_),S?MV(_.toString(),p):xV(_.toString(),p)}else pn(2);l.G=0,l.l&&l.l.sa(h),rD(l),JT(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),pn(2)):(this.j.info("Failed to ping google.com"),pn(1))};function rD(l){if(l.G=0,l.ka=[],l.l){let h=kT(l.h);(h.length!=0||l.i.length!=0)&&(C(l.ka,h),C(l.ka,l.i),l.h.i.length=0,D(l.i),l.i.length=0),l.l.ra()}}function sD(l,h,p){var _=p instanceof Ks?fr(p):new Ks(p);if(_.g!="")h&&(_.g=h+"."+_.g),eh(_,_.s);else{var S=a.location;_=S.protocol,h=h?h+"."+S.hostname:S.hostname,S=+S.port;var M=new Ks(null);_&&Zd(M,_),h&&(M.g=h),S&&eh(M,S),p&&(M.l=p),_=M}return p=l.D,h=l.ya,p&&h&&Ye(_,p,h),Ye(_,"VER",l.la),kl(l,_),_}function oD(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new ct(new xl({eb:p})):new ct(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function aD(){}t=aD.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ah(){}ah.prototype.g=function(l,h){return new Vn(l,h)};function Vn(l,h){Tt.call(this),this.g=new YT(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!k(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!k(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ea(this)}v(Vn,Tt),Vn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vn.prototype.close=function(){Hm(this.g)},Vn.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=xm(l),l=p);h.i.push(new wV(h.Ya++,l)),h.G==3&&sh(h)},Vn.prototype.N=function(){this.g.l=null,delete this.j,Hm(this.g),delete this.g,Vn.aa.N.call(this)};function cD(l){Om.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(let p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}v(cD,Om);function lD(){Pm.call(this),this.status=1}v(lD,Pm);function Ea(l){this.g=l}v(Ea,aD),Ea.prototype.ua=function(){Pt(this.g,"a")},Ea.prototype.ta=function(l){Pt(this.g,new cD(l))},Ea.prototype.sa=function(l){Pt(this.g,new lD)},Ea.prototype.ra=function(){Pt(this.g,"b")},ah.prototype.createWebChannel=ah.prototype.g,Vn.prototype.send=Vn.prototype.o,Vn.prototype.open=Vn.prototype.m,Vn.prototype.close=Vn.prototype.close,Fw=Vr.createWebChannelTransport=function(){return new ah},kw=Vr.getStatEventTarget=function(){return Qd()},Pw=Vr.Event=qs,tg=Vr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yd.NO_ERROR=0,Yd.TIMEOUT=8,Yd.HTTP_ERROR=6,Xu=Vr.ErrorCode=Yd,TT.COMPLETE="complete",Ow=Vr.EventType=TT,wT.EventType=Il,Il.OPEN="a",Il.CLOSE="b",Il.ERROR="c",Il.MESSAGE="d",Tt.prototype.listen=Tt.prototype.K,Mc=Vr.WebChannel=wT,Nw=Vr.FetchXmlHttpFactory=xl,ct.prototype.listenOnce=ct.prototype.L,ct.prototype.getLastError=ct.prototype.Ka,ct.prototype.getLastErrorCode=ct.prototype.Ba,ct.prototype.getStatus=ct.prototype.Z,ct.prototype.getResponseJson=ct.prototype.Oa,ct.prototype.getResponseText=ct.prototype.oa,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Ha,xw=Vr.XhrIo=ct}).apply(typeof eg<"u"?eg:typeof self<"u"?self:typeof window<"u"?window:{});var oN="@firebase/firestore";var qt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};qt.UNAUTHENTICATED=new qt(null),qt.GOOGLE_CREDENTIALS=new qt("google-credentials-uid"),qt.FIRST_PARTY=new qt("first-party-uid"),qt.MOCK_USER=new qt("mock-user");var Qc="10.12.3";var qo=new $i("@firebase/firestore");function Zu(){return qo.logLevel}function X(t,...e){if(qo.logLevel<=Bn.DEBUG){let n=e.map(Ib);qo.debug(`Firestore (${Qc}): ${t}`,...n)}}function jr(t,...e){if(qo.logLevel<=Bn.ERROR){let n=e.map(Ib);qo.error(`Firestore (${Qc}): ${t}`,...n)}}function Lc(t,...e){if(qo.logLevel<=Bn.WARN){let n=e.map(Ib);qo.warn(`Firestore (${Qc}): ${t}`,...n)}}function Ib(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function ue(t="Unexpected state"){let e=`FIRESTORE (${Qc}) INTERNAL ASSERTION FAILED: `+t;throw jr(e),new Error(e)}function Qe(t,e){t||ue()}function he(t,e){return t}var O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},K=class extends vi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var rr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var og=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Uw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(qt.UNAUTHENTICATED))}shutdown(){}},$w=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Hw=class{constructor(e){this.t=e,this.currentUser=qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i,r=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve(),s=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new rr,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>R(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new rr)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Qe(typeof i.accessToken=="string"),new og(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string"),new qt(e)}},Gw=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=qt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},zw=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new Gw(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},qw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ww=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let i=s=>{s.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Qe(typeof n.token=="string"),this.R=n.token,new qw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function nW(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var ag=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=nW(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}};function Le(t,e){return t<e?-1:t>e?1:0}function Vc(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}var Ot=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var fe=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ot(0,0))}static max(){return new t(new Ot(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var cg=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&ue(),i===void 0?i=e.length-n:i>e.length-n&&ue(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},ot=class t extends cg{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new K(O.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}},iW=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Yn=class t extends cg{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return iW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],i="",r=0,s=()=>{if(i.length===0)throw new K(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},o=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new K(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new K(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new K(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var se=class t{constructor(e){this.path=e}static fromPath(e){return new t(ot.fromString(e))}static fromName(e){return new t(ot.fromString(e).popFirst(5))}static empty(){return new t(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ot(e.slice()))}};var Kw=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};Kw.UNKNOWN_ID=-1;function rW(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=fe.fromTimestamp(i===1e9?new Ot(n+1,0):new Ot(n,i));return new Wo(r,se.empty(),e)}function sW(t){return new Wo(t.readTime,t.key,-1)}var Wo=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(fe.min(),se.empty(),-1)}static max(){return new t(fe.max(),se.empty(),-1)}};function oW(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:Le(t.largestBatchId,e.largestBatchId))}var aW="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Qw=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function md(t){return R(this,null,function*(){if(t.code!==O.FAILED_PRECONDITION||t.message!==aW)throw t;X("LocalStore","Unexpectedly lost primary lease")})}var L=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,i)=>{n(e)})}static reject(e){return new t((n,i)=>{i(e)})}static waitFor(e){return new t((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},c=>i(c))}),o=!0,s===r&&n()})}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next(r=>r?t.resolve(r):i());return n}static forEach(e,n){let i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new t((i,r)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;n(e[u]).next(d=>{o[u]=d,++a,a===s&&i(o)},d=>r(d))}})}static doWhile(e,n){return new t((i,r)=>{let s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}};function cW(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _d(t){return t.name==="IndexedDbTransactionError"}var VN=(()=>{class t{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Ug(t){return t==null}function sd(t){return t===0&&1/t==-1/0}function lW(t){return typeof t=="number"&&Number.isInteger(t)&&!sd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var uW=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],tge=[...uW,"documentOverlays"],dW=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],hW=dW,nge=[...hW,"indexConfiguration","indexState","indexEntries"];function aN(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zo(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function BN(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ft=class t{constructor(e,n){this.comparator=e,this.root=n||sr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,sr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pc(this.root,e,this.comparator,!0)}},Pc=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},sr=class t{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new t(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ue();let e=this.left.check();if(e!==this.right.check())throw ue();return e+(this.isRed()?0:1)}};sr.EMPTY=null,sr.RED=!0,sr.BLACK=!1;sr.EMPTY=new class{constructor(){this.size=0}get key(){throw ue()}get value(){throw ue()}get color(){throw ue()}get left(){throw ue()}get right(){throw ue()}copy(e,n,i,r,s){return this}insert(e,n,i){return new sr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ln=class t{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new lg(this.data.getIterator())}getIteratorFrom(e){return new lg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},lg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var hi=class t{constructor(e){this.fields=e,e.sort(Yn.comparator)}static empty(){return new t([])}unionWith(e){let n=new ln(Yn.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Vc(this.fields,e.fields,(n,i)=>n.isEqual(i))}};var ug=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Dn=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ug("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Dn.EMPTY_BYTE_STRING=new Dn("");var fW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ur(t){if(Qe(!!t),typeof t=="string"){let e=0,n=fW.exec(t);if(Qe(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ht(t.seconds),nanos:ht(t.nanos)}}function ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ps(t){return typeof t=="string"?Dn.fromBase64String(t):Dn.fromUint8Array(t)}function Cb(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Tb(t){let e=t.mapValue.fields.__previous_value__;return Cb(e)?Tb(e):e}function od(t){let e=Ur(t.mapValue.fields.__local_write_time__.timestampValue);return new Ot(e.seconds,e.nanos)}var Yw=class{constructor(e,n,i,r,s,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},dg=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var ng={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ko(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Cb(t)?4:jN(t)?9007199254740991:10:ue()}function lr(t,e){if(t===e)return!0;let n=Ko(t);if(n!==Ko(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return od(t).isEqual(od(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=Ur(r.timestampValue),a=Ur(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Ps(r.bytesValue).isEqual(Ps(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return ht(r.geoPointValue.latitude)===ht(s.geoPointValue.latitude)&&ht(r.geoPointValue.longitude)===ht(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ht(r.integerValue)===ht(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=ht(r.doubleValue),a=ht(s.doubleValue);return o===a?sd(o)===sd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Vc(t.arrayValue.values||[],e.arrayValue.values||[],lr);case 10:return function(r,s){let o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(aN(o)!==aN(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!lr(o[c],a[c])))return!1;return!0}(t,e);default:return ue()}}function ad(t,e){return(t.values||[]).find(n=>lr(n,e))!==void 0}function Bc(t,e){if(t===e)return 0;let n=Ko(t),i=Ko(e);if(n!==i)return Le(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Le(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=ht(s.integerValue||s.doubleValue),c=ht(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return cN(t.timestampValue,e.timestampValue);case 4:return cN(od(t),od(e));case 5:return Le(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Ps(s),c=Ps(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=Le(a[u],c[u]);if(d!==0)return d}return Le(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Le(ht(s.latitude),ht(o.latitude));return a!==0?a:Le(ht(s.longitude),ht(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){let d=Bc(a[u],c[u]);if(d)return d}return Le(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===ng.mapValue&&o===ng.mapValue)return 0;if(s===ng.mapValue)return 1;if(o===ng.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=Le(c[f],d[f]);if(g!==0)return g;let m=Bc(a[c[f]],u[d[f]]);if(m!==0)return m}return Le(c.length,d.length)}(t.mapValue,e.mapValue);default:throw ue()}}function cN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Le(t,e);let n=Ur(t),i=Ur(e),r=Le(n.seconds,i.seconds);return r!==0?r:Le(n.nanos,i.nanos)}function jc(t){return Jw(t)}function Jw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let i=Ur(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ps(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(let s of n.values||[])r?r=!1:i+=",",i+=Jw(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${Jw(n.fields[o])}`;return r+"}"}(t.mapValue):ue()}function lN(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Xw(t){return!!t&&"integerValue"in t}function Db(t){return!!t&&"arrayValue"in t}function uN(t){return!!t&&"nullValue"in t}function dN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function rg(t){return!!t&&"mapValue"in t}function td(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Zo(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=td(i)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=td(t.arrayValue.values[n]);return e}return Object.assign({},t)}function jN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Qn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!rg(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=td(n)}setAll(e){let n=Yn.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=td(o):r.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){let n=this.field(e.popLast());rg(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return lr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];rg(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Zo(n,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new t(td(this.value))}};function UN(t){let e=[];return Zo(t.fields,(n,i)=>{let r=new Yn([n]);if(rg(i)){let s=UN(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new hi(e)}var Mi=class t{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,fe.min(),fe.min(),fe.min(),Qn.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,fe.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,fe.min(),fe.min(),Qn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,fe.min(),fe.min(),Qn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Uc=class{constructor(e,n){this.position=e,this.inclusive=n}};function hN(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let s=e[r],o=t.position[r];if(s.field.isKeyField()?i=se.comparator(se.fromName(o.referenceValue),n.key):i=Bc(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function fN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!lr(t.position[n],e.position[n]))return!1;return!0}var Qo=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function pW(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var hg=class{},Ct=class t extends hg{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new eE(e,n,i):n==="array-contains"?new iE(e,i):n==="in"?new rE(e,i):n==="not-in"?new sE(e,i):n==="array-contains-any"?new oE(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new tE(e,i):new nE(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Bc(n,this.value)):n!==null&&Ko(this.value)===Ko(n)&&this.matchesComparison(Bc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},xi=class t extends hg{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return $N(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function $N(t){return t.op==="and"}function HN(t){return gW(t)&&$N(t)}function gW(t){for(let e of t.filters)if(e instanceof xi)return!1;return!0}function Zw(t){if(t instanceof Ct)return t.field.canonicalString()+t.op.toString()+jc(t.value);if(HN(t))return t.filters.map(e=>Zw(e)).join(",");{let e=t.filters.map(n=>Zw(n)).join(",");return`${t.op}(${e})`}}function GN(t,e){return t instanceof Ct?function(i,r){return r instanceof Ct&&i.op===r.op&&i.field.isEqual(r.field)&&lr(i.value,r.value)}(t,e):t instanceof xi?function(i,r){return r instanceof xi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&GN(o,r.filters[a]),!0):!1}(t,e):void ue()}function zN(t){return t instanceof Ct?function(n){return`${n.field.canonicalString()} ${n.op} ${jc(n.value)}`}(t):t instanceof xi?function(n){return n.op.toString()+" {"+n.getFilters().map(zN).join(" ,")+"}"}(t):"Filter"}var eE=class extends Ct{constructor(e,n,i){super(e,n,i),this.key=se.fromName(i.referenceValue)}matches(e){let n=se.comparator(e.key,this.key);return this.matchesComparison(n)}},tE=class extends Ct{constructor(e,n){super(e,"in",n),this.keys=qN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},nE=class extends Ct{constructor(e,n){super(e,"not-in",n),this.keys=qN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function qN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>se.fromName(i.referenceValue))}var iE=class extends Ct{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Db(n)&&ad(n.arrayValue,this.value)}},rE=class extends Ct{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&ad(this.value.arrayValue,n)}},sE=class extends Ct{constructor(e,n){super(e,"not-in",n)}matches(e){if(ad(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!ad(this.value.arrayValue,n)}},oE=class extends Ct{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Db(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>ad(this.value.arrayValue,i))}};var aE=class{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function pN(t,e=null,n=[],i=[],r=null,s=null,o=null){return new aE(t,e,n,i,r,s,o)}function Sb(t){let e=he(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Zw(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Ug(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>jc(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>jc(i)).join(",")),e.ue=n}return e.ue}function Ab(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!pW(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!GN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fN(t.startAt,e.startAt)&&fN(t.endAt,e.endAt)}function cE(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var ks=class{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function mW(t,e,n,i,r,s,o,a){return new ks(t,e,n,i,r,s,o,a)}function $g(t){return new ks(t)}function gN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function WN(t){return t.collectionGroup!==null}function nd(t){let e=he(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ln(Yn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Qo(s,i))}),n.has(Yn.keyField().canonicalString())||e.ce.push(new Qo(Yn.keyField(),i))}return e.ce}function or(t){let e=he(t);return e.le||(e.le=_W(e,nd(t))),e.le}function _W(t,e){if(t.limitType==="F")return pN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new Qo(r.field,s)});let n=t.endAt?new Uc(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Uc(t.startAt.position,t.startAt.inclusive):null;return pN(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function lE(t,e){let n=t.filters.concat([e]);return new ks(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function uE(t,e,n){return new ks(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hg(t,e){return Ab(or(t),or(e))&&t.limitType===e.limitType}function KN(t){return`${Sb(or(t))}|lt:${t.limitType}`}function xc(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>zN(r)).join(", ")}]`),Ug(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>jc(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>jc(r)).join(",")),`Target(${i})`}(or(t))}; limitType=${t.limitType})`}function Gg(t,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):se.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(let s of nd(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,c){let u=hN(o,a,c);return o.inclusive?u<=0:u<0}(i.startAt,nd(i),r)||i.endAt&&!function(o,a,c){let u=hN(o,a,c);return o.inclusive?u>=0:u>0}(i.endAt,nd(i),r))}(t,e)}function yW(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function QN(t){return(e,n)=>{let i=!1;for(let r of nd(t)){let s=vW(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function vW(t,e,n){let i=t.field.isKeyField()?se.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?Bc(c,u):ue()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ue()}}var Fs=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Zo(this.inner,(n,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return BN(this.inner)}size(){return this.innerSize}};var wW=new ft(se.comparator);function $r(){return wW}var YN=new ft(se.comparator);function ed(...t){let e=YN;for(let n of t)e=e.insert(n.key,n);return e}function JN(t){let e=YN;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Ho(){return id()}function XN(){return id()}function id(){return new Fs(t=>t.toString(),(t,e)=>t.isEqual(e))}var EW=new ft(se.comparator),bW=new ln(se.comparator);function Ie(...t){let e=bW;for(let n of t)e=e.add(n);return e}var IW=new ln(Le);function CW(){return IW}function ZN(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sd(e)?"-0":e}}function eO(t){return{integerValue:""+t}}function TW(t,e){return lW(e)?eO(e):ZN(t,e)}var $c=class{constructor(){this._=void 0}};function DW(t,e,n){return t instanceof Hc?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Cb(s)&&(s=Tb(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Ls?nO(t,e):t instanceof Vs?iO(t,e):function(r,s){let o=tO(r,s),a=mN(o)+mN(r.Pe);return Xw(o)&&Xw(r.Pe)?eO(a):ZN(r.serializer,a)}(t,e)}function SW(t,e,n){return t instanceof Ls?nO(t,e):t instanceof Vs?iO(t,e):n}function tO(t,e){return t instanceof Gc?function(i){return Xw(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var Hc=class extends $c{},Ls=class extends $c{constructor(e){super(),this.elements=e}};function nO(t,e){let n=rO(e);for(let i of t.elements)n.some(r=>lr(r,i))||n.push(i);return{arrayValue:{values:n}}}var Vs=class extends $c{constructor(e){super(),this.elements=e}};function iO(t,e){let n=rO(e);for(let i of t.elements)n=n.filter(r=>!lr(r,i));return{arrayValue:{values:n}}}var Gc=class extends $c{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function mN(t){return ht(t.integerValue||t.doubleValue)}function rO(t){return Db(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var fg=class{constructor(e,n){this.field=e,this.transform=n}};function AW(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Ls&&r instanceof Ls||i instanceof Vs&&r instanceof Vs?Vc(i.elements,r.elements,lr):i instanceof Gc&&r instanceof Gc?lr(i.Pe,r.Pe):i instanceof Hc&&r instanceof Hc}(t.transform,e.transform)}var dE=class{constructor(e,n){this.version=e,this.transformResults=n}},Br=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function sg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var zc=class{};function sO(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new cd(t.key,Br.none()):new Yo(t.key,t.data,Br.none());{let n=t.data,i=Qn.empty(),r=new ln(Yn.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new ur(t.key,i,new hi(r.toArray()),Br.none())}}function RW(t,e,n){t instanceof Yo?function(r,s,o){let a=r.value.clone(),c=yN(r.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ur?function(r,s,o){if(!sg(r.precondition,s))return void s.convertToUnknownDocument(o.version);let a=yN(r.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(oO(r)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function rd(t,e,n,i){return t instanceof Yo?function(s,o,a,c){if(!sg(s.precondition,o))return a;let u=s.value.clone(),d=vN(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,i):t instanceof ur?function(s,o,a,c){if(!sg(s.precondition,o))return a;let u=vN(s.fieldTransforms,c,o),d=o.data;return d.setAll(oO(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,i):function(s,o,a){return sg(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function MW(t,e){let n=null;for(let i of t.fieldTransforms){let r=e.data.field(i.field),s=tO(i.transform,r||null);s!=null&&(n===null&&(n=Qn.empty()),n.set(i.field,s))}return n||null}function _N(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Vc(i,r,(s,o)=>AW(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Yo=class extends zc{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},ur=class extends zc{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function oO(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}}),e}function yN(t,e,n){let i=new Map;Qe(t.length===n.length);for(let r=0;r<n.length;r++){let s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,SW(o,a,n[r]))}return i}function vN(t,e,n){let i=new Map;for(let r of t){let s=r.transform,o=n.data.field(r.field);i.set(r.field,DW(s,o,e))}return i}var cd=class extends zc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},hE=class extends zc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var fE=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&RW(s,e,i[r])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=rd(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=rd(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=XN();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;let c=sO(o,a);c!==null&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(fe.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ie())}isEqual(e){return this.batchId===e.batchId&&Vc(this.mutations,e.mutations,(n,i)=>_N(n,i))&&Vc(this.baseMutations,e.baseMutations,(n,i)=>_N(n,i))}},pE=class t{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Qe(e.mutations.length===i.length);let r=function(){return EW}(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new t(e,n,i,r)}};var gE=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var mE=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var bt,xe;function xW(t){switch(t){default:return ue();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0}}function aO(t){if(t===void 0)return jr("GRPC error has no .code"),O.UNKNOWN;switch(t){case bt.OK:return O.OK;case bt.CANCELLED:return O.CANCELLED;case bt.UNKNOWN:return O.UNKNOWN;case bt.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case bt.INTERNAL:return O.INTERNAL;case bt.UNAVAILABLE:return O.UNAVAILABLE;case bt.UNAUTHENTICATED:return O.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case bt.NOT_FOUND:return O.NOT_FOUND;case bt.ALREADY_EXISTS:return O.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return O.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case bt.ABORTED:return O.ABORTED;case bt.OUT_OF_RANGE:return O.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return O.UNIMPLEMENTED;case bt.DATA_LOSS:return O.DATA_LOSS;default:return ue()}}(xe=bt||(bt={}))[xe.OK=0]="OK",xe[xe.CANCELLED=1]="CANCELLED",xe[xe.UNKNOWN=2]="UNKNOWN",xe[xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xe[xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xe[xe.NOT_FOUND=5]="NOT_FOUND",xe[xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",xe[xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",xe[xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",xe[xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xe[xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xe[xe.ABORTED=10]="ABORTED",xe[xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",xe[xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",xe[xe.INTERNAL=13]="INTERNAL",xe[xe.UNAVAILABLE=14]="UNAVAILABLE",xe[xe.DATA_LOSS=15]="DATA_LOSS";var wN=null;function NW(){return new TextEncoder}var OW=new Ns([4294967295,4294967295],0);function EN(t){let e=NW().encode(t),n=new Mw;return n.update(e),new Uint8Array(n.digest())}function bN(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ns([n,i],0),new Ns([r,s],0)]}var _E=class t{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Go(`Invalid padding: ${n}`);if(i<0)throw new Go(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Go(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Go(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ns.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Ns.fromNumber(i)));return r.compare(OW)===1&&(r=new Ns([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=EN(e),[i,r]=bN(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,n,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=EN(e),[i,r]=bN(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}},Go=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var pg=class t{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){let r=new Map;return r.set(e,ld.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t(fe.min(),r,new ft(Le),$r(),Ie())}},ld=class t{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new t(i,n,Ie(),Ie(),Ie())}};var kc=class{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}},gg=class{constructor(e,n){this.targetId=e,this.me=n}},mg=class{constructor(e,n,i=Dn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}},_g=class{constructor(){this.fe=0,this.ge=CN(),this.pe=Dn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Ie(),n=Ie(),i=Ie();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ue()}}),new ld(this.pe,this.ye,e,n,i)}ve(){this.we=!1,this.ge=CN()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Qe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},yE=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=$r(),this.qe=IN(),this.Qe=new ft(Le)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:ue()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){let n=e.targetId,i=e.me.count,r=this.Je(n);if(r){let s=r.target;if(cE(s))if(i===0){let o=new se(s.path);this.Ue(n,o,Mi.newNoDocument(o,fe.min()))}else Qe(i===1);else{let o=this.Ye(n);if(o!==i){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}wN?.et(function(d,f,g,m,v){var D,C,x,k,P,F;let Z={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},W=f.unchangedNames;return W&&(Z.bloomFilter={applied:v===0,hashCount:(D=W?.hashCount)!==null&&D!==void 0?D:0,bitmapLength:(k=(x=(C=W?.bits)===null||C===void 0?void 0:C.bitmap)===null||x===void 0?void 0:x.length)!==null&&k!==void 0?k:0,padding:(F=(P=W?.bits)===null||P===void 0?void 0:P.padding)!==null&&F!==void 0?F:0,mightContain:b=>{var y;return(y=m?.mightContain(b))!==null&&y!==void 0&&y}}),Z}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n,o,a;try{o=Ps(i).toUint8Array()}catch(c){if(c instanceof ug)return Lc("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new _E(o,r,s)}catch(c){return Lc(c instanceof Go?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){let i=this.Le.getRemoteKeysForTarget(n),r=0;return i.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),r++)}),r}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&cE(a.target)){let c=new se(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Mi.newNoDocument(c,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let i=Ie();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let r=new pg(e,n,this.Qe,this.ke,i);return this.ke=$r(),this.qe=IN(),this.Qe=new ft(Le),r}$e(e,n){if(!this.ze(e))return;let i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new _g,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ln(Le),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new _g),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function IN(){return new ft(se.comparator)}function CN(){return new ft(se.comparator)}var PW={asc:"ASCENDING",desc:"DESCENDING"},kW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FW={and:"AND",or:"OR"},vE=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function wE(t,e){return t.useProto3Json||Ug(e)?e:{value:e}}function yg(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cO(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function LW(t,e){return yg(t,e.toTimestamp())}function ar(t){return Qe(!!t),fe.fromTimestamp(function(n){let i=Ur(n);return new Ot(i.seconds,i.nanos)}(t))}function Rb(t,e){return EE(t,e).canonicalString()}function EE(t,e){let n=function(r){return new ot(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function lO(t){let e=ot.fromString(t);return Qe(pO(e)),e}function bE(t,e){return Rb(t.databaseId,e.path)}function Lw(t,e){let n=lO(e);if(n.get(1)!==t.databaseId.projectId)throw new K(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(dO(n))}function uO(t,e){return Rb(t.databaseId,e)}function VW(t){let e=lO(t);return e.length===4?ot.emptyPath():dO(e)}function IE(t){return new ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function dO(t){return Qe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function TN(t,e,n){return{name:bE(t,e),fields:n.value.mapValue.fields}}function BW(t,e){let n;if("targetChange"in e){e.targetChange;let i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Qe(d===void 0||typeof d=="string"),Dn.fromBase64String(d||"")):(Qe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Dn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){let d=u.code===void 0?O.UNKNOWN:aO(u.code);return new K(d,u.message||"")}(o);n=new mg(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=Lw(t,i.document.name),s=ar(i.document.updateTime),o=i.document.createTime?ar(i.document.createTime):fe.min(),a=new Qn({mapValue:{fields:i.document.fields}}),c=Mi.newFoundDocument(r,s,o,a),u=i.targetIds||[],d=i.removedTargetIds||[];n=new kc(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=Lw(t,i.document),s=i.readTime?ar(i.readTime):fe.min(),o=Mi.newNoDocument(r,s),a=i.removedTargetIds||[];n=new kc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=Lw(t,i.document),s=i.removedTargetIds||[];n=new kc([],s,r,null)}else{if(!("filter"in e))return ue();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new mE(r,s),a=i.targetId;n=new gg(a,o)}}return n}function jW(t,e){let n;if(e instanceof Yo)n={update:TN(t,e.key,e.value)};else if(e instanceof cd)n={delete:bE(t,e.key)};else if(e instanceof ur)n={update:TN(t,e.key,e.data),updateMask:QW(e.fieldMask)};else{if(!(e instanceof hE))return ue();n={verify:bE(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){let a=o.transform;if(a instanceof Hc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ls)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Vs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Gc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ue()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:LW(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ue()}(t,e.precondition)),n}function UW(t,e){return t&&t.length>0?(Qe(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?ar(r.updateTime):ar(s);return o.isEqual(fe.min())&&(o=ar(s)),new dE(o,r.transformResults||[])}(n,e))):[]}function $W(t,e){return{documents:[uO(t,e.path)]}}function HW(t,e){let n={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=uO(t,r);let s=function(u){if(u.length!==0)return fO(xi.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(d=>function(g){return{field:Nc(g.field),direction:qW(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=wE(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:r}}function GW(t){let e=VW(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){Qe(i===1);let d=n.from[0];d.allDescendants?r=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){let g=hO(f);return g instanceof xi&&HN(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(g=>function(v){return new Qo(Oc(v.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,Ug(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(f){let g=!!f.before,m=f.values||[];return new Uc(m,g)}(n.startAt));let u=null;return n.endAt&&(u=function(f){let g=!f.before,m=f.values||[];return new Uc(m,g)}(n.endAt)),mW(e,r,o,s,a,"F",c,u)}function zW(t,e){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function hO(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=Oc(n.unaryFilter.field);return Ct.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=Oc(n.unaryFilter.field);return Ct.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Oc(n.unaryFilter.field);return Ct.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Oc(n.unaryFilter.field);return Ct.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ue()}}(t):t.fieldFilter!==void 0?function(n){return Ct.create(Oc(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ue()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return xi.create(n.compositeFilter.filters.map(i=>hO(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ue()}}(n.compositeFilter.op))}(t):ue()}function qW(t){return PW[t]}function WW(t){return kW[t]}function KW(t){return FW[t]}function Nc(t){return{fieldPath:t.canonicalString()}}function Oc(t){return Yn.fromServerFormat(t.fieldPath)}function fO(t){return t instanceof Ct?function(n){if(n.op==="=="){if(dN(n.value))return{unaryFilter:{field:Nc(n.field),op:"IS_NAN"}};if(uN(n.value))return{unaryFilter:{field:Nc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(dN(n.value))return{unaryFilter:{field:Nc(n.field),op:"IS_NOT_NAN"}};if(uN(n.value))return{unaryFilter:{field:Nc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nc(n.field),op:WW(n.op),value:n.value}}}(t):t instanceof xi?function(n){let i=n.getFilters().map(r=>fO(r));return i.length===1?i[0]:{compositeFilter:{op:KW(n.op),filters:i}}}(t):ue()}function QW(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function pO(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var ud=class t{constructor(e,n,i,r,s=fe.min(),o=fe.min(),a=Dn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var CE=class{constructor(e){this.ct=e}};function YW(t){let e=GW({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?uE(e,e.limit,"L"):e}var vg=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(ht(e.integerValue));else if("doubleValue"in e){let i=ht(e.doubleValue);isNaN(i)?this.Et(n,13):(this.Et(n,15),sd(i)?n.dt(0):n.dt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Et(n,20),typeof i=="string"&&(i=Ur(i)),n.At(`${i.seconds||""}`),n.dt(i.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Ps(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.Et(n,45),n.dt(i.latitude||0),n.dt(i.longitude||0)}else"mapValue"in e?jN(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):ue()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let i=e.fields||{};this.Et(n,55);for(let r of Object.keys(i))this.Rt(r,n),this.It(i[r],n)}wt(e,n){let i=e.values||[];this.Et(n,50);for(let r of i)this.It(r,n)}gt(e,n){this.Et(n,37),se.fromName(e).path.forEach(i=>{this.Et(n,60),this.St(i,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};vg.bt=new vg;var TE=class{constructor(){this._n=new DE}addToCollectionParentIndex(e,n){return this._n.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Wo.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Wo.min())}updateCollectionGroup(e,n,i){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}},DE=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new ln(ot.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new ln(ot.comparator)).toArray()}};var rge=new Uint8Array(0);var ir=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};ir.DEFAULT_COLLECTION_PERCENTILE=10,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ir.DEFAULT=new ir(41943040,ir.DEFAULT_COLLECTION_PERCENTILE,ir.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ir.DISABLED=new ir(-1,0,0);var dd=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var SE=class{constructor(){this.changes=new Fs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Mi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?L.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var AE=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var RE=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&rd(i.mutation,r,hi.empty(),Ot.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Ie()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Ie()){let r=Ho();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=ed();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let i=Ho();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Ie()))}populateOverlays(e,n,i){let r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=$r(),o=id(),a=function(){return id()}();return n.forEach((c,u)=>{let d=i.get(u.key);r.has(u.key)&&(d===void 0||d.mutation instanceof ur)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),rd(d.mutation,u,d.mutation.getFieldMask(),Ot.now())):o.set(u.key,hi.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var f;return a.set(u,new AE(d,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){let i=id(),r=new ft((o,a)=>o-a),s=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let d=i.get(c)||hi.empty();d=a.applyToLocalView(u,d),i.set(c,d);let f=(r.get(a.batchId)||Ie()).add(c);r=r.insert(a.batchId,f)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,f=XN();d.forEach(g=>{if(!s.has(g)){let m=sO(n.get(g),i.get(g));m!==null&&f.set(g,m),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return L.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):WN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):L.resolve(Ho()),a=-1,c=s;return o.next(u=>L.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?L.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,Ie())).next(d=>({batchId:a,changes:JN(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(i=>{let r=ed();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let s=n.collectionGroup,o=ed();return this.indexManager.getCollectionParents(e,s).next(a=>L.forEach(a,c=>{let u=function(f,g){return new ks(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,i,r).next(d=>{d.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((c,u)=>{let d=u.getKey();o.get(d)===null&&(o=o.insert(d,Mi.newInvalidDocument(d)))});let a=ed();return o.forEach((c,u)=>{let d=s.get(c);d!==void 0&&rd(d.mutation,u,hi.empty(),Ot.now()),Gg(n,u)&&(a=a.insert(c,u))}),a})}};var ME=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return L.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:ar(r.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(r){return{name:r.name,query:YW(r.bundledQuery),readTime:ar(r.readTime)}}(n)),L.resolve()}};var xE=class{constructor(){this.overlays=new ft(se.comparator),this.hr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){let i=Ho();return L.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),L.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.hr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(i)),L.resolve()}getOverlaysForCollection(e,n,i){let r=Ho(),s=n.length+1,o=new se(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return L.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new ft((u,d)=>u-d),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>i){let d=s.get(u.largestBatchId);d===null&&(d=Ho(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=Ho(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=r)););return L.resolve(a)}ht(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new gE(n,i));let s=this.hr.get(n);s===void 0&&(s=Ie(),this.hr.set(n,s)),this.hr.set(n,s.add(i.key))}};var hd=class{constructor(){this.Pr=new ln(It.Ir),this.Tr=new ln(It.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let i=new It(e,n);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Ar(new It(e,n))}Rr(e,n){e.forEach(i=>this.removeReference(i,n))}Vr(e){let n=new se(new ot([])),i=new It(n,e),r=new It(n,e+1),s=[];return this.Tr.forEachInRange([i,r],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new se(new ot([])),i=new It(n,e),r=new It(n,e+1),s=Ie();return this.Tr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new It(e,0),i=this.Pr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},It=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return se.comparator(e.key,n.key)||Le(e.pr,n.pr)}static Er(e,n){return Le(e.pr,n.pr)||se.comparator(e.key,n.key)}};var NE=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new ln(It.Ir)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new fE(s,n,i,r);this.mutationQueue.push(o);for(let a of r)this.wr=this.wr.add(new It(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.br(i),s=r<0?0:r;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new It(n,0),r=new It(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([i,r],o=>{let a=this.Sr(o.pr);s.push(a)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new ln(Le);return n.forEach(r=>{let s=new It(r,0),o=new It(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{i=i.add(a.pr)})}),L.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,s=i;se.isDocumentKey(s)||(s=s.child(""));let o=new It(new se(s),0),a=new ln(Le);return this.wr.forEachWhile(c=>{let u=c.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(a=a.add(c.pr)),!0)},o),L.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(i=>{let r=this.Sr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Qe(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return L.forEach(n.mutations,r=>{let s=new It(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=i})}Mn(e){}containsKey(e,n){let i=new It(n,0),r=this.wr.firstAfterOrEqual(i);return L.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var OE=class{constructor(e){this.vr=e,this.docs=function(){return new ft(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.vr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return L.resolve(i?i.document.mutableCopy():Mi.newInvalidDocument(n))}getEntries(e,n){let i=$r();return n.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Mi.newInvalidDocument(r))}),L.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=$r(),o=n.path,a=new se(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||oW(sW(d),i)<=0||(r.has(d.key)||Gg(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,n,i,r){ue()}Fr(e,n){return L.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new PE(this)}getSize(e){return L.resolve(this.size)}},PE=class extends SE{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.ar.addEntry(e,r)):this.ar.removeEntry(i)}),L.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var kE=class{constructor(e){this.persistence=e,this.Mr=new Fs(n=>Sb(n),Ab),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.Or=0,this.Nr=new hd,this.targetCount=0,this.Lr=dd.Nn()}forEachTarget(e,n){return this.Mr.forEach((i,r)=>n(r)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Or&&(this.Or=n),L.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new dd(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.qn(n),L.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,i){let r=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),L.waitFor(s).next(()=>r)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){let i=this.Mr.get(n)||null;return L.resolve(i)}addMatchingKeys(e,n,i){return this.Nr.dr(n,i),L.resolve()}removeMatchingKeys(e,n,i){this.Nr.Rr(n,i);let r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),L.resolve()}getMatchingKeysForTargetId(e,n){let i=this.Nr.gr(n);return L.resolve(i)}containsKey(e,n){return L.resolve(this.Nr.containsKey(n))}};var FE=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new VN(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new kE(this),this.indexManager=new TE,this.remoteDocumentCache=function(r){return new OE(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new CE(n),this.$r=new ME(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new xE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Br[e.toKey()];return i||(i=new NE(n,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,i){X("MemoryPersistence","Starting transaction:",e);let r=new LE(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(e,n){return L.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,n)))}},LE=class extends Qw{constructor(e){super(),this.currentSequenceNumber=e}},VE=class t{constructor(e){this.persistence=e,this.zr=new hd,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw ue()}addReference(e,n,i){return this.zr.addReference(i,n),this.Jr.delete(i.toString()),L.resolve()}removeReference(e,n,i){return this.zr.removeReference(i,n),this.Jr.add(i.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),L.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(r=>this.Jr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Jr,i=>{let r=se.fromPath(i);return this.Yr(e,r).next(s=>{s||n.removeEntry(r,fe.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(i=>{i?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return L.or([()=>L.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var BE=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.qi=i,this.Qi=r}static Ki(e,n){let i=Ie(),r=Ie();for(let s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new t(e,n.fromCache,i,r)}};var jE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var UE=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return yD()?8:cW(mD())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,i,r){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new jE;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,i,r){return i.documentReadCount<this.Wi?(Zu()<=Bn.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",xc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),L.resolve()):(Zu()<=Bn.DEBUG&&X("QueryEngine","Query:",xc(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(Zu()<=Bn.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",xc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,or(n))):L.resolve())}ji(e,n){if(gN(n))return L.resolve(null);let i=or(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=uE(n,null,"F"),i=or(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=Ie(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{let u=this.Zi(n,a);return this.Xi(n,u,o,c.readTime)?this.ji(e,uE(n,null,"F")):this.es(e,u,n,c)}))})))}Hi(e,n,i,r){return gN(n)||r.isEqual(fe.min())?L.resolve(null):this.zi.getDocuments(e,i).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,i,r)?L.resolve(null):(Zu()<=Bn.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),xc(n)),this.es(e,o,n,rW(r,-1)).next(a=>a))})}Zi(e,n){let i=new ln(QN(e));return n.forEach((r,s)=>{Gg(e,s)&&(i=i.add(s))}),i}Xi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(e,n,i){return Zu()<=Bn.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",xc(n)),this.zi.getDocumentsMatchingQuery(e,n,Wo.min(),i)}es(e,n,i,r){return this.zi.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var $E=class{constructor(e,n,i,r){this.persistence=e,this.ts=n,this.serializer=r,this.ns=new ft(Le),this.rs=new Fs(s=>Sb(s),Ab),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RE(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function JW(t,e,n,i){return new $E(t,e,n,i)}function gO(t,e){return R(this,null,function*(){let n=he(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n._s(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],a=[],c=Ie();for(let u of r){o.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of s){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(i,c).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})})}function XW(t,e){let n=he(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){let f=u.batch,g=f.keys(),m=L.resolve();return g.forEach(v=>{m=m.next(()=>d.getEntry(c,v)).next(D=>{let C=u.docVersions.get(v);Qe(C!==null),D.version.compareTo(C)<0&&(f.applyToRemoteDocument(D,u),D.isValidDocument()&&(D.setReadTime(u.commitVersion),d.addEntry(D)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=Ie();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function mO(t){let e=he(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function ZW(t,e){let n=he(t),i=e.snapshotVersion,r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;let a=[];e.targetChanges.forEach((d,f)=>{let g=r.get(f);if(!g)return;a.push(n.Qr.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,d.addedDocuments,f)));let m=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(Dn.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,i)),r=r.insert(f,m),function(D,C,x){return D.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,m,d)&&a.push(n.Qr.updateTargetData(s,m))});let c=$r(),u=Ie();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(e6(s,o,e.documentUpdates).next(d=>{c=d.cs,u=d.ls})),!i.isEqual(fe.min())){let d=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(d)}return L.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.ns=r,s))}function e6(t,e,n){let i=Ie(),r=Ie();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=$r();return n.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(fe.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):X("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:o,ls:r}})}function t6(t,e){let n=he(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function n6(t,e){let n=he(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Qr.getTargetData(i,e).next(s=>s?(r=s,L.resolve(r)):n.Qr.allocateTargetId(i).next(o=>(r=new ud(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(i.targetId,i),n.rs.set(e,i.targetId)),i})}function HE(t,e,n){return R(this,null,function*(){let i=he(t),r=i.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!_d(o))throw o;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)})}function DN(t,e,n){let i=he(t),r=fe.min(),s=Ie();return i.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){let f=he(c),g=f.rs.get(d);return g!==void 0?L.resolve(f.ns.get(g)):f.Qr.getTargetData(u,d)}(i,o,or(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>i.ts.getDocumentsMatchingQuery(o,e,n?r:fe.min(),n?s:Ie())).next(a=>(i6(i,yW(e),a),{documents:a,hs:s})))}function i6(t,e,n){let i=t.ss.get(e)||fe.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.ss.set(e,i)}var wg=class{constructor(){this.activeTargetIds=CW()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var GE=class{constructor(){this.no=new wg,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,i){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new wg,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var zE=class{io(e){}shutdown(){}};var Eg=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ig=null;function Vw(){return ig===null?ig=function(){return 268435456+Math.round(2147483648*Math.random())}():ig++,"0x"+ig.toString(16)}var r6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var qE=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var cn="WebChannelConnection",WE=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+n.host,this.So=`projects/${r}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Do(){return!1}Co(n,i,r,s,o){let a=Vw(),c=this.vo(n,i.toUriEncodedString());X("RestConnection",`Sending RPC '${n}' ${a}:`,c,r);let u={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(u,s,o),this.Mo(n,c,u,r).then(d=>(X("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Lc("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",c,"request:",r),d})}xo(n,i,r,s,o,a){return this.Co(n,i,r,s,o)}Fo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Qc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}vo(n,i){let r=r6[n];return`${this.wo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,i,r){let s=Vw();return new Promise((o,a)=>{let c=new xw;c.setWithCredentials(!0),c.listenOnce(Ow.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Xu.NO_ERROR:let d=c.getResponseJson();X(cn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Xu.TIMEOUT:X(cn,`RPC '${e}' ${s} timed out`),a(new K(O.DEADLINE_EXCEEDED,"Request time out"));break;case Xu.HTTP_ERROR:let f=c.getStatus();if(X(cn,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let m=g?.error;if(m&&m.status&&m.message){let v=function(C){let x=C.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(x)>=0?x:O.UNKNOWN}(m.status);a(new K(v,m.message))}else a(new K(O.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new K(O.UNAVAILABLE,"Connection failed."));break;default:ue()}}finally{X(cn,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(r);X(cn,`RPC '${e}' ${s} sending request:`,r),c.send(n,"POST",u,i,15)})}Oo(e,n,i){let r=Vw(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Fw(),a=kw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new Nw({})),this.Fo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;let d=s.join("");X(cn,`Creating RPC '${e}' stream ${r}: ${d}`,c);let f=o.createWebChannel(d,c),g=!1,m=!1,v=new qE({lo:C=>{m?X(cn,`Not sending because RPC '${e}' stream ${r} is closed:`,C):(g||(X(cn,`Opening RPC '${e}' stream ${r} transport.`),f.open(),g=!0),X(cn,`RPC '${e}' stream ${r} sending:`,C),f.send(C))},ho:()=>f.close()}),D=(C,x,k)=>{C.listen(x,P=>{try{k(P)}catch(F){setTimeout(()=>{throw F},0)}})};return D(f,Mc.EventType.OPEN,()=>{m||(X(cn,`RPC '${e}' stream ${r} transport opened.`),v.mo())}),D(f,Mc.EventType.CLOSE,()=>{m||(m=!0,X(cn,`RPC '${e}' stream ${r} transport closed`),v.po())}),D(f,Mc.EventType.ERROR,C=>{m||(m=!0,Lc(cn,`RPC '${e}' stream ${r} transport errored:`,C),v.po(new K(O.UNAVAILABLE,"The operation could not be completed")))}),D(f,Mc.EventType.MESSAGE,C=>{var x;if(!m){let k=C.data[0];Qe(!!k);let P=k,F=P.error||((x=P[0])===null||x===void 0?void 0:x.error);if(F){X(cn,`RPC '${e}' stream ${r} received error:`,F);let Z=F.status,W=function(w){let I=bt[w];if(I!==void 0)return aO(I)}(Z),b=F.message;W===void 0&&(W=O.INTERNAL,b="Unknown error status: "+Z+" with message "+F.message),m=!0,v.po(new K(W,b)),f.close()}else X(cn,`RPC '${e}' stream ${r} received:`,k),v.yo(k)}}),D(a,Pw.STAT_EVENT,C=>{C.stat===tg.PROXY?X(cn,`RPC '${e}' stream ${r} detected buffering proxy`):C.stat===tg.NOPROXY&&X(cn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{v.fo()},0),v}};function Bw(){return typeof document<"u"?document:null}function zg(t){return new vE(t,!0)}var bg=class{constructor(e,n,i=1e3,r=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=i,this.Lo=r,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),r=Math.max(0,n-i);r>0&&X("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Ig=class{constructor(e,n,i,r,s,o,a,c){this.oi=e,this.Go=i,this.zo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new bg(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return R(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return R(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return R(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===O.RESOURCE_EXHAUSTED?(jr(n.toString()),jr("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.jo===n&&this.u_(i,r)},i=>{e(()=>{let r=new K(O.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(r)})})}u_(e,n){let i=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{i(()=>this.c_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(()=>R(this,null,function*(){this.state=0,this.start()}))}c_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},KE=class extends Ig{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=BW(this.serializer,e),i=function(s){if(!("targetChange"in s))return fe.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?fe.min():o.readTime?ar(o.readTime):fe.min()}(e);return this.listener.h_(n,i)}P_(e){let n={};n.database=IE(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=cE(c)?{documents:$W(s,c)}:{query:HW(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=cO(s,o.resumeToken);let u=wE(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(fe.min())>0){a.readTime=yg(s,o.snapshotVersion.toTimestamp());let u=wE(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let i=zW(this.serializer,e);i&&(n.labels=i),this.i_(n)}I_(e){let n={};n.database=IE(this.serializer),n.removeTarget=e,this.i_(n)}},QE=class extends Ig{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=UW(e.writeResults,e.commitTime),i=ar(e.commitTime);return this.listener.A_(i,n)}return Qe(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=IE(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(i=>jW(this.serializer,i))};this.i_(n)}};var YE=class extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new K(O.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,EE(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(O.UNKNOWN,s.toString())})}xo(e,n,i,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,EE(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(O.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},JE=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(jr(n),this.y_=!1):X("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var XE=class{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{i.enqueueAndForget(()=>R(this,null,function*(){ea(this)&&(X("RemoteStore","Restarting streams for network reachability change."),yield function(c){return R(this,null,function*(){let u=he(c);u.M_.add(4),yield yd(u),u.N_.set("Unknown"),u.M_.delete(4),yield qg(u)})}(this))}))}),this.N_=new JE(i,r)}};function qg(t){return R(this,null,function*(){if(ea(t))for(let e of t.x_)yield e(!0)})}function yd(t){return R(this,null,function*(){for(let e of t.x_)yield e(!1)})}function _O(t,e){let n=he(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),Ob(n)?Nb(n):Yc(n).Xo()&&xb(n,e))}function Mb(t,e){let n=he(t),i=Yc(n);n.F_.delete(e),i.Xo()&&yO(n,e),n.F_.size===0&&(i.Xo()?i.n_():ea(n)&&n.N_.set("Unknown"))}function xb(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Yc(t).P_(e)}function yO(t,e){t.L_.xe(e),Yc(t).I_(e)}function Nb(t){t.L_=new yE({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Yc(t).start(),t.N_.w_()}function Ob(t){return ea(t)&&!Yc(t).Zo()&&t.F_.size>0}function ea(t){return he(t).M_.size===0}function vO(t){t.L_=void 0}function s6(t){return R(this,null,function*(){t.N_.set("Online")})}function o6(t){return R(this,null,function*(){t.F_.forEach((e,n)=>{xb(t,e)})})}function a6(t,e){return R(this,null,function*(){vO(t),Ob(t)?(t.N_.D_(e),Nb(t)):t.N_.set("Unknown")})}function c6(t,e,n){return R(this,null,function*(){if(t.N_.set("Online"),e instanceof mg&&e.state===2&&e.cause)try{yield function(r,s){return R(this,null,function*(){let o=s.cause;for(let a of s.targetIds)r.F_.has(a)&&(yield r.remoteSyncer.rejectListen(a,o),r.F_.delete(a),r.L_.removeTarget(a))})}(t,e)}catch(i){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Cg(t,i)}else if(e instanceof kc?t.L_.Ke(e):e instanceof gg?t.L_.He(e):t.L_.We(e),!n.isEqual(fe.min()))try{let i=yield mO(t.localStore);n.compareTo(i)>=0&&(yield function(s,o){let a=s.L_.rt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.F_.get(u);d&&s.F_.set(u,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let d=s.F_.get(c);if(!d)return;s.F_.set(c,d.withResumeToken(Dn.EMPTY_BYTE_STRING,d.snapshotVersion)),yO(s,c);let f=new ud(d.target,c,u,d.sequenceNumber);xb(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(i){X("RemoteStore","Failed to raise snapshot:",i),yield Cg(t,i)}})}function Cg(t,e,n){return R(this,null,function*(){if(!_d(e))throw e;t.M_.add(1),yield yd(t),t.N_.set("Offline"),n||(n=()=>mO(t.localStore)),t.asyncQueue.enqueueRetryable(()=>R(this,null,function*(){X("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield qg(t)}))})}function wO(t,e){return e().catch(n=>Cg(t,n,e))}function Wg(t){return R(this,null,function*(){let e=he(t),n=Bs(e),i=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;l6(e);)try{let r=yield t6(e.localStore,i);if(r===null){e.v_.length===0&&n.n_();break}i=r.batchId,u6(e,r)}catch(r){yield Cg(e,r)}EO(e)&&bO(e)})}function l6(t){return ea(t)&&t.v_.length<10}function u6(t,e){t.v_.push(e);let n=Bs(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function EO(t){return ea(t)&&!Bs(t).Zo()&&t.v_.length>0}function bO(t){Bs(t).start()}function d6(t){return R(this,null,function*(){Bs(t).V_()})}function h6(t){return R(this,null,function*(){let e=Bs(t);for(let n of t.v_)e.d_(n.mutations)})}function f6(t,e,n){return R(this,null,function*(){let i=t.v_.shift(),r=pE.from(i,e,n);yield wO(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield Wg(t)})}function p6(t,e){return R(this,null,function*(){e&&Bs(t).E_&&(yield function(i,r){return R(this,null,function*(){if(function(o){return xW(o)&&o!==O.ABORTED}(r.code)){let s=i.v_.shift();Bs(i).t_(),yield wO(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield Wg(i)}})}(t,e)),EO(t)&&bO(t)})}function SN(t,e){return R(this,null,function*(){let n=he(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");let i=ea(n);n.M_.add(3),yield yd(n),i&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield qg(n)})}function g6(t,e){return R(this,null,function*(){let n=he(t);e?(n.M_.delete(2),yield qg(n)):e||(n.M_.add(2),yield yd(n),n.N_.set("Unknown"))})}function Yc(t){return t.B_||(t.B_=function(n,i,r){let s=he(n);return s.f_(),new KE(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Po:s6.bind(null,t),To:o6.bind(null,t),Ao:a6.bind(null,t),h_:c6.bind(null,t)}),t.x_.push(e=>R(this,null,function*(){e?(t.B_.t_(),Ob(t)?Nb(t):t.N_.set("Unknown")):(yield t.B_.stop(),vO(t))}))),t.B_}function Bs(t){return t.k_||(t.k_=function(n,i,r){let s=he(n);return s.f_(),new QE(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:d6.bind(null,t),Ao:p6.bind(null,t),R_:h6.bind(null,t),A_:f6.bind(null,t)}),t.x_.push(e=>R(this,null,function*(){e?(t.k_.t_(),yield Wg(t)):(yield t.k_.stop(),t.v_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var ZE=class t{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){let o=Date.now()+i,a=new t(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Pb(t,e){if(jr("AsyncQueue",`${e}: ${t}`),_d(t))return new K(O.UNAVAILABLE,`${e}: ${t}`);throw t}var Tg=class t{constructor(e){this.comparator=e?(n,i)=>e(n,i)||se.comparator(n.key,i.key):(n,i)=>se.comparator(n.key,i.key),this.keyedMap=ed(),this.sortedSet=new ft(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}};var Dg=class{constructor(){this.q_=new ft(se.comparator)}track(e){let n=e.doc.key,i=this.q_.get(n);i?e.type!==0&&i.type===3?this.q_=this.q_.insert(n,e):e.type===3&&i.type!==1?this.q_=this.q_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.q_=this.q_.remove(n):e.type===1&&i.type===2?this.q_=this.q_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):ue():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,i)=>{e.push(i)}),e}},qc=class t{constructor(e,n,i,r,s,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,i,r,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Tg.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var eb=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},tb=class{constructor(){this.queries=new Fs(e=>KN(e),Hg),this.onlineState="Unknown",this.z_=new Set}};function IO(t,e){return R(this,null,function*(){let n=he(t),i=3,r=e.query,s=n.queries.get(r);s?!s.W_()&&e.G_()&&(i=2):(s=new eb,i=e.G_()?0:1);try{switch(i){case 0:s.K_=yield n.onListen(r,!0);break;case 1:s.K_=yield n.onListen(r,!1);break;case 2:yield n.onFirstRemoteStoreListen(r)}}catch(o){let a=Pb(o,`Initialization of query '${xc(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&kb(n)})}function CO(t,e){return R(this,null,function*(){let n=he(t),i=e.query,r=3,s=n.queries.get(i);if(s){let o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?r=e.G_()?0:1:!s.W_()&&e.G_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function m6(t,e){let n=he(t),i=!1;for(let r of e){let s=r.query,o=n.queries.get(s);if(o){for(let a of o.U_)a.H_(r)&&(i=!0);o.K_=r}}i&&kb(n)}function _6(t,e,n){let i=he(t),r=i.queries.get(e);if(r)for(let s of r.U_)s.onError(n);i.queries.delete(e)}function kb(t){t.z_.forEach(e=>{e.next()})}var nb,AN;(AN=nb||(nb={})).J_="default",AN.Cache="cache";var Sg=class{constructor(e,n,i){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new qc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let i=n!=="Offline";return(!this.options.ra||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=qc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==nb.Cache}};var Ag=class{constructor(e){this.key=e}},Rg=class{constructor(e){this.key=e}},ib=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Ie(),this.mutatedKeys=Ie(),this.Ia=QN(e),this.Ta=new Tg(this.Ia)}get Ea(){return this.la}da(e,n){let i=n?n.Aa:new Dg,r=n?n.Ta:this.Ta,s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((d,f)=>{let g=r.get(d),m=Gg(this.query,f)?f:null,v=!!g&&this.mutatedKeys.has(g.key),D=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),C=!1;g&&m?g.data.isEqual(m.data)?v!==D&&(i.track({type:3,doc:m}),C=!0):this.Ra(g,m)||(i.track({type:2,doc:m}),C=!0,(c&&this.Ia(m,c)>0||u&&this.Ia(m,u)<0)&&(a=!0)):!g&&m?(i.track({type:0,doc:m}),C=!0):g&&!m&&(i.track({type:1,doc:g}),C=!0,(c||u)&&(a=!0)),C&&(m?(o=o.add(m),s=D?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{Ta:o,Aa:i,Xi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){let s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let o=e.Aa.Q_();o.sort((d,f)=>function(m,v){let D=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue()}};return D(m)-D(v)}(d.type,f.type)||this.Ia(d.doc,f.doc)),this.Va(i),r=r!=null&&r;let a=n&&!r?this.ma():[],c=this.Pa.size===0&&this.current&&!r?1:0,u=c!==this.ha;return this.ha=c,o.length!==0||u?{snapshot:new qc(this.query,e.Ta,s,o,e.mutatedKeys,c===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Dg,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=Ie(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});let n=[];return e.forEach(i=>{this.Pa.has(i)||n.push(new Rg(i))}),this.Pa.forEach(i=>{e.has(i)||n.push(new Ag(i))}),n}pa(e){this.la=e.hs,this.Pa=Ie();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return qc.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},rb=class{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}},sb=class{constructor(e){this.key=e,this.wa=!1}},ob=class{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Fs(a=>KN(a),Hg),this.Da=new Map,this.Ca=new Set,this.va=new ft(se.comparator),this.Fa=new Map,this.Ma=new hd,this.xa={},this.Oa=new Map,this.Na=dd.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function y6(t,e,n=!0){return R(this,null,function*(){let i=MO(t),r,s=i.ba.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ya()):r=yield TO(i,e,n,!0),r})}function v6(t,e){return R(this,null,function*(){let n=MO(t);yield TO(n,e,!0,!1)})}function TO(t,e,n,i){return R(this,null,function*(){let r=yield n6(t.localStore,or(e)),s=r.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return i&&(a=yield w6(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&_O(t.remoteStore,r),a})}function w6(t,e,n,i,r){return R(this,null,function*(){t.Ba=(f,g,m)=>function(D,C,x,k){return R(this,null,function*(){let P=C.view.da(x);P.Xi&&(P=yield DN(D.localStore,C.query,!1).then(({documents:b})=>C.view.da(b,P)));let F=k&&k.targetChanges.get(C.targetId),Z=k&&k.targetMismatches.get(C.targetId)!=null,W=C.view.applyChanges(P,D.isPrimaryClient,F,Z);return MN(D,C.targetId,W.fa),W.snapshot})}(t,f,g,m);let s=yield DN(t.localStore,e,!0),o=new ib(e,s.hs),a=o.da(s.documents),c=ld.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,c);MN(t,n,u.fa);let d=new rb(e,n,o);return t.ba.set(e,d),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),u.snapshot})}function E6(t,e,n){return R(this,null,function*(){let i=he(t),r=i.ba.get(e),s=i.Da.get(r.targetId);if(s.length>1)return i.Da.set(r.targetId,s.filter(o=>!Hg(o,e))),void i.ba.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield HE(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Mb(i.remoteStore,r.targetId),ab(i,r.targetId)}).catch(md))):(ab(i,r.targetId),yield HE(i.localStore,r.targetId,!0))})}function b6(t,e){return R(this,null,function*(){let n=he(t),i=n.ba.get(e),r=n.Da.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Mb(n.remoteStore,i.targetId))})}function I6(t,e,n){return R(this,null,function*(){let i=M6(t);try{let r=yield function(o,a){let c=he(o),u=Ot.now(),d=a.reduce((m,v)=>m.add(v.key),Ie()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=$r(),D=Ie();return c.os.getEntries(m,d).next(C=>{v=C,v.forEach((x,k)=>{k.isValidDocument()||(D=D.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,v)).next(C=>{f=C;let x=[];for(let k of a){let P=MW(k,f.get(k.key).overlayedDocument);P!=null&&x.push(new ur(k.key,P,UN(P.value.mapValue),Br.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,x,a)}).next(C=>{g=C;let x=C.applyToLocalDocumentSet(f,D);return c.documentOverlayCache.saveOverlays(m,C.batchId,x)})}).then(()=>({batchId:g.batchId,changes:JN(f)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,c){let u=o.xa[o.currentUser.toKey()];u||(u=new ft(Le)),u=u.insert(a,c),o.xa[o.currentUser.toKey()]=u}(i,r.batchId,n),yield vd(i,r.changes),yield Wg(i.remoteStore)}catch(r){let s=Pb(r,"Failed to persist write");n.reject(s)}})}function DO(t,e){return R(this,null,function*(){let n=he(t);try{let i=yield ZW(n.localStore,e);e.targetChanges.forEach((r,s)=>{let o=n.Fa.get(s);o&&(Qe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.wa=!0:r.modifiedDocuments.size>0?Qe(o.wa):r.removedDocuments.size>0&&(Qe(o.wa),o.wa=!1))}),yield vd(n,i,e)}catch(i){yield md(i)}})}function RN(t,e,n){let i=he(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.ba.forEach((s,o)=>{let a=o.view.j_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){let c=he(o);c.onlineState=a;let u=!1;c.queries.forEach((d,f)=>{for(let g of f.U_)g.j_(a)&&(u=!0)}),u&&kb(c)}(i.eventManager,e),r.length&&i.Sa.h_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function C6(t,e,n){return R(this,null,function*(){let i=he(t);i.sharedClientState.updateQueryState(e,"rejected",n);let r=i.Fa.get(e),s=r&&r.key;if(s){let o=new ft(se.comparator);o=o.insert(s,Mi.newNoDocument(s,fe.min()));let a=Ie().add(s),c=new pg(fe.min(),new Map,new ft(Le),o,a);yield DO(i,c),i.va=i.va.remove(s),i.Fa.delete(e),Fb(i)}else yield HE(i.localStore,e,!1).then(()=>ab(i,e,n)).catch(md)})}function T6(t,e){return R(this,null,function*(){let n=he(t),i=e.batch.batchId;try{let r=yield XW(n.localStore,e);AO(n,i,null),SO(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield vd(n,r)}catch(r){yield md(r)}})}function D6(t,e,n){return R(this,null,function*(){let i=he(t);try{let r=yield function(o,a){let c=he(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(Qe(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(i.localStore,e);AO(i,e,n),SO(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield vd(i,r)}catch(r){yield md(r)}})}function SO(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function AO(t,e,n){let i=he(t),r=i.xa[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.xa[i.currentUser.toKey()]=r}}function ab(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let i of t.Da.get(e))t.ba.delete(i),n&&t.Sa.ka(i,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(i=>{t.Ma.containsKey(i)||RO(t,i)})}function RO(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(Mb(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),Fb(t))}function MN(t,e,n){for(let i of n)i instanceof Ag?(t.Ma.addReference(i.key,e),S6(t,i)):i instanceof Rg?(X("SyncEngine","Document no longer in limbo: "+i.key),t.Ma.removeReference(i.key,e),t.Ma.containsKey(i.key)||RO(t,i.key)):ue()}function S6(t,e){let n=e.key,i=n.path.canonicalString();t.va.get(n)||t.Ca.has(i)||(X("SyncEngine","New document in limbo: "+n),t.Ca.add(i),Fb(t))}function Fb(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new se(ot.fromString(e)),i=t.Na.next();t.Fa.set(i,new sb(n)),t.va=t.va.insert(n,i),_O(t.remoteStore,new ud(or($g(n.path)),i,"TargetPurposeLimboResolution",VN.oe))}}function vd(t,e,n){return R(this,null,function*(){let i=he(t),r=[],s=[],o=[];i.ba.isEmpty()||(i.ba.forEach((a,c)=>{o.push(i.Ba(c,e,n).then(u=>{var d;if((u||n)&&i.isPrimaryClient){let f=u?!u.fromCache:(d=n?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;i.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){r.push(u);let f=BE.Ki(c.targetId,u);s.push(f)}}))}),yield Promise.all(o),i.Sa.h_(r),yield function(c,u){return R(this,null,function*(){let d=he(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>L.forEach(u,g=>L.forEach(g.qi,m=>d.persistence.referenceDelegate.addReference(f,g.targetId,m)).next(()=>L.forEach(g.Qi,m=>d.persistence.referenceDelegate.removeReference(f,g.targetId,m)))))}catch(f){if(!_d(f))throw f;X("LocalStore","Failed to update sequence numbers: "+f)}for(let f of u){let g=f.targetId;if(!f.fromCache){let m=d.ns.get(g),v=m.snapshotVersion,D=m.withLastLimboFreeSnapshotVersion(v);d.ns=d.ns.insert(g,D)}}})}(i.localStore,s))})}function A6(t,e){return R(this,null,function*(){let n=he(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());let i=yield gO(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(c=>{c.reject(new K(O.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield vd(n,i.us)}})}function R6(t,e){let n=he(t),i=n.Fa.get(e);if(i&&i.wa)return Ie().add(i.key);{let r=Ie(),s=n.Da.get(e);if(!s)return r;for(let o of s){let a=n.ba.get(o);r=r.unionWith(a.view.Ea)}return r}}function MO(t){let e=he(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=DO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=C6.bind(null,e),e.Sa.h_=m6.bind(null,e.eventManager),e.Sa.ka=_6.bind(null,e.eventManager),e}function M6(t){let e=he(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=T6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=D6.bind(null,e),e}var Mg=class{constructor(){this.synchronizeTabs=!1}initialize(e){return R(this,null,function*(){this.serializer=zg(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return JW(this.persistence,new UE,e.initialUser,this.serializer)}createPersistence(e){return new FE(VE.Hr,this.serializer)}createSharedClientState(e){return new GE}terminate(){return R(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var cb=class{initialize(e,n){return R(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>RN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=A6.bind(null,this.syncEngine),yield g6(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new tb}()}createDatastore(e){let n=zg(e.databaseInfo.databaseId),i=function(s){return new WE(s)}(e.databaseInfo);return function(s,o,a,c){return new YE(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new XE(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>RN(this.syncEngine,n,0),function(){return Eg.D()?new Eg:new zE}())}createSyncEngine(e,n){return function(r,s,o,a,c,u,d){let f=new ob(r,s,o,a,c,u);return d&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return R(this,null,function*(){var e;yield function(i){return R(this,null,function*(){let r=he(i);X("RemoteStore","RemoteStore shutting down."),r.M_.add(5),yield yd(r),r.O_.shutdown(),r.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var xg=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):jr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var lb=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=qt.UNAUTHENTICATED,this.clientId=ag.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>R(this,null,function*(){X("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(X("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new K(O.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>R(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=Pb(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function jw(t,e){return R(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(r=>R(this,null,function*(){i.isEqual(r)||(yield gO(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function xN(t,e){return R(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield N6(t);X("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>SN(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>SN(e.remoteStore,r)),t._onlineComponents=e})}function x6(t){return t.name==="FirebaseError"?t.code===O.FAILED_PRECONDITION||t.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function N6(t){return R(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{yield jw(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!x6(n))throw n;Lc("Error using user provided cache. Falling back to memory cache: "+n),yield jw(t,new Mg)}}else X("FirestoreClient","Using default OfflineComponentProvider"),yield jw(t,new Mg);return t._offlineComponents})}function xO(t){return R(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),yield xN(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),yield xN(t,new cb))),t._onlineComponents})}function O6(t){return xO(t).then(e=>e.syncEngine)}function ub(t){return R(this,null,function*(){let e=yield xO(t),n=e.eventManager;return n.onListen=y6.bind(null,e.syncEngine),n.onUnlisten=E6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=v6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=b6.bind(null,e.syncEngine),n})}function P6(t,e,n={}){let i=new rr;return t.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return function(s,o,a,c,u){let d=new xg({next:g=>{o.enqueueAndForget(()=>CO(s,f));let m=g.docs.has(a);!m&&g.fromCache?u.reject(new K(O.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&c&&c.source==="server"?u.reject(new K(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),f=new Sg($g(a.path),d,{includeMetadataChanges:!0,ra:!0});return IO(s,f)}(yield ub(t),t.asyncQueue,e,n,i)})),i.promise}function NO(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var NN=new Map;function OO(t,e,n){if(!n)throw new K(O.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function k6(t,e,n,i){if(e===!0&&i===!0)throw new K(O.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ON(t){if(!se.isDocumentKey(t))throw new K(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function PN(t){if(se.isDocumentKey(t))throw new K(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Kg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue()}function cr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Kg(t);throw new K(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Ng=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new K(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}k6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NO((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K(O.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Wc=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ng({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new K(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new K(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ng(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Uw;switch(i.type){case"firstParty":return new zw(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new K(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=NN.get(n);i&&(X("ComponentProvider","Removing Datastore"),NN.delete(n),i.terminate())}(this),Promise.resolve()}};function PO(t,e,n,i={}){var r;let s=(t=cr(t,Wc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Lc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,c;if(typeof i.mockUserToken=="string")a=i.mockUserToken,c=qt.MOCK_USER;else{a=Ta(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);let u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new K(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new qt(u)}t._authCredentials=new $w(new og(a,c))}}var Jo=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Tn=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Os=class t extends Jo{constructor(e,n,i){super(e,n,$g(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Tn(this.firestore,null,new se(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function kO(t,e,...n){if(t=Be(t),OO("collection","path",e),t instanceof Wc){let i=ot.fromString(e,...n);return PN(i),new Os(t,null,i)}{if(!(t instanceof Tn||t instanceof Os))throw new K(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(ot.fromString(e,...n));return PN(i),new Os(t.firestore,null,i)}}function Lb(t,e,...n){if(t=Be(t),arguments.length===1&&(e=ag.newId()),OO("doc","path",e),t instanceof Wc){let i=ot.fromString(e,...n);return ON(i),new Tn(t,null,new se(i))}{if(!(t instanceof Tn||t instanceof Os))throw new K(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(ot.fromString(e,...n));return ON(i),new Tn(t.firestore,t instanceof Os?t.converter:null,new se(i))}}var db=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new bg(this,"async_queue_retry"),this.hu=()=>{let n=Bw();n&&X("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=Bw();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=Bw();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new rr;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return R(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!_d(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(i=>{this.au=i,this.uu=!1;let r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw jr("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.uu=!1,i))));return this.iu=n,n}enqueueAfterDelay(e,n,i){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let r=ZE.createAndSchedule(this,e,n,i,s=>this.Eu(s));return this._u.push(r),r}Pu(){this.au&&ue()}verifyOperationInProgress(){}du(){return R(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function kN(t){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Hr=class extends Wc{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new db}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||LO(this),this._firestoreClient.terminate()}};function FO(t,e){let n=typeof t=="object"?t:Ft(),i=typeof t=="string"?t:e||"(default)",r=Dt(n,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=ns("firestore");s&&PO(r,...s)}return r}function Vb(t){return t._firestoreClient||LO(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function LO(t){var e,n,i;let r=t._freezeSettings(),s=function(a,c,u,d){return new Yw(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,NO(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new lb(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var fd=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Dn.fromBase64String(e))}catch(n){throw new K(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Kc=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Xo=class{constructor(e){this._methodName=e}};var pd=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}};var F6=/^__.*__$/,hb=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ur(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yo(e,this.data,n,this.fieldTransforms)}},Og=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ur(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function VO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue()}}var Pg=class t{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.wu(e),r}Su(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Fg(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(VO(this.fu)&&F6.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},fb=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||zg(e)}Fu(e,n,i,r=!1){return new Pg({fu:e,methodName:n,vu:i,path:Yn.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Bb(t){let e=t._freezeSettings(),n=zg(t._databaseId);return new fb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function L6(t,e,n,i,r,s={}){let o=t.Fu(s.merge||s.mergeFields?2:0,e,n,r);jb("Data must be an object, but it was:",o,i);let a=jO(i,o),c,u;if(s.merge)c=new hi(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let g=mb(e,f,n);if(!o.contains(g))throw new K(O.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);$O(d,g)||d.push(g)}c=new hi(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new hb(new Qn(a),c,u)}var kg=class t extends Xo{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function BO(t,e,n){return new Pg({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var pb=class t extends Xo{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=BO(this,e,!0),i=this.Mu.map(s=>ta(s,n)),r=new Ls(i);return new fg(e.path,r)}isEqual(e){return e instanceof t&&Vl(this.Mu,e.Mu)}},gb=class t extends Xo{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=BO(this,e,!0),i=this.Mu.map(s=>ta(s,n)),r=new Vs(i);return new fg(e.path,r)}isEqual(e){return e instanceof t&&Vl(this.Mu,e.Mu)}};function V6(t,e,n,i){let r=t.Fu(1,e,n);jb("Data must be an object, but it was:",r,i);let s=[],o=Qn.empty();Zo(i,(c,u)=>{let d=Ub(e,c,n);u=Be(u);let f=r.Su(d);if(u instanceof kg)s.push(d);else{let g=ta(u,f);g!=null&&(s.push(d),o.set(d,g))}});let a=new hi(s);return new Og(o,a,r.fieldTransforms)}function B6(t,e,n,i,r,s){let o=t.Fu(1,e,n),a=[mb(e,i,n)],c=[r];if(s.length%2!=0)throw new K(O.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(mb(e,s[g])),c.push(s[g+1]);let u=[],d=Qn.empty();for(let g=a.length-1;g>=0;--g)if(!$O(u,a[g])){let m=a[g],v=c[g];v=Be(v);let D=o.Su(m);if(v instanceof kg)u.push(m);else{let C=ta(v,D);C!=null&&(u.push(m),d.set(m,C))}}let f=new hi(u);return new Og(d,f,o.fieldTransforms)}function j6(t,e,n,i=!1){return ta(n,t.Fu(i?4:3,e))}function ta(t,e){if(UO(t=Be(t)))return jb("Unsupported field value:",e,t),jO(t,e);if(t instanceof Xo)return function(i,r){if(!VO(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let a of i){let c=ta(a,r.bu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=Be(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return TW(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=Ot.fromDate(i);return{timestampValue:yg(r.serializer,s)}}if(i instanceof Ot){let s=new Ot(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:yg(r.serializer,s)}}if(i instanceof pd)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof fd)return{bytesValue:cO(r.serializer,i._byteString)};if(i instanceof Tn){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Rb(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${Kg(i)}`)}(t,e)}function jO(t,e){let n={};return BN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zo(t,(i,r)=>{let s=ta(r,e.pu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function UO(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ot||t instanceof pd||t instanceof fd||t instanceof Tn||t instanceof Xo)}function jb(t,e,n){if(!UO(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=Kg(n);throw i==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+i)}}function mb(t,e,n){if((e=Be(e))instanceof Kc)return e._internalPath;if(typeof e=="string")return Ub(t,e);throw Fg("Field path arguments must be of type string or ",t,!1,void 0,n)}var U6=new RegExp("[~\\*/\\[\\]]");function Ub(t,e,n){if(e.search(U6)>=0)throw Fg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Kc(...e.split("."))._internalPath}catch{throw Fg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Fg(t,e,n,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new K(O.INVALID_ARGUMENT,a+t+c)}function $O(t,e){return t.some(n=>n.isEqual(e))}var Lg=class{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new _b(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field($b("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},_b=class extends Lg{data(){return super.data()}};function $b(t,e){return typeof e=="string"?Ub(t,e):e instanceof Kc?e._internalPath:e._delegate._internalPath}function $6(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var gd=class{},Vg=class extends gd{};function HO(t,e,...n){let i=[];e instanceof gd&&i.push(e),i=i.concat(n),function(s){let o=s.filter(c=>c instanceof vb).length,a=s.filter(c=>c instanceof yb).length;if(o>1||o>0&&a>0)throw new K(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)t=r._apply(t);return t}var yb=class t extends Vg{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=this._parse(e);return zO(e._query,n),new Jo(e.firestore,e.converter,lE(e._query,n))}_parse(e){let n=Bb(e.firestore);return function(s,o,a,c,u,d,f){let g;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new K(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){LN(f,d);let m=[];for(let v of f)m.push(FN(c,s,v));g={arrayValue:{values:m}}}else g=FN(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||LN(f,d),g=j6(a,o,f,d==="in"||d==="not-in");return Ct.create(u,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};var vb=class t extends gd{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:xi.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let o=r,a=s.getFlattenedFilters();for(let c of a)zO(o,c),o=lE(o,c)}(e._query,n),new Jo(e.firestore,e.converter,lE(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var wb=class t extends Vg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(r,s,o){if(r.startAt!==null)throw new K(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new K(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qo(s,o)}(e._query,this._field,this._direction);return new Jo(e.firestore,e.converter,function(r,s){let o=r.explicitOrderBy.concat([s]);return new ks(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}};function GO(t,e="asc"){let n=e,i=$b("orderBy",t);return wb._create(i,n)}function FN(t,e,n){if(typeof(n=Be(n))=="string"){if(n==="")throw new K(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!WN(e)&&n.indexOf("/")!==-1)throw new K(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=e.path.child(ot.fromString(n));if(!se.isDocumentKey(i))throw new K(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return lN(t,new se(i))}if(n instanceof Tn)return lN(t,n._key);throw new K(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kg(n)}.`)}function LN(t,e){if(!Array.isArray(t)||t.length===0)throw new K(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zO(t,e){let n=function(r,s){for(let o of r)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Eb=class{convertValue(e,n="none"){switch(Ko(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ue()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let i={};return Zo(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertGeoPoint(e){return new pd(ht(e.latitude),ht(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":let i=Tb(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(od(e));default:return null}}convertTimestamp(e){let n=Ur(e);return new Ot(n.seconds,n.nanos)}convertDocumentKey(e,n){let i=ot.fromString(e);Qe(pO(i));let r=new dg(i.get(1),i.get(3)),s=new se(i.popFirst(5));return r.isEqual(n)||jr(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function H6(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}var zo=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Bg=class extends Lg{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Fc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field($b("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},Fc=class extends Bg{data(e={}){return super.data(e)}},bb=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new zo(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Fc(this._firestore,this._userDataWriter,i.key,i,new zo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{let c=new Fc(r._firestore,r._userDataWriter,a.doc.key,a.doc,new zo(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Fc(r._firestore,r._userDataWriter,a.doc.key,a.doc,new zo(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:G6(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function G6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue()}}function qO(t){t=cr(t,Tn);let e=cr(t.firestore,Hr);return P6(Vb(e),t._key).then(n=>YO(e,t,n))}var jg=class extends Eb{constructor(e){super(),this.firestore=e}convertBytes(e){return new fd(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,n)}};function WO(t,e,n,...i){t=cr(t,Tn);let r=cr(t.firestore,Hr),s=Bb(r),o;return o=typeof(e=Be(e))=="string"||e instanceof Kc?B6(s,"updateDoc",t._key,e,n,i):V6(s,"updateDoc",t._key,e),Gb(r,[o.toMutation(t._key,Br.exists(!0))])}function KO(t){return Gb(cr(t.firestore,Hr),[new cd(t._key,Br.none())])}function QO(t,e){let n=cr(t.firestore,Hr),i=Lb(t),r=H6(t.converter,e);return Gb(n,[L6(Bb(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Br.exists(!1))]).then(()=>i)}function Hb(t,...e){var n,i,r;t=Be(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||kN(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(kN(e[o])){let f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(i=f.error)===null||i===void 0?void 0:i.bind(f),e[o+2]=(r=f.complete)===null||r===void 0?void 0:r.bind(f)}let c,u,d;if(t instanceof Tn)u=cr(t.firestore,Hr),d=$g(t._key.path),c={next:f=>{e[o]&&e[o](YO(u,t,f))},error:e[o+1],complete:e[o+2]};else{let f=cr(t,Jo);u=cr(f.firestore,Hr),d=f._query;let g=new jg(u);c={next:m=>{e[o]&&e[o](new bb(u,g,f,m))},error:e[o+1],complete:e[o+2]},$6(t._query)}return function(g,m,v,D){let C=new xg(D),x=new Sg(m,C,v);return g.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return IO(yield ub(g),x)})),()=>{C.$a(),g.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return CO(yield ub(g),x)}))}}(Vb(u),d,a,c)}function Gb(t,e){return function(i,r){let s=new rr;return i.asyncQueue.enqueueAndForget(()=>R(this,null,function*(){return I6(yield O6(i),r,s)})),s.promise}(Vb(t),e)}function YO(t,e,n){let i=n.docs.get(e._key),r=new jg(t);return new Bg(t,r,e._key,i,new zo(n.hasPendingWrites,n.fromCache),e.converter)}function JO(...t){return new pb("arrayUnion",t)}function XO(...t){return new gb("arrayRemove",t)}(function(e,n=!0){(function(r){Qc=r})(is),ut(new lt("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new Hr(new Hw(i.getProvider("auth-internal")),new Ww(i.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new K(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dg(u.options.projectId,d)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),oe(oN,"4.6.4",e),oe(oN,"4.6.4","esm2017")})();var Qg=function(){return Qg=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Qg.apply(this,arguments)};var W6={includeMetadataChanges:!1};function ZO(t,e){return e===void 0&&(e=W6),new Q(function(n){var i=Hb(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:i}})}function eP(t,e){var n;e===void 0&&(e={});var i=t.data(e);return!t.exists()||typeof i!="object"||i===null||!e.idField?i:Qg(Qg({},i),(n={},n[e.idField]=t.id,n))}function tP(t){return ZO(t,{includeMetadataChanges:!0}).pipe(J(function(e){return e.docs}))}function nP(t,e){return e===void 0&&(e={}),tP(t).pipe(J(function(n){return n.map(function(i){return eP(i,e)})}))}var Gr=class{constructor(e){return e}},iP="firestore",zb=class{constructor(){return tn(iP)}};var qb=new j("angularfire2.firestore-instances");function K6(t,e){let n=an(iP,t,e);return n&&new Gr(n)}function Q6(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Gr(i)}}var Y6={provide:zb,deps:[[new _e,qb]]},J6={provide:Gr,useFactory:K6,deps:[[new _e,qb],_t]};function rP(t,...e){return oe("angularfire",dt.full,"fst"),Ze([J6,Y6,{provide:qb,useFactory:Q6(t),multi:!0,deps:[te,Re,wt,Mt,[new _e,Si],[new _e,In],...e]}])}var wd=be(nP,!0);var Yg=be(QO,!0);var sP=be(XO,!0),oP=be(JO,!0);var na=be(kO,!0);var aP=be(KO,!0);var Jc=be(Lb,!0);var cP=be(qO,!0);var lP=be(FO,!0);var uP=be(GO,!0);var dP=be(HO,!0);var Jg=be(WO,!0);var X6=new Map,Z6={activated:!1,tokenObservers:[]},e8={initialized:!1,enabled:!1};function Ni(t){return X6.get(t)||Object.assign({},Z6)}function _P(){return e8}var t8="https://content-firebaseappcheck.googleapis.com/v1";var n8="exchangeDebugToken",fP={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Lme=24*60*60*1e3;var Kb=class{constructor(e,n,i,r,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return R(this,null,function*(){this.stop();try{this.pending=new Ca,this.pending.promise.catch(n=>{}),yield i8(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Ca,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function i8(t){return new Promise(e=>{setTimeout(e,t)})}var r8={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},js=new ji("appCheck","AppCheck",r8);function yP(t){if(!Ni(t).activated)throw js.create("use-before-activation",{appName:t.name})}function vP(i,r){return R(this,arguments,function*({url:t,body:e},n){let s={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){let m=yield o.getHeartbeatsHeader();m&&(s["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:s},c;try{c=yield fetch(t,a)}catch(m){throw js.create("fetch-network-error",{originalErrorMessage:m?.message})}if(c.status!==200)throw js.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(m){throw js.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=u.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw js.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:u.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function wP(t,e){let{projectId:n,appId:i,apiKey:r}=t.options;return{url:`${t8}/projects/${n}/apps/${i}:${n8}?key=${r}`,body:{debug_token:e}}}var s8="firebase-app-check-database",o8=1,Qb="firebase-app-check-store";var Xg=null;function a8(){return Xg||(Xg=new Promise((t,e)=>{try{let n=indexedDB.open(s8,o8);n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{var r;e(js.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(Qb,{keyPath:"compositeKey"})}}}catch(n){e(js.create("storage-open",{originalErrorMessage:n?.message}))}}),Xg)}function c8(t,e){return l8(u8(t),e)}function l8(t,e){return R(this,null,function*(){let i=(yield a8()).transaction(Qb,"readwrite"),s=i.objectStore(Qb).put({compositeKey:t,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},i.onerror=c=>{var u;a(js.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function u8(t){return`${t.options.appId}-${t.name}`}var Yb=new $i("@firebase/app-check");function Wb(t,e){return yi()?c8(t,e).catch(n=>{Yb.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function EP(){return _P().enabled}function bP(){return R(this,null,function*(){let t=_P();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var d8={error:"UNKNOWN_ERROR"};function h8(t){return uh.encodeString(JSON.stringify(t),!1)}function Jb(t,e=!1){return R(this,null,function*(){let n=t.app;yP(n);let i=Ni(n),r=i.token,s;if(r&&!Ed(r)&&(i.token=void 0,r=void 0),!r){let c=yield i.cachedTokenPromise;c&&(Ed(c)?r=c:yield Wb(n,void 0))}if(!e&&r&&Ed(r))return{token:r.token};let o=!1;if(EP()){i.exchangeTokenPromise||(i.exchangeTokenPromise=vP(wP(n,yield bP()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);let c=yield i.exchangeTokenPromise;return yield Wb(n,c),i.token=c,{token:c.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),r=yield Ni(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Yb.warn(c.message):Yb.error(c),s=c}let a;return r?s?Ed(r)?a={token:r.token,internalError:s}:a=gP(s):(a={token:r.token},i.token=r,yield Wb(n,r)):a=gP(s),o&&m8(n,a),a})}function f8(t){return R(this,null,function*(){let e=t.app;yP(e);let{provider:n}=Ni(e);if(EP()){let i=yield bP(),{token:r}=yield vP(wP(e,i),t.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield n.getToken();return{token:i}}})}function p8(t,e,n,i){let{app:r}=t,s=Ni(r),o={next:n,error:i,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Ed(s.token)){let a=s.token;Promise.resolve().then(()=>{n({token:a.token}),pP(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>pP(t))}function IP(t,e){let n=Ni(t),i=n.tokenObservers.filter(r=>r.next!==e);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function pP(t){let{app:e}=t,n=Ni(e),i=n.tokenRefresher;i||(i=g8(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function g8(t){let{app:e}=t;return new Kb(()=>R(this,null,function*(){let n=Ni(e),i;if(n.token?i=yield Jb(t,!0):i=yield Jb(t),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=Ni(e);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},fP.RETRIAL_MIN_WAIT,fP.RETRIAL_MAX_WAIT)}function m8(t,e){let n=Ni(t).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function Ed(t){return t.expireTimeMillis-Date.now()>0}function gP(t){return{token:h8(d8),error:t}}var Xb=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Ni(this.app);for(let n of e)IP(this.app,n.next);return Promise.resolve()}};function _8(t,e){return new Xb(t,e)}function y8(t){return{getToken:e=>Jb(t,e),getLimitedUseToken:()=>f8(t),addTokenListener:e=>p8(t,"INTERNAL",e),removeTokenListener:e=>IP(t.app,e)}}var v8="@firebase/app-check",w8="0.8.5";var E8="app-check",mP="app-check-internal";function b8(){ut(new lt(E8,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return _8(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(mP).initialize()})),ut(new lt(mP,t=>{let e=t.getProvider("app-check").getImmediate();return y8(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),oe(v8,w8)}b8();var I8=["localhost","0.0.0.0","127.0.0.1"],Qme=typeof window<"u"&&I8.includes(window.location.hostname);var T8="firebase",D8="10.12.3";Xs.registerVersion(T8,D8,"app-compat");var S8=["ngOnDestroy"],TP=(t,e,n,i={})=>new Proxy(t,{get:(r,s)=>n.runOutsideAngular(()=>{if(t[s])return i?.spy?.get&&i.spy.get(s,t[s]),t[s];if(S8.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let c=a?.[s];return typeof c=="function"?c.bind(a):c?.then?c.then(u=>n.run(()=>u)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,u)=>o.then(d=>{let f=d?.(...u);return i?.spy?.apply&&i.spy.apply(s,u,f),f})})})});var Zb=class{constructor(e){return e}},Zg=new j("angularfire2.app.options"),DP=new j("angularfire2.app.name");function SP(t,e,n){let i=typeof n=="string"&&n||"[DEFAULT]",r=typeof n=="object"&&n||{};r.name=r.name||i;let o=Xs.apps.filter(a=>a&&a.name===r.name)[0]||e.runOutsideAngular(()=>Xs.initializeApp(t,r));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){let a=!!module.hot;A8("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Zb(o)}var A8=(t,...e)=>{Lv()&&typeof console<"u"&&console[t](...e)};function AP(t,e,n,i,r){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return R8(r,o)||(CP("error",`${e} was already initialized on the ${n} Firebase App with different settings.${M8?" You may need to reload as Firebase is not HMR aware.":""}`),CP("warn",{is:r,was:o})),s;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([t,a,r]),a}}function R8(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var M8=typeof module<"u"&&!!module.hot,CP=(t,...e)=>{Lv()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var x8=new j("angularfire2.auth.use-emulator"),N8=new j("angularfire2.auth.settings"),O8=new j("angularfire2.auth.tenant-id"),P8=new j("angularfire2.auth.langugage-code"),k8=new j("angularfire2.auth.use-device-language"),F8=new j("angularfire.auth.persistence"),L8=(t,e,n,i,r,s,o,a)=>AP(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),i&&(c.tenantId=i),c.languageCode=r,s&&c.useDeviceLanguage(),o)for(let[u,d]of Object.entries(o))c.settings[u]=d;return a&&c.setPersistence(a),c},[n,i,r,s,o,a]),em=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,i,r,s,o,a,c,u,d,f,g,m){let v=new Ce,D=G(void 0).pipe(jn(o.outsideAngular),De(()=>s.runOutsideAngular(()=>import("./chunk-GKFLWC6F.js"))),J(()=>SP(n,s,i)),J(C=>L8(C,s,a,u,d,f,c,g)),Wh({bufferSize:1,refCount:!1}));if(Nr(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=G(null);else{D.pipe(Un()).subscribe();let C=D.pipe(De(P=>P.getRedirectResult().then(F=>F,()=>null)),tw,Wh({bufferSize:1,refCount:!1})),x=D.pipe(De(P=>new Q(F=>({unsubscribe:s.runOutsideAngular(()=>P.onAuthStateChanged(Z=>F.next(Z),Z=>F.error(Z),()=>F.complete()))})))),k=D.pipe(De(P=>new Q(F=>({unsubscribe:s.runOutsideAngular(()=>P.onIdTokenChanged(Z=>F.next(Z),Z=>F.error(Z),()=>F.complete()))}))));this.authState=C.pipe(Kh(x),ei(o.outsideAngular),jn(o.insideAngular)),this.user=C.pipe(Kh(k),ei(o.outsideAngular),jn(o.insideAngular)),this.idToken=this.user.pipe(De(P=>P?ke(P.getIdToken()):G(null))),this.idTokenResult=this.user.pipe(De(P=>P?ke(P.getIdTokenResult()):G(null))),this.credential=Uh(C,v,this.authState.pipe(Je(P=>!P))).pipe(J(P=>P?.user?P:null),ei(o.outsideAngular),jn(o.insideAngular))}return TP(this,D,s,{spy:{apply:(C,x,k)=>{(C.startsWith("signIn")||C.startsWith("createUser"))&&k.then(P=>v.next(P))}}})}static \u0275fac=function(i){return new(i||t)($(Zg),$(DP,8),$($t),$(te),$(wt),$(x8,8),$(N8,8),$(O8,8),$(P8,8),$(k8,8),$(F8,8),$(In,8))};static \u0275prov=q({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var tm=(()=>{let e=class e{constructor(i,r){this.afAuth=i,this.fs=r,this.userId=null,this.incomeTags=new tt([]),this.incomeTags$=this.incomeTags.asObservable(),this.expenseTags=new tt([]),this.expenseTags$=this.expenseTags.asObservable(),this.afAuth.authState.pipe(De(s=>s?(this.userId=s.uid,this.getTags()):(this.userId=null,G([])))).subscribe(s=>{this.separateTagsByType(s)})}getTagFromId(i,r){return(r==="income"?this.incomeTags.value:this.expenseTags.value).find(a=>a.id===i)||{id:"",name:"",type:r}}separateTagsByType(i){this.incomeTags.next(i.filter(r=>r.type==="income")),this.expenseTags.next(i.filter(r=>r.type==="expense"))}getTags(){if(!this.userId)return G([]);let i=na(this.fs,`tags/${this.userId}/userTags`);return wd(i,{idField:"id"})}addTag(i,r){if(!this.userId)return G("");let s={name:i,type:r};return new Q(o=>{Yg(na(this.fs,`tags/${this.userId}/userTags`),s).then(a=>{o.next(a.id),o.complete()}).catch(a=>o.error(a))})}updateTag(i,r){if(!this.userId)return G();let s=Jc(this.fs,`tags/${this.userId}/userTags/${i}`);return new Q(o=>{Jg(s,r).then(()=>{o.next(),o.complete()}).catch(a=>o.error(a))})}deleteTag(i){if(!this.userId)return G();let r=Jc(this.fs,`tags/${this.userId}/userTags/${i}`);return new Q(s=>{aP(r).then(()=>{s.next(),s.complete()}).catch(o=>s.error(o))})}addTagToTransaction(i,r,s){if(!this.userId)return G();let o=Jc(this.fs,`transactions/${this.userId}/${s}/${i}`);return new Q(a=>{Jg(o,{tagIds:oP(r)}).then(()=>{a.next(),a.complete()}).catch(c=>a.error(c))})}removeTagFromTransaction(i,r,s){if(!this.userId)return G();let o=Jc(this.fs,`transactions/${this.userId}/${s}/${i}`);return new Q(a=>{Jg(o,{tagIds:sP(r)}).then(()=>{a.next(),a.complete()}).catch(c=>a.error(c))})}getTagsForTransaction(i,r){if(!this.userId)return G([]);let s=Jc(this.fs,`transactions/${this.userId}/${r}/${i}`);return new Q(o=>{cP(s).then(a=>{if(a.exists()){let c=B({id:a.id},a.data());this.getTags().pipe(J(u=>u.filter(d=>c.tagIds.includes(d.id)))).subscribe(u=>{o.next(u),o.complete()},u=>o.error(u))}else o.next([]),o.complete()}).catch(a=>o.error(a))})}getTransactionsByTag(i,r){if(!this.userId)return G([]);let s=na(this.fs,`transactions/${this.userId}/${r}`);return wd(s,{idField:"id"}).pipe(J(o=>o.filter(a=>{let c=a.tagIds||[];return Array.isArray(c)&&c.includes(i)})))}};e.\u0275fac=function(r){return new(r||e)($(em),$(Gr))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var xP=(()=>{let e=class e{constructor(i){this.tagService=i}moneyToLineBarData(i){return i.map(r=>({tag:r.tags[0],value:[r.date,r.amount],title:r.title??""}))}dateToMilli(i){return new Date(i).getTime()}milliToDate(i){return new Date(i).toLocaleDateString("en-CA",{month:"short",day:"2-digit"}).split("T")[0]}dateToMonthDateYearDay(i,r=!0){let s={weekday:"short",year:"numeric",month:"long",day:r?"numeric":void 0};return new Date(i).toLocaleDateString("en-US",s)}groupLineBarDataByDay(i){let r={};return i.forEach(s=>{let o=new Date(s.value[0]),a=`${o.getFullYear()}-${(o.getMonth()+1).toString().padStart(2,"0")}-${o.getDate().toString().padStart(2,"0")}`;r[a]||(r[a]=[]),r[a].push({tag:s.tag,value:s.value[1],title:s.title})}),Object.entries(r).map(([s,o])=>{let a=o,[c,u,d]=s.split("-");return{value:[new Date(parseInt(c),parseInt(u)-1,parseInt(d)).getTime(),a.reduce((g,m)=>g+Number(m.value),0)],points:a}})}groupBarDataByMonth(i){let r=[];return i.forEach(s=>{let o=new Date(s[0]),a=`${o.getFullYear()}-${(o.getMonth()+1).toString().padStart(2,"0")}`;r[a]||(r[a]=0),r[a]+=s[1]}),Object.entries(r).map(([s,o])=>{let[a,c]=s.split("-");return[new Date(parseInt(a),parseInt(c)-1).getTime(),o]})}groupPointsByTags(i){return i.reduce((r,s)=>(r[s.tag]||(r[s.tag]={tag:s.tag,points:[]}),r[s.tag].points.push({title:s.title,value:s.value}),r),{})}formatTooltipBySortedPoints(i,r=!1){return Object.values(i).map(s=>{let o=this.tagService.getTagFromId(s.tag,r?"income":"expense").name,a=s.points.map(c=>`${c.title}: \u20B1${c.value}`).join("<br/>");return`<small><pr><code>${o}</code></pr></small><br/>${a}`}).join("<br/>")}};e.\u0275fac=function(r){return new(r||e)($(tm))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function B8(t,e){if(t&1&&(Tr(),U(0,"svg",10),re(1,"path",11),H()),t&2){let n=st(2);si(n.arrowIconClass)}}function j8(t,e){if(t&1){let n=Pn();U(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),we(4),H(),U(5,"p",4),we(6),U(7,"span",5),we(8),rt(9,B8,2,2,":svg:svg",6),H()()(),U(10,"div",7)(11,"button",8),qe("click",function(){jt(n);let r=st();return Ut(r.toggleChartType())}),re(12,"i"),H()()(),U(13,"div"),re(14,"div",9),H()()}if(t&2){let n=st();ce(4),Io(n.title),ce(2),En(" ",n.percentChangeMessage," "),ce(),si(n.percentChangeClass),ce(),En(" ",n.percentChange.toFixed(0),"% "),ce(),Xf(9,n.percentChange!==0?9:-1),ce(3),si(n.toggleChartTypeSymbol),ce(2),bo("height",n.height),ve("options",n.options)}}var NP=(()=>{let e=class e{constructor(i){this.utilService=i,this.data=[],this.title="",this.percentChangeMessage="Recent change:",this.isIncome=!1,this.type="line",this.height="200px",this.percentChange=0,this.isLoading=!1,this.options={tooltip:{trigger:"axis",formatter:r=>{r=r[0];let s=this.utilService.groupPointsByTags(r.data.points),o=this.utilService.dateToMonthDateYearDay(r.value[0]),a=this.utilService.formatTooltipBySortedPoints(s,this.isIncome);return`<small>${o}</small><br/>${a}<br/>${r.data.points.length>1?`<small>Total: \u20B1${r.value[1]}</small>`:""}`},axisPointer:{animation:!1}},xAxis:{type:"category",splitLine:{show:!1},axisLabel:{formatter:r=>this.utilService.milliToDate(Number(r))},show:!1},yAxis:{type:"value",splitLine:{show:!1},show:!1},series:[{name:"Mock Data",type:this.type,showSymbol:!0,data:[],itemStyle:{color:"#c23531"}}]}}ngOnInit(){this.loadData()}ngOnChanges(){this.loadData()}toggleChartType(){this.type==="line"?this.type="bar":this.type="line",this.loadData()}loadData(){this.isLoading=!0;let i=this.utilService.groupLineBarDataByDay(this.data);this.percentChange=this.calculatePercentChange(this.data),this.options=ye(B({},this.options),{series:[{data:i,type:this.type,itemStyle:{color:"#c23531"}}]}),this.isLoading=!1}get toggleChartTypeSymbol(){return this.type==="bar"?"bi bi-bar-chart-fill":"bi bi-graph-up"}calculatePercentChange(i){if(i.length<2)return 0;let r=i[0].value[1];return(i[i.length-1].value[1]-r)/r*100}get arrowIconClass(){return this.percentChange>0?"w-3 h-3 ms-1":"w-3 h-3 ms-1 rotate-180"}get percentChangeClass(){let i="";if(this.percentChange!==0){let r=this.percentChange>0;this.isIncome?i=r?"text-success":"text-danger":i=r?"text-danger":"text-success"}return`${i}`}};e.\u0275fac=function(r){return new(r||e)(Y(xP))},e.\u0275cmp=Ae({type:e,selectors:[["app-line-bar-chart"]],inputs:{data:"data",title:"title",percentChangeMessage:"percentChangeMessage",isIncome:"isIncome",type:"type",height:"height"},standalone:!0,features:[On,Me],decls:1,vars:1,consts:[[1,"bg-light","rounded-3","p-3"],[1,"d-flex","m-3"],[1,"col-6","d-flex","flex-column","justify-content-start"],[1,"fw-bold"],[1,"text-muted"],[1,"fw-semibold","text-start","ms-2"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 10 14",3,"class"],[1,"col-3","offset-2","d-flex","justify-content-end"],["type","button",1,"btn","btn-warning","p-1","col-6","offset-6","h-50",3,"click"],["echarts","",1,"demo-chart",3,"options"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 10 14"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13V1m0 0L1 5m4-4 4 4"]],template:function(r,s){r&1&&rt(0,j8,15,11,"div",0),r&2&&Xf(0,s.isLoading?-1:0)},dependencies:[nN],styles:["svg[_ngcontent-%COMP%]{width:20px;height:20px}"]});let t=e;return t})();var OP=(()=>{let e=class e{constructor(){this.title="Title",this.value=0,this.percentChange=0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-stat-card"]],inputs:{title:"title",value:"value",percentChange:"percentChange"},standalone:!0,features:[Me],decls:7,vars:3,consts:[[1,"bg-light","border","border-primary","rounded-4","p-4"],[1,"text-muted","small"],[1,"h2","fw-bold"],[1,"text-success","small","mb-0"]],template:function(r,s){r&1&&(U(0,"div",0)(1,"h3",1),we(2),H(),U(3,"p",2),we(4),H(),U(5,"p",3),we(6),H()()),r&2&&(ce(2),Io(s.title),ce(2),Io(s.value),ce(2),En("+",s.percentChange,"%"))}});let t=e;return t})();var U8=t=>({"add-tag":t});function $8(t,e){if(t&1){let n=Pn();U(0,"div",3),we(1),U(2,"i",4),qe("click",function(){jt(n);let r=st();return Ut(r.removeExistingTag())}),H()()}if(t&2){let n=st();ce(),En(" ",n.selectedTag.name," ")}}function H8(t,e){if(t&1){let n=Pn();U(0,"textarea",5),qe("keydown.enter",function(r){jt(n);let s=st();return Ut(s.onEnterKey(r))}),H()}if(t&2){let n=st();ve("formControl",n.tagForm)}}function G8(t,e){if(t&1&&(U(0,"li",10),we(1),H()),t&2){let n=st(2);ce(),En(' Add tag "',n.tagForm.value,'" ')}}function z8(t,e){if(t&1){let n=Pn();U(0,"li",11),qe("click",function(){let r=jt(n).$implicit,s=st(2);return Ut(s.addExistingTag(r))}),we(1),re(2,"i",12),H()}if(t&2){let n=e.$implicit,i=st(2);ve("ngClass",xv(2,U8,i.isOptionHighlighted(n.name))),ce(),En(" ",n.name," ")}}function q8(t,e){if(t&1&&(U(0,"div",6)(1,"ul",7),rt(2,G8,2,1,"li",8)(3,z8,3,4,"li",9),H()()),t&2){let n=st();ce(2),ve("ngIf",n.showAddTagOption()),ce(),ve("ngForOf",n.suggestions)}}var PP=(()=>{let e=class e{constructor(i){this.tagService=i,this.type="income",this.tagId=null,this.tagAdded=new Ue,this.incomeTags=[],this.expenseTags=[],this.tagForm=new _c(""),this.selectedTag=null,this.suggestions=[],this.searchDelay=0,this.tagService.incomeTags$.subscribe(r=>{this.incomeTags=r}),this.tagService.expenseTags$.subscribe(r=>{this.expenseTags=r}),this.tagForm.valueChanges.pipe(g_(this.searchDelay)).subscribe(r=>{this.filterSuggestions(r)})}ngOnInit(){this.suggestions=this.type==="income"?this.incomeTags:this.expenseTags,this.tagId!==null&&(this.removeTagFromSuggestions(this.tagId),this.selectedTag=this.tagService.getTagFromId(this.tagId,this.type))}filterSuggestions(i){if(!i)this.suggestions=this.type==="income"?this.incomeTags:this.expenseTags;else{let r=i.toLowerCase();this.suggestions=(this.type==="income"?this.incomeTags:this.expenseTags).filter(s=>s.name.toLowerCase().includes(r)).sort((s,o)=>s.name.length-o.name.length)}this.selectedTag&&this.removeTagFromSuggestions(this.selectedTag.id)}addTag(i){console.log("Adding tag:",i),this.tagService.addTag(i,this.type).subscribe(r=>{console.log("Tag added successfully"),this.tagAdded.emit(r),this.tagForm.setValue(""),this.removeTagFromSuggestions(r)},r=>{console.error("Error adding tag:",r)})}addExistingTag(i){console.log("Adding existing tag:",i.name),this.tagAdded.emit(i.id),this.tagForm.setValue(""),this.selectedTag=i,this.removeTagFromSuggestions(i.id)}removeExistingTag(){this.selectedTag&&(this.tagAdded.emit(null),this.suggestions=this.type==="income"?this.incomeTags:this.expenseTags,this.selectedTag=null)}removeTagFromSuggestions(i){this.suggestions=this.suggestions.filter(r=>r.id.toLowerCase()!==i.toLowerCase())}showAddTagOption(){return!this.suggestions.some(i=>i.name.toLowerCase()===this.tagForm.value.toLowerCase())}onEnterKey(i){if(!this.tagForm.value)return;if(i.preventDefault(),this.suggestions.find(s=>s.name.toLowerCase()===this.tagForm.value.toLowerCase())){this.addExistingTag(this.suggestions[0]);return}this.addTag(this.tagForm.value)}isOptionHighlighted(i){return i.toLowerCase()===this.tagForm.value.toLowerCase()}};e.\u0275fac=function(r){return new(r||e)(Y(tm))},e.\u0275cmp=Ae({type:e,selectors:[["app-tag-input"]],inputs:{type:"type",tagId:"tagId"},outputs:{tagAdded:"tagAdded"},standalone:!0,features:[Me],decls:3,vars:3,consts:[["class","badge bg-primary text-wrap",4,"ngIf"],["class","form-control border-0 shadow-none","id","tagIds","placeholder","Add a tag","style","height: 40px; resize: none; overflow: hidden","rows","3",3,"formControl","keydown.enter",4,"ngIf"],["class","position-relative col-6",4,"ngIf"],[1,"badge","bg-primary","text-wrap"],[1,"bi","bi-x-circle-fill","ms-1",3,"click"],["id","tagIds","placeholder","Add a tag","rows","3",1,"form-control","border-0","shadow-none",2,"height","40px","resize","none","overflow","hidden",3,"keydown.enter","formControl"],[1,"position-relative","col-6"],[1,"list-group","position-absolute","shadow","rounded","border","border-1","border-secondary","bg-white","w-100","mt-1","p-0",2,"max-height","125px","overflow-y","auto"],["class","add-tag list-group-item d-flex justify-content-between align-items-center p-2",4,"ngIf"],["class","list-group-item d-flex justify-content-between align-items-center p-2 icon-link-hover",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"add-tag","list-group-item","d-flex","justify-content-between","align-items-center","p-2"],[1,"list-group-item","d-flex","justify-content-between","align-items-center","p-2","icon-link-hover",3,"click","ngClass"],[1,"bi","bi-plus-lg","mx-1"]],template:function(r,s){r&1&&rt(0,$8,3,1,"div",0)(1,H8,1,1,"textarea",1)(2,q8,4,2,"div",2),r&2&&(ve("ngIf",s.selectedTag),ce(),ve("ngIf",s.selectedTag===null),ce(),ve("ngIf",s.tagForm.value))},dependencies:[As,tr,Ss,Z0,Zt,FR,Es,bs],styles:[".add-tag[_ngcontent-%COMP%]{background-color:#fd7e14;color:#fff}li[_ngcontent-%COMP%]{cursor:pointer}"]});let t=e;return t})();var nm=(()=>{let e=class e{constructor(i,r){this.afAuth=i,this.fs=r,this.userId=null,this.incomeTransactionsSubject=new tt([]),this.incomeTransactions$=this.incomeTransactionsSubject.asObservable(),this.expenseTransactionsSubject=new tt([]),this.expenseTransactions$=this.expenseTransactionsSubject.asObservable(),this.afAuth.authState.pipe(De(s=>s?(this.userId=s.uid,this.getAllTransactions()):(this.userId=null,G({incomeTransactions:[],expenseTransactions:[]})))).subscribe({next:({incomeTransactions:s,expenseTransactions:o})=>{this.incomeTransactionsSubject.next(s),this.expenseTransactionsSubject.next(o)},error:s=>{console.error("Error fetching transactions:",s)}})}getAllTransactions(){if(!this.userId)return G({incomeTransactions:[],expenseTransactions:[]});let i=this.getIncomeTransactions(),r=this.getExpenseTransactions();return no([i,r]).pipe(J(([s,o])=>({incomeTransactions:s,expenseTransactions:o})))}getTransactions(i){if(!this.userId)return G([]);let r=na(this.fs,`transactions/${this.userId}/${i}`),s=dP(r,uP("date"));return wd(s,{idField:"id"}).pipe(J(o=>o.map(a=>ye(B({},a),{date:a.date instanceof Ot?a.date.toDate():a.date}))))}getIncomeTransactions(){return this.getTransactions("income")}getExpenseTransactions(){return this.getTransactions("expense")}addTransaction(i){let r=Yg(na(this.fs,`transactions/${this.userId}/${i.type}`),i);return G(r)}};e.\u0275fac=function(r){return new(r||e)($(em),$(Gr))},e.\u0275prov=q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var W8=["transactionModal"];function K8(t,e){t&1&&(U(0,"div",23),we(1," Amount is required and must be greater than 0. "),H())}function Q8(t,e){t&1&&(U(0,"div",23),we(1," Description is required. "),H())}function Y8(t,e){t&1&&(U(0,"div",23),we(1," Date is required. "),H())}function J8(t,e){if(t&1){let n=Pn();U(0,"div",6)(1,"div",7)(2,"i",8),qe("click",function(){jt(n);let r=st();return Ut(r.closeModal())}),H(),U(3,"h4",9),we(4),Nv(5,"titlecase"),H(),U(6,"p",10),we(7),H(),U(8,"form",11),qe("ngSubmit",function(){jt(n);let r=st();return Ut(r.onSubmit())}),U(9,"div",12)(10,"label",13),we(11,"Amount"),H(),re(12,"input",14),rt(13,K8,2,0,"div",15),H(),U(14,"div",12)(15,"label",16),we(16,"Description"),H(),re(17,"textarea",17),rt(18,Q8,2,0,"div",15),H(),U(19,"div",12)(20,"label",18),we(21,"Date"),H(),re(22,"input",19),rt(23,Y8,2,0,"div",15),H(),U(24,"div",12)(25,"app-tag-input",20),qe("tagAdded",function(r){jt(n);let s=st();return Ut(s.updateTransactionTag(r))}),H()(),U(26,"div",21)(27,"button",22),we(28," Submit "),H()()()()()}if(t&2){let n=st();ce(4),En(" ",Ov(5,8,n.transactionType)," "),ce(3),En("Enter your ",n.transactionType," details below."),ce(),ve("formGroup",n.transactionForm),ce(5),ve("ngIf",n.transactionForm.controls.amount.invalid&&n.transactionForm.controls.amount.touched),ce(5),ve("ngIf",n.transactionForm.controls.description.invalid&&n.transactionForm.controls.description.touched),ce(5),ve("ngIf",n.transactionForm.controls.date.invalid&&n.transactionForm.controls.date.touched),ce(2),ve("type",n.transactionType),ce(2),ve("disabled",n.transactionForm.invalid)}}var FP=(()=>{let e=class e{constructor(i,r,s){this.ngbModal=i,this.fb=r,this.transactionService=s,this.transactionForm=this.fb.group({amount:[null,[ai.required,ai.min(.01)]],type:["income",ai.required],description:["",ai.required],date:[new Date,ai.required],tagIds:[[]]}),this.transactionType="income"}openModal(i){this.ngbModal.open(this.transactionModal,{centered:!0,fullscreen:"sm"}),this.transactionForm.get("type").setValue(i),this.transactionType=i}closeModal(){this.ngbModal.dismissAll(),this.transactionForm.reset()}updateTransactionTag(i){if(console.log("Tag ID:",i),!i){this.transactionForm.get("tagIds")?.setValue([]);return}let r=this.transactionForm.get("tagIds")?.value;if(!r)return;let s=r.includes(i)?r.filter(o=>o!==i):[...r,i];this.transactionForm.get("tagIds")?.setValue(s)}onSubmit(){if(this.transactionForm.valid){let i=this.transactionForm.value,r={amount:i.amount??0,type:i.type,description:i.description??"",date:new Date(i.date??new Date),tagIds:i.tagIds??[]};this.transactionService.addTransaction(r).subscribe({next:()=>{console.log("Transaction added successfully")},error:s=>{console.error("Error adding transaction",s)}}),this.closeModal()}else console.error("Form is invalid")}};e.\u0275fac=function(r){return new(r||e)(Y(Qx),Y(bc),Y(nm))},e.\u0275cmp=Ae({type:e,selectors:[["app-transaction-form"]],viewQuery:function(r,s){if(r&1&&Zf(W8,7),r&2){let o;mu(o=_u())&&(s.transactionModal=o.first)}},standalone:!0,features:[Me],decls:7,vars:0,consts:[["transactionModal",""],[1,"btn-group"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"bi","bi-plus-circle-fill"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"bi","bi-dash-circle-fill"],[1,"modal-content","d-flex","align-items-center","justify-content-center","p-4"],[1,"user-select-none","w-100"],["role","button",1,"bi","bi-x-lg","float-end",3,"click"],["id","modal-title",1,"modal-title","fw-bold"],[1,"text-muted"],[1,"p-3",3,"ngSubmit","formGroup"],[1,"form-row","mb-3"],["for","amount",1,"form-label"],["type","number","id","amount","formControlName","amount","placeholder","Enter amount",1,"form-control"],["class","text-danger",4,"ngIf"],["for","description",1,"form-label"],["id","description","formControlName","description","placeholder","Enter description","rows","3",1,"form-control"],["for","date",1,"form-label"],["type","date","id","date","formControlName","date",1,"form-control"],[3,"tagAdded","type"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-warning",3,"disabled"],[1,"text-danger"]],template:function(r,s){if(r&1){let o=Pn();U(0,"div",1)(1,"button",2),qe("click",function(){return jt(o),Ut(s.openModal("income"))}),re(2,"i",3),H(),U(3,"button",4),qe("click",function(){return jt(o),Ut(s.openModal("expense"))}),re(4,"i",5),H()(),rt(5,J8,29,10,"ng-template",null,0,yu)}},dependencies:[As,Ec,tr,J0,Ss,wc,No,Oo,Zt,bs,LR,PP]});let t=e;return t})();function X8(t,e){if(t&1&&(U(0,"div",11),re(1,"app-stat-card",12),H()),t&2){let n=e.$implicit;ce(),ve("title",n.title)("value",n.value)("percentChange",n.percentChange)}}var LP=(()=>{let e=class e{constructor(i,r){this.authService=i,this.transactionService=r,this.userInfo={},this.statCards=[{title:"Income",value:0,percentChange:0},{title:"Expense",value:0,percentChange:0},{title:"Net",value:0,percentChange:0}],this.income=[],this.expenses=[],this.incomeLineBarData=[],this.expenseLineBarData=[];let s=this.authService.currentUserSig();s&&(this.userInfo=s)}ngOnInit(){this.loadExpenseTransactions(),this.loadIncomeTransactions()}loadExpenseTransactions(){this.transactionService.expenseTransactions$.subscribe(i=>{this.expenses=i,this.expenseLineBarData=this.convertTransactionsToLineBarData(i),this.statCards[1].value=this.aggregateTransactions(i),this.calculateNetIncome()},i=>{console.error("Error fetching expense transactions:",i)})}loadIncomeTransactions(){this.transactionService.incomeTransactions$.subscribe(i=>{this.income=i,this.incomeLineBarData=this.convertTransactionsToLineBarData(i),this.statCards[0].value=this.aggregateTransactions(i),this.calculateNetIncome()},i=>{console.error("Error fetching income transactions:",i)})}calculateNetIncome(){this.statCards[2].value=this.statCards[0].value-this.statCards[1].value}aggregateTransactions(i){return i.reduce((r,s)=>r+s.amount,0)}convertTransactionsToLineBarData(i){return i.map(r=>({tag:r.tagIds[0],value:[r.date.getTime(),r.amount],title:r.description}))}};e.\u0275fac=function(r){return new(r||e)(Y(nr),Y(nm))},e.\u0275cmp=Ae({type:e,selectors:[["app-dashboard-page"]],standalone:!0,features:[Me],decls:12,vars:5,consts:[[1,"container-fluid"],[1,"mt-2","d-flex"],[1,"row","col-12","col-md-6"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-start","fw-bold"],[1,"me-4"],[1,"row","mb-3"],["class","col-md-4 mb-2",4,"ngFor","ngForOf"],["title","Total Expenses","percentChangeMessage","Previous dip:",3,"data","isIncome"],[1,"row","col-12","col-md-6","mx-md-2"],["title","Total Income","percentChangeMessage","Previous gains:",3,"data","isIncome"],[1,"col-md-4","mb-2"],[3,"title","value","percentChange"]],template:function(r,s){r&1&&(U(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),we(5,"Dashboard"),H(),re(6,"app-transaction-form",5),H(),U(7,"div",6),rt(8,X8,2,3,"div",7),H(),re(9,"app-line-bar-chart",8),H(),U(10,"div",9),re(11,"app-line-bar-chart",10),H()()()),r&2&&(ce(8),ve("ngForOf",s.statCards),ce(),ve("data",s.expenseLineBarData)("isIncome",!1),ce(2),ve("data",s.incomeLineBarData)("isIncome",!0))},dependencies:[Zt,Es,NP,OP,FP]});let t=e;return t})();var VP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-landing-page"]],standalone:!0,features:[Me],decls:2,vars:0,template:function(r,s){r&1&&(U(0,"p"),we(1,"landing-page works!"),H())}});let t=e;return t})();var Z8=[{path:"",component:LP}],BP=[{path:"",component:VP,canActivate:[Hp]},{path:"login",component:Cx,canActivate:[Hp]},{path:"register",component:Tx,canActivate:[Hp]},{path:"dashboard",component:eN,canActivate:[Dx],children:Z8}];var $P="@firebase/installations",iI="0.6.8";var HP=1e4,GP=`w:${iI}`,zP="FIS_v2",e9="https://firebaseinstallations.googleapis.com/v1",t9=60*60*1e3,n9="installations",i9="Installations";var r9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ra=new ji(n9,i9,r9);function qP(t){return t instanceof vi&&t.code.includes("request-failed")}function WP({projectId:t}){return`${e9}/projects/${t}/installations`}function KP(t){return{token:t.token,requestStatus:2,expiresIn:o9(t.expiresIn),creationTime:Date.now()}}function QP(t,e){return R(this,null,function*(){let i=(yield e.json()).error;return ra.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})})}function YP({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function s9(t,{refreshToken:e}){let n=YP(t);return n.append("Authorization",a9(e)),n}function JP(t){return R(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function o9(t){return Number(t.replace("s","000"))}function a9(t){return`${zP} ${t}`}function c9(i,r){return R(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let s=WP(t),o=YP(t),a=e.getImmediate({optional:!0});if(a){let f=yield a.getHeartbeatsHeader();f&&o.append("x-firebase-client",f)}let c={fid:n,authVersion:zP,appId:t.appId,sdkVersion:GP},u={method:"POST",headers:o,body:JSON.stringify(c)},d=yield JP(()=>fetch(s,u));if(d.ok){let f=yield d.json();return{fid:f.fid||n,registrationStatus:2,refreshToken:f.refreshToken,authToken:KP(f.authToken)}}else throw yield QP("Create Installation",d)})}function XP(t){return new Promise(e=>{setTimeout(e,t)})}function l9(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var u9=/^[cdef][\w-]{21}$/,nI="";function d9(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=h9(t);return u9.test(n)?n:nI}catch{return nI}}function h9(t){return l9(t).substr(0,22)}function rm(t){return`${t.appName}!${t.appId}`}var ZP=new Map;function ek(t,e){let n=rm(t);tk(n,e),f9(n,e)}function tk(t,e){let n=ZP.get(t);if(n)for(let i of n)i(e)}function f9(t,e){let n=p9();n&&n.postMessage({key:t,fid:e}),g9()}var ia=null;function p9(){return!ia&&"BroadcastChannel"in self&&(ia=new BroadcastChannel("[Firebase] FID Change"),ia.onmessage=t=>{tk(t.data.key,t.data.fid)}),ia}function g9(){ZP.size===0&&ia&&(ia.close(),ia=null)}var m9="firebase-installations-database",_9=1,sa="firebase-installations-store",eI=null;function rI(){return eI||(eI=jl(m9,_9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(sa)}}})),eI}function im(t,e){return R(this,null,function*(){let n=rm(t),r=(yield rI()).transaction(sa,"readwrite"),s=r.objectStore(sa),o=yield s.get(n);return yield s.put(e,n),yield r.done,(!o||o.fid!==e.fid)&&ek(t,e.fid),e})}function nk(t){return R(this,null,function*(){let e=rm(t),i=(yield rI()).transaction(sa,"readwrite");yield i.objectStore(sa).delete(e),yield i.done})}function sm(t,e){return R(this,null,function*(){let n=rm(t),r=(yield rI()).transaction(sa,"readwrite"),s=r.objectStore(sa),o=yield s.get(n),a=e(o);return a===void 0?yield s.delete(n):yield s.put(a,n),yield r.done,a&&(!o||o.fid!==a.fid)&&ek(t,a.fid),a})}function sI(t){return R(this,null,function*(){let e,n=yield sm(t.appConfig,i=>{let r=y9(i),s=v9(t,r);return e=s.registrationPromise,s.installationEntry});return n.fid===nI?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function y9(t){let e=t||{fid:d9(),registrationStatus:0};return ik(e)}function v9(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let r=Promise.reject(ra.create("app-offline"));return{installationEntry:e,registrationPromise:r}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=w9(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:E9(t)}:{installationEntry:e}}function w9(t,e){return R(this,null,function*(){try{let n=yield c9(t,e);return im(t.appConfig,n)}catch(n){throw qP(n)&&n.customData.serverCode===409?yield nk(t.appConfig):yield im(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function E9(t){return R(this,null,function*(){let e=yield jP(t.appConfig);for(;e.registrationStatus===1;)yield XP(100),e=yield jP(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:i}=yield sI(t);return i||n}return e})}function jP(t){return sm(t,e=>{if(!e)throw ra.create("installation-not-found");return ik(e)})}function ik(t){return b9(t)?{fid:t.fid,registrationStatus:0}:t}function b9(t){return t.registrationStatus===1&&t.registrationTime+HP<Date.now()}function I9(i,r){return R(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let s=C9(t,n),o=s9(t,n),a=e.getImmediate({optional:!0});if(a){let f=yield a.getHeartbeatsHeader();f&&o.append("x-firebase-client",f)}let c={installation:{sdkVersion:GP,appId:t.appId}},u={method:"POST",headers:o,body:JSON.stringify(c)},d=yield JP(()=>fetch(s,u));if(d.ok){let f=yield d.json();return KP(f)}else throw yield QP("Generate Auth Token",d)})}function C9(t,{fid:e}){return`${WP(t)}/${e}/authTokens:generate`}function oI(t,e=!1){return R(this,null,function*(){let n,i=yield sm(t.appConfig,s=>{if(!rk(s))throw ra.create("not-registered");let o=s.authToken;if(!e&&S9(o))return s;if(o.requestStatus===1)return n=T9(t,e),s;{if(!navigator.onLine)throw ra.create("app-offline");let a=R9(s);return n=D9(t,a),a}});return n?yield n:i.authToken})}function T9(t,e){return R(this,null,function*(){let n=yield UP(t.appConfig);for(;n.authToken.requestStatus===1;)yield XP(100),n=yield UP(t.appConfig);let i=n.authToken;return i.requestStatus===0?oI(t,e):i})}function UP(t){return sm(t,e=>{if(!rk(e))throw ra.create("not-registered");let n=e.authToken;return M9(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function D9(t,e){return R(this,null,function*(){try{let n=yield I9(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return yield im(t.appConfig,i),n}catch(n){if(qP(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield nk(t.appConfig);else{let i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield im(t.appConfig,i)}throw n}})}function rk(t){return t!==void 0&&t.registrationStatus===2}function S9(t){return t.requestStatus===2&&!A9(t)}function A9(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+t9}function R9(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function M9(t){return t.requestStatus===1&&t.requestTime+HP<Date.now()}function x9(t){return R(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:i}=yield sI(e);return i?i.catch(console.error):oI(e).catch(console.error),n.fid})}function N9(t,e=!1){return R(this,null,function*(){let n=t;return yield O9(n),(yield oI(n,e)).token})}function O9(t){return R(this,null,function*(){let{registrationPromise:e}=yield sI(t);e&&(yield e)})}function P9(t){if(!t||!t.options)throw tI("App Configuration");if(!t.name)throw tI("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw tI(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function tI(t){return ra.create("missing-app-config-values",{valueName:t})}var sk="installations",k9="installations-internal",F9=t=>{let e=t.getProvider("app").getImmediate(),n=P9(e),i=Dt(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},L9=t=>{let e=t.getProvider("app").getImmediate(),n=Dt(e,sk).getImmediate();return{getId:()=>x9(n),getToken:r=>N9(n,r)}};function V9(){ut(new lt(sk,F9,"PUBLIC")),ut(new lt(k9,L9,"PRIVATE"))}V9();oe($P,iI);oe($P,iI,"esm2017");var om="analytics",B9="firebase_id",j9="origin",U9=60*1e3,$9="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",fI="https://www.googletagmanager.com/gtag/js";var Sn=new $i("@firebase/analytics");var H9={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Jn=new ji("analytics","Analytics",H9);function G9(t){if(!t.startsWith(fI)){let e=Jn.create("invalid-gtag-resource",{gtagURL:t});return Sn.warn(e.message),""}return t}function hk(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function z9(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function q9(t,e){let n=z9("firebase-js-sdk-policy",{createScriptURL:G9}),i=document.createElement("script"),r=`${fI}?l=${t}&id=${e}`;i.src=n?n?.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function W9(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function K9(t,e,n,i,r,s){return R(this,null,function*(){let o=i[r];try{if(o)yield e[o];else{let c=(yield hk(n)).find(u=>u.measurementId===r);c&&(yield e[c.appId])}}catch(a){Sn.error(a)}t("config",r,s)})}function Q9(t,e,n,i,r){return R(this,null,function*(){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);let a=yield hk(n);for(let c of o){let u=a.find(f=>f.measurementId===c),d=u&&e[u.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),yield Promise.all(s),t("event",i,r||{})}catch(s){Sn.error(s)}})}function Y9(t,e,n,i){function r(s,...o){return R(this,null,function*(){try{if(s==="event"){let[a,c]=o;yield Q9(t,e,n,a,c)}else if(s==="config"){let[a,c]=o;yield K9(t,e,n,i,a,c)}else if(s==="consent"){let[a,c]=o;t("consent",a,c)}else if(s==="get"){let[a,c,u]=o;t("get",a,c,u)}else if(s==="set"){let[a]=o;t("set",a)}else t(s,...o)}catch(a){Sn.error(a)}})}return r}function J9(t,e,n,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=Y9(s,t,e,n),{gtagCore:s,wrappedGtag:window[r]}}function X9(t){let e=window.document.getElementsByTagName("script");for(let n of Object.values(e))if(n.src&&n.src.includes(fI)&&n.src.includes(t))return n;return null}var Z9=30,eK=1e3,cI=class{constructor(e={},n=eK){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},fk=new cI;function tK(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function nK(t){return R(this,null,function*(){var e;let{appId:n,apiKey:i}=t,r={method:"GET",headers:tK(i)},s=$9.replace("{app-id}",n),o=yield fetch(s,r);if(o.status!==200&&o.status!==304){let a="";try{let c=yield o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw Jn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function iK(i){return R(this,arguments,function*(t,e=fk,n){let{appId:r,apiKey:s,measurementId:o}=t.options;if(!r)throw Jn.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw Jn.create("no-api-key")}let a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new lI;return setTimeout(()=>R(this,null,function*(){c.abort()}),n!==void 0?n:U9),pk({appId:r,apiKey:s,measurementId:o},a,c,e)})}function pk(s,o,a){return R(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=fk){var c;let{appId:u,measurementId:d}=t;try{yield rK(i,e)}catch(f){if(d)return Sn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:u,measurementId:d};throw f}try{let f=yield nK(t);return r.deleteThrottleMetadata(u),f}catch(f){let g=f;if(!sK(g)){if(r.deleteThrottleMetadata(u),d)return Sn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:u,measurementId:d};throw f}let m=Number((c=g?.customData)===null||c===void 0?void 0:c.httpStatus)===503?Da(n,r.intervalMillis,Z9):Da(n,r.intervalMillis),v={throttleEndTimeMillis:Date.now()+m,backoffCount:n+1};return r.setThrottleMetadata(u,v),Sn.debug(`Calling attemptFetch again in ${m} millis`),pk(t,v,i,r)}})}function rK(t,e){return new Promise((n,i)=>{let r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(s),i(Jn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function sK(t){if(!(t instanceof vi)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var lI=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var uI;function oK(t,e,n,i,r){return R(this,null,function*(){if(r&&r.global){t("event",n,i);return}else{let s=yield e,o=Object.assign(Object.assign({},i),{send_to:s});t("event",n,o)}})}function aK(t,e,n,i){return R(this,null,function*(){if(i&&i.global)return t("set",{user_id:n}),Promise.resolve();{let r=yield e;t("config",r,{update:!0,user_id:n})}})}var dI;function cK(t){dI=t}function lK(t){uI=t}function uK(){return R(this,null,function*(){if(yi())try{yield Ys()}catch(t){return Sn.warn(Jn.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return Sn.warn(Jn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function dK(t,e,n,i,r,s,o){return R(this,null,function*(){var a;let c=iK(t);c.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Sn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Sn.error(m)),e.push(c);let u=uK().then(m=>{if(m)return i.getId()}),[d,f]=yield Promise.all([c,u]);X9(s)||q9(s,d.measurementId),dI&&(r("consent","default",dI),cK(void 0)),r("js",new Date);let g=(a=o?.config)!==null&&a!==void 0?a:{};return g[j9]="firebase",g.update=!0,f!=null&&(g[B9]=f),r("config",d.measurementId,g),uI&&(r("set",uI),lK(void 0)),d.measurementId})}var hI=class{constructor(e){this.app=e}_delete(){return delete Xc[this.app.options.appId],Promise.resolve()}},Xc={},ok=[],ak={},aI="dataLayer",hK="gtag",ck,pI,lk=!1;function fK(){let t=[];if(Km()&&t.push("This is a browser extension environment."),Fl()||t.push("Cookies are not available."),t.length>0){let e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=Jn.create("invalid-analytics-context",{errorInfo:e});Sn.warn(n.message)}}function pK(t,e,n){fK();let i=t.options.appId;if(!i)throw Jn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Sn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Jn.create("no-api-key");if(Xc[i]!=null)throw Jn.create("already-exists",{id:i});if(!lk){W9(aI);let{wrappedGtag:s,gtagCore:o}=J9(Xc,ok,ak,aI,hK);pI=s,ck=o,lk=!0}return Xc[i]=dK(t,ok,ak,e,ck,aI,n),new hI(t)}function gk(t=Ft()){t=Be(t);let e=Dt(t,om);return e.isInitialized()?e.getImmediate():mk(t)}function mk(t,e={}){let n=Dt(t,om);if(n.isInitialized()){let r=n.getImmediate();if(Vl(e,n.getOptions()))return r;throw Jn.create("already-initialized")}return n.initialize({options:e})}function _k(){return R(this,null,function*(){if(Km()||!Fl()||!yi())return!1;try{return yield Ys()}catch{return!1}})}function yk(t,e,n){t=Be(t),aK(pI,Xc[t.app.options.appId],e,n).catch(i=>Sn.error(i))}function gI(t,e,n,i){t=Be(t),oK(pI,Xc[t.app.options.appId],e,n,i).catch(r=>Sn.error(r))}var uk="@firebase/analytics",dk="0.10.5";function gK(){ut(new lt(om,(e,{options:n})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return pK(i,r,n)},"PUBLIC")),ut(new lt("analytics-internal",t,"PRIVATE")),oe(uk,dk),oe(uk,dk,"esm2017");function t(e){try{let n=e.getProvider(om).getImmediate();return{logEvent:(i,r,s)=>gI(n,i,r,s)}}catch(n){throw Jn.create("interop-component-reg-failed",{reason:n})}}}gK();var oa=class{constructor(e){return e}},Ek="analytics",_I=class{constructor(){return tn(Ek)}};var yI="__angularfire_symbol__analyticsIsSupportedValue",bk="__angularfire_symbol__analyticsIsSupported";globalThis[bk]||=_k().then(t=>globalThis[yI]=t).catch(()=>globalThis[yI]=!1);var am={async:()=>globalThis[bk],sync:()=>{let t=globalThis[yI];if(t===void 0)throw new Error(Cc("Analytics"));return t}},Ik=am.async,Ck=be(gk,!0);var mK=be(gI,!0);var _K=be(yk,!0);var wI=(()=>{class t{initialized;disposables=[];constructor(n,i,r){oe("angularfire",dt.full,"user-tracking");let s;this.initialized=i.runOutsideAngular(()=>new Promise(o=>{s=o})),Ik().then(()=>{let o=r.get(oa);o?this.disposables=[Gu(n).subscribe(a=>{_K(o,a?.uid),s()})]:s()})}ngOnDestroy(){this.disposables.forEach(n=>n.unsubscribe())}static \u0275fac=function(i){return new(i||t)($(ci),$(te),$(Re))};static \u0275prov=q({token:t,factory:t.\u0275fac})}return t})(),yK="firebase_event_origin",vK="firebase_previous_class",wK="firebase_previous_id",EK="firebase_previous_screen",bK="firebase_screen_class",vk="firebase_screen_id",IK="firebase_screen",vI="outlet",CK="page_path",TK="page_title",bd="screen_class",wk="screen_name",DK="screen_view",SK="auto",AK="#",RK=Math.floor(Math.random()*(2**32-1))-2**31,mI={},MK=t=>{let e=[t[bd],t[vI]].join(AK);if(mI.hasOwnProperty(e))return mI[e];{let n=RK++;return mI[e]=n,n}},xK=(t,e,n)=>t.events.pipe(Je(r=>r instanceof Nu)).pipe(De(r=>{let o=t.parseUrl(t.url.replace(/(?:\().+(?:\))/g,g=>g.replace("://",":///"))).root.children[r.snapshot.outlet]?.toString()||"",a=t.routerState.root.children.map(g=>g).find(g=>g.outlet===r.snapshot.outlet);if(!a)return G(null);let c=a;for(;c.firstChild;)c=c.firstChild;let u=c.pathFromRoot.map(g=>g.routeConfig?.path).filter(g=>g).join("/")||"/",d={[wk]:u,[CK]:`/${o}`,[yK]:SK,[IK]:u,[vI]:r.snapshot.outlet};e&&(d[TK]=e.getTitle());let f=a.component;if(f){if(f===P0){let g=r.snapshot;for(;g.firstChild;)g=g.firstChild;f=g.component}}else f=r.snapshot.component;if(typeof f=="string")return G(ye(B({},d),{[bd]:f}));if(f){let g=n.resolveComponentFactory(f);return G(ye(B({},d),{[bd]:g.selector}))}return G(null)}),Je(r=>!!r),J(r=>B({[bK]:r[bd],[vk]:MK(r)},r)),v_(r=>r[vI]),Ge(r=>r.pipe(Kl((s,o)=>JSON.stringify(s)===JSON.stringify(o)),ro(void 0),zh(),J(([s,o])=>s?B({[vK]:s[bd],[EK]:s[wk],[wK]:s[vk]},o):o)))),Tk=(()=>{class t{disposable;constructor(n,i,r,s,o,a){oe("angularfire",dt.full,"screen-tracking"),Ik().then(()=>{let c=a.get(oa);!n||!c||s.runOutsideAngular(()=>{this.disposable=xK(n,i,r).pipe(De(u=>R(this,null,function*(){return o&&(yield o.initialized),mK(c,DK,u)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(i){return new(i||t)($(bn,8),$(dp,8),$(rc),$(te),$(wI,8),$(Re))};static \u0275prov=q({token:t,factory:t.\u0275fac})}return t})(),EI=new j("angularfire2.analytics-instances");function NK(t,e){if(!am.sync())return null;let n=an(Ek,t,e);return n&&new oa(n)}function OK(t){return(e,n)=>{if(!am.sync())return null;let i=e.runOutsideAngular(()=>t(n));return new oa(i)}}var PK={provide:_I,deps:[[new _e,EI]]},kK={provide:oa,useFactory:NK,deps:[[new _e,EI],_t]};function Dk(t,...e){return oe("angularfire",dt.full,"analytics"),Ze([kK,PK,{provide:ws,useValue:am.async,multi:!0},{provide:EI,useFactory:OK(t),multi:!0,deps:[te,Re,wt,Mt,...e]}])}var Sk="@firebase/database",Ak="1.0.6";var vC="";function FK(t){vC=t}var RI=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),kt(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:dh(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var MI=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Ui(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var oF=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new RI(e)}}catch{}return new MI},ca=oF("localStorage"),xI=oF("sessionStorage");var nl=new $i("@firebase/database"),LK=function(){let t=1;return function(){return t++}}(),aF=function(t){let e=CD(t),n=new bD;n.update(e);let i=n.digest();return uh.encodeByteArray(i)},kd=function(...t){let e="";for(let n=0;n<t.length;n++){let i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=kd.apply(null,i):typeof i=="object"?e+=kt(i):e+=i,e+=" "}return e},la=null,Rk=!0,VK=function(t,e){z(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(nl.logLevel=Bn.VERBOSE,la=nl.log.bind(nl),e&&xI.set("logging_enabled",!0)):typeof t=="function"?la=t:(la=null,xI.remove("logging_enabled"))},un=function(...t){if(Rk===!0&&(Rk=!1,la===null&&xI.get("logging_enabled")===!0&&VK(!0)),la){let e=kd.apply(null,t);la(e)}},Fd=function(t){return function(...e){un(t,...e)}},NI=function(...t){let e="FIREBASE INTERNAL ERROR: "+kd(...t);nl.error(e)},qr=function(...t){let e=`FIREBASE FATAL ERROR: ${kd(...t)}`;throw nl.error(e),new Error(e)},Xn=function(...t){let e="FIREBASE WARNING: "+kd(...t);nl.warn(e)},BK=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Xn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},cF=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},jK=function(t){if(Bi()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},rl="[MIN_NAME]",ua="[MAX_NAME]",dl=function(t,e){if(t===e)return 0;if(t===rl||e===ua)return-1;if(e===rl||t===ua)return 1;{let n=Mk(t),i=Mk(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},UK=function(t,e){return t===e?0:t<e?-1:1},Id=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+kt(e))},wC=function(t){if(typeof t!="object"||t===null)return kt(t);let e=[];for(let i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=kt(e[i]),n+=":",n+=wC(t[e[i]]);return n+="}",n},lF=function(t,e){let n=t.length;if(n<=e)return[t];let i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function gi(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var uF=function(t){z(!cF(t),"Invalid JSON number");let e=11,n=52,i=(1<<e-1)-1,r,s,o,a,c;t===0?(s=0,o=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),i),s=a+i,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-i-n))));let u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(r?1:0),u.reverse();let d=u.join(""),f="";for(c=0;c<64;c+=8){let g=parseInt(d.substr(c,8),2).toString(16);g.length===1&&(g="0"+g),f=f+g}return f.toLowerCase()},$K=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},HK=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var GK=new RegExp("^-?(0*)\\d{1,10}$"),zK=-2147483648,qK=2147483647,Mk=function(t){if(GK.test(t)){let e=Number(t);if(e>=zK&&e<=qK)return e}return null},Ld=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Xn("Exception was thrown by user callback.",n),e},Math.floor(0))}},WK=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ad=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var OI=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Xn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var PI=class{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(un("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Xn(e)}},Rd=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),lm="5",dF="v",hF="s",fF="r",pF="f",gF=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,mF="ls",_F="p",kI="ac",yF="websocket",vF="long_polling";var um=class{constructor(e,n,i,r,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ca.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ca.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function KK(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function wF(t,e,n){z(typeof e=="string","typeof type must == string"),z(typeof n=="object","typeof params must == object");let i;if(e===yF)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===vF)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);KK(t)&&(n.ns=t.namespace);let r=[];return gi(n,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}var FI=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Ui(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return gD(this.counters_)}};var bI={},II={};function EC(t){let e=t.toString();return bI[e]||(bI[e]=new FI),bI[e]}function QK(t,e){let n=t.toString();return II[n]||(II[n]=e()),II[n]}var LI=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Ld(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var xk="start",YK="close",JK="pLPCommand",XK="pRTLPCB",EF="id",bF="pw",IF="ser",ZK="cb",e7="seg",t7="ts",n7="d",i7="dframe",CF=1870,TF=30,r7=CF-TF,s7=25e3,o7=3e4,VI=class t{constructor(e,n,i,r,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Fd(e),this.stats_=EC(n),this.urlFn=c=>(this.appCheckToken&&(c[kI]=this.appCheckToken),wF(n,vF,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new LI(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(o7)),jK(()=>{if(this.isClosed_)return;this.scriptTagHolder=new BI((...s)=>{let[o,a,c,u,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===xk)this.id=a,this.password=c;else if(o===YK)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[xk]="t",i[IF]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[ZK]=this.scriptTagHolder.uniqueCallbackIdentifier),i[dF]=lm,this.transportSessionId&&(i[hF]=this.transportSessionId),this.lastSessionId&&(i[mF]=this.lastSessionId),this.applicationId&&(i[_F]=this.applicationId),this.appCheckToken&&(i[kI]=this.appCheckToken),typeof location<"u"&&location.hostname&&gF.test(location.hostname)&&(i[fF]=pF);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Bi()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!$K()&&!HK()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=kt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let i=pD(n),r=lF(i,r7);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Bi())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[i7]="t",i[EF]=e,i[bF]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=kt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},BI=class t{constructor(e,n,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Bi())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=LK(),window[JK+this.uniqueCallbackIdentifier]=e,window[XK+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){un("frame writing exception"),a.stack&&un(a.stack),un(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||un("No IE domain setting required")}catch{let i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[EF]=this.myID,e[bF]=this.myPW,e[IF]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+TF+i.length<=CF;){let o=this.pendingSegs.shift();i=i+"&"+e7+r+"="+o.seg+"&"+t7+r+"="+o.ts+"&"+n7+r+"="+o.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(s7)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,n){Bi()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{un("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var a7=16384,c7=45e3,dm=null;typeof MozWebSocket<"u"?dm=MozWebSocket:typeof WebSocket<"u"&&(dm=WebSocket);var Cd=(()=>{class t{constructor(n,i,r,s,o,a,c){this.connId=n,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Fd(this.connId),this.stats_=EC(i),this.connURL=t.connectionURL_(i,a,c,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(n,i,r,s,o){let a={};return a[dF]=lm,!Bi()&&typeof location<"u"&&location.hostname&&gF.test(location.hostname)&&(a[fF]=pF),i&&(a[hF]=i),r&&(a[mF]=r),s&&(a[kI]=s),o&&(a[_F]=o),wF(n,yF,a)}open(n,i){this.onDisconnect=i,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ca.set("previous_websocket_failure",!0);try{let r;if(Bi()){let s=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${lm}/${vC}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new dm(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(n=!0)}return!n&&dm!==null&&!t.forceDisallow_}static previouslyFailed(){return ca.isInMemoryStorage||ca.get("previous_websocket_failure")===!0}markConnectionHealthy(){ca.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=dh(i);this.onMessage(r)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(z(this.frames===null,"We already have a frame buffer"),n.length<=6){let i=Number(n);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let i=n.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(n){this.resetKeepAlive();let i=kt(n);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=lF(i,a7);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(c7))}sendString_(n){try{this.mySock.send(n)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),l7=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[VI,Cd]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let i=Cd&&Cd.isAvailable(),r=i&&!Cd.previouslyFailed();if(n.webSocketOnly&&(i||Xn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Cd];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),u7=6e4,d7=5e3,h7=10*1024,f7=100*1024,CI="t",Nk="d",p7="s",Ok="r",g7="e",Pk="o",kk="a",Fk="n",Lk="p",m7="h",jI=class{constructor(e,n,i,r,s,o,a,c,u,d){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Fd("c:"+this.id+":"),this.transportManager_=new l7(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));let r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Ad(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>f7?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>h7?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(CI in e){let n=e[CI];n===kk?this.upgradeIfSecondaryHealthy_():n===Ok?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Pk&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Id("t",e),i=Id("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Lk,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:kk,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Fk,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Id("t",e),i=Id("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Id(CI,e);if(Nk in e){let i=e[Nk];if(n===m7){let r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===Fk){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===p7?this.onConnectionShutdown_(i):n===Ok?this.onReset_(i):n===g7?NI("Server Error: "+i):n===Pk?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):NI("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),lm!==i&&Xn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Ad(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(u7))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ad(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(d7))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Lk,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ca.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var hm=class{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}};var fm=class{constructor(e){this.allowedEvents_=e,this.listeners_={},z(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});let r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);let r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===n&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){z(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var pm=class t extends fm{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Wm()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return z(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var Vk=32,Bk=768,We=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function $e(){return new We("")}function Ne(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function $s(t){return t.pieces_.length-t.pieceNum_}function et(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new We(t.pieces_,e)}function DF(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function _7(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function SF(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function AF(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new We(e,0)}function Wt(t,e){let n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof We)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{let i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new We(n,0)}function Te(t){return t.pieceNum_>=t.pieces_.length}function fi(t,e){let n=Ne(t),i=Ne(e);if(n===null)return e;if(n===i)return fi(et(t),et(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function RF(t,e){if($s(t)!==$s(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function Pi(t,e){let n=t.pieceNum_,i=e.pieceNum_;if($s(t)>$s(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}var UI=class{constructor(e,n){this.errorPrefix_=n,this.parts_=SF(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Bl(this.parts_[i]);MF(this)}};function y7(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Bl(e),MF(t)}function v7(t){let e=t.parts_.pop();t.byteLength_-=Bl(e),t.parts_.length>0&&(t.byteLength_-=1)}function MF(t){if(t.byteLength_>Bk)throw new Error(t.errorPrefix_+"has a key path longer than "+Bk+" bytes ("+t.byteLength_+").");if(t.parts_.length>Vk)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Vk+") or object contains a cycle "+aa(t))}function aa(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var $I=class t extends fm{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new t}getInitialEvent(e){return z(e==="visible","Unknown event type: "+e),[this.visible_]}};var Td=1e3,w7=60*5*1e3,jk=30*1e3,E7=1.3,b7=3e4,I7="server_kill",Uk=3,bC=(()=>{class t extends hm{constructor(n,i,r,s,o,a,c,u){if(super(),this.repoInfo_=n,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=t.nextPersistentConnectionId_++,this.log_=Fd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Td,this.maxReconnectDelay_=w7,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!Bi())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");$I.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&pm.getInstance().on("online",this.onOnline_,this)}sendRequest(n,i,r){let s=++this.requestNumber_,o={r:s,a:n,b:i};this.log_(kt(o)),z(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(n){this.initConnection_();let i=new Ca,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?i.resolve(c):i.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),i.promise}listen(n,i,r,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),z(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),z(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:i,query:n,tag:r};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let i=this.outstandingGets_[n];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(n){let i=n.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);let o={p:r},a="q";n.tag&&(o.q=i._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let u=c.d,d=c.s;t.warnOnListenWarnings_(u,i),(this.listens.get(r)&&this.listens.get(r).get(s))===n&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(r,s),n.onComplete&&n.onComplete(d,u))})}static warnOnListenWarnings_(n,i){if(n&&typeof n=="object"&&Ui(n,"w")){let r=Js(n,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();Xn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||wD(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=jk)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,i=vD(n)?"auth":"gauth",r={cred:n};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let i=n.s,r=n.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(n,i){let r=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),z(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,n._queryObject,i)}sendUnlisten_(n,i,r,s){this.log_("Unlisten on "+n+" for "+i);let o={p:n},a="n";s&&(o.q=r,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:i,onComplete:r})}onDisconnectMerge(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:i,onComplete:r})}onDisconnectCancel(n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(n,i,r,s){let o={p:i,d:r};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,i,r,s){this.putInternal("p",n,i,r,s)}merge(n,i,r,s){this.putInternal("m",n,i,r,s)}putInternal(n,i,r,s,o){this.initConnection_();let a={p:i,d:r};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+i)}sendPut_(n){let i=this.outstandingPuts_[n].action,r=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+kt(n));let i=n.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,i){this.log_("handleServerMessage",n,i),n==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):n==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):n==="c"?this.onListenRevoked_(i.p,i.q):n==="ac"?this.onAuthRevoked_(i.s,i.d):n==="apc"?this.onAppCheckRevoked_(i.s,i.d):n==="sd"?this.onSecurityDebugPacket_(i):NI("Unrecognized action received from server: "+kt(n)+`
Are you using the latest client?`)}onReady_(n,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){z(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Td,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Td,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>b7&&(this.reconnectDelay_=Td),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-n);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*E7)}this.onConnectStatus_(!1)}establishConnection_(){return R(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,u=function(){c?c.close():(a=!0,r())},d=function(g){z(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(g)};this.realtime_={close:u,sendRequest:d};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[g,m]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?un("getToken() completed but was canceled"):(un("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=m&&m.token,c=new jI(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,i,r,v=>{Xn(v+" ("+this.repoInfo_.toString()+")"),this.interrupt(I7)},o))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&Xn(g),u())}}})}interrupt(n){un("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){un("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Qm(this.interruptReasons_)&&(this.reconnectDelay_=Td,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let i=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let i=this.outstandingPuts_[n];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,i){let r;i?r=i.map(o=>wC(o)).join("$"):r="default";let s=this.removeListen_(n,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,i){let r=new We(n).toString(),s;if(this.listens.has(r)){let o=this.listens.get(r);s=o.get(i),o.delete(i),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(n,i){un("Auth token revoked: "+n+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Uk&&(this.reconnectDelay_=jk,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,i){un("App check token revoked: "+n+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Uk&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let i of n.values())this.sendListen_(i);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},i="js";Bi()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),n["sdk."+i+"."+vC.replace(/\./g,"-")]=1,Wm()?n["framework.cordova"]=1:_D()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=pm.getInstance().currentlyOnline();return Qm(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),Oe=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var sl=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let i=new Oe(rl,e),r=new Oe(rl,n);return this.compare(i,r)!==0}minPost(){return Oe.MIN}};var cm,gm=class extends sl{static get __EMPTY_NODE(){return cm}static set __EMPTY_NODE(e){cm=e}compare(e,n){return dl(e.name,n.name)}isDefinedOn(e){throw Ia("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Oe.MIN}maxPost(){return new Oe(ua,cm)}makePost(e,n){return z(typeof e=="string","KeyIndex indexValue must always be a string."),new Oe(e,cm)}toString(){return".key"}},il=new gm;var el=class{constructor(e,n,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?i(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Oi=(()=>{class t{constructor(n,i,r,s,o){this.key=n,this.value=i,this.color=r??t.RED,this.left=s??pi.EMPTY_NODE,this.right=o??pi.EMPTY_NODE}copy(n,i,r,s,o){return new t(n??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,i,r){let s=this,o=r(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,i,r),null):o===0?s=s.copy(null,i,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return pi.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,i){let r,s;if(r=this,i(n,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(n,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(n,r.key)===0){if(r.right.isEmpty())return pi.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(n,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,i)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),HI=class{copy(e,n,i,r,s){return this}insert(e,n,i){return new Oi(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},pi=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Oi.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Oi.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new el(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new el(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new el(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new el(this.root_,null,this.comparator_,!0,e)}};pi.EMPTY_NODE=new HI;function C7(t,e){return dl(t.name,e.name)}function IC(t,e){return dl(t,e)}var GI;function T7(t){GI=t}var xF=function(t){return typeof t=="number"?"number:"+uF(t):"string:"+t},NF=function(t){if(t.isLeafNode()){let e=t.val();z(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Ui(e,".sv"),"Priority must be a string or number.")}else z(t===GI||t.isEmpty(),"priority of unexpected type.");z(t===GI||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var $k,ol=(()=>{class t{constructor(n,i=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=i,this.lazyHash_=null,z(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),NF(this.priorityNode_)}static set __childrenNodeConstructor(n){$k=n}static get __childrenNodeConstructor(){return $k}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return Te(n)?this:Ne(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,i){return null}updateImmediateChild(n,i){return n===".priority"?this.updatePriority(i):i.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,i).updatePriority(this.priorityNode_)}updateChild(n,i){let r=Ne(n);return r===null?i:i.isEmpty()&&r!==".priority"?this:(z(r!==".priority"||$s(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(et(n),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,i){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+xF(this.priorityNode_.val())+":");let i=typeof this.value_;n+=i+":",i==="number"?n+=uF(this.value_):n+=this.value_,this.lazyHash_=aF(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(z(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let i=typeof n.value_,r=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(i),o=t.VALUE_TYPE_ORDER.indexOf(r);return z(s>=0,"Unknown leaf type: "+i),z(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let i=n;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),OF,PF;function D7(t){OF=t}function S7(t){PF=t}var zI=class extends sl{compare(e,n){let i=e.node.getPriority(),r=n.node.getPriority(),s=i.compareTo(r);return s===0?dl(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Oe.MIN}maxPost(){return new Oe(ua,new ol("[PRIORITY-POST]",PF))}makePost(e,n){let i=OF(e);return new Oe(n,new ol("[PRIORITY-POST]",i))}toString(){return".priority"}},hn=new zI;var A7=Math.log(2),qI=class{constructor(e){let n=s=>parseInt(Math.log(s)/A7,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},mm=function(t,e,n,i){t.sort(e);let r=function(c,u){let d=u-c,f,g;if(d===0)return null;if(d===1)return f=t[c],g=n?n(f):f,new Oi(g,f.node,Oi.BLACK,null,null);{let m=parseInt(d/2,10)+c,v=r(c,m),D=r(m+1,u);return f=t[m],g=n?n(f):f,new Oi(g,f.node,Oi.BLACK,v,D)}},s=function(c){let u=null,d=null,f=t.length,g=function(v,D){let C=f-v,x=f;f-=v;let k=r(C+1,x),P=t[C],F=n?n(P):P;m(new Oi(F,P.node,D,null,k))},m=function(v){u?(u.left=v,u=v):(d=v,u=v)};for(let v=0;v<c.count;++v){let D=c.nextBitIsOne(),C=Math.pow(2,c.count-(v+1));D?g(C,Oi.BLACK):(g(C,Oi.BLACK),g(C,Oi.RED))}return d},o=new qI(t.length),a=s(o);return new pi(i||e,a)};var TI,Zc={},al=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return z(Zc&&hn,"ChildrenNode.ts has not been loaded"),TI=TI||new t({".priority":Zc},{".priority":hn}),TI}get(e){let n=Js(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof pi?n:null}hasIndex(e){return Ui(this.indexSet_,e.toString())}addIndex(e,n){z(e!==il,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,s=n.getIterator(Oe.Wrap),o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=mm(i,e.getCompare()):a=Zc;let c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new t(d,u)}addToIndexes(e,n){let i=Ll(this.indexes_,(r,s)=>{let o=Js(this.indexSet_,s);if(z(o,"Missing index implementation for "+s),r===Zc)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(Oe.Wrap),u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),mm(a,o.getCompare())}else return Zc;else{let a=n.get(e.name),c=r;return a&&(c=c.remove(new Oe(e.name,a))),c.insert(e,e.node)}});return new t(i,this.indexSet_)}removeFromIndexes(e,n){let i=Ll(this.indexes_,r=>{if(r===Zc)return r;{let s=n.get(e.name);return s?r.remove(new Oe(e.name,s)):r}});return new t(i,this.indexSet_)}};var Dd,at=(()=>{class t{constructor(n,i,r){this.children_=n,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&NF(this.priorityNode_),this.children_.isEmpty()&&z(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Dd||(Dd=new t(new pi(IC),null,al.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Dd}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let i=this.children_.get(n);return i===null?Dd:i}}getChild(n){let i=Ne(n);return i===null?this:this.getImmediateChild(i).getChild(et(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,i){if(z(i,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(i);{let r=new Oe(n,i),s,o;i.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(n,i),o=this.indexMap_.addToIndexes(r,this.children_));let a=s.isEmpty()?Dd:this.priorityNode_;return new t(s,a,o)}}updateChild(n,i){let r=Ne(n);if(r===null)return i;{z(Ne(n)!==".priority"||$s(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(r).updateChild(et(n),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let i={},r=0,s=0,o=!0;if(this.forEachChild(hn,(a,c)=>{i[a]=c.val(n),r++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*r){let a=[];for(let c in i)a[c]=i[c];return a}else return n&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+xF(this.getPriority().val())+":"),this.forEachChild(hn,(i,r)=>{let s=r.hash();s!==""&&(n+=":"+i+":"+s)}),this.lazyHash_=n===""?"":aF(n)}return this.lazyHash_}getPredecessorChildName(n,i,r){let s=this.resolveIndex_(r);if(s){let o=s.getPredecessorKey(new Oe(n,i));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let i=this.resolveIndex_(n);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(n){let i=this.getFirstChildName(n);return i?new Oe(i,this.children_.get(i)):null}getLastChildName(n){let i=this.resolveIndex_(n);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(n){let i=this.getLastChildName(n);return i?new Oe(i,this.children_.get(i)):null}forEachChild(n,i){let r=this.resolveIndex_(n);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,Oe.Wrap),o=s.peek();for(;o!=null&&i.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,Oe.Wrap),o=s.peek();for(;o!=null&&i.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Vd?-1:0}withIndex(n){if(n===il||this.indexMap_.hasIndex(n))return this;{let i=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,i)}}isIndexed(n){return n===il||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let i=n;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator(hn),s=i.getIterator(hn),o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===il?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),WI=class extends at{constructor(){super(new pi(IC),at.EMPTY_NODE,al.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return at.EMPTY_NODE}isEmpty(){return!1}},Vd=new WI;Object.defineProperties(Oe,{MIN:{value:new Oe(rl,at.EMPTY_NODE)},MAX:{value:new Oe(ua,Vd)}});gm.__EMPTY_NODE=at.EMPTY_NODE;ol.__childrenNodeConstructor=at;T7(Vd);S7(Vd);var R7=!0;function dn(t,e=null){if(t===null)return at.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),z(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new ol(n,dn(e))}if(!(t instanceof Array)&&R7){let n=[],i=!1;if(gi(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=dn(a);c.isEmpty()||(i=i||!c.getPriority().isEmpty(),n.push(new Oe(o,c)))}}),n.length===0)return at.EMPTY_NODE;let s=mm(n,C7,o=>o.name,IC);if(i){let o=mm(n,hn.getCompare());return new at(s,dn(e),new al({".priority":o},{".priority":hn}))}else return new at(s,dn(e),al.Default)}else{let n=at.EMPTY_NODE;return gi(t,(i,r)=>{if(Ui(t,i)&&i.substring(0,1)!=="."){let s=dn(r);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(i,s))}}),n.updatePriority(dn(e))}}D7(dn);var KI=class extends sl{constructor(e){super(),this.indexPath_=e,z(!Te(e)&&Ne(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let i=this.extractChild(e.node),r=this.extractChild(n.node),s=i.compareTo(r);return s===0?dl(e.name,n.name):s}makePost(e,n){let i=dn(e),r=at.EMPTY_NODE.updateChild(this.indexPath_,i);return new Oe(n,r)}maxPost(){let e=at.EMPTY_NODE.updateChild(this.indexPath_,Vd);return new Oe(ua,e)}toString(){return SF(this.indexPath_,0).join("/")}};var QI=class extends sl{compare(e,n){let i=e.node.compareTo(n.node);return i===0?dl(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Oe.MIN}maxPost(){return Oe.MAX}makePost(e,n){let i=dn(e);return new Oe(n,i)}toString(){return".value"}},M7=new QI;function x7(t){return{type:"value",snapshotNode:t}}function N7(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function O7(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Hk(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function P7(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var YI=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=hn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return z(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return z(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:rl}hasEnd(){return this.endSet_}getIndexEndValue(){return z(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return z(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ua}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return z(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===hn}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function Gk(t){let e={};if(t.isDefault())return e;let n;if(t.index_===hn?n="$priority":t.index_===M7?n="$value":t.index_===il?n="$key":(z(t.index_ instanceof KI,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=kt(n),t.startSet_){let i=t.startAfterSet_?"startAfter":"startAt";e[i]=kt(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+kt(t.indexStartName_))}if(t.endSet_){let i=t.endBeforeSet_?"endBefore":"endAt";e[i]=kt(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+kt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function zk(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==hn&&(e.i=t.index_.toString()),e}var JI=class t extends hm{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Fd("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(z(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,i),a={};this.listens_[o]=a;let c=Gk(e._queryParams);this.restRequest_(s+".json",c,(u,d)=>{let f=d;if(u===404&&(f=null,u=null),u===null&&this.onDataUpdate_(s,f,!1,i),Js(this.listens_,o)===a){let g;u?u===401?g="permission_denied":g="rest_error:"+u:g="ok",r(g,null)}})}unlisten(e,n){let i=t.getListenId_(e,n);delete this.listens_[i]}get(e){let n=Gk(e._queryParams),i=e._path.toString(),r=new Ca;return this.restRequest_(i+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(n.auth=r.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ED(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=dh(a.responseText)}catch{Xn("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,c)}else a.status!==401&&a.status!==404&&Xn("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}};var XI=class{constructor(){this.rootNode_=at.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function _m(){return{value:null,children:new Map}}function kF(t,e,n){if(Te(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let i=Ne(e);t.children.has(i)||t.children.set(i,_m());let r=t.children.get(i);e=et(e),kF(r,e,n)}}function ZI(t,e,n){t.value!==null?n(e,t.value):k7(t,(i,r)=>{let s=new We(e.toString()+"/"+i);ZI(r,s,n)})}function k7(t,e){t.children.forEach((n,i)=>{e(i,n)})}var eC=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&gi(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}};var qk=10*1e3,F7=30*1e3,L7=5*60*1e3,tC=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new eC(e);let i=qk+(F7-qk)*Math.random();Ad(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let e=this.statsListener_.get(),n={},i=!1;gi(e,(r,s)=>{s>0&&Ui(this.statsToReport_,r)&&(n[r]=s,i=!0)}),i&&this.server_.reportStats(n),Ad(this.reportStats_.bind(this),Math.floor(Math.random()*2*L7))}};var zr=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(zr||{});function FF(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function LF(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function VF(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var nC=class t{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=zr.ACK_USER_WRITE,this.source=FF()}operationForChild(e){if(Te(this.path)){if(this.affectedTree.value!=null)return z(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new We(e));return new t($e(),n,this.revert)}}else return z(Ne(this.path)===e,"operationForChild called for unrelated child."),new t(et(this.path),this.affectedTree,this.revert)}};var cl=class t{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=zr.OVERWRITE}operationForChild(e){return Te(this.path)?new t(this.source,$e(),this.snap.getImmediateChild(e)):new t(this.source,et(this.path),this.snap)}};var ym=class t{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=zr.MERGE}operationForChild(e){if(Te(this.path)){let n=this.children.subtree(new We(e));return n.isEmpty()?null:n.value?new cl(this.source,$e(),n.value):new t(this.source,$e(),n)}else return z(Ne(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,et(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Nd=class{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Te(e))return this.isFullyInitialized()&&!this.filtered_;let n=Ne(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function V7(t,e,n,i){let r=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(P7(o.childName,o.snapshotNode))}),Sd(t,r,"child_removed",e,i,n),Sd(t,r,"child_added",e,i,n),Sd(t,r,"child_moved",s,i,n),Sd(t,r,"child_changed",e,i,n),Sd(t,r,"value",e,i,n),r}function Sd(t,e,n,i,r,s){let o=i.filter(a=>a.type===n);o.sort((a,c)=>j7(t,a,c)),o.forEach(a=>{let c=B7(t,a,s);r.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,t.query_))})})}function B7(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function j7(t,e,n){if(e.childName==null||n.childName==null)throw Ia("Should only compare child_ events.");let i=new Oe(e.childName,e.snapshotNode),r=new Oe(n.childName,n.snapshotNode);return t.index_.compare(i,r)}function BF(t,e){return{eventCache:t,serverCache:e}}function Md(t,e,n,i){return BF(new Nd(e,n,i),t.serverCache)}function jF(t,e,n,i){return BF(t.eventCache,new Nd(e,n,i))}function iC(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function da(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var DI,U7=()=>(DI||(DI=new pi(UK)),DI),kn=class t{constructor(e,n=U7()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return gi(e,(i,r)=>{n=n.set(new We(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:$e(),value:this.value};if(Te(e))return null;{let i=Ne(e),r=this.children.get(i);if(r!==null){let s=r.findRootMostMatchingPathAndValue(et(e),n);return s!=null?{path:Wt(new We(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Te(e))return this;{let n=Ne(e),i=this.children.get(n);return i!==null?i.subtree(et(e)):new t(null)}}set(e,n){if(Te(e))return new t(n,this.children);{let i=Ne(e),s=(this.children.get(i)||new t(null)).set(et(e),n),o=this.children.insert(i,s);return new t(this.value,o)}}remove(e){if(Te(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=Ne(e),i=this.children.get(n);if(i){let r=i.remove(et(e)),s;return r.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,r),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(Te(e))return this.value;{let n=Ne(e),i=this.children.get(n);return i?i.get(et(e)):null}}setTree(e,n){if(Te(e))return n;{let i=Ne(e),s=(this.children.get(i)||new t(null)).setTree(et(e),n),o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new t(this.value,o)}}fold(e){return this.fold_($e(),e)}fold_(e,n){let i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Wt(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,$e(),n)}findOnPath_(e,n,i){let r=this.value?i(n,this.value):!1;if(r)return r;if(Te(e))return null;{let s=Ne(e),o=this.children.get(s);return o?o.findOnPath_(et(e),Wt(n,s),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,$e(),n)}foreachOnPath_(e,n,i){if(Te(e))return this;{this.value&&i(n,this.value);let r=Ne(e),s=this.children.get(r);return s?s.foreachOnPath_(et(e),Wt(n,r),i):new t(null)}}foreach(e){this.foreach_($e(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(Wt(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}};var ki=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new kn(null))}};function xd(t,e,n){if(Te(e))return new ki(new kn(n));{let i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){let r=i.path,s=i.value,o=fi(r,e);return s=s.updateChild(o,n),new ki(t.writeTree_.set(r,s))}else{let r=new kn(n),s=t.writeTree_.setTree(e,r);return new ki(s)}}}function Wk(t,e,n){let i=t;return gi(n,(r,s)=>{i=xd(i,Wt(e,r),s)}),i}function Kk(t,e){if(Te(e))return ki.empty();{let n=t.writeTree_.setTree(e,new kn(null));return new ki(n)}}function rC(t,e){return ha(t,e)!=null}function ha(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(fi(n.path,e)):null}function Qk(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(hn,(i,r)=>{e.push(new Oe(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new Oe(i,r.value))}),e}function Us(t,e){if(Te(e))return t;{let n=ha(t,e);return n!=null?new ki(new kn(n)):new ki(t.writeTree_.subtree(e))}}function sC(t){return t.writeTree_.isEmpty()}function ll(t,e){return UF($e(),t.writeTree_,e)}function UF(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(z(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):n=UF(Wt(t,r),s,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(Wt(t,".priority"),i)),n}}function $F(t,e){return WF(e,t)}function $7(t,e,n,i,r){z(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=xd(t.visibleWrites,e,n)),t.lastWriteId=i}function H7(t,e){for(let n=0;n<t.allWrites.length;n++){let i=t.allWrites[n];if(i.writeId===e)return i}return null}function G7(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);z(n>=0,"removeWrite called with nonexistent writeId.");let i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,s=!1,o=t.allWrites.length-1;for(;r&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&z7(a,i.path)?r=!1:Pi(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return q7(t),!0;if(i.snap)t.visibleWrites=Kk(t.visibleWrites,i.path);else{let a=i.children;gi(a,c=>{t.visibleWrites=Kk(t.visibleWrites,Wt(i.path,c))})}return!0}else return!1}function z7(t,e){if(t.snap)return Pi(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Pi(Wt(t.path,n),e))return!0;return!1}function q7(t){t.visibleWrites=HF(t.allWrites,W7,$e()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function W7(t){return t.visible}function HF(t,e,n){let i=ki.empty();for(let r=0;r<t.length;++r){let s=t[r];if(e(s)){let o=s.path,a;if(s.snap)Pi(n,o)?(a=fi(n,o),i=xd(i,a,s.snap)):Pi(o,n)&&(a=fi(o,n),i=xd(i,$e(),s.snap.getChild(a)));else if(s.children){if(Pi(n,o))a=fi(n,o),i=Wk(i,a,s.children);else if(Pi(o,n))if(a=fi(o,n),Te(a))i=Wk(i,$e(),s.children);else{let c=Js(s.children,Ne(a));if(c){let u=c.getChild(et(a));i=xd(i,$e(),u)}}}else throw Ia("WriteRecord should have .snap or .children")}}return i}function GF(t,e,n,i,r){if(!i&&!r){let s=ha(t.visibleWrites,e);if(s!=null)return s;{let o=Us(t.visibleWrites,e);if(sC(o))return n;if(n==null&&!rC(o,$e()))return null;{let a=n||at.EMPTY_NODE;return ll(o,a)}}}else{let s=Us(t.visibleWrites,e);if(!r&&sC(s))return n;if(!r&&n==null&&!rC(s,$e()))return null;{let o=function(u){return(u.visible||r)&&(!i||!~i.indexOf(u.writeId))&&(Pi(u.path,e)||Pi(e,u.path))},a=HF(t.allWrites,o,e),c=n||at.EMPTY_NODE;return ll(a,c)}}}function K7(t,e,n){let i=at.EMPTY_NODE,r=ha(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(hn,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(n){let s=Us(t.visibleWrites,e);return n.forEachChild(hn,(o,a)=>{let c=ll(Us(s,new We(o)),a);i=i.updateImmediateChild(o,c)}),Qk(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{let s=Us(t.visibleWrites,e);return Qk(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function Q7(t,e,n,i,r){z(i||r,"Either existingEventSnap or existingServerSnap must exist");let s=Wt(e,n);if(rC(t.visibleWrites,s))return null;{let o=Us(t.visibleWrites,s);return sC(o)?r.getChild(n):ll(o,r.getChild(n))}}function Y7(t,e,n,i){let r=Wt(e,n),s=ha(t.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(n)){let o=Us(t.visibleWrites,r);return ll(o,i.getNode().getImmediateChild(n))}else return null}function J7(t,e){return ha(t.visibleWrites,e)}function X7(t,e,n,i,r,s,o){let a,c=Us(t.visibleWrites,e),u=ha(c,$e());if(u!=null)a=u;else if(n!=null)a=ll(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let d=[],f=o.getCompare(),g=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o),m=g.getNext();for(;m&&d.length<r;)f(m,i)!==0&&d.push(m),m=g.getNext();return d}else return[]}function Z7(){return{visibleWrites:ki.empty(),allWrites:[],lastWriteId:-1}}function oC(t,e,n,i){return GF(t.writeTree,t.treePath,e,n,i)}function zF(t,e){return K7(t.writeTree,t.treePath,e)}function Yk(t,e,n,i){return Q7(t.writeTree,t.treePath,e,n,i)}function vm(t,e){return J7(t.writeTree,Wt(t.treePath,e))}function eQ(t,e,n,i,r,s){return X7(t.writeTree,t.treePath,e,n,i,r,s)}function CC(t,e,n){return Y7(t.writeTree,t.treePath,e,n)}function qF(t,e){return WF(Wt(t.treePath,e),t.writeTree)}function WF(t,e){return{treePath:t,writeTree:e}}var aC=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,i=e.childName;z(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),z(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let s=r.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(i,Hk(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(i,O7(i,r.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(i,N7(i,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(i,Hk(i,e.snapshotNode,r.oldSnap));else throw Ia("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}};var cC=class{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}},KF=new cC,Od=class{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let i=this.optCompleteServerCache_!=null?new Nd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return CC(this.writes_,e,i)}}getChildAfterChild(e,n,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:da(this.viewCache_),s=eQ(this.writes_,r,n,1,i,e);return s.length===0?null:s[0]}};function tQ(t,e){z(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),z(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function nQ(t,e,n,i,r){let s=new aC,o,a;if(n.type===zr.OVERWRITE){let u=n;u.source.fromUser?o=lC(t,e,u.path,u.snap,i,r,s):(z(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Te(u.path),o=wm(t,e,u.path,u.snap,i,r,a,s))}else if(n.type===zr.MERGE){let u=n;u.source.fromUser?o=rQ(t,e,u.path,u.children,i,r,s):(z(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=uC(t,e,u.path,u.children,i,r,a,s))}else if(n.type===zr.ACK_USER_WRITE){let u=n;u.revert?o=aQ(t,e,u.path,i,r,s):o=sQ(t,e,u.path,u.affectedTree,i,r,s)}else if(n.type===zr.LISTEN_COMPLETE)o=oQ(t,e,n.path,i,s);else throw Ia("Unknown operation type: "+n.type);let c=s.getChanges();return iQ(e,o,c),{viewCache:o,changes:c}}function iQ(t,e,n){let i=e.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=iC(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(x7(iC(e)))}}function QF(t,e,n,i,r,s){let o=e.eventCache;if(vm(i,n)!=null)return e;{let a,c;if(Te(n))if(z(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let u=da(e),d=u instanceof at?u:at.EMPTY_NODE,f=zF(i,d);a=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{let u=oC(i,da(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{let u=Ne(n);if(u===".priority"){z($s(n)===1,"Can't have a priority with additional path components");let d=o.getNode();c=e.serverCache.getNode();let f=Yk(i,n,d,c);f!=null?a=t.filter.updatePriority(d,f):a=o.getNode()}else{let d=et(n),f;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();let g=Yk(i,n,o.getNode(),c);g!=null?f=o.getNode().getImmediateChild(u).updateChild(d,g):f=o.getNode().getImmediateChild(u)}else f=CC(i,u,e.serverCache);f!=null?a=t.filter.updateChild(o.getNode(),u,f,d,r,s):a=o.getNode()}}return Md(e,a,o.isFullyInitialized()||Te(n),t.filter.filtersNodes())}}function wm(t,e,n,i,r,s,o,a){let c=e.serverCache,u,d=o?t.filter:t.filter.getIndexedFilter();if(Te(n))u=d.updateFullNode(c.getNode(),i,null);else if(d.filtersNodes()&&!c.isFiltered()){let m=c.getNode().updateChild(n,i);u=d.updateFullNode(c.getNode(),m,null)}else{let m=Ne(n);if(!c.isCompleteForPath(n)&&$s(n)>1)return e;let v=et(n),C=c.getNode().getImmediateChild(m).updateChild(v,i);m===".priority"?u=d.updatePriority(c.getNode(),C):u=d.updateChild(c.getNode(),m,C,v,KF,null)}let f=jF(e,u,c.isFullyInitialized()||Te(n),d.filtersNodes()),g=new Od(r,f,s);return QF(t,f,n,r,g,a)}function lC(t,e,n,i,r,s,o){let a=e.eventCache,c,u,d=new Od(r,e,s);if(Te(n))u=t.filter.updateFullNode(e.eventCache.getNode(),i,o),c=Md(e,u,!0,t.filter.filtersNodes());else{let f=Ne(n);if(f===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),i),c=Md(e,u,a.isFullyInitialized(),a.isFiltered());else{let g=et(n),m=a.getNode().getImmediateChild(f),v;if(Te(g))v=i;else{let D=d.getCompleteChild(f);D!=null?DF(g)===".priority"&&D.getChild(AF(g)).isEmpty()?v=D:v=D.updateChild(g,i):v=at.EMPTY_NODE}if(m.equals(v))c=e;else{let D=t.filter.updateChild(a.getNode(),f,v,g,d,o);c=Md(e,D,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function Jk(t,e){return t.eventCache.isCompleteForChild(e)}function rQ(t,e,n,i,r,s,o){let a=e;return i.foreach((c,u)=>{let d=Wt(n,c);Jk(e,Ne(d))&&(a=lC(t,a,d,u,r,s,o))}),i.foreach((c,u)=>{let d=Wt(n,c);Jk(e,Ne(d))||(a=lC(t,a,d,u,r,s,o))}),a}function Xk(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function uC(t,e,n,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;Te(n)?u=i:u=new kn(null).setTree(n,i);let d=e.serverCache.getNode();return u.children.inorderTraversal((f,g)=>{if(d.hasChild(f)){let m=e.serverCache.getNode().getImmediateChild(f),v=Xk(t,m,g);c=wm(t,c,new We(f),v,r,s,o,a)}}),u.children.inorderTraversal((f,g)=>{let m=!e.serverCache.isCompleteForChild(f)&&g.value===null;if(!d.hasChild(f)&&!m){let v=e.serverCache.getNode().getImmediateChild(f),D=Xk(t,v,g);c=wm(t,c,new We(f),D,r,s,o,a)}}),c}function sQ(t,e,n,i,r,s,o){if(vm(r,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(i.value!=null){if(Te(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return wm(t,e,n,c.getNode().getChild(n),r,s,a,o);if(Te(n)){let u=new kn(null);return c.getNode().forEachChild(il,(d,f)=>{u=u.set(new We(d),f)}),uC(t,e,n,u,r,s,a,o)}else return e}else{let u=new kn(null);return i.foreach((d,f)=>{let g=Wt(n,d);c.isCompleteForPath(g)&&(u=u.set(d,c.getNode().getChild(g)))}),uC(t,e,n,u,r,s,a,o)}}function oQ(t,e,n,i,r){let s=e.serverCache,o=jF(e,s.getNode(),s.isFullyInitialized()||Te(n),s.isFiltered());return QF(t,o,n,i,KF,r)}function aQ(t,e,n,i,r,s){let o;if(vm(i,n)!=null)return e;{let a=new Od(i,e,r),c=e.eventCache.getNode(),u;if(Te(n)||Ne(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=oC(i,da(e));else{let f=e.serverCache.getNode();z(f instanceof at,"serverChildren would be complete if leaf node"),d=zF(i,f)}d=d,u=t.filter.updateFullNode(c,d,s)}else{let d=Ne(n),f=CC(i,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?u=t.filter.updateChild(c,d,f,et(n),a,s):e.eventCache.getNode().hasChild(d)?u=t.filter.updateChild(c,d,at.EMPTY_NODE,et(n),a,s):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=oC(i,da(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||vm(i,$e())!=null,Md(e,u,o,t.filter.filtersNodes())}}function cQ(t,e){let n=da(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Te(e)&&!n.getImmediateChild(Ne(e)).isEmpty())?n.getChild(e):null}function Zk(t,e,n,i){e.type===zr.MERGE&&e.source.queryId!==null&&(z(da(t.viewCache_),"We should always have a full cache before handling merges"),z(iC(t.viewCache_),"Missing event cache, even though we have a server cache"));let r=t.viewCache_,s=nQ(t.processor_,r,e,n,i);return tQ(t.processor_,s.viewCache),z(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,lQ(t,s.changes,s.viewCache.eventCache.getNode(),null)}function lQ(t,e,n,i){let r=i?[i]:t.eventRegistrations_;return V7(t.eventGenerator_,e,n,r)}var eF;function uQ(t){z(!eF,"__referenceConstructor has already been defined"),eF=t}function TC(t,e,n,i){let r=e.source.queryId;if(r!==null){let s=t.views.get(r);return z(s!=null,"SyncTree gave us an op for an invalid query."),Zk(s,e,n,i)}else{let s=[];for(let o of t.views.values())s=s.concat(Zk(o,e,n,i));return s}}function DC(t,e){let n=null;for(let i of t.views.values())n=n||cQ(i,e);return n}var tF;function dQ(t){z(!tF,"__referenceConstructor has already been defined"),tF=t}var Em=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new kn(null),this.pendingWriteTree_=Z7(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function hQ(t,e,n,i,r){return $7(t.pendingWriteTree_,e,n,i,r),r?Im(t,new cl(FF(),e,n)):[]}function tl(t,e,n=!1){let i=H7(t.pendingWriteTree_,e);if(G7(t.pendingWriteTree_,e)){let s=new kn(null);return i.snap!=null?s=s.set($e(),!0):gi(i.children,o=>{s=s.set(new We(o),!0)}),Im(t,new nC(i.path,s,n))}else return[]}function bm(t,e,n){return Im(t,new cl(LF(),e,n))}function fQ(t,e,n){let i=kn.fromObject(n);return Im(t,new ym(LF(),e,i))}function pQ(t,e,n,i){let r=ZF(t,i);if(r!=null){let s=eL(r),o=s.path,a=s.queryId,c=fi(o,e),u=new cl(VF(a),c,n);return tL(t,o,u)}else return[]}function gQ(t,e,n,i){let r=ZF(t,i);if(r){let s=eL(r),o=s.path,a=s.queryId,c=fi(o,e),u=kn.fromObject(n),d=new ym(VF(a),c,u);return tL(t,o,d)}else return[]}function YF(t,e,n){let r=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=fi(o,e),u=DC(a,c);if(u)return u});return GF(r,e,s,n,!0)}function Im(t,e){return JF(e,t.syncPointTree_,null,$F(t.pendingWriteTree_,$e()))}function JF(t,e,n,i){if(Te(t.path))return XF(t,e,n,i);{let r=e.get($e());n==null&&r!=null&&(n=DC(r,$e()));let s=[],o=Ne(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let u=n?n.getImmediateChild(o):null,d=qF(i,o);s=s.concat(JF(a,c,u,d))}return r&&(s=s.concat(TC(r,t,i,n))),s}}function XF(t,e,n,i){let r=e.get($e());n==null&&r!=null&&(n=DC(r,$e()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,u=qF(i,o),d=t.operationForChild(o);d&&(s=s.concat(XF(d,a,c,u)))}),r&&(s=s.concat(TC(r,t,i,n))),s}function ZF(t,e){return t.tagToQueryMap.get(e)}function eL(t){let e=t.indexOf("$");return z(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new We(t.substr(0,e))}}function tL(t,e,n){let i=t.syncPointTree_.get(e);z(i,"Missing sync point for query tag that we're tracking");let r=$F(t.pendingWriteTree_,e);return TC(i,n,r,null)}var dC=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},hC=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=Wt(this.path_,e);return new t(this.syncTree_,n)}node(){return YF(this.syncTree_,this.path_)}},mQ=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},nF=function(t,e,n){if(!t||typeof t!="object")return t;if(z(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return _Q(t[".sv"],e,n);if(typeof t[".sv"]=="object")return yQ(t[".sv"],e);z(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},_Q=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:z(!1,"Unexpected server value: "+t)}},yQ=function(t,e,n){t.hasOwnProperty("increment")||z(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let i=t.increment;typeof i!="number"&&z(!1,"Unexpected increment value: "+i);let r=e.node();if(z(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let o=r.getValue();return typeof o!="number"?i:o+i},vQ=function(t,e,n,i){return SC(e,new hC(n,t),i)},wQ=function(t,e,n){return SC(t,new dC(e),n)};function SC(t,e,n){let i=t.getPriority().val(),r=nF(i,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=nF(o.getValue(),e,n);return a!==o.getValue()||r!==o.getPriority().val()?new ol(a,dn(r)):t}else{let o=t;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new ol(r))),o.forEachChild(hn,(a,c)=>{let u=SC(c,e.getImmediateChild(a),n);u!==c&&(s=s.updateImmediateChild(a,u))}),s}}var Pd=class{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}};function AC(t,e){let n=e instanceof We?e:new We(e),i=t,r=Ne(n);for(;r!==null;){let s=Js(i.node.children,r)||{children:{},childCount:0};i=new Pd(r,i,s),n=et(n),r=Ne(n)}return i}function hl(t){return t.node.value}function nL(t,e){t.node.value=e,fC(t)}function iL(t){return t.node.childCount>0}function EQ(t){return hl(t)===void 0&&!iL(t)}function Cm(t,e){gi(t.node.children,(n,i)=>{e(new Pd(n,t,i))})}function rL(t,e,n,i){n&&!i&&e(t),Cm(t,r=>{rL(r,e,!0,i)}),n&&i&&e(t)}function bQ(t,e,n){let i=n?t:t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Bd(t){return new We(t.parent===null?t.name:Bd(t.parent)+"/"+t.name)}function fC(t){t.parent!==null&&IQ(t.parent,t.name,t)}function IQ(t,e,n){let i=EQ(n),r=Ui(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,fC(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,fC(t))}var CQ=/[\[\].#$\/\u0000-\u001F\u007F]/,TQ=/[\[\].#$\u0000-\u001F\u007F]/,SI=10*1024*1024,sL=function(t){return typeof t=="string"&&t.length!==0&&!CQ.test(t)},DQ=function(t){return typeof t=="string"&&t.length!==0&&!TQ.test(t)},SQ=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),DQ(t)};var oL=function(t,e,n){let i=n instanceof We?new UI(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+aa(i));if(typeof e=="function")throw new Error(t+"contains a function "+aa(i)+" with contents = "+e.toString());if(cF(e))throw new Error(t+"contains "+e.toString()+" "+aa(i));if(typeof e=="string"&&e.length>SI/3&&Bl(e)>SI)throw new Error(t+"contains a string greater than "+SI+" utf8 bytes "+aa(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(gi(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!sL(o)))throw new Error(t+" contains an invalid key ("+o+") "+aa(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);y7(i,o),oL(t,a,i),v7(i)}),r&&s)throw new Error(t+' contains ".value" child '+aa(i)+" in addition to actual children.")}};var AQ=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!sL(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!SQ(n))throw new Error(ID(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var pC=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function RQ(t,e){let n=null;for(let i=0;i<e.length;i++){let r=e[i],s=r.getPath();n!==null&&!RF(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(r)}n&&t.eventLists_.push(n)}function fa(t,e,n){RQ(t,n),MQ(t,i=>Pi(i,e)||Pi(e,i))}function MQ(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){let r=t.eventLists_[i];if(r){let s=r.path;e(s)?(xQ(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function xQ(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let i=n.getEventRunner();la&&un("event: "+n.toString()),Ld(i)}}}var NQ="repo_interrupt",OQ=25,gC=class{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new pC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=_m(),this.transactionQueueTree_=new Pd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function PQ(t,e,n){if(t.stats_=EC(t.repoInfo_),t.forceRestClient_||WK())t.server_=new JI(t.repoInfo_,(i,r,s,o)=>{iF(t,i,r,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>rF(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{kt(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new bC(t.repoInfo_,e,(i,r,s,o)=>{iF(t,i,r,s,o)},i=>{rF(t,i)},i=>{FQ(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=QK(t.repoInfo_,()=>new tC(t.stats_,t.server_)),t.infoData_=new XI,t.infoSyncTree_=new Em({startListening:(i,r,s,o)=>{let a=[],c=t.infoData_.getNode(i._path);return c.isEmpty()||(a=bm(t.infoSyncTree_,i._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),RC(t,"connected",!1),t.serverSyncTree_=new Em({startListening:(i,r,s,o)=>(t.server_.listen(i,s,r,(a,c)=>{let u=o(a,c);fa(t.eventQueue_,i._path,u)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function kQ(t){let n=t.infoData_.getNode(new We(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function aL(t){return mQ({timestamp:kQ(t)})}function iF(t,e,n,i,r){t.dataUpdateCount++;let s=new We(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(i){let c=Ll(n,u=>dn(u));o=gQ(t.serverSyncTree_,s,c,r)}else{let c=dn(n);o=pQ(t.serverSyncTree_,s,c,r)}else if(i){let c=Ll(n,u=>dn(u));o=fQ(t.serverSyncTree_,s,c)}else{let c=dn(n);o=bm(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=xC(t,s)),fa(t.eventQueue_,a,o)}function rF(t,e){RC(t,"connected",e),e===!1&&VQ(t)}function FQ(t,e){gi(e,(n,i)=>{RC(t,n,i)})}function RC(t,e,n){let i=new We("/.info/"+e),r=dn(n);t.infoData_.updateSnapshot(i,r);let s=bm(t.infoSyncTree_,i,r);fa(t.eventQueue_,i,s)}function LQ(t){return t.nextWriteId_++}function VQ(t){cL(t,"onDisconnectEvents");let e=aL(t),n=_m();ZI(t.onDisconnect_,$e(),(r,s)=>{let o=vQ(r,s,t.serverSyncTree_,e);kF(n,r,o)});let i=[];ZI(n,$e(),(r,s)=>{i=i.concat(bm(t.serverSyncTree_,r,s));let o=$Q(t,r);xC(t,o)}),t.onDisconnect_=_m(),fa(t.eventQueue_,$e(),i)}function BQ(t){t.persistentConnection_&&t.persistentConnection_.interrupt(NQ)}function cL(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),un(n,...e)}function lL(t,e,n){return YF(t.serverSyncTree_,e,n)||at.EMPTY_NODE}function MC(t,e=t.transactionQueueTree_){if(e||Tm(t,e),hl(e)){let n=dL(t,e);z(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&jQ(t,Bd(e),n)}else iL(e)&&Cm(e,n=>{MC(t,n)})}function jQ(t,e,n){let i=n.map(u=>u.currentWriteId),r=lL(t,e,i),s=r,o=r.hash();for(let u=0;u<n.length;u++){let d=n[u];z(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let f=fi(e,d.path);s=s.updateChild(f,d.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,u=>{cL(t,"transaction put response",{path:c.toString(),status:u});let d=[];if(u==="ok"){let f=[];for(let g=0;g<n.length;g++)n[g].status=2,d=d.concat(tl(t.serverSyncTree_,n[g].currentWriteId)),n[g].onComplete&&f.push(()=>n[g].onComplete(null,!0,n[g].currentOutputSnapshotResolved)),n[g].unwatcher();Tm(t,AC(t.transactionQueueTree_,e)),MC(t,t.transactionQueueTree_),fa(t.eventQueue_,e,d);for(let g=0;g<f.length;g++)Ld(f[g])}else{if(u==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{Xn("transaction at "+c.toString()+" failed: "+u);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=u}xC(t,e)}},o)}function xC(t,e){let n=uL(t,e),i=Bd(n),r=dL(t,n);return UQ(t,r,i),i}function UQ(t,e,n){if(e.length===0)return;let i=[],r=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],u=fi(n,c.path),d=!1,f;if(z(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,r=r.concat(tl(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=OQ)d=!0,f="maxretry",r=r.concat(tl(t.serverSyncTree_,c.currentWriteId,!0));else{let g=lL(t,c.path,o);c.currentInputSnapshot=g;let m=e[a].update(g.val());if(m!==void 0){oL("transaction failed: Data returned ",m,c.path);let v=dn(m);typeof m=="object"&&m!=null&&Ui(m,".priority")||(v=v.updatePriority(g.getPriority()));let C=c.currentWriteId,x=aL(t),k=wQ(v,g,x);c.currentOutputSnapshotRaw=v,c.currentOutputSnapshotResolved=k,c.currentWriteId=LQ(t),o.splice(o.indexOf(C),1),r=r.concat(hQ(t.serverSyncTree_,c.path,k,c.currentWriteId,c.applyLocally)),r=r.concat(tl(t.serverSyncTree_,C,!0))}else d=!0,f="nodata",r=r.concat(tl(t.serverSyncTree_,c.currentWriteId,!0))}fa(t.eventQueue_,n,r),r=[],d&&(e[a].status=2,function(g){setTimeout(g,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(f),!1,null))))}Tm(t,t.transactionQueueTree_);for(let a=0;a<i.length;a++)Ld(i[a]);MC(t,t.transactionQueueTree_)}function uL(t,e){let n,i=t.transactionQueueTree_;for(n=Ne(e);n!==null&&hl(i)===void 0;)i=AC(i,n),e=et(e),n=Ne(e);return i}function dL(t,e){let n=[];return hL(t,e,n),n.sort((i,r)=>i.order-r.order),n}function hL(t,e,n){let i=hl(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);Cm(e,r=>{hL(t,r,n)})}function Tm(t,e){let n=hl(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,nL(e,n.length>0?n:void 0)}Cm(e,i=>{Tm(t,i)})}function $Q(t,e){let n=Bd(uL(t,e)),i=AC(t.transactionQueueTree_,e);return bQ(i,r=>{AI(t,r)}),AI(t,i),rL(i,r=>{AI(t,r)}),n}function AI(t,e){let n=hl(e);if(n){let i=[],r=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(z(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(z(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(tl(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?nL(e,void 0):n.length=s+1,fa(t.eventQueue_,Bd(e),r);for(let o=0;o<i.length;o++)Ld(i[o])}}function HQ(t){let e="",n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function GQ(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Xn(`Invalid query segment '${n}' in query '${t}'`)}return e}var sF=function(t,e){let n=zQ(t),i=n.namespace;n.domain==="firebase.com"&&qr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&qr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||BK();let r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new um(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new We(n.pathString)}},zQ=function(t){let e="",n="",i="",r="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let d=t.indexOf("/");d===-1&&(d=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(d,f)),d<f&&(r=HQ(t.substring(d,f)));let g=GQ(t.substring(Math.min(t.length,f)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;let m=e.slice(0,u);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{let v=e.indexOf(".");i=e.substring(0,v).toLowerCase(),n=e.substring(v+1),s=i}"ns"in g&&(s=g.ns)}return{host:e,port:c,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};var mC=class t{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return Te(this._path)?null:DF(this._path)}get ref(){return new ul(this._repo,this._path)}get _queryIdentifier(){let e=zk(this._queryParams),n=wC(e);return n==="{}"?"default":n}get _queryObject(){return zk(this._queryParams)}isEqual(e){if(e=Be(e),!(e instanceof t))return!1;let n=this._repo===e._repo,i=RF(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+_7(this._path)}};var ul=class t extends mC{constructor(e,n){super(e,n,new YI,!1)}get parent(){let e=AF(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};uQ(ul);dQ(ul);var qQ="FIREBASE_DATABASE_EMULATOR_HOST",_C={},WQ=!1;function KQ(t,e,n,i){t.repoInfo_=new um(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function QQ(t,e,n,i,r){let s=i||t.options.databaseURL;s===void 0&&(t.options.projectId||qr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),un("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=sF(s,r),a=o.repoInfo,c,u;typeof process<"u"&&process.env&&(u=process.env[qQ]),u?(c=!0,s=`http://${u}?ns=${a.namespace}`,o=sF(s,r),a=o.repoInfo):c=!o.repoInfo.secure;let d=r&&c?new Rd(Rd.OWNER):new PI(t.name,t.options,e);AQ("Invalid Firebase Database URL",o),Te(o.path)||qr("Database URL must point to the root of a Firebase Database (not including a child path).");let f=JQ(a,t,d,new OI(t.name,n));return new yC(f,t)}function YQ(t,e){let n=_C[e];(!n||n[t.key]!==t)&&qr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),BQ(t),delete n[t.key]}function JQ(t,e,n,i){let r=_C[e.name];r||(r={},_C[e.name]=r);let s=r[t.toURLString()];return s&&qr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new gC(t,WQ,n,i),r[t.toURLString()]=s,s}var yC=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(PQ(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ul(this._repo,$e())),this._rootInternal}_delete(){return this._rootInternal!==null&&(YQ(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&qr("Cannot call "+e+" on a deleted database.")}};function fL(t=Ft(),e){let n=Dt(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let i=ns("database");i&&pL(n,...i)}return n}function pL(t,e,n,i={}){t=Be(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&qr("Cannot call useEmulator() after instance has already been initialized.");let r=t._repoInternal,s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&qr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Rd(Rd.OWNER);else if(i.mockUserToken){let o=typeof i.mockUserToken=="string"?i.mockUserToken:Ta(i.mockUserToken,t.app.options.projectId);s=new Rd(o)}KQ(r,e,n,s)}function XQ(t){FK(is),ut(new lt("database",(e,{instanceIdentifier:n})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return QQ(i,r,s,n)},"PUBLIC").setMultipleInstances(!0)),oe(Sk,Ak,t),oe(Sk,Ak,"esm2017")}bC.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};bC.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};XQ();var jd=class{constructor(e){return e}},gL="database",NC=class{constructor(){return tn(gL)}};var OC=new j("angularfire2.database-instances");function ZQ(t,e){let n=an(gL,t,e);return n&&new jd(n)}function eY(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new jd(i)}}var tY={provide:NC,deps:[[new _e,OC]]},nY={provide:jd,useFactory:ZQ,deps:[[new _e,OC],_t]};function mL(t,...e){return oe("angularfire",dt.full,"rtdb"),Ze([nY,tY,{provide:OC,useFactory:eY(t),multi:!0,deps:[te,Re,wt,Mt,[new _e,Si],[new _e,In],...e]}])}var _L=be(fL,!0);var wL="functions";var PC=class{constructor(e,n,i){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(r=>this.auth=r,()=>{}),this.messaging||n.get().then(r=>this.messaging=r,()=>{}),this.appCheck||i.get().then(r=>this.appCheck=r,()=>{})}getAuthToken(){return R(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return R(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return R(this,null,function*(){if(this.appCheck){let n=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return n.error?null:n.token}return null})}getContext(e){return R(this,null,function*(){let n=yield this.getAuthToken(),i=yield this.getMessagingToken(),r=yield this.getAppCheckToken(e);return{authToken:n,messagingToken:i,appCheckToken:r}})}};var kC="us-central1";var FC=class{constructor(e,n,i,r,s=kC,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new PC(n,i,r),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(s);this.customDomain=a.origin,this.region=kC}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){let n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}};function iY(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}var yL="@firebase/functions",vL="0.11.6";var rY="auth-internal",sY="app-check-internal",oY="messaging-internal";function aY(t,e){let n=(i,{instanceIdentifier:r})=>{let s=i.getProvider("app").getImmediate(),o=i.getProvider(rY),a=i.getProvider(oY),c=i.getProvider(sY);return new FC(s,o,a,c,r,t)};ut(new lt(wL,n,"PUBLIC").setMultipleInstances(!0)),oe(yL,vL,e),oe(yL,vL,"esm2017")}function EL(t=Ft(),e=kC){let i=Dt(Be(t),wL).getImmediate({identifier:e}),r=ns("functions");return r&&bL(i,...r),i}function bL(t,e,n){iY(Be(t),e,n)}aY(fetch.bind(self));var Ud=class{constructor(e){return e}},IL="functions",LC=class{constructor(){return tn(IL)}};var VC=new j("angularfire2.functions-instances");function cY(t,e){let n=an(IL,t,e);return n&&new Ud(n)}function lY(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Ud(i)}}var uY={provide:LC,deps:[[new _e,VC]]},dY={provide:Ud,useFactory:cY,deps:[[new _e,VC],_t]};function CL(t,...e){return oe("angularfire",dt.full,"fn"),Ze([dY,uY,{provide:VC,useFactory:lY(t),multi:!0,deps:[te,Re,wt,Mt,[new _e,Si],[new _e,In],...e]}])}var TL=be(EL,!0);var hY="/firebase-messaging-sw.js",fY="/firebase-cloud-messaging-push-scope",xL="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",pY="https://fcmregistrations.googleapis.com/v1",NL="google.c.a.c_id",gY="google.c.a.c_l",mY="google.c.a.ts",_Y="google.c.a.e";var Dm=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(Dm||{});function Wr(t){let e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function yY(t){let e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(n),r=new Uint8Array(i.length);for(let s=0;s<i.length;++s)r[s]=i.charCodeAt(s);return r}var BC="fcm_token_details_db",vY=5,DL="fcm_token_object_Store";function wY(t){return R(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(BC))return null;let e=null;return(yield jl(BC,vY,{upgrade:(i,r,s,o)=>R(this,null,function*(){var a;if(r<2||!i.objectStoreNames.contains(DL))return;let c=o.objectStore(DL),u=yield c.index("fcmSenderId").get(t);if(yield c.clear(),!!u){if(r===2){let d=u;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:Wr(d.vapidKey)}}}else if(r===3){let d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Wr(d.auth),p256dh:Wr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Wr(d.vapidKey)}}}else if(r===4){let d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Wr(d.auth),p256dh:Wr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Wr(d.vapidKey)}}}}})})).close(),yield hh(BC),yield hh("fcm_vapid_details_db"),yield hh("undefined"),EY(e)?e:null})}function EY(t){if(!t||!t.subscriptionOptions)return!1;let{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var bY="firebase-messaging-database",IY=1,$d="firebase-messaging-store",jC=null;function OL(){return jC||(jC=jl(bY,IY,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore($d)}}})),jC}function CY(t){return R(this,null,function*(){let e=PL(t),i=yield(yield OL()).transaction($d).objectStore($d).get(e);if(i)return i;{let r=yield wY(t.appConfig.senderId);if(r)return yield HC(t,r),r}})}function HC(t,e){return R(this,null,function*(){let n=PL(t),r=(yield OL()).transaction($d,"readwrite");return yield r.objectStore($d).put(e,n),yield r.done,e})}function PL({appConfig:t}){return t.appId}var TY={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},An=new ji("messaging","Messaging",TY);function DY(t,e){return R(this,null,function*(){let n=yield zC(t),i=kL(e),r={method:"POST",headers:n,body:JSON.stringify(i)},s;try{s=yield(yield fetch(GC(t.appConfig),r)).json()}catch(o){throw An.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw An.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw An.create("token-subscribe-no-token");return s.token})}function SY(t,e){return R(this,null,function*(){let n=yield zC(t),i=kL(e.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(i)},s;try{s=yield(yield fetch(`${GC(t.appConfig)}/${e.token}`,r)).json()}catch(o){throw An.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw An.create("token-update-failed",{errorInfo:o})}if(!s.token)throw An.create("token-update-no-token");return s.token})}function AY(t,e){return R(this,null,function*(){let i={method:"DELETE",headers:yield zC(t)};try{let s=yield(yield fetch(`${GC(t.appConfig)}/${e}`,i)).json();if(s.error){let o=s.error.message;throw An.create("token-unsubscribe-failed",{errorInfo:o})}}catch(r){throw An.create("token-unsubscribe-failed",{errorInfo:r?.toString()})}})}function GC({projectId:t}){return`${pY}/projects/${t}/registrations`}function zC(n){return R(this,arguments,function*({appConfig:t,installations:e}){let i=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${i}`})})}function kL({p256dh:t,auth:e,endpoint:n,vapidKey:i}){let r={web:{endpoint:n,auth:e,p256dh:t}};return i!==xL&&(r.web.applicationPubKey=i),r}var RY=7*24*60*60*1e3;function MY(t){return R(this,null,function*(){let e=yield NY(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Wr(e.getKey("auth")),p256dh:Wr(e.getKey("p256dh"))},i=yield CY(t.firebaseDependencies);if(i){if(OY(i.subscriptionOptions,n))return Date.now()>=i.createTime+RY?xY(t,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{yield AY(t.firebaseDependencies,i.token)}catch(r){console.warn(r)}return SL(t.firebaseDependencies,n)}else return SL(t.firebaseDependencies,n)})}function xY(t,e){return R(this,null,function*(){try{let n=yield SY(t.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield HC(t.firebaseDependencies,i),n}catch(n){throw n}})}function SL(t,e){return R(this,null,function*(){let i={token:yield DY(t,e),createTime:Date.now(),subscriptionOptions:e};return yield HC(t,i),i.token})}function NY(t,e){return R(this,null,function*(){let n=yield t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:yY(e)})})}function OY(t,e){let n=e.vapidKey===t.vapidKey,i=e.endpoint===t.endpoint,r=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&i&&r&&s}function AL(t){let e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return PY(e,t),kY(e,t),FY(e,t),e}function PY(t,e){if(!e.notification)return;t.notification={};let n=e.notification.title;n&&(t.notification.title=n);let i=e.notification.body;i&&(t.notification.body=i);let r=e.notification.image;r&&(t.notification.image=r);let s=e.notification.icon;s&&(t.notification.icon=s)}function kY(t,e){e.data&&(t.data=e.data)}function FY(t,e){var n,i,r,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};let a=(r=(i=e.fcmOptions)===null||i===void 0?void 0:i.link)!==null&&r!==void 0?r:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);let c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}function LY(t){return typeof t=="object"&&!!t&&NL in t}FL("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");FL("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function FL(t,e){let n=[];for(let i=0;i<t.length;i++)n.push(t.charAt(i)),i<e.length&&n.push(e.charAt(i));return n.join("")}function VY(t){if(!t||!t.options)throw UC("App Configuration Object");if(!t.name)throw UC("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(let i of e)if(!n[i])throw UC(i);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function UC(t){return An.create("missing-app-config-values",{valueName:t})}var $C=class{constructor(e,n,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let r=VY(e);this.firebaseDependencies={app:e,appConfig:r,installations:n,analyticsProvider:i}}_delete(){return Promise.resolve()}};function BY(t){return R(this,null,function*(){try{t.swRegistration=yield navigator.serviceWorker.register(hY,{scope:fY}),t.swRegistration.update().catch(()=>{})}catch(e){throw An.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function jY(t,e){return R(this,null,function*(){if(!e&&!t.swRegistration&&(yield BY(t)),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw An.create("invalid-sw-registration");t.swRegistration=e}})}function UY(t,e){return R(this,null,function*(){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=xL)})}function $Y(t,e){return R(this,null,function*(){if(!navigator)throw An.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw An.create("permission-blocked");return yield UY(t,e?.vapidKey),yield jY(t,e?.serviceWorkerRegistration),MY(t)})}function HY(t,e,n){return R(this,null,function*(){let i=GY(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:n[NL],message_name:n[gY],message_time:n[mY],message_device_time:Math.floor(Date.now()/1e3)})})}function GY(t){switch(t){case Dm.NOTIFICATION_CLICKED:return"notification_open";case Dm.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function zY(t,e){return R(this,null,function*(){let n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Dm.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(AL(n)):t.onMessageHandler.next(AL(n)));let i=n.data;LY(i)&&i[_Y]==="1"&&(yield HY(t,n.messageType,i))})}var RL="@firebase/messaging",ML="0.12.10";var qY=t=>{let e=new $C(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>zY(e,n)),e},WY=t=>{let e=t.getProvider("messaging").getImmediate();return{getToken:i=>$Y(e,i)}};function KY(){ut(new lt("messaging",qY,"PUBLIC")),ut(new lt("messaging-internal",WY,"PRIVATE")),oe(RL,ML),oe(RL,ML,"esm2017")}function qC(){return R(this,null,function*(){try{yield Ys()}catch{return!1}return typeof window<"u"&&yi()&&Fl()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function LL(t=Ft()){return qC().then(e=>{if(!e)throw An.create("unsupported-browser")},e=>{throw An.create("indexed-db-unsupported")}),Dt(Be(t),"messaging").getImmediate()}KY();var Hd=class{constructor(e){return e}},VL="messaging",WC=class{constructor(){return tn(VL)}};var BL="__angularfire_symbol__messagingIsSupported",KC="__angularfire_symbol__messagingIsSupportedValue";globalThis[BL]||=qC().then(t=>globalThis[KC]=t).catch(()=>globalThis[KC]=!1);var Sm={async:()=>globalThis[BL],sync:()=>{let t=globalThis[KC];if(t===void 0)throw new Error(Cc("Messaging"));return t}},QC=new j("angularfire2.messaging-instances");function QY(t,e){if(!Sm.sync())return null;let n=an(VL,t,e);return n&&new Hd(n)}function YY(t){return(e,n)=>{if(!Sm.sync())return null;let i=e.runOutsideAngular(()=>t(n));return new Hd(i)}}var JY={provide:WC,deps:[[new _e,QC]]},XY={provide:Hd,useFactory:QY,deps:[[new _e,QC],_t]};function jL(t,...e){return oe("angularfire",dt.full,"fcm"),Ze([XY,JY,{provide:ws,useValue:Sm.async,multi:!0},{provide:QC,useFactory:YY(t),multi:!0,deps:[te,Re,wt,Mt,...e]}])}var T0e=Sm.async;var UL=be(LL,!0);var WL="firebasestorage.googleapis.com",ZY="storageBucket",eJ=2*60*1e3,tJ=10*60*1e3;var dr=class t extends vi{constructor(e,n,i=0){super(YC(e),`Firebase Storage: ${n} (${YC(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return YC(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Qr=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(Qr||{});function YC(t){return"storage/"+t}function nJ(){let t="An unknown error occurred, please check the error payload for server response.";return new dr(Qr.UNKNOWN,t)}function iJ(){return new dr(Qr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function rJ(){return new dr(Qr.CANCELED,"User canceled the upload/download.")}function sJ(t){return new dr(Qr.INVALID_URL,"Invalid URL '"+t+"'.")}function oJ(t){return new dr(Qr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function $L(t){return new dr(Qr.INVALID_ARGUMENT,t)}function KL(){return new dr(Qr.APP_DELETED,"The Firebase app was deleted.")}function aJ(t){return new dr(Qr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var Kr=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(i.path==="")return i;throw oJ(e)}static makeFromUrl(e,n){let i=null,r="([A-Za-z0-9.\\-_]+)";function s(F){F.path.charAt(F.path.length-1)==="/"&&(F.path_=F.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+r+o,"i"),c={bucket:1,path:3};function u(F){F.path_=decodeURIComponent(F.path)}let d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${d}/b/${r}/o${g}`,"i"),v={bucket:1,path:3},D=n===WL?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",x=new RegExp(`^https?://${D}/${r}/${C}`,"i"),P=[{regex:a,indices:c,postModify:s},{regex:m,indices:v,postModify:u},{regex:x,indices:{bucket:1,path:2},postModify:u}];for(let F=0;F<P.length;F++){let Z=P[F],W=Z.regex.exec(e);if(W){let b=W[Z.indices.bucket],y=W[Z.indices.path];y||(y=""),i=new t(b,y),Z.postModify(i);break}}if(i==null)throw sJ(e);return i}},JC=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function cJ(t,e,n){let i=1,r=null,s=null,o=!1,a=0;function c(){return a===2}let u=!1;function d(...C){u||(u=!0,e.apply(null,C))}function f(C){r=setTimeout(()=>{r=null,t(m,c())},C)}function g(){s&&clearTimeout(s)}function m(C,...x){if(u){g();return}if(C){g(),d.call(null,C,...x);return}if(c()||o){g(),d.call(null,C,...x);return}i<64&&(i*=2);let P;a===1?(a=2,P=0):P=(i+Math.random())*1e3,f(P)}let v=!1;function D(C){v||(v=!0,g(),!u&&(r!==null?(C||(a=2),clearTimeout(r),f(0)):C||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,D(!0)},n),D}function lJ(t){t(!1)}function uJ(t){return t!==void 0}function HL(t,e,n,i){if(i<e)throw $L(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw $L(`Invalid value for '${t}'. Expected ${n} or less.`)}function dJ(t){let e=encodeURIComponent,n="?";for(let i in t)if(t.hasOwnProperty(i)){let r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var XC=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(XC||{});function hJ(t,e){let n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||r||s}var ZC=class{constructor(e,n,i,r,s,o,a,c,u,d,f,g=!0){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,v)=>{this.resolve_=m,this.reject_=v,this.start_()})}start_(){let e=(i,r)=>{if(r){i(!1,new fl(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===XC.NO_ERROR,c=s.getStatus();if(!a||hJ(c,this.additionalRetryCodes_)&&this.retry){let d=s.getErrorCode()===XC.ABORT;i(!1,new fl(!1,null,d));return}let u=this.successCodes_.indexOf(c)!==-1;i(!0,new fl(u,s))})},n=(i,r)=>{let s=this.resolve_,o=this.reject_,a=r.connection;if(r.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());uJ(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=nJ();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(r.canceled){let c=this.appDelete_?KL():rJ();o(c)}else{let c=iJ();o(c)}};this.canceled_?n(!1,new fl(!1,null,!0)):this.backoffId_=cJ(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&lJ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},fl=class{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}};function fJ(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function pJ(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function gJ(t,e){e&&(t["X-Firebase-GMPID"]=e)}function mJ(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function _J(t,e,n,i,r,s,o=!0){let a=dJ(t.urlParams),c=t.url+a,u=Object.assign({},t.headers);return gJ(u,e),fJ(u,n),pJ(u,s),mJ(u,i),new ZC(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,o)}function yJ(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function vJ(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}var x0e=256*1024;var eT=class t{constructor(e,n){this._service=e,n instanceof Kr?this._location=n:this._location=Kr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new Kr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return vJ(this._location.path)}get storage(){return this._service}get parent(){let e=yJ(this._location.path);if(e===null)return null;let n=new Kr(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw aJ(e)}};function GL(t,e){let n=e?.[ZY];return n==null?null:Kr.makeFromBucketSpec(n,t)}function wJ(t,e,n,i={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:Ta(r,t.app.options.projectId))}var tT=class{constructor(e,n,i,r,s){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=WL,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=eJ,this._maxUploadRetryTime=tJ,this._requests=new Set,r!=null?this._bucket=Kr.makeFromBucketSpec(r,this._host):this._bucket=GL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Kr.makeFromBucketSpec(this._url,e):this._bucket=GL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){HL("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){HL("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return R(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return R(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new eT(this,e)}_makeRequest(e,n,i,r,s=!0){if(this._deleted)return new JC(KL());{let o=_J(e,this._appId,i,r,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return R(this,null,function*(){let[i,r]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()})}},zL="@firebase/storage",qL="0.12.6";var QL="storage";function YL(t=Ft(),e){t=Be(t);let i=Dt(t,QL).getImmediate({identifier:e}),r=ns("storage");return r&&JL(i,...r),i}function JL(t,e,n,i={}){wJ(t,e,n,i)}function EJ(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new tT(n,i,r,e,is)}function bJ(){ut(new lt(QL,EJ,"PUBLIC").setMultipleInstances(!0)),oe(zL,qL,""),oe(zL,qL,"esm2017")}bJ();var Gd=class{constructor(e){return e}},XL="storage",nT=class{constructor(){return tn(XL)}};var iT=new j("angularfire2.storage-instances");function IJ(t,e){let n=an(XL,t,e);return n&&new Gd(n)}function CJ(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Gd(i)}}var TJ={provide:nT,deps:[[new _e,iT]]},DJ={provide:Gd,useFactory:IJ,deps:[[new _e,iT],_t]};function ZL(t,...e){return oe("angularfire",dt.full,"gcs"),Ze([DJ,TJ,{provide:iT,useFactory:CJ(t),multi:!0,deps:[te,Re,wt,Mt,[new _e,Si],[new _e,In],...e]}])}var eV=be(YL,!0);var rT="@firebase/remote-config",tV="0.4.8";var nV="remote-config";var SJ={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},Fn=new ji("remoteconfig","Remote Config",SJ);function iV(t=Ft()){return t=Be(t),Dt(t,nV).getImmediate()}function rV(t){let e=Be(t);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}var sT=class{constructor(e,n,i,r){this.client=e,this.storage=n,this.storageCache=i,this.logger=r}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let i=Date.now()-n,r=i<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${i}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}fetch(e){return R(this,null,function*(){let[n,i]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(i&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n))return i;e.eTag=i&&i.eTag;let r=yield this.client.fetch(e),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return r.status===200&&s.push(this.storage.setLastSuccessfulFetchResponse(r)),yield Promise.all(s),r})}};function AJ(t=navigator){return t.languages&&t.languages[0]||t.language}var oT=class{constructor(e,n,i,r,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=i,this.projectId=r,this.apiKey=s,this.appId=o}fetch(e){return R(this,null,function*(){let[n,i]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,o={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:i,app_id:this.appId,language_code:AJ()},c={method:"POST",headers:o,body:JSON.stringify(a)},u=fetch(s,c),d=new Promise((C,x)=>{e.signal.addEventListener(()=>{let k=new Error("The operation was aborted.");k.name="AbortError",x(k)})}),f;try{yield Promise.race([u,d]),f=yield u}catch(C){let x="fetch-client-network";throw C?.name==="AbortError"&&(x="fetch-timeout"),Fn.create(x,{originalErrorMessage:C?.message})}let g=f.status,m=f.headers.get("ETag")||void 0,v,D;if(f.status===200){let C;try{C=yield f.json()}catch(x){throw Fn.create("fetch-client-parse",{originalErrorMessage:x?.message})}v=C.entries,D=C.state}if(D==="INSTANCE_STATE_UNSPECIFIED"?g=500:D==="NO_CHANGE"?g=304:(D==="NO_TEMPLATE"||D==="EMPTY_CONFIG")&&(v={}),g!==304&&g!==200)throw Fn.create("fetch-status",{httpStatus:g});return{status:g,eTag:m,config:v}})}};function RJ(t,e){return new Promise((n,i)=>{let r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(s),i(Fn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function MJ(t){if(!(t instanceof vi)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var aT=class{constructor(e,n){this.client=e,this.storage=n}fetch(e){return R(this,null,function*(){let n=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,n)})}attemptFetch(r,s){return R(this,arguments,function*(e,{throttleEndTimeMillis:n,backoffCount:i}){yield RJ(e.signal,n);try{let o=yield this.client.fetch(e);return yield this.storage.deleteThrottleMetadata(),o}catch(o){if(!MJ(o))throw o;let a={throttleEndTimeMillis:Date.now()+Da(i),backoffCount:i+1};return yield this.storage.setThrottleMetadata(a),this.attemptFetch(e,a)}})}};var xJ=60*1e3,NJ=12*60*60*1e3,cT=class{constructor(e,n,i,r,s){this.app=e,this._client=n,this._storageCache=i,this._storage=r,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:xJ,minimumFetchIntervalMillis:NJ},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}};function Am(t,e){let n=t.target.error||void 0;return Fn.create(e,{originalErrorMessage:n&&n?.message})}var pa="app_namespace_store",OJ="firebase_remote_config",PJ=1;function kJ(){return new Promise((t,e)=>{try{let n=indexedDB.open(OJ,PJ);n.onerror=i=>{e(Am(i,"storage-open"))},n.onsuccess=i=>{t(i.target.result)},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(pa,{keyPath:"compositeKey"})}}}catch(n){e(Fn.create("storage-open",{originalErrorMessage:n?.message}))}})}var lT=class{constructor(e,n,i,r=kJ()){this.appId=e,this.appName=n,this.namespace=i,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){return R(this,null,function*(){let n=yield this.openDbPromise;return new Promise((i,r)=>{let o=n.transaction([pa],"readonly").objectStore(pa),a=this.createCompositeKey(e);try{let c=o.get(a);c.onerror=u=>{r(Am(u,"storage-get"))},c.onsuccess=u=>{let d=u.target.result;i(d?d.value:void 0)}}catch(c){r(Fn.create("storage-get",{originalErrorMessage:c?.message}))}})})}set(e,n){return R(this,null,function*(){let i=yield this.openDbPromise;return new Promise((r,s)=>{let a=i.transaction([pa],"readwrite").objectStore(pa),c=this.createCompositeKey(e);try{let u=a.put({compositeKey:c,value:n});u.onerror=d=>{s(Am(d,"storage-set"))},u.onsuccess=()=>{r()}}catch(u){s(Fn.create("storage-set",{originalErrorMessage:u?.message}))}})})}delete(e){return R(this,null,function*(){let n=yield this.openDbPromise;return new Promise((i,r)=>{let o=n.transaction([pa],"readwrite").objectStore(pa),a=this.createCompositeKey(e);try{let c=o.delete(a);c.onerror=u=>{r(Am(u,"storage-delete"))},c.onsuccess=()=>{i()}}catch(c){r(Fn.create("storage-delete",{originalErrorMessage:c?.message}))}})})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}};var uT=class{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){return R(this,null,function*(){let e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),i=this.storage.getActiveConfig(),r=yield e;r&&(this.lastFetchStatus=r);let s=yield n;s&&(this.lastSuccessfulFetchTimestampMillis=s);let o=yield i;o&&(this.activeConfig=o)})}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}};function FJ(){ut(new lt(nV,t,"PUBLIC").setMultipleInstances(!0)),oe(rT,tV),oe(rT,tV,"esm2017");function t(e,{instanceIdentifier:n}){let i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Fn.create("registration-window");if(!yi())throw Fn.create("indexed-db-unavailable");let{projectId:s,apiKey:o,appId:a}=i.options;if(!s)throw Fn.create("registration-project-id");if(!o)throw Fn.create("registration-api-key");if(!a)throw Fn.create("registration-app-id");n=n||"firebase";let c=new lT(a,i.name,n),u=new uT(c),d=new $i(rT);d.logLevel=Bn.ERROR;let f=new oT(r,is,n,s,o,a),g=new aT(f,c),m=new sT(g,c,u,d),v=new cT(i,m,u,c,d);return rV(v),v}}function sV(){return R(this,null,function*(){if(!yi())return!1;try{return yield Ys()}catch{return!1}})}FJ();var zd=class{constructor(e){return e}},oV="remote-config",dT=class{constructor(){return tn(oV)}};var hT="__angularfire_symbol__remoteConfigIsSupportedValue",aV="__angularfire_symbol__remoteConfigIsSupported";globalThis[aV]||=sV().then(t=>globalThis[hT]=t).catch(()=>globalThis[hT]=!1);var Rm={async:()=>globalThis[aV],sync:()=>{let t=globalThis[hT];if(t===void 0)throw new Error(Cc("RemoteConfig"));return t}},fT=new j("angularfire2.remote-config-instances");function LJ(t,e){if(!Rm.sync())return null;let n=an(oV,t,e);return n&&new zd(n)}function VJ(t){return(e,n)=>{if(!Rm.sync())return null;let i=e.runOutsideAngular(()=>t(n));return new zd(i)}}var BJ={provide:dT,deps:[[new _e,fT]]},jJ={provide:zd,useFactory:LJ,deps:[[new _e,fT],_t]};function cV(t,...e){return oe("angularfire",dt.full,"rc"),Ze([jJ,BJ,{provide:ws,useValue:Rm.async,multi:!0},{provide:fT,useFactory:VJ(t),multi:!0,deps:[te,Re,wt,Mt,...e]}])}var Awe=Rm.async;var lV=be(iV,!0);var pT={firebaseConfig:{projectId:"expense-tracker-app-ee455",appId:"1:652658231358:web:16ee9e447afa0f2385696f",storageBucket:"expense-tracker-app-ee455.appspot.com",apiKey:"AIzaSyDOMgJPMGTfIHUNZDV8k4z4jXNGEaXMZBo",authDomain:"expense-tracker-app-ee455.firebaseapp.com",messagingSenderId:"652658231358",measurementId:"G-8E6SEFV1FX"}};var uV={providers:[{provide:Zg,useValue:pT.firebaseConfig},LM(BP),nM(),dx(()=>hx(pT.firebaseConfig)),_x(()=>wx()),Dk(()=>Ck()),Tk,wI,rP(()=>lP()),mL(()=>_L()),CL(()=>TL()),jL(()=>UL()),ZL(()=>eV()),cV(()=>lV())]};var dV=(()=>{let e=class e{constructor(i){this.auth=i}ngOnInit(){this.auth.user$.subscribe(i=>{i?this.auth.currentUserSig.set({email:i.email,username:i.displayName}):this.auth.currentUserSig.set(null),console.log(this.auth.currentUserSig())})}};e.\u0275fac=function(r){return new(r||e)(Y(nr))},e.\u0275cmp=Ae({type:e,selectors:[["app-root"]],standalone:!0,features:[Rr([iN()]),Me],decls:1,vars:0,template:function(r,s){r&1&&re(0,"router-outlet")},dependencies:[Zt,Bu]});let t=e;return t})();tM(dV,uV).catch(t=>console.error(t));
