import{$ as wR,A as A4,B as Na,C as Td,D as vR,E as zv,F as Uv,G as M4,H as P4,I as k4,J as O4,K as jv,L as rp,M as tt,N as gn,O as lo,P as La,Q as Wv,R as Nb,S as jn,T as Ei,U as Lc,V as N4,W as Vi,X as Lb,Y as Qe,Z as yR,_ as CR,a as E4,aa as bR,b as Pb,ba as SR,c as x4,ca as Vb,d as D4,da as Bb,e as Ce,ea as _R,f as tp,fa as Po,g as kb,h as T4,i as R4,j as Nc,k as np,l as ip,m as Gv,n as pR,o as gR,p as I4,q as ka,r as mR,s as cs,t as Dd,u as Hv,v as Qs,w as Oa,x as Ob,y as Li,z as F4}from"./chunk-HLVNZW4O.js";import{a as B,b as pe,c as Ab,d as pr,f as Mb,g as fR,h as N}from"./chunk-SIAVTO45.js";var wc=pr($r=>{"use strict";var nFe=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function iFe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}$r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(var i in n)iFe(n,i)&&(e[i]=n[i])}}return e};$r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var rFe={arraySet:function(e,t,n,i,r){if(t.subarray&&e.subarray){e.set(t.subarray(n,n+i),r);return}for(var o=0;o<i;o++)e[r+o]=t[n+o]},flattenChunks:function(e){var t,n,i,r,o,s;for(i=0,t=0,n=e.length;t<n;t++)i+=e[t].length;for(s=new Uint8Array(i),r=0,t=0,n=e.length;t<n;t++)o=e[t],s.set(o,r),r+=o.length;return s}},oFe={arraySet:function(e,t,n,i,r){for(var o=0;o<i;o++)e[r+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};$r.setTyped=function(e){e?($r.Buf8=Uint8Array,$r.Buf16=Uint16Array,$r.Buf32=Int32Array,$r.assign($r,rFe)):($r.Buf8=Array,$r.Buf16=Array,$r.Buf32=Array,$r.assign($r,oFe))};$r.setTyped(nFe)});var GQ=pr(_m=>{"use strict";var sFe=wc(),aFe=4,yQ=0,CQ=1,lFe=2;function Sm(e){for(var t=e.length;--t>=0;)e[t]=0}var cFe=0,xQ=1,uFe=2,dFe=3,hFe=258,ON=29,kC=256,FC=kC+1+ON,bm=30,NN=19,DQ=2*FC+1,hf=15,IN=16,fFe=7,LN=256,TQ=16,RQ=17,IQ=18,PN=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],bD=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],pFe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],FQ=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],gFe=512,bc=new Array((FC+2)*2);Sm(bc);var IC=new Array(bm*2);Sm(IC);var AC=new Array(gFe);Sm(AC);var MC=new Array(hFe-dFe+1);Sm(MC);var VN=new Array(ON);Sm(VN);var SD=new Array(bm);Sm(SD);function FN(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}var AQ,MQ,PQ;function AN(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function kQ(e){return e<256?AC[e]:AC[256+(e>>>7)]}function PC(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function Do(e,t,n){e.bi_valid>IN-n?(e.bi_buf|=t<<e.bi_valid&65535,PC(e,e.bi_buf),e.bi_buf=t>>IN-e.bi_valid,e.bi_valid+=n-IN):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function gl(e,t,n){Do(e,n[t*2],n[t*2+1])}function OQ(e,t){var n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1}function mFe(e){e.bi_valid===16?(PC(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function vFe(e,t){var n=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,o=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,l=t.stat_desc.max_length,c,u,d,h,p,g,m=0;for(h=0;h<=hf;h++)e.bl_count[h]=0;for(n[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<DQ;c++)u=e.heap[c],h=n[n[u*2+1]*2+1]+1,h>l&&(h=l,m++),n[u*2+1]=h,!(u>i)&&(e.bl_count[h]++,p=0,u>=a&&(p=s[u-a]),g=n[u*2],e.opt_len+=g*(h+p),o&&(e.static_len+=g*(r[u*2+1]+p)));if(m!==0){do{for(h=l-1;e.bl_count[h]===0;)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[l]--,m-=2}while(m>0);for(h=l;h!==0;h--)for(u=e.bl_count[h];u!==0;)d=e.heap[--c],!(d>i)&&(n[d*2+1]!==h&&(e.opt_len+=(h-n[d*2+1])*n[d*2],n[d*2+1]=h),u--)}}function NQ(e,t,n){var i=new Array(hf+1),r=0,o,s;for(o=1;o<=hf;o++)i[o]=r=r+n[o-1]<<1;for(s=0;s<=t;s++){var a=e[s*2+1];a!==0&&(e[s*2]=OQ(i[a]++,a))}}function yFe(){var e,t,n,i,r,o=new Array(hf+1);for(n=0,i=0;i<ON-1;i++)for(VN[i]=n,e=0;e<1<<PN[i];e++)MC[n++]=i;for(MC[n-1]=i,r=0,i=0;i<16;i++)for(SD[i]=r,e=0;e<1<<bD[i];e++)AC[r++]=i;for(r>>=7;i<bm;i++)for(SD[i]=r<<7,e=0;e<1<<bD[i]-7;e++)AC[256+r++]=i;for(t=0;t<=hf;t++)o[t]=0;for(e=0;e<=143;)bc[e*2+1]=8,e++,o[8]++;for(;e<=255;)bc[e*2+1]=9,e++,o[9]++;for(;e<=279;)bc[e*2+1]=7,e++,o[7]++;for(;e<=287;)bc[e*2+1]=8,e++,o[8]++;for(NQ(bc,FC+1,o),e=0;e<bm;e++)IC[e*2+1]=5,IC[e*2]=OQ(e,5);AQ=new FN(bc,PN,kC+1,FC,hf),MQ=new FN(IC,bD,0,bm,hf),PQ=new FN(new Array(0),pFe,0,NN,fFe)}function LQ(e){var t;for(t=0;t<FC;t++)e.dyn_ltree[t*2]=0;for(t=0;t<bm;t++)e.dyn_dtree[t*2]=0;for(t=0;t<NN;t++)e.bl_tree[t*2]=0;e.dyn_ltree[LN*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function VQ(e){e.bi_valid>8?PC(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function CFe(e,t,n,i){VQ(e),i&&(PC(e,n),PC(e,~n)),sFe.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function wQ(e,t,n,i){var r=t*2,o=n*2;return e[r]<e[o]||e[r]===e[o]&&i[t]<=i[n]}function MN(e,t,n){for(var i=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&wQ(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!wQ(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i}function bQ(e,t,n){var i,r,o=0,s,a;if(e.last_lit!==0)do i=e.pending_buf[e.d_buf+o*2]<<8|e.pending_buf[e.d_buf+o*2+1],r=e.pending_buf[e.l_buf+o],o++,i===0?gl(e,r,t):(s=MC[r],gl(e,s+kC+1,t),a=PN[s],a!==0&&(r-=VN[s],Do(e,r,a)),i--,s=kQ(i),gl(e,s,n),a=bD[s],a!==0&&(i-=SD[s],Do(e,i,a)));while(o<e.last_lit);gl(e,LN,t)}function kN(e,t){var n=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,o=t.stat_desc.elems,s,a,l=-1,c;for(e.heap_len=0,e.heap_max=DQ,s=0;s<o;s++)n[s*2]!==0?(e.heap[++e.heap_len]=l=s,e.depth[s]=0):n[s*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[c*2]=1,e.depth[c]=0,e.opt_len--,r&&(e.static_len-=i[c*2+1]);for(t.max_code=l,s=e.heap_len>>1;s>=1;s--)MN(e,n,s);c=o;do s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],MN(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=a,n[c*2]=n[s*2]+n[a*2],e.depth[c]=(e.depth[s]>=e.depth[a]?e.depth[s]:e.depth[a])+1,n[s*2+1]=n[a*2+1]=c,e.heap[1]=c++,MN(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],vFe(e,t),NQ(n,l,e.bl_count)}function SQ(e,t,n){var i,r=-1,o,s=t[0*2+1],a=0,l=7,c=4;for(s===0&&(l=138,c=3),t[(n+1)*2+1]=65535,i=0;i<=n;i++)o=s,s=t[(i+1)*2+1],!(++a<l&&o===s)&&(a<c?e.bl_tree[o*2]+=a:o!==0?(o!==r&&e.bl_tree[o*2]++,e.bl_tree[TQ*2]++):a<=10?e.bl_tree[RQ*2]++:e.bl_tree[IQ*2]++,a=0,r=o,s===0?(l=138,c=3):o===s?(l=6,c=3):(l=7,c=4))}function _Q(e,t,n){var i,r=-1,o,s=t[0*2+1],a=0,l=7,c=4;for(s===0&&(l=138,c=3),i=0;i<=n;i++)if(o=s,s=t[(i+1)*2+1],!(++a<l&&o===s)){if(a<c)do gl(e,o,e.bl_tree);while(--a!==0);else o!==0?(o!==r&&(gl(e,o,e.bl_tree),a--),gl(e,TQ,e.bl_tree),Do(e,a-3,2)):a<=10?(gl(e,RQ,e.bl_tree),Do(e,a-3,3)):(gl(e,IQ,e.bl_tree),Do(e,a-11,7));a=0,r=o,s===0?(l=138,c=3):o===s?(l=6,c=3):(l=7,c=4)}}function wFe(e){var t;for(SQ(e,e.dyn_ltree,e.l_desc.max_code),SQ(e,e.dyn_dtree,e.d_desc.max_code),kN(e,e.bl_desc),t=NN-1;t>=3&&e.bl_tree[FQ[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t}function bFe(e,t,n,i){var r;for(Do(e,t-257,5),Do(e,n-1,5),Do(e,i-4,4),r=0;r<i;r++)Do(e,e.bl_tree[FQ[r]*2+1],3);_Q(e,e.dyn_ltree,t-1),_Q(e,e.dyn_dtree,n-1)}function SFe(e){var t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return yQ;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return CQ;for(n=32;n<kC;n++)if(e.dyn_ltree[n*2]!==0)return CQ;return yQ}var EQ=!1;function _Fe(e){EQ||(yFe(),EQ=!0),e.l_desc=new AN(e.dyn_ltree,AQ),e.d_desc=new AN(e.dyn_dtree,MQ),e.bl_desc=new AN(e.bl_tree,PQ),e.bi_buf=0,e.bi_valid=0,LQ(e)}function BQ(e,t,n,i){Do(e,(cFe<<1)+(i?1:0),3),CFe(e,t,n,!0)}function EFe(e){Do(e,xQ<<1,3),gl(e,LN,bc),mFe(e)}function xFe(e,t,n,i){var r,o,s=0;e.level>0?(e.strm.data_type===lFe&&(e.strm.data_type=SFe(e)),kN(e,e.l_desc),kN(e,e.d_desc),s=wFe(e),r=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=r&&(r=o)):r=o=n+5,n+4<=r&&t!==-1?BQ(e,t,n,i):e.strategy===aFe||o===r?(Do(e,(xQ<<1)+(i?1:0),3),bQ(e,bc,IC)):(Do(e,(uFe<<1)+(i?1:0),3),bFe(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),bQ(e,e.dyn_ltree,e.dyn_dtree)),LQ(e),i&&VQ(e)}function DFe(e,t,n){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(MC[n]+kC+1)*2]++,e.dyn_dtree[kQ(t)*2]++),e.last_lit===e.lit_bufsize-1}_m._tr_init=_Fe;_m._tr_stored_block=BQ;_m._tr_flush_block=xFe;_m._tr_tally=DFe;_m._tr_align=EFe});var BN=pr((Got,HQ)=>{"use strict";function TFe(e,t,n,i){for(var r=e&65535|0,o=e>>>16&65535|0,s=0;n!==0;){s=n>2e3?2e3:n,n-=s;do r=r+t[i++]|0,o=o+r|0;while(--s);r%=65521,o%=65521}return r|o<<16|0}HQ.exports=TFe});var GN=pr((Hot,zQ)=>{"use strict";function RFe(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t}var IFe=RFe();function FFe(e,t,n,i){var r=IFe,o=i+n;e^=-1;for(var s=i;s<o;s++)e=e>>>8^r[(e^t[s])&255];return e^-1}zQ.exports=FFe});var _D=pr((zot,UQ)=>{"use strict";UQ.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}});var ZQ=pr(yl=>{"use strict";var Zr=wc(),Ps=GQ(),KQ=BN(),Xu=GN(),AFe=_D(),mf=0,MFe=1,PFe=3,td=4,jQ=5,vl=0,WQ=1,ks=-2,kFe=-3,HN=-5,OFe=-1,NFe=1,ED=2,LFe=3,VFe=4,BFe=0,GFe=2,RD=8,HFe=9,zFe=15,UFe=8,jFe=29,WFe=256,UN=WFe+1+jFe,qFe=30,KFe=19,YFe=2*UN+1,QFe=15,Ot=3,Ju=258,ba=Ju+Ot+1,XFe=32,ID=42,jN=69,xD=73,DD=91,TD=103,ff=113,NC=666,Pi=1,LC=2,pf=3,Dm=4,$Fe=3;function ed(e,t){return e.msg=AFe[t],t}function qQ(e){return(e<<1)-(e>4?9:0)}function Zu(e){for(var t=e.length;--t>=0;)e[t]=0}function $u(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(Zr.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))}function cr(e,t){Ps._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,$u(e.strm)}function Yt(e,t){e.pending_buf[e.pending++]=t}function OC(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function ZFe(e,t,n,i){var r=e.avail_in;return r>i&&(r=i),r===0?0:(e.avail_in-=r,Zr.arraySet(t,e.input,e.next_in,r,n),e.state.wrap===1?e.adler=KQ(e.adler,t,r,n):e.state.wrap===2&&(e.adler=Xu(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)}function YQ(e,t){var n=e.max_chain_length,i=e.strstart,r,o,s=e.prev_length,a=e.nice_match,l=e.strstart>e.w_size-ba?e.strstart-(e.w_size-ba):0,c=e.window,u=e.w_mask,d=e.prev,h=e.strstart+Ju,p=c[i+s-1],g=c[i+s];e.prev_length>=e.good_match&&(n>>=2),a>e.lookahead&&(a=e.lookahead);do if(r=t,!(c[r+s]!==g||c[r+s-1]!==p||c[r]!==c[i]||c[++r]!==c[i+1])){i+=2,r++;do;while(c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&i<h);if(o=Ju-(h-i),i=h-Ju,o>s){if(e.match_start=t,s=o,o>=a)break;p=c[i+s-1],g=c[i+s]}}while((t=d[t&u])>l&&--n!==0);return s<=e.lookahead?s:e.lookahead}function gf(e){var t=e.w_size,n,i,r,o,s;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-ba)){Zr.arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,i=e.hash_size,n=i;do r=e.head[--n],e.head[n]=r>=t?r-t:0;while(--i);i=t,n=i;do r=e.prev[--n],e.prev[n]=r>=t?r-t:0;while(--i);o+=t}if(e.strm.avail_in===0)break;if(i=ZFe(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=i,e.lookahead+e.insert>=Ot)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+Ot-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<Ot)););}while(e.lookahead<ba&&e.strm.avail_in!==0)}function JFe(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(gf(e),e.lookahead===0&&t===mf)return Pi;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+n;if((e.strstart===0||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,cr(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-ba&&(cr(e,!1),e.strm.avail_out===0))return Pi}return e.insert=0,t===td?(cr(e,!0),e.strm.avail_out===0?pf:Dm):(e.strstart>e.block_start&&(cr(e,!1),e.strm.avail_out===0),Pi)}function zN(e,t){for(var n,i;;){if(e.lookahead<ba){if(gf(e),e.lookahead<ba&&t===mf)return Pi;if(e.lookahead===0)break}if(n=0,e.lookahead>=Ot&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Ot-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-ba&&(e.match_length=YQ(e,n)),e.match_length>=Ot)if(i=Ps._tr_tally(e,e.strstart-e.match_start,e.match_length-Ot),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Ot){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Ot-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=Ps._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(cr(e,!1),e.strm.avail_out===0))return Pi}return e.insert=e.strstart<Ot-1?e.strstart:Ot-1,t===td?(cr(e,!0),e.strm.avail_out===0?pf:Dm):e.last_lit&&(cr(e,!1),e.strm.avail_out===0)?Pi:LC}function Em(e,t){for(var n,i,r;;){if(e.lookahead<ba){if(gf(e),e.lookahead<ba&&t===mf)return Pi;if(e.lookahead===0)break}if(n=0,e.lookahead>=Ot&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Ot-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Ot-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ba&&(e.match_length=YQ(e,n),e.match_length<=5&&(e.strategy===NFe||e.match_length===Ot&&e.strstart-e.match_start>4096)&&(e.match_length=Ot-1)),e.prev_length>=Ot&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-Ot,i=Ps._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-Ot),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+Ot-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Ot-1,e.strstart++,i&&(cr(e,!1),e.strm.avail_out===0))return Pi}else if(e.match_available){if(i=Ps._tr_tally(e,0,e.window[e.strstart-1]),i&&cr(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Pi}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=Ps._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Ot-1?e.strstart:Ot-1,t===td?(cr(e,!0),e.strm.avail_out===0?pf:Dm):e.last_lit&&(cr(e,!1),e.strm.avail_out===0)?Pi:LC}function eAe(e,t){for(var n,i,r,o,s=e.window;;){if(e.lookahead<=Ju){if(gf(e),e.lookahead<=Ju&&t===mf)return Pi;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Ot&&e.strstart>0&&(r=e.strstart-1,i=s[r],i===s[++r]&&i===s[++r]&&i===s[++r])){o=e.strstart+Ju;do;while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&r<o);e.match_length=Ju-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Ot?(n=Ps._tr_tally(e,1,e.match_length-Ot),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Ps._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(cr(e,!1),e.strm.avail_out===0))return Pi}return e.insert=0,t===td?(cr(e,!0),e.strm.avail_out===0?pf:Dm):e.last_lit&&(cr(e,!1),e.strm.avail_out===0)?Pi:LC}function tAe(e,t){for(var n;;){if(e.lookahead===0&&(gf(e),e.lookahead===0)){if(t===mf)return Pi;break}if(e.match_length=0,n=Ps._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(cr(e,!1),e.strm.avail_out===0))return Pi}return e.insert=0,t===td?(cr(e,!0),e.strm.avail_out===0?pf:Dm):e.last_lit&&(cr(e,!1),e.strm.avail_out===0)?Pi:LC}function ml(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}var xm;xm=[new ml(0,0,0,0,JFe),new ml(4,4,8,4,zN),new ml(4,5,16,8,zN),new ml(4,6,32,32,zN),new ml(4,4,16,16,Em),new ml(8,16,32,32,Em),new ml(8,16,128,128,Em),new ml(8,32,128,256,Em),new ml(32,128,258,1024,Em),new ml(32,258,258,4096,Em)];function nAe(e){e.window_size=2*e.w_size,Zu(e.head),e.max_lazy_match=xm[e.level].max_lazy,e.good_match=xm[e.level].good_length,e.nice_match=xm[e.level].nice_length,e.max_chain_length=xm[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Ot-1,e.match_available=0,e.ins_h=0}function iAe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=RD,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Zr.Buf16(YFe*2),this.dyn_dtree=new Zr.Buf16((2*qFe+1)*2),this.bl_tree=new Zr.Buf16((2*KFe+1)*2),Zu(this.dyn_ltree),Zu(this.dyn_dtree),Zu(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Zr.Buf16(QFe+1),this.heap=new Zr.Buf16(2*UN+1),Zu(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Zr.Buf16(2*UN+1),Zu(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function QQ(e){var t;return!e||!e.state?ed(e,ks):(e.total_in=e.total_out=0,e.data_type=GFe,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?ID:ff,e.adler=t.wrap===2?0:1,t.last_flush=mf,Ps._tr_init(t),vl)}function XQ(e){var t=QQ(e);return t===vl&&nAe(e.state),t}function rAe(e,t){return!e||!e.state||e.state.wrap!==2?ks:(e.state.gzhead=t,vl)}function $Q(e,t,n,i,r,o){if(!e)return ks;var s=1;if(t===OFe&&(t=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),r<1||r>HFe||n!==RD||i<8||i>15||t<0||t>9||o<0||o>VFe)return ed(e,ks);i===8&&(i=9);var a=new iAe;return e.state=a,a.strm=e,a.wrap=s,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+Ot-1)/Ot),a.window=new Zr.Buf8(a.w_size*2),a.head=new Zr.Buf16(a.hash_size),a.prev=new Zr.Buf16(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Zr.Buf8(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=o,a.method=n,XQ(e)}function oAe(e,t){return $Q(e,t,RD,zFe,UFe,BFe)}function sAe(e,t){var n,i,r,o;if(!e||!e.state||t>jQ||t<0)return e?ed(e,ks):ks;if(i=e.state,!e.output||!e.input&&e.avail_in!==0||i.status===NC&&t!==td)return ed(e,e.avail_out===0?HN:ks);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===ID)if(i.wrap===2)e.adler=0,Yt(i,31),Yt(i,139),Yt(i,8),i.gzhead?(Yt(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Yt(i,i.gzhead.time&255),Yt(i,i.gzhead.time>>8&255),Yt(i,i.gzhead.time>>16&255),Yt(i,i.gzhead.time>>24&255),Yt(i,i.level===9?2:i.strategy>=ED||i.level<2?4:0),Yt(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(Yt(i,i.gzhead.extra.length&255),Yt(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=Xu(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=jN):(Yt(i,0),Yt(i,0),Yt(i,0),Yt(i,0),Yt(i,0),Yt(i,i.level===9?2:i.strategy>=ED||i.level<2?4:0),Yt(i,$Fe),i.status=ff);else{var s=RD+(i.w_bits-8<<4)<<8,a=-1;i.strategy>=ED||i.level<2?a=0:i.level<6?a=1:i.level===6?a=2:a=3,s|=a<<6,i.strstart!==0&&(s|=XFe),s+=31-s%31,i.status=ff,OC(i,s),i.strstart!==0&&(OC(i,e.adler>>>16),OC(i,e.adler&65535)),e.adler=1}if(i.status===jN)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&!(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=Xu(e.adler,i.pending_buf,i.pending-r,r)),$u(e),r=i.pending,i.pending===i.pending_buf_size));)Yt(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(e.adler=Xu(e.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=xD)}else i.status=xD;if(i.status===xD)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=Xu(e.adler,i.pending_buf,i.pending-r,r)),$u(e),r=i.pending,i.pending===i.pending_buf_size)){o=1;break}i.gzindex<i.gzhead.name.length?o=i.gzhead.name.charCodeAt(i.gzindex++)&255:o=0,Yt(i,o)}while(o!==0);i.gzhead.hcrc&&i.pending>r&&(e.adler=Xu(e.adler,i.pending_buf,i.pending-r,r)),o===0&&(i.gzindex=0,i.status=DD)}else i.status=DD;if(i.status===DD)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=Xu(e.adler,i.pending_buf,i.pending-r,r)),$u(e),r=i.pending,i.pending===i.pending_buf_size)){o=1;break}i.gzindex<i.gzhead.comment.length?o=i.gzhead.comment.charCodeAt(i.gzindex++)&255:o=0,Yt(i,o)}while(o!==0);i.gzhead.hcrc&&i.pending>r&&(e.adler=Xu(e.adler,i.pending_buf,i.pending-r,r)),o===0&&(i.status=TD)}else i.status=TD;if(i.status===TD&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&$u(e),i.pending+2<=i.pending_buf_size&&(Yt(i,e.adler&255),Yt(i,e.adler>>8&255),e.adler=0,i.status=ff)):i.status=ff),i.pending!==0){if($u(e),e.avail_out===0)return i.last_flush=-1,vl}else if(e.avail_in===0&&qQ(t)<=qQ(n)&&t!==td)return ed(e,HN);if(i.status===NC&&e.avail_in!==0)return ed(e,HN);if(e.avail_in!==0||i.lookahead!==0||t!==mf&&i.status!==NC){var l=i.strategy===ED?tAe(i,t):i.strategy===LFe?eAe(i,t):xm[i.level].func(i,t);if((l===pf||l===Dm)&&(i.status=NC),l===Pi||l===pf)return e.avail_out===0&&(i.last_flush=-1),vl;if(l===LC&&(t===MFe?Ps._tr_align(i):t!==jQ&&(Ps._tr_stored_block(i,0,0,!1),t===PFe&&(Zu(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),$u(e),e.avail_out===0))return i.last_flush=-1,vl}return t!==td?vl:i.wrap<=0?WQ:(i.wrap===2?(Yt(i,e.adler&255),Yt(i,e.adler>>8&255),Yt(i,e.adler>>16&255),Yt(i,e.adler>>24&255),Yt(i,e.total_in&255),Yt(i,e.total_in>>8&255),Yt(i,e.total_in>>16&255),Yt(i,e.total_in>>24&255)):(OC(i,e.adler>>>16),OC(i,e.adler&65535)),$u(e),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?vl:WQ)}function aAe(e){var t;return!e||!e.state?ks:(t=e.state.status,t!==ID&&t!==jN&&t!==xD&&t!==DD&&t!==TD&&t!==ff&&t!==NC?ed(e,ks):(e.state=null,t===ff?ed(e,kFe):vl))}function lAe(e,t){var n=t.length,i,r,o,s,a,l,c,u;if(!e||!e.state||(i=e.state,s=i.wrap,s===2||s===1&&i.status!==ID||i.lookahead))return ks;for(s===1&&(e.adler=KQ(e.adler,t,n,0)),i.wrap=0,n>=i.w_size&&(s===0&&(Zu(i.head),i.strstart=0,i.block_start=0,i.insert=0),u=new Zr.Buf8(i.w_size),Zr.arraySet(u,t,n-i.w_size,i.w_size,0),t=u,n=i.w_size),a=e.avail_in,l=e.next_in,c=e.input,e.avail_in=n,e.next_in=0,e.input=t,gf(i);i.lookahead>=Ot;){r=i.strstart,o=i.lookahead-(Ot-1);do i.ins_h=(i.ins_h<<i.hash_shift^i.window[r+Ot-1])&i.hash_mask,i.prev[r&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=r,r++;while(--o);i.strstart=r,i.lookahead=Ot-1,gf(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=Ot-1,i.match_available=0,e.next_in=l,e.input=c,e.avail_in=a,i.wrap=s,vl}yl.deflateInit=oAe;yl.deflateInit2=$Q;yl.deflateReset=XQ;yl.deflateResetKeep=QQ;yl.deflateSetHeader=rAe;yl.deflate=sAe;yl.deflateEnd=aAe;yl.deflateSetDictionary=lAe;yl.deflateInfo="pako deflate (from Nodeca project)"});var WN=pr(Tm=>{"use strict";var FD=wc(),JQ=!0,eX=!0;try{String.fromCharCode.apply(null,[0])}catch{JQ=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{eX=!1}var VC=new FD.Buf8(256);for(Sc=0;Sc<256;Sc++)VC[Sc]=Sc>=252?6:Sc>=248?5:Sc>=240?4:Sc>=224?3:Sc>=192?2:1;var Sc;VC[254]=VC[254]=1;Tm.string2buf=function(e){var t,n,i,r,o,s=e.length,a=0;for(r=0;r<s;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<s&&(i=e.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new FD.Buf8(a),o=0,r=0;o<a;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<s&&(i=e.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|n&63):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|n&63):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|n&63);return t};function tX(e,t){if(t<65534&&(e.subarray&&eX||!e.subarray&&JQ))return String.fromCharCode.apply(null,FD.shrinkBuf(e,t));for(var n="",i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n}Tm.buf2binstring=function(e){return tX(e,e.length)};Tm.binstring2buf=function(e){for(var t=new FD.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t};Tm.buf2string=function(e,t){var n,i,r,o,s=t||e.length,a=new Array(s*2);for(i=0,n=0;n<s;){if(r=e[n++],r<128){a[i++]=r;continue}if(o=VC[r],o>4){a[i++]=65533,n+=o-1;continue}for(r&=o===2?31:o===3?15:7;o>1&&n<s;)r=r<<6|e[n++]&63,o--;if(o>1){a[i++]=65533;continue}r<65536?a[i++]=r:(r-=65536,a[i++]=55296|r>>10&1023,a[i++]=56320|r&1023)}return tX(a,i)};Tm.utf8border=function(e,t){var n;for(t=t||e.length,t>e.length&&(t=e.length),n=t-1;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+VC[e[n]]>t?n:t}});var qN=pr((Wot,nX)=>{"use strict";function cAe(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}nX.exports=cAe});var sX=pr(HC=>{"use strict";var BC=ZQ(),GC=wc(),YN=WN(),QN=_D(),uAe=qN(),oX=Object.prototype.toString,dAe=0,KN=4,Rm=0,iX=1,rX=2,hAe=-1,fAe=0,pAe=8;function vf(e){if(!(this instanceof vf))return new vf(e);this.options=GC.assign({level:hAe,method:pAe,chunkSize:16384,windowBits:15,memLevel:8,strategy:fAe,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new uAe,this.strm.avail_out=0;var n=BC.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Rm)throw new Error(QN[n]);if(t.header&&BC.deflateSetHeader(this.strm,t.header),t.dictionary){var i;if(typeof t.dictionary=="string"?i=YN.string2buf(t.dictionary):oX.call(t.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(t.dictionary):i=t.dictionary,n=BC.deflateSetDictionary(this.strm,i),n!==Rm)throw new Error(QN[n]);this._dict_set=!0}}vf.prototype.push=function(e,t){var n=this.strm,i=this.options.chunkSize,r,o;if(this.ended)return!1;o=t===~~t?t:t===!0?KN:dAe,typeof e=="string"?n.input=YN.string2buf(e):oX.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;do{if(n.avail_out===0&&(n.output=new GC.Buf8(i),n.next_out=0,n.avail_out=i),r=BC.deflate(n,o),r!==iX&&r!==Rm)return this.onEnd(r),this.ended=!0,!1;(n.avail_out===0||n.avail_in===0&&(o===KN||o===rX))&&(this.options.to==="string"?this.onData(YN.buf2binstring(GC.shrinkBuf(n.output,n.next_out))):this.onData(GC.shrinkBuf(n.output,n.next_out)))}while((n.avail_in>0||n.avail_out===0)&&r!==iX);return o===KN?(r=BC.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===Rm):(o===rX&&(this.onEnd(Rm),n.avail_out=0),!0)};vf.prototype.onData=function(e){this.chunks.push(e)};vf.prototype.onEnd=function(e){e===Rm&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=GC.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function XN(e,t){var n=new vf(t);if(n.push(e,!0),n.err)throw n.msg||QN[n.err];return n.result}function gAe(e,t){return t=t||{},t.raw=!0,XN(e,t)}function mAe(e,t){return t=t||{},t.gzip=!0,XN(e,t)}HC.Deflate=vf;HC.deflate=XN;HC.deflateRaw=gAe;HC.gzip=mAe});var lX=pr((Kot,aX)=>{"use strict";var AD=30,vAe=12;aX.exports=function(t,n){var i,r,o,s,a,l,c,u,d,h,p,g,m,v,C,S,_,D,F,I,E,b,x,k,A;i=t.state,r=t.next_in,k=t.input,o=r+(t.avail_in-5),s=t.next_out,A=t.output,a=s-(n-t.avail_out),l=s+(t.avail_out-257),c=i.dmax,u=i.wsize,d=i.whave,h=i.wnext,p=i.window,g=i.hold,m=i.bits,v=i.lencode,C=i.distcode,S=(1<<i.lenbits)-1,_=(1<<i.distbits)-1;e:do{m<15&&(g+=k[r++]<<m,m+=8,g+=k[r++]<<m,m+=8),D=v[g&S];t:for(;;){if(F=D>>>24,g>>>=F,m-=F,F=D>>>16&255,F===0)A[s++]=D&65535;else if(F&16){I=D&65535,F&=15,F&&(m<F&&(g+=k[r++]<<m,m+=8),I+=g&(1<<F)-1,g>>>=F,m-=F),m<15&&(g+=k[r++]<<m,m+=8,g+=k[r++]<<m,m+=8),D=C[g&_];n:for(;;){if(F=D>>>24,g>>>=F,m-=F,F=D>>>16&255,F&16){if(E=D&65535,F&=15,m<F&&(g+=k[r++]<<m,m+=8,m<F&&(g+=k[r++]<<m,m+=8)),E+=g&(1<<F)-1,E>c){t.msg="invalid distance too far back",i.mode=AD;break e}if(g>>>=F,m-=F,F=s-a,E>F){if(F=E-F,F>d&&i.sane){t.msg="invalid distance too far back",i.mode=AD;break e}if(b=0,x=p,h===0){if(b+=u-F,F<I){I-=F;do A[s++]=p[b++];while(--F);b=s-E,x=A}}else if(h<F){if(b+=u+h-F,F-=h,F<I){I-=F;do A[s++]=p[b++];while(--F);if(b=0,h<I){F=h,I-=F;do A[s++]=p[b++];while(--F);b=s-E,x=A}}}else if(b+=h-F,F<I){I-=F;do A[s++]=p[b++];while(--F);b=s-E,x=A}for(;I>2;)A[s++]=x[b++],A[s++]=x[b++],A[s++]=x[b++],I-=3;I&&(A[s++]=x[b++],I>1&&(A[s++]=x[b++]))}else{b=s-E;do A[s++]=A[b++],A[s++]=A[b++],A[s++]=A[b++],I-=3;while(I>2);I&&(A[s++]=A[b++],I>1&&(A[s++]=A[b++]))}}else if(F&64){t.msg="invalid distance code",i.mode=AD;break e}else{D=C[(D&65535)+(g&(1<<F)-1)];continue n}break}}else if(F&64)if(F&32){i.mode=vAe;break e}else{t.msg="invalid literal/length code",i.mode=AD;break e}else{D=v[(D&65535)+(g&(1<<F)-1)];continue t}break}}while(r<o&&s<l);I=m>>3,r-=I,m-=I<<3,g&=(1<<m)-1,t.next_in=r,t.next_out=s,t.avail_in=r<o?5+(o-r):5-(r-o),t.avail_out=s<l?257+(l-s):257-(s-l),i.hold=g,i.bits=m}});var gX=pr((Yot,pX)=>{"use strict";var cX=wc(),Im=15,uX=852,dX=592,hX=0,$N=1,fX=2,yAe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],CAe=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],wAe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],bAe=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];pX.exports=function(t,n,i,r,o,s,a,l){var c=l.bits,u=0,d=0,h=0,p=0,g=0,m=0,v=0,C=0,S=0,_=0,D,F,I,E,b,x=null,k=0,A,O=new cX.Buf16(Im+1),P=new cX.Buf16(Im+1),le=null,Re=0,Ue,we,Ct;for(u=0;u<=Im;u++)O[u]=0;for(d=0;d<r;d++)O[n[i+d]]++;for(g=c,p=Im;p>=1&&O[p]===0;p--);if(g>p&&(g=p),p===0)return o[s++]=1<<24|64<<16|0,o[s++]=1<<24|64<<16|0,l.bits=1,0;for(h=1;h<p&&O[h]===0;h++);for(g<h&&(g=h),C=1,u=1;u<=Im;u++)if(C<<=1,C-=O[u],C<0)return-1;if(C>0&&(t===hX||p!==1))return-1;for(P[1]=0,u=1;u<Im;u++)P[u+1]=P[u]+O[u];for(d=0;d<r;d++)n[i+d]!==0&&(a[P[n[i+d]]++]=d);if(t===hX?(x=le=a,A=19):t===$N?(x=yAe,k-=257,le=CAe,Re-=257,A=256):(x=wAe,le=bAe,A=-1),_=0,d=0,u=h,b=s,m=g,v=0,I=-1,S=1<<g,E=S-1,t===$N&&S>uX||t===fX&&S>dX)return 1;for(;;){Ue=u-v,a[d]<A?(we=0,Ct=a[d]):a[d]>A?(we=le[Re+a[d]],Ct=x[k+a[d]]):(we=96,Ct=0),D=1<<u-v,F=1<<m,h=F;do F-=D,o[b+(_>>v)+F]=Ue<<24|we<<16|Ct|0;while(F!==0);for(D=1<<u-1;_&D;)D>>=1;if(D!==0?(_&=D-1,_+=D):_=0,d++,--O[u]===0){if(u===p)break;u=n[i+a[d]]}if(u>g&&(_&E)!==I){for(v===0&&(v=g),b+=h,m=u-v,C=1<<m;m+v<p&&(C-=O[m+v],!(C<=0));)m++,C<<=1;if(S+=1<<m,t===$N&&S>uX||t===fX&&S>dX)return 1;I=_&E,o[I]=g<<24|m<<16|b-s|0}}return _!==0&&(o[b+_]=u-v<<24|64<<16|0),l.bits=g,0}});var XX=pr(Sa=>{"use strict";var is=wc(),iL=BN(),Cl=GN(),SAe=lX(),zC=gX(),_Ae=0,HX=1,zX=2,mX=4,EAe=5,MD=6,yf=0,xAe=1,DAe=2,Os=-2,UX=-3,rL=-4,TAe=-5,vX=8,jX=1,yX=2,CX=3,wX=4,bX=5,SX=6,_X=7,EX=8,xX=9,DX=10,OD=11,_c=12,ZN=13,TX=14,JN=15,RX=16,IX=17,FX=18,AX=19,PD=20,kD=21,MX=22,PX=23,kX=24,OX=25,NX=26,eL=27,LX=28,VX=29,On=30,oL=31,RAe=32,IAe=852,FAe=592,AAe=15,MAe=AAe;function BX(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function PAe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new is.Buf16(320),this.work=new is.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function WX(e){var t;return!e||!e.state?Os:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=jX,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new is.Buf32(IAe),t.distcode=t.distdyn=new is.Buf32(FAe),t.sane=1,t.back=-1,yf)}function qX(e){var t;return!e||!e.state?Os:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,WX(e))}function KX(e,t){var n,i;return!e||!e.state||(i=e.state,t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?Os:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,qX(e))}function YX(e,t){var n,i;return e?(i=new PAe,e.state=i,i.window=null,n=KX(e,t),n!==yf&&(e.state=null),n):Os}function kAe(e){return YX(e,MAe)}var GX=!0,tL,nL;function OAe(e){if(GX){var t;for(tL=new is.Buf32(512),nL=new is.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(zC(HX,e.lens,0,288,tL,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;zC(zX,e.lens,0,32,nL,0,e.work,{bits:5}),GX=!1}e.lencode=tL,e.lenbits=9,e.distcode=nL,e.distbits=5}function QX(e,t,n,i){var r,o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new is.Buf8(o.wsize)),i>=o.wsize?(is.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(r=o.wsize-o.wnext,r>i&&(r=i),is.arraySet(o.window,t,n-i,r,o.wnext),i-=r,i?(is.arraySet(o.window,t,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0}function NAe(e,t){var n,i,r,o,s,a,l,c,u,d,h,p,g,m,v=0,C,S,_,D,F,I,E,b,x=new is.Buf8(4),k,A,O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return Os;n=e.state,n.mode===_c&&(n.mode=ZN),s=e.next_out,r=e.output,l=e.avail_out,o=e.next_in,i=e.input,a=e.avail_in,c=n.hold,u=n.bits,d=a,h=l,b=yf;e:for(;;)switch(n.mode){case jX:if(n.wrap===0){n.mode=ZN;break}for(;u<16;){if(a===0)break e;a--,c+=i[o++]<<u,u+=8}if(n.wrap&2&&c===35615){n.check=0,x[0]=c&255,x[1]=c>>>8&255,n.check=Cl(n.check,x,2,0),c=0,u=0,n.mode=yX;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=On;break}if((c&15)!==vX){e.msg="unknown compression method",n.mode=On;break}if(c>>>=4,u-=4,E=(c&15)+8,n.wbits===0)n.wbits=E;else if(E>n.wbits){e.msg="invalid window size",n.mode=On;break}n.dmax=1<<E,e.adler=n.check=1,n.mode=c&512?DX:_c,c=0,u=0;break;case yX:for(;u<16;){if(a===0)break e;a--,c+=i[o++]<<u,u+=8}if(n.flags=c,(n.flags&255)!==vX){e.msg="unknown compression method",n.mode=On;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=On;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&(x[0]=c&255,x[1]=c>>>8&255,n.check=Cl(n.check,x,2,0)),c=0,u=0,n.mode=CX;case CX:for(;u<32;){if(a===0)break e;a--,c+=i[o++]<<u,u+=8}n.head&&(n.head.time=c),n.flags&512&&(x[0]=c&255,x[1]=c>>>8&255,x[2]=c>>>16&255,x[3]=c>>>24&255,n.check=Cl(n.check,x,4,0)),c=0,u=0,n.mode=wX;case wX:for(;u<16;){if(a===0)break e;a--,c+=i[o++]<<u,u+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&(x[0]=c&255,x[1]=c>>>8&255,n.check=Cl(n.check,x,2,0)),c=0,u=0,n.mode=bX;case bX:if(n.flags&1024){for(;u<16;){if(a===0)break e;a--,c+=i[o++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&(x[0]=c&255,x[1]=c>>>8&255,n.check=Cl(n.check,x,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=SX;case SX:if(n.flags&1024&&(p=n.length,p>a&&(p=a),p&&(n.head&&(E=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),is.arraySet(n.head.extra,i,o,p,E)),n.flags&512&&(n.check=Cl(n.check,i,p,o)),a-=p,o+=p,n.length-=p),n.length))break e;n.length=0,n.mode=_X;case _X:if(n.flags&2048){if(a===0)break e;p=0;do E=i[o+p++],n.head&&E&&n.length<65536&&(n.head.name+=String.fromCharCode(E));while(E&&p<a);if(n.flags&512&&(n.check=Cl(n.check,i,p,o)),a-=p,o+=p,E)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=EX;case EX:if(n.flags&4096){if(a===0)break e;p=0;do E=i[o+p++],n.head&&E&&n.length<65536&&(n.head.comment+=String.fromCharCode(E));while(E&&p<a);if(n.flags&512&&(n.check=Cl(n.check,i,p,o)),a-=p,o+=p,E)break e}else n.head&&(n.head.comment=null);n.mode=xX;case xX:if(n.flags&512){for(;u<16;){if(a===0)break e;a--,c+=i[o++]<<u,u+=8}if(c!==(n.check&65535)){e.msg="header crc mismatch",n.mode=On;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=_c;break;case DX:for(;u<32;){if(a===0)break e;a--,c+=i[o++]<<u,u+=8}e.adler=n.check=BX(c),c=0,u=0,n.mode=OD;case OD:if(n.havedict===0)return e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=a,n.hold=c,n.bits=u,DAe;e.adler=n.check=1,n.mode=_c;case _c:if(t===EAe||t===MD)break e;case ZN:if(n.last){c>>>=u&7,u-=u&7,n.mode=eL;break}for(;u<3;){if(a===0)break e;a--,c+=i[o++]<<u,u+=8}switch(n.last=c&1,c>>>=1,u-=1,c&3){case 0:n.mode=TX;break;case 1:if(OAe(n),n.mode=PD,t===MD){c>>>=2,u-=2;break e}break;case 2:n.mode=IX;break;case 3:e.msg="invalid block type",n.mode=On}c>>>=2,u-=2;break;case TX:for(c>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,c+=i[o++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=On;break}if(n.length=c&65535,c=0,u=0,n.mode=JN,t===MD)break e;case JN:n.mode=RX;case RX:if(p=n.length,p){if(p>a&&(p=a),p>l&&(p=l),p===0)break e;is.arraySet(r,i,o,p,s),a-=p,o+=p,l-=p,s+=p,n.length-=p;break}n.mode=_c;break;case IX:for(;u<14;){if(a===0)break e;a--,c+=i[o++]<<u,u+=8}if(n.nlen=(c&31)+257,c>>>=5,u-=5,n.ndist=(c&31)+1,c>>>=5,u-=5,n.ncode=(c&15)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=On;break}n.have=0,n.mode=FX;case FX:for(;n.have<n.ncode;){for(;u<3;){if(a===0)break e;a--,c+=i[o++]<<u,u+=8}n.lens[O[n.have++]]=c&7,c>>>=3,u-=3}for(;n.have<19;)n.lens[O[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,k={bits:n.lenbits},b=zC(_Ae,n.lens,0,19,n.lencode,0,n.work,k),n.lenbits=k.bits,b){e.msg="invalid code lengths set",n.mode=On;break}n.have=0,n.mode=AX;case AX:for(;n.have<n.nlen+n.ndist;){for(;v=n.lencode[c&(1<<n.lenbits)-1],C=v>>>24,S=v>>>16&255,_=v&65535,!(C<=u);){if(a===0)break e;a--,c+=i[o++]<<u,u+=8}if(_<16)c>>>=C,u-=C,n.lens[n.have++]=_;else{if(_===16){for(A=C+2;u<A;){if(a===0)break e;a--,c+=i[o++]<<u,u+=8}if(c>>>=C,u-=C,n.have===0){e.msg="invalid bit length repeat",n.mode=On;break}E=n.lens[n.have-1],p=3+(c&3),c>>>=2,u-=2}else if(_===17){for(A=C+3;u<A;){if(a===0)break e;a--,c+=i[o++]<<u,u+=8}c>>>=C,u-=C,E=0,p=3+(c&7),c>>>=3,u-=3}else{for(A=C+7;u<A;){if(a===0)break e;a--,c+=i[o++]<<u,u+=8}c>>>=C,u-=C,E=0,p=11+(c&127),c>>>=7,u-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=On;break}for(;p--;)n.lens[n.have++]=E}}if(n.mode===On)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=On;break}if(n.lenbits=9,k={bits:n.lenbits},b=zC(HX,n.lens,0,n.nlen,n.lencode,0,n.work,k),n.lenbits=k.bits,b){e.msg="invalid literal/lengths set",n.mode=On;break}if(n.distbits=6,n.distcode=n.distdyn,k={bits:n.distbits},b=zC(zX,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,k),n.distbits=k.bits,b){e.msg="invalid distances set",n.mode=On;break}if(n.mode=PD,t===MD)break e;case PD:n.mode=kD;case kD:if(a>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=a,n.hold=c,n.bits=u,SAe(e,h),s=e.next_out,r=e.output,l=e.avail_out,o=e.next_in,i=e.input,a=e.avail_in,c=n.hold,u=n.bits,n.mode===_c&&(n.back=-1);break}for(n.back=0;v=n.lencode[c&(1<<n.lenbits)-1],C=v>>>24,S=v>>>16&255,_=v&65535,!(C<=u);){if(a===0)break e;a--,c+=i[o++]<<u,u+=8}if(S&&!(S&240)){for(D=C,F=S,I=_;v=n.lencode[I+((c&(1<<D+F)-1)>>D)],C=v>>>24,S=v>>>16&255,_=v&65535,!(D+C<=u);){if(a===0)break e;a--,c+=i[o++]<<u,u+=8}c>>>=D,u-=D,n.back+=D}if(c>>>=C,u-=C,n.back+=C,n.length=_,S===0){n.mode=NX;break}if(S&32){n.back=-1,n.mode=_c;break}if(S&64){e.msg="invalid literal/length code",n.mode=On;break}n.extra=S&15,n.mode=MX;case MX:if(n.extra){for(A=n.extra;u<A;){if(a===0)break e;a--,c+=i[o++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=PX;case PX:for(;v=n.distcode[c&(1<<n.distbits)-1],C=v>>>24,S=v>>>16&255,_=v&65535,!(C<=u);){if(a===0)break e;a--,c+=i[o++]<<u,u+=8}if(!(S&240)){for(D=C,F=S,I=_;v=n.distcode[I+((c&(1<<D+F)-1)>>D)],C=v>>>24,S=v>>>16&255,_=v&65535,!(D+C<=u);){if(a===0)break e;a--,c+=i[o++]<<u,u+=8}c>>>=D,u-=D,n.back+=D}if(c>>>=C,u-=C,n.back+=C,S&64){e.msg="invalid distance code",n.mode=On;break}n.offset=_,n.extra=S&15,n.mode=kX;case kX:if(n.extra){for(A=n.extra;u<A;){if(a===0)break e;a--,c+=i[o++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=On;break}n.mode=OX;case OX:if(l===0)break e;if(p=h-l,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=On;break}p>n.wnext?(p-=n.wnext,g=n.wsize-p):g=n.wnext-p,p>n.length&&(p=n.length),m=n.window}else m=r,g=s-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do r[s++]=m[g++];while(--p);n.length===0&&(n.mode=kD);break;case NX:if(l===0)break e;r[s++]=n.length,l--,n.mode=kD;break;case eL:if(n.wrap){for(;u<32;){if(a===0)break e;a--,c|=i[o++]<<u,u+=8}if(h-=l,e.total_out+=h,n.total+=h,h&&(e.adler=n.check=n.flags?Cl(n.check,r,h,s-h):iL(n.check,r,h,s-h)),h=l,(n.flags?c:BX(c))!==n.check){e.msg="incorrect data check",n.mode=On;break}c=0,u=0}n.mode=LX;case LX:if(n.wrap&&n.flags){for(;u<32;){if(a===0)break e;a--,c+=i[o++]<<u,u+=8}if(c!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=On;break}c=0,u=0}n.mode=VX;case VX:b=xAe;break e;case On:b=UX;break e;case oL:return rL;case RAe:default:return Os}return e.next_out=s,e.avail_out=l,e.next_in=o,e.avail_in=a,n.hold=c,n.bits=u,(n.wsize||h!==e.avail_out&&n.mode<On&&(n.mode<eL||t!==mX))&&QX(e,e.output,e.next_out,h-e.avail_out)?(n.mode=oL,rL):(d-=e.avail_in,h-=e.avail_out,e.total_in+=d,e.total_out+=h,n.total+=h,n.wrap&&h&&(e.adler=n.check=n.flags?Cl(n.check,r,h,e.next_out-h):iL(n.check,r,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===_c?128:0)+(n.mode===PD||n.mode===JN?256:0),(d===0&&h===0||t===mX)&&b===yf&&(b=TAe),b)}function LAe(e){if(!e||!e.state)return Os;var t=e.state;return t.window&&(t.window=null),e.state=null,yf}function VAe(e,t){var n;return!e||!e.state||(n=e.state,!(n.wrap&2))?Os:(n.head=t,t.done=!1,yf)}function BAe(e,t){var n=t.length,i,r,o;return!e||!e.state||(i=e.state,i.wrap!==0&&i.mode!==OD)?Os:i.mode===OD&&(r=1,r=iL(r,t,n,0),r!==i.check)?UX:(o=QX(e,t,n,n),o?(i.mode=oL,rL):(i.havedict=1,yf))}Sa.inflateReset=qX;Sa.inflateReset2=KX;Sa.inflateResetKeep=WX;Sa.inflateInit=kAe;Sa.inflateInit2=YX;Sa.inflate=NAe;Sa.inflateEnd=LAe;Sa.inflateGetHeader=VAe;Sa.inflateSetDictionary=BAe;Sa.inflateInfo="pako inflate (from Nodeca project)"});var sL=pr((Xot,$X)=>{"use strict";$X.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}});var JX=pr(($ot,ZX)=>{"use strict";function GAe(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}ZX.exports=GAe});var t$=pr(jC=>{"use strict";var Fm=XX(),UC=wc(),ND=WN(),ai=sL(),aL=_D(),HAe=qN(),zAe=JX(),e$=Object.prototype.toString;function Cf(e){if(!(this instanceof Cf))return new Cf(e);this.options=UC.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new HAe,this.strm.avail_out=0;var n=Fm.inflateInit2(this.strm,t.windowBits);if(n!==ai.Z_OK)throw new Error(aL[n]);if(this.header=new zAe,Fm.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=ND.string2buf(t.dictionary):e$.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Fm.inflateSetDictionary(this.strm,t.dictionary),n!==ai.Z_OK)))throw new Error(aL[n])}Cf.prototype.push=function(e,t){var n=this.strm,i=this.options.chunkSize,r=this.options.dictionary,o,s,a,l,c,u=!1;if(this.ended)return!1;s=t===~~t?t:t===!0?ai.Z_FINISH:ai.Z_NO_FLUSH,typeof e=="string"?n.input=ND.binstring2buf(e):e$.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;do{if(n.avail_out===0&&(n.output=new UC.Buf8(i),n.next_out=0,n.avail_out=i),o=Fm.inflate(n,ai.Z_NO_FLUSH),o===ai.Z_NEED_DICT&&r&&(o=Fm.inflateSetDictionary(this.strm,r)),o===ai.Z_BUF_ERROR&&u===!0&&(o=ai.Z_OK,u=!1),o!==ai.Z_STREAM_END&&o!==ai.Z_OK)return this.onEnd(o),this.ended=!0,!1;n.next_out&&(n.avail_out===0||o===ai.Z_STREAM_END||n.avail_in===0&&(s===ai.Z_FINISH||s===ai.Z_SYNC_FLUSH))&&(this.options.to==="string"?(a=ND.utf8border(n.output,n.next_out),l=n.next_out-a,c=ND.buf2string(n.output,a),n.next_out=l,n.avail_out=i-l,l&&UC.arraySet(n.output,n.output,a,l,0),this.onData(c)):this.onData(UC.shrinkBuf(n.output,n.next_out))),n.avail_in===0&&n.avail_out===0&&(u=!0)}while((n.avail_in>0||n.avail_out===0)&&o!==ai.Z_STREAM_END);return o===ai.Z_STREAM_END&&(s=ai.Z_FINISH),s===ai.Z_FINISH?(o=Fm.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,o===ai.Z_OK):(s===ai.Z_SYNC_FLUSH&&(this.onEnd(ai.Z_OK),n.avail_out=0),!0)};Cf.prototype.onData=function(e){this.chunks.push(e)};Cf.prototype.onEnd=function(e){e===ai.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=UC.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function lL(e,t){var n=new Cf(t);if(n.push(e,!0),n.err)throw n.msg||aL[n.err];return n.result}function UAe(e,t){return t=t||{},t.raw=!0,lL(e,t)}jC.Inflate=Cf;jC.inflate=lL;jC.inflateRaw=UAe;jC.ungzip=lL});var WC=pr((Jot,i$)=>{"use strict";var jAe=wc().assign,WAe=sX(),qAe=t$(),KAe=sL(),n$={};jAe(n$,WAe,qAe,KAe);i$.exports=n$});var L4=null;var ER=1,xR=Symbol("SIGNAL");function Et(e){let t=L4;return L4=e,t}var V4={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function kie(e){if(!(RR(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===ER)){if(!e.producerMustRecompute(e)&&!DR(e)){e.dirty=!1,e.lastCleanEpoch=ER;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=ER}}function B4(e){return e&&(e.nextProducerIndex=0),Et(e)}function G4(e,t){if(Et(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(RR(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)TR(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function DR(e){Gb(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],i=e.producerLastReadVersion[t];if(i!==n.version||(kie(n),i!==n.version))return!0}return!1}function H4(e){if(Gb(e),RR(e))for(let t=0;t<e.producerNode.length;t++)TR(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function TR(e,t){if(Oie(e),Gb(e),e.liveConsumerNode.length===1)for(let i=0;i<e.producerNode.length;i++)TR(e.producerNode[i],e.producerIndexOfThis[i]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let i=e.liveConsumerIndexOfThis[t],r=e.liveConsumerNode[t];Gb(r),r.producerIndexOfThis[i]=t}}function RR(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Gb(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function Oie(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function Nie(){throw new Error}var Lie=Nie;function z4(e){Lie=e}function Ve(e){return typeof e=="function"}function op(e){let n=e(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Hb=op(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Rd(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Ln=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(Ve(i))try{i()}catch(o){t=o instanceof Hb?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{U4(o)}catch(s){t=t??[],s instanceof Hb?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Hb(t)}}add(t){var n;if(t&&t!==this)if(this.closed)U4(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Rd(n,t)}remove(t){let{_finalizers:n}=this;n&&Rd(n,t),t instanceof e&&t._removeParent(this)}};Ln.EMPTY=(()=>{let e=new Ln;return e.closed=!0,e})();var IR=Ln.EMPTY;function zb(e){return e instanceof Ln||e&&"closed"in e&&Ve(e.remove)&&Ve(e.add)&&Ve(e.unsubscribe)}function U4(e){Ve(e)?e():e.unsubscribe()}var Xs={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var sp={setTimeout(e,t,...n){let{delegate:i}=sp;return i?.setTimeout?i.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=sp;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Ub(e){sp.setTimeout(()=>{let{onUnhandledError:t}=Xs;if(t)t(e);else throw e})}function $s(){}var j4=FR("C",void 0,void 0);function W4(e){return FR("E",void 0,e)}function q4(e){return FR("N",e,void 0)}function FR(e,t,n){return{kind:e,value:t,error:n}}var Id=null;function ap(e){if(Xs.useDeprecatedSynchronousErrorHandling){let t=!Id;if(t&&(Id={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:i}=Id;if(Id=null,n)throw i}}else e()}function K4(e){Xs.useDeprecatedSynchronousErrorHandling&&Id&&(Id.errorThrown=!0,Id.error=e)}var Fd=class extends Ln{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,zb(t)&&t.add(this)):this.destination=Gie}static create(t,n,i){return new Al(t,n,i)}next(t){this.isStopped?MR(q4(t),this):this._next(t)}error(t){this.isStopped?MR(W4(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?MR(j4,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Vie=Function.prototype.bind;function AR(e,t){return Vie.call(e,t)}var PR=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(i){jb(i)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(i){jb(i)}else jb(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){jb(n)}}},Al=class extends Fd{constructor(t,n,i){super();let r;if(Ve(t)||!t)r={next:t??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&Xs.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&AR(t.next,o),error:t.error&&AR(t.error,o),complete:t.complete&&AR(t.complete,o)}):r=t}this.destination=new PR(r)}};function jb(e){Xs.useDeprecatedSynchronousErrorHandling?K4(e):Ub(e)}function Bie(e){throw e}function MR(e,t){let{onStoppedNotification:n}=Xs;n&&sp.setTimeout(()=>n(e,t))}var Gie={closed:!0,next:$s,error:Bie,complete:$s};var lp=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Qi(e){return e}function Wb(...e){return kR(e)}function kR(e){return e.length===0?Qi:e.length===1?e[0]:function(n){return e.reduce((i,r)=>r(i),n)}}var ge=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new e;return i.source=this,i.operator=n,i}subscribe(n,i,r){let o=zie(n)?n:new Al(n,i,r);return ap(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=Y4(i),new i((r,o)=>{let s=new Al({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[lp](){return this}pipe(...n){return kR(n)(this)}toPromise(n){return n=Y4(n),new n((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return e.create=t=>new e(t),e})();function Y4(e){var t;return(t=e??Xs.Promise)!==null&&t!==void 0?t:Promise}function Hie(e){return e&&Ve(e.next)&&Ve(e.error)&&Ve(e.complete)}function zie(e){return e&&e instanceof Fd||Hie(e)&&zb(e)}function OR(e){return Ve(e?.lift)}function Ke(e){return t=>{if(OR(t))return t.lift(function(n){try{return e(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Be(e,t,n,i,r){return new qv(e,t,n,i,r)}var qv=class extends Fd{constructor(t,n,i,r,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function cp(){return Ke((e,t)=>{let n=null;e._refCount++;let i=Be(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let r=e._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()});e.subscribe(i),i.closed||(n=e.connect())})}var Vc=class extends ge{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,OR(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Ln;let n=this.getSubject();t.add(this.source.subscribe(Be(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Ln.EMPTY)}return t}refCount(){return cp()(this)}};var Q4=op(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var nt=(()=>{class e extends ge{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new qb(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new Q4}next(n){ap(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){ap(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){ap(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:o}=this;return i||r?IR:(this.currentObservers=null,o.push(n),new Ln(()=>{this.currentObservers=null,Rd(o,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){let n=new ge;return n.source=this,n}}return e.create=(t,n)=>new qb(t,n),e})(),qb=class extends nt{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,t)}error(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&i!==void 0?i:IR}};var jt=class extends nt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:i}=this;if(t)throw n;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var Kv={now(){return(Kv.delegate||Date).now()},delegate:void 0};var Ml=class extends nt{constructor(t=1/0,n=1/0,i=Kv){super(),this._bufferSize=t,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,n)}next(t){let{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;n||(i.push(t),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!t.closed;s+=i?1:2)t.next(o[s]);return this._checkFinalizedStatuses(t),n}_trimBuffer(){let{_bufferSize:t,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*t;if(t<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=n.now(),a=0;for(let l=1;l<i.length&&i[l]<=s;l+=2)a=l;a&&i.splice(0,a+1)}}};var Kb=class extends Ln{constructor(t,n){super()}schedule(t,n=0){return this}};var Yv={setInterval(e,t,...n){let{delegate:i}=Yv;return i?.setInterval?i.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=Yv;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var up=class extends Kb{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var i;if(this.closed)return this;this.state=t;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,i=0){return Yv.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&Yv.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let i=!1,r;try{this.work(t)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Rd(i,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var dp=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,i){return new this.schedulerActionCtor(this,t).schedule(i,n)}};dp.now=Kv.now;var hp=class extends dp{constructor(t,n=dp.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,i){for(;t=n.shift();)t.unsubscribe();throw i}}};var co=new hp(up),NR=co;var Yb=class extends up{constructor(t,n){super(t,n),this.scheduler=t,this.work=n}schedule(t,n=0){return n>0?super.schedule(t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)}execute(t,n){return n>0||this.closed?super.execute(t,n):this._execute(t,n)}requestAsyncId(t,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(t,n,i):(t.flush(this),0)}};var Qb=class extends hp{};var LR=new Qb(Yb);var xi=new ge(e=>e.complete());function Xb(e){return e&&Ve(e.schedule)}function VR(e){return e[e.length-1]}function Bc(e){return Ve(VR(e))?e.pop():void 0}function Va(e){return Xb(VR(e))?e.pop():void 0}function X4(e,t){return typeof VR(e)=="number"?e.pop():t}var fp=e=>e&&typeof e.length=="number"&&typeof e!="function";function $b(e){return Ve(e?.then)}function Zb(e){return Ve(e[lp])}function Jb(e){return Symbol.asyncIterator&&Ve(e?.[Symbol.asyncIterator])}function eS(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Uie(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var tS=Uie();function nS(e){return Ve(e?.[tS])}function iS(e){return x4(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:i,done:r}=yield Pb(n.read());if(r)return yield Pb(void 0);yield yield Pb(i)}}finally{n.releaseLock()}})}function rS(e){return Ve(e?.getReader)}function lt(e){if(e instanceof ge)return e;if(e!=null){if(Zb(e))return jie(e);if(fp(e))return Wie(e);if($b(e))return qie(e);if(Jb(e))return $4(e);if(nS(e))return Kie(e);if(rS(e))return Yie(e)}throw eS(e)}function jie(e){return new ge(t=>{let n=e[lp]();if(Ve(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Wie(e){return new ge(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function qie(e){return new ge(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Ub)})}function Kie(e){return new ge(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function $4(e){return new ge(t=>{Qie(e,t).catch(n=>t.error(n))})}function Yie(e){return $4(iS(e))}function Qie(e,t){var n,i,r,o;return E4(this,void 0,void 0,function*(){try{for(n=D4(e);i=yield n.next(),!i.done;){let s=i.value;if(t.next(s),t.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}t.complete()})}function uo(e,t,n,i=0,r=!1){let o=t.schedule(function(){n(),r?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(o),!r)return o}function ho(e,t=0){return Ke((n,i)=>{n.subscribe(Be(i,r=>uo(i,e,()=>i.next(r),t),()=>uo(i,e,()=>i.complete(),t),r=>uo(i,e,()=>i.error(r),t)))})}function us(e,t=0){return Ke((n,i)=>{i.add(e.schedule(()=>n.subscribe(i),t))})}function Z4(e,t){return lt(e).pipe(us(t),ho(t))}function J4(e,t){return lt(e).pipe(us(t),ho(t))}function e8(e,t){return new ge(n=>{let i=0;return t.schedule(function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||this.schedule())})})}function t8(e,t){return new ge(n=>{let i;return uo(n,t,()=>{i=e[tS](),uo(n,t,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){n.error(s);return}o?n.complete():n.next(r)},0,!0)}),()=>Ve(i?.return)&&i.return()})}function oS(e,t){if(!e)throw new Error("Iterable cannot be null");return new ge(n=>{uo(n,t,()=>{let i=e[Symbol.asyncIterator]();uo(n,t,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function n8(e,t){return oS(iS(e),t)}function i8(e,t){if(e!=null){if(Zb(e))return Z4(e,t);if(fp(e))return e8(e,t);if($b(e))return J4(e,t);if(Jb(e))return oS(e,t);if(nS(e))return t8(e,t);if(rS(e))return n8(e,t)}throw eS(e)}function Ze(e,t){return t?i8(e,t):lt(e)}function se(...e){let t=Va(e);return Ze(e,t)}function Gc(e,t){let n=Ve(e)?e:()=>e,i=r=>r.error(n());return new ge(t?r=>t.schedule(i,0,r):i)}function BR(e){return!!e&&(e instanceof ge||Ve(e.lift)&&Ve(e.subscribe))}var Pl=op(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function r8(e){return e instanceof Date&&!isNaN(e)}function ae(e,t){return Ke((n,i)=>{let r=0;n.subscribe(Be(i,o=>{i.next(e.call(t,o,r++))}))})}var{isArray:Xie}=Array;function $ie(e,t){return Xie(t)?e(...t):e(t)}function pp(e){return ae(t=>$ie(e,t))}var{isArray:Zie}=Array,{getPrototypeOf:Jie,prototype:ere,keys:tre}=Object;function sS(e){if(e.length===1){let t=e[0];if(Zie(t))return{args:t,keys:null};if(nre(t)){let n=tre(t);return{args:n.map(i=>t[i]),keys:n}}}return{args:e,keys:null}}function nre(e){return e&&typeof e=="object"&&Jie(e)===ere}function aS(e,t){return e.reduce((n,i,r)=>(n[i]=t[r],n),{})}function Ar(...e){let t=Va(e),n=Bc(e),{args:i,keys:r}=sS(e);if(i.length===0)return Ze([],t);let o=new ge(ire(i,t,r?s=>aS(r,s):Qi));return n?o.pipe(pp(n)):o}function ire(e,t,n=Qi){return i=>{o8(t,()=>{let{length:r}=e,o=new Array(r),s=r,a=r;for(let l=0;l<r;l++)o8(t,()=>{let c=Ze(e[l],t),u=!1;c.subscribe(Be(i,d=>{o[l]=d,u||(u=!0,a--),a||i.next(n(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function o8(e,t,n){e?uo(n,e,t):t()}function s8(e,t,n,i,r,o,s,a){let l=[],c=0,u=0,d=!1,h=()=>{d&&!l.length&&!c&&t.complete()},p=m=>c<i?g(m):l.push(m),g=m=>{o&&t.next(m),c++;let v=!1;lt(n(m,u++)).subscribe(Be(t,C=>{r?.(C),o?p(C):t.next(C)},()=>{v=!0},void 0,()=>{if(v)try{for(c--;l.length&&c<i;){let C=l.shift();s?uo(t,s,()=>g(C)):g(C)}h()}catch(C){t.error(C)}}))};return e.subscribe(Be(t,p,()=>{d=!0,h()})),()=>{a?.()}}function un(e,t,n=1/0){return Ve(t)?un((i,r)=>ae((o,s)=>t(i,o,r,s))(lt(e(i,r))),n):(typeof t=="number"&&(n=t),Ke((i,r)=>s8(i,r,e,n)))}function Qv(e=1/0){return un(Qi,e)}function a8(){return Qv(1)}function ds(...e){return a8()(Ze(e,Va(e)))}function Ad(e){return new ge(t=>{lt(e()).subscribe(t)})}function gp(...e){let t=Bc(e),{args:n,keys:i}=sS(e),r=new ge(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let u=0;u<s;u++){let d=!1;lt(n[u]).subscribe(Be(o,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||o.next(i?aS(i,a):a),o.complete())}))}});return t?r.pipe(pp(t)):r}var rre=["addListener","removeListener"],ore=["addEventListener","removeEventListener"],sre=["on","off"];function di(e,t,n,i){if(Ve(n)&&(i=n,n=void 0),i)return di(e,t,n).pipe(pp(i));let[r,o]=cre(e)?ore.map(s=>a=>e[s](t,a,n)):are(e)?rre.map(l8(e,t)):lre(e)?sre.map(l8(e,t)):[];if(!r&&fp(e))return un(s=>di(s,t,n))(lt(e));if(!r)throw new TypeError("Invalid event target");return new ge(s=>{let a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function l8(e,t){return n=>i=>e[n](t,i)}function are(e){return Ve(e.addListener)&&Ve(e.removeListener)}function lre(e){return Ve(e.on)&&Ve(e.off)}function cre(e){return Ve(e.addEventListener)&&Ve(e.removeEventListener)}function Hc(e=0,t,n=NR){let i=-1;return t!=null&&(Xb(t)?n=t:i=t),new ge(r=>{let o=r8(e)?+e-n.now():e;o<0&&(o=0);let s=0;return n.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function zc(...e){let t=Va(e),n=X4(e,1/0),i=e;return i.length?i.length===1?lt(i[0]):Qv(n)(Ze(i,t)):xi}var Uc=new ge($s);var{isArray:ure}=Array;function lS(e){return e.length===1&&ure(e[0])?e[0]:e}function xt(e,t){return Ke((n,i)=>{let r=0;n.subscribe(Be(i,o=>e.call(t,o,r++)&&i.next(o)))})}function cS(...e){return e=lS(e),e.length===1?lt(e[0]):new ge(dre(e))}function dre(e){return t=>{let n=[];for(let i=0;n&&!t.closed&&i<e.length;i++)n.push(lt(e[i]).subscribe(Be(t,r=>{if(n){for(let o=0;o<n.length;o++)o!==i&&n[o].unsubscribe();n=null}t.next(r)})))}}function Xv(...e){let t=Bc(e),n=lS(e);return n.length?new ge(i=>{let r=n.map(()=>[]),o=n.map(()=>!1);i.add(()=>{r=o=null});for(let s=0;!i.closed&&s<n.length;s++)lt(n[s]).subscribe(Be(i,a=>{if(r[s].push(a),r.every(l=>l.length)){let l=r.map(c=>c.shift());i.next(t?t(...l):l),r.some((c,u)=>!c.length&&o[u])&&i.complete()}},()=>{o[s]=!0,!r[s].length&&i.complete()}));return()=>{r=o=null}}):xi}function Zs(e){return Ke((t,n)=>{let i=null,r=!1,o;i=t.subscribe(Be(n,void 0,void 0,s=>{o=lt(e(s,Zs(e)(t))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function c8(e,t,n,i,r){return(o,s)=>{let a=n,l=t,c=0;o.subscribe(Be(s,u=>{let d=c++;l=a?e(l,u,d):(a=!0,u),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function jc(e,t){return Ve(t)?un(e,t,1):un(e,1)}function u8(e){return new ge(t=>e.subscribe(t))}var hre={connector:()=>new nt};function uS(e,t=hre){let{connector:n}=t;return Ke((i,r)=>{let o=n();lt(e(u8(o))).subscribe(r),r.add(i.subscribe(o))})}function mp(e,t=co){return Ke((n,i)=>{let r=null,o=null,s=null,a=()=>{if(r){r.unsubscribe(),r=null;let c=o;o=null,i.next(c)}};function l(){let c=s+e,u=t.now();if(u<c){r=this.schedule(void 0,c-u),i.add(r);return}a()}n.subscribe(Be(i,c=>{o=c,s=t.now(),r||(r=t.schedule(l,e),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}function Wc(e){return Ke((t,n)=>{let i=!1;t.subscribe(Be(n,r=>{i=!0,n.next(r)},()=>{i||n.next(e),n.complete()}))})}function Dt(e){return e<=0?()=>xi:Ke((t,n)=>{let i=0;t.subscribe(Be(n,r=>{++i<=e&&(n.next(r),e<=i&&n.complete())}))})}function d8(){return Ke((e,t)=>{e.subscribe(Be(t,$s))})}function $v(e){return ae(()=>e)}function GR(e,t){return t?n=>ds(t.pipe(Dt(1),d8()),n.pipe(GR(e))):un((n,i)=>lt(e(n,i)).pipe(Dt(1),$v(n)))}function Zv(e,t=co){let n=Hc(e,t);return GR(()=>n)}function Ba(e,t=Qi){return e=e??fre,Ke((n,i)=>{let r,o=!0;n.subscribe(Be(i,s=>{let a=t(s);(o||!e(r,a))&&(o=!1,r=a,i.next(s))}))})}function fre(e,t){return e===t}function dS(e=pre){return Ke((t,n)=>{let i=!1;t.subscribe(Be(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(e())))})}function pre(){return new Pl}function HR(...e){return t=>ds(t,se(...e))}function Md(e){return Ke((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function ko(e,t){let n=arguments.length>=2;return i=>i.pipe(e?xt((r,o)=>e(r,o,i)):Qi,Dt(1),n?Wc(t):dS(()=>new Pl))}function zR(e,t,n,i){return Ke((r,o)=>{let s;!t||typeof t=="function"?s=t:{duration:n,element:s,connector:i}=t;let a=new Map,l=g=>{a.forEach(g),g(o)},c=g=>l(m=>m.error(g)),u=0,d=!1,h=new qv(o,g=>{try{let m=e(g),v=a.get(m);if(!v){a.set(m,v=i?i():new nt);let C=p(m,v);if(o.next(C),n){let S=Be(v,()=>{v.complete(),S?.unsubscribe()},void 0,void 0,()=>a.delete(m));h.add(lt(n(C)).subscribe(S))}}v.next(s?s(g):g)}catch(m){c(m)}},()=>l(g=>g.complete()),c,()=>a.clear(),()=>(d=!0,u===0));r.subscribe(h);function p(g,m){let v=new ge(C=>{u++;let S=m.subscribe(C);return()=>{S.unsubscribe(),--u===0&&d&&h.unsubscribe()}});return v.key=g,v}})}function vp(e){return e<=0?()=>xi:Ke((t,n)=>{let i=[];t.subscribe(Be(n,r=>{i.push(r),e<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function UR(e,t){let n=arguments.length>=2;return i=>i.pipe(e?xt((r,o)=>e(r,o,i)):Qi,vp(1),n?Wc(t):dS(()=>new Pl))}function h8(e,t){let n=Ve(e)?e:()=>e;return Ve(t)?uS(t,{connector:n}):i=>new Vc(i,n)}function qc(){return Ke((e,t)=>{let n,i=!1;e.subscribe(Be(t,r=>{let o=n;n=r,i&&t.next([o,r]),i=!0}))})}function jR(e){return e?t=>uS(e)(t):t=>h8(new nt)(t)}function Kc(e,t){return Ke(c8(e,t,arguments.length>=2,!0))}function f8(e={}){let{connector:t=()=>new nt,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=e;return o=>{let s,a,l,c=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},p=()=>{h(),s=l=void 0,u=d=!1},g=()=>{let m=s;p(),m?.unsubscribe()};return Ke((m,v)=>{c++,!d&&!u&&h();let C=l=l??t();v.add(()=>{c--,c===0&&!d&&!u&&(a=WR(g,r))}),C.subscribe(v),!s&&c>0&&(s=new Al({next:S=>C.next(S),error:S=>{d=!0,h(),a=WR(p,n,S),C.error(S)},complete:()=>{u=!0,h(),a=WR(p,i),C.complete()}}),lt(m).subscribe(s))})(o)}}function WR(e,t,...n){if(t===!0){e();return}if(t===!1)return;let i=new Al({next:()=>{i.unsubscribe(),e()}});return lt(t(...n)).subscribe(i)}function Pd(e,t,n){let i,r=!1;return e&&typeof e=="object"?{bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:n}=e:i=e??1/0,f8({connector:()=>new Ml(i,t,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Js(...e){let t=Va(e);return Ke((n,i)=>{(t?ds(e,n,t):ds(e,n)).subscribe(i)})}function Ne(e,t){return Ke((n,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();n.subscribe(Be(i,l=>{r?.unsubscribe();let c=0,u=o++;lt(e(l,u)).subscribe(r=Be(i,d=>i.next(t?t(l,d,u,c++):d),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function hS(e,t){return Ve(t)?Ne(()=>e,t):Ne(()=>e)}function mn(e){return Ke((t,n)=>{lt(e).subscribe(Be(n,()=>n.complete(),$s)),!n.closed&&t.subscribe(n)})}function nn(e,t,n){let i=Ve(e)||t||n?{next:e,error:t,complete:n}:e;return i?Ke((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(Be(o,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),o.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),o.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),o.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):Qi}function p8(e,t){return Ke((n,i)=>{let{leading:r=!0,trailing:o=!1}=t??{},s=!1,a=null,l=null,c=!1,u=()=>{l?.unsubscribe(),l=null,o&&(p(),c&&i.complete())},d=()=>{l=null,c&&i.complete()},h=g=>l=lt(e(g)).subscribe(Be(i,u,d)),p=()=>{if(s){s=!1;let g=a;a=null,i.next(g),!c&&h(g)}};n.subscribe(Be(i,g=>{s=!0,a=g,!(l&&!l.closed)&&(r?p():h(g))},()=>{c=!0,!(o&&s&&l&&!l.closed)&&i.complete()}))})}function qR(e,t=co,n){let i=Hc(e,t);return p8(()=>i,n)}function Jv(...e){let t=Bc(e);return Ke((n,i)=>{let r=e.length,o=new Array(r),s=e.map(()=>!1),a=!1;for(let l=0;l<r;l++)lt(e[l]).subscribe(Be(i,c=>{o[l]=c,!a&&!s[l]&&(s[l]=!0,(a=s.every(Qi))&&(s=null))},$s));n.subscribe(Be(i,l=>{if(a){let c=[l,...o];i.next(t?t(...c):c)}}))})}var gre="https://g.co/ng/security#xss",Le=class extends Error{constructor(t,n){super(YS(t,n)),this.code=t}};function YS(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function g0(e){return{toString:e}.toString()}var fS="__parameters__";function mre(e){return function(...n){if(e){let i=e(...n);for(let r in i)this[r]=i[r]}}}function $8(e,t,n){return g0(()=>{let i=mre(t);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(l,c,u){let d=l.hasOwnProperty(fS)?l[fS]:Object.defineProperty(l,fS,{value:[]})[fS];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=e,r.annotationCls=r,r})}var kl=globalThis;function dn(e){for(let t in e)if(e[t]===dn)return t;throw Error("Could not find renamed property on target object.")}function vre(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function kr(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(kr).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function hI(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var yre=dn({__forward_ref__:dn});function Lo(e){return e.__forward_ref__=Lo,e.toString=function(){return kr(this())},e}function Mr(e){return Z8(e)?e():e}function Z8(e){return typeof e=="function"&&e.hasOwnProperty(yre)&&e.__forward_ref__===Lo}function oe(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function $i(e){return{providers:e.providers||[],imports:e.imports||[]}}function QS(e){return g8(e,e5)||g8(e,t5)}function J8(e){return QS(e)!==null}function g8(e,t){return e.hasOwnProperty(t)?e[t]:null}function Cre(e){let t=e&&(e[e5]||e[t5]);return t||null}function m8(e){return e&&(e.hasOwnProperty(v8)||e.hasOwnProperty(wre))?e[v8]:null}var e5=dn({\u0275prov:dn}),v8=dn({\u0275inj:dn}),t5=dn({ngInjectableDef:dn}),wre=dn({ngInjectorDef:dn}),ce=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=oe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function n5(e){return e&&!!e.\u0275providers}var bre=dn({\u0275cmp:dn}),Sre=dn({\u0275dir:dn}),_re=dn({\u0275pipe:dn}),Ere=dn({\u0275mod:dn}),xS=dn({\u0275fac:dn}),e0=dn({__NG_ELEMENT_ID__:dn}),y8=dn({__NG_ENV_ID__:dn});function pF(e){return typeof e=="string"?e:e==null?"":String(e)}function xre(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():pF(e)}function Dre(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new Le(-200,e)}function gF(e,t){throw new Le(-201,!1)}var wt=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(wt||{}),fI;function i5(){return fI}function fo(e){let t=fI;return fI=e,t}function r5(e,t,n){let i=QS(e);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&wt.Optional)return null;if(t!==void 0)return t;gF(e,"Injector")}var Tre={},t0=Tre,pI="__NG_DI_FLAG__",DS="ngTempTokenPath",Rre="ngTokenPath",Ire=/\n/gm,Fre="\u0275",C8="__source",bp;function Are(){return bp}function Yc(e){let t=bp;return bp=e,t}function Mre(e,t=wt.Default){if(bp===void 0)throw new Le(-203,!1);return bp===null?r5(e,void 0,t):bp.get(e,t&wt.Optional?null:void 0,t)}function $(e,t=wt.Default){return(i5()||Mre)(Mr(e),t)}function Y(e,t=wt.Default){return $(e,XS(t))}function XS(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function gI(e){let t=[];for(let n=0;n<e.length;n++){let i=Mr(e[n]);if(Array.isArray(i)){if(i.length===0)throw new Le(900,!1);let r,o=wt.Default;for(let s=0;s<i.length;s++){let a=i[s],l=Pre(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}t.push($(r,o))}else t.push($(i))}return t}function o5(e,t){return e[pI]=t,e.prototype[pI]=t,e}function Pre(e){return e[pI]}function kre(e,t,n,i){let r=e[DS];throw t[C8]&&r.unshift(t[C8]),e.message=Ore(`
`+e.message,r,n,i),e[Rre]=r,e[DS]=null,e}function Ore(e,t,n,i=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==Fre?e.slice(2):e;let r=kr(t);if(Array.isArray(t))r=t.map(kr).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):kr(a)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${e.replace(Ire,`
  `)}`}var gt=o5($8("Optional"),8);var s5=o5($8("SkipSelf"),4);function Nd(e,t){let n=e.hasOwnProperty(xS);return n?e[xS]:null}function Nre(e,t,n){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],o=t[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}function Lre(e){return e.flat(Number.POSITIVE_INFINITY)}function mF(e,t){e.forEach(n=>Array.isArray(n)?mF(n,t):t(n))}function a5(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function TS(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Vre(e,t){let n=[];for(let i=0;i<e;i++)n.push(t);return n}function Bre(e,t,n,i){let r=e.length;if(r==t)e.push(n,i);else if(r===1)e.push(i,e[0]),e[0]=n;else{for(r--,e.push(e[r-1],e[r]);r>t;){let o=r-2;e[r]=e[o],r--}e[t]=n,e[t+1]=i}}function vF(e,t,n){let i=m0(e,t);return i>=0?e[i|1]=n:(i=~i,Bre(e,i,t,n)),i}function KR(e,t){let n=m0(e,t);if(n>=0)return e[n|1]}function m0(e,t){return Gre(e,t,1)}function Gre(e,t,n){let i=0,r=e.length>>n;for(;r!==i;){let o=i+(r-i>>1),s=e[o<<n];if(t===s)return o<<n;s>t?r=o:i=o+1}return~(r<<n)}var _p={},Pr=[],Ld=new ce(""),l5=new ce("",-1),c5=new ce(""),RS=class{get(t,n=t0){if(n===t0){let i=new Error(`NullInjectorError: No provider for ${kr(t)}!`);throw i.name="NullInjectorError",i}return n}},u5=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(u5||{}),za=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(za||{}),Zn=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Zn||{});function Hre(e,t,n){let i=e.length;for(;;){let r=e.indexOf(t,n);if(r===-1)return r;if(r===0||e.charCodeAt(r-1)<=32){let o=t.length;if(r+o===i||e.charCodeAt(r+o)<=32)return r}n=r+1}}function mI(e,t,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let o=n[i++],s=n[i++],a=n[i++];e.setAttribute(t,s,a,o)}else{let o=r,s=n[++i];Ure(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),i++}}return i}function zre(e){return e===3||e===4||e===6}function Ure(e){return e.charCodeAt(0)===64}function n0(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){let r=t[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?w8(e,n,r,null,t[++i]):w8(e,n,r,null,null))}}return e}function w8(e,t,n,i,r){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){if(i===null){r!==null&&(e[o+1]=r);return}else if(i===e[o+1]){e[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),i!==null&&e.splice(o++,0,i),r!==null&&e.splice(o++,0,r)}var d5="ng-template";function jre(e,t,n,i){let r=0;if(i){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&Hre(t[r+1].toLowerCase(),n,0)!==-1)return!0}else if(yF(e))return!1;if(r=t.indexOf(1,r),r>-1){let o;for(;++r<t.length&&typeof(o=t[r])=="string";)if(o.toLowerCase()===n)return!0}return!1}function yF(e){return e.type===4&&e.value!==d5}function Wre(e,t,n){let i=e.type===4&&!n?d5:e.value;return t===i}function qre(e,t,n){let i=4,r=e.attrs,o=r!==null?Qre(r):0,s=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!s&&!ea(i)&&!ea(l))return!1;if(s&&ea(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!Wre(e,l,n)||l===""&&t.length===1){if(ea(i))return!1;s=!0}}else if(i&8){if(r===null||!jre(e,r,l,n)){if(ea(i))return!1;s=!0}}else{let c=t[++a],u=Kre(l,r,yF(e),n);if(u===-1){if(ea(i))return!1;s=!0;continue}if(c!==""){let d;if(u>o?d="":d=r[u+1].toLowerCase(),i&2&&c!==d){if(ea(i))return!1;s=!0}}}}return ea(i)||s}function ea(e){return(e&1)===0}function Kre(e,t,n,i){if(t===null)return-1;let r=0;if(i||!n){let o=!1;for(;r<t.length;){let s=t[r];if(s===e)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++r];for(;typeof a=="string";)a=t[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return Xre(t,e)}function h5(e,t,n=!1){for(let i=0;i<t.length;i++)if(qre(e,t[i],n))return!0;return!1}function Yre(e){let t=e.attrs;if(t!=null){let n=t.indexOf(5);if(!(n&1))return t[n+1]}return null}function Qre(e){for(let t=0;t<e.length;t++){let n=e[t];if(zre(n))return t}return e.length}function Xre(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let i=e[n];if(typeof i=="number")return-1;if(i===t)return n;n++}return-1}function $re(e,t){e:for(let n=0;n<t.length;n++){let i=t[n];if(e.length===i.length){for(let r=0;r<e.length;r++)if(e[r]!==i[r])continue e;return!0}}return!1}function b8(e,t){return e?":not("+t.trim()+")":t}function Zre(e){let t=e[0],n=1,i=2,r="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(i&2){let a=e[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!ea(s)&&(t+=b8(o,r),r=""),i=s,o=o||!ea(i);n++}return r!==""&&(t+=b8(o,r)),t}function Jre(e){return e.map(Zre).join(",")}function eoe(e){let t=[],n=[],i=1,r=2;for(;i<e.length;){let o=e[i];if(typeof o=="string")r===2?o!==""&&t.push(o,e[++i]):r===8&&n.push(o);else{if(!ea(r))break;r=o}i++}return{attrs:t,classes:n}}function je(e){return g0(()=>{let t=v5(e),n=pe(B({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===u5.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||za.Emulated,styles:e.styles||Pr,_:null,schemas:e.schemas||null,tView:null,id:""});y5(n);let i=e.dependencies;return n.directiveDefs=_8(i,!1),n.pipeDefs=_8(i,!0),n.id=ioe(n),n})}function toe(e){return Xc(e)||f5(e)}function noe(e){return e!==null}function Zi(e){return g0(()=>({type:e.type,bootstrap:e.bootstrap||Pr,declarations:e.declarations||Pr,imports:e.imports||Pr,exports:e.exports||Pr,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function S8(e,t){if(e==null)return _p;let n={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i],o,s,a=Zn.None;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o):(o=r,s=r),t?(n[o]=a!==Zn.None?[i,a]:i,t[o]=s):n[o]=i}return n}function on(e){return g0(()=>{let t=v5(e);return y5(t),t})}function $S(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone===!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function Xc(e){return e[bre]||null}function f5(e){return e[Sre]||null}function p5(e){return e[_re]||null}function g5(e){let t=Xc(e)||f5(e)||p5(e);return t!==null?t.standalone:!1}function m5(e,t){let n=e[Ere]||null;if(!n&&t===!0)throw new Error(`Type ${kr(e)} does not have '\u0275mod' property.`);return n}function v5(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||_p,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Pr,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:S8(e.inputs,t),outputs:S8(e.outputs),debugInfo:null}}function y5(e){e.features?.forEach(t=>t(e))}function _8(e,t){if(!e)return null;let n=t?p5:toe;return()=>(typeof e=="function"?e():e).map(i=>n(i)).filter(noe)}function ioe(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let r of n)t=Math.imul(31,t)+r.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function hn(e){return{\u0275providers:e}}function roe(...e){return{\u0275providers:C5(!0,e),\u0275fromNgModule:!0}}function C5(e,...t){let n=[],i=new Set,r,o=s=>{n.push(s)};return mF(t,s=>{let a=s;vI(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&w5(r,o),n}function w5(e,t){for(let n=0;n<e.length;n++){let{ngModule:i,providers:r}=e[n];CF(r,o=>{t(o,i)})}}function vI(e,t,n,i){if(e=Mr(e),!e)return!1;let r=null,o=m8(e),s=!o&&Xc(e);if(!o&&!s){let l=e.ngModule;if(o=m8(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=e}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)vI(c,t,n,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let c;try{mF(o.imports,u=>{vI(u,t,n,i)&&(c||=[],c.push(u))})}finally{}c!==void 0&&w5(c,t)}if(!a){let c=Nd(r)||(()=>new r);t({provide:r,useFactory:c,deps:Pr},r),t({provide:c5,useValue:r,multi:!0},r),t({provide:Ld,useValue:()=>$(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let c=e;CF(l,u=>{t(u,c)})}}else return!1;return r!==e&&e.providers!==void 0}function CF(e,t){for(let n of e)n5(n)&&(n=n.\u0275providers),Array.isArray(n)?CF(n,t):t(n)}var ooe=dn({provide:String,useValue:dn});function b5(e){return e!==null&&typeof e=="object"&&ooe in e}function soe(e){return!!(e&&e.useExisting)}function aoe(e){return!!(e&&e.useFactory)}function Ep(e){return typeof e=="function"}function loe(e){return!!e.useClass}var ZS=new ce(""),CS={},coe={},YR;function JS(){return YR===void 0&&(YR=new RS),YR}var Or=class{},i0=class extends Or{get destroyed(){return this._destroyed}constructor(t,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,CI(t,s=>this.processProvider(s)),this.records.set(l5,yp(void 0,this)),r.has("environment")&&this.records.set(Or,yp(void 0,this));let o=this.records.get(ZS);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(c5,Pr,wt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=Et(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Et(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=Yc(this),i=fo(void 0),r;try{return t()}finally{Yc(n),fo(i)}}get(t,n=t0,i=wt.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(y8))return t[y8](this);i=XS(i);let r,o=Yc(this),s=fo(void 0);try{if(!(i&wt.SkipSelf)){let l=this.records.get(t);if(l===void 0){let c=poe(t)&&QS(t);c&&this.injectableDefInScope(c)?l=yp(yI(t),CS):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let a=i&wt.Self?JS():this.parent;return n=i&wt.Optional&&n===t0?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[DS]=a[DS]||[]).unshift(kr(t)),o)throw a;return kre(a,t,"R3InjectorError",this.source)}else throw a}finally{fo(s),Yc(o)}}resolveInjectorInitializers(){let t=Et(null),n=Yc(this),i=fo(void 0),r;try{let o=this.get(Ld,Pr,wt.Self);for(let s of o)s()}finally{Yc(n),fo(i),Et(t)}}toString(){let t=[],n=this.records;for(let i of n.keys())t.push(kr(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Le(205,!1)}processProvider(t){t=Mr(t);let n=Ep(t)?t:Mr(t&&t.provide),i=doe(t);if(!Ep(t)&&t.multi===!0){let r=this.records.get(n);r||(r=yp(void 0,CS,!0),r.factory=()=>gI(r.multi),this.records.set(n,r)),n=t,r.multi.push(t)}this.records.set(n,i)}hydrate(t,n){let i=Et(null);try{return n.value===CS&&(n.value=coe,n.value=n.factory()),typeof n.value=="object"&&n.value&&foe(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Et(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Mr(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function yI(e){let t=QS(e),n=t!==null?t.factory:Nd(e);if(n!==null)return n;if(e instanceof ce)throw new Le(204,!1);if(e instanceof Function)return uoe(e);throw new Le(204,!1)}function uoe(e){if(e.length>0)throw new Le(204,!1);let n=Cre(e);return n!==null?()=>n.factory(e):()=>new e}function doe(e){if(b5(e))return yp(void 0,e.useValue);{let t=S5(e);return yp(t,CS)}}function S5(e,t,n){let i;if(Ep(e)){let r=Mr(e);return Nd(r)||yI(r)}else if(b5(e))i=()=>Mr(e.useValue);else if(aoe(e))i=()=>e.useFactory(...gI(e.deps||[]));else if(soe(e))i=()=>$(Mr(e.useExisting));else{let r=Mr(e&&(e.useClass||e.provide));if(hoe(e))i=()=>new r(...gI(e.deps));else return Nd(r)||yI(r)}return i}function yp(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function hoe(e){return!!e.deps}function foe(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function poe(e){return typeof e=="function"||typeof e=="object"&&e instanceof ce}function CI(e,t){for(let n of e)Array.isArray(n)?CI(n,t):n&&n5(n)?CI(n.\u0275providers,t):t(n)}function eu(e,t){e instanceof i0&&e.assertNotDestroyed();let n,i=Yc(e),r=fo(void 0);try{return t()}finally{Yc(i),fo(r)}}function _5(){return i5()!==void 0||Are()!=null}function E5(e){if(!_5())throw new Le(-203,!1)}function goe(e){return typeof e=="function"}var Oo=0,rt=1,it=2,Bi=3,na=4,Vo=5,No=6,r0=7,gr=8,xp=9,Ua=10,rn=11,o0=12,E8=13,Fp=14,po=15,v0=16,Cp=17,Nl=18,e1=19,x5=20,Qc=21,QR=22,Vd=23,Jn=25,D5=1,s0=6,Ll=7,IS=8,Dp=9,Xi=10,wF=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(wF||{});function Ol(e){return Array.isArray(e)&&typeof e[D5]=="object"}function ja(e){return Array.isArray(e)&&e[D5]===!0}function bF(e){return(e.flags&4)!==0}function y0(e){return e.componentOffset>-1}function t1(e){return(e.flags&1)===1}function $c(e){return!!e.template}function T5(e){return(e[it]&512)!==0}var wI=class{constructor(t,n,i){this.previousValue=t,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function R5(e,t,n,i){t!==null?t.applyValueToInputSignal(t,i):e[n]=i}function Vn(){return I5}function I5(e){return e.type.prototype.ngOnChanges&&(e.setInput=voe),moe}Vn.ngInherit=!0;function moe(){let e=A5(this),t=e?.current;if(t){let n=e.previous;if(n===_p)e.previous=t;else for(let i in t)n[i]=t[i];e.current=null,this.ngOnChanges(t)}}function voe(e,t,n,i,r){let o=this.declaredInputs[i],s=A5(e)||yoe(e,{previous:_p,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new wI(c&&c.currentValue,n,l===_p),R5(e,t,r,n)}var F5="__ngSimpleChanges__";function A5(e){return e[F5]||null}function yoe(e,t){return e[F5]=t}var x8=null;var Ga=function(e,t,n){x8?.(e,t,n)},M5="svg",Coe="math",woe=!1;function boe(){return woe}function ia(e){for(;Array.isArray(e);)e=e[Oo];return e}function P5(e,t){return ia(t[e])}function Bo(e,t){return ia(t[e.index])}function SF(e,t){return e.data[t]}function k5(e,t){return e[t]}function tu(e,t){let n=t[e];return Ol(n)?n:n[Oo]}function Soe(e){return(e[it]&4)===4}function _F(e){return(e[it]&128)===128}function _oe(e){return ja(e[Bi])}function Tp(e,t){return t==null?null:e[t]}function O5(e){e[Cp]=0}function Eoe(e){e[it]&1024||(e[it]|=1024,_F(e)&&a0(e))}function xoe(e,t){for(;e>0;)t=t[Fp],e--;return t}function EF(e){return!!(e[it]&9216||e[Vd]?.dirty)}function bI(e){e[Ua].changeDetectionScheduler?.notify(1),EF(e)?a0(e):e[it]&64&&(boe()?(e[it]|=1024,a0(e)):e[Ua].changeDetectionScheduler?.notify())}function a0(e){e[Ua].changeDetectionScheduler?.notify();let t=l0(e);for(;t!==null&&!(t[it]&8192||(t[it]|=8192,!_F(t)));)t=l0(t)}function N5(e,t){if((e[it]&256)===256)throw new Le(911,!1);e[Qc]===null&&(e[Qc]=[]),e[Qc].push(t)}function Doe(e,t){if(e[Qc]===null)return;let n=e[Qc].indexOf(t);n!==-1&&e[Qc].splice(n,1)}function l0(e){let t=e[Bi];return ja(t)?t[Bi]:t}var ht={lFrame:j5(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Toe(){return ht.lFrame.elementDepthCount}function Roe(){ht.lFrame.elementDepthCount++}function Ioe(){ht.lFrame.elementDepthCount--}function L5(){return ht.bindingsEnabled}function Ap(){return ht.skipHydrationRootTNode!==null}function Foe(e){return ht.skipHydrationRootTNode===e}function Aoe(e){ht.skipHydrationRootTNode=e}function Moe(){ht.skipHydrationRootTNode=null}function vt(){return ht.lFrame.lView}function Wn(){return ht.lFrame.tView}function Ge(e){return ht.lFrame.contextLView=e,e[gr]}function He(e){return ht.lFrame.contextLView=null,e}function Nr(){let e=V5();for(;e!==null&&e.type===64;)e=e.parent;return e}function V5(){return ht.lFrame.currentTNode}function Poe(){let e=ht.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function jd(e,t){let n=ht.lFrame;n.currentTNode=e,n.isParent=t}function xF(){return ht.lFrame.isParent}function DF(){ht.lFrame.isParent=!1}function koe(){return ht.lFrame.contextLView}function B5(){let e=ht.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Ooe(e){return ht.lFrame.bindingIndex=e}function Wd(){return ht.lFrame.bindingIndex++}function G5(e){let t=ht.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Noe(){return ht.lFrame.inI18n}function Loe(e,t){let n=ht.lFrame;n.bindingIndex=n.bindingRootIndex=e,SI(t)}function Voe(){return ht.lFrame.currentDirectiveIndex}function SI(e){ht.lFrame.currentDirectiveIndex=e}function Boe(e){let t=ht.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function H5(){return ht.lFrame.currentQueryIndex}function TF(e){ht.lFrame.currentQueryIndex=e}function Goe(e){let t=e[rt];return t.type===2?t.declTNode:t.type===1?e[Vo]:null}function z5(e,t,n){if(n&wt.SkipSelf){let r=t,o=e;for(;r=r.parent,r===null&&!(n&wt.Host);)if(r=Goe(o),r===null||(o=o[Fp],r.type&10))break;if(r===null)return!1;t=r,e=o}let i=ht.lFrame=U5();return i.currentTNode=t,i.lView=e,!0}function RF(e){let t=U5(),n=e[rt];ht.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function U5(){let e=ht.lFrame,t=e===null?null:e.child;return t===null?j5(e):t}function j5(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function W5(){let e=ht.lFrame;return ht.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var q5=W5;function IF(){let e=W5();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Hoe(e){return(ht.lFrame.contextLView=xoe(e,ht.lFrame.contextLView))[gr]}function nu(){return ht.lFrame.selectedIndex}function Bd(e){ht.lFrame.selectedIndex=e}function n1(){let e=ht.lFrame;return SF(e.tView,e.selectedIndex)}function qd(){ht.lFrame.currentNamespace=M5}function K5(){return ht.lFrame.currentNamespace}var Y5=!0;function i1(){return Y5}function Wa(e){Y5=e}function zoe(e,t,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(i){let s=I5(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}r&&(n.preOrderHooks??=[]).push(0-e,r),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function r1(e,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),l&&(e.viewHooks??=[]).push(-n,l),c&&((e.viewHooks??=[]).push(n,c),(e.viewCheckHooks??=[]).push(n,c)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function wS(e,t,n){Q5(e,t,3,n)}function bS(e,t,n,i){(e[it]&3)===n&&Q5(e,t,n,i)}function XR(e,t){let n=e[it];(n&3)===t&&(n&=16383,n+=1,e[it]=n)}function Q5(e,t,n,i){let r=i!==void 0?e[Cp]&65535:0,o=i??-1,s=t.length-1,a=0;for(let l=r;l<s;l++)if(typeof t[l+1]=="number"){if(a=t[l],i!=null&&a>=i)break}else t[l]<0&&(e[Cp]+=65536),(a<o||o==-1)&&(Uoe(e,n,t,l),e[Cp]=(e[Cp]&4294901760)+l+2),l++}function D8(e,t){Ga(4,e,t);let n=Et(null);try{t.call(e)}finally{Et(n),Ga(5,e,t)}}function Uoe(e,t,n,i){let r=n[i]<0,o=n[i+1],s=r?-n[i]:n[i],a=e[s];r?e[it]>>14<e[Cp]>>16&&(e[it]&3)===t&&(e[it]+=16384,D8(a,o)):D8(a,o)}var Sp=-1,Gd=class{constructor(t,n,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function joe(e){return e instanceof Gd}function Woe(e){return(e.flags&8)!==0}function qoe(e){return(e.flags&16)!==0}function X5(e){return e!==Sp}function FS(e){return e&32767}function Koe(e){return e>>16}function AS(e,t){let n=Koe(e),i=t;for(;n>0;)i=i[Fp],n--;return i}var _I=!0;function MS(e){let t=_I;return _I=e,t}var Yoe=256,$5=Yoe-1,Z5=5,Qoe=0,Ha={};function Xoe(e,t,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(e0)&&(i=n[e0]),i==null&&(i=n[e0]=Qoe++);let r=i&$5,o=1<<r;t.data[e+(r>>Z5)]|=o}function PS(e,t){let n=J5(e,t);if(n!==-1)return n;let i=t[rt];i.firstCreatePass&&(e.injectorIndex=t.length,$R(i.data,e),$R(t,null),$R(i.blueprint,null));let r=FF(e,t),o=e.injectorIndex;if(X5(r)){let s=FS(r),a=AS(r,t),l=a[rt].data;for(let c=0;c<8;c++)t[o+c]=a[s+c]|l[s+c]}return t[o+8]=r,o}function $R(e,t){e.push(0,0,0,0,0,0,0,0,t)}function J5(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function FF(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,i=null,r=t;for(;r!==null;){if(i=rG(r),i===null)return Sp;if(n++,r=r[Fp],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return Sp}function EI(e,t,n){Xoe(e,t,n)}function eG(e,t,n){if(n&wt.Optional||e!==void 0)return e;gF(t,"NodeInjector")}function tG(e,t,n,i){if(n&wt.Optional&&i===void 0&&(i=null),!(n&(wt.Self|wt.Host))){let r=e[xp],o=fo(void 0);try{return r?r.get(t,i,n&wt.Optional):r5(t,i,n&wt.Optional)}finally{fo(o)}}return eG(i,t,n)}function nG(e,t,n,i=wt.Default,r){if(e!==null){if(t[it]&2048&&!(i&wt.Self)){let s=ese(e,t,n,i,Ha);if(s!==Ha)return s}let o=iG(e,t,n,i,Ha);if(o!==Ha)return o}return tG(t,n,i,r)}function iG(e,t,n,i,r){let o=Zoe(n);if(typeof o=="function"){if(!z5(t,e,i))return i&wt.Host?eG(r,n,i):tG(t,n,i,r);try{let s;if(s=o(i),s==null&&!(i&wt.Optional))gF(n);else return s}finally{q5()}}else if(typeof o=="number"){let s=null,a=J5(e,t),l=Sp,c=i&wt.Host?t[po][Vo]:null;for((a===-1||i&wt.SkipSelf)&&(l=a===-1?FF(e,t):t[a+8],l===Sp||!R8(i,!1)?a=-1:(s=t[rt],a=FS(l),t=AS(l,t)));a!==-1;){let u=t[rt];if(T8(o,a,u.data)){let d=$oe(a,t,n,s,i,c);if(d!==Ha)return d}l=t[a+8],l!==Sp&&R8(i,t[rt].data[a+8]===c)&&T8(o,a,t)?(s=u,a=FS(l),t=AS(l,t)):a=-1}}return r}function $oe(e,t,n,i,r,o){let s=t[rt],a=s.data[e+8],l=i==null?y0(a)&&_I:i!=s&&(a.type&3)!==0,c=r&wt.Host&&o===a,u=SS(a,s,n,l,c);return u!==null?Hd(t,s,u,a):Ha}function SS(e,t,n,i,r){let o=e.providerIndexes,s=t.data,a=o&1048575,l=e.directiveStart,c=e.directiveEnd,u=o>>20,d=i?a:a+u,h=r?a+u:c;for(let p=d;p<h;p++){let g=s[p];if(p<l&&n===g||p>=l&&g.type===n)return p}if(r){let p=s[l];if(p&&$c(p)&&p.type===n)return l}return null}function Hd(e,t,n,i){let r=e[n],o=t.data;if(joe(r)){let s=r;s.resolving&&Dre(xre(o[n]));let a=MS(s.canSeeViewProviders);s.resolving=!0;let l,c=s.injectImpl?fo(s.injectImpl):null,u=z5(e,i,wt.Default);try{r=e[n]=s.factory(void 0,o,e,i),t.firstCreatePass&&n>=i.directiveStart&&zoe(n,o[n],t)}finally{c!==null&&fo(c),MS(a),s.resolving=!1,q5()}}return r}function Zoe(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(e0)?e[e0]:void 0;return typeof t=="number"?t>=0?t&$5:Joe:t}function T8(e,t,n){let i=1<<e;return!!(n[t+(e>>Z5)]&i)}function R8(e,t){return!(e&wt.Self)&&!(e&wt.Host&&t)}var Od=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,i){return nG(this._tNode,this._lView,t,XS(i),n)}};function Joe(){return new Od(Nr(),vt())}function go(e){return g0(()=>{let t=e.prototype.constructor,n=t[xS]||xI(t),i=Object.prototype,r=Object.getPrototypeOf(e.prototype).constructor;for(;r&&r!==i;){let o=r[xS]||xI(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function xI(e){return Z8(e)?()=>{let t=xI(Mr(e));return t&&t()}:Nd(e)}function ese(e,t,n,i,r){let o=e,s=t;for(;o!==null&&s!==null&&s[it]&2048&&!(s[it]&512);){let a=iG(o,s,n,i|wt.Self,Ha);if(a!==Ha)return a;let l=o.parent;if(!l){let c=s[x5];if(c){let u=c.get(n,Ha,i);if(u!==Ha)return u}l=rG(s),s=s[Fp]}o=l}return r}function rG(e){let t=e[rt],n=t.type;return n===2?t.declTNode:n===1?e[Vo]:null}function I8(e,t=null,n=null,i){let r=oG(e,t,n,i);return r.resolveInjectorInitializers(),r}function oG(e,t=null,n=null,i,r=new Set){let o=[n||Pr,roe(e)];return i=i||(typeof e=="object"?void 0:kr(e)),new i0(o,t||JS(),i||null,r)}var bt=(()=>{class e{static{this.THROW_IF_NOT_FOUND=t0}static{this.NULL=new RS}static create(n,i){if(Array.isArray(n))return I8({name:""},i,n,"");{let r=n.name??"";return I8({name:r},n.parent,n.providers,r)}}static{this.\u0275prov=oe({token:e,providedIn:"any",factory:()=>$(l5)})}static{this.__NG_ELEMENT_ID__=-1}}return e})();var tse="ngOriginalError";function ZR(e){return e[tse]}var Vl=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&ZR(t);for(;n&&ZR(n);)n=ZR(n);return n||null}},sG=new ce("",{providedIn:"root",factory:()=>Y(Vl).handleError.bind(void 0)}),Mp=(()=>{class e{static{this.__NG_ELEMENT_ID__=nse}static{this.__NG_ENV_ID__=n=>n}}return e})(),DI=class extends Mp{constructor(t){super(),this._lView=t}onDestroy(t){return N5(this._lView,t),()=>Doe(this._lView,t)}};function nse(){return new DI(vt())}function ise(){return Pp(Nr(),vt())}function Pp(e,t){return new In(Bo(e,t))}var In=(()=>{class e{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=ise}}return e})();function rse(e){return e instanceof In?e.nativeElement:e}var TI=class extends nt{constructor(t=!1){super(),this.destroyRef=void 0,this.__isAsync=t,_5()&&(this.destroyRef=Y(Mp,{optional:!0})??void 0)}emit(t){let n=Et(null);try{super.next(t)}finally{Et(n)}}subscribe(t,n,i){let r=t,o=n||(()=>null),s=i;if(t&&typeof t=="object"){let l=t;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=JR(o),r&&(r=JR(r)),s&&(s=JR(s)));let a=super.subscribe({next:r,error:o,complete:s});return t instanceof Ln&&t.add(a),a}};function JR(e){return t=>{setTimeout(e,void 0,t)}}var Q=TI;function ose(){return this._results[Symbol.iterator]()}var RI=class e{get changes(){return this._changes??=new Q}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=ose)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let i=Lre(t);(this._changesDetected=!Nre(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},sse="ngSkipHydration",ase="ngskiphydration";function aG(e){let t=e.mergedAttrs;if(t===null)return!1;for(let n=0;n<t.length;n+=2){let i=t[n];if(typeof i=="number")return!1;if(typeof i=="string"&&i.toLowerCase()===ase)return!0}return!1}function lG(e){return e.hasAttribute(sse)}function kS(e){return(e.flags&128)===128}function lse(e){if(kS(e))return!0;let t=e.parent;for(;t;){if(kS(e)||aG(t))return!0;t=t.parent}return!1}var cG=new Map,cse=0;function use(){return cse++}function dse(e){cG.set(e[e1],e)}function hse(e){cG.delete(e[e1])}var F8="__ngContext__";function Zc(e,t){Ol(t)?(e[F8]=t[e1],dse(t)):e[F8]=t}function uG(e){return hG(e[o0])}function dG(e){return hG(e[na])}function hG(e){for(;e!==null&&!ja(e);)e=e[na];return e}var II;function fG(e){II=e}function o1(){if(II!==void 0)return II;if(typeof document<"u")return document;throw new Le(210,!1)}var s1=new ce("",{providedIn:"root",factory:()=>fse}),fse="ng",AF=new ce(""),Sn=new ce("",{providedIn:"platform",factory:()=>"unknown"});var MF=new ce("",{providedIn:"root",factory:()=>o1().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function pse(){let e=new Kd;return Y(Sn)==="browser"&&(e.store=gse(o1(),Y(s1))),e}var Kd=(()=>{class e{constructor(){this.store={},this.onSerializeCallbacks={}}static{this.\u0275prov=oe({token:e,providedIn:"root",factory:pse})}get(n,i){return this.store[n]!==void 0?this.store[n]:i}set(n,i){this.store[n]=i}remove(n){delete this.store[n]}hasKey(n){return this.store.hasOwnProperty(n)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(n,i){this.onSerializeCallbacks[n]=i}toJson(){for(let n in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(n))try{this.store[n]=this.onSerializeCallbacks[n]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return e})();function gse(e,t){let n=e.getElementById(t+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(i){console.warn("Exception while restoring TransferState for app "+t,i)}return{}}var pG="h",gG="b",FI=function(e){return e.FirstChild="f",e.NextSibling="n",e}(FI||{}),mse="e",vse="t",PF="c",mG="x",OS="r",yse="i",Cse="n",wse="d",bse="__nghData__",vG=bse,eI="ngh",Sse="nghm",yG=()=>null;function _se(e,t,n=!1){let i=e.getAttribute(eI);if(i==null)return null;let[r,o]=i.split("|");if(i=n?o:r,!i)return null;let s=o?`|${o}`:"",a=n?r:s,l={};if(i!==""){let u=t.get(Kd,null,{optional:!0});u!==null&&(l=u.get(vG,[])[Number(i)])}let c={data:l,firstChild:e.firstChild??null};return n&&(c.firstChild=e,a1(c,0,e.nextSibling)),a?e.setAttribute(eI,a):e.removeAttribute(eI),c}function Ese(){yG=_se}function kF(e,t,n=!1){return yG(e,t,n)}function xse(e){let t=e._lView;return t[rt].type===2?null:(T5(t)&&(t=t[Jn]),t)}function Dse(e){return e.textContent?.replace(/\s/gm,"")}function Tse(e){let t=o1(),n=t.createNodeIterator(e,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=Dse(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),i,r=[];for(;i=n.nextNode();)r.push(i);for(let o of r)o.textContent==="ngetn"?o.replaceWith(t.createTextNode("")):o.remove()}function a1(e,t,n){e.segmentHeads??={},e.segmentHeads[t]=n}function AI(e,t){return e.segmentHeads?.[t]??null}function Rse(e,t){let n=e.data,i=n[mse]?.[t]??null;return i===null&&n[PF]?.[t]&&(i=OF(e,t)),i}function CG(e,t){return e.data[PF]?.[t]??null}function OF(e,t){let n=CG(e,t)??[],i=0;for(let r of n)i+=r[OS]*(r[mG]??1);return i}function l1(e,t){if(typeof e.disconnectedNodes>"u"){let n=e.data[wse];e.disconnectedNodes=n?new Set(n):null}return!!e.disconnectedNodes?.has(t)}var pS=new ce(""),wG=!1,bG=new ce("",{providedIn:"root",factory:()=>wG}),Ise=new ce("");var MI=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gre})`}};function c1(e){return e instanceof MI?e.changingThisBreaksApplicationSecurity:e}var Fse=/^>|^->|<!--|-->|--!>|<!-$/g,Ase=/(<|>)/g,Mse="\u200B$1\u200B";function Pse(e){return e.replace(Fse,t=>t.replace(Ase,Mse))}function kse(e){return e.ownerDocument.body}function SG(e){return e instanceof Function?e():e}function gS(e){return(e??Y(bt)).get(Sn)==="browser"}var Bl=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Bl||{}),Ose;function NF(e,t){return Ose(e,t)}function wp(e,t,n,i,r){if(i!=null){let o,s=!1;ja(i)?o=i:Ol(i)&&(s=!0,i=i[Oo]);let a=ia(i);e===0&&n!==null?r==null?DG(t,n,a):NS(t,n,a,r||null,!0):e===1&&n!==null?NS(t,n,a,r||null,!0):e===2?GF(t,a,s):e===3&&t.destroyNode(a),o!=null&&Xse(t,e,o,n,r)}}function LF(e,t){return e.createText(t)}function Nse(e,t,n){e.setValue(t,n)}function VF(e,t){return e.createComment(Pse(t))}function u1(e,t,n){return e.createElement(t,n)}function Lse(e,t){_G(e,t),t[Oo]=null,t[Vo]=null}function Vse(e,t,n,i,r,o){i[Oo]=r,i[Vo]=t,f1(e,i,n,1,r,o)}function _G(e,t){t[Ua].changeDetectionScheduler?.notify(1),f1(e,t,t[rn],2,null,null)}function Bse(e){let t=e[o0];if(!t)return tI(e[rt],e);for(;t;){let n=null;if(Ol(t))n=t[o0];else{let i=t[Xi];i&&(n=i)}if(!n){for(;t&&!t[na]&&t!==e;)Ol(t)&&tI(t[rt],t),t=t[Bi];t===null&&(t=e),Ol(t)&&tI(t[rt],t),n=t&&t[na]}t=n}}function Gse(e,t,n,i){let r=Xi+i,o=n.length;i>0&&(n[r-1][na]=t),i<o-Xi?(t[na]=n[r],a5(n,Xi+i,t)):(n.push(t),t[na]=null),t[Bi]=n;let s=t[v0];s!==null&&n!==s&&Hse(s,t);let a=t[Nl];a!==null&&a.insertView(e),bI(t),t[it]|=128}function Hse(e,t){let n=e[Dp],r=t[Bi][Bi][po];t[po]!==r&&(e[it]|=wF.HasTransplantedViews),n===null?e[Dp]=[t]:n.push(t)}function EG(e,t){let n=e[Dp],i=n.indexOf(t);n.splice(i,1)}function c0(e,t){if(e.length<=Xi)return;let n=Xi+t,i=e[n];if(i){let r=i[v0];r!==null&&r!==e&&EG(r,i),t>0&&(e[n-1][na]=i[na]);let o=TS(e,Xi+t);Lse(i[rt],i);let s=o[Nl];s!==null&&s.detachView(o[rt]),i[Bi]=null,i[na]=null,i[it]&=-129}return i}function d1(e,t){if(!(t[it]&256)){let n=t[rn];n.destroyNode&&f1(e,t,n,3,null,null),Bse(t)}}function tI(e,t){if(t[it]&256)return;let n=Et(null);try{t[it]&=-129,t[it]|=256,t[Vd]&&H4(t[Vd]),Use(e,t),zse(e,t),t[rt].type===1&&t[rn].destroy();let i=t[v0];if(i!==null&&ja(t[Bi])){i!==t[Bi]&&EG(i,t);let r=t[Nl];r!==null&&r.detachView(e)}hse(t)}finally{Et(n)}}function zse(e,t){let n=e.cleanup,i=t[r0];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else{let s=i[n[o+1]];n[o].call(s)}i!==null&&(t[r0]=null);let r=t[Qc];if(r!==null){t[Qc]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function Use(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=t[n[i]];if(!(r instanceof Gd)){let o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];Ga(4,a,l);try{l.call(a)}finally{Ga(5,a,l)}}else{Ga(4,r,o);try{o.call(r)}finally{Ga(5,r,o)}}}}}function xG(e,t,n){return jse(e,t.parent,n)}function jse(e,t,n){let i=t;for(;i!==null&&i.type&40;)t=i,i=t.parent;if(i===null)return n[Oo];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=e.data[i.directiveStart+r];if(o===za.None||o===za.Emulated)return null}return Bo(i,n)}}function NS(e,t,n,i,r){e.insertBefore(t,n,i,r)}function DG(e,t,n){e.appendChild(t,n)}function A8(e,t,n,i,r){i!==null?NS(e,t,n,i,r):DG(e,t,n)}function Wse(e,t,n,i){e.removeChild(t,n,i)}function BF(e,t){return e.parentNode(t)}function qse(e,t){return e.nextSibling(t)}function TG(e,t,n){return Yse(e,t,n)}function Kse(e,t,n){return e.type&40?Bo(e,n):null}var Yse=Kse,M8;function h1(e,t,n,i){let r=xG(e,i,t),o=t[rn],s=i.parent||t[Vo],a=TG(s,i,t);if(r!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)A8(o,r,n[l],a,!1);else A8(o,r,n,a,!1);M8!==void 0&&M8(o,i,t,n,r)}function _S(e,t){if(t!==null){let n=t.type;if(n&3)return Bo(t,e);if(n&4)return PI(-1,e[t.index]);if(n&8){let i=t.child;if(i!==null)return _S(e,i);{let r=e[t.index];return ja(r)?PI(-1,r):ia(r)}}else{if(n&32)return NF(t,e)()||ia(e[t.index]);{let i=RG(e,t);if(i!==null){if(Array.isArray(i))return i[0];let r=l0(e[po]);return _S(r,i)}else return _S(e,t.next)}}}return null}function RG(e,t){if(t!==null){let i=e[po][Vo],r=t.projection;return i.projection[r]}return null}function PI(e,t){let n=Xi+e+1;if(n<t.length){let i=t[n],r=i[rt].firstChild;if(r!==null)return _S(i,r)}return t[Ll]}function GF(e,t,n){let i=BF(e,t);i&&Wse(e,i,t,n)}function IG(e){e.textContent=""}function HF(e,t,n,i,r,o,s){for(;n!=null;){let a=i[n.index],l=n.type;if(s&&t===0&&(a&&Zc(ia(a),i),n.flags|=2),(n.flags&32)!==32)if(l&8)HF(e,t,n.child,i,r,o,!1),wp(t,e,r,a,o);else if(l&32){let c=NF(n,i),u;for(;u=c();)wp(t,e,r,u,o);wp(t,e,r,a,o)}else l&16?FG(e,t,i,n,r,o):wp(t,e,r,a,o);n=s?n.projectionNext:n.next}}function f1(e,t,n,i,r,o){HF(n,i,e.firstChild,t,r,o,!1)}function Qse(e,t,n){let i=t[rn],r=xG(e,n,t),o=n.parent||t[Vo],s=TG(o,n,t);FG(i,0,t,n,r,s)}function FG(e,t,n,i,r,o){let s=n[po],l=s[Vo].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];wp(t,e,r,u,o)}else{let c=l,u=s[Bi];kS(i)&&(c.flags|=128),HF(e,t,c,u,r,o,!0)}}function Xse(e,t,n,i,r){let o=n[Ll],s=ia(n);o!==s&&wp(t,e,i,o,r);for(let a=Xi;a<n.length;a++){let l=n[a];f1(l[rt],l,e,t,i,o)}}function $se(e,t,n,i,r){if(t)r?e.addClass(n,i):e.removeClass(n,i);else{let o=i.indexOf("-")===-1?void 0:Bl.DashCase;r==null?e.removeStyle(n,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Bl.Important),e.setStyle(n,i,r,o))}}function Zse(e,t,n){e.setAttribute(t,"style",n)}function AG(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function MG(e,t,n){let{mergedAttrs:i,classes:r,styles:o}=n;i!==null&&mI(e,t,i),r!==null&&AG(e,t,r),o!==null&&Zse(e,t,o)}var Hl={};function Z(e=1){PG(Wn(),vt(),nu()+e,!1)}function PG(e,t,n,i){if(!i)if((t[it]&3)===3){let o=e.preOrderCheckHooks;o!==null&&wS(t,o,n)}else{let o=e.preOrderHooks;o!==null&&bS(t,o,0,n)}Bd(n)}function J(e,t=wt.Default){let n=vt();if(n===null)return $(e,t);let i=Nr();return nG(i,n,Mr(e),t)}function kG(e,t,n,i,r,o){let s=Et(null);try{let a=null;r&Zn.SignalBased&&(a=t[i][xR]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),r&Zn.HasDecoratorInputTransform&&(o=e.inputTransforms[i].call(t,o)),e.setInput!==null?e.setInput(t,a,o,n,i):R5(t,a,i,o)}finally{Et(s)}}function Jse(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)Bd(~r);else{let o=r,s=n[++i],a=n[++i];Loe(s,o);let l=t[o];a(2,l)}}}finally{Bd(-1)}}function p1(e,t,n,i,r,o,s,a,l,c,u){let d=t.blueprint.slice();return d[Oo]=r,d[it]=i|4|128|8|64,(c!==null||e&&e[it]&2048)&&(d[it]|=2048),O5(d),d[Bi]=d[Fp]=e,d[gr]=n,d[Ua]=s||e&&e[Ua],d[rn]=a||e&&e[rn],d[xp]=l||e&&e[xp]||null,d[Vo]=o,d[e1]=use(),d[No]=u,d[x5]=c,d[po]=t.type==2?e[po]:d,d}function kp(e,t,n,i,r){let o=e.data[t];if(o===null)o=eae(e,t,n,i,r),Noe()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=i,o.attrs=r;let s=Poe();o.injectorIndex=s===null?-1:s.injectorIndex}return jd(o,!0),o}function eae(e,t,n,i,r){let o=V5(),s=xF(),a=s?o:o&&o.parent,l=e.data[t]=aae(e,a,n,t,i,r);return e.firstChild===null&&(e.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function OG(e,t,n,i){if(n===0)return-1;let r=t.length;for(let o=0;o<n;o++)t.push(i),e.blueprint.push(i),e.data.push(null);return r}function NG(e,t,n,i,r){let o=nu(),s=i&2;try{Bd(-1),s&&t.length>Jn&&PG(e,t,Jn,!1),Ga(s?2:0,r),n(i,r)}finally{Bd(o),Ga(s?3:1,r)}}function zF(e,t,n){if(bF(t)){let i=Et(null);try{let r=t.directiveStart,o=t.directiveEnd;for(let s=r;s<o;s++){let a=e.data[s];if(a.contentQueries){let l=n[s];a.contentQueries(1,l,s)}}}finally{Et(i)}}}function UF(e,t,n){L5()&&(fae(e,t,n,Bo(n,t)),(n.flags&64)===64&&GG(e,t,n))}function jF(e,t,n=Bo){let i=t.localNames;if(i!==null){let r=t.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?n(t,e):e[s];e[r++]=a}}}function LG(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=WF(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function WF(e,t,n,i,r,o,s,a,l,c,u){let d=Jn+i,h=d+r,p=tae(d,h),g=typeof c=="function"?c():c;return p[rt]={type:e,blueprint:p,template:n,queries:null,viewQuery:a,declTNode:t,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:g,incompleteFirstPass:!1,ssrId:u}}function tae(e,t){let n=[];for(let i=0;i<t;i++)n.push(i<e?null:Hl);return n}function nae(e,t,n,i){let o=i.get(bG,wG)||n===za.ShadowDom,s=e.selectRootElement(t,o);return iae(s),s}function iae(e){VG(e)}var VG=()=>null;function rae(e){lG(e)?IG(e):Tse(e)}function oae(){VG=rae}function sae(e,t,n,i){let r=UG(t);r.push(n),e.firstCreatePass&&jG(e).push(i,r.length-1)}function aae(e,t,n,i,r,o){let s=t?t.injectorIndex:-1,a=0;return Ap()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function P8(e,t,n,i,r){for(let o in t){if(!t.hasOwnProperty(o))continue;let s=t[o];if(s===void 0)continue;i??={};let a,l=Zn.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let c=o;if(r!==null){if(!r.hasOwnProperty(o))continue;c=r[o]}e===0?k8(i,n,c,a,l):k8(i,n,c,a)}return i}function k8(e,t,n,i,r){let o;e.hasOwnProperty(n)?(o=e[n]).push(t,i):o=e[n]=[t,i],r!==void 0&&o.push(r)}function lae(e,t,n){let i=t.directiveStart,r=t.directiveEnd,o=e.data,s=t.attrs,a=[],l=null,c=null;for(let u=i;u<r;u++){let d=o[u],h=n?n.get(d):null,p=h?h.inputs:null,g=h?h.outputs:null;l=P8(0,d.inputs,u,l,p),c=P8(1,d.outputs,u,c,g);let m=l!==null&&s!==null&&!yF(t)?Eae(l,u,s):null;a.push(m)}l!==null&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}function cae(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function qF(e,t,n,i,r,o,s,a){let l=Bo(t,n),c=t.inputs,u;!a&&c!=null&&(u=c[i])?(YF(e,n,u,i,r),y0(t)&&uae(n,t.index)):t.type&3?(i=cae(i),r=s!=null?s(r,t.value||"",i):r,o.setProperty(l,i,r)):t.type&12}function uae(e,t){let n=tu(t,e);n[it]&16||(n[it]|=64)}function KF(e,t,n,i){if(L5()){let r=i===null?null:{"":-1},o=gae(e,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&BG(e,t,n,s,r,a),r&&mae(n,i,r)}n.mergedAttrs=n0(n.mergedAttrs,n.attrs)}function BG(e,t,n,i,r,o){for(let c=0;c<i.length;c++)EI(PS(n,t),e,i[c].type);yae(n,e.data.length,i.length);for(let c=0;c<i.length;c++){let u=i[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=OG(e,t,i.length,null);for(let c=0;c<i.length;c++){let u=i[c];n.mergedAttrs=n0(n.mergedAttrs,u.hostAttrs),Cae(e,n,t,l,u),vae(l,u,r),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}lae(e,n,o)}function dae(e,t,n,i,r){let o=r.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;hae(s)!=a&&s.push(a),s.push(n,i,o)}}function hae(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function fae(e,t,n,i){let r=n.directiveStart,o=n.directiveEnd;y0(n)&&wae(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||PS(n,t),Zc(i,t);let s=n.initialInputs;for(let a=r;a<o;a++){let l=e.data[a],c=Hd(t,e,a,n);if(Zc(c,t),s!==null&&_ae(t,a-r,c,l,n,s),$c(l)){let u=tu(n.index,t);u[gr]=Hd(t,e,a,n)}}}function GG(e,t,n){let i=n.directiveStart,r=n.directiveEnd,o=n.index,s=Voe();try{Bd(o);for(let a=i;a<r;a++){let l=e.data[a],c=t[a];SI(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&pae(l,c)}}finally{Bd(-1),SI(s)}}function pae(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function gae(e,t){let n=e.directiveRegistry,i=null,r=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(h5(t,s.selectors,!1))if(i||(i=[]),$c(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s);let l=a.length;kI(e,t,l)}else i.unshift(s),kI(e,t,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return i===null?null:[i,r]}function kI(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function mae(e,t,n){if(t){let i=e.localNames=[];for(let r=0;r<t.length;r+=2){let o=n[t[r+1]];if(o==null)throw new Le(-301,!1);i.push(t[r],o)}}}function vae(e,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;$c(t)&&(n[""]=e)}}function yae(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Cae(e,t,n,i,r){e.data[i]=r;let o=r.factory||(r.factory=Nd(r.type,!0)),s=new Gd(o,$c(r),J);e.blueprint[i]=s,n[i]=s,dae(e,t,i,OG(e,n,r.hostVars,Hl),r)}function wae(e,t,n){let i=Bo(t,e),r=LG(n),o=e[Ua].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=g1(e,p1(e,r,null,s,i,t,null,o.createRenderer(i,n),null,null,null));e[t.index]=a}function bae(e,t,n,i,r,o){let s=Bo(e,t);Sae(t[rn],s,o,e.value,n,i,r)}function Sae(e,t,n,i,r,o,s){if(o==null)e.removeAttribute(t,r,n);else{let a=s==null?pF(o):s(o,i||"",r);e.setAttribute(t,r,a,n)}}function _ae(e,t,n,i,r,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],c=s[a++],u=s[a++],d=s[a++];kG(i,n,l,c,u,d)}}function Eae(e,t,n){let i=null,r=0;for(;r<n.length;){let o=n[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(e.hasOwnProperty(o)){i===null&&(i=[]);let s=e[o];for(let a=0;a<s.length;a+=3)if(s[a]===t){i.push(o,s[a+1],s[a+2],n[r+1]);break}}r+=2}return i}function HG(e,t,n,i){return[e,!0,0,t,null,i,null,n,null,null]}function zG(e,t){let n=e.contentQueries;if(n!==null){let i=Et(null);try{for(let r=0;r<n.length;r+=2){let o=n[r],s=n[r+1];if(s!==-1){let a=e.data[s];TF(o),a.contentQueries(2,t[s],s)}}}finally{Et(i)}}}function g1(e,t){return e[o0]?e[E8][na]=t:e[o0]=t,e[E8]=t,t}function OI(e,t,n){TF(0);let i=Et(null);try{t(e,n)}finally{Et(i)}}function UG(e){return e[r0]||(e[r0]=[])}function jG(e){return e.cleanup||(e.cleanup=[])}function WG(e,t){let n=e[xp],i=n?n.get(Vl,null):null;i&&i.handleError(t)}function YF(e,t,n,i,r){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],l=n[o++],c=t[s],u=e.data[s];kG(u,c,i,a,l,r)}}function xae(e,t,n){let i=P5(t,e);Nse(e[rn],i,n)}function Dae(e,t){let n=tu(t,e),i=n[rt];Tae(i,n);let r=n[Oo];r!==null&&n[No]===null&&(n[No]=kF(r,n[xp])),QF(i,n,n[gr])}function Tae(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function QF(e,t,n){RF(t);try{let i=e.viewQuery;i!==null&&OI(1,i,n);let r=e.template;r!==null&&NG(e,t,r,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[Nl]?.finishViewCreation(e),e.staticContentQueries&&zG(e,t),e.staticViewQueries&&OI(2,e.viewQuery,n);let o=e.components;o!==null&&Rae(t,o)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{t[it]&=-5,IF()}}function Rae(e,t){for(let n=0;n<t.length;n++)Dae(e,t[n])}function m1(e,t,n,i){let r=Et(null);try{let o=t.tView,a=e[it]&4096?4096:16,l=p1(e,o,n,a,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=e[t.index];l[v0]=c;let u=e[Nl];return u!==null&&(l[Nl]=u.createEmbeddedView(o)),QF(o,l,n),l}finally{Et(r)}}function qG(e,t){let n=Xi+t;if(n<e.length)return e[n]}function u0(e,t){return!t||t.firstChild===null||kS(e)}function v1(e,t,n,i=!0){let r=t[rt];if(Gse(r,t,e,n),i){let s=PI(n,e),a=t[rn],l=BF(a,e[Ll]);l!==null&&Vse(r,e[Vo],a,t,l,s)}let o=t[No];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function KG(e,t){let n=c0(e,t);return n!==void 0&&d1(n[rt],n),n}function LS(e,t,n,i,r=!1){for(;n!==null;){let o=t[n.index];o!==null&&i.push(ia(o)),ja(o)&&Iae(o,i);let s=n.type;if(s&8)LS(e,t,n.child,i);else if(s&32){let a=NF(n,t),l;for(;l=a();)i.push(l)}else if(s&16){let a=RG(t,n);if(Array.isArray(a))i.push(...a);else{let l=l0(t[po]);LS(l[rt],l,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function Iae(e,t){for(let n=Xi;n<e.length;n++){let i=e[n],r=i[rt].firstChild;r!==null&&LS(i[rt],i,r,t)}e[Ll]!==e[Oo]&&t.push(e[Ll])}var YG=[];function Fae(e){return e[Vd]??Aae(e)}function Aae(e){let t=YG.pop()??Object.create(Pae);return t.lView=e,t}function Mae(e){e.lView[Vd]!==e&&(e.lView=null,YG.push(e))}var Pae=pe(B({},V4),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{a0(e.lView)},consumerOnSignalRead(){this.lView[Vd]=this}}),QG=100;function XG(e,t=!0,n=0){let i=e[Ua],r=i.rendererFactory,o=!1;o||r.begin?.();try{kae(e,n)}catch(s){throw t&&WG(e,s),s}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function kae(e,t){NI(e,t);let n=0;for(;EF(e);){if(n===QG)throw new Le(103,!1);n++,NI(e,1)}}function Oae(e,t,n,i){let r=t[it];if((r&256)===256)return;let o=!1;!o&&t[Ua].inlineEffectRunner?.flush(),RF(t);let s=null,a=null;!o&&Nae(e)&&(a=Fae(t),s=B4(a));try{O5(t),Ooe(e.bindingStartIndex),n!==null&&NG(e,t,n,2,i);let l=(r&3)===3;if(!o)if(l){let d=e.preOrderCheckHooks;d!==null&&wS(t,d,null)}else{let d=e.preOrderHooks;d!==null&&bS(t,d,0,null),XR(t,0)}if(Lae(t),$G(t,0),e.contentQueries!==null&&zG(e,t),!o)if(l){let d=e.contentCheckHooks;d!==null&&wS(t,d)}else{let d=e.contentHooks;d!==null&&bS(t,d,1),XR(t,1)}Jse(e,t);let c=e.components;c!==null&&JG(t,c,0);let u=e.viewQuery;if(u!==null&&OI(2,u,i),!o)if(l){let d=e.viewCheckHooks;d!==null&&wS(t,d)}else{let d=e.viewHooks;d!==null&&bS(t,d,2),XR(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[QR]){for(let d of t[QR])d();t[QR]=null}o||(t[it]&=-73)}catch(l){throw a0(t),l}finally{a!==null&&(G4(a,s),Mae(a)),IF()}}function Nae(e){return e.type!==2}function $G(e,t){for(let n=uG(e);n!==null;n=dG(n))for(let i=Xi;i<n.length;i++){let r=n[i];ZG(r,t)}}function Lae(e){for(let t=uG(e);t!==null;t=dG(t)){if(!(t[it]&wF.HasTransplantedViews))continue;let n=t[Dp];for(let i=0;i<n.length;i++){let r=n[i],o=r[Bi];Eoe(r)}}}function Vae(e,t,n){let i=tu(t,e);ZG(i,n)}function ZG(e,t){_F(e)&&NI(e,t)}function NI(e,t){let i=e[rt],r=e[it],o=e[Vd],s=!!(t===0&&r&16);if(s||=!!(r&64&&t===0),s||=!!(r&1024),s||=!!(o?.dirty&&DR(o)),o&&(o.dirty=!1),e[it]&=-9217,s)Oae(i,e,i.template,e[gr]);else if(r&8192){$G(e,1);let a=i.components;a!==null&&JG(e,a,1)}}function JG(e,t,n){for(let i=0;i<t.length;i++)Vae(e,t[i],n)}function XF(e){for(e[Ua].changeDetectionScheduler?.notify();e;){e[it]|=64;let t=l0(e);if(T5(e)&&!t)return e;e=t}return null}var zd=class{get rootNodes(){let t=this._lView,n=t[rt];return LS(n,t,n.firstChild,[])}constructor(t,n,i=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[gr]}set context(t){this._lView[gr]=t}get destroyed(){return(this._lView[it]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Bi];if(ja(t)){let n=t[IS],i=n?n.indexOf(this):-1;i>-1&&(c0(t,i),TS(n,i))}this._attachedToViewContainer=!1}d1(this._lView[rt],this._lView)}onDestroy(t){N5(this._lView,t)}markForCheck(){XF(this._cdRefInjectingView||this._lView)}detach(){this._lView[it]&=-129}reattach(){bI(this._lView),this._lView[it]|=128}detectChanges(){this._lView[it]|=1024,XG(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Le(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,_G(this._lView[rt],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Le(902,!1);this._appRef=t,bI(this._lView)}},ra=(()=>{class e{static{this.__NG_ELEMENT_ID__=Hae}}return e})(),Bae=ra,Gae=class extends Bae{constructor(t,n,i){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,i){let r=m1(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:i});return new zd(r)}};function Hae(){return y1(Nr(),vt())}function y1(e,t){return e.type&4?new Gae(t,e,Pp(e,t)):null}function eH(e){let t=e[s0]??[],i=e[Bi][rn];for(let r of t)zae(r,i);e[s0]=Pr}function zae(e,t){let n=0,i=e.firstChild;if(i){let r=e.data[OS];for(;n<r;){let o=i.nextSibling;GF(t,i,!1),i=o,n++}}}function tH(e){eH(e);for(let t=Xi;t<e.length;t++)VS(e[t])}function Uae(e){let t=e[No]?.i18nNodes;if(t){let n=e[rn];for(let i of t.values())GF(n,i,!1);e[No].i18nNodes=void 0}}function VS(e){Uae(e);let t=e[rt];for(let n=Jn;n<t.bindingStartIndex;n++)if(ja(e[n])){let i=e[n];tH(i)}else Ol(e[n])&&VS(e[n])}function jae(e){let t=e._views;for(let n of t){let i=xse(n);if(i!==null&&i[Oo]!==null)if(Ol(i))VS(i);else{let r=i[Oo];VS(r),tH(i)}}}var Wae=new RegExp(`^(\\d+)*(${gG}|${pG})*(.*)`);function qae(e){let t=e.match(Wae),[n,i,r,o]=t,s=i?parseInt(i,10):r,a=[];for(let[l,c,u]of o.matchAll(/(f|n)(\d*)/g)){let d=parseInt(u,10)||1;a.push(c,d)}return[s,...a]}function Kae(e){return!e.prev&&e.parent?.type===8}function nI(e){return e.index-Jn}function Yae(e,t){let n=e.i18nNodes;if(n){let i=n.get(t);return i&&n.delete(t),i}return null}function C1(e,t,n,i){let r=nI(i),o=Yae(e,r);if(!o){let s=e.data[Cse];if(s?.[r])o=Xae(s[r],n);else if(t.firstChild===i)o=e.firstChild;else{let a=i.prev===null,l=i.prev??i.parent;if(Kae(i)){let c=nI(i.parent);o=AI(e,c)}else{let c=Bo(l,n);if(a)o=c.firstChild;else{let u=nI(l),d=AI(e,u);if(l.type===2&&d){let p=OF(e,u)+1;o=w1(p,d)}else o=c.nextSibling}}}}return o}function w1(e,t){let n=t;for(let i=0;i<e;i++)n=n.nextSibling;return n}function Qae(e,t){let n=e;for(let i=0;i<t.length;i+=2){let r=t[i],o=t[i+1];for(let s=0;s<o;s++)switch(r){case FI.FirstChild:n=n.firstChild;break;case FI.NextSibling:n=n.nextSibling;break}}return n}function Xae(e,t){let[n,...i]=qae(e),r;if(n===pG)r=t[po][Oo];else if(n===gG)r=kse(t[po][Oo]);else{let o=Number(n);r=ia(t[o+Jn])}return Qae(r,i)}function $ae(e,t){let n=[];for(let i of t)for(let r=0;r<(i[mG]??1);r++){let o={data:i,firstChild:null};i[OS]>0&&(o.firstChild=e,e=w1(i[OS],e)),n.push(o)}return[e,n]}var nH=()=>null;function Zae(e,t){let n=e[s0];return!t||n===null||n.length===0?null:n[0].data[yse]===t?n.shift():(eH(e),null)}function Jae(){nH=Zae}function d0(e,t){return nH(e,t)}var LI=class{},VI=class{},BS=class{};function ele(e){let t=Error(`No component factory found for ${kr(e)}.`);return t[tle]=e,t}var tle="ngComponent";var BI=class{resolveComponentFactory(t){throw ele(t)}},Op=(()=>{class e{static{this.NULL=new BI}}return e})(),h0=class{},Lr=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>nle()}}return e})();function nle(){let e=vt(),t=Nr(),n=tu(t.index,e);return(Ol(n)?n:e)[rn]}var ile=(()=>{class e{static{this.\u0275prov=oe({token:e,providedIn:"root",factory:()=>null})}}return e})(),iI={};var O8=new Set;function Yd(e){O8.has(e)||(O8.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function N8(...e){}function rle(){let e=typeof kl.requestAnimationFrame=="function",t=kl[e?"requestAnimationFrame":"setTimeout"],n=kl[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i);let r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}var De=class e{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Q(!1),this.onMicrotaskEmpty=new Q(!1),this.onStable=new Q(!1),this.onError=new Q(!1),typeof Zone>"u")throw new Le(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=rle().nativeRequestAnimationFrame,ale(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new Le(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new Le(909,!1)}run(t,n,i){return this._inner.run(t,n,i)}runTask(t,n,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,t,ole,N8,N8);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(t,n,i){return this._inner.runGuarded(t,n,i)}runOutsideAngular(t){return this._outer.run(t)}},ole={};function $F(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function sle(e){e.isCheckStableRunning||e.lastRequestAnimationFrameId!==-1||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(kl,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,GI(e),e.isCheckStableRunning=!0,$F(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),GI(e))}function ale(e){let t=()=>{sle(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,s,a)=>{if(lle(a))return n.invokeTask(r,o,s,a);try{return L8(e),n.invokeTask(r,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),V8(e)}},onInvoke:(n,i,r,o,s,a,l)=>{try{return L8(e),n.invoke(r,o,s,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),V8(e)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&(o.change=="microTask"?(e._hasPendingMicrotasks=o.microTask,GI(e),$F(e)):o.change=="macroTask"&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}function GI(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.lastRequestAnimationFrameId!==-1?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function L8(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function V8(e){e._nesting--,$F(e)}function lle(e){return!Array.isArray(e)||e.length!==1?!1:e[0].data?.__ignore_ng_zone__===!0}var iH=(()=>{class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of n)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=oe({token:e,providedIn:"root",factory:()=>new e})}}return e})();function GS(e,t,n){let i=n?e.styles:null,r=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)r=hI(r,a);else if(o==2){let l=a,c=t[++s];i=hI(i,l+": "+c+";")}}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=r:e.classesWithoutHost=r}var HS=class extends Op{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Xc(t);return new Rp(n,this.ngModule)}};function B8(e){let t=[];for(let n in e){if(!e.hasOwnProperty(n))continue;let i=e[n];i!==void 0&&t.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return t}function cle(e){let t=e.toLowerCase();return t==="svg"?M5:t==="math"?Coe:null}var HI=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,i){i=XS(i);let r=this.injector.get(t,iI,i);return r!==iI||n===iI?r:this.parentInjector.get(t,n,i)}},Rp=class extends BS{get inputs(){let t=this.componentDef,n=t.inputTransforms,i=B8(t.inputs);if(n!==null)for(let r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return B8(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=Jre(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,i,r){let o=Et(null);try{r=r||this.ngModule;let s=r instanceof Or?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new HI(t,s):t,l=a.get(h0,null);if(l===null)throw new Le(407,!1);let c=a.get(ile,null),u=a.get(iH,null),d=a.get(LI,null),h={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},p=l.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",m=i?nae(p,i,this.componentDef.encapsulation,a):u1(p,g,cle(g)),v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let C=null;m!==null&&(C=kF(m,a,!0));let S=WF(0,null,null,1,0,null,null,null,null,null,null),_=p1(null,S,null,v,null,null,h,p,a,null,C);RF(_);let D,F;try{let I=this.componentDef,E,b=null;I.findHostDirectiveDefs?(E=[],b=new Map,I.findHostDirectiveDefs(I,E,b),E.push(I)):E=[I];let x=ule(_,m),k=dle(x,m,I,E,_,h,p);F=SF(S,Jn),m&&ple(p,I,m,i),n!==void 0&&gle(F,this.ngContentSelectors,n),D=fle(k,I,E,b,_,[mle]),QF(S,_,null)}finally{IF()}return new zI(this.componentType,D,Pp(F,_),_,F)}finally{Et(o)}}},zI=class extends VI{constructor(t,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new zd(r,void 0,!1),this.componentType=t}setInput(t,n){let i=this._tNode.inputs,r;if(i!==null&&(r=i[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let o=this._rootLView;YF(o[rt],o,r,t,n),this.previousInputValues.set(t,n);let s=tu(this._tNode.index,o);XF(s)}}get injector(){return new Od(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function ule(e,t){let n=e[rt],i=Jn;return e[i]=t,kp(n,i,2,"#host",null)}function dle(e,t,n,i,r,o,s){let a=r[rt];hle(i,e,t,s);let l=null;t!==null&&(l=kF(t,r[xp]));let c=o.rendererFactory.createRenderer(t,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=p1(r,LG(n),null,u,r[e.index],e,o,c,null,null,l);return a.firstCreatePass&&kI(a,e,i.length-1),g1(r,d),r[e.index]=d}function hle(e,t,n,i){for(let r of e)t.mergedAttrs=n0(t.mergedAttrs,r.hostAttrs);t.mergedAttrs!==null&&(GS(t,t.mergedAttrs,!0),n!==null&&MG(i,n,t))}function fle(e,t,n,i,r,o){let s=Nr(),a=r[rt],l=Bo(s,r);BG(a,r,s,n,null,i);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,h=Hd(r,a,d,s);Zc(h,r)}GG(a,r,s),l&&Zc(l,r);let c=Hd(r,a,s.directiveStart+s.componentOffset,s);if(e[gr]=r[gr]=c,o!==null)for(let u of o)u(c,t);return zF(a,s,r),c}function ple(e,t,n,i){if(i)mI(e,n,["ng-version","17.3.12"]);else{let{attrs:r,classes:o}=eoe(t.selectors[0]);r&&mI(e,n,r),o&&o.length>0&&AG(e,n,o.join(" "))}}function gle(e,t,n){let i=e.projection=[];for(let r=0;r<t.length;r++){let o=n[r];i.push(o!=null?Array.from(o):null)}}function mle(){let e=Nr();r1(vt()[rt],e)}var Go=(()=>{class e{static{this.__NG_ELEMENT_ID__=vle}}return e})();function vle(){let e=Nr();return oH(e,vt())}var yle=Go,rH=class extends yle{constructor(t,n,i){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=i}get element(){return Pp(this._hostTNode,this._hostLView)}get injector(){return new Od(this._hostTNode,this._hostLView)}get parentInjector(){let t=FF(this._hostTNode,this._hostLView);if(X5(t)){let n=AS(t,this._hostLView),i=FS(t),r=n[rt].data[i+8];return new Od(r,n)}else return new Od(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=G8(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-Xi}createEmbeddedView(t,n,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=d0(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,r,u0(this._hostTNode,s)),a}createComponent(t,n,i,r,o){let s=t&&!goe(t),a;if(s)a=n;else{let g=n||{};a=g.index,i=g.injector,r=g.projectableNodes,o=g.environmentInjector||g.ngModuleRef}let l=s?t:new Rp(Xc(t)),c=i||this.parentInjector;if(!o&&l.ngModule==null){let m=(s?c:this.parentInjector).get(Or,null);m&&(o=m)}let u=Xc(l.componentType??{}),d=d0(this._lContainer,u?.id??null),h=d?.firstChild??null,p=l.create(c,r,h,o);return this.insertImpl(p.hostView,a,u0(this._hostTNode,d)),p}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,i){let r=t._lView;if(_oe(r)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=r[Bi],c=new rH(l,l[Vo],l[Bi]);c.detach(c.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return v1(s,r,o,i),t.attachToViewContainerRef(),a5(rI(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=G8(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),i=c0(this._lContainer,n);i&&(TS(rI(this._lContainer),n),d1(i[rt],i))}detach(t){let n=this._adjustIndex(t,-1),i=c0(this._lContainer,n);return i&&TS(rI(this._lContainer),n)!=null?new zd(i):null}_adjustIndex(t,n=0){return t??this.length+n}};function G8(e){return e[IS]}function rI(e){return e[IS]||(e[IS]=[])}function oH(e,t){let n,i=t[e.index];return ja(i)?n=i:(n=HG(i,t,null,e),t[e.index]=n,g1(t,n)),sH(n,t,e,i),new rH(n,e,t)}function Cle(e,t){let n=e[rn],i=n.createComment(""),r=Bo(t,e),o=BF(n,r);return NS(n,o,i,qse(n,r),!1),i}var sH=aH,ZF=()=>!1;function wle(e,t,n){return ZF(e,t,n)}function aH(e,t,n,i){if(e[Ll])return;let r;n.type&8?r=ia(i):r=Cle(t,n),e[Ll]=r}function ble(e,t,n){if(e[Ll]&&e[s0])return!0;let i=n[No],r=t.index-Jn;if(!i||lse(t)||l1(i,r))return!1;let s=AI(i,r),a=i.data[PF]?.[r],[l,c]=$ae(s,a);return e[Ll]=l,e[s0]=c,!0}function Sle(e,t,n,i){ZF(e,n,t)||aH(e,t,n,i)}function _le(){sH=Sle,ZF=ble}var UI=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},jI=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let i=t.contentQueries!==null?t.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new e(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)JF(t,n).matches!==null&&this.queries[n].setDirty()}},zS=class{constructor(t,n,i=null){this.flags=n,this.read=i,typeof t=="string"?this.predicate=Ale(t):this.predicate=t}},WI=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,o=this.getByIndex(i).embeddedTView(t,r);o&&(o.indexInDeclarationView=i,n!==null?n.push(o):n=[o])}return n!==null?new e(n):null}template(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},qI=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(t,n,Ele(n,o)),this.matchTNodeWithReadOption(t,n,SS(n,t,o,!1,!1))}else i===ra?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,SS(n,t,i,!1,!1))}matchTNodeWithReadOption(t,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===In||r===Go||r===ra&&n.type&4)this.addMatch(n.index,-2);else{let o=SS(n,t,r,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function Ele(e,t){let n=e.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1]}return null}function xle(e,t){return e.type&11?Pp(e,t):e.type&4?y1(e,t):null}function Dle(e,t,n,i){return n===-1?xle(t,e):n===-2?Tle(e,t,i):Hd(e,e[rt],n,t)}function Tle(e,t,n){if(n===In)return Pp(t,e);if(n===ra)return y1(t,e);if(n===Go)return oH(t,e)}function lH(e,t,n,i){let r=t[Nl].queries[i];if(r.matches===null){let o=e.data,s=n.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=o[c];a.push(Dle(t,u,s[l+1],n.metadata.read))}}r.matches=a}return r.matches}function KI(e,t,n,i){let r=e.queries.getByIndex(n),o=r.matches;if(o!==null){let s=lH(e,t,r,n);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let c=o[a+1],u=t[-l];for(let d=Xi;d<u.length;d++){let h=u[d];h[v0]===h[Bi]&&KI(h[rt],h,c,i)}if(u[Dp]!==null){let d=u[Dp];for(let h=0;h<d.length;h++){let p=d[h];KI(p[rt],p,c,i)}}}}}return i}function Rle(e,t){return e[Nl].queries[t].queryList}function cH(e,t,n){let i=new RI((n&4)===4);return sae(e,t,i,i.destroy),(t[Nl]??=new jI).queries.push(new UI(i))-1}function Ile(e,t,n){let i=Wn();return i.firstCreatePass&&(uH(i,new zS(e,t,n),-1),(t&2)===2&&(i.staticViewQueries=!0)),cH(i,vt(),t)}function Fle(e,t,n,i){let r=Wn();if(r.firstCreatePass){let o=Nr();uH(r,new zS(t,n,i),o.index),Mle(r,e),(n&2)===2&&(r.staticContentQueries=!0)}return cH(r,vt(),n)}function Ale(e){return e.split(",").map(t=>t.trim())}function uH(e,t,n){e.queries===null&&(e.queries=new WI),e.queries.track(new qI(t,n))}function Mle(e,t){let n=e.contentQueries||(e.contentQueries=[]),i=n.length?n[n.length-1]:-1;t!==i&&n.push(e.queries.length-1,t)}function JF(e,t){return e.queries.getByIndex(t)}function Ple(e,t){let n=e[rt],i=JF(n,t);return i.crossesNgTemplate?KI(n,e,t,[]):lH(n,e,i,t)}function kle(e){return typeof e=="function"&&e[xR]!==void 0}function dH(e){return kle(e)&&typeof e.set=="function"}function Ole(e){return Object.getPrototypeOf(e.prototype).constructor}function mo(e){let t=Ole(e.type),n=!0,i=[e];for(;t;){let r;if($c(e))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Le(903,!1);r=t.\u0275dir}if(r){if(n){i.push(r);let s=e;s.inputs=mS(e.inputs),s.inputTransforms=mS(e.inputTransforms),s.declaredInputs=mS(e.declaredInputs),s.outputs=mS(e.outputs);let a=r.hostBindings;a&&Gle(e,a);let l=r.viewQuery,c=r.contentQueries;if(l&&Vle(e,l),c&&Ble(e,c),Nle(e,r),vre(e.outputs,r.outputs),$c(r)&&r.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(e),a===mo&&(n=!1)}}t=Object.getPrototypeOf(t)}Lle(i)}function Nle(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let i=t.inputs[n];if(i!==void 0&&(e.inputs[n]=i,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!t.inputTransforms.hasOwnProperty(r))continue;e.inputTransforms??={},e.inputTransforms[r]=t.inputTransforms[r]}}}function Lle(e){let t=0,n=null;for(let i=e.length-1;i>=0;i--){let r=e[i];r.hostVars=t+=r.hostVars,r.hostAttrs=n0(r.hostAttrs,n=n0(n,r.hostAttrs))}}function mS(e){return e===_p?{}:e===Pr?[]:e}function Vle(e,t){let n=e.viewQuery;n?e.viewQuery=(i,r)=>{t(i,r),n(i,r)}:e.viewQuery=t}function Ble(e,t){let n=e.contentQueries;n?e.contentQueries=(i,r,o)=>{t(i,r,o),n(i,r,o)}:e.contentQueries=t}function Gle(e,t){let n=e.hostBindings;n?e.hostBindings=(i,r)=>{t(i,r),n(i,r)}:e.hostBindings=t}var Jc=class{},f0=class{};var YI=class extends Jc{constructor(t,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new HS(this);let r=m5(t);this._bootstrapComponents=SG(r.bootstrap),this._r3Injector=oG(t,n,[{provide:Jc,useValue:this},{provide:Op,useValue:this.componentFactoryResolver},...i],kr(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},QI=class extends f0{constructor(t){super(),this.moduleType=t}create(t){return new YI(this.moduleType,t,[])}};var US=class extends Jc{constructor(t){super(),this.componentFactoryResolver=new HS(this),this.instance=null;let n=new i0([...t.providers,{provide:Jc,useValue:this},{provide:Op,useValue:this.componentFactoryResolver}],t.parent||JS(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function eA(e,t,n=null){return new US({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var C0=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new jt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function hH(e){return zle(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function Hle(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),i;for(;!(i=n.next()).done;)t(i.value)}}function zle(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function Ule(e,t,n){return e[t]=n}function qa(e,t,n){let i=e[t];return Object.is(i,n)?!1:(e[t]=n,!0)}function w0(e){return(e.flags&32)===32}function jle(e,t,n,i,r,o,s,a,l){let c=t.consts,u=kp(t,e,4,s||null,Tp(c,a));KF(t,n,u,Tp(c,l)),r1(t,u);let d=u.tView=WF(2,u,i,r,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return t.queries!==null&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}function Fe(e,t,n,i,r,o,s,a){let l=vt(),c=Wn(),u=e+Jn,d=c.firstCreatePass?jle(u,c,l,t,n,i,r,o,s):c.data[u];jd(d,!1);let h=fH(c,l,d,e);i1()&&h1(c,l,h,d),Zc(h,l);let p=HG(h,l,h,d);return l[u]=p,g1(l,p),wle(p,d,l),t1(d)&&UF(c,l,d),s!=null&&jF(l,d,a),Fe}var fH=pH;function pH(e,t,n,i){return Wa(!0),t[rn].createComment("")}function Wle(e,t,n,i){let r=t[No],o=!r||Ap()||w0(n)||l1(r,i);if(Wa(o),o)return pH(e,t,n,i);let s=r.data[vse]?.[i]??null;s!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=s);let a=C1(r,e,t,n);a1(r,i,a);let l=OF(r,i);return w1(l,a)}function qle(){fH=Wle}function zl(e,t,n,i){let r=vt(),o=Wd();if(qa(r,o,t)){let s=Wn(),a=n1();bae(a,r,e,t,n,i)}return zl}function Kle(e,t,n,i){return qa(e,Wd(),n)?t+pF(n)+i:Hl}function vS(e,t){return e<<17|t<<2}function Ud(e){return e>>17&32767}function Yle(e){return(e&2)==2}function Qle(e,t){return e&131071|t<<17}function XI(e){return e|2}function Ip(e){return(e&131068)>>2}function oI(e,t){return e&-131069|t<<2}function Xle(e){return(e&1)===1}function $I(e){return e|1}function $le(e,t,n,i,r,o){let s=o?t.classBindings:t.styleBindings,a=Ud(s),l=Ip(s);e[i]=n;let c=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||m0(d,u)>0)&&(c=!0)}else u=n;if(r)if(l!==0){let h=Ud(e[a+1]);e[i+1]=vS(h,a),h!==0&&(e[h+1]=oI(e[h+1],i)),e[a+1]=Qle(e[a+1],i)}else e[i+1]=vS(a,0),a!==0&&(e[a+1]=oI(e[a+1],i)),a=i;else e[i+1]=vS(l,0),a===0?a=i:e[l+1]=oI(e[l+1],i),l=i;c&&(e[i+1]=XI(e[i+1])),H8(e,u,i,!0),H8(e,u,i,!1),Zle(t,u,e,i,o),s=vS(a,l),o?t.classBindings=s:t.styleBindings=s}function Zle(e,t,n,i,r){let o=r?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&m0(o,t)>=0&&(n[i+1]=$I(n[i+1]))}function H8(e,t,n,i){let r=e[n+1],o=t===null,s=i?Ud(r):Ip(r),a=!1;for(;s!==0&&(a===!1||o);){let l=e[s],c=e[s+1];Jle(l,t)&&(a=!0,e[s+1]=i?$I(c):XI(c)),s=i?Ud(c):Ip(c)}a&&(e[n+1]=i?XI(r):$I(r))}function Jle(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?m0(e,t)>=0:!1}var ta={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ece(e){return e.substring(ta.key,ta.keyEnd)}function tce(e){return nce(e),gH(e,mH(e,0,ta.textEnd))}function gH(e,t){let n=ta.textEnd;return n===t?-1:(t=ta.keyEnd=ice(e,ta.key=t,n),mH(e,t,n))}function nce(e){ta.key=0,ta.keyEnd=0,ta.value=0,ta.valueEnd=0,ta.textEnd=e.length}function mH(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function ice(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}function ue(e,t,n){let i=vt(),r=Wd();if(qa(i,r,t)){let o=Wn(),s=n1();qF(o,s,i,e,t,i[rn],n,!1)}return ue}function ZI(e,t,n,i,r){let o=t.inputs,s=r?"class":"style";YF(e,n,o[s],s,i)}function Qd(e,t,n){return vH(e,t,n,!1),Qd}function vo(e,t){return vH(e,t,null,!0),vo}function Ji(e){oce(dce,rce,e,!0)}function rce(e,t){for(let n=tce(t);n>=0;n=gH(t,n))vF(e,ece(t),!0)}function vH(e,t,n,i){let r=vt(),o=Wn(),s=G5(2);if(o.firstUpdatePass&&CH(o,e,s,i),t!==Hl&&qa(r,s,t)){let a=o.data[nu()];wH(o,a,r,r[rn],e,r[s+1]=fce(t,n),i,s)}}function oce(e,t,n,i){let r=Wn(),o=G5(2);r.firstUpdatePass&&CH(r,null,o,i);let s=vt();if(n!==Hl&&qa(s,o,n)){let a=r.data[nu()];if(bH(a,i)&&!yH(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(n=hI(l,n||"")),ZI(r,a,s,n,i)}else hce(r,a,s,s[rn],s[o+1],s[o+1]=uce(e,t,n),i,o)}}function yH(e,t){return t>=e.expandoStartIndex}function CH(e,t,n,i){let r=e.data;if(r[n+1]===null){let o=r[nu()],s=yH(e,n);bH(o,i)&&t===null&&!s&&(t=!1),t=sce(r,o,t,i),$le(r,o,t,n,s,i)}}function sce(e,t,n,i){let r=Boe(e),o=i?t.residualClasses:t.residualStyles;if(r===null)(i?t.classBindings:t.styleBindings)===0&&(n=sI(null,e,t,n,i),n=p0(n,t.attrs,i),o=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==r)if(n=sI(r,e,t,n,i),o===null){let l=ace(e,t,i);l!==void 0&&Array.isArray(l)&&(l=sI(null,e,t,l[1],i),l=p0(l,t.attrs,i),lce(e,t,i,l))}else o=cce(e,t,i)}return o!==void 0&&(i?t.residualClasses=o:t.residualStyles=o),n}function ace(e,t,n){let i=n?t.classBindings:t.styleBindings;if(Ip(i)!==0)return e[Ud(i)]}function lce(e,t,n,i){let r=n?t.classBindings:t.styleBindings;e[Ud(r)]=i}function cce(e,t,n){let i,r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++){let s=e[o].hostAttrs;i=p0(i,s,n)}return p0(i,t.attrs,n)}function sI(e,t,n,i,r){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=t[a],i=p0(i,o.hostAttrs,r),o!==e);)a++;return e!==null&&(n.directiveStylingLast=a),i}function p0(e,t,n){let i=n?1:2,r=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?r=s:r===i&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),vF(e,s,n?!0:t[++o]))}return e===void 0?null:e}function uce(e,t,n){if(n==null||n==="")return Pr;let i=[],r=c1(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)e(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&e(i,o,r[o]);else typeof r=="string"&&t(i,r);return i}function dce(e,t,n){let i=String(t);i!==""&&!i.includes(" ")&&vF(e,i,n)}function hce(e,t,n,i,r,o,s,a){r===Hl&&(r=Pr);let l=0,c=0,u=0<r.length?r[0]:null,d=0<o.length?o[0]:null;for(;u!==null||d!==null;){let h=l<r.length?r[l+1]:void 0,p=c<o.length?o[c+1]:void 0,g=null,m;u===d?(l+=2,c+=2,h!==p&&(g=d,m=p)):d===null||u!==null&&u<d?(l+=2,g=u):(c+=2,g=d,m=p),g!==null&&wH(e,t,n,i,g,m,s,a),u=l<r.length?r[l]:null,d=c<o.length?o[c]:null}}function wH(e,t,n,i,r,o,s,a){if(!(t.type&3))return;let l=e.data,c=l[a+1],u=Xle(c)?z8(l,t,n,r,Ip(c),s):void 0;if(!jS(u)){jS(o)||Yle(c)&&(o=z8(l,null,n,r,a,s));let d=P5(nu(),n);$se(i,s,d,r,o)}}function z8(e,t,n,i,r,o){let s=t===null,a;for(;r>0;){let l=e[r],c=Array.isArray(l),u=c?l[1]:l,d=u===null,h=n[r+1];h===Hl&&(h=d?Pr:void 0);let p=d?KR(h,i):u===i?h:void 0;if(c&&!jS(p)&&(p=KR(l,i)),jS(p)&&(a=p,s))return a;let g=e[r+1];r=s?Ud(g):Ip(g)}if(t!==null){let l=o?t.residualClasses:t.residualStyles;l!=null&&(a=KR(l,i))}return a}function jS(e){return e!==void 0}function fce(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=kr(c1(e)))),e}function bH(e,t){return(e.flags&(t?8:16))!==0}var JI=class{destroy(t){}updateValue(t,n){}swap(t,n){let i=Math.min(t,n),r=Math.max(t,n),o=this.detach(r);if(r-i>1){let s=this.detach(i);this.attach(i,o),this.attach(r,s)}else this.attach(i,o)}move(t,n){this.attach(n,this.detach(t))}};function aI(e,t,n,i,r){return e===n&&Object.is(t,i)?1:Object.is(r(e,t),r(n,i))?-1:0}function pce(e,t,n){let i,r,o=0,s=e.length-1;if(Array.isArray(t)){let a=t.length-1;for(;o<=s&&o<=a;){let l=e.at(o),c=t[o],u=aI(o,l,o,c,n);if(u!==0){u<0&&e.updateValue(o,c),o++;continue}let d=e.at(s),h=t[a],p=aI(s,d,a,h,n);if(p!==0){p<0&&e.updateValue(s,h),s--,a--;continue}let g=n(o,l),m=n(s,d),v=n(o,c);if(Object.is(v,m)){let C=n(a,h);Object.is(C,g)?(e.swap(o,s),e.updateValue(s,h),a--,s--):e.move(s,o),e.updateValue(o,c),o++;continue}if(i??=new WS,r??=j8(e,o,s,n),eF(e,i,o,v))e.updateValue(o,c),o++,s++;else if(r.has(v))i.set(g,e.detach(o)),s--;else{let C=e.create(o,t[o]);e.attach(o,C),o++,s++}}for(;o<=a;)U8(e,i,n,o,t[o]),o++}else if(t!=null){let a=t[Symbol.iterator](),l=a.next();for(;!l.done&&o<=s;){let c=e.at(o),u=l.value,d=aI(o,c,o,u,n);if(d!==0)d<0&&e.updateValue(o,u),o++,l=a.next();else{i??=new WS,r??=j8(e,o,s,n);let h=n(o,u);if(eF(e,i,o,h))e.updateValue(o,u),o++,s++,l=a.next();else if(!r.has(h))e.attach(o,e.create(o,u)),o++,s++,l=a.next();else{let p=n(o,c);i.set(p,e.detach(o)),s--}}}for(;!l.done;)U8(e,i,n,e.length,l.value),l=a.next()}for(;o<=s;)e.destroy(e.detach(s--));i?.forEach(a=>{e.destroy(a)})}function eF(e,t,n,i){return t!==void 0&&t.has(i)?(e.attach(n,t.get(i)),t.delete(i),!0):!1}function U8(e,t,n,i,r){if(eF(e,t,i,n(i,r)))e.updateValue(i,r);else{let o=e.create(i,r);e.attach(i,o)}}function j8(e,t,n,i){let r=new Set;for(let o=t;o<=n;o++)r.add(i(o,e.at(o)));return r}var WS=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let n=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(t,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,n){if(this.kvMap.has(t)){let i=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,n)}else this.kvMap.set(t,n)}forEach(t){for(let[n,i]of this.kvMap)if(t(i,n),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),t(i,n)}}};function Vr(e,t,n){Yd("NgControlFlow");let i=vt(),r=Wd(),o=rF(i,Jn+e),s=0;if(qa(i,r,t)){let a=Et(null);try{if(KG(o,s),t!==-1){let l=oF(i[rt],Jn+t),c=d0(o,l.tView.ssrId),u=m1(i,l,n,{dehydratedView:c});v1(o,u,s,u0(l,c))}}finally{Et(a)}}else{let a=qG(o,s);a!==void 0&&(a[gr]=n)}}var tF=class{constructor(t,n,i){this.lContainer=t,this.$implicit=n,this.$index=i}get $count(){return this.lContainer.length-Xi}};function iu(e,t){return t}var nF=class{constructor(t,n,i){this.hasEmptyBlock=t,this.trackByFn=n,this.liveCollection=i}};function ru(e,t,n,i,r,o,s,a,l,c,u,d,h){Yd("NgControlFlow");let p=l!==void 0,g=vt(),m=a?s.bind(g[po][gr]):s,v=new nF(p,m);g[Jn+e]=v,Fe(e+1,t,n,i,r,o),p&&Fe(e+2,l,c,u,d,h)}var iF=class extends JI{constructor(t,n,i){super(),this.lContainer=t,this.hostLView=n,this.templateTNode=i,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Xi}at(t){return this.getLView(t)[gr].$implicit}attach(t,n){let i=n[No];this.needsIndexUpdate||=t!==this.length,v1(this.lContainer,n,t,u0(this.templateTNode,i))}detach(t){return this.needsIndexUpdate||=t!==this.length-1,gce(this.lContainer,t)}create(t,n){let i=d0(this.lContainer,this.templateTNode.tView.ssrId);return m1(this.hostLView,this.templateTNode,new tF(this.lContainer,n,t),{dehydratedView:i})}destroy(t){d1(t[rt],t)}updateValue(t,n){this.getLView(t)[gr].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[gr].$index=t}getLView(t){return mce(this.lContainer,t)}};function ou(e){let t=Et(null),n=nu();try{let i=vt(),r=i[rt],o=i[n];if(o.liveCollection===void 0){let a=n+1,l=rF(i,a),c=oF(r,a);o.liveCollection=new iF(l,i,c)}else o.liveCollection.reset();let s=o.liveCollection;if(pce(s,e,o.trackByFn),s.updateIndexes(),o.hasEmptyBlock){let a=Wd(),l=s.length===0;if(qa(i,a,l)){let c=n+2,u=rF(i,c);if(l){let d=oF(r,c),h=d0(u,d.tView.ssrId),p=m1(i,d,void 0,{dehydratedView:h});v1(u,p,0,u0(d,h))}else KG(u,0)}}}finally{Et(t)}}function rF(e,t){return e[t]}function gce(e,t){return c0(e,t)}function mce(e,t){return qG(e,t)}function oF(e,t){return SF(e,t)}function vce(e,t,n,i,r,o){let s=t.consts,a=Tp(s,r),l=kp(t,e,2,i,a);return KF(t,n,l,Tp(s,o)),l.attrs!==null&&GS(l,l.attrs,!1),l.mergedAttrs!==null&&GS(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function z(e,t,n,i){let r=vt(),o=Wn(),s=Jn+e,a=r[rn],l=o.firstCreatePass?vce(s,o,r,t,n,i):o.data[s],c=SH(o,r,l,a,t,e);r[s]=c;let u=t1(l);return jd(l,!0),MG(a,c,l),!w0(l)&&i1()&&h1(o,r,c,l),Toe()===0&&Zc(c,r),Roe(),u&&(UF(o,r,l),zF(o,l,r)),i!==null&&jF(r,l),z}function H(){let e=Nr();xF()?DF():(e=e.parent,jd(e,!1));let t=e;Foe(t)&&Moe(),Ioe();let n=Wn();return n.firstCreatePass&&(r1(n,e),bF(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&Woe(t)&&ZI(n,t,vt(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&qoe(t)&&ZI(n,t,vt(),t.stylesWithoutHost,!1),H}function he(e,t,n,i){return z(e,t,n,i),H(),he}var SH=(e,t,n,i,r,o)=>(Wa(!0),u1(i,r,K5()));function yce(e,t,n,i,r,o){let s=t[No],a=!s||Ap()||w0(n)||l1(s,o);if(Wa(a),a)return u1(i,r,K5());let l=C1(s,e,t,n);return CG(s,o)&&a1(s,o,l.nextSibling),s&&(aG(n)||lG(l))&&y0(n)&&(Aoe(n),IG(l)),l}function Cce(){SH=yce}function wce(e,t,n,i,r){let o=t.consts,s=Tp(o,i),a=kp(t,e,8,"ng-container",s);s!==null&&GS(a,s,!0);let l=Tp(o,r);return KF(t,n,a,l),t.queries!==null&&t.queries.elementStart(t,a),a}function Ho(e,t,n){let i=vt(),r=Wn(),o=e+Jn,s=r.firstCreatePass?wce(o,r,i,t,n):r.data[o];jd(s,!0);let a=_H(r,i,s,e);return i[o]=a,i1()&&h1(r,i,a,s),Zc(a,i),t1(s)&&(UF(r,i,s),zF(r,s,i)),n!=null&&jF(i,s),Ho}function zo(){let e=Nr(),t=Wn();return xF()?DF():(e=e.parent,jd(e,!1)),t.firstCreatePass&&(r1(t,e),bF(e)&&t.queries.elementEnd(e)),zo}var _H=(e,t,n,i)=>(Wa(!0),VF(t[rn],""));function bce(e,t,n,i){let r,o=t[No],s=!o||Ap()||w0(n);if(Wa(s),s)return VF(t[rn],"");let a=C1(o,e,t,n),l=Rse(o,i);return a1(o,i,a),r=w1(l,a),r}function Sce(){_H=bce}function Tt(){return vt()}function tA(e,t,n){let i=vt(),r=Wd();if(qa(i,r,t)){let o=Wn(),s=n1();qF(o,s,i,e,t,i[rn],n,!0)}return tA}var kd=void 0;function _ce(e){let t=e,n=Math.floor(Math.abs(e)),i=e.toString().replace(/^[^.]*\.?/,"").length;return n===1&&i===0?1:5}var Ece=["en",[["a","p"],["AM","PM"],kd],[["AM","PM"],kd,kd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],kd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],kd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",kd,"{1} 'at' {0}",kd],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",_ce],lI={};function hs(e){let t=xce(e),n=W8(t);if(n)return n;let i=t.split("-")[0];if(n=W8(i),n)return n;if(i==="en")return Ece;throw new Le(701,!1)}function W8(e){return e in lI||(lI[e]=kl.ng&&kl.ng.common&&kl.ng.common.locales&&kl.ng.common.locales[e]),lI[e]}var ei=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(ei||{});function xce(e){return e.toLowerCase().replace(/_/g,"-")}var qS="en-US";var Dce=qS;function Tce(e){typeof e=="string"&&(Dce=e.toLowerCase().replace(/_/g,"-"))}function EH(e,t,n){let i=e[rn];switch(n){case Node.COMMENT_NODE:return VF(i,t);case Node.TEXT_NODE:return LF(i,t);case Node.ELEMENT_NODE:return u1(i,t,null)}}var Rce=(e,t,n,i)=>(Wa(!0),EH(e,n,i));function Ice(e,t,n,i){return Wa(!0),EH(e,n,i)}function Fce(){Rce=Ice}function be(e,t,n,i){let r=vt(),o=Wn(),s=Nr();return xH(o,r,r[rn],s,e,t,i),be}function Ace(e,t,n,i){let r=e.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===n&&r[o+1]===i){let a=t[r0],l=r[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function xH(e,t,n,i,r,o,s){let a=t1(i),c=e.firstCreatePass&&jG(e),u=t[gr],d=UG(t),h=!0;if(i.type&3||s){let m=Bo(i,t),v=s?s(m):m,C=d.length,S=s?D=>s(ia(D[i.index])):i.index,_=null;if(!s&&a&&(_=Ace(e,t,r,i.index)),_!==null){let D=_.__ngLastListenerFn__||_;D.__ngNextListenerFn__=o,_.__ngLastListenerFn__=o,h=!1}else{o=K8(i,t,u,o,!1);let D=n.listen(v,r,o);d.push(o,D),c&&c.push(r,S,C,C+1)}}else o=K8(i,t,u,o,!1);let p=i.outputs,g;if(h&&p!==null&&(g=p[r])){let m=g.length;if(m)for(let v=0;v<m;v+=2){let C=g[v],S=g[v+1],F=t[C][S].subscribe(o),I=d.length;d.push(o,F),c&&c.push(r,i.index,I,-(I+1))}}}function q8(e,t,n,i){let r=Et(null);try{return Ga(6,t,n),n(i)!==!1}catch(o){return WG(e,o),!1}finally{Ga(7,t,n),Et(r)}}function K8(e,t,n,i,r){return function o(s){if(s===Function)return i;let a=e.componentOffset>-1?tu(e.index,t):t;XF(a);let l=q8(t,n,i,s),c=o.__ngNextListenerFn__;for(;c;)l=q8(t,n,c,s)&&l,c=c.__ngNextListenerFn__;return r&&l===!1&&s.preventDefault(),l}}function Se(e=1){return Hoe(e)}function Mce(e,t){let n=null,i=Yre(e);for(let r=0;r<t.length;r++){let o=t[r];if(o==="*"){n=r;continue}if(i===null?h5(e,o,!0):$re(i,o))return r}return n}function nA(e){let t=vt()[po][Vo];if(!t.projection){let n=e?e.length:1,i=t.projection=Vre(n,null),r=i.slice(),o=t.child;for(;o!==null;){let s=e?Mce(o,e):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function iA(e,t=0,n){let i=vt(),r=Wn(),o=kp(r,Jn+e,16,null,n||null);o.projection===null&&(o.projection=t),DF(),(!i[No]||Ap())&&(o.flags&32)!==32&&Qse(r,i,o)}function rA(e,t,n,i){Fle(e,t,n,i)}function fs(e,t,n){Ile(e,t,n)}function yo(e){let t=vt(),n=Wn(),i=H5();TF(i+1);let r=JF(n,i);if(e.dirty&&Soe(t)===((r.metadata.flags&2)===2)){if(r.matches===null)e.reset([]);else{let o=Ple(t,i);e.reset(o,rse),e.notifyOnChanges()}return!0}return!1}function Co(){return Rle(vt(),H5())}function Pce(e,t,n,i){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=i}function Ka(e){let t=koe();return k5(t,Jn+e)}function ye(e,t=""){let n=vt(),i=Wn(),r=e+Jn,o=i.firstCreatePass?kp(i,r,1,t,null):i.data[r],s=DH(i,n,o,t,e);n[r]=s,i1()&&h1(i,n,s,o),jd(o,!1)}var DH=(e,t,n,i,r)=>(Wa(!0),LF(t[rn],i));function kce(e,t,n,i,r){let o=t[No],s=!o||Ap()||w0(n)||l1(o,r);return Wa(s),s?LF(t[rn],i):C1(o,e,t,n)}function Oce(){DH=kce}function er(e){return qn("",e,""),er}function qn(e,t,n){let i=vt(),r=Kle(i,e,t,n);return r!==Hl&&xae(i,nu(),r),qn}function b1(e,t,n){dH(t)&&(t=t());let i=vt(),r=Wd();if(qa(i,r,t)){let o=Wn(),s=n1();qF(o,s,i,e,t,i[rn],n,!1)}return b1}function oA(e,t){let n=dH(e);return n&&e.set(t),n}function S1(e,t){let n=vt(),i=Wn(),r=Nr();return xH(i,n,n[rn],r,e,t),S1}function Nce(e,t,n){let i=Wn();if(i.firstCreatePass){let r=$c(e);sF(n,i.data,i.blueprint,r,!0),sF(t,i.data,i.blueprint,r,!1)}}function sF(e,t,n,i,r){if(e=Mr(e),Array.isArray(e))for(let o=0;o<e.length;o++)sF(e[o],t,n,i,r);else{let o=Wn(),s=vt(),a=Nr(),l=Ep(e)?e:Mr(e.provide),c=S5(e),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Ep(e)||!e.multi){let p=new Gd(c,r,J),g=uI(l,t,r?u:u+h,d);g===-1?(EI(PS(a,s),o,l),cI(o,e,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(p),s.push(p)):(n[g]=p,s[g]=p)}else{let p=uI(l,t,u+h,d),g=uI(l,t,u,u+h),m=p>=0&&n[p],v=g>=0&&n[g];if(r&&!v||!r&&!m){EI(PS(a,s),o,l);let C=Bce(r?Vce:Lce,n.length,r,i,c);!r&&v&&(n[g].providerFactory=C),cI(o,e,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(C),s.push(C)}else{let C=TH(n[r?g:p],c,!r&&i);cI(o,e,p>-1?p:g,C)}!r&&i&&v&&n[g].componentProviders++}}}function cI(e,t,n,i){let r=Ep(t),o=loe(t);if(r||o){let l=(o?Mr(t.useClass):t).prototype.ngOnDestroy;if(l){let c=e.destroyHooks||(e.destroyHooks=[]);if(!r&&t.multi){let u=c.indexOf(n);u===-1?c.push(n,[i,l]):c[u+1].push(i,l)}else c.push(n,l)}}}function TH(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function uI(e,t,n,i){for(let r=n;r<i;r++)if(t[r]===e)return r;return-1}function Lce(e,t,n,i){return aF(this.multi,[])}function Vce(e,t,n,i){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Hd(n,n[rt],this.providerFactory.index,i);o=a.slice(0,s),aF(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],aF(r,o);return o}function aF(e,t){for(let n=0;n<e.length;n++){let i=e[n];t.push(i())}return t}function Bce(e,t,n,i,r){let o=new Gd(e,n,J);return o.multi=[],o.index=t,o.componentProviders=0,TH(o,r,i&&!n),o}function Br(e,t=[]){return n=>{n.providersResolver=(i,r)=>Nce(i,r?r(e):e,t)}}var Gce=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let i=C5(!1,n.type),r=i.length>0?eA([i],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,r)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=oe({token:e,providedIn:"environment",factory:()=>new e($(Or))})}}return e})();function We(e){Yd("NgStandalone"),e.getStandaloneInjector=t=>t.get(Gce).getOrCreateStandaloneInjector(e)}function Np(e,t,n,i){return RH(vt(),B5(),e,t,n,i)}function Hce(e,t){let n=e[t];return n===Hl?void 0:n}function RH(e,t,n,i,r,o){let s=t+n;return qa(e,s,r)?Ule(e,s+1,o?i.call(o,r):i(r)):Hce(e,s+1)}function b0(e,t){let n=Wn(),i,r=e+Jn;n.firstCreatePass?(i=zce(t,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];let o=i.factory||(i.factory=Nd(i.type,!0)),s,a=fo(J);try{let l=MS(!1),c=o();return MS(l),Pce(n,vt(),r,c),c}finally{fo(a)}}function zce(e,t){if(t)for(let n=t.length-1;n>=0;n--){let i=t[n];if(e===i.name)return i}}function S0(e,t,n){let i=e+Jn,r=vt(),o=k5(r,i);return Uce(r,i)?RH(r,B5(),t,o.transform,n,o):o.transform(n)}function Uce(e,t){return e[rt].data[t].pure}function tr(e,t){return y1(e,t)}var Gl=class{constructor(t){this.full=t;let n=t.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},sA=new Gl("17.3.12"),_1=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();var IH=new ce("");function su(e){return!!e&&typeof e.then=="function"}function aA(e){return!!e&&typeof e.subscribe=="function"}var Ya=new ce(""),FH=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,i)=>{this.resolve=n,this.reject=i}),this.appInits=Y(Ya,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let r of this.appInits){let o=r();if(su(o))n.push(o);else if(aA(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});n.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{i()}).catch(r=>{this.reject(r)}),n.length===0&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Lp=new ce("");function jce(){z4(()=>{throw new Le(600,!1)})}function Wce(e){return e.isBoundToModule}function qce(e,t,n){try{let i=n();return su(i)?i.catch(r=>{throw t.runOutsideAngular(()=>e.handleError(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>e.handleError(i)),i}}var Uo=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Y(sG),this.afterRenderEffectManager=Y(iH),this.externalTestViews=new Set,this.beforeRender=new nt,this.afterTick=new nt,this.componentTypes=[],this.components=[],this.isStable=Y(C0).hasPendingTasks.pipe(ae(n=>!n)),this._injector=Y(Or)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,i){let r=n instanceof BS;if(!this._injector.get(FH).done){let h=!r&&g5(n),p=!1;throw new Le(405,p)}let s;r?s=n:s=this._injector.get(Op).resolveComponentFactory(n),this.componentTypes.push(s.componentType);let a=Wce(s)?void 0:this._injector.get(Jc),l=i||s.selector,c=s.create(bt.NULL,[],l,a),u=c.location.nativeElement,d=c.injector.get(IH,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),dI(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){this._tick(!0)}_tick(n){if(this._runningTick)throw new Le(101,!1);let i=Et(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(n)}catch(r){this.internalErrorHandler(r)}finally{this.afterTick.next(),this._runningTick=!1,Et(i)}}detectChangesInAttachedViews(n){let i=0,r=this.afterRenderEffectManager;for(;;){if(i===QG)throw new Le(103,!1);if(n){let o=i===0;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)Kce(s,o,a)}if(i++,r.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>lF(o))&&(r.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>lF(o))))break}}attachView(n){let i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){let i=n;dI(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let i=this._injector.get(Lp,[]);[...this._bootstrapListeners,...i].forEach(r=>r(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>dI(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Le(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function dI(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}var yS;function lA(e){yS??=new WeakMap;let t=yS.get(e);if(t)return t;let n=e.isStable.pipe(ko(i=>i)).toPromise().then(()=>{});return yS.set(e,n),e.onDestroy(()=>yS?.delete(e)),n}function Kce(e,t,n){!t&&!lF(e)||Yce(e,n,t)}function lF(e){return EF(e)}function Yce(e,t,n){let i;n?(i=0,e[it]|=1024):e[it]&64?i=0:i=1,XG(e,t,i)}var cF=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},cA=(()=>{class e{compileModuleSync(n){return new QI(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let i=this.compileModuleSync(n),r=m5(n),o=SG(r.declarations).reduce((s,a)=>{let l=Xc(a);return l&&s.push(new Rp(l)),s},[]);return new cF(i,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Qce=(()=>{class e{constructor(){this.zone=Y(De),this.applicationRef=Y(Uo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Xce(e){return[{provide:De,useFactory:e},{provide:Ld,multi:!0,useFactory:()=>{let t=Y(Qce,{optional:!0});return()=>t.initialize()}},{provide:Ld,multi:!0,useFactory:()=>{let t=Y(eue);return()=>{t.initialize()}}},{provide:sG,useFactory:$ce}]}function $ce(){let e=Y(De),t=Y(Vl);return n=>e.runOutsideAngular(()=>t.handleError(n))}function Zce(e){let t=Xce(()=>new De(Jce(e)));return hn([[],t])}function Jce(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var eue=(()=>{class e{constructor(){this.subscription=new Ln,this.initialized=!1,this.zone=Y(De),this.pendingTasks=Y(C0)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{De.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function tue(){return typeof $localize<"u"&&$localize.locale||qS}var _0=new ce("",{providedIn:"root",factory:()=>Y(_0,wt.Optional|wt.SkipSelf)||tue()});var AH=new ce("");var ES=null;function nue(e=[],t){return bt.create({name:t,providers:[{provide:ZS,useValue:"platform"},{provide:AH,useValue:new Set([()=>ES=null])},...e]})}function iue(e=[]){if(ES)return ES;let t=nue(e);return ES=t,jce(),rue(t),t}function rue(e){e.get(AF,null)?.forEach(n=>n())}function E0(){return!1}var Gr=(()=>{class e{static{this.__NG_ELEMENT_ID__=oue}}return e})();function oue(e){return sue(Nr(),vt(),(e&16)===16)}function sue(e,t,n){if(y0(e)&&!n){let i=tu(e.index,t);return new zd(i,i)}else if(e.type&47){let i=t[po];return new zd(i,t)}return null}var uF=class{constructor(){}supports(t){return hH(t)}create(t){return new dF(t)}},aue=(e,t)=>t,dF=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||aue}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,i=this._removalsHead,r=0,o=null;for(;n||i;){let s=!i||n&&n.currentIndex<Y8(i,r,o)?n:i,a=Y8(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(n=n._next,s.previousIndex==null)r++;else{o||(o=[]);let c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){let p=h<o.length?o[h]:o[h]=0,g=p+h;u<=g&&g<c&&(o[h]=p+1)}let d=s.previousIndex;o[d]=u-c}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!hH(t))throw new Le(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,i=!1,r,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),i=!0):(i&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else r=0,Hle(t,a=>{s=this._trackByFn(r,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,r),i=!0):(i&&(n=this._verifyReinsertion(n,a,s,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,i,r){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,r)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,r),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,r)):t=this._addAfter(new hF(n,i),o,r)),t}_verifyReinsertion(t,n,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?t=this._reinsertAfter(o,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let r=t._prevRemoved,o=t._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(t,n,i),this._addToMoves(t,i),t}_moveAfter(t,n,i){return this._unlink(t),this._insertAfter(t,n,i),this._addToMoves(t,i),t}_addAfter(t,n,i){return this._insertAfter(t,n,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,i){let r=n===null?this._itHead:n._next;return t._next=r,t._prev=n,r===null?this._itTail=t:r._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new KS),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,i=t._next;return n===null?this._itHead=i:n._next=i,i===null?this._itTail=n:i._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new KS),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},hF=class{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},fF=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let i;for(i=this._head;i!==null;i=i._nextDup)if((n===null||n<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let n=t._prevDup,i=t._nextDup;return n===null?this._head=i:n._nextDup=i,i===null?this._tail=n:i._prevDup=n,this._head===null}},KS=class{constructor(){this.map=new Map}put(t){let n=t.trackById,i=this.map.get(n);i||(i=new fF,this.map.set(n,i)),i.add(t)}get(t,n){let i=t,r=this.map.get(i);return r?r.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Y8(e,t,n){let i=e.previousIndex;if(i===null)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+t+r}function Q8(){return new uA([new uF])}var uA=(()=>{class e{static{this.\u0275prov=oe({token:e,providedIn:"root",factory:Q8})}constructor(n){this.factories=n}static create(n,i){if(i!=null){let r=i.factories.slice();n=n.concat(r)}return new e(n)}static extend(n){return{provide:e,useFactory:i=>e.create(n,i||Q8()),deps:[[e,new s5,new gt]]}}find(n){let i=this.factories.find(r=>r.supports(n));if(i!=null)return i;throw new Le(901,!1)}}return e})();function MH(e){try{let{rootComponent:t,appProviders:n,platformProviders:i}=e,r=iue(i),o=[Zce(),...n||[]],a=new US({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(De);return l.run(()=>{a.resolveInjectorInitializers();let c=a.get(Vl,null),u;l.runOutsideAngular(()=>{u=l.onError.subscribe({next:p=>{c.handleError(p)}})});let d=()=>a.destroy(),h=r.get(AH);return h.add(d),a.onDestroy(()=>{u.unsubscribe(),h.delete(d)}),qce(c,l,()=>{let p=a.get(FH);return p.runInitializers(),p.donePromise.then(()=>{let g=a.get(_0,qS);Tce(g||qS);let m=a.get(Uo);return t!==void 0&&m.bootstrap(t),m})})})}catch(t){return Promise.reject(t)}}var X8=!1,lue=!1;function cue(){X8||(X8=!0,Ese(),Cce(),Oce(),Sce(),qle(),_le(),Jae(),oae(),Fce())}function uue(e,t){return lA(e)}function PH(){return hn([{provide:pS,useFactory:()=>{let e=!0;return gS()&&(e=!!Y(Kd,{optional:!0})?.get(vG,null)),e&&Yd("NgHydration"),e}},{provide:Ld,useValue:()=>{lue=!!Y(Ise,{optional:!0}),gS()&&Y(pS)&&(due(),cue())},multi:!0},{provide:bG,useFactory:()=>gS()&&Y(pS)},{provide:Lp,useFactory:()=>{if(gS()&&Y(pS)){let e=Y(Uo),t=Y(bt);return()=>{uue(e,t).then(()=>{jae(e)})}}return()=>{}},multi:!0}])}function due(){let e=o1(),t;for(let n of e.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===Sse){t=n;break}if(!t)throw new Le(-507,!1)}function E1(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}function x1(e){let t=Et(null);try{return e()}finally{Et(t)}}function D1(e,t){let n=Xc(e),i=t.elementInjector||JS();return new Rp(n).create(i,t.projectableNodes,t.hostElement,t.environmentInjector)}var HH=null;function Wl(){return HH}function zH(e){HH??=e}var O1=class{};var fi=new ce(""),UH=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:()=>Y(fue),providedIn:"platform"})}}return e})();var fue=(()=>{class e extends UH{constructor(){super(),this._doc=Y(fi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Wl().getBaseHref(this._doc)}onPopState(n){let i=Wl().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",n,!1),()=>i.removeEventListener("popstate",n)}onHashChange(n){let i=Wl().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",n,!1),()=>i.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,i,r){this._history.pushState(n,i,r)}replaceState(n,i,r){this._history.replaceState(n,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:()=>new e,providedIn:"platform"})}}return e})();function jH(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function kH(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,i=n-(e[n-1]==="/"?1:0);return e.slice(0,i)+e.slice(n)}function Xd(e){return e&&e[0]!=="?"?"?"+e:e}var V1=(()=>{class e{historyGo(n){throw new Error("")}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:()=>Y(WH),providedIn:"root"})}}return e})(),pue=new ce(""),WH=(()=>{class e extends V1{constructor(n,i){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Y(fi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return jH(this._baseHref,n)}path(n=!1){let i=this._platformLocation.pathname+Xd(this._platformLocation.search),r=this._platformLocation.hash;return r&&n?`${i}${r}`:i}pushState(n,i,r,o){let s=this.prepareExternalUrl(r+Xd(o));this._platformLocation.pushState(n,i,s)}replaceState(n,i,r,o){let s=this.prepareExternalUrl(r+Xd(o));this._platformLocation.replaceState(n,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(i){return new(i||e)($(UH),$(pue,8))}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var x0=(()=>{class e{constructor(n){this._subject=new Q,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let i=this._locationStrategy.getBaseHref();this._basePath=vue(kH(OH(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,i=""){return this.path()==this.normalize(n+Xd(i))}normalize(n){return e.stripTrailingSlash(mue(this._basePath,OH(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,i="",r=null){this._locationStrategy.pushState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Xd(i)),r)}replaceState(n,i="",r=null){this._locationStrategy.replaceState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Xd(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",i){this._urlChangeListeners.forEach(r=>r(n,i))}subscribe(n,i,r){return this._subject.subscribe({next:n,error:i,complete:r})}static{this.normalizeQueryParams=Xd}static{this.joinWithSlash=jH}static{this.stripTrailingSlash=kH}static{this.\u0275fac=function(i){return new(i||e)($(V1))}}static{this.\u0275prov=oe({token:e,factory:()=>gue(),providedIn:"root"})}}return e})();function gue(){return new x0($(V1))}function mue(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function OH(e){return e.replace(/\/index.html$/,"")}function vue(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var Di=function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e}(Di||{}),Bt=function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e}(Bt||{}),jo=function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e}(jo||{}),au={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function yue(e){return hs(e)[ei.LocaleId]}function qH(e,t,n){let i=hs(e),r=[i[ei.DayPeriodsFormat],i[ei.DayPeriodsStandalone]],o=ps(r,t);return ps(o,n)}function CA(e,t,n){let i=hs(e),r=[i[ei.DaysFormat],i[ei.DaysStandalone]],o=ps(r,t);return ps(o,n)}function B1(e,t,n){let i=hs(e),r=[i[ei.MonthsFormat],i[ei.MonthsStandalone]],o=ps(r,t);return ps(o,n)}function Cue(e,t){let i=hs(e)[ei.Eras];return ps(i,t)}function T1(e,t){let n=hs(e);return ps(n[ei.DateFormat],t)}function R1(e,t){let n=hs(e);return ps(n[ei.TimeFormat],t)}function I1(e,t){let i=hs(e)[ei.DateTimeFormat];return ps(i,t)}function G1(e,t){let n=hs(e),i=n[ei.NumberSymbols][t];if(typeof i>"u"){if(t===au.CurrencyDecimal)return n[ei.NumberSymbols][au.Decimal];if(t===au.CurrencyGroup)return n[ei.NumberSymbols][au.Group]}return i}function KH(e){if(!e[ei.ExtraData])throw new Error(`Missing extra locale data for the locale "${e[ei.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function wue(e){let t=hs(e);return KH(t),(t[ei.ExtraData][2]||[]).map(i=>typeof i=="string"?dA(i):[dA(i[0]),dA(i[1])])}function bue(e,t,n){let i=hs(e);KH(i);let r=[i[ei.ExtraData][0],i[ei.ExtraData][1]],o=ps(r,t)||[];return ps(o,n)||[]}function ps(e,t){for(let n=t;n>-1;n--)if(typeof e[n]<"u")return e[n];throw new Error("Locale data API: locale data undefined")}function dA(e){let[t,n]=e.split(":");return{hours:+t,minutes:+n}}var Sue=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,F1={},_ue=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,jl=function(e){return e[e.Short=0]="Short",e[e.ShortGMT=1]="ShortGMT",e[e.Long=2]="Long",e[e.Extended=3]="Extended",e}(jl||{}),$t=function(e){return e[e.FullYear=0]="FullYear",e[e.Month=1]="Month",e[e.Date=2]="Date",e[e.Hours=3]="Hours",e[e.Minutes=4]="Minutes",e[e.Seconds=5]="Seconds",e[e.FractionalSeconds=6]="FractionalSeconds",e[e.Day=7]="Day",e}($t||{}),Xt=function(e){return e[e.DayPeriods=0]="DayPeriods",e[e.Days=1]="Days",e[e.Months=2]="Months",e[e.Eras=3]="Eras",e}(Xt||{});function YH(e,t,n,i){let r=Mue(e);t=Ul(n,t)||t;let s=[],a;for(;t;)if(a=_ue.exec(t),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;t=u}else{s.push(t);break}let l=r.getTimezoneOffset();i&&(l=XH(i,l),r=Aue(r,i,!0));let c="";return s.forEach(u=>{let d=Iue(u);c+=d?d(r,n,l):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function N1(e,t,n){let i=new Date(0);return i.setFullYear(e,t,n),i.setHours(0,0,0),i}function Ul(e,t){let n=yue(e);if(F1[n]??={},F1[n][t])return F1[n][t];let i="";switch(t){case"shortDate":i=T1(e,jo.Short);break;case"mediumDate":i=T1(e,jo.Medium);break;case"longDate":i=T1(e,jo.Long);break;case"fullDate":i=T1(e,jo.Full);break;case"shortTime":i=R1(e,jo.Short);break;case"mediumTime":i=R1(e,jo.Medium);break;case"longTime":i=R1(e,jo.Long);break;case"fullTime":i=R1(e,jo.Full);break;case"short":let r=Ul(e,"shortTime"),o=Ul(e,"shortDate");i=A1(I1(e,jo.Short),[r,o]);break;case"medium":let s=Ul(e,"mediumTime"),a=Ul(e,"mediumDate");i=A1(I1(e,jo.Medium),[s,a]);break;case"long":let l=Ul(e,"longTime"),c=Ul(e,"longDate");i=A1(I1(e,jo.Long),[l,c]);break;case"full":let u=Ul(e,"fullTime"),d=Ul(e,"fullDate");i=A1(I1(e,jo.Full),[u,d]);break}return i&&(F1[n][t]=i),i}function A1(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(n,i){return t!=null&&i in t?t[i]:n})),e}function oa(e,t,n="-",i,r){let o="";(e<0||r&&e<=0)&&(r?e=-e+1:(e=-e,o=n));let s=String(e);for(;s.length<t;)s="0"+s;return i&&(s=s.slice(s.length-t)),o+s}function Eue(e,t){return oa(e,3).substring(0,t)}function hi(e,t,n=0,i=!1,r=!1){return function(o,s){let a=xue(e,o);if((n>0||a>-n)&&(a+=n),e===$t.Hours)a===0&&n===-12&&(a=12);else if(e===$t.FractionalSeconds)return Eue(a,t);let l=G1(s,au.MinusSign);return oa(a,t,l,i,r)}}function xue(e,t){switch(e){case $t.FullYear:return t.getFullYear();case $t.Month:return t.getMonth();case $t.Date:return t.getDate();case $t.Hours:return t.getHours();case $t.Minutes:return t.getMinutes();case $t.Seconds:return t.getSeconds();case $t.FractionalSeconds:return t.getMilliseconds();case $t.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}function vn(e,t,n=Di.Format,i=!1){return function(r,o){return Due(r,o,e,t,n,i)}}function Due(e,t,n,i,r,o){switch(n){case Xt.Months:return B1(t,r,i)[e.getMonth()];case Xt.Days:return CA(t,r,i)[e.getDay()];case Xt.DayPeriods:let s=e.getHours(),a=e.getMinutes();if(o){let c=wue(t),u=bue(t,r,i),d=c.findIndex(h=>{if(Array.isArray(h)){let[p,g]=h,m=s>=p.hours&&a>=p.minutes,v=s<g.hours||s===g.hours&&a<g.minutes;if(p.hours<g.hours){if(m&&v)return!0}else if(m||v)return!0}else if(h.hours===s&&h.minutes===a)return!0;return!1});if(d!==-1)return u[d]}return qH(t,r,i)[s<12?0:1];case Xt.Eras:return Cue(t,i)[e.getFullYear()<=0?0:1];default:let l=n;throw new Error(`unexpected translation type ${l}`)}}function M1(e){return function(t,n,i){let r=-1*i,o=G1(n,au.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(e){case jl.Short:return(r>=0?"+":"")+oa(s,2,o)+oa(Math.abs(r%60),2,o);case jl.ShortGMT:return"GMT"+(r>=0?"+":"")+oa(s,1,o);case jl.Long:return"GMT"+(r>=0?"+":"")+oa(s,2,o)+":"+oa(Math.abs(r%60),2,o);case jl.Extended:return i===0?"Z":(r>=0?"+":"")+oa(s,2,o)+":"+oa(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${e}"`)}}}var Tue=0,k1=4;function Rue(e){let t=N1(e,Tue,1).getDay();return N1(e,0,1+(t<=k1?k1:k1+7)-t)}function QH(e){let t=e.getDay(),n=t===0?-3:k1-t;return N1(e.getFullYear(),e.getMonth(),e.getDate()+n)}function hA(e,t=!1){return function(n,i){let r;if(t){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();r=1+Math.floor((s+o)/7)}else{let o=QH(n),s=Rue(o.getFullYear()),a=o.getTime()-s.getTime();r=1+Math.round(a/6048e5)}return oa(r,e,G1(i,au.MinusSign))}}function P1(e,t=!1){return function(n,i){let o=QH(n).getFullYear();return oa(o,e,G1(i,au.MinusSign),t)}}var fA={};function Iue(e){if(fA[e])return fA[e];let t;switch(e){case"G":case"GG":case"GGG":t=vn(Xt.Eras,Bt.Abbreviated);break;case"GGGG":t=vn(Xt.Eras,Bt.Wide);break;case"GGGGG":t=vn(Xt.Eras,Bt.Narrow);break;case"y":t=hi($t.FullYear,1,0,!1,!0);break;case"yy":t=hi($t.FullYear,2,0,!0,!0);break;case"yyy":t=hi($t.FullYear,3,0,!1,!0);break;case"yyyy":t=hi($t.FullYear,4,0,!1,!0);break;case"Y":t=P1(1);break;case"YY":t=P1(2,!0);break;case"YYY":t=P1(3);break;case"YYYY":t=P1(4);break;case"M":case"L":t=hi($t.Month,1,1);break;case"MM":case"LL":t=hi($t.Month,2,1);break;case"MMM":t=vn(Xt.Months,Bt.Abbreviated);break;case"MMMM":t=vn(Xt.Months,Bt.Wide);break;case"MMMMM":t=vn(Xt.Months,Bt.Narrow);break;case"LLL":t=vn(Xt.Months,Bt.Abbreviated,Di.Standalone);break;case"LLLL":t=vn(Xt.Months,Bt.Wide,Di.Standalone);break;case"LLLLL":t=vn(Xt.Months,Bt.Narrow,Di.Standalone);break;case"w":t=hA(1);break;case"ww":t=hA(2);break;case"W":t=hA(1,!0);break;case"d":t=hi($t.Date,1);break;case"dd":t=hi($t.Date,2);break;case"c":case"cc":t=hi($t.Day,1);break;case"ccc":t=vn(Xt.Days,Bt.Abbreviated,Di.Standalone);break;case"cccc":t=vn(Xt.Days,Bt.Wide,Di.Standalone);break;case"ccccc":t=vn(Xt.Days,Bt.Narrow,Di.Standalone);break;case"cccccc":t=vn(Xt.Days,Bt.Short,Di.Standalone);break;case"E":case"EE":case"EEE":t=vn(Xt.Days,Bt.Abbreviated);break;case"EEEE":t=vn(Xt.Days,Bt.Wide);break;case"EEEEE":t=vn(Xt.Days,Bt.Narrow);break;case"EEEEEE":t=vn(Xt.Days,Bt.Short);break;case"a":case"aa":case"aaa":t=vn(Xt.DayPeriods,Bt.Abbreviated);break;case"aaaa":t=vn(Xt.DayPeriods,Bt.Wide);break;case"aaaaa":t=vn(Xt.DayPeriods,Bt.Narrow);break;case"b":case"bb":case"bbb":t=vn(Xt.DayPeriods,Bt.Abbreviated,Di.Standalone,!0);break;case"bbbb":t=vn(Xt.DayPeriods,Bt.Wide,Di.Standalone,!0);break;case"bbbbb":t=vn(Xt.DayPeriods,Bt.Narrow,Di.Standalone,!0);break;case"B":case"BB":case"BBB":t=vn(Xt.DayPeriods,Bt.Abbreviated,Di.Format,!0);break;case"BBBB":t=vn(Xt.DayPeriods,Bt.Wide,Di.Format,!0);break;case"BBBBB":t=vn(Xt.DayPeriods,Bt.Narrow,Di.Format,!0);break;case"h":t=hi($t.Hours,1,-12);break;case"hh":t=hi($t.Hours,2,-12);break;case"H":t=hi($t.Hours,1);break;case"HH":t=hi($t.Hours,2);break;case"m":t=hi($t.Minutes,1);break;case"mm":t=hi($t.Minutes,2);break;case"s":t=hi($t.Seconds,1);break;case"ss":t=hi($t.Seconds,2);break;case"S":t=hi($t.FractionalSeconds,1);break;case"SS":t=hi($t.FractionalSeconds,2);break;case"SSS":t=hi($t.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=M1(jl.Short);break;case"ZZZZZ":t=M1(jl.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=M1(jl.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=M1(jl.Long);break;default:return null}return fA[e]=t,t}function XH(e,t){e=e.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function Fue(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function Aue(e,t,n){let i=n?-1:1,r=e.getTimezoneOffset(),o=XH(t,r);return Fue(e,i*(o-r))}function Mue(e){if(NH(e))return e;if(typeof e=="number"&&!isNaN(e))return new Date(e);if(typeof e=="string"){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){let[r,o=1,s=1]=e.split("-").map(a=>+a);return N1(r,o-1,s)}let n=parseFloat(e);if(!isNaN(e-n))return new Date(n);let i;if(i=e.match(Sue))return Pue(i)}let t=new Date(e);if(!NH(t))throw new Error(`Unable to convert "${e}" into a date`);return t}function Pue(e){let t=new Date(0),n=0,i=0,r=e[8]?t.setUTCFullYear:t.setFullYear,o=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),i=Number(e[9]+e[11])),r.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));let s=Number(e[4]||0)-n,a=Number(e[5]||0)-i,l=Number(e[6]||0),c=Math.floor(parseFloat("0."+(e[7]||0))*1e3);return o.call(t,s,a,l,c),t}function NH(e){return e instanceof Date&&!isNaN(e.valueOf())}function wA(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let i=n.indexOf("="),[r,o]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}var pA=/\s+/,LH=[],H1=(()=>{class e{constructor(n,i){this._ngEl=n,this._renderer=i,this.initialClasses=LH,this.stateMap=new Map}set klass(n){this.initialClasses=n!=null?n.trim().split(pA):LH}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(pA):n}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let i of n)this._updateState(i,!0);else if(n!=null)for(let i of Object.keys(n))this._updateState(i,!!n[i]);this._applyStateDiff()}_updateState(n,i){let r=this.stateMap.get(n);r!==void 0?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(n,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let i=n[0],r=n[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(n,i){n=n.trim(),n.length>0&&n.split(pA).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static{this.\u0275fac=function(i){return new(i||e)(J(In),J(Lr))}}static{this.\u0275dir=on({type:e,selectors:[["","ngClass",""]],inputs:{klass:[Zn.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return e})();var gA=class{constructor(t,n,i,r){this.$implicit=t,this.ngForOf=n,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},gs=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,i,r){this._viewContainer=n,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let i=this._viewContainer;n.forEachOperation((r,o,s)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new gA(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(o===null?void 0:o);else if(o!==null){let a=i.get(o);i.move(a,s),VH(a,r)}});for(let r=0,o=i.length;r<o;r++){let a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);VH(o,r)})}static ngTemplateContextGuard(n,i){return!0}static{this.\u0275fac=function(i){return new(i||e)(J(Go),J(ra),J(uA))}}static{this.\u0275dir=on({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return e})();function VH(e,t){e.context.$implicit=t.item}var Gi=(()=>{class e{constructor(n,i){this._viewContainer=n,this._context=new mA,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){BH("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){BH("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,i){return!0}static{this.\u0275fac=function(i){return new(i||e)(J(Go),J(ra))}}static{this.\u0275dir=on({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return e})(),mA=class{constructor(){this.$implicit=null,this.ngIf=null}};function BH(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${kr(t)}'.`)}var bA=(()=>{class e{constructor(n){this._viewContainerRef=n,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(n){if(this._shouldRecreateView(n)){let i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=i.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(n){return!!n.ngTemplateOutlet||!!n.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(n,i,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,i,r):!1,get:(n,i,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,i,r)}})}static{this.\u0275fac=function(i){return new(i||e)(J(Go))}}static{this.\u0275dir=on({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Vn]})}}return e})();function $H(e,t){return new Le(2100,!1)}var vA=class{createSubscription(t,n){return x1(()=>t.subscribe({next:n,error:i=>{throw i}}))}dispose(t){x1(()=>t.unsubscribe())}},yA=class{createSubscription(t,n){return t.then(n,i=>{throw i})}dispose(t){}},kue=new yA,Oue=new vA,ZH=(()=>{class e{constructor(n){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,i=>this._updateLatestValue(n,i))}_selectStrategy(n){if(su(n))return kue;if(aA(n))return Oue;throw $H(e,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,i){n===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(i){return new(i||e)(J(Gr,16))}}static{this.\u0275pipe=$S({name:"async",type:e,pure:!1,standalone:!0})}}return e})();var Nue=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,JH=(()=>{class e{transform(n){if(n==null)return null;if(typeof n!="string")throw $H(e,n);return n.replace(Nue,i=>i[0].toUpperCase()+i.slice(1).toLowerCase())}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275pipe=$S({name:"titlecase",type:e,pure:!0,standalone:!0})}}return e})();var _n=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=Zi({type:e})}static{this.\u0275inj=$i({})}}return e})(),SA="browser",Lue="server";function Vp(e){return e===SA}function sa(e){return e===Lue}var L1=class{};var U1=class e{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let i=n.indexOf(":");if(i>0){let r=n.slice(0,i),o=r.toLowerCase(),s=n.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,n);let r=(t.op==="a"?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":let o=t.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(t,n){let i=(Array.isArray(n)?n:[n]).map(o=>o.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var az=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(az||{}),_A=class{constructor(t,n=lz.Ok,i="OK"){this.headers=t.headers||new U1,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}};var j1=class e extends _A{constructor(t={}){super(t),this.type=az.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}};var lz=function(e){return e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Processing=102]="Processing",e[e.EarlyHints=103]="EarlyHints",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultiStatus=207]="MultiStatus",e[e.AlreadyReported=208]="AlreadyReported",e[e.ImUsed=226]="ImUsed",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.MisdirectedRequest=421]="MisdirectedRequest",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.TooEarly=425]="TooEarly",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",e}(lz||{});var Bue=new ce("");var ez="b",tz="h",nz="s",iz="st",rz="u",oz="rt",z1=new ce(""),Gue=["GET","HEAD"];function Hue(e,t){let d=Y(z1),{isCacheActive:n}=d,i=Ab(d,["isCacheActive"]),{transferCache:r,method:o}=e;if(!n||o==="POST"&&!i.includePostRequests&&!r||o!=="POST"&&!Gue.includes(o)||r===!1||i.filter?.(e)===!1)return t(e);let s=Y(Kd),a=Uue(e),l=s.get(a,null),c=i.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(c=r.includeHeaders),l){let{[ez]:h,[oz]:p,[tz]:g,[nz]:m,[iz]:v,[rz]:C}=l,S=h;switch(p){case"arraybuffer":S=new TextEncoder().encode(h).buffer;break;case"blob":S=new Blob([h]);break}let _=new U1(g);return se(new j1({body:S,headers:_,status:m,statusText:v,url:C}))}let u=sa(Y(Sn));return t(e).pipe(nn(h=>{h instanceof j1&&u&&s.set(a,{[ez]:h.body,[tz]:zue(h.headers,c),[nz]:h.status,[iz]:h.statusText,[rz]:h.url||"",[oz]:e.responseType})}))}function zue(e,t){if(!t)return{};let n={};for(let i of t){let r=e.getAll(i);r!==null&&(n[i]=r)}return n}function sz(e){return[...e.keys()].sort().map(t=>`${t}=${e.getAll(t)}`).join("&")}function Uue(e){let{params:t,method:n,responseType:i,url:r}=e,o=sz(t),s=e.serializeBody();s instanceof URLSearchParams?s=sz(s):typeof s!="string"&&(s="");let a=[n,i,r,s,o].join("|"),l=jue(a);return l}function jue(e){let t=0;for(let n of e)t=Math.imul(31,t)+n.charCodeAt(0)<<0;return t+=2147483648,t.toString()}function cz(e){return[{provide:z1,useFactory:()=>(Yd("NgHttpTransferCache"),B({isCacheActive:!0},e))},{provide:Bue,useValue:Hue,multi:!0,deps:[Kd,z1]},{provide:Lp,multi:!0,useFactory:()=>{let t=Y(Uo),n=Y(z1);return()=>{lA(t).then(()=>{n.isCacheActive=!1})}}}]}var DA=class extends O1{constructor(){super(...arguments),this.supportsDOMEvents=!0}},TA=class e extends DA{static makeCurrent(){zH(new e)}onAndCancel(t,n,i){return t.addEventListener(n,i),()=>{t.removeEventListener(n,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=Wue();return n==null?null:que(n)}resetBaseElement(){D0=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return wA(document.cookie,t)}},D0=null;function Wue(){return D0=D0||document.querySelector("base"),D0?D0.getAttribute("href"):null}function que(e){return new URL(e,document.baseURI).pathname}var Kue=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac})}}return e})(),RA=new ce(""),fz=(()=>{class e{constructor(n,i){this._zone=i,this._eventNameToPlugin=new Map,n.forEach(r=>{r.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,i,r){return this._findPluginFor(i).addEventListener(n,i,r)}getZone(){return this._zone}_findPluginFor(n){let i=this._eventNameToPlugin.get(n);if(i)return i;if(i=this._plugins.find(o=>o.supports(n)),!i)throw new Le(5101,!1);return this._eventNameToPlugin.set(n,i),i}static{this.\u0275fac=function(i){return new(i||e)($(RA),$(De))}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac})}}return e})(),W1=class{constructor(t){this._doc=t}},EA="ng-app-id",pz=(()=>{class e{constructor(n,i,r,o={}){this.doc=n,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=sa(o),this.resetHostNodes()}addStyles(n){for(let i of n)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(n){for(let i of n)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(i=>i.remove()),n.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let i of this.getAllStyles())this.addStyleToHost(n,i)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let i of this.hostNodes)this.addStyleToHost(i,n)}onStyleRemoved(n){let i=this.styleRef;i.get(n)?.elements?.forEach(r=>r.remove()),i.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${EA}="${this.appId}"]`);if(n?.length){let i=new Map;return n.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(n,i){let r=this.styleRef;if(r.has(n)){let o=r.get(n);return o.usage+=i,o.usage}return r.set(n,{usage:i,elements:[]}),i}getStyleElement(n,i){let r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===n)return r.delete(i),o.removeAttribute(EA),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(EA,this.appId),n.appendChild(s),s}}addStyleToHost(n,i){let r=this.getStyleElement(n,i),o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||e)($(fi),$(s1),$(MF,8),$(Sn))}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac})}}return e})(),xA={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},AA=/%COMP%/g,gz="%COMP%",Yue=`_nghost-${gz}`,Que=`_ngcontent-${gz}`,Xue=!0,$ue=new ce("",{providedIn:"root",factory:()=>Xue});function Zue(e){return Que.replace(AA,e)}function Jue(e){return Yue.replace(AA,e)}function mz(e,t){return t.map(n=>n.replace(AA,e))}var uz=(()=>{class e{constructor(n,i,r,o,s,a,l,c=null){this.eventManager=n,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=sa(a),this.defaultRenderer=new T0(n,s,l,this.platformIsServer)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===za.ShadowDom&&(i=pe(B({},i),{encapsulation:za.Emulated}));let r=this.getOrCreateRenderer(n,i);return r instanceof q1?r.applyToHost(n):r instanceof R0&&r.applyStyles(),r}getOrCreateRenderer(n,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case za.Emulated:o=new q1(l,c,i,this.appId,u,s,a,d);break;case za.ShadowDom:return new IA(l,c,n,i,s,a,this.nonce,d);default:o=new R0(l,c,i,u,s,a,d);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||e)($(fz),$(pz),$(s1),$($ue),$(fi),$(Sn),$(De),$(MF))}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac})}}return e})(),T0=class{constructor(t,n,i,r){this.eventManager=t,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(xA[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(dz(t)?t.content:t).appendChild(n)}insertBefore(t,n,i){t&&(dz(t)?t.content:t).insertBefore(n,i)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new Le(-5104,!1);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,r){if(r){n=r+":"+n;let o=xA[r];o?t.setAttributeNS(o,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){let r=xA[i];r?t.removeAttributeNS(r,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,r){r&(Bl.DashCase|Bl.Important)?t.style.setProperty(n,i,r&Bl.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&Bl.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t!=null&&(t[n]=i)}setValue(t,n){t.nodeValue=n}listen(t,n,i){if(typeof t=="string"&&(t=Wl().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(i))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function dz(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var IA=class extends T0{constructor(t,n,i,r,o,s,a,l){super(t,o,s,l),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=mz(r.id,r.styles);for(let u of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},R0=class extends T0{constructor(t,n,i,r,o,s,a,l){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=l?mz(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},q1=class extends R0{constructor(t,n,i,r,o,s,a,l){let c=r+"-"+i.id;super(t,n,i,o,s,a,l,c),this.contentAttr=Zue(c),this.hostAttr=Jue(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}},ede=(()=>{class e extends W1{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,r){return n.addEventListener(i,r,!1),()=>this.removeEventListener(n,i,r)}removeEventListener(n,i,r){return n.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||e)($(fi))}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac})}}return e})(),hz=["alt","control","meta","shift"],tde={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nde={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},ide=(()=>{class e extends W1{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,i,r){let o=e.parseEventName(i),s=e.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Wl().onAndCancel(n,o.domEventName,s))}static parseEventName(n){let i=n.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=e._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),hz.forEach(c=>{let u=i.indexOf(c);u>-1&&(i.splice(u,1),s+=c+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(n,i){let r=tde[n.key]||n.key,o="";return i.indexOf("code.")>-1&&(r=n.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),hz.forEach(s=>{if(s!==r){let a=nde[s];a(n)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(n,i,r){return o=>{e.matchEventFullKeyCode(o,n)&&r.runGuarded(()=>i(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(i){return new(i||e)($(fi))}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac})}}return e})();function vz(e,t){return MH(B({rootComponent:e},rde(t)))}function rde(e){return{appProviders:[...cde,...e?.providers??[]],platformProviders:lde}}function ode(){TA.makeCurrent()}function sde(){return new Vl}function ade(){return fG(document),document}var lde=[{provide:Sn,useValue:SA},{provide:AF,useValue:ode,multi:!0},{provide:fi,useFactory:ade,deps:[]}];var cde=[{provide:ZS,useValue:"root"},{provide:Vl,useFactory:sde,deps:[]},{provide:RA,useClass:ede,multi:!0,deps:[fi,De,Sn]},{provide:RA,useClass:ide,multi:!0,deps:[fi]},uz,pz,fz,{provide:h0,useExisting:uz},{provide:L1,useClass:Kue,deps:[]},[]];var K1=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(i){return new(i||e)($(fi))}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var FA=function(e){return e[e.NoHttpTransferCache=0]="NoHttpTransferCache",e[e.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",e}(FA||{});function yz(...e){let t=[],n=new Set,i=n.has(FA.HttpTransferCacheOptions);for(let{\u0275providers:r,\u0275kind:o}of e)n.add(o),r.length&&t.push(r);return hn([[],PH(),n.has(FA.NoHttpTransferCache)||i?[]:cz({}),t])}var pt="primary",j0=Symbol("RouteTitle"),NA=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Up(e){return new NA(e)}function ude(e,t,n){let i=n.path.split("/");if(i.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||i.length<e.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=e[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,i.length),posParams:r}}function dde(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Qa(e[n],t[n]))return!1;return!0}function Qa(e,t){let n=e?LA(e):void 0,i=t?LA(t):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!xz(e[r],t[r]))return!1;return!0}function LA(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function xz(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),i=[...t].sort();return n.every((r,o)=>i[o]===r)}else return e===t}function Dz(e){return e.length>0?e[e.length-1]:null}function uu(e){return BR(e)?e:su(e)?Ze(Promise.resolve(e)):se(e)}var hde={exact:Rz,subset:Iz},Tz={exact:fde,subset:pde,ignored:()=>!0};function wz(e,t,n){return hde[n.paths](e.root,t.root,n.matrixParams)&&Tz[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function fde(e,t){return Qa(e,t)}function Rz(e,t,n){if(!Zd(e.segments,t.segments)||!X1(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!e.children[i]||!Rz(e.children[i],t.children[i],n))return!1;return!0}function pde(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>xz(e[n],t[n]))}function Iz(e,t,n){return Fz(e,t,t.segments,n)}function Fz(e,t,n,i){if(e.segments.length>n.length){let r=e.segments.slice(0,n.length);return!(!Zd(r,n)||t.hasChildren()||!X1(r,n,i))}else if(e.segments.length===n.length){if(!Zd(e.segments,n)||!X1(e.segments,n,i))return!1;for(let r in t.children)if(!e.children[r]||!Iz(e.children[r],t.children[r],i))return!1;return!0}else{let r=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!Zd(e.segments,r)||!X1(e.segments,r,i)||!e.children[pt]?!1:Fz(e.children[pt],t,o,i)}}function X1(e,t,n){return t.every((i,r)=>Tz[n](e[r].parameters,i.parameters))}var lu=class{constructor(t=new Zt([],{}),n={},i=null){this.root=t,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Up(this.queryParams),this._queryParamMap}toString(){return vde.serialize(this)}},Zt=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $1(this)}},$d=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=Up(this.parameters),this._parameterMap}toString(){return Mz(this)}};function gde(e,t){return Zd(e,t)&&e.every((n,i)=>Qa(n.parameters,t[i].parameters))}function Zd(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.path===t[i].path)}function mde(e,t){let n=[];return Object.entries(e.children).forEach(([i,r])=>{i===pt&&(n=n.concat(t(r,i)))}),Object.entries(e.children).forEach(([i,r])=>{i!==pt&&(n=n.concat(t(r,i)))}),n}var lM=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:()=>new J1,providedIn:"root"})}}return e})(),J1=class{parse(t){let n=new BA(t);return new lu(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${I0(t.root,!0)}`,i=wde(t.queryParams),r=typeof t.fragment=="string"?`#${yde(t.fragment)}`:"";return`${n}${i}${r}`}},vde=new J1;function $1(e){return e.segments.map(t=>Mz(t)).join("/")}function I0(e,t){if(!e.hasChildren())return $1(e);if(t){let n=e.children[pt]?I0(e.children[pt],!1):"",i=[];return Object.entries(e.children).forEach(([r,o])=>{r!==pt&&i.push(`${r}:${I0(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=mde(e,(i,r)=>r===pt?[I0(e.children[pt],!1)]:[`${r}:${I0(i,!1)}`]);return Object.keys(e.children).length===1&&e.children[pt]!=null?`${$1(e)}/${n[0]}`:`${$1(e)}/(${n.join("//")})`}}function Az(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Y1(e){return Az(e).replace(/%3B/gi,";")}function yde(e){return encodeURI(e)}function VA(e){return Az(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Z1(e){return decodeURIComponent(e)}function bz(e){return Z1(e.replace(/\+/g,"%20"))}function Mz(e){return`${VA(e.path)}${Cde(e.parameters)}`}function Cde(e){return Object.entries(e).map(([t,n])=>`;${VA(t)}=${VA(n)}`).join("")}function wde(e){let t=Object.entries(e).map(([n,i])=>Array.isArray(i)?i.map(r=>`${Y1(n)}=${Y1(r)}`).join("&"):`${Y1(n)}=${Y1(i)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var bde=/^[^\/()?;#]+/;function MA(e){let t=e.match(bde);return t?t[0]:""}var Sde=/^[^\/()?;=#]+/;function _de(e){let t=e.match(Sde);return t?t[0]:""}var Ede=/^[^=?&#]+/;function xde(e){let t=e.match(Ede);return t?t[0]:""}var Dde=/^[^&#]+/;function Tde(e){let t=e.match(Dde);return t?t[0]:""}var BA=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Zt([],{}):new Zt([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(i[pt]=new Zt(t,n)),i}parseSegment(){let t=MA(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Le(4009,!1);return this.capture(t),new $d(Z1(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=_de(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=MA(this.remaining);r&&(i=r,this.capture(i))}t[Z1(n)]=Z1(i)}parseQueryParam(t){let n=xde(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let s=Tde(this.remaining);s&&(i=s,this.capture(i))}let r=bz(n),o=bz(i);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=MA(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Le(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=pt);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[pt]:new Zt([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Le(4011,!1)}};function Pz(e){return e.segments.length>0?new Zt([],{[pt]:e}):e}function kz(e){let t={};for(let[i,r]of Object.entries(e.children)){let o=kz(r);if(i===pt&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[i]=o)}let n=new Zt(e.segments,t);return Rde(n)}function Rde(e){if(e.numberOfChildren===1&&e.children[pt]){let t=e.children[pt];return new Zt(e.segments.concat(t.segments),t.children)}return e}function jp(e){return e instanceof lu}function Ide(e,t,n=null,i=null){let r=Oz(e);return Nz(r,t,n,i)}function Oz(e){let t;function n(o){let s={};for(let l of o.children){let c=n(l);s[l.outlet]=c}let a=new Zt(o.url,s);return o===e&&(t=a),a}let i=n(e.root),r=Pz(i);return t??r}function Nz(e,t,n,i){let r=e;for(;r.parent;)r=r.parent;if(t.length===0)return PA(r,r,r,n,i);let o=Fde(t);if(o.toRoot())return PA(r,r,new Zt([],{}),n,i);let s=Ade(o,r,e),a=s.processChildren?M0(s.segmentGroup,s.index,o.commands):Vz(s.segmentGroup,s.index,o.commands);return PA(r,s.segmentGroup,a,n,i)}function e_(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function O0(e){return typeof e=="object"&&e!=null&&e.outlets}function PA(e,t,n,i,r){let o={};i&&Object.entries(i).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let s;e===t?s=n:s=Lz(e,t,n);let a=Pz(kz(s));return new lu(a,o,r)}function Lz(e,t,n){let i={};return Object.entries(e.children).forEach(([r,o])=>{o===t?i[r]=n:i[r]=Lz(o,t,n)}),new Zt(e.segments,i)}var t_=class{constructor(t,n,i){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=i,t&&i.length>0&&e_(i[0]))throw new Le(4003,!1);let r=i.find(O0);if(r&&r!==Dz(i))throw new Le(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Fde(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new t_(!0,0,e);let t=0,n=!1,i=e.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new t_(n,t,i)}var Hp=class{constructor(t,n,i){this.segmentGroup=t,this.processChildren=n,this.index=i}};function Ade(e,t,n){if(e.isAbsolute)return new Hp(t,!0,0);if(!n)return new Hp(t,!1,NaN);if(n.parent===null)return new Hp(n,!0,0);let i=e_(e.commands[0])?0:1,r=n.segments.length-1+i;return Mde(n,r,e.numberOfDoubleDots)}function Mde(e,t,n){let i=e,r=t,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Le(4005,!1);r=i.segments.length}return new Hp(i,!1,r-o)}function Pde(e){return O0(e[0])?e[0].outlets:{[pt]:e}}function Vz(e,t,n){if(e??=new Zt([],{}),e.segments.length===0&&e.hasChildren())return M0(e,t,n);let i=kde(e,t,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){let o=new Zt(e.segments.slice(0,i.pathIndex),{});return o.children[pt]=new Zt(e.segments.slice(i.pathIndex),e.children),M0(o,0,r)}else return i.match&&r.length===0?new Zt(e.segments,{}):i.match&&!e.hasChildren()?GA(e,t,n):i.match?M0(e,0,r):GA(e,t,n)}function M0(e,t,n){if(n.length===0)return new Zt(e.segments,{});{let i=Pde(n),r={};if(Object.keys(i).some(o=>o!==pt)&&e.children[pt]&&e.numberOfChildren===1&&e.children[pt].segments.length===0){let o=M0(e.children[pt],t,n);return new Zt(e.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=Vz(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new Zt(e.segments,r)}}function kde(e,t,n){let i=0,r=t,o={match:!1,pathIndex:0,commandIndex:0};for(;r<e.segments.length;){if(i>=n.length)return o;let s=e.segments[r],a=n[i];if(O0(a))break;let l=`${a}`,c=i<n.length-1?n[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!_z(l,c,s))return o;i+=2}else{if(!_z(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function GA(e,t,n){let i=e.segments.slice(0,t),r=0;for(;r<n.length;){let o=n[r];if(O0(o)){let l=Ode(o.outlets);return new Zt(i,l)}if(r===0&&e_(n[0])){let l=e.segments[t];i.push(new $d(l.path,Sz(n[0]))),r++;continue}let s=O0(o)?o.outlets[pt]:`${o}`,a=r<n.length-1?n[r+1]:null;s&&a&&e_(a)?(i.push(new $d(s,Sz(a))),r+=2):(i.push(new $d(s,{})),r++)}return new Zt(i,{})}function Ode(e){let t={};return Object.entries(e).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[n]=GA(new Zt([],{}),0,i))}),t}function Sz(e){let t={};return Object.entries(e).forEach(([n,i])=>t[n]=`${i}`),t}function _z(e,t,n){return e==n.path&&Qa(t,n.parameters)}var P0="imperative",nr=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(nr||{}),ms=class{constructor(t,n){this.id=t,this.url=n}},N0=class extends ms{constructor(t,n,i="imperative",r=null){super(t,n),this.type=nr.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Jd=class extends ms{constructor(t,n,i){super(t,n),this.urlAfterRedirects=i,this.type=nr.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},qo=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(qo||{}),HA=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(HA||{}),cu=class extends ms{constructor(t,n,i,r){super(t,n),this.reason=i,this.code=r,this.type=nr.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},eh=class extends ms{constructor(t,n,i,r){super(t,n),this.reason=i,this.code=r,this.type=nr.NavigationSkipped}},L0=class extends ms{constructor(t,n,i,r){super(t,n),this.error=i,this.target=r,this.type=nr.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},n_=class extends ms{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=nr.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zA=class extends ms{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=nr.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},UA=class extends ms{constructor(t,n,i,r,o){super(t,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=nr.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},jA=class extends ms{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=nr.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},WA=class extends ms{constructor(t,n,i,r){super(t,n),this.urlAfterRedirects=i,this.state=r,this.type=nr.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qA=class{constructor(t){this.route=t,this.type=nr.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},KA=class{constructor(t){this.route=t,this.type=nr.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},YA=class{constructor(t){this.snapshot=t,this.type=nr.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},QA=class{constructor(t){this.snapshot=t,this.type=nr.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},XA=class{constructor(t){this.snapshot=t,this.type=nr.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},V0=class{constructor(t){this.snapshot=t,this.type=nr.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var B0=class{},G0=class{constructor(t){this.url=t}};var $A=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new l_,this.attachRef=null}},l_=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,i){let r=this.getOrCreateContext(n);r.outlet=i,this.contexts.set(n,r)}onChildOutletDestroyed(n){let i=this.getContext(n);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let i=this.getContext(n);return i||(i=new $A,this.contexts.set(n,i)),i}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),i_=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=ZA(t,this._root);return n?n.children.map(i=>i.value):[]}firstChild(t){let n=ZA(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=JA(t,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return JA(t,this._root).map(n=>n.value)}};function ZA(e,t){if(e===t.value)return t;for(let n of t.children){let i=ZA(e,n);if(i)return i}return null}function JA(e,t){if(e===t.value)return[t];for(let n of t.children){let i=JA(e,n);if(i.length)return i.unshift(t),i}return[]}var Wo=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Gp(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var r_=class extends i_{constructor(t,n){super(t),this.snapshot=n,uM(this,t)}toString(){return this.snapshot.toString()}};function Bz(e){let t=Nde(e),n=new jt([new $d("",{})]),i=new jt({}),r=new jt({}),o=new jt({}),s=new jt(""),a=new Wp(n,i,o,s,r,pt,e,t.root);return a.snapshot=t.root,new r_(new Wo(a,[]),t)}function Nde(e){let t={},n={},i={},r="",o=new H0([],t,i,r,n,pt,e,null,{});return new o_("",new Wo(o,[]))}var Wp=class{constructor(t,n,i,r,o,s,a,l){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ae(c=>c[j0]))??se(void 0),this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ae(t=>Up(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ae(t=>Up(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function cM(e,t,n="emptyOnly"){let i,{routeConfig:r}=e;return t!==null&&(n==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:B(B({},t.params),e.params),data:B(B({},t.data),e.data),resolve:B(B(B(B({},e.data),t.data),r?.data),e._resolvedData)}:i={params:B({},e.params),data:B({},e.data),resolve:B(B({},e.data),e._resolvedData??{})},r&&Hz(r)&&(i.resolve[j0]=r.title),i}var H0=class{get title(){return this.data?.[j0]}constructor(t,n,i,r,o,s,a,l,c){this.url=t,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Up(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Up(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},o_=class extends i_{constructor(t,n){super(n),this.url=t,uM(this,n)}toString(){return Gz(this._root)}};function uM(e,t){t.value._routerState=e,t.children.forEach(n=>uM(e,n))}function Gz(e){let t=e.children.length>0?` { ${e.children.map(Gz).join(", ")} } `:"";return`${e.value}${t}`}function kA(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Qa(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Qa(t.params,n.params)||e.paramsSubject.next(n.params),dde(t.url,n.url)||e.urlSubject.next(n.url),Qa(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function eM(e,t){let n=Qa(e.params,t.params)&&gde(e.url,t.url),i=!e.parent!=!t.parent;return n&&!i&&(!e.parent||eM(e.parent,t.parent))}function Hz(e){return typeof e.title=="string"||e.title===null}var W0=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=pt,this.activateEvents=new Q,this.deactivateEvents=new Q,this.attachEvents=new Q,this.detachEvents=new Q,this.parentContexts=Y(l_),this.location=Y(Go),this.changeDetector=Y(Gr),this.environmentInjector=Y(Or),this.inputBinder=Y(dM,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:i,previousValue:r}=n.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Le(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Le(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Le(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,i){this.activated=n,this._activatedRoute=i,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,i){if(this.isActivated)throw new Le(4013,!1);this._activatedRoute=n;let r=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new tM(n,a,r.injector);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275dir=on({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Vn]})}}return e})(),tM=class e{__ngOutletInjector(t){return new e(this.route,this.childContexts,t)}constructor(t,n,i){this.route=t,this.childContexts=n,this.parent=i}get(t,n){return t===Wp?this.route:t===l_?this.childContexts:this.parent.get(t,n)}},dM=new ce("");function Lde(e,t,n){let i=z0(e,t._root,n?n._root:void 0);return new r_(i,t)}function z0(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=t.value;let r=Vde(e,t,n);return new Wo(i,r)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>z0(e,a)),s}}let i=Bde(t.value),r=t.children.map(o=>z0(e,o));return new Wo(i,r)}}function Vde(e,t,n){return t.children.map(i=>{for(let r of n.children)if(e.shouldReuseRoute(i.value,r.value.snapshot))return z0(e,i,r);return z0(e,i)})}function Bde(e){return new Wp(new jt(e.url),new jt(e.params),new jt(e.queryParams),new jt(e.fragment),new jt(e.data),e.outlet,e.component,e)}var zz="ngNavigationCancelingError";function Uz(e,t){let{redirectTo:n,navigationBehaviorOptions:i}=jp(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=jz(!1,qo.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function jz(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[zz]=!0,n.cancellationCode=t,n}function Gde(e){return Wz(e)&&jp(e.url)}function Wz(e){return!!e&&e[zz]}var hM=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=je({type:e,selectors:[["ng-component"]],standalone:!0,features:[We],decls:1,vars:0,template:function(i,r){i&1&&he(0,"router-outlet")},dependencies:[W0],encapsulation:2})}}return e})();function Hde(e,t){return e.providers&&!e._injector&&(e._injector=eA(e.providers,t,`Route: ${e.path}`)),e._injector??t}function fM(e){let t=e.children&&e.children.map(fM),n=t?pe(B({},e),{children:t}):B({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==pt&&(n.component=hM),n}function Xa(e){return e.outlet||pt}function zde(e,t){let n=e.filter(i=>Xa(i)===t);return n.push(...e.filter(i=>Xa(i)!==t)),n}function q0(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Ude=(e,t,n,i)=>ae(r=>(new nM(t,r.targetRouterState,r.currentRouterState,n,i).activate(e),r)),nM=class{constructor(t,n,i,r,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,t),kA(this.futureState.root),this.activateChildRoutes(n,i,t)}deactivateChildRoutes(t,n,i){let r=Gp(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,n,i){let r=t.value,o=n?n.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,o=Gp(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let i=n.getContext(t.value.outlet),r=i&&t.value.component?i.children:n,o=Gp(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,n,i){let r=Gp(n);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new V0(o.value.snapshot))}),t.children.length&&this.forwardEvent(new QA(t.value.snapshot))}activateRoutes(t,n,i){let r=t.value,o=n?n.value:null;if(kA(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),kA(a.route.value),this.activateChildRoutes(t,null,s.children)}else{let a=q0(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,i)}},s_=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},zp=class{constructor(t,n){this.component=t,this.route=n}};function jde(e,t,n){let i=e._root,r=t?t._root:null;return F0(i,r,n,[i.value])}function Wde(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Kp(e,t){let n=Symbol(),i=t.get(e,n);return i===n?typeof e=="function"&&!J8(e)?e:t.get(e):i}function F0(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Gp(t);return e.children.forEach(s=>{qde(s,o[s.value.outlet],n,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>k0(a,n.getContext(s),r)),r}function qde(e,t,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=Kde(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new s_(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?F0(e,t,a?a.children:null,i,r):F0(e,t,n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new zp(a.outlet.component,s))}else s&&k0(t,a,r),r.canActivateChecks.push(new s_(i)),o.component?F0(e,null,a?a.children:null,i,r):F0(e,null,n,i,r);return r}function Kde(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Zd(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Zd(e.url,t.url)||!Qa(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!eM(e,t)||!Qa(e.queryParams,t.queryParams);case"paramsChange":default:return!eM(e,t)}}function k0(e,t,n){let i=Gp(e),r=e.value;Object.entries(i).forEach(([o,s])=>{r.component?t?k0(s,t.children.getContext(o),n):k0(s,null,n):k0(s,t,n)}),r.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new zp(t.outlet.component,r)):n.canDeactivateChecks.push(new zp(null,r)):n.canDeactivateChecks.push(new zp(null,r))}function K0(e){return typeof e=="function"}function Yde(e){return typeof e=="boolean"}function Qde(e){return e&&K0(e.canLoad)}function Xde(e){return e&&K0(e.canActivate)}function $de(e){return e&&K0(e.canActivateChild)}function Zde(e){return e&&K0(e.canDeactivate)}function Jde(e){return e&&K0(e.canMatch)}function qz(e){return e instanceof Pl||e?.name==="EmptyError"}var Q1=Symbol("INITIAL_VALUE");function qp(){return Ne(e=>Ar(e.map(t=>t.pipe(Dt(1),Js(Q1)))).pipe(ae(t=>{for(let n of t)if(n!==!0){if(n===Q1)return Q1;if(n===!1||n instanceof lu)return n}return!0}),xt(t=>t!==Q1),Dt(1)))}function ehe(e,t){return un(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?se(pe(B({},n),{guardsResult:!0})):the(s,i,r,e).pipe(un(a=>a&&Yde(a)?nhe(i,o,e,t):se(a)),ae(a=>pe(B({},n),{guardsResult:a})))})}function the(e,t,n,i){return Ze(e).pipe(un(r=>ahe(r.component,r.route,n,t,i)),ko(r=>r!==!0,!0))}function nhe(e,t,n,i){return Ze(t).pipe(jc(r=>ds(rhe(r.route.parent,i),ihe(r.route,i),she(e,r.path,n),ohe(e,r.route,n))),ko(r=>r!==!0,!0))}function ihe(e,t){return e!==null&&t&&t(new XA(e)),se(!0)}function rhe(e,t){return e!==null&&t&&t(new YA(e)),se(!0)}function ohe(e,t,n){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return se(!0);let r=i.map(o=>Ad(()=>{let s=q0(t)??n,a=Kp(o,s),l=Xde(a)?a.canActivate(t,e):eu(s,()=>a(t,e));return uu(l).pipe(ko())}));return se(r).pipe(qp())}function she(e,t,n){let i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>Wde(s)).filter(s=>s!==null).map(s=>Ad(()=>{let a=s.guards.map(l=>{let c=q0(s.node)??n,u=Kp(l,c),d=$de(u)?u.canActivateChild(i,e):eu(c,()=>u(i,e));return uu(d).pipe(ko())});return se(a).pipe(qp())}));return se(o).pipe(qp())}function ahe(e,t,n,i,r){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return se(!0);let s=o.map(a=>{let l=q0(t)??r,c=Kp(a,l),u=Zde(c)?c.canDeactivate(e,t,n,i):eu(l,()=>c(e,t,n,i));return uu(u).pipe(ko())});return se(s).pipe(qp())}function lhe(e,t,n,i){let r=t.canLoad;if(r===void 0||r.length===0)return se(!0);let o=r.map(s=>{let a=Kp(s,e),l=Qde(a)?a.canLoad(t,n):eu(e,()=>a(t,n));return uu(l)});return se(o).pipe(qp(),Kz(i))}function Kz(e){return Wb(nn(t=>{if(jp(t))throw Uz(e,t)}),ae(t=>t===!0))}function che(e,t,n,i){let r=t.canMatch;if(!r||r.length===0)return se(!0);let o=r.map(s=>{let a=Kp(s,e),l=Jde(a)?a.canMatch(t,n):eu(e,()=>a(t,n));return uu(l)});return se(o).pipe(qp(),Kz(i))}var U0=class{constructor(t){this.segmentGroup=t||null}},a_=class extends Error{constructor(t){super(),this.urlTree=t}};function Bp(e){return Gc(new U0(e))}function uhe(e){return Gc(new Le(4e3,!1))}function dhe(e){return Gc(jz(!1,qo.GuardRejected))}var iM=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return se(i);if(r.numberOfChildren>1||!r.children[pt])return uhe(t.redirectTo);r=r.children[pt]}}applyRedirectCommands(t,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,i);if(n.startsWith("/"))throw new a_(r);return r}applyRedirectCreateUrlTree(t,n,i,r){let o=this.createSegmentGroup(t,n.root,i,r);return new lu(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let i={};return Object.entries(t).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);i[r]=n[a]}else i[r]=o}),i}createSegmentGroup(t,n,i,r){let o=this.createSegments(t,n.segments,i,r),s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(t,l,i,r)}),new Zt(o,s)}createSegments(t,n,i,r){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,n,i){let r=i[n.path.substring(1)];if(!r)throw new Le(4001,!1);return r}findOrReturn(t,n){let i=0;for(let r of n){if(r.path===t.path)return n.splice(i),r;i++}return t}},rM={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function hhe(e,t,n,i,r){let o=pM(e,t,n);return o.matched?(i=Hde(t,i),che(i,t,n,r).pipe(ae(s=>s===!0?o:B({},rM)))):se(o)}function pM(e,t,n){if(t.path==="**")return fhe(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?B({},rM):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(t.matcher||ude)(n,e,t);if(!r)return B({},rM);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?B(B({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function fhe(e){return{matched:!0,parameters:e.length>0?Dz(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function Ez(e,t,n,i){return n.length>0&&mhe(e,n,i)?{segmentGroup:new Zt(t,ghe(i,new Zt(n,e.children))),slicedSegments:[]}:n.length===0&&vhe(e,n,i)?{segmentGroup:new Zt(e.segments,phe(e,n,i,e.children)),slicedSegments:n}:{segmentGroup:new Zt(e.segments,e.children),slicedSegments:n}}function phe(e,t,n,i){let r={};for(let o of n)if(c_(e,t,o)&&!i[Xa(o)]){let s=new Zt([],{});r[Xa(o)]=s}return B(B({},i),r)}function ghe(e,t){let n={};n[pt]=t;for(let i of e)if(i.path===""&&Xa(i)!==pt){let r=new Zt([],{});n[Xa(i)]=r}return n}function mhe(e,t,n){return n.some(i=>c_(e,t,i)&&Xa(i)!==pt)}function vhe(e,t,n){return n.some(i=>c_(e,t,i))}function c_(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function yhe(e,t,n,i){return Xa(e)!==i&&(i===pt||!c_(t,n,e))?!1:pM(t,e,n).matched}function Che(e,t,n){return t.length===0&&!e.children[n]}var oM=class{};function whe(e,t,n,i,r,o,s="emptyOnly"){return new sM(e,t,n,i,r,s,o).recognize()}var bhe=31,sM=class{constructor(t,n,i,r,o,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new iM(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new Le(4002,`'${t.segmentGroup}'`)}recognize(){let t=Ez(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(ae(n=>{let i=new H0([],Object.freeze({}),Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,{},pt,this.rootComponentType,null,{}),r=new Wo(i,n),o=new o_("",r),s=Ide(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,pt).pipe(Zs(i=>{if(i instanceof a_)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof U0?this.noMatchError(i):i}))}inheritParamsAndData(t,n){let i=t.value,r=cM(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),t.children.forEach(o=>this.inheritParamsAndData(o,i))}processSegmentGroup(t,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,n,i):this.processSegment(t,n,i,i.segments,r,!0).pipe(ae(o=>o instanceof Wo?[o]:[]))}processChildren(t,n,i){let r=[];for(let o of Object.keys(i.children))o==="primary"?r.unshift(o):r.push(o);return Ze(r).pipe(jc(o=>{let s=i.children[o],a=zde(n,o);return this.processSegmentGroup(t,a,s,o)}),Kc((o,s)=>(o.push(...s),o)),Wc(null),UR(),un(o=>{if(o===null)return Bp(i);let s=Yz(o);return She(s),se(s)}))}processSegment(t,n,i,r,o,s){return Ze(n).pipe(jc(a=>this.processSegmentAgainstRoute(a._injector??t,n,a,i,r,o,s).pipe(Zs(l=>{if(l instanceof U0)return se(null);throw l}))),ko(a=>!!a),Zs(a=>{if(qz(a))return Che(i,r,o)?se(new oM):Bp(i);throw a}))}processSegmentAgainstRoute(t,n,i,r,o,s,a){return yhe(i,r,o,s)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,n,i,o,s):Bp(r):Bp(r)}expandSegmentAgainstRouteUsingRedirect(t,n,i,r,o,s){let{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:u}=pM(n,r,o);if(!a)return Bp(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>bhe&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,c);return this.applyRedirects.lineralizeSegments(r,d).pipe(un(h=>this.processSegment(t,i,n,h.concat(u),s,!1)))}matchSegmentAgainstRoute(t,n,i,r,o){let s=hhe(n,i,r,t,this.urlSerializer);return i.path==="**"&&(n.children={}),s.pipe(Ne(a=>a.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(Ne(({routes:l})=>{let c=i._loadedInjector??t,{consumedSegments:u,remainingSegments:d,parameters:h}=a,p=new H0(u,h,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,Ehe(i),Xa(i),i.component??i._loadedComponent??null,i,xhe(i)),{segmentGroup:g,slicedSegments:m}=Ez(n,u,d,l);if(m.length===0&&g.hasChildren())return this.processChildren(c,l,g).pipe(ae(C=>C===null?null:new Wo(p,C)));if(l.length===0&&m.length===0)return se(new Wo(p,[]));let v=Xa(i)===o;return this.processSegment(c,l,g,m,v?pt:o,!0).pipe(ae(C=>new Wo(p,C instanceof Wo?[C]:[])))}))):Bp(n)))}getChildConfig(t,n,i){return n.children?se({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?se({routes:n._loadedRoutes,injector:n._loadedInjector}):lhe(t,n,i,this.urlSerializer).pipe(un(r=>r?this.configLoader.loadChildren(t,n).pipe(nn(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):dhe(n))):se({routes:[],injector:t})}};function She(e){e.sort((t,n)=>t.value.outlet===pt?-1:n.value.outlet===pt?1:t.value.outlet.localeCompare(n.value.outlet))}function _he(e){let t=e.value.routeConfig;return t&&t.path===""}function Yz(e){let t=[],n=new Set;for(let i of e){if(!_he(i)){t.push(i);continue}let r=t.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):t.push(i)}for(let i of n){let r=Yz(i.children);t.push(new Wo(i.value,r))}return t.filter(i=>!n.has(i))}function Ehe(e){return e.data||{}}function xhe(e){return e.resolve||{}}function Dhe(e,t,n,i,r,o){return un(s=>whe(e,t,n,i,s.extractedUrl,r,o).pipe(ae(({state:a,tree:l})=>pe(B({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function The(e,t){return un(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return se(n);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of Qz(l))s.add(c);let a=0;return Ze(s).pipe(jc(l=>o.has(l)?Rhe(l,i,e,t):(l.data=cM(l,l.parent,e).resolve,se(void 0))),nn(()=>a++),vp(1),un(l=>a===s.size?se(n):xi))})}function Qz(e){let t=e.children.map(n=>Qz(n)).flat();return[e,...t]}function Rhe(e,t,n,i){let r=e.routeConfig,o=e._resolve;return r?.title!==void 0&&!Hz(r)&&(o[j0]=r.title),Ihe(o,e,t,i).pipe(ae(s=>(e._resolvedData=s,e.data=cM(e,e.parent,n).resolve,null)))}function Ihe(e,t,n,i){let r=LA(e);if(r.length===0)return se({});let o={};return Ze(r).pipe(un(s=>Fhe(e[s],t,n,i).pipe(ko(),nn(a=>{o[s]=a}))),vp(1),$v(o),Zs(s=>qz(s)?xi:Gc(s)))}function Fhe(e,t,n,i){let r=q0(t)??i,o=Kp(e,r),s=o.resolve?o.resolve(t,n):eu(r,()=>o(t,n));return uu(s)}function OA(e){return Ne(t=>{let n=e(t);return n?Ze(n).pipe(ae(()=>t)):se(t)})}var Xz=(()=>{class e{buildTitle(n){let i,r=n.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===pt);return i}getResolvedTitleForRoute(n){return n.data[j0]}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:()=>Y(Ahe),providedIn:"root"})}}return e})(),Ahe=(()=>{class e extends Xz{constructor(n){super(),this.title=n}updateTitle(n){let i=this.buildTitle(n);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||e)($(K1))}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),gM=new ce("",{providedIn:"root",factory:()=>({})}),mM=new ce(""),Mhe=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Y(cA)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return se(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let i=uu(n.loadComponent()).pipe(ae($z),nn(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),Md(()=>{this.componentLoaders.delete(n)})),r=new Vc(i,()=>new nt).pipe(cp());return this.componentLoaders.set(n,r),r}loadChildren(n,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return se({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=Phe(i,this.compiler,n,this.onLoadEndListener).pipe(Md(()=>{this.childrenLoaders.delete(i)})),s=new Vc(o,()=>new nt).pipe(cp());return this.childrenLoaders.set(i,s),s}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Phe(e,t,n,i){return uu(e.loadChildren()).pipe(ae($z),un(r=>r instanceof f0||Array.isArray(r)?se(r):Ze(t.compileModuleAsync(r))),ae(r=>{i&&i(e);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(n).injector,s=o.get(mM,[],{optional:!0,self:!0}).flat()),{routes:s.map(fM),injector:o}}))}function khe(e){return e&&typeof e=="object"&&"default"in e}function $z(e){return khe(e)?e.default:e}var vM=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:()=>Y(Ohe),providedIn:"root"})}}return e})(),Ohe=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,i){return n}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Nhe=new ce("");var Lhe=(()=>{class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new nt,this.transitionAbortSubject=new nt,this.configLoader=Y(Mhe),this.environmentInjector=Y(Or),this.urlSerializer=Y(lM),this.rootContexts=Y(l_),this.location=Y(x0),this.inputBindingEnabled=Y(dM,{optional:!0})!==null,this.titleStrategy=Y(Xz),this.options=Y(gM,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Y(vM),this.createViewTransition=Y(Nhe,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>se(void 0),this.rootComponentType=null;let n=r=>this.events.next(new qA(r)),i=r=>this.events.next(new KA(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let i=++this.navigationId;this.transitions?.next(pe(B(B({},this.transitions.value),n),{id:i}))}setupNavigations(n,i,r){return this.transitions=new jt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:P0,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(xt(o=>o.id!==0),ae(o=>pe(B({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ne(o=>{let s=!1,a=!1;return se(o).pipe(Ne(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",qo.SupersededByNewNavigation),xi;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?pe(B({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=l.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!c&&u!=="reload"){let d="";return this.events.next(new eh(l.id,this.urlSerializer.serialize(l.rawUrl),d,HA.IgnoredSameUrlNavigation)),l.resolve(null),xi}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return se(l).pipe(Ne(d=>{let h=this.transitions?.getValue();return this.events.next(new N0(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?xi:Promise.resolve(d)}),Dhe(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),nn(d=>{o.targetSnapshot=d.targetSnapshot,o.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=pe(B({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let h=new n_(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:d,extractedUrl:h,source:p,restoredState:g,extras:m}=l,v=new N0(d,this.urlSerializer.serialize(h),p,g);this.events.next(v);let C=Bz(this.rootComponentType).snapshot;return this.currentTransition=o=pe(B({},l),{targetSnapshot:C,urlAfterRedirects:h,extras:pe(B({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,se(o)}else{let d="";return this.events.next(new eh(l.id,this.urlSerializer.serialize(l.extractedUrl),d,HA.IgnoredByUrlHandlingStrategy)),l.resolve(null),xi}}),nn(l=>{let c=new zA(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),ae(l=>(this.currentTransition=o=pe(B({},l),{guards:jde(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),ehe(this.environmentInjector,l=>this.events.next(l)),nn(l=>{if(o.guardsResult=l.guardsResult,jp(l.guardsResult))throw Uz(this.urlSerializer,l.guardsResult);let c=new UA(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),xt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",qo.GuardRejected),!1)),OA(l=>{if(l.guards.canActivateChecks.length)return se(l).pipe(nn(c=>{let u=new jA(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Ne(c=>{let u=!1;return se(c).pipe(The(this.paramsInheritanceStrategy,this.environmentInjector),nn({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",qo.NoDataFromResolver)}}))}),nn(c=>{let u=new WA(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),OA(l=>{let c=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(nn(h=>{u.component=h}),ae(()=>{})));for(let h of u.children)d.push(...c(h));return d};return Ar(c(l.targetSnapshot.root)).pipe(Wc(null),Dt(1))}),OA(()=>this.afterPreactivation()),Ne(()=>{let{currentSnapshot:l,targetSnapshot:c}=o,u=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return u?Ze(u).pipe(ae(()=>o)):se(o)}),ae(l=>{let c=Lde(n.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=pe(B({},l),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,o}),nn(()=>{this.events.next(new B0)}),Ude(this.rootContexts,n.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Dt(1),nn({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Jd(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),mn(this.transitionAbortSubject.pipe(nn(l=>{throw l}))),Md(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",qo.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Zs(l=>{if(a=!0,Wz(l))this.events.next(new cu(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),Gde(l)?this.events.next(new G0(l.url)):o.resolve(!1);else{this.events.next(new L0(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(n.errorHandler(l))}catch(c){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(c)}}return xi}))}))}cancelNavigationTransition(n,i,r){let o=new cu(n.id,this.urlSerializer.serialize(n.extractedUrl),i,r);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Vhe(e){return e!==P0}var Bhe=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:()=>Y(Ghe),providedIn:"root"})}}return e})(),aM=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},Ghe=(()=>{class e extends aM{static{this.\u0275fac=(()=>{let n;return function(r){return(n||(n=go(e)))(r||e)}})()}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Zz=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:()=>Y(Hhe),providedIn:"root"})}}return e})(),Hhe=(()=>{class e extends Zz{constructor(){super(...arguments),this.location=Y(x0),this.urlSerializer=Y(lM),this.options=Y(gM,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Y(vM),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new lu,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Bz(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(i=>{i.type==="popstate"&&n(i.url,i.state)})}handleRouterEvent(n,i){if(n instanceof N0)this.stateMemento=this.createStateMemento();else if(n instanceof eh)this.rawUrlTree=i.initialUrl;else if(n instanceof n_){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(r,i)}}else n instanceof B0?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):n instanceof cu&&(n.code===qo.GuardRejected||n.code===qo.NoDataFromResolver)?this.restoreHistory(i):n instanceof L0?this.restoreHistory(i,!0):n instanceof Jd&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,i){let r=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let o=this.browserPageId,s=B(B({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(r,"",s)}else{let o=B(B({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(n,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===n.finalUrl&&o===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,i){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:i}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(r){return(n||(n=go(e)))(r||e)}})()}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),A0=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(A0||{});function zhe(e,t){e.events.pipe(xt(n=>n instanceof Jd||n instanceof cu||n instanceof L0||n instanceof eh),ae(n=>n instanceof Jd||n instanceof eh?A0.COMPLETE:(n instanceof cu?n.code===qo.Redirect||n.code===qo.SupersededByNewNavigation:!1)?A0.REDIRECTING:A0.FAILED),xt(n=>n!==A0.REDIRECTING),Dt(1)).subscribe(()=>{t()})}function Uhe(e){throw e}var jhe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Whe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},pi=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=Y(_1),this.stateManager=Y(Zz),this.options=Y(gM,{optional:!0})||{},this.pendingTasks=Y(C0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Y(Lhe),this.urlSerializer=Y(lM),this.location=Y(x0),this.urlHandlingStrategy=Y(vM),this._events=new nt,this.errorHandler=this.options.errorHandler||Uhe,this.navigated=!1,this.routeReuseStrategy=Y(Bhe),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Y(mM,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Y(dM,{optional:!0}),this.eventsSubscription=new Ln,this.isNgZoneEnabled=Y(De)instanceof De&&De.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof cu&&i.code!==qo.Redirect&&i.code!==qo.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Jd)this.navigated=!0;else if(i instanceof G0){let s=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),a={info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Vhe(r.source)};this.scheduleNavigation(s,P0,null,a,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}Khe(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),P0,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",i)},0)})}navigateToSyncWithBrowser(n,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let l=B({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(n);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(fM),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:s,u=null;switch(a){case"merge":u=B(B({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=r?r.snapshot:this.routerState.snapshot.root;d=Oz(h)}catch{(typeof n[0]!="string"||!n[0].startsWith("/"))&&(n=[]),d=this.currentUrlTree.root}return Nz(d,n,u,c??null)}navigateByUrl(n,i={skipLocationChange:!1}){let r=jp(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,P0,null,i)}navigate(n,i={skipLocationChange:!1}){return qhe(n),this.navigateByUrl(this.createUrlTree(n,i),i)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,i){let r;if(i===!0?r=B({},jhe):i===!1?r=B({},Whe):r=i,jp(n))return wz(this.currentUrlTree,n,r);let o=this.parseUrl(n);return wz(this.currentUrlTree,o,r)}removeEmptyProps(n){return Object.entries(n).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(n,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((d,h)=>{a=d,l=h});let u=this.pendingTasks.add();return zhe(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function qhe(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new Le(4008,!1)}function Khe(e){return!(e instanceof B0)&&!(e instanceof G0)}var Yhe=new ce("");function Jz(e,...t){return hn([{provide:mM,multi:!0,useValue:e},[],{provide:Wp,useFactory:Qhe,deps:[pi]},{provide:Lp,multi:!0,useFactory:Xhe},t.map(n=>n.\u0275providers)])}function Qhe(e){return e.routerState.root}function Xhe(){let e=Y(bt);return t=>{let n=e.get(Uo);if(t!==n.components[0])return;let i=e.get(pi),r=e.get($he);e.get(Zhe)===1&&i.initialNavigation(),e.get(Jhe,null,wt.Optional)?.setUpPreloading(),e.get(Yhe,null,wt.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var $he=new ce("",{factory:()=>new nt}),Zhe=new ce("",{providedIn:"root",factory:()=>1});var Jhe=new ce("");var l7=(()=>{class e{constructor(n,i){this._renderer=n,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(n,i){this._renderer.setProperty(this._elementRef.nativeElement,n,i)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(i){return new(i||e)(J(Lr),J(In))}}static{this.\u0275dir=on({type:e})}}return e})(),C_=(()=>{class e extends l7{static{this.\u0275fac=(()=>{let n;return function(r){return(n||(n=go(e)))(r||e)}})()}static{this.\u0275dir=on({type:e,features:[mo]})}}return e})(),Yl=new ce("");var efe={provide:Yl,useExisting:Lo(()=>ys),multi:!0};function tfe(){let e=Wl()?Wl().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var nfe=new ce(""),ys=(()=>{class e extends l7{constructor(n,i,r){super(n,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!tfe())}writeValue(n){let i=n??"";this.setProperty("value",i)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(i){return new(i||e)(J(Lr),J(In),J(nfe,8))}}static{this.\u0275dir=on({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&be("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[Br([efe]),mo]})}}return e})();function hu(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}function c7(e){return e!=null&&typeof e.length=="number"}var X0=new ce(""),w_=new ce(""),ife=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,vs=class{static min(t){return rfe(t)}static max(t){return ofe(t)}static required(t){return sfe(t)}static requiredTrue(t){return afe(t)}static email(t){return lfe(t)}static minLength(t){return cfe(t)}static maxLength(t){return ufe(t)}static pattern(t){return dfe(t)}static nullValidator(t){return u7(t)}static compose(t){return m7(t)}static composeAsync(t){return y7(t)}};function rfe(e){return t=>{if(hu(t.value)||hu(e))return null;let n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}function ofe(e){return t=>{if(hu(t.value)||hu(e))return null;let n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}function sfe(e){return hu(e.value)?{required:!0}:null}function afe(e){return e.value===!0?null:{required:!0}}function lfe(e){return hu(e.value)||ife.test(e.value)?null:{email:!0}}function cfe(e){return t=>hu(t.value)||!c7(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}function ufe(e){return t=>c7(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}function dfe(e){if(!e)return u7;let t,n;return typeof e=="string"?(n="",e.charAt(0)!=="^"&&(n+="^"),n+=e,e.charAt(e.length-1)!=="$"&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),i=>{if(hu(i.value))return null;let r=i.value;return t.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}function u7(e){return null}function d7(e){return e!=null}function h7(e){return su(e)?Ze(e):e}function f7(e){let t={};return e.forEach(n=>{t=n!=null?B(B({},t),n):t}),Object.keys(t).length===0?null:t}function p7(e,t){return t.map(n=>n(e))}function hfe(e){return!e.validate}function g7(e){return e.map(t=>hfe(t)?t:n=>t.validate(n))}function m7(e){if(!e)return null;let t=e.filter(d7);return t.length==0?null:function(n){return f7(p7(n,t))}}function v7(e){return e!=null?m7(g7(e)):null}function y7(e){if(!e)return null;let t=e.filter(d7);return t.length==0?null:function(n){let i=p7(n,t).map(h7);return gp(i).pipe(ae(f7))}}function C7(e){return e!=null?y7(g7(e)):null}function e7(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function w7(e){return e._rawValidators}function b7(e){return e._rawAsyncValidators}function yM(e){return e?Array.isArray(e)?e:[e]:[]}function d_(e,t){return Array.isArray(e)?e.includes(t):e===t}function t7(e,t){let n=yM(t);return yM(e).forEach(r=>{d_(n,r)||n.push(r)}),n}function n7(e,t){return yM(t).filter(n=>!d_(e,n))}var h_=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=v7(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=C7(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},th=class extends h_{get formDirective(){return null}get path(){return null}},Kl=class extends h_{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},f_=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},ffe={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},vWe=pe(B({},ffe),{"[class.ng-submitted]":"isSubmitted"}),Cs=(()=>{class e extends f_{constructor(n){super(n)}static{this.\u0275fac=function(i){return new(i||e)(J(Kl,2))}}static{this.\u0275dir=on({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&vo("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[mo]})}}return e})(),Xp=(()=>{class e extends f_{constructor(n){super(n)}static{this.\u0275fac=function(i){return new(i||e)(J(th,10))}}static{this.\u0275dir=on({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,r){i&2&&vo("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[mo]})}}return e})();var Y0="VALID",u_="INVALID",Yp="PENDING",Q0="DISABLED";function bM(e){return(b_(e)?e.validators:e)||null}function pfe(e){return Array.isArray(e)?v7(e):e||null}function SM(e,t){return(b_(t)?t.asyncValidators:e)||null}function gfe(e){return Array.isArray(e)?C7(e):e||null}function b_(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function S7(e,t,n){let i=e.controls;if(!(t?Object.keys(i):i).length)throw new Le(1e3,"");if(!i[n])throw new Le(1001,"")}function _7(e,t,n){e._forEachChild((i,r)=>{if(n[r]===void 0)throw new Le(1002,"")})}var Qp=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Y0}get invalid(){return this.status===u_}get pending(){return this.status==Yp}get disabled(){return this.status===Q0}get enabled(){return this.status!==Q0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(t7(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(t7(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(n7(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(n7(t,this._rawAsyncValidators))}hasValidator(t){return d_(this._rawValidators,t)}hasAsyncValidator(t){return d_(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Yp,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Q0,this.errors=null,this._forEachChild(i=>{i.disable(pe(B({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(pe(B({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Y0,this._forEachChild(i=>{i.enable(pe(B({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(pe(B({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Y0||this.status===Yp)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Q0:Y0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Yp,this._hasOwnPendingAsyncValidator=!0;let n=h7(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(t,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Q,this.statusChanges=new Q}_calculateStatus(){return this._allControlsDisabled()?Q0:this.errors?u_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Yp)?Yp:this._anyControlsHaveStatus(u_)?u_:Y0}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){b_(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=pfe(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=gfe(this._rawAsyncValidators)}},p_=class extends Qp{constructor(t,n,i){super(bM(n),SM(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,i={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){_7(this,!0,t),Object.keys(t).forEach(i=>{S7(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,i)=>(t[i]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&t(i,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(t,n){let i=t;return this._forEachChild((r,o)=>{i=n(i,r,o)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var CM=class extends p_{};var $0=new ce("CallSetDisabledState",{providedIn:"root",factory:()=>S_}),S_="always";function E7(e,t){return[...t.path,e]}function g_(e,t,n=S_){_M(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),vfe(e,t),Cfe(e,t),yfe(e,t),mfe(e,t)}function m_(e,t,n=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),y_(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function v_(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function mfe(e,t){if(t.valueAccessor.setDisabledState){let n=i=>{t.valueAccessor.setDisabledState(i)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function _M(e,t){let n=w7(e);t.validator!==null?e.setValidators(e7(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let i=b7(e);t.asyncValidator!==null?e.setAsyncValidators(e7(i,t.asyncValidator)):typeof i=="function"&&e.setAsyncValidators([i]);let r=()=>e.updateValueAndValidity();v_(t._rawValidators,r),v_(t._rawAsyncValidators,r)}function y_(e,t){let n=!1;if(e!==null){if(t.validator!==null){let r=w7(e);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.validator);o.length!==r.length&&(n=!0,e.setValidators(o))}}if(t.asyncValidator!==null){let r=b7(e);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.asyncValidator);o.length!==r.length&&(n=!0,e.setAsyncValidators(o))}}}let i=()=>{};return v_(t._rawValidators,i),v_(t._rawAsyncValidators,i),n}function vfe(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&x7(e,t)})}function yfe(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&x7(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function x7(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Cfe(e,t){let n=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function wfe(e,t){e==null,_M(e,t)}function bfe(e,t){return y_(e,t)}function EM(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function Sfe(e){return Object.getPrototypeOf(e.constructor)===C_}function _fe(e,t){e._syncPendingControls(),t.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function xM(e,t){if(!t)return null;Array.isArray(t);let n,i,r;return t.forEach(o=>{o.constructor===ys?n=o:Sfe(o)?i=o:r=o}),r||i||n||null}function Efe(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function i7(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function r7(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var ql=class extends Qp{constructor(t=null,n,i){super(bM(n),SM(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),b_(n)&&(n.nonNullable||n.initialValueIsDefault)&&(r7(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){i7(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){i7(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){r7(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var xfe=e=>e instanceof ql;var Dfe={provide:Kl,useExisting:Lo(()=>DM)},o7=Promise.resolve(),DM=(()=>{class e extends Kl{constructor(n,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new ql,this._registered=!1,this.name="",this.update=new Q,this._parent=n,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=xM(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let i=n.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),EM(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){g_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){o7.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let i=n.isDisabled.currentValue,r=i!==0&&E1(i);o7.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?E7(n,this._parent):[n]}static{this.\u0275fac=function(i){return new(i||e)(J(th,9),J(X0,10),J(w_,10),J(Yl,10),J(Gr,8),J($0,8))}}static{this.\u0275dir=on({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Zn.None,"disabled","isDisabled"],model:[Zn.None,"ngModel","model"],options:[Zn.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Br([Dfe]),mo,Vn]})}}return e})(),$p=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275dir=on({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return e})(),Tfe={provide:Yl,useExisting:Lo(()=>TM),multi:!0},TM=(()=>{class e extends C_{writeValue(n){let i=n??"";this.setProperty("value",i)}registerOnChange(n){this.onChange=i=>{n(i==""?null:parseFloat(i))}}static{this.\u0275fac=(()=>{let n;return function(r){return(n||(n=go(e)))(r||e)}})()}static{this.\u0275dir=on({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,r){i&1&&be("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},features:[Br([Tfe]),mo]})}}return e})();var RM=new ce(""),Rfe={provide:Kl,useExisting:Lo(()=>Z0)},Z0=(()=>{class e extends Kl{set isDisabled(n){}static{this._ngModelWarningSentOnce=!1}constructor(n,i,r,o,s){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=s,this.update=new Q,this._ngModelWarningSent=!1,this._setValidators(n),this._setAsyncValidators(i),this.valueAccessor=xM(this,r)}ngOnChanges(n){if(this._isControlChanged(n)){let i=n.form.previousValue;i&&m_(i,this,!1),g_(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}EM(n,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&m_(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_isControlChanged(n){return n.hasOwnProperty("form")}static{this.\u0275fac=function(i){return new(i||e)(J(X0,10),J(w_,10),J(Yl,10),J(RM,8),J($0,8))}}static{this.\u0275dir=on({type:e,selectors:[["","formControl",""]],inputs:{form:[Zn.None,"formControl","form"],isDisabled:[Zn.None,"disabled","isDisabled"],model:[Zn.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[Br([Rfe]),mo,Vn]})}}return e})(),Ife={provide:th,useExisting:Lo(()=>nh)},nh=(()=>{class e extends th{constructor(n,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Q,this._setValidators(n),this._setAsyncValidators(i)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(y_(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){let i=this.form.get(n.path);return g_(i,n,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),i}getControl(n){return this.form.get(n.path)}removeControl(n){m_(n.control||null,n,!1),Efe(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,i){this.form.get(n.path).setValue(i)}onSubmit(n){return this.submitted=!0,_fe(this.form,this.directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_updateDomValue(){this.directives.forEach(n=>{let i=n.control,r=this.form.get(n.path);i!==r&&(m_(i||null,n),xfe(r)&&(g_(r,n,this.callSetDisabledState),n.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){let i=this.form.get(n.path);wfe(i,n),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){let i=this.form.get(n.path);i&&bfe(i,n)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){_M(this.form,this),this._oldForm&&y_(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(i){return new(i||e)(J(X0,10),J(w_,10),J($0,8))}}static{this.\u0275dir=on({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,r){i&1&&be("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[Zn.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Br([Ife]),mo,Vn]})}}return e})();var Ffe={provide:Kl,useExisting:Lo(()=>ih)},ih=(()=>{class e extends Kl{set isDisabled(n){}static{this._ngModelWarningSentOnce=!1}constructor(n,i,r,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new Q,this._ngModelWarningSent=!1,this._parent=n,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=xM(this,o)}ngOnChanges(n){this._added||this._setUpControl(),EM(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return E7(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(i){return new(i||e)(J(th,13),J(X0,10),J(w_,10),J(Yl,10),J(RM,8))}}static{this.\u0275dir=on({type:e,selectors:[["","formControlName",""]],inputs:{name:[Zn.None,"formControlName","name"],isDisabled:[Zn.None,"disabled","isDisabled"],model:[Zn.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Br([Ffe]),mo,Vn]})}}return e})(),Afe={provide:Yl,useExisting:Lo(()=>__),multi:!0};function D7(e,t){return e==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function Mfe(e){return e.split(":")[0]}var __=(()=>{class e extends C_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let i=this._getOptionId(n),r=D7(i,n);this.setProperty("value",r)}registerOnChange(n){this.onChange=i=>{this.value=this._getOptionValue(i),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),n))return i;return null}_getOptionValue(n){let i=Mfe(n);return this._optionMap.has(i)?this._optionMap.get(i):n}static{this.\u0275fac=(()=>{let n;return function(r){return(n||(n=go(e)))(r||e)}})()}static{this.\u0275dir=on({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&be("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Br([Afe]),mo]})}}return e})(),T7=(()=>{class e{constructor(n,i,r){this._element=n,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(D7(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||e)(J(In),J(Lr),J(__,9))}}static{this.\u0275dir=on({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return e})(),Pfe={provide:Yl,useExisting:Lo(()=>R7),multi:!0};function s7(e,t){return e==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${e}: ${t}`.slice(0,50))}function kfe(e){return e.split(":")[0]}var R7=(()=>{class e extends C_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let i;if(Array.isArray(n)){let r=n.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(n){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],c=this._getOptionValue(l.value);r.push(c)}}else{let s=i.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,n(r)}}_registerOption(n){let i=(this._idCounter++).toString();return this._optionMap.set(i,n),i}_getOptionId(n){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,n))return i;return null}_getOptionValue(n){let i=kfe(n);return this._optionMap.has(i)?this._optionMap.get(i)._value:n}static{this.\u0275fac=(()=>{let n;return function(r){return(n||(n=go(e)))(r||e)}})()}static{this.\u0275dir=on({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&be("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Br([Pfe]),mo]})}}return e})(),I7=(()=>{class e{constructor(n,i,r){this._element=n,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(s7(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(s7(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||e)(J(In),J(Lr),J(R7,9))}}static{this.\u0275dir=on({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return e})();var F7=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=Zi({type:e})}static{this.\u0275inj=$i({})}}return e})(),wM=class extends Qp{constructor(t,n,i){super(bM(n),SM(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,n={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(t,n,i={}){this.controls.splice(t,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,n={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(t,n,i={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),n&&(this.controls.splice(r,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,n={}){_7(this,!1,t),t.forEach((i,r)=>{S7(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t=[],n={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((n,i)=>i._syncPendingControls()?!0:n,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((n,i)=>{t(n,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(n=>n.enabled&&t(n))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function a7(e){return!!e&&(e.asyncValidators!==void 0||e.validators!==void 0||e.updateOn!==void 0)}var Zp=(()=>{class e{constructor(){this.useNonNullable=!1}get nonNullable(){let n=new e;return n.useNonNullable=!0,n}group(n,i=null){let r=this._reduceControls(n),o={};return a7(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new p_(r,o)}record(n,i=null){let r=this._reduceControls(n);return new CM(r,i)}control(n,i,r){let o={};return this.useNonNullable?(a7(i)?o=i:(o.validators=i,o.asyncValidators=r),new ql(n,pe(B({},o),{nonNullable:!0}))):new ql(n,i,r)}array(n,i,r){let o=n.map(s=>this._createControl(s));return new wM(o,i,r)}_reduceControls(n){let i={};return Object.keys(n).forEach(r=>{i[r]=this._createControl(n[r])}),i}_createControl(n){if(n instanceof ql)return n;if(n instanceof Qp)return n;if(Array.isArray(n)){let i=n[0],r=n.length>1?n[1]:null,o=n.length>2?n[2]:null;return this.control(i,r,o)}else return this.control(n)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var A7=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:$0,useValue:n.callSetDisabledState??S_}]}}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=Zi({type:e})}static{this.\u0275inj=$i({imports:[F7]})}}return e})(),$a=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:RM,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:$0,useValue:n.callSetDisabledState??S_}]}}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=Zi({type:e})}static{this.\u0275inj=$i({imports:[F7]})}}return e})();function Ofe(e,t){if(e&1&&(Ho(0),qd(),z(1,"svg",1),he(2,"path",2),H(),zo()),e&2){let n=t.$implicit;Z(),Qd("top",n.top)("left",n.left)("width",n.size)("height",n.size)("opacity",n.opacity)}}var E_=(()=>{class e{constructor(){this.dollarSigns=5,this.minSize=50,this.maxSize=80,this.minOpacity=.05,this.maxOpacity=.15,this.random=!1,this.dollarSignArray=[{top:"70%",left:"25%",size:"200px",opacity:.1},{top:"20%",left:"75%",size:"150px",opacity:.05},{top:"25%",left:"50%",size:"70px",opacity:.15},{top:"60%",left:"40%",size:"80px",opacity:.1}]}ngOnInit(){this.random&&this.generateDollarSigns()}generateDollarSigns(){this.dollarSignArray=Array(this.dollarSigns).fill(null).map(()=>({top:`${this.getRandomNumber(10,90)}%`,left:`${this.getRandomNumber(10,90)}%`,size:`${this.getRandomNumber(this.minSize,this.maxSize)}px`,opacity:this.getRandomNumber(this.minOpacity,this.maxOpacity)}))}getRandomNumber(n,i){return Math.random()*(i-n)+n}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=je({type:e,selectors:[["app-dollar-sign-svgs"]],inputs:{dollarSigns:"dollarSigns",minSize:"minSize",maxSize:"maxSize",minOpacity:"minOpacity",maxOpacity:"maxOpacity",random:"random"},standalone:!0,features:[We],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["viewBox","0 0 24 24",1,"position-absolute","dollar-sign","z-0"],["fill","#fd7e14","d","M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M11,17H13V16H14A1,1 0 0,0 15,15V12A1,1 0 0,0 14,11H11V10H15V8H13V7H11V8H10A1,1 0 0,0 9,9V12A1,1 0 0,0 10,13H13V14H9V16H11V17Z"]],template:function(i,r){i&1&&Fe(0,Ofe,3,10,"ng-container",0),i&2&&ue("ngForOf",r.dollarSignArray)},dependencies:[_n,gs],styles:[".dollar-sign[_ngcontent-%COMP%]{pointer-events:none}"]})}}return e})();function Nfe(e,t){e&1&&(Ho(0),qd(),z(1,"svg",1),he(2,"path",2),H(),zo())}function Lfe(e,t){e&1&&(Ho(0),qd(),z(1,"svg",3),he(2,"path",4),H(),zo())}var x_=(()=>{class e{constructor(){this.wave="top"}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=je({type:e,selectors:[["app-wave"]],inputs:{wave:"wave"},standalone:!0,features:[We],decls:2,vars:2,consts:[[4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320",1,"wave-top","z-0"],["fill","#ff9d00","fill-opacity","0.2","d","M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,165.3C1248,171,1344,149,1392,138.7L1440,128L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320",1,"wave-bottom"],["fill","#ff9d00","fill-opacity","0.2","d","M0,224L48,213.3C96,203,192,181,288,181.3C384,181,480,203,576,224C672,245,768,267,864,250.7C960,235,1056,181,1152,165.3C1248,149,1344,171,1392,181.3L1440,192L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"]],template:function(i,r){i&1&&Fe(0,Nfe,3,0,"ng-container",0)(1,Lfe,3,0,"ng-container",0),i&2&&(ue("ngIf",r.wave==="top"),Z(),ue("ngIf",r.wave==="bottom"))},dependencies:[_n,Gi],styles:[".wave-top[_ngcontent-%COMP%], .wave-bottom[_ngcontent-%COMP%]{position:absolute;width:100%}.wave-top[_ngcontent-%COMP%]{top:0}.wave-bottom[_ngcontent-%COMP%]{bottom:0}"]})}}return e})();var D_=(()=>{class e{constructor(){this.size=250}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=je({type:e,selectors:[["app-loader"]],inputs:{size:"size"},standalone:!0,features:[We],decls:4,vars:2,consts:[["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24"],["d","M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M11,17H13V16H14A1,1 0 0,0 15,15V12A1,1 0 0,0 14,11H11V10H15V8H13V7H11V8H10A1,1 0 0,0 9,9V12A1,1 0 0,0 10,13H13V14H9V16H11V17Z",1,"loader"]],template:function(i,r){i&1&&(qd(),z(0,"svg",0)(1,"style"),ye(2," @keyframes spin { 0% { transform: rotate(0deg) scale(1); } 25% { transform: rotate(90deg) scale(1.1); } 50% { transform: rotate(180deg) scale(1); } 75% { transform: rotate(270deg) scale(1.1); } 100% { transform: rotate(360deg) scale(1); } } .loader { animation: spin 2s linear infinite; transform-origin: center; fill: #fd7e14; stroke: #000000; stroke-width: 0.5; } "),H(),he(3,"path",1),H()),i&2&&zl("width",r.size)("height",r.size)},styles:["svg[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}"]})}}return e})();var Vfe="firebase",Bfe="10.14.1";Qe(Vfe,Bfe,"app");var Fn=new Gl("ANGULARFIRE2_VERSION"),tg=e=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${e} in the constructor, first ensure that ${e} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${e})\`.`;function mr(e,t,n){if(t){if(t.length===1)return t[0];let o=t.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(e).getImmediate({optional:!0})}var ir=(e,t)=>{let n=t?[t]:Lb(),i=[];return n.forEach(r=>{r.container.getProvider(e).instances.forEach(s=>{i.includes(s)||i.push(s)})}),i},Ti=class{constructor(){return ir(Gfe)}},Gfe="app-check";function eg(){}var T_=class{zone;delegate;constructor(t,n=LR){this.zone=t,this.delegate=n}now(){return this.delegate.now()}schedule(t,n,i){let r=this.zone,o=function(s){r.runGuarded(()=>{t.apply(this,[s])})};return this.delegate.schedule(o,n,i)}},IM=class{zone;task=null;constructor(t){this.zone=t}call(t,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",eg,{},eg,eg)),n.pipe(nn({next:i,complete:i,error:i})).subscribe(t).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},An=(()=>{class e{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new T_(Zone.current)),this.insideAngular=n.run(()=>new T_(Zone.current,co)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||e)($(De))};static \u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function J0(){let e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return e}function Hfe(e){return J0().ngZone.runOutsideAngular(()=>e())}function rh(e){return J0().ngZone.run(()=>e())}function FM(e){return e.pipe(ho(J0().outsideAngular))}function Hi(e){return zfe(J0())(e)}function zfe(e){return function(n){return n=n.lift(new IM(e.ngZone)),n.pipe(us(e.outsideAngular),ho(e.insideAngular))}}var Ufe=(e,t)=>function(){let i=arguments;return t&&setTimeout(()=>{t.state==="scheduled"&&t.invoke()},10),rh(()=>e.apply(void 0,i))},It=(e,t)=>function(){let n,i=arguments;for(let o=0;o<arguments.length;o++)typeof i[o]=="function"&&(t&&(n||=rh(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",eg,{},eg,eg))),i[o]=Ufe(i[o],n));let r=Hfe(()=>e.apply(this,i));if(!t)if(r instanceof ge){let o=J0();return r.pipe(us(o.outsideAngular),ho(o.insideAngular))}else return rh(()=>r);return r instanceof ge?r.pipe(Hi):r instanceof Promise?rh(()=>new Promise((o,s)=>r.then(a=>rh(()=>o(a)),a=>rh(()=>s(a))))):typeof r=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),r.apply(this,arguments)}:rh(()=>r)};var ti=class{constructor(t){return t}},Ri=class{constructor(){return Lb()}};function jfe(e){return e&&e.length===1?e[0]:new ti(Vi())}var MM=new ce("angularfire2._apps"),Wfe={provide:ti,useFactory:jfe,deps:[[new gt,MM]]},qfe={provide:Ri,deps:[[new gt,MM]]};function Kfe(e){return(t,n)=>{let i=n.get(Sn);Qe("angularfire",Fn.full,"core"),Qe("angularfire",Fn.full,"app"),Qe("angular",sA.full,i.toString());let r=t.runOutsideAngular(()=>e(n));return new ti(r)}}function M7(e,...t){return hn([Wfe,qfe,{provide:MM,useFactory:Kfe(e),multi:!0,deps:[De,bt,An,...t]}])}var P7=It(N4,!0);function O7(e){return new ge(function(t){var n=Bb(e,t.next.bind(t),t.error.bind(t),t.complete.bind(t));return{unsubscribe:n}})}function N7(e){return new ge(function(t){var n=Vb(e,t.next.bind(t),t.error.bind(t),t.complete.bind(t));return{unsubscribe:n}})}var L7="auth",Ko=class{constructor(t){return t}},la=class{constructor(){return ir(L7)}};var PM=new ce("angularfire2.auth-instances");function Hpe(e,t){let n=mr(L7,e,t);return n&&new Ko(n)}function zpe(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new Ko(i)}}var Upe={provide:la,deps:[[new gt,PM]]},jpe={provide:Ko,useFactory:Hpe,deps:[[new gt,PM],ti]};function V7(e,...t){return Qe("angularfire",Fn.full,"auth"),hn([jpe,Upe,{provide:PM,useFactory:zpe(e),multi:!0,deps:[De,bt,An,Ri,[new gt,Ti],...t]}])}var ng=It(O7,!0),B7=It(N7,!0);var G7=It(wR,!0);var H7=It(_R,!0);var z7=It(bR,!0);var U7=It(SR,!0);var Wpe=new Map,qpe={activated:!1,tokenObservers:[]},Kpe={initialized:!1,enabled:!1};function ca(e){return Wpe.get(e)||Object.assign({},qpe)}function Y7(){return Kpe}var Ype="https://content-firebaseappcheck.googleapis.com/v1";var Qpe="exchangeDebugToken",j7={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},W9e=24*60*60*1e3;var NM=class{constructor(t,n,i,r,o){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return N(this,null,function*(){this.stop();try{this.pending=new np,this.pending.promise.catch(n=>{}),yield Xpe(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new np,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function Xpe(e){return new Promise(t=>{setTimeout(t,e)})}var $pe={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},fu=new Oa("appCheck","AppCheck",$pe);function Q7(e){if(!ca(e).activated)throw fu.create("use-before-activation",{appName:e.name})}function X7(i,r){return N(this,arguments,function*({url:e,body:t},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let p=yield s.getHeartbeatsHeader();p&&(o["X-Firebase-Client"]=p)}let a={method:"POST",body:JSON.stringify(t),headers:o},l;try{l=yield fetch(e,a)}catch(p){throw fu.create("fetch-network-error",{originalErrorMessage:p?.message})}if(l.status!==200)throw fu.create("fetch-status-error",{httpStatus:l.status});let c;try{c=yield l.json()}catch(p){throw fu.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=c.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw fu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let d=Number(u[1])*1e3,h=Date.now();return{token:c.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function $7(e,t){let{projectId:n,appId:i,apiKey:r}=e.options;return{url:`${Ype}/projects/${n}/apps/${i}:${Qpe}?key=${r}`,body:{debug_token:t}}}var Zpe="firebase-app-check-database",Jpe=1,LM="firebase-app-check-store";var R_=null;function ege(){return R_||(R_=new Promise((e,t)=>{try{let n=indexedDB.open(Zpe,Jpe);n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{var r;t(fu.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(LM,{keyPath:"compositeKey"})}}}catch(n){t(fu.create("storage-open",{originalErrorMessage:n?.message}))}}),R_)}function tge(e,t){return nge(ige(e),t)}function nge(e,t){return N(this,null,function*(){let i=(yield ege()).transaction(LM,"readwrite"),o=i.objectStore(LM).put({compositeKey:e,value:t});return new Promise((s,a)=>{o.onsuccess=l=>{s()},i.onerror=l=>{var c;a(fu.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})})}function ige(e){return`${e.options.appId}-${e.name}`}var VM=new La("@firebase/app-check");function OM(e,t){return cs()?tge(e,t).catch(n=>{VM.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function Z7(){return Y7().enabled}function J7(){return N(this,null,function*(){let e=Y7();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var rge={error:"UNKNOWN_ERROR"};function oge(e){return kb.encodeString(JSON.stringify(e),!1)}function BM(e,t=!1){return N(this,null,function*(){let n=e.app;Q7(n);let i=ca(n),r=i.token,o;if(r&&!ey(r)&&(i.token=void 0,r=void 0),!r){let l=yield i.cachedTokenPromise;l&&(ey(l)?r=l:yield OM(n,void 0))}if(!t&&r&&ey(r))return{token:r.token};let s=!1;if(Z7()){i.exchangeTokenPromise||(i.exchangeTokenPromise=X7($7(n,yield J7()),e.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),s=!0);let l=yield i.exchangeTokenPromise;return yield OM(n,l),i.token=l,{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),s=!0),r=yield ca(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?VM.warn(l.message):VM.error(l),o=l}let a;return r?o?ey(r)?a={token:r.token,internalError:o}:a=q7(o):(a={token:r.token},i.token=r,yield OM(n,r)):a=q7(o),s&&cge(n,a),a})}function sge(e){return N(this,null,function*(){let t=e.app;Q7(t);let{provider:n}=ca(t);if(Z7()){let i=yield J7(),{token:r}=yield X7($7(t,i),e.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield n.getToken();return{token:i}}})}function age(e,t,n,i){let{app:r}=e,o=ca(r),s={next:n,error:i,type:t};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&ey(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),W7(e)}).catch(()=>{})}o.cachedTokenPromise.then(()=>W7(e))}function eU(e,t){let n=ca(e),i=n.tokenObservers.filter(r=>r.next!==t);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function W7(e){let{app:t}=e,n=ca(t),i=n.tokenRefresher;i||(i=lge(e),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function lge(e){let{app:t}=e;return new NM(()=>N(this,null,function*(){let n=ca(t),i;if(n.token?i=yield BM(e,!0):i=yield BM(e),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=ca(t);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},j7.RETRIAL_MIN_WAIT,j7.RETRIAL_MAX_WAIT)}function cge(e,t){let n=ca(e).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&t.error!=null?i.error(t.error):i.next(t)}catch{}}function ey(e){return e.expireTimeMillis-Date.now()>0}function q7(e){return{token:oge(rge),error:e}}var GM=class{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:t}=ca(this.app);for(let n of t)eU(this.app,n.next);return Promise.resolve()}};function uge(e,t){return new GM(e,t)}function dge(e){return{getToken:t=>BM(e,t),getLimitedUseToken:()=>sge(e),addTokenListener:t=>age(e,"INTERNAL",t),removeTokenListener:t=>eU(e.app,t)}}var hge="@firebase/app-check",fge="0.8.8";var pge="app-check",K7="app-check-internal";function gge(){jn(new gn(pge,e=>{let t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return uge(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(K7).initialize()})),jn(new gn(K7,e=>{let t=e.getProvider("app-check").getImmediate();return dge(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Qe(hge,fge)}gge();var mge=["localhost","0.0.0.0","127.0.0.1"],iqe=typeof window<"u"&&mge.includes(window.location.hostname);var vge="firebase",yge="10.14.1";Po.registerVersion(vge,yge,"app-compat");var Cge=["ngOnDestroy"],nU=(e,t,n,i={})=>new Proxy(e,{get:(r,o)=>n.runOutsideAngular(()=>{if(e[o])return i?.spy?.get&&i.spy.get(o,e[o]),e[o];if(Cge.indexOf(o)>-1)return()=>{};let s=t.toPromise().then(a=>{let l=a?.[o];return typeof l=="function"?l.bind(a):l?.then?l.then(c=>n.run(()=>c)):n.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>s[l],apply:(a,l,c)=>s.then(u=>{let d=u?.(...c);return i?.spy?.apply&&i.spy.apply(o,c,d),d})})})});var zM=class{constructor(t){return t}},pu=new ce("angularfire2.app.options"),ig=new ce("angularfire2.app.name");function rg(e,t,n){let i=typeof n=="string"&&n||"[DEFAULT]",r=typeof n=="object"&&n||{};r.name=r.name||i;let s=Po.apps.filter(a=>a&&a.name===r.name)[0]||t.runOutsideAngular(()=>Po.initializeApp(e,r));try{if(JSON.stringify(e)!==JSON.stringify(s.options)){let a=!!module.hot;wge("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new zM(s)}var wge=(e,...t)=>{E0()&&typeof console<"u"&&console[e](...t)};function og(e,t,n,i,r){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===e)||[];if(o)return bge(r,s)||(tU("error",`${t} was already initialized on the ${n} Firebase App with different settings.${Sge?" You may need to reload as Firebase is not HMR aware.":""}`),tU("warn",{is:r,was:s})),o;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([e,a,r]),a}}function bge(e,t){try{return e.toString()===t.toString()}catch{return e===t}}var Sge=typeof module<"u"&&!!module.hot,tU=(e,...t)=>{E0()&&typeof console<"u"&&console[e](...t)};globalThis.\u0275AngularfireInstanceCache||=[];var UM=new ce("angularfire2.auth.use-emulator"),jM=new ce("angularfire2.auth.settings"),WM=new ce("angularfire2.auth.tenant-id"),qM=new ce("angularfire2.auth.langugage-code"),KM=new ce("angularfire2.auth.use-device-language"),YM=new ce("angularfire.auth.persistence"),QM=(e,t,n,i,r,o,s,a)=>og(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{let l=t.runOutsideAngular(()=>e.auth());if(n&&l.useEmulator(...n),i&&(l.tenantId=i),l.languageCode=r,o&&l.useDeviceLanguage(),s)for(let[c,u]of Object.entries(s))l.settings[c]=u;return a&&l.setPersistence(a),l},[n,i,r,o,s,a]),Za=(()=>{class e{authState;idToken;user;idTokenResult;credential;constructor(n,i,r,o,s,a,l,c,u,d,h,p){let g=new nt,m=se(void 0).pipe(ho(s.outsideAngular),Ne(()=>o.runOutsideAngular(()=>import("./chunk-EMRAK4B5.js"))),ae(()=>rg(n,o,i)),ae(v=>QM(v,o,a,c,u,d,l,h)),Pd({bufferSize:1,refCount:!1}));if(sa(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=se(null);else{m.pipe(ko()).subscribe();let v=m.pipe(Ne(_=>_.getRedirectResult().then(D=>D,()=>null)),Hi,Pd({bufferSize:1,refCount:!1})),C=m.pipe(Ne(_=>new ge(D=>({unsubscribe:o.runOutsideAngular(()=>_.onAuthStateChanged(F=>D.next(F),F=>D.error(F),()=>D.complete()))})))),S=m.pipe(Ne(_=>new ge(D=>({unsubscribe:o.runOutsideAngular(()=>_.onIdTokenChanged(F=>D.next(F),F=>D.error(F),()=>D.complete()))}))));this.authState=v.pipe(hS(C),us(s.outsideAngular),ho(s.insideAngular)),this.user=v.pipe(hS(S),us(s.outsideAngular),ho(s.insideAngular)),this.idToken=this.user.pipe(Ne(_=>_?Ze(_.getIdToken()):se(null))),this.idTokenResult=this.user.pipe(Ne(_=>_?Ze(_.getIdTokenResult()):se(null))),this.credential=zc(v,g,this.authState.pipe(xt(_=>!_))).pipe(ae(_=>_?.user?_:null),us(s.outsideAngular),ho(s.insideAngular))}return nU(this,m,o,{spy:{apply:(v,C,S)=>{(v.startsWith("signIn")||v.startsWith("createUser"))&&S.then(_=>g.next(_))}}})}static \u0275fac=function(i){return new(i||e)($(pu),$(ig,8),$(Sn),$(De),$(An),$(UM,8),$(jM,8),$(WM,8),$(qM,8),$(KM,8),$(YM,8),$(Ti,8))};static \u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})();var iU=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rU={};var gu,XM;(function(){var e;function t(E,b){function x(){}x.prototype=b.prototype,E.D=b.prototype,E.prototype=new x,E.prototype.constructor=E,E.C=function(k,A,O){for(var P=Array(arguments.length-2),le=2;le<arguments.length;le++)P[le-2]=arguments[le];return b.prototype[A].apply(k,P)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,b,x){x||(x=0);var k=Array(16);if(typeof b=="string")for(var A=0;16>A;++A)k[A]=b.charCodeAt(x++)|b.charCodeAt(x++)<<8|b.charCodeAt(x++)<<16|b.charCodeAt(x++)<<24;else for(A=0;16>A;++A)k[A]=b[x++]|b[x++]<<8|b[x++]<<16|b[x++]<<24;b=E.g[0],x=E.g[1],A=E.g[2];var O=E.g[3],P=b+(O^x&(A^O))+k[0]+3614090360&4294967295;b=x+(P<<7&4294967295|P>>>25),P=O+(A^b&(x^A))+k[1]+3905402710&4294967295,O=b+(P<<12&4294967295|P>>>20),P=A+(x^O&(b^x))+k[2]+606105819&4294967295,A=O+(P<<17&4294967295|P>>>15),P=x+(b^A&(O^b))+k[3]+3250441966&4294967295,x=A+(P<<22&4294967295|P>>>10),P=b+(O^x&(A^O))+k[4]+4118548399&4294967295,b=x+(P<<7&4294967295|P>>>25),P=O+(A^b&(x^A))+k[5]+1200080426&4294967295,O=b+(P<<12&4294967295|P>>>20),P=A+(x^O&(b^x))+k[6]+2821735955&4294967295,A=O+(P<<17&4294967295|P>>>15),P=x+(b^A&(O^b))+k[7]+4249261313&4294967295,x=A+(P<<22&4294967295|P>>>10),P=b+(O^x&(A^O))+k[8]+1770035416&4294967295,b=x+(P<<7&4294967295|P>>>25),P=O+(A^b&(x^A))+k[9]+2336552879&4294967295,O=b+(P<<12&4294967295|P>>>20),P=A+(x^O&(b^x))+k[10]+4294925233&4294967295,A=O+(P<<17&4294967295|P>>>15),P=x+(b^A&(O^b))+k[11]+2304563134&4294967295,x=A+(P<<22&4294967295|P>>>10),P=b+(O^x&(A^O))+k[12]+1804603682&4294967295,b=x+(P<<7&4294967295|P>>>25),P=O+(A^b&(x^A))+k[13]+4254626195&4294967295,O=b+(P<<12&4294967295|P>>>20),P=A+(x^O&(b^x))+k[14]+2792965006&4294967295,A=O+(P<<17&4294967295|P>>>15),P=x+(b^A&(O^b))+k[15]+1236535329&4294967295,x=A+(P<<22&4294967295|P>>>10),P=b+(A^O&(x^A))+k[1]+4129170786&4294967295,b=x+(P<<5&4294967295|P>>>27),P=O+(x^A&(b^x))+k[6]+3225465664&4294967295,O=b+(P<<9&4294967295|P>>>23),P=A+(b^x&(O^b))+k[11]+643717713&4294967295,A=O+(P<<14&4294967295|P>>>18),P=x+(O^b&(A^O))+k[0]+3921069994&4294967295,x=A+(P<<20&4294967295|P>>>12),P=b+(A^O&(x^A))+k[5]+3593408605&4294967295,b=x+(P<<5&4294967295|P>>>27),P=O+(x^A&(b^x))+k[10]+38016083&4294967295,O=b+(P<<9&4294967295|P>>>23),P=A+(b^x&(O^b))+k[15]+3634488961&4294967295,A=O+(P<<14&4294967295|P>>>18),P=x+(O^b&(A^O))+k[4]+3889429448&4294967295,x=A+(P<<20&4294967295|P>>>12),P=b+(A^O&(x^A))+k[9]+568446438&4294967295,b=x+(P<<5&4294967295|P>>>27),P=O+(x^A&(b^x))+k[14]+3275163606&4294967295,O=b+(P<<9&4294967295|P>>>23),P=A+(b^x&(O^b))+k[3]+4107603335&4294967295,A=O+(P<<14&4294967295|P>>>18),P=x+(O^b&(A^O))+k[8]+1163531501&4294967295,x=A+(P<<20&4294967295|P>>>12),P=b+(A^O&(x^A))+k[13]+2850285829&4294967295,b=x+(P<<5&4294967295|P>>>27),P=O+(x^A&(b^x))+k[2]+4243563512&4294967295,O=b+(P<<9&4294967295|P>>>23),P=A+(b^x&(O^b))+k[7]+1735328473&4294967295,A=O+(P<<14&4294967295|P>>>18),P=x+(O^b&(A^O))+k[12]+2368359562&4294967295,x=A+(P<<20&4294967295|P>>>12),P=b+(x^A^O)+k[5]+4294588738&4294967295,b=x+(P<<4&4294967295|P>>>28),P=O+(b^x^A)+k[8]+2272392833&4294967295,O=b+(P<<11&4294967295|P>>>21),P=A+(O^b^x)+k[11]+1839030562&4294967295,A=O+(P<<16&4294967295|P>>>16),P=x+(A^O^b)+k[14]+4259657740&4294967295,x=A+(P<<23&4294967295|P>>>9),P=b+(x^A^O)+k[1]+2763975236&4294967295,b=x+(P<<4&4294967295|P>>>28),P=O+(b^x^A)+k[4]+1272893353&4294967295,O=b+(P<<11&4294967295|P>>>21),P=A+(O^b^x)+k[7]+4139469664&4294967295,A=O+(P<<16&4294967295|P>>>16),P=x+(A^O^b)+k[10]+3200236656&4294967295,x=A+(P<<23&4294967295|P>>>9),P=b+(x^A^O)+k[13]+681279174&4294967295,b=x+(P<<4&4294967295|P>>>28),P=O+(b^x^A)+k[0]+3936430074&4294967295,O=b+(P<<11&4294967295|P>>>21),P=A+(O^b^x)+k[3]+3572445317&4294967295,A=O+(P<<16&4294967295|P>>>16),P=x+(A^O^b)+k[6]+76029189&4294967295,x=A+(P<<23&4294967295|P>>>9),P=b+(x^A^O)+k[9]+3654602809&4294967295,b=x+(P<<4&4294967295|P>>>28),P=O+(b^x^A)+k[12]+3873151461&4294967295,O=b+(P<<11&4294967295|P>>>21),P=A+(O^b^x)+k[15]+530742520&4294967295,A=O+(P<<16&4294967295|P>>>16),P=x+(A^O^b)+k[2]+3299628645&4294967295,x=A+(P<<23&4294967295|P>>>9),P=b+(A^(x|~O))+k[0]+4096336452&4294967295,b=x+(P<<6&4294967295|P>>>26),P=O+(x^(b|~A))+k[7]+1126891415&4294967295,O=b+(P<<10&4294967295|P>>>22),P=A+(b^(O|~x))+k[14]+2878612391&4294967295,A=O+(P<<15&4294967295|P>>>17),P=x+(O^(A|~b))+k[5]+4237533241&4294967295,x=A+(P<<21&4294967295|P>>>11),P=b+(A^(x|~O))+k[12]+1700485571&4294967295,b=x+(P<<6&4294967295|P>>>26),P=O+(x^(b|~A))+k[3]+2399980690&4294967295,O=b+(P<<10&4294967295|P>>>22),P=A+(b^(O|~x))+k[10]+4293915773&4294967295,A=O+(P<<15&4294967295|P>>>17),P=x+(O^(A|~b))+k[1]+2240044497&4294967295,x=A+(P<<21&4294967295|P>>>11),P=b+(A^(x|~O))+k[8]+1873313359&4294967295,b=x+(P<<6&4294967295|P>>>26),P=O+(x^(b|~A))+k[15]+4264355552&4294967295,O=b+(P<<10&4294967295|P>>>22),P=A+(b^(O|~x))+k[6]+2734768916&4294967295,A=O+(P<<15&4294967295|P>>>17),P=x+(O^(A|~b))+k[13]+1309151649&4294967295,x=A+(P<<21&4294967295|P>>>11),P=b+(A^(x|~O))+k[4]+4149444226&4294967295,b=x+(P<<6&4294967295|P>>>26),P=O+(x^(b|~A))+k[11]+3174756917&4294967295,O=b+(P<<10&4294967295|P>>>22),P=A+(b^(O|~x))+k[2]+718787259&4294967295,A=O+(P<<15&4294967295|P>>>17),P=x+(O^(A|~b))+k[9]+3951481745&4294967295,E.g[0]=E.g[0]+b&4294967295,E.g[1]=E.g[1]+(A+(P<<21&4294967295|P>>>11))&4294967295,E.g[2]=E.g[2]+A&4294967295,E.g[3]=E.g[3]+O&4294967295}i.prototype.u=function(E,b){b===void 0&&(b=E.length);for(var x=b-this.blockSize,k=this.B,A=this.h,O=0;O<b;){if(A==0)for(;O<=x;)r(this,E,O),O+=this.blockSize;if(typeof E=="string"){for(;O<b;)if(k[A++]=E.charCodeAt(O++),A==this.blockSize){r(this,k),A=0;break}}else for(;O<b;)if(k[A++]=E[O++],A==this.blockSize){r(this,k),A=0;break}}this.h=A,this.o+=b},i.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var b=1;b<E.length-8;++b)E[b]=0;var x=8*this.o;for(b=E.length-8;b<E.length;++b)E[b]=x&255,x/=256;for(this.u(E),E=Array(16),b=x=0;4>b;++b)for(var k=0;32>k;k+=8)E[x++]=this.g[b]>>>k&255;return E};function o(E,b){var x=a;return Object.prototype.hasOwnProperty.call(x,E)?x[E]:x[E]=b(E)}function s(E,b){this.h=b;for(var x=[],k=!0,A=E.length-1;0<=A;A--){var O=E[A]|0;k&&O==b||(x[A]=O,k=!1)}this.g=x}var a={};function l(E){return-128<=E&&128>E?o(E,function(b){return new s([b|0],0>b?-1:0)}):new s([E|0],0>E?-1:0)}function c(E){if(isNaN(E)||!isFinite(E))return d;if(0>E)return v(c(-E));for(var b=[],x=1,k=0;E>=x;k++)b[k]=E/x|0,x*=4294967296;return new s(b,0)}function u(E,b){if(E.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(E.charAt(0)=="-")return v(u(E.substring(1),b));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=c(Math.pow(b,8)),k=d,A=0;A<E.length;A+=8){var O=Math.min(8,E.length-A),P=parseInt(E.substring(A,A+O),b);8>O?(O=c(Math.pow(b,O)),k=k.j(O).add(c(P))):(k=k.j(x),k=k.add(c(P)))}return k}var d=l(0),h=l(1),p=l(16777216);e=s.prototype,e.m=function(){if(m(this))return-v(this).m();for(var E=0,b=1,x=0;x<this.g.length;x++){var k=this.i(x);E+=(0<=k?k:4294967296+k)*b,b*=4294967296}return E},e.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(g(this))return"0";if(m(this))return"-"+v(this).toString(E);for(var b=c(Math.pow(E,6)),x=this,k="";;){var A=D(x,b).g;x=C(x,A.j(b));var O=((0<x.g.length?x.g[0]:x.h)>>>0).toString(E);if(x=A,g(x))return O+k;for(;6>O.length;)O="0"+O;k=O+k}},e.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function g(E){if(E.h!=0)return!1;for(var b=0;b<E.g.length;b++)if(E.g[b]!=0)return!1;return!0}function m(E){return E.h==-1}e.l=function(E){return E=C(this,E),m(E)?-1:g(E)?0:1};function v(E){for(var b=E.g.length,x=[],k=0;k<b;k++)x[k]=~E.g[k];return new s(x,~E.h).add(h)}e.abs=function(){return m(this)?v(this):this},e.add=function(E){for(var b=Math.max(this.g.length,E.g.length),x=[],k=0,A=0;A<=b;A++){var O=k+(this.i(A)&65535)+(E.i(A)&65535),P=(O>>>16)+(this.i(A)>>>16)+(E.i(A)>>>16);k=P>>>16,O&=65535,P&=65535,x[A]=P<<16|O}return new s(x,x[x.length-1]&-2147483648?-1:0)};function C(E,b){return E.add(v(b))}e.j=function(E){if(g(this)||g(E))return d;if(m(this))return m(E)?v(this).j(v(E)):v(v(this).j(E));if(m(E))return v(this.j(v(E)));if(0>this.l(p)&&0>E.l(p))return c(this.m()*E.m());for(var b=this.g.length+E.g.length,x=[],k=0;k<2*b;k++)x[k]=0;for(k=0;k<this.g.length;k++)for(var A=0;A<E.g.length;A++){var O=this.i(k)>>>16,P=this.i(k)&65535,le=E.i(A)>>>16,Re=E.i(A)&65535;x[2*k+2*A]+=P*Re,S(x,2*k+2*A),x[2*k+2*A+1]+=O*Re,S(x,2*k+2*A+1),x[2*k+2*A+1]+=P*le,S(x,2*k+2*A+1),x[2*k+2*A+2]+=O*le,S(x,2*k+2*A+2)}for(k=0;k<b;k++)x[k]=x[2*k+1]<<16|x[2*k];for(k=b;k<2*b;k++)x[k]=0;return new s(x,0)};function S(E,b){for(;(E[b]&65535)!=E[b];)E[b+1]+=E[b]>>>16,E[b]&=65535,b++}function _(E,b){this.g=E,this.h=b}function D(E,b){if(g(b))throw Error("division by zero");if(g(E))return new _(d,d);if(m(E))return b=D(v(E),b),new _(v(b.g),v(b.h));if(m(b))return b=D(E,v(b)),new _(v(b.g),b.h);if(30<E.g.length){if(m(E)||m(b))throw Error("slowDivide_ only works with positive integers.");for(var x=h,k=b;0>=k.l(E);)x=F(x),k=F(k);var A=I(x,1),O=I(k,1);for(k=I(k,2),x=I(x,2);!g(k);){var P=O.add(k);0>=P.l(E)&&(A=A.add(x),O=P),k=I(k,1),x=I(x,1)}return b=C(E,A.j(b)),new _(A,b)}for(A=d;0<=E.l(b);){for(x=Math.max(1,Math.floor(E.m()/b.m())),k=Math.ceil(Math.log(x)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),O=c(x),P=O.j(b);m(P)||0<P.l(E);)x-=k,O=c(x),P=O.j(b);g(O)&&(O=h),A=A.add(O),E=C(E,P)}return new _(A,E)}e.A=function(E){return D(this,E).h},e.and=function(E){for(var b=Math.max(this.g.length,E.g.length),x=[],k=0;k<b;k++)x[k]=this.i(k)&E.i(k);return new s(x,this.h&E.h)},e.or=function(E){for(var b=Math.max(this.g.length,E.g.length),x=[],k=0;k<b;k++)x[k]=this.i(k)|E.i(k);return new s(x,this.h|E.h)},e.xor=function(E){for(var b=Math.max(this.g.length,E.g.length),x=[],k=0;k<b;k++)x[k]=this.i(k)^E.i(k);return new s(x,this.h^E.h)};function F(E){for(var b=E.g.length+1,x=[],k=0;k<b;k++)x[k]=E.i(k)<<1|E.i(k-1)>>>31;return new s(x,E.h)}function I(E,b){var x=b>>5;b%=32;for(var k=E.g.length-x,A=[],O=0;O<k;O++)A[O]=0<b?E.i(O+x)>>>b|E.i(O+x+1)<<32-b:E.i(O+x);return new s(A,E.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,XM=rU.Md5=i,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=c,s.fromString=u,gu=rU.Integer=s}).apply(typeof iU<"u"?iU:typeof self<"u"?self:typeof window<"u"?window:{});var I_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ql={};var $M,_ge,sg,ZM,ny,F_,JM,eP,tP;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,y,w){return f==Array.prototype||f==Object.prototype||(f[y]=w.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof I_=="object"&&I_];for(var y=0;y<f.length;++y){var w=f[y];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function r(f,y){if(y)e:{var w=i;f=f.split(".");for(var R=0;R<f.length-1;R++){var V=f[R];if(!(V in w))break e;w=w[V]}f=f[f.length-1],R=w[f],y=y(R),y!=R&&y!=null&&t(w,f,{configurable:!0,writable:!0,value:y})}}function o(f,y){f instanceof String&&(f+="");var w=0,R=!1,V={next:function(){if(!R&&w<f.length){var q=w++;return{value:y(q,f[q]),done:!1}}return R=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}r("Array.prototype.values",function(f){return f||function(){return o(this,function(y,w){return w})}});var s=s||{},a=this||self;function l(f){var y=typeof f;return y=y!="object"?y:f?Array.isArray(f)?"array":y:"null",y=="array"||y=="object"&&typeof f.length=="number"}function c(f){var y=typeof f;return y=="object"&&f!=null||y=="function"}function u(f,y,w){return f.call.apply(f.bind,arguments)}function d(f,y,w){if(!f)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,R),f.apply(y,V)}}return function(){return f.apply(y,arguments)}}function h(f,y,w){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,h.apply(null,arguments)}function p(f,y){var w=Array.prototype.slice.call(arguments,1);return function(){var R=w.slice();return R.push.apply(R,arguments),f.apply(this,R)}}function g(f,y){function w(){}w.prototype=y.prototype,f.aa=y.prototype,f.prototype=new w,f.prototype.constructor=f,f.Qb=function(R,V,q){for(var de=Array(arguments.length-2),cn=2;cn<arguments.length;cn++)de[cn-2]=arguments[cn];return y.prototype[V].apply(R,de)}}function m(f){let y=f.length;if(0<y){let w=Array(y);for(let R=0;R<y;R++)w[R]=f[R];return w}return[]}function v(f,y){for(let w=1;w<arguments.length;w++){let R=arguments[w];if(l(R)){let V=f.length||0,q=R.length||0;f.length=V+q;for(let de=0;de<q;de++)f[V+de]=R[de]}else f.push(R)}}class C{constructor(y,w){this.i=y,this.j=w,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function S(f){return/^[\s\xa0]*$/.test(f)}function _(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function D(f){return D[" "](f),f}D[" "]=function(){};var F=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function I(f,y,w){for(let R in f)y.call(w,f[R],R,f)}function E(f,y){for(let w in f)y.call(void 0,f[w],w,f)}function b(f){let y={};for(let w in f)y[w]=f[w];return y}let x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(f,y){let w,R;for(let V=1;V<arguments.length;V++){R=arguments[V];for(w in R)f[w]=R[w];for(let q=0;q<x.length;q++)w=x[q],Object.prototype.hasOwnProperty.call(R,w)&&(f[w]=R[w])}}function A(f){var y=1;f=f.split(":");let w=[];for(;0<y&&f.length;)w.push(f.shift()),y--;return f.length&&w.push(f.join(":")),w}function O(f){a.setTimeout(()=>{throw f},0)}function P(){var f=ln;let y=null;return f.g&&(y=f.g,f.g=f.g.next,f.g||(f.h=null),y.next=null),y}class le{constructor(){this.h=this.g=null}add(y,w){let R=Re.get();R.set(y,w),this.h?this.h.next=R:this.g=R,this.h=R}}var Re=new C(()=>new Ue,f=>f.reset());class Ue{constructor(){this.next=this.g=this.h=null}set(y,w){this.h=y,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let we,Ct=!1,ln=new le,Ao=()=>{let f=a.Promise.resolve(void 0);we=()=>{f.then(Ws)}};var Ws=()=>{for(var f;f=P();){try{f.h.call(f.g)}catch(w){O(w)}var y=Re;y.j(f),100>y.h&&(y.h++,f.next=y.g,y.g=f)}Ct=!1};function wn(){this.s=this.s,this.C=this.C}wn.prototype.s=!1,wn.prototype.ma=function(){this.s||(this.s=!0,this.N())},wn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Vt(f,y){this.type=f,this.g=this.target=y,this.defaultPrevented=!1}Vt.prototype.h=function(){this.defaultPrevented=!0};var Rl=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,y=Object.defineProperty({},"passive",{get:function(){f=!0}});try{let w=()=>{};a.addEventListener("test",w,y),a.removeEventListener("test",w,y)}catch{}return f}();function ui(f,y){if(Vt.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var w=this.type=f.type,R=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=y,y=f.relatedTarget){if(F){e:{try{D(y.nodeName);var V=!0;break e}catch{}V=!1}V||(y=null)}}else w=="mouseover"?y=f.fromElement:w=="mouseout"&&(y=f.toElement);this.relatedTarget=y,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:qs[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&ui.aa.h.call(this)}}g(ui,Vt);var qs={2:"touch",3:"pen",4:"mouse"};ui.prototype.h=function(){ui.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var $n="closure_listenable_"+(1e6*Math.random()|0),ao=0;function Aa(f,y,w,R,V){this.listener=f,this.proxy=null,this.src=y,this.type=w,this.capture=!!R,this.ha=V,this.key=++ao,this.da=this.fa=!1}function Ks(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Qt(f){this.src=f,this.g={},this.h=0}Qt.prototype.add=function(f,y,w,R,V){var q=f.toString();f=this.g[q],f||(f=this.g[q]=[],this.h++);var de=Ma(f,y,R,V);return-1<de?(y=f[de],w||(y.fa=!1)):(y=new Aa(y,this.src,q,!!R,V),y.fa=w,f.push(y)),y};function wd(f,y){var w=y.type;if(w in f.g){var R=f.g[w],V=Array.prototype.indexOf.call(R,y,void 0),q;(q=0<=V)&&Array.prototype.splice.call(R,V,1),q&&(Ks(y),f.g[w].length==0&&(delete f.g[w],f.h--))}}function Ma(f,y,w,R){for(var V=0;V<f.length;++V){var q=f[V];if(!q.da&&q.listener==y&&q.capture==!!w&&q.ha==R)return V}return-1}var bv="closure_lm_"+(1e6*Math.random()|0),Sv={};function _v(f,y,w,R,V){if(R&&R.once)return pb(f,y,w,R,V);if(Array.isArray(y)){for(var q=0;q<y.length;q++)_v(f,y[q],w,R,V);return null}return w=Xf(w),f&&f[$n]?f.K(y,w,c(R)?!!R.capture:!!R,V):Ev(f,y,w,!1,R,V)}function Ev(f,y,w,R,V,q){if(!y)throw Error("Invalid event type");var de=c(V)?!!V.capture:!!V,cn=bd(f);if(cn||(f[bv]=cn=new Qt(f)),w=cn.add(y,w,R,de,q),w.proxy)return w;if(R=XT(),w.proxy=R,R.src=f,R.listener=w,f.addEventListener)Rl||(V=de),V===void 0&&(V=!1),f.addEventListener(y.toString(),R,V);else if(f.attachEvent)f.attachEvent(xv(y.toString()),R);else if(f.addListener&&f.removeListener)f.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return w}function XT(){function f(w){return y.call(f.src,f.listener,w)}let y=gb;return f}function pb(f,y,w,R,V){if(Array.isArray(y)){for(var q=0;q<y.length;q++)pb(f,y[q],w,R,V);return null}return w=Xf(w),f&&f[$n]?f.L(y,w,c(R)?!!R.capture:!!R,V):Ev(f,y,w,!0,R,V)}function Pa(f,y,w,R,V){if(Array.isArray(y))for(var q=0;q<y.length;q++)Pa(f,y[q],w,R,V);else R=c(R)?!!R.capture:!!R,w=Xf(w),f&&f[$n]?(f=f.i,y=String(y).toString(),y in f.g&&(q=f.g[y],w=Ma(q,w,R,V),-1<w&&(Ks(q[w]),Array.prototype.splice.call(q,w,1),q.length==0&&(delete f.g[y],f.h--)))):f&&(f=bd(f))&&(y=f.g[y.toString()],f=-1,y&&(f=Ma(y,w,R,V)),(w=-1<f?y[f]:null)&&Mc(w))}function Mc(f){if(typeof f!="number"&&f&&!f.da){var y=f.src;if(y&&y[$n])wd(y.i,f);else{var w=f.type,R=f.proxy;y.removeEventListener?y.removeEventListener(w,R,f.capture):y.detachEvent?y.detachEvent(xv(w),R):y.addListener&&y.removeListener&&y.removeListener(R),(w=bd(y))?(wd(w,f),w.h==0&&(w.src=null,y[bv]=null)):Ks(f)}}}function xv(f){return f in Sv?Sv[f]:Sv[f]="on"+f}function gb(f,y){if(f.da)f=!0;else{y=new ui(y,this);var w=f.listener,R=f.ha||f.src;f.fa&&Mc(f),f=w.call(R,y)}return f}function bd(f){return f=f[bv],f instanceof Qt?f:null}var Qf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xf(f){return typeof f=="function"?f:(f[Qf]||(f[Qf]=function(y){return f.handleEvent(y)}),f[Qf])}function _i(){wn.call(this),this.i=new Qt(this),this.M=this,this.F=null}g(_i,wn),_i.prototype[$n]=!0,_i.prototype.removeEventListener=function(f,y,w,R){Pa(this,f,y,w,R)};function Ni(f,y){var w,R=f.F;if(R)for(w=[];R;R=R.F)w.push(R);if(f=f.M,R=y.type||y,typeof y=="string")y=new Vt(y,f);else if(y instanceof Vt)y.target=y.target||f;else{var V=y;y=new Vt(R,f),k(y,V)}if(V=!0,w)for(var q=w.length-1;0<=q;q--){var de=y.g=w[q];V=mb(de,R,!0,y)&&V}if(de=y.g=f,V=mb(de,R,!0,y)&&V,V=mb(de,R,!1,y)&&V,w)for(q=0;q<w.length;q++)de=y.g=w[q],V=mb(de,R,!1,y)&&V}_i.prototype.N=function(){if(_i.aa.N.call(this),this.i){var f=this.i,y;for(y in f.g){for(var w=f.g[y],R=0;R<w.length;R++)Ks(w[R]);delete f.g[y],f.h--}}this.F=null},_i.prototype.K=function(f,y,w,R){return this.i.add(String(f),y,!1,w,R)},_i.prototype.L=function(f,y,w,R){return this.i.add(String(f),y,!0,w,R)};function mb(f,y,w,R){if(y=f.i.g[String(y)],!y)return!0;y=y.concat();for(var V=!0,q=0;q<y.length;++q){var de=y[q];if(de&&!de.da&&de.capture==w){var cn=de.listener,Yi=de.ha||de.src;de.fa&&wd(f.i,de),V=cn.call(Yi,R)!==!1&&V}}return V&&!R.defaultPrevented}function IB(f,y,w){if(typeof f=="function")w&&(f=h(f,w));else if(f&&typeof f.handleEvent=="function")f=h(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:a.setTimeout(f,y||0)}function FB(f){f.g=IB(()=>{f.g=null,f.i&&(f.i=!1,FB(f))},f.l);let y=f.h;f.h=null,f.m.apply(null,y)}class lie extends wn{constructor(y,w){super(),this.m=y,this.l=w,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:FB(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dv(f){wn.call(this),this.h=f,this.g={}}g(Dv,wn);var AB=[];function MB(f){I(f.g,function(y,w){this.g.hasOwnProperty(w)&&Mc(y)},f),f.g={}}Dv.prototype.N=function(){Dv.aa.N.call(this),MB(this)},Dv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $T=a.JSON.stringify,cie=a.JSON.parse,uie=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function ZT(){}ZT.prototype.h=null;function PB(f){return f.h||(f.h=f.i())}function kB(){}var Tv={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function JT(){Vt.call(this,"d")}g(JT,Vt);function eR(){Vt.call(this,"c")}g(eR,Vt);var Sd={},OB=null;function vb(){return OB=OB||new _i}Sd.La="serverreachability";function NB(f){Vt.call(this,Sd.La,f)}g(NB,Vt);function Rv(f){let y=vb();Ni(y,new NB(y))}Sd.STAT_EVENT="statevent";function LB(f,y){Vt.call(this,Sd.STAT_EVENT,f),this.stat=y}g(LB,Vt);function Fr(f){let y=vb();Ni(y,new LB(y,f))}Sd.Ma="timingevent";function VB(f,y){Vt.call(this,Sd.Ma,f),this.size=y}g(VB,Vt);function Iv(f,y){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},y)}function Fv(){this.g=!0}Fv.prototype.xa=function(){this.g=!1};function die(f,y,w,R,V,q){f.info(function(){if(f.g)if(q)for(var de="",cn=q.split("&"),Yi=0;Yi<cn.length;Yi++){var qt=cn[Yi].split("=");if(1<qt.length){var hr=qt[0];qt=qt[1];var fr=hr.split("_");de=2<=fr.length&&fr[1]=="type"?de+(hr+"="+qt+"&"):de+(hr+"=redacted&")}}else de=null;else de=q;return"XMLHTTP REQ ("+R+") [attempt "+V+"]: "+y+`
`+w+`
`+de})}function hie(f,y,w,R,V,q,de){f.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+V+"]: "+y+`
`+w+`
`+q+" "+de})}function $f(f,y,w,R){f.info(function(){return"XMLHTTP TEXT ("+y+"): "+pie(f,w)+(R?" "+R:"")})}function fie(f,y){f.info(function(){return"TIMEOUT: "+y})}Fv.prototype.info=function(){};function pie(f,y){if(!f.g)return y;if(!y)return null;try{var w=JSON.parse(y);if(w){for(f=0;f<w.length;f++)if(Array.isArray(w[f])){var R=w[f];if(!(2>R.length)){var V=R[1];if(Array.isArray(V)&&!(1>V.length)){var q=V[0];if(q!="noop"&&q!="stop"&&q!="close")for(var de=1;de<V.length;de++)V[de]=""}}}}return $T(w)}catch{return y}}var yb={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},BB={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},tR;function Cb(){}g(Cb,ZT),Cb.prototype.g=function(){return new XMLHttpRequest},Cb.prototype.i=function(){return{}},tR=new Cb;function Pc(f,y,w,R){this.j=f,this.i=y,this.l=w,this.R=R||1,this.U=new Dv(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new GB}function GB(){this.i=null,this.g="",this.h=!1}var HB={},nR={};function iR(f,y,w){f.L=1,f.v=_b(Il(y)),f.m=w,f.P=!0,zB(f,null)}function zB(f,y){f.F=Date.now(),wb(f),f.A=Il(f.v);var w=f.A,R=f.R;Array.isArray(R)||(R=[String(R)]),n4(w.i,"t",R),f.C=0,w=f.j.J,f.h=new GB,f.g=w4(f.j,w?y:null,!f.m),0<f.O&&(f.M=new lie(h(f.Y,f,f.g),f.O)),y=f.U,w=f.g,R=f.ca;var V="readystatechange";Array.isArray(V)||(V&&(AB[0]=V.toString()),V=AB);for(var q=0;q<V.length;q++){var de=_v(w,V[q],R||y.handleEvent,!1,y.h||y);if(!de)break;y.g[de.key]=de}y=f.H?b(f.H):{},f.m?(f.u||(f.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,y)):(f.u="GET",f.g.ea(f.A,f.u,null,y)),Rv(),die(f.i,f.u,f.A,f.l,f.R,f.m)}Pc.prototype.ca=function(f){f=f.target;let y=this.M;y&&Fl(f)==3?y.j():this.Y(f)},Pc.prototype.Y=function(f){try{if(f==this.g)e:{let fr=Fl(this.g);var y=this.g.Ba();let ep=this.g.Z();if(!(3>fr)&&(fr!=3||this.g&&(this.h.h||this.g.oa()||c4(this.g)))){this.J||fr!=4||y==7||(y==8||0>=ep?Rv(3):Rv(2)),rR(this);var w=this.g.Z();this.X=w;t:if(UB(this)){var R=c4(this.g);f="";var V=R.length,q=Fl(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_d(this),Av(this);var de="";break t}this.h.i=new a.TextDecoder}for(y=0;y<V;y++)this.h.h=!0,f+=this.h.i.decode(R[y],{stream:!(q&&y==V-1)});R.length=0,this.h.g+=f,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=w==200,hie(this.i,this.u,this.A,this.l,this.R,fr,w),this.o){if(this.T&&!this.K){t:{if(this.g){var cn,Yi=this.g;if((cn=Yi.g?Yi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(cn)){var qt=cn;break t}}qt=null}if(w=qt)$f(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oR(this,w);else{this.o=!1,this.s=3,Fr(12),_d(this),Av(this);break e}}if(this.P){w=!0;let Ys;for(;!this.J&&this.C<de.length;)if(Ys=gie(this,de),Ys==nR){fr==4&&(this.s=4,Fr(14),w=!1),$f(this.i,this.l,null,"[Incomplete Response]");break}else if(Ys==HB){this.s=4,Fr(15),$f(this.i,this.l,de,"[Invalid Chunk]"),w=!1;break}else $f(this.i,this.l,Ys,null),oR(this,Ys);if(UB(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),fr!=4||de.length!=0||this.h.h||(this.s=1,Fr(16),w=!1),this.o=this.o&&w,!w)$f(this.i,this.l,de,"[Invalid Chunked Response]"),_d(this),Av(this);else if(0<de.length&&!this.W){this.W=!0;var hr=this.j;hr.g==this&&hr.ba&&!hr.M&&(hr.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),dR(hr),hr.M=!0,Fr(11))}}else $f(this.i,this.l,de,null),oR(this,de);fr==4&&_d(this),this.o&&!this.J&&(fr==4?m4(this.j,this):(this.o=!1,wb(this)))}else Mie(this.g),w==400&&0<de.indexOf("Unknown SID")?(this.s=3,Fr(12)):(this.s=0,Fr(13)),_d(this),Av(this)}}}catch{}finally{}};function UB(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function gie(f,y){var w=f.C,R=y.indexOf(`
`,w);return R==-1?nR:(w=Number(y.substring(w,R)),isNaN(w)?HB:(R+=1,R+w>y.length?nR:(y=y.slice(R,R+w),f.C=R+w,y)))}Pc.prototype.cancel=function(){this.J=!0,_d(this)};function wb(f){f.S=Date.now()+f.I,jB(f,f.I)}function jB(f,y){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Iv(h(f.ba,f),y)}function rR(f){f.B&&(a.clearTimeout(f.B),f.B=null)}Pc.prototype.ba=function(){this.B=null;let f=Date.now();0<=f-this.S?(fie(this.i,this.A),this.L!=2&&(Rv(),Fr(17)),_d(this),this.s=2,Av(this)):jB(this,this.S-f)};function Av(f){f.j.G==0||f.J||m4(f.j,f)}function _d(f){rR(f);var y=f.M;y&&typeof y.ma=="function"&&y.ma(),f.M=null,MB(f.U),f.g&&(y=f.g,f.g=null,y.abort(),y.ma())}function oR(f,y){try{var w=f.j;if(w.G!=0&&(w.g==f||sR(w.h,f))){if(!f.K&&sR(w.h,f)&&w.G==3){try{var R=w.Da.g.parse(y)}catch{R=null}if(Array.isArray(R)&&R.length==3){var V=R;if(V[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<f.F)Rb(w),Db(w);else break e;uR(w),Fr(18)}}else w.za=V[1],0<w.za-w.T&&37500>V[2]&&w.F&&w.v==0&&!w.C&&(w.C=Iv(h(w.Za,w),6e3));if(1>=KB(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else xd(w,11)}else if((f.K||w.g==f)&&Rb(w),!S(y))for(V=w.Da.g.parse(y),y=0;y<V.length;y++){let qt=V[y];if(w.T=qt[0],qt=qt[1],w.G==2)if(qt[0]=="c"){w.K=qt[1],w.ia=qt[2];let hr=qt[3];hr!=null&&(w.la=hr,w.j.info("VER="+w.la));let fr=qt[4];fr!=null&&(w.Aa=fr,w.j.info("SVER="+w.Aa));let ep=qt[5];ep!=null&&typeof ep=="number"&&0<ep&&(R=1.5*ep,w.L=R,w.j.info("backChannelRequestTimeoutMs_="+R)),R=w;let Ys=f.g;if(Ys){let Fb=Ys.g?Ys.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fb){var q=R.h;q.g||Fb.indexOf("spdy")==-1&&Fb.indexOf("quic")==-1&&Fb.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(aR(q,q.h),q.h=null))}if(R.D){let hR=Ys.g?Ys.g.getResponseHeader("X-HTTP-Session-Id"):null;hR&&(R.ya=hR,bn(R.I,R.D,hR))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-f.F,w.j.info("Handshake RTT: "+w.R+"ms")),R=w;var de=f;if(R.qa=C4(R,R.J?R.ia:null,R.W),de.K){YB(R.h,de);var cn=de,Yi=R.L;Yi&&(cn.I=Yi),cn.B&&(rR(cn),wb(cn)),R.g=de}else p4(R);0<w.i.length&&Tb(w)}else qt[0]!="stop"&&qt[0]!="close"||xd(w,7);else w.G==3&&(qt[0]=="stop"||qt[0]=="close"?qt[0]=="stop"?xd(w,7):cR(w):qt[0]!="noop"&&w.l&&w.l.ta(qt),w.v=0)}}Rv(4)}catch{}}var mie=class{constructor(f,y){this.g=f,this.map=y}};function WB(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qB(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function KB(f){return f.h?1:f.g?f.g.size:0}function sR(f,y){return f.h?f.h==y:f.g?f.g.has(y):!1}function aR(f,y){f.g?f.g.add(y):f.h=y}function YB(f,y){f.h&&f.h==y?f.h=null:f.g&&f.g.has(y)&&f.g.delete(y)}WB.prototype.cancel=function(){if(this.i=QB(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let f of this.g.values())f.cancel();this.g.clear()}};function QB(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let y=f.i;for(let w of f.g.values())y=y.concat(w.D);return y}return m(f.i)}function vie(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var y=[],w=f.length,R=0;R<w;R++)y.push(f[R]);return y}y=[],w=0;for(R in f)y[w++]=f[R];return y}function yie(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var y=[];f=f.length;for(var w=0;w<f;w++)y.push(w);return y}y=[],w=0;for(let R in f)y[w++]=R;return y}}}function XB(f,y){if(f.forEach&&typeof f.forEach=="function")f.forEach(y,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,y,void 0);else for(var w=yie(f),R=vie(f),V=R.length,q=0;q<V;q++)y.call(void 0,R[q],w&&w[q],f)}var $B=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cie(f,y){if(f){f=f.split("&");for(var w=0;w<f.length;w++){var R=f[w].indexOf("="),V=null;if(0<=R){var q=f[w].substring(0,R);V=f[w].substring(R+1)}else q=f[w];y(q,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Ed(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Ed){this.h=f.h,bb(this,f.j),this.o=f.o,this.g=f.g,Sb(this,f.s),this.l=f.l;var y=f.i,w=new kv;w.i=y.i,y.g&&(w.g=new Map(y.g),w.h=y.h),ZB(this,w),this.m=f.m}else f&&(y=String(f).match($B))?(this.h=!1,bb(this,y[1]||"",!0),this.o=Mv(y[2]||""),this.g=Mv(y[3]||"",!0),Sb(this,y[4]),this.l=Mv(y[5]||"",!0),ZB(this,y[6]||"",!0),this.m=Mv(y[7]||"")):(this.h=!1,this.i=new kv(null,this.h))}Ed.prototype.toString=function(){var f=[],y=this.j;y&&f.push(Pv(y,JB,!0),":");var w=this.g;return(w||y=="file")&&(f.push("//"),(y=this.o)&&f.push(Pv(y,JB,!0),"@"),f.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&f.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&f.push("/"),f.push(Pv(w,w.charAt(0)=="/"?Sie:bie,!0))),(w=this.i.toString())&&f.push("?",w),(w=this.m)&&f.push("#",Pv(w,Eie)),f.join("")};function Il(f){return new Ed(f)}function bb(f,y,w){f.j=w?Mv(y,!0):y,f.j&&(f.j=f.j.replace(/:$/,""))}function Sb(f,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);f.s=y}else f.s=null}function ZB(f,y,w){y instanceof kv?(f.i=y,xie(f.i,f.h)):(w||(y=Pv(y,_ie)),f.i=new kv(y,f.h))}function bn(f,y,w){f.i.set(y,w)}function _b(f){return bn(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Mv(f,y){return f?y?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Pv(f,y,w){return typeof f=="string"?(f=encodeURI(f).replace(y,wie),w&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function wie(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var JB=/[#\/\?@]/g,bie=/[#\?:]/g,Sie=/[#\?]/g,_ie=/[#\?@]/g,Eie=/#/g;function kv(f,y){this.h=this.g=null,this.i=f||null,this.j=!!y}function kc(f){f.g||(f.g=new Map,f.h=0,f.i&&Cie(f.i,function(y,w){f.add(decodeURIComponent(y.replace(/\+/g," ")),w)}))}e=kv.prototype,e.add=function(f,y){kc(this),this.i=null,f=Zf(this,f);var w=this.g.get(f);return w||this.g.set(f,w=[]),w.push(y),this.h+=1,this};function e4(f,y){kc(f),y=Zf(f,y),f.g.has(y)&&(f.i=null,f.h-=f.g.get(y).length,f.g.delete(y))}function t4(f,y){return kc(f),y=Zf(f,y),f.g.has(y)}e.forEach=function(f,y){kc(this),this.g.forEach(function(w,R){w.forEach(function(V){f.call(y,V,R,this)},this)},this)},e.na=function(){kc(this);let f=Array.from(this.g.values()),y=Array.from(this.g.keys()),w=[];for(let R=0;R<y.length;R++){let V=f[R];for(let q=0;q<V.length;q++)w.push(y[R])}return w},e.V=function(f){kc(this);let y=[];if(typeof f=="string")t4(this,f)&&(y=y.concat(this.g.get(Zf(this,f))));else{f=Array.from(this.g.values());for(let w=0;w<f.length;w++)y=y.concat(f[w])}return y},e.set=function(f,y){return kc(this),this.i=null,f=Zf(this,f),t4(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[y]),this.h+=1,this},e.get=function(f,y){return f?(f=this.V(f),0<f.length?String(f[0]):y):y};function n4(f,y,w){e4(f,y),0<w.length&&(f.i=null,f.g.set(Zf(f,y),m(w)),f.h+=w.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";let f=[],y=Array.from(this.g.keys());for(var w=0;w<y.length;w++){var R=y[w];let q=encodeURIComponent(String(R)),de=this.V(R);for(R=0;R<de.length;R++){var V=q;de[R]!==""&&(V+="="+encodeURIComponent(String(de[R]))),f.push(V)}}return this.i=f.join("&")};function Zf(f,y){return y=String(y),f.j&&(y=y.toLowerCase()),y}function xie(f,y){y&&!f.j&&(kc(f),f.i=null,f.g.forEach(function(w,R){var V=R.toLowerCase();R!=V&&(e4(this,R),n4(this,V,w))},f)),f.j=y}function Die(f,y){let w=new Fv;if(a.Image){let R=new Image;R.onload=p(Oc,w,"TestLoadImage: loaded",!0,y,R),R.onerror=p(Oc,w,"TestLoadImage: error",!1,y,R),R.onabort=p(Oc,w,"TestLoadImage: abort",!1,y,R),R.ontimeout=p(Oc,w,"TestLoadImage: timeout",!1,y,R),a.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=f}else y(!1)}function Tie(f,y){let w=new Fv,R=new AbortController,V=setTimeout(()=>{R.abort(),Oc(w,"TestPingServer: timeout",!1,y)},1e4);fetch(f,{signal:R.signal}).then(q=>{clearTimeout(V),q.ok?Oc(w,"TestPingServer: ok",!0,y):Oc(w,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(V),Oc(w,"TestPingServer: error",!1,y)})}function Oc(f,y,w,R,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),R(w)}catch{}}function Rie(){this.g=new uie}function Iie(f,y,w){let R=w||"";try{XB(f,function(V,q){let de=V;c(V)&&(de=$T(V)),y.push(R+q+"="+encodeURIComponent(de))})}catch(V){throw y.push(R+"type="+encodeURIComponent("_badmap")),V}}function Ov(f){this.l=f.Ub||null,this.j=f.eb||!1}g(Ov,ZT),Ov.prototype.g=function(){return new Eb(this.l,this.j)},Ov.prototype.i=function(f){return function(){return f}}({});function Eb(f,y){_i.call(this),this.D=f,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(Eb,_i),e=Eb.prototype,e.open=function(f,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=y,this.readyState=1,Lv(this)},e.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(y.body=f),(this.D||a).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Nv(this)),this.readyState=0},e.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Lv(this)),this.g&&(this.readyState=3,Lv(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;i4(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function i4(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}e.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var y=f.value?f.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!f.done}))&&(this.response=this.responseText+=y)}f.done?Nv(this):Lv(this),this.readyState==3&&i4(this)}},e.Ra=function(f){this.g&&(this.response=this.responseText=f,Nv(this))},e.Qa=function(f){this.g&&(this.response=f,Nv(this))},e.ga=function(){this.g&&Nv(this)};function Nv(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Lv(f)}e.setRequestHeader=function(f,y){this.u.append(f,y)},e.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";let f=[],y=this.h.entries();for(var w=y.next();!w.done;)w=w.value,f.push(w[0]+": "+w[1]),w=y.next();return f.join(`\r
`)};function Lv(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Eb.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function r4(f){let y="";return I(f,function(w,R){y+=R,y+=":",y+=w,y+=`\r
`}),y}function lR(f,y,w){e:{for(R in w){var R=!1;break e}R=!0}R||(w=r4(w),typeof f=="string"?w!=null&&encodeURIComponent(String(w)):bn(f,y,w))}function Un(f){_i.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(Un,_i);var Fie=/^https?$/i,Aie=["POST","PUT"];e=Un.prototype,e.Ha=function(f){this.J=f},e.ea=function(f,y,w,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);y=y?y.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():tR.g(),this.v=this.o?PB(this.o):PB(tR),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(y,String(f),!0),this.B=!1}catch(q){o4(this,q);return}if(f=w||"",w=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var V in R)w.set(V,R[V]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(let q of R.keys())w.set(q,R.get(q));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(w.keys()).find(q=>q.toLowerCase()=="content-type"),V=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Aie,y,void 0))||R||V||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[q,de]of w)this.g.setRequestHeader(q,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{l4(this),this.u=!0,this.g.send(f),this.u=!1}catch(q){o4(this,q)}};function o4(f,y){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=y,f.m=5,s4(f),xb(f)}function s4(f){f.A||(f.A=!0,Ni(f,"complete"),Ni(f,"error"))}e.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Ni(this,"complete"),Ni(this,"abort"),xb(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xb(this,!0)),Un.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?a4(this):this.bb())},e.bb=function(){a4(this)};function a4(f){if(f.h&&typeof s<"u"&&(!f.v[1]||Fl(f)!=4||f.Z()!=2)){if(f.u&&Fl(f)==4)IB(f.Ea,0,f);else if(Ni(f,"readystatechange"),Fl(f)==4){f.h=!1;try{let de=f.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var w;if(!(w=y)){var R;if(R=de===0){var V=String(f.D).match($B)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),R=!Fie.test(V?V.toLowerCase():"")}w=R}if(w)Ni(f,"complete"),Ni(f,"success");else{f.m=6;try{var q=2<Fl(f)?f.g.statusText:""}catch{q=""}f.l=q+" ["+f.Z()+"]",s4(f)}}finally{xb(f)}}}}function xb(f,y){if(f.g){l4(f);let w=f.g,R=f.v[0]?()=>{}:null;f.g=null,f.v=null,y||Ni(f,"ready");try{w.onreadystatechange=R}catch{}}}function l4(f){f.I&&(a.clearTimeout(f.I),f.I=null)}e.isActive=function(){return!!this.g};function Fl(f){return f.g?f.g.readyState:0}e.Z=function(){try{return 2<Fl(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(f){if(this.g){var y=this.g.responseText;return f&&y.indexOf(f)==0&&(y=y.substring(f.length)),cie(y)}};function c4(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Mie(f){let y={};f=(f.g&&2<=Fl(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<f.length;R++){if(S(f[R]))continue;var w=A(f[R]);let V=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();let q=y[V]||[];y[V]=q,q.push(w)}E(y,function(R){return R.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vv(f,y,w){return w&&w.internalChannelParams&&w.internalChannelParams[f]||y}function u4(f){this.Aa=0,this.i=[],this.j=new Fv,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vv("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vv("baseRetryDelayMs",5e3,f),this.cb=Vv("retryDelaySeedMs",1e4,f),this.Wa=Vv("forwardChannelMaxRetries",2,f),this.wa=Vv("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new WB(f&&f.concurrentRequestLimit),this.Da=new Rie,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=u4.prototype,e.la=8,e.G=1,e.connect=function(f,y,w,R){Fr(0),this.W=f,this.H=y||{},w&&R!==void 0&&(this.H.OSID=w,this.H.OAID=R),this.F=this.X,this.I=C4(this,null,this.W),Tb(this)};function cR(f){if(d4(f),f.G==3){var y=f.U++,w=Il(f.I);if(bn(w,"SID",f.K),bn(w,"RID",y),bn(w,"TYPE","terminate"),Bv(f,w),y=new Pc(f,f.j,y),y.L=2,y.v=_b(Il(w)),w=!1,a.navigator&&a.navigator.sendBeacon)try{w=a.navigator.sendBeacon(y.v.toString(),"")}catch{}!w&&a.Image&&(new Image().src=y.v,w=!0),w||(y.g=w4(y.j,null),y.g.ea(y.v)),y.F=Date.now(),wb(y)}y4(f)}function Db(f){f.g&&(dR(f),f.g.cancel(),f.g=null)}function d4(f){Db(f),f.u&&(a.clearTimeout(f.u),f.u=null),Rb(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function Tb(f){if(!qB(f.h)&&!f.s){f.s=!0;var y=f.Ga;we||Ao(),Ct||(we(),Ct=!0),ln.add(y,f),f.B=0}}function Pie(f,y){return KB(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=y.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Iv(h(f.Ga,f,y),v4(f,f.B)),f.B++,!0)}e.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;let V=new Pc(this,this.j,f),q=this.o;if(this.S&&(q?(q=b(q),k(q,this.S)):q=this.S),this.m!==null||this.O||(V.H=q,q=null),this.P)e:{for(var y=0,w=0;w<this.i.length;w++){t:{var R=this.i[w];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(y+=R,4096<y){y=w;break e}if(y===4096||w===this.i.length-1){y=w+1;break e}}y=1e3}else y=1e3;y=f4(this,V,y),w=Il(this.I),bn(w,"RID",f),bn(w,"CVER",22),this.D&&bn(w,"X-HTTP-Session-Id",this.D),Bv(this,w),q&&(this.O?y="headers="+encodeURIComponent(String(r4(q)))+"&"+y:this.m&&lR(w,this.m,q)),aR(this.h,V),this.Ua&&bn(w,"TYPE","init"),this.P?(bn(w,"$req",y),bn(w,"SID","null"),V.T=!0,iR(V,w,null)):iR(V,w,y),this.G=2}}else this.G==3&&(f?h4(this,f):this.i.length==0||qB(this.h)||h4(this))};function h4(f,y){var w;y?w=y.l:w=f.U++;let R=Il(f.I);bn(R,"SID",f.K),bn(R,"RID",w),bn(R,"AID",f.T),Bv(f,R),f.m&&f.o&&lR(R,f.m,f.o),w=new Pc(f,f.j,w,f.B+1),f.m===null&&(w.H=f.o),y&&(f.i=y.D.concat(f.i)),y=f4(f,w,1e3),w.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),aR(f.h,w),iR(w,R,y)}function Bv(f,y){f.H&&I(f.H,function(w,R){bn(y,R,w)}),f.l&&XB({},function(w,R){bn(y,R,w)})}function f4(f,y,w){w=Math.min(f.i.length,w);var R=f.l?h(f.l.Na,f.l,f):null;e:{var V=f.i;let q=-1;for(;;){let de=["count="+w];q==-1?0<w?(q=V[0].g,de.push("ofs="+q)):q=0:de.push("ofs="+q);let cn=!0;for(let Yi=0;Yi<w;Yi++){let qt=V[Yi].g,hr=V[Yi].map;if(qt-=q,0>qt)q=Math.max(0,V[Yi].g-100),cn=!1;else try{Iie(hr,de,"req"+qt+"_")}catch{R&&R(hr)}}if(cn){R=de.join("&");break e}}}return f=f.i.splice(0,w),y.D=f,R}function p4(f){if(!f.g&&!f.u){f.Y=1;var y=f.Fa;we||Ao(),Ct||(we(),Ct=!0),ln.add(y,f),f.v=0}}function uR(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Iv(h(f.Fa,f),v4(f,f.v)),f.v++,!0)}e.Fa=function(){if(this.u=null,g4(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Iv(h(this.ab,this),f)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Fr(10),Db(this),g4(this))};function dR(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function g4(f){f.g=new Pc(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var y=Il(f.qa);bn(y,"RID","rpc"),bn(y,"SID",f.K),bn(y,"AID",f.T),bn(y,"CI",f.F?"0":"1"),!f.F&&f.ja&&bn(y,"TO",f.ja),bn(y,"TYPE","xmlhttp"),Bv(f,y),f.m&&f.o&&lR(y,f.m,f.o),f.L&&(f.g.I=f.L);var w=f.g;f=f.ia,w.L=1,w.v=_b(Il(y)),w.m=null,w.P=!0,zB(w,f)}e.Za=function(){this.C!=null&&(this.C=null,Db(this),uR(this),Fr(19))};function Rb(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function m4(f,y){var w=null;if(f.g==y){Rb(f),dR(f),f.g=null;var R=2}else if(sR(f.h,y))w=y.D,YB(f.h,y),R=1;else return;if(f.G!=0){if(y.o)if(R==1){w=y.m?y.m.length:0,y=Date.now()-y.F;var V=f.B;R=vb(),Ni(R,new VB(R,w)),Tb(f)}else p4(f);else if(V=y.s,V==3||V==0&&0<y.X||!(R==1&&Pie(f,y)||R==2&&uR(f)))switch(w&&0<w.length&&(y=f.h,y.i=y.i.concat(w)),V){case 1:xd(f,5);break;case 4:xd(f,10);break;case 3:xd(f,6);break;default:xd(f,2)}}}function v4(f,y){let w=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(w*=2),w*y}function xd(f,y){if(f.j.info("Error code "+y),y==2){var w=h(f.fb,f),R=f.Xa;let V=!R;R=new Ed(R||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||bb(R,"https"),_b(R),V?Die(R.toString(),w):Tie(R.toString(),w)}else Fr(2);f.G=0,f.l&&f.l.sa(y),y4(f),d4(f)}e.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Fr(2)):(this.j.info("Failed to ping google.com"),Fr(1))};function y4(f){if(f.G=0,f.ka=[],f.l){let y=QB(f.h);(y.length!=0||f.i.length!=0)&&(v(f.ka,y),v(f.ka,f.i),f.h.i.length=0,m(f.i),f.i.length=0),f.l.ra()}}function C4(f,y,w){var R=w instanceof Ed?Il(w):new Ed(w);if(R.g!="")y&&(R.g=y+"."+R.g),Sb(R,R.s);else{var V=a.location;R=V.protocol,y=y?y+"."+V.hostname:V.hostname,V=+V.port;var q=new Ed(null);R&&bb(q,R),y&&(q.g=y),V&&Sb(q,V),w&&(q.l=w),R=q}return w=f.D,y=f.ya,w&&y&&bn(R,w,y),bn(R,"VER",f.la),Bv(f,R),R}function w4(f,y,w){if(y&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=f.Ca&&!f.pa?new Un(new Ov({eb:w})):new Un(f.pa),y.Ha(f.J),y}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function b4(){}e=b4.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Ib(){}Ib.prototype.g=function(f,y){return new Mo(f,y)};function Mo(f,y){_i.call(this),this.g=new u4(y),this.l=f,this.h=y&&y.messageUrlParams||null,f=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(f?f["X-WebChannel-Content-Type"]=y.messageContentType:f={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(f?f["X-WebChannel-Client-Profile"]=y.va:f={"X-WebChannel-Client-Profile":y.va}),this.g.S=f,(f=y&&y.Sb)&&!S(f)&&(this.g.m=f),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!S(y)&&(this.g.D=y,f=this.h,f!==null&&y in f&&(f=this.h,y in f&&delete f[y])),this.j=new Jf(this)}g(Mo,_i),Mo.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mo.prototype.close=function(){cR(this.g)},Mo.prototype.o=function(f){var y=this.g;if(typeof f=="string"){var w={};w.__data__=f,f=w}else this.u&&(w={},w.__data__=$T(f),f=w);y.i.push(new mie(y.Ya++,f)),y.G==3&&Tb(y)},Mo.prototype.N=function(){this.g.l=null,delete this.j,cR(this.g),delete this.g,Mo.aa.N.call(this)};function S4(f){JT.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var y=f.__sm__;if(y){e:{for(let w in y){f=w;break e}f=void 0}(this.i=f)&&(f=this.i,y=y!==null&&f in y?y[f]:void 0),this.data=y}else this.data=f}g(S4,JT);function _4(){eR.call(this),this.status=1}g(_4,eR);function Jf(f){this.g=f}g(Jf,b4),Jf.prototype.ua=function(){Ni(this.g,"a")},Jf.prototype.ta=function(f){Ni(this.g,new S4(f))},Jf.prototype.sa=function(f){Ni(this.g,new _4)},Jf.prototype.ra=function(){Ni(this.g,"b")},Ib.prototype.createWebChannel=Ib.prototype.g,Mo.prototype.send=Mo.prototype.o,Mo.prototype.open=Mo.prototype.m,Mo.prototype.close=Mo.prototype.close,tP=Ql.createWebChannelTransport=function(){return new Ib},eP=Ql.getStatEventTarget=function(){return vb()},JM=Ql.Event=Sd,F_=Ql.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yb.NO_ERROR=0,yb.TIMEOUT=8,yb.HTTP_ERROR=6,ny=Ql.ErrorCode=yb,BB.COMPLETE="complete",ZM=Ql.EventType=BB,kB.EventType=Tv,Tv.OPEN="a",Tv.CLOSE="b",Tv.ERROR="c",Tv.MESSAGE="d",_i.prototype.listen=_i.prototype.K,sg=Ql.WebChannel=kB,_ge=Ql.FetchXmlHttpFactory=Ov,Un.prototype.listenOnce=Un.prototype.L,Un.prototype.getLastError=Un.prototype.Ka,Un.prototype.getLastErrorCode=Un.prototype.Ba,Un.prototype.getStatus=Un.prototype.Z,Un.prototype.getResponseJson=Un.prototype.Oa,Un.prototype.getResponseText=Un.prototype.oa,Un.prototype.send=Un.prototype.ea,Un.prototype.setWithCredentials=Un.prototype.Ha,$M=Ql.XhrIo=Un}).apply(typeof I_<"u"?I_:typeof self<"u"?self:typeof window<"u"?window:{});var oU="@firebase/firestore";var vi=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};vi.UNAUTHENTICATED=new vi(null),vi.GOOGLE_CREDENTIALS=new vi("google-credentials-uid"),vi.FIRST_PARTY=new vi("first-party-uid"),vi.MOCK_USER=new vi("mock-user");var Lg="10.14.0";var Su=new La("@firebase/firestore");function dg(){return Su.logLevel}function sk(e){Su.setLogLevel(e)}function te(e,...t){if(Su.logLevel<=lo.DEBUG){let n=t.map(ak);Su.debug(`Firestore (${Lg}): ${e}`,...n)}}function ni(e,...t){if(Su.logLevel<=lo.ERROR){let n=t.map(ak);Su.error(`Firestore (${Lg}): ${e}`,...n)}}function ua(e,...t){if(Su.logLevel<=lo.WARN){let n=t.map(ak);Su.warn(`Firestore (${Lg}): ${e}`,...n)}}function ak(e){if(typeof e=="string")return e;try{return function(n){return JSON.stringify(n)}(e)}catch{return e}}function xe(e="Unexpected state"){let t=`FIRESTORE (${Lg}) INTERNAL ASSERTION FAILED: `+e;throw ni(t),new Error(t)}function Ie(e,t){e||xe()}function lj(e,t){e||xe()}function me(e,t){return e}var K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ee=class extends Qs{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ii=class{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}};var G_=class{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},aP=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(vi.UNAUTHENTICATED))}shutdown(){}},lP=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},cP=class{constructor(t){this.t=t,this.currentUser=vi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Ie(this.o===void 0);let i=this.i,r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve(),o=new Ii;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ii,t.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let l=o;t.enqueueRetryable(()=>N(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},a=l=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ii)}},0),s()}getToken(){let t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ie(typeof i.accessToken=="string"),new G_(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let t=this.auth&&this.auth.getUid();return Ie(t===null||typeof t=="string"),new vi(t)}},uP=class{constructor(t,n,i){this.l=t,this.h=n,this.P=i,this.type="FirstParty",this.user=vi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},dP=class{constructor(t,n,i){this.l=t,this.h=n,this.P=i}getToken(){return Promise.resolve(new uP(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(vi.FIRST_PARTY))}shutdown(){}invalidateToken(){}},hP=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},fP=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){Ie(this.o===void 0);let i=o=>{o.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,te("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};let r=o=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Ie(typeof n.token=="string"),this.R=n.token,new hP(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Ege(e){let t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}var H_=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length,i="";for(;i.length<20;){let r=Ege(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=t.charAt(r[o]%t.length))}return i}};function at(e,t){return e<t?-1:e>t?1:0}function wg(e,t,n){return e.length===t.length&&e.every((i,r)=>n(i,t[r]))}function cj(e){return e+"\0"}var yn=class e{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new ee(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new ee(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ee(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*n));return new e(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?at(this.nanoseconds,t.nanoseconds):at(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ze=class e{constructor(t){this.timestamp=t}static fromTimestamp(t){return new e(t)}static min(){return new e(new yn(0,0))}static max(){return new e(new yn(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var z_=class e{constructor(t,n,i){n===void 0?n=0:n>t.length&&xe(),i===void 0?i=t.length-n:i>t.length-n&&xe(),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let i=Math.min(t.length,n.length);for(let r=0;r<i;r++){let o=t.get(r),s=n.get(r);if(o<s)return-1;if(o>s)return 1}return t.length<n.length?-1:t.length>n.length?1:0}},Ht=class e extends z_{construct(t,n,i){return new e(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let n=[];for(let i of t){if(i.indexOf("//")>=0)throw new ee(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new e(n)}static emptyPath(){return new e([])}},xge=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ii=class e extends z_{construct(t,n,i){return new e(t,n,i)}static isValidIdentifier(t){return xge.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new e(["__name__"])}static fromServerFormat(t){let n=[],i="",r=0,o=()=>{if(i.length===0)throw new ee(K.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},s=!1;for(;r<t.length;){let a=t[r];if(a==="\\"){if(r+1===t.length)throw new ee(K.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let l=t[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ee(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,r+=2}else a==="`"?(s=!s,r++):a!=="."||s?(i+=a,r++):(o(),r++)}if(o(),s)throw new ee(K.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}};var ve=class e{constructor(t){this.path=t}static fromPath(t){return new e(Ht.fromString(t))}static fromName(t){return new e(Ht.fromString(t).popFirst(5))}static empty(){return new e(Ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ht.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Ht.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new e(new Ht(t.slice()))}};var bg=class{constructor(t,n,i,r){this.indexId=t,this.collectionGroup=n,this.fields=i,this.indexState=r}};function pP(e){return e.fields.find(t=>t.kind===2)}function sh(e){return e.fields.filter(t=>t.kind!==2)}bg.UNKNOWN_ID=-1;var vg=class{constructor(t,n){this.fieldPath=t,this.kind=n}};var py=class e{constructor(t,n){this.sequenceNumber=t,this.offset=n}static empty(){return new e(0,bs.min())}};function uj(e,t){let n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=ze.fromTimestamp(i===1e9?new yn(n+1,0):new yn(n,i));return new bs(r,ve.empty(),t)}function dj(e){return new bs(e.readTime,e.key,-1)}var bs=class e{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new e(ze.min(),ve.empty(),-1)}static max(){return new e(ze.max(),ve.empty(),-1)}};function lk(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=ve.comparator(e.documentKey,t.documentKey),n!==0?n:at(e.largestBatchId,t.largestBatchId))}var hj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",U_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function Mu(e){return N(this,null,function*(){if(e.code!==K.FAILED_PRECONDITION||e.message!==hj)throw e;te("LocalStore","Unexpectedly lost primary lease")})}var U=class e{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&xe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(n){return e.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):e.reject(n)}static resolve(t){return new e((n,i)=>{n(t)})}static reject(t){return new e((n,i)=>{i(t)})}static waitFor(t){return new e((n,i)=>{let r=0,o=0,s=!1;t.forEach(a=>{++r,a.next(()=>{++o,s&&o===r&&n()},l=>i(l))}),s=!0,o===r&&n()})}static or(t){let n=e.resolve(!1);for(let i of t)n=n.next(r=>r?e.resolve(r):i());return n}static forEach(t,n){let i=[];return t.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(t,n){return new e((i,r)=>{let o=t.length,s=new Array(o),a=0;for(let l=0;l<o;l++){let c=l;n(t[c]).next(u=>{s[c]=u,++a,a===o&&i(s)},u=>r(u))}})}static doWhile(t,n){return new e((i,r)=>{let o=()=>{t()===!0?n().next(()=>{o()},r):i()};o()})}};var j_=class e{constructor(t,n){this.action=t,this.transaction=n,this.aborted=!1,this.V=new Ii,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new hh(t,n.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=ck(i.target.error);this.V.reject(new hh(t,r))}}static open(t,n,i,r){try{return new e(n,t.transaction(r,i))}catch(o){throw new hh(n,o)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(te("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){let n=this.transaction.objectStore(t);return new mP(n)}},_u=class e{constructor(t,n,i){this.name=t,this.version=n,this.p=i,e.S(Gv())===12.2&&ni("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return te("SimpleDb","Removing database:",t),ah(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!cs())return!1;if(e.v())return!0;let t=Gv(),n=e.S(t),i=0<n&&n<10,r=fj(t),o=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||o)}static v(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.C)==="YES"}static F(t,n){return t.store(n)}static S(t){let n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(t){return N(this,null,function*(){return this.db||(te("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{let s=o.target.result;n(s)},r.onblocked=()=>{i(new hh(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{let s=o.target.error;s.name==="VersionError"?i(new ee(K.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?i(new ee(K.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):i(new hh(t,s))},r.onupgradeneeded=o=>{te("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,r.transaction,o.oldVersion,this.version).next(()=>{te("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(t){this.N=t,this.db&&(this.db.onversionchange=n=>t(n))}runTransaction(t,n,i,r){return N(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(t);let a=j_.open(this.db,t,o?"readonly":"readwrite",i),l=r(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),U.reject(c))).toPromise();return l.catch(()=>{}),yield a.m,l}catch(a){let l=a,c=l.name!=="FirebaseError"&&s<3;if(te("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function fj(e){let t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var gP=class{constructor(t){this.B=t,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(t){this.B=t}done(){this.k=!0}$(t){this.q=t}delete(){return ah(this.B.delete())}},hh=class extends ee{constructor(t,n){super(K.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Pu(e){return e.name==="IndexedDbTransactionError"}var mP=class{constructor(t){this.store=t}put(t,n){let i;return n!==void 0?(te("SimpleDb","PUT",this.store.name,t,n),i=this.store.put(n,t)):(te("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),ah(i)}add(t){return te("SimpleDb","ADD",this.store.name,t,t),ah(this.store.add(t))}get(t){return ah(this.store.get(t)).next(n=>(n===void 0&&(n=null),te("SimpleDb","GET",this.store.name,t,n),n))}delete(t){return te("SimpleDb","DELETE",this.store.name,t),ah(this.store.delete(t))}count(){return te("SimpleDb","COUNT",this.store.name),ah(this.store.count())}U(t,n){let i=this.options(t,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let o=r.getAll(i.range);return new U((s,a)=>{o.onerror=l=>{a(l.target.error)},o.onsuccess=l=>{s(l.target.result)}})}{let o=this.cursor(i),s=[];return this.W(o,(a,l)=>{s.push(l)}).next(()=>s)}}G(t,n){let i=this.store.getAll(t,n===null?void 0:n);return new U((r,o)=>{i.onerror=s=>{o(s.target.error)},i.onsuccess=s=>{r(s.target.result)}})}j(t,n){te("SimpleDb","DELETE ALL",this.store.name);let i=this.options(t,n);i.H=!1;let r=this.cursor(i);return this.W(r,(o,s,a)=>a.delete())}J(t,n){let i;n?i=t:(i={},n=t);let r=this.cursor(i);return this.W(r,n)}Y(t){let n=this.cursor({});return new U((i,r)=>{n.onerror=o=>{let s=ck(o.target.error);r(s)},n.onsuccess=o=>{let s=o.target.result;s?t(s.primaryKey,s.value).next(a=>{a?s.continue():i()}):i()}})}W(t,n){let i=[];return new U((r,o)=>{t.onerror=s=>{o(s.target.error)},t.onsuccess=s=>{let a=s.target.result;if(!a)return void r();let l=new gP(a),c=n(a.primaryKey,a.value,l);if(c instanceof U){let u=c.catch(d=>(l.done(),U.reject(d)));i.push(u)}l.isDone?r():l.K===null?a.continue():a.continue(l.K)}}).next(()=>U.waitFor(i))}options(t,n){let i;return t!==void 0&&(typeof t=="string"?i=t:n=t),{index:i,range:n}}cursor(t){let n="next";if(t.reverse&&(n="prev"),t.index){let i=this.store.index(t.index);return t.H?i.openKeyCursor(t.range,n):i.openCursor(t.range,n)}return this.store.openCursor(t.range,n)}};function ah(e){return new U((t,n)=>{e.onsuccess=i=>{let r=i.target.result;t(r)},e.onerror=i=>{let r=ck(i.target.error);n(r)}})}var sU=!1;function ck(e){let t=_u.S(Gv());if(t>=12.2&&t<13){let n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){let i=new ee("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return sU||(sU=!0,setTimeout(()=>{throw i},0)),i}}return e}var vP=class{constructor(t,n){this.asyncQueue=t,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(t){te("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,()=>N(this,null,function*(){this.task=null;try{te("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){Pu(n)?te("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield Mu(n)}yield this.X(6e4)}))}},yP=class{constructor(t,n){this.localStore=t,this.persistence=n}ee(t=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,t))})}te(t,n){let i=new Set,r=n,o=!0;return U.doWhile(()=>o===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(s=>{if(s!==null&&!i.has(s))return te("IndexBackfiller",`Processing collection: ${s}`),this.ne(t,s,r).next(a=>{r-=a,i.add(s)});o=!1})).next(()=>n-r)}ne(t,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,n).next(r=>this.localStore.localDocuments.getNextDocuments(t,n,r,i).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(t,s).next(()=>this.re(r,o)).next(a=>(te("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(t,n,a))).next(()=>s.size)}))}re(t,n){let i=t;return n.changes.forEach((r,o)=>{let s=dj(o);lk(s,i)>0&&(i=s)}),new bs(i.readTime,i.documentKey,Math.max(n.batchId,t.largestBatchId))}};var Yo=(()=>{class e{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return e.oe=-1,e})();function Oy(e){return e==null}function gy(e){return e===0&&1/e==-1/0}function pj(e){return typeof e=="number"&&Number.isInteger(e)&&!gy(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Hr(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=aU(t)),t=Dge(e.get(n),t);return aU(t)}function Dge(e,t){let n=t,i=e.length;for(let r=0;r<i;r++){let o=e.charAt(r);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function aU(e){return e+""}function Ja(e){let t=e.length;if(Ie(t>=2),t===2)return Ie(e.charAt(0)===""&&e.charAt(1)===""),Ht.emptyPath();let n=t-2,i=[],r="";for(let o=0;o<t;){let s=e.indexOf("",o);switch((s<0||s>n)&&xe(),e.charAt(s+1)){case"":let a=e.substring(o,s),l;r.length===0?l=a:(r+=a,l=r,r=""),i.push(l);break;case"":r+=e.substring(o,s),r+="\0";break;case"":r+=e.substring(o,s+1);break;default:xe()}o=s+2}return new Ht(i)}var lU=["userId","batchId"];function O_(e,t){return[e,Hr(t)]}function gj(e,t,n){return[e,Hr(t),n]}var Tge={},Rge=["prefixPath","collectionGroup","readTime","documentId"],Ige=["prefixPath","collectionGroup","documentId"],Fge=["collectionGroup","readTime","prefixPath","documentId"],Age=["canonicalId","targetId"],Mge=["targetId","path"],Pge=["path","targetId"],kge=["collectionId","parent"],Oge=["indexId","uid"],Nge=["uid","sequenceNumber"],Lge=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Vge=["indexId","uid","orderedDocumentKey"],Bge=["userId","collectionPath","documentId"],Gge=["userId","collectionPath","largestBatchId"],Hge=["userId","collectionGroup","largestBatchId"],mj=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],zge=[...mj,"documentOverlays"],vj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yj=vj,uk=[...yj,"indexConfiguration","indexState","indexEntries"],Uge=uk,jge=[...uk,"globals"];var my=class extends U_{constructor(t,n){super(),this._e=t,this.currentSequenceNumber=n}};function Fi(e,t){let n=me(e);return _u.F(n._e,t)}function cU(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Eh(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Cj(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var En=class e{constructor(t,n){this.comparator=t,this.root=n||tl.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,tl.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,tl.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(t,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){let t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new mg(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new mg(this.root,t,this.comparator,!1)}getReverseIterator(){return new mg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new mg(this.root,t,this.comparator,!0)}},mg=class{constructor(t,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=n?i(t.key,n):1,n&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},tl=class e{constructor(t,n,i,r,o){this.key=t,this.value=n,this.color=i??e.RED,this.left=r??e.EMPTY,this.right=o??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,r,o){return new e(t??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let r=this,o=i(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(t,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(t,r.key)===0){if(r.right.isEmpty())return e.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xe();let t=this.left.check();if(t!==this.right.check())throw xe();return t+(this.isRed()?0:1)}};tl.EMPTY=null,tl.RED=!0,tl.BLACK=!1;tl.EMPTY=new class{constructor(){this.size=0}get key(){throw xe()}get value(){throw xe()}get color(){throw xe()}get left(){throw xe()}get right(){throw xe()}copy(t,n,i,r,o){return this}insert(t,n,i){return new tl(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var fn=class e{constructor(t){this.comparator=t,this.data=new En(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){let i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;n(r.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){let n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new W_(this.data.getIterator())}getIteratorFrom(t){return new W_(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(n=>{t.push(n)}),t}toString(){let t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){let n=new e(this.comparator);return n.data=t,n}},W_=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function ag(e){return e.hasNext()?e.getNext():void 0}var Qo=class e{constructor(t){this.fields=t,t.sort(ii.comparator)}static empty(){return new e([])}unionWith(t){let n=new fn(ii.comparator);for(let i of this.fields)n=n.add(i);for(let i of t)n=n.add(i);return new e(n.toArray())}covers(t){for(let n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return wg(this.fields,t.fields,(n,i)=>n.isEqual(i))}};var q_=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function wj(){return typeof atob<"u"}var oi=class e{constructor(t){this.binaryString=t}static fromBase64String(t){let n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new q_("Invalid base64 string: "+o):o}}(t);return new e(n)}static fromUint8Array(t){let n=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(t);return new e(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return at(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};oi.EMPTY_BYTE_STRING=new oi("");var Wge=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zl(e){if(Ie(!!e),typeof e=="string"){let t=0,n=Wge.exec(e);if(Ie(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}let i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Mn(e.seconds),nanos:Mn(e.nanos)}}function Mn(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Eu(e){return typeof e=="string"?oi.fromBase64String(e):oi.fromUint8Array(e)}function LE(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function dk(e){let t=e.mapValue.fields.__previous_value__;return LE(t)?dk(t):t}function vy(e){let t=Zl(e.mapValue.fields.__local_write_time__.timestampValue);return new yn(t.seconds,t.nanos)}var CP=class{constructor(t,n,i,r,o,s,a,l,c){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}},xu=class e{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new e("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}};var wu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},N_={nullValue:"NULL_VALUE"};function fh(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?LE(e)?4:bj(e)?9007199254740991:VE(e)?10:11:xe()}function rl(e,t){if(e===t)return!0;let n=fh(e);if(n!==fh(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return vy(e).isEqual(vy(t));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let s=Zl(r.timestampValue),a=Zl(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,o){return Eu(r.bytesValue).isEqual(Eu(o.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,o){return Mn(r.geoPointValue.latitude)===Mn(o.geoPointValue.latitude)&&Mn(r.geoPointValue.longitude)===Mn(o.geoPointValue.longitude)}(e,t);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Mn(r.integerValue)===Mn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let s=Mn(r.doubleValue),a=Mn(o.doubleValue);return s===a?gy(s)===gy(a):isNaN(s)&&isNaN(a)}return!1}(e,t);case 9:return wg(e.arrayValue.values||[],t.arrayValue.values||[],rl);case 10:case 11:return function(r,o){let s=r.mapValue.fields||{},a=o.mapValue.fields||{};if(cU(s)!==cU(a))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!rl(s[l],a[l])))return!1;return!0}(e,t);default:return xe()}}function yy(e,t){return(e.values||[]).find(n=>rl(n,t))!==void 0}function Du(e,t){if(e===t)return 0;let n=fh(e),i=fh(t);if(n!==i)return at(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return at(e.booleanValue,t.booleanValue);case 2:return function(o,s){let a=Mn(o.integerValue||o.doubleValue),l=Mn(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return uU(e.timestampValue,t.timestampValue);case 4:return uU(vy(e),vy(t));case 5:return at(e.stringValue,t.stringValue);case 6:return function(o,s){let a=Eu(o),l=Eu(s);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(o,s){let a=o.split("/"),l=s.split("/");for(let c=0;c<a.length&&c<l.length;c++){let u=at(a[c],l[c]);if(u!==0)return u}return at(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(o,s){let a=at(Mn(o.latitude),Mn(s.latitude));return a!==0?a:at(Mn(o.longitude),Mn(s.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return dU(e.arrayValue,t.arrayValue);case 10:return function(o,s){var a,l,c,u;let d=o.fields||{},h=s.fields||{},p=(a=d.value)===null||a===void 0?void 0:a.arrayValue,g=(l=h.value)===null||l===void 0?void 0:l.arrayValue,m=at(((c=p?.values)===null||c===void 0?void 0:c.length)||0,((u=g?.values)===null||u===void 0?void 0:u.length)||0);return m!==0?m:dU(p,g)}(e.mapValue,t.mapValue);case 11:return function(o,s){if(o===wu.mapValue&&s===wu.mapValue)return 0;if(o===wu.mapValue)return 1;if(s===wu.mapValue)return-1;let a=o.fields||{},l=Object.keys(a),c=s.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){let h=at(l[d],u[d]);if(h!==0)return h;let p=Du(a[l[d]],c[u[d]]);if(p!==0)return p}return at(l.length,u.length)}(e.mapValue,t.mapValue);default:throw xe()}}function uU(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return at(e,t);let n=Zl(e),i=Zl(t),r=at(n.seconds,i.seconds);return r!==0?r:at(n.nanos,i.nanos)}function dU(e,t){let n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){let o=Du(n[r],i[r]);if(o)return o}return at(n.length,i.length)}function Sg(e){return wP(e)}function wP(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){let i=Zl(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Eu(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return ve.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",r=!0;for(let o of n.values||[])r?r=!1:i+=",",i+=wP(o);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",o=!0;for(let s of i)o?o=!1:r+=",",r+=`${s}:${wP(n.fields[s])}`;return r+"}"}(e.mapValue):xe()}function ph(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function bP(e){return!!e&&"integerValue"in e}function Cy(e){return!!e&&"arrayValue"in e}function hU(e){return!!e&&"nullValue"in e}function fU(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function L_(e){return!!e&&"mapValue"in e}function VE(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function cy(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return Eh(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=cy(i)),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=cy(e.arrayValue.values[n]);return t}return Object.assign({},e)}function bj(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Sj={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function qge(e){return"nullValue"in e?N_:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?ph(xu.empty(),ve.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?VE(e)?Sj:{mapValue:{}}:xe()}function Kge(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?ph(xu.empty(),ve.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?Sj:"mapValue"in e?VE(e)?{mapValue:{}}:wu:xe()}function pU(e,t){let n=Du(e.value,t.value);return n!==0?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function gU(e,t){let n=Du(e.value,t.value);return n!==0?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var yr=class e{constructor(t){this.value=t}static empty(){return new e({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!L_(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=cy(n)}setAll(t){let n=ii.emptyPath(),i={},r=[];t.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}s?i[a.lastSegment()]=cy(s):r.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(t){let n=this.field(t.popLast());L_(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return rl(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=n.mapValue.fields[t.get(i)];L_(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(t,n,i){Eh(n,(r,o)=>t[r]=o);for(let r of i)delete t[r]}clone(){return new e(cy(this.value))}};function _j(e){let t=[];return Eh(e.fields,(n,i)=>{let r=new ii([n]);if(L_(i)){let o=_j(i.mapValue).fields;if(o.length===0)t.push(r);else for(let s of o)t.push(r.child(s))}else t.push(r)}),new Qo(t)}var yi=class e{constructor(t,n,i,r,o,s,a){this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(t){return new e(t,0,ze.min(),ze.min(),ze.min(),yr.empty(),0)}static newFoundDocument(t,n,i,r){return new e(t,1,n,ze.min(),i,r,0)}static newNoDocument(t,n){return new e(t,2,n,ze.min(),ze.min(),yr.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,ze.min(),ze.min(),yr.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=yr.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=yr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ol=class{constructor(t,n){this.position=t,this.inclusive=n}};function mU(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){let o=t[r],s=e.position[r];if(o.field.isKeyField()?i=ve.comparator(ve.fromName(s.referenceValue),n.key):i=Du(s,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function vU(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!rl(e.position[n],t.position[n]))return!1;return!0}var gh=class{constructor(t,n="asc"){this.field=t,this.dir=n}};function Yge(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var K_=class{},Ft=class e extends K_{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new EP(t,n,i):n==="array-contains"?new TP(t,i):n==="in"?new Y_(t,i):n==="not-in"?new RP(t,i):n==="array-contains-any"?new IP(t,i):new e(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new xP(t,i):new DP(t,i)}matches(t){let n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Du(n,this.value)):n!==null&&fh(this.value)===fh(n)&&this.matchesComparison(Du(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return xe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},en=class e extends K_{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new e(t,n)}matches(t){return _g(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function _g(e){return e.op==="and"}function SP(e){return e.op==="or"}function hk(e){return Ej(e)&&_g(e)}function Ej(e){for(let t of e.filters)if(t instanceof en)return!1;return!0}function _P(e){if(e instanceof Ft)return e.field.canonicalString()+e.op.toString()+Sg(e.value);if(hk(e))return e.filters.map(t=>_P(t)).join(",");{let t=e.filters.map(n=>_P(n)).join(",");return`${e.op}(${t})`}}function xj(e,t){return e instanceof Ft?function(i,r){return r instanceof Ft&&i.op===r.op&&i.field.isEqual(r.field)&&rl(i.value,r.value)}(e,t):e instanceof en?function(i,r){return r instanceof en&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,s,a)=>o&&xj(s,r.filters[a]),!0):!1}(e,t):void xe()}function Dj(e,t){let n=e.filters.concat(t);return en.create(n,e.op)}function Tj(e){return e instanceof Ft?function(n){return`${n.field.canonicalString()} ${n.op} ${Sg(n.value)}`}(e):e instanceof en?function(n){return n.op.toString()+" {"+n.getFilters().map(Tj).join(" ,")+"}"}(e):"Filter"}var EP=class extends Ft{constructor(t,n,i){super(t,n,i),this.key=ve.fromName(i.referenceValue)}matches(t){let n=ve.comparator(t.key,this.key);return this.matchesComparison(n)}},xP=class extends Ft{constructor(t,n){super(t,"in",n),this.keys=Rj("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}},DP=class extends Ft{constructor(t,n){super(t,"not-in",n),this.keys=Rj("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}};function Rj(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ve.fromName(i.referenceValue))}var TP=class extends Ft{constructor(t,n){super(t,"array-contains",n)}matches(t){let n=t.data.field(this.field);return Cy(n)&&yy(n.arrayValue,this.value)}},Y_=class extends Ft{constructor(t,n){super(t,"in",n)}matches(t){let n=t.data.field(this.field);return n!==null&&yy(this.value.arrayValue,n)}},RP=class extends Ft{constructor(t,n){super(t,"not-in",n)}matches(t){if(yy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=t.data.field(this.field);return n!==null&&!yy(this.value.arrayValue,n)}},IP=class extends Ft{constructor(t,n){super(t,"array-contains-any",n)}matches(t){let n=t.data.field(this.field);return!(!Cy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>yy(this.value.arrayValue,i))}};var FP=class{constructor(t,n=null,i=[],r=[],o=null,s=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function AP(e,t=null,n=[],i=[],r=null,o=null,s=null){return new FP(e,t,n,i,r,o,s)}function mh(e){let t=me(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>_P(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Oy(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Sg(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Sg(i)).join(",")),t.ue=n}return t.ue}function Ny(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Yge(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!xj(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!vU(e.startAt,t.startAt)&&vU(e.endAt,t.endAt)}function Q_(e){return ve.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}function X_(e,t){return e.filters.filter(n=>n instanceof Ft&&n.field.isEqual(t))}function yU(e,t,n){let i=N_,r=!0;for(let o of X_(e,t)){let s=N_,a=!0;switch(o.op){case"<":case"<=":s=qge(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=N_}pU({value:i,inclusive:r},{value:s,inclusive:a})<0&&(i=s,r=a)}if(n!==null){for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){let s=n.position[o];pU({value:i,inclusive:r},{value:s,inclusive:n.inclusive})<0&&(i=s,r=n.inclusive);break}}return{value:i,inclusive:r}}function CU(e,t,n){let i=wu,r=!0;for(let o of X_(e,t)){let s=wu,a=!0;switch(o.op){case">=":case">":s=Kge(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=wu}gU({value:i,inclusive:r},{value:s,inclusive:a})>0&&(i=s,r=a)}if(n!==null){for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){let s=n.position[o];gU({value:i,inclusive:r},{value:s,inclusive:n.inclusive})>0&&(i=s,r=n.inclusive);break}}return{value:i,inclusive:r}}var da=class{constructor(t,n=null,i=[],r=[],o=null,s="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Ij(e,t,n,i,r,o,s,a){return new da(e,t,n,i,r,o,s,a)}function Vg(e){return new da(e)}function wU(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function fk(e){return e.collectionGroup!==null}function yg(e){let t=me(e);if(t.ce===null){t.ce=[];let n=new Set;for(let o of t.explicitOrderBy)t.ce.push(o),n.add(o.field.canonicalString());let i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new fn(ii.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||t.ce.push(new gh(o,i))}),n.has(ii.keyField().canonicalString())||t.ce.push(new gh(ii.keyField(),i))}return t.ce}function zr(e){let t=me(e);return t.le||(t.le=Qge(t,yg(e))),t.le}function Qge(e,t){if(e.limitType==="F")return AP(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new gh(r.field,o)});let n=e.endAt?new ol(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ol(e.startAt.position,e.startAt.inclusive):null;return AP(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function MP(e,t){let n=e.filters.concat([t]);return new da(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function $_(e,t,n){return new da(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ly(e,t){return Ny(zr(e),zr(t))&&e.limitType===t.limitType}function Fj(e){return`${mh(zr(e))}|lt:${e.limitType}`}function hg(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>Tj(r)).join(", ")}]`),Oy(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Sg(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Sg(r)).join(",")),`Target(${i})`}(zr(e))}; limitType=${e.limitType})`}function Vy(e,t){return t.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ve.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(e,t)&&function(i,r){for(let o of yg(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(e,t)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(e,t)&&function(i,r){return!(i.startAt&&!function(s,a,l){let c=mU(s,a,l);return s.inclusive?c<=0:c<0}(i.startAt,yg(i),r)||i.endAt&&!function(s,a,l){let c=mU(s,a,l);return s.inclusive?c>=0:c>0}(i.endAt,yg(i),r))}(e,t)}function Aj(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Mj(e){return(t,n)=>{let i=!1;for(let r of yg(e)){let o=Xge(r,t,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function Xge(e,t,n){let i=e.field.isKeyField()?ve.comparator(t.key,n.key):function(o,s,a){let l=s.data.field(o),c=a.data.field(o);return l!==null&&c!==null?Du(l,c):xe()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return xe()}}var sl=class{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){let n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,t))return o}}has(t){return this.get(t)!==void 0}set(t,n){let i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,n]);r.push([t,n]),this.innerSize++}delete(t){let n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Eh(this.inner,(n,i)=>{for(let[r,o]of i)t(r,o)})}isEmpty(){return Cj(this.inner)}size(){return this.innerSize}};var $ge=new En(ve.comparator);function wo(){return $ge}var Pj=new En(ve.comparator);function ay(...e){let t=Pj;for(let n of e)t=t.insert(n.key,n);return t}function kj(e){let t=Pj;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function el(){return uy()}function Oj(){return uy()}function uy(){return new sl(e=>e.toString(),(e,t)=>e.isEqual(t))}var Zge=new En(ve.comparator),Jge=new fn(ve.comparator);function ct(...e){let t=Jge;for(let n of e)t=t.add(n);return t}var eme=new fn(at);function pk(){return eme}function gk(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gy(t)?"-0":t}}function Nj(e){return{integerValue:""+e}}function Lj(e,t){return pj(t)?Nj(t):gk(e,t)}var Eg=class{constructor(){this._=void 0}};function tme(e,t,n){return e instanceof Tu?function(r,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&LE(o)&&(o=dk(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,t):e instanceof Jl?Bj(e,t):e instanceof ec?Gj(e,t):function(r,o){let s=Vj(r,o),a=bU(s)+bU(r.Pe);return bP(s)&&bP(r.Pe)?Nj(a):gk(r.serializer,a)}(e,t)}function nme(e,t,n){return e instanceof Jl?Bj(e,t):e instanceof ec?Gj(e,t):n}function Vj(e,t){return e instanceof Ru?function(i){return bP(i)||function(o){return!!o&&"doubleValue"in o}(i)}(t)?t:{integerValue:0}:null}var Tu=class extends Eg{},Jl=class extends Eg{constructor(t){super(),this.elements=t}};function Bj(e,t){let n=Hj(t);for(let i of e.elements)n.some(r=>rl(r,i))||n.push(i);return{arrayValue:{values:n}}}var ec=class extends Eg{constructor(t){super(),this.elements=t}};function Gj(e,t){let n=Hj(t);for(let i of e.elements)n=n.filter(r=>!rl(r,i));return{arrayValue:{values:n}}}var Ru=class extends Eg{constructor(t,n){super(),this.serializer=t,this.Pe=n}};function bU(e){return Mn(e.integerValue||e.doubleValue)}function Hj(e){return Cy(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var vh=class{constructor(t,n){this.field=t,this.transform=n}};function ime(e,t){return e.field.isEqual(t.field)&&function(i,r){return i instanceof Jl&&r instanceof Jl||i instanceof ec&&r instanceof ec?wg(i.elements,r.elements,rl):i instanceof Ru&&r instanceof Ru?rl(i.Pe,r.Pe):i instanceof Tu&&r instanceof Tu}(e.transform,t.transform)}var PP=class{constructor(t,n){this.version=t,this.transformResults=n}},Kn=class e{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function V_(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}var xg=class{};function zj(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Fu(e.key,Kn.none()):new Iu(e.key,e.data,Kn.none());{let n=e.data,i=yr.empty(),r=new fn(ii.comparator);for(let o of t.fields)if(!r.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?i.delete(o):i.set(o,s),r=r.add(o)}return new ha(e.key,i,new Qo(r.toArray()),Kn.none())}}function rme(e,t,n){e instanceof Iu?function(r,o,s){let a=r.value.clone(),l=_U(r.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(e,t,n):e instanceof ha?function(r,o,s){if(!V_(r.precondition,o))return void o.convertToUnknownDocument(s.version);let a=_U(r.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(Uj(r)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(e,t,n):function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,n)}function dy(e,t,n,i){return e instanceof Iu?function(o,s,a,l){if(!V_(o.precondition,s))return a;let c=o.value.clone(),u=EU(o.fieldTransforms,l,s);return c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(e,t,n,i):e instanceof ha?function(o,s,a,l){if(!V_(o.precondition,s))return a;let c=EU(o.fieldTransforms,l,s),u=s.data;return u.setAll(Uj(o)),u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(e,t,n,i):function(o,s,a){return V_(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(e,t,n)}function ome(e,t){let n=null;for(let i of e.fieldTransforms){let r=t.data.field(i.field),o=Vj(i.transform,r||null);o!=null&&(n===null&&(n=yr.empty()),n.set(i.field,o))}return n||null}function SU(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&wg(i,r,(o,s)=>ime(o,s))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Iu=class extends xg{constructor(t,n,i,r=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},ha=class extends xg{constructor(t,n,i,r,o=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Uj(e){let t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=e.data.field(n);t.set(n,i)}}),t}function _U(e,t,n){let i=new Map;Ie(e.length===n.length);for(let r=0;r<n.length;r++){let o=e[r],s=o.transform,a=t.data.field(o.field);i.set(o.field,nme(s,a,n[r]))}return i}function EU(e,t,n){let i=new Map;for(let r of e){let o=r.transform,s=n.data.field(r.field);i.set(r.field,tme(o,s,t))}return i}var Fu=class extends xg{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},wy=class extends xg{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var by=class{constructor(t,n,i,r){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(t.key)&&rme(o,t,i[r])}}applyToLocalView(t,n){for(let i of this.baseMutations)i.key.isEqual(t.key)&&(n=dy(i,t,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(t.key)&&(n=dy(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){let i=Oj();return this.mutations.forEach(r=>{let o=t.get(r.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(r.key)?null:a;let l=zj(s,a);l!==null&&i.set(r.key,l),s.isValidDocument()||s.convertToNoDocument(ze.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ct())}isEqual(t){return this.batchId===t.batchId&&wg(this.mutations,t.mutations,(n,i)=>SU(n,i))&&wg(this.baseMutations,t.baseMutations,(n,i)=>SU(n,i))}},kP=class e{constructor(t,n,i,r){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(t,n,i){Ie(t.mutations.length===i.length);let r=function(){return Zge}(),o=t.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new e(t,n,i,r)}};var Sy=class{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var OP=class{constructor(t,n){this.count=t,this.unchangedNames=n}};var gi,Gt;function jj(e){switch(e){default:return xe();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function Wj(e){if(e===void 0)return ni("GRPC error has no .code"),K.UNKNOWN;switch(e){case gi.OK:return K.OK;case gi.CANCELLED:return K.CANCELLED;case gi.UNKNOWN:return K.UNKNOWN;case gi.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case gi.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case gi.INTERNAL:return K.INTERNAL;case gi.UNAVAILABLE:return K.UNAVAILABLE;case gi.UNAUTHENTICATED:return K.UNAUTHENTICATED;case gi.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case gi.NOT_FOUND:return K.NOT_FOUND;case gi.ALREADY_EXISTS:return K.ALREADY_EXISTS;case gi.PERMISSION_DENIED:return K.PERMISSION_DENIED;case gi.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case gi.ABORTED:return K.ABORTED;case gi.OUT_OF_RANGE:return K.OUT_OF_RANGE;case gi.UNIMPLEMENTED:return K.UNIMPLEMENTED;case gi.DATA_LOSS:return K.DATA_LOSS;default:return xe()}}(Gt=gi||(gi={}))[Gt.OK=0]="OK",Gt[Gt.CANCELLED=1]="CANCELLED",Gt[Gt.UNKNOWN=2]="UNKNOWN",Gt[Gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gt[Gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gt[Gt.NOT_FOUND=5]="NOT_FOUND",Gt[Gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gt[Gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gt[Gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gt[Gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gt[Gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gt[Gt.ABORTED=10]="ABORTED",Gt[Gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gt[Gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gt[Gt.INTERNAL=13]="INTERNAL",Gt[Gt.UNAVAILABLE=14]="UNAVAILABLE",Gt[Gt.DATA_LOSS=15]="DATA_LOSS";var xU=null;function qj(){return new TextEncoder}var sme=new gu([4294967295,4294967295],0);function DU(e){let t=qj().encode(e),n=new XM;return n.update(t),new Uint8Array(n.digest())}function TU(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new gu([n,i],0),new gu([r,o],0)]}var NP=class e{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new dh(`Invalid padding: ${n}`);if(i<0)throw new dh(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new dh(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new dh(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=gu.fromNumber(this.Ie)}Ee(t,n,i){let r=t.add(n.multiply(gu.fromNumber(i)));return r.compare(sme)===1&&(r=new gu([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;let n=DU(t),[i,r]=TU(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);if(!this.de(s))return!1}return!0}static create(t,n,i){let r=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),s=new e(o,r,n);return i.forEach(a=>s.insert(a)),s}insert(t){if(this.Ie===0)return;let n=DU(t),[i,r]=TU(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);this.Ae(s)}}Ae(t){let n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}},dh=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var _y=class e{constructor(t,n,i,r,o){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,n,i){let r=new Map;return r.set(t,Ey.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new e(ze.min(),r,new En(at),wo(),ct())}},Ey=class e{constructor(t,n,i,r,o){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new e(i,n,ct(),ct(),ct())}};var Cg=class{constructor(t,n,i,r){this.Re=t,this.removedTargetIds=n,this.key=i,this.Ve=r}},Z_=class{constructor(t,n){this.targetId=t,this.me=n}},J_=class{constructor(t,n,i=oi.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r}},eE=class{constructor(){this.fe=0,this.ge=IU(),this.pe=oi.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=ct(),n=ct(),i=ct();return this.ge.forEach((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:xe()}}),new Ey(this.pe,this.ye,t,n,i)}Ce(){this.we=!1,this.ge=IU()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},LP=class{constructor(t){this.Le=t,this.Be=new Map,this.ke=wo(),this.qe=RU(),this.Qe=new En(at)}Ke(t){for(let n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(let n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{let i=this.Ge(n);switch(t.state){case 0:this.ze(n)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(t.resumeToken));break;default:xe()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(t){let n=t.targetId,i=t.me.count,r=this.Je(n);if(r){let o=r.target;if(Q_(o))if(i===0){let s=new ve(o.path);this.Ue(n,s,yi.newNoDocument(s,ze.min()))}else Ie(i===1);else{let s=this.Ye(n);if(s!==i){let a=this.Ze(t),l=a?this.Xe(a,t,s):1;if(l!==0){this.je(n);let c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}xU?.et(function(u,d,h,p,g){var m,v,C,S,_,D;let F={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},I=d.unchangedNames;return I&&(F.bloomFilter={applied:g===0,hashCount:(m=I?.hashCount)!==null&&m!==void 0?m:0,bitmapLength:(S=(C=(v=I?.bits)===null||v===void 0?void 0:v.bitmap)===null||C===void 0?void 0:C.length)!==null&&S!==void 0?S:0,padding:(D=(_=I?.bits)===null||_===void 0?void 0:_.padding)!==null&&D!==void 0?D:0,mightContain:E=>{var b;return(b=p?.mightContain(E))!==null&&b!==void 0&&b}}),F}(s,t.me,this.Le.tt(),a,l))}}}}Ze(t){let n=t.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n,s,a;try{s=Eu(i).toUint8Array()}catch(l){if(l instanceof q_)return ua("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new NP(s,r,o)}catch(l){return ua(l instanceof dh?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(t,n,i){return n.me.count===i-this.nt(t,n.targetId)?0:2}nt(t,n){let i=this.Le.getRemoteKeysForTarget(n),r=0;return i.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,o,null),r++)}),r}rt(t){let n=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&Q_(a.target)){let l=new ve(a.target.path);this.ke.get(l)!==null||this.it(s,l)||this.Ue(s,l,yi.newNoDocument(l,t))}o.be&&(n.set(s,o.ve()),o.Ce())}});let i=ct();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{let c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(t));let r=new _y(t,n,this.Qe,this.ke,i);return this.ke=wo(),this.qe=RU(),this.Qe=new En(at),r}$e(t,n){if(!this.ze(t))return;let i=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,i){if(!this.ze(t))return;let r=this.Ge(t);this.it(t,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(t){this.Be.delete(t)}Ye(t){let n=this.Ge(t).ve();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new eE,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new fn(at),this.qe=this.qe.insert(t,n)),n}ze(t){let n=this.Je(t)!==null;return n||te("WatchChangeAggregator","Detected inactive target",t),n}Je(t){let n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new eE),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}};function RU(){return new En(ve.comparator)}function IU(){return new En(ve.comparator)}var ame={asc:"ASCENDING",desc:"DESCENDING"},lme={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cme={and:"AND",or:"OR"},VP=class{constructor(t,n){this.databaseId=t,this.useProto3Json=n}};function BP(e,t){return e.useProto3Json||Oy(t)?t:{value:t}}function Dg(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Kj(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ume(e,t){return Dg(e,t.toTimestamp())}function ri(e){return Ie(!!e),ze.fromTimestamp(function(n){let i=Zl(n);return new yn(i.seconds,i.nanos)}(e))}function mk(e,t){return GP(e,t).canonicalString()}function GP(e,t){let n=function(r){return new Ht(["projects",r.projectId,"databases",r.database])}(e).child("documents");return t===void 0?n:n.child(t)}function Yj(e){let t=Ht.fromString(e);return Ie(rW(t)),t}function xy(e,t){return mk(e.databaseId,t.path)}function nl(e,t){let n=Yj(t);if(n.get(1)!==e.databaseId.projectId)throw new ee(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ee(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ve($j(n))}function Qj(e,t){return mk(e.databaseId,t)}function Xj(e){let t=Yj(e);return t.length===4?Ht.emptyPath():$j(t)}function HP(e){return new Ht(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function $j(e){return Ie(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function FU(e,t,n){return{name:xy(e,t),fields:n.value.mapValue.fields}}function Zj(e,t,n){let i=nl(e,t.name),r=ri(t.updateTime),o=t.createTime?ri(t.createTime):ze.min(),s=new yr({mapValue:{fields:t.fields}}),a=yi.newFoundDocument(i,r,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function dme(e,t){return"found"in t?function(i,r){Ie(!!r.found),r.found.name,r.found.updateTime;let o=nl(i,r.found.name),s=ri(r.found.updateTime),a=r.found.createTime?ri(r.found.createTime):ze.min(),l=new yr({mapValue:{fields:r.found.fields}});return yi.newFoundDocument(o,s,a,l)}(e,t):"missing"in t?function(i,r){Ie(!!r.missing),Ie(!!r.readTime);let o=nl(i,r.missing),s=ri(r.readTime);return yi.newNoDocument(o,s)}(e,t):xe()}function hme(e,t){let n;if("targetChange"in t){t.targetChange;let i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:xe()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=function(c,u){return c.useProto3Json?(Ie(u===void 0||typeof u=="string"),oi.fromBase64String(u||"")):(Ie(u===void 0||u instanceof Buffer||u instanceof Uint8Array),oi.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(c){let u=c.code===void 0?K.UNKNOWN:Wj(c.code);return new ee(u,c.message||"")}(s);n=new J_(i,r,o,a||null)}else if("documentChange"in t){t.documentChange;let i=t.documentChange;i.document,i.document.name,i.document.updateTime;let r=nl(e,i.document.name),o=ri(i.document.updateTime),s=i.document.createTime?ri(i.document.createTime):ze.min(),a=new yr({mapValue:{fields:i.document.fields}}),l=yi.newFoundDocument(r,o,s,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new Cg(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;let i=t.documentDelete;i.document;let r=nl(e,i.document),o=i.readTime?ri(i.readTime):ze.min(),s=yi.newNoDocument(r,o),a=i.removedTargetIds||[];n=new Cg([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;let i=t.documentRemove;i.document;let r=nl(e,i.document),o=i.removedTargetIds||[];n=new Cg([],o,r,null)}else{if(!("filter"in t))return xe();{t.filter;let i=t.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,s=new OP(r,o),a=i.targetId;n=new Z_(a,s)}}return n}function Dy(e,t){let n;if(t instanceof Iu)n={update:FU(e,t.key,t.value)};else if(t instanceof Fu)n={delete:xy(e,t.key)};else if(t instanceof ha)n={update:FU(e,t.key,t.data),updateMask:yme(t.fieldMask)};else{if(!(t instanceof wy))return xe();n={verify:xy(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(o,s){let a=s.transform;if(a instanceof Tu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Jl)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ec)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ru)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw xe()}(0,i))),t.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:ume(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:xe()}(e,t.precondition)),n}function zP(e,t){let n=t.currentDocument?function(o){return o.updateTime!==void 0?Kn.updateTime(ri(o.updateTime)):o.exists!==void 0?Kn.exists(o.exists):Kn.none()}(t.currentDocument):Kn.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,a){let l=null;if("setToServerValue"in a)Ie(a.setToServerValue==="REQUEST_TIME"),l=new Tu;else if("appendMissingElements"in a){let u=a.appendMissingElements.values||[];l=new Jl(u)}else if("removeAllFromArray"in a){let u=a.removeAllFromArray.values||[];l=new ec(u)}else"increment"in a?l=new Ru(s,a.increment):xe();let c=ii.fromServerFormat(a.fieldPath);return new vh(c,l)}(e,r)):[];if(t.update){t.update.name;let r=nl(e,t.update.name),o=new yr({mapValue:{fields:t.update.fields}});if(t.updateMask){let s=function(l){let c=l.fieldPaths||[];return new Qo(c.map(u=>ii.fromServerFormat(u)))}(t.updateMask);return new ha(r,o,s,n,i)}return new Iu(r,o,n,i)}if(t.delete){let r=nl(e,t.delete);return new Fu(r,n)}if(t.verify){let r=nl(e,t.verify);return new wy(r,n)}return xe()}function fme(e,t){return e&&e.length>0?(Ie(t!==void 0),e.map(n=>function(r,o){let s=r.updateTime?ri(r.updateTime):ri(o);return s.isEqual(ze.min())&&(s=ri(o)),new PP(s,r.transformResults||[])}(n,t))):[]}function Jj(e,t){return{documents:[Qj(e,t.path)]}}function eW(e,t){let n={structuredQuery:{}},i=t.path,r;t.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Qj(e,r);let o=function(c){if(c.length!==0)return iW(en.create(c,"and"))}(t.filters);o&&(n.structuredQuery.where=o);let s=function(c){if(c.length!==0)return c.map(u=>function(h){return{field:fg(h.field),direction:gme(h.dir)}}(u))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);let a=BP(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{_t:n,parent:r}}function tW(e){let t=Xj(e.parent),n=e.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){Ie(i===1);let u=n.from[0];u.allDescendants?r=u.collectionId:t=t.child(u.collectionId)}let o=[];n.where&&(o=function(d){let h=nW(d);return h instanceof en&&hk(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(h=>function(g){return new gh(pg(g.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,Oy(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(d){let h=!!d.before,p=d.values||[];return new ol(p,h)}(n.startAt));let c=null;return n.endAt&&(c=function(d){let h=!d.before,p=d.values||[];return new ol(p,h)}(n.endAt)),Ij(t,r,s,o,a,"F",l,c)}function pme(e,t){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function nW(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=pg(n.unaryFilter.field);return Ft.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=pg(n.unaryFilter.field);return Ft.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=pg(n.unaryFilter.field);return Ft.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=pg(n.unaryFilter.field);return Ft.create(s,"!=",{nullValue:"NULL_VALUE"});default:return xe()}}(e):e.fieldFilter!==void 0?function(n){return Ft.create(pg(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xe()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return en.create(n.compositeFilter.filters.map(i=>nW(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return xe()}}(n.compositeFilter.op))}(e):xe()}function gme(e){return ame[e]}function mme(e){return lme[e]}function vme(e){return cme[e]}function fg(e){return{fieldPath:e.canonicalString()}}function pg(e){return ii.fromServerFormat(e.fieldPath)}function iW(e){return e instanceof Ft?function(n){if(n.op==="=="){if(fU(n.value))return{unaryFilter:{field:fg(n.field),op:"IS_NAN"}};if(hU(n.value))return{unaryFilter:{field:fg(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(fU(n.value))return{unaryFilter:{field:fg(n.field),op:"IS_NOT_NAN"}};if(hU(n.value))return{unaryFilter:{field:fg(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fg(n.field),op:mme(n.op),value:n.value}}}(e):e instanceof en?function(n){let i=n.getFilters().map(r=>iW(r));return i.length===1?i[0]:{compositeFilter:{op:vme(n.op),filters:i}}}(e):xe()}function yme(e){let t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function rW(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}var Tg=class e{constructor(t,n,i,r,o=ze.min(),s=ze.min(),a=oi.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var tE=class{constructor(t){this.ct=t}};function Cme(e,t){let n;if(t.document)n=Zj(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){let i=ve.fromSegments(t.noDocument.path),r=Ch(t.noDocument.readTime);n=yi.newNoDocument(i,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return xe();{let i=ve.fromSegments(t.unknownDocument.path),r=Ch(t.unknownDocument.version);n=yi.newUnknownDocument(i,r)}}return t.readTime&&n.setReadTime(function(r){let o=new yn(r[0],r[1]);return ze.fromTimestamp(o)}(t.readTime)),n}function AU(e,t){let n=t.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:nE(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document=function(o,s){return{name:xy(o,s.key),fields:s.data.value.mapValue.fields,updateTime:Dg(o,s.version.toTimestamp()),createTime:Dg(o,s.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:yh(t.version)};else{if(!t.isUnknownDocument())return xe();i.unknownDocument={path:n.path.toArray(),version:yh(t.version)}}return i}function nE(e){let t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function yh(e){let t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ch(e){let t=new yn(e.seconds,e.nanoseconds);return ze.fromTimestamp(t)}function lh(e,t){let n=(t.baseMutations||[]).map(o=>zP(e.ct,o));for(let o=0;o<t.mutations.length-1;++o){let s=t.mutations[o];if(o+1<t.mutations.length&&t.mutations[o+1].transform!==void 0){let a=t.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}let i=t.mutations.map(o=>zP(e.ct,o)),r=yn.fromMillis(t.localWriteTimeMs);return new by(t.batchId,r,n,i)}function ly(e){let t=Ch(e.readTime),n=e.lastLimboFreeSnapshotVersion!==void 0?Ch(e.lastLimboFreeSnapshotVersion):ze.min(),i;return i=function(o){return o.documents!==void 0}(e.query)?function(o){return Ie(o.documents.length===1),zr(Vg(Xj(o.documents[0])))}(e.query):function(o){return zr(tW(o))}(e.query),new Tg(i,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,oi.fromBase64String(e.resumeToken))}function oW(e,t){let n=yh(t.snapshotVersion),i=yh(t.lastLimboFreeSnapshotVersion),r;r=Q_(t.target)?Jj(e.ct,t.target):eW(e.ct,t.target)._t;let o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:mh(t.target),readTime:n,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function vk(e){let t=tW({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?$_(t,t.limit,"L"):t}function nP(e,t){return new Sy(t.largestBatchId,zP(e.ct,t.overlayMutation))}function MU(e,t){let n=t.path.lastSegment();return[e,Hr(t.path.popLast()),n]}function PU(e,t,n,i){return{indexId:e,uid:t,sequenceNumber:n,readTime:yh(i.readTime),documentKey:Hr(i.documentKey.path),largestBatchId:i.largestBatchId}}var UP=class{getBundleMetadata(t,n){return kU(t).get(n).next(i=>{if(i)return function(o){return{id:o.bundleId,createTime:Ch(o.createTime),version:o.version}}(i)})}saveBundleMetadata(t,n){return kU(t).put(function(r){return{bundleId:r.id,createTime:yh(ri(r.createTime)),version:r.version}}(n))}getNamedQuery(t,n){return OU(t).get(n).next(i=>{if(i)return function(o){return{name:o.name,query:vk(o.bundledQuery),readTime:Ch(o.readTime)}}(i)})}saveNamedQuery(t,n){return OU(t).put(function(r){return{name:r.name,readTime:yh(ri(r.readTime)),bundledQuery:r.bundledQuery}}(n))}};function kU(e){return Fi(e,"bundles")}function OU(e){return Fi(e,"namedQueries")}var iE=class e{constructor(t,n){this.serializer=t,this.userId=n}static lt(t,n){let i=n.uid||"";return new e(t,i)}getOverlay(t,n){return iy(t).get(MU(this.userId,n)).next(i=>i?nP(this.serializer,i):null)}getOverlays(t,n){let i=el();return U.forEach(n,r=>this.getOverlay(t,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(t,n,i){let r=[];return i.forEach((o,s)=>{let a=new Sy(n,s);r.push(this.ht(t,a))}),U.waitFor(r)}removeOverlaysForBatchId(t,n,i){let r=new Set;n.forEach(s=>r.add(Hr(s.getCollectionPath())));let o=[];return r.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,i+1],!1,!0);o.push(iy(t).j("collectionPathOverlayIndex",a))}),U.waitFor(o)}getOverlaysForCollection(t,n,i){let r=el(),o=Hr(n),s=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return iy(t).U("collectionPathOverlayIndex",s).next(a=>{for(let l of a){let c=nP(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(t,n,i,r){let o=el(),s,a=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return iy(t).J({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{let d=nP(this.serializer,c);o.size()<r||d.largestBatchId===s?(o.set(d.getKey(),d),s=d.largestBatchId):u.done()}).next(()=>o)}ht(t,n){return iy(t).put(function(r,o,s){let[a,l,c]=MU(o,s.mutation.key);return{userId:o,collectionPath:l,documentId:c,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Dy(r.ct,s.mutation)}}(this.serializer,this.userId,n))}};function iy(e){return Fi(e,"documentOverlays")}var jP=class{Pt(t){return Fi(t,"globals")}getSessionToken(t){return this.Pt(t).get("sessionToken").next(n=>{let i=n?.value;return i?oi.fromUint8Array(i):oi.EMPTY_BYTE_STRING})}setSessionToken(t,n){return this.Pt(t).put({name:"sessionToken",value:n.toUint8Array()})}};var Xl=class{constructor(){}It(t,n){this.Tt(t,n),n.Et()}Tt(t,n){if("nullValue"in t)this.dt(n,5);else if("booleanValue"in t)this.dt(n,10),n.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(n,15),n.At(Mn(t.integerValue));else if("doubleValue"in t){let i=Mn(t.doubleValue);isNaN(i)?this.dt(n,13):(this.dt(n,15),gy(i)?n.At(0):n.At(i))}else if("timestampValue"in t){let i=t.timestampValue;this.dt(n,20),typeof i=="string"&&(i=Zl(i)),n.Rt(`${i.seconds||""}`),n.At(i.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,n),this.ft(n);else if("bytesValue"in t)this.dt(n,30),n.gt(Eu(t.bytesValue)),this.ft(n);else if("referenceValue"in t)this.yt(t.referenceValue,n);else if("geoPointValue"in t){let i=t.geoPointValue;this.dt(n,45),n.At(i.latitude||0),n.At(i.longitude||0)}else"mapValue"in t?bj(t)?this.dt(n,Number.MAX_SAFE_INTEGER):VE(t)?this.wt(t.mapValue,n):(this.St(t.mapValue,n),this.ft(n)):"arrayValue"in t?(this.bt(t.arrayValue,n),this.ft(n)):xe()}Vt(t,n){this.dt(n,25),this.Dt(t,n)}Dt(t,n){n.Rt(t)}St(t,n){let i=t.fields||{};this.dt(n,55);for(let r of Object.keys(i))this.Vt(r,n),this.Tt(i[r],n)}wt(t,n){var i,r;let o=t.fields||{};this.dt(n,53);let s="value",a=((r=(i=o[s].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.length)||0;this.dt(n,15),n.At(Mn(a)),this.Vt(s,n),this.Tt(o[s],n)}bt(t,n){let i=t.values||[];this.dt(n,50);for(let r of i)this.Tt(r,n)}yt(t,n){this.dt(n,37),ve.fromName(t).path.forEach(i=>{this.dt(n,60),this.Dt(i,n)})}dt(t,n){t.At(n)}ft(t){t.At(2)}};Xl.vt=new Xl;function wme(e){if(e===0)return 8;let t=0;return!(e>>4)&&(t+=4,e<<=4),!(e>>6)&&(t+=2,e<<=2),!(e>>7)&&(t+=1),t}function NU(e){let t=64-function(i){let r=0;for(let o=0;o<8;++o){let s=wme(255&i[o]);if(r+=s,s!==8)break}return r}(e);return Math.ceil(t/8)}var WP=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(t){let n=t[Symbol.iterator](),i=n.next();for(;!i.done;)this.Ft(i.value),i=n.next();this.Mt()}xt(t){let n=t[Symbol.iterator](),i=n.next();for(;!i.done;)this.Ot(i.value),i=n.next();this.Nt()}Lt(t){for(let n of t){let i=n.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{let r=n.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Bt(t){for(let n of t){let i=n.charCodeAt(0);if(i<128)this.Ot(i);else if(i<2048)this.Ot(960|i>>>6),this.Ot(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ot(480|i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i);else{let r=n.codePointAt(0);this.Ot(240|r>>>18),this.Ot(128|63&r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r)}}this.Nt()}kt(t){let n=this.qt(t),i=NU(n);this.Qt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}Kt(t){let n=this.qt(t),i=NU(n);this.Qt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(t){this.Qt(t.length),this.buffer.set(t,this.position),this.position+=t.length}zt(){return this.buffer.slice(0,this.position)}qt(t){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(t),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Ft(t){let n=255&t;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(t){let n=255&t;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(t)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(t){this.Qt(1),this.buffer[this.position++]=t}Gt(t){this.Qt(1),this.buffer[this.position++]=~t}Qt(t){let n=t+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},qP=class{constructor(t){this.jt=t}gt(t){this.jt.Ct(t)}Rt(t){this.jt.Lt(t)}At(t){this.jt.kt(t)}Et(){this.jt.$t()}},KP=class{constructor(t){this.jt=t}gt(t){this.jt.xt(t)}Rt(t){this.jt.Bt(t)}At(t){this.jt.Kt(t)}Et(){this.jt.Wt()}},ch=class{constructor(){this.jt=new WP,this.Ht=new qP(this.jt),this.Jt=new KP(this.jt)}seed(t){this.jt.seed(t)}Yt(t){return t===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var uh=class e{constructor(t,n,i,r){this.indexId=t,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Zt(){let t=this.directionalValue.length,n=t===0||this.directionalValue[t-1]===255?t+1:t,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new e(this.indexId,this.documentKey,this.arrayValue,i)}};function mu(e,t){let n=e.indexId-t.indexId;return n!==0?n:(n=LU(e.arrayValue,t.arrayValue),n!==0?n:(n=LU(e.directionalValue,t.directionalValue),n!==0?n:ve.comparator(e.documentKey,t.documentKey)))}function LU(e,t){for(let n=0;n<e.length&&n<t.length;++n){let i=e[n]-t[n];if(i!==0)return i}return e.length-t.length}var rE=class{constructor(t){this.Xt=new fn((n,i)=>ii.comparator(n.field,i.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.en=t.orderBy,this.tn=[];for(let n of t.filters){let i=n;i.isInequality()?this.Xt=this.Xt.add(i):this.tn.push(i)}}get nn(){return this.Xt.size>1}rn(t){if(Ie(t.collectionGroup===this.collectionId),this.nn)return!1;let n=pP(t);if(n!==void 0&&!this.sn(n))return!1;let i=sh(t),r=new Set,o=0,s=0;for(;o<i.length&&this.sn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!r.has(a.field.canonicalString())){let l=i[o];if(!this.on(a,l)||!this._n(this.en[s++],l))return!1}++o}for(;o<i.length;++o){let a=i[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let t=new fn(ii.comparator),n=[];for(let i of this.tn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new vg(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),n.push(new vg(i.field,0))}for(let i of this.en)i.field.isKeyField()||t.has(i.field)||(t=t.add(i.field),n.push(new vg(i.field,i.dir==="asc"?0:1)));return new bg(bg.UNKNOWN_ID,this.collectionId,n,py.empty())}sn(t){for(let n of this.tn)if(this.on(n,t))return!0;return!1}on(t,n){if(t===void 0||!t.field.isEqual(n.fieldPath))return!1;let i=t.op==="array-contains"||t.op==="array-contains-any";return n.kind===2===i}_n(t,n){return!!t.field.isEqual(n.fieldPath)&&(n.kind===0&&t.dir==="asc"||n.kind===1&&t.dir==="desc")}};function sW(e){var t,n;if(Ie(e instanceof Ft||e instanceof en),e instanceof Ft){if(e instanceof Y_){let r=((n=(t=e.value.arrayValue)===null||t===void 0?void 0:t.values)===null||n===void 0?void 0:n.map(o=>Ft.create(e.field,"==",o)))||[];return en.create(r,"or")}return e}let i=e.filters.map(r=>sW(r));return en.create(i,e.op)}function bme(e){if(e.getFilters().length===0)return[];let t=XP(sW(e));return Ie(aW(t)),YP(t)||QP(t)?[t]:t.getFilters()}function YP(e){return e instanceof Ft}function QP(e){return e instanceof en&&hk(e)}function aW(e){return YP(e)||QP(e)||function(n){if(n instanceof en&&SP(n)){for(let i of n.getFilters())if(!YP(i)&&!QP(i))return!1;return!0}return!1}(e)}function XP(e){if(Ie(e instanceof Ft||e instanceof en),e instanceof Ft)return e;if(e.filters.length===1)return XP(e.filters[0]);let t=e.filters.map(i=>XP(i)),n=en.create(t,e.op);return n=oE(n),aW(n)?n:(Ie(n instanceof en),Ie(_g(n)),Ie(n.filters.length>1),n.filters.reduce((i,r)=>yk(i,r)))}function yk(e,t){let n;return Ie(e instanceof Ft||e instanceof en),Ie(t instanceof Ft||t instanceof en),n=e instanceof Ft?t instanceof Ft?function(r,o){return en.create([r,o],"and")}(e,t):VU(e,t):t instanceof Ft?VU(t,e):function(r,o){if(Ie(r.filters.length>0&&o.filters.length>0),_g(r)&&_g(o))return Dj(r,o.getFilters());let s=SP(r)?r:o,a=SP(r)?o:r,l=s.filters.map(c=>yk(c,a));return en.create(l,"or")}(e,t),oE(n)}function VU(e,t){if(_g(t))return Dj(t,e.getFilters());{let n=t.filters.map(i=>yk(e,i));return en.create(n,"or")}}function oE(e){if(Ie(e instanceof Ft||e instanceof en),e instanceof Ft)return e;let t=e.getFilters();if(t.length===1)return oE(t[0]);if(Ej(e))return e;let n=t.map(r=>oE(r)),i=[];return n.forEach(r=>{r instanceof Ft?i.push(r):r instanceof en&&(r.op===e.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:en.create(i,e.op)}var $P=class{constructor(){this.un=new Ty}addToCollectionParentIndex(t,n){return this.un.add(n),U.resolve()}getCollectionParents(t,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(t,n){return U.resolve()}deleteFieldIndex(t,n){return U.resolve()}deleteAllFieldIndexes(t){return U.resolve()}createTargetIndexes(t,n){return U.resolve()}getDocumentsMatchingTarget(t,n){return U.resolve(null)}getIndexType(t,n){return U.resolve(0)}getFieldIndexes(t,n){return U.resolve([])}getNextCollectionGroupToUpdate(t){return U.resolve(null)}getMinOffset(t,n){return U.resolve(bs.min())}getMinOffsetFromCollectionGroup(t,n){return U.resolve(bs.min())}updateCollectionGroup(t,n,i){return U.resolve()}updateIndexEntries(t,n){return U.resolve()}},Ty=class{constructor(){this.index={}}add(t){let n=t.lastSegment(),i=t.popLast(),r=this.index[n]||new fn(Ht.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(t){let n=t.lastSegment(),i=t.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(t){return(this.index[t]||new fn(Ht.comparator)).toArray()}};var A_=new Uint8Array(0),ZP=class{constructor(t,n){this.databaseId=n,this.cn=new Ty,this.ln=new sl(i=>mh(i),(i,r)=>Ny(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,n){if(!this.cn.has(n)){let i=n.lastSegment(),r=n.popLast();t.addOnCommittedListener(()=>{this.cn.add(n)});let o={collectionId:i,parent:Hr(r)};return BU(t).put(o)}return U.resolve()}getCollectionParents(t,n){let i=[],r=IDBKeyRange.bound([n,""],[cj(n),""],!1,!0);return BU(t).U(r).next(o=>{for(let s of o){if(s.collectionId!==n)break;i.push(Ja(s.parent))}return i})}addFieldIndex(t,n){let i=ry(t),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete r.indexId;let o=i.add(r);if(n.indexState){let s=cg(t);return o.next(a=>{s.put(PU(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(t,n){let i=ry(t),r=cg(t),o=lg(t);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){let n=ry(t),i=lg(t),r=cg(t);return n.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(t,n){return U.forEach(this.hn(n),i=>this.getIndexType(t,i).next(r=>{if(r===0||r===1){let o=new rE(i).an();if(o!=null)return this.addFieldIndex(t,o)}}))}getDocumentsMatchingTarget(t,n){let i=lg(t),r=!0,o=new Map;return U.forEach(this.hn(n),s=>this.Pn(t,s).next(a=>{r&&(r=!!a),o.set(s,a)})).next(()=>{if(r){let s=ct(),a=[];return U.forEach(o,(l,c)=>{te("IndexedDbIndexManager",`Using index ${function(_){return`id=${_.indexId}|cg=${_.collectionGroup}|f=${_.fields.map(D=>`${D.fieldPath}:${D.kind}`).join(",")}`}(l)} to execute ${mh(n)}`);let u=function(_,D){let F=pP(D);if(F===void 0)return null;for(let I of X_(_,F.fieldPath))switch(I.op){case"array-contains-any":return I.value.arrayValue.values||[];case"array-contains":return[I.value]}return null}(c,l),d=function(_,D){let F=new Map;for(let I of sh(D))for(let E of X_(_,I.fieldPath))switch(E.op){case"==":case"in":F.set(I.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return F.set(I.fieldPath.canonicalString(),E.value),Array.from(F.values())}return null}(c,l),h=function(_,D){let F=[],I=!0;for(let E of sh(D)){let b=E.kind===0?yU(_,E.fieldPath,_.startAt):CU(_,E.fieldPath,_.startAt);F.push(b.value),I&&(I=b.inclusive)}return new ol(F,I)}(c,l),p=function(_,D){let F=[],I=!0;for(let E of sh(D)){let b=E.kind===0?CU(_,E.fieldPath,_.endAt):yU(_,E.fieldPath,_.endAt);F.push(b.value),I&&(I=b.inclusive)}return new ol(F,I)}(c,l),g=this.In(l,c,h),m=this.In(l,c,p),v=this.Tn(l,c,d),C=this.En(l.indexId,u,g,h.inclusive,m,p.inclusive,v);return U.forEach(C,S=>i.G(S,n.limit).next(_=>{_.forEach(D=>{let F=ve.fromSegments(D.documentKey);s.has(F)||(s=s.add(F),a.push(F))})}))}).next(()=>a)}return U.resolve(null)})}hn(t){let n=this.ln.get(t);return n||(t.filters.length===0?n=[t]:n=bme(en.create(t.filters,"and")).map(i=>AP(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.ln.set(t,n),n)}En(t,n,i,r,o,s,a){let l=(n!=null?n.length:1)*Math.max(i.length,o.length),c=l/(n!=null?n.length:1),u=[];for(let d=0;d<l;++d){let h=n?this.dn(n[d/c]):A_,p=this.An(t,h,i[d%c],r),g=this.Rn(t,h,o[d%c],s),m=a.map(v=>this.An(t,h,v,!0));u.push(...this.createRange(p,g,m))}return u}An(t,n,i,r){let o=new uh(t,ve.empty(),n,i);return r?o:o.Zt()}Rn(t,n,i,r){let o=new uh(t,ve.empty(),n,i);return r?o.Zt():o}Pn(t,n){let i=new rE(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(t,r).next(o=>{let s=null;for(let a of o)i.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(t,n){let i=2,r=this.hn(n);return U.forEach(r,o=>this.Pn(t,o).next(s=>{s?i!==0&&s.fields.length<function(l){let c=new fn(ii.comparator),u=!1;for(let d of l.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?u=!0:c=c.add(h.field));for(let d of l.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(u?1:0)}(o)&&(i=1):i=0})).next(()=>function(s){return s.limit!==null}(n)&&r.length>1&&i===2?1:i)}Vn(t,n){let i=new ch;for(let r of sh(t)){let o=n.data.field(r.fieldPath);if(o==null)return null;let s=i.Yt(r.kind);Xl.vt.It(o,s)}return i.zt()}dn(t){let n=new ch;return Xl.vt.It(t,n.Yt(0)),n.zt()}mn(t,n){let i=new ch;return Xl.vt.It(ph(this.databaseId,n),i.Yt(function(o){let s=sh(o);return s.length===0?0:s[s.length-1].kind}(t))),i.zt()}Tn(t,n,i){if(i===null)return[];let r=[];r.push(new ch);let o=0;for(let s of sh(t)){let a=i[o++];for(let l of r)if(this.fn(n,s.fieldPath)&&Cy(a))r=this.gn(r,s,a);else{let c=l.Yt(s.kind);Xl.vt.It(a,c)}}return this.pn(r)}In(t,n,i){return this.Tn(t,n,i.position)}pn(t){let n=[];for(let i=0;i<t.length;++i)n[i]=t[i].zt();return n}gn(t,n,i){let r=[...t],o=[];for(let s of i.arrayValue.values||[])for(let a of r){let l=new ch;l.seed(a.zt()),Xl.vt.It(s,l.Yt(n.kind)),o.push(l)}return o}fn(t,n){return!!t.filters.find(i=>i instanceof Ft&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(t,n){let i=ry(t),r=cg(t);return(n?i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.U()).next(o=>{let s=[];return U.forEach(o,a=>r.get([a.indexId,this.uid]).next(l=>{s.push(function(u,d){let h=d?new py(d.sequenceNumber,new bs(Ch(d.readTime),new ve(Ja(d.documentKey)),d.largestBatchId)):py.empty(),p=u.fields.map(([g,m])=>new vg(ii.fromServerFormat(g),m));return new bg(u.indexId,u.collectionGroup,p,h)}(a,l))})).next(()=>s)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(n=>n.length===0?null:(n.sort((i,r)=>{let o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:at(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(t,n,i){let r=ry(t),o=cg(t);return this.yn(t).next(s=>r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>U.forEach(a,l=>o.put(PU(l.indexId,this.uid,s,i)))))}updateIndexEntries(t,n){let i=new Map;return U.forEach(n,(r,o)=>{let s=i.get(r.collectionGroup);return(s?U.resolve(s):this.getFieldIndexes(t,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),U.forEach(a,l=>this.wn(t,r,l).next(c=>{let u=this.Sn(o,l);return c.isEqual(u)?U.resolve():this.bn(t,o,l,c,u)}))))})}Dn(t,n,i,r){return lg(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.mn(i,n.key),documentKey:n.key.path.toArray()})}vn(t,n,i,r){return lg(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.mn(i,n.key),n.key.path.toArray()])}wn(t,n,i){let r=lg(t),o=new fn(mu);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.mn(i,n)])},(s,a)=>{o=o.add(new uh(i.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(t,n){let i=new fn(mu),r=this.Vn(n,t);if(r==null)return i;let o=pP(n);if(o!=null){let s=t.data.field(o.fieldPath);if(Cy(s))for(let a of s.arrayValue.values||[])i=i.add(new uh(n.indexId,t.key,this.dn(a),r))}else i=i.add(new uh(n.indexId,t.key,A_,r));return i}bn(t,n,i,r,o){te("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(l,c,u,d,h){let p=l.getIterator(),g=c.getIterator(),m=ag(p),v=ag(g);for(;m||v;){let C=!1,S=!1;if(m&&v){let _=u(m,v);_<0?S=!0:_>0&&(C=!0)}else m!=null?S=!0:C=!0;C?(d(v),v=ag(g)):S?(h(m),m=ag(p)):(m=ag(p),v=ag(g))}}(r,o,mu,a=>{s.push(this.Dn(t,n,i,a))},a=>{s.push(this.vn(t,n,i,a))}),U.waitFor(s)}yn(t){let n=1;return cg(t).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(t,n,i){i=i.sort((s,a)=>mu(s,a)).filter((s,a,l)=>!a||mu(s,l[a-1])!==0);let r=[];r.push(t);for(let s of i){let a=mu(s,t),l=mu(s,n);if(a===0)r[0]=t.Zt();else if(a>0&&l<0)r.push(s),r.push(s.Zt());else if(l>0)break}r.push(n);let o=[];for(let s=0;s<r.length;s+=2){if(this.Cn(r[s],r[s+1]))return[];let a=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,A_,[]],l=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,A_,[]];o.push(IDBKeyRange.bound(a,l))}return o}Cn(t,n){return mu(t,n)>0}getMinOffsetFromCollectionGroup(t,n){return this.getFieldIndexes(t,n).next(GU)}getMinOffset(t,n){return U.mapArray(this.hn(n),i=>this.Pn(t,i).next(r=>r||xe())).next(GU)}};function BU(e){return Fi(e,"collectionParents")}function lg(e){return Fi(e,"indexEntries")}function ry(e){return Fi(e,"indexConfiguration")}function cg(e){return Fi(e,"indexState")}function GU(e){Ie(e.length!==0);let t=e[0].indexState.offset,n=t.largestBatchId;for(let i=1;i<e.length;i++){let r=e[i].indexState.offset;lk(r,t)<0&&(t=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new bs(t.readTime,t.documentKey,n)}var HU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ws=class e{constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function lW(e,t,n){let i=e.store("mutations"),r=e.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,l=i.J({range:s},(u,d,h)=>(a++,h.delete()));o.push(l.next(()=>{Ie(a===1)}));let c=[];for(let u of n.mutations){let d=gj(t,u.key.path,n.batchId);o.push(r.delete(d)),c.push(u.key)}return U.waitFor(o).next(()=>c)}function sE(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw xe();t=e.noDocument}return JSON.stringify(t).length}ws.DEFAULT_COLLECTION_PERCENTILE=10,ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ws.DEFAULT=new ws(41943040,ws.DEFAULT_COLLECTION_PERCENTILE,ws.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ws.DISABLED=new ws(-1,0,0);var aE=class e{constructor(t,n,i,r){this.userId=t,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Fn={}}static lt(t,n,i,r){Ie(t.uid!=="");let o=t.isAuthenticated()?t.uid:"";return new e(o,n,i,r)}checkEmpty(t){let n=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vu(t).J({index:"userMutationsIndex",range:i},(r,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(t,n,i,r){let o=gg(t),s=vu(t);return s.add({}).next(a=>{Ie(typeof a=="number");let l=new by(a,n,i,r),c=function(p,g,m){let v=m.baseMutations.map(S=>Dy(p.ct,S)),C=m.mutations.map(S=>Dy(p.ct,S));return{userId:g,batchId:m.batchId,localWriteTimeMs:m.localWriteTime.toMillis(),baseMutations:v,mutations:C}}(this.serializer,this.userId,l),u=[],d=new fn((h,p)=>at(h.canonicalString(),p.canonicalString()));for(let h of r){let p=gj(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(s.put(c)),u.push(o.put(p,Tge))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(t,h))}),t.addOnCommittedListener(()=>{this.Fn[a]=l.keys()}),U.waitFor(u).next(()=>l)})}lookupMutationBatch(t,n){return vu(t).get(n).next(i=>i?(Ie(i.userId===this.userId),lh(this.serializer,i)):null)}Mn(t,n){return this.Fn[n]?U.resolve(this.Fn[n]):this.lookupMutationBatch(t,n).next(i=>{if(i){let r=i.keys();return this.Fn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(t,n){let i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]),o=null;return vu(t).J({index:"userMutationsIndex",range:r},(s,a,l)=>{a.userId===this.userId&&(Ie(a.batchId>=i),o=lh(this.serializer,a)),l.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(t){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return vu(t).J({index:"userMutationsIndex",range:n,reverse:!0},(r,o,s)=>{i=o.batchId,s.done()}).next(()=>i)}getAllMutationBatches(t){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vu(t).U("userMutationsIndex",n).next(i=>i.map(r=>lh(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(t,n){let i=O_(this.userId,n.path),r=IDBKeyRange.lowerBound(i),o=[];return gg(t).J({range:r},(s,a,l)=>{let[c,u,d]=s,h=Ja(u);if(c===this.userId&&n.path.isEqual(h))return vu(t).get(d).next(p=>{if(!p)throw xe();Ie(p.userId===this.userId),o.push(lh(this.serializer,p))});l.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new fn(at),r=[];return n.forEach(o=>{let s=O_(this.userId,o.path),a=IDBKeyRange.lowerBound(s),l=gg(t).J({range:a},(c,u,d)=>{let[h,p,g]=c,m=Ja(p);h===this.userId&&o.path.isEqual(m)?i=i.add(g):d.done()});r.push(l)}),U.waitFor(r).next(()=>this.xn(t,i))}getAllMutationBatchesAffectingQuery(t,n){let i=n.path,r=i.length+1,o=O_(this.userId,i),s=IDBKeyRange.lowerBound(o),a=new fn(at);return gg(t).J({range:s},(l,c,u)=>{let[d,h,p]=l,g=Ja(h);d===this.userId&&i.isPrefixOf(g)?g.length===r&&(a=a.add(p)):u.done()}).next(()=>this.xn(t,a))}xn(t,n){let i=[],r=[];return n.forEach(o=>{r.push(vu(t).get(o).next(s=>{if(s===null)throw xe();Ie(s.userId===this.userId),i.push(lh(this.serializer,s))}))}),U.waitFor(r).next(()=>i)}removeMutationBatch(t,n){return lW(t._e,this.userId,n).next(i=>(t.addOnCommittedListener(()=>{this.On(n.batchId)}),U.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}On(t){delete this.Fn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(n=>{if(!n)return U.resolve();let i=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),r=[];return gg(t).J({range:i},(o,s,a)=>{if(o[0]===this.userId){let l=Ja(o[1]);r.push(l)}else a.done()}).next(()=>{Ie(r.length===0)})})}containsKey(t,n){return cW(t,this.userId,n)}Nn(t){return uW(t).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function cW(e,t,n){let i=O_(t,n.path),r=i[1],o=IDBKeyRange.lowerBound(i),s=!1;return gg(e).J({range:o,H:!0},(a,l,c)=>{let[u,d,h]=a;u===t&&d===r&&(s=!0),c.done()}).next(()=>s)}function vu(e){return Fi(e,"mutations")}function gg(e){return Fi(e,"documentMutations")}function uW(e){return Fi(e,"mutationQueues")}var Rg=class e{constructor(t){this.Ln=t}next(){return this.Ln+=2,this.Ln}static Bn(){return new e(0)}static kn(){return new e(-1)}};var JP=class{constructor(t,n){this.referenceDelegate=t,this.serializer=n}allocateTargetId(t){return this.qn(t).next(n=>{let i=new Rg(n.highestTargetId);return n.highestTargetId=i.next(),this.Qn(t,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.qn(t).next(n=>ze.fromTimestamp(new yn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.qn(t).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(t,n,i){return this.qn(t).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.Qn(t,r)))}addTargetData(t,n){return this.Kn(t,n).next(()=>this.qn(t).next(i=>(i.targetCount+=1,this.$n(n,i),this.Qn(t,i))))}updateTargetData(t,n){return this.Kn(t,n)}removeTargetData(t,n){return this.removeMatchingKeysForTargetId(t,n.targetId).next(()=>ug(t).delete(n.targetId)).next(()=>this.qn(t)).next(i=>(Ie(i.targetCount>0),i.targetCount-=1,this.Qn(t,i)))}removeTargets(t,n,i){let r=0,o=[];return ug(t).J((s,a)=>{let l=ly(a);l.sequenceNumber<=n&&i.get(l.targetId)===null&&(r++,o.push(this.removeTargetData(t,l)))}).next(()=>U.waitFor(o)).next(()=>r)}forEachTarget(t,n){return ug(t).J((i,r)=>{let o=ly(r);n(o)})}qn(t){return zU(t).get("targetGlobalKey").next(n=>(Ie(n!==null),n))}Qn(t,n){return zU(t).put("targetGlobalKey",n)}Kn(t,n){return ug(t).put(oW(this.serializer,n))}$n(t,n){let i=!1;return t.targetId>n.highestTargetId&&(n.highestTargetId=t.targetId,i=!0),t.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.qn(t).next(n=>n.targetCount)}getTargetData(t,n){let i=mh(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),o=null;return ug(t).J({range:r,index:"queryTargetsIndex"},(s,a,l)=>{let c=ly(a);Ny(n,c.target)&&(o=c,l.done())}).next(()=>o)}addMatchingKeys(t,n,i){let r=[],o=yu(t);return n.forEach(s=>{let a=Hr(s.path);r.push(o.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(t,i,s))}),U.waitFor(r)}removeMatchingKeys(t,n,i){let r=yu(t);return U.forEach(n,o=>{let s=Hr(o.path);return U.waitFor([r.delete([i,s]),this.referenceDelegate.removeReference(t,i,o)])})}removeMatchingKeysForTargetId(t,n){let i=yu(t),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,n){let i=IDBKeyRange.bound([n],[n+1],!1,!0),r=yu(t),o=ct();return r.J({range:i,H:!0},(s,a,l)=>{let c=Ja(s[1]),u=new ve(c);o=o.add(u)}).next(()=>o)}containsKey(t,n){let i=Hr(n.path),r=IDBKeyRange.bound([i],[cj(i)],!1,!0),o=0;return yu(t).J({index:"documentTargetsIndex",H:!0,range:r},([s,a],l,c)=>{s!==0&&(o++,c.done())}).next(()=>o>0)}ot(t,n){return ug(t).get(n).next(i=>i?ly(i):null)}};function ug(e){return Fi(e,"targets")}function zU(e){return Fi(e,"targetGlobal")}function yu(e){return Fi(e,"targetDocuments")}function UU([e,t],[n,i]){let r=at(e,n);return r===0?at(t,i):r}var e2=class{constructor(t){this.Un=t,this.buffer=new fn(UU),this.Wn=0}Gn(){return++this.Wn}zn(t){let n=[t,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{let i=this.buffer.last();UU(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}},t2=class{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(t){te("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Pu(n)?te("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Mu(n)}yield this.Hn(3e5)}))}},n2=class{constructor(t,n){this.Jn=t,this.params=n}calculateTargetCount(t,n){return this.Jn.Yn(t).next(i=>Math.floor(n/100*i))}nthSequenceNumber(t,n){if(n===0)return U.resolve(Yo.oe);let i=new e2(n);return this.Jn.forEachTarget(t,r=>i.zn(r.sequenceNumber)).next(()=>this.Jn.Zn(t,r=>i.zn(r))).next(()=>i.maxValue)}removeTargets(t,n,i){return this.Jn.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.Jn.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(HU)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HU):this.Xn(t,n))}getCacheSize(t){return this.Jn.getCacheSize(t)}Xn(t,n){let i,r,o,s,a,l,c,u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,s=Date.now(),this.nthSequenceNumber(t,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(t,i,n))).next(d=>(o=d,l=Date.now(),this.removeOrphanedDocuments(t,i))).next(d=>(c=Date.now(),dg()<=lo.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${r} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:d})))}};function Sme(e,t){return new n2(e,t)}var i2=class{constructor(t,n){this.db=t,this.garbageCollector=Sme(this,n)}Yn(t){let n=this.er(t);return this.db.getTargetCache().getTargetCount(t).next(i=>n.next(r=>i+r))}er(t){let n=0;return this.Zn(t,i=>{n++}).next(()=>n)}forEachTarget(t,n){return this.db.getTargetCache().forEachTarget(t,n)}Zn(t,n){return this.tr(t,(i,r)=>n(r))}addReference(t,n,i){return M_(t,i)}removeReference(t,n,i){return M_(t,i)}removeTargets(t,n,i){return this.db.getTargetCache().removeTargets(t,n,i)}markPotentiallyOrphaned(t,n){return M_(t,n)}nr(t,n){return function(r,o){let s=!1;return uW(r).Y(a=>cW(r,a,o).next(l=>(l&&(s=!0),U.resolve(!l)))).next(()=>s)}(t,n)}removeOrphanedDocuments(t,n){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],o=0;return this.tr(t,(s,a)=>{if(a<=n){let l=this.nr(t,s).next(c=>{if(!c)return o++,i.getEntry(t,s).next(()=>(i.removeEntry(s,ze.min()),yu(t).delete(function(d){return[0,Hr(d.path)]}(s))))});r.push(l)}}).next(()=>U.waitFor(r)).next(()=>i.apply(t)).next(()=>o)}removeTarget(t,n){let i=n.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,n){return M_(t,n)}tr(t,n){let i=yu(t),r,o=Yo.oe;return i.J({index:"documentTargetsIndex"},([s,a],{path:l,sequenceNumber:c})=>{s===0?(o!==Yo.oe&&n(new ve(Ja(r)),o),o=c,r=l):o=Yo.oe}).next(()=>{o!==Yo.oe&&n(new ve(Ja(r)),o)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}};function M_(e,t){return yu(e).put(function(i,r){return{targetId:0,path:Hr(i.path),sequenceNumber:r}}(t,e.currentSequenceNumber))}var lE=class{constructor(){this.changes=new sl(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,yi.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?U.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var r2=class{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,n,i){return oh(t).put(i)}removeEntry(t,n,i){return oh(t).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],nE(s),a[a.length-1]]}(n,i))}updateMetadata(t,n){return this.getMetadata(t).next(i=>(i.byteSize+=n,this.rr(t,i)))}getEntry(t,n){let i=yi.newInvalidDocument(n);return oh(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(oy(n))},(r,o)=>{i=this.ir(n,o)}).next(()=>i)}sr(t,n){let i={size:0,document:yi.newInvalidDocument(n)};return oh(t).J({index:"documentKeyIndex",range:IDBKeyRange.only(oy(n))},(r,o)=>{i={document:this.ir(n,o),size:sE(o)}}).next(()=>i)}getEntries(t,n){let i=wo();return this._r(t,n,(r,o)=>{let s=this.ir(r,o);i=i.insert(r,s)}).next(()=>i)}ar(t,n){let i=wo(),r=new En(ve.comparator);return this._r(t,n,(o,s)=>{let a=this.ir(o,s);i=i.insert(o,a),r=r.insert(o,sE(s))}).next(()=>({documents:i,ur:r}))}_r(t,n,i){if(n.isEmpty())return U.resolve();let r=new fn(qU);n.forEach(l=>r=r.add(l));let o=IDBKeyRange.bound(oy(r.first()),oy(r.last())),s=r.getIterator(),a=s.getNext();return oh(t).J({index:"documentKeyIndex",range:o},(l,c,u)=>{let d=ve.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&qU(a,d)<0;)i(a,null),a=s.getNext();a&&a.isEqual(d)&&(i(a,c),a=s.hasNext()?s.getNext():null),a?u.$(oy(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(t,n,i,r,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),nE(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return oh(t).U(IDBKeyRange.bound(a,l,!0)).next(c=>{o?.incrementDocumentReadCount(c.length);let u=wo();for(let d of c){let h=this.ir(ve.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(Vy(n,h)||r.has(h.key))&&(u=u.insert(h.key,h))}return u})}getAllFromCollectionGroup(t,n,i,r){let o=wo(),s=WU(n,i),a=WU(n,bs.max());return oh(t).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(l,c,u)=>{let d=this.ir(ve.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);o=o.insert(d.key,d),o.size===r&&u.done()}).next(()=>o)}newChangeBuffer(t){return new o2(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(n=>n.byteSize)}getMetadata(t){return jU(t).get("remoteDocumentGlobalKey").next(n=>(Ie(!!n),n))}rr(t,n){return jU(t).put("remoteDocumentGlobalKey",n)}ir(t,n){if(n){let i=Cme(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(ze.min())))return i}return yi.newInvalidDocument(t)}};function dW(e){return new r2(e)}var o2=class extends lE{constructor(t,n){super(),this.cr=t,this.trackRemovals=n,this.lr=new sl(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){let n=[],i=0,r=new fn((o,s)=>at(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(n.push(this.cr.removeEntry(t,o,a.readTime)),s.isValidDocument()){let l=AU(this.cr.serializer,s);r=r.add(o.path.popLast());let c=sE(l);i+=c-a.size,n.push(this.cr.addEntry(t,o,l))}else if(i-=a.size,this.trackRemovals){let l=AU(this.cr.serializer,s.convertToNoDocument(ze.min()));n.push(this.cr.addEntry(t,o,l))}}),r.forEach(o=>{n.push(this.cr.indexManager.addToCollectionParentIndex(t,o))}),n.push(this.cr.updateMetadata(t,i)),U.waitFor(n)}getFromCache(t,n){return this.cr.sr(t,n).next(i=>(this.lr.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,n){return this.cr.ar(t,n).next(({documents:i,ur:r})=>(r.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:i.get(o).readTime})}),i))}};function jU(e){return Fi(e,"remoteDocumentGlobal")}function oh(e){return Fi(e,"remoteDocumentsV14")}function oy(e){let t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function WU(e,t){let n=t.documentKey.path.toArray();return[e,nE(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function qU(e,t){let n=e.path.toArray(),i=t.path.toArray(),r=0;for(let o=0;o<n.length-2&&o<i.length-2;++o)if(r=at(n[o],i[o]),r)return r;return r=at(n.length,i.length),r||(r=at(n[n.length-2],i[i.length-2]),r||at(n[n.length-1],i[i.length-1]))}var s2=class{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}};var cE=class{constructor(t,n,i,r){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,n))).next(r=>(i!==null&&dy(i.mutation,r,Qo.empty(),yn.now()),r))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,ct()).next(()=>i))}getLocalViewOfDocuments(t,n,i=ct()){let r=el();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,i).next(o=>{let s=ay();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(t,n){let i=el();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,ct()))}populateOverlays(t,n,i){let r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(t,r).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(t,n,i,r){let o=wo(),s=uy(),a=function(){return uy()}();return n.forEach((l,c)=>{let u=i.get(c.key);r.has(c.key)&&(u===void 0||u.mutation instanceof ha)?o=o.insert(c.key,c):u!==void 0?(s.set(c.key,u.mutation.getFieldMask()),dy(u.mutation,c,u.mutation.getFieldMask(),yn.now())):s.set(c.key,Qo.empty())}),this.recalculateAndSaveOverlays(t,o).next(l=>(l.forEach((c,u)=>s.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new s2(u,(d=s.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(t,n){let i=uy(),r=new En((s,a)=>s-a),o=ct();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(s=>{for(let a of s)a.keys().forEach(l=>{let c=n.get(l);if(c===null)return;let u=i.get(l)||Qo.empty();u=a.applyToLocalView(c,u),i.set(l,u);let d=(r.get(a.batchId)||ct()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{let s=[],a=r.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),c=l.key,u=l.value,d=Oj();u.forEach(h=>{if(!o.has(h)){let p=zj(n.get(h),i.get(h));p!==null&&d.set(h,p),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(t,c,d))}return U.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,r){return function(s){return ve.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):fk(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,r):this.getDocumentsMatchingCollectionQuery(t,n,i,r)}getNextDocuments(t,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,r).next(o=>{let s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,r-o.size):U.resolve(el()),a=-1,l=o;return s.next(c=>U.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(u)?U.resolve():this.remoteDocumentCache.getEntry(t,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(t,c,o)).next(()=>this.computeViews(t,l,c,ct())).next(u=>({batchId:a,changes:kj(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ve(n)).next(i=>{let r=ay();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,n,i,r){let o=n.collectionGroup,s=ay();return this.indexManager.getCollectionParents(t,o).next(a=>U.forEach(a,l=>{let c=function(d,h){return new da(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(t,c,i,r).next(u=>{u.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,o,r))).next(s=>{o.forEach((l,c)=>{let u=c.getKey();s.get(u)===null&&(s=s.insert(u,yi.newInvalidDocument(u)))});let a=ay();return s.forEach((l,c)=>{let u=o.get(l);u!==void 0&&dy(u.mutation,c,Qo.empty(),yn.now()),Vy(n,c)&&(a=a.insert(l,c))}),a})}};var a2=class{constructor(t){this.serializer=t,this.hr=new Map,this.Pr=new Map}getBundleMetadata(t,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(t,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:ri(r.createTime)}}(n)),U.resolve()}getNamedQuery(t,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(t,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:vk(r.bundledQuery),readTime:ri(r.readTime)}}(n)),U.resolve()}};var l2=class{constructor(){this.overlays=new En(ve.comparator),this.Ir=new Map}getOverlay(t,n){return U.resolve(this.overlays.get(n))}getOverlays(t,n){let i=el();return U.forEach(n,r=>this.getOverlay(t,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((r,o)=>{this.ht(t,n,o)}),U.resolve()}removeOverlaysForBatchId(t,n,i){let r=this.Ir.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),U.resolve()}getOverlaysForCollection(t,n,i){let r=el(),o=n.length+1,s=new ve(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>i&&r.set(l.getKey(),l)}return U.resolve(r)}getOverlaysForCollectionGroup(t,n,i,r){let o=new En((c,u)=>c-u),s=this.overlays.getIterator();for(;s.hasNext();){let c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let u=o.get(c.largestBatchId);u===null&&(u=el(),o=o.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}let a=el(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return U.resolve(a)}ht(t,n,i){let r=this.overlays.get(i.key);if(r!==null){let s=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new Sy(n,i));let o=this.Ir.get(n);o===void 0&&(o=ct(),this.Ir.set(n,o)),this.Ir.set(n,o.add(i.key))}};var c2=class{constructor(){this.sessionToken=oi.EMPTY_BYTE_STRING}getSessionToken(t){return U.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,U.resolve()}};var Ry=class{constructor(){this.Tr=new fn(mi.Er),this.dr=new fn(mi.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(t,n){let i=new mi(t,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Vr(new mi(t,n))}mr(t,n){t.forEach(i=>this.removeReference(i,n))}gr(t){let n=new ve(new Ht([])),i=new mi(n,t),r=new mi(n,t+1),o=[];return this.dr.forEachInRange([i,r],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(t=>this.Vr(t))}Vr(t){this.Tr=this.Tr.delete(t),this.dr=this.dr.delete(t)}yr(t){let n=new ve(new Ht([])),i=new mi(n,t),r=new mi(n,t+1),o=ct();return this.dr.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(t){let n=new mi(t,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}},mi=class{constructor(t,n){this.key=t,this.wr=n}static Er(t,n){return ve.comparator(t.key,n.key)||at(t.wr,n.wr)}static Ar(t,n){return at(t.wr,n.wr)||ve.comparator(t.key,n.key)}};var u2=class{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new fn(mi.Er)}checkEmpty(t){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,r){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new by(o,n,i,r);this.mutationQueue.push(s);for(let a of r)this.br=this.br.add(new mi(a.key,o)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return U.resolve(s)}lookupMutationBatch(t,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(t,n){let i=n+1,r=this.vr(i),o=r<0?0:r;return U.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(t){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){let i=new mi(n,0),r=new mi(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,r],s=>{let a=this.Dr(s.wr);o.push(a)}),U.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new fn(at);return n.forEach(r=>{let o=new mi(r,0),s=new mi(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{i=i.add(a.wr)})}),U.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(t,n){let i=n.path,r=i.length+1,o=i;ve.isDocumentKey(o)||(o=o.child(""));let s=new mi(new ve(o),0),a=new fn(at);return this.br.forEachWhile(l=>{let c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.wr)),!0)},s),U.resolve(this.Cr(a))}Cr(t){let n=[];return t.forEach(i=>{let r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(t,n){Ie(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return U.forEach(n.mutations,r=>{let o=new mi(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.br=i})}On(t){}containsKey(t,n){let i=new mi(n,0),r=this.br.firstAfterOrEqual(i);return U.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,U.resolve()}Fr(t,n){return this.vr(t)}vr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Dr(t){let n=this.vr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var d2=class{constructor(t){this.Mr=t,this.docs=function(){return new En(ve.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){let i=n.key,r=this.docs.get(i),o=r?r.size:0,s=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){let n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){let i=this.docs.get(n);return U.resolve(i?i.document.mutableCopy():yi.newInvalidDocument(n))}getEntries(t,n){let i=wo();return n.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():yi.newInvalidDocument(r))}),U.resolve(i)}getDocumentsMatchingQuery(t,n,i,r){let o=wo(),s=n.path,a=new ve(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:c,value:{document:u}}=l.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||lk(dj(u),i)<=0||(r.has(u.key)||Vy(n,u))&&(o=o.insert(u.key,u.mutableCopy()))}return U.resolve(o)}getAllFromCollectionGroup(t,n,i,r){xe()}Or(t,n){return U.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new h2(this)}getSize(t){return U.resolve(this.size)}},h2=class extends lE{constructor(t){super(),this.cr=t}applyChanges(t){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(t,r)):this.cr.removeEntry(i)}),U.waitFor(n)}getFromCache(t,n){return this.cr.getEntry(t,n)}getAllFromCache(t,n){return this.cr.getEntries(t,n)}};var f2=class{constructor(t){this.persistence=t,this.Nr=new sl(n=>mh(n),Ny),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ry,this.targetCount=0,this.kr=Rg.Bn()}forEachTarget(t,n){return this.Nr.forEach((i,r)=>n(r)),U.resolve()}getLastRemoteSnapshotVersion(t){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return U.resolve(this.Lr)}allocateTargetId(t){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(t){this.Nr.set(t.target,t);let n=t.targetId;n>this.highestTargetId&&(this.kr=new Rg(n),this.highestTargetId=n),t.sequenceNumber>this.Lr&&(this.Lr=t.sequenceNumber)}addTargetData(t,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(t,n){return this.Kn(n),U.resolve()}removeTargetData(t,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(t,n,i){let r=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),U.waitFor(o).next(()=>r)}getTargetCount(t){return U.resolve(this.targetCount)}getTargetData(t,n){let i=this.Nr.get(n)||null;return U.resolve(i)}addMatchingKeys(t,n,i){return this.Br.Rr(n,i),U.resolve()}removeMatchingKeys(t,n,i){this.Br.mr(n,i);let r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(s=>{o.push(r.markPotentiallyOrphaned(t,s))}),U.waitFor(o)}removeMatchingKeysForTargetId(t,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(t,n){let i=this.Br.yr(n);return U.resolve(i)}containsKey(t,n){return U.resolve(this.Br.containsKey(n))}};var uE=class{constructor(t,n){this.qr={},this.overlays={},this.Qr=new Yo(0),this.Kr=!1,this.Kr=!0,this.$r=new c2,this.referenceDelegate=t(this),this.Ur=new f2(this),this.indexManager=new $P,this.remoteDocumentCache=function(r){return new d2(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new tE(n),this.Gr=new a2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new l2,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.qr[t.toKey()];return i||(i=new u2(n,this.referenceDelegate),this.qr[t.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(t,n,i){te("MemoryPersistence","Starting transaction:",t);let r=new p2(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(o=>this.referenceDelegate.jr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Hr(t,n){return U.or(Object.values(this.qr).map(i=>()=>i.containsKey(t,n)))}},p2=class extends U_{constructor(t){super(),this.currentSequenceNumber=t}},dE=class e{constructor(t){this.persistence=t,this.Jr=new Ry,this.Yr=null}static Zr(t){return new e(t)}get Xr(){if(this.Yr)return this.Yr;throw xe()}addReference(t,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),U.resolve()}removeReference(t,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),U.resolve()}markPotentiallyOrphaned(t,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(t,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(r=>{r.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(t,n))}zr(){this.Yr=new Set}jr(t){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,i=>{let r=ve.fromPath(i);return this.ei(t,r).next(o=>{o||n.removeEntry(r,ze.min())})}).next(()=>(this.Yr=null,n.apply(t)))}updateLimboDocument(t,n){return this.ei(t,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(t){return 0}ei(t,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Hr(t,n)])}};var g2=class{constructor(t){this.serializer=t}O(t,n,i,r){let o=new j_("createOrUpgrade",n);i<1&&r>=1&&(function(l){l.createObjectStore("owner")}(t),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lU,{unique:!0}),l.createObjectStore("documentMutations")}(t),KU(t),function(l){l.createObjectStore("remoteDocuments")}(t));let s=U.resolve();return i<3&&r>=3&&(i!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(t),KU(t)),s=s.next(()=>function(l){let c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ze.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(o))),i<4&&r>=4&&(i!==0&&(s=s.next(()=>function(l,c){return c.store("mutations").U().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lU,{unique:!0});let d=c.store("mutations"),h=u.map(p=>d.put(p));return U.waitFor(h)})}(t,o))),s=s.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(t)})),i<5&&r>=5&&(s=s.next(()=>this.ni(o))),i<6&&r>=6&&(s=s.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(t),this.ri(o)))),i<7&&r>=7&&(s=s.next(()=>this.ii(o))),i<8&&r>=8&&(s=s.next(()=>this.si(t,o))),i<9&&r>=9&&(s=s.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(t)})),i<10&&r>=10&&(s=s.next(()=>this.oi(o))),i<11&&r>=11&&(s=s.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(s=s.next(()=>{(function(l){let c=l.createObjectStore("documentOverlays",{keyPath:Bge});c.createIndex("collectionPathOverlayIndex",Gge,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",Hge,{unique:!1})})(t)})),i<13&&r>=13&&(s=s.next(()=>function(l){let c=l.createObjectStore("remoteDocumentsV14",{keyPath:Rge});c.createIndex("documentKeyIndex",Ige),c.createIndex("collectionGroupIndex",Fge)}(t)).next(()=>this._i(t,o)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(s=s.next(()=>this.ai(t,o))),i<15&&r>=15&&(s=s.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:Oge}).createIndex("sequenceNumberIndex",Nge,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:Lge}).createIndex("documentKeyIndex",Vge,{unique:!1})}(t))),i<16&&r>=16&&(s=s.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),i<17&&r>=17&&(s=s.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(t)})),s}ri(t){let n=0;return t.store("remoteDocuments").J((i,r)=>{n+=sE(r)}).next(()=>{let i={byteSize:n};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}ni(t){let n=t.store("mutationQueues"),i=t.store("mutations");return n.U().next(r=>U.forEach(r,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",s).next(a=>U.forEach(a,l=>{Ie(l.userId===o.userId);let c=lh(this.serializer,l);return lW(t,o.userId,c).next(()=>{})}))}))}ii(t){let n=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{let o=[];return i.J((s,a)=>{let l=new Ht(s),c=function(d){return[0,Hr(d)]}(l);o.push(n.get(c).next(u=>u?U.resolve():(d=>n.put({targetId:0,path:Hr(d),sequenceNumber:r.highestListenSequenceNumber}))(l)))}).next(()=>U.waitFor(o))})}si(t,n){t.createObjectStore("collectionParents",{keyPath:kge});let i=n.store("collectionParents"),r=new Ty,o=s=>{if(r.add(s)){let a=s.lastSegment(),l=s.popLast();return i.put({collectionId:a,parent:Hr(l)})}};return n.store("remoteDocuments").J({H:!0},(s,a)=>{let l=new Ht(s);return o(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([s,a,l],c)=>{let u=Ja(a);return o(u.popLast())}))}oi(t){let n=t.store("targets");return n.J((i,r)=>{let o=ly(r),s=oW(this.serializer,o);return n.put(s)})}_i(t,n){let i=n.store("remoteDocuments"),r=[];return i.J((o,s)=>{let a=n.store("remoteDocumentsV14"),l=function(d){return d.document?new ve(Ht.fromString(d.document.name).popFirst(5)):d.noDocument?ve.fromSegments(d.noDocument.path):d.unknownDocument?ve.fromSegments(d.unknownDocument.path):xe()}(s).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};r.push(a.put(c))}).next(()=>U.waitFor(r))}ai(t,n){let i=n.store("mutations"),r=dW(this.serializer),o=new uE(dE.Zr,this.serializer.ct);return i.U().next(s=>{let a=new Map;return s.forEach(l=>{var c;let u=(c=a.get(l.userId))!==null&&c!==void 0?c:ct();lh(this.serializer,l).keys().forEach(d=>u=u.add(d)),a.set(l.userId,u)}),U.forEach(a,(l,c)=>{let u=new vi(c),d=iE.lt(this.serializer,u),h=o.getIndexManager(u),p=aE.lt(u,this.serializer,h,o.referenceDelegate);return new cE(r,p,d,h).recalculateAndSaveOverlaysForDocumentKeys(new my(n,Yo.oe),l).next()})})}};function KU(e){e.createObjectStore("targetDocuments",{keyPath:Mge}).createIndex("documentTargetsIndex",Pge,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Age,{unique:!0}),e.createObjectStore("targetGlobal")}var iP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",m2=class e{constructor(t,n,i,r,o,s,a,l,c,u,d=17){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=i,this.ui=o,this.window=s,this.document=a,this.ci=c,this.li=u,this.hi=d,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=h=>Promise.resolve(),!e.D())throw new ee(K.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new i2(this,r),this.Ai=n+"main",this.serializer=new tE(l),this.Ri=new _u(this.Ai,this.hi,new g2(this.serializer)),this.$r=new jP,this.Ur=new JP(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dW(this.serializer),this.Gr=new UP,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,u===!1&&ni("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ee(K.FAILED_PRECONDITION,iP);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Ur.getHighestSequenceNumber(t))}).then(t=>{this.Qr=new Yo(t,this.ci)}).then(()=>{this.Kr=!0}).catch(t=>(this.Ri&&this.Ri.close(),Promise.reject(t)))}yi(t){return this.di=n=>N(this,null,function*(){if(this.started)return t(n)}),t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ri.L(n=>N(this,null,function*(){n.newVersion===null&&(yield t())}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>P_(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(t).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(t)).next(n=>this.isPrimary&&!n?this.bi(t).next(()=>!1):!!n&&this.Di(t).next(()=>!0))).catch(t=>{if(Pu(t))return te("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return te("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.ui.enqueueRetryable(()=>this.di(t)),this.isPrimary=t})}wi(t){return sy(t).get("owner").next(n=>U.resolve(this.vi(n)))}Ci(t){return P_(t).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let t=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let i=Fi(n,"clientMetadata");return i.U().next(r=>{let o=this.xi(r,18e5),s=r.filter(a=>o.indexOf(a)===-1);return U.forEach(s,a=>i.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let n of t)this.Vi.removeItem(this.Oi(n.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(t){return!!t&&t.ownerId===this.clientId}Si(t){return this.li?U.resolve(!0):sy(t).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new ee(K.FAILED_PRECONDITION,iP);return!1}}return!(!this.networkEnabled||!this.inForeground)||P_(t).U().next(i=>this.xi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let o=!this.networkEnabled&&r.networkEnabled,s=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&te("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{let n=new my(t,Yo.oe);return this.bi(n).next(()=>this.Ci(n))}),this.Ri.close(),this.qi()})}xi(t,n){return t.filter(i=>this.Mi(i.updateTimeMs,n)&&!this.Ni(i.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",t=>P_(t).U().next(n=>this.xi(n,18e5).map(i=>i.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(t,n){return aE.lt(t,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new ZP(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return iE.lt(this.serializer,t)}getBundleCache(){return this.Gr}runTransaction(t,n,i){te("IndexedDbPersistence","Starting transaction:",t);let r=n==="readonly"?"readonly":"readwrite",o=function(l){return l===17?jge:l===16?Uge:l===15?uk:l===14?yj:l===13?vj:l===12?zge:l===11?mj:void xe()}(this.hi),s;return this.Ri.runTransaction(t,r,o,a=>(s=new my(a,this.Qr?this.Qr.next():Yo.oe),n==="readwrite-primary"?this.wi(s).next(l=>!!l||this.Si(s)).next(l=>{if(!l)throw ni(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new ee(K.FAILED_PRECONDITION,hj);return i(s)}).next(l=>this.Di(s).next(()=>l)):this.Ki(s).next(()=>i(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(t){return sy(t).get("owner").next(n=>{if(n!==null&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new ee(K.FAILED_PRECONDITION,iP)})}Di(t){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return sy(t).put("owner",n)}static D(){return _u.D()}bi(t){let n=sy(t);return n.get("owner").next(i=>this.vi(i)?(te("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):U.resolve())}Mi(t,n){let i=Date.now();return!(t<i-n)&&(!(t>i)||(ni(`Detected an update time that is in the future: ${t} > ${i}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let n=/(?:Version|Mobile)\/1[456]/;mR()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(t){var n;try{let i=((n=this.Vi)===null||n===void 0?void 0:n.getItem(this.Oi(t)))!==null;return te("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return ni("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(t){ni("Failed to set zombie client id.",t)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}};function sy(e){return Fi(e,"owner")}function P_(e){return Fi(e,"clientMetadata")}function Ck(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var v2=class e{constructor(t,n,i,r){this.targetId=t,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(t,n){let i=ct(),r=ct();for(let o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new e(t,n.fromCache,i,r)}};var y2=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var hE=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return mR()?8:fj(Gv())>0?6:4}()}initialize(t,n){this.Ji=t,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(t,n,i,r){let o={result:null};return this.Yi(t,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(t,n,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new y2;return this.Xi(t,n,s).next(a=>{if(o.result=a,this.zi)return this.es(t,n,s,a.size)})}).next(()=>o.result)}es(t,n,i,r){return i.documentReadCount<this.ji?(dg()<=lo.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",hg(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(dg()<=lo.DEBUG&&te("QueryEngine","Query:",hg(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(dg()<=lo.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",hg(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,zr(n))):U.resolve())}Yi(t,n){if(wU(n))return U.resolve(null);let i=zr(n);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=$_(n,null,"F"),i=zr(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(o=>{let s=ct(...o);return this.Ji.getDocuments(t,s).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{let c=this.ts(n,a);return this.ns(n,c,s,l.readTime)?this.Yi(t,$_(n,null,"F")):this.rs(t,c,n,l)}))})))}Zi(t,n,i,r){return wU(n)||r.isEqual(ze.min())?U.resolve(null):this.Ji.getDocuments(t,i).next(o=>{let s=this.ts(n,o);return this.ns(n,s,i,r)?U.resolve(null):(dg()<=lo.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),hg(n)),this.rs(t,s,n,uj(r,-1)).next(a=>a))})}ts(t,n){let i=new fn(Mj(t));return n.forEach((r,o)=>{Vy(t,o)&&(i=i.add(o))}),i}ns(t,n,i,r){if(t.limit===null)return!1;if(i.size!==n.size)return!0;let o=t.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Xi(t,n,i){return dg()<=lo.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",hg(n)),this.Ji.getDocumentsMatchingQuery(t,n,bs.min(),i)}rs(t,n,i,r){return this.Ji.getDocumentsMatchingQuery(t,i,r).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var C2=class{constructor(t,n,i,r){this.persistence=t,this.ss=n,this.serializer=r,this.os=new En(at),this._s=new sl(o=>mh(o),Ny),this.us=new Map,this.cs=t.getRemoteDocumentCache(),this.Ur=t.getTargetCache(),this.Gr=t.getBundleCache(),this.ls(i)}ls(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new cE(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.os))}};function hW(e,t,n,i){return new C2(e,t,n,i)}function fW(e,t){return N(this,null,function*(){let n=me(e);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.ls(t),n.mutationQueue.getAllMutationBatches(i))).next(o=>{let s=[],a=[],l=ct();for(let c of r){s.push(c.batchId);for(let u of c.mutations)l=l.add(u.key)}for(let c of o){a.push(c.batchId);for(let u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(i,l).next(c=>({hs:c,removedBatchIds:s,addedBatchIds:a}))})})})}function _me(e,t){let n=me(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=t.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){let d=c.batch,h=d.keys(),p=U.resolve();return h.forEach(g=>{p=p.next(()=>u.getEntry(l,g)).next(m=>{let v=c.docVersions.get(g);Ie(v!==null),m.version.compareTo(v)<0&&(d.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),u.addEntry(m)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,i,t,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=ct();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(t))).next(()=>n.localDocuments.getDocuments(i,r))})}function pW(e){let t=me(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Ur.getLastRemoteSnapshotVersion(n))}function Eme(e,t){let n=me(e),i=t.snapshotVersion,r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;let a=[];t.targetChanges.forEach((u,d)=>{let h=r.get(d);if(!h)return;a.push(n.Ur.removeMatchingKeys(o,u.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(o,u.addedDocuments,d)));let p=h.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(d)!==null?p=p.withResumeToken(oi.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,i)),r=r.insert(d,p),function(m,v,C){return m.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(h,p,u)&&a.push(n.Ur.updateTargetData(o,p))});let l=wo(),c=ct();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(gW(o,s,t.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!i.isEqual(ze.min())){let u=n.Ur.getLastRemoteSnapshotVersion(o).next(d=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));a.push(u)}return U.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(n.os=r,o))}function gW(e,t,n){let i=ct(),r=ct();return n.forEach(o=>i=i.add(o)),t.getEntries(e,i).next(o=>{let s=wo();return n.forEach((a,l)=>{let c=o.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(ze.min())?(t.removeEntry(a,l.readTime),s=s.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),s=s.insert(a,l)):te("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:s,Is:r}})}function xme(e,t){let n=me(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function Ig(e,t){let n=me(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,t).next(o=>o?(r=o,U.resolve(r)):n.Ur.allocateTargetId(i).next(s=>(r=new Tg(t,s,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(t,i.targetId)),i})}function Fg(e,t,n){return N(this,null,function*(){let i=me(e),r=i.os.get(t),o=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!Pu(s))throw s;te("LocalStore",`Failed to update sequence numbers for target ${t}: ${s}`)}i.os=i.os.remove(t),i._s.delete(r.target)})}function fE(e,t,n){let i=me(e),r=ze.min(),o=ct();return i.persistence.runTransaction("Execute query","readwrite",s=>function(l,c,u){let d=me(l),h=d._s.get(u);return h!==void 0?U.resolve(d.os.get(h)):d.Ur.getTargetData(c,u)}(i,s,zr(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>i.ss.getDocumentsMatchingQuery(s,t,n?r:ze.min(),n?o:ct())).next(a=>(yW(i,Aj(t),a),{documents:a,Ts:o})))}function mW(e,t){let n=me(e),i=me(n.Ur),r=n.os.get(t);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",o=>i.ot(o,t).next(s=>s?s.target:null))}function vW(e,t){let n=me(e),i=n.us.get(t)||ze.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.cs.getAllFromCollectionGroup(r,t,uj(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(yW(n,t,r),r))}function yW(e,t,n){let i=e.us.get(t)||ze.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),e.us.set(t,i)}function Dme(e,t,n,i){return N(this,null,function*(){let r=me(e),o=ct(),s=wo();for(let c of n){let u=t.Es(c.metadata.name);c.document&&(o=o.add(u));let d=t.ds(c);d.setReadTime(t.As(c.metadata.readTime)),s=s.insert(u,d)}let a=r.cs.newChangeBuffer({trackRemovals:!0}),l=yield Ig(r,function(u){return zr(Vg(Ht.fromString(`__bundle__/docs/${u}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>gW(c,a,s).next(u=>(a.apply(c),u)).next(u=>r.Ur.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.Ur.addMatchingKeys(c,o,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,u.Ps,u.Is)).next(()=>u.Ps)))})}function Tme(i,r){return N(this,arguments,function*(e,t,n=ct()){let o=yield Ig(e,zr(vk(t.bundledQuery))),s=me(e);return s.persistence.runTransaction("Save named query","readwrite",a=>{let l=ri(t.readTime);if(o.snapshotVersion.compareTo(l)>=0)return s.Gr.saveNamedQuery(a,t);let c=o.withResumeToken(oi.EMPTY_BYTE_STRING,l);return s.os=s.os.insert(c.targetId,c),s.Ur.updateTargetData(a,c).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,n,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,t))})})}function YU(e,t){return`firestore_clients_${e}_${t}`}function QU(e,t,n){let i=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function rP(e,t){return`firestore_targets_${e}_${t}`}var pE=class e{constructor(t,n,i,r){this.user=t,this.batchId=n,this.state=i,this.error=r}static Rs(t,n,i){let r=JSON.parse(i),o,s=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(o=new ee(r.error.code,r.error.message))),s?new e(t,n,r.state,o):(ni("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}Vs(){let t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}},hy=class e{constructor(t,n,i){this.targetId=t,this.state=n,this.error=i}static Rs(t,n){let i=JSON.parse(n),r,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(r=new ee(i.error.code,i.error.message))),o?new e(t,i.state,r):(ni("SharedClientState",`Failed to parse target state for ID '${t}': ${n}`),null)}Vs(){let t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}},gE=class e{constructor(t,n){this.clientId=t,this.activeTargetIds=n}static Rs(t,n){let i=JSON.parse(n),r=typeof i=="object"&&i.activeTargetIds instanceof Array,o=pk();for(let s=0;r&&s<i.activeTargetIds.length;++s)r=pj(i.activeTargetIds[s]),o=o.add(i.activeTargetIds[s]);return r?new e(t,o):(ni("SharedClientState",`Failed to parse client data for instance '${t}': ${n}`),null)}},w2=class e{constructor(t,n){this.clientId=t,this.onlineState=n}static Rs(t){let n=JSON.parse(t);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new e(n.clientId,n.onlineState):(ni("SharedClientState",`Failed to parse online state: ${t}`),null)}},Iy=class{constructor(){this.activeTargetIds=pk()}fs(t){this.activeTargetIds=this.activeTargetIds.add(t)}gs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Vs(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}},fy=class{constructor(t,n,i,r,o){this.window=t,this.ui=n,this.persistenceKey=i,this.ps=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new En(at),this.started=!1,this.bs=[];let s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=YU(this.persistenceKey,this.ps),this.vs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Iy),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Os=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(t){return!(!t||!t.localStorage)}start(){return N(this,null,function*(){let t=yield this.syncEngine.Qi();for(let i of t){if(i===this.ps)continue;let r=this.getItem(YU(this.persistenceKey,i));if(r){let o=gE.Rs(i,r);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let n=this.storage.getItem(this.xs);if(n){let i=this.Ls(n);i&&this.Bs(i)}for(let i of this.bs)this.ws(i);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(t){this.setItem(this.vs,JSON.stringify(t))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(t){let n=!1;return this.Ss.forEach((i,r)=>{r.activeTargetIds.has(t)&&(n=!0)}),n}addPendingMutation(t){this.qs(t,"pending")}updateMutationState(t,n,i){this.qs(t,n,i),this.Qs(t)}addLocalQueryTarget(t,n=!0){let i="not-current";if(this.isActiveQueryTarget(t)){let r=this.storage.getItem(rP(this.persistenceKey,t));if(r){let o=hy.Rs(t,r);o&&(i=o.state)}}return n&&this.Ks.fs(t),this.Ns(),i}removeLocalQueryTarget(t){this.Ks.gs(t),this.Ns()}isLocalQueryTarget(t){return this.Ks.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(rP(this.persistenceKey,t))}updateQueryState(t,n,i){this.$s(t,n,i)}handleUserChange(t,n,i){n.forEach(r=>{this.Qs(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Us(t)}notifyBundleLoaded(t){this.Ws(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(t){let n=this.storage.getItem(t);return te("SharedClientState","READ",t,n),n}setItem(t,n){te("SharedClientState","SET",t,n),this.storage.setItem(t,n)}removeItem(t){te("SharedClientState","REMOVE",t),this.storage.removeItem(t)}ws(t){let n=t;if(n.storageArea===this.storage){if(te("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ds)return void ni("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(n.key!==null){if(this.Cs.test(n.key)){if(n.newValue==null){let i=this.Gs(n.key);return this.zs(i,null)}{let i=this.js(n.key,n.newValue);if(i)return this.zs(i.clientId,i)}}else if(this.Fs.test(n.key)){if(n.newValue!==null){let i=this.Hs(n.key,n.newValue);if(i)return this.Js(i)}}else if(this.Ms.test(n.key)){if(n.newValue!==null){let i=this.Ys(n.key,n.newValue);if(i)return this.Zs(i)}}else if(n.key===this.xs){if(n.newValue!==null){let i=this.Ls(n.newValue);if(i)return this.Bs(i)}}else if(n.key===this.vs){let i=function(o){let s=Yo.oe;if(o!=null)try{let a=JSON.parse(o);Ie(typeof a=="number"),s=a}catch(a){ni("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);i!==Yo.oe&&this.sequenceNumberHandler(i)}else if(n.key===this.Os){let i=this.Xs(n.newValue);yield Promise.all(i.map(r=>this.syncEngine.eo(r)))}}}else this.bs.push(n)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(t,n,i){let r=new pE(this.currentUser,t,n,i),o=QU(this.persistenceKey,this.currentUser,t);this.setItem(o,r.Vs())}Qs(t){let n=QU(this.persistenceKey,this.currentUser,t);this.removeItem(n)}Us(t){let n={clientId:this.ps,onlineState:t};this.storage.setItem(this.xs,JSON.stringify(n))}$s(t,n,i){let r=rP(this.persistenceKey,t),o=new hy(t,n,i);this.setItem(r,o.Vs())}Ws(t){let n=JSON.stringify(Array.from(t));this.setItem(this.Os,n)}Gs(t){let n=this.Cs.exec(t);return n?n[1]:null}js(t,n){let i=this.Gs(t);return gE.Rs(i,n)}Hs(t,n){let i=this.Fs.exec(t),r=Number(i[1]),o=i[2]!==void 0?i[2]:null;return pE.Rs(new vi(o),r,n)}Ys(t,n){let i=this.Ms.exec(t),r=Number(i[1]);return hy.Rs(r,n)}Ls(t){return w2.Rs(t)}Xs(t){return JSON.parse(t)}Js(t){return N(this,null,function*(){if(t.user.uid===this.currentUser.uid)return this.syncEngine.no(t.batchId,t.state,t.error);te("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})}Zs(t){return this.syncEngine.ro(t.targetId,t.state,t.error)}zs(t,n){let i=n?this.Ss.insert(t,n):this.Ss.remove(t),r=this.ks(this.Ss),o=this.ks(i),s=[],a=[];return o.forEach(l=>{r.has(l)||s.push(l)}),r.forEach(l=>{o.has(l)||a.push(l)}),this.syncEngine.io(s,a).then(()=>{this.Ss=i})}Bs(t){this.Ss.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}ks(t){let n=pk();return t.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}},mE=class{constructor(){this.so=new Iy,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.so.fs(t),this.oo[t]||"not-current"}updateQueryState(t,n,i){this.oo[t]=n}removeLocalQueryTarget(t){this.so.gs(t)}isLocalQueryTarget(t){return this.so.activeTargetIds.has(t)}clearQueryState(t){delete this.oo[t]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(t){return this.so.activeTargetIds.has(t)}start(){return this.so=new Iy,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var b2=class{_o(t){}shutdown(){}};var vE=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(t){this.ho.push(t)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.ho)t(0)}lo(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.ho)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var k_=null;function oP(){return k_===null?k_=function(){return 268435456+Math.round(2147483648*Math.random())}():k_++,"0x"+k_.toString(16)}var Rme={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var S2=class{constructor(t){this.Io=t.Io,this.To=t.To}Eo(t){this.Ao=t}Ro(t){this.Vo=t}mo(t){this.fo=t}onMessage(t){this.po=t}close(){this.To()}send(t){this.Io(t)}yo(){this.Ao()}wo(){this.Vo()}So(t){this.fo(t)}bo(t){this.po(t)}};var vr="WebChannelConnection",_2=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Fo(){return!1}Mo(n,i,r,o,s){let a=oP(),l=this.xo(n,i.toUriEncodedString());te("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);let c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,o,s),this.No(n,l,c,r).then(u=>(te("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw ua("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",r),u})}Lo(n,i,r,o,s,a){return this.Mo(n,i,r,o,s)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Lg}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,s)=>n[s]=o),r&&r.headers.forEach((o,s)=>n[s]=o)}xo(n,i){let r=Rme[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}No(t,n,i,r){let o=oP();return new Promise((s,a)=>{let l=new $M;l.setWithCredentials(!0),l.listenOnce(ZM.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ny.NO_ERROR:let u=l.getResponseJson();te(vr,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(u)),s(u);break;case ny.TIMEOUT:te(vr,`RPC '${t}' ${o} timed out`),a(new ee(K.DEADLINE_EXCEEDED,"Request time out"));break;case ny.HTTP_ERROR:let d=l.getStatus();if(te(vr,`RPC '${t}' ${o} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);let p=h?.error;if(p&&p.status&&p.message){let g=function(v){let C=v.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(C)>=0?C:K.UNKNOWN}(p.status);a(new ee(g,p.message))}else a(new ee(K.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ee(K.UNAVAILABLE,"Connection failed."));break;default:xe()}}finally{te(vr,`RPC '${t}' ${o} completed.`)}});let c=JSON.stringify(r);te(vr,`RPC '${t}' ${o} sending request:`,r),l.send(n,"POST",c,i,15)})}Bo(t,n,i){let r=oP(),o=[this.Do,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=tP(),a=eP(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;let u=o.join("");te(vr,`Creating RPC '${t}' stream ${r}: ${u}`,l);let d=s.createWebChannel(u,l),h=!1,p=!1,g=new S2({Io:v=>{p?te(vr,`Not sending because RPC '${t}' stream ${r} is closed:`,v):(h||(te(vr,`Opening RPC '${t}' stream ${r} transport.`),d.open(),h=!0),te(vr,`RPC '${t}' stream ${r} sending:`,v),d.send(v))},To:()=>d.close()}),m=(v,C,S)=>{v.listen(C,_=>{try{S(_)}catch(D){setTimeout(()=>{throw D},0)}})};return m(d,sg.EventType.OPEN,()=>{p||(te(vr,`RPC '${t}' stream ${r} transport opened.`),g.yo())}),m(d,sg.EventType.CLOSE,()=>{p||(p=!0,te(vr,`RPC '${t}' stream ${r} transport closed`),g.So())}),m(d,sg.EventType.ERROR,v=>{p||(p=!0,ua(vr,`RPC '${t}' stream ${r} transport errored:`,v),g.So(new ee(K.UNAVAILABLE,"The operation could not be completed")))}),m(d,sg.EventType.MESSAGE,v=>{var C;if(!p){let S=v.data[0];Ie(!!S);let _=S,D=_.error||((C=_[0])===null||C===void 0?void 0:C.error);if(D){te(vr,`RPC '${t}' stream ${r} received error:`,D);let F=D.status,I=function(x){let k=gi[x];if(k!==void 0)return Wj(k)}(F),E=D.message;I===void 0&&(I=K.INTERNAL,E="Unknown error status: "+F+" with message "+D.message),p=!0,g.So(new ee(I,E)),d.close()}else te(vr,`RPC '${t}' stream ${r} received:`,S),g.bo(S)}}),m(a,JM.STAT_EVENT,v=>{v.stat===F_.PROXY?te(vr,`RPC '${t}' stream ${r} detected buffering proxy`):v.stat===F_.NOPROXY&&te(vr,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{g.wo()},0),g}};function CW(){return typeof window<"u"?window:null}function B_(){return typeof document<"u"?document:null}function By(e){return new VP(e,!0)}var Fy=class{constructor(t,n,i=1e3,r=1.5,o=6e4){this.ui=t,this.timerId=n,this.ko=i,this.qo=r,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(t){this.cancel();let n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&te("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),t())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var yE=class{constructor(t,n,i,r,o,s,a,l){this.ui=t,this.Ho=i,this.Jo=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Fy(t,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(t){this.u_(),this.stream.send(t)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(t,n){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,t!==4?this.t_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(ni(n.toString()),ni("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let t=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{t(()=>{let r=new ee(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(t,n){let i=this.h_(this.Yo);this.stream=this.T_(t,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(t){return te("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}h_(t){return n=>{this.ui.enqueueAndForget(()=>this.Yo===t?n():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},E2=class extends yE{constructor(t,n,i,r,o,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o}T_(t,n){return this.connection.Bo("Listen",t,n)}E_(t){return this.onNext(t)}onNext(t){this.t_.reset();let n=hme(this.serializer,t),i=function(o){if(!("targetChange"in o))return ze.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ze.min():s.readTime?ri(s.readTime):ze.min()}(t);return this.listener.d_(n,i)}A_(t){let n={};n.database=HP(this.serializer),n.addTarget=function(o,s){let a,l=s.target;if(a=Q_(l)?{documents:Jj(o,l)}:{query:eW(o,l)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Kj(o,s.resumeToken);let c=BP(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(ze.min())>0){a.readTime=Dg(o,s.snapshotVersion.toTimestamp());let c=BP(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);let i=pme(this.serializer,t);i&&(n.labels=i),this.a_(n)}R_(t){let n={};n.database=HP(this.serializer),n.removeTarget=t,this.a_(n)}},x2=class extends yE{constructor(t,n,i,r,o,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(t,n){return this.connection.Bo("Write",t,n)}E_(t){return Ie(!!t.streamToken),this.lastStreamToken=t.streamToken,Ie(!t.writeResults||t.writeResults.length===0),this.listener.f_()}onNext(t){Ie(!!t.streamToken),this.lastStreamToken=t.streamToken,this.t_.reset();let n=fme(t.writeResults,t.commitTime),i=ri(t.commitTime);return this.listener.g_(i,n)}p_(){let t={};t.database=HP(this.serializer),this.a_(t)}m_(t){let n={streamToken:this.lastStreamToken,writes:t.map(i=>Dy(this.serializer,i))};this.a_(n)}};var D2=class extends class{}{constructor(t,n,i,r){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new ee(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(t,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(t,GP(n,i),r,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ee(K.UNKNOWN,o.toString())})}Lo(t,n,i,r,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(t,GP(n,i),r,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ee(K.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},T2=class{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(t){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.x_(),this.S_=0,t==="Online"&&(this.D_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}F_(t){let n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ni(n),this.D_=!1):te("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var R2=class{constructor(t,n,i,r,o){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{i.enqueueAndForget(()=>N(this,null,function*(){ku(this)&&(te("RemoteStore","Restarting streams for network reachability change."),yield function(l){return N(this,null,function*(){let c=me(l);c.L_.add(4),yield Bg(c),c.q_.set("Unknown"),c.L_.delete(4),yield Gy(c)})}(this))}))}),this.q_=new T2(i,r)}};function Gy(e){return N(this,null,function*(){if(ku(e))for(let t of e.B_)yield t(!0)})}function Bg(e){return N(this,null,function*(){for(let t of e.B_)yield t(!1)})}function BE(e,t){let n=me(e);n.N_.has(t.targetId)||(n.N_.set(t.targetId,t),Sk(n)?bk(n):Hg(n).r_()&&wk(n,t))}function Ag(e,t){let n=me(e),i=Hg(n);n.N_.delete(t),i.r_()&&wW(n,t),n.N_.size===0&&(i.r_()?i.o_():ku(n)&&n.q_.set("Unknown"))}function wk(e,t){if(e.Q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ze.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Hg(e).A_(t)}function wW(e,t){e.Q_.xe(t),Hg(e).R_(t)}function bk(e){e.Q_=new LP({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.N_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),Hg(e).start(),e.q_.v_()}function Sk(e){return ku(e)&&!Hg(e).n_()&&e.N_.size>0}function ku(e){return me(e).L_.size===0}function bW(e){e.Q_=void 0}function Ime(e){return N(this,null,function*(){e.q_.set("Online")})}function Fme(e){return N(this,null,function*(){e.N_.forEach((t,n)=>{wk(e,t)})})}function Ame(e,t){return N(this,null,function*(){bW(e),Sk(e)?(e.q_.M_(t),bk(e)):e.q_.set("Unknown")})}function Mme(e,t,n){return N(this,null,function*(){if(e.q_.set("Online"),t instanceof J_&&t.state===2&&t.cause)try{yield function(r,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)r.N_.has(a)&&(yield r.remoteSyncer.rejectListen(a,s),r.N_.delete(a),r.Q_.removeTarget(a))})}(e,t)}catch(i){te("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield CE(e,i)}else if(t instanceof Cg?e.Q_.Ke(t):t instanceof Z_?e.Q_.He(t):e.Q_.We(t),!n.isEqual(ze.min()))try{let i=yield pW(e.localStore);n.compareTo(i)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){let u=o.N_.get(c);u&&o.N_.set(c,u.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,c)=>{let u=o.N_.get(l);if(!u)return;o.N_.set(l,u.withResumeToken(oi.EMPTY_BYTE_STRING,u.snapshotVersion)),wW(o,l);let d=new Tg(u.target,l,c,u.sequenceNumber);wk(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(e,n))}catch(i){te("RemoteStore","Failed to raise snapshot:",i),yield CE(e,i)}})}function CE(e,t,n){return N(this,null,function*(){if(!Pu(t))throw t;e.L_.add(1),yield Bg(e),e.q_.set("Offline"),n||(n=()=>pW(e.localStore)),e.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){te("RemoteStore","Retrying IndexedDB access"),yield n(),e.L_.delete(1),yield Gy(e)}))})}function SW(e,t){return t().catch(n=>CE(e,n,t))}function Gg(e){return N(this,null,function*(){let t=me(e),n=Au(t),i=t.O_.length>0?t.O_[t.O_.length-1].batchId:-1;for(;Pme(t);)try{let r=yield xme(t.localStore,i);if(r===null){t.O_.length===0&&n.o_();break}i=r.batchId,kme(t,r)}catch(r){yield CE(t,r)}_W(t)&&EW(t)})}function Pme(e){return ku(e)&&e.O_.length<10}function kme(e,t){e.O_.push(t);let n=Au(e);n.r_()&&n.V_&&n.m_(t.mutations)}function _W(e){return ku(e)&&!Au(e).n_()&&e.O_.length>0}function EW(e){Au(e).start()}function Ome(e){return N(this,null,function*(){Au(e).p_()})}function Nme(e){return N(this,null,function*(){let t=Au(e);for(let n of e.O_)t.m_(n.mutations)})}function Lme(e,t,n){return N(this,null,function*(){let i=e.O_.shift(),r=kP.from(i,t,n);yield SW(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),yield Gg(e)})}function Vme(e,t){return N(this,null,function*(){t&&Au(e).V_&&(yield function(i,r){return N(this,null,function*(){if(function(s){return jj(s)&&s!==K.ABORTED}(r.code)){let o=i.O_.shift();Au(i).s_(),yield SW(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield Gg(i)}})}(e,t)),_W(e)&&EW(e)})}function XU(e,t){return N(this,null,function*(){let n=me(e);n.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");let i=ku(n);n.L_.add(3),yield Bg(n),i&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(t),n.L_.delete(3),yield Gy(n)})}function I2(e,t){return N(this,null,function*(){let n=me(e);t?(n.L_.delete(2),yield Gy(n)):t||(n.L_.add(2),yield Bg(n),n.q_.set("Unknown"))})}function Hg(e){return e.K_||(e.K_=function(n,i,r){let o=me(n);return o.w_(),new E2(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(e.datastore,e.asyncQueue,{Eo:Ime.bind(null,e),Ro:Fme.bind(null,e),mo:Ame.bind(null,e),d_:Mme.bind(null,e)}),e.B_.push(t=>N(this,null,function*(){t?(e.K_.s_(),Sk(e)?bk(e):e.q_.set("Unknown")):(yield e.K_.stop(),bW(e))}))),e.K_}function Au(e){return e.U_||(e.U_=function(n,i,r){let o=me(n);return o.w_(),new x2(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(e.datastore,e.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Ome.bind(null,e),mo:Vme.bind(null,e),f_:Nme.bind(null,e),g_:Lme.bind(null,e)}),e.B_.push(t=>N(this,null,function*(){t?(e.U_.s_(),yield Gg(e)):(yield e.U_.stop(),e.O_.length>0&&(te("RemoteStore",`Stopping write stream with ${e.O_.length} pending writes`),e.O_=[]))}))),e.U_}var F2=class e{constructor(t,n,i,r,o){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,r,o){let s=Date.now()+i,a=new e(t,n,s,r,o);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(K.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function zg(e,t){if(ni("AsyncQueue",`${t}: ${e}`),Pu(e))return new ee(K.UNAVAILABLE,`${t}: ${e}`);throw e}var wE=class e{constructor(t){this.comparator=t?(n,i)=>t(n,i)||ve.comparator(n.key,i.key):(n,i)=>ve.comparator(n.key,i.key),this.keyedMap=ay(),this.sortedSet=new En(this.comparator)}static emptySet(t){return new e(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){let n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){let n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){let i=new e;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}};var bE=class{constructor(){this.W_=new En(ve.comparator)}track(t){let n=t.doc.key,i=this.W_.get(n);i?t.type!==0&&i.type===3?this.W_=this.W_.insert(n,t):t.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.W_=this.W_.remove(n):t.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:t.doc}):xe():this.W_=this.W_.insert(n,t)}G_(){let t=[];return this.W_.inorderTraversal((n,i)=>{t.push(i)}),t}},Mg=class e{constructor(t,n,i,r,o,s,a,l,c){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,i,r,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new e(t,n,wE.emptySet(n),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ly(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var A2=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(t=>t.J_())}},M2=class{constructor(){this.queries=$U(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){let r=me(n),o=r.queries;r.queries=$U(),o.forEach((s,a)=>{for(let l of a.j_)l.onError(i)})})(this,new ee(K.ABORTED,"Firestore shutting down"))}};function $U(){return new sl(e=>Fj(e),Ly)}function _k(e,t){return N(this,null,function*(){let n=me(e),i=3,r=t.query,o=n.queries.get(r);o?!o.H_()&&t.J_()&&(i=2):(o=new A2,i=t.J_()?0:1);try{switch(i){case 0:o.z_=yield n.onListen(r,!0);break;case 1:o.z_=yield n.onListen(r,!1);break;case 2:yield n.onFirstRemoteStoreListen(r)}}catch(s){let a=zg(s,`Initialization of query '${hg(t.query)}' failed`);return void t.onError(a)}n.queries.set(r,o),o.j_.push(t),t.Z_(n.onlineState),o.z_&&t.X_(o.z_)&&xk(n)})}function Ek(e,t){return N(this,null,function*(){let n=me(e),i=t.query,r=3,o=n.queries.get(i);if(o){let s=o.j_.indexOf(t);s>=0&&(o.j_.splice(s,1),o.j_.length===0?r=t.J_()?0:1:!o.H_()&&t.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function Bme(e,t){let n=me(e),i=!1;for(let r of t){let o=r.query,s=n.queries.get(o);if(s){for(let a of s.j_)a.X_(r)&&(i=!0);s.z_=r}}i&&xk(n)}function Gme(e,t,n){let i=me(e),r=i.queries.get(t);if(r)for(let o of r.j_)o.onError(n);i.queries.delete(t)}function xk(e){e.Y_.forEach(t=>{t.next()})}var P2,ZU;(ZU=P2||(P2={})).ea="default",ZU.Cache="cache";var Ay=class{constructor(t,n,i){this.query=t,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(t){if(!this.options.includeMetadataChanges){let i=[];for(let r of t.docChanges)r.type!==3&&i.push(r);t=new Mg(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.na?this.ia(t)&&(this.ta.next(t),n=!0):this.sa(t,this.onlineState)&&(this.oa(t),n=!0),this.ra=t,n}onError(t){this.ta.error(t)}Z_(t){this.onlineState=t;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,t)&&(this.oa(this.ra),n=!0),n}sa(t,n){if(!t.fromCache||!this.J_())return!0;let i=n!=="Offline";return(!this.options._a||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ia(t){if(t.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(t){t=Mg.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.na=!0,this.ta.next(t)}J_(){return this.options.source!==P2.Cache}};var k2=class{constructor(t,n){this.aa=t,this.byteLength=n}ua(){return"metadata"in this.aa}};var SE=class{constructor(t){this.serializer=t}Es(t){return nl(this.serializer,t)}ds(t){return t.metadata.exists?Zj(this.serializer,t.document,!1):yi.newNoDocument(this.Es(t.metadata.name),this.As(t.metadata.readTime))}As(t){return ri(t)}},O2=class{constructor(t,n,i){this.ca=t,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=xW(t)}la(t){this.progress.bytesLoaded+=t.byteLength;let n=this.progress.documentsLoaded;if(t.aa.namedQuery)this.queries.push(t.aa.namedQuery);else if(t.aa.documentMetadata){this.documents.push({metadata:t.aa.documentMetadata}),t.aa.documentMetadata.exists||++n;let i=Ht.fromString(t.aa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.aa.document&&(this.documents[this.documents.length-1].document=t.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(t){let n=new Map,i=new SE(this.serializer);for(let r of t)if(r.metadata.queries){let o=i.Es(r.metadata.name);for(let s of r.metadata.queries){let a=(n.get(s)||ct()).add(o);n.set(s,a)}}return n}complete(){return N(this,null,function*(){let t=yield Dme(this.localStore,new SE(this.serializer),this.documents,this.ca.id),n=this.ha(this.documents);for(let i of this.queries)yield Tme(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:t}})}};function xW(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var _E=class{constructor(t){this.key=t}},EE=class{constructor(t){this.key=t}},xE=class{constructor(t,n){this.query=t,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ct(),this.mutatedKeys=ct(),this.Aa=Mj(t),this.Ra=new wE(this.Aa)}get Va(){return this.Ta}ma(t,n){let i=n?n.fa:new bE,r=n?n.Ra:this.Ra,o=n?n.mutatedKeys:this.mutatedKeys,s=r,a=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((u,d)=>{let h=r.get(u),p=Vy(this.query,d)?d:null,g=!!h&&this.mutatedKeys.has(h.key),m=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations),v=!1;h&&p?h.data.isEqual(p.data)?g!==m&&(i.track({type:3,doc:p}),v=!0):this.ga(h,p)||(i.track({type:2,doc:p}),v=!0,(l&&this.Aa(p,l)>0||c&&this.Aa(p,c)<0)&&(a=!0)):!h&&p?(i.track({type:0,doc:p}),v=!0):h&&!p&&(i.track({type:1,doc:h}),v=!0,(l||c)&&(a=!0)),v&&(p?(s=s.add(p),o=m?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),i.track({type:1,doc:u})}return{Ra:s,fa:i,ns:a,mutatedKeys:o}}ga(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,r){let o=this.Ra;this.Ra=t.Ra,this.mutatedKeys=t.mutatedKeys;let s=t.fa.G_();s.sort((u,d)=>function(p,g){let m=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe()}};return m(p)-m(g)}(u.type,d.type)||this.Aa(u.doc,d.doc)),this.pa(i),r=r!=null&&r;let a=n&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,c=l!==this.Ea;return this.Ea=l,s.length!==0||c?{snapshot:new Mg(this.query,t.Ra,o,s,t.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new bE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(t){return!this.Ta.has(t)&&!!this.Ra.has(t)&&!this.Ra.get(t).hasLocalMutations}pa(t){t&&(t.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=t.current)}ya(){if(!this.current)return[];let t=this.da;this.da=ct(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});let n=[];return t.forEach(i=>{this.da.has(i)||n.push(new EE(i))}),this.da.forEach(i=>{t.has(i)||n.push(new _E(i))}),n}ba(t){this.Ta=t.Ts,this.da=ct();let n=this.ma(t.documents);return this.applyChanges(n,!0)}Da(){return Mg.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},N2=class{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}},L2=class{constructor(t){this.key=t,this.va=!1}},V2=class{constructor(t,n,i,r,o,s){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new sl(a=>Fj(a),Ly),this.Ma=new Map,this.xa=new Set,this.Oa=new En(ve.comparator),this.Na=new Map,this.La=new Ry,this.Ba={},this.ka=new Map,this.qa=Rg.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Hme(e,t,n=!0){return N(this,null,function*(){let i=GE(e),r,o=i.Fa.get(t);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.Da()):r=yield DW(i,t,n,!0),r})}function zme(e,t){return N(this,null,function*(){let n=GE(e);yield DW(n,t,!0,!1)})}function DW(e,t,n,i){return N(this,null,function*(){let r=yield Ig(e.localStore,zr(t)),o=r.targetId,s=e.sharedClientState.addLocalQueryTarget(o,n),a;return i&&(a=yield Dk(e,t,o,s==="current",r.resumeToken)),e.isPrimaryClient&&n&&BE(e.remoteStore,r),a})}function Dk(e,t,n,i,r){return N(this,null,function*(){e.Ka=(d,h,p)=>function(m,v,C,S){return N(this,null,function*(){let _=v.view.ma(C);_.ns&&(_=yield fE(m.localStore,v.query,!1).then(({documents:E})=>v.view.ma(E,_)));let D=S&&S.targetChanges.get(v.targetId),F=S&&S.targetMismatches.get(v.targetId)!=null,I=v.view.applyChanges(_,m.isPrimaryClient,D,F);return B2(m,v.targetId,I.wa),I.snapshot})}(e,d,h,p);let o=yield fE(e.localStore,t,!0),s=new xE(t,o.Ts),a=s.ma(o.documents),l=Ey.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",r),c=s.applyChanges(a,e.isPrimaryClient,l);B2(e,n,c.wa);let u=new N2(t,n,s);return e.Fa.set(t,u),e.Ma.has(n)?e.Ma.get(n).push(t):e.Ma.set(n,[t]),c.snapshot})}function Ume(e,t,n){return N(this,null,function*(){let i=me(e),r=i.Fa.get(t),o=i.Ma.get(r.targetId);if(o.length>1)return i.Ma.set(r.targetId,o.filter(s=>!Ly(s,t))),void i.Fa.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Fg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Ag(i.remoteStore,r.targetId),Pg(i,r.targetId)}).catch(Mu))):(Pg(i,r.targetId),yield Fg(i.localStore,r.targetId,!0))})}function jme(e,t){return N(this,null,function*(){let n=me(e),i=n.Fa.get(t),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Ag(n.remoteStore,i.targetId))})}function Wme(e,t,n){return N(this,null,function*(){let i=Fk(e);try{let r=yield function(s,a){let l=me(s),c=yn.now(),u=a.reduce((p,g)=>p.add(g.key),ct()),d,h;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=wo(),m=ct();return l.cs.getEntries(p,u).next(v=>{g=v,g.forEach((C,S)=>{S.isValidDocument()||(m=m.add(C))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,g)).next(v=>{d=v;let C=[];for(let S of a){let _=ome(S,d.get(S.key).overlayedDocument);_!=null&&C.push(new ha(S.key,_,_j(_.value.mapValue),Kn.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,C,a)}).next(v=>{h=v;let C=v.applyToLocalDocumentSet(d,m);return l.documentOverlayCache.saveOverlays(p,v.batchId,C)})}).then(()=>({batchId:h.batchId,changes:kj(d)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,a,l){let c=s.Ba[s.currentUser.toKey()];c||(c=new En(at)),c=c.insert(a,l),s.Ba[s.currentUser.toKey()]=c}(i,r.batchId,n),yield ic(i,r.changes),yield Gg(i.remoteStore)}catch(r){let o=zg(r,"Failed to persist write");n.reject(o)}})}function TW(e,t){return N(this,null,function*(){let n=me(e);try{let i=yield Eme(n.localStore,t);t.targetChanges.forEach((r,o)=>{let s=n.Na.get(o);s&&(Ie(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.va=!0:r.modifiedDocuments.size>0?Ie(s.va):r.removedDocuments.size>0&&(Ie(s.va),s.va=!1))}),yield ic(n,i,t)}catch(i){yield Mu(i)}})}function JU(e,t,n){let i=me(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.Fa.forEach((o,s)=>{let a=s.view.Z_(t);a.snapshot&&r.push(a.snapshot)}),function(s,a){let l=me(s);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(let h of d.j_)h.Z_(a)&&(c=!0)}),c&&xk(l)}(i.eventManager,t),r.length&&i.Ca.d_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function qme(e,t,n){return N(this,null,function*(){let i=me(e);i.sharedClientState.updateQueryState(t,"rejected",n);let r=i.Na.get(t),o=r&&r.key;if(o){let s=new En(ve.comparator);s=s.insert(o,yi.newNoDocument(o,ze.min()));let a=ct().add(o),l=new _y(ze.min(),new Map,new En(at),s,a);yield TW(i,l),i.Oa=i.Oa.remove(o),i.Na.delete(t),Ik(i)}else yield Fg(i.localStore,t,!1).then(()=>Pg(i,t,n)).catch(Mu)})}function Kme(e,t){return N(this,null,function*(){let n=me(e),i=t.batch.batchId;try{let r=yield _me(n.localStore,t);Rk(n,i,null),Tk(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield ic(n,r)}catch(r){yield Mu(r)}})}function Yme(e,t,n){return N(this,null,function*(){let i=me(e);try{let r=yield function(s,a){let l=me(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Ie(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(i.localStore,t);Rk(i,t,n),Tk(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),yield ic(i,r)}catch(r){yield Mu(r)}})}function Qme(e,t){return N(this,null,function*(){let n=me(e);ku(n.remoteStore)||te("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(s){let a=me(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(i===-1)return void t.resolve();let r=n.ka.get(i)||[];r.push(t),n.ka.set(i,r)}catch(i){let r=zg(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}})}function Tk(e,t){(e.ka.get(t)||[]).forEach(n=>{n.resolve()}),e.ka.delete(t)}function Rk(e,t,n){let i=me(e),r=i.Ba[i.currentUser.toKey()];if(r){let o=r.get(t);o&&(n?o.reject(n):o.resolve(),r=r.remove(t)),i.Ba[i.currentUser.toKey()]=r}}function Pg(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(let i of e.Ma.get(t))e.Fa.delete(i),n&&e.Ca.$a(i,n);e.Ma.delete(t),e.isPrimaryClient&&e.La.gr(t).forEach(i=>{e.La.containsKey(i)||RW(e,i)})}function RW(e,t){e.xa.delete(t.path.canonicalString());let n=e.Oa.get(t);n!==null&&(Ag(e.remoteStore,n),e.Oa=e.Oa.remove(t),e.Na.delete(n),Ik(e))}function B2(e,t,n){for(let i of n)i instanceof _E?(e.La.addReference(i.key,t),Xme(e,i)):i instanceof EE?(te("SyncEngine","Document no longer in limbo: "+i.key),e.La.removeReference(i.key,t),e.La.containsKey(i.key)||RW(e,i.key)):xe()}function Xme(e,t){let n=t.key,i=n.path.canonicalString();e.Oa.get(n)||e.xa.has(i)||(te("SyncEngine","New document in limbo: "+n),e.xa.add(i),Ik(e))}function Ik(e){for(;e.xa.size>0&&e.Oa.size<e.maxConcurrentLimboResolutions;){let t=e.xa.values().next().value;e.xa.delete(t);let n=new ve(Ht.fromString(t)),i=e.qa.next();e.Na.set(i,new L2(n)),e.Oa=e.Oa.insert(n,i),BE(e.remoteStore,new Tg(zr(Vg(n.path)),i,"TargetPurposeLimboResolution",Yo.oe))}}function ic(e,t,n){return N(this,null,function*(){let i=me(e),r=[],o=[],s=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{s.push(i.Ka(l,t,n).then(c=>{var u;if((c||n)&&i.isPrimaryClient){let d=c?!c.fromCache:(u=n?.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){r.push(c);let d=v2.Wi(l.targetId,c);o.push(d)}}))}),yield Promise.all(s),i.Ca.d_(r),yield function(l,c){return N(this,null,function*(){let u=me(l);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>U.forEach(c,h=>U.forEach(h.$i,p=>u.persistence.referenceDelegate.addReference(d,h.targetId,p)).next(()=>U.forEach(h.Ui,p=>u.persistence.referenceDelegate.removeReference(d,h.targetId,p)))))}catch(d){if(!Pu(d))throw d;te("LocalStore","Failed to update sequence numbers: "+d)}for(let d of c){let h=d.targetId;if(!d.fromCache){let p=u.os.get(h),g=p.snapshotVersion,m=p.withLastLimboFreeSnapshotVersion(g);u.os=u.os.insert(h,m)}}})}(i.localStore,o))})}function $me(e,t){return N(this,null,function*(){let n=me(e);if(!n.currentUser.isEqual(t)){te("SyncEngine","User change. New user:",t.toKey());let i=yield fW(n.localStore,t);n.currentUser=t,function(o,s){o.ka.forEach(a=>{a.forEach(l=>{l.reject(new ee(K.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield ic(n,i.hs)}})}function Zme(e,t){let n=me(e),i=n.Na.get(t);if(i&&i.va)return ct().add(i.key);{let r=ct(),o=n.Ma.get(t);if(!o)return r;for(let s of o){let a=n.Fa.get(s);r=r.unionWith(a.view.Va)}return r}}function Jme(e,t){return N(this,null,function*(){let n=me(e),i=yield fE(n.localStore,t.query,!0),r=t.view.ba(i);return n.isPrimaryClient&&B2(n,t.targetId,r.wa),r})}function eve(e,t){return N(this,null,function*(){let n=me(e);return vW(n.localStore,t).then(i=>ic(n,i))})}function tve(e,t,n,i){return N(this,null,function*(){let r=me(e),o=yield function(a,l){let c=me(a),u=me(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.Mn(d,l).next(h=>h?c.localDocuments.getDocuments(d,h):U.resolve(null)))}(r.localStore,t);o!==null?(n==="pending"?yield Gg(r.remoteStore):n==="acknowledged"||n==="rejected"?(Rk(r,t,i||null),Tk(r,t),function(a,l){me(me(a).mutationQueue).On(l)}(r.localStore,t)):xe(),yield ic(r,o)):te("SyncEngine","Cannot apply mutation batch with id: "+t)})}function nve(e,t){return N(this,null,function*(){let n=me(e);if(GE(n),Fk(n),t===!0&&n.Qa!==!0){let i=n.sharedClientState.getAllActiveQueryTargets(),r=yield ej(n,i.toArray());n.Qa=!0,yield I2(n.remoteStore,!0);for(let o of r)BE(n.remoteStore,o)}else if(t===!1&&n.Qa!==!1){let i=[],r=Promise.resolve();n.Ma.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?i.push(s):r=r.then(()=>(Pg(n,s),Fg(n.localStore,s,!0))),Ag(n.remoteStore,s)}),yield r,yield ej(n,i),function(s){let a=me(s);a.Na.forEach((l,c)=>{Ag(a.remoteStore,c)}),a.La.pr(),a.Na=new Map,a.Oa=new En(ve.comparator)}(n),n.Qa=!1,yield I2(n.remoteStore,!1)}})}function ej(e,t,n){return N(this,null,function*(){let i=me(e),r=[],o=[];for(let s of t){let a,l=i.Ma.get(s);if(l&&l.length!==0){a=yield Ig(i.localStore,zr(l[0]));for(let c of l){let u=i.Fa.get(c),d=yield Jme(i,u);d.snapshot&&o.push(d.snapshot)}}else{let c=yield mW(i.localStore,s);a=yield Ig(i.localStore,c),yield Dk(i,IW(c),s,!1,a.resumeToken)}r.push(a)}return i.Ca.d_(o),r})}function IW(e){return Ij(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function ive(e){return function(n){return me(me(n).persistence).Qi()}(me(e).localStore)}function rve(e,t,n,i){return N(this,null,function*(){let r=me(e);if(r.Qa)return void te("SyncEngine","Ignoring unexpected query state notification.");let o=r.Ma.get(t);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield vW(r.localStore,Aj(o[0])),a=_y.createSynthesizedRemoteEventForCurrentChange(t,n==="current",oi.EMPTY_BYTE_STRING);yield ic(r,s,a);break}case"rejected":yield Fg(r.localStore,t,!0),Pg(r,t,i);break;default:xe()}})}function ove(e,t,n){return N(this,null,function*(){let i=GE(e);if(i.Qa){for(let r of t){if(i.Ma.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){te("SyncEngine","Adding an already active target "+r);continue}let o=yield mW(i.localStore,r),s=yield Ig(i.localStore,o);yield Dk(i,IW(o),s.targetId,!1,s.resumeToken),BE(i.remoteStore,s)}for(let r of n)i.Ma.has(r)&&(yield Fg(i.localStore,r,!1).then(()=>{Ag(i.remoteStore,r),Pg(i,r)}).catch(Mu))}})}function GE(e){let t=me(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=TW.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Zme.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=qme.bind(null,t),t.Ca.d_=Bme.bind(null,t.eventManager),t.Ca.$a=Gme.bind(null,t.eventManager),t}function Fk(e){let t=me(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Kme.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Yme.bind(null,t),t}function sve(e,t,n){let i=me(e);(function(o,s,a){return N(this,null,function*(){try{let l=yield s.getMetadata();if(yield function(p,g){let m=me(p),v=ri(g.createTime);return m.persistence.runTransaction("hasNewerBundle","readonly",C=>m.Gr.getBundleMetadata(C,g.id)).then(C=>!!C&&C.createTime.compareTo(v)>=0)}(o.localStore,l))return yield s.close(),a._completeWith(function(p){return{taskState:"Success",documentsLoaded:p.totalDocuments,bytesLoaded:p.totalBytes,totalDocuments:p.totalDocuments,totalBytes:p.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(xW(l));let c=new O2(l,o.localStore,s.serializer),u=yield s.Ua();for(;u;){let h=yield c.la(u);h&&a._updateProgress(h),u=yield s.Ua()}let d=yield c.complete();return yield ic(o,d.Ia,void 0),yield function(p,g){let m=me(p);return m.persistence.runTransaction("Save bundle","readwrite",v=>m.Gr.saveBundleMetadata(v,g))}(o.localStore,l),a._completeWith(d.progress),Promise.resolve(d.Pa)}catch(l){return ua("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})})(i,t,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var G2=(()=>{class e{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return N(this,null,function*(){this.serializer=By(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,i){return null}Ha(n,i){return null}za(n){return hW(this.persistence,new hE,n.initialUser,this.serializer)}Ga(n){return new uE(dE.Zr,this.serializer)}Wa(n){return new mE}terminate(){return N(this,null,function*(){var n,i;(n=this.gcScheduler)===null||n===void 0||n.stop(),(i=this.indexBackfillerScheduler)===null||i===void 0||i.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return e.provider={build:()=>new e},e})();var DE=class e extends G2{constructor(t,n,i){super(),this.Ja=t,this.cacheSizeBytes=n,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}initialize(t){return N(this,null,function*(){yield fR(e.prototype,this,"initialize").call(this,t),yield this.Ja.initialize(this,t),yield Fk(this.Ja.syncEngine),yield Gg(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(t){return hW(this.persistence,new hE,t.initialUser,this.serializer)}ja(t,n){let i=this.persistence.referenceDelegate.garbageCollector;return new t2(i,t.asyncQueue,n)}Ha(t,n){let i=new yP(n,this.persistence);return new vP(t.asyncQueue,i)}Ga(t){let n=Ck(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?ws.withCacheSize(this.cacheSizeBytes):ws.DEFAULT;return new m2(this.synchronizeTabs,n,t.clientId,i,t.asyncQueue,CW(),B_(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(t){return new mE}},H2=class e extends DE{constructor(t,n){super(t,n,!1),this.Ja=t,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(t){return N(this,null,function*(){yield fR(e.prototype,this,"initialize").call(this,t);let n=this.Ja.syncEngine;this.sharedClientState instanceof fy&&(this.sharedClientState.syncEngine={no:tve.bind(null,n),ro:rve.bind(null,n),io:ove.bind(null,n),Qi:ive.bind(null,n),eo:eve.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.yi(i=>N(this,null,function*(){yield nve(this.Ja.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}Wa(t){let n=CW();if(!fy.D(n))throw new ee(K.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=Ck(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new fy(n,t.asyncQueue,i,t.clientId,t.initialUser)}},Ak=(()=>{class e{initialize(n,i){return N(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>JU(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$me.bind(null,this.syncEngine),yield I2(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new M2}()}createDatastore(n){let i=By(n.databaseInfo.databaseId),r=function(s){return new _2(s)}(n.databaseInfo);return function(s,a,l,c){return new D2(s,a,l,c)}(n.authCredentials,n.appCheckCredentials,r,i)}createRemoteStore(n){return function(r,o,s,a,l){return new R2(r,o,s,a,l)}(this.localStore,this.datastore,n.asyncQueue,i=>JU(this.syncEngine,i,0),function(){return vE.D()?new vE:new b2}())}createSyncEngine(n,i){return function(o,s,a,l,c,u,d){let h=new V2(o,s,a,l,c,u);return d&&(h.Qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,i)}terminate(){return N(this,null,function*(){var n,i;yield function(o){return N(this,null,function*(){let s=me(o);te("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Bg(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(i=this.eventManager)===null||i===void 0||i.terminate()})}}return e.provider={build:()=>new e},e})();function tj(e,t=10240){let n=0;return{read(){return N(this,null,function*(){if(n<e.byteLength){let r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var kg=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ya(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ya(this.observer.error,t):ni("Uncaught Error in snapshot listener:",t.toString()))}Za(){this.muted=!0}Ya(t,n){setTimeout(()=>{this.muted||t(n)},0)}};var z2=class{constructor(t,n){this.Xa=t,this.serializer=n,this.metadata=new Ii,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(i=>{i&&i.ua()?this.metadata.resolve(i.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.aa)}`))},i=>this.metadata.reject(i))}close(){return this.Xa.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return N(this,null,function*(){let t=yield this.nu();if(t===null)return null;let n=this.eu.decode(t),i=Number(n);isNaN(i)&&this.ru(`length string (${n}) is not valid number`);let r=yield this.iu(i);return new k2(JSON.parse(r),t.length+i)})}su(){return this.buffer.findIndex(t=>t===123)}nu(){return N(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let t=this.su();t<0&&this.ru("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),n})}iu(t){return N(this,null,function*(){for(;this.buffer.length<t;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let n=this.eu.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),n})}ru(t){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${t}`)}ou(){return N(this,null,function*(){let t=yield this.Xa.read();if(!t.done){let n=new Uint8Array(this.buffer.length+t.value.length);n.set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n}return t.done})}};var U2=class{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(t){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ee(K.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(r,o){return N(this,null,function*(){let s=me(r),a={documents:o.map(d=>xy(s.serializer,d))},l=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,Ht.emptyPath(),a,o.length),c=new Map;l.forEach(d=>{let h=dme(s.serializer,d);c.set(h.key.toString(),h)});let u=[];return o.forEach(d=>{let h=c.get(d.toString());Ie(!!h),u.push(h)}),u})}(this.datastore,t);return n.forEach(i=>this.recordVersion(i)),n})}set(t,n){this.write(n.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,n){try{this.write(n.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Fu(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let t=this.readVersions;this.mutations.forEach(n=>{t.delete(n.key.toString())}),t.forEach((n,i)=>{let r=ve.fromPath(i);this.mutations.push(new wy(r,this.precondition(r)))}),yield function(i,r){return N(this,null,function*(){let o=me(i),s={writes:r.map(a=>Dy(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,Ht.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(t){let n;if(t.isFoundDocument())n=t.version;else{if(!t.isNoDocument())throw xe();n=ze.min()}let i=this.readVersions.get(t.key.toString());if(i){if(!n.isEqual(i))throw new ee(K.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),n)}precondition(t){let n=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&n?n.isEqual(ze.min())?Kn.exists(!1):Kn.updateTime(n):Kn.none()}preconditionForUpdate(t){let n=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&n){if(n.isEqual(ze.min()))throw new ee(K.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Kn.updateTime(n)}return Kn.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}};var j2=class{constructor(t,n,i,r,o){this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=o,this._u=i.maxAttempts,this.t_=new Fy(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>N(this,null,function*(){let t=new U2(this.datastore),n=this.cu(t);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.lu(r)}))}).catch(i=>{this.lu(i)})}))}cu(t){try{let n=this.updateFunction(t);return!Oy(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(t){this._u>0&&this.hu(t)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(t)}hu(t){if(t.name==="FirebaseError"){let n=t.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!jj(n)}return!1}};var W2=class{constructor(t,n,i,r,o){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=vi.UNAUTHENTICATED,this.clientId=H_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,s=>N(this,null,function*(){te("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(te("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();let t=new Ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){let i=zg(n,"Failed to shutdown persistence");t.reject(i)}})),t.promise}};function sP(e,t){return N(this,null,function*(){e.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");let n=e.configuration;yield t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(r=>N(this,null,function*(){i.isEqual(r)||(yield fW(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t})}function nj(e,t){return N(this,null,function*(){e.asyncQueue.verifyOperationInProgress();let n=yield Mk(e);te("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>XU(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,r)=>XU(t.remoteStore,r)),e._onlineComponents=t})}function Mk(e){return N(this,null,function*(){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){te("FirestoreClient","Using user provided OfflineComponentProvider");try{yield sP(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!function(r){return r.name==="FirebaseError"?r.code===K.FAILED_PRECONDITION||r.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;ua("Error using user provided cache. Falling back to memory cache: "+n),yield sP(e,new G2)}}else te("FirestoreClient","Using default OfflineComponentProvider"),yield sP(e,new G2);return e._offlineComponents})}function HE(e){return N(this,null,function*(){return e._onlineComponents||(e._uninitializedComponentsProvider?(te("FirestoreClient","Using user provided OnlineComponentProvider"),yield nj(e,e._uninitializedComponentsProvider._online)):(te("FirestoreClient","Using default OnlineComponentProvider"),yield nj(e,new Ak))),e._onlineComponents})}function FW(e){return Mk(e).then(t=>t.persistence)}function Pk(e){return Mk(e).then(t=>t.localStore)}function AW(e){return HE(e).then(t=>t.remoteStore)}function kk(e){return HE(e).then(t=>t.syncEngine)}function ave(e){return HE(e).then(t=>t.datastore)}function Og(e){return N(this,null,function*(){let t=yield HE(e),n=t.eventManager;return n.onListen=Hme.bind(null,t.syncEngine),n.onUnlisten=Ume.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=zme.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=jme.bind(null,t.syncEngine),n})}function lve(e){return e.asyncQueue.enqueue(()=>N(this,null,function*(){let t=yield FW(e),n=yield AW(e);return t.setNetworkEnabled(!0),function(r){let o=me(r);return o.L_.delete(0),Gy(o)}(n)}))}function cve(e){return e.asyncQueue.enqueue(()=>N(this,null,function*(){let t=yield FW(e),n=yield AW(e);return t.setNetworkEnabled(!1),function(r){return N(this,null,function*(){let o=me(r);o.L_.add(0),yield Bg(o),o.q_.set("Offline")})}(n)}))}function uve(e,t){let n=new Ii;return e.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(r,o,s){return N(this,null,function*(){try{let a=yield function(c,u){let d=me(c);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,u))}(r,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new ee(K.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let l=zg(a,`Failed to get document '${o} from cache`);s.reject(l)}})}(yield Pk(e),t,n)})),n.promise}function MW(e,t,n={}){let i=new Ii;return e.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,l,c){let u=new kg({next:h=>{u.Za(),s.enqueueAndForget(()=>Ek(o,d));let p=h.docs.has(a);!p&&h.fromCache?c.reject(new ee(K.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&l&&l.source==="server"?c.reject(new ee(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new Ay(Vg(a.path),u,{includeMetadataChanges:!0,_a:!0});return _k(o,d)}(yield Og(e),e.asyncQueue,t,n,i)})),i.promise}function dve(e,t){let n=new Ii;return e.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(r,o,s){return N(this,null,function*(){try{let a=yield fE(r,o,!0),l=new xE(o,a.Ts),c=l.ma(a.documents),u=l.applyChanges(c,!1);s.resolve(u.snapshot)}catch(a){let l=zg(a,`Failed to execute query '${o} against cache`);s.reject(l)}})}(yield Pk(e),t,n)})),n.promise}function PW(e,t,n={}){let i=new Ii;return e.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,l,c){let u=new kg({next:h=>{u.Za(),s.enqueueAndForget(()=>Ek(o,d)),h.fromCache&&l.source==="server"?c.reject(new ee(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new Ay(a,u,{includeMetadataChanges:!0,_a:!0});return _k(o,d)}(yield Og(e),e.asyncQueue,t,n,i)})),i.promise}function hve(e,t){let n=new kg(t);return e.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(r,o){me(r).Y_.add(o),o.next()}(yield Og(e),n)})),()=>{n.Za(),e.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(r,o){me(r).Y_.delete(o)}(yield Og(e),n)}))}}function fve(e,t,n,i){let r=function(s,a){let l;return l=typeof s=="string"?qj().encode(s):s,function(u,d){return new z2(u,d)}(function(u,d){if(u instanceof Uint8Array)return tj(u,d);if(u instanceof ArrayBuffer)return tj(new Uint8Array(u),d);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,By(t));e.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){sve(yield kk(e),r,i)}))}function pve(e,t){return e.asyncQueue.enqueue(()=>N(this,null,function*(){return function(i,r){let o=me(i);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,r))}(yield Pk(e),t)}))}function kW(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}var ij=new Map;function Ok(e,t,n){if(!n)throw new ee(K.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Nk(e,t,n,i){if(t===!0&&i===!0)throw new ee(K.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function rj(e){if(!ve.isDocumentKey(e))throw new ee(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function oj(e){if(ve.isDocumentKey(e))throw new ee(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function zE(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{let t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":xe()}function Wt(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ee(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=zE(e);throw new ee(K.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function OW(e,t){if(t<=0)throw new ee(K.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}var TE=class{constructor(t){var n,i;if(t.host===void 0){if(t.ssl!==void 0)throw new ee(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new ee(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Nk("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kW((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ee(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ee(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ee(K.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},wh=class{constructor(t,n,i,r){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new TE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ee(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new TE(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new aP;switch(i.type){case"firstParty":return new dP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ee(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return N(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=ij.get(n);i&&(te("ComponentProvider","Removing Datastore"),ij.delete(n),i.terminate())}(this),Promise.resolve()}};function UE(e,t,n,i={}){var r;let o=(e=Wt(e,wh))._getSettings(),s=`${t}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&ua("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=vi.MOCK_USER;else{a=ip(i.mockUserToken,(r=e._app)===null||r===void 0?void 0:r.options.projectId);let c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new ee(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new vi(c)}e._authCredentials=new lP(new G_(a,l))}}var rr=class e{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new e(this.firestore,t,this._query)}},Cn=class e{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new il(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}},il=class e extends rr{constructor(t,n,i){super(t,n,Vg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new Cn(this.firestore,null,new ve(t))}withConverter(t){return new e(this.firestore,t,this._path)}};function Hy(e,t,...n){if(e=tt(e),Ok("collection","path",t),e instanceof wh){let i=Ht.fromString(t,...n);return oj(i),new il(e,null,i)}{if(!(e instanceof Cn||e instanceof il))throw new ee(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=e._path.child(Ht.fromString(t,...n));return oj(i),new il(e.firestore,null,i)}}function Lk(e,t){if(e=Wt(e,wh),Ok("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new ee(K.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new rr(e,null,function(i){return new da(Ht.emptyPath(),i)}(t))}function xh(e,t,...n){if(e=tt(e),arguments.length===1&&(t=H_.newId()),Ok("doc","path",t),e instanceof wh){let i=Ht.fromString(t,...n);return rj(i),new Cn(e,null,new ve(i))}{if(!(e instanceof Cn||e instanceof il))throw new ee(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=e._path.child(Ht.fromString(t,...n));return rj(i),new Cn(e.firestore,e instanceof il?e.converter:null,new ve(i))}}function zy(e,t){return e=tt(e),t=tt(t),(e instanceof Cn||e instanceof il)&&(t instanceof Cn||t instanceof il)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function jE(e,t){return e=tt(e),t=tt(t),e instanceof rr&&t instanceof rr&&e.firestore===t.firestore&&Ly(e._query,t._query)&&e.converter===t.converter}var RE=class{constructor(t=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Fy(this,"async_queue_retry"),this.Vu=()=>{let i=B_();i&&te("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=t;let n=B_();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.fu(),this.gu(t)}enterRestrictedMode(t){if(!this.Iu){this.Iu=!0,this.Au=t||!1;let n=B_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(t){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new Ii;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Pu.push(t),this.pu()))}pu(){return N(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(t){if(!Pu(t))throw t;te("AsyncQueue","Operation failed with retryable error: "+t)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(t){let n=this.mu.then(()=>(this.du=!0,t().catch(i=>{this.Eu=i,this.du=!1;let r=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(i);throw ni("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(t,n,i){this.fu(),this.Ru.indexOf(t)>-1&&(n=0);let r=F2.createAndSchedule(this,t,n,i,o=>this.yu(o));return this.Tu.push(r),r}fu(){this.Eu&&xe()}verifyOperationInProgress(){}wu(){return N(this,null,function*(){let t;do t=this.mu,yield t;while(t!==this.mu)})}Su(t){for(let n of this.Tu)if(n.timerId===t)return!0;return!1}bu(t){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.wu()})}Du(t){this.Ru.push(t)}yu(t){let n=this.Tu.indexOf(t);this.Tu.splice(n,1)}};function q2(e){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(e,["next","error","complete"])}var K2=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ii,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,n,i){this._progressObserver={next:t,error:n,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,n){return this._taskCompletionResolver.promise.then(t,n)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}};var NW=-1,Bn=class extends wh{constructor(t,n,i,r){super(t,n,i,r),this.type="firestore",this._queue=new RE,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return N(this,null,function*(){if(this._firestoreClient){let t=this._firestoreClient.terminate();this._queue=new RE(t),this._firestoreClient=void 0,yield t}})}};function LW(e,t){let n=typeof e=="object"?e:Vi(),i=typeof e=="string"?e:t||"(default)",r=Ei(n,"firestore").getImmediate({identifier:i});if(!r._initialized){let o=Nc("firestore");o&&UE(r,...o)}return r}function or(e){if(e._terminated)throw new ee(K.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||VW(e),e._firestoreClient}function VW(e){var t,n,i;let r=e._freezeSettings(),o=function(a,l,c,u){return new CP(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,kW(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,r);e._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),e._firestoreClient=new W2(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(a){let l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(e._componentsProvider))}function Vk(e,t){ua("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=e._freezeSettings();return BW(e,Ak.provider,{build:i=>new DE(i,n.cacheSizeBytes,t?.forceOwnership)}),Promise.resolve()}function Bk(e){return N(this,null,function*(){ua("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=e._freezeSettings();BW(e,Ak.provider,{build:n=>new H2(n,t.cacheSizeBytes)})})}function BW(e,t,n){if((e=Wt(e,Bn))._firestoreClient||e._terminated)throw new ee(K.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(e._componentsProvider||e._getSettings().localCache)throw new ee(K.FAILED_PRECONDITION,"SDK cache is already specified.");e._componentsProvider={_online:t,_offline:n},VW(e)}function Gk(e){if(e._initialized&&!e._terminated)throw new ee(K.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let t=new Ii;return e._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(i){return N(this,null,function*(){if(!_u.D())return Promise.resolve();let r=i+"main";yield _u.delete(r)})}(Ck(e._databaseId,e._persistenceKey)),t.resolve()}catch(n){t.reject(n)}})),t.promise}function Hk(e){return function(n){let i=new Ii;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return Qme(yield kk(n),i)})),i.promise}(or(e=Wt(e,Bn)))}function zk(e){return lve(or(e=Wt(e,Bn)))}function Uk(e){return cve(or(e=Wt(e,Bn)))}function jk(e,t){let n=or(e=Wt(e,Bn)),i=new K2;return fve(n,e._databaseId,t,i),i}function Wk(e,t){return pve(or(e=Wt(e,Bn)),t).then(n=>n?new rr(e,null,n.query):null)}var al=class e{constructor(t){this._byteString=t}static fromBase64String(t){try{return new e(oi.fromBase64String(t))}catch(n){throw new ee(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new e(oi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var fa=class{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new ee(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ii(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var tc=class{constructor(t){this._methodName=t}};var bh=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new ee(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ee(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return at(this._lat,t._lat)||at(this._long,t._long)}};var My=class{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,t._values)}};var gve=/^__.*__$/,Y2=class{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new ha(t,this.data,this.fieldMask,n,this.fieldTransforms):new Iu(t,this.data,n,this.fieldTransforms)}},IE=class{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new ha(t,this.data,this.fieldMask,n,this.fieldTransforms)}};function GW(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe()}}var FE=class e{constructor(t,n,i,r,o,s){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(t){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.Fu({path:i,xu:!1});return r.Ou(t),r}Nu(t){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(t),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(t){return this.Fu({path:void 0,xu:!0})}Bu(t){return AE(t,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Ou(this.path.get(t))}Ou(t){if(t.length===0)throw this.Bu("Document fields must not be empty");if(GW(this.Cu)&&gve.test(t))throw this.Bu('Document fields cannot begin and end with "__"')}},Q2=class{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||By(t)}Qu(t,n,i,r=!1){return new FE({Cu:t,methodName:n,qu:i,path:ii.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Dh(e){let t=e._freezeSettings(),n=By(e._databaseId);return new Q2(e._databaseId,!!t.ignoreUndefinedProperties,n)}function WE(e,t,n,i,r,o={}){let s=e.Qu(o.merge||o.mergeFields?2:0,t,n,r);Yk("Data must be an object, but it was:",s,i);let a=UW(i,s),l,c;if(o.merge)l=new Qo(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){let u=[];for(let d of o.mergeFields){let h=ek(t,d,n);if(!s.contains(h))throw new ee(K.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);WW(u,h)||u.push(h)}l=new Qo(u),c=s.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=s.fieldTransforms;return new Y2(new yr(a),l,c)}var Py=class e extends tc{_toFieldTransform(t){if(t.Cu!==2)throw t.Cu===1?t.Bu(`${this._methodName}() can only appear at the top level of your update data`):t.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof e}};function HW(e,t,n){return new FE({Cu:3,qu:t.settings.qu,methodName:e._methodName,xu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var X2=class e extends tc{_toFieldTransform(t){return new vh(t.path,new Tu)}isEqual(t){return t instanceof e}},$2=class e extends tc{constructor(t,n){super(t),this.Ku=n}_toFieldTransform(t){let n=HW(this,t,!0),i=this.Ku.map(o=>Th(o,n)),r=new Jl(i);return new vh(t.path,r)}isEqual(t){return t instanceof e&&Uv(this.Ku,t.Ku)}},Z2=class e extends tc{constructor(t,n){super(t),this.Ku=n}_toFieldTransform(t){let n=HW(this,t,!0),i=this.Ku.map(o=>Th(o,n)),r=new ec(i);return new vh(t.path,r)}isEqual(t){return t instanceof e&&Uv(this.Ku,t.Ku)}},J2=class e extends tc{constructor(t,n){super(t),this.$u=n}_toFieldTransform(t){let n=new Ru(t.serializer,Lj(t.serializer,this.$u));return new vh(t.path,n)}isEqual(t){return t instanceof e&&this.$u===t.$u}};function qk(e,t,n,i){let r=e.Qu(1,t,n);Yk("Data must be an object, but it was:",r,i);let o=[],s=yr.empty();Eh(i,(l,c)=>{let u=Qk(t,l,n);c=tt(c);let d=r.Nu(u);if(c instanceof Py)o.push(u);else{let h=Th(c,d);h!=null&&(o.push(u),s.set(u,h))}});let a=new Qo(o);return new IE(s,a,r.fieldTransforms)}function Kk(e,t,n,i,r,o){let s=e.Qu(1,t,n),a=[ek(t,i,n)],l=[r];if(o.length%2!=0)throw new ee(K.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)a.push(ek(t,o[h])),l.push(o[h+1]);let c=[],u=yr.empty();for(let h=a.length-1;h>=0;--h)if(!WW(c,a[h])){let p=a[h],g=l[h];g=tt(g);let m=s.Nu(p);if(g instanceof Py)c.push(p);else{let v=Th(g,m);v!=null&&(c.push(p),u.set(p,v))}}let d=new Qo(c);return new IE(u,d,s.fieldTransforms)}function zW(e,t,n,i=!1){return Th(n,e.Qu(i?4:3,t))}function Th(e,t){if(jW(e=tt(e)))return Yk("Unsupported field value:",t,e),UW(e,t);if(e instanceof tc)return function(i,r){if(!GW(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xu&&t.Cu!==4)throw t.Bu("Nested arrays are not supported");return function(i,r){let o=[],s=0;for(let a of i){let l=Th(a,r.Lu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(e,t)}return function(i,r){if((i=tt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Lj(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=yn.fromDate(i);return{timestampValue:Dg(r.serializer,o)}}if(i instanceof yn){let o=new yn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Dg(r.serializer,o)}}if(i instanceof bh)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof al)return{bytesValue:Kj(r.serializer,i._byteString)};if(i instanceof Cn){let o=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(o))throw r.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:mk(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof My)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return gk(a.serializer,l)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${zE(i)}`)}(e,t)}function UW(e,t){let n={};return Cj(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Eh(e,(i,r)=>{let o=Th(r,t.Mu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function jW(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof yn||e instanceof bh||e instanceof al||e instanceof Cn||e instanceof tc||e instanceof My)}function Yk(e,t,n){if(!jW(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=zE(n);throw i==="an object"?t.Bu(e+" a custom object"):t.Bu(e+" "+i)}}function ek(e,t,n){if((t=tt(t))instanceof fa)return t._internalPath;if(typeof t=="string")return Qk(e,t);throw AE("Field path arguments must be of type string or ",e,!1,void 0,n)}var mve=new RegExp("[~\\*/\\[\\]]");function Qk(e,t,n){if(t.search(mve)>=0)throw AE(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new fa(...t.split("."))._internalPath}catch{throw AE(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function AE(e,t,n,i,r){let o=i&&!i.isEmpty(),s=r!==void 0,a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${i}`),s&&(l+=` in document ${r}`),l+=")"),new ee(K.INVALID_ARGUMENT,a+e+l)}function WW(e,t){return e.some(n=>n.isEqual(t))}var Sh=class{constructor(t,n,i,r,o){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new tk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let n=this._document.data.field(qE("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}},tk=class extends Sh{data(){return super.data()}};function qE(e,t){return typeof t=="string"?Qk(e,t):t instanceof fa?t._internalPath:t._delegate._internalPath}function qW(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new ee(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ky=class{},_h=class extends ky{};function ga(e,t,...n){let i=[];t instanceof ky&&i.push(t),i=i.concat(n),function(o){let s=o.filter(l=>l instanceof nk).length,a=o.filter(l=>l instanceof ME).length;if(s>1||s>0&&a>0)throw new ee(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)e=r._apply(e);return e}var ME=class e extends _h{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new e(t,n,i)}_apply(t){let n=this._parse(t);return YW(t._query,n),new rr(t.firestore,t.converter,MP(t._query,n))}_parse(t){let n=Dh(t.firestore);return function(o,s,a,l,c,u,d){let h;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ee(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){aj(d,u);let p=[];for(let g of d)p.push(sj(l,o,g));h={arrayValue:{values:p}}}else h=sj(l,o,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||aj(d,u),h=zW(a,s,d,u==="in"||u==="not-in");return Ft.create(c,u,h)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}};function Xk(e,t,n){let i=t,r=qE("where",e);return ME._create(r,i,n)}var nk=class e extends ky{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new e(t,n)}_parse(t){let n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:en.create(n,this._getOperator())}_apply(t){let n=this._parse(t);return n.getFilters().length===0?t:(function(r,o){let s=r,a=o.getFlattenedFilters();for(let l of a)YW(s,l),s=MP(s,l)}(t._query,n),new rr(t.firestore,t.converter,MP(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var ik=class e extends _h{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new e(t,n)}_apply(t){let n=function(r,o,s){if(r.startAt!==null)throw new ee(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ee(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gh(o,s)}(t._query,this._field,this._direction);return new rr(t.firestore,t.converter,function(r,o){let s=r.explicitOrderBy.concat([o]);return new da(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,n))}};function KE(e,t="asc"){let n=t,i=qE("orderBy",e);return ik._create(i,n)}var PE=class e extends _h{constructor(t,n,i){super(),this.type=t,this._limit=n,this._limitType=i}static _create(t,n,i){return new e(t,n,i)}_apply(t){return new rr(t.firestore,t.converter,$_(t._query,this._limit,this._limitType))}};function $k(e){return OW("limit",e),PE._create("limit",e,"F")}function Zk(e){return OW("limitToLast",e),PE._create("limitToLast",e,"L")}var kE=class e extends _h{constructor(t,n,i){super(),this.type=t,this._docOrFields=n,this._inclusive=i}static _create(t,n,i){return new e(t,n,i)}_apply(t){let n=KW(t,this.type,this._docOrFields,this._inclusive);return new rr(t.firestore,t.converter,function(r,o){return new da(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(t._query,n))}};function Jk(...e){return kE._create("startAt",e,!0)}function e3(...e){return kE._create("startAfter",e,!1)}var OE=class e extends _h{constructor(t,n,i){super(),this.type=t,this._docOrFields=n,this._inclusive=i}static _create(t,n,i){return new e(t,n,i)}_apply(t){let n=KW(t,this.type,this._docOrFields,this._inclusive);return new rr(t.firestore,t.converter,function(r,o){return new da(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)}(t._query,n))}};function t3(...e){return OE._create("endBefore",e,!1)}function n3(...e){return OE._create("endAt",e,!0)}function KW(e,t,n,i){if(n[0]=tt(n[0]),n[0]instanceof Sh)return function(o,s,a,l,c){if(!l)throw new ee(K.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let u=[];for(let d of yg(o))if(d.field.isKeyField())u.push(ph(s,l.key));else{let h=l.data.field(d.field);if(LE(h))throw new ee(K.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let p=d.field.canonicalString();throw new ee(K.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}u.push(h)}return new ol(u,c)}(e._query,e.firestore._databaseId,t,n[0]._document,i);{let r=Dh(e.firestore);return function(s,a,l,c,u,d){let h=s.explicitOrderBy;if(u.length>h.length)throw new ee(K.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let p=[];for(let g=0;g<u.length;g++){let m=u[g];if(h[g].field.isKeyField()){if(typeof m!="string")throw new ee(K.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof m}`);if(!fk(s)&&m.indexOf("/")!==-1)throw new ee(K.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${m}' contains a slash.`);let v=s.path.child(Ht.fromString(m));if(!ve.isDocumentKey(v))throw new ee(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);let C=new ve(v);p.push(ph(a,C))}else{let v=zW(l,c,m);p.push(v)}}return new ol(p,d)}(e._query,e.firestore._databaseId,r,t,n,i)}}function sj(e,t,n){if(typeof(n=tt(n))=="string"){if(n==="")throw new ee(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fk(t)&&n.indexOf("/")!==-1)throw new ee(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=t.path.child(Ht.fromString(n));if(!ve.isDocumentKey(i))throw new ee(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ph(e,new ve(i))}if(n instanceof Cn)return ph(e,n._key);throw new ee(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zE(n)}.`)}function aj(e,t){if(!Array.isArray(e)||e.length===0)throw new ee(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function YW(e,t){let n=function(r,o){for(let s of r)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new ee(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ee(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}var Ng=class{convertValue(t,n="none"){switch(fh(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Mn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Eu(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw xe()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){let i={};return Eh(t,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(t){var n,i,r;let o=(r=(i=(n=t.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(s=>Mn(s.doubleValue));return new My(o)}convertGeoPoint(t){return new bh(Mn(t.latitude),Mn(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":let i=dk(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(vy(t));default:return null}}convertTimestamp(t){let n=Zl(t);return new yn(n.seconds,n.nanos)}convertDocumentKey(t,n){let i=Ht.fromString(t);Ie(rW(i));let r=new xu(i.get(1),i.get(3)),o=new ve(i.popFirst(5));return r.isEqual(n)||ni(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function YE(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}var rk=class extends Ng{constructor(t){super(),this.firestore=t}convertBytes(t){return new al(t)}convertReference(t){let n=this.convertDocumentKey(t,this.firestore._databaseId);return new Cn(this.firestore,null,n)}};var $l=class{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},Ss=class extends Sh{constructor(t,n,i,r,o,s){super(t,n,i,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let n=new bu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){let i=this._document.data.field(qE("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},bu=class extends Ss{data(t={}){return super.data(t)}},pa=class{constructor(t,n,i,r){this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new $l(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new bu(this._firestore,this._userDataWriter,i.key,i,new $l(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ee(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>{let l=new bu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new $l(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let l=new bu(r._firestore,r._userDataWriter,a.doc.key,a.doc,new $l(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),c=-1,u=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:vve(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function vve(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe()}}function QE(e,t){return e instanceof Ss&&t instanceof Ss?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(e._document===null?t._document===null:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof pa&&t instanceof pa&&e._firestore===t._firestore&&jE(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function XE(e){e=Wt(e,Cn);let t=Wt(e.firestore,Bn);return MW(or(t),e._key).then(n=>c3(t,e,n))}var nc=class extends Ng{constructor(t){super(),this.firestore=t}convertBytes(t){return new al(t)}convertReference(t){let n=this.convertDocumentKey(t,this.firestore._databaseId);return new Cn(this.firestore,null,n)}};function i3(e){e=Wt(e,Cn);let t=Wt(e.firestore,Bn),n=or(t),i=new nc(t);return uve(n,e._key).then(r=>new Ss(t,i,e._key,r,new $l(r!==null&&r.hasLocalMutations,!0),e.converter))}function r3(e){e=Wt(e,Cn);let t=Wt(e.firestore,Bn);return MW(or(t),e._key,{source:"server"}).then(n=>c3(t,e,n))}function o3(e){e=Wt(e,rr);let t=Wt(e.firestore,Bn),n=or(t),i=new nc(t);return qW(e._query),PW(n,e._query).then(r=>new pa(t,i,e,r))}function s3(e){e=Wt(e,rr);let t=Wt(e.firestore,Bn),n=or(t),i=new nc(t);return dve(n,e._query).then(r=>new pa(t,i,e,r))}function a3(e){e=Wt(e,rr);let t=Wt(e.firestore,Bn),n=or(t),i=new nc(t);return PW(n,e._query,{source:"server"}).then(r=>new pa(t,i,e,r))}function $E(e,t,n){e=Wt(e,Cn);let i=Wt(e.firestore,Bn),r=YE(e.converter,t,n);return jg(i,[WE(Dh(i),"setDoc",e._key,r,e.converter!==null,n).toMutation(e._key,Kn.none())])}function Uy(e,t,n,...i){e=Wt(e,Cn);let r=Wt(e.firestore,Bn),o=Dh(r),s;return s=typeof(t=tt(t))=="string"||t instanceof fa?Kk(o,"updateDoc",e._key,t,n,i):qk(o,"updateDoc",e._key,t),jg(r,[s.toMutation(e._key,Kn.exists(!0))])}function ZE(e){return jg(Wt(e.firestore,Bn),[new Fu(e._key,Kn.none())])}function JE(e,t){let n=Wt(e.firestore,Bn),i=xh(e),r=YE(e.converter,t);return jg(n,[WE(Dh(e.firestore),"addDoc",i._key,r,e.converter!==null,{}).toMutation(i._key,Kn.exists(!1))]).then(()=>i)}function Ug(e,...t){var n,i,r;e=tt(e);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||q2(t[s])||(o=t[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(q2(t[s])){let d=t[s];t[s]=(n=d.next)===null||n===void 0?void 0:n.bind(d),t[s+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),t[s+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let l,c,u;if(e instanceof Cn)c=Wt(e.firestore,Bn),u=Vg(e._key.path),l={next:d=>{t[s]&&t[s](c3(c,e,d))},error:t[s+1],complete:t[s+2]};else{let d=Wt(e,rr);c=Wt(d.firestore,Bn),u=d._query;let h=new nc(c);l={next:p=>{t[s]&&t[s](new pa(c,h,d,p))},error:t[s+1],complete:t[s+2]},qW(e._query)}return function(h,p,g,m){let v=new kg(m),C=new Ay(p,v,g);return h.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return _k(yield Og(h),C)})),()=>{v.Za(),h.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return Ek(yield Og(h),C)}))}}(or(c),u,a,l)}function l3(e,t){return hve(or(e=Wt(e,Bn)),q2(t)?t:{next:t})}function jg(e,t){return function(i,r){let o=new Ii;return i.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return Wme(yield kk(i),r,o)})),o.promise}(or(e),t)}function c3(e,t,n){let i=n.docs.get(t._key),r=new nc(e);return new Ss(e,r,t._key,i,new $l(n.hasPendingWrites,n.fromCache),t.converter)}var yve={maxAttempts:5};var NE=class{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Dh(t)}set(t,n,i){this._verifyNotCommitted();let r=Cu(t,this._firestore),o=YE(r.converter,n,i),s=WE(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(s.toMutation(r._key,Kn.none())),this}update(t,n,i,...r){this._verifyNotCommitted();let o=Cu(t,this._firestore),s;return s=typeof(n=tt(n))=="string"||n instanceof fa?Kk(this._dataReader,"WriteBatch.update",o._key,n,i,r):qk(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Kn.exists(!0))),this}delete(t){this._verifyNotCommitted();let n=Cu(t,this._firestore);return this._mutations=this._mutations.concat(new Fu(n._key,Kn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ee(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Cu(e,t){if((e=tt(e)).firestore!==t)throw new ee(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var ok=class extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=Dh(n)}get(n){let i=Cu(n,this._firestore),r=new rk(this._firestore);return this._transaction.lookup([i._key]).then(o=>{if(!o||o.length!==1)return xe();let s=o[0];if(s.isFoundDocument())return new Sh(this._firestore,r,s.key,s,i.converter);if(s.isNoDocument())return new Sh(this._firestore,r,i._key,null,i.converter);throw xe()})}set(n,i,r){let o=Cu(n,this._firestore),s=YE(o.converter,i,r),a=WE(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,r);return this._transaction.set(o._key,a),this}update(n,i,r,...o){let s=Cu(n,this._firestore),a;return a=typeof(i=tt(i))=="string"||i instanceof fa?Kk(this._dataReader,"Transaction.update",s._key,i,r,o):qk(this._dataReader,"Transaction.update",s._key,i),this._transaction.update(s._key,a),this}delete(n){let i=Cu(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(t,n){super(t,n),this._firestore=t}get(t){let n=Cu(t,this._firestore),i=new nc(this._firestore);return super.get(t).then(r=>new Ss(this._firestore,i,n._key,r._document,new $l(!1,!1),n.converter))}};function u3(e,t,n){e=Wt(e,Bn);let i=Object.assign(Object.assign({},yve),n);return function(o){if(o.maxAttempts<1)throw new ee(K.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,s,a){let l=new Ii;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let c=yield ave(o);new j2(o.asyncQueue,c,a,s,l).au()})),l.promise}(or(e),r=>t(new ok(e,r)),i)}function d3(){return new Py("deleteField")}function h3(){return new X2("serverTimestamp")}function ex(...e){return new $2("arrayUnion",e)}function tx(...e){return new Z2("arrayRemove",e)}function f3(e){return new J2("increment",e)}(function(t,n=!0){(function(r){Lg=r})(Lc),jn(new gn("firestore",(i,{instanceIdentifier:r,options:o})=>{let s=i.getProvider("app").getImmediate(),a=new Bn(new cP(i.getProvider("auth-internal")),new fP(i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ee(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xu(c.options.projectId,u)}(s,r),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Qe(oU,"4.7.3",t),Qe(oU,"4.7.3","esm2017")})();var Cve="@firebase/firestore-compat",wve="0.3.38";function C3(e,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new ee("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function QW(){if(typeof Uint8Array>"u")throw new ee("unimplemented","Uint8Arrays are not available in this environment.")}function XW(){if(!wj())throw new ee("unimplemented","Blobs are unavailable in Firestore in this environment.")}var nx=class e{constructor(t){this._delegate=t}static fromBase64String(t){return XW(),new e(al.fromBase64String(t))}static fromUint8Array(t){return QW(),new e(al.fromUint8Array(t))}toBase64(){return XW(),this._delegate.toBase64()}toUint8Array(){return QW(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function p3(e){return bve(e,["next","error","complete"])}function bve(e,t){if(typeof e!="object"||e===null)return!1;let n=e;for(let i of t)if(i in n&&typeof n[i]=="function")return!0;return!1}var g3=class{enableIndexedDbPersistence(t,n){return Vk(t._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(t){return Bk(t._delegate)}clearIndexedDbPersistence(t){return Gk(t._delegate)}},ix=class{constructor(t,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof xu||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){let n=this._delegate._getSettings();!t.merge&&n.host!==t.host&&ua("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t=Object.assign(Object.assign({},n),t),delete t.merge),this._delegate._setSettings(t)}useEmulator(t,n,i={}){UE(this._delegate,t,n,i)}enableNetwork(){return zk(this._delegate)}disableNetwork(){return Uk(this._delegate)}enablePersistence(t){let n=!1,i=!1;return t&&(n=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,Nk("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Hk(this._delegate)}onSnapshotsInSync(t){return l3(this._delegate,t)}get app(){if(!this._appCompat)throw new ee("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Kg(this,Hy(this._delegate,t))}catch(n){throw Ur(n,"collection()","Firestore.collection()")}}doc(t){try{return new ll(this,xh(this._delegate,t))}catch(n){throw Ur(n,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new Ah(this,Lk(this._delegate,t))}catch(n){throw Ur(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return u3(this._delegate,n=>t(new rx(this,n)))}batch(){return or(this._delegate),new ox(new NE(this._delegate,t=>jg(this._delegate,t)))}loadBundle(t){return jk(this._delegate,t)}namedQuery(t){return Wk(this._delegate,t).then(n=>n?new Ah(this,n):null)}},Wg=class extends Ng{constructor(t){super(),this.firestore=t}convertBytes(t){return new nx(new al(t))}convertReference(t){let n=this.convertDocumentKey(t,this.firestore._databaseId);return ll.forKey(n,this.firestore,null)}};function Sve(e){sk(e)}var rx=class{constructor(t,n){this._firestore=t,this._delegate=n,this._userDataWriter=new Wg(t)}get(t){let n=Rh(t);return this._delegate.get(n).then(i=>new Ih(this._firestore,new Ss(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(t,n,i){let r=Rh(t);return i?(C3("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(t,n,i,...r){let o=Rh(t);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(t){let n=Rh(t);return this._delegate.delete(n),this}},ox=class{constructor(t){this._delegate=t}set(t,n,i){let r=Rh(t);return i?(C3("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(t,n,i,...r){let o=Rh(t);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(t){let n=Rh(t);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},qg=class e{constructor(t,n,i){this._firestore=t,this._userDataWriter=n,this._delegate=i}fromFirestore(t,n){let i=new bu(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Fh(this._firestore,i),n??{})}toFirestore(t,n){return n?this._delegate.toFirestore(t,n):this._delegate.toFirestore(t)}static getInstance(t,n){let i=e.INSTANCES,r=i.get(t);r||(r=new WeakMap,i.set(t,r));let o=r.get(n);return o||(o=new e(t,new Wg(t),n),r.set(n,o)),o}};qg.INSTANCES=new WeakMap;var ll=class e{constructor(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new Wg(t)}static forPath(t,n,i){if(t.length%2!==0)throw new ee("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new e(n,new Cn(n._delegate,i,new ve(t)))}static forKey(t,n,i){return new e(n,new Cn(n._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new Kg(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Kg(this.firestore,Hy(this._delegate,t))}catch(n){throw Ur(n,"collection()","DocumentReference.collection()")}}isEqual(t){return t=tt(t),t instanceof Cn?zy(this._delegate,t):!1}set(t,n){n=C3("DocumentReference.set",n);try{return n?$E(this._delegate,t,n):$E(this._delegate,t)}catch(i){throw Ur(i,"setDoc()","DocumentReference.set()")}}update(t,n,...i){try{return arguments.length===1?Uy(this._delegate,t):Uy(this._delegate,t,n,...i)}catch(r){throw Ur(r,"updateDoc()","DocumentReference.update()")}}delete(){return ZE(this._delegate)}onSnapshot(...t){let n=$W(t),i=ZW(t,r=>new Ih(this.firestore,new Ss(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return Ug(this._delegate,n,i)}get(t){let n;return t?.source==="cache"?n=i3(this._delegate):t?.source==="server"?n=r3(this._delegate):n=XE(this._delegate),n.then(i=>new Ih(this.firestore,new Ss(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new e(this.firestore,t?this._delegate.withConverter(qg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}};function Ur(e,t,n){return e.message=e.message.replace(t,n),e}function $W(e){for(let t of e)if(typeof t=="object"&&!p3(t))return t;return{}}function ZW(e,t){var n,i;let r;return p3(e[0])?r=e[0]:p3(e[1])?r=e[1]:typeof e[0]=="function"?r={next:e[0],error:e[1],complete:e[2]}:r={next:e[1],error:e[2],complete:e[3]},{next:o=>{r.next&&r.next(t(o))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var Ih=class{constructor(t,n){this._firestore=t,this._delegate=n}get ref(){return new ll(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,n){return this._delegate.get(t,n)}isEqual(t){return QE(this._delegate,t._delegate)}},Fh=class extends Ih{data(t){let n=this._delegate.data(t);return this._delegate._converter||lj(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Ah=class e{constructor(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new Wg(t)}where(t,n,i){try{return new e(this.firestore,ga(this._delegate,Xk(t,n,i)))}catch(r){throw Ur(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,n){try{return new e(this.firestore,ga(this._delegate,KE(t,n)))}catch(i){throw Ur(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new e(this.firestore,ga(this._delegate,$k(t)))}catch(n){throw Ur(n,"limit()","Query.limit()")}}limitToLast(t){try{return new e(this.firestore,ga(this._delegate,Zk(t)))}catch(n){throw Ur(n,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new e(this.firestore,ga(this._delegate,Jk(...t)))}catch(n){throw Ur(n,"startAt()","Query.startAt()")}}startAfter(...t){try{return new e(this.firestore,ga(this._delegate,e3(...t)))}catch(n){throw Ur(n,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new e(this.firestore,ga(this._delegate,t3(...t)))}catch(n){throw Ur(n,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new e(this.firestore,ga(this._delegate,n3(...t)))}catch(n){throw Ur(n,"endAt()","Query.endAt()")}}isEqual(t){return jE(this._delegate,t._delegate)}get(t){let n;return t?.source==="cache"?n=s3(this._delegate):t?.source==="server"?n=a3(this._delegate):n=o3(this._delegate),n.then(i=>new jy(this.firestore,new pa(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){let n=$W(t),i=ZW(t,r=>new jy(this.firestore,new pa(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return Ug(this._delegate,n,i)}withConverter(t){return new e(this.firestore,t?this._delegate.withConverter(qg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}},m3=class{constructor(t,n){this._firestore=t,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Fh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},jy=class{constructor(t,n){this._firestore=t,this._delegate=n}get query(){return new Ah(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new Fh(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(n=>new m3(this._firestore,n))}forEach(t,n){this._delegate.forEach(i=>{t.call(n,new Fh(this._firestore,i))})}isEqual(t){return QE(this._delegate,t._delegate)}},Kg=class e extends Ah{constructor(t,n){super(t,n),this.firestore=t,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let t=this._delegate.parent;return t?new ll(this.firestore,t):null}doc(t){try{return t===void 0?new ll(this.firestore,xh(this._delegate)):new ll(this.firestore,xh(this._delegate,t))}catch(n){throw Ur(n,"doc()","CollectionReference.doc()")}}add(t){return JE(this._delegate,t).then(n=>new ll(this.firestore,n))}isEqual(t){return zy(this._delegate,t._delegate)}withConverter(t){return new e(this.firestore,t?this._delegate.withConverter(qg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}};function Rh(e){return Wt(e,Cn)}var v3=class e{constructor(...t){this._delegate=new fa(...t)}static documentId(){return new e(ii.keyField().canonicalString())}isEqual(t){return t=tt(t),t instanceof fa?this._delegate._internalPath.isEqual(t._internalPath):!1}};var y3=class e{constructor(t){this._delegate=t}static serverTimestamp(){let t=h3();return t._methodName="FieldValue.serverTimestamp",new e(t)}static delete(){let t=d3();return t._methodName="FieldValue.delete",new e(t)}static arrayUnion(...t){let n=ex(...t);return n._methodName="FieldValue.arrayUnion",new e(n)}static arrayRemove(...t){let n=tx(...t);return n._methodName="FieldValue.arrayRemove",new e(n)}static increment(t){let n=f3(t);return n._methodName="FieldValue.increment",new e(n)}isEqual(t){return this._delegate.isEqual(t._delegate)}};var _ve={Firestore:ix,GeoPoint:bh,Timestamp:yn,Blob:nx,Transaction:rx,WriteBatch:ox,DocumentReference:ll,DocumentSnapshot:Ih,Query:Ah,QueryDocumentSnapshot:Fh,QuerySnapshot:jy,CollectionReference:Kg,FieldPath:v3,FieldValue:y3,setLogLevel:Sve,CACHE_SIZE_UNLIMITED:NW};function Eve(e,t){e.INTERNAL.registerComponent(new gn("firestore-compat",n=>{let i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},_ve)))}function xve(e){Eve(e,(t,n)=>new ix(t,n,new g3)),e.registerVersion(Cve,wve)}xve(Po);function Dve(e,t=co){return new ge(n=>{let i;return t!=null?t.schedule(()=>{i=e.onSnapshot({includeMetadataChanges:!0},n)}):i=e.onSnapshot({includeMetadataChanges:!0},n),()=>{i?.()}})}function JW(e,t){return Dve(e,t)}function Tve(e,t){return JW(e,t).pipe(Js(void 0),qc(),ae(n=>{let[i,r]=n;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function S3(e,t){return JW(e,t).pipe(ae(n=>({payload:n,type:"query"})))}var sx=class{ref;afs;constructor(t,n){this.ref=t,this.afs=n}set(t,n){return this.ref.set(t,n)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,n){let i=this.ref.collection(t),{ref:r,query:o}=n9(i,n);return new lx(r,o,this.afs)}snapshotChanges(){return Tve(this.ref,this.afs.schedulers.outsideAngular).pipe(Hi)}valueChanges(t={}){return this.snapshotChanges().pipe(ae(({payload:n})=>t.idField?pe(B({},n.data()),{[t.idField]:n.id}):n.data()))}get(t){return Ze(this.ref.get(t)).pipe(Hi)}};function ax(e,t){return S3(e,t).pipe(Js(void 0),qc(),ae(n=>{let[i,r]=n,o=r.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,l)=>{let c=o.find(d=>d.doc.ref.isEqual(a.ref)),u=i?.payload.docs.find(d=>d.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),s}))}function e9(e,t,n){return ax(e,n).pipe(Kc((i,r)=>Rve(i,r.map(o=>o.payload),t),[]),Ba(),ae(i=>i.map(r=>({type:r.type,payload:r}))))}function Rve(e,t,n){return t.forEach(i=>{n.indexOf(i.type)>-1&&(e=Ive(e,i))}),e}function w3(e,t,n,...i){let r=e.slice();return r.splice(t,n,...i),r}function Ive(e,t){switch(t.type){case"added":if(!(e[t.newIndex]&&e[t.newIndex].doc.ref.isEqual(t.doc.ref)))return w3(e,t.newIndex,0,t);break;case"modified":if(e[t.oldIndex]==null||e[t.oldIndex].doc.ref.isEqual(t.doc.ref))if(t.oldIndex!==t.newIndex){let n=e.slice();return n.splice(t.oldIndex,1),n.splice(t.newIndex,0,t),n}else return w3(e,t.newIndex,1,t);break;case"removed":if(e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref))return w3(e,t.oldIndex,1);break}return e}function t9(e){return(!e||e.length===0)&&(e=["added","removed","modified"]),e}var lx=class{ref;query;afs;constructor(t,n,i){this.ref=t,this.query=n,this.afs=i}stateChanges(t){let n=ax(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(n=n.pipe(ae(i=>i.filter(r=>t.indexOf(r.type)>-1)))),n.pipe(Js(void 0),qc(),xt(([i,r])=>r.length>0||!i),ae(([,i])=>i),Hi)}auditTrail(t){return this.stateChanges(t).pipe(Kc((n,i)=>[...n,...i],[]))}snapshotChanges(t){let n=t9(t);return e9(this.query,n,this.afs.schedulers.outsideAngular).pipe(Hi)}valueChanges(t={}){return S3(this.query,this.afs.schedulers.outsideAngular).pipe(ae(n=>n.payload.docs.map(i=>t.idField?pe(B({},i.data()),{[t.idField]:i.id}):i.data())),Hi)}get(t){return Ze(this.query.get(t)).pipe(Hi)}add(t){return this.ref.add(t)}doc(t){return new sx(this.ref.doc(t),this.afs)}},b3=class{query;afs;constructor(t,n){this.query=t,this.afs=n}stateChanges(t){return!t||t.length===0?ax(this.query,this.afs.schedulers.outsideAngular).pipe(Hi):ax(this.query,this.afs.schedulers.outsideAngular).pipe(ae(n=>n.filter(i=>t.indexOf(i.type)>-1)),xt(n=>n.length>0),Hi)}auditTrail(t){return this.stateChanges(t).pipe(Kc((n,i)=>[...n,...i],[]))}snapshotChanges(t){let n=t9(t);return e9(this.query,n,this.afs.schedulers.outsideAngular).pipe(Hi)}valueChanges(t={}){return S3(this.query,this.afs.schedulers.outsideAngular).pipe(ae(i=>i.payload.docs.map(r=>t.idField?B({[t.idField]:r.id},r.data()):r.data())),Hi)}get(t){return Ze(this.query.get(t)).pipe(Hi)}},Fve=new ce("angularfire2.enableFirestorePersistence"),Ave=new ce("angularfire2.firestore.persistenceSettings"),Mve=new ce("angularfire2.firestore.settings"),Pve=new ce("angularfire2.firestore.use-emulator");function n9(e,t=n=>n){return{query:t(e),ref:e}}var cx=(()=>{class e{schedulers;firestore;persistenceEnabled$;constructor(n,i,r,o,s,a,l,c,u,d,h,p,g,m,v,C,S){this.schedulers=l;let _=rg(n,a,i),D=u;d&&QM(_,a,h,g,m,v,p,C),[this.firestore,this.persistenceEnabled$]=og(`${_.name}.firestore`,"AngularFirestore",_.name,()=>{let F=a.runOutsideAngular(()=>_.firestore());if(o&&F.settings(o),D&&F.useEmulator(...D),r&&!sa(s)){let I=()=>{try{return Ze(F.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(E){return typeof console<"u"&&console.warn(E),se(!1)}};return[F,a.runOutsideAngular(I)]}else return[F,se(!1)]},[o,D,r])}collection(n,i){let r;typeof n=="string"?r=this.firestore.collection(n):r=n;let{ref:o,query:s}=n9(r,i),a=this.schedulers.ngZone.run(()=>o);return new lx(a,s,this)}collectionGroup(n,i){let r=i||(s=>s),o=this.firestore.collectionGroup(n);return new b3(r(o),this)}doc(n){let i;typeof n=="string"?i=this.firestore.doc(n):i=n;let r=this.schedulers.ngZone.run(()=>i);return new sx(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||e)($(pu),$(ig,8),$(Fve,8),$(Mve,8),$(Sn),$(De),$(An),$(Ave,8),$(Pve,8),$(Za,8),$(UM,8),$(jM,8),$(WM,8),$(qM,8),$(KM,8),$(YM,8),$(Ti,8))};static \u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})();var bo=(()=>{class e{constructor(n,i,r,o){this.firebaseAuth=n,this.router=i,this.fireAuth=r,this.firestore=o,this.user$=B7(this.firebaseAuth),this.currentUserSubject=new jt(void 0),this.currentUser$=this.currentUserSubject.asObservable().pipe(Ba(),Pd(1))}initializeUserState(){this.user$.pipe(Ne(n=>n?this.firestore.doc(`users/${n.uid}`).valueChanges():se(null))).subscribe(n=>{this.currentUserSubject.next(n?{email:n.email,username:n.username,isAdmin:n.isAdmin}:null)})}register(n,i,r){let o=G7(this.firebaseAuth,n,i).then(s=>{U7(s.user,{displayName:r}).then(()=>{this.firestore.doc(`users/${s.user.uid}`).set({email:n,username:r})})});return Ze(o)}login(n,i){let r=z7(this.firebaseAuth,n,i).then(()=>{});return Ze(r)}logout(){this.firebaseAuth.signOut().then(()=>{this.currentUserSubject.next(null),this.router.navigateByUrl("/login")})}googleSignIn(){return this.fireAuth.signInWithPopup(new CR).then(n=>N(this,null,function*(){n.user&&(yield this.updateUserData(n.user.uid,n.user.email||"",n.user.displayName||"")),this.router.navigate(["/dashboard"]),localStorage.setItem("token",JSON.stringify(n.user?.uid))}),n=>{console.log(n)})}facebookSignIn(){return this.fireAuth.signInWithPopup(new yR).then(n=>{n.user&&this.updateUserData(n.user.uid,n.user.email||"",n.user.displayName||""),this.router.navigate(["/dashboard"]),localStorage.setItem("token",JSON.stringify(n.user?.uid))},n=>{console.log(n)})}updateUserData(n,i,r){return N(this,null,function*(){let o=yield this.getUserData(n),s={email:i,username:r,isAdmin:o?.isAdmin??!1};return this.firestore.doc(`users/${n}`).set(s,{merge:!0})})}getUserData(n){return this.firestore.doc(`users/${n}`).get().toPromise().then(i=>i?.data()||null)}isAdmin(){return this.user$.pipe(Ne(n=>n?this.firestore.doc(`users/${n.uid}`).valueChanges():se(null)),ae(n=>n?.isAdmin||!1))}setAdminStatus(n,i){return this.firestore.doc(`users/${n}`).update({isAdmin:i})}getAllUsers(){return this.firestore.collection("users").valueChanges()}static{this.\u0275fac=function(i){return new(i||e)($(Ko),$(pi),$(Za),$(cx))}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var ux=(()=>{class e{constructor(n){this.authService=n}googleSignIn(){this.authService.googleSignIn()}facebookSignIn(){this.authService.facebookSignIn()}static{this.\u0275fac=function(i){return new(i||e)(J(bo))}}static{this.\u0275cmp=je({type:e,selectors:[["app-platform-buttons"]],standalone:!0,features:[We],decls:4,vars:0,consts:[[1,"w-100","shadow-none","platform-signup-button","mb-0",3,"click"],[1,"bi","bi-google"],[1,"ms-2"]],template:function(i,r){i&1&&(z(0,"button",0),be("click",function(){return r.googleSignIn()}),he(1,"i",1),z(2,"span",2),ye(3,"Sign in with Google"),H()())}})}}return e})();var r9=(()=>{class e{constructor(n){this.platformId=n}isBrowser(){return Vp(this.platformId)}isServer(){return sa(this.platformId)}static{this.\u0275fac=function(i){return new(i||e)($(Sn))}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Ove(e,t){e&1&&(z(0,"div"),he(1,"app-loader"),H())}function Nve(e,t){if(e&1&&(z(0,"div",23),ye(1),H()),e&2){let n=Se(2);Z(),qn(" ",n.error," ")}}function Lve(e,t){if(e&1){let n=Tt();he(0,"app-wave",2),z(1,"div",3),he(2,"app-dollar-sign-svgs",2),z(3,"div",4)(4,"div",5)(5,"h1",6),ye(6,"Login"),H(),z(7,"h5",7),ye(8,"Please sign in to continue"),H(),z(9,"div",8),he(10,"app-platform-buttons"),H(),z(11,"form",9),be("ngSubmit",function(){Ge(n);let r=Se();return He(r.login())}),z(12,"div",10)(13,"div",11),he(14,"hr",12),z(15,"span",13),ye(16,"or"),H()(),he(17,"input",14),H(),z(18,"div",15),he(19,"input",16),H(),z(20,"button",17),ye(21," Login "),he(22,"i",18),H(),z(23,"div",19)(24,"a",20),be("click",function(){Ge(n);let r=Se();return He(r.navigateToRegister())}),ye(25,"Sign Up"),H()()(),Fe(26,Nve,2,1,"div",21),H()()(),he(27,"app-wave",22)}if(e&2){let n=Se();Z(11),ue("formGroup",n.loginForm),Z(15),ue("ngIf",n.error),Z(),ue("wave","bottom")}}var o9=(()=>{class e{constructor(n,i,r,o){this.fb=n,this.auth=i,this.router=r,this.platformService=o,this.isLoading=!0,this.loginForm=this.fb.nonNullable.group({email:[""],password:[""]}),this.error=null,this.platformService.isBrowser()&&(this.isLoading=!1)}login(){this.isLoading=!0;let n=this.loginForm.getRawValue();this.auth.login(n.email,n.password).subscribe({next:()=>this.router.navigateByUrl("/dashboard"),error:i=>{this.error=i.message,this.isLoading=!1},complete:()=>{this.isLoading=!1}})}navigateToRegister(){this.router.navigateByUrl("/register")}static{this.\u0275fac=function(i){return new(i||e)(J(Zp),J(bo),J(pi),J(r9))}}static{this.\u0275cmp=je({type:e,selectors:[["app-login"]],standalone:!0,features:[We],decls:3,vars:2,consts:[["loginFormTemplate",""],[4,"ngIf","ngIfElse"],[1,"z-0"],[1,"container-fluid","vh-100","d-flex","flex-column","align-items-center","justify-content-center","bg-light","z-n1"],[1,"d-flex","justify-content-center","align-items-center"],[1,"row","col-11","col-md-9","col-lg-7","col-xl-5"],[1,"fs-1","fw-bolder","text-start"],[1,"fs-6","text-muted","mb-4"],[1,"mb-0","z-3"],[1,"z-3",3,"ngSubmit","formGroup"],[1,"mb-0"],[1,"position-relative","text-center","my-4"],[1,"m-0"],[1,"position-absolute","top-50","start-50","translate-middle","bg-light","px-2"],["id","email","type","email","formControlName","email","placeholder","Email",1,"email","w-100","shadow-none"],[1,"mb-4","position-relative"],["id","password","type","password","formControlName","password","placeholder","Password",1,"password","w-100"],["type","submit",1,"col-4","offset-8","btn","btn-warning","text-white","mb-3"],[1,"bi","bi-arrow-right"],[1,"text-end"],["role","button",1,"text-decoration-none","hyperlink",3,"click"],["class","text-danger",4,"ngIf"],[1,"z-0",3,"wave"],[1,"text-danger"]],template:function(i,r){if(i&1&&Fe(0,Ove,2,0,"div",1)(1,Lve,28,3,"ng-template",null,0,tr),i&2){let o=Ka(2);ue("ngIf",r.isLoading)("ngIfElse",o)}},dependencies:[_n,Gi,$a,$p,ys,Cs,Xp,nh,ih,E_,x_,D_,ux],styles:["svg[_ngcontent-%COMP%]{pointer-events:none}.email[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px;border-bottom:none}.password[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px}"]})}}return e})();var s9=(()=>{class e{constructor(n,i,r){this.fb=n,this.authService=i,this.router=r,this.registerForm=this.fb.nonNullable.group({email:["",vs.required],username:["",vs.required],password:["",vs.required]}),this.error=null}register(){console.log(this.registerForm.value);let n=this.registerForm.getRawValue();this.authService.register(n.email,n.password,n.username).subscribe({next:()=>this.router.navigate(["/login"]),error:i=>{this.error=i.code}})}navigateToLogin(){this.router.navigateByUrl("/login")}static{this.\u0275fac=function(i){return new(i||e)(J(Zp),J(bo),J(pi))}}static{this.\u0275cmp=je({type:e,selectors:[["app-register"]],standalone:!0,features:[We],decls:29,vars:2,consts:[[1,"z-0"],[1,"container-fluid","vh-100","d-flex","flex-column","align-items-center","justify-content-center","bg-light","z-n1"],[1,"d-flex","justify-content-center","align-items-center"],[1,"row","col-11","col-md-9","col-lg-7","col-xl-5"],[1,"fs-1","fw-bolder","text-start"],[1,"fs-6","text-muted","mb-4"],[1,"mb-0","z-3"],[1,"z-3",3,"ngSubmit","formGroup"],[1,"mb-0"],[1,"position-relative","text-center","my-4"],[1,"m-0"],[1,"position-absolute","top-50","start-50","translate-middle","bg-light","px-2"],["id","email","type","email","formControlName","email","placeholder","Email",1,"email","w-100","shadow-none"],[1,"mb-0","position-relative"],["id","username","type","text","formControlName","username","placeholder","Username",1,"username","w-100"],[1,"mb-4","position-relative"],["id","password","type","password","formControlName","password","placeholder","Password",1,"password","w-100"],["type","submit",1,"col-4","offset-8","btn","btn-warning","text-white","mb-3"],[1,"bi","bi-arrow-right"],[1,"text-end"],["role","button",1,"text-decoration-none",2,"color","#fd7e14",3,"click"],[1,"z-0",3,"wave"]],template:function(i,r){i&1&&(he(0,"app-wave",0),z(1,"div",1),he(2,"app-dollar-sign-svgs",0),z(3,"div",2)(4,"div",3)(5,"h1",4),ye(6,"Register"),H(),z(7,"h5",5),ye(8,"Please sign up to continue"),H(),z(9,"div",6),he(10,"app-platform-buttons"),H(),z(11,"form",7),be("ngSubmit",function(){return r.register()}),z(12,"div",8)(13,"div",9),he(14,"hr",10),z(15,"span",11),ye(16,"or"),H()(),he(17,"input",12),H(),z(18,"div",13),he(19,"input",14),H(),z(20,"div",15),he(21,"input",16),H(),z(22,"button",17),ye(23," Register "),he(24,"i",18),H(),z(25,"div",19)(26,"a",20),be("click",function(){return r.navigateToLogin()}),ye(27,"Login"),H()()()()()(),he(28,"app-wave",21)),i&2&&(Z(11),ue("formGroup",r.registerForm),Z(17),ue("wave","bottom"))},dependencies:[$a,$p,ys,Cs,Xp,nh,ih,x_,E_,ux],styles:[".email[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px;border-bottom:none}.password[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px;border-top:none}"]})}}return e})();var Vve=(()=>{class e{constructor(n,i){this.auth=n,this.router=i}canActivate(){return ng(this.auth).pipe(Dt(1),ae(n=>n?!0:(this.router.navigate(["/login"]),!1)))}static{this.\u0275fac=function(i){return new(i||e)($(Ko),$(pi))}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Bve=(()=>{class e{constructor(n,i){this.auth=n,this.router=i}canActivate(){return ng(this.auth).pipe(Dt(1),ae(n=>n?(this.router.navigate(["/dashboard"]),!1):!0))}static{this.\u0275fac=function(i){return new(i||e)($(Ko),$(pi))}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Gve=(()=>{class e{constructor(n,i,r){this.auth=n,this.router=i,this.authService=r}canActivate(){return Ar([ng(this.auth),this.authService.isAdmin()]).pipe(Dt(1),ae(([n,i])=>n&&i?!0:(this.router.navigate(["/login"]),!1)))}static{this.\u0275fac=function(i){return new(i||e)($(Ko),$(pi),$(bo))}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),a9=(e,t)=>Y(Vve).canActivate(),dx=(e,t)=>Y(Bve).canActivate(),l9=(e,t)=>Y(Gve).canActivate();function Wy(e){e||(E5(Wy),e=Y(Mp));let t=new ge(n=>e.onDestroy(n.next.bind(n)));return n=>n.pipe(mn(t))}var Ci="top",sr="bottom",zi="right",Ai="left",hx="auto",Ou=[Ci,sr,zi,Ai],rc="start",Ph="end",c9="clippingParents",fx="viewport",Yg="popper",u9="reference",_3=Ou.reduce(function(e,t){return e.concat([t+"-"+rc,t+"-"+Ph])},[]),px=[].concat(Ou,[hx]).reduce(function(e,t){return e.concat([t,t+"-"+rc,t+"-"+Ph])},[]),Hve="beforeRead",zve="read",Uve="afterRead",jve="beforeMain",Wve="main",qve="afterMain",Kve="beforeWrite",Yve="write",Qve="afterWrite",d9=[Hve,zve,Uve,jve,Wve,qve,Kve,Yve,Qve];function Ui(e){return e?(e.nodeName||"").toLowerCase():null}function Pn(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function _s(e){var t=Pn(e).Element;return e instanceof t||e instanceof Element}function Mi(e){var t=Pn(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Qg(e){if(typeof ShadowRoot>"u")return!1;var t=Pn(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Xve(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var i=t.styles[n]||{},r=t.attributes[n]||{},o=t.elements[n];!Mi(o)||!Ui(o)||(Object.assign(o.style,i),Object.keys(r).forEach(function(s){var a=r[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function $ve(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(i){var r=t.elements[i],o=t.attributes[i]||{},s=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:n[i]),a=s.reduce(function(l,c){return l[c]="",l},{});!Mi(r)||!Ui(r)||(Object.assign(r.style,a),Object.keys(o).forEach(function(l){r.removeAttribute(l)}))})}}var h9={name:"applyStyles",enabled:!0,phase:"write",fn:Xve,effect:$ve,requires:["computeStyles"]};function ji(e){return e.split("-")[0]}var ma=Math.max,kh=Math.min,oc=Math.round;function Xg(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function qy(){return!/^((?!chrome|android).)*safari/i.test(Xg())}function Es(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=e.getBoundingClientRect(),r=1,o=1;t&&Mi(e)&&(r=e.offsetWidth>0&&oc(i.width)/e.offsetWidth||1,o=e.offsetHeight>0&&oc(i.height)/e.offsetHeight||1);var s=_s(e)?Pn(e):window,a=s.visualViewport,l=!qy()&&n,c=(i.left+(l&&a?a.offsetLeft:0))/r,u=(i.top+(l&&a?a.offsetTop:0))/o,d=i.width/r,h=i.height/o;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c,x:c,y:u}}function Oh(e){var t=Es(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function Ky(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Qg(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function jr(e){return Pn(e).getComputedStyle(e)}function E3(e){return["table","td","th"].indexOf(Ui(e))>=0}function ar(e){return((_s(e)?e.ownerDocument:e.document)||window.document).documentElement}function sc(e){return Ui(e)==="html"?e:e.assignedSlot||e.parentNode||(Qg(e)?e.host:null)||ar(e)}function f9(e){return!Mi(e)||jr(e).position==="fixed"?null:e.offsetParent}function Zve(e){var t=/firefox/i.test(Xg()),n=/Trident/i.test(Xg());if(n&&Mi(e)){var i=jr(e);if(i.position==="fixed")return null}var r=sc(e);for(Qg(r)&&(r=r.host);Mi(r)&&["html","body"].indexOf(Ui(r))<0;){var o=jr(r);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return r;r=r.parentNode}return null}function va(e){for(var t=Pn(e),n=f9(e);n&&E3(n)&&jr(n).position==="static";)n=f9(n);return n&&(Ui(n)==="html"||Ui(n)==="body"&&jr(n).position==="static")?t:n||Zve(e)||t}function Nh(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Lh(e,t,n){return ma(e,kh(t,n))}function p9(e,t,n){var i=Lh(e,t,n);return i>n?n:i}function Yy(){return{top:0,right:0,bottom:0,left:0}}function Qy(e){return Object.assign({},Yy(),e)}function Xy(e,t){return t.reduce(function(n,i){return n[i]=e,n},{})}var Jve=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,Qy(typeof t!="number"?t:Xy(t,Ou))};function e0e(e){var t,n=e.state,i=e.name,r=e.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=ji(n.placement),l=Nh(a),c=[Ai,zi].indexOf(a)>=0,u=c?"height":"width";if(!(!o||!s)){var d=Jve(r.padding,n),h=Oh(o),p=l==="y"?Ci:Ai,g=l==="y"?sr:zi,m=n.rects.reference[u]+n.rects.reference[l]-s[l]-n.rects.popper[u],v=s[l]-n.rects.reference[l],C=va(o),S=C?l==="y"?C.clientHeight||0:C.clientWidth||0:0,_=m/2-v/2,D=d[p],F=S-h[u]-d[g],I=S/2-h[u]/2+_,E=Lh(D,I,F),b=l;n.modifiersData[i]=(t={},t[b]=E,t.centerOffset=E-I,t)}}function t0e(e){var t=e.state,n=e.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=t.elements.popper.querySelector(r),!r)||Ky(t.elements.popper,r)&&(t.elements.arrow=r))}var x3={name:"arrow",enabled:!0,phase:"main",fn:e0e,effect:t0e,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function xs(e){return e.split("-")[1]}var n0e={top:"auto",right:"auto",bottom:"auto",left:"auto"};function i0e(e,t){var n=e.x,i=e.y,r=t.devicePixelRatio||1;return{x:oc(n*r)/r||0,y:oc(i*r)/r||0}}function g9(e){var t,n=e.popper,i=e.popperRect,r=e.placement,o=e.variation,s=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,d=e.isFixed,h=s.x,p=h===void 0?0:h,g=s.y,m=g===void 0?0:g,v=typeof u=="function"?u({x:p,y:m}):{x:p,y:m};p=v.x,m=v.y;var C=s.hasOwnProperty("x"),S=s.hasOwnProperty("y"),_=Ai,D=Ci,F=window;if(c){var I=va(n),E="clientHeight",b="clientWidth";if(I===Pn(n)&&(I=ar(n),jr(I).position!=="static"&&a==="absolute"&&(E="scrollHeight",b="scrollWidth")),I=I,r===Ci||(r===Ai||r===zi)&&o===Ph){D=sr;var x=d&&I===F&&F.visualViewport?F.visualViewport.height:I[E];m-=x-i.height,m*=l?1:-1}if(r===Ai||(r===Ci||r===sr)&&o===Ph){_=zi;var k=d&&I===F&&F.visualViewport?F.visualViewport.width:I[b];p-=k-i.width,p*=l?1:-1}}var A=Object.assign({position:a},c&&n0e),O=u===!0?i0e({x:p,y:m},Pn(n)):{x:p,y:m};if(p=O.x,m=O.y,l){var P;return Object.assign({},A,(P={},P[D]=S?"0":"",P[_]=C?"0":"",P.transform=(F.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",P))}return Object.assign({},A,(t={},t[D]=S?m+"px":"",t[_]=C?p+"px":"",t.transform="",t))}function r0e(e){var t=e.state,n=e.options,i=n.gpuAcceleration,r=i===void 0?!0:i,o=n.adaptive,s=o===void 0?!0:o,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:ji(t.placement),variation:xs(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:r,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,g9(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,g9(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var m9={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:r0e,data:{}};var gx={passive:!0};function o0e(e){var t=e.state,n=e.instance,i=e.options,r=i.scroll,o=r===void 0?!0:r,s=i.resize,a=s===void 0?!0:s,l=Pn(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach(function(u){u.addEventListener("scroll",n.update,gx)}),a&&l.addEventListener("resize",n.update,gx),function(){o&&c.forEach(function(u){u.removeEventListener("scroll",n.update,gx)}),a&&l.removeEventListener("resize",n.update,gx)}}var v9={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:o0e,data:{}};var s0e={left:"right",right:"left",bottom:"top",top:"bottom"};function $g(e){return e.replace(/left|right|bottom|top/g,function(t){return s0e[t]})}var a0e={start:"end",end:"start"};function mx(e){return e.replace(/start|end/g,function(t){return a0e[t]})}function Vh(e){var t=Pn(e),n=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:n,scrollTop:i}}function Bh(e){return Es(ar(e)).left+Vh(e).scrollLeft}function D3(e,t){var n=Pn(e),i=ar(e),r=n.visualViewport,o=i.clientWidth,s=i.clientHeight,a=0,l=0;if(r){o=r.width,s=r.height;var c=qy();(c||!c&&t==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:o,height:s,x:a+Bh(e),y:l}}function T3(e){var t,n=ar(e),i=Vh(e),r=(t=e.ownerDocument)==null?void 0:t.body,o=ma(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),s=ma(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+Bh(e),l=-i.scrollTop;return jr(r||n).direction==="rtl"&&(a+=ma(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}function Gh(e){var t=jr(e),n=t.overflow,i=t.overflowX,r=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function vx(e){return["html","body","#document"].indexOf(Ui(e))>=0?e.ownerDocument.body:Mi(e)&&Gh(e)?e:vx(sc(e))}function Nu(e,t){var n;t===void 0&&(t=[]);var i=vx(e),r=i===((n=e.ownerDocument)==null?void 0:n.body),o=Pn(i),s=r?[o].concat(o.visualViewport||[],Gh(i)?i:[]):i,a=t.concat(s);return r?a:a.concat(Nu(sc(s)))}function Zg(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function l0e(e,t){var n=Es(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function y9(e,t,n){return t===fx?Zg(D3(e,n)):_s(t)?l0e(t,n):Zg(T3(ar(e)))}function c0e(e){var t=Nu(sc(e)),n=["absolute","fixed"].indexOf(jr(e).position)>=0,i=n&&Mi(e)?va(e):e;return _s(i)?t.filter(function(r){return _s(r)&&Ky(r,i)&&Ui(r)!=="body"}):[]}function R3(e,t,n,i){var r=t==="clippingParents"?c0e(e):[].concat(t),o=[].concat(r,[n]),s=o[0],a=o.reduce(function(l,c){var u=y9(e,c,i);return l.top=ma(u.top,l.top),l.right=kh(u.right,l.right),l.bottom=kh(u.bottom,l.bottom),l.left=ma(u.left,l.left),l},y9(e,s,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function $y(e){var t=e.reference,n=e.element,i=e.placement,r=i?ji(i):null,o=i?xs(i):null,s=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,l;switch(r){case Ci:l={x:s,y:t.y-n.height};break;case sr:l={x:s,y:t.y+t.height};break;case zi:l={x:t.x+t.width,y:a};break;case Ai:l={x:t.x-n.width,y:a};break;default:l={x:t.x,y:t.y}}var c=r?Nh(r):null;if(c!=null){var u=c==="y"?"height":"width";switch(o){case rc:l[c]=l[c]-(t[u]/2-n[u]/2);break;case Ph:l[c]=l[c]+(t[u]/2-n[u]/2);break;default:}}return l}function Lu(e,t){t===void 0&&(t={});var n=t,i=n.placement,r=i===void 0?e.placement:i,o=n.strategy,s=o===void 0?e.strategy:o,a=n.boundary,l=a===void 0?c9:a,c=n.rootBoundary,u=c===void 0?fx:c,d=n.elementContext,h=d===void 0?Yg:d,p=n.altBoundary,g=p===void 0?!1:p,m=n.padding,v=m===void 0?0:m,C=Qy(typeof v!="number"?v:Xy(v,Ou)),S=h===Yg?u9:Yg,_=e.rects.popper,D=e.elements[g?S:h],F=R3(_s(D)?D:D.contextElement||ar(e.elements.popper),l,u,s),I=Es(e.elements.reference),E=$y({reference:I,element:_,strategy:"absolute",placement:r}),b=Zg(Object.assign({},_,E)),x=h===Yg?b:I,k={top:F.top-x.top+C.top,bottom:x.bottom-F.bottom+C.bottom,left:F.left-x.left+C.left,right:x.right-F.right+C.right},A=e.modifiersData.offset;if(h===Yg&&A){var O=A[r];Object.keys(k).forEach(function(P){var le=[zi,sr].indexOf(P)>=0?1:-1,Re=[Ci,sr].indexOf(P)>=0?"y":"x";k[P]+=O[Re]*le})}return k}function I3(e,t){t===void 0&&(t={});var n=t,i=n.placement,r=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?px:l,u=xs(i),d=u?a?_3:_3.filter(function(g){return xs(g)===u}):Ou,h=d.filter(function(g){return c.indexOf(g)>=0});h.length===0&&(h=d);var p=h.reduce(function(g,m){return g[m]=Lu(e,{placement:m,boundary:r,rootBoundary:o,padding:s})[ji(m)],g},{});return Object.keys(p).sort(function(g,m){return p[g]-p[m]})}function u0e(e){if(ji(e)===hx)return[];var t=$g(e);return[mx(e),t,mx(t)]}function d0e(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var r=n.mainAxis,o=r===void 0?!0:r,s=n.altAxis,a=s===void 0?!0:s,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,g=p===void 0?!0:p,m=n.allowedAutoPlacements,v=t.options.placement,C=ji(v),S=C===v,_=l||(S||!g?[$g(v)]:u0e(v)),D=[v].concat(_).reduce(function(Rl,ui){return Rl.concat(ji(ui)===hx?I3(t,{placement:ui,boundary:u,rootBoundary:d,padding:c,flipVariations:g,allowedAutoPlacements:m}):ui)},[]),F=t.rects.reference,I=t.rects.popper,E=new Map,b=!0,x=D[0],k=0;k<D.length;k++){var A=D[k],O=ji(A),P=xs(A)===rc,le=[Ci,sr].indexOf(O)>=0,Re=le?"width":"height",Ue=Lu(t,{placement:A,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),we=le?P?zi:Ai:P?sr:Ci;F[Re]>I[Re]&&(we=$g(we));var Ct=$g(we),ln=[];if(o&&ln.push(Ue[O]<=0),a&&ln.push(Ue[we]<=0,Ue[Ct]<=0),ln.every(function(Rl){return Rl})){x=A,b=!1;break}E.set(A,ln)}if(b)for(var Ao=g?3:1,Ws=function(ui){var qs=D.find(function($n){var ao=E.get($n);if(ao)return ao.slice(0,ui).every(function(Aa){return Aa})});if(qs)return x=qs,"break"},wn=Ao;wn>0;wn--){var Vt=Ws(wn);if(Vt==="break")break}t.placement!==x&&(t.modifiersData[i]._skip=!0,t.placement=x,t.reset=!0)}}var F3={name:"flip",enabled:!0,phase:"main",fn:d0e,requiresIfExists:["offset"],data:{_skip:!1}};function h0e(e,t,n){var i=ji(e),r=[Ai,Ci].indexOf(i)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*r,[Ai,zi].indexOf(i)>=0?{x:a,y:s}:{x:s,y:a}}function f0e(e){var t=e.state,n=e.options,i=e.name,r=n.offset,o=r===void 0?[0,0]:r,s=px.reduce(function(u,d){return u[d]=h0e(d,t.rects,o),u},{}),a=s[t.placement],l=a.x,c=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[i]=s}var A3={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:f0e};function p0e(e){var t=e.state,n=e.name;t.modifiersData[n]=$y({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var C9={name:"popperOffsets",enabled:!0,phase:"read",fn:p0e,data:{}};function M3(e){return e==="x"?"y":"x"}function g0e(e){var t=e.state,n=e.options,i=e.name,r=n.mainAxis,o=r===void 0?!0:r,s=n.altAxis,a=s===void 0?!1:s,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,p=h===void 0?!0:h,g=n.tetherOffset,m=g===void 0?0:g,v=Lu(t,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),C=ji(t.placement),S=xs(t.placement),_=!S,D=Nh(C),F=M3(D),I=t.modifiersData.popperOffsets,E=t.rects.reference,b=t.rects.popper,x=typeof m=="function"?m(Object.assign({},t.rects,{placement:t.placement})):m,k=typeof x=="number"?{mainAxis:x,altAxis:x}:Object.assign({mainAxis:0,altAxis:0},x),A=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,O={x:0,y:0};if(I){if(o){var P,le=D==="y"?Ci:Ai,Re=D==="y"?sr:zi,Ue=D==="y"?"height":"width",we=I[D],Ct=we+v[le],ln=we-v[Re],Ao=p?-b[Ue]/2:0,Ws=S===rc?E[Ue]:b[Ue],wn=S===rc?-b[Ue]:-E[Ue],Vt=t.elements.arrow,Rl=p&&Vt?Oh(Vt):{width:0,height:0},ui=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Yy(),qs=ui[le],$n=ui[Re],ao=Lh(0,E[Ue],Rl[Ue]),Aa=_?E[Ue]/2-Ao-ao-qs-k.mainAxis:Ws-ao-qs-k.mainAxis,Ks=_?-E[Ue]/2+Ao+ao+$n+k.mainAxis:wn+ao+$n+k.mainAxis,Qt=t.elements.arrow&&va(t.elements.arrow),wd=Qt?D==="y"?Qt.clientTop||0:Qt.clientLeft||0:0,Ma=(P=A?.[D])!=null?P:0,bv=we+Aa-Ma-wd,Sv=we+Ks-Ma,_v=Lh(p?kh(Ct,bv):Ct,we,p?ma(ln,Sv):ln);I[D]=_v,O[D]=_v-we}if(a){var Ev,XT=D==="x"?Ci:Ai,pb=D==="x"?sr:zi,Pa=I[F],Mc=F==="y"?"height":"width",xv=Pa+v[XT],gb=Pa-v[pb],bd=[Ci,Ai].indexOf(C)!==-1,Qf=(Ev=A?.[F])!=null?Ev:0,Xf=bd?xv:Pa-E[Mc]-b[Mc]-Qf+k.altAxis,_i=bd?Pa+E[Mc]+b[Mc]-Qf-k.altAxis:gb,Ni=p&&bd?p9(Xf,Pa,_i):Lh(p?Xf:xv,Pa,p?_i:gb);I[F]=Ni,O[F]=Ni-Pa}t.modifiersData[i]=O}}var P3={name:"preventOverflow",enabled:!0,phase:"main",fn:g0e,requiresIfExists:["offset"]};function k3(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function O3(e){return e===Pn(e)||!Mi(e)?Vh(e):k3(e)}function m0e(e){var t=e.getBoundingClientRect(),n=oc(t.width)/e.offsetWidth||1,i=oc(t.height)/e.offsetHeight||1;return n!==1||i!==1}function N3(e,t,n){n===void 0&&(n=!1);var i=Mi(t),r=Mi(t)&&m0e(t),o=ar(t),s=Es(e,r,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&((Ui(t)!=="body"||Gh(o))&&(a=O3(t)),Mi(t)?(l=Es(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=Bh(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function v0e(e){var t=new Map,n=new Set,i=[];e.forEach(function(o){t.set(o.name,o)});function r(o){n.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!n.has(a)){var l=t.get(a);l&&r(l)}}),i.push(o)}return e.forEach(function(o){n.has(o.name)||r(o)}),i}function L3(e){var t=v0e(e);return d9.reduce(function(n,i){return n.concat(t.filter(function(r){return r.phase===i}))},[])}function V3(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function B3(e){var t=e.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(t).map(function(n){return t[n]})}var w9={placement:"bottom",modifiers:[],strategy:"absolute"};function b9(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function S9(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,i=n===void 0?[]:n,r=t.defaultOptions,o=r===void 0?w9:r;return function(a,l,c){c===void 0&&(c=o);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},w9,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],h=!1,p={state:u,setOptions:function(C){var S=typeof C=="function"?C(u.options):C;m(),u.options=Object.assign({},o,u.options,S),u.scrollParents={reference:_s(a)?Nu(a):a.contextElement?Nu(a.contextElement):[],popper:Nu(l)};var _=L3(B3([].concat(i,u.options.modifiers)));return u.orderedModifiers=_.filter(function(D){return D.enabled}),g(),p.update()},forceUpdate:function(){if(!h){var C=u.elements,S=C.reference,_=C.popper;if(b9(S,_)){u.rects={reference:N3(S,va(_),u.options.strategy==="fixed"),popper:Oh(_)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(k){return u.modifiersData[k.name]=Object.assign({},k.data)});for(var D=0;D<u.orderedModifiers.length;D++){if(u.reset===!0){u.reset=!1,D=-1;continue}var F=u.orderedModifiers[D],I=F.fn,E=F.options,b=E===void 0?{}:E,x=F.name;typeof I=="function"&&(u=I({state:u,options:b,name:x,instance:p})||u)}}}},update:V3(function(){return new Promise(function(v){p.forceUpdate(),v(u)})}),destroy:function(){m(),h=!0}};if(!b9(a,l))return p;p.setOptions(c).then(function(v){!h&&c.onFirstUpdate&&c.onFirstUpdate(v)});function g(){u.orderedModifiers.forEach(function(v){var C=v.name,S=v.options,_=S===void 0?{}:S,D=v.effect;if(typeof D=="function"){var F=D({state:u,name:C,instance:p,options:_}),I=function(){};d.push(F||I)}})}function m(){d.forEach(function(v){return v()}),d=[]}return p}}var y0e=[v9,C9,m9,h9],G3=S9({defaultModifiers:y0e});var T9=["*"];var C0e=["ngbDatepickerDayView",""],w0e=["month"],b0e=["year"];function S0e(e,t){if(e&1&&(z(0,"option",3),ye(1),H()),e&2){let n=t.$implicit,i=Se();ue("value",n),zl("aria-label",i.i18n.getMonthFullName(n,i.date.year)),Z(),er(i.i18n.getMonthShortName(n,i.date.year))}}function _0e(e,t){if(e&1&&(z(0,"option",3),ye(1),H()),e&2){let n=t.$implicit,i=Se();ue("value",n),Z(),er(i.i18n.getYearNumerals(n))}}function E0e(e,t){if(e&1){let n=Tt();z(0,"ngb-datepicker-navigation-select",6),be("select",function(r){Ge(n);let o=Se();return He(o.select.emit(r))}),H()}if(e&2){let n=Se();ue("date",n.date)("disabled",n.disabled)("months",n.selectBoxes.months)("years",n.selectBoxes.years)}}function x0e(e,t){e&1&&he(0,"div",7)}function D0e(e,t){e&1&&he(0,"div",7)}function T0e(e,t){if(e&1&&(Fe(0,x0e,1,0,"div",7),z(1,"div",8),ye(2),H(),Fe(3,D0e,1,0,"div",7)),e&2){let n=t.$implicit,i=t.$index,r=Se(2);Vr(0,i>0?0:-1),Z(2),qn(" ",r.i18n.getMonthLabel(n.firstDate)," "),Z(),Vr(3,i!==r.months.length-1?3:-1)}}function R0e(e,t){if(e&1&&ru(0,T0e,4,3,null,null,iu),e&2){let n=Se();ou(n.months)}}function I0e(e,t){if(e&1&&(z(0,"div",1),ye(1),H()),e&2){let n=Se(2);Z(),er(n.i18n.getWeekLabel())}}function F0e(e,t){if(e&1&&(z(0,"div",2),ye(1),H()),e&2){let n=t.$implicit;Z(),er(n)}}function A0e(e,t){if(e&1&&(z(0,"div",0),Fe(1,I0e,2,1,"div",1),ru(2,F0e,2,1,"div",2,iu),H()),e&2){let n=Se();Z(),Vr(1,n.datepicker.showWeekNumbers?1:-1),Z(),ou(n.viewModel.weekdays)}}function M0e(e,t){if(e&1&&(z(0,"div",4),ye(1),H()),e&2){let n=Se(2).$implicit,i=Se();Z(),er(i.i18n.getWeekNumerals(n.number))}}function P0e(e,t){}function k0e(e,t){if(e&1&&Fe(0,P0e,0,0,"ng-template",7),e&2){let n=Se().$implicit,i=Se(3);ue("ngTemplateOutlet",i.datepicker.dayTemplate)("ngTemplateOutletContext",n.context)}}function O0e(e,t){if(e&1){let n=Tt();z(0,"div",6),be("click",function(r){let o=Ge(n).$implicit;return Se(3).doSelect(o),He(r.preventDefault())}),Fe(1,k0e,1,2,null,7),H()}if(e&2){let n=t.$implicit;vo("disabled",n.context.disabled)("hidden",n.hidden)("ngb-dp-today",n.context.today),ue("tabindex",n.tabindex),zl("aria-label",n.ariaLabel),Z(),Vr(1,n.hidden?-1:1)}}function N0e(e,t){if(e&1&&(z(0,"div",3),Fe(1,M0e,2,1,"div",4),ru(2,O0e,2,9,"div",5,iu),H()),e&2){let n=Se().$implicit,i=Se();Z(),Vr(1,i.datepicker.showWeekNumbers?1:-1),Z(),ou(n.days)}}function L0e(e,t){if(e&1&&Fe(0,N0e,4,1,"div",3),e&2){let n=t.$implicit;Vr(0,n.collapsed?-1:0)}}var V0e=["defaultDayTemplate"],B0e=["content"],G0e=e=>({$implicit:e});function H0e(e,t){if(e&1&&he(0,"div",8),e&2){let n=t.date,i=t.currentMonth,r=t.selected,o=t.disabled,s=t.focused;ue("date",n)("currentMonth",i)("selected",r)("disabled",o)("focused",s)}}function z0e(e,t){if(e&1&&(z(0,"div",10),ye(1),H()),e&2){let n=Se().$implicit,i=Se(2);Z(),qn(" ",i.i18n.getMonthLabel(n.firstDate)," ")}}function U0e(e,t){if(e&1&&(z(0,"div",9),Fe(1,z0e,2,1,"div",10),he(2,"ngb-datepicker-month",11),H()),e&2){let n=t.$implicit,i=Se(2);Z(),Vr(1,i.navigation==="none"||i.displayMonths>1&&i.navigation==="select"?1:-1),Z(),ue("month",n.firstDate)}}function j0e(e,t){if(e&1&&ru(0,U0e,3,2,"div",9,iu),e&2){let n=Se();ou(n.model.months)}}function W0e(e,t){if(e&1){let n=Tt();z(0,"ngb-datepicker-navigation",12),be("navigate",function(r){Ge(n);let o=Se();return He(o.onNavigateEvent(r))})("select",function(r){Ge(n);let o=Se();return He(o.onNavigateDateSelect(r))}),H()}if(e&2){let n=Se();ue("date",n.model.firstDate)("months",n.model.months)("disabled",n.model.disabled)("showSelect",n.model.navigation==="select")("prevDisabled",n.model.prevDisabled)("nextDisabled",n.model.nextDisabled)("selectBoxes",n.model.selectBoxes)}}function q0e(e,t){}function K0e(e,t){}var Y0e=["dialog"];var R9={animation:!0,transitionTimerDelayMs:5},I9=(()=>{class e{constructor(){this.animation=R9.animation}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Q0e(e){let{transitionDelay:t,transitionDuration:n}=window.getComputedStyle(e),i=parseFloat(t),r=parseFloat(n);return(i+r)*1e3}function Sx(e){return parseInt(`${e}`,10)}function K3(e){return typeof e=="string"}function _o(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function z3(e){return e!=null}function X0e(e){return e&&e.then}function $0e(e,t){return!t||typeof e.closest>"u"?null:e.closest(t)}function F9(e){return(e||document.body).getBoundingClientRect()}function Z0e(e){return t=>new ge(n=>{let i=s=>e.run(()=>n.next(s)),r=s=>e.run(()=>n.error(s)),o=()=>e.run(()=>n.complete());return t.subscribe({next:i,error:r,complete:o})})}var J0e=()=>{},{transitionTimerDelayMs:eye}=R9,yx=new Map,ac=(e,t,n,i)=>{let r=i.context||{},o=yx.get(t);if(o)switch(i.runningTransition){case"continue":return xi;case"stop":e.run(()=>o.transition$.complete()),r=Object.assign(o.context,r),yx.delete(t)}let s=n(t,i.animation,r)||J0e;if(!i.animation||window.getComputedStyle(t).transitionProperty==="none")return e.run(()=>s()),se(void 0).pipe(Z0e(e));let a=new nt,l=new nt,c=a.pipe(HR(!0));yx.set(t,{transition$:a,complete:()=>{l.next(),l.complete()},context:r});let u=Q0e(t);return e.runOutsideAngular(()=>{let d=di(t,"transitionend").pipe(mn(c),xt(({target:p})=>p===t)),h=Hc(u+eye).pipe(mn(c));cS(h,d,l).pipe(mn(c)).subscribe(()=>{yx.delete(t),e.run(()=>{s(),a.next(),a.complete()})})}),a.asObservable()};var Xo=class e{static from(t){return t instanceof e?t:t?new e(t.year,t.month,t.day):null}constructor(t,n,i){this.year=_o(t)?t:null,this.month=_o(n)?n:null,this.day=_o(i)?i:null}equals(t){return t!=null&&this.year===t.year&&this.month===t.month&&this.day===t.day}before(t){return t?this.year===t.year?this.month===t.month?this.day===t.day?!1:this.day<t.day:this.month<t.month:this.year<t.year:!1}after(t){return t?this.year===t.year?this.month===t.month?this.day===t.day?!1:this.day>t.day:this.month>t.month:this.year>t.year:!1}};function _9(e){return new Xo(e.getFullYear(),e.getMonth()+1,e.getDate())}function Cx(e){let t=new Date(e.year,e.month-1,e.day,12);return isNaN(t.getTime())||t.setFullYear(e.year),t}function tye(){return new nye}var Zy=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:()=>tye(),providedIn:"root"})}}return e})(),nye=(()=>{class e extends Zy{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(n,i="d",r=1){let o=Cx(n),s=!0,a=o.getMonth();switch(i){case"y":o.setFullYear(o.getFullYear()+r);break;case"m":a+=r,o.setMonth(a),a=a%12,a<0&&(a=a+12);break;case"d":o.setDate(o.getDate()+r),s=!1;break;default:return n}return s&&o.getMonth()!==a&&o.setDate(0),_9(o)}getPrev(n,i="d",r=1){return this.getNext(n,i,-r)}getWeekday(n){let r=Cx(n).getDay();return r===0?7:r}getWeekNumber(n,i){i===7&&(i=0);let r=(11-i)%7,o=n[r],s=Cx(o);s.setDate(s.getDate()+4-(s.getDay()||7));let a=s.getTime();return s.setMonth(0),s.setDate(1),Math.floor(Math.round((a-s.getTime())/864e5)/7)+1}getToday(){return _9(new Date)}isValid(n){if(!n||!_o(n.year)||!_o(n.month)||!_o(n.day)||n.year===0)return!1;let i=Cx(n);return!isNaN(i.getTime())&&i.getFullYear()===n.year&&i.getMonth()+1===n.month&&i.getDate()===n.day}static{this.\u0275fac=(()=>{let n;return function(r){return(n||(n=go(e)))(r||e)}})()}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac})}}return e})();function Jg(e,t){return!iye(e,t)}function A9(e,t){return!e&&!t?!1:!e||!t?!0:e.year!==t.year||e.month!==t.month}function iye(e,t){return!e&&!t||!!e&&!!t&&e.equals(t)}function rye(e,t){if(t&&e&&t.before(e))throw new Error(`'maxDate' ${t} should be greater than 'minDate' ${e}`)}function wx(e,t,n){return e&&t&&e.before(t)?t:e&&n&&e.after(n)?n:e||null}function H3(e,t){let{minDate:n,maxDate:i,disabled:r,markDisabled:o}=t;return!(e==null||r||o&&o(e,{year:e.year,month:e.month})||n&&e.before(n)||i&&e.after(i))}function oye(e,t,n,i){if(!t)return[];let r=e.getMonths(t.year);if(n&&t.year===n.year){let o=r.findIndex(s=>s===n.month);r=r.slice(o)}if(i&&t.year===i.year){let o=r.findIndex(s=>s===i.month);r=r.slice(0,o+1)}return r}function sye(e,t,n){if(!e)return[];let i=t?Math.max(t.year,e.year-500):e.year-10,o=(n?Math.min(n.year,e.year+500):e.year+10)-i+1,s=Array(o);for(let a=0;a<o;a++)s[a]=i+a;return s}function aye(e,t,n){let i=Object.assign(e.getNext(t,"m"),{day:1});return n!=null&&i.after(n)}function lye(e,t,n){let i=Object.assign(e.getPrev(t,"m"),{day:1});return n!=null&&(i.year===n.year&&i.month<n.month||i.year<n.year&&n.month===1)}function cye(e,t,n,i,r){let{displayMonths:o,months:s}=n,a=s.splice(0,s.length);return Array.from({length:o},(c,u)=>{let d=Object.assign(e.getNext(t,"m",u),{day:1});if(s[u]=null,!r){let h=a.findIndex(p=>p.firstDate.equals(d));h!==-1&&(s[u]=a.splice(h,1)[0])}return d}).forEach((c,u)=>{s[u]===null&&(s[u]=uye(e,c,n,i,a.shift()||{}))}),s}function uye(e,t,n,i,r={}){let{dayTemplateData:o,minDate:s,maxDate:a,firstDayOfWeek:l,markDisabled:c,outsideDays:u,weekdayWidth:d,weekdaysVisible:h}=n,p=e.getToday();r.firstDate=null,r.lastDate=null,r.number=t.month,r.year=t.year,r.weeks=r.weeks||[],r.weekdays=r.weekdays||[],t=dye(e,t,l),h||(r.weekdays.length=0);for(let g=0;g<e.getWeeksPerMonth();g++){let m=r.weeks[g];m||(m=r.weeks[g]={number:0,days:[],collapsed:!0});let v=m.days;for(let C=0;C<e.getDaysPerWeek();C++){g===0&&h&&(r.weekdays[C]=i.getWeekdayLabel(e.getWeekday(t),d));let S=new Xo(t.year,t.month,t.day),_=e.getNext(S),D=i.getDayAriaLabel(S),F=!!(s&&S.before(s)||a&&S.after(a));!F&&c&&(F=c(S,{month:r.number,year:r.year}));let I=S.equals(p),E=o?o(S,{month:r.number,year:r.year}):void 0;r.firstDate===null&&S.month===r.number&&(r.firstDate=S),S.month===r.number&&_.month!==r.number&&(r.lastDate=S);let b=v[C];b||(b=v[C]={}),b.date=S,b.context=Object.assign(b.context||{},{$implicit:S,date:S,data:E,currentMonth:r.number,currentYear:r.year,disabled:F,focused:!1,selected:!1,today:I}),b.tabindex=-1,b.ariaLabel=D,b.hidden=!1,t=_}m.number=e.getWeekNumber(v.map(C=>C.date),l),m.collapsed=u==="collapsed"&&v[0].date.month!==r.number&&v[v.length-1].date.month!==r.number}return r}function dye(e,t,n){let i=e.getDaysPerWeek(),r=new Xo(t.year,t.month,1),o=e.getWeekday(r)%i;return e.getPrev(r,"d",(i+o-n)%i)}var Hh=(()=>{class e{getMonthLabel(n){return`${this.getMonthFullName(n.month,n.year)} ${this.getYearNumerals(n.year)}`}getDayNumerals(n){return`${n.day}`}getWeekNumerals(n){return`${n}`}getYearNumerals(n){return`${n}`}getWeekLabel(){return""}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:()=>new hye,providedIn:"root"})}}return e})(),hye=(()=>{class e extends Hh{constructor(){super(...arguments),this._locale=Y(_0),this._monthsShort=B1(this._locale,Di.Standalone,Bt.Abbreviated),this._monthsFull=B1(this._locale,Di.Standalone,Bt.Wide)}getWeekdayLabel(n,i){let r=CA(this._locale,Di.Standalone,i===void 0?Bt.Short:i);return r.map((s,a)=>r[(a+1)%7])[n-1]||""}getMonthShortName(n){return this._monthsShort[n-1]||""}getMonthFullName(n){return this._monthsFull[n-1]||""}getDayAriaLabel(n){let i=new Date(n.year,n.month-1,n.day);return YH(i,"fullDate",this._locale)}static{this.\u0275fac=(()=>{let n;return function(r){return(n||(n=go(e)))(r||e)}})()}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac})}}return e})(),U3=(()=>{class e{constructor(){this._VALIDATORS={dayTemplateData:n=>{if(this._state.dayTemplateData!==n)return{dayTemplateData:n}},displayMonths:n=>{if(n=Sx(n),_o(n)&&n>0&&this._state.displayMonths!==n)return{displayMonths:n}},disabled:n=>{if(this._state.disabled!==n)return{disabled:n}},firstDayOfWeek:n=>{if(n=Sx(n),_o(n)&&n>=0&&this._state.firstDayOfWeek!==n)return{firstDayOfWeek:n}},focusVisible:n=>{if(this._state.focusVisible!==n&&!this._state.disabled)return{focusVisible:n}},markDisabled:n=>{if(this._state.markDisabled!==n)return{markDisabled:n}},maxDate:n=>{let i=this.toValidDate(n,null);if(Jg(this._state.maxDate,i))return{maxDate:i}},minDate:n=>{let i=this.toValidDate(n,null);if(Jg(this._state.minDate,i))return{minDate:i}},navigation:n=>{if(this._state.navigation!==n)return{navigation:n}},outsideDays:n=>{if(this._state.outsideDays!==n)return{outsideDays:n}},weekdays:n=>{let i=n===!0||n===!1?Bt.Short:n,r=n===!0||n===!1?n:!0;if(this._state.weekdayWidth!==i||this._state.weekdaysVisible!==r)return{weekdayWidth:i,weekdaysVisible:r}}},this._calendar=Y(Zy),this._i18n=Y(Hh),this._model$=new nt,this._dateSelect$=new nt,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:Bt.Short,weekdaysVisible:!0}}get model$(){return this._model$.pipe(xt(n=>n.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe(xt(n=>n!==null))}set(n){let i=Object.keys(n).map(r=>this._VALIDATORS[r](n[r])).reduce((r,o)=>B(B({},r),o),{});Object.keys(i).length>0&&this._nextState(i)}focus(n){let i=this.toValidDate(n,null);i!=null&&!this._state.disabled&&Jg(this._state.focusDate,i)&&this._nextState({focusDate:n})}focusSelect(){H3(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(n){let i=this.toValidDate(n,this._calendar.getToday());i!=null&&!this._state.disabled&&(!this._state.firstDate||A9(this._state.firstDate,i))&&this._nextState({firstDate:i})}select(n,i={}){let r=this.toValidDate(n,null);r!=null&&!this._state.disabled&&(Jg(this._state.selectedDate,r)&&this._nextState({selectedDate:r}),i.emitEvent&&H3(r,this._state)&&this._dateSelect$.next(r))}toValidDate(n,i){let r=Xo.from(n);return i===void 0&&(i=this._calendar.getToday()),this._calendar.isValid(r)?r:i}getMonth(n){for(let i of this._state.months)if(n.month===i.number&&n.year===i.year)return i;throw new Error(`month ${n.month} of year ${n.year} not found`)}_nextState(n){let i=this._updateState(n);this._patchContexts(i),this._state=i,this._model$.next(this._state)}_patchContexts(n){let{months:i,displayMonths:r,selectedDate:o,focusDate:s,focusVisible:a,disabled:l,outsideDays:c}=n;n.months.forEach(u=>{u.weeks.forEach(d=>{d.days.forEach(h=>{s&&(h.context.focused=s.equals(h.date)&&a),h.tabindex=!l&&s&&h.date.equals(s)&&s.month===u.number?0:-1,l===!0&&(h.context.disabled=!0),o!==void 0&&(h.context.selected=o!==null&&o.equals(h.date)),u.number!==h.date.month&&(h.hidden=c==="hidden"||c==="collapsed"||r>1&&h.date.after(i[0].firstDate)&&h.date.before(i[r-1].lastDate))})})})}_updateState(n){let i=Object.assign({},this._state,n),r=i.firstDate;if(("minDate"in n||"maxDate"in n)&&(rye(i.minDate,i.maxDate),i.focusDate=wx(i.focusDate,i.minDate,i.maxDate),i.firstDate=wx(i.firstDate,i.minDate,i.maxDate),r=i.focusDate),"disabled"in n&&(i.focusVisible=!1),"selectedDate"in n&&this._state.months.length===0&&(r=i.selectedDate),"focusVisible"in n||"focusDate"in n&&(i.focusDate=wx(i.focusDate,i.minDate,i.maxDate),r=i.focusDate,i.months.length!==0&&i.focusDate&&!i.focusDate.before(i.firstDate)&&!i.focusDate.after(i.lastDate)))return i;if("firstDate"in n&&(i.firstDate=wx(i.firstDate,i.minDate,i.maxDate),r=i.firstDate),r){let o="dayTemplateData"in n||"firstDayOfWeek"in n||"markDisabled"in n||"minDate"in n||"maxDate"in n||"disabled"in n||"outsideDays"in n||"weekdaysVisible"in n,s=cye(this._calendar,r,i,this._i18n,o);i.months=s,i.firstDate=s[0].firstDate,i.lastDate=s[s.length-1].lastDate,"selectedDate"in n&&!H3(i.selectedDate,i)&&(i.selectedDate=null),"firstDate"in n&&(!i.focusDate||i.focusDate.before(i.firstDate)||i.focusDate.after(i.lastDate))&&(i.focusDate=r);let a=!this._state.firstDate||this._state.firstDate.year!==i.firstDate.year,l=!this._state.firstDate||this._state.firstDate.month!==i.firstDate.month;i.navigation==="select"?(("minDate"in n||"maxDate"in n||i.selectBoxes.years.length===0||a)&&(i.selectBoxes.years=sye(i.firstDate,i.minDate,i.maxDate)),("minDate"in n||"maxDate"in n||i.selectBoxes.months.length===0||a)&&(i.selectBoxes.months=oye(this._calendar,i.firstDate,i.minDate,i.maxDate))):i.selectBoxes={years:[],months:[]},(i.navigation==="arrows"||i.navigation==="select")&&(l||a||"minDate"in n||"maxDate"in n||"disabled"in n)&&(i.prevDisabled=i.disabled||lye(this._calendar,i.firstDate,i.minDate),i.nextDisabled=i.disabled||aye(this._calendar,i.lastDate,i.maxDate))}return i}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac})}}return e})(),_x=function(e){return e[e.PREV=0]="PREV",e[e.NEXT=1]="NEXT",e}(_x||{}),fye=(()=>{class e{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays=Bt.Short}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function pye(){return new gye}var M9=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:()=>pye(),providedIn:"root"})}}return e})(),gye=(()=>{class e extends M9{fromModel(n){return n&&_o(n.year)&&_o(n.month)&&_o(n.day)?{year:n.year,month:n.month,day:n.day}:null}toModel(n){return n&&_o(n.year)&&_o(n.month)&&_o(n.day)?{year:n.year,month:n.month,day:n.day}:null}static{this.\u0275fac=(()=>{let n;return function(r){return(n||(n=go(e)))(r||e)}})()}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac})}}return e})(),So=function(e){return e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.ArrowLeft=37]="ArrowLeft",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowRight=39]="ArrowRight",e[e.ArrowDown=40]="ArrowDown",e}(So||{}),mye=(()=>{class e{processKey(n,i){let{state:r,calendar:o}=i;switch(n.which){case So.PageUp:i.focusDate(o.getPrev(r.focusedDate,n.shiftKey?"y":"m",1));break;case So.PageDown:i.focusDate(o.getNext(r.focusedDate,n.shiftKey?"y":"m",1));break;case So.End:i.focusDate(n.shiftKey?r.maxDate:r.lastDate);break;case So.Home:i.focusDate(n.shiftKey?r.minDate:r.firstDate);break;case So.ArrowLeft:i.focusDate(o.getPrev(r.focusedDate,"d",1));break;case So.ArrowUp:i.focusDate(o.getPrev(r.focusedDate,"d",o.getDaysPerWeek()));break;case So.ArrowRight:i.focusDate(o.getNext(r.focusedDate,"d",1));break;case So.ArrowDown:i.focusDate(o.getNext(r.focusedDate,"d",o.getDaysPerWeek()));break;case So.Enter:case So.Space:i.focusSelect();break;default:return}n.preventDefault(),n.stopPropagation()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),vye=(()=>{class e{constructor(){this.i18n=Y(Hh)}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=je({type:e,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(i,r){i&2&&vo("bg-primary",r.selected)("text-white",r.selected)("text-muted",r.isMuted())("outside",r.isMuted())("active",r.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},standalone:!0,features:[We],attrs:C0e,decls:1,vars:1,template:function(i,r){i&1&&ye(0),i&2&&er(r.i18n.getDayNumerals(r.date))},styles:[`[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-tertiary-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}
`],encapsulation:2,changeDetection:0})}}return e})(),yye=(()=>{class e{constructor(){this._month=-1,this._year=-1,this.i18n=Y(Hh),this.select=new Q}changeMonth(n){this.select.emit(new Xo(this.date.year,Sx(n),1))}changeYear(n){this.select.emit(new Xo(Sx(n),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this.monthSelect.nativeElement.value=`${this._month}`),this.date.year!==this._year&&(this._year=this.date.year,this.yearSelect.nativeElement.value=`${this._year}`))}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=je({type:e,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(i,r){if(i&1&&(fs(w0e,7,In),fs(b0e,7,In)),i&2){let o;yo(o=Co())&&(r.monthSelect=o.first),yo(o=Co())&&(r.yearSelect=o.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},standalone:!0,features:[We],decls:8,vars:2,consts:()=>{let n;n=$localize`:@@ngb.datepicker.select-month:Select month`;let i;i=$localize`:@@ngb.datepicker.select-month:Select month`;let r;r=$localize`:@@ngb.datepicker.select-year:Select year`;let o;return o=$localize`:@@ngb.datepicker.select-year:Select year`,[["month",""],["year",""],["aria-label",n,"title",i,1,"form-select",3,"change","disabled"],[3,"value"],["aria-label",r,"title",o,1,"form-select",3,"change","disabled"]]},template:function(i,r){if(i&1){let o=Tt();z(0,"select",2,0),be("change",function(a){return Ge(o),He(r.changeMonth(a.target.value))}),ru(2,S0e,2,3,"option",3,iu),H(),z(4,"select",4,1),be("change",function(a){return Ge(o),He(r.changeYear(a.target.value))}),ru(6,_0e,2,2,"option",3,iu),H()}i&2&&(ue("disabled",r.disabled),Z(2),ou(r.months),Z(2),ue("disabled",r.disabled),Z(2),ou(r.years))},styles:[`ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}
`],encapsulation:2,changeDetection:0})}}return e})(),Cye=(()=>{class e{constructor(){this.navigation=_x,this.i18n=Y(Hh),this.months=[],this.navigate=new Q,this.select=new Q}onClickPrev(n){n.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(n){n.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=je({type:e,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},standalone:!0,features:[We],decls:8,vars:4,consts:()=>{let n;n=$localize`:@@ngb.datepicker.previous-month:Previous month`;let i;i=$localize`:@@ngb.datepicker.previous-month:Previous month`;let r;r=$localize`:@@ngb.datepicker.next-month:Next month`;let o;return o=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow","ngb-dp-arrow-prev"],["type","button","aria-label",n,"title",i,1,"btn","btn-link","ngb-dp-arrow-btn",3,"click","disabled"],[1,"ngb-dp-navigation-chevron"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years"],[1,"ngb-dp-arrow","ngb-dp-arrow-next"],["type","button","aria-label",r,"title",o,1,"btn","btn-link","ngb-dp-arrow-btn",3,"click","disabled"],[1,"ngb-dp-navigation-select",3,"select","date","disabled","months","years"],[1,"ngb-dp-arrow"],[1,"ngb-dp-month-name"]]},template:function(i,r){i&1&&(z(0,"div",0)(1,"button",1),be("click",function(s){return r.onClickPrev(s)}),he(2,"span",2),H()(),Fe(3,E0e,1,4,"ngb-datepicker-navigation-select",3)(4,R0e,2,0),z(5,"div",4)(6,"button",5),be("click",function(s){return r.onClickNext(s)}),he(7,"span",2),H()()),i&2&&(Z(),ue("disabled",r.prevDisabled),Z(2),Vr(3,r.showSelect?3:-1),Z(),Vr(4,r.showSelect?-1:4),Z(2),ue("disabled",r.nextDisabled))},dependencies:[yye],styles:[`ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow-next{justify-content:flex-end}.ngb-dp-arrow-next .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}
`],encapsulation:2,changeDetection:0})}}return e})(),wye=(()=>{class e{constructor(){this.templateRef=Y(ra)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275dir=on({type:e,selectors:[["ng-template","ngbDatepickerContent",""]],standalone:!0})}}return e})(),bye=(()=>{class e{constructor(){this._keyboardService=Y(mye),this._service=Y(U3),this.i18n=Y(Hh),this.datepicker=Y(Y3)}set month(n){this.viewModel=this._service.getMonth(n)}onKeyDown(n){this._keyboardService.processKey(n,this.datepicker)}doSelect(n){!n.context.disabled&&!n.hidden&&this.datepicker.onDateSelect(n.date)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=je({type:e,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(i,r){i&1&&be("keydown",function(s){return r.onKeyDown(s)})},inputs:{month:"month"},standalone:!0,features:[We],decls:3,vars:1,consts:[["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["role","row",1,"ngb-dp-week"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"disabled","tabindex","hidden","ngb-dp-today"],["role","gridcell",1,"ngb-dp-day",3,"click","tabindex"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(i,r){i&1&&(Fe(0,A0e,4,1,"div",0),ru(1,L0e,1,1,null,null,iu)),i&2&&(Vr(0,r.viewModel.weekdays.length>0?0:-1),Z(),ou(r.viewModel.weeks))},dependencies:[bA],styles:[`ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-tertiary-bg)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}
`],encapsulation:2})}}return e})(),Y3=(()=>{class e{constructor(){this.injector=Y(bt),this._service=Y(U3),this._calendar=Y(Zy),this._i18n=Y(Hh),this._config=Y(fye),this._nativeElement=Y(In).nativeElement,this._ngbDateAdapter=Y(M9),this._ngZone=Y(De),this._destroyRef=Y(Mp),this._controlValue=null,this._publicState={},this.dayTemplate=this._config.dayTemplate,this.dayTemplateData=this._config.dayTemplateData,this.displayMonths=this._config.displayMonths,this.firstDayOfWeek=this._config.firstDayOfWeek,this.footerTemplate=this._config.footerTemplate,this.markDisabled=this._config.markDisabled,this.maxDate=this._config.maxDate,this.minDate=this._config.minDate,this.navigation=this._config.navigation,this.outsideDays=this._config.outsideDays,this.showWeekNumbers=this._config.showWeekNumbers,this.startDate=this._config.startDate,this.weekdays=this._config.weekdays,this.navigate=new Q,this.dateSelect=new Q,this.onChange=i=>{},this.onTouched=()=>{};let n=Y(Gr);this._service.dateSelect$.pipe(Wy()).subscribe(i=>{this.dateSelect.emit(i)}),this._service.model$.pipe(Wy()).subscribe(i=>{let r=i.firstDate,o=this.model?this.model.firstDate:null;this._publicState={maxDate:i.maxDate,minDate:i.minDate,firstDate:i.firstDate,lastDate:i.lastDate,focusedDate:i.focusDate,months:i.months.map(u=>u.firstDate)};let s=!1;if(!r.equals(o)&&(this.navigate.emit({current:o?{year:o.year,month:o.month}:null,next:{year:r.year,month:r.month},preventDefault:()=>s=!0}),s&&o!==null)){this._service.open(o);return}let a=i.selectedDate,l=i.focusDate,c=this.model?this.model.focusDate:null;this.model=i,Jg(a,this._controlValue)&&(this._controlValue=a,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(a))),Jg(l,c)&&c&&i.focusVisible&&this.focus(),n.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}get i18n(){return this._i18n}focusDate(n){this._service.focus(Xo.from(n))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe(Dt(1)).subscribe(()=>this._nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]')?.focus())}navigateTo(n){this._service.open(Xo.from(n?n.day?n:pe(B({},n),{day:1}):null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{let n=di(this._contentEl.nativeElement,"focusin"),i=di(this._contentEl.nativeElement,"focusout");zc(n,i).pipe(xt(r=>{let o=r.target,s=r.relatedTarget;return!(o?.classList.contains("ngb-dp-day")&&s?.classList.contains("ngb-dp-day")&&this._nativeElement.contains(o)&&this._nativeElement.contains(s))}),Wy(this._destroyRef)).subscribe(({type:r})=>this._ngZone.run(()=>this._service.set({focusVisible:r==="focusin"})))})}ngOnInit(){if(this.model===void 0){let n={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(i=>n[i]=this[i]),this._service.set(n),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(n){let i={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(r=>r in n).forEach(r=>i[r]=this[r]),this._service.set(i),"startDate"in n){let{currentValue:r,previousValue:o}=n.startDate;A9(o,r)&&this.navigateTo(this.startDate)}}onDateSelect(n){this._service.focus(n),this._service.select(n,{emitEvent:!0})}onNavigateDateSelect(n){this._service.open(n)}onNavigateEvent(n){switch(n){case _x.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case _x.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1));break}}registerOnChange(n){this.onChange=n}registerOnTouched(n){this.onTouched=n}setDisabledState(n){this._service.set({disabled:n})}writeValue(n){this._controlValue=Xo.from(this._ngbDateAdapter.fromModel(n)),this._service.select(this._controlValue)}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=je({type:e,selectors:[["ngb-datepicker"]],contentQueries:function(i,r,o){if(i&1&&rA(o,wye,7),i&2){let s;yo(s=Co())&&(r.contentTemplateFromContent=s.first)}},viewQuery:function(i,r){if(i&1&&(fs(V0e,7),fs(B0e,7)),i&2){let o;yo(o=Co())&&(r._defaultDayTemplate=o.first),yo(o=Co())&&(r._contentEl=o.first)}},hostVars:2,hostBindings:function(i,r){i&2&&vo("disabled",r.model.disabled)},inputs:{contentTemplate:"contentTemplate",dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],standalone:!0,features:[Br([{provide:Yl,useExisting:Lo(()=>e),multi:!0},U3]),Vn,We],decls:10,vars:9,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],["content",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes"],[1,"ngb-dp-content"],[3,"ngTemplateOutlet","ngTemplateOutletContext","ngTemplateOutletInjector"],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],[1,"ngb-dp-month"],[1,"ngb-dp-month-name"],[3,"month"],[3,"navigate","select","date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes"]],template:function(i,r){if(i&1&&(Fe(0,H0e,1,5,"ng-template",null,0,tr)(2,j0e,2,0,"ng-template",null,1,tr),z(4,"div",3),Fe(5,W0e,1,7,"ngb-datepicker-navigation",4),H(),z(6,"div",5,2),Fe(8,q0e,0,0,"ng-template",6),H(),Fe(9,K0e,0,0,"ng-template",7)),i&2){let o=Ka(3);Z(5),Vr(5,r.navigation!=="none"?5:-1),Z(),vo("ngb-dp-months",!r.contentTemplate),Z(2),ue("ngTemplateOutlet",r.contentTemplate||(r.contentTemplateFromContent==null?null:r.contentTemplateFromContent.templateRef)||o)("ngTemplateOutletContext",Np(7,G0e,r))("ngTemplateOutletInjector",r.injector),Z(),ue("ngTemplateOutlet",r.footerTemplate)}},dependencies:[bA,vye,bye,Cye],styles:[`ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-tertiary-bg)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-tertiary-bg)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}
`],encapsulation:2,changeDetection:0})}}return e})(),bx=(e,t)=>t?t.some(n=>n.contains(e)):!1,E9=(e,t)=>!t||$0e(e,t)!=null,Sye=(()=>{let e=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,t=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(e()||t()):!1})(),_ye=e=>Sye?()=>setTimeout(()=>e(),100):e;function Eye(e,t,n,i,r,o,s,a){n&&e.runOutsideAngular(_ye(()=>{let l=h=>{let p=h.target;return h.button===2||bx(p,s)?!1:n==="inside"?bx(p,o)&&E9(p,a):n==="outside"?!bx(p,o):E9(p,a)||!bx(p,o)},c=di(t,"keydown").pipe(mn(r),xt(h=>h.which===So.Escape),nn(h=>h.preventDefault())),u=di(t,"mousedown").pipe(ae(l),mn(r)),d=di(t,"mouseup").pipe(Jv(u),xt(([h,p])=>p),Zv(0),mn(r));cS([c.pipe(ae(h=>0)),d.pipe(ae(h=>1))]).subscribe(h=>e.run(()=>i(h)))}))}var xye=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function P9(e){let t=Array.from(e.querySelectorAll(xye)).filter(n=>n.tabIndex!==-1);return[t[0],t[t.length-1]]}var Dye=(e,t,n,i=!1)=>{e.runOutsideAngular(()=>{let r=di(t,"focusin").pipe(mn(n),ae(o=>o.target));di(t,"keydown").pipe(mn(n),xt(o=>o.which===So.Tab),Jv(r)).subscribe(([o,s])=>{let[a,l]=P9(t);(s===a||s===t)&&o.shiftKey&&(l.focus(),o.preventDefault()),s===l&&!o.shiftKey&&(a.focus(),o.preventDefault())}),i&&di(t,"click").pipe(mn(n),Jv(r),ae(o=>o[1])).subscribe(o=>o.focus())})},Tye=(()=>{class e{constructor(){this._element=Y(fi).documentElement}isRTL(){return(this._element.getAttribute("dir")||"").toLowerCase()==="rtl"}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Rye=/\s+/,Iye=/  +/gi,Fye={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]};function Aye(e,t){let[n,i]=Fye[e];return t&&i||n}var Mye=/^left/,Pye=/^right/,kye=/^start/,Oye=/^end/;function Nye(e,t){let[n,i]=t.split("-"),r=n.replace(Mye,"start").replace(Pye,"end"),o=[r];if(i){let s=i;(n==="left"||n==="right")&&(s=s.replace(kye,"top").replace(Oye,"bottom")),o.push(`${r}-${s}`)}return e&&(o=o.map(s=>`${e}-${s}`)),o.join(" ")}function x9({placement:e,baseClass:t},n){let i=Array.isArray(e)?e:e.split(Rye),r=["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"],o=i.findIndex(c=>c==="auto");o>=0&&r.forEach(function(c){i.find(u=>u.search("^"+c)!==-1)==null&&i.splice(o++,1,c)});let s=i.map(c=>Aye(c,n.isRTL()));return{placement:s.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!t,phase:"write",fn({state:c}){let u=new RegExp(t+"(-[a-z]+)*","gi"),d=c.elements.popper,h=c.placement,p=d.className;p=p.replace(u,""),p+=` ${Nye(t,h)}`,p=p.trim().replace(Iye," "),d.className=p}},F3,P3,x3,{enabled:!0,name:"flip",options:{fallbackPlacements:s}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function D9(e){return e}function Lye(){let e=Y(Tye),t=null;return{createPopper(n){if(!t){let r=(n.updatePopperOptions||D9)(x9(n,e));t=G3(n.hostElement,n.targetElement,r)}},update(){t&&t.update()},setOptions(n){if(t){let r=(n.updatePopperOptions||D9)(x9(n,e));t.setOptions(r)}},destroy(){t&&(t.destroy(),t=null)}}}function Vye(e){return t=>(t.modifiers.push(A3,{name:"offset",options:{offset:()=>e}}),t)}var hZe=new Date(1882,10,12),fZe=new Date(2174,10,25);var pZe=1e3*60*60*24;var Q3=1080,Bye=24*Q3,Gye=12*Q3+793,gZe=29*Bye+Gye,mZe=11*Q3+204;var Hye=(()=>{class e{constructor(){this._ngbConfig=Y(I9),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(n){this._animation=n}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),lc=class{constructor(t,n,i){this.nodes=t,this.viewRef=n,this.componentRef=i}},j3=class{constructor(t){this._componentType=t,this._windowRef=null,this._contentRef=null,this._document=Y(fi),this._applicationRef=Y(Uo),this._injector=Y(bt),this._viewContainerRef=Y(Go),this._ngZone=Y(De)}open(t,n,i=!1){this._windowRef||(this._contentRef=this._getContentRef(t,n),this._windowRef=this._viewContainerRef.createComponent(this._componentType,{injector:this._injector,projectableNodes:this._contentRef.nodes}));let{nativeElement:r}=this._windowRef.location,o=this._ngZone.onStable.pipe(Dt(1),un(()=>ac(this._ngZone,r,({classList:s})=>s.add("show"),{animation:i,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:o}}close(t=!1){return this._windowRef?ac(this._ngZone,this._windowRef.location.nativeElement,({classList:n})=>n.remove("show"),{animation:t,runningTransition:"stop"}).pipe(nn(()=>{this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),this._contentRef?.viewRef&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):se(void 0)}_getContentRef(t,n){if(t)if(t instanceof ra){let i=t.createEmbeddedView(n);return this._applicationRef.attachView(i),new lc([i.rootNodes],i)}else return new lc([[this._document.createTextNode(`${t}`)]]);else return new lc([])}},zye=(()=>{class e{constructor(){this._document=Y(fi)}hide(){let n=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:o,paddingRight:s}=r;if(n>0){let a=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${a+n}px`}return r.overflow="hidden",()=>{n>0&&(r.paddingRight=s),r.overflow=o}}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Uye=(()=>{class e{constructor(){this._nativeElement=Y(In).nativeElement,this._zone=Y(De)}ngOnInit(){this._zone.onStable.asObservable().pipe(Dt(1)).subscribe(()=>{ac(this._zone,this._nativeElement,(n,i)=>{i&&F9(n),n.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return ac(this._zone,this._nativeElement,({classList:n})=>n.remove("show"),{animation:this.animation,runningTransition:"stop"})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=je({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(i,r){i&2&&(Ji("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),vo("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[We],decls:0,vars:0,template:function(i,r){},encapsulation:2})}}return e})(),Ex=class{update(t){}close(t){}dismiss(t){}},jye=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],Wye=["animation","backdropClass"],W3=class{_applyWindowOptions(t,n){jye.forEach(i=>{z3(n[i])&&(t[i]=n[i])})}_applyBackdropOptions(t,n){Wye.forEach(i=>{z3(n[i])&&(t[i]=n[i])})}update(t){this._applyWindowOptions(this._windowCmptRef.instance,t),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,t)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(mn(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(mn(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(t,n,i,r){this._windowCmptRef=t,this._contentRef=n,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new nt,this._dismissed=new nt,this._hidden=new nt,t.instance.dismissEvent.subscribe(o=>{this.dismiss(o)}),this.result=new Promise((o,s)=>{this._resolve=o,this._reject=s}),this.result.then(null,()=>{})}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(t);else{let n=this._beforeDismiss();X0e(n)?n.then(i=>{i!==!1&&this._dismiss(t)},()=>{}):n!==!1&&this._dismiss(t)}}_removeModalElements(){let t=this._windowCmptRef.instance.hide(),n=this._backdropCmptRef?this._backdropCmptRef.instance.hide():se(void 0);t.subscribe(()=>{let{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),n.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Xv(t,n).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},q3=function(e){return e[e.BACKDROP_CLICK=0]="BACKDROP_CLICK",e[e.ESC=1]="ESC",e}(q3||{}),qye=(()=>{class e{constructor(){this._document=Y(fi),this._elRef=Y(In),this._zone=Y(De),this._closed$=new nt,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new Q,this.shown=new nt,this.hidden=new nt}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":K3(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(n){this.dismissEvent.emit(n)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Dt(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:n}=this._elRef,i={animation:this.animation,runningTransition:"stop"},r=ac(this._zone,n,()=>n.classList.remove("show"),i),o=ac(this._zone,this._dialogEl.nativeElement,()=>{},i),s=Xv(r,o);return s.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),s}_show(){let n={animation:this.animation,runningTransition:"continue"},i=ac(this._zone,this._elRef.nativeElement,(o,s)=>{s&&F9(o),o.classList.add("show")},n),r=ac(this._zone,this._dialogEl.nativeElement,()=>{},n);Xv(i,r).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:n}=this._elRef;this._zone.runOutsideAngular(()=>{di(n,"keydown").pipe(mn(this._closed$),xt(r=>r.which===So.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(q3.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let i=!1;di(this._dialogEl.nativeElement,"mousedown").pipe(mn(this._closed$),nn(()=>i=!1),Ne(()=>di(n,"mouseup").pipe(mn(this._closed$),Dt(1))),xt(({target:r})=>n===r)).subscribe(()=>{i=!0}),di(n,"click").pipe(mn(this._closed$)).subscribe(({target:r})=>{n===r&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!i&&this._zone.run(()=>this.dismiss(q3.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:n}=this._elRef;if(!n.contains(document.activeElement)){let i=n.querySelector("[ngbAutofocus]"),r=P9(n)[0];(i||r||n).focus()}}_restoreFocus(){let n=this._document.body,i=this._elWithFocus,r;i&&i.focus&&n.contains(i)?r=i:r=n,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&ac(this._zone,this._elRef.nativeElement,({classList:n})=>(n.add("modal-static"),()=>n.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=je({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(i,r){if(i&1&&fs(Y0e,7),i&2){let o;yo(o=Co())&&(r._dialogEl=o.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(i,r){i&2&&(zl("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),Ji("modal d-block"+(r.windowClass?" "+r.windowClass:"")),vo("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[We],ngContentSelectors:T9,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(i,r){i&1&&(nA(),z(0,"div",1,0)(2,"div",2),iA(3),H()()),i&2&&Ji("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2})}}return e})(),Kye=(()=>{class e{constructor(){this._applicationRef=Y(Uo),this._injector=Y(bt),this._environmentInjector=Y(Or),this._document=Y(fi),this._scrollBar=Y(zye),this._activeWindowCmptHasChanged=new nt,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new Q;let n=Y(De);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let i=this._windowCmpts[this._windowCmpts.length-1];Dye(n,i.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(i.location.nativeElement)}})}_restoreScrollBar(){let n=this._scrollBarRestoreFn;n&&(this._scrollBarRestoreFn=null,n())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(n,i,r){let o=r.container instanceof HTMLElement?r.container:z3(r.container)?this._document.querySelector(r.container):this._document.body;if(!o)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let s=new Ex;n=r.injector||n;let a=n.get(Or,null)||this._environmentInjector,l=this._getContentRef(n,a,i,s,r),c=r.backdrop!==!1?this._attachBackdrop(o):void 0,u=this._attachWindowComponent(o,l.nodes),d=new W3(u,l,c,r.beforeDismiss);return this._registerModalRef(d),this._registerWindowCmpt(u),d.hidden.pipe(Dt(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),s.close=h=>{d.close(h)},s.dismiss=h=>{d.dismiss(h)},s.update=h=>{d.update(h)},d.update(r),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),c&&c.instance&&c.changeDetectorRef.detectChanges(),u.changeDetectorRef.detectChanges(),d}get activeInstances(){return this._activeInstances}dismissAll(n){this._modalRefs.forEach(i=>i.dismiss(n))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(n){let i=D1(Uye,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(i.hostView),n.appendChild(i.location.nativeElement),i}_attachWindowComponent(n,i){let r=D1(qye,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:i});return this._applicationRef.attachView(r.hostView),n.appendChild(r.location.nativeElement),r}_getContentRef(n,i,r,o,s){return r?r instanceof ra?this._createFromTemplateRef(r,o):K3(r)?this._createFromString(r):this._createFromComponent(n,i,r,o,s):new lc([])}_createFromTemplateRef(n,i){let r={$implicit:i,close(s){i.close(s)},dismiss(s){i.dismiss(s)}},o=n.createEmbeddedView(r);return this._applicationRef.attachView(o),new lc([o.rootNodes],o)}_createFromString(n){let i=this._document.createTextNode(`${n}`);return new lc([[i]])}_createFromComponent(n,i,r,o,s){let a=bt.create({providers:[{provide:Ex,useValue:o}],parent:n}),l=D1(r,{environmentInjector:i,elementInjector:a}),c=l.location.nativeElement;return s.scrollable&&c.classList.add("component-host-scrollable"),this._applicationRef.attachView(l.hostView),new lc([[c]],l.hostView,l)}_setAriaHidden(n){let i=n.parentElement;i&&n!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==n&&r.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((n,i)=>{n?i.setAttribute("aria-hidden",n):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(n){let i=()=>{let r=this._modalRefs.indexOf(n);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(n),this._activeInstances.emit(this._modalRefs),n.result.then(i,i)}_registerWindowCmpt(n){this._windowCmpts.push(n),this._activeWindowCmptHasChanged.next(),n.onDestroy(()=>{let i=this._windowCmpts.indexOf(n);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),em=(()=>{class e{constructor(){this._injector=Y(bt),this._modalStack=Y(Kye),this._config=Y(Hye)}open(n,i={}){let r=B(pe(B({},this._config),{animation:this._config.animation}),i);return this._modalStack.open(this._injector,n,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(n){this._modalStack.dismissAll(n)}hasOpenModals(){return this._modalStack.hasOpenModals()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Yye={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]};function Qye(e){let t=(e||"").trim();if(t.length===0)return[];let n=t.split(/\s+/).map(r=>r.split(":")).map(r=>Yye[r[0]]||r),i=n.filter(r=>r.includes("manual"));if(i.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(i.length===1&&n.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return i.length?[]:n}function Xye(e,t,n,i,r,o=0,s=0){let a=Qye(t);if(a.length===0)return()=>{};let l=new Set,c=[],u;function d(p,g){e.addEventListener(p,g),c.push(()=>e.removeEventListener(p,g))}function h(p,g){clearTimeout(u),g>0?u=setTimeout(p,g):p()}for(let[p,g]of a)g?(d(p,()=>{l.add(p),h(()=>l.size>0&&i(),o)}),d(g,()=>{l.delete(p),h(()=>l.size===0&&r(),s)})):d(p,()=>n()?h(r,s):h(i,o));return()=>c.forEach(p=>p())}var $ye=(()=>{class e{constructor(){this._ngbConfig=Y(I9),this.autoClose=!0,this.placement="auto",this.popperOptions=n=>n,this.triggers="hover focus",this.disableTooltip=!1,this.openDelay=0,this.closeDelay=0}get animation(){return this._animation??this._ngbConfig.animation}set animation(n){this._animation=n}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Zye=0,Jye=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=je({type:e,selectors:[["ngb-tooltip-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(i,r){i&2&&(tA("id",r.id),Ji("tooltip"+(r.tooltipClass?" "+r.tooltipClass:"")),vo("fade",r.animation))},inputs:{animation:"animation",id:"id",tooltipClass:"tooltipClass"},standalone:!0,features:[We],ngContentSelectors:T9,decls:3,vars:0,consts:[["data-popper-arrow","",1,"tooltip-arrow"],[1,"tooltip-inner"]],template:function(i,r){i&1&&(nA(),he(0,"div",0),z(1,"div",1),iA(2),H())},styles:[`ngb-tooltip-window{pointer-events:none;position:absolute}ngb-tooltip-window .tooltip-inner{pointer-events:auto}ngb-tooltip-window.bs-tooltip-top,ngb-tooltip-window.bs-tooltip-bottom{padding-left:0;padding-right:0}ngb-tooltip-window.bs-tooltip-start,ngb-tooltip-window.bs-tooltip-end{padding-top:0;padding-bottom:0}
`],encapsulation:2,changeDetection:0})}}return e})(),xx=(()=>{class e{constructor(){this._config=Y($ye),this.animation=this._config.animation,this.autoClose=this._config.autoClose,this.placement=this._config.placement,this.popperOptions=this._config.popperOptions,this.triggers=this._config.triggers,this.container=this._config.container,this.disableTooltip=this._config.disableTooltip,this.tooltipClass=this._config.tooltipClass,this.openDelay=this._config.openDelay,this.closeDelay=this._config.closeDelay,this.shown=new Q,this.hidden=new Q,this._nativeElement=Y(In).nativeElement,this._ngZone=Y(De),this._document=Y(fi),this._changeDetector=Y(Gr),this._ngbTooltipWindowId=`ngb-tooltip-${Zye++}`,this._popupService=new j3(Jye),this._windowRef=null,this._positioning=Lye()}set ngbTooltip(n){this._ngbTooltip=n,!n&&this._windowRef&&this.close()}get ngbTooltip(){return this._ngbTooltip}open(n){if(!this._windowRef&&this._ngbTooltip&&!this.disableTooltip){let{windowRef:i,transition$:r}=this._popupService.open(this._ngbTooltip,n??this.tooltipContext,this.animation);this._windowRef=i,this._windowRef.setInput("animation",this.animation),this._windowRef.setInput("tooltipClass",this.tooltipClass),this._windowRef.setInput("id",this._ngbTooltipWindowId),this._getPositionTargetElement().setAttribute("aria-describedby",this._ngbTooltipWindowId),this.container==="body"&&this._document.body.appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._getPositionTargetElement(),targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:this.container==="body",baseClass:"bs-tooltip",updatePopperOptions:o=>this.popperOptions(Vye([0,6])(o))}),Promise.resolve().then(()=>{this._positioning.update(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positioning.update())})}),Eye(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement],[this._nativeElement]),r.subscribe(()=>this.shown.emit())}}close(n=this.animation){this._windowRef!=null&&(this._getPositionTargetElement().removeAttribute("aria-describedby"),this._popupService.close(n).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return this._windowRef!=null}ngOnInit(){this._unregisterListenersFn=Xye(this._nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({tooltipClass:n}){n&&this.isOpen()&&this._windowRef.setInput("tooltipClass",n.currentValue)}ngOnDestroy(){this.close(!1),this._unregisterListenersFn?.()}_getPositionTargetElement(){return(K3(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget)||this._nativeElement}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275dir=on({type:e,selectors:[["","ngbTooltip",""]],inputs:{animation:"animation",autoClose:"autoClose",placement:"placement",popperOptions:"popperOptions",triggers:"triggers",positionTarget:"positionTarget",container:"container",disableTooltip:"disableTooltip",tooltipClass:"tooltipClass",tooltipContext:"tooltipContext",openDelay:"openDelay",closeDelay:"closeDelay",ngbTooltip:"ngbTooltip"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbTooltip"],standalone:!0,features:[Vn]})}}return e})(),k9=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=Zi({type:e})}static{this.\u0275inj=$i({})}}return e})();var vZe=new ce("live announcer delay",{providedIn:"root",factory:()=>100});function eCe(e,t){if(e&1){let n=Tt();Ho(0),z(1,"div",2),be("click",function(){let r=Ge(n).$implicit;return He(r.action())}),he(2,"i"),H(),zo()}if(e&2){let n=t.$implicit;Z(),Ji(n.icon==="flex-grow-spacer"?"flex-grow-spacer":"sidebar-item"),ue("ngbTooltip",n.label),Z(),Ji(n.icon)}}var O9=(()=>{class e{constructor(){this.sidebarItems=[]}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=je({type:e,selectors:[["app-sidebar"]],inputs:{sidebarItems:"sidebarItems"},standalone:!0,features:[We],decls:2,vars:1,consts:[[1,"sidebar"],[4,"ngFor","ngForOf"],["placement","right",3,"click","ngbTooltip"]],template:function(i,r){i&1&&(z(0,"div",0),Fe(1,eCe,3,5,"ng-container",1),H()),i&2&&(Z(),ue("ngForOf",r.sidebarItems))},dependencies:[_n,gs,k9,xx],styles:[".sidebar[_ngcontent-%COMP%]{width:60px;height:100vh;background-color:#1f1f1f;display:flex;flex-direction:column;align-items:center;padding:10px 0;position:fixed;left:0;top:0}.sidebar-item[_ngcontent-%COMP%]{width:100%;padding:15px 0;display:flex;justify-content:center;align-items:center;cursor:pointer;color:#ccc}.sidebar-item[_ngcontent-%COMP%]:hover{background-color:#333}.flex-grow-spacer[_ngcontent-%COMP%]{flex-grow:1}.icon[_ngcontent-%COMP%]{font-size:24px;color:#ccc}.icon[_ngcontent-%COMP%]:hover{color:#fff}"]})}}return e})();var tm=(()=>{class e{constructor(){this.dateRangeSubject=new jt(null),this.dateRange$=this.dateRangeSubject.asObservable()}setDateRange(n){this.dateRangeSubject.next(n)}clearDateRange(){this.dateRangeSubject.next(null)}getDateRange(){return this.dateRange$}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function tCe(e,t){if(e&1){let n=Tt();z(0,"span",13),be("mouseenter",function(){let r=Ge(n).$implicit,o=Se();return He(o.hoveredDate=r)})("mouseleave",function(){Ge(n);let r=Se();return He(r.hoveredDate=null)}),ye(1),H()}if(e&2){let n=t.$implicit,i=t.focused,r=Se();vo("focused",i)("range",r.isRange(n))("faded",r.isHovered(n)||r.isInside(n)),Z(),qn(" ",n.day," ")}}var Dx=(()=>{class e{constructor(n,i){this.calendar=n,this.dateSelectorService=i,this.hoveredDate=null,this.fromDate=null,this.toDate=null,this.startDate=this.calendar.getToday(),this.dateSelectorService.dateRange$.subscribe(r=>{r&&r.from&&r.to?(this.fromDate=this.convertDateToNgbDate(r.from),this.toDate=this.convertDateToNgbDate(r.to)):(this.fromDate=null,this.toDate=null),this.updateStartDate()})}onDateSelection(n){let i=this.fromDate?this.convertNgbDateToDate(this.fromDate):null,r=this.toDate?this.convertNgbDateToDate(this.toDate):null;!this.fromDate&&!this.toDate?(this.fromDate=n,i=this.convertNgbDateToDate(this.fromDate)):this.fromDate&&!this.toDate&&n.after(this.fromDate)?(this.toDate=n,r=this.convertNgbDateToDate(this.toDate)):(this.toDate=null,r=null,this.fromDate=n,i=this.convertNgbDateToDate(this.fromDate)),i&&r&&this.dateSelectorService.setDateRange({from:i,to:r})}selectRange(n){let i=new Date,r=null,o=null;switch(n){case"thisWeek":r=this.getStartOfWeek(i),o=new Date(r),o.setDate(r.getDate()+6);break;case"lastWeek":let s=this.getStartOfWeek(i);o=new Date(s),o.setDate(s.getDate()-1),r=new Date(o),r.setDate(o.getDate()-6);break;case"thisMonth":r=new Date(i.getFullYear(),i.getMonth(),1),o=this.getLastDayOfCurrentMonth();break;case"lastMonth":r=new Date(i.getFullYear(),i.getMonth()-1,1),o=new Date(i.getFullYear(),i.getMonth(),0);break;case"thisYear":r=new Date(i.getFullYear(),0,1),o=this.getLastDayOfCurrentYear();break;case"lastYear":r=new Date(i.getFullYear()-1,0,1),o=new Date(i.getFullYear()-1,11,31);break;case"clear":this.clearDateRange();break;default:return}r&&o&&(this.fromDate=this.convertDateToNgbDate(r),this.toDate=this.convertDateToNgbDate(o),this.dateSelectorService.setDateRange({from:r,to:o}),this.updateStartDate())}getStartOfWeek(n){let i=n.getDay(),r=n.getDate()-i+(i===0?-6:1);return new Date(n.setDate(r))}clearDateRange(){this.dateSelectorService.clearDateRange()}getLastDayOfCurrentMonth(){let n=new Date;return new Date(n.getFullYear(),n.getMonth()+1,0)}getLastDayOfCurrentYear(){let n=new Date;return new Date(n.getFullYear(),11,31)}convertNgbDateToDate(n){return new Date(n.year,n.month-1,n.day)}convertDateToNgbDate(n){return new Xo(n.getFullYear(),n.getMonth()+1,n.getDate())}isHovered(n){return this.fromDate&&!this.toDate&&this.hoveredDate&&n.after(this.fromDate)&&n.before(this.hoveredDate)}isInside(n){return this.toDate&&n.after(this.fromDate)&&n.before(this.toDate)}isRange(n){return n.equals(this.fromDate)||this.toDate&&n.equals(this.toDate)||this.isInside(n)||this.isHovered(n)}updateStartDate(){this.fromDate?this.startDate=this.fromDate:this.startDate=this.calendar.getToday()}static{this.\u0275fac=function(i){return new(i||e)(J(Zy),J(tm))}}static{this.\u0275cmp=je({type:e,selectors:[["app-date-selector"]],standalone:!0,features:[We],decls:25,vars:3,consts:[["dp",""],["t",""],[1,"container"],[1,"row","d-flex"],[1,"col-12","col-md-6"],[1,"row"],["outsideDays","hidden",3,"dateSelect","startDate","displayMonths","dayTemplate"],[1,"date-selector"],[1,"d-md-none"],[1,"col-12","col-md-6","d-flex","justify-content-center","align-items-center"],[1,"row","d-flex","justify-content-center","align-items-center","pe-2","pe-md-0"],[1,"btn","btn-sm","btn-warning","col-5","m-1",3,"click"],[1,"btn","btn-sm","col-5","m-1","bg-danger",3,"click"],[1,"custom-day",3,"mouseenter","mouseleave"]],template:function(i,r){if(i&1){let o=Tt();z(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"ngb-datepicker",6,0),be("dateSelect",function(a){return Ge(o),He(r.onDateSelection(a))}),H(),Fe(6,tCe,2,7,"ng-template",7,1,tr),H(),he(8,"hr",8),H(),z(9,"div",9)(10,"div",10)(11,"button",11),be("click",function(){return Ge(o),He(r.selectRange("thisWeek"))}),ye(12," This Week "),H(),z(13,"button",11),be("click",function(){return Ge(o),He(r.selectRange("lastWeek"))}),ye(14," Last Week "),H(),z(15,"button",11),be("click",function(){return Ge(o),He(r.selectRange("thisMonth"))}),ye(16," This Month "),H(),z(17,"button",11),be("click",function(){return Ge(o),He(r.selectRange("lastMonth"))}),ye(18," Last Month "),H(),z(19,"button",11),be("click",function(){return Ge(o),He(r.selectRange("thisYear"))}),ye(20," This Year "),H(),z(21,"button",11),be("click",function(){return Ge(o),He(r.selectRange("lastYear"))}),ye(22," Last Year "),H(),z(23,"button",12),be("click",function(){return Ge(o),He(r.selectRange("clear"))}),ye(24," Clear "),H()()()()()}if(i&2){let o=Ka(7);Z(4),ue("startDate",r.startDate)("displayMonths",1)("dayTemplate",o)}},dependencies:[Y3],styles:[".custom-day[_ngcontent-%COMP%]{text-align:center;padding:.185rem .25rem;display:inline-block;height:2rem;width:2rem}.custom-day.focused[_ngcontent-%COMP%]{background-color:#e6e6e6}.custom-day.range[_ngcontent-%COMP%], .custom-day[_ngcontent-%COMP%]:hover{background-color:#0275d8;color:#fff}.custom-day.faded[_ngcontent-%COMP%]{background-color:#0275d880}"]})}}return e})();function nCe(e,t){if(e&1){let n=Tt();Ho(0),z(1,"div",3),be("click",function(){let r=Ge(n).$implicit;return He(r.action())}),he(2,"i"),H(),zo()}if(e&2){let n=t.$implicit;Z(),Ji(n.icon==="flex-grow-spacer"?"flex-grow-spacer":"topbar-item"),ue("ngbTooltip",n.label),Z(),Ji(n.icon)}}function iCe(e,t){if(e&1){let n=Tt();z(0,"div",4),be("click",function(){Ge(n);let r=Se();return He(r.preventCloseOnClick())}),he(1,"app-date-selector"),H()}}var N9=(()=>{class e{constructor(n,i,r){this.router=n,this.dateSelectorService=i,this.renderer=r,this.showSidebar=!1,this.topbarItems=[{label:"",icon:"bi bi-three-dots-vertical",action:()=>{this.showSidebar=!this.showSidebar,this.toggleSidebar.emit(this.showSidebar)}},{label:"",icon:"flex-grow-spacer",action:()=>{}},{label:"",icon:"bi bi-calendar-fill",action:()=>{this.toggleDateSelector(),this.preventCloseOnClick()}}],this.toggleSidebar=new Q,this.showDateSelector=!1,this.dateSelectorClicked=!1,this.dateSelectorService.dateRange$.subscribe(()=>{this.showDateSelector=!1}),this.renderer.listen("window","click",o=>{this.dateSelectorClicked||(this.showDateSelector=!1),this.dateSelectorClicked=!1})}toggleDateSelector(){this.showDateSelector=!this.showDateSelector}preventCloseOnClick(){this.dateSelectorClicked=!0}static{this.\u0275fac=function(i){return new(i||e)(J(pi),J(tm),J(Lr))}}static{this.\u0275cmp=je({type:e,selectors:[["app-topbar"]],inputs:{showSidebar:"showSidebar",topbarItems:"topbarItems"},outputs:{toggleSidebar:"toggleSidebar"},standalone:!0,features:[We],decls:3,vars:2,consts:[[1,"topbar"],[4,"ngFor","ngForOf"],["class","date-selector-container-mobile d-flex justify-content-center align-items-center position-absolute",3,"click",4,"ngIf"],["placement","bottom",3,"click","ngbTooltip"],[1,"date-selector-container-mobile","d-flex","justify-content-center","align-items-center","position-absolute",3,"click"]],template:function(i,r){i&1&&(z(0,"div",0),Fe(1,nCe,3,5,"ng-container",1),H(),Fe(2,iCe,2,0,"div",2)),i&2&&(Z(),ue("ngForOf",r.topbarItems),Z(),ue("ngIf",r.showDateSelector))},dependencies:[_n,gs,Gi,xx,Dx],styles:[".topbar[_ngcontent-%COMP%]{height:60px;width:100vw;background-color:#1f1f1f;display:flex;justify-content:flex-start;align-items:center;padding:0 20px;position:fixed;top:0;z-index:1000}.topbar-item[_ngcontent-%COMP%]{padding:15px;display:flex;justify-content:center;align-items:center;cursor:pointer;color:#ccc;z-index:1001}.topbar-item[_ngcontent-%COMP%]:hover{background-color:#333}.flex-grow-spacer[_ngcontent-%COMP%]{flex-grow:1}"]})}}return e})();var rCe=e=>({"dim-content":e});function oCe(e,t){if(e&1){let n=Tt();z(0,"aside",7),be("click",function(){Ge(n);let r=Se();return He(r.preventCloseOnClick())}),he(1,"app-sidebar",2),H()}if(e&2){let n=Se();Z(),ue("sidebarItems",n.sidebarContent)}}var L9=(()=>{class e{constructor(n,i,r){this.renderer=n,this.authService=i,this.router=r,this.showSidebar=!1,this.mobileSidebarTogglerClicked=!1,this.sidebarContent=[{label:"Dashboard",icon:"bi bi-house",action:()=>{this.router.navigateByUrl("/dashboard")}},{label:"Profile",icon:"bi bi-person",action:()=>{this.router.navigateByUrl("/profile")}},{label:"Settings",icon:"bi bi-gear",action:()=>{this.router.navigateByUrl("/settings")}},{label:"",icon:"flex-grow-spacer",action:()=>{}},{label:"Logout",icon:"bi bi-box-arrow-right",action:()=>{this.logout()}}],this.handleAdminUser(),this.renderer.listen("window","click",o=>{this.mobileSidebarTogglerClicked||(this.showSidebar=!1),this.mobileSidebarTogglerClicked=!1})}handleAdminUser(){this.authService.currentUser$.subscribe(n=>{if(n&&n.isAdmin){if(this.sidebarContent.some(r=>r.label==="Form Filler"))return;this.sidebarContent.unshift({label:"Form Filler",icon:"bi bi-file-earmark-text",action:()=>{this.router.navigateByUrl("/dashboard/fill-form")}})}})}toggleSidebar(n){this.showSidebar=n}preventCloseOnClick(){this.mobileSidebarTogglerClicked=!0}logout(){this.authService.logout()}static{this.\u0275fac=function(i){return new(i||e)(J(Lr),J(bo),J(pi))}}static{this.\u0275cmp=je({type:e,selectors:[["app-dashboard"]],standalone:!0,features:[We],decls:8,vars:6,consts:[[1,"app-container"],[1,"d-none","d-md-block"],[3,"sidebarItems"],["class","d-md-none sidebar-transition","style","z-index: 1002",3,"click",4,"ngIf"],[1,"d-md-none"],[3,"toggleSidebar","showSidebar"],[1,"main-content","ms-md-5","ps-md-4","ps-xl-5",3,"ngClass"],[1,"d-md-none","sidebar-transition",2,"z-index","1002",3,"click"]],template:function(i,r){i&1&&(z(0,"div",0)(1,"aside",1),he(2,"app-sidebar",2),H(),Fe(3,oCe,2,1,"aside",3),z(4,"header",4)(5,"app-topbar",5),be("toggleSidebar",function(s){return r.toggleSidebar(s),r.preventCloseOnClick()}),H()(),z(6,"main",6),he(7,"router-outlet"),H()()),i&2&&(Z(2),ue("sidebarItems",r.sidebarContent),Z(),ue("ngIf",r.showSidebar),Z(2),ue("showSidebar",r.showSidebar),Z(),ue("ngClass",Np(4,rCe,r.showSidebar)))},dependencies:[W0,O9,N9,_n,H1,Gi],styles:[".app-container[_ngcontent-%COMP%]{display:flex;height:100vh}.main-content[_ngcontent-%COMP%]{flex-grow:1;padding:20px;overflow-y:auto}@media (max-width: 768px){.main-content[_ngcontent-%COMP%]{padding-top:80px}.dim-content[_ngcontent-%COMP%]{opacity:.3}}"]})}}return e})();var $3=class{constructor(){this.subject=new Ml(1),this.subscriptions=new Ln}doFilter(t){this.subject.next(t)}dispose(){this.subscriptions.unsubscribe()}notEmpty(t,n){this.subscriptions.add(this.subject.subscribe(i=>{if(i[t]){let r=i[t].currentValue;r!=null&&n(r)}}))}has(t,n){this.subscriptions.add(this.subject.subscribe(i=>{if(i[t]){let r=i[t].currentValue;n(r)}}))}notFirst(t,n){this.subscriptions.add(this.subject.subscribe(i=>{if(i[t]&&!i[t].isFirstChange()){let r=i[t].currentValue;n(r)}}))}notFirstAndEmpty(t,n){this.subscriptions.add(this.subject.subscribe(i=>{if(i[t]&&!i[t].isFirstChange()){let r=i[t].currentValue;r!=null&&n(r)}}))}},V9=new ce("NGX_ECHARTS_CONFIG"),B9=(()=>{class e{constructor(n,i,r){this.el=i,this.ngZone=r,this.options=null,this.theme=null,this.initOpts=null,this.merge=null,this.autoResize=!0,this.loading=!1,this.loadingType="default",this.loadingOpts=null,this.chartInit=new Q,this.optionsError=new Q,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartHighlight=this.createLazyEvent("highlight"),this.chartDownplay=this.createLazyEvent("downplay"),this.chartSelectChanged=this.createLazyEvent("selectchanged"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendLegendSelectAll=this.createLazyEvent("legendselectall"),this.chartLegendLegendInverseSelect=this.createLazyEvent("legendinverseselect"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartGraphRoam=this.createLazyEvent("graphroam"),this.chartGeoRoam=this.createLazyEvent("georoam"),this.chartTreeRoam=this.createLazyEvent("treeroam"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartGeoSelectChanged=this.createLazyEvent("geoselectchanged"),this.chartGeoSelected=this.createLazyEvent("geoselected"),this.chartGeoUnselected=this.createLazyEvent("geounselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartGlobalCursorTaken=this.createLazyEvent("globalcursortaken"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.chart$=new Ml(1),this.resize$=new nt,this.changeFilter=new $3,this.resizeObFired=!1,this.echarts=n.echarts,this.theme=n.theme||null}ngOnChanges(n){this.changeFilter.doFilter(n)}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe(qR(100,co,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(n=>{for(let i of n)i.target===this.el.nativeElement&&(this.resizeObFired?this.animationFrameID=window.requestAnimationFrame(()=>{this.resize$.next()}):this.resizeObFired=!0)})),this.resizeOb.observe(this.el.nativeElement)),this.changeFilter.notFirstAndEmpty("options",n=>this.onOptionsChange(n)),this.changeFilter.notFirstAndEmpty("merge",n=>this.setOption(n)),this.changeFilter.has("loading",n=>this.toggleLoading(!!n)),this.changeFilter.notFirst("theme",()=>this.refreshChart())}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.loadingSub&&this.loadingSub.unsubscribe(),this.changeFilter.dispose(),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(n){this.chart?n?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading():this.loadingSub=this.chart$.subscribe(i=>n?i.showLoading(this.loadingType,this.loadingOpts):i.hideLoading())}setOption(n,i){if(this.chart)try{this.chart.setOption(n,i)}catch(r){console.error(r),this.optionsError.emit(r)}}refreshChart(){return N(this,null,function*(){this.dispose(),yield this.initChart()})}createChart(){let n=this.el.nativeElement;if(window&&window.getComputedStyle){let i=window.getComputedStyle(n,null).getPropertyValue("height");(!i||i==="0px")&&(!n.style.height||n.style.height==="0px")&&(n.style.height="400px")}return this.ngZone.runOutsideAngular(()=>(typeof this.echarts=="function"?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:r})=>r(n,this.theme,this.initOpts)))}initChart(){return N(this,null,function*(){yield this.onOptionsChange(this.options),this.merge&&this.chart&&this.setOption(this.merge)})}onOptionsChange(n){return N(this,null,function*(){n&&(this.chart?this.setOption(this.options,!0):(this.chart=yield this.createChart(),this.chart$.next(this.chart),this.chartInit.emit(this.chart),this.setOption(this.options,!0)))})}createLazyEvent(n){return this.chartInit.pipe(Ne(i=>new ge(r=>(i.on(n,o=>this.ngZone.run(()=>r.next(o))),()=>{this.chart&&(this.chart.isDisposed()||i.off(n))}))))}static{this.\u0275fac=function(i){return new(i||e)(J(V9),J(In),J(De))}}static{this.\u0275dir=on({type:e,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loading:"loading",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartHighlight:"chartHighlight",chartDownplay:"chartDownplay",chartSelectChanged:"chartSelectChanged",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendLegendSelectAll:"chartLegendLegendSelectAll",chartLegendLegendInverseSelect:"chartLegendLegendInverseSelect",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartGraphRoam:"chartGraphRoam",chartGeoRoam:"chartGeoRoam",chartTreeRoam:"chartTreeRoam",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartGeoSelectChanged:"chartGeoSelectChanged",chartGeoSelected:"chartGeoSelected",chartGeoUnselected:"chartGeoUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartGlobalCursorTaken:"chartGlobalCursorTaken",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],standalone:!0,features:[Vn]})}}return e})(),G9=(e={})=>({provide:V9,useFactory:()=>pe(B({},e),{echarts:()=>import("./chunk-TSEP7WFB.js")})});var Tx=function(){return Tx=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Tx.apply(this,arguments)};var aCe={includeMetadataChanges:!1};function H9(e,t){return t===void 0&&(t=aCe),new ge(function(n){var i=Ug(e,t,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:i}})}function z9(e,t){var n;t===void 0&&(t={});var i=e.data(t);return!e.exists()||typeof i!="object"||i===null||!t.idField?i:Tx(Tx({},i),(n={},n[t.idField]=e.id,n))}function U9(e){return H9(e,{includeMetadataChanges:!0}).pipe(ae(function(t){return t.docs}))}function j9(e,t){return t===void 0&&(t={}),U9(e).pipe(ae(function(n){return n.map(function(i){return z9(i,t)})}))}var cc=class{constructor(t){return t}},W9="firestore",Z3=class{constructor(){return ir(W9)}};var J3=new ce("angularfire2.firestore-instances");function lCe(e,t){let n=mr(W9,e,t);return n&&new cc(n)}function cCe(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new cc(i)}}var uCe={provide:Z3,deps:[[new gt,J3]]},dCe={provide:cc,useFactory:lCe,deps:[[new gt,J3],ti]};function q9(e,...t){return Qe("angularfire",Fn.full,"fst"),hn([dCe,uCe,{provide:J3,useFactory:cCe(e),multi:!0,deps:[De,bt,An,Ri,[new gt,la],[new gt,Ti],...t]}])}var eC=It(j9,!0);var Rx=It(JE,!0);var K9=It(tx,!0),Y9=It(ex,!0);var zh=It(Hy,!0);var Ix=It(ZE,!0);var uc=It(xh,!0);var Q9=It(XE,!0);var X9=It(LW,!0);var $9=It(KE,!0);var Z9=It(ga,!0);var nm=It(Uy,!0);var Vu=(()=>{class e{constructor(n,i){this.afAuth=n,this.fs=i,this.userId=null,this.incomeTags=new jt([]),this.incomeTags$=this.incomeTags.asObservable(),this.expenseTags=new jt([]),this.expenseTags$=this.expenseTags.asObservable(),this.afAuth.authState.pipe(Ne(r=>r?(this.userId=r.uid,this.getTags()):(this.userId=null,se([])))).subscribe(r=>{this.separateTagsByType(r)})}getTagFromId(n,i){return(i==="income"?this.incomeTags$:this.expenseTags$).pipe(Ne(r=>{let o=r.find(s=>s.id===n);return se(o||{id:"",name:"",type:i})}))}synchronousGetTagFromId(n,i){return(i==="income"?this.incomeTags.value:this.expenseTags.value).find(s=>s.id===n)||{id:"",name:"",type:i}}separateTagsByType(n){this.incomeTags.next(n.filter(i=>i.type==="income")),this.expenseTags.next(n.filter(i=>i.type==="expense"))}getTags(){if(!this.userId)return se([]);let n=zh(this.fs,`tags/${this.userId}/userTags`);return eC(n,{idField:"id"})}addTag(n,i){if(!this.userId)return se("");let r={name:n,type:i};return new ge(o=>{Rx(zh(this.fs,`tags/${this.userId}/userTags`),r).then(s=>{o.next(s.id),o.complete()}).catch(s=>o.error(s))})}updateTag(n,i){if(!this.userId)return se();let r=uc(this.fs,`tags/${this.userId}/userTags/${n}`);return new ge(o=>{nm(r,i).then(()=>{o.next(),o.complete()}).catch(s=>o.error(s))})}deleteTag(n){if(!this.userId)return se();let i=uc(this.fs,`tags/${this.userId}/userTags/${n}`);return new ge(r=>{Ix(i).then(()=>{r.next(),r.complete()}).catch(o=>r.error(o))})}addTagToTransaction(n,i,r){if(!this.userId)return se();let o=uc(this.fs,`transactions/${this.userId}/${r}/${n}`);return new ge(s=>{nm(o,{tagIds:Y9(i)}).then(()=>{s.next(),s.complete()}).catch(a=>s.error(a))})}removeTagFromTransaction(n,i,r){if(!this.userId)return se();let o=uc(this.fs,`transactions/${this.userId}/${r}/${n}`);return new ge(s=>{nm(o,{tagIds:K9(i)}).then(()=>{s.next(),s.complete()}).catch(a=>s.error(a))})}getTagsForTransaction(n,i){if(!this.userId)return se([]);let r=uc(this.fs,`transactions/${this.userId}/${i}/${n}`);return new ge(o=>{Q9(r).then(s=>{if(s.exists()){let a=B({id:s.id},s.data());this.getTags().pipe(ae(l=>l.filter(c=>a.tagIds.includes(c.id)))).subscribe(l=>{o.next(l),o.complete()},l=>o.error(l))}else o.next([]),o.complete()}).catch(s=>o.error(s))})}getTransactionsByTag(n,i){if(!this.userId)return se([]);let r=zh(this.fs,`transactions/${this.userId}/${i}`);return eC(r,{idField:"id"}).pipe(ae(o=>o.filter(s=>{let a=s.tagIds||[];return Array.isArray(a)&&a.includes(n)})))}static{this.\u0275fac=function(i){return new(i||e)($(Za),$(cc))}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Ax=(()=>{class e{constructor(n){this.tagService=n}formatDateToDayMonthYearWeekday(n){let i={day:"2-digit",month:"short",year:"numeric",weekday:"short"},r=n.toLocaleDateString("en-GB",i),[o,s,a,l]=r.replace(",","").split(" ");return`${a} ${s} ${l} (${o})`}moneyToLineBarData(n){return n.map(i=>({tag:i.tags[0],value:[i.date,i.amount],title:i.title??""}))}dateToMilli(n){return new Date(n).getTime()}milliToDate(n){return new Date(n).toLocaleDateString("en-CA",{month:"short",day:"2-digit"}).split("T")[0]}dateToMonthDateYearDay(n,i=!0){let r={weekday:"short",year:"numeric",month:"long",day:i?"numeric":void 0};return new Date(n).toLocaleDateString("en-US",r)}groupLineBarDataByDay(n){let i={};return n.forEach(r=>{let o=new Date(r.value[0]),s=`${o.getFullYear()}-${(o.getMonth()+1).toString().padStart(2,"0")}-${o.getDate().toString().padStart(2,"0")}`;i[s]||(i[s]=[]),i[s].push({tag:r.tag,value:r.value[1],title:r.title})}),Object.entries(i).map(([r,o])=>{let s=o,[a,l,c]=r.split("-");return{value:[new Date(parseInt(a),parseInt(l)-1,parseInt(c)).getTime(),s.reduce((d,h)=>d+Number(h.value),0)],points:s}})}groupBarDataByMonth(n){let i=[];return n.forEach(r=>{let o=new Date(r[0]),s=`${o.getFullYear()}-${(o.getMonth()+1).toString().padStart(2,"0")}`;i[s]||(i[s]=0),i[s]+=r[1]}),Object.entries(i).map(([r,o])=>{let[s,a]=r.split("-");return[new Date(parseInt(s),parseInt(a)-1).getTime(),o]})}groupPointsByTags(n){return n.reduce((i,r)=>(i[r.tag]||(i[r.tag]={tag:r.tag,points:[]}),i[r.tag].points.push({title:r.title,value:r.value}),i),{})}formatTooltipBySortedPoints(n,i=!1){return Object.values(n).map(r=>{let o=this.tagService.synchronousGetTagFromId(r.tag,i?"income":"expense").name,s=r.points.map(a=>`${a.title}: \u20B1${a.value.toLocaleString()}`).join("<br/>");return`<small><pr><code>${o}</code></pr></small><br/>${s}`}).join("<br/>")}static{this.\u0275fac=function(i){return new(i||e)($(Vu))}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function hCe(e,t){if(e&1&&he(0,"i"),e&2){let n=Se(2);Ji(n.percentChangeSymbol)}}function fCe(e,t){if(e&1){let n=Tt();z(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),ye(4),H(),z(5,"p",4),ye(6),z(7,"span",5),ye(8),Fe(9,hCe,1,2,"i",6),H()()(),z(10,"div",7)(11,"button",8),be("click",function(){Ge(n);let r=Se();return He(r.toggleChartType())}),he(12,"i"),H()()(),z(13,"div"),he(14,"div",9),H()()}if(e&2){let n=Se();Z(4),er(n.title),Z(2),qn(" ",n.percentChangeMessage," "),Z(),Ji(n.percentChangeClass),Z(),qn(" ",n.percentChange.toFixed(0),"% "),Z(),Vr(9,n.percentChange!==0?9:-1),Z(3),Ji(n.toggleChartTypeSymbol),Z(2),Qd("height",n.height),ue("options",n.options)}}var tq=(()=>{class e{constructor(n){this.utilService=n,this.data=[],this.title="",this.percentChangeMessage="Recent change:",this.isIncome=!1,this.type="line",this.height="150px",this.percentChange=0,this.isLoading=!1,this.options={tooltip:{confine:!0,trigger:"axis",formatter:i=>{i=i[0];let r=this.utilService.groupPointsByTags(i.data.points),o=this.utilService.dateToMonthDateYearDay(i.value[0]),s=this.utilService.formatTooltipBySortedPoints(r,this.isIncome);return`<small>${o}</small><br/>${s}<br/>${i.data.points.length>1?`<small>Total: \u20B1${i.value[1].toLocaleString()}</small>`:""}`},axisPointer:{animation:!1}},xAxis:{type:"category",splitLine:{show:!1},axisLabel:{formatter:i=>this.utilService.milliToDate(Number(i))},show:!1},grid:{bottom:"5%",top:"5%",left:0,right:0},yAxis:{type:"value",splitLine:{show:!1},show:!1},series:[{name:"Mock Data",type:this.type,showSymbol:!0,data:[],itemStyle:{color:"#c23531"}}]}}ngOnInit(){this.loadData()}ngOnChanges(){this.loadData()}toggleChartType(){this.type==="line"?this.type="bar":this.type="line",this.loadData()}loadData(){this.isLoading=!0;let n=this.utilService.groupLineBarDataByDay(this.data);this.percentChange=this.calculatePercentChange(this.data),this.options=pe(B({},this.options),{series:[{data:n,type:this.type,itemStyle:{color:"#c23531"},smooth:!0}]}),this.isLoading=!1}get toggleChartTypeSymbol(){return this.type==="bar"?"bi bi-bar-chart-fill":"bi bi-graph-up"}calculatePercentChange(n){if(n.length<2)return 0;let i=n[0].value[1];return(n[n.length-1].value[1]-i)/i*100}get percentChangeSymbol(){return this.percentChange>0?"bi bi-arrow-up":"bi bi-arrow-down"}get percentChangeClass(){let n="";if(this.percentChange!==0){let i=this.percentChange>0;this.isIncome?n=i?"text-success":"text-danger":n=i?"text-danger":"text-success"}return`${n}`}static{this.\u0275fac=function(i){return new(i||e)(J(Ax))}}static{this.\u0275cmp=je({type:e,selectors:[["app-line-bar-chart"]],inputs:{data:"data",title:"title",percentChangeMessage:"percentChangeMessage",isIncome:"isIncome",type:"type",height:"height"},standalone:!0,features:[Vn,We],decls:1,vars:1,consts:[[1,"bg-light","rounded-3","p-3"],[1,"d-flex","m-3"],[1,"col-6","d-flex","flex-column","justify-content-start"],[1,"fw-bold"],[1,"text-muted"],[1,"fw-semibold","text-start","ms-2"],[3,"class"],[1,"col-3","offset-2","d-flex","justify-content-end"],["type","button",1,"btn","btn-warning","p-1","col-6","offset-6",3,"click"],["echarts","",1,"demo-chart",3,"options"]],template:function(i,r){i&1&&Fe(0,fCe,15,11,"div",0),i&2&&Vr(0,r.isLoading?-1:0)},dependencies:[B9],styles:["svg[_ngcontent-%COMP%]{width:20px;height:20px}.btn[_ngcontent-%COMP%]{width:50px;height:50px}"]})}}return e})();var nq=(()=>{class e{constructor(){this.title="Title",this.value=0,this.percentChange=0,this.isIncome=!0}get roundedPercentChange(){let n=Math.round(this.percentChange);return`${n>0?"+":""}${n}`}get percentChangeClass(){return this.percentChange===0?"":this.isIncome?this.percentChange>0?"text-success":"text-danger":this.percentChange>0?"text-danger":"text-success"}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=je({type:e,selectors:[["app-stat-card"]],inputs:{title:"title",value:"value",percentChange:"percentChange",isIncome:"isIncome"},standalone:!0,features:[We],decls:7,vars:5,consts:[[1,"bg-light","border","border-primary","rounded-4","p-4"],[1,"text-muted","small"],[1,"h2","fw-bold"],[1,"small","mb-0"]],template:function(i,r){i&1&&(z(0,"div",0)(1,"h3",1),ye(2),H(),z(3,"p",2),ye(4),H(),z(5,"p",3),ye(6),H()()),i&2&&(Z(2),er(r.title),Z(2),er(r.value.toLocaleString()),Z(),Ji(r.percentChangeClass),Z(),qn(" ",r.roundedPercentChange,"% "))}})}}return e})();var fm=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,n){let i=t?this.allAsyncListeners:this.allSyncListeners,r=i.get(e);return!r&&n&&(r=new Set,i.set(e,r)),r}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,n=!1){this.getListeners(e,n,!0).add(t)}removeEventListener(e,t,n=!1){let i=this.getListeners(e,n,!1);i&&(i.delete(t),i.size===0&&(n?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){let t=e;this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){let n=e.type;if(t&&"event"in e){let a=e.event;a instanceof Event&&(e.eventPath=a.composedPath())}let i=(a,l)=>a.forEach(c=>{if(!l.has(c))return;let u=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>c(e)):()=>c(e);t?this.dispatchAsync(u):u()}),r=this.getListeners(n,t,!1)??new Set,o=new Set(r);o.size>0&&i(o,r),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(a=>{let l=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>a(n,e)):()=>a(n,e);t?this.dispatchAsync(l):l()})}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){let t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;let e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}},kq=(e=>(e.CommunityCoreModule="@ag-grid-community/core",e.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",e.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",e.CsvExportModule="@ag-grid-community/csv-export",e.EnterpriseCoreModule="@ag-grid-enterprise/core",e.RowGroupingModule="@ag-grid-enterprise/row-grouping",e.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",e.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",e.MenuModule="@ag-grid-enterprise/menu",e.SetFilterModule="@ag-grid-enterprise/set-filter",e.MultiFilterModule="@ag-grid-enterprise/multi-filter",e.StatusBarModule="@ag-grid-enterprise/status-bar",e.SideBarModule="@ag-grid-enterprise/side-bar",e.RangeSelectionModule="@ag-grid-enterprise/range-selection",e.MasterDetailModule="@ag-grid-enterprise/master-detail",e.RichSelectModule="@ag-grid-enterprise/rich-select",e.GridChartsModule="@ag-grid-enterprise/charts",e.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",e.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",e.ExcelExportModule="@ag-grid-enterprise/excel-export",e.ClipboardModule="@ag-grid-enterprise/clipboard",e.SparklinesModule="@ag-grid-enterprise/sparklines",e.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",e.AngularModule="@ag-grid-community/angular",e.ReactModule="@ag-grid-community/react",e.VueModule="@ag-grid-community/vue",e))(kq||{}),iq={};function VO(e,t){iq[t]||(e(),iq[t]=!0)}function Rs(e,...t){console.log("AG Grid: "+e,...t)}function X(e,...t){VO(()=>console.warn("AG Grid: "+e,...t),e+t?.join(""))}function kt(e,...t){VO(()=>console.error("AG Grid: "+e,...t),e+t?.join(""))}function BO(e){return!!(e&&e.constructor&&e.call&&e.apply)}function pCe(e){gCe(e,400)}var eO=[],tO=!1;function rq(e){eO.push(e),!tO&&(tO=!0,window.setTimeout(()=>{let t=eO.slice();eO.length=0,tO=!1,t.forEach(n=>n())},0))}function gCe(e,t=0){e.length>0&&window.setTimeout(()=>e.forEach(n=>n()),t)}function Qr(e,t){let n;return function(...i){let r=this;window.clearTimeout(n),n=window.setTimeout(function(){e.apply(r,i)},t)}}function oq(e,t){let n=0;return function(...i){let r=this,o=new Date().getTime();o-n<t||(n=o,e.apply(r,i))}}function mCe(e,t,n=100,i){let r=new Date().getTime(),o=null,s=!1,a=()=>{let l=new Date().getTime()-r>n;(e()||l)&&(t(),s=!0,o!=null&&(window.clearInterval(o),o=null),l&&i&&X(i))};a(),s||(o=window.setInterval(a,10))}function vCe(...e){return t=>e.reduce((n,i)=>i(n),t)}function fc(e){return e==null||e===""?null:e}function ne(e,t=!1){return e!=null&&(e!==""||t)}function St(e){return!ne(e)}function Jo(e){return e==null||e.length===0}function vO(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function Yh(e){if(e===void 0)return;if(e===null||e==="")return null;if(typeof e=="number")return isNaN(e)?void 0:e;let t=parseInt(e,10);return isNaN(t)?void 0:t}function yO(e){if(e!==void 0)return e===null||e===""?!1:CO(e)}function CO(e){return typeof e=="boolean"?e:typeof e=="string"?e.toUpperCase()==="TRUE"||e=="":!1}function hC(e,t){let n=e?JSON.stringify(e):null,i=t?JSON.stringify(t):null;return n===i}function yCe(e,t,n=!1){let i=e==null,r=t==null;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),i&&r)return 0;if(i)return-1;if(r)return 1;function o(s,a){return s>a?1:s<a?-1:0}if(typeof e!="string"||!n)return o(e,t);try{return e.localeCompare(t)}catch{return o(e,t)}}function Gx(e){if(e instanceof Set||e instanceof Map){let t=[];return e.forEach(n=>t.push(n)),t}return Object.values(e)}function Oq(e,t){return e.get("rowModelType")===t}function kn(e){return Oq(e,"clientSide")}function vc(e){return Oq(e,"serverSide")}function lr(e,t){return e.get("domLayout")===t}function jx(e){return Kx(e)!==void 0}function Wx(e){return!e.get("suppressAsyncEvents")}function Nq(e){return typeof e.get("getRowHeight")=="function"}function CCe(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}function ju(e,t,n=!1,i){if(i==null&&(i=e.environment.getDefaultRowHeight()),Nq(e)){if(n)return{height:i,estimated:!0};let s={node:t,data:t.data},a=e.getCallback("getRowHeight")(s);if(wO(a))return a===0&&X("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,a),estimated:!1}}if(t.detail&&e.get("masterDetail"))return wCe(e);let r=e.get("rowHeight");return{height:r&&wO(r)?r:i,estimated:!1}}function wCe(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};let t=e.get("detailRowHeight");return wO(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function Qh(e){let{environment:t}=e,n=e.get("rowHeight");if(!n||St(n))return t.getDefaultRowHeight();let i=t.refreshRowHeightVariable();return i!==-1?i:(X("row height must be a number if not using standard row model"),t.getDefaultRowHeight())}function wO(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}function fC(e,t,n){let i=t[e.getDomDataKey()];return i?i[n]:void 0}function Jh(e,t,n,i){let r=e.getDomDataKey(),o=t[r];St(o)&&(o={},t[r]=o),o[n]=i}function Yn(e){let t=null,n=e.get("getDocument");return n&&ne(n)?t=n():e.eGridDiv&&(t=e.eGridDiv.ownerDocument),t&&ne(t)?t:document}function Lq(e){return Yn(e).defaultView||window}function pC(e){return e.eGridDiv.getRootNode()}function Dn(e){return pC(e).activeElement}function Vq(e){let t=Yn(e),n=Dn(e);return n===null||n===t.body}function sm(e){return e.get("ensureDomOrder")?!1:e.get("animateRows")}function rD(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||lr(e,"print"))}function ul(e){return!e.get("autoGroupColumnDef")?.comparator&&!e.get("treeData")}function bO(e){let t=e.get("groupAggFiltering");if(typeof t=="function")return e.getCallback("groupAggFiltering");if(t===!0)return()=>!0}function Bq(e){let t=e.get("grandTotalRow");if(t)return t;if(e.get("groupIncludeTotalFooter"))return"bottom"}function Gq(e){let t=e.get("groupTotalRow");if(typeof t=="function")return e.getCallback("groupTotalRow");if(t)return()=>t;let n=e.get("groupIncludeFooter");if(typeof n=="function"){let i=e.getCallback("groupIncludeFooter");return r=>i(r)?"bottom":void 0}return()=>n?"bottom":void 0}function Hq(e){return e.exists("groupDisplayType")?e.get("groupDisplayType")==="multipleColumns":e.get("groupHideOpenParents")}function oD(e,t){return t?!1:e.get("groupDisplayType")==="groupRows"}function pm(e){let t=e.getCallback("getRowId");return t===void 0?t:n=>{let i=t(n);return typeof i!="string"&&(X("The getRowId callback must return a string. The ID ",i," is being cast to a string."),i=String(i)),i}}function cm(e){return e?.checkboxes??!0}function qx(e){return e?.mode==="multiRow"&&(e.headerCheckbox??!0)}function bCe(e){return e?.hideDisabledCheckboxes??!1}function SCe(e){return typeof e.get("rowSelection")!="string"}function _Ce(e){return e.get("cellSelection")!==void 0}function ECe(e){let t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?t?.suppressMultiRanges??!1:!1:e.get("suppressMultiRangeSelection")}function hl(e){let t=e.get("cellSelection");return t!==void 0?!!t:e.get("enableRangeSelection")}function xCe(e){let t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?t.handle?.mode==="range":!1:e.get("enableRangeHandle")}function sq(e){let t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?t.handle?.mode==="fill":!1:e.get("enableFillHandle")}function zq(e){let t=e.get("rowSelection")??"single";if(typeof t=="string"){let n=e.get("suppressRowClickSelection"),i=e.get("suppressRowDeselection");return n&&i?!1:n?"enableDeselection":i?"enableSelection":!0}return t.mode==="singleRow"||t.mode==="multiRow"?t.enableClickSelection??!1:!1}function DCe(e){let t=zq(e);return t===!0||t==="enableSelection"}function aq(e){let t=zq(e);return t===!0||t==="enableDeselection"}function GO(e){let t=e.get("rowSelection");return typeof t=="string"?e.get("isRowSelectable"):t?.isRowSelectable}function Kx(e){let t=e.get("rowSelection");if(typeof t=="string")switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}return t?.mode}function HO(e){return Kx(e)==="multiRow"}function TCe(e){let t=e.get("rowSelection");return typeof t=="string"?e.get("rowMultiSelectWithClick"):t?.enableSelectionWithoutKeys??!1}function zO(e){let t=e.get("rowSelection");if(typeof t=="string"){let n=e.get("groupSelectsChildren"),i=e.get("groupSelectsFiltered");return n&&i?"filteredDescendants":n?"descendants":"self"}return t?.mode==="multiRow"?t.groupSelects:void 0}function ef(e){let t=zO(e);return t==="descendants"||t==="filteredDescendants"}function nO(e){return e.isModuleRegistered("@ag-grid-enterprise/set-filter")&&!e.get("suppressSetFilterByDefault")}function Rt(e){if(!(!e||!e.length))return e[e.length-1]}function qu(e,t,n){return e==null&&t==null?!0:e!=null&&t!=null&&e.length===t.length&&e.every((i,r)=>n?n(i,t[r]):t[r]===i)}function RCe(e){return e.sort((t,n)=>t-n)}function Uq(e,t){let n=e.indexOf(t);n>=0&&(e[n]=e[e.length-1],e.pop())}function Xr(e,t){let n=e.indexOf(t);n>=0&&e.splice(n,1)}function ICe(e,t){for(let n=0;n<t.length;n++)Uq(e,t[n])}function FCe(e,t){for(let n=0;n<t.length;n++)Xr(e,t[n])}function Yx(e,t,n){e.splice(n,0,t)}function jq(e,t,n){FCe(e,t),t.slice().reverse().forEach(i=>Yx(e,i,n))}function Xh(e,t){return e.indexOf(t)>-1}function ACe(e){return e?.flatMap(t=>t)??[]}function lq(e,t){t==null||e==null||t.forEach(n=>e.push(n))}var Wq="__ag_Grid_Stop_Propagation",MCe=["touchstart","touchend","touchmove","touchcancel","scroll"],iO={};function um(e){e[Wq]=!0}function pc(e){return e[Wq]===!0}var qq=(()=>{let e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return n=>{if(typeof iO[n]=="boolean")return iO[n];let i=document.createElement(e[n]||"div");return n="on"+n,iO[n]=n in i}})();function SO(e,t,n){let i=t;for(;i;){let r=fC(e,i,n);if(r)return r;i=i.parentElement}return null}function PCe(e,t){return!t||!e?!1:OCe(t).indexOf(e)>=0}function kCe(e){let t=[],n=e.target;for(;n;)t.push(n),n=n.parentElement;return t}function OCe(e){let t=e;return t.path?t.path:t.composedPath?t.composedPath():kCe(t)}function NCe(e,t,n,i){let o=Xh(MCe,n)?{passive:!0}:void 0;e&&e.addEventListener&&e.addEventListener(t,n,i,o)}var j=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.frameworkOverrides=e.frameworkOverrides,this.stubContext=e.context,this.eventService=e.eventService,this.gos=e.gos,this.localeService=e.localeService}getFrameworkOverrides(){return this.frameworkOverrides}destroy(){for(let e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,n){this.localEventService||(this.localEventService=new fm),this.localEventService.addEventListener(e,t,n)}removeEventListener(e,t,n){this.localEventService&&this.localEventService.removeEventListener(e,t,n)}dispatchLocalEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventService,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){let n=[];for(let i in t){let r=t[i];r&&n.push(this._setupListener(e,i,r))}return n}_setupListener(e,t,n){if(this.destroyed)return()=>null;e instanceof HTMLElement?NCe(this.getFrameworkOverrides(),e,t,n):e.addEventListener(t,n);let i=()=>(e.removeEventListener(t,n),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(r=>r!==i),null)}setupGridOptionListener(e,t){this.gos.addPropertyEventListener(e,t);let n=()=>(this.gos.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter(i=>i!==n),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;let n=e.join("-")+this.propertyListenerId++,i=r=>{if(r.changeSet){if(r.changeSet&&r.changeSet.id===this.lastChangeSetIdLookup[n])return;this.lastChangeSetIdLookup[n]=r.changeSet.id}let o={type:"gridPropertyChanged",changeSet:r.changeSet,source:r.source};t(o)};e.forEach(r=>this.setupGridOptionListener(r,i))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,t){let n=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),n}createBean(e,t,n){return(t||this.stubContext).createBean(e,n)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function Kr(e){return e instanceof Hx}var Hx=class extends j{constructor(e,t,n,i){super(),this.isColumn=!1,this.expandable=!1,this.instanceId=Qq(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=t,this.expanded=!!e&&!!e.openByDefault,this.padding=n,this.level=i}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(t=>{Wu(t)?e.push(t):Kr(t)&&t.addLeafColumns(e)})}getColumnGroupShow(){let e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();let e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,n=!1,i=this.findChildrenRemovingPadding();for(let o=0,s=i.length;o<s;o++){let a=i[o];if(!a.isVisible())continue;let l=a.getColumnGroupShow();l==="open"?(e=!0,n=!0):l==="closed"?(t=!0,n=!0):(e=!0,t=!0)}let r=e&&t&&n;this.expandable!==r&&(this.expandable=r,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){let e=[],t=n=>{n.forEach(i=>{Kr(i)&&i.isPadding()?t(i.children):e.push(i)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},Kq="ag-Grid-ControlsColumn",LCe=class extends j{constructor(){super(...arguments),this.beanName="controlsColService"}createControlsCols(){let{gos:e}=this,t=e.get("rowSelection");if(!t||typeof t!="object")return[];let n=cm(t),i=qx(t);if(n||i){let r=e.get("selectionColumnDef"),o=e.get("enableRtl"),s=pe(B({maxWidth:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:o?"right":"left",comparator(l,c,u,d){let h=u.isSelected(),p=d.isSelected();return h&&p?0:h?1:-1},editable:!1,suppressFillHandle:!0},r),{colId:`${Kq}`}),a=new qO(s,null,s.colId,!1);return this.createBean(a),[a]}return[]}},sD="ag-Grid-AutoColumn";function UO(e){let t=[],n=i=>{for(let r=0;r<i.length;r++){let o=i[r];Wu(o)?t.push(o):Kr(o)&&n(o.getChildren())}};return n(e),t}function dc(e){return e.reduce((t,n)=>t+n.getActualWidth(),0)}function zu(e,t,n){let i={};if(!t)return;mc(null,t,o=>{i[o.getInstanceId()]=o}),n&&mc(null,n,o=>{i[o.getInstanceId()]=null});let r=Object.values(i).filter(o=>o!=null);e.destroyBeans(r)}function _O(e){return e.getId().startsWith(sD)}function wC(e){return e.getColId().startsWith(Kq)}function zx(e){let t=[];return e instanceof Array?e.some(i=>typeof i!="string")?X("if colDef.type is supplied an array it should be of type 'string[]'"):t=e:typeof e=="string"?t=e.split(","):X("colDef.type should be of type 'string' | 'string[]'"),t}var jO=class{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=n=>{this.frameworkOverrides.wrapOutgoing(()=>e(n))},this.wrappedListeners.set(e,t)),t}wrapGlobal(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=(n,i)=>{this.frameworkOverrides.wrapOutgoing(()=>e(n,i))},this.wrappedGlobalListeners.set(e,t)),t}unwrap(e){return this.wrappedListeners.get(e)??e}unwrapGlobal(e){return this.wrappedGlobalListeners.get(e)??e}},WO=new Set(["__proto__","constructor","prototype"]);function Ts(e,t){if(e!=null){if(Array.isArray(e)){for(let n=0;n<e.length;n++)t(n.toString(),e[n]);return}for(let[n,i]of Object.entries(e))t(n,i)}}function Yq(e){let t={},n=Object.keys(e);for(let i=0;i<n.length;i++){if(WO.has(n[i]))continue;let r=n[i],o=e[r];t[r]=o}return t}function EO(e,t){if(!e)return;let n=e,i={};return Object.keys(n).forEach(r=>{if(t&&t.indexOf(r)>=0||WO.has(r))return;let o=n[r];xO(o)&&o.constructor===Object?i[r]=EO(o):i[r]=o}),i}function tf(e){if(!e)return[];let t=Object;if(typeof t.values=="function")return t.values(e);let n=[];for(let i in e)e.hasOwnProperty(i)&&e.propertyIsEnumerable(i)&&n.push(e[i]);return n}function Yr(e,t,n=!0,i=!1){ne(t)&&Ts(t,(r,o)=>{if(WO.has(r))return;let s=e[r];s!==o&&(i&&s==null&&o!=null&&typeof o=="object"&&o.constructor===Object&&(s={},e[r]=s),xO(o)&&xO(s)&&!Array.isArray(s)?Yr(s,o,n,i):(n||o!==void 0)&&(e[r]=o))})}function aC(e,t,n){if(!t||!e)return;if(!n)return e[t];let i=t.split("."),r=e;for(let o=0;o<i.length;o++){if(r==null)return;r=r[i[o]]}return r}function xO(e){return typeof e=="object"&&e!==null}var VCe={resizable:!0,sortable:!0},BCe=0;function Qq(){return BCe++}function Wu(e){return e instanceof qO}var qO=class extends j{constructor(e,t,n,i){super(),this.isColumn=!0,this.instanceId=Qq(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.columnEventService=new fm,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=t,this.colId=n,this.primary=i,this.setState(e)}wireBeans(e){this.columnHoverService=e.columnHoverService}getInstanceId(){return this.instanceId}setState(e){e.sort!==void 0?(e.sort==="asc"||e.sort==="desc")&&(this.sort=e.sort):(e.initialSort==="asc"||e.initialSort==="desc")&&(this.sort=e.initialSort);let t=e.sortIndex,n=e.initialSortIndex;t!==void 0?t!==null&&(this.sortIndex=t):n!==null&&(this.sortIndex=n);let i=e.hide,r=e.initialHide;i!==void 0?this.visible=!i:this.visible=!r,e.pinned!==void 0?this.setPinned(e.pinned):this.setPinned(e.initialPinned);let o=e.flex,s=e.initialFlex;o!==void 0?this.flex=o:s!==void 0&&(this.flex=s)}setColDef(e,t,n){this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.columnEventService.dispatchEvent(this.createColumnEvent("colDefChanged",n))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}postConstruct(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){let e=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=ne(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=ne(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){let e=this.colDef;this.minWidth=e.minWidth??this.gos.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=ne(this.colDef.tooltipField)||ne(this.colDef.tooltipValueGetter)||ne(this.colDef.tooltipComponent)}resetActualWidth(e){let t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t,n=Yh(e.width),i=Yh(e.initialWidth);return n!=null?t=n:i!=null?t=i:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(St(this.colDef)||St(this.colDef.showRowGroup))return!1;let t=this.colDef.showRowGroup===!0,n=this.colDef.showRowGroup===e;return t||n}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}addEventListener(e,t){this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.columnEventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new jO(this.frameworkOverrides));let n=this.frameworkEventListenerService?.wrap(t)??t;this.columnEventService.addEventListener(e,n)}removeEventListener(e,t){let n=this.frameworkEventListenerService?.unwrap(t)??t;this.columnEventService.removeEventListener(e,n)}createColumnFunctionCallbackParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){let t=this.createColumnFunctionCallbackParams(e),n=this.colDef.suppressNavigable;return n(t)}return!1}isCellEditable(e){if(e.group){if(this.gos.get("treeData")){if(!e.data&&!this.gos.get("enableGroupEdit"))return!1}else if(!this.gos.get("enableGroupEdit"))return!1}return this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){let t=this.gos.get("rowSelection");if(t&&typeof t!="string"){let n=wC(this)&&cm(t);return this.isColumnFunc(e,n)}else return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??VCe[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){let n=this.createColumnFunctionCallbackParams(e);return t(n)}return!1}setHighlighted(e){this.highlighted!==e&&(this.highlighted=e,this.columnEventService.dispatchEvent(this.createColumnEvent("headerHighlightChanged","uiColumnMoved")))}setMoving(e,t){this.moving=e,this.columnEventService.dispatchEvent(this.createColumnEvent("movingChanged",t))}createColumnEvent(e,t){return this.gos.addGridCommonParams({type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,t){this.sort!==e&&(this.sort=e,this.columnEventService.dispatchEvent(this.createColumnEvent("sortChanged",t))),this.dispatchStateUpdatedEvent("sort")}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return St(this.sort)}isSorting(){return ne(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setMenuVisible(e,t){this.menuVisible!==e&&(this.menuVisible=e,this.columnEventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",t)))}isMenuVisible(){return this.menuVisible}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.columnEventService.dispatchEvent(this.createColumnEvent("leftChanged",t)))}isFilterActive(){return this.filterActive}setFilterActive(e,t,n){this.filterActive!==e&&(this.filterActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",t)));let i=this.createColumnEvent("filterChanged",t);n&&Yr(i,n),this.columnEventService.dispatchEvent(i)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){e===!0||e==="left"?this.pinned="left":e==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",t)))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",t)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){let n=e===!0;this.visible!==n&&(this.visible=n,this.columnEventService.dispatchEvent(this.createColumnEvent("visibleChanged",t))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};let t=e.getPaddingLevel()+1,n=!0;for(;e;){if(!e.isPadding()){n=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:n}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){let t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(St(this.colDef.colSpan))return 1;let t=this.createBaseColDefParams(e),n=this.colDef.colSpan(t);return Math.max(n,1)}getRowSpan(e){if(St(this.colDef.rowSpan))return 1;let t=this.createBaseColDefParams(e),n=this.colDef.rowSpan(t);return Math.max(n,1)}setActualWidth(e,t,n=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),n||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.columnEventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,t){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",t))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,t){this.pivotActive!==e&&(this.pivotActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",t))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,t){this.aggregationActive!==e&&(this.aggregationActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnValueChanged",t)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchStateUpdatedEvent(e){this.columnEventService.dispatchEvent({type:"columnStateUpdated",key:e})}},GCe={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},HCe=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=vO(e);let n=0;for(;;){let i;if(e?(i=e,n!==0&&(i+="_"+n)):t?(i=t,n!==0&&(i+="_"+n)):i=n,!this.existingKeys[i])return this.existingKeys[i]=!0,String(i);n++}}},zCe=class extends j{constructor(){super(...arguments),this.beanName="columnFactory"}wireBeans(e){this.dataTypeService=e.dataTypeService}createColumnTree(e,t,n,i){let r=new HCe,{existingCols:o,existingGroups:s,existingColKeys:a}=this.extractExistingTreeData(n);r.addExistingKeys(a);let l=this.recursivelyCreateColumns(e,0,t,o,r,s,i),c=this.findMaxDept(l,0),u=this.balanceColumnTree(l,0,c,r);return mc(null,u,(h,p)=>{Kr(h)&&h.setupExpandable(),h.setOriginalParent(p)}),{columnTree:u,treeDept:c}}extractExistingTreeData(e){let t=[],n=[],i=[];return e&&mc(null,e,r=>{if(Kr(r)){let o=r;n.push(o)}else{let o=r;i.push(o.getId()),t.push(o)}}),{existingCols:t,existingGroups:n,existingColKeys:i}}balanceTreeForAutoCols(e,t){let n=[],i=this.findDepth(t);return e.forEach(r=>{let o=r;for(let s=i-1;s>=0;s--){let a=new Hx(null,`FAKE_PATH_${r.getId()}}_${s}`,!0,s);this.createBean(a),a.setChildren([o]),o.setOriginalParent(a),o=a}i===0&&r.setOriginalParent(null),n.push(o)}),[n,i]}findDepth(e){let t=0,n=e;for(;n&&n[0]&&Kr(n[0]);)t++,n=n[0].getChildren();return t}balanceColumnTree(e,t,n,i){let r=[];for(let o=0;o<e.length;o++){let s=e[o];if(Kr(s)){let a=s,l=this.balanceColumnTree(a.getChildren(),t+1,n,i);a.setChildren(l),r.push(a)}else{let a,l;for(let c=n-1;c>=t;c--){let u=i.getUniqueKey(null,null),d=this.createMergedColGroupDef(null),h=new Hx(d,u,!0,t);this.createBean(h),l&&l.setChildren([h]),l=h,a||(a=l)}if(a&&l)if(r.push(a),e.some(u=>Kr(u))){l.setChildren([s]);continue}else{l.setChildren(e);break}r.push(s)}}return r}findMaxDept(e,t){let n=t;for(let i=0;i<e.length;i++){let r=e[i];if(Kr(r)){let o=r,s=this.findMaxDept(o.getChildren(),t+1);n<s&&(n=s)}}return n}recursivelyCreateColumns(e,t,n,i,r,o,s){if(!e)return[];let a=new Array(e.length);for(let l=0;l<a.length;l++){let c=e[l];this.isColumnGroup(c)?a[l]=this.createColumnGroup(n,c,t,i,r,o,s):a[l]=this.createColumn(n,c,i,r,s)}return a}createColumnGroup(e,t,n,i,r,o,s){let a=this.createMergedColGroupDef(t),l=r.getUniqueKey(a.groupId||null,null),c=new Hx(a,l,!1,n);this.createBean(c);let u=this.findExistingGroup(t,o);u&&o.splice(u.idx,1);let d=u?.group;d&&c.setExpanded(d.isExpanded());let h=this.recursivelyCreateColumns(a.children,n+1,e,i,r,o,s);return c.setChildren(h),c}createMergedColGroupDef(e){let t={};return Object.assign(t,this.gos.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,n,i,r){let o=this.findExistingColumn(t,n);o&&n?.splice(o.idx,1);let s=o?.column;if(s){let a=this.addColumnDefaultAndTypes(t,s.getColId());s.setColDef(a,t,r),this.applyColumnState(s,a,r)}else{let a=i.getUniqueKey(t.colId,t.field),l=this.addColumnDefaultAndTypes(t,a);s=new qO(l,t,a,e),this.createBean(s)}return this.dataTypeService?.addColumnListeners(s),s}applyColumnState(e,t,n){let i=Yh(t.flex);if(i!==void 0&&e.setFlex(i),e.getFlex()<=0){let a=Yh(t.width);if(a!=null)e.setActualWidth(a,n);else{let l=e.getActualWidth();e.setActualWidth(l,n)}}t.sort!==void 0&&(t.sort=="asc"||t.sort=="desc"?e.setSort(t.sort,n):e.setSort(void 0,n));let o=Yh(t.sortIndex);o!==void 0&&e.setSortIndex(o);let s=yO(t.hide);s!==void 0&&e.setVisible(!s,n),t.pinned!==void 0&&e.setPinned(t.pinned)}findExistingColumn(e,t){if(t)for(let n=0;n<t.length;n++){let i=t[n].getUserProvidedColDef();if(!i)continue;if(e.colId!=null){if(t[n].getId()===e.colId)return{idx:n,column:t[n]};continue}if(e.field!=null){if(i.field===e.field)return{idx:n,column:t[n]};continue}if(i===e)return{idx:n,column:t[n]}}}findExistingGroup(e,t){if(e.groupId!=null)for(let i=0;i<t.length;i++){let r=t[i];if(r.getColGroupDef()&&r.getId()===e.groupId)return{idx:i,group:r}}}addColumnDefaultAndTypes(e,t){let n={},i=this.gos.get("defaultColDef");Yr(n,i,!1,!0);let r=this.updateColDefAndGetColumnType(n,e,t);r&&this.assignColumnTypes(r,n),Yr(n,e,!1,!0);let o=this.gos.get("autoGroupColumnDef"),s=ul(this.gos);return e.rowGroup&&o&&s&&Yr(n,{sort:o.sort,initialSort:o.initialSort},!1,!0),this.dataTypeService?.validateColDef(n),n}updateColDefAndGetColumnType(e,t,n){let i=this.dataTypeService?.updateColDefAndGetColumnType(e,t,n),r=t.type??i??e.type;return e.type=r,r?zx(r):void 0}assignColumnTypes(e,t){if(!e.length)return;let n=Object.assign({},GCe),i=this.gos.get("columnTypes")||{};Ts(i,(r,o)=>{r in n?X(`the column type '${r}' is a default column type and cannot be overridden.`):(o.type&&X("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),n[r]=o)}),e.forEach(r=>{let o=n[r.trim()];o?Yr(t,o,!1,!0):X("colDef.type '"+r+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(e){return e.children!==void 0}};function mc(e,t,n){if(t)for(let i=0;i<t.length;i++){let r=t[i];Kr(r)&&mc(r,r.getChildren(),n),n(r,e)}}var UCe=class extends j{constructor(){super(...arguments),this.beanName="columnModel",this.pivotMode=!1,this.autoHeightActiveAtLeastOnce=!1,this.ready=!1,this.changeEventsDispatching=!1,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}wireBeans(e){this.context=e.context,this.ctrlsService=e.ctrlsService,this.columnFactory=e.columnFactory,this.columnSizeService=e.columnSizeService,this.visibleColsService=e.visibleColsService,this.columnViewportService=e.columnViewportService,this.pivotResultColsService=e.pivotResultColsService,this.columnAnimationService=e.columnAnimationService,this.autoColService=e.autoColService,this.controlsColService=e.controlsColService,this.valueCache=e.valueCache,this.columnDefFactory=e.columnDefFactory,this.columnApplyStateService=e.columnApplyStateService,this.columnGroupStateService=e.columnGroupStateService,this.eventDispatcher=e.columnEventDispatcher,this.columnMoveService=e.columnMoveService,this.columnAutosizeService=e.columnAutosizeService,this.funcColsService=e.funcColsService,this.quickFilterService=e.quickFilterService,this.showRowGroupColsService=e.showRowGroupColsService,this.environment=e.environment}postConstruct(){let e=this.gos.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],t=>this.refreshAll(Wh(t.source))),this.addManagedPropertyListener("rowSelection",t=>{this.onSelectionOptionsChanged(t.currentValue,t.previousValue,Wh(t.source))}),this.addManagedPropertyListener("autoGroupColumnDef",t=>this.onAutoGroupColumnDefChanged(Wh(t.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],t=>this.recreateColumnDefs(Wh(t.source))),this.addManagedPropertyListener("pivotMode",t=>this.setPivotMode(this.gos.get("pivotMode"),Wh(t.source))),this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}createColsFromColDefs(e){let t=this.colDefs?this.columnApplyStateService.compareColumnStatesAndDispatchEvents(e):void 0;this.valueCache.expire();let n=this.colDefCols?.list,i=this.colDefCols?.tree,r=this.columnFactory.createColumnTree(this.colDefs,!0,i,e);zu(this.context,this.colDefCols?.tree,r.columnTree);let o=r.columnTree,s=r.treeDept,a=UO(o),l={};a.forEach(c=>l[c.getId()]=c),this.colDefCols={tree:o,treeDepth:s,list:a,map:l},this.funcColsService.extractCols(e,n),this.ready=!0,this.refreshCols(!0),this.visibleColsService.refresh(e),this.columnViewportService.checkViewportColumns(),this.eventDispatcher.everythingChanged(e),t&&(this.changeEventsDispatching=!0,t(),this.changeEventsDispatching=!1),this.eventDispatcher.newColumnsLoaded(e),e==="gridInitializing"&&this.columnSizeService.applyAutosizeStrategy()}refreshCols(e){if(!this.colDefCols)return;let t=this.cols?.tree;this.saveColOrder(),this.selectCols(),this.createAutoCols(),this.addAutoCols(),this.createControlsCols(),this.addControlsCols();let n=CCe(this.gos,this.showingPivotResult);(!e||n)&&this.restoreColOrder(),this.positionLockedCols(),this.showRowGroupColsService?.refresh(),this.quickFilterService?.refreshQuickFilterCols(),this.setColSpanActive(),this.setAutoHeightActive(),this.visibleColsService.clear(),this.columnViewportService.clear(),!qu(t,this.cols.tree)&&this.eventDispatcher.gridColumns()}selectCols(){let e=this.pivotResultColsService.getPivotResultCols();if(this.showingPivotResult=e!=null,e){let{map:t,list:n,tree:i,treeDepth:r}=e;this.cols={list:n.slice(),map:B({},t),tree:i.slice(),treeDepth:r},e.list.some(s=>this.cols?.map[s.getColId()]!==void 0)||(this.lastPivotOrder=null)}else{let{map:t,list:n,tree:i,treeDepth:r}=this.colDefCols;this.cols={list:n.slice(),map:B({},t),tree:i.slice(),treeDepth:r}}}getColsToShow(){let e=this.isPivotMode()&&!this.isShowingPivotResult(),t=this.funcColsService.getValueColumns();return this.cols.list.filter(i=>{let r=_O(i);if(e){let o=t&&Xh(t,i);return r||o}else return r||i.isVisible()})}addAutoCols(){this.autoCols!=null&&(this.cols.list=this.autoCols.list.concat(this.cols.list),this.cols.tree=this.autoCols.tree.concat(this.cols.tree),cq(this.cols))}createAutoCols(){let e=oD(this.gos,this.pivotMode),t=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),n=this.funcColsService.getRowGroupColumns(),r=!(n.length>0||this.gos.get("treeData"))||t||e,o=()=>{this.autoCols&&(zu(this.context,this.autoCols.tree),this.autoCols=null)};if(r||!this.autoColService){o();return}let s=this.autoColService.createAutoCols(n)??[],a=dq(s,this.autoCols?.list||null),l=this.cols.treeDepth,u=(this.autoCols?this.autoCols.treeDepth:-1)==l;if(a&&u)return;o();let[d,h]=this.columnFactory.balanceTreeForAutoCols(s,this.cols.tree);this.autoCols={list:s,tree:d,treeDepth:h,map:{}};let p=g=>{if(!g)return null;let m=g.filter(v=>!_O(v));return[...s,...m]};this.lastOrder=p(this.lastOrder),this.lastPivotOrder=p(this.lastPivotOrder)}createControlsCols(){let e=()=>{zu(this.context,this.controlsCols?.tree),this.controlsCols=null};this.controlsColService||e();let t=this.cols.treeDepth,i=(this.controlsCols?.treeDepth??-1)==t,r=this.controlsColService?.createControlsCols()??[];if(dq(r,this.controlsCols?.list??[])&&i)return;e();let[s,a]=this.columnFactory.balanceTreeForAutoCols(r,this.cols.tree);this.controlsCols={list:r,tree:s,treeDepth:a,map:{}};let l=c=>{if(!c)return null;let u=c.filter(d=>!wC(d));return[...r,...u]};this.lastOrder=l(this.lastOrder),this.lastPivotOrder=l(this.lastPivotOrder)}addControlsCols(){this.controlsCols!=null&&(this.cols.list=this.controlsCols.list.concat(this.cols.list),this.cols.tree=this.controlsCols.tree.concat(this.cols.tree),cq(this.cols))}refreshAll(e){this.isReady()&&(this.refreshCols(!1),this.visibleColsService.refresh(e))}setColsVisible(e,t=!1,n){this.columnApplyStateService.applyColumnState({state:e.map(i=>({colId:typeof i=="string"?i:i.getColId(),hide:!t}))},n)}setColsPinned(e,t,n){if(!this.cols||Jo(e))return;if(lr(this.gos,"print")){X("Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let i;t===!0||t==="left"?i="left":t==="right"?i="right":i=null;let r=[];e.forEach(o=>{if(!o)return;let s=this.getCol(o);s&&s.getPinned()!==i&&(s.setPinned(i),r.push(s))}),r.length&&(this.visibleColsService.refresh(n),this.eventDispatcher.columnPinned(r,n)),this.columnAnimationService.finish()}setColumnGroupOpened(e,t,n){let i;Kr(e)?i=e.getId():i=e||"",this.columnGroupStateService.setColumnGroupState([{groupId:i,open:t}],n)}getProvidedColGroup(e){let t=null;return mc(null,this.cols?.tree,n=>{Kr(n)&&n.getId()===e&&(t=n)}),t}isColGroupLocked(e){let t=this.gos.get("groupLockGroupColumns");if(!e.isRowGroupActive()||t===0)return!1;if(t===-1)return!0;let i=this.funcColsService.getRowGroupColumns().findIndex(r=>r.getColId()===e.getColId());return t>i}isSuppressAutoCol(){return this.gos.get("groupDisplayType")==="custom"?!0:this.gos.get("treeDataDisplayType")==="custom"}setAutoHeightActive(){this.autoHeightActive=this.cols.list.some(e=>e.isVisible()&&e.isAutoHeight()),this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,kn(this.gos)||vc(this.gos)||X("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}restoreColOrder(){let e=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!e)return;let t=new Map(e.map((l,c)=>[l,c]));if(!this.cols.list.some(l=>t.has(l)))return;let i=new Map(this.cols.list.map(l=>[l,!0])),r=e.filter(l=>i.has(l)),o=new Map(r.map(l=>[l,!0])),s=this.cols.list.filter(l=>!o.has(l)),a=r.slice();s.forEach(l=>{let c=l.getOriginalParent();if(!c){a.push(l);return}let u=[];for(;!u.length&&c;)c.getLeafColumns().forEach(g=>{let m=a.indexOf(g)>=0,v=u.indexOf(g)<0;m&&v&&u.push(g)}),c=c.getOriginalParent();if(!u.length){a.push(l);return}let d=u.map(p=>a.indexOf(p)),h=Math.max(...d);Yx(a,l,h+1)}),this.cols.list=a}sortColsLikeKeys(e){if(this.cols==null)return;let t=[],n={};e.forEach(r=>{if(n[r])return;let o=this.cols.map[r];o&&(t.push(o),n[r]=!0)});let i=0;if(this.cols.list.forEach(r=>{let o=r.getColId();if(n[o]!=null)return;o.startsWith(sD)?Yx(t,r,i++):t.push(r)}),t=this.columnMoveService.placeLockedColumns(t),!this.columnMoveService.doesMovePassMarryChildren(t)){X("Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.cols.list=t}sortColsLikeCols(e){!e||e.length<=1||e.filter(n=>this.cols.list.indexOf(n)<0).length>0||e.sort((n,i)=>{let r=this.cols.list.indexOf(n),o=this.cols.list.indexOf(i);return r-o})}resetColDefIntoCol(e,t){let n=e.getUserProvidedColDef();if(!n)return!1;let i=this.columnFactory.addColumnDefaultAndTypes(n,e.getColId());return e.setColDef(i,n,t),!0}queueResizeOperations(){this.shouldQueueResizeOperations=!0}isShouldQueueResizeOperations(){return this.shouldQueueResizeOperations}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}moveInCols(e,t,n){jq(this.cols?.list,e,t),this.visibleColsService.refresh(n)}positionLockedCols(){this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list:this.lastOrder=this.cols?.list}getColumnDefs(){if(!this.colDefCols)return;let e=this.colDefCols.list.slice();this.showingPivotResult?e.sort((i,r)=>this.lastOrder.indexOf(i)-this.lastOrder.indexOf(r)):this.lastOrder&&e.sort((i,r)=>this.cols.list.indexOf(i)-this.cols.list.indexOf(r));let t=this.funcColsService.getRowGroupColumns(),n=this.funcColsService.getPivotColumns();return this.columnDefFactory.buildColumnDefs(e,t,n)}isShowingPivotResult(){return this.showingPivotResult}isChangeEventsDispatching(){return this.changeEventsDispatching}isColSpanActive(){return this.colSpanActive}isProvidedColGroupsPresent(){return this.colDefCols?.treeDepth>0}setColSpanActive(){this.colSpanActive=this.cols.list.some(e=>e.getColDef().colSpan!=null)}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}getHeaderRowCount(){return this.cols?this.cols.treeDepth+1:-1}isReady(){return this.ready}isPivotMode(){return this.pivotMode}setPivotMode(e,t){e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=e,this.ready&&(this.refreshCols(!1),this.visibleColsService.refresh(t),this.eventDispatcher.pivotModeChanged()))}isPivotSettingAllowed(e){return e&&this.gos.get("treeData")?(X("Pivot mode not available with treeData."),!1):!0}isPivotActive(){let e=this.funcColsService.getPivotColumns();return this.pivotMode&&!Jo(e)}recreateColumnDefs(e){this.cols&&(this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e),this.createColsFromColDefs(e))}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){zu(this.context,this.colDefCols?.tree),zu(this.context,this.autoCols?.tree),zu(this.context,this.controlsCols?.tree),super.destroy()}getColTree(){return this.cols.tree}getColDefColTree(){return this.colDefCols.tree}getColDefCols(){return this.colDefCols?.list?this.colDefCols.list:null}getCols(){return this.cols?.list??[]}getAllCols(){let t=this.pivotResultColsService.getPivotResultCols()?.list;return[this.colDefCols?.list??[],this.autoCols?.list??[],this.controlsCols?.list??[],t??[]].flat()}getColsForKeys(e){return e?e.map(t=>this.getCol(t)).filter(t=>t!=null):[]}getColDefCol(e){return this.colDefCols?.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColFromCollection(e,t){if(t==null)return null;let{map:n,list:i}=t;if(typeof e=="string"&&n[e])return n[e];for(let r=0;r<i.length;r++)if(uq(i[r],e))return i[r];return this.getAutoCol(e)}getAutoCol(e){return this.autoCols?.list.find(t=>uq(t,e))??null}getAutoCols(){return this.autoCols?.list??null}setColHeaderHeight(e,t){e.setAutoHeaderHeight(t)&&(e.isColumn?this.eventDispatcher.headerHeight(e):this.eventDispatcher.groupHeaderHeight(e))}getGroupRowsHeight(){let e=[],t=this.ctrlsService.getHeaderRowContainerCtrls();for(let n of t){if(!n)continue;let i=n.getGroupRowCount()||0;for(let r=0;r<i;r++){let o=n.getGroupRowCtrlAtIndex(r),s=e[r];if(o){let a=this.getColumnGroupHeaderRowHeight(o);(s==null||a>s)&&(e[r]=a)}}}return e}getColumnGroupHeaderRowHeight(e){let t=this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight(),n=0,i=e.getHeaderCtrls();for(let r of i){let o=r.getColumn();if(o.isAutoHeaderHeight()){let s=o.getAutoHeaderHeight();s!=null&&s>n&&(n=s)}}return Math.max(t,n)}getColumnHeaderRowHeight(){let e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),n=this.visibleColsService.getAllCols().filter(i=>i.isAutoHeaderHeight()).map(i=>i.getAutoHeaderHeight()||0);return Math.max(e,...n)}getHeaderHeight(){return this.gos.get("headerHeight")??this.environment.getDefaultHeaderHeight()}getFloatingFiltersHeight(){return this.gos.get("floatingFiltersHeight")??this.getHeaderHeight()}getGroupHeaderHeight(){return this.gos.get("groupHeaderHeight")??this.getHeaderHeight()}getPivotHeaderHeight(){return this.gos.get("pivotHeaderHeight")??this.getHeaderHeight()}getPivotGroupHeaderHeight(){return this.gos.get("pivotGroupHeaderHeight")??this.getGroupHeaderHeight()}onFirstDataRendered(){let e=this.gos.get("autoSizeStrategy");if(e?.type!=="fitCellContents")return;let{colIds:t,skipHeader:n}=e;setTimeout(()=>{t?this.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:n,source:"autosizeColumns"}):this.columnAutosizeService.autoSizeAllColumns("autosizeColumns",n)})}onAutoGroupColumnDefChanged(e){this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e)}onSelectionOptionsChanged(e,t,n){let i=t&&typeof t!="string"?cm(t):void 0,r=e&&typeof e!="string"?cm(e):void 0,o=i!==r,s=t&&typeof t!="string"?qx(t):void 0,a=e&&typeof e!="string"?qx(e):void 0;(o||s!==a)&&this.refreshAll(n)}};function Wh(e){return e==="gridOptionsUpdated"?"gridOptionsChanged":e}function cq(e){e.map={},e.list.forEach(t=>e.map[t.getId()]=t)}function uq(e,t){let n=e===t,i=e.getColDef()===t,r=e.getColId()==t;return n||i||r}function dq(e,t){return qu(e,t,(n,i)=>n.getColId()===i.getColId())}var jCe=class extends j{constructor(){super(...arguments),this.beanName="columnAutosizeService",this.timesDelayed=0}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.animationFrameService=e.animationFrameService,this.autoWidthCalculator=e.autoWidthCalculator,this.eventDispatcher=e.columnEventDispatcher,this.ctrlsService=e.ctrlsService,this.renderStatusService=e.renderStatusService}autoSizeCols(e){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeCols(e));return}let{colKeys:t,skipHeader:n,skipHeaderGroups:i,stopAtGroup:r,source:o="api"}=e;if(this.animationFrameService.flushAllFrames(),this.timesDelayed<5&&this.renderStatusService&&!this.renderStatusService.areHeaderCellsRendered()){this.timesDelayed++,setTimeout(()=>this.autoSizeCols(e));return}this.timesDelayed=0;let s=[],a=-1,l=n??this.gos.get("skipHeaderOnAutoSize"),c=i??l;for(;a!==0;){a=0;let u=[];t.forEach(d=>{if(!d)return;let h=this.columnModel.getCol(d);if(!h||s.indexOf(h)>=0)return;let p=this.autoWidthCalculator.getPreferredWidthForColumn(h,l);if(p>0){let g=this.normaliseColumnWidth(h,p);h.setActualWidth(g,o),s.push(h),a++}u.push(h)}),u.length&&this.visibleColsService.refresh(o)}c||this.autoSizeColumnGroupsByColumns(t,o,r),this.eventDispatcher.columnResized(s,!0,"autosizeColumns")}autoSizeColumn(e,t,n){e&&this.autoSizeCols({colKeys:[e],skipHeader:n,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,n){let i=new Set;this.columnModel.getColsForKeys(e).forEach(a=>{let l=a.getParent();for(;l&&l!=n;)l.isPadding()||i.add(l),l=l.getParent()});let o,s=[];for(let a of i){for(let l of this.ctrlsService.getHeaderRowContainerCtrls())if(o=l.getHeaderCtrlForColumn(a),o)break;o&&o.resizeLeafColumnsToFit(t)}return s}autoSizeAllColumns(e,t){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeAllColumns(e,t));return}let n=this.visibleColsService.getAllCols();this.autoSizeCols({colKeys:n,skipHeader:t,source:e})}normaliseColumnWidth(e,t){let n=e.getMinWidth();t<n&&(t=n);let i=e.getMaxWidth();return e.isGreaterThanMax(t)&&(t=i),t}},WCe=class extends j{constructor(){super(...arguments),this.beanName="funcColsService",this.rowGroupCols=[],this.valueCols=[],this.pivotCols=[]}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.aggFuncService=e.aggFuncService,this.visibleColsService=e.visibleColsService}getModifyColumnsNoEventsCallbacks(){return{addGroupCol:e=>this.rowGroupCols.push(e),removeGroupCol:e=>Xr(this.rowGroupCols,e),addPivotCol:e=>this.pivotCols.push(e),removePivotCol:e=>Xr(this.pivotCols,e),addValueCol:e=>this.valueCols.push(e),removeValueCol:e=>Xr(this.valueCols,e)}}getSourceColumnsForGroupColumn(e){let t=e.getColDef().showRowGroup;if(!t)return null;if(t===!0)return this.rowGroupCols.slice(0);let n=this.columnModel.getColDefCol(t);return n?[n]:null}sortRowGroupColumns(e){this.rowGroupCols.sort(e)}sortPivotColumns(e){this.pivotCols.sort(e)}getValueColumns(){return this.valueCols?this.valueCols:[]}getPivotColumns(){return this.pivotCols?this.pivotCols:[]}getRowGroupColumns(){return this.rowGroupCols?this.rowGroupCols:[]}isRowGroupEmpty(){return Jo(this.rowGroupCols)}setColumnAggFunc(e,t,n){if(!e)return;let i=this.columnModel.getColDefCol(e);i&&(i.setAggFunc(t),this.eventDispatcher.columnChanged("columnValueChanged",[i],n))}setRowGroupColumns(e,t){this.setColList(e,this.rowGroupCols,"columnRowGroupChanged",!0,!0,(n,i)=>this.setRowGroupActive(n,i,t),t)}setRowGroupActive(e,t,n){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,n),e&&!this.gos.get("suppressRowGroupHidesColumns")&&this.columnModel.setColsVisible([t],!1,n),!e&&!this.gos.get("suppressMakeColumnVisibleAfterUnGroup")&&this.columnModel.setColsVisible([t],!0,n))}addRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!0,!0,n=>this.setRowGroupActive(!0,n,t),"columnRowGroupChanged",t)}removeRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!1,!0,n=>this.setRowGroupActive(!1,n,t),"columnRowGroupChanged",t)}addPivotColumns(e,t){this.updateColList(e,this.pivotCols,!0,!1,n=>n.setPivotActive(!0,t),"columnPivotChanged",t)}setPivotColumns(e,t){this.setColList(e,this.pivotCols,"columnPivotChanged",!0,!1,(n,i)=>{i.setPivotActive(n,t)},t)}removePivotColumns(e,t){this.updateColList(e,this.pivotCols,!1,!1,n=>n.setPivotActive(!1,t),"columnPivotChanged",t)}setValueColumns(e,t){this.setColList(e,this.valueCols,"columnValueChanged",!1,!1,(n,i)=>this.setValueActive(n,i,t),t)}setValueActive(e,t,n){if(e!==t.isValueActive()&&(t.setValueActive(e,n),e&&!t.getAggFunc()&&this.aggFuncService)){let i=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(i)}}addValueColumns(e,t){this.updateColList(e,this.valueCols,!0,!1,n=>this.setValueActive(!0,n,t),"columnValueChanged",t)}removeValueColumns(e,t){this.updateColList(e,this.valueCols,!1,!1,n=>this.setValueActive(!1,n,t),"columnValueChanged",t)}moveRowGroupColumn(e,t,n){if(this.isRowGroupEmpty())return;let i=this.rowGroupCols[e],r=this.rowGroupCols.slice(e,t);this.rowGroupCols.splice(e,1),this.rowGroupCols.splice(t,0,i),this.eventDispatcher.rowGroupChanged(r,n)}setColList(e,t,n,i,r,o,s){if(!this.columnModel.getCols())return;let a=new Map;t.forEach((c,u)=>a.set(c,u)),t.length=0,ne(e)&&e.forEach(c=>{let u=this.columnModel.getColDefCol(c);u&&t.push(u)}),t.forEach((c,u)=>{let d=a.get(c);if(d===void 0){a.set(c,0);return}i&&d!==u||a.delete(c)}),(this.columnModel.getColDefCols()||[]).forEach(c=>{let u=t.indexOf(c)>=0;o(u,c)}),r&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(s),this.eventDispatcher.columnChanged(n,[...a.keys()],s)}updateColList(e,t,n,i,r,o,s){if(!e||Jo(e))return;let a=!1,l=new Set;e.forEach(c=>{if(!c)return;let u=this.columnModel.getColDefCol(c);if(u){if(l.add(u),n){if(t.indexOf(u)>=0)return;t.push(u)}else{let d=t.indexOf(u);if(d<0)return;for(let h=d+1;h<t.length;h++)l.add(t[h]);Xr(t,u)}r(u),a=!0}}),a&&(i&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(s),this.eventDispatcher.genericColumnEvent(o,Array.from(l),s))}extractCols(e,t){this.extractRowGroupCols(e,t),this.extractPivotCols(e,t),this.extractValueCols(e,t)}extractValueCols(e,t){this.valueCols=this.extractColsCommon(t,this.valueCols,(n,i)=>n.setValueActive(i,e),()=>{},()=>{},n=>{let i=n.aggFunc;if(i===null||i==="")return null;if(i!==void 0)return!!i},n=>n.initialAggFunc!=null&&n.initialAggFunc!=""),this.valueCols.forEach(n=>{let i=n.getColDef();i.aggFunc!=null&&i.aggFunc!=""?n.setAggFunc(i.aggFunc):n.getAggFunc()||n.setAggFunc(i.initialAggFunc)})}extractRowGroupCols(e,t){this.rowGroupCols=this.extractColsCommon(t,this.rowGroupCols,(n,i)=>n.setRowGroupActive(i,e),n=>n.rowGroupIndex,n=>n.initialRowGroupIndex,n=>n.rowGroup,n=>n.initialRowGroup)}extractPivotCols(e,t){this.pivotCols=this.extractColsCommon(t,this.pivotCols,(n,i)=>n.setPivotActive(i,e),n=>n.pivotIndex,n=>n.initialPivotIndex,n=>n.pivot,n=>n.initialPivot)}extractColsCommon(e=[],t=[],n,i,r,o,s){let a=[],l=[];(this.columnModel.getColDefCols()||[]).forEach(h=>{let p=e.indexOf(h)<0,g=h.getColDef(),m=yO(o(g)),v=yO(s(g)),C=Yh(i(g)),S=Yh(r(g)),_;m!==void 0?_=m:C!==void 0?C===null?_=!1:_=C>=0:p?v!==void 0?_=v:S!==void 0?_=S!=null&&S>=0:_=!1:_=t.indexOf(h)>=0,_&&((p?C!=null||S!=null:C!=null)?a.push(h):l.push(h))});let u=h=>{let p=i(h.getColDef()),g=r(h.getColDef());return p??g};a.sort((h,p)=>{let g=u(h),m=u(p);return g===m?0:g<m?-1:1});let d=[].concat(a);return t.forEach(h=>{l.indexOf(h)>=0&&d.push(h)}),l.forEach(h=>{d.indexOf(h)<0&&d.push(h)}),t.forEach(h=>{d.indexOf(h)<0&&n(h,!1)}),d.forEach(h=>{t.indexOf(h)<0&&n(h,!0)}),d}generateColumnStateForRowGroupAndPivotIndexes(e,t){let n={},i=(r,o,s,a,l,c)=>{let u=this.columnModel.getColDefCols();if(!o.length||!u)return[];let d=Object.keys(r),h=new Set(d),p=new Set(d),g=new Set(o.map(I=>{let E=I.getColId();return p.delete(E),E}).concat(d)),m=[],v={},C=0;for(let I=0;I<u.length;I++){let E=u[I].getColId();g.has(E)&&(m.push(E),v[E]=C++)}let S=1e3,_=!1,D=0,F=I=>{let E=v[I];for(let b=D;b<E;b++){let x=m[b];p.has(x)&&(r[x][l]=S++,p.delete(x))}D=E};o.forEach(I=>{let E=I.getColId();if(h.has(E))F(E),r[E][l]=S++;else{let b=I.getColDef();(b[l]===null||b[l]===void 0&&b[c]==null)&&(_||(b[s]||b[s]===void 0&&b[a]?F(E):(p.forEach(A=>{r[A][l]=S+v[A]}),S+=m.length,_=!0)),n[E]||(n[E]={colId:E}),n[E][l]=S++)}})};return i(e,this.rowGroupCols,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),i(t,this.pivotCols,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(n)}},qCe=class extends j{constructor(){super(...arguments),this.beanName="columnApplyStateService"}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.sortController=e.sortController,this.columnGetStateService=e.columnGetStateService,this.funcColsService=e.funcColsService,this.visibleColsService=e.visibleColsService,this.columnAnimationService=e.columnAnimationService,this.pivotResultColsService=e.pivotResultColsService}applyColumnState(e,t){let n=this.columnModel.getColDefCols()||[];if(Jo(n))return!1;if(e&&e.state&&!e.state.forEach)return X("applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;let i=this.funcColsService.getModifyColumnsNoEventsCallbacks(),r=(a,l,c)=>{let u=this.compareColumnStatesAndDispatchEvents(t),d=l.slice(),h={},p={},g=[],m=[],v=0,C=this.funcColsService.getRowGroupColumns().slice(),S=this.funcColsService.getPivotColumns().slice();a.forEach(I=>{let E=I.colId||"";if(E.startsWith(sD)){g.push(I),m.push(I);return}let x=c(E);x?(this.syncColumnWithStateItem(x,I,e.defaultState,h,p,!1,t,i),Xr(d,x)):(m.push(I),v+=1)});let _=I=>this.syncColumnWithStateItem(I,null,e.defaultState,h,p,!1,t,i);d.forEach(_),this.funcColsService.sortRowGroupColumns(hq.bind(this,h,C)),this.funcColsService.sortPivotColumns(hq.bind(this,p,S)),this.columnModel.refreshCols(!1);let F=(this.columnModel.getAutoCols()||[]).slice();return g.forEach(I=>{let E=this.columnModel.getAutoCol(I.colId);Xr(F,E),this.syncColumnWithStateItem(E,I,e.defaultState,null,null,!0,t,i)}),F.forEach(_),this.orderLiveColsLikeState(e),this.visibleColsService.refresh(t),this.eventDispatcher.everythingChanged(t),u(),{unmatchedAndAutoStates:m,unmatchedCount:v}};this.columnAnimationService.start();let{unmatchedAndAutoStates:o,unmatchedCount:s}=r(e.state||[],n,a=>this.columnModel.getColDefCol(a));if(o.length>0||ne(e.defaultState)){let l=this.pivotResultColsService.getPivotResultCols()?.list;s=r(o,l||[],c=>this.pivotResultColsService.getPivotResultCol(c)).unmatchedCount}return this.columnAnimationService.finish(),s===0}resetColumnState(e){let t=this.columnModel.getColDefCols();if(Jo(t))return;let n=this.columnModel.getColDefColTree(),i=UO(n),r=[],o=1e3,s=1e3,a=[],l=this.columnModel.getAutoCols();l&&(a=a.concat(l)),i&&(a=a.concat(i)),a.forEach(c=>{let u=this.getColumnStateFromColDef(c);St(u.rowGroupIndex)&&u.rowGroup&&(u.rowGroupIndex=o++),St(u.pivotIndex)&&u.pivot&&(u.pivotIndex=s++),r.push(u)}),this.applyColumnState({state:r,applyOrder:!0},e)}getColumnStateFromColDef(e){let t=(g,m)=>g??m??null,n=e.getColDef(),i=t(n.sort,n.initialSort),r=t(n.sortIndex,n.initialSortIndex),o=t(n.hide,n.initialHide),s=t(n.pinned,n.initialPinned),a=t(n.width,n.initialWidth),l=t(n.flex,n.initialFlex),c=t(n.rowGroupIndex,n.initialRowGroupIndex),u=t(n.rowGroup,n.initialRowGroup);c==null&&(u==null||u==!1)&&(c=null,u=null);let d=t(n.pivotIndex,n.initialPivotIndex),h=t(n.pivot,n.initialPivot);d==null&&(h==null||h==!1)&&(d=null,h=null);let p=t(n.aggFunc,n.initialAggFunc);return{colId:e.getColId(),sort:i,sortIndex:r,hide:o,pinned:s,width:a,flex:l,rowGroup:u,rowGroupIndex:c,pivot:h,pivotIndex:d,aggFunc:p}}syncColumnWithStateItem(e,t,n,i,r,o,s,a){if(!e)return;let l=(D,F)=>{let I={value1:void 0,value2:void 0},E=!1;return t&&(t[D]!==void 0&&(I.value1=t[D],E=!0),ne(F)&&t[F]!==void 0&&(I.value2=t[F],E=!0)),!E&&n&&(n[D]!==void 0&&(I.value1=n[D]),ne(F)&&n[F]!==void 0&&(I.value2=n[F])),I},c=l("hide").value1;c!==void 0&&e.setVisible(!c,s);let u=l("pinned").value1;u!==void 0&&e.setPinned(u);let d=e.getColDef().minWidth??this.gos.environment.getDefaultColumnMinWidth(),h=l("flex").value1;if(h!==void 0&&e.setFlex(h),h==null){let D=l("width").value1;D!=null&&d!=null&&D>=d&&e.setActualWidth(D,s)}let p=l("sort").value1;p!==void 0&&(p==="desc"||p==="asc"?e.setSort(p,s):e.setSort(void 0,s));let g=l("sortIndex").value1;if(g!==void 0&&e.setSortIndex(g),o||!e.isPrimary())return;let m=l("aggFunc").value1;m!==void 0&&(typeof m=="string"?(e.setAggFunc(m),e.isValueActive()||(e.setValueActive(!0,s),a.addValueCol(e))):(ne(m)&&X("stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,s),a.removeValueCol(e))));let{value1:v,value2:C}=l("rowGroup","rowGroupIndex");(v!==void 0||C!==void 0)&&(typeof C=="number"||v?(e.isRowGroupActive()||(e.setRowGroupActive(!0,s),a.addGroupCol(e)),i&&typeof C=="number"&&(i[e.getId()]=C)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,s),a.removeGroupCol(e)));let{value1:S,value2:_}=l("pivot","pivotIndex");(S!==void 0||_!==void 0)&&(typeof _=="number"||S?(e.isPivotActive()||(e.setPivotActive(!0,s),a.addPivotCol(e)),r&&typeof _=="number"&&(r[e.getId()]=_)):e.isPivotActive()&&(e.setPivotActive(!1,s),a.removePivotCol(e)))}orderLiveColsLikeState(e){if(!e.applyOrder||!e.state)return;let t=[];e.state.forEach(n=>{n.colId!=null&&t.push(n.colId)}),this.columnModel.sortColsLikeKeys(t)}compareColumnStatesAndDispatchEvents(e){let t={rowGroupColumns:this.funcColsService.getRowGroupColumns().slice(),pivotColumns:this.funcColsService.getPivotColumns().slice(),valueColumns:this.funcColsService.getValueColumns().slice()},n=this.columnGetStateService.getColumnState(),i={};return n.forEach(r=>{i[r.colId]=r}),()=>{let r=this.columnModel.getAllCols(),o=(m,v,C,S)=>{let _=v.map(S),D=C.map(S);if(qu(_,D))return;let I=new Set(v);C.forEach(b=>{I.delete(b)||I.add(b)});let E=[...I];this.eventService.dispatchEvent({type:m,columns:E,column:E.length===1?E[0]:null,source:e})},s=m=>{let v=[];return r.forEach(C=>{let S=i[C.getColId()];S&&m(S,C)&&v.push(C)}),v},a=m=>m.getColId();o("columnRowGroupChanged",t.rowGroupColumns,this.funcColsService.getRowGroupColumns(),a),o("columnPivotChanged",t.pivotColumns,this.funcColsService.getPivotColumns(),a);let c=s((m,v)=>{let C=m.aggFunc!=null,S=C!=v.isValueActive(),_=C&&m.aggFunc!=v.getAggFunc();return S||_});c.length>0&&this.eventDispatcher.columnChanged("columnValueChanged",c,e);let u=(m,v)=>m.width!=v.getActualWidth();this.eventDispatcher.columnResized(s(u),!0,e);let d=(m,v)=>m.pinned!=v.getPinned();this.eventDispatcher.columnPinned(s(d),e);let h=(m,v)=>m.hide==v.isVisible();this.eventDispatcher.columnVisible(s(h),e);let g=s((m,v)=>m.sort!=v.getSort()||m.sortIndex!=v.getSortIndex());g.length>0&&this.sortController.dispatchSortChangedEvents(e,g),this.normaliseColumnMovedEventForColumnState(n,e)}}normaliseColumnMovedEventForColumnState(e,t){let n=this.columnGetStateService.getColumnState(),i={};n.forEach(l=>i[l.colId]=l);let r={};e.forEach(l=>{i[l.colId]&&(r[l.colId]=!0)});let o=e.filter(l=>r[l.colId]),s=n.filter(l=>r[l.colId]),a=[];s.forEach((l,c)=>{let u=o&&o[c];if(u&&u.colId!==l.colId){let d=this.columnModel.getCol(u.colId);d&&a.push(d)}}),a.length&&this.eventDispatcher.columnMoved({movedColumns:a,source:t,finished:!0})}},hq=(e,t,n,i)=>{let r=e[n.getId()],o=e[i.getId()],s=r!=null,a=o!=null;if(s&&a)return r-o;if(s)return-1;if(a)return 1;let l=t.indexOf(n),c=t.indexOf(i),u=l>=0,d=c>=0;return u&&d?l-c:u?-1:1},KCe=class extends j{constructor(){super(...arguments),this.beanName="columnMoveService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher}moveColumnByIndex(e,t,n){let i=this.columnModel.getCols();if(!i)return;let r=i[e];this.moveColumns([r],t,n)}moveColumns(e,t,n,i=!0){let r=this.columnModel.getCols();if(!r)return;if(t>r.length-e.length){X("tried to insert columns in invalid location, toIndex = ",t),X("remember that you should not count the moving columns when calculating the new index");return}this.columnAnimationService.start();let o=this.columnModel.getColsForKeys(e);this.doesMovePassRules(o,t)&&(this.columnModel.moveInCols(o,t,n),this.eventDispatcher.columnMoved({movedColumns:o,source:n,toIndex:t,finished:i})),this.columnAnimationService.finish()}doesMovePassRules(e,t){let n=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(n)}doesOrderPassRules(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))}getProposedColumnOrder(e,t){let i=this.columnModel.getCols().slice();return jq(i,e,t),i}doesMovePassLockedPositions(e){let t=o=>o?o==="left"||o===!0?-1:1:0,n=this.gos.get("enableRtl"),i=n?1:-1,r=!0;return e.forEach(o=>{let s=t(o.getColDef().lockPosition);n?s>i&&(r=!1):s<i&&(r=!1),i=s}),r}doesMovePassMarryChildren(e){let t=!0,n=this.columnModel.getColTree();return mc(null,n,i=>{if(!Kr(i))return;let r=i,o=r.getColGroupDef();if(!(o&&o.marryChildren))return;let a=[];r.getLeafColumns().forEach(h=>{let p=e.indexOf(h);a.push(p)});let l=Math.max.apply(Math,a),c=Math.min.apply(Math,a),u=l-c,d=r.getLeafColumns().length-1;u>d&&(t=!1)}),t}placeLockedColumns(e){let t=[],n=[],i=[];return e.forEach(o=>{let s=o.getColDef().lockPosition;s==="right"?i.push(o):s==="left"||s===!0?t.push(o):n.push(o)}),this.gos.get("enableRtl")?[...i,...n,...t]:[...t,...n,...i]}},YCe=/[&<>"']/g,QCe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function XCe(e){let t=String.fromCharCode;function n(d){let h=[];if(!d)return[];let p=d.length,g=0,m,v;for(;g<p;)m=d.charCodeAt(g++),m>=55296&&m<=56319&&g<p?(v=d.charCodeAt(g++),(v&64512)==56320?h.push(((m&1023)<<10)+(v&1023)+65536):(h.push(m),g--)):h.push(m);return h}function i(d){if(d>=55296&&d<=57343)throw Error("Lone surrogate U+"+d.toString(16).toUpperCase()+" is not a scalar value")}function r(d,h){return t(d>>h&63|128)}function o(d){if(!(d&4294967168))return t(d);let h="";return d&4294965248?d&4294901760?d&4292870144||(h=t(d>>18&7|240),h+=r(d,12),h+=r(d,6)):(i(d),h=t(d>>12&15|224),h+=r(d,6)):h=t(d>>6&31|192),h+=t(d&63|128),h}let s=n(e),a=s.length,l=-1,c,u="";for(;++l<a;)c=s[l],u+=o(c);return u}function dl(e,t){if(e==null)return null;let n=e.toString().toString();return t?n:n.replace(YCe,i=>QCe[i])}function $Ce(e){if(!e||e==null)return null;let t=/([a-z])([A-Z])/g,n=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(n,"$1 $2$3").replace(/\./g," ").split(" ").map(r=>r.substring(0,1).toUpperCase()+(r.length>1?r.substring(1,r.length):"")).join(" ")}function ZCe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLocaleLowerCase()}`)}var JCe=class extends j{constructor(){super(...arguments),this.beanName="columnNameService"}wireBeans(e){this.expressionService=e.expressionService,this.funcColsService=e.funcColsService,this.columnModel=e.columnModel}getDisplayNameForColumn(e,t,n=!1){if(!e)return null;let i=this.getHeaderName(e.getColDef(),e,null,null,t);return n?this.wrapHeaderNameWithAggFunc(e,i):i}getDisplayNameForProvidedColumnGroup(e,t,n){let i=t?t.getColGroupDef():null;return i?this.getHeaderName(i,null,e,t,n):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,n,i,r){let o=e.headerValueGetter;if(o){let s=this.gos.addGridCommonParams({colDef:e,column:t,columnGroup:n,providedColumnGroup:i,location:r});return typeof o=="function"?o(s):typeof o=="string"?this.expressionService.evaluate(o,s):(X("headerValueGetter must be a function or a string"),"")}else{if(e.headerName!=null)return e.headerName;if(e.field)return $Ce(e.field)}return""}wrapHeaderNameWithAggFunc(e,t){if(this.gos.get("suppressAggFuncInHeader"))return t;let n=e.getColDef().pivotValueColumn,i=ne(n),r=null,o;if(i){let s=this.funcColsService.getValueColumns(),a=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&s.length===1,l=e.getColDef().pivotTotalColumnIds!==void 0;if(a&&!l)return t;r=n?n.getAggFunc():null,o=!0}else{let s=e.isValueActive(),a=this.columnModel.isPivotMode()||!this.funcColsService.isRowGroupEmpty();s&&a?(r=e.getAggFunc(),o=!0):o=!1}if(o){let s=typeof r=="string"?r:"func";return`${this.localeService.getLocaleTextFunc()(s,s)}(${t})`}return t}},ewe=class extends j{constructor(){super(...arguments),this.beanName="pivotResultColsService"}wireBeans(e){this.context=e.context,this.columnModel=e.columnModel,this.columnFactory=e.columnFactory,this.visibleColsService=e.visibleColsService}destroy(){zu(this.context,this.pivotResultCols?.tree),super.destroy()}isPivotResultColsPresent(){return this.pivotResultCols!=null}lookupPivotResultCol(e,t){if(this.pivotResultCols==null)return null;let n=this.columnModel.getColDefCol(t),i=null;return this.pivotResultCols.list.forEach(r=>{let o=r.getColDef().pivotKeys,s=r.getColDef().pivotValueColumn;qu(o,e)&&s===n&&(i=r)}),i}getPivotResultCols(){return this.pivotResultCols}getPivotResultCol(e){return this.pivotResultCols?this.columnModel.getColFromCollection(e,this.pivotResultCols):null}setPivotResultCols(e,t){if(this.columnModel.isReady()&&!(e==null&&this.pivotResultCols==null)){if(e){this.processPivotResultColDef(e);let n=this.columnFactory.createColumnTree(e,!1,this.pivotResultCols?.tree||this.previousPivotResultCols||void 0,t);zu(this.context,this.pivotResultCols?.tree,n.columnTree);let i=n.columnTree,r=n.treeDept,o=UO(i),s={};this.pivotResultCols={tree:i,treeDepth:r,list:o,map:s},this.pivotResultCols.list.forEach(l=>this.pivotResultCols.map[l.getId()]=l);let a=!!this.previousPivotResultCols;this.previousPivotResultCols=null,this.columnModel.refreshCols(!a)}else this.previousPivotResultCols=this.pivotResultCols?this.pivotResultCols.tree:null,this.pivotResultCols=null,this.columnModel.refreshCols(!1);this.visibleColsService.refresh(t)}}processPivotResultColDef(e){let t=this.gos.get("processPivotResultColDef"),n=this.gos.get("processPivotResultColGroupDef");if(!t&&!n)return;let i=r=>{r.forEach(o=>{if(ne(o.children)){let a=o;n&&n(a),i(a.children)}else t&&t(o)})};e&&i(e)}},twe=class extends j{constructor(){super(...arguments),this.beanName="columnSizeService"}wireBeans(e){this.columnModel=e.columnModel,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}setColumnWidths(e,t,n,i){let r=[];e.forEach(o=>{let s=this.columnModel.getColDefCol(o.key)||this.columnModel.getCol(o.key);if(!s)return;if(r.push({width:o.newWidth,ratios:[1],columns:[s]}),this.gos.get("colResizeDefault")==="shift"&&(t=!t),t){let l=this.visibleColsService.getColAfter(s);if(!l)return;let c=s.getActualWidth()-o.newWidth,u=l.getActualWidth()+c;r.push({width:u,ratios:[1],columns:[l]})}}),r.length!==0&&this.resizeColumnSets({resizeSets:r,finished:n,source:i})}resizeColumnSets(e){let{resizeSets:t,finished:n,source:i}=e;if(!(!t||t.every(u=>this.checkMinAndMaxWidthsForSet(u)))){if(n){let u=t&&t.length>0?t[0].columns:null;this.eventDispatcher.columnResized(u,n,i)}return}let o=[],s=[];t.forEach(u=>{let{width:d,columns:h,ratios:p}=u,g={},m={};h.forEach(S=>s.push(S));let v=!0,C=0;for(;v;){if(C++,C>1e3){kt("infinite loop in resizeColumnSets");break}v=!1;let S=[],_=0,D=d;h.forEach((I,E)=>{if(m[I.getId()])D-=g[I.getId()];else{S.push(I);let x=p[E];_+=x}});let F=1/_;S.forEach((I,E)=>{let b=E===S.length-1,x;b?x=D:(x=Math.round(p[E]*d*F),D-=x);let k=I.getMinWidth(),A=I.getMaxWidth();x<k?(x=k,m[I.getId()]=!0,v=!0):A>0&&x>A&&(x=A,m[I.getId()]=!0,v=!0),g[I.getId()]=x})}h.forEach(S=>{let _=g[S.getId()];S.getActualWidth()!==_&&(S.setActualWidth(_,i),o.push(S))})});let a=o.length>0,l=[];a&&(l=this.refreshFlexedColumns({resizingCols:s,skipSetLeft:!0}),this.visibleColsService.setLeftValues(i),this.visibleColsService.updateBodyWidths(),this.columnViewportService.checkViewportColumns());let c=s.concat(l);(a||n)&&this.eventDispatcher.columnResized(c,n,i,l)}checkMinAndMaxWidthsForSet(e){let{columns:t,width:n}=e,i=0,r=0,o=!0;t.forEach(l=>{let c=l.getMinWidth();i+=c||0;let u=l.getMaxWidth();u>0?r+=u:o=!1});let s=n>=i,a=!o||n<=r;return s&&a}refreshFlexedColumns(e={}){let t=e.source?e.source:"flex";if(e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];let n=this.visibleColsService.getCenterCols(),i=-1;if(e.resizingCols){let h=new Set(e.resizingCols);for(let p=n.length-1;p>=0;p--)if(h.has(n[p])){i=p;break}}let r=0,o=[],s=0,a=0;for(let h=0;h<n.length;h++)n[h].getFlex()&&h>i?(o.push(n[h]),a+=n[h].getFlex(),s+=n[h].getMinWidth()):r+=n[h].getActualWidth();if(!o.length)return[];let l=[];r+s>this.flexViewportWidth&&(o.forEach(h=>h.setActualWidth(h.getMinWidth(),t)),l=o,o=[]);let c=[],u;e:for(;;){u=this.flexViewportWidth-r;let h=u/a;for(let p=0;p<o.length;p++){let g=o[p],m=h*g.getFlex(),v=0,C=g.getMinWidth(),S=g.getMaxWidth();if(m<C?v=C:m>S&&(v=S),v){g.setActualWidth(v,t),Uq(o,g),a-=g.getFlex(),l.push(g),r+=g.getActualWidth();continue e}c[p]=Math.floor(m)}break}let d=u;return o.forEach((h,p)=>{let g=p<o.length-1?Math.min(c[p],d):Math.max(c[p],d);h.setActualWidth(g,t),l.push(h),d-=c[p]}),e.skipSetLeft||this.visibleColsService.setLeftValues(t),e.updateBodyWidths&&this.visibleColsService.updateBodyWidths(),e.fireResizedEvent&&this.eventDispatcher.columnResized(l,!0,t,o),o}sizeColumnsToFit(e,t="sizeColumnsToFit",n,i){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,n,i));return}let r={};i&&i?.columnLimits?.forEach(g=>{var m=g,{key:h}=m,p=Ab(m,["key"]);r[typeof h=="string"?h:h.getColId()]=p});let o=this.visibleColsService.getAllCols(),s=e===dc(o);if(e<=0||!o.length||s)return;let a=[],l=[];o.forEach(h=>{h.getColDef().suppressSizeToFit===!0?l.push(h):a.push(h)});let c=a.slice(0),u=!1,d=h=>{Xr(a,h),l.push(h)};for(a.forEach(h=>{h.resetActualWidth(t);let p=r?.[h.getId()],g=p?.minWidth??i?.defaultMinWidth,m=p?.maxWidth??i?.defaultMaxWidth,v=h.getActualWidth();typeof g=="number"&&v<g?h.setActualWidth(g,t,!0):typeof m=="number"&&v>m&&h.setActualWidth(m,t,!0)});!u;){u=!0;let h=e-dc(l);if(h<=0)a.forEach(p=>{let g=r?.[p.getId()]?.minWidth??i?.defaultMinWidth;if(typeof g=="number"){p.setActualWidth(g,t,!0);return}p.setMinimum(t)});else{let p=h/dc(a),g=h;for(let m=a.length-1;m>=0;m--){let v=a[m],C=r?.[v.getId()],S=C?.minWidth??i?.defaultMinWidth,_=C?.maxWidth??i?.defaultMaxWidth,D=v.getMinWidth(),F=v.getMaxWidth(),I=typeof S=="number"&&S>D?S:D,E=typeof _=="number"&&_<F?_:F,b=Math.round(v.getActualWidth()*p);b<I?(b=I,d(v),u=!1):b>E?(b=E,d(v),u=!1):m===0&&(b=g),v.setActualWidth(b,t,!0),g-=b}}}c.forEach(h=>{h.fireColumnWidthChangedEvent(t)}),this.visibleColsService.setLeftValues(t),this.visibleColsService.updateBodyWidths(),!n&&this.eventDispatcher.columnResized(c,!0,t)}applyAutosizeStrategy(){let e=this.gos.get("autoSizeStrategy");if(!e)return;let{type:t}=e;setTimeout(()=>{if(t==="fitGridWidth"){let{columnLimits:n,defaultMinWidth:i,defaultMaxWidth:r}=e,o=n?.map(({colId:s,minWidth:a,maxWidth:l})=>({key:s,minWidth:a,maxWidth:l}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:i,defaultMaxWidth:r,columnLimits:o})}else t==="fitProvidedWidth"&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}};function Xq(e,t){return e+"_"+t}function si(e){return e instanceof $q}var $q=class extends j{constructor(e,t,n,i){super(),this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.groupId=t,this.partId=n,this.providedColumnGroup=e,this.pinned=i}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return Xq(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){let e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{si(e)&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){let t=Rt(this.displayedChildren).getLeft();this.setLeft(t)}else{let e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach(t=>{e+=t.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){let e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){return!!this.getColGroupDef()?.autoHeaderHeight}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){let t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{Wu(t)?e.push(t):si(t)&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{Wu(t)?e.push(t):si(t)&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){let e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}this.children.forEach(n=>{if(si(n)&&(!n.displayedChildren||!n.displayedChildren.length))return;switch(n.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(n);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(n);break;default:this.displayedChildren.push(n);break}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},Zq=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){let t=this.existingIds[e],n;return typeof t!="number"?n=0:n=t+1,this.existingIds[e]=n,n}},nwe=class extends j{constructor(){super(...arguments),this.beanName="visibleColsService",this.colsAndGroupsMap={},this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher}refresh(e,t=!1){t||this.buildTrees(),this.updateOpenClosedVisibilityInColumnGroups(),this.columnsLeft=rO(this.treeLeft),this.columnsCenter=rO(this.treeCenter),this.columnsRight=rO(this.treeRight),this.joinColsAriaOrder(),this.joinCols(),this.setLeftValues(e),this.autoHeightCols=this.columns.filter(n=>n.isAutoHeight()),this.columnSizeService.refreshFlexedColumns(),this.updateBodyWidths(),this.columnViewportService.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(e),this.eventDispatcher.visibleCols(e)}updateBodyWidths(){let e=dc(this.columnsCenter),t=dc(this.columnsLeft),n=dc(this.columnsRight);this.bodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==n)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=n,this.eventService.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventService.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e){let t,n;this.gos.get("enableRtl")?(t=this.columnsLeft?this.columnsLeft[0]:null,n=this.columnsRight?Rt(this.columnsRight):null):(t=this.columnsLeft?Rt(this.columnsLeft):null,n=this.columnsRight?this.columnsRight[0]:null),this.columnModel.getCols().forEach(i=>{i.setLastLeftPinned(i===t,e),i.setFirstRightPinned(i===n,e)})}buildTrees(){let e=this.columnModel.getColsToShow(),t=e.filter(o=>o.getPinned()=="left"),n=e.filter(o=>o.getPinned()=="right"),i=e.filter(o=>o.getPinned()!="left"&&o.getPinned()!="right"),r=new Zq;this.treeLeft=this.createGroups({columns:t,idCreator:r,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=this.createGroups({columns:n,idCreator:r,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=this.createGroups({columns:i,idCreator:r,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.ariaOrderColumns=[]}joinColsAriaOrder(){let e=this.columnModel.getCols(),t=[],n=[],i=[];for(let r of e){let o=r.getPinned();o?o===!0||o==="left"?t.push(r):i.push(r):n.push(r)}this.ariaOrderColumns=t.concat(n).concat(i)}getAriaColIndex(e){let t;return si(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}getAllAutoHeightCols(){return this.autoHeightCols}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(e=>{e.forEach(t=>{si(t)&&t.checkLeft()})})}setLeftValuesOfCols(e){if(!this.columnModel.getColDefCols())return;let n=this.columnModel.getCols().slice(0),i=this.gos.get("enableRtl");[this.columnsLeft,this.columnsRight,this.columnsCenter].forEach(r=>{if(i){let o=dc(r);r.forEach(s=>{o-=s.getActualWidth(),s.setLeft(o,e)})}else{let o=0;r.forEach(s=>{s.setLeft(o,e),o+=s.getActualWidth()})}ICe(n,r)}),n.forEach(r=>{r.setLeft(null,e)})}joinCols(){this.gos.get("enableRtl")?this.columns=this.columnsRight.concat(this.columnsCenter).concat(this.columnsLeft):this.columns=this.columnsLeft.concat(this.columnsCenter).concat(this.columnsRight)}getColsCenter(){return this.columnsCenter}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}getTreeLeft(){return this.treeLeft}getTreeRight(){return this.treeRight}getTreeCenter(){return this.treeCenter}getAllCols(){return this.columns}isColDisplayed(e){return this.getAllCols().indexOf(e)>=0}getLeftColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsLeft):this.columnsLeft}getRightColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsRight):this.columnsRight}getColsForRow(e,t,n,i){let r=[],o=null;for(let s=0;s<t.length;s++){let a=t[s],l=t.length-s,c=Math.min(a.getColSpan(e),l),u=[a];if(c>1){let h=c-1;for(let p=1;p<=h;p++)u.push(t[s+p]);s+=h}let d;n?(d=!1,u.forEach(h=>{n(h)&&(d=!0)})):d=!0,d&&(r.length===0&&o&&(i&&i(a))&&r.push(o),r.push(a)),o=a}return r}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getCenterCols(){return this.columnsCenter}getLeftCols(){return this.columnsLeft}getRightCols(){return this.columnsRight}getColBefore(e){let t=this.getAllCols(),n=t.indexOf(e);return n>0?t[n-1]:null}getGroupAtDirection(e,t){let n=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),i=e.getDisplayedLeafColumns(),r=t==="After"?Rt(i):i[0],o=`getCol${t}`;for(;;){let s=this[o](r);if(!s)return null;let a=this.getColGroupAtLevel(s,n);if(a!==e)return a}}getColGroupAtLevel(e,t){let n=e.getParent(),i,r;for(;i=n.getProvidedColumnGroup().getLevel(),r=n.getPaddingLevel(),!(i+r<=t);)n=n.getParent();return n}isPinningLeft(){return this.columnsLeft.length>0}isPinningRight(){return this.columnsRight.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};let e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};qh(this.treeCenter,!1,e),qh(this.treeLeft,!1,e),qh(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){let e=this.getAllTrees();qh(e,!1,t=>{si(t)&&t.calculateDisplayedColumns()})}getFirstColumn(){let e=this.gos.get("enableRtl"),t=["getLeftCols","getCenterCols","getRightCols"];e&&t.reverse();for(let n=0;n<t.length;n++){let i=this[t[n]]();if(i.length)return e?Rt(i):i[0]}return null}getColumnGroup(e,t){if(!e)return null;if(si(e))return e;let n=this.getAllTrees(),i=typeof t=="number",r=null;return qh(n,!1,o=>{if(si(o)){let s=o,a;i?a=e===s.getGroupId()&&t===s.getPartId():a=e===s.getGroupId(),a&&(r=s)}}),r}getColAfter(e){let t=this.getAllCols(),n=t.indexOf(e);return n<t.length-1?t[n+1]:null}isBodyWidthDirty(){return this.bodyWidthDirty}setBodyWidthDirty(){this.bodyWidthDirty=!0}getColsLeftWidth(){return dc(this.columnsLeft)}getDisplayedColumnsRightWidth(){return dc(this.columnsRight)}isColAtEdge(e,t){let n=this.getAllCols();if(!n.length)return!1;let i=t==="first",r;if(si(e)){let o=e.getDisplayedLeafColumns();if(!o.length)return!1;r=i?o[0]:Rt(o)}else r=e;return(i?n[0]:Rt(n))===r}createGroups(e){let{columns:t,idCreator:n,pinned:i,oldDisplayedGroups:r,isStandaloneStructure:o}=e,s=this.mapOldGroupsById(r),a=[],l=t;for(;l.length;){let c=l;l=[];let u=0,d=h=>{let p=u;u=h;let g=c[p],v=(si(g)?g.getProvidedColumnGroup():g).getOriginalParent();if(v==null){for(let S=p;S<h;S++)a.push(c[S]);return}let C=this.createColGroup(v,n,s,i,o);for(let S=p;S<h;S++)C.addChild(c[S]);l.push(C)};for(let h=1;h<c.length;h++){let p=c[h],m=(si(p)?p.getProvidedColumnGroup():p).getOriginalParent(),v=c[u],S=(si(v)?v.getProvidedColumnGroup():v).getOriginalParent();m!==S&&d(h)}u<c.length&&d(c.length)}return o||this.setupParentsIntoCols(a,null),a}createColGroup(e,t,n,i,r){let o=e.getGroupId(),s=t.getInstanceIdForKey(o),a=Xq(o,s),l=n[a];return l&&l.getProvidedColumnGroup()!==e&&(l=null),ne(l)?l.reset():(l=new $q(e,o,s,i),r||this.createBean(l)),l}mapOldGroupsById(e){let t={},n=i=>{i.forEach(r=>{if(si(r)){let o=r;t[r.getUniqueId()]=o,n(o.getChildren())}})};return e&&n(e),t}setupParentsIntoCols(e,t){e.forEach(n=>{if(n.setParent(t),si(n)){let i=n;this.setupParentsIntoCols(i.getChildren(),i)}})}};function qh(e,t,n){if(e)for(let i=0;i<e.length;i++){let r=e[i];if(si(r)){let o=t?r.getDisplayedChildren():r.getChildren();qh(o,t,n)}n(r)}}function rO(e){let t=[];return qh(e,!0,n=>{Wu(n)&&t.push(n)}),t}var Jq=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel"],iwe=["scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","scrollGapChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnGroupHeaderHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged","overlayExclusiveChanged"],rwe=[...Jq,...iwe],owe={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0,suppressSetFilterByDefault:!0},wr=class{};wr.STRING_PROPERTIES=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"];wr.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","theme","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy","cellSelection","selectionColumnDef"];wr.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"];wr.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"];wr.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault"];wr.OTHER_PROPERTIES=["suppressStickyTotalRow","loadThemeGoogleFonts","rowSelection"];wr.FUNCTION_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"];wr.ALL_PROPERTIES=[...wr.ARRAY_PROPERTIES,...wr.OBJECT_PROPERTIES,...wr.STRING_PROPERTIES,...wr.NUMBER_PROPERTIES,...wr.FUNCTION_PROPERTIES,...wr.BOOLEAN_PROPERTIES,...wr.OTHER_PROPERTIES];var gC=wr,Fs=class{static getCallbackForEvent(t){return!t||t.length<2?t:"on"+t[0].toUpperCase()+t.substring(1)}};Fs.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY";Fs.PUBLIC_EVENTS=Jq;Fs.EVENT_CALLBACKS=rwe.map(e=>Fs.getCallbackForEvent(e));Fs.BOOLEAN_PROPERTIES=gC.BOOLEAN_PROPERTIES;Fs.ALL_PROPERTIES=gC.ALL_PROPERTIES;Fs.ALL_PROPERTIES_AND_CALLBACKS=[...Fs.ALL_PROPERTIES,...Fs.EVENT_CALLBACKS];Fs.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(Fs.ALL_PROPERTIES_AND_CALLBACKS);var mC=Fs;function eK(e,t){typeof e!="object"&&(e={});let n=B({},e);return mC.ALL_PROPERTIES_AND_CALLBACKS.forEach(r=>{let o=t[r];typeof o<"u"&&o!==mC.VUE_OMITTED_PROPERTY&&(n[r]=o)}),n}function tK(e,t){if(!e)return;let n={},i=!1;if(Object.keys(e).filter(s=>mC.ALL_PROPERTIES_AND_CALLBACKS_SET.has(s)).forEach(s=>{n[s]=e[s],i=!0}),!i)return;let r={type:"gridOptionsChanged",options:n};t.dispatchEvent(r);let o={type:"componentStateChanged"};Ts(n,(s,a)=>{o[s]=a}),t.dispatchEvent(o)}function bC(e,t,n){return n&&e.addDestroyFunc(()=>t.destroyBean(n)),n??e}var swe=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){let t=(e||"").split(" ");if(t.length>1){t.forEach(i=>this.addCssClass(i));return}if(this.cssClassStates[e]!==!0&&e.length){let i=this.getGui();i&&i.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){let t=(e||"").split(" ");if(t.length>1){t.forEach(i=>this.removeCssClass(i));return}if(this.cssClassStates[e]!==!1&&e.length){let i=this.getGui();i&&i.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){let t=this.getGui();return t?t.classList.contains(e):!1}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){let i=(e||"").split(" ");if(i.length>1){i.forEach(r=>this.addOrRemoveCssClass(r,t));return}}if(this.cssClassStates[e]!==t&&e.length){let i=this.getGui();i&&i.classList.toggle(e,t),this.cssClassStates[e]=t}}};function yc(e,t,n){n==null||typeof n=="string"&&n==""?nK(e,t):wa(e,t,n)}function wa(e,t,n){e.setAttribute(iK(t),n.toString())}function nK(e,t){e.removeAttribute(iK(t))}function iK(e){return`aria-${e}`}function es(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function awe(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function lwe(e){return e.getAttribute("aria-label")}function dm(e,t){yc(e,"label",t)}function vC(e,t){yc(e,"labelledby",t)}function rK(e,t){yc(e,"live",t)}function cwe(e,t){yc(e,"atomic",t)}function uwe(e,t){yc(e,"relevant",t)}function dwe(e,t){yc(e,"disabled",t)}function oK(e,t){yc(e,"hidden",t)}function Qx(e,t){wa(e,"expanded",t)}function hwe(e,t){wa(e,"setsize",t)}function fwe(e,t){wa(e,"posinset",t)}function pwe(e,t){wa(e,"multiselectable",t)}function gwe(e,t){wa(e,"rowcount",t)}function sK(e,t){wa(e,"rowindex",t)}function mwe(e,t){wa(e,"colcount",t)}function aK(e,t){wa(e,"colindex",t)}function vwe(e,t){wa(e,"colspan",t)}function ywe(e,t){wa(e,"sort",t)}function Cwe(e){nK(e,"sort")}function Xx(e,t){yc(e,"selected",t)}function wwe(e,t){yc(e,"controls",t.id),vC(t,e.id)}function KO(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var oO,Mx,sO,aO,lO,cO,DO,TO,uO;function fl(){return oO===void 0&&(oO=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),oO}function lK(){if(Mx===void 0)if(fl()){let e=navigator.userAgent.match(/version\/(\d+)/i);e&&(Mx=e[1]!=null?parseFloat(e[1]):0)}else Mx=0;return Mx}function YO(){if(sO===void 0){let e=window;sO=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return sO}function QO(){return aO===void 0&&(aO=/(firefox)/i.test(navigator.userAgent)),aO}function cK(){return lO===void 0&&(lO=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),lO}function Ku(){return cO===void 0&&(cO=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),cO}function RO(){return!fl()||lK()>=15}function IO(e){if(!e)return null;let t=e.tabIndex,n=e.getAttribute("tabIndex");return t===-1&&(n===null||n===""&&!QO())?null:t.toString()}function bwe(){if(uO!==void 0)return uO;if(!document.body)return-1;let e=1e6,t=QO()?6e6:1e9,n=document.createElement("div");for(document.body.appendChild(n);;){let i=e*2;if(n.style.height=i+"px",i>t||n.clientHeight!==i)break;e=i}return document.body.removeChild(n),uO=e,e}function Swe(){return document.body?.clientWidth??(window.innerHeight||document.documentElement?.clientWidth||-1)}function _we(){return document.body?.clientHeight??(window.innerHeight||document.documentElement?.clientHeight||-1)}function Ewe(){return TO==null&&uK(),TO}function uK(){let e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let n=t.offsetWidth-t.clientWidth;n===0&&t.clientWidth===0&&(n=null),t.parentNode&&t.parentNode.removeChild(t),n!=null&&(TO=n,DO=n===0)}function dK(){return DO==null&&uK(),DO}var Px;var xwe="[tabindex], input, select, button, textarea, [href]",hK="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function XO(e){let t=Element.prototype.matches||Element.prototype.msMatchesSelector,i=t.call(e,"input, select, button, textarea"),r=t.call(e,hK),o=Ca(e);return i&&!r&&o}function xn(e,t,n={}){let{skipAriaHidden:i}=n;e.classList.toggle("ag-hidden",!t),i||oK(e,!t)}function Dwe(e,t,n={}){let{skipAriaHidden:i}=n;e.classList.toggle("ag-invisible",!t),i||oK(e,!t)}function yC(e,t){let n="disabled",i=t?r=>r.setAttribute(n,""):r=>r.removeAttribute(n);i(e),CK(e.querySelectorAll("input"),r=>i(r))}function am(e,t,n){let i=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof n=="number"){if(++i>n)break}else if(e===n)break}return!1}function nf(e){let{height:t,width:n,borderTopWidth:i,borderRightWidth:r,borderBottomWidth:o,borderLeftWidth:s,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:u,marginTop:d,marginRight:h,marginBottom:p,marginLeft:g,boxSizing:m}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(n||"0"),borderTopWidth:parseFloat(i||"0"),borderRightWidth:parseFloat(r||"0"),borderBottomWidth:parseFloat(o||"0"),borderLeftWidth:parseFloat(s||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(c||"0"),paddingLeft:parseFloat(u||"0"),marginTop:parseFloat(d||"0"),marginRight:parseFloat(h||"0"),marginBottom:parseFloat(p||"0"),marginLeft:parseFloat(g||"0"),boxSizing:m}}function $O(e){let t=nf(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function SC(e){let t=nf(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function fK(e){let{height:t,marginBottom:n,marginTop:i}=nf(e);return Math.floor(t+n+i)}function $x(e){let{width:t,marginLeft:n,marginRight:i}=nf(e);return Math.floor(t+n+i)}function pK(e){let t=e.getBoundingClientRect(),{borderTopWidth:n,borderLeftWidth:i,borderRightWidth:r,borderBottomWidth:o}=nf(e);return{top:t.top+(n||0),left:t.left+(i||0),right:t.right+(r||0),bottom:t.bottom+(o||0)}}function Zx(){if(typeof Px=="boolean")return Px;let e=document.createElement("div");return e.style.direction="rtl",e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="0px",e.style.overflow="hidden",e.dir="rtl",e.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(e),e.scrollLeft=1,Px=Math.floor(e.scrollLeft)===0,document.body.removeChild(e),Px}function Jx(e,t){let n=e.scrollLeft;return t&&(n=Math.abs(n),YO()&&!Zx()&&(n=e.scrollWidth-e.getBoundingClientRect().width-n)),n}function eD(e,t,n){n&&(Zx()?t*=-1:(fl()||YO())&&(t=e.scrollWidth-e.getBoundingClientRect().width-t)),e.scrollLeft=t}function br(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function Is(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function gK(e){return!!e.offsetParent}function Ca(e){let t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!gK(e)||window.getComputedStyle(e).visibility!=="visible")}function CC(e){let t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function mK(e,t,n){n&&n.nextSibling===t||(e.firstChild?n?n.nextSibling?e.insertBefore(t,n.nextSibling):e.appendChild(t):e.firstChild&&e.firstChild!==t&&e.insertAdjacentElement("afterbegin",t):e.appendChild(t))}function vK(e,t){for(let n=0;n<t.length;n++){let i=t[n],r=e.children[n];r!==i&&e.insertBefore(i,r)}}function yK(e,t){if(t)for(let[n,i]of Object.entries(t)){if(!n||!n.length||i==null)continue;let r=ZCe(n),o=i.toString(),s=o.replace(/\s*!important/g,""),a=s.length!=o.length?"important":void 0;e.style.setProperty(r,s,a)}}function Twe(e){return e.clientWidth<e.scrollWidth}function Rwe(e){return e.clientHeight<e.scrollHeight}function tD(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):ya(e,t)}function ya(e,t){t=ZO(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function lC(e,t){t=ZO(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function ZO(e){return typeof e=="number"?`${e}px`:e}function JO(e){return e instanceof Node||e instanceof HTMLElement}function Iwe(e){if(e==null)return[];let t=[];return CK(e,n=>t.push(n)),t}function Fwe(e,t){if(e)for(let n=0;n<e.length;n++){let i=e[n];t(i.name,i.value)}}function As(e,t,n){n==null||n===""?e.removeAttribute(t):e.setAttribute(t,n.toString())}function CK(e,t){if(e!=null)for(let n=0;n<e.length;n++)t(e[n])}var hm=class{constructor(e=0,t=1){this.nextValue=e,this.step=t}next(){let e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}},Awe=1e3,Mwe=1e3,fq=100,wK=class Uh extends j{constructor(t,n,i,r){super(),this.parentComp=t,this.tooltipShowDelayOverride=n,this.tooltipHideDelayOverride=i,this.shouldDisplayTooltip=r,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(t){this.popupService=t.popupService,this.userComponentFactory=t.userComponentFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");let t=this.parentComp.getGui();this.tooltipTrigger===0&&this.addManagedListeners(t,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(t,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(t,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(t,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(t){let n=this.gos.get(t);return n<0&&X(`${t} should not be lower than 0`),Math.max(200,n)}getTooltipDelay(t){return t==="show"?this.tooltipShowDelayOverride??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipHideDelayOverride??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){let t=this.gos.get("tooltipTrigger");return!t||t==="hover"?0:1}onMouseEnter(t){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!Ku()&&(Uh.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(t)},fq):this.prepareToShowTooltip(t))}onMouseMove(t){this.lastMouseEvent&&(this.lastMouseEvent=t),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(t){let n=t.relatedTarget,i=this.parentComp.getGui(),r=this.tooltipComp?.getGui();this.isInteractingWithTooltip||i.contains(n)||this.interactionEnabled&&r?.contains(n)||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(t){if(this.state!=0||Uh.isLocked)return;let n=0;t&&(n=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=t||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),n),this.state=1}isLastTooltipHiddenRecently(){let t=new Date().getTime(),n=Uh.lastTooltipHideTime;return t-n<Awe}setToDoNothing(t){!t&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){let t=B({},this.parentComp.getTooltipParams());if(!ne(t.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;let n=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(t).newAgStackInstance().then(n)}hideTooltip(t){!t&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),Uh.lastTooltipHideTime=new Date().getTime()),this.eventService.dispatchEvent({type:"tooltipHide",parentGui:this.parentComp.getGui()}),t&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(t,n){if(this.state!==2||this.tooltipInstanceCount!==t){this.destroyBean(n);return}let r=n.getGui();this.tooltipComp=n,r.classList.contains("ag-tooltip")||r.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&r.classList.add("ag-tooltip-animate"),this.interactionEnabled&&r.classList.add("ag-tooltip-interactive");let o=this.localeService.getLocaleTextFunc(),s=this.popupService.addPopup({eChild:r,ariaLabel:o("ariaLabelTooltip","Tooltip")});if(s&&(this.tooltipPopupDestroyFunc=s.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){let a=()=>this.setToDoNothing();[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:a,columnMoved:a})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(r,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(Yn(this.gos),{keydown:a=>{r.contains(a?.target)||this.onKeyDown()}}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(r,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventService.dispatchEvent({type:"tooltipShow",tooltipGui:r,parentGui:this.parentComp.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){let t=this.tooltipComp?.getGui(),n=Dn(this.gos);return!!t&&t.contains(n)}onTooltipFocusOut(t){let n=this.parentComp.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,n.contains(t.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){let t={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(pe(B({},t),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(pe(B({},t),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");let t=this.tooltipPopupDestroyFunc,n=this.tooltipComp,i=this.tooltipTrigger===0?Mwe:0;window.setTimeout(()=>{t(),this.destroyBean(n)},i),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(t=>{t&&t()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){Uh.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},fq)}unlockService(){Uh.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};wK.isLocked=!1;var Pwe=wK,gm=class extends j{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}wireBeans(e){this.beans=e}postConstruct(){this.refreshToolTip()}setBrowserTooltip(e){let t="title",n=this.ctrl.getGui();n&&(e!=null&&e!=""?n.setAttribute(t,e):n.removeAttribute(t))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){if(this.tooltipManager!=null)return;let e={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new Pwe(e,this.ctrl.getTooltipShowDelayOverride?.(),this.ctrl.getTooltipHideDelayOverride?.(),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){let e=this.ctrl,t=e.getColumn?.(),n=e.getColDef?.(),i=e.getRowNode?.();return{location:e.getLocation(),colDef:n,column:t,rowIndex:e.getRowIndex?.(),node:i,data:i?.data,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?.(),hideTooltipCallback:()=>this.tooltipManager?.hideTooltip(!0)}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}},kwe=new hm,fe=null,At=class bK extends j{constructor(t,n){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=kwe.next(),this.cssClassManager=new swe(()=>this.eGui),this.componentSelectors=new Map((n??[]).map(i=>[i.selector,i])),t&&this.setTemplate(t)}preWireBeans(t){super.preWireBeans(t)}preConstruct(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips"),this.wireTemplate(this.getGui())}wireTemplate(t,n){t&&this.gos&&(this.applyElementsToComponent(t),this.createChildComponentsFromTags(t,n))}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(t){let{newTooltipText:n,showDelayOverride:i,hideDelayOverride:r,location:o,shouldDisplayTooltip:s}=t||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==n&&(this.tooltipText=n);let a=()=>this.tooltipText;n!=null&&(this.tooltipFeature=this.createBean(new gm({getTooltipValue:a,getGui:()=>this.getGui(),getLocation:()=>o??"UNKNOWN",getColDef:t?.getColDef,getColumn:t?.getColumn,getTooltipShowDelayOverride:i!=null?()=>i:void 0,getTooltipHideDelayOverride:r!=null?()=>r:void 0,shouldDisplayTooltip:s})))}getDataRefAttribute(t){return t.getAttribute?t.getAttribute("data-ref"):null}applyElementsToComponent(t,n,i,r=null){if(n===void 0&&(n=this.getDataRefAttribute(t)),n){let o=this[n];if(o===fe)this[n]=r??t;else{let s=i&&i[n];!this.suppressDataRefValidation&&!s&&X(`Issue with data-ref: ${n} on ${this.constructor.name} with ${o}`)}}}createChildComponentsFromTags(t,n){Iwe(t.childNodes).forEach(r=>{if(!(r instanceof HTMLElement))return;let o=this.createComponentFromElement(r,s=>{s.getGui()&&this.copyAttributesFromNode(r,s.getGui())},n);if(o){if(o.addItems&&r.children.length){this.createChildComponentsFromTags(r,n);let s=Array.prototype.slice.call(r.children);o.addItems(s)}this.swapComponentForNode(o,t,r)}else r.childNodes&&this.createChildComponentsFromTags(r,n)})}createComponentFromElement(t,n,i){let r=t.nodeName,o=this.getDataRefAttribute(t),s=r.indexOf("AG-")===0,a=s?this.componentSelectors.get(r):null,l=null;if(a){bK.elementGettingCreated=t;let c=i&&o?i[o]:void 0;l=new a.component(c),l.setParentComponent(this),this.createBean(l,null,n)}else s&&X(`Missing selector: ${r}`);return this.applyElementsToComponent(t,o,i,l),l}copyAttributesFromNode(t,n){Fwe(t.attributes,(i,r)=>n.setAttribute(i,r))}swapComponentForNode(t,n,i){let r=t.getGui();n.replaceChild(r,i),n.insertBefore(document.createComment(i.nodeName),r),this.addDestroyFunc(this.destroyBean.bind(this,t))}activateTabIndex(t){let n=this.gos.get("tabIndex");t||(t=[]),t.length||t.push(this.getGui()),t.forEach(i=>i.setAttribute("tabindex",n.toString()))}setTemplate(t,n,i){let r=CC(t);this.setTemplateFromElement(r,n,i)}setTemplateFromElement(t,n,i,r=!1){if(this.eGui=t,this.suppressDataRefValidation=r,n)for(let o=0;o<n.length;o++){let s=n[o];this.componentSelectors.set(s.selector,s)}this.wireTemplate(t,i)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(t){this.parentComponent=t}getParentComponent(){return this.parentComponent}setGui(t){this.eGui=t}queryForHtmlElement(t){return this.eGui.querySelector(t)}getContainerAndElement(t,n){let i=n;return t==null?null:(i||(i=this.eGui),JO(t)?{element:t,parent:i}:{element:t.getGui(),parent:i})}prependChild(t,n){let{element:i,parent:r}=this.getContainerAndElement(t,n)||{};!i||!r||r.insertAdjacentElement("afterbegin",i)}appendChild(t,n){let{element:i,parent:r}=this.getContainerAndElement(t,n)||{};!i||!r||r.appendChild(i)}isDisplayed(){return this.displayed}setVisible(t,n={}){if(t!==this.visible){this.visible=t;let{skipAriaHidden:i}=n;Dwe(this.eGui,t,{skipAriaHidden:i})}}setDisplayed(t,n={}){if(t!==this.displayed){this.displayed=t;let{skipAriaHidden:i}=n;xn(this.eGui,t,{skipAriaHidden:i});let r={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(r)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}addGuiEventListener(t,n,i){this.eGui.addEventListener(t,n,i),this.addDestroyFunc(()=>this.eGui.removeEventListener(t,n))}addCssClass(t){this.cssClassManager.addCssClass(t)}removeCssClass(t){this.cssClassManager.removeCssClass(t)}containsCssClass(t){return this.cssClassManager.containsCssClass(t)}addOrRemoveCssClass(t,n){this.cssClassManager.addOrRemoveCssClass(t,n)}},SK={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus",checkboxChecked:"checkbox-checked",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off"},Owe=(()=>{let e=new Set(Object.values(SK));return e.add("eye"),e})();function Nwe(e,t,n){let i=Zo(e,t,n);if(i){let{className:o}=i;if(typeof o=="string"&&o.indexOf("ag-icon")>-1||typeof o=="object"&&o["ag-icon"])return i}let r=document.createElement("span");return r.appendChild(i),r}function Zo(e,t,n,i){let r=null,o=n&&n.getColDef().icons;if(o&&(r=o[e]),t&&!r){let s=t.get("icons");s&&(r=s[e])}if(r){let s;if(typeof r=="function")s=r();else if(typeof r=="string")s=r;else throw new Error("icon from grid options needs to be a string or a function");if(typeof s=="string")return CC(s);if(JO(s))return s;X("iconRenderer should return back a string or a dom object")}else{let s=document.createElement("span"),a=SK[e]??(Owe.has(e)?e:void 0);return a||(i?a=e:(X(`Did not find icon ${e}`),a="")),s.setAttribute("class",`ag-icon ag-icon-${a}`),s.setAttribute("unselectable","on"),es(s,"presentation"),s}}var Lwe=class extends At{constructor(){super(...arguments),this.dragSource=null,this.eIcon=fe,this.eLabel=fe}postConstruct(){let e=t=>Nwe(t,this.gos,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(`<div class="ag-dnd-ghost ag-unselectable">
                <span data-ref="eIcon" class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
                <div data-ref="eLabel" class="ag-dnd-ghost-label"></div>
            </div>`)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t=!1){br(this.eIcon);let n=null;e||(e=this.dragSource?.getDefaultIconName?this.dragSource?.getDefaultIconName():"notAllowed"),n=this.dropIconMap[e],this.eIcon.classList.toggle("ag-shake-left-to-right",t),!(n===this.dropIconMap.hide&&this.gos.get("suppressDragLeaveHidesColumns"))&&n&&this.eIcon.appendChild(n)}setLabel(e){this.eLabel.textContent=dl(e)}};function _K(e,t,n){if(n===0)return!1;let i=Math.abs(e.clientX-t.clientX),r=Math.abs(e.clientY-t.clientY);return Math.max(i,r)<=n}var Uu=class{constructor(e,t=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new fm,this.eElement=e,this.preventMouseClick=t;let n=this.onTouchStart.bind(this),i=this.onTouchMove.bind(this),r=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",n,{passive:!0}),this.eElement.addEventListener("touchmove",i,{passive:!0}),this.eElement.addEventListener("touchend",r,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",n,{passive:!0}),this.eElement.removeEventListener("touchmove",i,{passive:!0}),this.eElement.removeEventListener("touchend",r,{passive:!1})})}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;let t=this.touchStart;window.setTimeout(()=>{let n=this.touchStart===t;if(this.touching&&n&&!this.moved){this.moved=!0;let i={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(i)}},500)}onTouchMove(e){if(!this.touching)return;let t=this.getActiveTouch(e.touches);if(!t)return;!_K(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){let t={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(t),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){let e=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){let n={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(n),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}};function tC(e,t){return`<span data-ref="eSort${e}" class="ag-sort-indicator-icon ag-sort-${t} ag-hidden" aria-hidden="true"></span>`}var Vwe=`<span class="ag-sort-indicator-container">
        ${tC("Order","order")}
        ${tC("Asc","ascending-icon")}
        ${tC("Desc","descending-icon")}
        ${tC("Mixed","mixed-icon")}
        ${tC("None","none-icon")}
    </span>`,eN=class extends At{constructor(e){super(),this.eSortOrder=fe,this.eSortAsc=fe,this.eSortDesc=fe,this.eSortMixed=fe,this.eSortNone=fe,e||this.setTemplate(Vwe)}wireBeans(e){this.sortController=e.sortController}attachCustomElements(e,t,n,i,r){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=n,this.eSortMixed=i,this.eSortNone=r}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!this.column.isSortable()&&!this.column.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);let n=this.updateIcons.bind(this),i=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",n),this.addManagedEventListeners({newColumnsLoaded:n,sortChanged:i,columnRowGroupChanged:i}),this.onSortChanged()}addInIcon(e,t,n){if(t==null)return;let i=Zo(e,this.gos,n);i&&t.appendChild(i)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){let e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){let t=e==="asc";xn(this.eSortAsc,t,{skipAriaHidden:!0})}if(this.eSortDesc){let t=e==="desc";xn(this.eSortDesc,t,{skipAriaHidden:!0})}if(this.eSortNone){let t=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),n=e==null;xn(this.eSortNone,!t&&n,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);let e=this.column.getColDef().showRowGroup;ul(this.gos)&&e&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){let e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";xn(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){if(!this.eSortOrder)return;let e=this.sortController.getColumnsWithSortingOrdered(),t=this.sortController.getDisplaySortIndexForColumn(this.column)??-1,n=e.some(r=>this.sortController.getDisplaySortIndexForColumn(r)??!1),i=t>=0&&n;xn(this.eSortOrder,i,{skipAriaHidden:!0}),t>=0?this.eSortOrder.textContent=(t+1).toString():br(this.eSortOrder)}},Bwe={selector:"AG-SORT-INDICATOR",component:eN},Gwe=`<div class="ag-cell-label-container" role="presentation">
        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">
            <span data-ref="eText" class="ag-header-cell-text"></span>
            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
            <ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>
        </div>
    </div>`,FO=class extends At{constructor(){super(...arguments),this.eFilter=fe,this.eFilterButton=fe,this.eSortIndicator=fe,this.eMenu=fe,this.eLabel=fe,this.eText=fe,this.eSortOrder=fe,this.eSortAsc=fe,this.eSortDesc=fe,this.eSortMixed=fe,this.eSortNone=fe,this.lastMovingChanged=0}wireBeans(e){this.sortController=e.sortController,this.menuService=e.menuService,this.funcColsService=e.funcColsService}destroy(){super.destroy()}refresh(e){let t=this.params;return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon?!1:(this.setDisplayName(e),!0)}workOutTemplate(){let e=this.params.template??Gwe;return e=e&&e.trim?e.trim():e,e}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,[Bwe]),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;let t=dl(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=t)}}addInIcon(e,t,n){if(t==null)return;let i=Zo(e,this.gos,n);i&&t.appendChild(i)}setupTap(){let{gos:e}=this;if(e.get("suppressTouch"))return;let t=new Uu(this.getGui(),!0),n=this.shouldSuppressMenuHide(),i=n&&ne(this.eMenu),r=i?new Uu(this.eMenu,!0):t;if(this.params.enableMenu){let o=i?"tap":"longTap",s=a=>this.params.showColumnMenuAfterMouseClick(a.touchStart);this.addManagedListeners(r,{[o]:s})}if(this.params.enableSorting){let o=s=>{let a=s.touchStart.target;n&&(this.eMenu?.contains(a)||this.eFilterButton?.contains(a))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListeners(t,{tap:o})}if(this.params.enableFilterButton){let o=new Uu(this.eFilterButton,!0);this.addManagedListeners(o,{tap:()=>this.params.showFilter(this.eFilterButton)}),this.addDestroyFunc(()=>o.destroy())}this.addDestroyFunc(()=>t.destroy()),i&&this.addDestroyFunc(()=>r.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){Is(this.eMenu),this.eMenu=void 0;return}let e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedElementListeners(this.eMenu,{click:()=>this.params.showColumnMenu(this.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){let t=this.params.column,n=this.menuService.isLegacyMenuEnabled();if(e&&!n){if(this.menuService.isFilterMenuInHeaderEnabled(t))return this.params.showFilter(this.eFilterButton??this.eMenu??this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu(this.eMenu??this.eFilterButton??this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.createBean(new eN(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListeners(this.params.column,{movingChanged:()=>{this.lastMovingChanged=new Date().getTime()}}),this.eLabel&&this.addManagedElementListeners(this.eLabel,{click:t=>{let n=this.params.column.isMoving(),r=new Date().getTime()-this.lastMovingChanged<50;if(!(n||r)){let a=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.params.progressSort(a)}}});let e=()=>{let t=this.params.column.getSort();if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",t==="asc"),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",t==="desc"),this.addOrRemoveCssClass("ag-header-cell-sorted-none",!t),this.params.column.getColDef().showRowGroup){let r=!this.funcColsService.getSourceColumnsForGroupColumn(this.params.column)?.every(o=>this.params.column.getSort()==o.getSort());this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",r)}};this.addManagedEventListeners({sortChanged:e,columnRowGroupChanged:e})}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedElementListeners(this.eFilterButton,{click:()=>this.params.showFilter(this.eFilterButton)}):this.eFilterButton=void 0}configureFilter(e,t,n){if(!e)return Is(t),!1;let i=this.params.column;return this.addInIcon("filter",t,i),this.addManagedListeners(i,{filterChanged:n}),n(),!0}onFilterChangedIcon(){let e=this.params.column.isFilterActive();xn(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){let e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){return e?this.eFilterButton??this.eMenu??this.getGui():this.eMenu??this.eFilterButton??this.getGui()}},Hwe=class extends At{constructor(){super(`<div class="ag-header-group-cell-label" role="presentation">
            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`),this.agOpened=fe,this.agClosed=fe,this.agLabel=fe}wireBeans(e){this.columnModel=e.columnModel}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&X("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened",this.agOpened),this.addInIcon("columnGroupClosed",this.agClosed);let e=r=>{if(pc(r))return;let o=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),o,"uiColumnExpanded")};this.addTouchAndClickListeners(this.agClosed,e),this.addTouchAndClickListeners(this.agOpened,e);let t=r=>{um(r)};this.addManagedElementListeners(this.agClosed,{dblclick:t}),this.addManagedElementListeners(this.agOpened,{dblclick:t}),this.addManagedElementListeners(this.getGui(),{dblclick:e}),this.updateIconVisibility();let n=this.params.columnGroup.getProvidedColumnGroup(),i=this.updateIconVisibility.bind(this);this.addManagedListeners(n,{expandedChanged:i,expandableChanged:i})}addTouchAndClickListeners(e,t){let n=new Uu(e,!0);this.addManagedListeners(n,{tap:t}),this.addDestroyFunc(()=>n.destroy()),this.addManagedElementListeners(e,{click:t})}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){let t=this.params.columnGroup.isExpanded();xn(this.agOpened,t),xn(this.agClosed,!t)}else xn(this.agOpened,!1),xn(this.agClosed,!1)}addInIcon(e,t){let n=Zo(e,this.gos,null);n&&t.appendChild(n)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){xn(this.agOpened,!1),xn(this.agClosed,!1);return}}setupLabel(){let{displayName:e,columnGroup:t}=this.params;if(ne(e)){let n=dl(e,!0);this.agLabel.textContent=n}this.addOrRemoveCssClass("ag-sticky-label",!t.getColGroupDef()?.suppressStickyLabel)}},zwe="\u2191",Uwe="\u2193",jwe=class extends At{constructor(){super(),this.refreshCount=0;let e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");let n=document.createElement("span");n.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(n),this.setTemplateFromElement(e)}wireBeans(e){this.filterManager=e.filterManager}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){let n=Math.abs(t),i=e.formatValue(n),r=ne(i)?i:n,o=t>=0;o?this.eDelta.textContent=zwe+r:this.eDelta.textContent=Uwe+r,this.eDelta.classList.toggle("ag-value-change-delta-up",o),this.eDelta.classList.toggle("ag-value-change-delta-down",!o)}setTimerToRemoveDelta(){this.refreshCount++;let e=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),br(this.eDelta)}refresh(e,t=!1){let n=e.value;if(n===this.lastValue||(ne(e.valueFormatted)?this.eValue.textContent=e.valueFormatted:ne(e.value)?this.eValue.textContent=n:br(this.eValue),this.filterManager?.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof n=="number"&&typeof this.lastValue=="number"){let i=n-this.lastValue;this.showDelta(e,i)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=n,!0}},Wwe=class extends At{constructor(){super(),this.refreshCount=0;let e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}wireBeans(e){this.filterManager=e.filterManager}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;let e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);let t=document.createElement("span");t.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=t,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(e,t=!1){let n=e.value;return St(n)&&(n=""),n===this.lastValue||this.filterManager?.isSuppressFlashingCellsBecauseFiltering()?!1:(t||this.addSlideAnimation(),this.lastValue=n,ne(e.valueFormatted)?this.eCurrent.textContent=e.valueFormatted:ne(e.value)?this.eCurrent.textContent=n:br(this.eCurrent),!0)}},G=class{};G.BACKSPACE="Backspace";G.TAB="Tab";G.ENTER="Enter";G.ESCAPE="Escape";G.SPACE=" ";G.LEFT="ArrowLeft";G.UP="ArrowUp";G.RIGHT="ArrowRight";G.DOWN="ArrowDown";G.DELETE="Delete";G.F2="F2";G.PAGE_UP="PageUp";G.PAGE_DOWN="PageDown";G.PAGE_HOME="Home";G.PAGE_END="End";G.A="KeyA";G.C="KeyC";G.D="KeyD";G.V="KeyV";G.X="KeyX";G.Y="KeyY";G.Z="KeyZ";var qwe=class extends At{constructor(e,t,n){super(t,n),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");let{labelSeparator:e,label:t,labelWidth:n,labelAlignment:i,disabled:r}=this.config;r!=null&&this.setDisabled(r),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),n!=null&&this.setLabelWidth(n),this.setLabelAlignment(i||this.labelAlignment),this.refreshLabel()}refreshLabel(){br(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(xn(this.eLabel,!1),es(this.eLabel,"presentation")):(xn(this.eLabel,!0),es(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){let n=this.getGui().classList;return n.toggle("ag-label-align-left",e==="left"),n.toggle("ag-label-align-right",e==="right"),n.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(tD(this.eLabel,e),this)}setDisabled(e){e=!!e;let t=this.getGui();return yC(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},EK=class extends qwe{constructor(e,t,n,i){super(e,t,n),this.className=i}postConstruct(){super.postConstruct();let{width:e,value:t,onValueChange:n}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),n!=null&&this.onValueChange(n),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){let e=this.getAriaElement(),t=this.getLabelId(),n=this.getLabel();n==null||n==""||lwe(e)!==null?vC(e,""):vC(e,t??"")}setAriaLabel(e){return dm(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return ya(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}},Kh=class extends EK{constructor(e,t,n="text",i="input"){super(e,e?.template??`
            <div role="presentation">
                <div data-ref="eLabel" class="ag-input-field-label"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${i} data-ref="eInput" class="ag-input-field-input"></${i}>
                </div>
            </div>`,[],t),this.inputType=n,this.displayFieldTag=i,this.eLabel=fe,this.eWrapper=fe,this.eInput=fe}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;let{inputName:e,inputWidth:t}=this.config;e!=null&&this.setInputName(e),t!=null&&this.setInputWidth(t),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return tD(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){let t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return As(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return dm(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return yC(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)As(this.eInput,"autocomplete",null);else{let t=typeof e=="string"?e:"off";As(this.eInput,"autocomplete",t)}return this}},tN=class extends Kh{constructor(e,t="ag-checkbox",n="checkbox"){super(e,t,n),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();let{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;let e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){let t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,t,n){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:n});let i=this.getInputElement();this.eventService.dispatchEvent({type:"checkboxChanged",id:i.id,name:i.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;let t=this.isSelected(),n=this.selected=e.target.checked;this.refreshSelectedClass(n),this.dispatchChange(n,t,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",e===!0),this.eWrapper.classList.toggle("ag-indeterminate",e==null)}},nN={selector:"AG-CHECKBOX",component:tN},Kwe=class extends At{constructor(){super(`
            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[nN]),this.eCheckbox=fe}init(e){this.refresh(e);let t=this.eCheckbox.getInputElement();t.setAttribute("tabindex","-1"),rK(t,"polite"),this.addManagedListeners(t,{click:n=>{if(um(n),this.eCheckbox.isDisabled())return;let i=this.eCheckbox.getValue();this.onCheckboxChanged(i)},dblclick:n=>{um(n)}}),this.addManagedElementListeners(this.params.eGridCell,{keydown:n=>{if(n.key===G.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===Dn(this.gos)&&this.eCheckbox.toggle();let i=this.eCheckbox.getValue();this.onCheckboxChanged(i),n.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,n=!0;if(e.node.group&&e.column)if(typeof e.value=="boolean")t=e.value;else{let a=e.column.getColId();a.startsWith(sD)?t=e.value==null||e.value===""?void 0:e.value==="true":e.node.aggData&&e.node.aggData[a]!==void 0?t=e.value??void 0:n=!1}else t=e.value??void 0;if(!n){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(t);let i=e.disabled!=null?e.disabled:!e.column?.isCellEditable(e.node);this.eCheckbox.setDisabled(i);let r=this.localeService.getLocaleTextFunc(),o=KO(r,t),s=i?o:`${r("ariaToggleCellValue","Press SPACE to toggle cell value")} (${o})`;this.eCheckbox.setInputAriaLabel(s)}onCheckboxChanged(e){let{column:t,node:n,value:i}=this.params;this.eventService.dispatchEvent({type:"cellEditingStarted",column:t,colDef:t?.getColDef(),data:n.data,node:n,rowIndex:n.rowIndex,rowPinned:n.rowPinned,value:i});let r=this.params.node.setDataValue(this.params.column,e,"edit");this.eventService.dispatchEvent({type:"cellEditingStopped",column:t,colDef:t?.getColDef(),data:n.data,node:n,rowIndex:n.rowIndex,rowPinned:n.rowPinned,value:i,oldValue:i,newValue:e,valueChanged:r}),r||this.updateCheckbox(this.params)}},Ywe=class extends At{constructor(){super(`<div class="ag-loading">
            <span class="ag-loading-icon" data-ref="eLoadingIcon"></span>
            <span class="ag-loading-text" data-ref="eLoadingText"></span>
        </div>`),this.eLoadingIcon=fe,this.eLoadingText=fe}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){let e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){let e=Zo("groupLoading",this.gos,null);e&&this.eLoadingIcon.appendChild(e);let t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}},Qwe=class extends At{constructor(){super('<div class="ag-skeleton-container"></div>')}init(e){let t=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",t),this.addDestroyFunc(()=>vC(e.eParentOfValue)),vC(e.eParentOfValue,t),e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){let e=this.localeService.getLocaleTextFunc();this.getGui().innerText=e("loadingError","ERR");let t=e("ariaSkeletonCellLoadingFailed","Row failed to load");dm(this.getGui(),t)}setupLoading(e){let n=Yn(this.gos).createElement("div");n.classList.add("ag-skeleton-effect");let i=e.node.rowIndex;if(i!=null){let s=75+25*(i%2===0?Math.sin(i):Math.cos(i));n.style.width=`${s}%`}this.getGui().appendChild(n);let o=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");dm(this.getGui(),o)}refresh(e){return!1}destroy(){super.destroy()}},xK=class extends At{constructor(){super()}destroy(){super.destroy()}},Xwe=class extends xK{init(){let e=fc(this.gos.get("overlayLoadingTemplate")?.trim());if(this.setTemplate(e??'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!e){let t=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=t("loadingOoo","Loading...")})}}},$we=class extends xK{init(){let e=fc(this.gos.get("overlayNoRowsTemplate")?.trim());if(this.setTemplate(e??'<span class="ag-overlay-no-rows-center"></span>'),!e){let t=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=t("noRowsToShow","No Rows To Show")})}}},mm=class extends At{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){let e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},Zwe=class extends mm{constructor(){super('<div class="ag-tooltip"></div>')}init(e){let{value:t}=e;this.getGui().textContent=dl(t,!0)}};function DK(e){let{inputValue:t,allSuggestions:n,hideIrrelevant:i,filterByPercentageOfBestMatch:r,addSequentialWeight:o}=e,s=n.map((c,u)=>({value:c,relevance:ebe(t.toLowerCase(),c.toLocaleLowerCase(),o),idx:u}));if(s.sort((c,u)=>u.relevance-c.relevance),i&&(s=s.filter(c=>c.relevance!==0)),s.length>0&&r&&r>0){let u=s[0].relevance*r;s=s.filter(d=>u-d.relevance<0)}let a=[],l=[];for(let c of s)a.push(c.value),l.push(c.idx);return{values:a,indices:l}}function Jwe(e){let t=[],n=e.length;for(let i=1;i<=n;i++)for(let r=0;r<=n-i;r++){let o=r+i-1;t.push(e.slice(r,o+1))}return t}function ebe(e,t,n=!1){let i=e.replace(/\s/g,""),r=t.replace(/\s/g,""),o=i.length,s=r.length,a=new Array(o+1).fill(null).map(()=>new Array(s+1).fill(0));for(let d=0;d<=o;d+=1)a[d][0]=d;for(let d=0;d<=s;d+=1)a[0][d]=d;for(let d=1;d<=o;d++)for(let h=1;h<=s;h++)i[d-1]===r[h-1]?a[d][h]=a[d-1][h-1]:a[d][h]=1+Math.min(a[d][h-1],Math.min(a[d-1][h],a[d-1][h-1]));let l=a[o][s],u=Math.max(o,s)-l;if(n){let d=Jwe(i);for(let h=0;h<d.length;h++){let p=d[h];r.indexOf(p)!==-1&&(u+=1,u*=p.length)}}return u}var tbe=class extends j{constructor(){super(...arguments),this.beanName="userComponentRegistry",this.agGridDefaults={agDragAndDropImage:Lwe,agColumnHeader:FO,agColumnGroupHeader:Hwe,agSortIndicator:eN,agAnimateShowChangeCellRenderer:jwe,agAnimateSlideCellRenderer:Wwe,agLoadingCellRenderer:Ywe,agSkeletonCellRenderer:Qwe,agCheckboxCellRenderer:Kwe,agLoadingOverlay:Xwe,agNoRowsOverlay:$we,agTooltipComponent:Zwe},this.agGridDefaultParams={},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agGroupCellRenderer:"@ag-grid-enterprise/row-grouping",agGroupRowRenderer:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}postConstruct(){let e=this.gos.get("components");e!=null&&Ts(e,(t,n)=>this.registerJsComponent(t,n))}registerDefaultComponent(e,t,n){this.agGridDefaults[e]=t,n&&(this.agGridDefaultParams[e]=n)}registerJsComponent(e,t){this.jsComps[e]=t}retrieve(e,t){let n=(a,l,c)=>({componentFromFramework:l,component:a,params:c}),i=this.getFrameworkOverrides().frameworkComponent(t,this.gos.get("components"));if(i!=null)return n(i,!0);let r=this.jsComps[t];if(r){let a=this.getFrameworkOverrides().isFrameworkComponent(r);return n(r,a)}let o=this.agGridDefaults[t];if(o)return n(o,!1,this.agGridDefaultParams[t]);let s=this.enterpriseAgDefaultCompsModule[t];return s?this.gos.assertModuleRegistered(s,`AG Grid '${e}' component: ${t}`):VO(()=>{this.warnAboutMissingComponent(e,t)},"MissingComp"+t),null}warnAboutMissingComponent(e,t){let n=[...Object.keys(this.agGridDefaults).filter(r=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(r)),...Object.keys(this.jsComps)],i=DK({inputValue:t,allSuggestions:n,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;X(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.`),i.length>0&&X(`         Did you mean: [${i.slice(0,3)}]?`),X(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}},$o=class oC{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(n=>this.onDone(n),n=>this.onReject(n))}static all(t){return t.length?new oC(n=>{let i=t.length,r=new Array(i);t.forEach((o,s)=>{o.then(a=>{r[s]=a,i--,i===0&&n(r)})})}):oC.resolve()}static resolve(t=null){return new oC(n=>n(t))}then(t){return new oC(n=>{this.status===1?n(t(this.resolution)):this.waiters.push(i=>n(t(i)))})}onDone(t){this.status=1,this.resolution=t,this.waiters.forEach(n=>n(t))}onReject(t){}},nbe={propertyName:"dateComponent",cellRenderer:!1},ibe={propertyName:"dragAndDropImageComponent",cellRenderer:!1},rbe={propertyName:"headerComponent",cellRenderer:!1},obe={propertyName:"headerGroupComponent",cellRenderer:!1},pq={propertyName:"cellRenderer",cellRenderer:!0},sbe={propertyName:"cellRenderer",cellRenderer:!1},abe={propertyName:"loadingCellRenderer",cellRenderer:!0},lbe={propertyName:"cellEditor",cellRenderer:!1},gq={propertyName:"innerRenderer",cellRenderer:!0},cbe={propertyName:"loadingOverlayComponent",cellRenderer:!1},ube={propertyName:"noRowsOverlayComponent",cellRenderer:!1},dbe={propertyName:"tooltipComponent",cellRenderer:!1},iN={propertyName:"filter",cellRenderer:!1},hbe={propertyName:"floatingFilterComponent",cellRenderer:!1},fbe={propertyName:"toolPanel",cellRenderer:!1},pbe={propertyName:"statusPanel",cellRenderer:!1},gbe={propertyName:"fullWidthCellRenderer",cellRenderer:!0},mbe={propertyName:"loadingCellRenderer",cellRenderer:!0},vbe={propertyName:"groupRowRenderer",cellRenderer:!0},ybe={propertyName:"detailCellRenderer",cellRenderer:!0},Cbe={propertyName:"menuItem",cellRenderer:!1},TK=class RK extends j{constructor(){super(...arguments),this.beanName="userComponentFactory"}wireBeans(t){this.agComponentUtils=t.agComponentUtils,this.componentMetadataProvider=t.componentMetadataProvider,this.userComponentRegistry=t.userComponentRegistry,this.frameworkComponentWrapper=t.frameworkComponentWrapper,this.gridOptions=t.gridOptions}getDragAndDropImageCompDetails(t){return this.getCompDetails(this.gridOptions,ibe,"agDragAndDropImage",t,!0)}getHeaderCompDetails(t,n){return this.getCompDetails(t,rbe,"agColumnHeader",n)}getHeaderGroupCompDetails(t){let n=t.columnGroup.getColGroupDef();return this.getCompDetails(n,obe,"agColumnGroupHeader",t)}getFullWidthCellRendererDetails(t){return this.getCompDetails(this.gridOptions,gbe,null,t,!0)}getFullWidthLoadingCellRendererDetails(t){return this.getCompDetails(this.gridOptions,mbe,"agLoadingCellRenderer",t,!0)}getFullWidthGroupCellRendererDetails(t){return this.getCompDetails(this.gridOptions,vbe,"agGroupRowRenderer",t,!0)}getFullWidthDetailCellRendererDetails(t){return this.getCompDetails(this.gridOptions,ybe,"agDetailCellRenderer",t,!0)}getInnerRendererDetails(t,n){return this.getCompDetails(t,gq,null,n)}getFullWidthGroupRowInnerCellRenderer(t,n){return this.getCompDetails(t,gq,null,n)}getCellRendererDetails(t,n){return this.getCompDetails(t,pq,null,n)}getEditorRendererDetails(t,n){return this.getCompDetails(t,sbe,null,n)}getLoadingCellRendererDetails(t,n){return this.getCompDetails(t,abe,"agSkeletonCellRenderer",n,!0)}getCellEditorDetails(t,n){return this.getCompDetails(t,lbe,"agCellEditor",n,!0)}getFilterDetails(t,n,i){return this.getCompDetails(t,iN,i,n,!0)}getDateCompDetails(t){return this.getCompDetails(this.gridOptions,nbe,"agDateInput",t,!0)}getLoadingOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,cbe,"agLoadingOverlay",t,!0)}getNoRowsOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,ube,"agNoRowsOverlay",t,!0)}getTooltipCompDetails(t){return this.getCompDetails(t.colDef,dbe,"agTooltipComponent",t,!0)}getSetFilterCellRendererDetails(t,n){return this.getCompDetails(t,pq,null,n)}getFloatingFilterCompDetails(t,n,i){return this.getCompDetails(t,hbe,i,n)}getToolPanelCompDetails(t,n){return this.getCompDetails(t,fbe,null,n,!0)}getStatusPanelCompDetails(t,n){return this.getCompDetails(t,pbe,null,n,!0)}getMenuItemCompDetails(t,n){return this.getCompDetails(t,Cbe,"agMenuItem",n,!0)}getCompDetails(t,n,i,r,o=!1){let{propertyName:s,cellRenderer:a}=n,{compName:l,jsComp:c,fwComp:u,paramsFromSelector:d,popupFromSelector:h,popupPositionFromSelector:p}=RK.getCompKeys(this.frameworkOverrides,t,n,r),g,m=_=>{let D=this.userComponentRegistry.retrieve(s,_);D&&(c=D.componentFromFramework?void 0:D.component,u=D.componentFromFramework?D.component:void 0,g=D.params)};if(l!=null&&m(l),c==null&&u==null&&i!=null&&m(i),c&&a&&!this.agComponentUtils.doesImplementIComponent(c)&&(c=this.agComponentUtils.adaptFunction(s,c)),!c&&!u){o&&kt(`Could not find component ${l}, did you forget to configure this component?`);return}let v=this.mergeParamsWithApplicationProvidedParams(t,n,r,d,g),C=c==null,S=c||u;return{componentFromFramework:C,componentClass:S,params:v,type:n,popupFromSelector:h,popupPositionFromSelector:p,newAgStackInstance:()=>this.newAgStackInstance(S,C,v,n)}}static getCompKeys(t,n,i,r){let{propertyName:o}=i,s,a,l,c,u,d;if(n){let h=n,p=h[o+"Selector"],g=p?p(r):null,m=v=>{typeof v=="string"?s=v:v!=null&&v!==!0&&(t.isFrameworkComponent(v)?l=v:a=v)};g?(m(g.component),c=g.params,u=g.popup,d=g.popupPosition):m(h[o])}return{compName:s,jsComp:a,fwComp:l,paramsFromSelector:c,popupFromSelector:u,popupPositionFromSelector:d}}newAgStackInstance(t,n,i,r){let o=r.propertyName,s=!n,a;if(s)a=new t;else{let c=this.componentMetadataProvider.retrieve(o);a=this.frameworkComponentWrapper.wrap(t,c.mandatoryMethodList,c.optionalMethodList,r)}let l=this.initComponent(a,i);return l==null?$o.resolve(a):l.then(()=>a)}mergeParamsWithApplicationProvidedParams(t,n,i,r=null,o){let s=this.gos.getGridCommonParams();Yr(s,i),o&&Yr(s,o);let a=t,l=a&&a[n.propertyName+"Params"];if(typeof l=="function"){let c=l(i);Yr(s,c)}else typeof l=="object"&&Yr(s,l);return Yr(s,r),s}initComponent(t,n){if(this.createBean(t),t.init!=null)return t.init(n)}};function cC(e){let t=e;return t!=null&&t.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}var aD=class Kt{static register(t){Kt.__register(t,!0,void 0)}static registerModules(t){Kt.__registerModules(t,!0,void 0)}static __register(t,n,i){Kt.runVersionChecks(t),i!==void 0?(Kt.areGridScopedModules=!0,Kt.gridModulesMap[i]===void 0&&(Kt.gridModulesMap[i]={}),Kt.gridModulesMap[i][t.moduleName]=t):Kt.globalModulesMap[t.moduleName]=t,Kt.setModuleBased(n)}static __unRegisterGridModules(t){delete Kt.gridModulesMap[t]}static __registerModules(t,n,i){Kt.setModuleBased(n),t&&t.forEach(r=>Kt.__register(r,n,i))}static isValidModuleVersion(t){let[n,i]=t.version.split(".")||[],[r,o]=Kt.currentModuleVersion.split(".")||[];return n===r&&i===o}static runVersionChecks(t){Kt.currentModuleVersion||(Kt.currentModuleVersion=t.version);let n=i=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${i} Please update all modules to the same version.`;if(t.version?Kt.isValidModuleVersion(t)||kt(n(`'${t.moduleName}' is version ${t.version} but the other modules are version ${Kt.currentModuleVersion}.`)):kt(n(`'${t.moduleName}' is incompatible.`)),t.validate){let i=t.validate();i.isValid||kt(`${i.message}`)}}static setModuleBased(t){Kt.moduleBased===void 0?Kt.moduleBased=t:Kt.moduleBased!==t&&(kt("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),kt("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information."))}static __setIsBundled(){Kt.isBundled=!0}static __assertRegistered(t,n,i){if(this.__isRegistered(t,i))return!0;let r;if(Kt.isBundled)r=`AG Grid: unable to use ${n} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(Kt.moduleBased||Kt.moduleBased===void 0){let o=Object.entries(kq).find(([s,a])=>a===t)?.[0];r=`AG Grid: unable to use ${n} as the ${o} is not registered${Kt.areGridScopedModules?` for gridId: ${i}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${o} } from '${t}';
    
    ModuleRegistry.registerModules([ ${o} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else r=`AG Grid: unable to use ${n} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';`;return kt(r),!1}static __isRegistered(t,n){return!!Kt.globalModulesMap[t]||!!Kt.gridModulesMap[n]?.[t]}static __getRegisteredModules(t){return[...Gx(Kt.globalModulesMap),...Gx(Kt.gridModulesMap[t]||{})]}static __getGridRegisteredModules(t){return Gx(Kt.gridModulesMap[t]??{})||[]}static __isPackageBased(){return!Kt.moduleBased}};aD.globalModulesMap={};aD.gridModulesMap={};aD.areGridScopedModules=!1;var hc=aD,wbe=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,!(!e||!e.beanClasses)&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){Object.entries(e.providedBeanInstances).forEach(([t,n])=>{this.beans[t]=n}),e.beanClasses.forEach(t=>{let n=new t;n.beanName?this.beans[n.beanName]=n:console.error(`Bean ${t.name} is missing beanName`),this.createdBeans.push(n)}),e.derivedBeans?.forEach(t=>{let{beanName:n,bean:i}=t(this);this.beans[n]=i,this.createdBeans.push(i)}),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){if(!e)throw Error("Can't wire to bean since it is null");return this.initBeans([e],t),e}initBeans(e,t){e.forEach(n=>{n.preWireBeans?.(this.beans),n.wireBeans?.(this.beans)}),e.forEach(n=>n.preConstruct?.()),t&&e.forEach(t),e.forEach(n=>n.postConstruct?.())}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;let e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){e?.destroy?.()}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},bbe=class extends wbe{init(e){this.gridId=e.gridId,this.beans.context=this,super.init(e)}destroy(){super.destroy(),hc.__unRegisterGridModules(this.gridId)}getGridId(){return this.gridId}};var IK=(e=>(e[e.Left=0]="Left",e[e.Right=1]="Right",e))(IK||{});var Sbe=class extends j{constructor(){super(...arguments),this.beanName="dragAndDropService",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.dragService=e.dragService,this.mouseEventService=e.mouseEventService,this.environment=e.environment,this.userComponentFactory=e.userComponentFactory}addDragSource(e,t=!1){let n={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:n,dragSource:e}),this.dragService.addDragSource(n)}getDragAndDropImageComponent(){let{dragAndDropImageComp:e}=this;return!e||!e.comp?null:e.comp}removeDragSource(e){let t=this.dragSourceAndParamsList.find(n=>n.dragSource===e);t&&(this.dragService.removeDragSource(t.params),Xr(this.dragSourceAndParamsList,t))}destroy(){this.dragSourceAndParamsList.forEach(e=>this.dragService.removeDragSource(e.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),this.dragSource.onDragStarted?.(),this.createDragAndDropImageComponent()}onDragStop(e){if(this.dragSource?.onDragStopped?.(),this.lastDropTarget?.onDragStop){let t=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(t)}this.clearDragAndDropProperties()}onDragCancel(){this.dragSource?.onDragCancelled?.(),this.lastDropTarget?.onDragCancel&&this.lastDropTarget.onDragCancel(this.createDropTargetEvent(this.lastDropTarget,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(e,t=!1){let n=this.getHorizontalDirection(e),i=this.getVerticalDirection(e);this.eventLastTime=e,this.positionDragAndDropImageComp(e);let r=this.dropTargets.filter(s=>this.isMouseOnDropTarget(e,s)),o=this.findCurrentDropTarget(e,r);if(o!==this.lastDropTarget){if(this.leaveLastTargetIfExists(e,n,i,t),this.lastDropTarget!==null&&o===null&&this.dragSource?.onGridExit?.(this.dragItem),this.lastDropTarget===null&&o!==null&&this.dragSource?.onGridEnter?.(this.dragItem),this.enterDragTargetIfExists(o,e,n,i,t),o&&this.dragAndDropImageComp){let{comp:s,promise:a}=this.dragAndDropImageComp;s?s.setIcon(o.getIconName?o.getIconName():null):a.then(l=>{l&&l.setIcon(o.getIconName?o.getIconName():null)})}this.lastDropTarget=o}else if(o&&o.onDragging){let s=this.createDropTargetEvent(o,e,n,i,t);o.onDragging(s)}}getAllContainersFromDropTarget(e){let t=e.getSecondaryContainers?e.getSecondaryContainers():null,n=[[e.getContainer()]];return t?n.concat(t):n}allContainersIntersect(e,t){for(let n of t){let{width:i,height:r,left:o,right:s,top:a,bottom:l}=n.getBoundingClientRect();if(i===0||r===0)return!1;let c=e.clientX>=o&&e.clientX<s,u=e.clientY>=a&&e.clientY<l;if(!c||!u)return!1}return!0}isMouseOnDropTarget(e,t){let n=this.getAllContainersFromDropTarget(t),i=!1;for(let s of n)if(this.allContainersIntersect(e,s)){i=!0;break}let{eElement:r,type:o}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(r)?!1:i&&t.isInterestedIn(o,r)}findCurrentDropTarget(e,t){let n=t.length;if(n===0)return null;if(n===1)return t[0];let r=pC(this.gos).elementsFromPoint(e.clientX,e.clientY);for(let o of r)for(let s of t)if(ACe(this.getAllContainersFromDropTarget(s)).indexOf(o)!==-1)return s;return null}enterDragTargetIfExists(e,t,n,i,r){if(e&&e.onDragEnter){let o=this.createDropTargetEvent(e,t,n,i,r);e.onDragEnter(o)}}leaveLastTargetIfExists(e,t,n,i){if(!this.lastDropTarget)return;if(this.lastDropTarget.onDragLeave){let o=this.createDropTargetEvent(this.lastDropTarget,e,t,n,i);this.lastDropTarget.onDragLeave(o)}let r=this.getDragAndDropImageComponent();r&&r.setIcon(null)}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(n=>n.external).find(n=>n.getContainer()===e.getContainer())||null}isDropZoneWithinThisGrid(e){let n=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:i}=e;return n.contains(i)}getHorizontalDirection(e){let t=this.eventLastTime&&this.eventLastTime.clientX,n=e.clientX;return t===n?null:t>n?0:1}getVerticalDirection(e){let t=this.eventLastTime&&this.eventLastTime.clientY,n=e.clientY;return t===n?null:t>n?0:1}createDropTargetEvent(e,t,n,i,r){let o=e.getContainer(),s=o.getBoundingClientRect(),{dragItem:a,dragSource:l}=this,c=t.clientX-s.left,u=t.clientY-s.top;return this.gos.addGridCommonParams({event:t,x:c,y:u,vDirection:i,hDirection:n,dragSource:l,fromNudge:r,dragItem:a,dropZoneTarget:o})}positionDragAndDropImageComp(e){let t=this.getDragAndDropImageComponent();if(!t)return;let n=t.getGui(),r=n.getBoundingClientRect().height,o=Swe()-2,s=_we()-2;if(!n.offsetParent)return;let l=pK(n.offsetParent),{clientY:c,clientX:u}=e,d=c-l.top-r/2,h=u-l.left-10,p=Yn(this.gos),g=p.defaultView||window,m=g.pageYOffset||p.documentElement.scrollTop,v=g.pageXOffset||p.documentElement.scrollLeft;o>0&&h+n.clientWidth>o+v&&(h=o+v-n.clientWidth),h<0&&(h=0),s>0&&d+n.clientHeight>s+m&&(d=s+m-n.clientHeight),d<0&&(d=0),n.style.left=`${h}px`,n.style.top=`${d}px`}removeDragAndDropImageComponent(){if(this.dragAndDropImageComp){let{comp:e}=this.dragAndDropImageComp;if(e){let t=e.getGui();this.dragAndDropImageParent&&this.dragAndDropImageParent.removeChild(t),this.destroyBean(e)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){let{dragSource:e}=this;if(!e)return;let n=this.userComponentFactory.getDragAndDropImageCompDetails({dragSource:e}).newAgStackInstance();this.dragAndDropImageComp={promise:n},n.then(i=>{!i||!this.isAlive()||(this.processDragAndDropImageComponent(i),this.dragAndDropImageComp.comp=i)})}processDragAndDropImageComponent(e){let{dragSource:t,mouseEventService:n,environment:i}=this;if(!t)return;let r=e.getGui();r.style.setProperty("position","absolute"),r.style.setProperty("z-index","9999"),n.stampTopLevelGridCompWithGridInstance(r),i.applyThemeClasses(r),e.setIcon(null);let{dragItemName:o}=t;BO(o)&&(o=o()),e.setLabel(o||""),r.style.top="20px",r.style.left="20px";let s=Yn(this.gos),a=null,l=null;try{a=s.fullscreenElement}catch{}finally{a||(a=pC(this.gos));let c=a.querySelector("body");c?l=c:a instanceof ShadowRoot?l=a:a instanceof Document?l=a?.documentElement:l=a}this.dragAndDropImageParent=l,l?l.appendChild(r):X("Could not find document body, it is needed for drag and drop.")}},_be=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){let n=t||this.shouldSkipVerticalScroll();if(n&&this.shouldSkipHorizontalScroll())return;let i=this.scrollContainer.getBoundingClientRect(),r=this.scrollByTick;this.tickLeft=e.clientX<i.left+r,this.tickRight=e.clientX>i.right-r,this.tickUp=e.clientY<i.top+r&&!n,this.tickDown=e.clientY>i.bottom-r&&!n,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;let e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){let t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){let t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}};var Ebe=class extends j{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.sortController=e.sortController,this.filterManager=e.filterManager,this.selectionService=e.selectionService,this.mouseEventService=e.mouseEventService,this.ctrlsService=e.ctrlsService,this.funcColsService=e.funcColsService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){kn(this.gos)&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(this,e=>{let t=e.gridBodyCtrl;this.autoScrollService=new _be({scrollContainer:t.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>t.getScrollFeature().getVScrollPosition().top,setVerticalPosition:n=>t.getScrollFeature().setVerticalScrollPosition(n),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){return!!(this.funcColsService.getRowGroupColumns().length||this.filterManager?.isAnyFilterPresent()||this.sortController.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];let t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){let i=[...this.selectionService.getSelectedNodes()].sort((r,o)=>r.rowIndex==null||o.rowIndex==null?0:this.getRowIndexNumber(r)-this.getRowIndexNumber(o));if(i.indexOf(t)!==-1)return i}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach(t=>{t.setDragging(!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){let{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}onEnterOrDragging(e){this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e;let t=this.mouseEventService.getNormalisedPosition(e).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){let n=this.isFromThisGrid(e),i=this.gos.get("rowDragManaged"),r=e.dragItem.rowNodes;i&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!n?this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clientSideRowModel.highlightRowAtPixel(r[0],t):this.moveRows(r,t))}getRowIndexNumber(e){let t=e.getRowIndexString();return parseInt(Rt(t.split("-")),10)}moveRowAndClearHighlight(e){let t=this.clientSideRowModel.getLastHighlightedRowNode(),n=t&&t.highlighted===1,i=this.mouseEventService.getNormalisedPosition(e).y,r=e.dragItem.rowNodes,o=n?1:0;if(this.isFromThisGrid(e))r.forEach(s=>{s.rowTop<i&&(o-=1)}),this.moveRows(r,i,o);else{let s=pm(this.gos),a=this.clientSideRowModel.getRowIndexAtPixel(i)+1;this.clientSideRowModel.getHighlightPosition(i)===0&&a--,this.clientSideRowModel.updateRowData({add:r.filter(l=>!this.clientSideRowModel.getRowNode(s?.({data:l.data,level:0,rowPinned:l.rowPinned})??l.data.id)).map(l=>l.data),addIndex:a})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t,n=0){this.clientSideRowModel.ensureRowsAtPixel(e,t,n)&&(this.focusService.clearFocusedCell(),this.rangeService?.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer()){X("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(e)){X("addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let t={getContainer:e.getContainer};e.fromGrid?t=e:(e.onDragEnter&&(t.onDragEnter=i=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",i))}),e.onDragLeave&&(t.onDragLeave=i=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",i))}),e.onDragging&&(t.onDragging=i=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",i))}),e.onDragStop&&(t.onDragStop=i=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",i))}),e.onDragCancel&&(t.onDragCancel=i=>{e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",i))}));let n=B({isInterestedIn:i=>i===2,getIconName:()=>"move",external:!0},t);this.dragAndDropService.addDropTarget(n),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(n))}getRowDropZone(e){let t=this.getContainer.bind(this),n=this.onDragEnter.bind(this),i=this.onDragLeave.bind(this),r=this.onDragging.bind(this),o=this.onDragStop.bind(this),s=this.onDragCancel.bind(this),a;return e?a={getContainer:t,onDragEnter:e.onDragEnter?l=>{n(l),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",l))}:n,onDragLeave:e.onDragLeave?l=>{i(l),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",l))}:i,onDragging:e.onDragging?l=>{r(l),e.onDragging(this.draggingToRowDragEvent("rowDragMove",l))}:r,onDragStop:e.onDragStop?l=>{o(l),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",l))}:o,onDragCancel:e.onDragCancel?l=>{s(l),e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",l))}:s,fromGrid:!0}:a={getContainer:t,onDragEnter:n,onDragLeave:i,onDragging:r,onDragStop:o,onDragCancel:s,fromGrid:!0},a}draggingToRowDragEvent(e,t){let n=this.mouseEventService.getNormalisedPosition(t).y,i=n>this.pageBoundsService.getCurrentPageHeight(),r=-1,o;i||(r=this.rowModel.getRowIndexAtPixel(n),o=this.rowModel.getRow(r));let s;switch(t.vDirection){case 1:s="down";break;case 0:s="up";break;default:s=null;break}return this.gos.addGridCommonParams({type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:r,overNode:o,y:n,vDirection:s})}dispatchGridEvent(e,t){let n=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(n)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clearRowHighlight()}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(t=>{t.setDragging(!1)})}},xbe=class extends j{constructor(){super(...arguments),this.beanName="dragService",this.dragEndFunctions=[],this.dragSources=[]}wireBeans(e){this.mouseEventService=e.mouseEventService}destroy(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0,super.destroy()}removeListener(e){let t=e.dragSource.eElement,n=e.mouseDownListener;if(t.removeEventListener("mousedown",n),e.touchEnabled){let i=e.touchStartListener;t.removeEventListener("touchstart",i,{passive:!0})}}removeDragSource(e){let t=this.dragSources.find(n=>n.dragSource===e);t&&(this.removeListener(t),Xr(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(e){let t=this.onMouseDown.bind(this,e),{eElement:n,includeTouch:i,stopPropagationForTouch:r}=e;n.addEventListener("mousedown",t);let o=null,s=this.gos.get("suppressTouch");i&&!s&&(o=a=>{XO(a.target)||(r&&a.stopPropagation(),this.onTouchStart(e,a))},n.addEventListener("touchstart",o,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:o,touchEnabled:!!i})}getStartTarget(){return this.startTarget}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;let n=t.touches[0];this.touchLastTime=n,this.touchStart=n;let i=l=>this.onTouchMove(l,e.eElement),r=l=>this.onTouchUp(l,e.eElement),o=l=>{l.cancelable&&l.preventDefault()},s=t.target,a=[{target:pC(this.gos),type:"touchmove",listener:o,options:{passive:!1}},{target:s,type:"touchmove",listener:i,options:{passive:!0}},{target:s,type:"touchend",listener:r,options:{passive:!0}},{target:s,type:"touchcancel",listener:r,options:{passive:!0}}];this.addTemporaryEvents(a),e.dragStartPixels===0&&this.onCommonMove(n,this.touchStart,e.eElement)}onMouseDown(e,t){let n=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||n._alreadyProcessedByDragService||(n._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;let i=c=>this.onMouseMove(c,e.eElement),r=c=>this.onMouseUp(c,e.eElement),o=c=>c.preventDefault(),s=c=>{c.key===G.ESCAPE&&this.cancelDrag(e.eElement)},a=pC(this.gos),l=[{target:a,type:"mousemove",listener:i},{target:a,type:"mouseup",listener:r},{target:a,type:"contextmenu",listener:o},{target:a,type:"keydown",listener:s}];this.addTemporaryEvents(l),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{let{target:n,type:i,listener:r,options:o}=t;n.addEventListener(i,r,o)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{let{target:n,type:i,listener:r,options:o}=t;n.removeEventListener(i,r,o)})})}isEventNearStartEvent(e,t){let{dragStartPixels:n}=this.currentDragParams,i=ne(n)?n:4;return _K(e,t,i)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,n){if(!this.dragging){if(this.isEventNearStartEvent(e,t))return;if(this.dragging=!0,this.eventService.dispatchEvent({type:"dragStarted",target:n}),this.currentDragParams.onDragStart(t),!this.currentDragParams){this.dragging=!1;return}this.currentDragParams.onDragging(t)}this.currentDragParams?.onDragging(e)}onTouchMove(e,t){let n=this.getFirstActiveTouch(e.touches);n&&this.onCommonMove(n,this.touchStart,t)}onMouseMove(e,t){fl()&&Yn(this.gos).getSelection()?.removeAllRanges(),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){let t=this.gos.get("enableCellTextSelection"),n=e.type==="mousemove";return t&&n&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){return!!e.target?.tagName.toLocaleLowerCase()?.match("^a$|textarea|input|select|button")}onTouchUp(e,t){let n=this.getFirstActiveTouch(e.changedTouches);n||(n=this.touchLastTime),this.onUpCommon(n,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventService.dispatchEvent({type:"dragStopped",target:t})),this.resetDragProperties()}cancelDrag(e){this.eventService.dispatchEvent({type:"dragCancelled",target:e}),this.currentDragParams?.onDragCancel?.(),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(e=>e()),this.dragEndFunctions.length=0}},AO=class extends At{constructor(e,t,n,i,r,o){super(),this.cellValueFn=e,this.rowNode=t,this.column=n,this.customGui=i,this.dragStartPixels=r,this.suppressVisibilityChange=o,this.dragSource=null}wireBeans(e){this.beans=e}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(Zo("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){let e=this.gos.get("rowDragManaged")?new Tbe(this,this.beans,this.rowNode,this.column):new Dbe(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];let t=this.beans.selectionService.getSelectedNodes();return t.indexOf(this.rowNode)!==-1?t:[this.rowNode]}checkCompatibility(){let e=this.gos.get("rowDragManaged");this.gos.get("treeData")&&e&&X("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){let t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();let t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:i=>{i?.preventDefault()}})[0]);let n=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:()=>{let i=this.getDragItem(),r=i.rowNodes?.length||1,o=this.getRowDragText(this.column);return o?o(i,r):r===1?this.cellValueFn():`${r} ${n("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},FK=class extends j{constructor(e,t,n){super(),this.parent=e,this.rowNode=t,this.column=n}setDisplayedOrVisible(e){let t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let n=!0,i=!1;this.column&&(n=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),i=BO(this.column.getColDef().rowDrag)),i?(this.parent.setDisplayed(!0,t),this.parent.setVisible(n,t)):(this.parent.setDisplayed(n,t),this.parent.setVisible(!0,t))}}},Dbe=class extends FK{constructor(e,t,n,i){super(e,n,i),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));let e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}},Tbe=class extends FK{constructor(e,t,n,i){super(e,n,i),this.beans=t}postConstruct(){let e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventService,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let t=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),n=t&&t.shouldPreventRowMove(),i=this.gos.get("suppressRowDrag"),r=this.beans.dragAndDropService.hasExternalDropZones(),o=n&&!r||i;this.setDisplayedOrVisible(o)}},Rbe=new Set(["localEventService","__objectId","sticky","__autoHeights","checkAutoHeightsDebounced"]),_C=class Hu{constructor(t){this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped={},this.treeNode=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=Hu.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=t}setData(t){this.setDataCommon(t,!1)}updateData(t){this.setDataCommon(t,!0)}setDataCommon(t,n){let i=this.data;this.data=t,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();let r=this.createDataChangedEvent(t,i,n);this.localEventService?.dispatchEvent(r)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(t,n,i){return{type:"dataChanged",node:this,oldData:n,newData:t,update:i}}getRowIndexString(){return this.rowIndex==null?(kt("Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid."),null):this.rowPinned==="top"?Hu.ID_PREFIX_TOP_PINNED+this.rowIndex:this.rowPinned==="bottom"?Hu.ID_PREFIX_BOTTOM_PINNED+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){let t=new Hu(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t}setDataAndId(t,n){let i=ne(this.id)?this.createDaemonNode():null,r=this.data;this.data=t,this.updateDataOnDetailNode(),this.setId(n),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,i);let o=this.createDataChangedEvent(t,r,!1);this.localEventService?.dispatchEvent(o)}checkRowSelectable(){let t=GO(this.beans.gos);this.setRowSelectable(t?t(this):!0)}setRowSelectable(t,n){if(this.selectable!==t){if(this.selectable=t,this.dispatchRowEvent("selectableChanged"),n)return;if(ef(this.beans.gos)){let r=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:r??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(t){let n=pm(this.beans.gos);if(n)if(this.data){let i=this.parent?.getRoute()??[];this.id=n({data:this.data,parentKeys:i.length>0?i:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(Hu.ID_PREFIX_ROW_GROUP)&&kt(`Row IDs cannot start with ${Hu.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`)}else this.id=void 0;else this.id=t}setRowTop(t){this.oldRowTop=this.rowTop,this.rowTop!==t&&(this.rowTop=t,this.dispatchRowEvent("topChanged"),this.setDisplayed(t!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(t){this.hovered=t}isHovered(){return this.hovered}setMaster(t){this.master!==t&&(this.master&&!t&&(this.expanded=!1),this.master=t,this.dispatchRowEvent("masterChanged"))}setGroup(t){this.group!==t&&(this.group&&!t&&(this.expanded=!1),this.group=t,this.updateHasChildren(),this.checkRowSelectable(),this.dispatchRowEvent("groupChanged"))}setRowHeight(t,n=!1){this.rowHeight=t,this.rowHeightEstimated=n,this.dispatchRowEvent("heightChanged")}setRowAutoHeight(t,n){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[n.getId()]=t,t!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=Qr(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let t=!1,n=!0,i=0,r=this.__autoHeights;if(r==null||(this.beans.visibleColsService.getAllAutoHeightCols().forEach(a=>{let l=r[a.getId()];if(l==null)if(this.beans.columnModel.isColSpanActive()){let c=[];switch(a.getPinned()){case"left":c=this.beans.visibleColsService.getLeftColsForRow(this);break;case"right":c=this.beans.visibleColsService.getRightColsForRow(this);break;case null:c=this.beans.columnViewportService.getColsWithinViewport(this);break}if(c.includes(a)){t=!0;return}l=-1}else{t=!0;return}else n=!1;l>i&&(i=l)}),t)||((n||i<10)&&(i=ju(this.beans.gos,this).height),i==this.rowHeight))return;this.setRowHeight(i),this.beans.rowModel.onRowHeightChangedDebounced?.()}setExpanded(t,n,i){if(this.expanded===t)return;this.expanded=t,this.dispatchRowEvent("expandedChanged");let r=pe(B({},this.createGlobalRowEvent("rowGroupOpened")),{expanded:t,event:n||null});this.beans.rowNodeEventThrottle.dispatchExpanded(r,i),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(t){return this.beans.gos.addGridCommonParams({type:t,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}setDataValue(t,n,i){let o=typeof t!="string"?t:this.beans.columnModel.getCol(t)??this.beans.columnModel.getColDefCol(t),s=this.beans.valueService.getValueForDisplay(o,this);if(this.beans.gos.get("readOnlyEdit"))return this.beans.eventService.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:o,colDef:o.getColDef(),data:this.data,node:this,oldValue:s,newValue:n,value:n,source:i}),!1;let a=this.beans.valueService.setValue(this,o,n,i);return this.dispatchCellChangedEvent(o,n,s),this.checkRowSelectable(),a}setGroupValue(t,n){let i=this.beans.columnModel.getCol(t);St(this.groupData)&&(this.groupData={});let r=i.getColId(),o=this.groupData[r];o!==n&&(this.groupData[r]=n,this.dispatchCellChangedEvent(i,n,o))}setAggData(t){let n=this.aggData;if(this.aggData=t,this.localEventService){let i=r=>{let o=this.aggData?this.aggData[r]:void 0,s=n?n[r]:void 0;if(o===s)return;let a=this.beans.columnModel.getCol(r);a&&this.dispatchCellChangedEvent(a,o,s)};for(let r in n)i(r);for(let r in t)(!n||!(r in n))&&i(r)}}updateHasChildren(){let t=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(vc(this.beans.gos)){let i=this.beans.gos.get("treeData"),r=this.beans.gos.get("isServerSideGroup");t=!this.stub&&!this.footer&&(i?!!r&&r(this.data):!!this.group)}t!==this.__hasChildren&&(this.__hasChildren=!!t,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(t,n,i){let r={type:"cellChanged",node:this,column:t,newValue:n,oldValue:i};this.localEventService?.dispatchEvent(r)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(t){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(n=>n.depthFirstSearch(t)),t(this)}calculateSelectedFromChildren(){let t=!1,n=!1;if(!this.childrenAfterGroup?.length)return this.selectable?this.selected:null;for(let i=0;i<this.childrenAfterGroup.length;i++){let r=this.childrenAfterGroup[i],o=r.isSelected();if(!r.selectable){let s=r.calculateSelectedFromChildren();if(s===null)continue;o=s}switch(o){case!0:t=!0;break;case!1:n=!0;break;default:return}}if(!(t&&n))return t?!0:n?!1:this.selectable?this.selected:null}setSelectedInitialValue(t){this.selected=t}dispatchRowEvent(t){this.localEventService?.dispatchEvent({type:t,node:this})}selectThisNode(t,n,i="api"){let r=!this.selectable&&t,o=this.selected===t;if(r||o)return!1;this.selected=t,this.dispatchRowEvent("rowSelected");let s=this.sibling;return s&&s.footer&&s.localEventService&&s.dispatchRowEvent("rowSelected"),this.beans.eventService.dispatchEvent(pe(B({},this.createGlobalRowEvent("rowSelected")),{event:n||null,source:i})),!0}setSelected(t,n=!1,i="api"){if(typeof i=="boolean"){X("since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:t,clearSelection:n,rangeSelect:!1,source:i})}setSelectedParams(t){return this.rowPinned?(X("cannot select pinned rows"),0):this.id===void 0?(X("cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(pe(B({},t),{nodes:[this.footer?this.sibling:this]}))}isRowPinned(){return!!this.rowPinned}addEventListener(t,n){this.localEventService||(this.localEventService=new fm),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.localEventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new jO(this.beans.frameworkOverrides));let i=this.frameworkEventListenerService?.wrap(n)??n;this.localEventService.addEventListener(t,i)}removeEventListener(t,n){if(!this.localEventService)return;let i=this.frameworkEventListenerService?.unwrap(n)??n;this.localEventService.removeEventListener(t,i),this.localEventService.noRegisteredListenersExist()&&(this.localEventService=null)}onMouseEnter(){this.dispatchRowEvent("mouseEnter")}onMouseLeave(){this.dispatchRowEvent("mouseLeave")}isFullWidthCell(){if(X("since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option."),this.detail)return!0;let t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;let t=[],n=this;for(;n&&n.key!=null;)t.push(n.key),n=n.parent;return t.reverse()}createFooter(){if(this.sibling)return;let t=new Hu(this.beans);Object.keys(this).forEach(n=>{Rbe.has(n)||(t[n]=this[n])}),t.footer=!0,t.setRowTop(null),t.setRowIndex(null),t.oldRowTop=null,t.id="rowGroupFooter_"+this.id,t.sibling=this,this.sibling=t}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}setFirstChild(t){this.firstChild!==t&&(this.firstChild=t,this.dispatchRowEvent("firstChildChanged"))}setLastChild(t){this.lastChild!==t&&(this.lastChild=t,this.dispatchRowEvent("lastChildChanged"))}setChildIndex(t){this.childIndex!==t&&(this.childIndex=t,this.dispatchRowEvent("childIndexChanged"))}setDisplayed(t){this.displayed!==t&&(this.displayed=t,this.dispatchRowEvent("displayedChanged"))}setDragging(t){this.dragging!==t&&(this.dragging=t,this.dispatchRowEvent("draggingChanged"))}setHighlighted(t){this.highlighted!==t&&(this.highlighted=t,this.dispatchRowEvent("rowHighlightChanged"))}setAllChildrenCount(t){this.allChildrenCount!==t&&(this.allChildrenCount=t,this.dispatchRowEvent("allChildrenCountChanged"))}setRowIndex(t){this.rowIndex!==t&&(this.rowIndex=t,this.dispatchRowEvent("rowIndexChanged"))}setUiLevel(t){this.uiLevel!==t&&(this.uiLevel=t,this.dispatchRowEvent("uiLevelChanged"))}};_C.ID_PREFIX_ROW_GROUP="row-group-";_C.ID_PREFIX_TOP_PINNED="t-";_C.ID_PREFIX_BOTTOM_PINNED="b-";_C.OBJECT_ID_SEQUENCE=0;var gc=_C,Ibe=class extends j{constructor(){super(...arguments),this.beanName="filterManager",this.advancedFilterModelUpdateQueue=[]}wireBeans(e){this.columnModel=e.columnModel,this.dataTypeService=e.dataTypeService,this.quickFilterService=e.quickFilterService,this.advancedFilterService=e.advancedFilterService,this.columnFilterService=e.columnFilterService}postConstruct(){let e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvancedFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:n})=>this.onAdvancedFilterEnabledChanged(n),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",n=>this.setAdvancedFilterModel(n.currentValue)),this.quickFilterService&&this.addManagedListeners(this.quickFilterService,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})})}isExternalFilterPresentCallback(){let e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"?e({}):!1}doesExternalFilterPass(e){let t=this.gos.get("doesExternalFilterPass");return typeof t=="function"?t(e):!1}setFilterModel(e,t="api"){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}this.columnFilterService?.setFilterModel(e,t)}getFilterModel(){return this.columnFilterService?.getFilterModel()??{}}isColumnFilterPresent(){return!!this.columnFilterService?.isColumnFilterPresent()}isAggregateFilterPresent(){return!!this.columnFilterService?.isAggregateFilterPresent()}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){e?this.columnFilterService?.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):this.advancedFilterService?.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){return!!this.advancedFilterService?.isEnabled()}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}resetQuickFilterCache(){this.quickFilterService?.resetQuickFilterCache()}refreshFiltersForAggregations(){bO(this.gos)&&this.onFilterChanged()}onFilterChanged(e={}){let{source:t,additionalEventAttributes:n,columns:i=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.columnFilterService?this.columnFilterService.updateBeforeFilterChanged(e):$o.resolve()).then(()=>{let r={source:t,type:"filterChanged",columns:i};n&&Yr(r,n),this.eventService.dispatchEvent(r),this.columnFilterService?.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){return!!this.columnFilterService?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilterService?.isQuickFilterPresent()}updateAggFiltering(){this.aggFiltering=!!bO(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.columnFilterService.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.columnFilterService.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))}isFilterActive(e){return!!this.columnFilterService?.isFilterActive(e)}getOrCreateFilterWrapper(e){return this.columnFilterService?.getOrCreateFilterWrapper(e)??null}getDefaultFloatingFilter(e){return this.columnFilterService.getDefaultFloatingFilter(e)}createFilterParams(e,t){return this.columnFilterService.createFilterParams(e,t)}isFilterAllowed(e){return this.isAdvancedFilterEnabled()?!1:!!this.columnFilterService?.isFilterAllowed(e)}getFloatingFilterCompDetails(e,t){return this.columnFilterService?.getFloatingFilterCompDetails(e,t)}getCurrentFloatingFilterParentModel(e){return this.columnFilterService?.getCurrentFloatingFilterParentModel(e)}destroyFilter(e,t="api"){this.columnFilterService?.destroyFilter(e,t)}areFilterCompsDifferent(e,t){return!!this.columnFilterService?.areFilterCompsDifferent(e,t)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){if(this.isAdvancedFilterEnabled()){if(this.dataTypeService?.isPendingInference()){this.advancedFilterModelUpdateQueue.push(e);return}this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"})}}toggleAdvancedFilterBuilder(e,t){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvancedFilterEnabled()?!1:!!this.columnFilterService?.hasFloatingFilters()}getFilterInstance(e,t){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}return this.columnFilterService?.getFilterInstance(e,t)}getColumnFilterInstance(e){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve(void 0)):this.columnFilterService?.getColumnFilterInstance(e)??Promise.resolve(void 0)}warnAdvancedFilters(){X("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(e){this.advancedFilterService?.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advancedFilterModelUpdateQueue.forEach(e=>this.setAdvancedFilterModel(e)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(e){return this.columnFilterService?.getColumnFilterModel(e)}setColumnFilterModel(e,t){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve()):this.columnFilterService?.setColumnFilterModel(e,t)??Promise.resolve()}setColDefPropertiesForDataType(e,t,n){this.columnFilterService?.setColDefPropertiesForDataType(e,t,n)}},Fbe=class extends At{constructor(e,t){super('<div class="ag-filter"></div>'),this.column=e,this.source=t,this.filterWrapper=null}wireBeans(e){this.filterManager=e.filterManager,this.columnModel=e.columnModel}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){return this.filterWrapper?.filterPromise??null}afterInit(){return this.filterWrapper?.filterPromise?.then(()=>{})??$o.resolve()}afterGuiAttached(e){this.filterWrapper?.filterPromise?.then(t=>{t?.afterGuiAttached?.(e)})}afterGuiDetached(){this.filterWrapper?.filterPromise?.then(e=>{e?.afterGuiDetached?.()})}createFilter(e){let{column:t,source:n}=this;this.filterWrapper=this.filterManager?.getOrCreateFilterWrapper(t)??null,this.filterWrapper?.filterPromise&&this.filterWrapper.filterPromise.then(i=>{let r=i.getGui();ne(r)||X(`getGui method from filter returned ${r}; it should be a DOM element.`),this.appendChild(r),e&&this.eventService.dispatchEvent({type:"filterOpened",column:t,source:n,eGui:this.getGui()})})}onFilterDestroyed(e){(e.source==="api"||e.source==="paramsUpdated")&&e.column.getId()===this.column.getId()&&this.columnModel.getColDefCol(this.column)&&(br(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},AK="ag-resizer-wrapper",Bu=(e,t)=>`<div data-ref="${e}Resizer" class="ag-resizer ag-resizer-${t}"></div>`,Abe=`<div class="${AK}">
        ${Bu("eTopLeft","topLeft")}
        ${Bu("eTop","top")}
        ${Bu("eTopRight","topRight")}
        ${Bu("eRight","right")}
        ${Bu("eBottomRight","bottomRight")}
        ${Bu("eBottom","bottom")}
        ${Bu("eBottomLeft","bottomLeft")}
        ${Bu("eLeft","left")}
    </div>`,Mbe=class extends j{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupService=e.popupService,this.resizeObserverService=e.resizeObserverService,this.dragService=e.dragService}center(){let{clientHeight:e,clientWidth:t}=this.offsetParent,n=t/2-this.getWidth()/2,i=e/2-this.getHeight()/2;this.offsetElement(n,i)}initialisePosition(){if(this.positioned)return;let{centered:e,forcePopupParentAsOffsetParent:t,minWidth:n,width:i,minHeight:r,height:o,x:s,y:a}=this.config;this.offsetParent||this.setOffsetParent();let l=0,c=0,u=Ca(this.element);if(u){let d=this.findBoundaryElement(),h=window.getComputedStyle(d);if(h.minWidth!=null){let p=d.offsetWidth-this.element.offsetWidth;c=parseInt(h.minWidth,10)-p}if(h.minHeight!=null){let p=d.offsetHeight-this.element.offsetHeight;l=parseInt(h.minHeight,10)-p}}if(this.minHeight=r||l,this.minWidth=n||c,i&&this.setWidth(i),o&&this.setHeight(o),(!i||!o)&&this.refreshSize(),e)this.center();else if(s||a)this.offsetElement(s,a);else if(u&&t){let d=this.boundaryEl,h=!0;if(d||(d=this.findBoundaryElement(),h=!1),d){let p=parseFloat(d.style.top),g=parseFloat(d.style.left);h?this.offsetElement(isNaN(g)?0:g,isNaN(p)?0:p):this.setPosition(g,p)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;let n=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(n),this.moveElementDragListener=n):(this.dragService.removeDragSource(n),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{let i=!!e[t],r=this.getResizerElement(t),o={dragStartPixels:0,eElement:r,onDragStart:s=>this.onResizeStart(s,t),onDragging:this.onResize.bind(this),onDragStop:s=>this.onResizeEnd(s,t)};(i||!this.isAlive()&&!i)&&(i?(this.dragService.addDragSource(o),this.resizeListeners.push(o),r.style.pointerEvents="all"):r.style.pointerEvents="none",this.resizable[t]=i)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";let{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){let{popup:t}=this.config,n=this.element,i=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)lC(n,e),e=fK(n),i=!0;else if(e=Math.max(this.minHeight,e),this.positioned){let r=this.getAvailableHeight();r&&e>r&&(e=r)}this.getHeight()!==e&&(i?(n.style.maxHeight="unset",n.style.minHeight="unset"):t?lC(n,e):(n.style.height=`${e}px`,n.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){let{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();let{clientHeight:n}=this.offsetParent;if(!n)return null;let i=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),o=e?this.position.y:i.top,s=e?0:r.top,a=0;if(t){let c=this.element.parentElement;if(c){let{bottom:u}=c.getBoundingClientRect();a=u-i.bottom}}return n+s-o-a}getWidth(){return this.element.offsetWidth}setWidth(e){let t=this.element,{popup:n}=this.config,i=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)ya(t,e),e=$x(t),i=!0;else if(this.positioned){e=Math.max(this.minWidth,e);let{clientWidth:r}=this.offsetParent,o=n?this.position.x:this.element.getBoundingClientRect().left;r&&e+o>r&&(e=r-o)}this.getWidth()!==e&&(i?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?ya(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,t=0){let{forcePopupParentAsOffsetParent:n}=this.config,i=n?this.boundaryEl:this.element;i&&(this.popupService.positionPopup({ePopup:i,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(i.style.left),parseFloat(i.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;let t=()=>{let n=this.getAvailableHeight();this.element.style.setProperty("max-height",`${n}px`)};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){let{e:t,isLeft:n,isTop:i,anywhereWithin:r,topBuffer:o}=e,s=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y,l=this.shouldSkipX(t,!!n,!!r,s)?0:s,c=this.shouldSkipY(t,!!i,o,a)?0:a;return{movementX:l,movementY:c}}shouldSkipX(e,t,n,i){let r=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),s=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:r.left,l=a<=0&&o.left>=e.clientX||o.right<=e.clientX&&o.right<=s.right;return l?!0:(t?l=i<0&&e.clientX>a+o.left||i>0&&e.clientX<a+o.left:n?l=i<0&&e.clientX>s.right||i>0&&e.clientX<a+o.left:l=i<0&&e.clientX>s.right||i>0&&e.clientX<s.right,l)}shouldSkipY(e,t,n=0,i){let r=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),s=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:r.top,l=a<=0&&o.top>=e.clientY||o.bottom<=e.clientY&&o.bottom<=s.bottom;return l?!0:(t?l=i<0&&e.clientY>a+o.top+n||i>0&&e.clientY<a+o.top:l=i<0&&e.clientY>s.bottom||i>0&&e.clientY<s.bottom,l)}createResizeMap(){let e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[data-ref=eTopLeftResizer]")},top:{element:e.querySelector("[data-ref=eTopResizer]")},topRight:{element:e.querySelector("[data-ref=eTopRightResizer]")},right:{element:e.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:e.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:e.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;let e=this.element;if(!e)return;let n=new DOMParser().parseFromString(Abe,"text/html").body;e.appendChild(n.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;let e=this.element.querySelector(`.${AK}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");let{popup:n,forcePopupParentAsOffsetParent:i}=this.config;!n&&!i&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){let t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(n=>!n.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){let e=this.getSiblings()||[],t=0,n=0;for(let i=0;i<e.length;i++){let r=e[i],o=!!r.style.flex&&r.style.flex!=="0 0 auto";if(r===this.element)continue;let s=this.minHeight||0,a=this.minWidth||0;if(o){let l=window.getComputedStyle(r);l.minHeight&&(s=parseInt(l.minHeight,10)),l.minWidth&&(a=parseInt(l.minWidth,10))}else s=r.offsetHeight,a=r.offsetWidth;t+=s,n+=a}return{height:t,width:n}}applySizeToSiblings(e){let t=null,n=this.getSiblings();if(n){for(let i=0;i<n.length;i++){let r=n[i];r!==t&&(e?r.style.height=`${r.offsetHeight}px`:r.style.width=`${r.offsetWidth}px`,r.style.flex="0 0 auto",r===this.element&&(t=n[i+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;let{popup:t,forcePopupParentAsOffsetParent:n}=this.config,{isTop:i,isRight:r,isBottom:o,isLeft:s}=this.currentResizer,a=r||s,l=o||i,{movementX:c,movementY:u}=this.calculateMouseMovement({e,isLeft:s,isTop:i}),d=this.position.x,h=this.position.y,p=0,g=0;if(a&&c){let m=s?-1:1,v=this.getWidth(),C=v+c*m,S=!1;s&&(p=v-C,(d+p<=0||C<=this.minWidth)&&(S=!0,p=0)),S||this.setWidth(C)}if(l&&u){let m=i?-1:1,v=this.getHeight(),C=v+u*m,S=!1;i?(g=v-C,(h+g<=0||C<=this.minHeight)&&(S=!0,g=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&v<C&&this.getMinSizeOfSiblings().height+C>this.element.parentElement.offsetHeight&&(S=!0),S||this.setHeight(C)}this.updateDragStartPosition(e.clientX,e.clientY),((t||n)&&p||g)&&this.offsetElement(d+p,h+g)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){let e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;let{x:t,y:n}=this.position,i;this.config.calculateTopBuffer&&(i=this.config.calculateTopBuffer());let{movementX:r,movementY:o}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:i});this.offsetElement(t+r,n+o),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){let e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},MK=class PK extends j{constructor(t,n={}){super(),this.eFocusableElement=t,this.callbacks=n,this.callbacks=B({shouldStopEventPropagation:()=>!1,onTabKeyDown:i=>{if(i.defaultPrevented)return;let r=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,i.shiftKey);r&&(r.focus(),i.preventDefault())}},n)}wireBeans(t){this.focusService=t.focusService}postConstruct(){this.eFocusableElement.classList.add(PK.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedElementListeners(this.eFocusableElement,{focusin:this.callbacks.onFocusIn}),this.callbacks.onFocusOut&&this.addManagedElementListeners(this.eFocusableElement,{focusout:this.callbacks.onFocusOut})}addKeyDownListeners(t){this.addManagedElementListeners(t,{keydown:n=>{if(!(n.defaultPrevented||pc(n))){if(this.callbacks.shouldStopEventPropagation(n)){um(n);return}n.key===G.TAB?this.callbacks.onTabKeyDown(n):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(n)}}})}};MK.FOCUS_MANAGED_CLASS="ag-focus-managed";var rf=MK,kK={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function rN(e,t){return nD(e)?(e.debounceMs!=null&&X("debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:t}function nD(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}var Pbe=class extends At{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=fe,this.buttonListeners=[]}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.resetTemplate(),this.createManagedBean(new rf(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new Mbe(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);let n=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" data-ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(n,this.getAgComponents(),e),t=this.getGui(),t&&t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.providedFilterParams=e,this.applyActive=nD(e),this.resetButtonsPanel(e)}updateParams(e){this.providedFilterParams=e,this.applyActive=nD(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(e,t){let{buttons:n,readOnly:i}=t??{},{buttons:r,readOnly:o}=e;if(i===o&&hC(n,r))return;let s=r&&r.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(br(this.eButtonsPanel),this.buttonListeners.forEach(c=>c()),this.buttonListeners=[]):s&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!s){this.eButtonsPanel&&Is(this.eButtonsPanel);return}let a=document.createDocumentFragment(),l=c=>{let u,d;switch(c){case"apply":u=this.translate("applyFilter"),d=g=>this.onBtApply(!1,!1,g);break;case"clear":u=this.translate("clearFilter"),d=()=>this.onBtClear();break;case"reset":u=this.translate("resetFilter"),d=()=>this.onBtReset();break;case"cancel":u=this.translate("cancelFilter"),d=g=>{this.onBtCancel(g)};break;default:X("Unknown button type specified");return}let p=CC(`<button
                    type="${c==="apply"?"submit":"button"}"
                    data-ref="${c}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${u}
                </button>`);this.buttonListeners.push(...this.addManagedElementListeners(p,{click:d})),a.append(p)};r.forEach(c=>l(c)),this.eButtonsPanel.append(a),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){let e=rN(this.providedFilterParams,this.getDefaultDebounceMs()),t=Qr(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){let n=()=>{this.onUiChanged(!1,"prevent"),t?.()};e!=null?this.setModelIntoUi(e).then(n):this.resetUiToDefaults().then(n)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){let t=this.getModelFromUi();if(!this.isModelValid(t))return!1;let n=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(n,t)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,t=!1,n){n&&n.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:"columnFilter"});let{closeOnApply:i}=this.providedFilterParams;i&&this.applyActive&&!e&&!t&&this.close(n)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;let t=e,n=t&&t.key,i;(n==="Enter"||n==="Space")&&(i={keyboardEvent:t}),this.hidePopup(i),this.hidePopup=null}onUiChanged(e=!1,t){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){let n=this.isModelValid(this.getModelFromUi()),i=this.queryForHtmlElement('[data-ref="applyFilterButton"]');i&&yC(i,!n)}e&&!t||t==="immediately"?this.onBtApply(e):(!this.applyActive&&!t||t==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){if(!this.positionableFeature||e==="toolPanel")return;let t=e==="floatingFilter"||e==="columnFilter",{positionableFeature:n,gos:i}=this;t?(n.restoreLastSize(),n.setResizable(i.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}refresh(e){let t=this.providedFilterParams;return this.providedFilterParams=e,this.resetButtonsPanel(e,t),!0}destroy(){let e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,kK[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}},kbe=class extends tN{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}},Obe=class extends At{constructor(e="default",t=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){let e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),!this.unFocusable&&this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){let t=e.key;switch(t){case G.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{let n=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(n)}break;case G.DOWN:case G.UP:e.preventDefault(),this.navigate(t);break;case G.PAGE_DOWN:case G.PAGE_UP:case G.PAGE_HOME:case G.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}navigate(e){let t=e===G.DOWN,n;if(!this.highlightedEl)n=this.itemEls[t?0:this.itemEls.length-1];else{let r=this.itemEls.indexOf(this.highlightedEl)+(t?1:-1);r=Math.min(Math.max(r,0),this.itemEls.length-1),n=this.itemEls[r]}this.highlightItem(n)}navigateToPage(e){if(!this.highlightedEl||this.itemEls.length===0)return;let t=this.itemEls.indexOf(this.highlightedEl),n=this.options.length-1,i=this.itemEls[0].clientHeight,r=Math.floor(this.getGui().clientHeight/i),o=-1;e===G.PAGE_HOME?o=0:e===G.PAGE_END?o=n:e===G.PAGE_DOWN?o=Math.min(t+r,n):e===G.PAGE_UP&&(o=Math.max(t-r,0)),o!==-1&&this.highlightItem(this.itemEls[o])}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){let{value:t,text:n}=e,i=n||t;return this.options.push({value:t,text:i}),this.renderOption(t,i),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{Is(e)}),this.itemEls=[]}updateIndices(){let e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((t,n)=>{fwe(t,n+1),hwe(t,e.length)})}renderOption(e,t){let n=Yn(this.gos),i=n.createElement("div");es(i,"option"),i.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);let r=n.createElement("span");i.appendChild(r),r.textContent=t,this.unFocusable||(i.tabIndex=-1),this.itemEls.push(i),this.addManagedListeners(i,{mouseover:()=>this.highlightItem(i),mousedown:o=>{o.preventDefault(),o.stopPropagation(),this.setValue(e)}}),this.createManagedBean(new gm({getTooltipValue:()=>t,getGui:()=>i,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>r.scrollWidth>r.clientWidth})),this.getGui().appendChild(i)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;let n=this.options.findIndex(i=>i.value===e);if(n!==-1){let i=this.options[n];this.value=i.value,this.displayValue=i.text,this.highlightItem(this.itemEls[n]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();let e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!Ca(e))return;this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(this.activeClass),Xx(this.highlightedEl,!0);let t=this.getGui(),{scrollTop:n,clientHeight:i}=t,{offsetTop:r,offsetHeight:o}=e;(r+o>n+i||r<n)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!Ca(this.highlightedEl)||(this.highlightedEl.classList.remove(this.activeClass),Xx(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},Nbe=class extends EK{constructor(e){if(super(e,e?.template||`
            <div class="ag-picker-field" role="presentation">
                <div data-ref="eLabel"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>
                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
                </div>
            </div>`,e?.agComponents||[],e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=fe,this.eWrapper=fe,this.eDisplayField=fe,this.eIcon=fe,this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;let{pickerGap:t,maxPickerHeight:n,variableWidth:i,minPickerWidth:r,maxPickerWidth:o}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!i,n!=null&&this.setPickerMaxHeight(n),r!=null&&this.setPickerMinWidth(r),o!=null&&this.setPickerMaxWidth(o)}wireBeans(e){this.popupService=e.popupService}postConstruct(){super.postConstruct(),this.setupAria();let e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);let t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});let{pickerIcon:n,inputWidth:i}=this.config;if(n){let r=Zo(n,this.gos);r&&this.eIcon.appendChild(r)}i!=null&&this.setInputWidth(i)}setupAria(){let e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),Qx(e,!1),this.ariaRole&&es(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){let t=this.getFocusableElement();if(t!==this.eWrapper&&e?.target===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case G.UP:case G.DOWN:case G.ENTER:case G.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case G.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());let e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){let e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));let t=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:n,pickerAriaLabelValue:i,modalPicker:r=!0}=this.config,o={modal:r,eChild:e,closeOnEsc:!0,closedCallback:()=>{let h=Vq(this.gos);this.beforeHidePicker(),h&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(n,i),anchorToElement:this.eWrapper};e.style.position="absolute";let s=this.popupService.addPopup(o),{maxPickerHeight:a,minPickerWidth:l,maxPickerWidth:c,variableWidth:u}=this;u?(l&&(e.style.minWidth=l),e.style.width=ZO($x(this.eWrapper)),c&&(e.style.maxWidth=c)):tD(e,c??$x(this.eWrapper));let d=a??`${$O(this.popupService.getPopupParent())}px`;return e.style.setProperty("max-height",d),this.alignPickerToComponent(),s.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;let{pickerType:e}=this.config,{pickerGap:t}=this,n=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:e,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:n,keepWithinBounds:!0,nudgeY:t})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);let e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;let t=this.getAriaElement();Qx(t,e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){this.pickerComponent?.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(e){return tD(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},oN=class extends Nbe{constructor(e){super(B({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox"},e))}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");let{options:e,value:t,placeholder:n}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),n&&t==null&&(this.eDisplayField.textContent=n),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new Obe("select",!0)),this.listComponent.setParentComponent(this);let e=this.listComponent.getAriaElement(),t=`ag-select-list-${this.listComponent.getCompId()}`;e.setAttribute("id",t),wwe(this.getAriaElement(),e),this.listComponent.addManagedListeners(this.listComponent,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})}}),this.listComponent.addManagedListeners(this.listComponent,{fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){let{key:t}=e;switch(t===G.TAB&&this.hidePicker(),t){case G.ENTER:case G.UP:case G.DOWN:case G.PAGE_UP:case G.PAGE_DOWN:case G.PAGE_HOME:case G.PAGE_END:e.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(e):super.onKeyDown(e);break;case G.ESCAPE:super.onKeyDown(e);break;case G.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){return this.listComponent?.clearOptions(),this}setValue(e,t,n){if(this.value===e||!this.listComponent)return this;if(n||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue())return this;let r=this.listComponent.getDisplayValue();return r==null&&this.config.placeholder&&(r=this.config.placeholder),this.eDisplayField.textContent=r,this.setTooltip({newTooltipText:r??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,t)}destroy(){this.listComponent&&(this.listComponent=this.destroyBean(this.listComponent)),super.destroy()}},Lbe={selector:"AG-SELECT",component:oN},OK=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(e=>{if(typeof e=="string")return;let t=[["displayKey"],["displayName"],["predicate","test"]],n=i=>i.some(r=>e[r]!=null)?!0:(X(`ignoring FilterOptionDef as it doesn't contain one of '${i}'`),!1);if(!t.every(n)){this.filterOptions=this.filterOptions.filter(i=>i===e)||[];return}this.customFilterOptions[e.displayKey]=e})}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){let t=this.filterOptions[0];typeof t=="string"?this.defaultOption=t:t.displayKey?this.defaultOption=t.displayKey:X("invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else X("no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}},NK=class extends Pbe{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){let t=this.optionsFactory.getCustomOption(e);if(t){let{numberOfInputs:i}=t;return i??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,n)=>{n===0?t.setValue(e,!0):t.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){let e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;let n=!e.operator,i=!t.operator;if(!n&&i||n&&!i)return!1;let o;if(n){let s=e,a=t;o=this.areSimpleModelsEqual(s,a)}else{let s=e,a=t;o=s.operator===a.operator&&qu(s.conditions,a.conditions,(l,c)=>this.areSimpleModelsEqual(l,c))}return o}shouldRefresh(e){let t=this.getModel(),n=t?t.conditions??[t]:null,i=e.filterOptions?.map(o=>typeof o=="string"?o:o.displayKey)??this.getDefaultFilterOptions();return!(!(!n||n.every(o=>i.find(s=>s===o.type)!==void 0))||typeof e.maxNumConditions=="number"&&n&&n.length>e.maxNumConditions)}refresh(e){return!this.shouldRefresh(e)||!super.refresh(e)?!1:(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){let n=e,i=n.conditions;i==null&&(i=[],X("Filter model is missing 'conditions'"));let r=this.validateAndUpdateConditions(i),o=this.getNumConditions();if(r<o)this.removeConditionsAndOperators(r);else if(r>o)for(let a=o;a<r;a++)this.createJoinOperatorPanel(),this.createOption();let s=n.operator==="OR";this.eJoinOperatorsAnd.forEach(a=>a.setValue(!s,!0)),this.eJoinOperatorsOr.forEach(a=>a.setValue(s,!0)),i.forEach((a,l)=>{this.eTypes[l].setValue(a.type,!0),this.setConditionIntoUi(a,l)})}else{let n=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(n.type,!0),this.setConditionIntoUi(n,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),$o.resolve()}validateAndUpdateConditions(e){let t=e.length;return t>this.maxNumConditions&&(e.splice(this.maxNumConditions),X('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),t=this.maxNumConditions),t}doesFilterPass(e){let t=this.getModel();if(t==null)return!0;let{operator:n}=t,i=[];if(n){let o=t;i.push(...o.conditions??[])}else i.push(t);return i[n&&n==="OR"?"some":"every"](o=>this.individualConditionPasses(e,o))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new OK,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){this.maxNumConditions=e.maxNumConditions??2,this.maxNumConditions<1&&(X('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=e.numAlwaysVisibleConditions??1,this.numAlwaysVisibleConditions<1&&(X('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(X('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){let e=this.createManagedBean(new oN);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());let t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);let n=this.getNumConditions()-1;this.forEachPositionInput(n,i=>this.resetInput(i)),this.addChangedListeners(e,n)}createJoinOperatorPanel(){let e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");let t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),n=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);let i=this.eJoinOperatorPanels.length-1,r=this.joinOperatorId++;this.resetJoinOperatorAnd(t,i,r),this.resetJoinOperatorOr(n,i,r),this.isReadOnly()||(t.onValueChange(this.listener),n.onValueChange(this.listener))}createJoinOperator(e,t,n){let i=this.createManagedBean(new kbe);return e.push(i),i.addCssClass("ag-filter-condition-operator"),i.addCssClass(`ag-filter-condition-operator-${n}`),t.appendChild(i.getGui()),i}getDefaultJoinOperator(e){return e==="AND"||e==="OR"?e:"AND"}createFilterListOptions(){let e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map(t=>typeof t=="string"?this.createBoilerplateListOption(t):this.createCustomListOption(t))}putOptionsIntoDropdown(e){this.filterListOptions.forEach(t=>{e.addOption(t)}),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){let{displayKey:t}=e,n=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:n?this.localeService.getLocaleTextFunc()(n.displayKey,n.displayName):this.translate(t)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){let e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let n=0;n<this.getNumConditions();n++)this.isConditionUiComplete(n)?e=n:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{let n=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<n){this.removeConditionsAndOperators(n+1);let i=e+1,r=n-i;r>0&&this.removeConditionsAndOperators(i,r),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((i,r)=>{let o=this.isConditionDisabled(r,e);i.setDisabled(o||this.filterListOptions.length<=1),r===1&&(yC(this.eJoinOperatorPanels[0],o),this.eJoinOperatorsAnd[0].setDisabled(o),this.eJoinOperatorsOr[0].setDisabled(o))}),this.eConditionBodies.forEach((i,r)=>{xn(i,this.isConditionBodyVisible(r))});let n=(t??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach(i=>{i.setValue(!n,!0)}),this.eJoinOperatorsOr.forEach(i=>{i.setValue(n,!0)}),this.forEachInput((i,r,o,s)=>{this.setElementDisplayed(i,r<s),this.setElementDisabled(i,this.isConditionDisabled(o,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,t),this.removeElements(this.eConditionBodies,e,t),this.removeValueElements(e,t);let n=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,n,t),this.removeComponents(this.eJoinOperatorsAnd,n,t),this.removeComponents(this.eJoinOperatorsOr,n,t)}removeElements(e,t,n){this.removeItems(e,t,n).forEach(r=>Is(r))}removeComponents(e,t,n){this.removeItems(e,t,n).forEach(r=>{Is(r.getGui()),this.destroyBean(r)})}removeItems(e,t,n){return n==null?e.splice(t):e.splice(t,n)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus)if(this.isReadOnly())this.eFilterBody.focus();else{let t=this.getInputs(0)[0];if(!t)return;t instanceof Kh&&t.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();let e=this.getModel();this.resetUiToActiveModel(e);let t=-1,n=-1,i=!1,r=this.getJoinOperator();for(let s=this.getNumConditions()-1;s>=0;s--)if(this.isConditionUiComplete(s))t===-1&&(t=s,n=s);else{let a=s>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(s-1),l=s<t;(a||l)&&(this.removeConditionsAndOperators(s,1),i=!0,l&&n--)}let o=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),o=!0),this.shouldAddNewConditionAtEnd(n===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),o=!0),o&&this.updateConditionStatusesAndValues(n,r),i&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=n}getPlaceholderText(e,t){let n=this.translate(e);if(BO(this.filterPlaceholder)){let i=this.filterPlaceholder,r=this.eTypes[t].getValue(),o=this.translate(r);n=i({filterOptionKey:r,filterOption:o,placeholder:n})}else typeof this.filterPlaceholder=="string"&&(n=this.filterPlaceholder);return n}resetPlaceholder(){let e=this.localeService.getLocaleTextFunc();this.forEachInput((t,n,i,r)=>{if(!(t instanceof Kh))return;let o=n===0&&r>1?"inRangeStart":n===0?"filterOoo":"inRangeEnd",s=n===0&&r>1?e("ariaFilterFromValue","Filter from value"):n===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(o,i)),t.setInputAriaLabel(s)})}setElementValue(e,t,n){e instanceof Kh&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){e instanceof At&&xn(e.getGui(),t)}setElementDisabled(e,t){e instanceof At&&yC(e.getGui(),t)}attachElementOnChange(e,t){e instanceof Kh&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,n)=>{this.forEachPositionTypeInput(n,t,e)})}forEachPositionInput(e,t){let n=this.getConditionType(e);this.forEachPositionTypeInput(e,n,t)}forEachPositionTypeInput(e,t,n){let i=this.getNumberOfInputs(t),r=this.getInputs(e);for(let o=0;o<r.length;o++){let s=r[o];s!=null&&n(s,o,e,i)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){let t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(n=>n==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){let e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinOperatorsAnd.forEach((t,n)=>this.resetJoinOperatorAnd(t,n,this.joinOperatorId+n)),this.eJoinOperatorsOr.forEach((t,n)=>this.resetJoinOperatorOr(t,n,this.joinOperatorId+n)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),$o.resolve()}resetType(e){let n=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(n).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,n){this.resetJoinOperator(e,t,this.isDefaultOperator("AND"),this.translate("andCondition"),n)}resetJoinOperatorOr(e,t,n){this.resetJoinOperator(e,t,this.isDefaultOperator("OR"),this.translate("orCondition"),n)}resetJoinOperator(e,t,n,i,r){this.updateJoinOperatorDisabled(e.setValue(n,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${r}`).setLabel(i),t)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t)),this.eJoinOperatorsOr.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t))}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){let n=this.mapValuesFromModel(e);this.forEachInput((i,r,o)=>{o===t&&this.setElementValue(i,n[r]!=null?n[r]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,n,i)=>{this.setElementValue(t,n===0&&i===0?e:null,!0)})}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,n=>{this.attachElementOnChange(n,this.listener)}))}individualConditionPasses(e,t){let n=this.getCellValue(e.node),i=this.mapValuesFromModel(t),r=this.optionsFactory.getCustomOption(t.type),o=this.evaluateCustomFilter(r,i,n);return o??(n==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(i,n,t,e))}evaluateCustomFilter(e,t,n){if(e==null)return;let{predicate:i}=e;if(i!=null&&!t.some(r=>r==null))return i(t,n)}isBlank(e){return e==null||typeof e=="string"&&e.trim().length===0}hasInvalidInputs(){return!1}},LK=class extends NK{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case"equals":if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case"notEqual":if(this.scalarFilterParams.includeBlanksInNotEqual)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case"lessThan":case"lessThanOrEqual":if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case"inRange":if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,n){let i=this.comparator(),r=e[0]!=null?i(e[0],t):0;switch(n.type){case"equals":return r===0;case"notEqual":return r!==0;case"greaterThan":return r>0;case"greaterThanOrEqual":return r>=0;case"lessThan":return r<0;case"lessThanOrEqual":return r<=0;case"inRange":{let o=i(e[1],t);return this.scalarFilterParams.inRangeInclusive?r>=0&&o<=0:r>0&&o<0}case"blank":return this.isBlank(t);case"notBlank":return!this.isBlank(t);default:return X('Unexpected type of filter "'+n.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},Vbe=65,Bbe=67,Gbe=86,Hbe=68,zbe=90,Ube=89;function VK(e){return e.altKey||e.ctrlKey||e.metaKey?!1:e.key?.length===1}function MO(e,t,n,i,r){let o=i?i.getColDef().suppressKeyboardEvent:void 0;if(!o)return!1;let s=e.addGridCommonParams({event:t,editing:r,column:i,node:n,data:n.data,colDef:i.getColDef()});return!!(o&&o(s))}function jbe(e,t,n,i){let r=i.getDefinition(),o=r&&r.suppressHeaderKeyboardEvent;if(!ne(o))return!1;let s=e.addGridCommonParams({colDef:r,column:i,headerRowIndex:n,event:t});return!!o(s)}function Wbe(e){let{keyCode:t}=e,n;switch(t){case Vbe:n=G.A;break;case Bbe:n=G.C;break;case Gbe:n=G.V;break;case Hbe:n=G.D;break;case zbe:n=G.Z;break;case Ube:n=G.Y;break;default:n=e.code}return n}function qbe(e,t=!1){return e===G.DELETE?!0:!t&&e===G.BACKSPACE?cK():!1}var of=class extends Kh{constructor(e,t="ag-text-field",n="text"){super(e,t,n)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){return this.eInput.value!==e&&(this.eInput.value=ne(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){let e=new RegExp(`[${this.config.allowedCharPattern}]`),t=n=>{VK(n)&&n.key&&!e.test(n.key)&&n.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:n=>{let i=n.clipboardData?.getData("text");i&&i.split("").some(r=>!e.test(r))&&n.preventDefault()}})}},lD={selector:"AG-INPUT-TEXT-FIELD",component:of},sN=class extends of{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListeners(this.eInput,{blur:()=>{let r=parseFloat(this.eInput.value),o=isNaN(r)?"":this.normalizeValue(r.toString());this.value!==o&&this.setValue(o)},wheel:this.onWheel.bind(this)}),this.eInput.step="any";let{precision:e,min:t,max:n,step:i}=this.config;typeof e=="number"&&this.setPrecision(e),typeof t=="number"&&this.setMin(t),typeof n=="number"&&this.setMax(n),typeof i=="number"&&this.setStep(i)}onWheel(e){Dn(this.gos)===this.eInput&&e.preventDefault()}normalizeValue(e){if(e==="")return"";this.precision!=null&&(e=this.adjustPrecision(e));let t=parseFloat(e);return this.min!=null&&t<this.min?e=this.min.toString():this.max!=null&&t>this.max&&(e=this.max.toString()),e}adjustPrecision(e,t){if(this.precision==null)return e;if(t){let i=parseFloat(e).toFixed(this.precision);return parseFloat(i).toString()}let n=String(e).split(".");if(n.length>1){if(n[1].length<=this.precision)return e;if(this.precision>0)return`${n[0]}.${n[1].slice(0,this.precision)}`}return n[0]}setMin(e){return this.min===e?this:(this.min=e,As(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,As(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,As(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(n=>super.setValue(n,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,n){if(ne(n)){let i=this.isScientificNotation(n);if(i&&this.eInput.validity.valid)return e(n);if(!i){n=this.adjustPrecision(n);let r=this.normalizeValue(n);i=n!=r}if(i)return t(n)}return e(n)}getValue(){if(!this.eInput.validity.valid)return;let e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},Kbe={selector:"AG-INPUT-NUMBER-FIELD",component:sN},BK=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],aN=class{constructor(e,t,n){this.localeService=e,this.optionsFactory=t,this.valueFormatter=n}getModelAsString(e){if(!e)return null;let t=e.operator!=null,n=this.localeService.getLocaleTextFunc();if(t){let i=e,o=(i.conditions??[]).map(a=>this.getModelAsString(a)),s=i.operator==="AND"?"andCondition":"orCondition";return o.join(` ${n(s,kK[s])} `)}else{if(e.type==="blank"||e.type==="notBlank")return n(e.type,e.type);{let i=e,r=this.optionsFactory.getCustomOption(i.type),{displayKey:o,displayName:s,numberOfInputs:a}=r||{};return o&&s&&a===0?(n(o,s),s):this.conditionToString(i,r)}}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){return this.valueFormatter?this.valueFormatter(e??null)??"":String(e)}},GK=class extends aN{conditionToString(e,t){let{numberOfInputs:n}=t||{};return e.type=="inRange"||n===2?`${this.formatValue(e.filter)}-${this.formatValue(e.filterTo)}`:e.filter!=null?this.formatValue(e.filter):`${e.type}`}};function PO(e){let{allowedCharPattern:t}=e??{};return t??null}var Ybe=class extends LK{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern!==e.allowedCharPattern?!1:super.refresh(e)}mapValuesFromModel(e){let{filter:t,filterTo:n,type:i}=e||{};return[this.processValue(t),this.processValue(n)].slice(0,this.getNumberOfInputs(i))}getDefaultDebounceMs(){return 500}comparator(){return(e,t)=>e===t?0:e<t?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new GK(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return BK}setElementValue(e,t,n){let i=!n&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(t??null):t;super.setElementValue(e,i)}createValueElement(){let e=PO(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),es(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,n,i){let r=this.createManagedBean(i?new of({allowedCharPattern:i}):new sN);r.addCssClass(`ag-filter-${n}`),r.addCssClass("ag-filter-filter"),t.push(r),e.appendChild(r.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}getValues(e){let t=[];return this.forEachPositionInput(e,(n,i,r,o)=>{i<o&&t.push(this.processValue(this.stringToFloat(n.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getFilterType(){return"number"}processValue(e){return e==null||isNaN(e)?null:e}stringToFloat(e){if(typeof e=="number")return e;let t=fc(e);return t!=null&&t.trim()===""&&(t=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(t):t==null||t.trim()==="-"?null:parseFloat(t)}createCondition(e){let t=this.getConditionType(e),n={filterType:this.getFilterType(),type:t},i=this.getValues(e);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{if(!t.getInputElement().validity.valid){e=!0;return}}),e}},HK=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],zK=class extends aN{conditionToString(e,t){let{numberOfInputs:n}=t||{};return e.type=="inRange"||n===2?`${e.filter}-${e.filterTo}`:e.filter!=null?`${e.filter}`:`${e.type}`}};function UK(e){let t=e&&e.trim();return t===""?e:t}var Qbe=class extends NK{constructor(){super("textFilter"),this.defaultFormatter=e=>e,this.defaultLowercaseFormatter=e=>e==null?null:e.toString().toLowerCase(),this.defaultMatcher=({filterOption:e,value:t,filterText:n})=>{if(n==null)return!1;switch(e){case"contains":return t.indexOf(n)>=0;case"notContains":return t.indexOf(n)<0;case"equals":return t===n;case"notEqual":return t!=n;case"startsWith":return t.indexOf(n)===0;case"endsWith":{let i=t.lastIndexOf(n);return i>=0&&i===t.length-n.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[]}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new zK(this.localeService,this.optionsFactory)}getTextMatcher(){let e=this.textFilterParams.textCustomComparator;return e?(X("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:t,value:n,filterText:i})=>e(t,n,i)):this.textFilterParams.textMatcher||this.defaultMatcher}createCondition(e){let t=this.getConditionType(e),n={filterType:this.getFilterType(),type:t},i=this.getValuesWithSideEffects(e,!0);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}getFilterType(){return"text"}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){let n=[];return this.forEachPositionInput(e,(i,r,o,s)=>{if(r<s){let a=fc(i.getValue());t&&this.textFilterParams.trimInput&&(a=UK(a)??null,i.setValue(a,!0)),n.push(a)}}),n}getDefaultFilterOptions(){return HK}createValueElement(){let e=document.createElement("div");return e.classList.add("ag-filter-body"),es(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,n){let i=this.createManagedBean(new of);i.addCssClass(`ag-filter-${n}`),i.addCssClass("ag-filter-filter"),t.push(i),e.appendChild(i.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}mapValuesFromModel(e){let{filter:t,filterTo:n,type:i}=e||{};return[t||null,n||null].slice(0,this.getNumberOfInputs(i))}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,n,i){let r=e.map(h=>this.formatter(h))||[],o=this.formatter(t),{api:s,colDef:a,column:l,context:c,textFormatter:u}=this.textFilterParams;if(n.type==="blank")return this.isBlank(t);if(n.type==="notBlank")return!this.isBlank(t);let d={api:s,colDef:a,column:l,context:c,node:i.node,data:i.data,filterOption:n.type,value:o,textFormatter:u};return r.some(h=>this.matcher(pe(B({},d),{filterText:h})))}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}};function jK(e){if(typeof e=="number")return e;if(typeof e=="string"){let t=parseInt(e);return isNaN(t)?void 0:t}}function cl(e,t=Number.MAX_VALUE){return n=>{let i=jK(n);if(!(i==null||i<e||i>t))return i}}function uC(e,t){return e.toString().padStart(t,"0")}function Xbe(e,t){let n=[];for(let i=e;i<=t;i++)n.push(i);return n}function $be(e,t,n){return typeof e!="number"?"":e.toString().replace(".",n).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${t}`)}function Ms(e,t=!0,n="-"){if(!e)return null;let i=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(r=>uC(r,2)).join(n);return t&&(i+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map(r=>uC(r,2)).join(":")),i}var dO=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function dC(e,t="YYYY-MM-DD"){let n=uC(e.getFullYear(),4),i=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o={YYYY:()=>n.slice(n.length-4,n.length),YY:()=>n.slice(n.length-2,n.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>i[e.getMonth()],MMM:()=>i[e.getMonth()].slice(0,3),MM:()=>uC(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${dO(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${dO(e.getDate())}`,DD:()=>uC(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>r[e.getDay()],ddd:()=>r[e.getDay()].slice(0,3),dd:()=>r[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${dO(e.getDay())}`,d:()=>`${e.getDay()}`},s=new RegExp(Object.keys(o).join("|"),"g");return t.replace(s,a=>a in o?o[a]():a)}function xo(e){if(!e)return null;let[t,n]=e.split(" ");if(!t)return null;let i=t.split("-").map(d=>parseInt(d,10));if(i.filter(d=>!isNaN(d)).length!==3)return null;let[r,o,s]=i,a=new Date(r,o-1,s);if(a.getFullYear()!==r||a.getMonth()!==o-1||a.getDate()!==s)return null;if(!n||n==="00:00:00")return a;let[l,c,u]=n.split(":").map(d=>parseInt(d,10));return l>=0&&l<24&&a.setHours(l),c>=0&&c<60&&a.setMinutes(c),u>=0&&u<60&&a.setSeconds(u),a}var WK=class{constructor(e,t,n,i,r){this.alive=!0,this.context=e,this.eParent=i,t.getDateCompDetails(n).newAgStackInstance().then(a=>{if(!this.alive){e.destroyBean(a);return}this.dateComp=a,a&&(i.appendChild(a.getGui()),a.afterGuiAttached&&a.afterGuiAttached(),this.tempValue&&a.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled),r?.(this))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){xn(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(e)}updateParams(e){let t=!1;this.dateComp?.refresh&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(e)!==null&&(t=!0),!t&&this.dateComp?.onParamsUpdated&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(e)!==null&&X("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(e){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(e)}},qK=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],KK=class extends aN{constructor(e,t,n){super(t,n),this.dateFilterParams=e}conditionToString(e,t){let{type:n}=e,{numberOfInputs:i}=t||{},r=n=="inRange"||i===2,o=xo(e.dateFrom),s=xo(e.dateTo),a=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(r){let l=o!==null?dC(o,a):"null",c=s!==null?dC(s,a):"null";return`${l}-${c}`}return o!=null?dC(o,a):`${n}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},mq=1e3,vq=1/0,Zbe=class extends LK{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=mq,this.maxValidYear=vq,this.minValidDate=null,this.maxValidDate=null}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){let{dateFrom:t,dateTo:n,type:i}=e||{};return[t&&xo(t)||null,n&&xo(n)||null].slice(0,this.getNumberOfInputs(i))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,t){let n=t;return t==null||n<e?-1:n>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);let t=(n,i)=>{if(e[n]!=null)if(isNaN(e[n]))X(`DateFilter ${n} is not a number`);else return e[n]==null?i:Number(e[n]);return i};this.minValidYear=t("minValidYear",mq),this.maxValidYear=t("maxValidYear",vq),this.minValidYear>this.maxValidYear&&X("DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:xo(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:xo(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&X("DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new KK(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){let t=new WK(this.context,this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc(()=>t.destroy()),t}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return qK}createValueElement(){let t=Yn(this.gos).createElement("div");return t.classList.add("ag-filter-body"),this.createFromToElement(t,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(t,this.eConditionPanelsTo,this.dateConditionToComps,"to"),t}createFromToElement(e,t,n,i){let o=Yn(this.gos).createElement("div");o.classList.add(`ag-filter-${i}`),o.classList.add(`ag-filter-date-${i}`),t.push(o),e.appendChild(o),n.push(this.createDateCompWrapper(o))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),this.removeItems(this.eConditionPanelsFrom,e,t),this.removeItems(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,n){this.removeItems(e,t,n).forEach(r=>r.destroy())}isValidDateValue(e){if(e===null)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((n,i,r,o)=>{r!==e||!t||i>=o||(t=t&&this.isValidDateValue(n.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}getFilterType(){return"date"}createCondition(e){let t=this.getConditionType(e),n={},i=this.getValues(e);return i.length>0&&(n.dateFrom=Ms(i[0])),i.length>1&&(n.dateTo=Ms(i[1])),B({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:t},n)}resetPlaceholder(){let e=this.localeService.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),n=e("ariaFilterValue","Filter Value");this.forEachInput(i=>{i.setInputPlaceholder(t),i.setInputAriaLabel(n)})}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){let t=[];return this.forEachPositionInput(e,(n,i,r,o)=>{i<o&&t.push(n.getDate())}),t}translate(e){return e==="lessThan"?super.translate("before"):e==="greaterThan"?super.translate("after"):super.translate(e)}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}},lN=class extends j{constructor(e,t,n,i){super(),this.columnOrGroup=e,this.columnOrGroup=e,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=i,this.beans=n}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?Rt(this.colsSpanning):this.columnOrGroup}postConstruct(){let e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){let e=this.beans.gos.get("suppressColumnMoveAnimation"),t=ne(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){let e=this.getColumnOrGroup(),t=e.getLeft(),n=e.getOldLeft(),i=this.modifyLeftForPrintLayout(e,n),r=this.modifyLeftForPrintLayout(e,t);this.setLeft(i),this.actualLeft=r,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===r&&this.setLeft(r)})}onLeftChanged(){let e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){if(!lr(this.beans.gos,"print")||e.getPinned()==="left")return t;let i=this.beans.visibleColsService.getColsLeftWidth();if(e.getPinned()==="right"){let r=this.beans.visibleColsService.getBodyContainerWidth();return i+r+t}return i+t}setLeft(e){if(ne(e)&&(this.eCell.style.left=`${e}px`),si(this.columnOrGroup)){let t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&vwe(this.ariaEl,t.length)}}},Jbe="ag-column-first",eSe="ag-column-last";function YK(e,t,n,i){return St(e)?[]:nSe(e.headerClass,e,t,n,i)}function QK(e,t,n){e.addOrRemoveCssClass(Jbe,n.isColAtEdge(t,"first")),e.addOrRemoveCssClass(eSe,n.isColAtEdge(t,"last"))}function tSe(e,t,n,i){return t.addGridCommonParams({colDef:e,column:n,columnGroup:i})}function nSe(e,t,n,i,r){if(St(e))return[];let o;if(typeof e=="function"){let s=tSe(t,n,i,r);o=e(s)}else o=e;return typeof o=="string"?[o]:Array.isArray(o)?[...o]:[]}var iSe=0,XK=class $K extends j{constructor(t,n,i){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=t,this.parentRowCtrl=i,this.beans=n,this.instanceId=t.getUniqueId()+"-"+iSe++}wireBeans(t){this.pinnedWidthService=t.pinnedWidthService,this.focusService=t.focusService,this.userComponentFactory=t.userComponentFactory,this.ctrlsService=t.ctrlsService,this.dragAndDropService=t.dragAndDropService,this.menuService=t.menuService}postConstruct(){let t=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],t),this.addManagedEventListeners({overlayExclusiveChanged:t})}shouldStopEventPropagation(t){let{headerRowIndex:n,column:i}=this.focusService.getFocusedHeader();return jbe(this.gos,t,n,i)}getWrapperHasFocus(){return Dn(this.gos)===this.eGui}setGui(t,n){this.eGui=t,this.addDomData(n),n.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),n.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onGuiFocus(){this.eventService.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(t){let{wrapperElement:n,checkMeasuringCallback:i,compBean:r}=t,{animationFrameService:o,resizeObserverService:s,columnModel:a,gos:l}=this.beans,c=m=>{if(!this.isAlive()||!r.isAlive())return;let{paddingTop:v,paddingBottom:C,borderBottomWidth:S,borderTopWidth:_}=nf(this.getGui()),D=v+C+S+_,I=n.offsetHeight+D;if(m<5){let E=Yn(l),b=!E||!E.contains(n),x=I==0;if(b||x){o.requestAnimationFrame(()=>c(m+1));return}}a.setColHeaderHeight(this.column,I)},u=!1,d,h=()=>{let m=this.column.isAutoHeaderHeight();m&&!u&&p(),!m&&u&&g()},p=()=>{u=!0,c(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),d=s.observeResize(n,()=>c(0))},g=()=>{u=!1,d&&d(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),d=void 0};h(),r.addDestroyFunc(()=>g()),r.addManagedListeners(this.column,{widthChanged:()=>u&&c(0)}),r.addManagedEventListeners({sortChanged:()=>{u&&window.setTimeout(()=>c(0))}}),i&&i(h)}onDisplayedColumnsChanged(){let{comp:t,column:n,beans:i,eGui:r}=this;!t||!n||!r||(QK(t,n,i.visibleColsService),aK(r,i.visibleColsService.getAriaColIndex(n)))}addResizeAndMoveKeyboardListeners(t){this.resizeFeature&&t.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){let t=this.focusService.isHeaderFocusSuppressed();this.eGui&&As(this.eGui,"tabindex",t?null:"-1")}onGuiKeyDown(t){let n=Dn(this.gos),i=t.key===G.LEFT||t.key===G.RIGHT;if(this.isResizing&&(t.preventDefault(),t.stopImmediatePropagation()),n!==this.eGui||!t.shiftKey&&!t.altKey||((this.isResizing||i)&&(t.preventDefault(),t.stopImmediatePropagation()),!i))return;let r=t.key===G.LEFT!==this.gos.get("enableRtl"),o=IK[r?"Left":"Right"];if(t.altKey){this.isResizing=!0,this.resizeMultiplier+=1;let s=this.getViewportAdjustedResizeDiff(t);this.resizeHeader(s,t.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(o)}getViewportAdjustedResizeDiff(t){let n=this.getResizeDiff(t);if(this.column.getPinned()){let r=this.pinnedWidthService.getPinnedLeftWidth(),o=this.pinnedWidthService.getPinnedRightWidth(),s=SC(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(r+o+n>s)if(s>r+o)n=s-r-o;else return 0}return n}getResizeDiff(t){let n=t.key===G.LEFT!==this.gos.get("enableRtl"),i=this.column.getPinned(),r=this.gos.get("enableRtl");return i&&r!==(i==="right")&&(n=!n),(n?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{this.resizeFeature?.toggleColumnResizing(!1)},150))}handleKeyDown(t){let n=this.getWrapperHasFocus();switch(t.key){case G.PAGE_DOWN:case G.PAGE_UP:case G.PAGE_HOME:case G.PAGE_END:n&&t.preventDefault()}}addDomData(t){let n=$K.DOM_DATA_KEY_HEADER_CTRL;Jh(this.gos,this.eGui,n,this),t.addDestroyFunc(()=>Jh(this.gos,this.eGui,n,null))}getGui(){return this.eGui}focus(t){return this.eGui?(this.lastFocusEvent=t||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(t,n,i){let r=t??n;this.gos.get("preventDefaultOnContextMenu")&&r.preventDefault(),this.menuService.isHeaderContextMenuEnabled(i)&&this.menuService.showHeaderContextMenu(i,t,n),this.dispatchColumnMouseEvent("columnHeaderContextMenu",i)}dispatchColumnMouseEvent(t,n){this.eventService.dispatchEvent({type:t,column:n})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null}};XK.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";var cD=XK,cN=class extends j{wireBeans(e){this.columnHoverService=e.columnHoverService}constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListeners(this.element,{mouseout:this.onMouseOut.bind(this),mouseover:this.onMouseOver.bind(this)})}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}},rSe=class extends cD{constructor(e,t,n){super(e,t,n),this.iconCreated=!1,this.column=e}setComp(e,t,n,i,r){this.comp=e,r=bC(this,this.beans.context,r),this.eButtonShowMainFilter=n,this.eFloatingFilterBody=i,this.setGui(t,r),this.setupActive(),this.setupWidth(r),this.setupLeft(r),this.setupHover(r),this.setupFocus(r),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(r),this.setupUi(),r.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(r),r.addManagedListeners(this.column,{colDefChanged:()=>this.onColDefChanged(r)}),r.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}setupActive(){let e=this.column.getColDef(),t=!!e.filter,n=!!e.floatingFilter;this.active=t&&n}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;let e=Zo("filter",this.gos,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new rf(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){let e=this.localeService.getLocaleTextFunc();dm(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(Dn(this.gos)===this.eGui)return;let i=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(i){this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),i.focus();return}let r=this.findNextColumnWithFloatingFilter(e.shiftKey);r&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:r},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){let t=this.beans.visibleColsService,n=this.column;do if(n=e?t.getColBefore(n):t.getColAfter(n),!n)break;while(!n.getColDef().filter||!n.getColDef().floatingFilter);return n}handleKeyDown(e){super.handleKeyDown(e);let t=this.getWrapperHasFocus();switch(e.key){case G.UP:case G.DOWN:t||e.preventDefault();case G.LEFT:case G.RIGHT:if(t)return;e.stopPropagation();case G.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case G.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;let n=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),i=!!e.relatedTarget&&am(e.relatedTarget,"ag-floating-filter");if(n&&i&&e.target===this.eGui){let o=this.lastFocusEvent,s=!!(o&&o.key===G.TAB);if(o&&s){let a=o.shiftKey;this.focusService.focusInto(this.eGui,a)}}let r=this.getRowIndex();this.beans.focusService.setFocusedHeader(r,this.column)}setupHover(e){e.createManagedBean(new cN([this.column],this.eGui));let t=()=>{if(!this.gos.get("columnHoverHighlight"))return;let n=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",n)};e.addManagedEventListeners({columnHoverChanged:t}),t()}setupLeft(e){let t=new lN(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){if(!this.active)return;let e=this.beans.filterManager?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){let e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;let{filterManager:t}=this.beans,n=i=>{if(i?.source==="filterDestroyed"&&!this.isAlive())return;let r=this.comp.getFloatingFilterComp();r&&r.then(o=>{if(o){let s=t?.getCurrentFloatingFilterParentModel(this.column),a=i?pe(B({},i),{columns:i.columns??[],source:i.source==="api"?"api":"columnFilter"}):null;o.onParentModelChanged(s,a)}})};[this.destroySyncListener]=e.addManagedListeners(this.column,{filterChanged:n}),t?.isFilterActive(this.column)&&n(null)}setupWidth(e){let t=()=>{let n=`${this.column.getActualWidth()}px`;this.comp.setWidth(n)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){let e=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){let t=this.active;this.setupActive();let n=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());let i=this.active?this.beans.filterManager?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,r=this.comp.getFloatingFilterComp();!r||!i?this.updateCompDetails(e,i,n):r.then(o=>{!o||this.beans.filterManager?.areFilterCompsDifferent(this.userCompDetails??null,i)?this.updateCompDetails(e,i,n):this.updateFloatingFilterParams(i)})}updateCompDetails(e,t,n){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),n&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e){if(!e)return;let t=e.params;this.comp.getFloatingFilterComp()?.then(n=>{let i=!1;n?.refresh&&typeof n.refresh=="function"&&n.refresh(t)!==null&&(i=!0),!i&&n?.onParamsUpdated&&typeof n.onParamsUpdated=="function"&&n.onParamsUpdated(t)!==null&&X("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};var qe="32.3.4";function oSe(e){return!!e.filterManager?.isColumnFilterPresent()||!!e.filterManager?.isAggregateFilterPresent()}function sSe(e,t,n){return e.filterManager?.getFilterInstance(t,n)}function aSe(e,t){return e.filterManager?.getColumnFilterInstance(t)??Promise.resolve(void 0)}function lSe(e,t){let n=e.columnModel.getColDefCol(t);if(n)return e.filterManager?.destroyFilter(n,"api")}function cSe(e,t){e.frameworkOverrides.wrapIncoming(()=>e.filterManager?.setFilterModel(t))}function uSe(e){return e.filterManager?.getFilterModel()??{}}function dSe(e,t){return e.filterManager?.getColumnFilterModel(t)??null}function hSe(e,t,n){return e.filterManager?.setColumnFilterModel(t,n)??Promise.resolve()}function fSe(e,t){let n=e.columnModel.getCol(t);if(!n){kt(`column '${t}' not found`);return}e.menuService.showFilterMenu({column:n,containerType:"columnFilter",positionBy:"auto"})}function pSe(e,t,n){if(t==null)return null;let i=null,{compName:r,jsComp:o,fwComp:s}=TK.getCompKeys(e,t,iN);return r?i={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[r]:o==null&&s==null&&t.filter===!0&&(i=n()),i}var yq={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},Cq=["january","february","march","april","may","june","july","august","september","october","november","december"],gSe=class extends j{constructor(){super(...arguments),this.beanName="columnFilterService",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.userComponentFactory=e.userComponentFactory,this.rowRenderer=e.rowRenderer,this.dataTypeService=e.dataTypeService,this.filterManager=e.filterManager}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),rowDataUpdated:()=>this.onNewRowsLoaded("rowDataUpdated"),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel=B({},this.gos.get("initialState")?.filter?.filterModel??{})}setFilterModel(e,t="api"){if(this.dataTypeService?.isPendingInference()){this.filterModelUpdateQueue.push({model:e,source:t});return}let n=[],i=this.getFilterModel(!0);if(e){let r=new Set(Object.keys(e));this.allColumnFilters.forEach((o,s)=>{let a=e[s];n.push(this.setModelOnFilterWrapper(o.filterPromise,a)),r.delete(s)}),r.forEach(o=>{let s=this.columnModel.getColDefCol(o)||this.columnModel.getCol(o);if(!s){X("setFilterModel() - no column found for colId: "+o);return}if(!s.isFilterAllowed()){X("setFilterModel() - unable to fully apply model, filtering disabled for colId: "+o);return}let a=this.getOrCreateFilterWrapper(s);if(!a){X("setFilterModel() - unable to fully apply model, unable to create filter for colId: "+o);return}n.push(this.setModelOnFilterWrapper(a.filterPromise,e[o]))})}else this.allColumnFilters.forEach(r=>{n.push(this.setModelOnFilterWrapper(r.filterPromise,null))});$o.all(n).then(()=>{let r=this.getFilterModel(!0),o=[];this.allColumnFilters.forEach((s,a)=>{let l=i?i[a]:null,c=r?r[a]:null;hC(l,c)||o.push(s.column)}),o.length>0&&this.filterManager?.onFilterChanged({columns:o,source:t})})}setModelOnFilterWrapper(e,t){return new $o(n=>{e.then(i=>{typeof i.setModel!="function"&&(X("filter missing setModel method, which is needed for setFilterModel"),n()),(i.setModel(t)||$o.resolve()).then(()=>n())})})}getFilterModel(e){let t={},{allColumnFilters:n,initialFilterModel:i}=this;return n.forEach((r,o)=>{let s=this.getModelFromFilterWrapper(r);ne(s)&&(t[o]=s)}),e||Object.entries(i).forEach(([r,o])=>{ne(o)&&!n.has(r)&&this.columnModel.getCol(r)?.isFilterAllowed()&&(t[r]=o)}),t}getModelFromFilterWrapper(e){let{filter:t}=e;return t?typeof t.getModel!="function"?(X("filter API missing getModel method, which is needed for getFilterModel"),null):t.getModel():this.getModelFromInitialState(e.column)}getModelFromInitialState(e){return this.initialFilterModel[e.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){return this.allColumnFilters.size?(this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"advancedFilterEnabled")),!0):!1}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){let e=o=>o?o.isFilterActive?o.isFilterActive():(X("Filter is missing isFilterActive() method"),!1):!1,t=!!bO(this.gos),n=o=>{if(!o.isPrimary())return!0;let a=!this.columnModel.isPivotActive();return!o.isValueActive()||!a?!1:this.columnModel.isPivotMode()?!0:t},i=[],r=[];return this.forEachColumnFilter((o,s)=>{e(o)&&(n(s.column)?i.push(o):r.push(o))}).then(()=>{this.activeAggregateFilters=i,this.activeColumnFilters=r})}updateFilterFlagInColumns(e,t){return this.forEachColumnFilter((n,i)=>i.column.setFilterActive(n.isFilterActive(),e,t))}forEachColumnFilter(e){return $o.all(Array.from(this.allColumnFilters.values()).map(t=>t.filterPromise.then(n=>e(n,t))))}doColumnFiltersPass(e,t,n){let{data:i,aggData:r}=e,o=n?this.activeAggregateFilters:this.activeColumnFilters,s=n?r:i;for(let a=0;a<o.length;a++){let l=o[a];if(!(l==null||l===t)){if(typeof l.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!l.doesFilterPass({node:e,data:s}))return!1}}return!0}callOnFilterChangedOutsideRenderCycle(e){let t=()=>this.filterManager?.onFilterChanged(e);this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}updateBeforeFilterChanged(e={}){let{filterInstance:t,additionalEventAttributes:n}=e;return this.updateDependentFilters(),this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",n).then(()=>{this.allColumnFilters.forEach(i=>{i.filterPromise&&i.filterPromise.then(r=>{r&&r!==t&&r.onAnyFilterChanged&&r.onAnyFilterChanged()})}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){this.forEachColumnFilter(t=>{t.onNewRowsLoaded&&t.onNewRowsLoaded()}).then(()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createValueGetter(e){return({node:t})=>this.valueService.getValue(e,t,!0)}createGetValue(e){return(t,n)=>{let i=n?this.columnModel.getCol(n):e;return i?this.valueService.getValue(i,t,!0):void 0}}isFilterActive(e){let{filter:t}=this.cachedFilter(e)??{};return t?t.isFilterActive():this.getModelFromInitialState(e)!=null}getOrCreateFilterWrapper(e){if(!e.isFilterAllowed())return null;let t=this.cachedFilter(e);return t||(t=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,t)),t}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t;if(nO(this.gos))t="agSetColumnFilter";else{let n=this.dataTypeService?.getBaseDataType(e);n==="number"?t="agNumberColumnFilter":n==="date"||n==="dateString"?t="agDateColumnFilter":t="agTextColumnFilter"}return t}getDefaultFloatingFilter(e){let t;if(nO(this.gos))t="agSetColumnFloatingFilter";else{let n=this.dataTypeService?.getBaseDataType(e);n==="number"?t="agNumberColumnFloatingFilter":n==="date"||n==="dateString"?t="agDateColumnFloatingFilter":t="agTextColumnFloatingFilter"}return t}createFilterInstance(e,t){let n=this.getDefaultFilter(e),i=e.getColDef(),r,o=pe(B({},this.createFilterParams(e,i)),{filterModifiedCallback:()=>this.filterModifiedCallbackFactory(r,e)(),filterChangedCallback:a=>this.filterChangedCallbackFactory(r,e)(a),doesRowPassOtherFilter:a=>this.filterManager?this.filterManager.doesRowPassOtherFilters(r,a):!0}),s=this.userComponentFactory.getFilterDetails(i,o,n);return s?{filterPromise:()=>{let a=s.newAgStackInstance();return a?.then(l=>{r=l,t&&(t.filter=l)}),a},compDetails:s}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return this.gos.addGridCommonParams({column:e,colDef:Yq(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e){let t={column:e,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:n,compDetails:i}=this.createFilterInstance(e,t);return t.filterPromise=n?.()??null,t.compDetails=i,t}onColumnsChanged(){let e=[];this.allColumnFilters.forEach((n,i)=>{let r;n.column.isPrimary()?r=this.columnModel.getColDefCol(i):r=this.columnModel.getCol(i),!(r&&r===n.column)&&(e.push(n.column),this.disposeFilterWrapper(n,"columnChanged"),this.disposeColumnListener(i))});let t=e.every(n=>n.getColDef().filter==="agGroupColumnFilter");e.length>0&&!t?this.filterManager?.onFilterChanged({columns:e,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){this.columnModel.getAutoCols()?.forEach(t=>{t.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(t)})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;let{filter:n}=this.allColumnFilters.get(e.getColId())??{};return n&&typeof n?.isFilterAllowed=="function"?n.isFilterAllowed():!0}getFloatingFilterCompDetails(e,t){let n=l=>{let c=this.getOrCreateFilterWrapper(e)?.filterPromise;c?.then(u=>{l(cC(u))})},i=e.getColDef(),r=pe(B({},this.createFilterParams(e,i)),{filterChangedCallback:()=>n(l=>this.filterChangedCallbackFactory(l,e)())}),o=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(i,iN,r),s=pSe(this.frameworkOverrides,i,()=>this.getDefaultFloatingFilter(e));s==null&&(s="agReadOnlyFloatingFilter");let a={column:e,filterParams:o,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:n,showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(i,a,s)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilter(e,t="api"){let n=e.getColId(),i=this.allColumnFilters.get(n);this.disposeColumnListener(n),delete this.initialFilterModel[n],i&&(this.disposeFilterWrapper(i,t),this.filterManager?.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){let t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){e.filterPromise.then(n=>{this.destroyBean(n),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId()),this.eventService.dispatchEvent({type:"filterDestroyed",source:t,column:e.column})})}filterModifiedCallbackFactory(e,t){return()=>{this.eventService.dispatchEvent({type:"filterModified",column:t,filterInstance:e})}}filterChangedCallbackFactory(e,t){return n=>{let i=n?.source??"columnFilter",r={filter:e,additionalEventAttributes:n,columns:[t],source:i};this.callOnFilterChangedOutsideRenderCycle(r)}}checkDestroyFilter(e){let t=this.allColumnFilters.get(e);if(!t)return;let n=t.column,{compDetails:i}=n.isFilterAllowed()?this.createFilterInstance(n):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,i)){this.destroyFilter(n,"paramsUpdated");return}let r=n.getColDef().filterParams;if(!t.filterPromise){this.destroyFilter(n,"paramsUpdated");return}t.filterPromise.then(o=>{(o?.refresh?o.refresh(B(pe(B({},this.createFilterParams(n,n.getColDef())),{filterModifiedCallback:this.filterModifiedCallbackFactory(o,n),filterChangedCallback:this.filterChangedCallbackFactory(o,n),doesRowPassOtherFilter:a=>this.filterManager?this.filterManager.doesRowPassOtherFilters(o,a):!0}),r)):!0)===!1&&this.destroyFilter(n,"paramsUpdated")})}setColumnFilterWrapper(e,t){let n=e.getColId();this.allColumnFilters.set(n,t),this.allColumnListeners.set(n,this.addManagedListeners(e,{colDefChanged:()=>this.checkDestroyFilter(n)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;let{componentClass:n}=e,{componentClass:i}=t;return!(n===i||n?.render&&i?.render&&n.render===i.render)}hasFloatingFilters(){return this.columnModel.getCols().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e,t){t&&this.getFilterInstanceImpl(e).then(n=>{let i=cC(n);t(i)})}getColumnFilterInstance(e){return new Promise(t=>{this.getFilterInstanceImpl(e).then(n=>{t(cC(n))})})}getFilterInstanceImpl(e){let t=this.columnModel.getColDefCol(e);return t?this.getOrCreateFilterWrapper(t)?.filterPromise??$o.resolve(null):$o.resolve(void 0)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:e,source:t})=>this.setFilterModel(e,t)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:e,model:t,resolve:n})=>{this.setColumnFilterModel(e,t).then(()=>n())}),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(e){let t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){if(this.dataTypeService?.isPendingInference()){let o=()=>{},s=new Promise(a=>{o=a});return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:o}),s}let n=this.columnModel.getColDefCol(e),i=n?this.getOrCreateFilterWrapper(n):null;return i?(o=>new Promise(s=>{o.then(a=>s(a))}))(this.setModelOnFilterWrapper(i.filterPromise,t)):Promise.resolve()}getFilterWrapper(e){let t=this.columnModel.getColDefCol(e);return t?this.cachedFilter(t)??null:null}setColDefPropertiesForDataType(e,t,n){let i=nO(this.gos),r=this.localeService.getLocaleTextFunc(),o=s=>{let{filterParams:a}=e;e.filterParams=typeof a=="object"?B(B({},a),s):s};switch(t.baseDataType){case"number":{i&&o({comparator:(s,a)=>{let l=s==null?0:parseInt(s),c=a==null?0:parseInt(a);return l===c?0:l>c?1:-1}});break}case"boolean":{o(i?{valueFormatter:s=>ne(s.value)?r(String(s.value),s.value?"True":"False"):r("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(s,a)=>a,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(s,a)=>a===!1,numberOfInputs:0}]});break}case"date":{i&&o({valueFormatter:s=>{let a=n(s);return ne(a)?a:r("blanks","(Blanks)")},treeList:!0,treeListFormatter:(s,a)=>{if(a===1&&s!=null){let l=Cq[Number(s)-1];return r(l,yq[l])}return s??r("blanks","(Blanks)")}});break}case"dateString":{let s=t.dateParser;o(i?{valueFormatter:a=>{let l=n(a);return ne(l)?l:r("blanks","(Blanks)")},treeList:!0,treeListPathGetter:a=>{let l=s(a??void 0);return l?[String(l.getFullYear()),String(l.getMonth()+1),String(l.getDate())]:null},treeListFormatter:(a,l)=>{if(l===1&&a!=null){let c=Cq[Number(a)-1];return r(c,yq[c])}return a??r("blanks","(Blanks)")}}:{comparator:(a,l)=>{let c=s(l);return l==null||c<a?-1:c>a?1:0}});break}case"object":{i?o({valueFormatter:s=>{let a=n(s);return ne(a)?a:r("blanks","(Blanks)")}}):e.filterValueGetter=s=>n({column:s.column,node:s.node,value:this.valueService.getValue(s.column,s.node)});break}}}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}};function mSe(e){return!!e.filterManager?.isAnyFilterPresent()}function vSe(e,t="api"){e.filterManager?.onFilterChanged({source:t})}var ySe=class extends At{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>
            </div>`,[lD]),this.eFloatingFilterText=fe}wireBeans(e){this.columnNameService=e.columnNameService}destroy(){super.destroy()}init(e){this.params=e;let t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),n=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${n("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){let n=t.getModelAsString(e);this.eFloatingFilterText.setValue(n)}})}onParamsUpdated(e){this.refresh(e)}refresh(e){this.init(e)}},ZK=class extends At{wireBeans(e){this.columnNameService=e.columnNameService}getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return e?.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.getDefaultOption();return}let t=e.operator,n;t?n=e.conditions[0]:n=e,this.lastType=n.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;let n=e;return this.isTypeEditable(n.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){this.optionsFactory=new OK,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),t||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!e.filterParams.readOnly;let n=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(n)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){let t=this.optionsFactory.getCustomOption(e),{numberOfInputs:n}=t||{};return n==null||n==1}isTypeEditable(e){let t=["inRange","empty","blank","notBlank"];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){let t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),n=this.localeService.getLocaleTextFunc();return`${t} ${n("ariaFilterInput","Filter Input")}`}},CSe=class extends ZK{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eReadOnlyText"></ag-input-text-field>
                <div data-ref="eDateWrapper" style="display: flex;"></div>
            </div>`,[lD]),this.eReadOnlyText=fe,this.eDateWrapper=fe}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}getDefaultFilterOptions(){return qK}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new KK(this.filterParams,this.localeService,this.optionsFactory);let t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){let t=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){if(e){let n=e;this.dateComp.setDate(xo(n.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){xn(this.eDateWrapper,e),xn(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){let e=this.dateComp.getDate(),t=Ms(e);this.params.parentFilterInstance(n=>{if(n){let i=xo(t);n.onFloatingFilterChanged(this.getLastType()||null,i)}})}getDateComponentParams(){let e=rN(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:Qr(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new WK(this.context,this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,e=>{e.setInputAriaLabel(this.getAriaLabel(this.params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){let e=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}},wSe=class extends At{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" data-ref="eDateInput"></ag-input-text-field>
            </div>`,[lD]),this.eDateInput=fe}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);let t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus()},input:n=>{n.target===Dn(this.gos)&&(this.eDateInput.isDisabled()||this.params.onDateChanged())}})}setParams(e){let t=this.eDateInput.getInputElement(),n=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=n&&fl(),t.type=n?"date":"text";let{minValidYear:i,maxValidYear:r,minValidDate:o,maxValidDate:s}=e.filterParams||{};if(o&&i&&X("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),s&&r&&X("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),o&&s){let[a,l]=[o,s].map(c=>c instanceof Date?c:xo(c));a&&l&&a.getTime()>l.getTime()&&X("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}o?o instanceof Date?t.min=dC(o):t.min=o:i&&(t.min=`${i}-01-01`),s?s instanceof Date?t.max=dC(s):t.max=s:r&&(t.max=`${r}-12-31`)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams(e)}getDate(){return xo(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(Ms(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&e.filterParams.browserDatePicker!=null?e.filterParams.browserDatePicker:YO()||QO()||fl()&&lK()>=14.1}},JK=class extends j{constructor(e){super(),this.params=e,this.eFloatingFilterTextInput=fe,this.valueChangedListener=()=>{}}setupGui(e){this.eFloatingFilterTextInput=this.createManagedBean(new of(this.params?.config));let t=this.eFloatingFilterTextInput.getGui();e.appendChild(t);let n=i=>this.valueChangedListener(i);this.addManagedListeners(t,{input:n,keydown:n})}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,t){this.eFloatingFilterTextInput.setValue(e,t)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}},eY=class extends ZK{constructor(){super(...arguments),this.eFloatingFilterInputContainer=fe}postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){this.params=e;let t=e.browserAutoComplete??!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=nD(this.params.filterParams),!this.isReadOnly()){let n=rN(this.params.filterParams,this.getDefaultDebounceMs()),i=Qr(this.syncUpWithParentFilter.bind(this),n);this.floatingFilterInputService.setValueChangedListener(i)}}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){let t=this.floatingFilterInputService.getValue();br(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(t,!0)}syncUpWithParentFilter(e){let t=e.key===G.ENTER;if(this.applyActive&&!t)return;let n=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(n=UK(n),this.floatingFilterInputService.setValue(n,!0)),this.params.parentFilterInstance(i=>{i&&i.onFloatingFilterChanged(this.getLastType()||null,n||null)})}setEditable(e){this.floatingFilterInputService.setEditable(e)}},bSe=class extends j{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new sN),this.eFloatingFilterTextInput=this.createManagedBean(new of),this.eFloatingFilterTextInput.setDisabled(!0);let t=this.eFloatingFilterNumberInput.getGui(),n=this.eFloatingFilterTextInput.getGui();e.appendChild(t),e.appendChild(n),this.setupListeners(t,i=>this.valueChangedListener(i)),this.setupListeners(n,i=>this.valueChangedListener(i))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}},SSe=class extends eY{init(e){super.init(e),this.filterModelFormatter=new GK(this.localeService,this.optionsFactory,e.filterParams?.numberFormatter)}onParamsUpdated(e){this.refresh(e)}refresh(e){PO(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return BK}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=PO(e.filterParams),this.allowedCharPattern?this.createManagedBean(new JK({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new bSe)}},_Se=class extends eY{init(e){super.init(e),this.filterModelFormatter=new zK(this.localeService,this.optionsFactory)}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return HK}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new JK)}};function ESe(e){return!!e.filterManager?.isQuickFilterPresent()}function xSe(e){return e.gos.get("quickFilterText")}function DSe(e){e.filterManager?.resetQuickFilterCache()}var TSe=class extends j{constructor(){super(...arguments),this.beanName="quickFilterService",this.quickFilter=null,this.quickFilterParts=null}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.pivotResultColsService=e.pivotResultColsService}postConstruct(){let e=this.resetQuickFilterCache.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}}),this.addManagedPropertyListener("quickFilterText",t=>this.setQuickFilter(t.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onQuickFilterColumnConfigChanged()),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}refreshQuickFilterCols(){let e=this.columnModel.isPivotMode(),t=this.columnModel.getAutoCols(),n=this.columnModel.getColDefCols(),i=(e&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?this.pivotResultColsService.getPivotResultCols()?.list:n)??[];t&&(i=i.concat(t)),this.colsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?i:i.filter(r=>r.isVisible()||r.isRowGroupActive())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(e){let t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(t,e):this.quickFilterParts.every(n=>t?this.doesRowPassQuickFilterCache(e,n):this.doesRowPassQuickFilterNoCache(e,n))}resetQuickFilterCache(){this.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}setQuickFilterParts(){let{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseQuickFilter(e){return ne(e)?kn(this.gos)?e.toUpperCase():(X("Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(e!=null&&typeof e!="string"){X(`Grid option quickFilterText only supports string inputs, received: ${typeof e}`);return}let t=this.parseQuickFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setQuickFilterParserAndMatcher(){let e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),n=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,n&&(this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onQuickFilterColumnConfigChanged(){this.refreshQuickFilterCols(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassQuickFilterNoCache(e,t){return this.colsForQuickFilter.some(n=>{let i=this.getQuickFilterTextForColumn(n,e);return ne(i)&&i.indexOf(t)>=0})}doesRowPassQuickFilterCache(e,t){return this.checkGenerateQuickFilterAggregateText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilterMatcher(e,t){let n;e?(this.checkGenerateQuickFilterAggregateText(t),n=t.quickFilterAggregateText):n=this.getQuickFilterAggregateText(t);let{quickFilterParts:i,matcher:r}=this;return r(i,n)}checkGenerateQuickFilterAggregateText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getQuickFilterAggregateText(e))}getQuickFilterTextForColumn(e,t){let n=this.valueService.getValue(e,t,!0),i=e.getColDef();if(i.getQuickFilterText){let r=this.gos.addGridCommonParams({value:n,node:t,data:t.data,column:e,colDef:i});n=i.getQuickFilterText(r)}return ne(n)?n.toString().toUpperCase():null}getQuickFilterAggregateText(e){let t=[];return this.colsForQuickFilter.forEach(n=>{let i=this.getQuickFilterTextForColumn(n,e);ne(i)&&t.push(i)}),t.join(`
`)}},uN={version:qe,moduleName:"@ag-grid-community/filter-core",beans:[Ibe]},RSe={version:qe,moduleName:"@ag-grid-community/filter-api",apiFunctions:{isAnyFilterPresent:mSe,onFilterChanged:vSe},dependantModules:[uN]},uD={version:qe,moduleName:"@ag-grid-community/column-filter",beans:[gSe],dependantModules:[uN]},ISe={version:qe,moduleName:"@ag-grid-community/column-filter-api",apiFunctions:{isColumnFilterPresent:oSe,getFilterInstance:sSe,getColumnFilterInstance:aSe,destroyFilter:lSe,setFilterModel:cSe,getFilterModel:uSe,getColumnFilterModel:dSe,setColumnFilterModel:hSe,showColumnFilter:fSe},dependantModules:[uD,RSe]},dN={version:qe,moduleName:"@ag-grid-community/floating-filter-core",controllers:[{name:"headerFilterCell",classImp:rSe}],dependantModules:[uD]},QJe={version:qe,moduleName:"@ag-grid-community/floating-filter",dependantModules:[dN,uD]},FSe={version:qe,moduleName:"@ag-grid-community/read-only-floating-filter",userComponents:[{name:"agReadOnlyFloatingFilter",classImp:ySe}],dependantModules:[dN]},ASe={version:qe,moduleName:"@ag-grid-community/simple-filter",dependantModules:[uD],userComponents:[{name:"agTextColumnFilter",classImp:Qbe},{name:"agNumberColumnFilter",classImp:Ybe},{name:"agDateColumnFilter",classImp:Zbe},{name:"agDateInput",classImp:wSe}]},MSe={version:qe,moduleName:"@ag-grid-community/simple-floating-filter",dependantModules:[ASe,dN],userComponents:[{name:"agTextColumnFloatingFilter",classImp:_Se},{name:"agNumberColumnFloatingFilter",classImp:SSe},{name:"agDateColumnFloatingFilter",classImp:CSe}]},tY={version:qe,moduleName:"@ag-grid-community/quick-filter-core",beans:[TSe],dependantModules:[uN]},PSe={version:qe,moduleName:"@ag-grid-community/quick-filter-api",apiFunctions:{isQuickFilterPresent:ESe,getQuickFilter:xSe,resetQuickFilter:DSe},dependantModules:[tY]},kSe={version:qe,moduleName:"@ag-grid-community/quick-filter",dependantModules:[tY,PSe]},OSe={version:qe,moduleName:"@ag-grid-community/filter",dependantModules:[MSe,FSe,kSe,ISe]},hN=class extends At{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}},NSe=class extends hN{constructor(e){super(`<div class="ag-header-cell ag-floating-filter" role="gridcell">
            <div data-ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" data-ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" data-ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`,e),this.eFloatingFilterBody=fe,this.eButtonWrapper=fe,this.eButtonShowMainFilter=fe}postConstruct(){let e=this.getGui(),t={addOrRemoveCssClass:(n,i)=>this.addOrRemoveCssClass(n,i),addOrRemoveBodyCssClass:(n,i)=>this.eFloatingFilterBody.classList.toggle(n,i),setButtonWrapperDisplayed:n=>xn(this.eButtonWrapper,n),setCompDetails:n=>this.setCompDetails(n),getFloatingFilterComp:()=>this.compPromise,setWidth:n=>e.style.width=n,setMenuIcon:n=>this.eButtonShowMainFilter.appendChild(n)};this.ctrl.setComp(t,e,this.eButtonShowMainFilter,this.eFloatingFilterBody,void 0)}setCompDetails(e){if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(t=>this.afterCompCreated(t))}destroy(){this.destroyFloatingFilterComp(),super.destroy()}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}},LSe=class extends hN{constructor(e){super(`<div class="ag-header-cell" role="columnheader">
            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`,e),this.eResize=fe,this.eHeaderCompWrapper=fe,this.headerCompVersion=0,this.column=e.getColumnGroupChild(),this.pinned=e.getPinned()}postConstruct(){let e=this.getGui();((r,o)=>{o!=null&&o!=""?e.setAttribute(r,o):e.removeAttribute(r)})("col-id",this.column.getColId());let n={setWidth:r=>e.style.width=r,addOrRemoveCssClass:(r,o)=>this.addOrRemoveCssClass(r,o),setAriaSort:r=>r?ywe(e,r):Cwe(e),setUserCompDetails:r=>this.setUserCompDetails(r),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(n,this.getGui(),this.eResize,this.eHeaderCompWrapper,void 0);let i=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",i)}destroy(){this.destroyHeaderComp(),super.destroy()}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;let t=this.headerCompVersion;e.newAgStackInstance().then(n=>this.afterCompCreated(t,n))}afterCompCreated(e,t){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(t);return}this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}},VSe=class extends hN{constructor(e){super(`<div class="ag-header-group-cell" role="columnheader">
            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`,e),this.eResize=fe,this.eHeaderCompWrapper=fe}postConstruct(){let e=this.getGui(),t=(i,r)=>r!=null?e.setAttribute(i,r):e.removeAttribute(i);e.setAttribute("col-id",this.ctrl.getColId());let n={addOrRemoveCssClass:(i,r)=>this.addOrRemoveCssClass(i,r),setHeaderWrapperHidden:i=>{i?this.eHeaderCompWrapper.style.setProperty("display","none"):this.eHeaderCompWrapper.style.removeProperty("display")},setHeaderWrapperMaxHeight:i=>{i!=null?this.eHeaderCompWrapper.style.setProperty("max-height",`${i}px`):this.eHeaderCompWrapper.style.removeProperty("max-height"),this.eHeaderCompWrapper.classList.toggle("ag-header-cell-comp-wrapper-limited-height",i!=null)},setResizableDisplayed:i=>xn(this.eResize,i),setWidth:i=>e.style.width=i,setAriaExpanded:i=>t("aria-expanded",i),setUserCompDetails:i=>this.setUserCompDetails(i),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(n,e,this.eResize,this.eHeaderCompWrapper,void 0)}setUserCompDetails(e){e.newAgStackInstance().then(t=>this.afterHeaderCompCreated(t))}afterHeaderCompCreated(e){let t=()=>this.destroyBean(e);if(!this.isAlive()){t();return}let n=this.getGui(),i=e.getGui();this.eHeaderCompWrapper.appendChild(i),this.addDestroyFunc(t),this.headerGroupComp=e,this.ctrl.setDragSource(n)}addOrRemoveHeaderWrapperStyle(e,t){let{eHeaderCompWrapper:n}=this;t?n.style.setProperty(e,t):n.style.removeProperty(e)}};var BSe=class extends At{constructor(e){super(),this.headerComps={},this.ctrl=e,this.setTemplate(`<div class="${this.ctrl.getHeaderRowClass()}" role="row"></div>`)}postConstruct(){sK(this.getGui(),this.ctrl.getAriaRowIndex());let e={setHeight:t=>this.getGui().style.height=t,setTop:t=>this.getGui().style.top=t,setHeaderCtrls:(t,n)=>this.setHeaderCtrls(t,n),setWidth:t=>this.getGui().style.width=t};this.ctrl.setComp(e,void 0)}destroy(){this.setHeaderCtrls([],!1),super.destroy()}setHeaderCtrls(e,t){if(!this.isAlive())return;let n=this.headerComps;if(this.headerComps={},e.forEach(i=>{let r=i.instanceId,o=n[r];delete n[r],o==null&&(o=this.createHeaderComp(i),this.getGui().appendChild(o.getGui())),this.headerComps[r]=o}),Ts(n,(i,r)=>{this.getGui().removeChild(r.getGui()),this.destroyBean(r)}),t){let i=tf(this.headerComps);i.sort((o,s)=>{let a=o.getCtrl().getColumnGroupChild().getLeft(),l=s.getCtrl().getColumnGroupChild().getLeft();return a-l});let r=i.map(o=>o.getGui());vK(this.getGui(),r)}}createHeaderComp(e){let t;switch(this.ctrl.getType()){case"group":t=new VSe(e);break;case"filter":t=new NSe(e);break;default:t=new LSe(e);break}return this.createBean(t),t.setParentComponent(this),t}};var GSe=class extends j{constructor(){super(...arguments),this.beanName="headerNavigationService",this.currentHeaderRowWithoutSpan=-1}wireBeans(e){this.focusService=e.focusService,this.headerPositionUtils=e.headerPositionUtils,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.visibleColService=e.visibleColsService}postConstruct(){this.ctrlsService.whenReady(this,t=>{this.gridBodyCon=t.gridBodyCtrl});let e=Yn(this.gos);this.addManagedElementListeners(e,{mousedown:()=>this.setCurrentHeaderRowWithoutSpan(-1)})}getHeaderRowCount(){return this.ctrlsService.getHeaderRowContainerCtrl()?.getRowCount()??0}getHeaderPositionForColumn(e,t){let n;if(typeof e=="string"?(n=this.columnModel.getCol(e),n||(n=this.visibleColService.getColumnGroup(e))):n=e,!n)return null;let r=this.ctrlsService.getHeaderRowContainerCtrl()?.getAllCtrls(),o=Rt(r||[]).getType()==="filter",s=this.getHeaderRowCount()-1,a=-1,l=n;for(;l;)a++,l=l.getParent();let c=a;return t&&o&&c===s-1&&c++,c===-1?null:{headerRowIndex:c,column:n}}navigateVertically(e,t,n){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;let{headerRowIndex:i}=t,r=t.column,o=this.getHeaderRowCount(),s=e===0,{headerRowIndex:a,column:l,headerRowIndexWithoutSpan:c}=s?this.headerPositionUtils.getColumnVisibleParent(r,i):this.headerPositionUtils.getColumnVisibleChild(r,i),u=!1;return a<0&&(a=0,l=r,u=!0),a>=o?(a=-1,this.setCurrentHeaderRowWithoutSpan(-1)):c!==void 0&&(this.currentHeaderRowWithoutSpan=c),!u&&!l?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a,column:l},allowUserOverride:!0,event:n})}setCurrentHeaderRowWithoutSpan(e){this.currentHeaderRowWithoutSpan=e}navigateHorizontally(e,t=!1,n){let i=this.focusService.getFocusedHeader(),r=e===2,o=this.gos.get("enableRtl"),s,a;if(this.currentHeaderRowWithoutSpan!==-1?i.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=i.headerRowIndex,r!==o?(a="Before",s=this.headerPositionUtils.findHeader(i,a)):(a="After",s=this.headerPositionUtils.findHeader(i,a)),s||!t)return this.focusService.focusHeaderPosition({headerPosition:s,direction:a,fromTab:t,allowUserOverride:!0,event:n});if(t){let l=this.gos.getCallback("tabToNextHeader");if(l)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:s,direction:a})}return this.focusNextHeaderRow(i,a,n)}focusNextHeaderRow(e,t,n){let i=e.headerRowIndex,r=null,o;if(t==="Before"?i>0&&(o=i-1,this.currentHeaderRowWithoutSpan-=1,r=this.headerPositionUtils.findColAtEdgeForHeaderRow(o,"end")):(o=i+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),r=this.headerPositionUtils.findColAtEdgeForHeaderRow(o,"start")),!r)return!1;let{column:s,headerRowIndex:a}=this.headerPositionUtils.getHeaderIndexToFocus(r.column,r?.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:s,headerRowIndex:a},direction:t,fromTab:!0,allowUserOverride:!0,event:n})}scrollToColumn(e,t="After"){if(e.getPinned())return;let n;if(si(e)){let i=e.getDisplayedLeafColumns();n=t==="Before"?Rt(i):i[0]}else n=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(n)}},HSe=class extends j{wireBeans(e){this.animationFrameService=e.animationFrameService,this.headerNavigationService=e.headerNavigationService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService,this.filterManager=e.filterManager,this.menuService=e.menuService}setComp(e,t,n){this.comp=e,this.eGui=t,this.createManagedBean(new rf(n,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.onPivotModeChanged(),this.setupHeaderHeight();let i=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:i}),this.mockContextMenuForIPad(i),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){let e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({displayedColumnsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>this.animationFrameService.requestAnimationFrame(()=>e()),gridStylesChanged:e,advancedFilterEnabledChanged:e})}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){let{columnModel:e}=this,t=0,n=this.columnModel.getGroupRowsHeight().reduce((o,s)=>o+s,0),i=this.columnModel.getColumnHeaderRowHeight();if(this.filterManager?.hasFloatingFilters()&&(t+=e.getFloatingFiltersHeight()),t+=n,t+=i,this.headerHeight===t)return;this.headerHeight=t;let r=`${t+1}px`;this.comp.setHeightAndMinHeight(r),this.eventService.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(){let e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){let t=this.visibleColsService.getAllCols().some(n=>n.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)}onTabKeyDown(e){let t=this.gos.get("enableRtl"),n=e.shiftKey,i=n!==t?2:3;(this.headerNavigationService.navigateHorizontally(i,!0,e)||!n&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(n,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;switch(e.key){case G.LEFT:t=2;case G.RIGHT:{ne(t)||(t=3),this.headerNavigationService.navigateHorizontally(t,!1,e)&&e.preventDefault();break}case G.UP:t=0;case G.DOWN:{ne(t)||(t=1),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break}default:return}}onFocusOut(e){let{relatedTarget:t}=e;!t&&this.eGui.contains(Dn(this.gos))||this.eGui.contains(t)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(e,t,n){if(!e&&!n||!this.menuService.isHeaderContextMenuEnabled())return;let{target:i}=e??t;(i===this.eGui||i===this.ctrlsService.getHeaderRowContainerCtrl()?.getViewportElement())&&this.menuService.showHeaderContextMenu(void 0,e,n)}mockContextMenuForIPad(e){if(!Ku())return;let t=new Uu(this.eGui),n=i=>{e(void 0,i.touchStart,i.touchEvent)};this.addManagedListeners(t,{longTap:n}),this.addDestroyFunc(()=>t.destroy())}},fN=class extends j{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}wireBeans(e){this.visibleColsService=e.visibleColsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){let e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){let e=lr(this.gos,"print"),t=this.visibleColsService.getBodyContainerWidth(),n=this.visibleColsService.getColsLeftWidth(),i=this.visibleColsService.getDisplayedColumnsRightWidth(),r;e?r=t+n+i:(r=t,this.addSpacer&&(this.gos.get("enableRtl")?n:i)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(r+=this.scrollVisibleService.getScrollbarWidth())),this.callback(r)}},zSe=class extends j{constructor(e){super(),this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}wireBeans(e){this.funcColsService=e.funcColsService}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;let t=e.dragItem.columns;t&&t.forEach(n=>{n.isPrimary()&&(n.isAnyFunctionActive()||(n.isAllowValue()?this.columnsToAggregate.push(n):n.isAllowRowGroup()?this.columnsToGroup.push(n):n.isAllowPivot()&&this.columnsToPivot.push(n)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.funcColsService.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.funcColsService.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.funcColsService.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function nY(e){let{isFromHeader:t,fromLeft:n,xPosition:i,fromEnter:r,fakeEvent:o,pinned:s,gos:a,columnModel:l,columnMoveService:c,visibleColsService:u}=e,{allMovingColumns:d}=e;if(t){let F=[];d.forEach(I=>{let E=null,b=I.getParent();for(;b!=null&&b.getDisplayedLeafColumns().length===1;)E=b,b=b.getParent();E!=null?(!!E.getColGroupDef()?.marryChildren?E.getProvidedColumnGroup().getLeafColumns():E.getLeafColumns()).forEach(A=>{F.includes(A)||F.push(A)}):F.includes(I)||F.push(I)}),d=F}let h=d.slice();l.sortColsLikeCols(h);let p=qSe({movingCols:h,draggingRight:n,xPosition:i,pinned:s,gos:a,columnModel:l,visibleColsService:u}),g=USe(h,l);if(p.length===0)return;let m=p[0],v=g!==null&&!r;if(t&&(v=g!==null),v&&!o&&(!n&&m>=g||n&&m<=g))return;let C=u.getAllCols(),S=[],_=null;for(let F=0;F<p.length;F++){let I=p[F],E=c.getProposedColumnOrder(h,I);if(!c.doesOrderPassRules(E))continue;let b=E.filter(k=>C.includes(k));if(_===null)_=b;else if(!qu(b,_))break;let x=jSe(E);S.push({move:I,fragCount:x})}if(S.length===0)return;S.sort((F,I)=>F.fragCount-I.fragCount);let D=S[0].move;if(!(D>l.getCols().length-d.length))return{columns:d,toIndex:D}}function pN(e){let{columns:t,toIndex:n}=nY(e)||{},{finished:i,columnMoveService:r}=e;return!t||n==null?null:(r.moveColumns(t,n,"uiColumnMoved",i),i?null:{columns:t,toIndex:n})}function USe(e,t){let n=t.getCols(),i=RCe(e.map(l=>n.indexOf(l))),r=i[0];return Rt(i)-r!==i.length-1?null:r}function jSe(e){function t(i){let r=[],o=i.getOriginalParent();for(;o!=null;)r.push(o),o=o.getOriginalParent();return r}let n=0;for(let i=0;i<e.length-1;i++){let r=t(e[i]),o=t(e[i+1]);[r,o]=r.length>o.length?[r,o]:[o,r],r.forEach(s=>{o.indexOf(s)===-1&&n++})}return n}function WSe(e,t){switch(t){case"left":return e.getLeftCols();case"right":return e.getRightCols();default:return e.getCenterCols()}}function qSe(e){let{movingCols:t,draggingRight:n,xPosition:i,pinned:r,gos:o,columnModel:s,visibleColsService:a}=e;if(o.get("suppressMovableColumns")||t.some(_=>_.getColDef().suppressMovable))return[];let c=WSe(a,r),u=s.getCols(),d=c.filter(_=>Xh(t,_)),h=c.filter(_=>!Xh(t,_)),p=u.filter(_=>!Xh(t,_)),g=0,m=i;if(n){let _=0;d.forEach(D=>_+=D.getActualWidth()),m-=_}if(m>0){for(let _=0;_<h.length;_++){let D=h[_];if(m-=D.getActualWidth(),m<0)break;g++}n&&g++}let v;if(g>0){let _=h[g-1];v=p.indexOf(_)+1}else v=p.indexOf(h[0]),v===-1&&(v=0);let C=[v],S=(_,D)=>_-D;if(n){let _=v+1,D=u.length-1;for(;_<=D;)C.push(_),_++;C.sort(S)}else{let _=v,D=u.length-1,F=u[_];for(;_<=D&&c.indexOf(F)<0;)_++,C.push(_),F=u[_];_=v-1;let I=0;for(;_>=I;)C.push(_),_--;C.sort(S).reverse()}return C}function iD(e){let{pinned:t,fromKeyboard:n,gos:i,ctrlsService:r,useHeaderRow:o,skipScrollPadding:s}=e,a=r.getHeaderRowContainerCtrl(t)?.getViewportElement(),{x:l}=e;return a?(n&&(l-=a.getBoundingClientRect().left),i.get("enableRtl")&&(o&&(a=a.querySelector(".ag-header-row")),l=a.clientWidth-l),t==null&&!s&&(l+=r.get("center").getCenterViewportScrollLeft()),l):0}function lm(e,t){for(let n of e)n.setMoving(t,"uiColumnMoved")}var wq=7,kO=100,kx=kO/2,KSe=5,YSe=100,QSe=class extends j{constructor(e){super(),this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.isCenterContainer=!ne(e)}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnMoveService=e.columnMoveService,this.dragAndDropService=e.dragAndDropService,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){let e=this.lastDraggingEvent?.dragItem.columns??[];for(let t of e){let n=t.getPinned();if(t.getColDef().lockPinned){if(n==this.pinned)return"move";continue}if(n===this.pinned||!this.pinned)return"move";if(!n&&this.pinned)return"pinned"}return"notAllowed"}onDragEnter(e){let t=e.dragItem.columns;if(e.dragSource.type===0)this.setColumnsVisible(t,!0,"uiColumnDragged");else{let i=e.dragItem.visibleState,r=(t||[]).filter(o=>i[o.getId()]);this.setColumnsVisible(r,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(t,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,n=!1,i=!1){let r=this.gos.get("suppressMoveWhenColumnDragging");if(i&&!r){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!i&&St(e.hDirection))return;let{pinned:o,gos:s,ctrlsService:a}=this,l=iD({x:e.x,pinned:o,gos:s,ctrlsService:a});t||this.checkCenterForScrolling(l),r?this.handleColumnDragWhileSuppressingMovement(e,t,n,l,i):this.handleColumnDragWhileAllowingMovement(e,t,n,l,i)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,n){if(!e)return;let i=e.filter(r=>!r.getColDef().lockVisible);this.columnModel.setColsVisible(i,t,n)}finishColumnMoving(){if(this.clearHighlighted(),!this.lastMovedInfo)return;let{columns:e,toIndex:t}=this.lastMovedInfo;this.columnMoveService.moveColumns(e,t,"uiColumnMoved",!0)}handleColumnDragWhileSuppressingMovement(e,t,n,i,r){let o=this.getAllMovingColumns(e,!0);if(r){let s=this.isAttemptingToPin(o);s&&this.attemptToPinColumns(o,void 0,!0);let{fromLeft:a,xPosition:l}=this.getNormalisedXPositionInfo(o,s)||{};if(a==null||l==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:o,xPosition:l,fromEnter:t,fakeEvent:n,fromLeft:a})}else{if(!this.dragAndDropService.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(o,i)}}handleColumnDragWhileAllowingMovement(e,t,n,i,r){let o=this.getAllMovingColumns(e),s=this.normaliseDirection(e.hDirection)===1,a=e.dragSource.type===1,l=this.getMoveColumnParams({allMovingColumns:o,isFromHeader:a,xPosition:i,fromLeft:s,fromEnter:t,fakeEvent:n}),c=pN(pe(B({},l),{finished:r}));c&&(this.lastMovedInfo=c)}getAllMovingColumns(e,t=!1){let n=e.dragSource.getDragItem(),i=null;t?(i=n.columnsInSplit,i||(i=n.columns)):i=n.columns;let r=o=>o.getColDef().lockPinned?o.getPinned()==this.pinned:!0;return i?i.filter(r):[]}getMoveColumnParams(e){let{allMovingColumns:t,isFromHeader:n,xPosition:i,fromLeft:r,fromEnter:o,fakeEvent:s}=e,{pinned:a,gos:l,columnModel:c,columnMoveService:u,visibleColsService:d}=this;return{allMovingColumns:t,isFromHeader:n,fromLeft:r,xPosition:i,pinned:a,fromEnter:o,fakeEvent:s,gos:l,columnModel:c,columnMoveService:u,visibleColsService:d}}findFirstAndLastMovingColumns(e){let t=e.length,n,i;for(let r=0;r<=t;r++){if(!n){let o=e[r];o.getLeft()!=null&&(n=o)}if(!i){let o=e[t-1-r];o.getLeft()!=null&&(i=o)}if(n&&i)break}return{firstMovingCol:n,lastMovingCol:i}}highlightHoveredColumn(e,t){let{gos:n,columnModel:i}=this,r=n.get("enableRtl"),o=i.getCols().filter(u=>u.isVisible()&&u.getPinned()===this.pinned),s=null,a=null,l=null;for(let u of o){if(a=u.getActualWidth(),s=this.getNormalisedColumnLeft(u,0,r),s!=null){let d=s+a;if(s<=t&&d>=t){l=u;break}}s=null,a=null}if(l)e.indexOf(l)!==-1&&(l=null);else{for(let u=o.length-1;u>=0;u--){let d=o[u],h=o[u].getParent();if(!h){l=d;break}let p=h?.getDisplayedLeafColumns();if(p.length){l=Rt(p);break}}if(!l)return;s=this.getNormalisedColumnLeft(l,0,r),a=l.getActualWidth()}if(this.lastHighlightedColumn?.column!==l&&this.clearHighlighted(),l==null||s==null||a==null)return;let c;t-s<a/2!==r?c=0:c=1,l.setHighlighted(c),this.lastHighlightedColumn={column:l,position:c}}getNormalisedXPositionInfo(e,t){let{gos:n,visibleColsService:i}=this,r=n.get("enableRtl"),{firstMovingCol:o,column:s,position:a}=this.getColumnMoveAndTargetInfo(e,t,r);if(!o||!s||a==null)return;let l=i.getAllCols(),c=l.indexOf(o),u=l.indexOf(s),d=a===0!==r,h=c<u||c===u&&!d,p=0;if(d?h&&(p-=1):h||(p+=1),u+p===c)return;let g=l[u+p];if(!g)return;let m=this.getNormalisedColumnLeft(g,20,r);return{fromLeft:h,xPosition:m}}getColumnMoveAndTargetInfo(e,t,n){let i=this.lastHighlightedColumn||{},{firstMovingCol:r,lastMovingCol:o}=this.findFirstAndLastMovingColumns(e);if(!r||!o||i.column||!t)return B({firstMovingCol:r},i);let a=this.getPinDirection()==="left";return{firstMovingCol:r,position:a?1:0,column:a!==n?r:o}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case 0:return 1;case 1:return 0}return e}getNormalisedColumnLeft(e,t,n){let{gos:i,ctrlsService:r}=this,o=e.getLeft();if(o==null)return null;let s=e.getActualWidth();return iD({x:n?o+s-t:o+t,pinned:e.getPinned(),useHeaderRow:n,skipScrollPadding:!0,gos:i,ctrlsService:r})}isAttemptingToPin(e){let t=this.needToMoveLeft||this.needToMoveRight,n=this.failedMoveAttempts>wq;return t&&n||e.some(i=>i.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){let{allMovingColumns:t,xPosition:n,fromEnter:i,fakeEvent:r,fromLeft:o}=e,s=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:n,fromLeft:o,fromEnter:i,fakeEvent:r}),{columns:a,toIndex:l}=nY(s)||{};a&&l!=null&&(this.lastMovedInfo={columns:a,toIndex:l}),this.finishColumnMoving()}clearHighlighted(){this.lastHighlightedColumn&&(this.lastHighlightedColumn.column.setHighlighted(null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;let t=this.ctrlsService.get("center"),n=t.getCenterViewportScrollLeft(),i=n+t.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=e<n+kx,this.needToMoveLeft=e>i-kx):(this.needToMoveLeft=e<n+kx,this.needToMoveRight=e>i-kx),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),YSe),this.dragAndDropService.getDragAndDropImageComponent()?.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.dragAndDropService.getDragAndDropImageComponent()?.setIcon(this.getIconName()))}moveInterval(){let e;this.intervalCount++,e=10+this.intervalCount*KSe,e>kO&&(e=kO);let t=null,n=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=n.scrollHorizontally(-e):this.needToMoveRight&&(t=n.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{if(this.failedMoveAttempts++,this.failedMoveAttempts<=wq+1)return;if(this.dragAndDropService.getDragAndDropImageComponent()?.setIcon("pinned"),!this.gos.get("suppressMoveWhenColumnDragging")){let i=this.lastDraggingEvent?.dragItem.columns;this.attemptToPinColumns(i,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(e,t,n=!1){let i=(e||[]).filter(r=>!r.getColDef().lockPinned);return i.length?(n&&(t=this.getPinDirection()),this.columnModel.setColsPinned(i,t,"uiColumnDragged"),n&&this.dragAndDropService.nudge(),i.length):0}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}},XSe=class extends j{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady(this,e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.left.getContainerElement()],[e.bottomLeft.getContainerElement()],[e.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.right.getContainerElement()],[e.bottomRight.getContainerElement()],[e.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.center.getViewportElement()],[e.bottomCenter.getViewportElement()],[e.topCenter.getViewportElement()]];break}}),this.moveColumnFeature=this.createManagedBean(new QSe(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new zSe(this.pinned)),this.dragAndDropService.addDropTarget(this),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},$Se=class extends j{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.pinnedWidthService=e.pinnedWidthService,this.ctrlsService=e.ctrlsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,n,i,r){super(),this.pinned=e,this.column=t,this.eResize=n,this.comp=i,this.ctrl=r}postConstruct(){let e=[],t,n,i=()=>{if(xn(this.eResize,t),!t)return;let s=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(e.push(s),n){let a=this.gos.get("skipHeaderOnAutoSize"),l=()=>{this.columnAutosizeService.autoSizeColumn(this.column,"uiColumnResized",a)};this.eResize.addEventListener("dblclick",l);let c=new Uu(this.eResize);c.addEventListener("doubleTap",l),e.push(()=>{this.eResize.removeEventListener("dblclick",l),c.removeEventListener("doubleTap",l),c.destroy()})}},r=()=>{e.forEach(s=>s()),e.length=0},o=()=>{let s=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(s!==t||a!==n)&&(t=s,n=a,r(),i())};o(),this.addDestroyFunc(r),this.ctrl.setRefreshFunction("resize",o)}onResizing(e,t){let{column:n,lastResizeAmount:i,resizeStartWidth:r}=this,o=this.normaliseResizeAmount(t),s=r+o,a=[{key:n,newWidth:s}];if(this.column.getPinned()){let l=this.pinnedWidthService.getPinnedLeftWidth(),c=this.pinnedWidthService.getPinnedRightWidth(),u=SC(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(l+c+(o-i)>u)return}this.lastResizeAmount=o,this.columnSizeService.setColumnWidths(a,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e,n=this.pinned!=="left",i=this.pinned==="right";return this.gos.get("enableRtl")?n&&(t*=-1):i&&(t*=-1),t}},ZSe=class extends j{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}onSpaceKeyDown(e){let t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(Dn(this.gos))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new tN),this.cbSelectAll.addCssClass("ag-header-select-all"),es(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:this.onNewColumnsLoaded.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedListeners(this.cbSelectAll,{fieldValueChanged:this.onCbSelectAll.bind(this)}),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;let e=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(e);let t=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!t),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){let e=this.localeService.getLocaleTextFunc(),n=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),i=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${i} (${n})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(e("ariaHeaderSelection","Column with Header Selection")),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(e){return HO(this.gos)?!0:(X(`${e} is only available if using 'multiRow' selection mode.`),!1)}checkRightRowModelType(e){return kn(this.gos)||vc(this.gos)?!0:(X(`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${this.rowModel.getType()}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;let e=this.cbSelectAll.getValue(),t=this.isFilteredOnly(),n=this.isCurrentPageOnly(),i="uiSelectAll";n?i="uiSelectAllCurrentPage":t&&(i="uiSelectAllFiltered");let r={source:i,justFiltered:t,justCurrentPage:n};e?this.selectionService.selectAllRowNodes(r):this.selectionService.deselectAllRowNodes(r)}isCheckboxSelection(){let e=this.gos.get("rowSelection"),t=typeof e=="object"&&qx(e)&&wC(this.column),n=this.column.getColDef().headerCheckboxSelection,i=!1;return t?i=!0:typeof n=="function"?i=n(this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()})):i=!!n,i&&this.checkRightRowModelType(t?"headerCheckbox":"headerCheckboxSelection")&&this.checkSelectionType(t?"headerCheckbox":"headerCheckboxSelection")}isFilteredOnly(){let e=this.gos.get("rowSelection");return typeof e=="object"?e.mode==="multiRow"&&e.selectAll==="filtered":!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){let e=this.gos.get("rowSelection");return typeof e=="object"?e.mode==="multiRow"&&e.selectAll==="currentPage":!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}},JSe=class extends cD{constructor(e,t,n){super(e,t,n),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,t,n,i,r){this.comp=e,r=bC(this,this.beans.context,r),this.setGui(t,r),this.updateState(),this.setupWidth(r),this.setupMovingCss(r),this.setupMenuClass(r),this.setupSortableClass(r),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:i,checkMeasuringCallback:s=>this.setRefreshFunction("measuring",s),compBean:r}),this.addColumnHoverListener(r),this.setupFilterClass(r),this.setupClassesFromColDef(),this.setupTooltip(r),this.addActiveHeaderMouseListeners(r),this.setupSelectAll(r),this.setupUserComp(r),this.refreshAria(),this.resizeFeature=r.createManagedBean(new $Se(this.getPinned(),this.column,n,e,this)),r.createManagedBean(new cN([this.column],t)),r.createManagedBean(new lN(this.column,t,this.beans)),r.createManagedBean(new rf(t,{shouldStopEventPropagation:s=>this.shouldStopEventPropagation(s),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(r),r.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],()=>this.refresh(r)),r.addManagedListeners(this.column,{colDefChanged:()=>this.refresh(r)}),r.addManagedListeners(this.column,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});let o=()=>this.checkDisplayName(r);r.addManagedEventListeners({columnValueChanged:o,columnRowGroupChanged:o,columnPivotChanged:o,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),r.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){if(!this.column.isResizable())return;let n=this.column.getActualWidth(),i=this.column.getMinWidth(),r=this.column.getMaxWidth(),o=Math.min(Math.max(n+e,i),r);this.beans.columnSizeService.setColumnWidths([{key:this.column,newWidth:o}],t,!0,"uiColumnResized")}moveHeader(e){let{eGui:t,beans:n,column:i,ctrlsService:r}=this,{gos:o,columnModel:s,columnMoveService:a,visibleColsService:l}=n,c=this.getPinned(),u=t.getBoundingClientRect().left,d=i.getActualWidth(),h=o.get("enableRtl"),g=iD({x:e===0!==h?u-20:u+d+20,pinned:c,fromKeyboard:!0,gos:o,ctrlsService:r}),m=this.focusService.getFocusedHeader();pN({allMovingColumns:[i],isFromHeader:!0,fromLeft:e===1,xPosition:g,pinned:c,fromEnter:!1,fakeEvent:!1,gos:o,columnModel:s,columnMoveService:a,visibleColsService:l,finished:!0}),r.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(i,"auto"),(!this.isAlive()||this.beans.gos.get("ensureDomOrder"))&&m&&this.restoreFocus(m)}restoreFocus(e){this.focusService.focusHeaderPosition({headerPosition:pe(B({},e),{column:this.column})})}setupUserComp(e){let t=this.lookupUserCompDetails(e);this.setCompDetails(t)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(e){let t=this.createParams(e),n=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(n,t)}createParams(e){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:n=>{this.menuService.showColumnMenu({column:this.column,buttonElement:n,positionBy:"button"})},showColumnMenuAfterMouseClick:n=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:n,positionBy:"mouse"})},showFilter:n=>{this.menuService.showFilterMenu({column:this.column,buttonElement:n,containerType:"columnFilter",positionBy:"button"})},progressSort:n=>{this.beans.sortController.progressSort(this.column,!!n,"uiColumnSorted")},setSort:(n,i)=>{this.beans.sortController.setSortForColumn(this.column,n,!!i,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(n,i)=>{this.setupTooltip(e,n,i)}})}setupSelectAll(e){this.selectAllFeature=e.createManagedBean(new ZSe(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===G.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===G.ENTER&&this.onEnterKeyDown(e),e.key===G.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){let t=e.shiftKey;this.beans.sortController.progressSort(this.column,t,"uiColumnSorted")}}showMenuOnKeyPress(e,t){let n=this.comp.getUserCompInstance();!n||!(n instanceof FO)||n.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){let t=this.getRowIndex();this.focusService.setFocusedHeader(t,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t,n){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));let i=this.gos.get("tooltipShowMode")==="whenTruncated",r=this.eGui,o=this.column.getColDef();!n&&i&&!o.headerComponent&&(n=()=>{let l=r.querySelector(".ag-header-cell-text");return l?l.scrollWidth>l.clientWidth:!0});let s={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>r,getLocation:()=>"header",getTooltipValue:()=>t??this.column.getColDef().headerTooltip,shouldDisplayTooltip:n},a=e.createManagedBean(new gm(s));this.setRefreshFunction("tooltip",()=>a.refreshToolTip())}setupClassesFromColDef(){let e=()=>{let t=this.column.getColDef(),n=YK(t,this.gos,this.column,null),i=this.userHeaderClasses;this.userHeaderClasses=new Set(n),n.forEach(r=>{i.has(r)?i.delete(r):this.comp.addOrRemoveCssClass(r,!0)}),i.forEach(r=>this.comp.addOrRemoveCssClass(r,!1))};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;let{column:t,beans:n,displayName:i,dragAndDropService:r,gos:o}=this,{columnModel:s}=n,a=!this.gos.get("suppressDragLeaveHidesColumns"),l=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:()=>this.createDragItem(t),dragItemName:i,onDragStarted:()=>{a=!o.get("suppressDragLeaveHidesColumns"),lm([t],!0)},onDragStopped:()=>lm([t],!1),onDragCancelled:()=>lm([t],!1),onGridEnter:c=>{if(a){let u=c?.columns?.filter(d=>!d.getColDef().lockVisible)||[];s.setColsVisible(u,!0,"uiColumnMoved")}},onGridExit:c=>{if(a){let u=c?.columns?.filter(d=>!d.getColDef().lockVisible)||[];s.setColsVisible(u,!1,"uiColumnMoved")}}};r.addDragSource(l,!0)}createDragItem(e){let t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(e){this.updateState(),this.refreshHeaderComp(e),this.refreshAria(),Object.values(this.refreshFunctions).forEach(t=>t())}refreshHeaderComp(e){let t=this.lookupUserCompDetails(e);(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==t.componentClass?this.attemptHeaderCompRefresh(t.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(t)}attemptHeaderCompRefresh(e){let t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.columnNameService.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(e){this.displayName!==this.calculateDisplayName()&&this.refresh(e)}workOutDraggable(){let e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){let t=()=>{let n=this.column.getActualWidth();this.comp.setWidth(`${n}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){let t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){let t=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){let t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){let t=()=>{let n=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",n),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){let e=()=>{let t=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",t)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){let e=this.column.getHighlighted(),t=e===0,n=e===1;this.comp.addOrRemoveCssClass("ag-header-highlight-before",t),this.comp.addOrRemoveCssClass("ag-header-highlight-after",n)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){let{eGui:e,column:t,comp:n,beans:i}=this,r=this.beans.columnModel.getGroupRowsHeight(),o=r.reduce((d,h)=>d+=h,0)===0;if(n.addOrRemoveCssClass("ag-header-parent-hidden",o),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),n.addOrRemoveCssClass("ag-header-span-height",!1),n.addOrRemoveCssClass("ag-header-span-total",!1);return}let{numberOfParents:s,isSpanningTotal:a}=this.column.getColumnGroupPaddingInfo();n.addOrRemoveCssClass("ag-header-span-height",s>0);let{columnModel:l}=i,c=l.getColumnHeaderRowHeight();if(s===0){n.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${c}px`);return}n.addOrRemoveCssClass("ag-header-span-total",a);let u=0;for(let d=0;d<s;d++)u+=r[r.length-1-d];e.style.setProperty("top",`${-u}px`),e.style.setProperty("height",`${c+u}px`)}refreshAriaSort(){if(this.sortable){let e=this.localeService.getLocaleTextFunc(),t=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(awe(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){let e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){let e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){let e=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains(Dn(this.beans.gos)))return;let e=Array.from(this.ariaDescriptionProperties.keys()).sort((t,n)=>t==="filter"?-1:n.charCodeAt(0)-t.charCodeAt(0)).map(t=>this.ariaDescriptionProperties.get(t)).join(". ");this.beans.ariaAnnouncementService.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){let t=()=>{if(!this.gos.get("columnHoverHighlight"))return;let n=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",n)};e.addManagedEventListeners({columnHoverChanged:t}),t()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(e){let t=r=>this.handleMouseOverChange(r.type==="mouseenter"),n=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column),i=r=>this.handleContextMenuMouseEvent(r,void 0,this.column);e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:n,contextmenu:i})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){let t=this.comp.getUserCompInstance();return t instanceof FO?t.getAnchorElementForMenu(e):this.getGui()}destroy(){super.destroy()}},e1e=class extends j{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.autoWidthCalculator=e.autoWidthCalculator,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,n,i){super(),this.eResize=t,this.comp=e,this.pinned=n,this.columnGroup=i}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}let e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gos.get("suppressAutoSize")){let t=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{let n=[];this.columnGroup.getDisplayedLeafColumns().forEach(r=>{r.getColDef().suppressAutoSize||n.push(r.getColId())}),n.length>0&&this.columnAutosizeService.autoSizeCols({colKeys:n,skipHeader:t,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(e){let t=this.getInitialValues(e);this.storeLocalValues(t),this.toggleColumnResizing(!0)}onResizing(e,t,n="uiColumnResized"){let i=this.normaliseDragChange(t),r=this.resizeStartWidth+i;this.resizeColumnsFromLocalValues(r,n,e)}getInitialValues(e){let t=this.getColumnsToResize(),n=this.getInitialSizeOfColumns(t),i=this.getSizeRatiosOfColumns(t,n),r={columnsToResize:t,resizeStartWidth:n,resizeRatios:i},o=null;if(e&&(o=this.visibleColsService.getGroupAtDirection(this.columnGroup,"After")),o){let s=o.getDisplayedLeafColumns(),a=r.groupAfterColumns=s.filter(c=>c.isResizable()),l=r.groupAfterStartWidth=this.getInitialSizeOfColumns(a);r.groupAfterRatios=this.getSizeRatiosOfColumns(a,l)}else r.groupAfterColumns=void 0,r.groupAfterStartWidth=void 0,r.groupAfterRatios=void 0;return r}storeLocalValues(e){let{columnsToResize:t,resizeStartWidth:n,resizeRatios:i,groupAfterColumns:r,groupAfterStartWidth:o,groupAfterRatios:s}=e;this.resizeCols=t,this.resizeStartWidth=n,this.resizeRatios=i,this.resizeTakeFromCols=r,this.resizeTakeFromStartWidth=o,this.resizeTakeFromRatios=s}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(e){let t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),n=this.getInitialValues();t>n.resizeStartWidth&&this.resizeColumns(n,t,e,!0)}resizeColumnsFromLocalValues(e,t,n=!0){if(!this.resizeCols||!this.resizeRatios)return;let i={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols??void 0,groupAfterStartWidth:this.resizeTakeFromStartWidth??void 0,groupAfterRatios:this.resizeTakeFromRatios??void 0};this.resizeColumns(i,e,t,n)}resizeColumns(e,t,n,i=!0){let{columnsToResize:r,resizeStartWidth:o,resizeRatios:s,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:c}=e,u=[];if(u.push({columns:r,ratios:s,width:t}),a){let d=t-o;u.push({columns:a,ratios:c,width:l-d})}this.columnSizeService.resizeColumnSets({resizeSets:u,finished:i,source:n}),i&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}getInitialSizeOfColumns(e){return e.reduce((t,n)=>t+n.getActualWidth(),0)}getSizeRatiosOfColumns(e,t){return e.map(n=>n.getActualWidth()/t)}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.clearLocalValues()}},t1e=class extends j{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();let e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){let e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",e===0)}},n1e=class extends cD{constructor(e,t,n){super(e,t,n),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){let i=this.getGui();this.setDragSource(i)}},this.column=e}setComp(e,t,n,i,r){this.comp=e,r=bC(this,this.beans.context,r),this.setGui(t,r),this.displayName=this.beans.columnNameService.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(r),this.setupExpandable(r),this.setupTooltip(r),this.setupAutoHeight({wrapperElement:i,compBean:r}),this.setupUserComp(r),this.addHeaderMouseListeners(r),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();let o=this.getParentRowCtrl().getPinned(),s=this.column.getProvidedColumnGroup().getLeafColumns();r.createManagedBean(new cN(s,t)),r.createManagedBean(new lN(this.column,t,this.beans)),r.createManagedBean(new t1e(e,this.column)),this.resizeFeature=r.createManagedBean(new e1e(e,n,o,this.column)),r.createManagedBean(new rf(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(r,s),r.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(r),r.addDestroyFunc(()=>this.clearComponent())}refreshMaxHeaderHeight(){let{gos:e,comp:t}=this,n=e.get("groupHeaderHeight");n!=null?n===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(n):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(let n of t)e.addManagedListeners(n,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,n)})}onLeafColumnHighlightChanged(e){let t=this.column.getDisplayedLeafColumns(),n=t[0]===e,i=Rt(t)===e;if(!n&&!i)return;let r=e.getHighlighted(),o=!!this.getParentRowCtrl().findHeaderCellCtrl(l=>l.getColumnGroupChild().isMoving()),s=!1,a=!1;if(o){let l=this.beans.gos.get("enableRtl"),c=r===1,u=r===0;n&&(l?a=c:s=u),i&&(l?s=u:a=c)}this.comp.addOrRemoveCssClass("ag-header-highlight-before",s),this.comp.addOrRemoveCssClass("ag-header-highlight-after",a)}getColumn(){return this.column}resizeHeader(e,t){if(!this.resizeFeature)return;let n=this.resizeFeature.getInitialValues(t);this.resizeFeature.resizeColumns(n,n.resizeStartWidth+e,"uiColumnResized",!0)}moveHeader(e){let{beans:t,eGui:n,column:i,ctrlsService:r}=this,{gos:o,columnModel:s,columnMoveService:a,visibleColsService:l}=t,c=o.get("enableRtl"),u=e===0,d=this.getPinned(),h=n.getBoundingClientRect(),p=h.left,g=h.width,m=iD({x:u!==c?p-20:p+g+20,pinned:d,fromKeyboard:!0,gos:o,ctrlsService:r}),v=i.getGroupId(),C=this.focusService.getFocusedHeader();pN({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,fromLeft:e===1,xPosition:m,pinned:d,fromEnter:!1,fakeEvent:!1,gos:o,columnModel:s,columnMoveService:a,visibleColsService:l,finished:!0});let S=i.getDisplayedLeafColumns(),_=u?S[0]:Rt(S);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(_,"auto"),(!this.isAlive()||this.beans.gos.get("ensureDomOrder"))&&C&&this.restoreFocus(v,i,C)}restoreFocus(e,t,n){let i=t.getLeafColumns();if(!i.length)return;let r=i[0].getParent();if(!r)return;let o=this.findGroupWidthId(r,e);o&&this.focusService.focusHeaderPosition({headerPosition:pe(B({},n),{column:o})})}findGroupWidthId(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return null}resizeLeafColumnsToFit(e){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(e){let t=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:i=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),i,"gridInitializing")},setTooltip:(i,r)=>{this.setupTooltip(e,i,r)}}),n=this.userComponentFactory.getHeaderGroupCompDetails(t);this.comp.setUserCompDetails(n)}addHeaderMouseListeners(e){let t=r=>this.handleMouseOverChange(r.type==="mouseenter"),n=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),i=r=>this.handleContextMenuMouseEvent(r,void 0,this.column.getProvidedColumnGroup());e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:n,contextmenu:i})}handleMouseOverChange(e){this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t,n){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));let i=this.column.getColGroupDef(),r=this.gos.get("tooltipShowMode")==="whenTruncated",o=this.eGui;!n&&r&&!i?.headerGroupComponent&&(n=()=>{let a=o.querySelector(".ag-header-group-text");return a?a.scrollWidth>a.clientWidth:!0});let s={getColumn:()=>this.column,getGui:()=>o,getLocation:()=>"headerGroup",getTooltipValue:()=>t??(i&&i.headerTooltip),shouldDisplayTooltip:n};i&&(s.getColDef=()=>i),e.createManagedBean(new gm(s))}setupExpandable(e){let t=this.column.getProvidedColumnGroup();this.refreshExpanded();let n=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:n,expandableChanged:n})}refreshExpanded(){let{column:e}=this;this.expandable=e.isExpandable();let t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){let e=this.column.getColGroupDef(),t=YK(e,this.gos,null,this.column);this.column.isPadding()?(t.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(i=>i.isSpanHeaderHeight())&&t.push("ag-header-span-height")):(t.push("ag-header-group-cell-with-group"),e?.wrapHeaderText&&t.push("ag-header-cell-wrap-text")),t.forEach(n=>this.comp.addOrRemoveCssClass(n,!0))}setupMovingCss(e){let n=this.column.getProvidedColumnGroup().getLeafColumns(),i=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());n.forEach(r=>{e.addManagedListeners(r,{movingChanged:i})}),i()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){let t=this.getRowIndex();this.beans.focusService.setFocusedHeader(t,this.column)}}handleKeyDown(e){super.handleKeyDown(e);let t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===G.ENTER){let n=this.column,i=!n.isExpanded();this.beans.columnModel.setColumnGroupOpened(n.getProvidedColumnGroup(),i,"uiColumnExpanded")}}setDragSource(e){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!e))return;let{beans:t,column:n,displayName:i,gos:r,dragAndDropService:o}=this,{columnModel:s}=t,a=n.getProvidedColumnGroup().getLeafColumns(),l=!r.get("suppressDragLeaveHidesColumns"),c=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>l?"hide":"notAllowed",dragItemName:i,getDragItem:()=>this.getDragItemForGroup(n),onDragStarted:()=>{l=!r.get("suppressDragLeaveHidesColumns"),lm(a,!0)},onDragStopped:()=>lm(a,!1),onDragCancelled:()=>lm(a,!1),onGridEnter:u=>{if(l){let{columns:d=[],visibleState:h}=u??{},p=d.filter(g=>!g.getColDef().lockVisible&&(!h||h[g.getColId()]));s.setColsVisible(p,!0,"uiColumnMoved")}},onGridExit:u=>{if(l){let d=u?.columns?.filter(h=>!h.getColDef().lockVisible)||[];s.setColsVisible(d,!1,"uiColumnMoved")}}};o.addDragSource(c,!0)}getDragItemForGroup(e){let t=e.getProvidedColumnGroup().getLeafColumns(),n={};t.forEach(s=>n[s.getId()]=s.isVisible());let i=[];this.beans.visibleColsService.getAllCols().forEach(s=>{t.indexOf(s)>=0&&(i.push(s),Xr(t,s))}),t.forEach(s=>i.push(s));let r=[],o=e.getLeafColumns();for(let s of i)o.indexOf(s)!==-1&&r.push(s);return{columns:i,columnsInSplit:r,visibleState:n}}isSuppressMoving(){let e=!1;return this.column.getLeafColumns().forEach(n=>{(n.getColDef().suppressMovable||n.getColDef().lockPosition)&&(e=!0)}),e||this.gos.get("suppressMovableColumns")}destroy(){super.destroy()}},i1e=0,hO=class extends j{constructor(e,t,n){super(),this.instanceId=i1e++,this.rowIndex=e,this.pinned=t,this.type=n;let i=n=="group"?"ag-header-row-column-group":n=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${i}`}wireBeans(e){this.beans=e}postConstruct(){this.isPrintLayout=lr(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.getHeaderCellCtrls().every(e=>e.getGui()!=null):!1}setComp(e,t,n=!0){this.comp=e,t=bC(this,this.beans.context,t),n&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){let t=this.onRowHeightChanged.bind(this);e.addManagedEventListeners({columnResized:this.onColumnResized.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:n=>this.onVirtualColumnsChanged(n.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),e.addManagedPropertyListener("ensureDomOrder",n=>this.isEnsureDomOrder=n.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}getHeaderCellCtrl(e){if(this.headerCellCtrls)return Gx(this.headerCellCtrls).find(t=>t.getColumnGroupChild()===e)}onDisplayedColumnsChanged(){this.isPrintLayout=lr(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){let e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){let{visibleColsService:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){let{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let{columnModel:e,filterManager:t}=this.beans,n=[],i=e.getGroupRowsHeight(),r=e.getColumnHeaderRowHeight();n.push(...i),n.push(r),t?.hasFloatingFilters()&&n.push(e.getFloatingFiltersHeight());let o=0;for(let a=0;a<this.rowIndex;a++)o+=n[a];let s=n[this.rowIndex];return{topOffset:o,rowHeight:s}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(e=!1){let t=this.getHeaderCtrls(),n=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,n,e)}getHeaderCtrls(){let e=this.headerCellCtrls;this.headerCellCtrls=new Map;let t=this.getColumnsInViewport();for(let i of t)this.recycleAndCreateHeaderCtrls(i,e);let n=i=>{let{focusService:r,visibleColsService:o}=this.beans;return r.isHeaderWrapperFocused(i)?o.isVisible(i.getColumnGroupChild()):!1};if(e)for(let[i,r]of e)n(r)?this.headerCellCtrls.set(i,r):this.destroyBean(r);return this.getHeaderCellCtrls()}getHeaderCellCtrls(){return Array.from(this.headerCellCtrls?.values()??[])}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls||e.isEmptyGroup())return;let n=e.getUniqueId(),i;if(t&&(i=t.get(n),t.delete(n)),i&&i.getColumnGroupChild()!=e&&(this.destroyBean(i),i=void 0),i==null)switch(this.type){case"filter":{i=this.createBean(this.beans.ctrlsFactory.getInstance("headerFilterCell",e,this.beans,this));break}case"group":i=this.createBean(new n1e(e,this.beans,this));break;default:i=this.createBean(new JSe(e,this.beans,this));break}this.headerCellCtrls.set(n,i)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let e=[],t=this.getActualDepth(),{columnViewportService:n}=this.beans;return["left",null,"right"].forEach(i=>{let r=n.getHeadersToRender(i,t);e=e.concat(r)}),e}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnViewportService.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(e){if(!this.headerCellCtrls)return;let t=this.getHeaderCellCtrls(),n;return typeof e=="function"?n=t.find(e):n=t.find(i=>i.getColumnGroupChild()==e),n}focusHeader(e,t){let n=this.findHeaderCellCtrl(e);return n?n.focus(t):!1}destroy(){this.headerCellCtrls?.forEach(e=>{this.destroyBean(e)}),this.headerCellCtrls=void 0,super.destroy()}},r1e=class extends j{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}wireBeans(e){this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.focusService=e.focusService,this.filterManager=e.filterManager}setComp(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport);let n=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:n,advancedFilterEnabledChanged:n});let i=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;this.ctrlsService.register(i,this),this.columnModel.isReady()&&this.refresh()}getAllCtrls(){let e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){let t=new hm,n=this.focusService.getFocusHeaderToUseAfterRefresh(),i=()=>{let a=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let l=0;l<a;l++){let c=this.createBean(new hO(t.next(),this.pinned,"group"));this.groupsRowCtrls.push(c)}},r=()=>{let a=t.next(),l=!this.hidden&&(this.columnsRowCtrl==null||!e||this.columnsRowCtrl.getRowIndex()!==a);(l||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),l&&(this.columnsRowCtrl=this.createBean(new hO(a,this.pinned,"column")))},o=()=>{this.includeFloatingFilter=!!this.filterManager?.hasFloatingFilters()&&!this.hidden;let a=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){a();return}let l=t.next();if(this.filtersRowCtrl){let c=this.filtersRowCtrl.getRowIndex()!==l;(!e||c)&&a()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new hO(l,this.pinned,"filter")))};i(),r(),o();let s=this.getAllCtrls();this.comp.setCtrls(s),this.restoreFocusOnHeader(n)}getHeaderCtrlForColumn(e){if(Wu(e))return this.columnsRowCtrl?.getHeaderCellCtrl(e);if(this.groupsRowCtrls.length!==0)for(let t=0;t<this.groupsRowCtrls.length;t++){let n=this.groupsRowCtrls[t].getHeaderCellCtrl(e);if(n)return n}}getHtmlElementForColumnHeader(e){let t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null}getRowType(e){let n=this.getAllCtrls()[e];return n?n.getType():void 0}focusHeader(e,t,n){let r=this.getAllCtrls()[e];return r?r.focusHeader(t,n):!1}getViewportElement(){return this.eViewport}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}setupDragAndDrop(e){let t=new XSe(this.pinned,e);this.createManagedBean(t)}restoreFocusOnHeader(e){if(!e)return;let{column:t}=e;t.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:e})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){let e=this.filterManager?.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new fN(e=>this.comp.setCenterWidth(`${e}px`),!0))}setupPinnedWidth(){if(this.pinned==null)return;let e=this.pinned==="left",t=this.pinned==="right";this.hidden=!0;let n=()=>{let i=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(i==null)return;let r=i==0,o=this.hidden!==r,s=this.gos.get("enableRtl"),a=this.scrollVisibleService.getScrollbarWidth(),c=this.scrollVisibleService.isVerticalScrollShowing()&&(s&&e||!s&&t)?i+a:i;this.comp.setPinnedContainerWidth(`${c}px`),this.comp.setDisplayed(!r),o&&(this.hidden=r,this.refresh())};this.addManagedEventListeners({leftPinnedWidthChanged:n,rightPinnedWidthChanged:n,scrollVisibilityChanged:n,scrollbarWidthChanged:n})}},o1e='<div class="ag-pinned-left-header" role="rowgroup"></div>',s1e='<div class="ag-pinned-right-header" role="rowgroup"></div>',a1e=`<div class="ag-header-viewport" role="presentation">
        <div class="ag-header-container" data-ref="eCenterContainer" role="rowgroup"></div>
    </div>`,fO=class extends At{constructor(e){super(),this.eCenterContainer=fe,this.headerRowComps={},this.rowCompsList=[],this.pinned=e}postConstruct(){this.selectAndSetTemplate();let e={setDisplayed:n=>this.setDisplayed(n),setCtrls:n=>this.setCtrls(n),setCenterWidth:n=>this.eCenterContainer.style.width=n,setViewportScrollLeft:n=>this.getGui().scrollLeft=n,setPinnedContainerWidth:n=>{let i=this.getGui();i.style.width=n,i.style.maxWidth=n,i.style.minWidth=n}};this.createManagedBean(new r1e(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){let e=this.pinned=="left",t=this.pinned=="right",n=e?o1e:t?s1e:a1e;this.setTemplate(n),this.eRowContainer=this.eCenterContainer!==fe?this.eCenterContainer:this.getGui()}destroy(){this.setCtrls([]),super.destroy()}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){let t=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let n,i=r=>{let o=r.getGui();o.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(o),n&&mK(this.eRowContainer,o,n),n=o};e.forEach(r=>{let o=r.instanceId,s=t[o];delete t[o];let a=s||this.createBean(new BSe(r));this.headerRowComps[o]=a,this.rowCompsList.push(a),i(a)}),tf(t).forEach(r=>this.destroyRowComp(r))}},l1e=class extends At{constructor(){super('<div class="ag-header" role="presentation"/>')}postConstruct(){let e={addOrRemoveCssClass:(i,r)=>this.addOrRemoveCssClass(i,r),setHeightAndMinHeight:i=>{this.getGui().style.height=i,this.getGui().style.minHeight=i}};this.createManagedBean(new HSe).setComp(e,this.getGui(),this.getFocusableElement());let n=i=>{this.createManagedBean(i),this.appendChild(i)};n(new fO("left")),n(new fO(null)),n(new fO("right"))}},c1e={selector:"AG-HEADER-ROOT",component:l1e};var gN=class extends j{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){let e=this.getDomLayout(),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},n=t.autoHeight?"ag-layout-auto-height":t.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(n,t)}getDomLayout(){let e=this.gos.get("domLayout")??"normal";return["normal","print","autoHeight"].indexOf(e)===-1?(X(`${e} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):e}},u1e=class extends At{constructor(){super(`
            <div class="ag-overlay" role="presentation">
                <div class="ag-overlay-panel" role="presentation">
                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>
                </div>
            </div>`),this.eOverlayWrapper=fe,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeOverlayWrapperCssClass=null,this.elToFocusAfter=null}wireBeans(e){this.overlayService=e.overlayService,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}handleKeyDown(e){if(e.key!==G.TAB||e.defaultPrevented||pc(e)||this.focusService.findNextFocusableElement(this.eOverlayWrapper,!1,e.shiftKey))return;let n=!1;e.shiftKey?n=this.focusService.focusGridView(Rt(this.visibleColsService.getAllCols()),!0,!1):n=this.focusService.focusNextGridCoreContainer(!1),n&&e.preventDefault()}updateLayoutClasses(e,t){let n=this.eOverlayWrapper.classList;n.toggle("ag-layout-auto-height",t.autoHeight),n.toggle("ag-layout-normal",t.normal),n.toggle("ag-layout-print",t.print)}postConstruct(){this.createManagedBean(new gN(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){let t=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&t.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,t.toggle(e,!0)}showOverlay(e,t,n,i){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,!!e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),n&&this.focusService.isGridFocused()){let r=Dn(this.gos);r&&!Vq(this.gos)&&(this.elToFocusAfter=r)}e.then(r=>{if(this.activePromise!==e){this.activeOverlay!==r&&(this.destroyBean(r),r=null);return}if(this.activePromise=null,!r)return;if(this.activeOverlay!==r&&(this.eOverlayWrapper.appendChild(r.getGui()),this.activeOverlay=r,i)){let s=r;this.updateListenerDestroyFunc=this.addManagedPropertyListener(i,({currentValue:a})=>{s.refresh?.(this.gos.addGridCommonParams(B({},a??{})))})}let o=this.focusService;n&&o.isGridFocused()&&o.focusInto(this.eOverlayWrapper)})}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){this.activePromise=null;let e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.focusService.isGridFocused()&&(t=null);let n=this.updateListenerDestroyFunc;n&&(n(),this.updateListenerDestroyFunc=null),this.destroyBean(e),br(this.eOverlayWrapper),t?.focus?.({preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.overlayService.setOverlayWrapperComp(void 0),super.destroy()}},d1e={selector:"AG-OVERLAY-WRAPPER",component:u1e},iY=class extends At{constructor(e,t){super(),this.direction=t,this.eViewport=fe,this.eContainer=fe,this.hideTimeout=null,this.setTemplate(e)}wireBeans(e){this.animationFrameService=e.animationFrameService}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",cK()||Ku())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=dK(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){let e=this.getGui(),t=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),n=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:n,touchend:n})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)}})}attemptSettingScrollPosition(e){let t=this.getViewportElement();mCe(()=>Ca(t),()=>this.setScrollPosition(e),100)}getViewportElement(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}},h1e=class extends iY{constructor(){super(`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>
        </div>`,"horizontal"),this.eLeftSpacer=fe,this.eRightSpacer=fe}wireBeans(e){super.wireBeans(e),this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){super.postConstruct();let e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new fN(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;let e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){let e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.visibleColsService.getDisplayedColumnsRightWidth(),n=!this.enableRtl&&e,i=this.scrollVisibleService.getScrollbarWidth();n&&(t+=i),ya(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=i);let r=this.visibleColsService.getColsLeftWidth();this.enableRtl&&e&&(r+=i),ya(this.eLeftSpacer,r),this.eLeftSpacer.classList.toggle("ag-scroller-corner",r<=i)}setScrollVisible(){let e=this.scrollVisibleService.isHorizontalScrollShowing(),t=this.invisibleScrollbar,n=this.gos.get("suppressHorizontalScroll"),i=e&&this.scrollVisibleService.getScrollbarWidth()||0,o=n?0:i===0&&t?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),lC(this.getGui(),o),lC(this.eViewport,o),lC(this.eContainer,o),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return Jx(this.getViewportElement(),this.enableRtl)}setScrollPosition(e){Ca(this.getViewportElement())||this.attemptSettingScrollPosition(e),eD(this.getViewportElement(),e,this.enableRtl)}},f1e={selector:"AG-FAKE-HORIZONTAL-SCROLL",component:h1e},rY=class extends j{wireBeans(e){this.maxDivHeightScaler=e.rowContainerHeightService}constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this)})}onHeightChanged(){let e=this.maxDivHeightScaler.getUiContainerHeight(),t=e!=null?`${e}px`:"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)}},p1e=class extends iY{wireBeans(e){super.wireBeans(e),this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}constructor(){super(`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>
            </div>
        </div>`,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new rY(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this)})}setScrollVisible(){let e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.invisibleScrollbar,n=e&&this.scrollVisibleService.getScrollbarWidth()||0,i=n===0&&t?16:n;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),ya(this.getGui(),i),ya(this.eViewport,i),ya(this.eContainer,i),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){let{ctrlsService:e}=this,n=e.getGridBodyCtrl().getBodyViewportElement(),i=this.getScrollPosition(),r=n.scrollTop;i!=r&&this.setScrollPosition(r,!0)}getScrollPosition(){return this.getViewportElement().scrollTop}setScrollPosition(e,t){!t&&!Ca(this.getViewportElement())&&this.attemptSettingScrollPosition(e),this.getViewportElement().scrollTop=e}},g1e={selector:"AG-FAKE-VERTICAL-SCROLL",component:p1e},OO=(e=>(e.FakeHScrollbar="fakeHScrollComp",e.Header="centerHeader",e.PinnedTop="topCenter",e.PinnedBottom="bottomCenter",e.StickyTop="stickyTopCenter",e.StickyBottom="stickyBottomCenter",e))(OO||{}),m1e=class extends j{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=Qr(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=Qr(()=>this.lastScrollSource[0]=null,500)}wireBeans(e){this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.rowModel=e.rowModel,this.heightScaler=e.rowContainerHeightService,this.rowRenderer=e.rowRenderer,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)}),this.ctrlsService.whenReady(this,e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.getViewportElement(),{scroll:this.onHScroll.bind(this,"Viewport")});for(let e of Object.values(OO)){let t=this.ctrlsService.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){let e=this.ctrlsService.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),n=t?Qr(this.onVScroll.bind(this,"Viewport"),100):this.onVScroll.bind(this,"Viewport"),i=t?Qr(this.onVScroll.bind(this,"fakeVScrollComp"),100):this.onVScroll.bind(this,"fakeVScrollComp");this.addManagedElementListeners(this.eBodyViewport,{scroll:n}),this.registerScrollPartner(e,i)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(let t of[...Object.values(OO),"Viewport"]){if(this.lastScrollSource[1]===t)continue;let n=this.getViewportForSource(t);eD(n,e,this.enableRtl)}}getViewportForSource(e){return e==="Viewport"?this.centerRowsCtrl.getViewportElement():this.ctrlsService.get(e).getViewportElement()}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;let t=this.centerRowsCtrl.getViewportElement(),{scrollLeft:n}=t;if(this.shouldBlockScrollUpdate(1,n,!0))return;let i=Jx(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(i),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;e==="Viewport"?t=this.eBodyViewport.scrollTop:t=this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),!this.shouldBlockScrollUpdate(0,t,!0)&&(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,e==="Viewport"?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){let t=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){let t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{this.eventService.dispatchEvent(pe(B({},t),{type:"bodyScrollEnd"}))},100)}shouldBlockScrollUpdate(e,t,n=!1){return n&&!Ku()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){let t=$O(this.eBodyViewport),{scrollHeight:n}=this.eBodyViewport;return e<0||e+t>n}shouldBlockHorizontalScroll(e){let t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:n}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl&&Zx()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>n}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScroll("Viewport")}scrollGridIfNeeded(){let e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e,t=!1){let i=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl&&Zx()?e=e>0?0:i:e=Math.min(Math.max(e,0),i)),eD(this.centerRowsCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){let t=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){let n=this.rowModel.getRowCount(),i=-1;for(let r=0;r<n;r++){let o=this.rowModel.getRow(r);if(typeof e=="function"){if(o&&e(o)){i=r;break}}else if(e===o||e===o.data){i=r;break}}i>=0&&this.ensureIndexVisible(i,t)}ensureIndexVisible(e,t){if(lr(this.gos,"print"))return;let n=this.rowModel.getRowCount();if(typeof e!="number"||e<0||e>=n){X("Invalid row index for ensureIndexVisible: "+e);return}let r=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{r||this.paginationService?.goToPageWithIndex(e);let o=this.ctrlsService.getGridBodyCtrl(),s=o.getStickyTopHeight(),a=o.getStickyBottomHeight(),l=this.rowModel.getRow(e),c;do{let u=l.rowTop,d=l.rowHeight,h=this.pageBoundsService.getPixelOffset(),p=l.rowTop-h,g=p+l.rowHeight,m=this.getVScrollPosition(),v=this.heightScaler.getDivStretchOffset(),C=m.top+v,S=m.bottom+v,_=S-C,D=this.heightScaler.getScrollPositionForPixel(p),F=this.heightScaler.getScrollPositionForPixel(g-_),I=Math.min((D+F)/2,p),E=C+s>p,b=S-a<g,x=null;t==="top"?x=D:t==="bottom"?x=F:t==="middle"?x=I:E?x=D-s:b&&(x=F+a),x!==null&&(this.setVerticalScrollPosition(x),this.rowRenderer.redraw({afterScroll:!0})),c=u!==l.rowTop||d!==l.rowHeight}while(c);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(e,t="auto"){let n=this.columnModel.getCol(e);if(!n||n.isPinned()||!this.visibleColsService.isColDisplayed(n))return;let i=this.getPositionedHorizontalScroll(n,t);this.getFrameworkOverrides().wrapIncoming(()=>{i!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(i),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(e,t){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(t),this.setVerticalScrollPosition(e),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(e,t){let{columnBeforeStart:n,columnAfterEnd:i}=this.isColumnOutsideViewport(e),r=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),o=this.centerRowsCtrl.getCenterWidth(),s=this.enableRtl,a=(s?n:i)||r,l=s?i:n;t!=="auto"&&(a=t==="start",l=t==="end");let c=t==="middle";if(a||l||c){let{colLeft:u,colMiddle:d,colRight:h}=this.getColumnBounds(e);return c?d-o/2:a?s?h:u:s?u-o:h-o}return null}isColumnOutsideViewport(e){let{start:t,end:n}=this.getViewportBounds(),{colLeft:i,colRight:r}=this.getColumnBounds(e),o=this.enableRtl,s=o?t>r:n<r,a=o?n<i:t>i;return{columnBeforeStart:s,columnAfterEnd:a}}getColumnBounds(e){let t=this.enableRtl,n=this.visibleColsService.getBodyContainerWidth(),i=e.getActualWidth(),r=e.getLeft(),o=t?-1:1,s=t?n-r:r,a=s+i*o,l=s+i/2*o;return{colLeft:s,colMiddle:l,colRight:a}}getViewportBounds(){let e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),n=t,i=e+t;return{start:n,end:i,width:e}}},v1e=class extends j{wireBeans(e){this.animationFrameService=e.animationFrameService,this.ctrlsService=e.ctrlsService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.columnViewportService=e.columnViewportService}constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){let e=()=>{this.animationFrameService.requestAnimationFrame(()=>{this.onCenterViewportResized()})};this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleService.onCentreViewportResized(),this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();let e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnSizeService.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){let e=this.gridBodyCtrl.getBodyViewportElement(),t=SC(e);if(t<=50)return;let n=this.getPinnedColumnsOverflowingViewport(t-50),i=this.gos.getCallback("processUnpinnedColumns");n.length&&(i&&(n=i({columns:n,viewportWidth:t})),this.columnModel.setColsPinned(n,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(e){let t=this.pinnedWidthService.getPinnedRightWidth(),n=this.pinnedWidthService.getPinnedLeftWidth(),i=t+n;if(i<e)return[];let r=[...this.visibleColsService.getLeftCols()],o=[...this.visibleColsService.getRightCols()],s=0,a=0,l=0,c=[],u=i-l-e;for(;(a<r.length||s<o.length)&&u>0;){if(s<o.length){let d=o[s++];u-=d.getActualWidth(),c.push(d)}if(a<r.length&&u>0){let d=r[a++];u-=d.getActualWidth(),c.push(d)}}return c}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){let e=this.gridBodyCtrl.getBodyViewportElement(),t=$O(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventService.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){let e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){let e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnViewportService.setScrollPosition(e,t)}},y1e=class extends j{wireBeans(e){this.dragService=e.dragService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{hl(this.gos)?this.enableFeature():this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),hl(this.gos)&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}},C1e=class extends At{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[nN]),this.eCheckbox=fe}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){let e=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),n=KO(e,t),[i,r]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],o=e(i,r);this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel(`${o} (${n})`)}onClicked(e,t,n){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:n.shiftKey,groupSelectsFiltered:t,event:n,source:"checkboxSelected"})}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:i=>um(i),click:i=>{um(i);let r=zO(this.gos)==="filteredDescendants",o=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(o,r)?this.onClicked(!0,r,i||{})===0&&this.onClicked(!1,r,i):o?this.onClicked(!1,r,i):this.onClicked(!0,r,i||{})}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),GO(this.gos)||typeof this.getIsVisible()=="function"){let i=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:i}),this.addManagedListeners(this.rowNode,{dataChanged:i,cellChanged:i}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,t){return t&&(this.eCheckbox.getPreviousValue()===void 0||e===void 0)&&kn(this.gos)}showOrHideSelect(){let e=this.rowNode.selectable,t=this.getIsVisible();if(e)if(typeof t=="function"){let r=this.overrides?.callbackParams;if(!this.column)e=t(pe(B({},r),{node:this.rowNode,data:this.rowNode.data}));else{let o=this.column.createColumnFunctionCallbackParams(this.rowNode);e=t(B(B({},r),o))}}else e=t??!1;let n=this.gos.get("rowSelection");if(n&&typeof n!="string"?!bCe(n):this.column?.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!e),this.setVisible(!0),this.setDisplayed(!0);return}if(this.overrides?.removeHidden){this.setDisplayed(e);return}this.setVisible(e)}getIsVisible(){if(this.overrides)return this.overrides.isVisible;let e=this.gos.get("rowSelection");return e&&typeof e!="string"?cm(e):this.column?.getColDef()?.checkboxSelection}},w1e=class extends At{constructor(e,t,n){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=n}postConstruct(){this.getGui().appendChild(Zo("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){let t=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);let n=()=>{try{let i=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",i),e.dataTransfer.setData("text/plain",i)}catch{}};if(t){let i=this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:e});t(i)}else n()}checkVisibility(){let e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}},b1e=class extends j{constructor(e,t){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){let e=this.column.getColDef(),{cellClassRules:t}=e,n=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(t===this.cellClassRules?void 0:this.cellClassRules,t,n,i=>this.cellComp.addOrRemoveCssClass(i,!0),i=>this.cellComp.addOrRemoveCssClass(i,!1)),this.cellClassRules=t}applyUserStyles(){let e=this.column.getColDef();if(!e.cellStyle)return;let t;if(typeof e.cellStyle=="function"){let n=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),i=e.cellStyle;t=i(n)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){let e=this.column.getColDef(),t=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(n=>this.cellComp.addOrRemoveCssClass(n,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,t),this.staticClasses.length&&this.staticClasses.forEach(n=>this.cellComp.addOrRemoveCssClass(n,!0))}destroy(){super.destroy()}},S1e=class extends j{constructor(e,t,n,i,r){super(),this.cellCtrl=e,this.beans=t,this.rowNode=i,this.rowCtrl=r}setComp(e){this.eGui=e}onKeyDown(e){let t=e.key;switch(t){case G.ENTER:this.onEnterKeyDown(e);break;case G.F2:this.onF2KeyDown(e);break;case G.ESCAPE:this.onEscapeKeyDown(e);break;case G.TAB:this.onTabKeyDown(e);break;case G.BACKSPACE:case G.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case G.DOWN:case G.UP:case G.RIGHT:case G.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;let t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){let{cellCtrl:n,beans:i,rowNode:r}=this,{gos:o,rangeService:s,eventService:a}=i;if(!n.isEditing()){if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),qbe(e,o.get("enableCellEditingOnBackspace"))){if(s&&hl(o))s.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(n.isCellEditable()){let l=n.getColumn(),c=this.beans.valueService.getDeleteValue(l,r);r.setDataValue(l,c,"cellClear")}}else n.startRowOrCellEdit(e,t);a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){let t=e.shiftKey?G.UP:G.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(G.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(G.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;let i=e.key;i===" "?this.onSpaceKeyDown(e):this.cellCtrl.startRowOrCellEdit(i,e)&&e.preventDefault()}onSpaceKeyDown(e){let{gos:t}=this.beans;if(!this.cellCtrl.isEditing()&&jx(t)){let n=this.rowNode.isSelected(),i=!n,r=zO(t)==="filteredDescendants",o=this.rowNode.setSelectedParams({newValue:i,rangeSelect:e.shiftKey,groupSelectsFiltered:r,event:e,source:"spaceKey"});n===void 0&&o===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:r,event:e,source:"spaceKey"})}e.preventDefault()}destroy(){super.destroy()}},_1e=class extends j{constructor(e,t,n){super(),this.cellCtrl=e,this.beans=t,this.column=n}onMouseEvent(e,t){if(!pc(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(e),e.preventDefault();return}let{eventService:t,rangeService:n,gos:i}=this.beans,r=e.ctrlKey||e.metaKey;n&&r&&n.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&n.intersectLastRange(!0);let o=this.cellCtrl.createEvent(e,"cellClicked");t.dispatchEvent(o);let s=this.column.getColDef();s.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{s.onCellClicked(o)})},0),(i.get("singleClickEdit")||s.singleClickEdit)&&!i.get("suppressClickEdit")&&!(e.shiftKey&&n?.getCellRanges().length!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!Ku()||qq("dblclick"))return!1;let e=new Date().getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t}onCellDoubleClicked(e){let{column:t,beans:n,cellCtrl:i}=this,{eventService:r,frameworkOverrides:o,gos:s}=n,a=t.getColDef(),l=i.createEvent(e,"cellDoubleClicked");r.dispatchEvent(l),typeof a.onCellDoubleClicked=="function"&&window.setTimeout(()=>{o.wrapOutgoing(()=>{a.onCellDoubleClicked(l)})},0),!s.get("singleClickEdit")&&!s.get("suppressClickEdit")&&i.startRowOrCellEdit(null,e)}onMouseDown(e){let{ctrlKey:t,metaKey:n,shiftKey:i}=e,r=e.target,{cellCtrl:o,beans:s}=this,{eventService:a,rangeService:l,focusService:c,gos:u}=s;if(this.isRightClickInExistingRange(e))return;let d=l&&l.getCellRanges().length!=0;if(!i||!d){let p=u.get("enableCellTextSelection")&&e.defaultPrevented,g=(fl()||p)&&!o.isEditing()&&!XO(r);o.focusCell(g)}if(i&&d&&!c.isCellFocused(o.getCellPosition())){e.preventDefault();let h=c.getFocusedCell();if(h){let{column:p,rowIndex:g,rowPinned:m}=h,C=s.rowRenderer.getRowByPosition({rowIndex:g,rowPinned:m})?.getCellCtrl(p);C?.isEditing()&&C.stopEditing(),c.setFocusedCell({column:p,rowIndex:g,rowPinned:m,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(r)){if(l){let h=this.cellCtrl.getCellPosition();if(i)l.extendLatestRangeToCell(h);else{let p=t||n;l.setRangeToCell(h,p)}}a.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){let{rangeService:t}=this.beans;if(t){let n=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),i=e.button===2||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(n&&i)return!0}return!1}containsWidget(e){return am(e,"ag-selection-checkbox",3)}onMouseOut(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),this.beans.columnHoverService.clearMouseOver())}onMouseOver(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),this.beans.columnHoverService.setMouseOver([this.column]))}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;let t=this.cellCtrl.getGui(),n=t.contains(e.target),i=t.contains(e.relatedTarget);return n&&i}destroy(){super.destroy()}},E1e=class extends j{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}setComp(e){this.eGui=e,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){let e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))}onDisplayColumnsChanged(){let e=this.getColSpanningList();qu(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eGui)return;let e=this.getCellWidth();this.eGui.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){let e=this.column.getColSpan(this.rowNode),t=[];if(e===1)t.push(this.column);else{let n=this.column,i=this.column.getPinned();for(let r=0;n&&r<e&&(t.push(n),n=this.beans.visibleColsService.getColAfter(n),!(!n||St(n)||i!==n.getPinned()));r++);}return t}onLeftChanged(){if(!this.eGui)return;let e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=Rt(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return e;let t=this.beans.visibleColsService.getColsLeftWidth();if(this.column.getPinned()==="right"){let n=this.beans.visibleColsService.getBodyContainerWidth();return t+n+(e||0)}return t+(e||0)}applyRowSpan(e){if(this.rowSpan===1&&!e)return;let n=Qh(this.beans.gos)*this.rowSpan;this.eGui.style.height=`${n}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}};var nC="ag-cell-range-selected",x1e="ag-cell-range-chart",D1e="ag-cell-range-single-cell",T1e="ag-cell-range-chart-category",R1e="ag-cell-range-handle",I1e="ag-cell-range-top",F1e="ag-cell-range-right",A1e="ag-cell-range-bottom",M1e="ag-cell-range-left",P1e=class{constructor(e,t){this.beans=e,this.rangeService=e.rangeService,this.selectionHandleFactory=e.selectionHandleFactory,this.cellCtrl=t}setComp(e,t){this.cellComp=e,this.eGui=t,this.onCellSelectionChanged()}onCellSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(nC,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${nC}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${nC}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${nC}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${nC}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(x1e,this.hasChartRange),Xx(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(D1e,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){let e=this.getRangeBorders(),t=this.isSingleCell(),n=!t&&e.top,i=!t&&e.right,r=!t&&e.bottom,o=!t&&e.left;this.cellComp.addOrRemoveCssClass(I1e,n),this.cellComp.addOrRemoveCssClass(F1e,i),this.cellComp.addOrRemoveCssClass(A1e,r),this.cellComp.addOrRemoveCssClass(M1e,o)}isSingleCell(){let{rangeService:e}=this.beans;return this.rangeCount===1&&!!e&&!e.isMoreThanOneCell()}getHasChartRange(){let{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;let t=e.getCellRanges();return t.length>0&&t.every(n=>Xh([1,0],n.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){let e=this.beans.gos.get("enableRtl"),t=!1,n=!1,i=!1,r=!1,o=this.cellCtrl.getCellPosition().column,s=this.beans.visibleColsService,a,l;e?(a=s.getColAfter(o),l=s.getColBefore(o)):(a=s.getColBefore(o),l=s.getColAfter(o));let c=this.rangeService.getCellRanges().filter(u=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),u));a||(r=!0),l||(n=!0);for(let u=0;u<c.length&&!(t&&n&&i&&r);u++){let d=c[u],h=this.rangeService.getRangeStartRow(d),p=this.rangeService.getRangeEndRow(d);!t&&this.beans.rowPositionUtils.sameRow(h,this.cellCtrl.getCellPosition())&&(t=!0),!i&&this.beans.rowPositionUtils.sameRow(p,this.cellCtrl.getCellPosition())&&(i=!0),!r&&a&&d.columns.indexOf(a)<0&&(r=!0),!n&&l&&d.columns.indexOf(l)<0&&(n=!0)}return{top:t,right:n,bottom:i,left:r}}refreshHandle(){if(this.beans.context.isDestroyed())return;let e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(R1e,!!this.selectionHandle)}shouldHaveSelectionHandle(){let e=this.beans.gos,t=this.rangeService.getCellRanges(),n=t.length;if(this.rangeCount<1||n<1)return!1;let i=Rt(t),r=this.cellCtrl.getCellPosition(),o=sq(e)&&!this.cellCtrl.isSuppressFillHandle(),s=xCe(e),a=n===1&&!this.cellCtrl.isEditing()&&(o||s);if(this.hasChartRange){let c=t[0].type===1&&this.rangeService.isCellInSpecificRange(r,t[0]);this.cellComp.addOrRemoveCssClass(T1e,c),a=i.type===0}return a&&i.endRow!=null&&this.rangeService.isContiguousRange(i)&&this.rangeService.isBottomRightCell(i,r)}addSelectionHandle(){let e=Rt(this.rangeService.getCellRanges()).type,n=sq(this.beans.gos)&&St(e)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==n&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(n)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},k1e="ag-cell",O1e="ag-cell-auto-height",N1e="ag-cell-normal-height",L1e="ag-cell-focus",V1e="ag-cell-first-right-pinned",B1e="ag-cell-last-left-pinned",G1e="ag-cell-not-inline-editing",H1e="ag-column-hover",z1e="ag-cell-wrap-text",U1e=0,oY=class NO extends j{constructor(t,n,i,r){super(),this.column=t,this.rowNode=n,this.beans=i,this.rowCtrl=r,this.cellRangeFeature=void 0,this.cellPositionFeature=void 0,this.cellCustomStyleFeature=void 0,this.tooltipFeature=void 0,this.cellMouseListenerFeature=void 0,this.cellKeyboardListenerFeature=void 0,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],this.instanceId=t.getId()+"-"+U1e++,this.colIdSanitised=dl(this.column.getId()),this.createCellPosition(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}onFocusOut(){this.beans.focusService.clearRestoreFocus()}addFeatures(){this.cellPositionFeature=new E1e(this,this.beans),this.cellCustomStyleFeature=new b1e(this,this.beans),this.cellMouseListenerFeature=new _1e(this,this.beans,this.column),this.cellKeyboardListenerFeature=new S1e(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.column.isTooltipEnabled()&&this.enableTooltipFeature(),this.beans.rangeService&&hl(this.beans.gos)&&(this.cellRangeFeature=new P1e(this.beans,this))}removeFeatures(){let t=this.beans.context;this.cellPositionFeature=t.destroyBean(this.cellPositionFeature),this.cellCustomStyleFeature=t.destroyBean(this.cellCustomStyleFeature),this.cellMouseListenerFeature=t.destroyBean(this.cellMouseListenerFeature),this.cellKeyboardListenerFeature=t.destroyBean(this.cellKeyboardListenerFeature),this.cellRangeFeature=t.destroyBean(this.cellRangeFeature),this.disableTooltipFeature()}enableTooltipFeature(t,n){let i=()=>{let s=this.column.getColDef(),a=this.rowNode.data;if(s.tooltipField&&ne(a))return aC(a,s.tooltipField,this.column.isTooltipFieldContainsDots());let l=s.tooltipValueGetter;return l?l(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},r=this.beans.gos.get("tooltipShowMode")==="whenTruncated";!n&&r&&!this.isCellRenderer()&&(n=()=>{let s=this.getGui(),a=s.children.length===0?s:s.querySelector(".ag-cell-value");return a?a.scrollWidth>a.clientWidth:!0});let o={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:t!=null?()=>t:i,getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:n};this.tooltipFeature=new gm(o,this.beans)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}setComp(t,n,i,r,o,s){this.cellComp=t,this.eGui=n,this.printLayout=r,s??(s=this),this.addDomData(s),this.addFeatures(),s.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(i,s),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),this.cellPositionFeature?.setComp(n),this.cellCustomStyleFeature?.setComp(t),this.tooltipFeature?.refreshToolTip(),this.cellKeyboardListenerFeature?.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(t,n),o&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(a=>a()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(t,n){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!t)return;let i=t.parentElement,r=ju(this.beans.gos,this.rowNode).height,o=l=>{if(this.editing||!this.isAlive()||!n.isAlive())return;let{paddingTop:c,paddingBottom:u,borderBottomWidth:d,borderTopWidth:h}=nf(i),p=c+u+d+h,m=t.offsetHeight+p;if(l<5){let C=Yn(this.beans.gos),S=!C||!C.contains(t),_=m==0;if(S||_){window.setTimeout(()=>o(l+1),0);return}}let v=Math.max(m,r);this.rowNode.setRowAutoHeight(v,this.column)},s=()=>o(0);s();let a=this.beans.resizeObserverService.observeResize(t,s);n.addDestroyFunc(()=>{a(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){let t=this.column.getColDef();return t.cellRenderer!=null||t.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}showValue(t=!1){let{beans:n,column:i,rowNode:r,cellRangeFeature:o,cellComp:s}=this,{userComponentFactory:a,animationFrameService:l}=n,c=this.getValueToDisplay(),u;if(r.stub&&r.groupData?.[this.column.getId()]==null){let h=this.createCellRendererParams();u=a.getLoadingCellRendererDetails(i.getColDef(),h)}else if(this.isCellRenderer()){let h=this.createCellRendererParams();u=a.getCellRendererDetails(i.getColDef(),h)}s.setRenderDetails(u,c,t),l.requestAnimationFrame(()=>o?.refreshHandle())}setupControlComps(){let t=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(t)),this.includeRowDrag=this.isIncludeControl(t.rowDrag),this.includeDndSource=this.isIncludeControl(t.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(t){return this.rowNode.rowPinned!=null?!1:typeof t=="function"||t===!0}isCheckboxSelection(t){let{rowSelection:n}=this.beans.gridOptions;return t.checkboxSelection||wC(this.column)&&n&&typeof n!="string"&&cm(n)}refreshShouldDestroy(){let t=this.column.getColDef(),n=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(t)),i=this.includeRowDrag!=this.isIncludeControl(t.rowDrag),r=this.includeDndSource!=this.isIncludeControl(t.dndSource),o=this.isAutoHeight!=this.column.isAutoHeight();return n||i||r||o}startEditing(t=null,n=!1,i=null){let{editService:r}=this.beans;return!this.isCellEditable()||this.editing||!r?!0:this.cellComp?r.startEditing(this,t,n,i):(this.onCellCompAttachedFuncs.push(()=>{this.startEditing(t,n,i)}),!0)}setEditing(t,n){this.editCompDetails=n,this.editing!==t&&(this.editing=t)}stopRowOrCellEdit(t=!1){this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.stopEditing(t):this.stopEditing(t)}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(t=!1){this.onCellEditorAttachedFuncs=[];let{editService:n}=this.beans;return!this.editing||!n?!1:n.stopEditing(this,t)}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.beans.valueService.getValueForDisplay(this.column,this.rowNode),setValue:n=>this.beans.valueService.setValue(this.rowNode,this.column,n),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(n,i,r,o)=>this.registerRowDragger(n,i,o),setTooltip:(n,i)=>{this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(n,i),this.tooltipFeature?.refreshToolTip()}})}setFocusOutOnEditor(){this.editing&&this.beans.editService?.setFocusOutOnEditor(this)}setFocusInOnEditor(){this.editing&&this.beans.editService?.setFocusInOnEditor(this)}onCellChanged(t){t.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(t){this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(t)}refreshCell(t){if(this.suppressRefreshCell||this.editing)return;let n=this.column.getColDef(),i=t!=null&&!!t.newData,r=t!=null&&!!t.suppressFlash||!!n.suppressCellFlash,o=n.field==null&&n.valueGetter==null&&n.showRowGroup==null,s=t&&t.forceRefresh||o||i,a=!!this.cellComp,l=this.updateAndFormatValue(a),c=s||l;if(a){if(c){this.showValue(i);let u=this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering();!r&&!u&&(this.beans.gos.get("enableCellChangeFlash")||n.enableCellChangeFlash)&&this.flashCell(),this.cellCustomStyleFeature?.applyUserStyles(),this.cellCustomStyleFeature?.applyClassesFromColDef()}this.tooltipFeature?.refreshToolTip(),this.cellCustomStyleFeature?.applyCellClassRules()}}stopEditingAndFocus(t=!1,n=!1){this.beans.editService?.stopEditingAndFocus(this,t,n)}flashCell(t){let n=t?.flashDuration??t?.flashDelay,i=t?.fadeDuration??t?.fadeDelay;this.animateCell("data-changed",n,i)}animateCell(t,n,i){if(!this.cellComp)return;let{gos:r}=this.beans;if(n||(n=r.get("cellFlashDuration")),n===0)return;ne(i)||(i=r.get("cellFadeDuration"));let o=`ag-cell-${t}`,s=`ag-cell-${t}-animation`;this.cellComp.addOrRemoveCssClass(o,!0),this.cellComp.addOrRemoveCssClass(s,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(o,!1),this.cellComp.addOrRemoveCssClass(s,!0),this.eGui.style.transition=`background-color ${i}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(s,!1),this.eGui.style.transition="")},i))},n)})}onFlashCells(t){if(!this.cellComp)return;let n=this.beans.cellPositionUtils.createId(this.getCellPosition());t.cells[n]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(t){return this.callValueFormatter(t)??t}callValueFormatter(t){return this.beans.valueService.formatValue(this.column,this.rowNode,t)}updateAndFormatValue(t){let n=this.value,i=this.valueFormatted;return this.value=this.beans.valueService.getValueForDisplay(this.column,this.rowNode),this.valueFormatted=this.callValueFormatter(this.value),t?!this.valuesAreEqual(n,this.value)||this.valueFormatted!=i:!0}valuesAreEqual(t,n){let i=this.column.getColDef();return i.equals?i.equals(t,n):t===n}getComp(){return this.cellComp}getValue(){return this.value}addDomData(t){let n=this.getGui();Jh(this.beans.gos,n,NO.DOM_DATA_KEY_CELL_CTRL,this),t.addDestroyFunc(()=>Jh(this.beans.gos,n,NO.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(t,n){return this.beans.gos.addGridCommonParams({type:n,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:t,rowIndex:this.rowNode.rowIndex})}processCharacter(t){this.cellKeyboardListenerFeature?.processCharacter(t)}onKeyDown(t){this.cellKeyboardListenerFeature?.onKeyDown(t)}onMouseEvent(t,n){this.cellMouseListenerFeature?.onMouseEvent(t,n)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){this.cellComp&&this.cellPositionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){let{cellComp:t,column:n,beans:i}=this;QK(t,n,i.visibleColsService)}refreshAriaColIndex(){let t=this.beans.visibleColsService.getAriaColIndex(this.column);aK(this.getGui(),t)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){return this.cellPositionFeature?.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(t,n=null){return this.cellComp?this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(t,this):this.startEditing(t,!0,n):(this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(t,n)}),!0)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(t=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:t})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}onSuppressCellFocusChanged(t){this.eGui&&As(this.eGui,"tabindex",t?void 0:-1)}onFirstRightPinnedChanged(){if(!this.cellComp)return;let t=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(V1e,t)}onLastLeftPinnedChanged(){if(!this.cellComp)return;let t=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(B1e,t)}onCellFocused(t){if(this.beans.focusService.isCellFocusSuppressed())return;let n=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){n&&t?.forceBrowserFocus&&(this.focusEventToRestore=t);return}if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(L1e,n),n&&t&&t.forceBrowserFocus){let r=this.cellComp.getFocusableElement();if(this.editing){let o=this.beans.focusService.findFocusableElements(r,null,!0);o.length&&(r=o[0])}r.focus({preventScroll:!!t.preventScrollOnBrowserFocus})}let i=this.beans.gos.get("editType")==="fullRow";!n&&!i&&this.editing&&this.stopRowOrCellEdit(),n&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:fc(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(k1e,!0),this.cellComp.addOrRemoveCssClass(G1e,!0);let t=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(O1e,t),this.cellComp.addOrRemoveCssClass(N1e,!t)}onColumnHover(){if(!this.cellComp||!this.beans.gos.get("columnHoverHighlight"))return;let t=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(H1e,t)}onColDefChanged(){if(!this.cellComp)return;this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?this.beans.editService?.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0})}setWrapText(){let t=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(z1e,t)}dispatchCellContextMenuEvent(t){let n=this.column.getColDef(),i=this.createEvent(t,"cellContextMenu");this.beans.eventService.dispatchEvent(i),n.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{n.onCellContextMenu(i)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){let t=new C1e;return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t}createDndSource(){let t=new w1e(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(t),t}registerRowDragger(t,n,i){if(this.customRowDragComp){this.customRowDragComp.setDragElement(t,n);return}let r=this.createRowDragComp(t,n,i);r&&(this.customRowDragComp=r,this.addDestroyFunc(()=>{this.beans.context.destroyBean(r),this.customRowDragComp=null}))}createRowDragComp(t,n,i){let r=this.beans.gos.get("pagination"),o=this.beans.gos.get("rowDragManaged"),s=kn(this.beans.gos);if(o){if(!s){X("managed row dragging is only allowed in the Client Side Row Model");return}if(r){X("managed row dragging is not possible when doing pagination");return}}let a=new AO(()=>this.value,this.rowNode,this.column,t,n,i);return this.beans.context.createBean(a),a}setSuppressRefreshCell(t){this.suppressRefreshCell=t}getEditCompDetails(){return this.editCompDetails}onCellEditorAttached(t){this.onCellEditorAttachedFuncs.push(t)}cellEditorAttached(){this.onCellEditorAttachedFuncs.forEach(t=>t()),this.onCellEditorAttachedFuncs=[]}};oY.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var $h=oY,j1e=0,sY=class LO extends j{constructor(t,n,i,r,o){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=n,this.gos=n.gos,this.rowNode=t,this.paginationPage=n.paginationService?.getCurrentPage()??0,this.useAnimationFrameForCreate=r,this.printLayout=o,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=t.id+"-"+j1e++,this.rowId=dl(t.id),this.initRowBusinessKey(),this.rowFocused=n.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=n.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(i),this.rowStyles=this.processStylesFromGridOptions(),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;let t=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=dl(t)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}isSticky(){return this.rowNode.sticky}updateGui(t,n){t==="left"?this.leftGui=n:t==="right"?this.rightGui=n:t==="fullWidth"?this.fullWidthGui=n:this.centerGui=n}setComp(t,n,i,r){r=bC(this,this.beans.context,r);let o={rowComp:t,element:n,containerType:i,compBean:r};this.allRowGuis.push(o),this.updateGui(i,o),this.initialiseRowComp(o),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(t){this.allRowGuis=this.allRowGuis.filter(n=>n.containerType!==t),this.updateGui(t,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(t){let n=t?"none":"";this.allRowGuis.forEach(i=>i.element.style.display=n)}initialiseRowComp(t){let n=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(t),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),jx(n)&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);let i=t.rowComp;this.getInitialRowClasses(t.containerType).forEach(o=>i.addOrRemoveCssClass(o,!0)),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&Qx(t.element,this.rowNode.expanded==!0),this.setRowCompRowId(i),this.setRowCompRowBusinessKey(i),Jh(n,t.element,LO.DOM_DATA_KEY_ROW_CTRL,this),t.compBean.addDestroyFunc(()=>Jh(n,t.element,LO.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,t),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(t),this.isFullWidth()&&this.setupFullWidth(t),n.get("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&t.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(t){this.businessKeySanitised!=null&&t.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(t){this.rowId=dl(this.rowNode.id),this.rowId!=null&&t.setRowId(this.rowId)}executeSlideAndFadeAnimations(t){let{containerType:n}=t;this.slideInAnimation[n]&&(rq(()=>{this.onTopChanged()}),this.slideInAnimation[n]=!1),this.fadeInAnimation[n]&&(rq(()=>{t.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[n]=!1)}addRowDraggerToRow(t){if(hl(this.gos)){X("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `cellSelection: true`");return}let n=this.beans.localeService.getLocaleTextFunc(),i=new AO(()=>`1 ${n("rowDragRow","row")}`,this.rowNode,void 0,t.element,void 0,!0),r=this.createBean(i,this.beans.context);this.rowDragComps.push(r),t.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(o=>o!==r),this.destroyBean(r,this.beans.context)})}setupFullWidth(t){let n=this.getPinnedForContainer(t.containerType);if(this.rowType=="FullWidthDetail"&&!this.gos.assertModuleRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)"))return;let i=this.createFullWidthCompDetails(t.element,n);t.rowComp.showFullWidth(i)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(t=>t?.rowComp?.getFullWidthCellRenderer()):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}getCellElement(t){let n=this.getCellCtrl(t);return n?n.getGui():null}executeProcessRowPostCreateFunc(){let t=this.gos.getCallback("processRowPostCreate");if(!t||!this.areAllContainersReady())return;let n={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};t(n)}areAllContainersReady(){let t=!!this.leftGui||!this.beans.visibleColsService.isPinningLeft(),n=!!this.centerGui,i=!!this.rightGui||!this.beans.visibleColsService.isPinningRight();return t&&n&&i}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;let t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this.rowNode}):!1}setRowType(){let t=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),n=this.isNodeFullWidthCell(),i=this.gos.get("masterDetail")&&this.rowNode.detail,r=this.beans.columnModel.isPivotMode(),s=!!this.rowNode.group&&!this.rowNode.footer&&oD(this.gos,r);t?this.rowType="FullWidthLoading":i?this.rowType="FullWidthDetail":n?this.rowType="FullWidth":s?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(t=!1,n=!1){if(this.isFullWidth())return;if(t||this.gos.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(n);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(t,n,i=null){let r={list:[],map:{}},o=(a,l,c)=>{c!=null?r.list.splice(c,0,l):r.list.push(l),r.map[a]=l},s=[];for(let a of n){let l=a.getInstanceId(),c=t.map[l];c||(c=new $h(a,this.rowNode,this.beans,this)),o(l,c)}for(let a of t.list){let l=a.getColumn().getInstanceId();if(r.map[l]!=null)continue;!this.isCellEligibleToBeRemoved(a,i)?s.push([l,a]):a.destroy()}if(s.length)for(let[a,l]of s){let c=r.list.findIndex(d=>d.getColumn().getLeft()>l.getColumn().getLeft()),u=c===-1?void 0:Math.max(c-1,0);o(a,l,u)}return r}updateColumnListsImpl(t){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(t)}setCellCtrls(t){this.allRowGuis.forEach(n=>{let i=this.getCellCtrlsForContainer(n.containerType);n.rowComp.setCellCtrls(i,t)})}getCellCtrlsForContainer(t){switch(t){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){let t=this.beans.columnViewportService,n=this.beans.visibleColsService;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,n.getAllCols()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{let i=t.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);let r=n.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,r,"left");let o=n.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,o,"right")}}isCellEligibleToBeRemoved(t,n){if(t.getColumn().getPinned()!=n)return!0;let s=t.isEditing(),a=this.beans.focusService.isCellFocused(t.getCellPosition());if(s||a){let c=t.getColumn();return!(this.beans.visibleColsService.getAllCols().indexOf(c)>=0)}return!0}getDomOrder(){return this.gos.get("ensureDomOrder")||lr(this.gos,"print")}listenOnDomOrder(t){let n=()=>{t.rowComp.setDomOrder(this.getDomOrder())};t.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],n)}setAnimateFlags(t){if(this.isSticky()||!t)return;let n=ne(this.rowNode.oldRowTop),i=this.beans.visibleColsService.isPinningLeft(),r=this.beans.visibleColsService.isPinningRight();if(n){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=i,this.slideInAnimation.right=r}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=i,this.fadeInAnimation.right=r}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){let t=(a,l)=>a?a.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(a.element,l).params):!0,n=t(this.fullWidthGui,null),i=t(this.centerGui,null),r=t(this.leftGui,"left"),o=t(this.rightGui,"right");return n&&i&&r&&o}addListeners(){this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),expandedChanged:this.updateExpandedCss.bind(this),hasChildrenChanged:this.updateExpandedCss.bind(this)}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventService,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(n=>{this.addRowDraggerToRow(n)});return}this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach(t=>t.onRowIndexChanged())},cellChanged:t=>{this.getAllCellCtrls().forEach(n=>n.onCellChanged(t))}})}onRowNodeDataChanged(t){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(i=>i.refreshCell({suppressFlash:!t.update,newData:!t.update})),this.allRowGuis.forEach(i=>{this.setRowCompRowId(i.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(i.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){let t=this.rowNode.highlighted;this.allRowGuis.forEach(n=>{let i=t===0,r=t===1;n.rowComp.addOrRemoveCssClass("ag-row-highlight-above",i),n.rowComp.addOrRemoveCssClass("ag-row-highlight-below",r)})}postProcessRowDragging(){let t=this.rowNode.dragging;this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-row-dragging",t))}updateExpandedCss(){let t=this.rowNode.isExpandable(),n=this.rowNode.expanded==!0;this.allRowGuis.forEach(i=>{i.rowComp.addOrRemoveCssClass("ag-row-group",t),i.rowComp.addOrRemoveCssClass("ag-row-group-expanded",t&&n),i.rowComp.addOrRemoveCssClass("ag-row-group-contracted",t&&!n),Qx(i.element,t&&n)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:fc(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}findFullWidthRowGui(t){return this.allRowGuis.find(n=>n.element.contains(t))}onKeyboardNavigate(t){let n=this.findFullWidthRowGui(t.target);if(!((n?n.element:null)===t.target))return;let o=this.rowNode,s=this.beans.focusService.getFocusedCell(),a={rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:s?.column??this.getColumnForFullWidth(n)};this.beans.navigationService.navigateToNextCell(t,t.key,a,!0),t.preventDefault()}onTabKeyDown(t){if(t.defaultPrevented||pc(t))return;let n=this.allRowGuis.find(l=>l.element.contains(t.target)),i=n?n.element:null,r=i===t.target,o=Dn(this.gos),s=!1;i&&o&&(s=i.contains(o)&&o.classList.contains("ag-cell"));let a=null;!r&&!s&&(a=this.beans.focusService.findNextFocusableElement(i,!1,t.shiftKey)),(this.isFullWidth()&&r||!a)&&this.beans.navigationService.onTabKeyDown(this,t)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){let t=this.allRowGuis.find(n=>Ca(n.element))?.element;return t?t.getBoundingClientRect().top:0}onSuppressCellFocusChanged(t){let n=this.isFullWidth()&&t?void 0:-1;this.allRowGuis.forEach(i=>{As(i.element,"tabindex",n)})}onFullWidthRowFocused(t){let n=this.rowNode,i=t?this.isFullWidth()&&t.rowIndex===n.rowIndex&&t.rowPinned==n.rowPinned:!1,r=this.fullWidthGui?this.fullWidthGui.element:this.centerGui?.element;r&&(r.classList.toggle("ag-full-width-focus",i),i&&t?.forceBrowserFocus&&r.focus({preventScroll:!0}))}recreateCell(t){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,t),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,t),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,t),t.destroy(),this.updateColumnLists()}removeCellCtrl(t,n){let i={list:[],map:{}};return t.list.forEach(r=>{r!==n&&(i.list.push(r),i.map[r.getColumn().getInstanceId()]=r)}),i}onMouseEvent(t,n){switch(t){case"dblclick":this.onRowDblClick(n);break;case"click":this.onRowClick(n);break;case"touchstart":case"mousedown":this.onRowMouseDown(n);break}}createRowEvent(t,n){return this.gos.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:n})}createRowEventWithSource(t,n){let i=this.createRowEvent(t,n);return i.source=this,i}onRowDblClick(t){pc(t)||this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",t))}getColumnForFullWidth(t){let{visibleColsService:n}=this.beans;switch(t?.containerType){case"center":return n.getCenterCols()[0];case"left":return n.getLeftCols()[0];case"right":return n.getRightCols()[0];default:return n.getAllCols()[0]}}onRowMouseDown(t){if(this.lastMouseDownOnDragger=am(t.target,"ag-row-drag",3),!this.isFullWidth())return;let n=this.rowNode;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges();let i=this.findFullWidthRowGui(t.target),r=i?.element,o=t.target,s=!0;r&&r.contains(o)&&XO(o)&&(s=!1),this.beans.focusService.setFocusedCell({rowIndex:n.rowIndex,column:this.getColumnForFullWidth(i),rowPinned:n.rowPinned,forceBrowserFocus:s})}onRowClick(t){if(pc(t)||this.lastMouseDownOnDragger)return;let{gos:i}=this;this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowClicked",t));let r=t.ctrlKey||t.metaKey,o=t.shiftKey,s=this.rowNode.isSelected(),a=ef(i),l=aq(i),c=DCe(i);if(a&&this.rowNode.group||this.isRowSelectionBlocked()||!c&&!s||!l&&s)return;let u=TCe(i),d="rowClicked";if(s)u?this.rowNode.setSelectedParams({newValue:!1,event:t,source:d}):r?l&&this.rowNode.setSelectedParams({newValue:!1,event:t,source:d}):c&&this.rowNode.setSelectedParams({newValue:!0,clearSelection:!o,rangeSelect:o,event:t,source:d});else{let h=u?!1:!r;this.rowNode.setSelectedParams({newValue:!0,clearSelection:h,rangeSelect:o,event:t,source:d})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!jx(this.gos)}setupDetailRowAutoHeight(t){if(this.rowType!=="FullWidthDetail"||!this.gos.get("detailRowAutoHeight"))return;let n=()=>{let r=t.clientHeight;if(r!=null&&r>0){let o=()=>{this.rowNode.setRowHeight(r),(kn(this.gos)||vc(this.gos))&&this.beans.rowModel.onRowHeightChanged()};window.setTimeout(o,0)}},i=this.beans.resizeObserverService.observeResize(t,n);this.addDestroyFunc(i),n()}createFullWidthCompDetails(t,n){let{gos:i,rowNode:r}=this,o=i.addGridCommonParams({fullWidth:!0,data:r.data,node:r,value:r.key,valueFormatted:r.key,eGridCell:t,eParentOfValue:t,pinned:n,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(a,l,c,u)=>this.addFullWidthRowDragging(a,l,c,u),setTooltip:(a,l)=>this.refreshRowTooltip(a,l)}),s=this.beans.userComponentFactory;switch(this.rowType){case"FullWidthDetail":return s.getFullWidthDetailCellRendererDetails(o);case"FullWidthGroup":return s.getFullWidthGroupCellRendererDetails(o);case"FullWidthLoading":return s.getFullWidthLoadingCellRendererDetails(o);default:return s.getFullWidthCellRendererDetails(o)}}refreshRowTooltip(t,n){if(!this.fullWidthGui)return;let i={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>t,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:n};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new gm(i,this.beans))}addFullWidthRowDragging(t,n,i="",r){if(!this.isFullWidth())return;let o=new AO(()=>i,this.rowNode,void 0,t,n,r);this.createBean(o,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(o,this.beans.context)})}onUiLevelChanged(){let t=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=t){let n="ag-row-level-"+t,i="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(r=>{r.rowComp.addOrRemoveCssClass(n,!0),r.rowComp.addOrRemoveCssClass(i,!1)})}this.rowLevel=t}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getLastRow()}refreshFirstAndLastRowStyles(){let t=this.isFirstRowOnPage(),n=this.isLastRowOnPage();this.firstRowOnPage!==t&&(this.firstRowOnPage=t,this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-first",t))),this.lastRowOnPage!==n&&(this.lastRowOnPage=n,this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-last",n)))}stopEditing(t=!1){this.stoppingRowEdit||this.beans.rowEditService?.stopEditing(this,t)}setInlineEditingCss(){let t=this.editingRow||this.getAllCellCtrls().some(n=>n.isEditing());this.allRowGuis.forEach(n=>{n.rowComp.addOrRemoveCssClass("ag-row-inline-editing",t),n.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!t)})}setEditingRow(t){this.editingRow=t}startRowEditing(t=null,n=null,i=null){return this.editingRow?!0:this.beans.rowEditService?.startEditing(this,t,n,i)??!0}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){let t=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!t||!t.length||t.forEach(n=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(n,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,t=>{this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass(t,!0))},t=>{this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass(t,!1))})}setStylesFromGridOptions(t,n){t&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(n,i=>i.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(t){return t==="left"||t==="right"?t:null}getInitialRowClasses(t){let n=this.getPinnedForContainer(t),i={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[t],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:n};return this.beans.rowCssClassCalculator.getInitialRowClasses(i)}processStylesFromGridOptions(){let t=this.gos.get("rowStyle");if(t&&typeof t=="function"){X("rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}let n=this.gos.getCallback("getRowStyle"),i;if(n){let r={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};i=n(r)}return i||t?Object.assign({},t,i):this.emptyStyle}onRowSelected(t){let n=!!this.rowNode.isSelected();this.forEachGui(t,i=>{i.rowComp.addOrRemoveCssClass("ag-row-selected",n),Xx(i.element,n),i.element.contains(Dn(this.gos))&&(i===this.centerGui||i===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;let t=this.rowNode.isSelected();if(t&&!aq(this.gos))return;let i=this.beans.localeService.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(i,"rowSelection")}addHoverFunctionality(t){if(!this.active)return;let{element:n,compBean:i}=t,{rowNode:r,beans:o,gos:s}=this;i.addManagedListeners(n,{mouseenter:()=>r.onMouseEnter(),mouseleave:()=>r.onMouseLeave()}),i.addManagedListeners(r,{mouseEnter:()=>{!o.dragService.isDragging()&&!s.get("suppressRowHoverHighlight")&&(n.classList.add("ag-row-hover"),r.setHovered(!0))},mouseLeave:()=>{n.classList.remove("ag-row-hover"),r.setHovered(!1)}})}roundRowTopToBounds(t){let n=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),i=this.applyPaginationOffset(n.top,!0)-100,r=this.applyPaginationOffset(n.bottom,!0)+100;return Math.min(Math.max(i,t),r)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(t,n){t?n(t):this.allRowGuis.forEach(n)}onRowHeightChanged(t){if(this.rowNode.rowHeight==null)return;let n=this.rowNode.rowHeight,i=this.beans.environment.getDefaultRowHeight(),o=Nq(this.gos)?ju(this.gos,this.rowNode).height:void 0,s=o?`${Math.min(i,o)-2}px`:void 0;this.forEachGui(t,a=>{a.element.style.height=`${n}px`,s&&a.element.style.setProperty("--ag-line-height",s)})}addEventListener(t,n){super.addEventListener(t,n)}removeEventListener(t,n){super.removeEventListener(t,n)}destroyFirstPass(t=!1){if(this.active=!1,!t&&sm(this.gos)&&!this.isSticky())if(this.rowNode.rowTop!=null){let r=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(r)}else this.allRowGuis.forEach(r=>r.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);let n=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(n),this.beans.eventService.dispatchEvent(n),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();let t=n=>(n.list.forEach(i=>i.destroy()),{list:[],map:{}});this.centerCellCtrls=t(this.centerCellCtrls),this.leftCellCtrls=t(this.leftCellCtrls),this.rightCellCtrls=t(this.rightCellCtrls)}setFocusedClasses(t){this.forEachGui(t,n=>{n.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),n.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){let t=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses()),!t&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){let t=this.beans.paginationService?.getCurrentPage()??0;this.paginationPage!==t&&(this.paginationPage=t,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(t,n=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return t;let i=this.beans.pageBoundsService.getPixelOffset();return t+i*(n?1:-1)}setRowTop(t){if(!this.printLayout&&ne(t)){let n=this.applyPaginationOffset(t),o=`${this.rowNode.isRowPinned()||this.rowNode.sticky?n:this.beans.rowContainerHeightService.getRealPixelPosition(n)}px`;this.setRowTopStyle(o)}}getInitialRowTop(t){return this.suppressRowTransform?this.getInitialRowTopShared(t):void 0}getInitialTransform(t){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(t)})`}getInitialRowTopShared(t){if(this.printLayout)return"";let n=this.rowNode,i;if(this.isSticky())i=n.stickyRowTop;else{let r=this.slideInAnimation[t]?this.roundRowTopToBounds(n.oldRowTop):n.rowTop,o=this.applyPaginationOffset(r);i=n.isRowPinned()?o:this.beans.rowContainerHeightService.getRealPixelPosition(o)}return i+"px"}setRowTopStyle(t){this.allRowGuis.forEach(n=>this.suppressRowTransform?n.rowComp.setTop(t):n.rowComp.setTransform(`translateY(${t})`))}getRowNode(){return this.rowNode}getCellCtrl(t){let n=null;return this.getAllCellCtrls().forEach(i=>{i.getColumn()==t&&(n=i)}),n!=null||this.getAllCellCtrls().forEach(i=>{i.getColSpanningList().indexOf(t)>=0&&(n=i)}),n}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(t){let n=this.rowNode.getRowIndexString();if(n===null)return;let i=this.beans.headerNavigationService.getHeaderRowCount()+(this.beans.filterManager?.getHeaderRowCount()??0),r=this.rowNode.rowIndex%2===0,o=i+this.rowNode.rowIndex+1;this.forEachGui(t,s=>{s.rowComp.setRowIndex(n),s.rowComp.addOrRemoveCssClass("ag-row-even",r),s.rowComp.addOrRemoveCssClass("ag-row-odd",!r),sK(s.element,o)})}setStoppingRowEdit(t){this.stoppingRowEdit=t}};sY.DOM_DATA_KEY_ROW_CTRL="renderedRow";var Zh=sY,W1e=class extends j{wireBeans(e){this.mouseEventService=e.mouseEventService,this.valueService=e.valueService,this.menuService=e.menuService,this.ctrlsService=e.ctrlsService,this.navigationService=e.navigationService,this.focusService=e.focusService,this.undoRedoService=e.undoRedoService,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.rangeService=e.rangeService,this.clipboardService=e.clipboardService}constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){let e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",qq("touchstart")?"touchstart":"mousedown"].forEach(n=>{let i=this.processMouseEvent.bind(this,n);this.addManagedElementListeners(this.element,{[n]:i})})}processMouseEvent(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)||pc(t))return;let n=this.getRowForEvent(t),i=this.mouseEventService.getRenderedCellForEvent(t);e==="contextmenu"?this.handleContextMenuMouseEvent(t,void 0,n,i):(i&&i.onMouseEvent(e,t),n&&n.onMouseEvent(e,t))}mockContextMenuForIPad(){if(!Ku())return;let e=new Uu(this.element),t=n=>{let i=this.getRowForEvent(n.touchEvent),r=this.mouseEventService.getRenderedCellForEvent(n.touchEvent);this.handleContextMenuMouseEvent(void 0,n.touchEvent,i,r)};this.addManagedListeners(e,{longTap:t}),this.addDestroyFunc(()=>e.destroy())}getRowForEvent(e){let t=e.target;for(;t;){let n=fC(this.gos,t,Zh.DOM_DATA_KEY_ROW_CTRL);if(n)return n;t=t.parentElement}return null}handleContextMenuMouseEvent(e,t,n,i){let r=n?n.getRowNode():null,o=i?i.getColumn():null,s=null;if(o){let c=e||t;i.dispatchCellContextMenuEvent(c??null),s=this.valueService.getValue(o,r)}let a=this.ctrlsService.getGridBodyCtrl(),l=i?i.getGui():a.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:r,column:o,value:s,anchorToElement:l})}getControlsForEventTarget(e){return{cellCtrl:SO(this.gos,e,$h.DOM_DATA_KEY_CELL_CTRL),rowCtrl:SO(this.gos,e,Zh.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){let{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(n?this.processCellKeyboardEvent(n,e,t):i&&i.isFullWidth()&&this.processFullWidthRowKeyboardEvent(i,e,t))}processCellKeyboardEvent(e,t,n){let i=e.getRowNode(),r=e.getColumn(),o=e.isEditing();!MO(this.gos,n,i,r,o)&&t==="keydown"&&(!o&&this.navigationService.handlePageScrollingKey(n)||e.onKeyDown(n),this.doGridOperations(n,e.isEditing()),VK(n)&&e.processCharacter(n)),t==="keydown"&&this.eventService.dispatchEvent(e.createEvent(n,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,n){let i=e.getRowNode(),r=this.focusService.getFocusedCell(),o=r&&r.column;if(!MO(this.gos,n,i,o,!1)){let a=n.key;if(t==="keydown")switch(a){case G.PAGE_HOME:case G.PAGE_END:case G.PAGE_UP:case G.PAGE_DOWN:this.navigationService.handlePageScrollingKey(n,!0);break;case G.UP:case G.DOWN:e.onKeyboardNavigate(n);break;case G.TAB:e.onTabKeyDown(n);break;default:}}t==="keydown"&&this.eventService.dispatchEvent(e.createRowEvent("cellKeyDown",n))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!this.mouseEventService.isEventFromThisGrid(e))return;let n=Wbe(e);if(n===G.A)return this.onCtrlAndA(e);if(n===G.C)return this.onCtrlAndC(e);if(n===G.D)return this.onCtrlAndD(e);if(n===G.V)return this.onCtrlAndV(e);if(n===G.X)return this.onCtrlAndX(e);if(n===G.Y)return this.onCtrlAndY();if(n===G.Z)return this.onCtrlAndZ(e)}onCtrlAndA(e){let{pinnedRowModel:t,rowModel:n,rangeService:i}=this;if(i&&n.isRowsToRender()){let[r,o]=[t.isEmpty("top"),t.isEmpty("bottom")],s=r?null:"top",a,l;o?(a=null,l=n.getRowCount()-1):(a="bottom",l=t.getPinnedBottomRowCount()-1);let c=this.visibleColsService.getAllCols();if(Jo(c))return;i.setCellRange({rowStartIndex:0,rowStartPinned:s,rowEndIndex:l,rowEndPinned:a,columnStart:c[0],columnEnd:Rt(c)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;let{cellCtrl:t,rowCtrl:n}=this.getControlsForEventTarget(e.target);t?.isEditing()||n?.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;let{cellCtrl:t,rowCtrl:n}=this.getControlsForEventTarget(e.target);t?.isEditing()||n?.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){let{cellCtrl:t,rowCtrl:n}=this.getControlsForEventTarget(e.target);t?.isEditing()||n?.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){!this.gos.get("undoRedoCellEditing")||!this.undoRedoService||(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService?.redo("ui")}},q1e=class extends j{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({leftPinnedWidthChanged:this.onPinnedLeftWidthChanged.bind(this)})}onPinnedLeftWidthChanged(){let e=this.pinnedWidthService.getPinnedLeftWidth(),t=e>0;xn(this.element,t),ya(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}},K1e=class extends j{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({rightPinnedWidthChanged:this.onPinnedRightWidthChanged.bind(this)})}onPinnedRightWidthChanged(){let e=this.pinnedWidthService.getPinnedRightWidth(),t=e>0;xn(this.element,t),ya(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}},Ox=e=>e.getTopRowCtrls(),Nx=e=>e.getStickyTopRowCtrls(),Lx=e=>e.getStickyBottomRowCtrls(),Vx=e=>e.getBottomRowCtrls(),Bx=e=>e.getCentreRowCtrls(),Y1e={center:{type:"center",container:"ag-center-cols-container",viewport:"ag-center-cols-viewport",getRowCtrls:Bx},left:{type:"left",container:"ag-pinned-left-cols-container",pinnedType:"left",getRowCtrls:Bx},right:{type:"right",container:"ag-pinned-right-cols-container",pinnedType:"right",getRowCtrls:Bx},fullWidth:{type:"fullWidth",container:"ag-full-width-container",fullWidth:!0,getRowCtrls:Bx},topCenter:{type:"center",container:"ag-floating-top-container",viewport:"ag-floating-top-viewport",getRowCtrls:Ox},topLeft:{type:"left",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:Ox},topRight:{type:"right",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:Ox},topFullWidth:{type:"fullWidth",container:"ag-floating-top-full-width-container",fullWidth:!0,getRowCtrls:Ox},stickyTopCenter:{type:"center",container:"ag-sticky-top-container",viewport:"ag-sticky-top-viewport",getRowCtrls:Nx},stickyTopLeft:{type:"left",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:Nx},stickyTopRight:{type:"right",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:Nx},stickyTopFullWidth:{type:"fullWidth",container:"ag-sticky-top-full-width-container",fullWidth:!0,getRowCtrls:Nx},stickyBottomCenter:{type:"center",container:"ag-sticky-bottom-container",viewport:"ag-sticky-bottom-viewport",getRowCtrls:Lx},stickyBottomLeft:{type:"left",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:Lx},stickyBottomRight:{type:"right",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:Lx},stickyBottomFullWidth:{type:"fullWidth",container:"ag-sticky-bottom-full-width-container",fullWidth:!0,getRowCtrls:Lx},bottomCenter:{type:"center",container:"ag-floating-bottom-container",viewport:"ag-floating-bottom-viewport",getRowCtrls:Vx},bottomLeft:{type:"left",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:Vx},bottomRight:{type:"right",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:Vx},bottomFullWidth:{type:"fullWidth",container:"ag-floating-bottom-full-width-container",fullWidth:!0,getRowCtrls:Vx}};function om(e){return Y1e[e]}var Q1e=["topCenter","topLeft","topRight"],X1e=["bottomCenter","bottomLeft","bottomRight"],$1e=["center","left","right"],Z1e=["center","left","right","fullWidth"],J1e=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],e_e=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],t_e=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],aY=["stickyTopCenter","stickyTopLeft","stickyTopRight"],lY=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],n_e=[...aY,"stickyTopFullWidth",...lY,"stickyBottomFullWidth"],i_e=[...Q1e,...X1e,...$1e,...aY,...lY],r_e=class extends j{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.options=om(e)}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService,this.columnViewportService=e.columnViewportService,this.resizeObserverService=e.resizeObserverService,this.rowRenderer=e.rowRenderer}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new v1e(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.ctrlsService.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,t,n){this.comp=e,this.eContainer=t,this.eViewport=n,this.createManagedBean(new W1e(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();let i=()=>this.onPinnedWidthChanged();this.forContainers(e_e,()=>{this.pinnedWidthFeature=this.createManagedBean(new q1e(this.eContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:i})}),this.forContainers(t_e,()=>{this.pinnedWidthFeature=this.createManagedBean(new K1e(this.eContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:i})}),this.forContainers(Z1e,()=>this.createManagedBean(new rY(this.eContainer,this.name==="center"?n:void 0))),this.forContainers(i_e,()=>this.createManagedBean(new y1e(this.eContainer))),this.forContainers(J1e,()=>this.createManagedBean(new fN(r=>this.comp.setContainerWidth(`${r}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}addListeners(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(n_e.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}let t=()=>{let n=this.gos.get("ensureDomOrder"),i=lr(this.gos,"print");this.comp.setDomOrder(n||i)};this.addManagedPropertyListener("domLayout",t),t()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){let e=t=>{this.dragService.isDragging()&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(e=!1){let t=this.getCenterWidth(),n=this.getCenterViewportScrollLeft();this.columnViewportService.setScrollPosition(t,n,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return SC(this.eViewport)}getCenterViewportScrollLeft(){return Jx(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){let t=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return gK(this.eViewport)}getViewportScrollLeft(){return Jx(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||Twe(this.eViewport)}getViewportElement(){return this.eViewport}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){eD(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){let e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){let t=this.options.getRowCtrls(this.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}let n=lr(this.gos,"print"),r=this.gos.get("embedFullWidthRows")||n,o=t.filter(s=>{let a=s.isFullWidth();return this.options.fullWidth?!r&&a:r||!a});this.comp.setRowCtrls({rowCtrls:o,useFlushSync:e})}},cY="ag-force-vertical-scroll",o_e="ag-selectable",s_e="ag-column-moving",a_e=class extends j{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.menuService=e.menuService,this.headerNavigationService=e.headerNavigationService,this.dragAndDropService=e.dragAndDropService,this.pinnedRowModel=e.pinnedRowModel,this.rowRenderer=e.rowRenderer,this.popupService=e.popupService,this.mouseEventService=e.mouseEventService,this.rowModel=e.rowModel,this.filterManager=e.filterManager,this.environment=e.environment}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,t,n,i,r,o,s){this.comp=e,this.eGridBody=t,this.eBodyViewport=n,this.eTop=i,this.eBottom=r,this.eStickyTop=o,this.eStickyBottom=s,this.eCenterColsViewport=n.querySelector(`.${om("center").viewport}`),this.eFullWidthContainer=n.querySelector(`.${om("fullWidth").container}`),this.eStickyTopFullWidthContainer=o.querySelector(`.${om("stickyTopFullWidth").container}`),this.eStickyBottomFullWidthContainer=s.querySelector(`.${om("stickyBottomFullWidth").container}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",a=>this.setCellTextSelection(a.currentValue)),this.createManagedBean(new gN(this.comp)),this.bodyScrollFeature=this.createManagedBean(new m1e(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([i,n,r,o,s]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),this.filterManager?.setupAdvancedFilterHeaderComp(i),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){let e=this.setFloatingHeights.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.onScrollGapChanged.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}addFocusListeners(e){e.forEach(t=>{this.addManagedElementListeners(t,{focusin:n=>{let{target:i}=n,r=am(i,"ag-root",t);t.classList.toggle("ag-has-focus",!r)},focusout:n=>{let{target:i,relatedTarget:r}=n,o=t.contains(r),s=am(r,"ag-root",t);am(i,"ag-root",t)||(!o||s)&&t.classList.remove("ag-has-focus")}})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(s_e,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(o_e,e)}onScrollVisibilityChanged(){let e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyWidth(e),this.setStickyBottomOffsetBottom();let t=e&&this.scrollVisibleService.getScrollbarWidth()||0,n=dK()?16:0,i=`calc(100% + ${t+n}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(i)),this.updateScrollingClasses()}onScrollGapChanged(){this.updateScrollingClasses()}updateScrollingClasses(){this.eGridBody.classList.toggle("ag-body-vertical-content-no-gap",!this.scrollVisibleService.hasVerticalScrollGap()),this.eGridBody.classList.toggle("ag-body-horizontal-content-no-gap",!this.scrollVisibleService.hasHorizontalScrollGap())}onGridColumnsChanged(){let e=this.columnModel.getCols();this.comp.setColumnCount(e.length)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;let e=n=>{let i=n.relatedTarget;if(IO(i)===null){this.rowRenderer.stopEditing();return}let r=t.some(o=>o.contains(i))&&this.mouseEventService.isElementInThisGrid(i);if(!r){let o=this.popupService;r=o.getActivePopups().some(s=>s.contains(i))||o.isElementWithinCustomPopup(i)}r||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];t.forEach(n=>this.addManagedElementListeners(n,{focusout:e}))}updateRowCount(){let e=this.headerNavigationService.getHeaderRowCount()+(this.filterManager?.getHeaderRowCount()??0),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,n=t===-1?-1:e+t;this.comp.setRowCount(n)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){let t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){let e=this.gos.get("alwaysShowVerticalScroll"),t=e?cY:null,n=lr(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||n&&Rwe(this.eBodyViewport)}setupRowAnimationCssClass(){let e=this.environment.hasMeasuredSizes(),t=()=>{let n=e&&sm(this.gos)&&!this.rowContainerHeightService.isStretching(),i=n?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(i,n)};t(),this.addManagedEventListeners({heightScaleChanged:t}),this.addManagedPropertyListener("animateRows",t),this.addManagedEventListeners({gridStylesChanged:()=>{!e&&this.environment.hasMeasuredSizes()&&(e=!0,t())}})}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){let e=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:e}),this.mockContextMenuForIPad(e),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){let{deltaX:t,deltaY:n,shiftKey:i}=e;(i||Math.abs(t)>Math.abs(n))&&this.mouseEventService.isEventFromThisGrid(e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){let{deltaX:t,deltaY:n,shiftKey:i}=e,r=i||Math.abs(t)>Math.abs(n),o=e.target;r?(this.eStickyTopFullWidthContainer.contains(o)||this.eStickyBottomFullWidthContainer.contains(o))&&this.scrollGridBodyToMatchEvent(e):(e.preventDefault(),this.scrollVertically(n))}scrollGridBodyToMatchEvent(e){let{deltaX:t,deltaY:n}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||n})}onBodyViewportContextMenu(e,t,n){if(!e&&!n)return;this.gos.get("preventDefaultOnContextMenu")&&(e||n).preventDefault();let{target:i}=e||t;(i===this.eBodyViewport||i===this.ctrlsService.get("center").getViewportElement())&&this.menuService.showContextMenu({mouseEvent:e,touchEvent:n,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(e){if(!Ku())return;let t=new Uu(this.eBodyViewport),n=i=>{e(void 0,i.touchStart,i.touchEvent)};this.addManagedListeners(t,{longTap:n}),this.addDestroyFunc(()=>t.destroy())}onBodyViewportWheel(e){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}getGui(){return this.eGridBody}scrollVertically(e){let t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new Ebe(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(this.rowDragFeature))}getRowDragFeature(){return this.rowDragFeature}setFloatingHeights(){let{pinnedRowModel:e}=this,t=e.getPinnedTopTotalHeight(),n=e.getPinnedBottomTotalHeight();this.comp.setTopHeight(t),this.comp.setBottomHeight(n),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(n?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{let t=this.scrollVisibleService.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){let t=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+(this.filterManager?.getHeaderHeight()??0),n=this.pinnedRowModel.getPinnedTopTotalHeight(),i=0;t>0&&(i+=t),n>0&&(i+=n),i>0&&(i+=1),this.comp.setStickyTopTop(`${i}px`)}setStickyBottomOffsetBottom(){let e=this.pinnedRowModel.getPinnedBottomTotalHeight(),n=this.scrollVisibleService.isHorizontalScrollShowing()&&this.scrollVisibleService.getScrollbarWidth()||0,i=e+n;this.comp.setStickyBottomBottom(`${i}px`)}sizeColumnsToFit(e,t){let i=this.isVerticalScrollShowing()?this.scrollVisibleService.getScrollbarWidth():0,o=SC(this.eGridBody)-i;if(o>0){this.columnSizeService.sizeColumnsToFit(o,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFit(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFit(e,-1)},500):X("tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}},l_e=class extends At{constructor(e,t,n,i,r){super(),this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.column=t.getColumn(),this.rowNode=t.getRowNode(),this.rowCtrl=t.getRowCtrl(),this.eRow=i,this.cellCtrl=t;let o=document.createElement("div");o.setAttribute("comp-id",`${this.getCompId()}`),this.setTemplateFromElement(o);let s=this.getGui();this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1),es(s,t.getCellAriaRole()),s.setAttribute("col-id",t.colIdSanitised);let a={addOrRemoveCssClass:(l,c)=>this.addOrRemoveCssClass(l,c),setUserStyles:l=>yK(s,l),getFocusableElement:()=>this.getFocusableElement(),setIncludeSelection:l=>this.includeSelection=l,setIncludeRowDrag:l=>this.includeRowDrag=l,setIncludeDndSource:l=>this.includeDndSource=l,setRenderDetails:(l,c,u)=>this.setRenderDetails(l,c,u),setEditDetails:(l,c,u)=>this.setEditDetails(l,c,u),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};t.setComp(a,this.getGui(),this.eCellWrapper,n,r,void 0)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(e,t,n){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;let r=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!(n||r)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(t))}setEditDetails(e,t,n){e?this.createCellEditorInstance(e,t,n):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(e){let t=this.includeRowDrag||this.includeDndSource||this.includeSelection,n=t||this.forceWrapper,i=n&&this.eCellWrapper==null;if(i){let c=document.createElement("div");c.setAttribute("role","presentation"),c.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=c,this.getGui().appendChild(this.eCellWrapper)}let r=!n&&this.eCellWrapper!=null;r&&(Is(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!n);let o=!e&&n,s=o&&this.eCellValue==null;if(s){let c=document.createElement("span");c.setAttribute("role","presentation"),c.setAttribute("class","ag-cell-value"),this.eCellValue=c,this.eCellWrapper.appendChild(this.eCellValue)}let a=!o&&this.eCellValue!=null;a&&(Is(this.eCellValue),this.eCellValue=void 0);let l=i||r||s||a;return l&&this.removeControls(),e||t&&this.addControls(),l}addControls(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(e,t,n){let i=this.editorVersion,r=e.newAgStackInstance();if(r==null)return;let{params:o}=e;r.then(a=>this.afterCellEditorCreated(i,a,o,t,n)),St(this.cellEditor)&&o.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){let t=this.getParentOfValue();br(t);let n=e!=null?dl(e,!0):null;n!=null&&(t.textContent=n)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){let{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),Is(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){let{context:e}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),Is(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==e.componentClass)return!1;let t=this.cellRenderer.refresh(e.params);return t===!0||t===void 0}createCellRendererInstance(e){let n=!this.beans.gos.get("suppressAnimationFrame"),i=this.rendererVersion,{componentClass:r}=e,o=()=>{if(this.rendererVersion!==i||!this.isAlive())return;let a=e.newAgStackInstance(),l=this.afterCellRendererCreated.bind(this,i,r);a&&a.then(l)};n&&this.firstRender?this.beans.animationFrameService.createTask(o,this.rowNode.rowIndex,"createTasksP2"):o()}getCtrl(){return this.cellCtrl}getRowCtrl(){return this.rowCtrl}getCellRenderer(){return this.cellRenderer}getCellEditor(){return this.cellEditor}afterCellRendererCreated(e,t,n){if(!this.isAlive()||e!==this.rendererVersion){this.beans.context.destroyBean(n);return}if(this.cellRenderer=n,this.cellRendererClass=t,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){let r=this.getParentOfValue();br(r),r.appendChild(this.cellRendererGui)}}afterCellEditorCreated(e,t,n,i,r){if(e!==this.editorVersion){this.beans.context.destroyBean(t);return}if(t.isCancelBeforeStart&&t.isCancelBeforeStart()){this.beans.context.destroyBean(t),this.cellCtrl.stopEditing(!0);return}if(!t.getGui){X(`cellEditor for column ${this.column.getId()} is missing getGui() method`),this.beans.context.destroyBean(t);return}this.cellEditor=t,this.cellEditorGui=t.getGui();let a=i||t.isPopup!==void 0&&t.isPopup();a?this.addPopupCellEditor(n,r):this.addInCellEditor(),this.refreshEditStyles(!0,a),t.afterGuiAttached&&t.afterGuiAttached(),this.cellCtrl.cellEditorAttached()}refreshEditStyles(e,t){this.addOrRemoveCssClass("ag-cell-inline-editing",e&&!t),this.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!t),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!t),this.rowCtrl?.setInlineEditingCss()}addInCellEditor(){let e=this.getGui();e.contains(Dn(this.beans.gos))&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(e,t){this.beans.gos.get("editType")==="fullRow"&&X("popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");let n=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(this.beans.editService.createPopupEditorWrapper(e));let i=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&i.appendChild(this.cellEditorGui);let r=this.beans.popupService,o=this.beans.gos.get("stopEditingWhenCellsLoseFocus"),s=t??n.getPopupPosition?.()??"over",a=this.beans.gos.get("enableRtl"),l={ePopup:i,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:s,alignSide:a?"right":"left",keepWithinBounds:!0},c=r.positionPopupByComponent.bind(r,l),u=this.beans.localeService.getLocaleTextFunc(),d=r.addPopup({modal:o,eChild:i,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:c,ariaLabel:u("ariaLabelCellEditor","Cell Editor")});d&&(this.hideEditorPopup=d.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){let e=this.getGui();e.contains(Dn(this.beans.gos))&&RO()&&e.focus({preventScroll:!0}),br(this.getParentOfValue())}},c_e=class extends At{constructor(e,t,n){super(),this.cellComps={},this.beans=t,this.rowCtrl=e;let i=document.createElement("div");i.setAttribute("comp-id",`${this.getCompId()}`),this.setInitialStyle(i,n),this.setTemplateFromElement(i);let r=this.getGui(),o=r.style;this.domOrder=this.rowCtrl.getDomOrder(),es(r,"row");let s={setDomOrder:a=>this.domOrder=a,setCellCtrls:a=>this.setCellCtrls(a),showFullWidth:a=>this.showFullWidth(a),getFullWidthCellRenderer:()=>this.fullWidthCellRenderer,addOrRemoveCssClass:(a,l)=>this.addOrRemoveCssClass(a,l),setUserStyles:a=>yK(r,a),setTop:a=>o.top=a,setTransform:a=>o.transform=a,setRowIndex:a=>r.setAttribute("row-index",a),setRowId:a=>r.setAttribute("row-id",a),setRowBusinessKey:a=>r.setAttribute("row-business-key",a),refreshFullWidth:a=>this.fullWidthCellRenderer?.refresh?.(a())??!1};e.setComp(s,this.getGui(),n,void 0),this.addDestroyFunc(()=>{e.unsetComp(n)})}setInitialStyle(e,t){let n=this.rowCtrl.getInitialTransform(t);if(n)e.style.setProperty("transform",n);else{let i=this.rowCtrl.getInitialRowTop(t);i&&e.style.setProperty("top",i)}}showFullWidth(e){let t=i=>{if(this.isAlive()){let r=i.getGui();this.getGui().appendChild(r),this.rowCtrl.setupDetailRowAutoHeight(r),this.setFullWidthRowComp(i)}else this.beans.context.destroyBean(i)},n=e.newAgStackInstance();n?.then(t)}setCellCtrls(e){let t=Object.assign({},this.cellComps);e.forEach(i=>{let r=i.instanceId;this.cellComps[r]==null?this.newCellComp(i):t[r]=null});let n=tf(t).filter(i=>i!=null);this.destroyCells(n),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;let t=[];e.forEach(n=>{let i=this.cellComps[n.instanceId];i&&t.push(i.getGui())}),vK(this.getGui(),t)}newCellComp(e){let t=new l_e(this.beans,e,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[e.instanceId]=t,this.getGui().appendChild(t.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){let e=tf(this.cellComps).filter(t=>t!=null);this.destroyCells(e)}setFullWidthRowComp(e){this.fullWidthCellRenderer&&kt("should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=e,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}destroyCells(e){e.forEach(t=>{if(!t)return;let n=t.getCtrl().instanceId;this.cellComps[n]===t&&(t.detach(),t.destroy(),this.cellComps[n]=null)})}};function u_e(e){let t;return e.type==="center"?t=`<div class="${e.viewport}" data-ref="eViewport" role="presentation">
                <div class="${e.container}" data-ref="eContainer" role="rowgroup"></div>
            </div>`:t=`<div class="${e.container}" data-ref="eContainer" role="rowgroup"></div>`,t}var d_e=class extends At{constructor(){super(),this.eViewport=fe,this.eContainer=fe,this.rowComps={},this.name=At.elementGettingCreated.getAttribute("name"),this.options=om(this.name),this.setTemplate(u_e(this.options))}wireBeans(e){this.beans=e}postConstruct(){let e={setHorizontalScroll:n=>this.eViewport.scrollLeft=n,setViewportHeight:n=>this.eViewport.style.height=n,setRowCtrls:({rowCtrls:n})=>this.setRowCtrls(n),setDomOrder:n=>{this.domOrder=n},setContainerWidth:n=>this.eContainer.style.width=n,setOffsetTop:n=>this.eContainer.style.transform=`translateY(${n})`};this.createManagedBean(new r_e(this.name)).setComp(e,this.eContainer,this.eViewport)}destroy(){this.setRowCtrls([]),super.destroy(),this.lastPlacedElement=null}setRowCtrls(e){let{rowComps:t,beans:n,options:i}=this,r=B({},t);this.rowComps={},this.lastPlacedElement=null;let o=[];for(let s of e){let a=s.instanceId,l=r[a],c;if(l)c=l,delete r[a];else{if(!s.getRowNode().displayed)continue;c=new c_e(s,n,i.type)}this.rowComps[a]=c,o.push([c,!l])}this.removeOldRows(Object.values(r)),this.addRowNodes(o)}addRowNodes(e){let{domOrder:t,eContainer:n}=this;for(let[i,r]of e){let o=i.getGui();t?this.ensureDomOrder(o):r&&n.appendChild(o)}}removeOldRows(e){let{eContainer:t}=this;for(let n of e)t.removeChild(n.getGui()),n.destroy()}ensureDomOrder(e){this.domOrder&&(mK(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)}},h_e={selector:"AG-ROW-CONTAINER",component:d_e};function iC(e){return e.map(t=>`<ag-row-container name="${t}"></ag-row-container>`).join("")}var f_e=`<div class="ag-root ag-unselectable" role="treegrid">
        <ag-header-root></ag-header-root>
        <div class="ag-floating-top" data-ref="eTop" role="presentation">
            ${iC(["topLeft","topCenter","topRight","topFullWidth"])}
        </div>
        <div class="ag-body" data-ref="eBody" role="presentation">
            <div class="ag-body-viewport" data-ref="eBodyViewport" role="presentation">
            ${iC(["left","center","right","fullWidth"])}
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" data-ref="eStickyTop" role="presentation">
            ${iC(["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])}
        </div>
        <div class="ag-sticky-bottom" data-ref="eStickyBottom" role="presentation">
            ${iC(["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])}
        </div>
        <div class="ag-floating-bottom" data-ref="eBottom" role="presentation">
            ${iC(["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])}
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`,p_e=class extends At{constructor(){super(f_e,[d1e,f1e,g1e,c1e,h_e]),this.eBodyViewport=fe,this.eStickyTop=fe,this.eStickyBottom=fe,this.eTop=fe,this.eBottom=fe,this.eBody=fe}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.rangeService=e.rangeService}postConstruct(){let e=(n,i)=>{let r=`${n}px`;i.style.minHeight=r,i.style.height=r},t={setRowAnimationCssOnBodyViewport:(n,i)=>this.setRowAnimationCssOnBodyViewport(n,i),setColumnCount:n=>mwe(this.getGui(),n),setRowCount:n=>gwe(this.getGui(),n),setTopHeight:n=>e(n,this.eTop),setBottomHeight:n=>e(n,this.eBottom),setTopDisplay:n=>this.eTop.style.display=n,setBottomDisplay:n=>this.eBottom.style.display=n,setStickyTopHeight:n=>this.eStickyTop.style.height=n,setStickyTopTop:n=>this.eStickyTop.style.top=n,setStickyTopWidth:n=>this.eStickyTop.style.width=n,setStickyBottomHeight:n=>{this.eStickyBottom.style.height=n,this.eStickyBottom.classList.toggle("ag-hidden",n==="0px")},setStickyBottomBottom:n=>this.eStickyBottom.style.bottom=n,setStickyBottomWidth:n=>this.eStickyBottom.style.width=n,setColumnMovingCss:(n,i)=>this.addOrRemoveCssClass(n,i),updateLayoutClasses:(n,i)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach(o=>{o.toggle("ag-layout-auto-height",i.autoHeight),o.toggle("ag-layout-normal",i.normal),o.toggle("ag-layout-print",i.print)}),this.addOrRemoveCssClass("ag-layout-auto-height",i.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",i.normal),this.addOrRemoveCssClass("ag-layout-print",i.print)},setAlwaysVerticalScrollClass:(n,i)=>this.eBodyViewport.classList.toggle(cY,i),registerBodyViewportResizeListener:n=>{let i=this.resizeObserverService.observeResize(this.eBodyViewport,n);this.addDestroyFunc(()=>i())},setPinnedTopBottomOverflowY:n=>this.eTop.style.overflowY=this.eBottom.style.overflowY=n,setCellSelectableCss:(n,i)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(r=>r.classList.toggle(n,i))},setBodyViewportWidth:n=>this.eBodyViewport.style.width=n};this.ctrl=this.createManagedBean(new a_e),this.ctrl.setComp(t,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(this.rangeService&&hl(this.gos)||HO(this.gos))&&pwe(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,t){let n=this.eBodyViewport.classList;n.toggle("ag-row-animation",t),n.toggle("ag-row-no-animation",!t)}getFloatingTopBottom(){return[this.eTop,this.eBottom]}},g_e={selector:"AG-GRID-BODY",component:p_e},m_e=class extends j{constructor(){super(...arguments),this.beanName="scrollVisibleService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnAnimationService=e.columnAnimationService}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)})}onDisplayedColumnsChanged(){this.updateScrollVisible()}onDisplayedColumnsWidthChanged(){this.updateScrollVisible()}onCentreViewportResized(){this.updateScrollGap()}updateScrollVisible(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){let e=this.ctrlsService.get("center");if(!e||this.columnAnimationService.isActive())return;let t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){let e=this.ctrlsService.get("center"),t=e.hasHorizontalScrollGap(),n=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==n)&&(this.horizontalScrollGap=t,this.verticalScrollGap=n,this.eventService.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventService.dispatchEvent({type:"scrollVisibilityChanged"}))}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}hasHorizontalScrollGap(){return this.horizontalScrollGap}hasVerticalScrollGap(){return this.verticalScrollGap}getScrollbarWidth(){if(this.scrollbarWidth==null){let e=this.gos.get("scrollbarWidth"),n=typeof e=="number"&&e>=0?e:Ewe();n!=null&&(this.scrollbarWidth=n,this.eventService.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},bq="__ag_grid_instance",uY=class dY extends j{constructor(){super(...arguments),this.beanName="mouseEventService",this.gridInstanceId=dY.gridInstanceSequence.next()}wireBeans(t){this.ctrlsService=t.ctrlsService}stampTopLevelGridCompWithGridInstance(t){t[bq]=this.gridInstanceId}getRenderedCellForEvent(t){return SO(this.gos,t.target,$h.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(t){return this.isElementInThisGrid(t.target)}isElementInThisGrid(t){let n=t;for(;n;){let i=n[bq];if(ne(i))return i===this.gridInstanceId;n=n.parentElement}return!1}getCellPositionForEvent(t){let n=this.getRenderedCellForEvent(t);return n?n.getCellPosition():null}getNormalisedPosition(t){let n=lr(this.gos,"normal"),i=t,r,o;if(i.clientX!=null||i.clientY!=null?(r=i.clientX,o=i.clientY):(r=i.x,o=i.y),n){let s=this.ctrlsService.getGridBodyCtrl(),a=s.getScrollFeature().getVScrollPosition(),l=s.getScrollFeature().getHScrollPosition();r+=l.left,o+=a.top}return{x:r,y:o}}};uY.gridInstanceSequence=new hm;var v_e=uY,y_e=class extends j{constructor(){super(),this.beanName="navigationService",this.onPageDown=oq(this.onPageDown,100),this.onPageUp=oq(this.onPageUp,100)}wireBeans(e){this.mouseEventService=e.mouseEventService,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.ctrlsService=e.ctrlsService,this.rowRenderer=e.rowRenderer,this.headerNavigationService=e.headerNavigationService,this.rowPositionUtils=e.rowPositionUtils,this.cellNavigationService=e.cellNavigationService,this.pinnedRowModel=e.pinnedRowModel,this.scrollVisibleService=e.scrollVisibleService,this.rangeService=e.rangeService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){let n=e.key,i=e.altKey,r=e.ctrlKey||e.metaKey,o=!!this.rangeService&&e.shiftKey,s=this.mouseEventService.getCellPositionForEvent(e),a=!1;switch(n){case G.PAGE_HOME:case G.PAGE_END:!r&&!i&&(this.onHomeOrEndKey(n),a=!0);break;case G.LEFT:case G.RIGHT:case G.UP:case G.DOWN:if(!s)return!1;r&&!i&&!o&&(this.onCtrlUpDownLeftRight(n,s),a=!0);break;case G.PAGE_DOWN:case G.PAGE_UP:!r&&!i&&(a=this.handlePageUpDown(n,s,t));break}return a&&e.preventDefault(),a}handlePageUpDown(e,t,n){return n&&(t=this.focusService.getFocusedCell()),t?(e===G.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo(e){let{scrollIndex:t,scrollType:n,scrollColumn:i,focusIndex:r,focusColumn:o}=e;ne(i)&&!i.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(i),ne(t)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t,n),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(r),this.focusService.setFocusedCell({rowIndex:r,column:o,rowPinned:null,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:r,rowPinned:null,column:o})}onPageDown(e){let n=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.getViewportHeight(),r=this.pageBoundsService.getPixelOffset(),o=n.top+i,s=this.rowModel.getRowIndexAtPixel(o+r);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,s):this.navigateToNextPage(e,s)}onPageUp(e){let n=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.pageBoundsService.getPixelOffset(),r=n.top,o=this.rowModel.getRowIndexAtPixel(r+i);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,o,!0):this.navigateToNextPage(e,o,!0)}navigateToNextPage(e,t,n=!1){let i=this.getViewportHeight(),r=this.pageBoundsService.getFirstRow(),o=this.pageBoundsService.getLastRow(),s=this.pageBoundsService.getPixelOffset(),a=this.rowModel.getRow(e.rowIndex),l=n?a?.rowHeight-i-s:i-s,c=a?.rowTop+l,u=this.rowModel.getRowIndexAtPixel(c+s);if(u===e.rowIndex){let h=n?-1:1;t=u=e.rowIndex+h}let d;n?(d="bottom",u<r&&(u=r),t<r&&(t=r)):(d="top",u>o&&(u=o),t>o&&(t=o)),this.isRowTallerThanView(u)&&(t=u,d="top"),this.navigateTo({scrollIndex:t,scrollType:d,scrollColumn:null,focusIndex:u,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,n=!1){this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{let i=this.getNextFocusIndexForAutoHeight(e,n);this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:i,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){let n=t?-1:1,i=this.getViewportHeight(),r=this.pageBoundsService.getLastRow(),o=0,s=e.rowIndex;for(;s>=0&&s<=r;){let a=this.rowModel.getRow(s);if(a){let l=a.rowHeight??0;if(o+l>i)break;o+=l}s+=n}return Math.max(0,Math.min(s,r))}getViewportHeight(){let e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),t=this.scrollVisibleService.getScrollbarWidth(),n=e.bottom-e.top;return this.ctrlsService.get("center").isHorizontalScrollShowing()&&(n-=t),n}isRowTallerThanView(e){let t=this.rowModel.getRow(e);if(!t)return!1;let n=t.rowHeight;return typeof n!="number"?!1:n>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){let n=this.cellNavigationService.getNextCellToFocus(e,t,!0),{rowIndex:i}=n,r=n.column;this.navigateTo({scrollIndex:i,scrollType:null,scrollColumn:r,focusIndex:i,focusColumn:r})}onHomeOrEndKey(e){let t=e===G.PAGE_HOME,n=this.visibleColsService.getAllCols(),i=t?n[0]:Rt(n),r=t?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow();this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:i,focusIndex:r,focusColumn:i})}onTabKeyDown(e,t){let n=t.shiftKey,i=this.tabToNextCellCommon(e,n,t);if(i!==!1){i?t.preventDefault():i===null&&this.focusService.allowFocusForNextGridCoreContainer(n);return}if(n){let{rowIndex:r,rowPinned:o}=e.getRowPosition();(o?r===0:r===this.pageBoundsService.getFirstRow())&&(this.gos.get("headerHeight")===0||this.focusService.isHeaderFocusSuppressed()?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else e instanceof $h&&e.focusCell(!0),(!n&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(n))&&t.preventDefault()}tabToNextCell(e,t){let n=this.focusService.getFocusedCell();if(!n)return!1;let i=this.getCellByPosition(n);return!i&&(i=this.rowRenderer.getRowByPosition(n),!i||!i.isFullWidth())?!1:!!this.tabToNextCellCommon(i,e,t)}tabToNextCellCommon(e,t,n){let i=e.isEditing();if(!i&&e instanceof $h){let s=e.getRowCtrl();s&&(i=s.isEditing())}let r;return i?this.gos.get("editType")==="fullRow"?r=this.moveToNextEditingRow(e,t,n):r=this.moveToNextEditingCell(e,t,n):r=this.moveToNextCellNotEditing(e,t),r===null?r:r||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,t,n=null){let i=e.getCellPosition();e.getGui().focus(),e.stopEditing();let r=this.findNextCellToFocusOn(i,t,!0);return r===!1?null:r==null?!1:(r.startEditing(null,!0,n),r.focusCell(!1),!0)}moveToNextEditingRow(e,t,n=null){let i=e.getCellPosition(),r=this.findNextCellToFocusOn(i,t,!0);if(r===!1)return null;if(r==null)return!1;let o=r.getCellPosition(),s=this.isCellEditable(i),a=this.isCellEditable(o),l=o&&i.rowIndex===o.rowIndex&&i.rowPinned===o.rowPinned;return s&&e.setFocusOutOnEditor(),l||(e.getRowCtrl().stopEditing(),r.getRowCtrl().startRowEditing(void 0,void 0,n)),a?(r.setFocusInOnEditor(),r.focusCell()):r.focusCell(!0),!0}moveToNextCellNotEditing(e,t){let n=this.visibleColsService.getAllCols(),i;e instanceof Zh?i=pe(B({},e.getRowPosition()),{column:t?n[0]:Rt(n)}):i=e.getCellPosition();let r=this.findNextCellToFocusOn(i,t,!1);if(r===!1)return null;if(r instanceof $h)r.focusCell(!0);else if(r)return this.tryToFocusFullWidthRow(r.getRowPosition(),t);return ne(r)}findNextCellToFocusOn(e,t,n){let i=e;for(;;){e!==i&&(e=i),t||(i=this.getLastCellOfColSpan(i)),i=this.cellNavigationService.getNextTabbedCell(i,t);let r=this.gos.getCallback("tabToNextCell");if(ne(r)){let l=r({backwards:t,editing:n,previousCellPosition:e,nextCellPosition:i||null});if(l===!0||l===null)l===null&&X("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),i=e;else{if(l===!1)return!1;i={rowIndex:l.rowIndex,column:l.column,rowPinned:l.rowPinned}}}if(!i)return null;if(i.rowIndex<0){let a=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a+i.rowIndex,column:i.column},fromCell:!0}),null}let o=this.gos.get("editType")==="fullRow";if(n&&!o&&!this.isCellEditable(i))continue;this.ensureCellVisible(i);let s=this.getCellByPosition(i);if(!s){let a=this.rowRenderer.getRowByPosition(i);if(!a||!a.isFullWidth()||n)continue;return a}if(!s.isSuppressNavigable())return this.rangeService?.setRangeToCell(i),s}}isCellEditable(e){let t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}getCellByPosition(e){let t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return e.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):e.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.rowModel.getRow(e.rowIndex)}navigateToNextCell(e,t,n,i){let r=n,o=!1;for(;r&&(r===n||!this.isValidNavigateCell(r));)this.gos.get("enableRtl")?t===G.LEFT&&(r=this.getLastCellOfColSpan(r)):t===G.RIGHT&&(r=this.getLastCellOfColSpan(r)),r=this.cellNavigationService.getNextCellToFocus(t,r),o=St(r);if(o&&e&&e.key===G.UP&&(r={rowIndex:-1,rowPinned:null,column:n.column}),i){let a=this.gos.getCallback("navigateToNextCell");if(ne(a)){let c=a({key:t,previousCellPosition:n,nextCellPosition:r||null,event:e});ne(c)?r={rowPinned:c.rowPinned,rowIndex:c.rowIndex,column:c.column}:r=null}}if(!r)return;if(r.rowIndex<0){let a=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a+r.rowIndex,column:n.column},event:e||void 0,fromCell:!0});return}let s=this.getNormalisedPosition(r);s?this.focusPosition(s):this.tryToFocusFullWidthRow(r)}getNormalisedPosition(e){this.ensureCellVisible(e);let t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){let n=this.visibleColsService.getAllCols(),i=this.rowRenderer.getRowByPosition(e);if(!i||!i.isFullWidth())return!1;let r=this.focusService.getFocusedCell(),o={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?Rt(n):n[0])};this.focusPosition(o);let s=t??(r!=null&&this.rowPositionUtils.before(o,r));return this.eventService.dispatchEvent({type:"fullWidthRowFocused",rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:o.column,isFullWidthCell:!0,fromBelow:s}),!0}focusPosition(e){this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){let t=this.getCellByPosition(e);if(!t)return e;let n=t.getColSpanningList();return n.length===1?e:{rowIndex:e.rowIndex,column:Rt(n),rowPinned:e.rowPinned}}ensureCellVisible(e){let t=rD(this.gos),n=this.rowModel.getRow(e.rowIndex);!(t&&n?.sticky)&&St(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}},C_e=class extends j{constructor(){super(...arguments),this.beanName="horizontalResizeService"}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService}addResizeBar(e){let t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(t),()=>this.dragService.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();let n=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(n)}setResizeIcons(){let e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){let e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},w_e=class extends j{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupService=e.popupService,this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.menuService=e.menuService}hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,t,n){this.showPopup(e,i=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:n,mouseEvent:t,ePopup:i})},n,t.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(e,t,n){let i=-1,r="left",o=this.menuService.isLegacyMenuEnabled();!o&&this.gos.get("enableRtl")&&(i=1,r="right");let s=o?void 0:4*i,a=o?void 0:4;this.showPopup(e,l=>{this.popupService.positionPopupByComponent({type:n,eventSource:t,ePopup:l,nudgeX:s,nudgeY:a,alignSide:r,keepWithinBounds:!0,position:"under",column:e})},n,t,o)}showPopup(e,t,n,i,r){let o=e?this.createBean(new Fbe(e,"COLUMN_MENU")):void 0;if(this.activeMenu=o,!o?.hasFilter()||!e)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");let s=document.createElement("div");es(s,"presentation"),s.classList.add("ag-menu"),r||s.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(s,{keydown:g=>this.trapFocusWithin(g,s)}),s.appendChild(o?.getGui());let a,l=()=>o?.afterGuiDetached(),c=this.menuService.isColumnMenuAnchoringEnabled()?i??this.ctrlsService.getGridBodyCtrl().getGui():void 0,u=g=>{e.setMenuVisible(!1,"contextMenu");let m=g instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),m&&i&&Ca(i)){let v=this.focusService.findTabbableParent(i);v&&v.focus()}l(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,n,e)},d=this.localeService.getLocaleTextFunc(),h=r&&n!=="columnFilter"?d("ariaLabelColumnMenu","Column Menu"):d("ariaLabelColumnFilter","Column Filter"),p=this.popupService.addPopup({modal:!0,eChild:s,closeOnEsc:!0,closedCallback:u,positionCallback:()=>t(s),anchorToElement:c,ariaLabel:h});p&&(this.hidePopup=a=p.hideFunc),o.afterInit().then(()=>{t(s),o.afterGuiAttached({container:n,hidePopup:a})}),e.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,n,e)}trapFocusWithin(e,t){e.key!==G.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,n){this.eventService.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:n??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},b_e=class extends j{constructor(){super(...arguments),this.beanName="resizeObserverService"}observeResize(e,t){let i=Lq(this.gos).ResizeObserver,r=i?new i(t):null;return r?.observe(e),()=>r?.disconnect()}},S_e=class extends j{constructor(){super(...arguments),this.beanName="animationFrameService",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}setScrollTop(e){let t=this.gos.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&e===0){let n=this.paginationService?.getCurrentPage()??0;n!==this.lastPage&&(this.lastPage=n,this.scrollGoingDown=!0)}this.lastScrollTop=e}postConstruct(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){this.useAnimationFrame===!1&&X(`AnimationFrameService.${e} called but animation frames are off`)}createTask(e,t,n){this.verifyAnimationFrameOn(n);let i={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[n],i),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;let t=this.scrollGoingDown?1:-1;e.list.sort((n,i)=>n.index!==i.index?t*(i.index-n.index):i.createOrder-n.createOrder),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");let t=this.createTasksP1,n=t.list,i=this.createTasksP2,r=i.list,o=this.destroyTasks,s=new Date().getTime(),a=new Date().getTime()-s,l=e<=0,c=this.ctrlsService.getGridBodyCtrl();for(;l||a<e;){if(!c.getScrollFeature().scrollGridIfNeeded()){let d;if(n.length)this.sortTaskList(t),d=n.pop().task;else if(r.length)this.sortTaskList(i),d=r.pop().task;else if(o.length)d=o.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(d)||d()}a=new Date().getTime()-s}n.length||r.length||o.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){let e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){let t=Lq(this.gos);t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let t=!1;return()=>{if(!this.isOn()){window.setTimeout(e,0);return}t||(t=!0,this.addDestroyTask(()=>{t=!1,e()}))}}};var __e=class extends j{constructor(){super(...arguments),this.beanName="expansionService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.isClientSideRowModel=kn(this.gos)}expandRows(e){if(!this.isClientSideRowModel)return;let t=new Set(e);this.rowModel.forEachNode(n=>{n.id&&t.has(n.id)&&(n.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){let e=[];return this.rowModel.forEachNode(({expanded:t,id:n})=>{t&&n&&e.push(n)}),e}expandAll(e){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(e)}setRowNodeExpanded(e,t,n,i){e&&(n&&e.parent&&e.parent.level!==-1&&this.setRowNodeExpanded(e.parent,t,n,i),e.setExpanded(t,void 0,i))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}},E_e=class extends j{constructor(){super(...arguments),this.beanName="menuService"}wireBeans(e){this.valueService=e.valueService,this.filterMenuFactory=e.filterMenuFactory,this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.filterManager=e.filterManager,this.rowRenderer=e.rowRenderer,this.columnChooserFactory=e.columnChooserFactory,this.contextMenuFactory=e.contextMenuFactory,this.enterpriseMenuFactory=e.enterpriseMenuFactory}postConstruct(){this.activeMenuFactory=this.enterpriseMenuFactory??this.filterMenuFactory}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){let t=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(t,e,e.containerType,!0)}showHeaderContextMenu(e,t,n){this.activeMenuFactory.showMenuAfterContextMenuEvent(e,t,n)}getContextMenuPosition(e,t){let n=this.getRowCtrl(e),i=this.getCellGui(n,t);if(!i)return n?{x:0,y:n.getRowYPosition()}:{x:0,y:0};let r=i.getBoundingClientRect();return{x:r.x+r.width/2,y:r.y+r.height/2}}showContextMenu(e){let t=e.rowNode,n=e.column,{anchorToElement:i,value:r}=e;t&&n&&r==null&&(r=this.valueService.getValueForDisplay(n,t)),i==null&&(i=this.getContextMenuAnchorElement(t,n)),this.contextMenuFactory?.onContextMenu(e.mouseEvent??null,e.touchEvent??null,t??null,n??null,r,i)}showColumnChooser(e){this.columnChooserFactory?.showColumnChooser(e)}hidePopupMenu(){this.contextMenuFactory?.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){this.columnChooserFactory?.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(e){let{suppressMenu:t,suppressHeaderMenuButton:n}=e.getColDef();return!(n??t)&&this.activeMenuFactory.isMenuEnabled(e)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&!!this.filterManager?.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){return!(e&&Wu(e)?e.getColDef():e?.getColGroupDef())?.suppressHeaderContextMenu&&this.getColumnMenuType()==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){let e=!this.isSuppressMenuHide();return!(Ku()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return!!this.filterManager?.isFilterAllowed(e)&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return this.getColumnMenuType()==="new"}isLegacyMenuEnabled(){return this.getColumnMenuType()==="legacy"}isFloatingFilterButtonEnabled(e){let t=e.getColDef(),n=t.floatingFilterComponentParams?.suppressFilterButton;return n!=null&&X("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),t.suppressFloatingFilterButton==null?!n:!t.suppressFloatingFilterButton}getColumnMenuType(){return this.gos.get("columnMenu")}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){let e=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()?this.gos.exists("suppressMenuHide")?e:!1:e}showColumnMenuCommon(e,t,n,i){let{positionBy:r}=t,o=t.column;if(r==="button"){let{buttonElement:s}=t;e.showMenuAfterButtonClick(o,s,n,i)}else if(r==="mouse"){let{mouseEvent:s}=t;e.showMenuAfterMouseEvent(o,s,n,i)}else o&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(o,"auto"),this.animationFrameService.requestAnimationFrame(()=>{let s=this.ctrlsService.getHeaderRowContainerCtrl(o.getPinned())?.getHeaderCtrlForColumn(o);s&&e.showMenuAfterButtonClick(o,s.getAnchorElementForMenu(i),n,!0)}))}getRowCtrl(e){let{rowIndex:t,rowPinned:n}=e||{};if(t!=null)return this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:n})||void 0}getCellGui(e,t){return!e||!t?void 0:e.getCellCtrl(t)?.getGui()||void 0}getContextMenuAnchorElement(e,t){let n=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),i=this.getRowCtrl(e);if(!i)return n;let r=this.getCellGui(i,t);return r||(i.isFullWidth()?i.getFullWidthElement():n)}},x_e=class extends Kh{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){let n=super.setValue(e,t);return this.eInput.value=e,n}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},D_e={selector:"AG-INPUT-TEXT-AREA",component:x_e},T_e=class extends mm{constructor(){super(`<div class="ag-large-text">
        <ag-input-text-area data-ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`,[D_e]),this.eTextArea=fe}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),ne(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){let t=e.key;(t===G.LEFT||t===G.UP||t===G.RIGHT||t===G.DOWN||e.shiftKey&&t===G.ENTER)&&e.stopPropagation()}afterGuiAttached(){let e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){let e=this.eTextArea.getValue();return!ne(e)&&!ne(this.params.value)?this.params.value:this.params.parseValue(e)}},R_e=class extends mm{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){Jh(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){let e=this.getGui(),t=this.params,n=i=>{MO(this.gos,i,t.node,t.column,!0)||t.onKeyDown(i)};this.addManagedElementListeners(e,{keydown:n})}},I_e=class extends mm{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" data-ref="eSelect"></ag-select>
            </div>`,[Lbe]),this.eSelect=fe,this.startedByEnter=!1}wireBeans(e){this.valueService=e.valueService}init(e){this.focusAfterAttached=e.cellStartedEdit;let{eSelect:t,valueService:n,gos:i}=this,{values:r,value:o,eventKey:s}=e;if(St(r)){X("no values found for select cellEditor");return}this.startedByEnter=s!=null?s===G.ENTER:!1;let a=!1;r.forEach(d=>{let h={value:d},p=n.formatValue(e.column,null,d),g=p!=null;h.text=g?p:d,t.addOption(h),a=a||o===d}),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);let{valueListGap:l,valueListMaxWidth:c,valueListMaxHeight:u}=e;l!=null&&t.setPickerGap(l),u!=null&&t.setPickerMaxHeight(u),c!=null&&t.setPickerMaxWidth(c),i.get("editType")!=="fullRow"&&this.addManagedListeners(this.eSelect,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}},dD=class extends mm{constructor(e){super(`
            <div class="ag-cell-edit-wrapper">
                ${e.getTemplate()}
            </div>`,e.getAgComponents()),this.cellEditorInput=e,this.eInput=fe}init(e){this.params=e;let{cellStartedEdit:t,eventKey:n,suppressPreventDefault:i}=e,r=this.eInput;this.cellEditorInput.init(r,e);let o,s=!0;t?(this.focusAfterAttached=!0,n===G.BACKSPACE||n===G.DELETE?o="":n&&n.length===1?i?s=!1:o=n:(o=this.cellEditorInput.getStartValue(),n!==G.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,o=this.cellEditorInput.getStartValue()),s&&o!=null&&r.setStartValue(o),this.addManagedElementListeners(r.getGui(),{keydown:a=>{let{key:l}=a;(l===G.PAGE_UP||l===G.PAGE_DOWN)&&a.preventDefault()}})}afterGuiAttached(){let e=this.localeService.getLocaleTextFunc(),t=this.eInput;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;fl()||t.getFocusableElement().focus();let n=t.getInputElement();this.highlightAllOnFocus?n.select():this.cellEditorInput.setCaret?.()}focusIn(){let e=this.eInput,t=e.getFocusableElement(),n=e.getInputElement();t.focus(),n.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}},F_e=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" data-ref="eInput"></ag-input-text-field>'}getAgComponents(){return[lD]}init(e,t){this.eInput=e,this.params=t,t.maxLength!=null&&e.setMaxLength(t.maxLength)}getValue(){let e=this.eInput.getValue();return!ne(e)&&!ne(this.params.value)?this.params.value:this.params.parseValue(e)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){let e=this.eInput.getValue(),t=ne(e)&&e.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}},hY=class extends dD{constructor(){super(new F_e)}},A_e=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" data-ref="eInput"></ag-input-number-field>'}getAgComponents(){return[Kbe]}init(e,t){this.eInput=e,this.params=t,t.max!=null&&e.setMax(t.max),t.min!=null&&e.setMin(t.min),t.precision!=null&&e.setPrecision(t.precision),t.step!=null&&e.setStep(t.step);let n=e.getInputElement();t.preventStepping?e.addManagedElementListeners(n,{keydown:this.preventStepping}):t.showStepperButtons&&n.classList.add("ag-number-field-input-stepper")}preventStepping(e){(e.key===G.UP||e.key===G.DOWN)&&e.preventDefault()}getValue(){let e=this.eInput.getValue();if(!ne(e)&&!ne(this.params.value))return this.params.value;let t=this.params.parseValue(e);if(t==null)return t;if(typeof t=="string"){if(t==="")return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}setCaret(){fl()&&this.eInput.getInputElement().focus({preventScroll:!0})}},M_e=class extends dD{constructor(){super(new A_e)}},P_e=class extends of{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();let e=fl();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){Dn(this.gos)===this.eInput&&e.preventDefault()}setMin(e){let t=e instanceof Date?Ms(e??null,!1)??void 0:e;return this.min===t?this:(this.min=t,As(this.eInput,"min",t),this)}setMax(e){let t=e instanceof Date?Ms(e??null,!1)??void 0:e;return this.max===t?this:(this.max=t,As(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,As(this.eInput,"step",e),this)}getDate(){if(this.eInput.validity.valid)return xo(this.getValue())??void 0}setDate(e,t){this.setValue(Ms(e??null,!1),t)}},fY={selector:"AG-INPUT-DATE-FIELD",component:P_e},k_e=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[fY]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){let e=this.eInput.getDate();return!ne(e)&&!ne(this.params.value)?this.params.value:e??null}getStartValue(){let{value:e}=this.params;if(e instanceof Date)return Ms(e,!1)}},O_e=class extends dD{constructor(){super(new k_e)}},N_e=class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[fY]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){let e=this.formatDate(this.eInput.getDate());return!ne(e)&&!ne(this.params.value)?this.params.value:this.params.parseValue(e??"")}getStartValue(){return Ms(this.parseDate(this.params.value??void 0)??null,!1)}parseDate(e){let t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):xo(e)??void 0}formatDate(e){let t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):Ms(e??null,!1)??void 0}},L_e=class extends dD{wireBeans(e){this.dataTypeService=e.dataTypeService}constructor(){super(new N_e(()=>this.dataTypeService))}},V_e=class extends mm{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[nN]),this.eCheckbox=fe}init(e){this.params=e;let t=e.value??void 0;this.eCheckbox.setValue(t),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(this.eCheckbox,{fieldValueChanged:i=>this.setAriaLabel(i.selected)})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){let t=this.localeService.getLocaleTextFunc(),n=KO(t,e),i=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${i} (${n})`)}},sC=class{constructor(e){this.cellValueChanges=e}},pO=class extends sC{constructor(e,t,n,i){super(e),this.initialRange=t,this.finalRange=n,this.ranges=i}},B_e=10,Sq=class{constructor(e){this.actionStack=[],this.maxStackSize=e||B_e,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},G_e=class extends j{constructor(){super(...arguments),this.beanName="undoRedoService",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{let t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},n=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,t),i=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(n||i||this.isPasting||this.isRangeInAction))return;let{rowPinned:o,rowIndex:s,column:a,oldValue:l,value:c}=e,u={rowPinned:o,rowIndex:s,columnId:a.getColId(),newValue:c,oldValue:l};this.cellValueChanges.push(u)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}wireBeans(e){this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.cellPositionUtils=e.cellPositionUtils,this.rowPositionUtils=e.rowPositionUtils,this.columnModel=e.columnModel,this.rangeService=e.rangeService}postConstruct(){if(!this.gos.get("undoRedoCellEditing"))return;let e=this.gos.get("undoRedoCellEditingLimit");if(e<=0)return;this.undoStack=new Sq(e),this.redoStack=new Sq(e),this.addListeners();let t=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:n=>{n.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:t,newColumnsLoaded:t,columnGroupOpened:t,columnRowGroupChanged:t,columnMoved:t,columnPinned:t,columnVisible:t,rowDragEnd:t}),this.ctrlsService.whenReady(this,n=>{this.gridBodyCtrl=n.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){this.eventService.dispatchEvent({type:"undoStarted",source:e});let t=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo");this.eventService.dispatchEvent({type:"undoEnded",source:e,operationPerformed:t})}redo(e){this.eventService.dispatchEvent({type:"redoStarted",source:e});let t=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo");this.eventService.dispatchEvent({type:"redoEnded",source:e,operationPerformed:t})}undoRedo(e,t,n,i,r){if(!e)return!1;let o=e.pop();return!o||!o.cellValueChanges?!1:(this.processAction(o,s=>s[i],r),o instanceof pO?this.processRange(this.rangeService,o.ranges||[o[n]]):this.processCell(o.cellValueChanges),t.push(o),!0)}processAction(e,t,n){e.cellValueChanges.forEach(i=>{let{rowIndex:r,rowPinned:o,columnId:s}=i,a={rowIndex:r,rowPinned:o},l=this.rowPositionUtils.getRowNode(a);l.displayed&&l.setDataValue(s,t(i),n)})}processRange(e,t){let n;e.removeAllCellRanges(!0),t.forEach((i,r)=>{if(!i)return;let o=i.startRow,s=i.endRow;r===t.length-1&&(n={rowPinned:o.rowPinned,rowIndex:o.rowIndex,columnId:i.startColumn.getColId()},this.setLastFocusedCell(n));let a={rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,rowEndIndex:s.rowIndex,rowEndPinned:s.rowPinned,columnStart:i.startColumn,columns:i.columns};e.addCellRange(a)})}processCell(e){let t=e[0],{rowIndex:n,rowPinned:i}=t,r={rowIndex:n,rowPinned:i},o=this.rowPositionUtils.getRowNode(r),s={rowPinned:t.rowPinned,rowIndex:o.rowIndex,columnId:t.columnId};this.setLastFocusedCell(s,this.rangeService)}setLastFocusedCell(e,t){let{rowIndex:n,columnId:i,rowPinned:r}=e,o=this.gridBodyCtrl.getScrollFeature(),s=this.columnModel.getCol(i);if(!s)return;o.ensureIndexVisible(n),o.ensureColumnVisible(s);let a={rowIndex:n,column:s,rowPinned:r};this.focusService.setFocusedCell(pe(B({},a),{forceBrowserFocus:!0})),t?.setRangeToCell(a)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{let e=new sC(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){let n=new sC(this.cellValueChanges);this.pushActionsToUndoStack(n)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{let e=new sC(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{let t=new pO(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;this.rangeService&&hl(this.gos)?e=new pO(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):e=new sC(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1}})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}};function H_e(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition()}function z_e(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getHScrollPosition()}function pY(e,t,n="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(t,n),"ensureVisible")}function gY(e,t,n){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureIndexVisible(t,n),"ensureVisible")}function U_e(e,t,n=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureNodeVisible(t,n),"ensureVisible")}function j_e(e){e.undoRedoService?.undo("api")}function W_e(e){e.undoRedoService?.redo("api")}function q_e(e,t={}){return e.rowRenderer.getCellEditorInstances(t).map(cC)}function K_e(e){return e.rowRenderer.getEditingCells()}function Y_e(e,t=!1){e.rowRenderer.stopEditing(t)}function Q_e(e,t){let n=e.columnModel.getCol(t.colKey);if(!n){X(`no column found for ${t.colKey}`);return}let i={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:n};t.rowPinned==null&&gY(e,t.rowIndex),pY(e,t.colKey);let o=e.navigationService.getCellByPosition(i);if(!o)return;let{focusService:s,gos:a}=e,l=()=>{let u=Dn(a),d=o.getGui();return u!==d&&!!d?.contains(u)},c=a.get("stopEditingWhenCellsLoseFocus")&&l();(c||!s.isCellFocused(i))&&s.setFocusedCell(pe(B({},i),{forceBrowserFocus:c,preventScrollOnBrowserFocus:!0})),o.startRowOrCellEdit(t.key)}function X_e(e){return e.undoRedoService?.getCurrentUndoStackSize()??0}function $_e(e){return e.undoRedoService?.getCurrentRedoStackSize()??0}var Z_e=class extends j{constructor(){super(...arguments),this.beanName="editService"}wireBeans(e){this.navigationService=e.navigationService,this.userComponentFactory=e.userComponentFactory,this.valueService=e.valueService}startEditing(e,t=null,n=!1,i=null){let r=this.createCellEditorParams(e,t,n),o=e.getColumn().getColDef(),s=this.userComponentFactory.getCellEditorDetails(o,r),a=s?.popupFromSelector!=null?s.popupFromSelector:!!o.cellEditorPopup,l=s?.popupPositionFromSelector!=null?s.popupPositionFromSelector:o.cellEditorPopupPosition;return e.setEditing(!0,s),e.getComp().setEditDetails(s,a,l,this.gos.get("reactiveCustomComponents")),this.eventService.dispatchEvent(e.createEvent(i,"cellEditingStarted")),!s?.params?.suppressPreventDefault}stopEditing(e,t){let n=e.getComp(),{newValue:i,newValueExists:r}=this.takeValueFromCellEditor(t,n),o=e.getRowNode(),s=e.getColumn(),a=this.valueService.getValueForDisplay(s,o),l=!1;return r&&(l=this.saveNewValue(e,a,i,o,s)),e.setEditing(!1,void 0),n.setEditDetails(),e.updateAndFormatValue(!1),e.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.eventService.dispatchEvent(pe(B({},e.createEvent(null,"cellEditingStopped")),{oldValue:a,newValue:i,valueChanged:l})),l}handleColDefChanged(e){let t=e.getCellEditor();if(t?.refresh){let{eventKey:n,cellStartedEdit:i}=e.getEditCompDetails().params,r=this.createCellEditorParams(e,n,i),o=e.getColumn().getColDef(),s=this.userComponentFactory.getCellEditorDetails(o,r);t.refresh(s.params)}}setFocusOutOnEditor(e){let t=e.getComp().getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(e){let t=e.getComp(),n=t.getCellEditor();n?.focusIn?n.focusIn():(e.focusCell(!0),e.onCellEditorAttached(()=>t.getCellEditor()?.focusIn?.()))}stopEditingAndFocus(e,t=!1,n=!1){e.stopRowOrCellEdit(),e.focusCell(!0),t||this.navigateAfterEdit(n,e.getCellPosition())}createPopupEditorWrapper(e){return new R_e(e)}takeValueFromCellEditor(e,t){let n={newValueExists:!1};if(e)return n;let i=t.getCellEditor();return!i||i.isCancelAfterEnd&&i.isCancelAfterEnd()?n:{newValue:i.getValue(),newValueExists:!0}}saveNewValue(e,t,n,i,r){if(n===t)return!1;e.setSuppressRefreshCell(!0);let o=i.setDataValue(r,n,"edit");return e.setSuppressRefreshCell(!1),o}createCellEditorParams(e,t,n){let i=e.getColumn(),r=e.getRowNode();return this.gos.addGridCommonParams({value:this.valueService.getValueForDisplay(i,r),eventKey:t,column:i,colDef:i.getColDef(),rowIndex:e.getCellPosition().rowIndex,node:r,data:r.data,cellStartedEdit:n,onKeyDown:e.onKeyDown.bind(e),stopEditing:e.stopEditingAndFocus.bind(e),eGridCell:e.getGui(),parseValue:o=>this.valueService.parseValue(i,r,o,e.getValue()),formatValue:e.formatValue.bind(e)})}navigateAfterEdit(e,t){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){let i=e?G.UP:G.DOWN;this.navigationService.navigateToNextCell(null,i,t,!1)}}},J_e=class extends j{constructor(){super(...arguments),this.beanName="rowEditService"}startEditing(e,t=null,n=null,i=null){let r=!0;return e.getAllCellCtrls().reduce((s,a)=>{let l=a===n;return l?r=a.startEditing(t,l,i):a.startEditing(null,l,i),s?!0:a.isEditing()},!1)&&this.setEditing(e,!0),r}stopEditing(e,t=!1){let n=e.getAllCellCtrls(),i=e.isEditing();e.setStoppingRowEdit(!0);let r=!1;for(let o of n){let s=o.stopEditing(t);i&&!t&&!r&&s&&(r=!0)}r&&this.eventService.dispatchEvent(e.createRowEvent("rowValueChanged")),i&&this.setEditing(e,!1),e.setStoppingRowEdit(!1)}setEditing(e,t){e.setEditingRow(t),e.forEachGui(void 0,i=>i.rowComp.addOrRemoveCssClass("ag-row-editing",t));let n=t?e.createRowEvent("rowEditingStarted"):e.createRowEvent("rowEditingStopped");this.eventService.dispatchEvent(n)}},sf={version:qe,moduleName:"@ag-grid-community/edit-core",beans:[Z_e]},eEe={version:qe,moduleName:"@ag-grid-community/edit-api",apiFunctions:{undoCellEditing:j_e,redoCellEditing:W_e,getCellEditorInstances:q_e,getEditingCells:K_e,stopEditing:Y_e,startEditingCell:Q_e,getCurrentUndoSize:X_e,getCurrentRedoSize:$_e},dependantModules:[sf]},tEe={version:qe,moduleName:"@ag-grid-community/undo-redo-edit",beans:[G_e],dependantModules:[sf]},nEe={version:qe,moduleName:"@ag-grid-community/full-row-edit",beans:[J_e],dependantModules:[sf]},mY={version:qe,moduleName:"@ag-grid-community/default-editor",userComponents:[{name:"agCellEditor",classImp:hY}],dependantModules:[sf]},iEe={version:qe,moduleName:"@ag-grid-community/data-type-editors",userComponents:[{name:"agTextCellEditor",classImp:hY},{name:"agNumberCellEditor",classImp:M_e,params:{suppressPreventDefault:!0}},{name:"agDateCellEditor",classImp:O_e},{name:"agDateStringCellEditor",classImp:L_e},{name:"agCheckboxCellEditor",classImp:V_e}],dependantModules:[mY]},rEe={version:qe,moduleName:"@ag-grid-community/select-editor",userComponents:[{name:"agSelectCellEditor",classImp:I_e}],dependantModules:[sf]},oEe={version:qe,moduleName:"@ag-grid-community/large-text-editor",userComponents:[{name:"agLargeTextCellEditor",classImp:T_e}],dependantModules:[sf]},sEe={version:qe,moduleName:"@ag-grid-community/all-editors",dependantModules:[mY,iEe,rEe,oEe]},aEe={version:qe,moduleName:"@ag-grid-community/editing",dependantModules:[sf,tEe,nEe,sEe,eEe]},lEe=class extends j{constructor(){super(...arguments),this.beanName="autoWidthCalculator"}wireBeans(e){this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){let n=this.getHeaderCellForColumn(e);if(!n)return-1;let i=this.rowRenderer.getAllCellsForColumn(e);return t||i.push(n),this.addElementsToContainerAndGetWidth(i)}getPreferredWidthForColumnGroup(e){let t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){let t=document.createElement("form");t.style.position="fixed";let n=this.centerRowContainerCtrl.getContainerElement();e.forEach(o=>this.cloneItemIntoDummy(o,t)),n.appendChild(t);let i=t.offsetWidth;n.removeChild(t);let r=this.getAutoSizePadding();return i+r}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(e){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(n=>{let i=n.getHtmlElementForColumnHeader(e);i!=null&&(t=i)}),t}cloneItemIntoDummy(e,t){let n=e.cloneNode(!0);n.style.width="",n.style.position="static",n.style.left="";let i=document.createElement("div"),r=i.classList;["ag-header-cell","ag-header-group-cell"].some(a=>n.classList.contains(a))?(r.add("ag-header","ag-header-row"),i.style.position="static"):r.add("ag-row");let s=e.parentElement;for(;s;){if(["ag-header-row","ag-row"].some(l=>s.classList.contains(l))){for(let l=0;l<s.classList.length;l++){let c=s.classList[l];c!="ag-row-position-absolute"&&r.add(c)}break}s=s.parentElement}i.appendChild(n),t.appendChild(i)}},cEe=class extends j{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.extraTopHeight=0,this.extraBottomHeight=0}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.isClientSide=kn(this.gos),this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl}),this.resetStickyContainers()}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}setOffsetTop(e){this.extraTopHeight!==e&&(this.extraTopHeight=e,this.eventService.dispatchEvent({type:"stickyTopOffsetChanged",offset:e}))}setOffsetBottom(e){this.extraBottomHeight!==e&&(this.extraBottomHeight=e)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getExtraTopHeight(){return this.extraTopHeight}getExtraBottomHeight(){return this.extraBottomHeight}getLastPixelOfGroup(e){return this.isClientSide?this.getClientSideLastPixelOfGroup(e):this.getServerSideLastPixelOfGroup(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}getServerSideLastPixelOfGroup(e){if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(e.isExpandable()||e.footer){if(e.master)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let n=e.childStore?.getStoreBounds();return e.footer&&(n=e.sibling.childStore?.getStoreBounds()),(n?.heightPx??0)+(n?.topPx??0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(e){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(e.isExpandable()||e.footer){if(e.footer&&e.rowIndex===0)return Number.MAX_SAFE_INTEGER;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let i=e.footer?e.sibling:e;for(;i.isExpandable()&&i.expanded;)if(i.master)i=i.detailNode;else if(i.childrenAfterSort){if(i.childrenAfterSort.length===0)break;i=Rt(i.childrenAfterSort)}return i.rowTop+i.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(e){let t=e==="top",n=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,n);let i=t?this.rowRenderer.getFirstVisibleVerticalPixel()-this.extraTopHeight:this.rowRenderer.getLastVisibleVerticalPixel()-this.extraTopHeight,r=new Set,o=c=>{if(r.add(c),t){let u=this.getLastPixelOfGroup(c),d=i+n+c.rowHeight;u<d?c.stickyRowTop=n+(u-d):c.stickyRowTop=n}else{let u=this.getFirstPixelOfGroup(c),d=i-(n+c.rowHeight);u>d?c.stickyRowTop=n-(u-d):c.stickyRowTop=n}n=0,r.forEach(u=>{let d=u.stickyRowTop+u.rowHeight;n<d&&(n=d)})},s=this.areFooterRowsStickySuppressed(),a=this.gos.get("suppressGroupRowsSticky"),l=c=>{if(!c.displayed)return!1;if(c.footer){if(s===!0||s==="grand"&&c.level===-1||s==="group"&&c.level>-1)return!1;let u=c.sibling.rowIndex?c.sibling.rowIndex+1===c.rowIndex:!1;return e==="bottom"&&u?!1:!r.has(c)}return c.isExpandable()?a===!0||e==="bottom"?!1:!r.has(c)&&c.expanded:!1};for(let c=0;c<100;c++){let u=i+n;t||(u=i-n);let d=this.rowModel.getRowIndexAtPixel(u),h=this.rowModel.getRow(d);if(h==null)break;let g=this.getStickyAncestors(h).find(v=>(t?v.rowIndex<d:v.rowIndex>d)&&l(v));if(g){o(g);continue}if((t?h.rowTop<u:h.rowTop+h.rowHeight>u)&&l(h)){o(h);continue}break}return t||r.forEach(c=>{c.stickyRowTop=n-(c.stickyRowTop+c.rowHeight)}),this.refreshNodesAndContainerHeight(e,r,n)}areFooterRowsStickySuppressed(){let e=this.gos.get("suppressStickyTotalRow");if(e===!0)return!0;let t=!!this.gos.get("groupIncludeFooter")||e==="group",n=!!this.gos.get("groupIncludeTotalFooter")||e==="grand";return t&&n?!0:n?"grand":t?"group":!1}canRowsBeSticky(){let e=rD(this.gos),t=this.areFooterRowsStickySuppressed(),n=this.gos.get("suppressGroupRowsSticky");return e&&(!t||!n)}getStickyAncestors(e){let t=[],n=e.footer?e.sibling:e.parent;for(;n;)n.sibling&&t.push(n.sibling),t.push(n),n=n.parent;return t.reverse()}checkStickyRows(){let e=this.updateStickyRows("top"),t=this.updateStickyRows("bottom");return e||t}destroyStickyCtrls(){this.resetStickyContainers()}resetStickyContainers(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){let t=new Set;if(this.stickyTopRowCtrls.some(n=>n.getRowNode()===e)){for(let n=0;n<this.stickyTopRowCtrls.length;n++){let i=this.stickyTopRowCtrls[n].getRowNode();i!==e&&t.add(i)}this.refreshNodesAndContainerHeight("top",t,this.topContainerHeight)&&this.checkStickyRows();return}for(let n=0;n<this.stickyBottomRowCtrls.length;n++){let i=this.stickyBottomRowCtrls[n].getRowNode();i!==e&&t.add(i)}this.refreshNodesAndContainerHeight("bottom",t,this.bottomContainerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(e,t,n){let i=e==="top",r=i?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,o={},s=[];for(let h=0;h<r.length;h++){let p=r[h].getRowNode();if(!t.has(p)){o[p.id]=r[h],p.sticky=!1;continue}s.push(r[h])}let a=new Set;for(let h=0;h<s.length;h++)a.add(s[h].getRowNode());let l=[];t.forEach(h=>{a.has(h)||(h.sticky=!0,l.push(this.createRowCon(h,!1,!1)))});let c=!!l.length||s.length!==r.length;i?this.topContainerHeight!==n&&(this.topContainerHeight=n,this.gridBodyCtrl.setStickyTopHeight(n),c=!0):this.bottomContainerHeight!==n&&(this.bottomContainerHeight=n,this.gridBodyCtrl.setStickyBottomHeight(n),c=!0),this.destroyRowCtrls(o,!1);let u=[...s,...l];u.sort((h,p)=>p.getRowNode().rowIndex-h.getRowNode().rowIndex),i||u.reverse(),u.forEach(h=>h.setRowTop(h.getRowNode().stickyRowTop));let d=0;return i?(t.forEach(h=>{h.rowIndex<this.pageBoundsService.getFirstRow()&&(d+=h.rowHeight)}),d>this.topContainerHeight&&(d=this.topContainerHeight),this.setOffsetTop(d)):(t.forEach(h=>{h.rowIndex>this.pageBoundsService.getLastRow()&&(d+=h.rowHeight)}),d>this.bottomContainerHeight&&(d=this.bottomContainerHeight),this.setOffsetBottom(d)),c?(i?this.stickyTopRowCtrls=u:this.stickyBottomRowCtrls=u,!0):!1}ensureRowHeightsValid(){let e=!1,t=n=>{let i=n.getRowNode();if(i.rowHeightEstimated){let r=ju(this.gos,i);i.setRowHeight(r.height),e=!0}};return this.stickyTopRowCtrls.forEach(t),this.stickyBottomRowCtrls.forEach(t),e}},uEe=class extends j{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{let e=()=>{this.getAllCellCtrls().forEach(o=>o.onCellSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(o=>o.updateRangeBordersIfRangeCount())},n=()=>{this.eventService.addEventListener("cellSelectionChanged",e),this.eventService.addEventListener("columnMoved",t),this.eventService.addEventListener("columnPinned",t),this.eventService.addEventListener("columnVisible",t)},i=()=>{this.eventService.removeEventListener("cellSelectionChanged",e),this.eventService.removeEventListener("columnMoved",t),this.eventService.removeEventListener("columnPinned",t),this.eventService.removeEventListener("columnVisible",t)};this.addDestroyFunc(()=>i()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{hl(this.gos)?n():i()}),hl(this.gos)&&n()}}wireBeans(e){this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusService=e.focusService,this.beans=e,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",e=>this.onSuppressCellFocusChanged(e.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection","rowSelection"],()=>this.redrawRows()),rD(this.gos)&&(kn(this.gos)||vc(this.gos))&&(this.stickyRowFeature=this.createManagedBean(new cEe(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this)))),this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=lr(this.gos,"print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){let e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new dEe(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){let e=tf(this.rowCtrlsByRowIndex),t=tf(this.zombieRowCtrls),n=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];t.length>0||n.length>0?this.allRowCtrls=[...e,...t,...n]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}onSuppressCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onSuppressCellFocusChanged(e)),this.getFullWidthRowCtrls().forEach(t=>t.onSuppressCellFocusChanged(e))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>{this.onCellFocusChanged(e)},cellFocusCleared:()=>this.onCellFocusChanged(),flashCells:e=>{this.getAllCellCtrls().forEach(t=>t.onFlashCells(e))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getCols().forEach(t=>{let n=l=>{this.getAllCellCtrls().forEach(c=>{c.getColumn()===t&&l(c)})},i=()=>{n(l=>l.onLeftChanged())},r=()=>{n(l=>l.onWidthChanged())},o=()=>{n(l=>l.onFirstRightPinnedChanged())},s=()=>{n(l=>l.onLastLeftPinnedChanged())},a=()=>{n(l=>l.onColDefChanged())};t.addEventListener("leftChanged",i),t.addEventListener("widthChanged",r),t.addEventListener("firstRightPinnedChanged",o),t.addEventListener("lastLeftPinnedChanged",s),t.addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{t.removeEventListener("leftChanged",i),t.removeEventListener("widthChanged",r),t.removeEventListener("firstRightPinnedChanged",o),t.removeEventListener("lastLeftPinnedChanged",s),t.removeEventListener("colDefChanged",a)})})}onDomLayoutChanged(){let e=lr(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),n=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,n&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;let e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){let t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsForColumn(e){let t=[];return this.getAllRowCtrls().forEach(n=>{let i=n.getCellElement(e);i&&t.push(i)}),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,"top"),this.refreshFloatingRows(this.bottomRowCtrls,"bottom")}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,t){let{pinnedRowModel:n,beans:i,printLayout:r}=this,o=Object.fromEntries(e.map(a=>[a.getRowNode().id,a]));n.forEachPinnedRow(t,(a,l)=>{let c=e[l];c&&n.getPinnedRowById(c.getRowNode().id,t)===void 0&&(c.destroyFirstPass(),c.destroySecondPass()),a.id in o?(e[l]=o[a.id],delete o[a.id]):e[l]=new Zh(a,i,!1,!1,r)});let s=t==="top"?n.getPinnedTopRowCount():n.getPinnedBottomRowCount();e.length=s}onPinnedRowDataChanged(){let e={recycleRows:!0};this.redrawAfterModelUpdate(e)}redrawRow(e,t=!1){if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else if(this.cachedRowCtrls?.has(e)){this.cachedRowCtrls.removeRow(e);return}else{let n=i=>{let r=i[e.rowIndex];r&&r.getRowNode()===e&&(r.destroyFirstPass(),r.destroySecondPass(),i[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":n(this.topRowCtrls);break;case"bottom":n(this.bottomRowCtrls);break;default:n(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(e!=null){e?.forEach(n=>this.redrawRow(n,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){let t=e?.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(t==null)return null;let n=Dn(this.gos),i=fC(this.gos,n,$h.DOM_DATA_KEY_CELL_CTRL),r=fC(this.gos,n,Zh.DOM_DATA_KEY_ROW_CTRL);return i||r?t:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();let t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);let n=!e.domLayoutChanged&&!!e.recycleRows,i=e.animate&&sm(this.gos),r=n?this.getRowsToRecycle():null;if(n||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature){this.stickyRowFeature.checkStickyRows();let o=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();o&&this.updateContainerHeights(o)}this.recycleRows(r,i),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){let t=e.newData||e.newPage,n=this.gos.get("suppressScrollOnNewData");t&&!n&&(this.gridBodyCtrl.getScrollFeature().scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(e=0){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let t=this.pageBoundsService.getCurrentPageHeight();t===0&&(t=1),this.rowContainerHeightService.setModelHeight(t+e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0,this.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&this.focusService.restoreFocusedCell(e,()=>{this.onCellFocusChanged(this.gos.addGridCommonParams({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))})}stopEditing(e=!1){this.getAllRowCtrls().forEach(t=>{t.stopEditing(e)})}getAllCellCtrls(){let e=[],t=this.getAllRowCtrls(),n=t.length;for(let i=0;i<n;i++){let r=t[i].getAllCellCtrls(),o=r.length;for(let s=0;s<o;s++)e.push(r[s])}return e}getAllRowCtrls(){let e=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],t=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],n=[...this.topRowCtrls,...this.bottomRowCtrls,...e,...t];for(let i in this.rowCtrlsByRowIndex)n.push(this.rowCtrlsByRowIndex[i]);return n}addRenderedRowListener(e,t,n){let i=this.rowCtrlsByRowIndex[t];i&&i.addEventListener(e,n)}flashCells(e={}){this.getCellCtrls(e.rowNodes,e.columns).forEach(t=>t.flashCell(e))}refreshCells(e={}){let t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};for(let n of this.getCellCtrls(e.rowNodes,e.columns))n.refreshOrDestroyCell(t);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=null;this.stickyRowFeature&&RO()&&(t=this.getCellToRestoreFocusToAfterRefresh()||null);for(let n of this.getRowCtrls(e)){if(!n.isFullWidth())continue;n.refreshFullWidth()||this.redrawRow(n.getRowNode(),!0)}this.dispatchDisplayedRowsChanged(!1),t&&this.restoreFocusedCell(t)}getCellRendererInstances(e){let t=this.getCellCtrls(e.rowNodes,e.columns).map(r=>r.getCellRenderer()).filter(r=>r!=null);if(e.columns?.length)return t;let n=[],i=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(r=>{if(i&&!this.isRowInMap(r.getRowNode(),i)||!r.isFullWidth())return;let o=r.getFullWidthCellRenderers();for(let s=0;s<o.length;s++){let a=o[s];a!=null&&n.push(a)}}),[...n,...t]}getCellEditorInstances(e){let t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(n=>{let i=n.getCellEditor();i&&t.push(i)}),t}getEditingCells(){let e=[];return this.getAllCellCtrls().forEach(t=>{if(t.isEditing()){let n=t.getCellPosition();e.push(n)}}),e}mapRowNodes(e){if(!e)return;let t={top:{},bottom:{},normal:{}};return e.forEach(n=>{let i=n.id;switch(n.rowPinned){case"top":t.top[i]=n;break;case"bottom":t.bottom[i]=n;break;default:t.normal[i]=n;break}}),t}isRowInMap(e,t){let n=e.id;switch(e.rowPinned){case"top":return t.top[n]!=null;case"bottom":return t.bottom[n]!=null;default:return t.normal[n]!=null}}getRowCtrls(e){let t=this.mapRowNodes(e),n=this.getAllRowCtrls();return!e||!t?n:n.filter(i=>{let r=i.getRowNode();return this.isRowInMap(r,t)})}getCellCtrls(e,t){let n;ne(t)&&(n={},t.forEach(r=>{let o=this.columnModel.getCol(r);ne(o)&&(n[o.getId()]=!0)}));let i=[];return this.getRowCtrls(e).forEach(r=>{r.getAllCellCtrls().forEach(o=>{let s=o.getColumn().getId();n&&!n[s]||i.push(o)})}),i}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){let t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){let e=[];Ts(this.rowCtrlsByRowIndex,(n,i)=>{i.getRowNode().id==null&&e.push(n)}),this.removeRowCtrls(e);let t={};return Ts(this.rowCtrlsByRowIndex,(n,i)=>{let r=i.getRowNode();t[r.id]=i}),this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(n=>{let i=this.rowCtrlsByRowIndex[n];i&&(i.destroyFirstPass(t),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[n]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){let{afterScroll:t}=e,n;this.stickyRowFeature&&RO()&&(n=this.getCellToRestoreFocusToAfterRefresh()||void 0);let i=this.firstRenderedRow,r=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let o=!1;if(this.stickyRowFeature){o=this.stickyRowFeature.checkStickyRows();let a=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();a&&this.updateContainerHeights(a)}let s=this.firstRenderedRow!==i||this.lastRenderedRow!==r;if(!(t&&!o&&!s)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!o),n!=null)){let a=this.getCellToRestoreFocusToAfterRefresh();n!=null&&a==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(n))}}removeRowCompsNotToDraw(e,t){let n={};e.forEach(o=>n[o]=!0);let r=Object.keys(this.rowCtrlsByRowIndex).filter(o=>!n[o]);this.removeRowCtrls(r,t)}calculateIndexesToDraw(e){let t=Xbe(this.firstRenderedRow,this.lastRenderedRow),n=(r,o)=>{let s=o.getRowNode().rowIndex;s!=null&&(s<this.firstRenderedRow||s>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(o)&&t.push(s)};Ts(this.rowCtrlsByRowIndex,n),Ts(e,n),t.sort((r,o)=>r-o);let i=[];for(let r=0;r<t.length;r++){let o=t[r],s=this.rowModel.getRow(o);s&&!s.sticky&&i.push(o)}return i}recycleRows(e,t=!1,n=!1){let i=this.calculateIndexesToDraw(e);(this.printLayout||n)&&(t=!1),this.removeRowCompsNotToDraw(i,!t);let r=[];i.forEach(o=>{let s=this.createOrUpdateRowCtrl(o,e,t,n);ne(s)&&r.push(s)}),e&&(n&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventService.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){let e=this.visibleColsService.isPinningLeft(),t=this.visibleColsService.isPinningRight();(this.pinningLeft!==e||t!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){let e=[];this.getFullWidthRowCtrls().forEach(t=>{let n=t.getRowNode().rowIndex;e.push(n.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){let t=this.mapRowNodes(e);return this.getAllRowCtrls().filter(n=>{if(!n.isFullWidth())return!1;let i=n.getRowNode();return!(t!=null&&!this.isRowInMap(i,t))})}createOrUpdateRowCtrl(e,t,n,i){let r,o=this.rowCtrlsByRowIndex[e];if(o||(r=this.rowModel.getRow(e),ne(r)&&ne(t)&&t[r.id]&&r.alreadyRendered&&(o=t[r.id],t[r.id]=null)),!o)if(r||(r=this.rowModel.getRow(e)),ne(r))o=this.createRowCon(r,n,i);else return;return r&&(r.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=o,o}destroyRowCtrls(e,t){let n=[];Ts(e,(i,r)=>{if(r){if(this.cachedRowCtrls&&r.isCacheable()){this.cachedRowCtrls.addRow(r);return}if(r.destroyFirstPass(!t),t){let o=r.instanceId;this.zombieRowCtrls[o]=r,n.push(()=>{r.destroySecondPass(),delete this.zombieRowCtrls[o]})}else r.destroySecondPass()}}),t&&(n.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),pCe(n))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){let e=this.getRowBuffer(),t=Qh(this.gos);return e*t}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let e,t;if(!this.rowModel.isRowsToRender())e=0,t=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.pageBoundsService.getFirstRow(),t=this.pageBoundsService.getLastRow();else{let a=this.getRowBufferInPixels(),l=this.ctrlsService.getGridBodyCtrl(),c=this.gos.get("suppressRowVirtualisation"),u=!1,d,h;do{let C=this.pageBoundsService.getPixelOffset(),{pageFirstPixel:S,pageLastPixel:_}=this.pageBoundsService.getCurrentPagePixelRange(),D=this.rowContainerHeightService.getDivStretchOffset(),F=l.getScrollFeature().getVScrollPosition(),I=F.top,E=F.bottom;c?(d=S+D,h=_+D):(d=Math.max(I+C-a,S)+D,h=Math.min(E+C+a,_)+D),this.firstVisibleVPixel=Math.max(I+C,S)+D,this.lastVisibleVPixel=Math.min(E+C,_)+D,u=this.ensureAllRowsInRangeHaveHeightsCalculated(d,h)}while(u);let p=this.rowModel.getRowIndexAtPixel(d),g=this.rowModel.getRowIndexAtPixel(h),m=this.pageBoundsService.getFirstRow(),v=this.pageBoundsService.getLastRow();p<m&&(p=m),g>v&&(g=v),e=p,t=g}let n=lr(this.gos,"normal"),i=this.gos.get("suppressMaxRenderedRowRestriction"),r=Math.max(this.getRowBuffer(),500);n&&!i&&t-e>r&&(t=e+r);let o=e!==this.firstRenderedRow,s=t!==this.lastRenderedRow;(o||s)&&(this.firstRenderedRow=e,this.lastRenderedRow=t,this.eventService.dispatchEvent({type:"viewportChanged",firstRow:e,lastRow:t}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){let n=this.pinnedRowModel?.ensureRowHeightsValid(),i=this.stickyRowFeature?.ensureRowHeightsValid(),r=this.rowModel.ensureRowHeightsValid(e,t,this.pageBoundsService.getFirstRow(),this.pageBoundsService.getLastRow());return(r||i)&&this.eventService.dispatchEvent({type:"recalculateRowBounds"}),i||r||n?(this.updateContainerHeights(),!0):!1}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){let i=e.getRowNode(),r=this.focusService.isRowNodeFocused(i),o=e.isEditing(),s=i.detail;return r||o||s?!!this.isRowPresent(i):!1}isRowPresent(e){return this.rowModel.isRowPresent(e)?this.paginationService?this.paginationService.isRowPresent(e):!0:!1}createRowCon(e,t,n){let i=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(i)return i;let r=this.gos.get("suppressAnimationFrame"),o=n&&!r&&!this.printLayout;return new Zh(e,this.beans,t,o,this.printLayout)}getRenderedNodes(){let e=this.rowCtrlsByRowIndex;return Object.values(e).map(t=>t.getRowNode())}getRowByPosition(e){let t,{rowIndex:n}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[n];break;case"bottom":t=this.bottomRowCtrls[n];break;default:t=this.rowCtrlsByRowIndex[n],t||(t=this.getStickyTopRowCtrls().find(i=>i.getRowNode().rowIndex===n)||null,t||(t=this.getStickyBottomRowCtrls().find(i=>i.getRowNode().rowIndex===n)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;let i=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!i}},dEe=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){let t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e==null||e.id==null)return null;let t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.getRowNode()!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){let t=e.id,n=this.entriesMap[t];delete this.entriesMap[t],Xr(this.entriesList,n)}removeFromCache(e){let t=e.getRowNode().id;delete this.entriesMap[t],Xr(this.entriesList,e)}getEntries(){return this.entriesList}},hEe=class extends j{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0,this.pinnedTopRows=new _q,this.pinnedBottomRows=new _q}wireBeans(e){this.beans=e}postConstruct(){this.setPinnedRowData(this.gos.get("pinnedTopRowData"),"top"),this.setPinnedRowData(this.gos.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",e=>this.setPinnedRowData(e.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",e=>this.setPinnedRowData(e.currentValue,"bottom")),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(e){return(e==="top"?this.pinnedTopRows:this.pinnedBottomRows).isEmpty()}isRowsToRender(e){return!this.isEmpty(e)}onGridStylesChanges(e){if(e.rowHeightChanged){let t=n=>{n.setRowHeight(n.rowHeight,!0)};this.pinnedBottomRows.forEach(t),this.pinnedTopRows.forEach(t)}}ensureRowHeightsValid(){let e=!1,t=0,n=i=>{if(i.rowHeightEstimated){let r=ju(this.gos,i);i.setRowTop(t),i.setRowHeight(r.height),t+=r.height,e=!0}};return this.pinnedBottomRows?.forEach(n),t=0,this.pinnedTopRows?.forEach(n),this.eventService.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventService.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){let n=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(e===void 0){n.clear();return}let i=pm(this.gos),r=t==="top"?gc.ID_PREFIX_TOP_PINNED:gc.ID_PREFIX_BOTTOM_PINNED,o=n.getIds(),s=[],a=new Set,l=0,c=-1;for(let u of e){let d=i?.({data:u,level:0,rowPinned:t})??r+this.nextId++;if(a.has(d)){X("Duplicate ID",d,"found for pinned row with data",u,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter.");continue}c++,a.add(d),s.push(d);let h=n.getById(d);if(h!==void 0)h.data!==u&&h.setData(u),l+=this.setRowTopAndRowIndex(h,l,c),o.delete(d);else{let p=new gc(this.beans);p.id=d,p.data=u,p.rowPinned=t,l+=this.setRowTopAndRowIndex(p,l,c),n.push(p)}}o.forEach(u=>{n.getById(u)?.clearRowTopAndRowIndex()}),n.removeAllById(o),n.setOrder(s)}setRowTopAndRowIndex(e,t,n){return e.setRowTop(t),e.setRowHeight(ju(this.gos,e).height),e.setRowIndex(n),e.rowHeight}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getPinnedTopRowCount(){return this.pinnedTopRows.getSize()}getPinnedBottomRowCount(){return this.pinnedBottomRows.getSize()}getPinnedTopRow(e){return this.pinnedTopRows.getByIndex(e)}getPinnedBottomRow(e){return this.pinnedBottomRows.getByIndex(e)}getPinnedRowById(e,t){return t==="top"?this.pinnedTopRows.getById(e):this.pinnedBottomRows.getById(e)}forEachPinnedRow(e,t){return e==="top"?this.pinnedTopRows.forEach(t):this.pinnedBottomRows.forEach(t)}getTotalHeight(e){let t=e.getSize();if(t===0)return 0;let n=e.getByIndex(t-1);return n===void 0?0:n.rowTop+n.rowHeight}},_q=class{constructor(){this.cache={},this.ordering=[]}getById(e){return this.cache[e]}getByIndex(e){let t=this.ordering[e];return this.cache[t]}push(e){this.cache[e.id]=e,this.ordering.push(e.id)}removeAllById(e){for(let t of e)delete this.cache[t];this.ordering=this.ordering.filter(t=>!e.has(t))}setOrder(e){this.ordering=e}forEach(e){this.ordering.forEach((t,n)=>{let i=this.cache[t];i&&e(i,n)})}clear(){this.ordering.length=0,this.cache={}}isEmpty(){return this.ordering.length===0}getSize(){return this.ordering.length}getIds(){return new Set(this.ordering)}};var fEe=class extends j{constructor(e){super(),this.state="needsLoading",this.version=0,this.id=e}getId(){return this.id}load(){this.state="loading",this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed",this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,t){this.successCommon(e,t)}pageLoaded(e,t,n){this.successCommon(e,{rowData:t,rowCount:n})}isRequestMostRecentAndLive(e){let t=e===this.version,n=this.isAlive();return t&&n}successCommon(e,t){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}dispatchLoadCompleted(e=!0){let t={type:"loadComplete",success:e,block:this};this.dispatchLocalEvent(t)}},pEe=class extends j{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();let e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=Qr(this.performCheckBlocksToLoad.bind(this),e))}getMaxConcurrentDatasourceRequests(){let e=this.gos.get("maxConcurrentDatasourceRequests");if(e==null)return 2;if(!(e<=0))return e}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){Xr(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchLocalEvent({type:"blockLoaded"}),this.activeBlockLoadsCount==0&&this.dispatchLocalEvent({type:"blockLoaderFinished"})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.gos.get("debug")&&Rs("RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}let e=this.getAvailableLoadingCount(),t=this.blocks.filter(n=>n.getState()==="needsLoading").slice(0,e);this.registerLoads(t.length),t.forEach(n=>n.load()),this.printCacheStatus()}getBlockState(){if(vc(this.gos))return this.rowModel.getBlockStates();let e={};return this.blocks.forEach(t=>{let{id:n,state:i}=t.getBlockStateJson();e[n]=i}),e}printCacheStatus(){this.gos.get("debug")&&Rs(`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}},gEe={version:qe,moduleName:"@ag-grid-community/row-node-block",beans:[pEe]},mEe=class{constructor(){this.root=null,this.end=null,this.cachedRange=[]}init(e){this.rowModel=e}reset(){this.root=null,this.end=null,this.cachedRange.length=0}setRoot(e){this.root=e,this.end=null,this.cachedRange.length=0}setEndRange(e){this.end=e,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){let e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(e,t)}return this.cachedRange}isInRange(e){return this.root===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(){return this.root&&this.root?.key===null&&(this.root=this.rowModel.getRowNode(this.root.id)??null),this.root}getEnd(){return this.end&&this.end?.key===null&&(this.end=this.rowModel.getRowNode(this.end.id)??null),this.end}truncate(e){let t=this.getRange();if(t.length===0)return{keep:[],discard:[]};let n=t[0].id===this.root.id,i=t.findIndex(r=>r.id===e.id);if(i>-1){let r=t.slice(0,i),o=t.slice(i+1);return this.setEndRange(e),n?{keep:r,discard:o}:{keep:o,discard:r}}else return{keep:t,discard:[]}}extend(e,t=!1){let n=this.getRoot();if(n==null){let r=this.getRange().slice();return t&&e.depthFirstSearch(o=>!o.group&&r.push(o)),r.push(e),this.setRoot(e),{keep:r,discard:[]}}if(this.rowModel.getNodesInRangeForSelection(n,e).find(r=>r.id===this.end?.id))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{let r=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:r}}}},vEe=class extends j{constructor(){super(...arguments),this.beanName="stylingService"}wireBeans(e){this.expressionService=e.expressionService}processAllCellClasses(e,t,n,i){this.processClassRules(void 0,e.cellClassRules,t,n,i),this.processStaticCellClasses(e,t,n)}processClassRules(e,t,n,i,r){if(t==null&&e==null)return;let o={},s={},a=(l,c)=>{l.split(" ").forEach(u=>{u.trim()!=""&&c(u)})};if(t){let l=Object.keys(t);for(let c=0;c<l.length;c++){let u=l[c],d=t[u],h;typeof d=="string"?h=this.expressionService.evaluate(d,n):typeof d=="function"&&(h=d(n)),a(u,p=>{h?o[p]=!0:s[p]=!0})}}e&&r&&Object.keys(e).forEach(l=>a(l,c=>{o[c]||(s[c]=!0)})),r&&Object.keys(s).forEach(r),Object.keys(o).forEach(i)}getStaticCellClasses(e,t){let{cellClass:n}=e;if(!n)return[];let i;return typeof n=="function"?i=n(t):i=n,typeof i=="string"&&(i=[i]),i||[]}processStaticCellClasses(e,t,n){this.getStaticCellClasses(e,t).forEach(r=>{n(r)})}};var yEe=class extends j{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;let{comp:t,eTopGuard:n,eBottomGuard:i,focusTrapActive:r,forceFocusOutWhenTabGuardsAreEmpty:o,isFocusableContainer:s,focusInnerElement:a,onFocusIn:l,onFocusOut:c,shouldStopEventPropagation:u,onTabKeyDown:d,handleKeyDown:h,eFocusableElement:p}=e;this.comp=t,this.eTopGuard=n,this.eBottomGuard=i,this.providedFocusInnerElement=a,this.eFocusableElement=p,this.focusTrapActive=!!r,this.forceFocusOutWhenTabGuardsAreEmpty=!!o,this.isFocusableContainer=!!s,this.providedFocusIn=l,this.providedFocusOut=c,this.providedShouldStopEventPropagation=u,this.providedOnTabKeyDown=d,this.providedHandleKeyDown=h}wireBeans(e){this.focusService=e.focusService}postConstruct(){this.createManagedBean(new rf(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)}))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;let e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;let t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}findNextElementOutsideAndFocus(e){let t=Yn(this.gos),n=this.focusService.findFocusableElements(t.body,null,!0),i=n.indexOf(e?this.eTopGuard:this.eBottomGuard);if(i===-1)return;let r,o;e?(r=0,o=i):(r=i+1,o=n.length);let s=n.slice(r,o),a=this.gos.get("tabIndex");s.sort((l,c)=>{let u=parseInt(l.getAttribute("tabindex")||"0"),d=parseInt(c.getAttribute("tabindex")||"0");return d===a?1:u===a?-1:u===0?1:d===0?-1:u-d}),s[e?s.length-1:0]?.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;let t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();let n=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),n&&(n.focus(),e.preventDefault())}focusInnerElement(e=!1){let t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;let t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},CEe=class extends j{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();let{eTopGuard:t,eBottomGuard:n,eFocusableElement:i}=this,r=[t,n],o={setTabIndex:m=>{r.forEach(v=>m!=null?v.setAttribute("tabindex",m):v.removeAttribute("tabindex"))}};this.addTabGuards(t,n);let{focusTrapActive:s=!1,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:d,shouldStopEventPropagation:h,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:g}=e;this.tabGuardCtrl=this.createManagedBean(new yEe({comp:o,focusTrapActive:s,eTopGuard:t,eBottomGuard:n,eFocusableElement:i,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:d,shouldStopEventPropagation:h,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:g}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){let t=Yn(this.gos).createElement("div"),n=e==="top"?"ag-tab-guard-top":"ag-tab-guard-bottom";return t.classList.add("ag-tab-guard",n),es(t,"presentation"),t}addTabGuards(e,t){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){let e=[this.eTopGuard,this.eBottomGuard];br(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,n){JO(t)||(t=t.getGui());let{eBottomGuard:i}=this;i?i.insertAdjacentElement("beforebegin",t):e(t,n)}},vY=class extends At{initialiseTabGuard(e){this.tabGuardFeature=this.createManagedBean(new CEe(this)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(e=!1){this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},wEe=0,bEe=200,SEe=class extends j{constructor(){super(...arguments),this.beanName="popupService",this.popupList=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.resizeObserverService=e.resizeObserverService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){let e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){let{eventSource:t,ePopup:n}=e,i=this.getPopupIndex(n);if(i!==-1){let p=this.popupList[i];p.alignedToElement=t}let r=t.getBoundingClientRect(),o=this.getParentRect(),s=this.keepXYWithinBounds(n,r.top-o.top,0),a=n.clientWidth>0?n.clientWidth:200;n.style.minWidth=`${a}px`;let c=o.right-o.left-a,u;this.gos.get("enableRtl")?(u=h(),u<0&&(u=d(),this.setAlignedStyles(n,"left")),u>c&&(u=0,this.setAlignedStyles(n,"right"))):(u=d(),u>c&&(u=h(),this.setAlignedStyles(n,"right")),u<0&&(u=0,this.setAlignedStyles(n,"left"))),n.style.left=`${u}px`,n.style.top=`${s}px`;function d(){return r.right-o.left-2}function h(){return r.left-o.left-a}}positionPopupUnderMouseEvent(e){let{ePopup:t,nudgeX:n,nudgeY:i,skipObserver:r}=e;this.positionPopup({ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:!0,skipObserver:r,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){let t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){let{ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:r,eventSource:o,alignSide:s="left",position:a="over",column:l,rowNode:c,type:u}=e,d=o.getBoundingClientRect(),h=this.getParentRect(),p=this.getPopupIndex(t);if(p!==-1){let m=this.popupList[p];m.alignedToElement=o}let g=()=>{let m=d.left-h.left;s==="right"&&(m-=t.offsetWidth-d.width);let v;return a==="over"?(v=d.top-h.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,d,h,e.nudgeY||0)==="under"?v=d.top-h.top+d.height:v=d.top-t.offsetHeight-(i||0)*2-h.top),{x:m,y:v}};this.positionPopup({ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:r,updatePosition:g,postProcessCallback:()=>this.callPostProcessPopup(u,t,o,null,l,c)})}shouldRenderUnderOrAbove(e,t,n,i){let r=n.bottom-t.bottom,o=t.top-n.top,s=e.offsetHeight+i;return r>s?"under":o>s||o>r?"above":"under"}setAlignedStyles(e,t){let n=this.getPopupIndex(e);if(n===-1)return;let i=this.popupList[n],{alignedToElement:r}=i;!r||(["right","left","over","above","under"].forEach(s=>{r.classList.remove(`ag-has-popup-positioned-${s}`),e.classList.remove(`ag-popup-positioned-${s}`)}),!t)||(r.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}callPostProcessPopup(e,t,n,i,r,o){let s=this.gos.getCallback("postProcessPopup");s&&s({column:r,rowNode:o,ePopup:t,type:e,eventSource:n,mouseEvent:i})}positionPopup(e){let{ePopup:t,keepWithinBounds:n,nudgeX:i,nudgeY:r,skipObserver:o,updatePosition:s}=e,a={width:0,height:0},l=(c=!1)=>{let{x:u,y:d}=s();c&&t.clientWidth===a.width&&t.clientHeight===a.height||(a.width=t.clientWidth,a.height=t.clientHeight,i&&(u+=i),r&&(d+=r),n&&(u=this.keepXYWithinBounds(t,u,1),d=this.keepXYWithinBounds(t,d,0)),t.style.left=`${u}px`,t.style.top=`${d}px`,e.postProcessCallback&&e.postProcessCallback())};if(l(),!o){let c=this.resizeObserverService.observeResize(t,()=>l(!0));setTimeout(()=>c(),bEe)}}getActivePopups(){return this.popupList.map(e=>e.element)}getPopupList(){return this.popupList}getParentRect(){let e=Yn(this.gos),t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),pK(t)}keepXYWithinBounds(e,t,n){let i=n===0,r=i?"clientHeight":"clientWidth",o=i?"top":"left",s=i?"height":"width",a=i?"scrollTop":"scrollLeft",l=Yn(this.gos),c=l.documentElement,u=this.getPopupParent(),d=e.getBoundingClientRect(),h=u.getBoundingClientRect(),p=l.documentElement.getBoundingClientRect(),g=u===l.body,m=Math.ceil(d[s]),C=g?(i?fK:$x)(c)+c[a]:u[r];g&&(C-=Math.abs(p[o]-h[o]));let S=C-m;return Math.min(Math.max(t,0),Math.abs(S))}addPopup(e){let t=Yn(this.gos),{eChild:n,ariaLabel:i,alwaysOnTop:r,positionCallback:o,anchorToElement:s}=e;if(!t)return X("could not find the document, document is empty"),{hideFunc:()=>{}};let a=this.getPopupIndex(n);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(n);let l=this.createPopupWrapper(n,i,!!r),c=this.addEventListenersToPopup(pe(B({},e),{wrapperEl:l}));return o&&o(),this.addPopupToPopupList(n,l,c,s),{hideFunc:c}}initialisePopupPosition(e){let n=this.getPopupParent().getBoundingClientRect();ne(e.style.top)||(e.style.top=`${n.top*-1}px`),ne(e.style.left)||(e.style.left=`${n.left*-1}px`)}createPopupWrapper(e,t,n){let i=this.getPopupParent(),r=document.createElement("div");return this.environment.applyThemeClasses(r),r.classList.add("ag-popup"),e.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||es(e,"dialog"),dm(e,t),r.appendChild(e),i.appendChild(r),n?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),r}handleThemeChange(e){if(e.themeChanged)for(let t of this.popupList)this.environment.applyThemeClasses(t.wrapper)}addEventListenersToPopup(e){let t=Yn(this.gos),n=this.getPopupParent(),{wrapperEl:i,eChild:r,closedCallback:o,afterGuiAttached:s,closeOnEsc:a,modal:l}=e,c=!1,u=g=>{if(!i.contains(Dn(this.gos)))return;g.key===G.ESCAPE&&!pc(g)&&p({keyboardEvent:g})},d=g=>p({mouseEvent:g}),h=g=>p({touchEvent:g}),p=(g={})=>{let{mouseEvent:m,touchEvent:v,keyboardEvent:C,forceHide:S}=g;!S&&(this.isEventFromCurrentPopup({mouseEvent:m,touchEvent:v},r)||c)||(c=!0,n.removeChild(i),t.removeEventListener("keydown",u),t.removeEventListener("mousedown",d),t.removeEventListener("touchstart",h),t.removeEventListener("contextmenu",d),this.eventService.removeEventListener("dragStarted",d),o&&o(m||v||C),this.removePopupFromPopupList(r))};return s&&s({hidePopup:p}),window.setTimeout(()=>{a&&t.addEventListener("keydown",u),l&&(t.addEventListener("mousedown",d),this.eventService.addEventListener("dragStarted",d),t.addEventListener("touchstart",h),t.addEventListener("contextmenu",d))},0),p}addPopupToPopupList(e,t,n,i){this.popupList.push({element:e,wrapper:t,hideFunc:n,instanceId:wEe++,isAnchored:!!i}),i&&this.setPopupPositionRelatedToElement(e,i)}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){let n=this.getPopupIndex(e);if(n===-1)return;let i=this.popupList[n];if(i.stopAnchoringPromise&&i.stopAnchoringPromise.then(o=>o&&o()),i.stopAnchoringPromise=void 0,i.isAnchored=!1,!t)return;let r=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:i.hideFunc});return i.stopAnchoringPromise=r,i.isAnchored=!0,r}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){let t=this.getPopupParent(),n=t.getBoundingClientRect(),{element:i,ePopup:r}=e,o=i.getBoundingClientRect(),s=d=>parseInt(d.substring(0,d.length-1),10),a=(d,h)=>{let p=n[d]-o[d],g=s(r.style[d]);return{initialDiff:p,lastDiff:p,initial:g,last:g,direction:h}},l=a("top",0),c=a("left",1),u=this.getFrameworkOverrides();return new $o(d=>{u.wrapIncoming(()=>{u.setInterval(()=>{let h=t.getBoundingClientRect(),p=i.getBoundingClientRect();if(p.top==0&&p.left==0&&p.height==0&&p.width==0){e.hidePopup();return}let m=(v,C)=>{let S=s(r.style[C]);v.last!==S&&(v.initial=S,v.last=S);let _=h[C]-p[C];if(_!=v.lastDiff){let D=this.keepXYWithinBounds(r,v.initial+v.initialDiff-_,v.direction);r.style[C]=`${D}px`,v.last=D}v.lastDiff=_};m(l,"top"),m(c,"left")},200).then(h=>{d(()=>{h!=null&&window.clearInterval(h)})})},"popupPositioning")})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){let{mouseEvent:n,touchEvent:i}=e,r=n||i;if(!r)return!1;let o=this.getPopupIndex(t);if(o===-1)return!1;for(let s=o;s<this.popupList.length;s++){let a=this.popupList[s];if(PCe(a.element,r))return!0}return this.isElementWithinCustomPopup(r.target)}isElementWithinCustomPopup(e){let t=Yn(this.gos);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){let n=this.getWrapper(e);n&&(n.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(n))}bringPopupToFront(e){let t=this.getPopupParent(),n=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),i=n.length,r=this.getWrapper(e);if(!r||i<=1||!t.contains(e))return;let o=[],s=[];for(let h of n)h!==r&&(h.classList.contains("ag-always-on-top")?s.push(h):o.push(h));let a=[],l=s.length,d=r.classList.contains("ag-always-on-top")||!l?[...o,...s,r]:[...o,r,...s];for(let h=0;h<=i;h++){let p=d[h];if(n[h]===d[h]||p===r)continue;p.querySelectorAll("div").forEach(m=>{m.scrollTop!==0&&a.push([m,m.scrollTop])}),h===0?t.insertAdjacentElement("afterbegin",p):d[h-1].insertAdjacentElement("afterend",p)}for(;a.length;){let h=a.pop();h[0].scrollTop=h[1]}}},_Ee=["touchstart","touchend","touchmove","touchcancel"],mN=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t()}setInterval(e,t){return new $o(n=>{n(window.setInterval(e,t))})}addEventListener(e,t,n,i){let r=Xh(_Ee,t);e.addEventListener(t,n,{capture:!!i,passive:r})}get shouldWrapOutgoing(){return!1}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`https://www.ag-grid.com/${this.frameworkName==="solid"?"react":this.frameworkName}-data-grid${e?`/${e}`:""}`}},EEe=class extends j{constructor(){super(...arguments),this.beanName="cellNavigationService"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.pinnedRowModel=e.pinnedRowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}getNextCellToFocus(e,t,n=!1){return n?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){let n=e===G.UP,i=e===G.DOWN,r=e===G.LEFT,o,s;if(n||i)s=n?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow(),o=t.column;else{let a=this.visibleColsService.getAllCols(),l=this.gos.get("enableRtl");s=t.rowIndex,o=r!==l?a[0]:Rt(a)}return{rowIndex:s,rowPinned:null,column:o}}getNextCellToFocusWithoutCtrlPressed(e,t){let n=t,i=!1;for(;!i;){switch(e){case G.UP:n=this.getCellAbove(n);break;case G.DOWN:n=this.getCellBelow(n);break;case G.RIGHT:this.gos.get("enableRtl")?n=this.getCellToLeft(n):n=this.getCellToRight(n);break;case G.LEFT:this.gos.get("enableRtl")?n=this.getCellToRight(n):n=this.getCellToLeft(n);break;default:n=null,X("unknown key for navigation ",e);break}n?i=this.isCellGoodToFocusOn(n):i=!0}return n}isCellGoodToFocusOn(e){let t=e.column,n;switch(e.rowPinned){case"top":n=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":n=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:n=this.rowModel.getRow(e.rowIndex);break}return n?!t.isSuppressNavigable(n):!1}getCellToLeft(e){if(!e)return null;let t=this.visibleColsService.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;let t=this.visibleColsService.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){let t=e.rowIndex,n=e.rowPinned,i=!1;if(this.isLastRowInContainer(e))switch(n){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.pageBoundsService.getFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}else n&&(i=!0);let r=this.rowModel.getRow(e.rowIndex),o=i?void 0:this.getNextStickyPosition(r);return o||{rowIndex:t+1,rowPinned:n}}getNextStickyPosition(e,t){if(!rD(this.gos)||!e||!e.sticky)return;let n=this.rowRenderer.getStickyTopRowCtrls().some(a=>a.getRowNode().rowIndex===e.rowIndex),i=[];n?i=[...this.rowRenderer.getStickyTopRowCtrls()].sort((a,l)=>a.getRowNode().rowIndex-l.getRowNode().rowIndex):i=[...this.rowRenderer.getStickyBottomRowCtrls()].sort((a,l)=>l.getRowNode().rowIndex-a.getRowNode().rowIndex);let r=t?-1:1,o=i.findIndex(a=>a.getRowNode().rowIndex===e.rowIndex),s=i[o+r];if(s)return{rowIndex:s.getRowNode().rowIndex,rowPinned:null}}getCellBelow(e){if(!e)return null;let t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){let t=e.rowPinned,n=e.rowIndex;return t==="top"?this.pinnedRowModel.getPinnedTopRowCount()-1<=n:t==="bottom"?this.pinnedRowModel.getPinnedBottomRowCount()-1<=n:this.pageBoundsService.getLastRow()<=n}getRowAbove(e){let t=e.rowIndex,n=e.rowPinned,i=n?t===0:t===this.pageBoundsService.getFirstRow(),r=!1;if(i)return n==="top"?null:n?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;n&&(r=!0);let o=this.rowModel.getRow(e.rowIndex),s=r?void 0:this.getNextStickyPosition(o,!0);return s||{rowIndex:t-1,rowPinned:n}}getCellAbove(e){if(!e)return null;let t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.pageBoundsService.getLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowCount()-1,rowPinned:"top"}}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){let t=this.visibleColsService.getAllCols(),n=e.rowIndex,i=e.rowPinned,r=this.visibleColsService.getColAfter(e.column);if(!r){r=t[0];let o=this.getRowBelow(e);if(St(o)||!o.rowPinned&&!(this.paginationService?.isRowInPage(o)??!0))return null;n=o?o.rowIndex:null,i=o?o.rowPinned:null}return{rowIndex:n,column:r,rowPinned:i}}getNextTabbedCellBackwards(e){let t=this.visibleColsService.getAllCols(),n=e.rowIndex,i=e.rowPinned,r=this.visibleColsService.getColBefore(e.column);if(!r){r=Rt(t);let o=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(St(o)||!o.rowPinned&&!(this.paginationService?.isRowInPage(o)??!0))return null;n=o?o.rowIndex:null,i=o?o.rowPinned:null}return{rowIndex:n,column:r,rowPinned:i}}},Wr=(e,t)=>{for(let n in t)t[n]=e;return t},Eq=B(B(B(B(B(B(B(B(B(B(B(B(B(B(B({},Wr("@ag-grid-community/core",{dispatchEvent:0,destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,getState:0,setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0,redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRow:0,getFirstDisplayedRowIndex:0,getLastDisplayedRow:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0,getModel:0,getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0,getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0,addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0,expireValueCache:0,getValue:0,getCellValue:0,showColumnMenuAfterButtonClick:0,showColumnMenuAfterMouseClick:0,showColumnMenu:0,hidePopupMenu:0,onSortChanged:0,getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0,setGridAriaProperty:0,refreshCells:0,flashCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0,addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getColumnDef:0,getColumnDefs:0,sizeColumnsToFit:0,setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumn:0,getDisplayNameForColumnGroup:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnVisible:0,setColumnsVisible:0,setColumnPinned:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0,moveColumn:0,moveColumnByIndex:0,moveColumns:0,setColumnWidth:0,setColumnWidths:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0,autoSizeColumn:0,autoSizeColumns:0,autoSizeAllColumns:0,undoCellEditing:0,redoCellEditing:0,getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0,getCurrentUndoSize:0,getCurrentRedoSize:0,isAnyFilterPresent:0,onFilterChanged:0,isColumnFilterPresent:0,getFilterInstance:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0,paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0,expandAll:0,collapseAll:0,onRowHeightChanged:0,setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0})),Wr("@ag-grid-community/client-side-row-model",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0})),Wr("@ag-grid-community/csv-export",{getDataAsCsv:0,exportDataAsCsv:0})),Wr("@ag-grid-community/infinite-row-model",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0})),Wr("@ag-grid-enterprise/advanced-filter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0})),Wr("@ag-grid-enterprise/charts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0})),Wr("@ag-grid-enterprise/clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0})),Wr("@ag-grid-enterprise/excel-export",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0})),Wr("@ag-grid-enterprise/master-detail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0})),Wr("@ag-grid-enterprise/menu",{showContextMenu:0,showColumnChooser:0,hideColumnChooser:0})),Wr("@ag-grid-enterprise/range-selection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0})),Wr("@ag-grid-enterprise/row-grouping",{addAggFunc:0,addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0,isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumn:0,removeValueColumns:0,addValueColumn:0,addValueColumns:0,setRowGroupColumns:0,removeRowGroupColumn:0,removeRowGroupColumns:0,addRowGroupColumn:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0,setPivotColumns:0,removePivotColumn:0,removePivotColumns:0,addPivotColumn:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0})),Wr("@ag-grid-enterprise/server-side-row-model",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0})),Wr("@ag-grid-enterprise/side-bar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0})),Wr("@ag-grid-enterprise/status-bar",{getStatusPanel:0})),gO={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},xEe=(e,t)=>e.eventService.dispatchEvent(t),yY=class{};Reflect.defineProperty(yY,"name",{value:"GridApi"});var DEe=class extends j{constructor(){super(),this.beanName="apiFunctionService",this.api=new yY,this.fns=pe(B({},gO),{dispatchEvent:xEe}),this.beans=null,this.preDestroyLink="";let{api:e}=this;for(let t in Eq)e[t]=this.makeApi(t)[t]}wireBeans(e){this.beans=e}postConstruct(){this.preDestroyLink=this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){let{fns:n,beans:i}=this;n!==gO&&(n[e]=i?.validationService?.validateApiFunction(e,t)??t)}makeApi(e){return{[e]:(...t)=>{let{beans:n,fns:{[e]:i}}=this;return i?i(n,...t):this.apiNotFound(e)}}}apiNotFound(e){let{beans:t,gos:n,preDestroyLink:i}=this;if(!t)X(`Grid API function ${e}() cannot be called as the grid has been destroyed.
Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${i}`);else{let r=Eq[e];n.assertModuleRegistered(r,`api.${e}`)&&X(`API function '${e}' not registered to module '${r}'`)}}destroy(){super.destroy(),this.fns=gO,this.beans=null}};function TEe(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionService").api}}var REe=class extends j{constructor(){super(...arguments),this.beanName="columnDefFactory"}buildColumnDefs(e,t,n){let i=[],r={};return e.forEach(o=>{let s=this.createDefFromColumn(o,t,n),a=!0,l=s,c=o.getOriginalParent(),u=null;for(;c;){let d=null;if(c.isPadding()){c=c.getOriginalParent();continue}let h=r[c.getGroupId()];if(h){h.children.push(l),a=!1;break}if(d=this.createDefFromGroup(c),d&&(d.children=[l],r[d.groupId]=d,l=d,c=c.getOriginalParent()),c!=null&&u===c){a=!1;break}u=c}a&&i.push(l)}),i}createDefFromGroup(e){let t=EO(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,n){let i=EO(e.getColDef());return i.colId=e.getColId(),i.width=e.getActualWidth(),i.rowGroup=e.isRowGroupActive(),i.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,i.pivot=e.isPivotActive(),i.pivotIndex=e.isPivotActive()?n.indexOf(e):null,i.aggFunc=e.isValueActive()?e.getAggFunc():null,i.hide=e.isVisible()?void 0:!0,i.pinned=e.isPinned()?e.getPinned():null,i.sort=e.getSort()?e.getSort():null,i.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,i}},IEe=class extends j{constructor(){super(...arguments),this.beanName="columnEventDispatcher"}visibleCols(e){this.eventService.dispatchEvent({type:"displayedColumnsChanged",source:e})}gridColumns(){this.eventService.dispatchEvent({type:"gridColumnsChanged"})}headerHeight(e){this.eventService.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"})}groupHeaderHeight(e){this.eventService.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}groupOpened(e){this.eventService.dispatchEvent({type:"columnGroupOpened",columnGroup:e.length===1?e[0]:void 0,columnGroups:e})}rowGroupChanged(e,t){this.eventService.dispatchEvent({type:"columnRowGroupChanged",columns:e,column:e.length===1?e[0]:null,source:t})}genericColumnEvent(e,t,n){this.eventService.dispatchEvent({type:e,columns:t,column:t.length===1?t[0]:null,source:n})}pivotModeChanged(){this.eventService.dispatchEvent({type:"columnPivotModeChanged"})}virtualColumnsChanged(e){this.eventService.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}newColumnsLoaded(e){this.eventService.dispatchEvent({type:"newColumnsLoaded",source:e})}everythingChanged(e){this.eventService.dispatchEvent({type:"columnEverythingChanged",source:e})}columnMoved(e){let{movedColumns:t,source:n,toIndex:i,finished:r}=e;this.eventService.dispatchEvent({type:"columnMoved",columns:t,column:t&&t.length===1?t[0]:null,toIndex:i,finished:r,source:n})}columnPinned(e,t){if(!e.length)return;let n=e.length===1?e[0]:null,i=this.getCommonValue(e,r=>r.getPinned());this.eventService.dispatchEvent({type:"columnPinned",pinned:i??null,columns:e,column:n,source:t})}columnVisible(e,t){if(!e.length)return;let n=e.length===1?e[0]:null,i=this.getCommonValue(e,r=>r.isVisible());this.eventService.dispatchEvent({type:"columnVisible",visible:i,columns:e,column:n,source:t})}getCommonValue(e,t){if(!e||e.length==0)return;let n=t(e[0]);for(let i=1;i<e.length;i++)if(n!==t(e[i]))return;return n}columnChanged(e,t,n){this.eventService.dispatchEvent({type:e,columns:t,column:t&&t.length==1?t[0]:null,source:n})}columnResized(e,t,n,i=null){e&&e.length&&this.eventService.dispatchEvent({type:"columnResized",columns:e,column:e.length===1?e[0]:null,flexColumns:i,finished:t,source:n})}},FEe=class extends j{constructor(){super(...arguments),this.beanName="columnGetStateService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService}getColumnState(){let e=this.columnModel.getColDefCols();if(St(e)||!this.columnModel.isAlive())return[];let n=this.columnModel.getAllCols().map(i=>this.createStateItemFromColumn(i));return this.orderColumnStateList(n),n}createStateItemFromColumn(e){let t=this.funcColsService.getRowGroupColumns(),n=this.funcColsService.getPivotColumns(),i=e.isRowGroupActive()?t.indexOf(e):null,r=e.isPivotActive()?n.indexOf(e):null,o=e.isValueActive()?e.getAggFunc():null,s=e.getSort()!=null?e.getSort():null,a=e.getSortIndex()!=null?e.getSortIndex():null,l=e.getFlex()!=null&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:s,sortIndex:a,aggFunc:o,rowGroup:e.isRowGroupActive(),rowGroupIndex:i,pivot:e.isPivotActive(),pivotIndex:r,flex:l}}orderColumnStateList(e){let t=this.columnModel.getCols(),n=new Map(t.map((i,r)=>[i.getColId(),r]));e.sort((i,r)=>{let o=n.has(i.colId)?n.get(i.colId):-1,s=n.has(r.colId)?n.get(r.colId):-1;return o-s})}},AEe=class extends j{constructor(){super(...arguments),this.beanName="columnGroupStateService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService}getColumnGroupState(){let e=[],t=this.columnModel.getColTree();return mc(null,t,n=>{Kr(n)&&e.push({groupId:n.getGroupId(),open:n.isExpanded()})}),e}resetColumnGroupState(e){let t=this.columnModel.getColDefColTree();if(!t)return;let n=[];mc(null,t,i=>{if(Kr(i)){let r=i.getColGroupDef(),o={groupId:i.getGroupId(),open:r?r.openByDefault:void 0};n.push(o)}}),this.setColumnGroupState(n,e)}setColumnGroupState(e,t){if(!this.columnModel.getColTree())return;this.columnAnimationService.start();let i=[];e.forEach(r=>{let o=r.groupId,s=r.open,a=this.columnModel.getProvidedColGroup(o);a&&a.isExpanded()!==s&&(a.setExpanded(s),i.push(a))}),this.visibleColsService.refresh(t,!0),i.length&&this.eventDispatcher.groupOpened(i),this.columnAnimationService.finish()}},MEe=class extends j{constructor(){super(...arguments),this.beanName="columnViewportService",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,n=!1){let i=this.visibleColsService.isBodyWidthDirty();if(!(e===this.scrollWidth&&t===this.scrollPosition&&!i)){if(this.scrollWidth=e,this.scrollPosition=t,this.visibleColsService.setBodyWidthDirty(),this.gos.get("enableRtl")){let o=this.visibleColsService.getBodyContainerWidth();this.viewportLeft=o-this.scrollPosition-this.scrollWidth,this.viewportRight=o-this.scrollPosition}else this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition;this.columnModel.isReady()&&this.checkViewportColumns(n)}}getHeadersToRender(e,t){let n;switch(e){case"left":n=this.rowsOfHeadersToRenderLeft[t];break;case"right":n=this.rowsOfHeadersToRenderRight[t];break;default:n=this.rowsOfHeadersToRenderCenter[t];break}return n||[]}extractViewportColumns(){let e=this.visibleColsService.getCenterCols();this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||this.isAnyParentAutoHeaderHeight(e)?!0:this.isColumnInRowViewport(e)}isAnyParentAutoHeaderHeight(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;let t=e.getLeft()||0,n=t+e.getActualWidth(),i=this.viewportLeft-200,r=this.viewportRight+200,o=t<i&&n<i,s=t>r&&n>r;return!o&&!s}getViewportColumns(){let e=this.visibleColsService.getLeftCols(),t=this.visibleColsService.getRightCols();return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.columnModel.isColSpanActive())return this.colsWithinViewport;let t=r=>{let o=r.getLeft();return ne(o)&&o>this.viewportLeft},n=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),i=this.visibleColsService.getColsCenter();return this.visibleColsService.getColsForRow(e,i,n,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventDispatcher.virtualColumnsChanged(e)}calculateHeaderRows(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={};let e={},t=this.visibleColsService.getLeftCols(),n=this.visibleColsService.getRightCols();this.headerColsWithinViewport.concat(t).concat(n).forEach(o=>e[o.getId()]=!0);let r=(o,s,a)=>{let l=!1;for(let c=0;c<o.length;c++){let u=o[c],d=!1;if(Wu(u))d=e[u.getId()]===!0;else{let p=u.getDisplayedChildren();p&&(d=r(p,s,a+1))}d&&(l=!0,s[a]||(s[a]=[]),s[a].push(u))}return l};r(this.visibleColsService.getTreeLeft(),this.rowsOfHeadersToRenderLeft,0),r(this.visibleColsService.getTreeRight(),this.rowsOfHeadersToRenderRight,0),r(this.visibleColsService.getTreeCenter(),this.rowsOfHeadersToRenderCenter,0)}extractViewport(){let e=i=>`${i.getId()}-${i.getPinned()||"normal"}`;this.extractViewportColumns();let t=this.getViewportColumns().map(e).join("#"),n=this.colsWithinViewportHash!==t;return n&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),n}},PEe=class extends j{constructor(){super(...arguments),this.beanName="agComponentUtils"}wireBeans(e){this.componentMetadataProvider=e.componentMetadataProvider}adaptFunction(e,t){let n=this.componentMetadataProvider.retrieve(e);return n&&n.functionAdapter?n.functionAdapter(t):null}adaptCellRendererFunction(e){class t{refresh(){return!1}getGui(){return this.eGui}init(i){let r=e(i),o=typeof r;if(o==="string"||o==="number"||o==="boolean"){this.eGui=CC("<span>"+r+"</span>");return}if(r==null){this.eGui=CC("<span></span>");return}this.eGui=r}}return t}doesImplementIComponent(e){return e?e.prototype&&"getGui"in e.prototype:!1}},kEe=class extends j{constructor(){super(...arguments),this.beanName="componentMetadataProvider"}wireBeans(e){this.agComponentUtils=e.agComponentUtils}postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},dragAndDropImageComponent:{mandatoryMethodList:["setIcon","setLabel"],optionalMethodList:[]},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(e){return this.componentMetaData[e]}},OEe=["rowPositionUtils","cellPositionUtils","headerPositionUtils","paginationAutoPageSizeService","apiFunctionService","gridApi","userComponentRegistry","agComponentUtils","componentMetadataProvider","resizeObserverService","userComponentFactory","rowContainerHeightService","horizontalResizeService","localeService","validationService","pinnedRowModel","dragService","visibleColsService","eventService","gos","popupService","selectionService","columnFilterService","quickFilterService","filterManager","columnModel","headerNavigationService","pageBoundsService","paginationService","pageBoundsListener","rowRenderer","expressionService","columnFactory","alignedGridsService","navigationService","valueCache","valueService","loggerFactory","autoWidthCalculator","filterMenuFactory","dragAndDropService","focusService","mouseEventService","environment","cellNavigationService","stylingService","scrollVisibleService","sortController","columnHoverService","columnAnimationService","selectableService","autoColService","controlsColService","changeDetectionService","animationFrameService","undoRedoService","columnDefFactory","rowCssClassCalculator","rowNodeBlockLoader","rowNodeSorter","ctrlsService","pinnedWidthService","rowNodeEventThrottle","ctrlsFactory","dataTypeService","syncService","overlayService","stateService","expansionService","apiEventService","ariaAnnouncementService","menuService","columnApplyStateService","columnEventDispatcher","columnMoveService","columnAutosizeService","columnGetStateService","columnGroupStateService","columnSizeService","funcColsService","columnNameService","columnViewportService","pivotResultColsService","showRowGroupColsService"],xq=Object.fromEntries(OEe.map((e,t)=>[e,t]));function NEe(e,t){let n=(e.beanName?xq[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,i=(t.beanName?xq[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return n-i}function LEe(e,t){return e?.beanName==="gridDestroyService"?-1:0}var VEe=class extends j{constructor(){super(...arguments),this.beanName="ctrlsFactory",this.registry={}}register(e){this.registry[e.name]=e.classImp}getInstance(e,...t){let n=this.registry[e];if(n!=null)return new n(...t)}},BEe=class extends j{constructor(){super(...arguments),this.beanName="ctrlsService",this.params={gridCtrl:void 0,gridBodyCtrl:void 0,center:void 0,left:void 0,right:void 0,bottomCenter:void 0,bottomLeft:void 0,bottomRight:void 0,topCenter:void 0,topLeft:void 0,topRight:void 0,stickyTopCenter:void 0,stickyTopLeft:void 0,stickyTopRight:void 0,stickyBottomCenter:void 0,stickyBottomLeft:void 0,stickyBottomRight:void 0,fakeHScrollComp:void 0,fakeVScrollComp:void 0,gridHeaderCtrl:void 0,centerHeader:void 0,leftHeader:void 0,rightHeader:void 0},this.ready=!1,this.readyCallbacks=[],this.runReadyCallbacksAsync=!1}wireBeans(e){this.runReadyCallbacksAsync=e.frameworkOverrides.runWhenReadyAsync?.()??!1}postConstruct(){this.addEventListener("ready",()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach(e=>e(this.params)),this.readyCallbacks.length=0)},this.runReadyCallbacksAsync)}updateReady(){this.ready=Object.values(this.params).every(e=>e?.isAlive()??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{let n=this.readyCallbacks.indexOf(t);n>=0&&this.readyCallbacks.splice(n,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){let{leftHeader:e,centerHeader:t,rightHeader:n}=this.params;return[e,n,t]}getHeaderRowContainerCtrl(e){let t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}},GEe=class extends j{constructor(){super(...arguments),this.beanName="cellPositionUtils"}createId(e){let{rowIndex:t,rowPinned:n,column:i}=e;return this.createIdFromValues({rowIndex:t,column:i,rowPinned:n})}createIdFromValues(e){let{rowIndex:t,rowPinned:n,column:i}=e;return`${t}.${n??"null"}.${i.getId()}`}equals(e,t){let n=e.column===t.column,i=e.rowPinned===t.rowPinned,r=e.rowIndex===t.rowIndex;return n&&i&&r}},HEe=class extends j{constructor(){super(...arguments),this.beanName="rowNodeEventThrottle",this.events=[]}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowModel=e.rowModel}postConstruct(){kn(this.gos)&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e,t){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(e);return}this.events.push(e);let n=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(i=>this.eventService.dispatchEvent(i)),this.events=[]};t?n():(this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(n)),this.dispatchExpandedDebounced())}},zEe=class extends j{constructor(){super(...arguments),this.beanName="rowPositionUtils"}wireBeans(e){this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.pageBoundsService=e.pageBoundsService}getFirstRow(){let e=0,t;return this.pinnedRowModel.getPinnedTopRowCount()?t="top":this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(t="bottom"),t===void 0?null:{rowIndex:e,rowPinned:t}}getLastRow(){let e,t=null,n=this.pinnedRowModel.getPinnedBottomRowCount(),i=this.pinnedRowModel.getPinnedTopRowCount();return n?(t="bottom",e=n-1):this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getLastRow()):i&&(t="top",e=i-1),e===void 0?null:{rowIndex:e,rowPinned:t}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRow(e.rowIndex);case"bottom":return this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}before(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(ne(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}},Dq={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},Tq={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},Rq={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},UEe=class extends j{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.ancestorThemeClasses=[],this.sizesMeasured=!1,this.gridTheme=null}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.eGridDiv=e.eGridDiv}postConstruct(){this.addManagedPropertyListener("theme",()=>this.handleThemeGridOptionChange()),this.handleThemeGridOptionChange(),this.addDestroyFunc(()=>this.stopUsingTheme()),this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.ancestorThemeClasses=this.readAncestorThemeClasses(),this.setUpThemeClassObservers(),this.getSizeEl(Dq),this.getSizeEl(Tq),this.getSizeEl(Rq)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(Dq)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(Tq)}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(Rq)}hasMeasuredSizes(){return this.sizesMeasured}getGridThemeClass(){return this.gridTheme?.getCssClass()||null}getThemeClasses(){return this.gridTheme?[this.gridTheme.getCssClass()]:this.ancestorThemeClasses}applyThemeClasses(e){let t=this.getThemeClasses();for(let n of Array.from(e.classList))n.startsWith("ag-theme-")&&!t.includes(n)&&e.classList.remove(n);e.classList.add(...t)}refreshRowHeightVariable(){let e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gos.get("rowHeight");if(t==null||isNaN(t)||!isFinite(t))return e!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;let n=`${t}px`;return e!=n?(this.eGridDiv.style.setProperty("--ag-line-height",n),t):e!=""?parseFloat(e):-1}getCSSVariablePixelValue(e){let t=this.lastKnownValues.get(e);if(t!=null)return t;let n=this.measureSizeEl(e);return n==="detached"||n==="no-styles"?e.defaultValue:(this.lastKnownValues.set(e,n),n)}measureSizeEl(e){let t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";let n=t.offsetWidth;return n===Iq?"no-styles":(this.sizesMeasured=!0,n)}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;let n=this.eMeasurementContainer;n||(n=this.eMeasurementContainer=document.createElement("div"),n.className="ag-measurement-container",this.gos.get("theme")&&this.applyThemeClasses(n),this.eGridDiv.appendChild(n)),t=document.createElement("div"),t.style.width=`var(${e.cssName}, ${Iq}px)`,n.appendChild(t),this.sizeEls.set(e,t);let i=this.measureSizeEl(e);i==="no-styles"&&X(`no value for ${e.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e.defaultValue} will be used and updated when styles load.`);let r=this.resizeObserverService.observeResize(t,()=>{let o=this.measureSizeEl(e);o==="detached"||o==="no-styles"||(this.lastKnownValues.set(e,o),o!==i&&(i=o,this.fireGridStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>r()),t}fireGridStylesChangedEvent(e){this.eventService.dispatchEvent({type:"gridStylesChanged",[e]:!0})}setUpThemeClassObservers(){let e=new MutationObserver(()=>{let n=this.readAncestorThemeClasses();jEe(n,this.ancestorThemeClasses)||(this.ancestorThemeClasses=n,this.fireGridStylesChangedEvent("themeChanged"))}),t=this.eGridDiv;for(;t;)e.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement;this.addDestroyFunc(()=>e.disconnect())}readAncestorThemeClasses(){let e=this.eGridDiv,t=[];for(;e;){let n=Array.from(e.classList).filter(i=>i.startsWith("ag-theme-"));for(let i of n)t.includes(i)||t.unshift(i);e=e.parentElement}return Object.freeze(t)}handleThemeGridOptionChange(){let{gos:e,eMeasurementContainer:t,gridTheme:n}=this,i=e.get("theme")||null;i!==n&&(n?.stopUse(),this.gridTheme=i,i?.startUse({loadThemeGoogleFonts:e.get("loadThemeGoogleFonts"),container:this.eGridDiv}),t&&this.applyThemeClasses(t),this.fireGridStylesChangedEvent("themeChanged"))}stopUsingTheme(){this.gridTheme?.stopUse(),this.gridTheme=null}},jEe=(e,t)=>e.length===t.length&&e.findIndex((n,i)=>e[i]!==t[i])===-1,Iq=15538,WEe=class extends j{constructor(){super(...arguments),this.beanName="eventService",this.globalEventService=new fm}wireBeans(e){this.globalEventListener=e.globalEventListener,this.globalSyncEventListener=e.globalSyncEventListener}postConstruct(){if(this.globalEventListener){let e=Wx(this.gos);this.addGlobalListener(this.globalEventListener,e)}this.globalSyncEventListener&&this.addGlobalListener(this.globalSyncEventListener,!1)}addEventListener(e,t,n){this.globalEventService.addEventListener(e,t,n)}removeEventListener(e,t,n){this.globalEventService.removeEventListener(e,t,n)}addGlobalListener(e,t=!1){this.globalEventService.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalEventService.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalEventService.dispatchEvent(this.gos.addGridCommonParams(e))}dispatchEventOnce(e){this.globalEventService.dispatchEventOnce(this.gos.addGridCommonParams(e))}},vN=class Ds extends j{constructor(){super(...arguments),this.beanName="focusService"}wireBeans(t){this.eGridDiv=t.eGridDiv,this.columnModel=t.columnModel,this.visibleColsService=t.visibleColsService,this.headerNavigationService=t.headerNavigationService,this.headerPositionUtils=t.headerPositionUtils,this.rowRenderer=t.rowRenderer,this.rowPositionUtils=t.rowPositionUtils,this.cellPositionUtils=t.cellPositionUtils,this.navigationService=t.navigationService,this.ctrlsService=t.ctrlsService,this.filterManager=t.filterManager,this.rangeService=t.rangeService,this.advancedFilterService=t.advancedFilterService,this.overlayService=t.overlayService}static addKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",Ds.toggleKeyboardMode),t.addEventListener("mousedown",Ds.toggleKeyboardMode))}static removeKeyboardModeEvents(t){this.instanceCount>0||(t.removeEventListener("keydown",Ds.toggleKeyboardMode),t.removeEventListener("mousedown",Ds.toggleKeyboardMode))}static toggleKeyboardMode(t){let n=Ds.keyboardModeActive,i=t.type==="keydown";i&&(t.ctrlKey||t.metaKey||t.altKey)||n!==i&&(Ds.keyboardModeActive=i)}postConstruct(){let t=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:t,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:t,columnRowGroupChanged:t}),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(this,n=>{this.gridCtrl=n.gridCtrl})}registerKeyboardFocusEvents(){let t=Yn(this.gos);Ds.addKeyboardModeEvents(t),Ds.instanceCount++,this.addDestroyFunc(()=>{Ds.instanceCount--,Ds.removeKeyboardModeEvents(t)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;let t=this.focusedCellPosition.column,n=this.columnModel.getCol(t.getId());t!==n&&this.clearFocusedCell()}isKeyboardMode(){return Ds.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(Dn(this.gos),Zh.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(Dn(this.gos),cD.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(t,n){let i=t;for(;i;){if(fC(this.gos,i,n))return!1;i=i.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(t){return this.isCellRestoreFocused(t)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}clearRestoreFocus(){this.restoredFocusedCellPosition=null,this.awaitRestoreFocusedCell=!1}restoreFocusedCell(t,n){this.awaitRestoreFocusedCell=!0,setTimeout(()=>{this.awaitRestoreFocusedCell&&(this.setRestoreFocusedCell(t),n())})}isCellRestoreFocused(t){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.restoredFocusedCellPosition)}setRestoreFocusedCell(t){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=t)}getFocusEventParams(t){let{rowIndex:n,rowPinned:i,column:r}=t,o={rowIndex:n,rowPinned:i,column:r,isFullWidthCell:!1},s=this.rowRenderer.getRowByPosition({rowIndex:n,rowPinned:i});return s&&(o.isFullWidthCell=s.isFullWidth()),o}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;let t=this.getFocusEventParams(this.focusedCellPosition);this.focusedCellPosition=null,this.eventService.dispatchEvent(B({type:"cellFocusCleared"},t))}setFocusedCell(t){let{column:n,rowIndex:i,rowPinned:r,forceBrowserFocus:o=!1,preventScrollOnBrowserFocus:s=!1}=t,a=this.columnModel.getCol(n);if(!a){this.focusedCellPosition=null;return}this.focusedCellPosition={rowIndex:i,rowPinned:fc(r),column:a},this.eventService.dispatchEvent(pe(B({type:"cellFocused"},this.getFocusEventParams(this.focusedCellPosition)),{forceBrowserFocus:o,preventScrollOnBrowserFocus:s}))}isCellFocused(t){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.focusedCellPosition)}isRowNodeFocused(t){return this.isRowFocused(t.rowIndex,t.rowPinned)}isHeaderWrapperFocused(t){if(this.focusedHeaderPosition==null)return!1;let n=t.getColumnGroupChild(),i=t.getRowIndex(),r=t.getPinned(),{column:o,headerRowIndex:s}=this.focusedHeaderPosition;return n===o&&i===s&&r==o.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(t,n){this.focusedHeaderPosition={headerRowIndex:t,column:n}}isHeaderFocusSuppressed(){return this.gos.get("suppressHeaderFocus")||this.overlayService.isExclusive()}isCellFocusSuppressed(){return this.gos.get("suppressCellFocus")||this.overlayService.isExclusive()}focusHeaderPosition(t){if(this.isHeaderFocusSuppressed())return!1;let{direction:n,fromTab:i,allowUserOverride:r,event:o,fromCell:s,rowWithoutSpanValue:a}=t,{headerPosition:l}=t;if(s&&this.filterManager?.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(l);if(r){let c=this.getFocusedHeader(),u=this.headerNavigationService.getHeaderRowCount();if(i){let d=this.gos.getCallback("tabToNextHeader");d&&(l=this.getHeaderPositionFromUserFunc({userFunc:d,direction:n,currentPosition:c,headerPosition:l,headerRowCount:u}))}else{let d=this.gos.getCallback("navigateToNextHeader");if(d&&o){let h={key:o.key,previousHeaderPosition:c,nextHeaderPosition:l,headerRowCount:u,event:o};l=d(h)}}}return l?this.focusProvidedHeaderPosition({headerPosition:l,direction:n,event:o,fromCell:s,rowWithoutSpanValue:a}):!1}focusHeaderPositionFromUserFunc(t){if(this.isHeaderFocusSuppressed())return!1;let{userFunc:n,headerPosition:i,direction:r,event:o}=t,s=this.getFocusedHeader(),a=this.headerNavigationService.getHeaderRowCount(),l=this.getHeaderPositionFromUserFunc({userFunc:n,direction:r,currentPosition:s,headerPosition:i,headerRowCount:a});return!!l&&this.focusProvidedHeaderPosition({headerPosition:l,direction:r,event:o})}getHeaderPositionFromUserFunc(t){let{userFunc:n,direction:i,currentPosition:r,headerPosition:o,headerRowCount:s}=t,l=n({backwards:i==="Before",previousHeaderPosition:r,nextHeaderPosition:o,headerRowCount:s});return l===!0||l===null?(l===null&&X("Since v31.3 Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),r):l===!1?null:l}focusProvidedHeaderPosition(t){let{headerPosition:n,direction:i,fromCell:r,rowWithoutSpanValue:o,event:s}=t,{column:a,headerRowIndex:l}=n;if(l===-1)return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(n):this.focusGridView(a);this.headerNavigationService.scrollToColumn(a,i);let u=this.ctrlsService.getHeaderRowContainerCtrl(a.getPinned())?.focusHeader(n.headerRowIndex,a,s)||!1;return u&&(o!=null||r)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(o??-1),u}focusFirstHeader(){if(this.overlayService.isExclusive()&&this.focusOverlay())return!0;let t=this.visibleColsService.getAllCols()[0];if(!t)return!1;t.getParent()&&(t=this.visibleColsService.getColGroupAtLevel(t,0));let n=this.headerPositionUtils.getHeaderIndexToFocus(t,0);return this.focusHeaderPosition({headerPosition:n,rowWithoutSpanValue:0})}focusLastHeader(t){if(this.overlayService.isExclusive()&&this.focusOverlay(!0))return!0;let n=this.headerNavigationService.getHeaderRowCount()-1,i=Rt(this.visibleColsService.getAllCols());return this.focusHeaderPosition({headerPosition:{headerRowIndex:n,column:i},rowWithoutSpanValue:-1,event:t})}focusPreviousFromFirstCell(t){return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(t)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(t,n){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===t&&this.focusedCellPosition.rowPinned===fc(n)}findFocusableElements(t,n,i=!1){let r=xwe,o=hK;n&&(o+=", "+n),i&&(o+=', [tabindex="-1"]');let s=Array.prototype.slice.apply(t.querySelectorAll(r)).filter(c=>Ca(c)),a=Array.prototype.slice.apply(t.querySelectorAll(o));return a.length?((c,u)=>c.filter(d=>u.indexOf(d)===-1))(s,a):s}focusInto(t,n=!1,i=!1){let r=this.findFocusableElements(t,null,i),o=n?Rt(r):r[0];return o?(o.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(t,n){if(!n)return null;let i=this.findFocusableElements(t),r=i.indexOf(n);if(r===-1)return null;let o=-1;for(let s=r-1;s>=0;s--)if(i[s].classList.contains("ag-tab-guard-top")){o=s;break}return o<=0?null:i[o-1]}findNextFocusableElement(t=this.eGridDiv,n,i){let r=this.findFocusableElements(t,n?':not([tabindex="-1"])':null),o=Dn(this.gos),s;n?s=r.findIndex(l=>l.contains(o)):s=r.indexOf(o);let a=s+(i?-1:1);return a<0||a>=r.length?null:r[a]}isTargetUnderManagedComponent(t,n){if(!n)return!1;let i=t.querySelectorAll(`.${rf.FOCUS_MANAGED_CLASS}`);if(!i.length)return!1;for(let r=0;r<i.length;r++)if(i[r].contains(n))return!0;return!1}findTabbableParent(t,n=5){let i=0;for(;t&&IO(t)===null&&++i<=n;)t=t.parentElement;return IO(t)===null?null:t}focusOverlay(t){let n=this.overlayService.isVisible()&&this.overlayService.getOverlayWrapper()?.getGui();return!!n&&this.focusInto(n,t)}focusGridViewFailed(t,n){return n&&this.focusOverlay(t)||t&&this.focusLastHeader()}focusGridView(t,n=!1,i=!0){if(this.overlayService.isExclusive())return i&&this.focusOverlay(n);if(this.isCellFocusSuppressed())return n&&!this.isHeaderFocusSuppressed()?this.focusLastHeader():i&&this.focusOverlay(n)?!0:this.focusNextGridCoreContainer(!1);let r=n?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(r){let{rowIndex:o,rowPinned:s}=r;if(t??(t=this.getFocusedHeader()?.column),t&&o!==void 0&&o!==null)return this.navigationService.ensureCellVisible({rowIndex:o,column:t,rowPinned:s}),n&&this.rowRenderer.getRowByPosition(r)?.isFullWidth()&&this.navigationService.tryToFocusFullWidthRow(r,n)||(this.setFocusedCell({rowIndex:o,column:t,rowPinned:fc(s),forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:o,rowPinned:s,column:t})),!0}return!!(i&&this.focusOverlay(n)||n&&this.focusLastHeader())}isGridFocused(){let t=Dn(this.gos);return!!t&&this.eGridDiv.contains(t)}focusNextGridCoreContainer(t,n=!1){return!n&&this.gridCtrl.focusNextInnerContainer(t)?!0:((n||!t&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(t),!1)}focusAdvancedFilter(t){return this.advancedFilterFocusColumn=t?.column,this.advancedFilterService?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(t,n){let i=(n?void 0:this.advancedFilterFocusColumn)??this.visibleColsService.getAllCols()?.[0];return t?this.focusHeaderPosition({headerPosition:{column:i,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(i)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}addFocusableContainer(t){this.gridCtrl.addFocusableContainer(t)}removeFocusableContainer(t){this.gridCtrl.removeFocusableContainer(t)}focusGridInnerElement(t){return this.gridCtrl.focusInnerElement(t)}allowFocusForNextGridCoreContainer(t){this.gridCtrl.allowFocusForNextCoreContainer(t)}};vN.keyboardModeActive=!1;vN.instanceCount=0;var qEe=vN,KEe=class extends j{constructor(){super(...arguments),this.beanName="pinnedWidthService"}wireBeans(e){this.visibleColsService=e.visibleColsService}postConstruct(){let e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){let e=lr(this.gos,"print"),t=e?0:this.visibleColsService.getColsLeftWidth(),n=e?0:this.visibleColsService.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:"leftPinnedWidthChanged"})),n!=this.rightWidth&&(this.rightWidth=n,this.eventService.dispatchEvent({type:"rightPinnedWidthChanged"}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}},YEe=class extends j{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}wireBeans(e){this.beans=e,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}setComp(e,t,n){this.view=e,this.eGridHostDiv=t,this.eGui=n,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());let{dragAndDropService:i,mouseEventService:r,ctrlsService:o,resizeObserverService:s}=this.beans,a={getContainer:()=>this.eGui,isInterestedIn:c=>c===1||c===0,getIconName:()=>"notAllowed"};i.addDropTarget(a),this.addDestroyFunc(()=>i.removeDropTarget(a)),r.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new gN(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr"),this.updateGridThemeClass(),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)});let l=s.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>l()),o.register("gridCtrl",this)}isDetailGrid(){return this.focusService.findTabbableParent(this.getGui())?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){let e=this.beans;return{paginationSelector:e.paginationService?.getPaginationSelector(),gridHeaderDropZonesSelector:e.columnDropZonesService?.getDropZoneSelector(),sideBarSelector:e.sideBarService?.getSideBarSelector(),statusBarSelector:e.statusBarService?.getStatusPanelSelector(),watermarkSelector:e.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){this.eventService.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){let t=this.getFocusableContainers(),{indexWithFocus:n,nextIndex:i}=this.getNextFocusableIndex(t,e);if(i<0||i>=t.length)return!1;if(i===0){if(n>0){let r=this.visibleColsService.getAllCols(),o=Rt(r);if(this.focusService.focusGridView(o,!0))return!0}return!1}return this.focusContainer(t[i],e)}focusInnerElement(e){let t=this.gos.getCallback("focusGridInnerElement");if(t&&t({fromBottom:!!e}))return!0;let n=this.getFocusableContainers(),i=this.visibleColsService.getAllCols();if(e){if(n.length>1)return this.focusContainer(Rt(n),!0);let r=Rt(i);if(this.focusService.focusGridView(r,!0))return!0}if(this.gos.get("headerHeight")===0||this.focusService.isHeaderFocusSuppressed()){if(this.focusService.focusGridView(i[0]))return!0;for(let r=1;r<n.length;r++)if(this.focusService.focusInto(n[r].getGui()))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){let t=this.view.getFocusableContainers(),{nextIndex:n,indexWithFocus:i}=this.getNextFocusableIndex(t,e);if(i===-1||n<0||n>=t.length)return;let r=t[n];r.setAllowFocus?.(!0),setTimeout(()=>{r.setAllowFocus?.(!1)})}getNextFocusableIndex(e,t){let n=Dn(this.gos),i=e.findIndex(o=>o.getGui().contains(n)),r=i+(t?-1:1);return{indexWithFocus:i,nextIndex:r}}focusContainer(e,t){e.setAllowFocus?.(!0);let n=this.focusService.focusInto(e.getGui(),t);return e.setAllowFocus?.(!1),n}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}updateGridThemeClass(){let e=this.beans.environment.getGridThemeClass();e&&this.view.setGridThemeClass(e)}handleThemeChange(e){e.themeChanged&&this.updateGridThemeClass()}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},QEe=class extends vY{constructor(e){super(),this.gridBody=fe,this.sideBar=fe,this.pagination=fe,this.rootWrapperBody=fe,this.eGridDiv=e}postConstruct(){let e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:o=>this.addCssClass(o),setGridThemeClass:o=>this.addCssClass(o),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:o=>{this.getGui().style.userSelect=o??"",this.getGui().style.webkitUserSelect=o??""},setCursor:o=>{this.getGui().style.cursor=o??""}},t=this.createManagedBean(new YEe),n=t.getOptionalSelectors(),i=this.createTemplate(n),r=[g_e,...Object.values(n).filter(o=>!!o)];this.setTemplate(i,r),t.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:o=>t.focusInnerElement(o),forceFocusOutWhenTabGuardsAreEmpty:!0})}insertGridIntoDom(){let e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(e),this.gos.get("debug")&&Rs("Grid removed from DOM")})}updateLayoutClasses(e,t){let n=this.rootWrapperBody.classList;n.toggle("ag-layout-auto-height",t.autoHeight),n.toggle("ag-layout-normal",t.normal),n.toggle("ag-layout-print",t.print),this.addOrRemoveCssClass("ag-layout-auto-height",t.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",t.normal),this.addOrRemoveCssClass("ag-layout-print",t.print)}createTemplate(e){let t=e.gridHeaderDropZonesSelector?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",n=e.sideBarSelector?'<ag-side-bar data-ref="sideBar"></ag-side-bar>':"",i=e.statusBarSelector?"<ag-status-bar></ag-status-bar>":"",r=e.watermarkSelector?"<ag-watermark></ag-watermark>":"",o=e.paginationSelector?'<ag-pagination data-ref="pagination"></ag-pagination>':"";return`<div class="ag-root-wrapper" role="presentation">
                ${t}
                <div class="ag-root-wrapper-body" data-ref="rootWrapperBody" role="presentation">
                    <ag-grid-body data-ref="gridBody"></ag-grid-body>
                    ${n}
                </div>
                ${i}
                ${o}
                ${r}
            </div>`}getFocusableElement(){return this.rootWrapperBody}forceFocusOutOfContainer(e=!1){if(!e&&this.pagination?.isDisplayed()){this.pagination.forceFocusOutOfContainer(e);return}super.forceFocusOutOfContainer(e)}getFocusableContainers(){let e=[this.gridBody];return[this.sideBar,this.pagination].forEach(t=>{t&&e.push(t)}),e.filter(t=>Ca(t.getGui()))}},XEe=class extends j{constructor(){super(...arguments),this.beanName="alignedGridsService",this.consuming=!1}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.ctrlsService=e.ctrlsService,this.columnApplyStateService=e.columnApplyStateService}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[],t=typeof e=="function";typeof e=="function"&&(e=e());let n=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return e.map(r=>{if(!r){kt("alignedGrids contains an undefined option."),t||kt(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),kt(n());return}if(this.isGridApi(r))return r;let o=r;return"current"in o?o.current?.api:(o.api||kt(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${n()}`),o.api)}).filter(r=>!!r&&!r.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){let e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach(t=>{t.isDestroyed()||t.dispatchEvent(e)})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){let n=[];return e.columns?e.columns.forEach(i=>{n.push(t(i))}):e.column&&n.push(t(e.column)),n}getMasterColumns(e){return this.extractDataFromEvent(e,t=>t)}getColumnIds(e){return this.extractDataFromEvent(e,t=>t.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(e);break}case"columnGroupOpened":{this.processGroupOpenedEvent(e);break}case"columnPivotChanged":X("pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(e){let{columnModel:t}=this;e.columnGroups.forEach(n=>{let i=null;n&&(i=t.getProvidedColGroup(n.getGroupId())),!(n&&!i)&&t.setColumnGroupOpened(i,n.isExpanded(),"alignedGridChanged")})}processColumnEvent(e){let t=e.column,n=null;if(t&&(n=this.columnModel.getColDefCol(t.getColId())),t&&!n)return;let i=this.getMasterColumns(e),{columnApplyStateService:r,columnSizeService:o,ctrlsService:s}=this;switch(e.type){case"columnMoved":{let u=e.api.getColumnState().map(d=>({colId:d.colId}));r.applyColumnState({state:u,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{let u=e.api.getColumnState().map(d=>({colId:d.colId,hide:d.hide}));r.applyColumnState({state:u},"alignedGridChanged")}break;case"columnPinned":{let u=e.api.getColumnState().map(d=>({colId:d.colId,pinned:d.pinned}));r.applyColumnState({state:u},"alignedGridChanged")}break;case"columnResized":{let c=e,u={};i.forEach(d=>{u[d.getId()]={key:d.getColId(),newWidth:d.getActualWidth()}}),c.flexColumns?.forEach(d=>{u[d.getId()]&&delete u[d.getId()]}),o.setColumnWidths(Object.values(u),!1,c.finished,"alignedGridChanged");break}}let l=s.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(c=>{c.setGridOption("alwaysShowVerticalScroll",l)})}},$Ee={version:qe,moduleName:"@ag-grid-community/aligned-grid",beans:[XEe]};function ZEe(e,t){let n=e.columnModel.getColDefCol(t);return n?n.getColDef():null}function JEe(e){return e.columnModel.getColumnDefs()}function exe(e,t){typeof t=="number"?e.columnSizeService.sizeColumnsToFit(t,"api"):e.ctrlsService.getGridBodyCtrl().sizeColumnsToFit(t)}function txe(e,t,n){e.columnModel.setColumnGroupOpened(t,n,"api")}function nxe(e,t,n){return e.visibleColsService.getColumnGroup(t,n)}function ixe(e,t){return e.columnModel.getProvidedColGroup(t)}function rxe(e,t,n){return e.columnNameService.getDisplayNameForColumn(t,n)||""}function oxe(e,t,n){return e.columnNameService.getDisplayNameForColumnGroup(t,n)||""}function sxe(e,t){return e.columnModel.getColDefCol(t)}function axe(e){return e.columnModel.getColDefCols()}function lxe(e,t){return e.columnApplyStateService.applyColumnState(t,"api")}function cxe(e){return e.columnGetStateService.getColumnState()}function uxe(e){e.columnApplyStateService.resetColumnState("api")}function dxe(e){return e.columnGroupStateService.getColumnGroupState()}function hxe(e,t){e.columnGroupStateService.setColumnGroupState(t,"api")}function fxe(e){e.columnGroupStateService.resetColumnGroupState("api")}function pxe(e){return e.visibleColsService.isPinningLeft()||e.visibleColsService.isPinningRight()}function gxe(e){return e.visibleColsService.isPinningLeft()}function mxe(e){return e.visibleColsService.isPinningRight()}function vxe(e,t){return e.visibleColsService.getColAfter(t)}function yxe(e,t){return e.visibleColsService.getColBefore(t)}function Cxe(e,t,n){e.columnModel.setColsVisible([t],n,"api")}function wxe(e,t,n){e.columnModel.setColsVisible(t,n,"api")}function bxe(e,t,n){e.columnModel.setColsPinned([t],n,"api")}function Sxe(e,t,n){e.columnModel.setColsPinned(t,n,"api")}function _xe(e){return e.columnModel.getCols()}function Exe(e){return e.visibleColsService.getLeftCols()}function xxe(e){return e.visibleColsService.getCenterCols()}function Dxe(e){return e.visibleColsService.getRightCols()}function Txe(e){return e.visibleColsService.getAllCols()}function Rxe(e){return e.columnViewportService.getViewportColumns()}function Ixe(e,t,n){e.columnMoveService.moveColumns([t],n,"api")}function Fxe(e,t,n){e.columnMoveService.moveColumnByIndex(t,n,"api")}function Axe(e,t,n){e.columnMoveService.moveColumns(t,n,"api")}function Mxe(e,t,n,i=!0,r="api"){e.columnSizeService.setColumnWidths([{key:t,newWidth:n}],!1,i,r)}function Pxe(e,t,n=!0,i="api"){e.columnSizeService.setColumnWidths(t,!1,n,i)}function kxe(e){return e.visibleColsService.getTreeLeft()}function Oxe(e){return e.visibleColsService.getTreeCenter()}function Nxe(e){return e.visibleColsService.getTreeRight()}function Lxe(e){return e.visibleColsService.getAllTrees()}function Vxe(e,t,n){return e.columnAutosizeService.autoSizeCols({colKeys:[t],skipHeader:n,source:"api"})}function Bxe(e,t,n){e.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:n,source:"api"})}function Gxe(e,t){e.columnAutosizeService.autoSizeAllColumns("api",t)}var Hxe=class extends j{constructor(){super(...arguments),this.beanName="dataTypeService",this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(e){this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.columnApplyStateService=e.columnApplyStateService,this.filterManager=e.filterManager}postConstruct(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(Wh(e.source))})}processDataTypeDefinitions(){let e=this.getDefaultDataTypes();this.dataTypeDefinitions={},this.formatValueFuncs={};let t=i=>r=>{let{column:o,node:s,value:a}=r,l=o.getColDef().valueFormatter;return l===i.groupSafeValueFormatter&&(l=i.valueFormatter),this.valueService.formatValue(o,s,a,l)};Object.entries(e).forEach(([i,r])=>{let o=pe(B({},r),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(r)});this.dataTypeDefinitions[i]=o,this.formatValueFuncs[i]=t(o)});let n=this.gos.get("dataTypeDefinitions")??{};this.dataTypeMatchers={},Object.entries(n).forEach(([i,r])=>{let o=this.processDataTypeDefinition(r,n,[i],e);o&&(this.dataTypeDefinitions[i]=o,r.dataTypeMatcher&&(this.dataTypeMatchers[i]=r.dataTypeMatcher),this.formatValueFuncs[i]=t(o))}),this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach(i=>{let r=this.dataTypeMatchers[i];r&&delete this.dataTypeMatchers[i],this.dataTypeMatchers[i]=r??e[i].dataTypeMatcher})}mergeDataTypeDefinitions(e,t){let n=B(B({},e),t);return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(n.columnTypes=[...zx(e.columnTypes),...zx(t.columnTypes)]),n}processDataTypeDefinition(e,t,n,i){let r,o=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let s=i[o],a=t[o];if(s&&a&&(s=a),!this.validateDataTypeDefinition(e,s,o))return;r=this.mergeDataTypeDefinitions(s,e)}else{if(n.includes(o)){X('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}let s=t[o];if(!this.validateDataTypeDefinition(e,s,o))return;let a=this.processDataTypeDefinition(s,t,[...n,o],i);if(!a)return;r=this.mergeDataTypeDefinitions(a,e)}return pe(B({},r),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(r)})}validateDataTypeDefinition(e,t,n){return t?t.baseDataType!==e.baseDataType?(X('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(X(`The data type definition ${n} does not exist.`),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return t=>{if(t.node?.group){let n=(t.colDef.pivotValueColumn??t.column).getAggFunc();if(n){if(n==="first"||n==="last")return e.valueFormatter(t);if(e.baseDataType==="number"&&n!=="count"){if(typeof t.value=="number")return e.valueFormatter(t);if(typeof t.value=="object"){if(!t.value)return;if("toNumber"in t.value)return e.valueFormatter(pe(B({},t),{value:t.value.toNumber()}));if("value"in t.value)return e.valueFormatter(pe(B({},t),{value:t.value.value}))}}return}if((this.gos.get("suppressGroupMaintainValueType")||this.gos.get("groupDisplayType")==="groupRows")&&!this.gos.get("treeData"))return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive()&&typeof t.value=="string"&&!e.dataTypeMatcher?.(t.value))return;return e.valueFormatter(t)}}updateColDefAndGetColumnType(e,t,n){let{cellDataType:i}=t,{field:r}=t;if(i===void 0&&(i=e.cellDataType),(i==null||i===!0)&&(i=this.canInferCellDataType(e,t)?this.inferCellDataType(r,n):!1),!i){e.cellDataType=!1;return}let o=this.dataTypeDefinitions[i];if(!o){X(`Missing data type definition - "${i}"`);return}return e.cellDataType=i,o.groupSafeValueFormatter&&(e.valueFormatter=o.groupSafeValueFormatter),o.valueParser&&(e.valueParser=o.valueParser),o.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,i,o,n),o.columnTypes}addColumnListeners(e){if(!this.isWaitingForRowData)return;let t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;let n=i=>{t.add(i.key)};e.addEventListener("columnStateUpdated",n),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.removeEventListener("columnStateUpdated",n))}canInferCellDataType(e,t){if(!kn(this.gos))return!1;let n={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,n))return!1;let i=t.type===null?e.type:t.type;if(i){let r=this.gos.get("columnTypes")??{};if(zx(i).some(s=>{let a=r[s.trim()];return a&&this.doColDefPropsPreventInference(a,n)}))return!1}return!this.doColDefPropsPreventInference(e,n)}doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([n,i])=>this.doesColDefPropPreventInference(e,t,n,i))}doesColDefPropPreventInference(e,t,n,i){if(!t[n])return!1;let r=e[n];return r===null?(t[n]=!1,!1):i===void 0?!!r:r===i}inferCellDataType(e,t){if(!e)return;let n,i=this.getInitialData();if(i){let o=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");n=aC(i,e,o)}else this.initWaitForRowData(t);if(n==null)return;let[r]=Object.entries(this.dataTypeMatchers).find(([o,s])=>s(n))??["object"];return r}getInitialData(){let e=this.gos.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{let t=this.rowModel.getRootNode().allLeafChildren;if(t?.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;let t=this.isColumnTypeOverrideInDataTypeDefinitions;t&&this.columnModel.queueResizeOperations();let[n]=this.addManagedEventListeners({rowDataUpdateStarted:i=>{let{firstRowData:r}=i;r&&(n?.(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(r,t),this.columnStateUpdatesPendingInference={},t&&this.columnModel.processResizeOperations(),this.eventService.dispatchEvent({type:"dataTypesInferred"}))}})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,t){this.initialData=e;let n=[];this.destroyColumnStateUpdateListeners();let i={},r={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([o,s])=>{let a=this.columnModel.getCol(o);if(!a)return;let l=a.getColDef();if(!this.columnModel.resetColDefIntoCol(a,"cellDataTypeInferred"))return;let c=a.getColDef();if(t&&c.type&&c.type!==l.type){let u=this.getUpdatedColumnState(a,s);u.rowGroup&&u.rowGroupIndex==null&&(i[o]=u),u.pivot&&u.pivotIndex==null&&(r[o]=u),n.push(u)}}),t&&n.push(...this.funcColsService.generateColumnStateForRowGroupAndPivotIndexes(i,r)),n.length&&this.columnApplyStateService.applyColumnState({state:n},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,t){let n=this.columnApplyStateService.getColumnStateFromColDef(e);return t.forEach(i=>{delete n[i],i==="rowGroup"?delete n.rowGroupIndex:i==="pivot"&&delete n.pivotIndex}),n}checkObjectValueHandlers(e){let t=this.dataTypeDefinitions.object,n=e.object;this.hasObjectValueParser=t.valueParser!==n.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==n.valueFormatter}getDateStringTypeDefinition(e){return e?this.getDataTypeDefinition(e)??this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){let t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){return this.getDataTypeDefinition(e)?.baseDataType}checkType(e,t){if(t==null)return!0;let n=this.getDataTypeDefinition(e)?.dataTypeMatcher;return n?n(t):!0}validateColDef(e){let t=n=>X(`Cell data type is "object" but no Value ${n} has been provided. Please either provide an object data type definition with a Value ${n}, or set "colDef.value${n}"`);e.cellDataType==="object"&&(e.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t("Formatter"),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&t("Parser"))}getFormatValue(e){return this.formatValueFuncs[e]}setColDefPropertiesForBaseDataType(e,t,n,i){let r=this.formatValueFuncs[t];switch(n.baseDataType){case"number":{e.cellEditor="agNumberCellEditor";break}case"boolean":{e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=o=>!!o.colDef.editable&&o.event.key===G.SPACE;break}case"date":{e.cellEditor="agDateCellEditor",e.keyCreator=r;break}case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=r;break}case"object":{e.cellEditorParams={useFormatter:!0},e.comparator=(o,s)=>{let a=this.columnModel.getColDefCol(i),l=a?.getColDef();if(!a||!l)return 0;let c=o==null?"":r({column:a,node:null,value:o}),u=s==null?"":r({column:a,node:null,value:s});return c===u?0:c>u?1:-1},e.keyCreator=r;break}}this.filterManager?.setColDefPropertiesForDataType(e,n,r)}getDefaultDataTypes(){let e=n=>!!n.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:n=>n.newValue?.trim?.()===""?null:Number(n.newValue),valueFormatter:n=>n.value==null?"":typeof n.value!="number"||isNaN(n.value)?t("invalidNumber","Invalid Number"):String(n.value),dataTypeMatcher:n=>typeof n=="number"},text:{baseDataType:"text",valueParser:n=>n.newValue===""?null:vO(n.newValue),dataTypeMatcher:n=>typeof n=="string"},boolean:{baseDataType:"boolean",valueParser:n=>n.newValue==null?n.newValue:n.newValue?.trim?.()===""?null:String(n.newValue).toLowerCase()==="true",valueFormatter:n=>n.value==null?"":String(n.value),dataTypeMatcher:n=>typeof n=="boolean"},date:{baseDataType:"date",valueParser:n=>xo(n.newValue==null?null:String(n.newValue)),valueFormatter:n=>n.value==null?"":!(n.value instanceof Date)||isNaN(n.value.getTime())?t("invalidDate","Invalid Date"):Ms(n.value,!1)??"",dataTypeMatcher:n=>n instanceof Date},dateString:{baseDataType:"dateString",dateParser:n=>xo(n)??void 0,dateFormatter:n=>Ms(n??null,!1)??void 0,valueParser:n=>e(String(n.newValue))?n.newValue:null,valueFormatter:n=>e(String(n.value))?n.value:"",dataTypeMatcher:n=>typeof n=="string"&&e(n)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:n=>vO(n.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(e=>e()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}},zxe={version:qe,moduleName:"@ag-grid-community/data-type",beans:[Hxe]},Uxe={version:qe,moduleName:"@ag-grid-community/column-api",apiFunctions:{getColumnDef:ZEe,getColumnDefs:JEe,sizeColumnsToFit:exe,setColumnGroupOpened:txe,getColumnGroup:nxe,getProvidedColumnGroup:ixe,getDisplayNameForColumn:rxe,getDisplayNameForColumnGroup:oxe,getColumn:sxe,getColumns:axe,applyColumnState:lxe,getColumnState:cxe,resetColumnState:uxe,getColumnGroupState:dxe,setColumnGroupState:hxe,resetColumnGroupState:fxe,isPinning:pxe,isPinningLeft:gxe,isPinningRight:mxe,getDisplayedColAfter:vxe,getDisplayedColBefore:yxe,setColumnVisible:Cxe,setColumnsVisible:wxe,setColumnPinned:bxe,setColumnsPinned:Sxe,getAllGridColumns:_xe,getDisplayedLeftColumns:Exe,getDisplayedCenterColumns:xxe,getDisplayedRightColumns:Dxe,getAllDisplayedColumns:Txe,getAllDisplayedVirtualColumns:Rxe,moveColumn:Ixe,moveColumnByIndex:Fxe,moveColumns:Axe,setColumnWidth:Mxe,setColumnWidths:Pxe,getLeftDisplayedColumnGroups:kxe,getCenterDisplayedColumnGroups:Oxe,getRightDisplayedColumnGroups:Nxe,getAllDisplayedColumnGroups:Lxe,autoSizeColumn:Vxe,autoSizeColumns:Bxe,autoSizeAllColumns:Gxe}};function jxe(e,t){e.ctrlsService.getGridBodyCtrl().getRowDragFeature().addRowDropZone(t)}function Wxe(e,t){let n=e.dragAndDropService.findExternalZone(t);n&&e.dragAndDropService.removeDropTarget(n)}function qxe(e,t){return e.ctrlsService.getGridBodyCtrl().getRowDragFeature().getRowDropZone(t)}var Kxe={version:qe,moduleName:"@ag-grid-community/drag-api",apiFunctions:{addRowDropZone:jxe,removeRowDropZone:Wxe,getRowDropZoneParams:qxe}};function Yxe(e){return e.pinnedRowModel.getPinnedTopRowCount()}function Qxe(e){return e.pinnedRowModel.getPinnedBottomRowCount()}function Xxe(e,t){return e.pinnedRowModel.getPinnedTopRow(t)}function $xe(e,t){return e.pinnedRowModel.getPinnedBottomRow(t)}var Zxe={version:qe,moduleName:"@ag-grid-community/pinned-row-api",apiFunctions:{getPinnedTopRowCount:Yxe,getPinnedBottomRowCount:Qxe,getPinnedTopRow:Xxe,getPinnedBottomRow:$xe}};function Jxe(e){e.overlayService.showLoadingOverlay()}function eDe(e){e.overlayService.showNoRowsOverlay()}function tDe(e){e.overlayService.hideOverlay()}var nDe={version:qe,moduleName:"@ag-grid-community/overlay-api",apiFunctions:{showLoadingOverlay:Jxe,showNoRowsOverlay:eDe,hideOverlay:tDe}};function iDe(e,t,n){if(!t)return;let i=e.ctrlsService.getGridBodyCtrl().getGui(),r=`aria-${t}`;n===null?i.removeAttribute(r):i.setAttribute(r,n)}function rDe(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function oDe(e,t={}){let n=i=>X(`Since v31.1 api.flashCells parameter '${i}Delay' is deprecated. Please use '${i}Duration' instead.`);ne(t.fadeDelay)&&n("fade"),ne(t.flashDelay)&&n("flash"),e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.flashCells(t))}function sDe(e){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getHeaderRowContainerCtrls().forEach(t=>t.refresh()))}function aDe(e){return e.animationFrameService.isQueueEmpty()}function lDe(e){e.animationFrameService.flushAllFrames()}function cDe(e){return{rowHeight:Qh(e.gos),headerHeight:e.columnModel.getHeaderHeight()}}function uDe(e,t={}){return e.rowRenderer.getCellRendererInstances(t).map(cC)}var dDe={version:qe,moduleName:"@ag-grid-community/render-api",apiFunctions:{setGridAriaProperty:iDe,refreshCells:rDe,flashCells:oDe,refreshHeader:sDe,isAnimationFrameQueueEmpty:aDe,flushAllAnimationFrames:lDe,getSizesForCurrentTheme:cDe,getCellRendererInstances:uDe}};function hDe(e){e.valueCache.expire()}function fDe(e,t,n){return CY(e,{colKey:t,rowNode:n})}function CY(e,t){let{colKey:n,rowNode:i,useFormatter:r}=t,o=e.columnModel.getColDefCol(n)??e.columnModel.getCol(n);if(St(o))return null;let s=e.valueService.getValueForDisplay(o,i);return r?e.valueService.formatValue(o,i,s)??dl(s,!0):s}function pDe(e){return e.context.getGridId()}function gDe(e){e.gridDestroyService.destroy()}function mDe(e){return e.gridDestroyService.isDestroyCalled()}function vDe(e,t){return e.gos.get(t)}function yDe(e,t,n){wY(e,{[t]:n})}function wY(e,t){e.gos.updateGridOptions({options:t})}function CDe(e,t,n){e.apiEventService.addEventListener(t,n)}function wDe(e,t,n){e.apiEventService.removeEventListener(t,n)}function bDe(e,t){e.apiEventService.addGlobalListener(t)}function SDe(e,t){e.apiEventService.removeGlobalListener(t)}function _De(e){return e.focusService.getFocusedCell()}function EDe(e){return e.focusService.clearFocusedCell()}function xDe(e,t,n,i){e.focusService.setFocusedCell({rowIndex:t,column:n,rowPinned:i,forceBrowserFocus:!0})}function DDe(e,t){return e.navigationService.tabToNextCell(!1,t)}function TDe(e,t){return e.navigationService.tabToNextCell(!0,t)}function RDe(e,t,n=!1){let i=e.headerNavigationService.getHeaderPositionForColumn(t,n);i&&e.focusService.focusHeaderPosition({headerPosition:i})}function IDe(e,t,n){let i=e.columnModel.getCol(t);e.menuService.showColumnMenu({column:i,buttonElement:n,positionBy:"button"})}function FDe(e,t,n){let i=e.columnModel.getCol(t);if(i||(i=e.columnModel.getColDefCol(t)),!i){kt(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:i,mouseEvent:n,positionBy:"mouse"})}function ADe(e,t){let n=e.columnModel.getCol(t);if(!n){kt(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:n,positionBy:"auto"})}function MDe(e){e.menuService.hidePopupMenu()}function PDe(e,t={}){let n=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(n))}function kDe(e,t,n,i,r){e.expansionService.setRowNodeExpanded(t,n,i,r)}function ODe(e,t){return e.rowModel.getRowNode(t)}function NDe(e,t,n,i){e.rowRenderer.addRenderedRowListener(t,n,i)}function LDe(e){return e.rowRenderer.getRenderedNodes()}function VDe(e,t,n){e.rowModel.forEachNode(t,n)}function BDe(e){return bY(e)}function bY(e){return e.rowRenderer.getFirstVirtualRenderedRow()}function GDe(e){return SY(e)}function SY(e){return e.rowRenderer.getLastVirtualRenderedRow()}function HDe(e,t){return e.rowModel.getRow(t)}function zDe(e){return e.rowModel.getRowCount()}function UDe(e){return e.rowModel}function jDe(e,t){if(!t.nodes.every(a=>a.rowPinned?(X("cannot select pinned rows"),!1):a.id===void 0?(X("cannot select node until id for node is known"),!1):!0))return;let{nodes:i,source:r,newValue:o}=t,s=i;e.selectionService.setNodesSelected({nodes:s,source:r??"api",newValue:o})}function WDe(e,t="apiSelectAll"){e.selectionService.selectAllRowNodes({source:t})}function qDe(e,t="apiSelectAll"){e.selectionService.deselectAllRowNodes({source:t})}function KDe(e,t="apiSelectAllFiltered"){e.selectionService.selectAllRowNodes({source:t,justFiltered:!0})}function YDe(e,t="apiSelectAllFiltered"){e.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})}function QDe(e,t="apiSelectAllCurrentPage"){e.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})}function XDe(e,t="apiSelectAllCurrentPage"){e.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})}function $De(e){return e.selectionService.getSelectedNodes()}function ZDe(e){return e.selectionService.getSelectedRows()}function JDe(e){e.sortController.onSortChanged("api")}var eTe={version:qe,moduleName:"@ag-grid-community/core-api",apiFunctions:{getGridId:pDe,destroy:gDe,isDestroyed:mDe,getGridOption:vDe,setGridOption:yDe,updateGridOptions:wY}},tTe={version:qe,moduleName:"@ag-grid-community/row-selection-api",apiFunctions:{setNodesSelected:jDe,selectAll:WDe,deselectAll:qDe,selectAllFiltered:KDe,deselectAllFiltered:YDe,selectAllOnCurrentPage:QDe,deselectAllOnCurrentPage:XDe,getSelectedNodes:$De,getSelectedRows:ZDe}},nTe={version:qe,moduleName:"@ag-grid-community/row-api",apiFunctions:{redrawRows:PDe,setRowNodeExpanded:kDe,getRowNode:ODe,addRenderedRowListener:NDe,getRenderedNodes:LDe,forEachNode:VDe,getFirstDisplayedRow:BDe,getFirstDisplayedRowIndex:bY,getLastDisplayedRow:GDe,getLastDisplayedRowIndex:SY,getDisplayedRowAtIndex:HDe,getDisplayedRowCount:zDe,getModel:UDe}},iTe={version:qe,moduleName:"@ag-grid-community/scroll-api",apiFunctions:{getVerticalPixelRange:H_e,getHorizontalPixelRange:z_e,ensureColumnVisible:pY,ensureIndexVisible:gY,ensureNodeVisible:U_e}},rTe={version:qe,moduleName:"@ag-grid-community/keyboard-navigation-api",apiFunctions:{getFocusedCell:_De,clearFocusedCell:EDe,setFocusedCell:xDe,setFocusedHeader:RDe,tabToNextCell:DDe,tabToPreviousCell:TDe}},oTe={version:qe,moduleName:"@ag-grid-community/event-api",apiFunctions:{addEventListener:CDe,addGlobalListener:bDe,removeEventListener:wDe,removeGlobalListener:SDe}},sTe={version:qe,moduleName:"@ag-grid-community/cell-api",apiFunctions:{expireValueCache:hDe,getValue:fDe,getCellValue:CY}},aTe={version:qe,moduleName:"@ag-grid-community/menu-api",apiFunctions:{showColumnMenuAfterButtonClick:IDe,showColumnMenuAfterMouseClick:FDe,showColumnMenu:ADe,hidePopupMenu:MDe}},lTe={version:qe,moduleName:"@ag-grid-community/sort-api",apiFunctions:{onSortChanged:JDe}},cTe={version:qe,moduleName:"@ag-grid-community/api",dependantModules:[eTe,Zxe,tTe,Uxe,nTe,Kxe,iTe,nDe,rTe,oTe,dDe,sTe,aTe,lTe]};function uTe(e){return e.stateService?.getState()??{}}function dTe(e){switch(e=B({},e),e.version||(e.version="32.1.0"),e.version){case"32.1.0":e=hTe(e)}return e}function hTe(e){return e.cellSelection=fTe(e,"rangeSelection"),e}function fTe(e,t){if(e&&typeof e=="object")return e[t]}var pTe=class extends j{constructor(){super(...arguments),this.beanName="stateService",this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=Qr(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=Qr(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=Qr(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}wireBeans(e){this.filterManager=e.filterManager,this.ctrlsService=e.ctrlsService,this.pivotResultColsService=e.pivotResultColsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnGroupStateService=e.columnGroupStateService,this.columnGetStateService=e.columnGetStateService,this.paginationService=e.paginationService,this.selectionService=e.selectionService,this.expansionService=e.expansionService,this.columnAnimationService=e.columnAnimationService,this.columnApplyStateService=e.columnApplyStateService,this.sideBarService=e.sideBarService,this.rangeService=e.rangeService}postConstruct(){this.isClientSideRowModel=kn(this.gos),this.cachedState=this.getInitialState(),this.setCachedStateValue("version",qe),this.ctrlsService.whenReady(this,()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));let[e,t,n]=this.addManagedEventListeners({newColumnsLoaded:({source:i})=>{i==="gridInitializing"&&(e(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))},rowCountReady:()=>{t?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())},firstDataRendered:()=>{n?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())}})}getInitialState(){return dTe(this.gos.get("initialState")??{})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState());let e=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:e,sideBarUpdated:e})}setupStateOnColumnsInitialised(){let e=this.getInitialState();this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState());let t=n=>()=>this.updateColumnState([n]);this.addManagedEventListeners({columnValueChanged:t("aggregation"),columnMoved:t("columnOrder"),columnPinned:t("columnPinning"),columnResized:t("columnSizing"),columnVisible:t("columnVisibility"),columnPivotChanged:t("pivot"),columnPivotModeChanged:t("pivot"),columnRowGroupChanged:t("rowGroup"),sortChanged:t("sort"),newColumnsLoaded:()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setupStateOnRowCountReady(){let{filter:e,rowGroupExpansion:t,rowSelection:n,pagination:i}=this.getInitialState(),r=this.gos.get("advancedFilterModel");(e||r)&&this.setFilterState(e,r),t&&this.setRowGroupExpansionState(t),n&&this.setRowSelectionState(n),i&&this.setPaginationState(i),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState());let o=()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState());this.addManagedEventListeners({filterChanged:()=>this.updateCachedState("filter",this.getFilterState()),rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:o,columnRowGroupChanged:o,rowDataUpdated:()=>{this.gos.get("groupDefaultExpanded")!==0&&setTimeout(()=>{o()})},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:s=>{(s.newPage||s.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())}})}setupStateOnFirstDataRendered(){let{scroll:e,cellSelection:t,focusedCell:n,columnOrder:i}=this.getInitialState();n&&this.setFocusedCellState(n),t&&this.setCellSelectionState(t),e&&this.setScrollState(e),this.setColumnPivotState(!!i?.orderedColIds),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState());let r=this.getRangeSelectionState();this.updateCachedState("rangeSelection",r),this.updateCachedState("cellSelection",r),this.updateCachedState("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:()=>this.updateCachedState("focusedCell",this.getFocusedCellState()),cellSelectionChanged:o=>{if(o.finished){let s=this.getRangeSelectionState();this.updateCachedState("rangeSelection",s),this.updateCachedState("cellSelection",s)}},bodyScrollEnd:()=>this.updateCachedState("scroll",this.getScrollState())})}getColumnState(){let e=this.columnModel.isPivotMode(),t=[],n=[],i=[],r=[],o=[],s=[],a=[],l=[],c=[],u=0,d=this.columnGetStateService.getColumnState();for(let h=0;h<d.length;h++){let{colId:p,sort:g,sortIndex:m,rowGroup:v,rowGroupIndex:C,aggFunc:S,pivot:_,pivotIndex:D,pinned:F,hide:I,width:E,flex:b}=d[h];c.push(p),g&&(t[m??u++]={colId:p,sort:g}),v&&(n[C??0]=p),typeof S=="string"&&i.push({colId:p,aggFunc:S}),_&&(r[D??0]=p),F&&(F==="right"?s:o).push(p),I&&a.push(p),(b||E)&&l.push({colId:p,flex:b??void 0,width:E})}return{sort:t.length?{sortModel:t}:void 0,rowGroup:n.length?{groupColIds:n}:void 0,aggregation:i.length?{aggregationModel:i}:void 0,pivot:r.length||e?{pivotMode:e,pivotColIds:r}:void 0,columnPinning:o.length||s.length?{leftColIds:o,rightColIds:s}:void 0,columnVisibility:a.length?{hiddenColIds:a}:void 0,columnSizing:l.length?{columnSizingModel:l}:void 0,columnOrder:c.length?{orderedColIds:c}:void 0}}setColumnState(e){let{sort:t,rowGroup:n,aggregation:i,pivot:r,columnPinning:o,columnVisibility:s,columnSizing:a,columnOrder:l,partialColumnState:c}=e,u={},d=v=>{let C=u[v];return C||(C={colId:v},u[v]=C,C)},h=c?{}:{sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};t&&(t.sortModel.forEach(({colId:v,sort:C},S)=>{let _=d(v);_.sort=C,_.sortIndex=S}),h.sort=null,h.sortIndex=null),n&&(n.groupColIds.forEach((v,C)=>{let S=d(v);S.rowGroup=!0,S.rowGroupIndex=C}),h.rowGroup=null,h.rowGroupIndex=null),i&&(i.aggregationModel.forEach(({colId:v,aggFunc:C})=>{d(v).aggFunc=C}),h.aggFunc=null),r&&(r.pivotColIds.forEach((v,C)=>{let S=d(v);S.pivot=!0,S.pivotIndex=C}),this.gos.updateGridOptions({options:{pivotMode:r.pivotMode},source:"gridInitializing"}),h.pivot=null,h.pivotIndex=null),o&&(o.leftColIds.forEach(v=>{d(v).pinned="left"}),o.rightColIds.forEach(v=>{d(v).pinned="right"}),h.pinned=null),s&&(s.hiddenColIds.forEach(v=>{d(v).hide=!0}),h.hide=null),a&&(a.columnSizingModel.forEach(({colId:v,flex:C,width:S})=>{let _=d(v);_.flex=C??null,_.width=S}),h.flex=null);let p=l?.orderedColIds,g=!!p?.length,m=g?p.map(v=>d(v)):Object.values(u);m.length&&(this.columnStates=m,this.columnApplyStateService.applyColumnState({state:m,applyOrder:g,defaultState:h},"gridInitializing"))}setColumnPivotState(e){let t=this.columnStates;this.columnStates=void 0;let n=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.pivotResultColsService.isPivotResultColsPresent()){if(t){let i=[];for(let r of t)this.pivotResultColsService.getPivotResultCol(r.colId)&&i.push(r);this.columnApplyStateService.applyColumnState({state:i,applyOrder:e},"gridInitializing")}n&&this.columnGroupStateService.setColumnGroupState(n,"gridInitializing")}}getColumnGroupState(){let e=this.columnGroupStateService.getColumnGroupState(),t=[];return e.forEach(({groupId:n,open:i})=>{i&&t.push(n)}),t.length?{openColumnGroupIds:t}:void 0}setColumnGroupState(e){if(!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;let t=new Set(e.columnGroup?.openColumnGroupIds),i=this.columnGroupStateService.getColumnGroupState().map(({groupId:r})=>{let o=t.has(r);return o&&t.delete(r),{groupId:r,open:o}});t.forEach(r=>{i.push({groupId:r,open:!0})}),i.length&&(this.columnGroupStates=i),this.columnGroupStateService.setColumnGroupState(i,"gridInitializing")}getFilterState(){let e=this.filterManager?.getFilterModel();e&&Object.keys(e).length===0&&(e=void 0);let t=this.filterManager?.getAdvancedFilterModel()??void 0;return e||t?{filterModel:e,advancedFilterModel:t}:void 0}setFilterState(e,t){let{filterModel:n,advancedFilterModel:i}=e??{advancedFilterModel:t};n&&this.filterManager?.setFilterModel(n,"columnFilter"),i&&this.filterManager?.setAdvancedFilterModel(i)}getRangeSelectionState(){let e=this.rangeService?.getCellRanges().map(t=>{let{id:n,type:i,startRow:r,endRow:o,columns:s,startColumn:a}=t;return{id:n,type:i,startRow:r,endRow:o,colIds:s.map(l=>l.getColId()),startColId:a.getColId()}});return e?.length?{cellRanges:e}:void 0}setCellSelectionState(e){let{gos:t,rangeService:n,columnModel:i,visibleColsService:r}=this;if(!hl(t)||!n)return;let o=[];if(e.cellRanges.forEach(s=>{let a=[];if(s.colIds.forEach(c=>{let u=i.getCol(c);u&&a.push(u)}),!a.length)return;let l=i.getCol(s.startColId);if(!l){let c=r.getAllCols(),u=new Set(a);l=c.find(d=>u.has(d))}o.push(pe(B({},s),{columns:a,startColumn:l}))}),_Ce(t)&&ECe(t)&&o.length>1)return X("cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`");n.setCellRanges(o)}getScrollState(){if(!this.isClientSideRowModel)return;let e=this.ctrlsService.getGridBodyCtrl()?.getScrollFeature(),{left:t}=e?.getHScrollPosition()??{left:0},{top:n}=e?.getVScrollPosition()??{top:0};return n||t?{top:n,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;let{top:t,left:n}=e;this.ctrlsService.getGridBodyCtrl()?.getScrollFeature().setScrollPosition(t,n)}getSideBarState(){return this.sideBarService?.getSideBarComp()?.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;let e=this.focusService.getFocusedCell();if(e){let{column:t,rowIndex:n,rowPinned:i}=e;return{colId:t.getColId(),rowIndex:n,rowPinned:i}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;let{colId:t,rowIndex:n,rowPinned:i}=e;this.focusService.setFocusedCell({column:this.columnModel.getCol(t),rowIndex:n,rowPinned:i,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){if(!this.paginationService)return;let e=this.paginationService.getCurrentPage(),t=this.gos.get("paginationAutoPageSize")?void 0:this.paginationService.getPageSize();if(!(!e&&!t))return{page:e,pageSize:t}}setPaginationState(e){this.paginationService&&(e.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationService.setPageSize(e.pageSize,"initialState"),typeof e.page=="number"&&this.paginationService.setPage(e.page))}getRowSelectionState(){let e=this.selectionService.getSelectionState();return!e||!Array.isArray(e)&&(e.selectAll===!1||e.selectAllChildren===!1)&&!e?.toggledNodes?.length?void 0:e}setRowSelectionState(e){this.selectionService.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){let e=this.expansionService.getExpandedRows();return e.length?{expandedRowGroupIds:e}:void 0}setRowGroupExpansionState(e){this.expansionService.expandRows(e.expandedRowGroupIds)}updateColumnState(e){let t=this.getColumnState(),n=!1;Object.entries(t).forEach(([i,r])=>{hC(r,this.cachedState[i])||(n=!0)}),this.cachedState=B(B({},this.cachedState),t),n&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){let n=this.cachedState[e];this.setCachedStateValue(e,t),hC(t,n)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState=pe(B({},this.cachedState),{[e]:t})}refreshStaleState(){this.staleStateKeys.forEach(e=>{switch(e){case"rowSelection":this.setCachedStateValue(e,this.getRowSelectionState());break}}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach(t=>this.queuedUpdateSources.add(t)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){let e=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear(),this.eventService.dispatchEvent({type:"stateUpdated",sources:e,state:this.cachedState})}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),e(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}},_Y={version:qe,moduleName:"@ag-grid-community/state-core",beans:[pTe]},gTe={version:qe,moduleName:"@ag-grid-community/state-api",apiFunctions:{getState:uTe},dependantModules:[_Y]},mTe={version:qe,moduleName:"@ag-grid-community/state",dependantModules:[_Y,gTe]};function vTe(e){return e.rowModel.isLastRowIndexKnown()}function yTe(e){return e.paginationService?.getPageSize()??100}function CTe(e){return e.paginationService?.getCurrentPage()??0}function wTe(e){return e.paginationService?.getTotalPages()??1}function bTe(e){return e.paginationService?e.paginationService.getMasterRowCount():e.rowModel.getRowCount()}function STe(e){e.paginationService?.goToNextPage()}function _Te(e){e.paginationService?.goToPreviousPage()}function ETe(e){e.paginationService?.goToFirstPage()}function xTe(e){e.paginationService?.goToLastPage()}function DTe(e,t){e.paginationService?.goToPage(t)}var TTe=class extends j{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.centerRowsCtrl=e.center;let t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.paginationService.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;let e=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(e>0){let t=()=>{let n=Math.max(Qh(this.gos),1),i=Math.floor(e/n);this.paginationService.setPageSize(i,"autoCalculated")};this.isBodyRendered?Qr(()=>t(),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};function RTe(e,t,n){e.addManagedElementListeners(t,{keydown:i=>{if(!i.defaultPrevented&&i.key===G.TAB){let r=i.shiftKey;n.findNextFocusableElement(t,!1,r)||n.focusNextGridCoreContainer(r)&&i.preventDefault()}}})}var rC="paginationPageSizeSelector",ITe=class extends At{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;let e=this.selectPageSizeComp.getValue();if(!e)return;let t=Number(e);isNaN(t)||t<1||t===this.paginationService.getPageSize()||(this.paginationService.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.paginationService=e.paginationService}postConstruct(){this.addManagedPropertyListener(rC,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!e?.newPageSize)return;let t=this.paginationService.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){br(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(rC)!==!1}reloadPageSizesSelector(){let e=this.getPageSizeSelectorValues(),t=this.paginationService.getPageSize(),n=!t||!e.includes(t);if(n){let r=this.gos.exists("paginationPageSize"),o=this.gos.get(rC)!==!0;X(`'paginationPageSize=${t}'${r?"":" (default value)"}, but ${t} is not included in${o?"":" the default"} paginationPageSizeSelector=[${e.join(", ")}].`),o||X(`Either set '${rC}' to an array that includes ${t} or to 'false' to disable the page size selector.`),e.unshift("")}let i=String(n?"":t);this.selectPageSizeComp?(qu(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(i,!0)):this.createPageSizeSelectorComp(e,i),this.hasEmptyOption=n}createPageSizeSelectOptions(e){return e.map(t=>({value:String(t)}))}createPageSizeSelectorComp(e,t){let n=this.localeService.getLocaleTextFunc(),i=n("pageSizeSelectorLabel","Page Size:"),r=n("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new oN).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(r).setLabel(i).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){let e=[20,50,100],t=this.gos.get(rC);return!Array.isArray(t)||Jo(t)?e:[...t].sort((n,i)=>n-i)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},FTe={selector:"AG-PAGE-SIZE-SELECTOR",component:ITe},ATe=class extends vY{constructor(){super(),this.btFirst=fe,this.btPrevious=fe,this.btNext=fe,this.btLast=fe,this.lbRecordCount=fe,this.lbFirstRowOnPage=fe,this.lbLastRowOnPage=fe,this.lbCurrent=fe,this.lbTotal=fe,this.pageSizeComp=fe,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.focusService=e.focusService,this.ariaAnnouncementService=e.ariaAnnouncementService}postConstruct(){let e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[FTe]);let{btFirst:t,btPrevious:n,btNext:i,btLast:r}=this;this.activateTabIndex([t,n,i,r]),t.insertAdjacentElement("afterbegin",Zo(e?"last":"first",this.gos)),n.insertAdjacentElement("afterbegin",Zo(e?"next":"previous",this.gos)),i.insertAdjacentElement("afterbegin",Zo(e?"previous":"next",this.gos)),r.insertAdjacentElement("afterbegin",Zo(e?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:o=>{this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(o):this.focusService.focusGridInnerElement(o)},forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){let t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{let{el:t,fn:n}=e;this.addManagedListeners(t,{click:n,keydown:i=>{(i.key===G.ENTER||i.key===G.SPACE)&&(i.preventDefault(),n())}})}),RTe(this,this.getGui(),this.focusService),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationService.goToFirstPage()}formatNumber(e){let t=this.gos.getCallback("paginationNumberFormatter");if(t)return t({value:e});let n=this.localeService.getLocaleTextFunc(),i=n("thousandSeparator",","),r=n("decimalSeparator",".");return $be(e,i,r)}getTemplate(){let e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),n=e("to","to"),i=e("of","of"),r=e("firstPage","First Page"),o=e("previousPage","Previous Page"),s=e("nextPage","Next Page"),a=e("lastPage","Last Page"),l=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${l}">
                <ag-page-size-selector data-ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel">
                    <span id="ag-${l}-first-row" data-ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-to">${n}</span>
                    <span id="ag-${l}-last-row" data-ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-of">${i}</span>
                    <span id="ag-${l}-row-count" data-ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div data-ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${r}"></div>
                    <div data-ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>
                    <span class="ag-paging-description">
                        <span id="ag-${l}-start-page">${t}</span>
                        <span id="ag-${l}-start-page-number" data-ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${l}-of-page">${i}</span>
                        <span id="ag-${l}-of-page-number" data-ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div data-ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${s}"></div>
                    <div data-ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationService.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationService.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationService.goToLastPage()}enableOrDisableButtons(){let e=this.paginationService.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),n=this.paginationService.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);let i=this.isZeroPagesToDisplay(),r=e===n-1;this.nextButtonDisabled=r||i,this.lastButtonDisabled=!t||i||e===n-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){dwe(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){let e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages();return e&&t===0}updateLabels(){let e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages(),n=this.paginationService.getMasterRowCount(),i=e?n:null;if(i===1){let S=this.rowModel.getRow(0);if(S&&S.group&&!(S.groupData||S.aggData)){this.setTotalLabelsToZero();return}}let r=this.paginationService.getCurrentPage(),o=this.paginationService.getPageSize(),s,a;this.isZeroPagesToDisplay()?s=a=0:(s=o*r+1,a=s+o-1,e&&a>i&&(a=i));let l=s+o-1,c=!e&&n<l,u=this.formatNumber(s);this.lbFirstRowOnPage.textContent=u;let d,h=this.localeService.getLocaleTextFunc();c?d=h("pageLastRowUnknown","?"):d=this.formatNumber(a),this.lbLastRowOnPage.textContent=d;let g=t>0?r+1:0,m=this.formatNumber(g);this.lbCurrent.textContent=m;let v,C;if(e)v=this.formatNumber(t),C=this.formatNumber(i);else{let S=h("more","more");v=S,C=S}this.lbTotal.textContent=v,this.lbRecordCount.textContent=C,this.announceAriaStatus(u,d,C,m,v)}announceAriaStatus(e,t,n,i,r){let o=this.localeService.getLocaleTextFunc(),s=o("page","Page"),a=o("to","to"),l=o("of","of"),c=`${e} ${a} ${t} ${l} ${n}`,u=`${s} ${i} ${l} ${r}`;c!==this.ariaRowStatus&&(this.ariaRowStatus=c,this.ariaAnnouncementService.announceValue(c,"paginationRow")),u!==this.ariaPageStatus&&(this.ariaPageStatus=u,this.ariaAnnouncementService.announceValue(u,"paginationPage"))}setTotalLabelsToZero(){let e=this.formatNumber(0);this.lbFirstRowOnPage.textContent=e,this.lbCurrent.textContent=e,this.lbLastRowOnPage.textContent=e,this.lbTotal.textContent=e,this.lbRecordCount.textContent=e,this.announceAriaStatus(e,e,e,e,e)}},MTe={selector:"AG-PAGINATION",component:ATe},PTe=class extends j{constructor(){super(...arguments),this.beanName="paginationService",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return MTe}isPaginateChildRows(){return this.gos.get("groupRemoveSingleChildren")||this.gos.get("groupRemoveLowestSingleChildren")?!0:this.gos.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){!this.active||this.currentPage===e||typeof this.currentPage!="number"||(this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}isRowPresent(e){return e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;let t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){return this.active?this.getPageForIndex(e.rowIndex)===this.currentPage:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){let e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return ne(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:ne(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:ne(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:ne(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.pageBoundsService.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;let e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){let n=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}n!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}let e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();let t=this.pageSize*this.currentPage,n=this.pageSize*(this.currentPage+1)-1;if(n>e&&(n=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),n===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{let i=this.rowModel.getTopLevelRowDisplayedIndex(n+1);this.bottomDisplayedRowIndex=i-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}let e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){let{keepRenderedRows:t=!1,newPage:n=!1,newPageSize:i=!1}=e;this.eventService.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:n,newPageSize:i,keepRenderedRows:t})}},EY={version:qe,moduleName:"@ag-grid-community/pagination-core",beans:[PTe,TTe]},kTe={version:qe,moduleName:"@ag-grid-community/pagination-api",dependantModules:[EY],apiFunctions:{paginationIsLastPageFound:vTe,paginationGetPageSize:yTe,paginationGetCurrentPage:CTe,paginationGetTotalPages:wTe,paginationGetRowCount:bTe,paginationGoToNextPage:STe,paginationGoToPreviousPage:_Te,paginationGoToFirstPage:ETe,paginationGoToLastPage:xTe,paginationGoToPage:DTe}},OTe={version:qe,moduleName:"@ag-grid-community/pagination",dependantModules:[EY,kTe]},Eo="clientSide",qr="serverSide",im="infinite",NTe={onGroupExpandedOrCollapsed:[Eo],refreshClientSideRowModel:[Eo],isRowDataEmpty:[Eo],forEachLeafNode:[Eo],forEachNodeAfterFilter:[Eo],forEachNodeAfterFilterAndSort:[Eo],resetRowHeights:[Eo],applyTransaction:[Eo],applyTransactionAsync:[Eo],flushAsyncTransactions:[Eo],getBestCostNodeSelection:[Eo],getServerSideSelectionState:[qr],setServerSideSelectionState:[qr],applyServerSideTransaction:[qr],applyServerSideTransactionAsync:[qr],applyServerSideRowData:[qr],retryServerSideLoads:[qr],flushServerSideAsyncTransactions:[qr],refreshServerSide:[qr],getServerSideGroupLevelState:[qr],refreshInfiniteCache:[im],purgeInfiniteCache:[im],getInfiniteRowCount:[im],isLastRowIndexKnown:[im,qr],expandAll:[Eo,qr],collapseAll:[Eo,qr],onRowHeightChanged:[Eo,qr],setRowCount:[im,qr],getCacheBlockState:[im,qr]},LTe={getValue:{version:"v31.3",new:"getCellValue"},getFirstDisplayedRow:{version:"v31.1",new:"getFirstDisplayedRowIndex"},getLastDisplayedRow:{version:"v31.1",new:"getLastDisplayedRowIndex"},getModel:{version:"v31.1",message:"Please use the appropriate grid API methods instead."},setColumnVisible:{version:"v31.1",old:"setColumnVisible(key,visible)",new:"setColumnsVisible([key],visible)"},setColumnPinned:{version:"v31.1",old:"setColumnPinned(key,pinned)",new:"setColumnsPinned([key],pinned)"},moveColumn:{version:"v31.1",old:"moveColumn(key, toIndex)",new:"moveColumns([key], toIndex)"},setColumnWidth:{version:"v31.1",old:"setColumnWidth(col, width)",new:"setColumnWidths([{key: col, newWidth: width}])"},autoSizeColumn:{version:"v31.1",old:"autoSizeColumn(key, skipHeader)",new:"autoSizeColumns([key], skipHeader)"},addAggFunc:{version:"v31.1",old:"addAggFunc(key, func)",new:"addAggFuncs({ key: func })"},removeValueColumn:{version:"v31.1",old:"removeValueColumn(colKey)",new:"removeValueColumns([colKey])"},addValueColumn:{version:"v31.1",old:"addValueColumn(colKey)",new:"addValueColumns([colKey])"},removeRowGroupColumn:{version:"v31.1",old:"removeRowGroupColumn(colKey)",new:"removeRowGroupColumns([colKey])"},addRowGroupColumn:{version:"v31.1",old:"addRowGroupColumn(colKey)",new:"addRowGroupColumns([colKey])"},removePivotColumn:{version:"v31.1",old:"removePivotColumn(colKey)",new:"removePivotColumns([colKey])"},addPivotColumn:{version:"v31.1",old:"addPivotColumn(colKey)",new:"addPivotColumns([colKey])"},showColumnMenuAfterButtonClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere."},showColumnMenuAfterMouseClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere."},getFilterInstance:{version:"v31.1",message:"'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."},showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"}};function VTe(e,t,n){let i=LTe[e];if(i){let{version:o,new:s,old:a,message:l}=i,c=a??e;return(...u)=>{let d=s?`Please use ${s} instead. `:"";return X(`Since ${o} api.${c} is deprecated. ${d}${l??""}`),t.apply(t,u)}}let r=NTe[e];return r?(...o)=>{let s=n.rowModel.getType();if(!r.includes(s)){kt(`api.${e} can only be called when gridOptions.rowModelType is ${r.join(" or ")}`);return}return t.apply(t,o)}:t}var BTe={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"},checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}},Gu=(e,t)=>{let n=t.rowModelType??"clientSide";return n==="clientSide"||n==="serverSide"?{module:"@ag-grid-enterprise/row-grouping"}:null},GTe={enableRowGroup:Gu,rowGroup:Gu,rowGroupIndex:Gu,enablePivot:Gu,enableValue:Gu,pivot:Gu,pivotIndex:Gu,aggFunc:Gu,cellEditor:e=>e.cellEditor==="agRichSelect"||e.cellEditor==="agRichSelectCellEditor"?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:e=>{let t=["columnsMenuTab","generalMenuTab"];return e.menuTabs?.some(n=>t.includes(n))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>rm},HTe={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0},zTe=Object.keys(HTe),rm={objectName:"colDef",allProperties:zTe,docsUrl:"column-properties/",deprecations:BTe,validations:GTe},UTe=()=>({advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."},suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."}}),jTe={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1},WTe=()=>({sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",validate:e=>{let t=e.rowModelType??"clientSide";switch(t){case"clientSide":{let n=`treeData requires 'getDataPath' in the ${t} row model.`;return e.getDataPath?null:n}case"serverSide":{let n=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${t} row model.`;return e.isServerSideGroup&&e.getServerSideGroupKey?null:n}}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],validate:e=>{switch(e.rowModelType??"clientSide"){case"clientSide":return null;case"serverSide":return e.suppressServerSideInfiniteScroll?"groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll":null}return null}},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:[void 0,"bottom"]}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},paginationPageSizeSelector:{validate:e=>{let t=e.paginationPageSizeSelector;return typeof t=="boolean"||t==null||t.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},rowSelection:{validate({rowSelection:e}){return e&&typeof e=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':e&&typeof e!="object"?"Expected `RowSelectionOptions` object for the `rowSelection` property.":null}},cellSelection:{module:"@ag-grid-enterprise/range-selection"},columnDefs:()=>rm,defaultColDef:()=>rm,defaultColGroupDef:()=>rm,autoGroupColumnDef:()=>rm,selectionColumnDef:()=>rm}),qTe=()=>({objectName:"gridOptions",allProperties:[...gC.ALL_PROPERTIES,...mC.EVENT_CALLBACKS],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:UTe(),validations:WTe()}),KTe=class extends j{constructor(){super(...arguments),this.beanName="validationService"}wireBeans(e){this.beans=e,this.gridOptions=e.gridOptions}postConstruct(){this.processGridOptions(this.gridOptions)}processGridOptions(e){this.processOptions(e,qTe())}validateApiFunction(e,t){return VTe(e,t,this.beans)}processOptions(e,t){let{validations:n,deprecations:i,allProperties:r,propertyExceptions:o,objectName:s,docsUrl:a}=t;r&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...o??[],...Object.keys(i)],r,s,a);let l=new Set;Object.keys(e).forEach(u=>{let d=i[u];if(d)if("renamed"in d){let{renamed:_,version:D}=d;l.add(`As of v${D}, ${String(u)} is deprecated. Please use ${String(_)} instead.`),e[_]=e[u]}else{let{message:_,version:D}=d;l.add(`As of v${D}, ${String(u)} is deprecated. ${_??""}`)}let h=e[u];if(h==null||h===!1)return;let p=n[u],g;if(p)if(typeof p=="function"){let _=p(e,this.gridOptions);if(!_)return;if("objectName"in _){let D=e[u];if(Array.isArray(D)){D.forEach(F=>{this.processOptions(F,_)});return}this.processOptions(e[u],_);return}g=_}else g=p;else return;let{module:m,dependencies:v,validate:C,supportedRowModels:S}=g;if(S){let _=this.gridOptions.rowModelType??"clientSide";if(!S.includes(_)){l.add(`${String(u)} is not supported with the '${_}' row model.`);return}}if(m){let _=Array.isArray(m)?m:[m],D=!0;if(_.forEach(F=>{this.gos.assertModuleRegistered(F,String(u))||(D=!1,l.add(`${String(u)} is only available when ${F} is loaded.`))}),!D)return}if(v){let _=this.checkForRequiredDependencies(u,v,e);if(_){l.add(_);return}}if(C){let _=C(e,this.gridOptions);if(_){l.add(_);return}}}),l.size>0&&l.forEach(u=>{X(u)})}checkForRequiredDependencies(e,t,n){let r=Object.entries(t).find(([a,l])=>{let c=n[a];return!l.includes(c)});if(!r)return null;let[o,s]=r;return s.length>1?`'${String(e)}' requires '${o}' to be one of [${s.join(", ")}].`:`'${String(e)}' requires '${o}' to be ${s[0]}.`}checkProperties(e,t,n,i,r){let o=["__ob__","__v_skip","__metadata__"],s=YTe(Object.getOwnPropertyNames(e),[...o,...t,...n],n);if(Ts(s,(a,l)=>{let c=`invalid ${i} property '${a}' did you mean any of these: ${l.slice(0,8).join(", ")}.`;n.includes("context")&&(c+=`
If you are trying to annotate ${i} with application data, use the '${i}.context' property instead.`),X(c)}),Object.keys(s).length>0&&r){let a=this.getFrameworkOverrides().getDocLink(r);X(`to see all the valid ${i} properties please check: ${a}`)}}};function YTe(e,t,n){let i={},r=e.filter(o=>!t.some(s=>s===o));return r.length>0&&r.forEach(o=>i[o]=DK({inputValue:o,allSuggestions:n}).values),i}var QTe={version:qe,moduleName:"@ag-grid-community/core"},XTe={version:qe,moduleName:"@ag-grid-community/core-validations",beans:[KTe]},xY={version:qe,moduleName:"@ag-grid-community/core-community-features",dependantModules:[QTe,XTe,aEe,OSe,mTe,zxe,$Ee,OTe,cTe]},$Te=class extends j{constructor(){super(...arguments),this.beanName="gridDestroyService",this.destroyCalled=!1}wireBeans(e){this.beans=e}destroy(){this.destroyCalled||(this.eventService.dispatchEvent({type:"gridPreDestroyed",state:this.beans.stateService?.getState()??{}}),this.destroyCalled=!0,this.beans.ctrlsService.get("gridCtrl")?.destroyGridUi(),this.beans.context.destroy(),super.destroy())}isDestroyCalled(){return this.destroyCalled}},Ux=new Set(["gridPreDestroyed","fillStart","pasteStart"]),ZTe=e=>e==="checkboxSelected"||e==="rowClicked"||e==="spaceKey"||e==="uiSelectAll"||e==="uiSelectAllCurrentPage"||e==="uiSelectAllFiltered",JTe=new Map([...gC.BOOLEAN_PROPERTIES.map(e=>[e,CO]),...gC.NUMBER_PROPERTIES.map(e=>[e,jK]),["groupAggFiltering",e=>typeof e=="function"?e:CO(e)],["pageSize",cl(1)],["autoSizePadding",cl(0)],["keepDetailRowsCount",cl(1)],["rowBuffer",cl(0)],["infiniteInitialRowCount",cl(1)],["cacheOverflowSize",cl(1)],["cacheBlockSize",cl(1)],["serverSideInitialRowCount",cl(1)],["viewportRowModelPageSize",cl(1)],["viewportRowModelBufferSize",cl(0)]]);function DY(e,t){let n=JTe.get(e);return n?n(t):t}function eRe(e){let t={};return Object.entries(e).forEach(([n,i])=>{let r=DY(n,i);t[n]=r}),t}var TY=class RY extends j{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new fm,this.globalEventHandlerFactory=t=>(n,i)=>{if(!this.isAlive())return;let r=Ux.has(n);if(r&&!t||!r&&t)return;let o=mC.getCallbackForEvent(n),s=this.gridOptions[o];typeof s=="function"&&this.frameworkOverrides.wrapOutgoing(()=>{s(i)})}}wireBeans(t){this.gridOptions=t.gridOptions,this.eGridDiv=t.eGridDiv,this.validationService=t.validationService,this.environment=t.environment,this.api=t.gridApi,this.gridId=t.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){let t=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),t),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:n})=>{this.updateGridOptions({options:n,force:!0,source:"gridOptionsUpdated"})}})}get(t){return this.gridOptions[t]??jTe[t]}getCallback(t){return this.mergeGridCommonParams(this.gridOptions[t])}exists(t){return ne(this.gridOptions[t])}mergeGridCommonParams(t){return t&&(i=>{let r=i;return r.api=this.api,r.context=this.gridOptionsContext,t(r)})}updateGridOptions({options:t,force:n,source:i="api"}){let r={id:RY.changeSetId++,properties:[]},o=[];Object.entries(t).forEach(([s,a])=>{i==="api"&&owe[s]&&X(`${s} is an initial property and cannot be updated.`);let l=DY(s,a),c=n||typeof l=="object"&&i==="api",u=this.gridOptions[s];if(c||u!==l){this.gridOptions[s]=l;let d={type:s,currentValue:l,previousValue:u,changeSet:r,source:i};o.push(d)}}),this.validationService?.processGridOptions(this.gridOptions),r.properties=o.map(s=>s.type),o.forEach(s=>{this.gridOptions.debug&&Rs(`Updated property ${s.type} from`,s.previousValue," to ",s.currentValue),this.propertyEventService.dispatchEvent(s)})}addPropertyEventListener(t,n){this.propertyEventService.addEventListener(t,n)}removePropertyEventListener(t,n){this.propertyEventService.removeEventListener(t,n)}getDomDataKey(){return this.domDataKey}getGridCommonParams(){return{api:this.api,context:this.gridOptionsContext}}addGridCommonParams(t){let n=t;return n.api=this.api,n.context=this.gridOptionsContext,n}assertModuleRegistered(t,n){return hc.__assertRegistered(t,n,this.gridId)}isModuleRegistered(t){return hc.__isRegistered(t,this.gridId)}};TY.changeSetId=0;var tRe=TY,nRe=class extends j{constructor(){super(...arguments),this.beanName="headerPositionUtils"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}findHeader(e,t){let n,i;if(si(e.column)?n=this.visibleColsService.getGroupAtDirection(e.column,t):(i=`getCol${t}`,n=this.visibleColsService[i](e.column)),!n)return;let{headerRowIndex:r}=e;if(this.getHeaderRowType(r)!=="filter"){let a=[n];for(;n.getParent();)n=n.getParent(),a.push(n);n=a[a.length-1-r]}let{column:o,headerRowIndex:s}=this.getHeaderIndexToFocus(n,r);return{column:o,headerRowIndex:s}}getHeaderIndexToFocus(e,t){let n;if(si(e)&&this.isAnyChildSpanningHeaderHeight(e)&&e.isPadding()){let i=e;n=i.getLeafColumns()[0];let r=n;for(;r!==i;)t++,r=r.getParent()}return{column:n||e,headerRowIndex:t}}isAnyChildSpanningHeaderHeight(e){return e?e.getLeafColumns().some(t=>t.isSpanHeaderHeight()):!1}getColumnVisibleParent(e,t){let n=this.getHeaderRowType(t),i=n==="filter",r=n==="column",o=i?e:e.getParent(),s=t-1,a=s;if(r&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;o&&o.isPadding();)o=o.getParent(),s--;a=s,s<0&&(o=e,s=t,a=void 0)}return{column:o,headerRowIndex:s,headerRowIndexWithoutSpan:a}}getColumnVisibleChild(e,t,n="After"){let i=this.getHeaderRowType(t),r=e,o=t+1,s=o;if(i==="group"){let a=e.getDisplayedLeafColumns(),l=n==="After"?a[0]:Rt(a),c=[],u=l;for(;u.getParent()!==e;)u=u.getParent(),c.push(u);if(r=l,l.isSpanHeaderHeight())for(let d=c.length-1;d>=0;d--){let h=c[d];if(!h.isPadding()){r=h;break}o++}else r=Rt(c),r||(r=l)}return{column:r,headerRowIndex:o,headerRowIndexWithoutSpan:s}}getHeaderRowType(e){let t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){let n=this.visibleColsService.getAllCols(),i=n[t==="start"?0:n.length-1];if(!i)return;let o=this.ctrlsService.getHeaderRowContainerCtrl(i.getPinned())?.getRowType(e);if(o=="group"){let s=this.visibleColsService.getColGroupAtLevel(i,e);return{headerRowIndex:e,column:s}}return{headerRowIndex:o==null?-1:e,column:i}}},iRe=class extends j{constructor(){super(...arguments),this.beanName="localeService"}getLocaleTextFunc(){let e=this.gos.getCallback("getLocaleText");if(e)return(n,i,r)=>e({key:n,defaultValue:i,variableValues:r});let t=this.gos.get("localeText");return(n,i,r)=>{let o=t&&t[n];if(o&&r&&r.length){let s=0;for(;!(s>=r.length||o.indexOf("${variable}")===-1);)o=o.replace("${variable}",r[s++])}return o??i}}},rRe=class extends j{constructor(){super(...arguments),this.beanName="apiEventService",this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new jO(this.getFrameworkOverrides())}addEventListener(e,t){let n=this.frameworkEventWrappingService.wrap(t),i=Wx(this.gos)&&!Ux.has(e),r=i?this.asyncEventListeners:this.syncEventListeners;r.has(e)||r.set(e,new Set),r.get(e).add(n),this.eventService.addEventListener(e,n,i)}removeEventListener(e,t){let n=this.frameworkEventWrappingService.unwrap(t),r=!!this.asyncEventListeners.get(e)?.delete(n);r||this.syncEventListeners.get(e)?.delete(n),this.eventService.removeEventListener(e,n,r)}addGlobalListener(e){let t=this.frameworkEventWrappingService.wrapGlobal(e);if(Wx(this.gos)){let i=(o,s)=>{Ux.has(o)&&t(o,s)},r=(o,s)=>{Ux.has(o)||t(o,s)};this.globalEventListenerPairs.set(e,{syncListener:i,asyncListener:r}),this.eventService.addGlobalListener(i,!1),this.eventService.addGlobalListener(r,!0)}else this.syncGlobalEventListeners.add(t),this.eventService.addGlobalListener(t,!1)}removeGlobalListener(e){let t=this.frameworkEventWrappingService.unwrapGlobal(e);if(this.globalEventListenerPairs.has(t)){let{syncListener:i,asyncListener:r}=this.globalEventListenerPairs.get(t);this.eventService.removeGlobalListener(i,!1),this.eventService.removeGlobalListener(r,!0),this.globalEventListenerPairs.delete(e)}else this.syncGlobalEventListeners.delete(t),this.eventService.removeGlobalListener(t,!1)}destroyEventListeners(e,t){e.forEach((n,i)=>{n.forEach(r=>this.eventService.removeEventListener(i,r,t)),n.clear()}),e.clear()}destroyGlobalListeners(e,t){e.forEach(n=>this.eventService.removeGlobalListener(n,t)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener:e,asyncListener:t})=>{this.eventService.removeGlobalListener(e,!1),this.eventService.removeGlobalListener(t,!0)}),this.globalEventListenerPairs.clear()}},oRe=class extends j{constructor(){super(...arguments),this.beanName="pageBoundsListener"}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventService.dispatchEvent({type:"paginationChanged",animate:e?.animate??!1,newData:e?.newData??!1,newPage:e?.newPage??!1,newPageSize:e?.newPageSize??!1,keepRenderedRows:e?.keepRenderedRows??!1})}calculatePages(){this.paginationService?this.paginationService.calculatePages():this.pageBoundsService.calculateBounds(0,this.rowModel.getRowCount()-1)}},sRe=class extends j{constructor(){super(...arguments),this.beanName="pageBoundsService",this.pixelOffset=0}wireBeans(e){this.rowModel=e.rowModel}getFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getCurrentPageHeight(){return St(this.topRowBounds)||St(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){let e=this.topRowBounds?this.topRowBounds.rowTop:0,t=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:e,pageLastPixel:t}}calculateBounds(e,t){this.topRowBounds=this.rowModel.getRowBounds(e),this.topRowBounds&&(this.topRowBounds.rowIndex=e),this.bottomRowBounds=this.rowModel.getRowBounds(t),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=t),this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){let e=ne(this.topRowBounds)?this.topRowBounds.rowTop:0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},aRe=class extends j{constructor(){super(),this.beanName="ariaAnnouncementService",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.updateAnnouncement=Qr(this.updateAnnouncement.bind(this),200)}wireBeans(e){this.eGridDiv=e.eGridDiv}postConstruct(){let e=Yn(this.gos),t=this.descriptionContainer=e.createElement("div");t.classList.add("ag-aria-description-container"),rK(t,"polite"),uwe(t,"additions text"),cwe(t,!0),this.eGridDiv.appendChild(t)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;let e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=e)},50)}destroy(){super.destroy();let{descriptionContainer:e}=this;e&&(br(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null,this.pendingAnnouncements.clear()}},lRe=class extends j{constructor(){super(...arguments),this.beanName="columnAnimationService",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;let e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(e,t){if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){e(),t();return}let n=i=>{for(;i.length;){let r=i.pop();r&&r()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e(),n(this.executeNextFuncs)},0),window.setTimeout(()=>{t(),n(this.executeLaterFuncs)},200)})}},cRe=class extends j{constructor(){super(...arguments),this.beanName="columnHoverService"}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}updateState(e){this.selectedColumns=e,this.eventService.dispatchEvent({type:"columnHoverChanged"})}},uRe=class extends j{constructor(){super(...arguments),this.beanName="overlayService",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}wireBeans(e){this.userComponentFactory=e.userComponentFactory,this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}postConstruct(){this.isClientSide=kn(this.gos);let e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.onGridSizeChanged.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.overlayWrapperComp=e,this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.overlayWrapperComp}isExclusive(){return this.state===1&&!!this.overlayWrapperComp}getOverlayWrapper(){return this.overlayWrapperComp}showLoadingOverlay(){this.showInitialOverlay=!1;let e=this.gos.get("loading");!e&&(e!==void 0||this.gos.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1,!(this.gos.get("loading")||this.gos.get("suppressNoRowsOverlay"))&&this.doShowNoRowsOverlay()}hideOverlay(){if(this.showInitialOverlay=!1,this.gos.get("loading")){X("Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.");return}this.doHideOverlay()}updateOverlayVisibility(){if(!this.overlayWrapperComp){this.state=0;return}let e=this.gos.get("loading");this.showInitialOverlay&&e===void 0&&!this.gos.get("suppressLoadingOverlay")&&(e=!this.gos.get("columnDefs")||!this.columnModel.isReady()||!this.gos.get("rowData")&&this.isClientSide),e?this.state!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,this.rowModel.isEmpty()&&!this.gos.get("suppressNoRowsOverlay")&&this.isClientSide?this.state!==2&&this.doShowNoRowsOverlay():this.state!==0&&this.doHideOverlay())}doShowLoadingOverlay(){this.overlayWrapperComp&&(this.state=1,this.showOverlay(this.userComponentFactory.getLoadingOverlayCompDetails({}),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.overlayWrapperComp&&(this.state=2,this.showOverlay(this.userComponentFactory.getNoRowsOverlayCompDetails({}),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.overlayWrapperComp&&(this.state=0,this.overlayWrapperComp.hideOverlay(),this.updateExclusive())}showOverlay(e,t,n){let i=e.newAgStackInstance();this.overlayWrapperComp?.showOverlay(i,t,this.isExclusive(),n),this.refreshWrapperPadding()}updateExclusive(){let e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventService.dispatchEvent({type:"overlayExclusiveChanged"})}onGridSizeChanged(){this.refreshWrapperPadding()}refreshWrapperPadding(){if(!this.overlayWrapperComp)return;let e=0;this.state===2?e=this.ctrlsService.get("gridHeaderCtrl")?.getHeaderHeight()||0:this.wrapperPadding!==0&&(e=0),this.wrapperPadding!==e&&(this.wrapperPadding=e,this.overlayWrapperComp.updateOverlayWrapperPaddingTop(e))}},dRe=class extends j{constructor(){super(...arguments),this.beanName="rowCssClassCalculator"}wireBeans(e){this.stylingService=e.stylingService}getInitialRowClasses(e){let t=[];return ne(e.extraCssClass)&&t.push(e.extraCssClass),t.push("ag-row"),t.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&t.push("ag-opacity-zero"),t.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&t.push("ag-row-pinned"),e.rowNode.isSelected()&&t.push("ag-row-selected"),e.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&t.push("ag-row-loading"),e.fullWidthRow&&t.push("ag-full-width-row"),e.expandable&&(t.push("ag-row-group"),t.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&t.push("ag-row-dragging"),lq(t,this.processClassesFromGridOptions(e.rowNode)),lq(t,this.preProcessRowClassRules(e.rowNode)),t.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&t.push("ag-row-first"),e.lastRowOnPage&&t.push("ag-row-last"),e.fullWidthRow&&(e.pinned==="left"&&t.push("ag-cell-last-left-pinned"),e.pinned==="right"&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(e){let t=[],n=o=>{typeof o=="string"?t.push(o):Array.isArray(o)&&o.forEach(s=>t.push(s))},i=this.gos.get("rowClass");if(i){if(typeof i=="function")return X("rowClass should not be a function, please use getRowClass instead"),[];n(i)}let r=this.gos.getCallback("getRowClass");if(r){let o={data:e.data,node:e,rowIndex:e.rowIndex},s=r(o);n(s)}return t}preProcessRowClassRules(e){let t=[];return this.processRowClassRules(e,n=>{t.push(n)},()=>{}),t}processRowClassRules(e,t,n){let i=this.gos.addGridCommonParams({data:e.data,node:e,rowIndex:e.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),i,t,n)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}},hRe=class extends j{constructor(){super(...arguments),this.beanName="rowContainerHeightService",this.scrollY=0,this.uiBodyHeight=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=bwe(),this.gos.get("debug")&&Rs("RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;let t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,n=this.getUiBodyHeight();(t!==this.scrollY||n!==this.uiBodyHeight)&&(this.scrollY=t,this.uiBodyHeight=n,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;let e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.gos.get("debug")&&Rs(`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){let t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){let t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return t.bottom-t.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;let t=this.modelHeight-this.getUiBodyHeight(),n=e/t;return this.maxScrollY*n}},fRe=class extends j{constructor(){super(...arguments),this.beanName="rowNodeSorter"}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.showRowGroupColsService=e.showRowGroupColsService}postConstruct(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=ul(this.gos),this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=ul(this.gos))}doFullSort(e,t){let n=(r,o)=>({currentPos:o,rowNode:r}),i=e.map(n);return i.sort(this.compareRowNodes.bind(this,t)),i.map(r=>r.rowNode)}compareRowNodes(e,t,n){let i=t.rowNode,r=n.rowNode;for(let o=0,s=e.length;o<s;o++){let a=e[o],l=a.sort==="desc",c=this.getValue(i,a.column),u=this.getValue(r,a.column),d,h=this.getComparator(a,i);if(h?d=h(c,u,i,r,l):d=yCe(c,u,this.isAccentedSort),!isNaN(d)&&d!==0)return a.sort==="asc"?d:d*-1}return t.currentPos-n.currentPos}getComparator(e,t){let n=e.column,i=n.getColDef().comparator;if(i!=null)return i;if(!n.getColDef().showRowGroup)return;let r=!t.group&&n.getColDef().field;if(!r)return;let o=this.columnModel.getColDefCol(r);if(o)return o.getColDef().comparator}getValue(e,t){if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);if(e.rowGroupColumn===t){if(oD(this.gos,this.columnModel.isPivotActive())){let o=e.allLeafChildren?.[0];return o?this.valueService.getValue(t,o,!1,!1):void 0}let r=this.showRowGroupColsService?.getShowRowGroupCol(t.getId());return r?e.groupData?.[r.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return this.valueService.getValue(t,e,!1,!1)}},hD=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,t){if(e.children)for(let n=0;n<e.children.length;n++)this.depthFirstSearchChangedPath(e.children[n],t);t(e.rowNode)}depthFirstSearchEverything(e,t,n){if(e.childrenAfterGroup)for(let i=0;i<e.childrenAfterGroup.length;i++){let r=e.childrenAfterGroup[i];r.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[i],t,n):n&&t(r)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,n=!1){this.active&&!n?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,n=0;for(;!this.mapToItems[t.id];){let i={rowNode:t,children:null};this.mapToItems[t.id]=i,n++,t=t.parent}return n}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let n=e;for(;n;)this.nodeIdsToColumns[n.id]||(this.nodeIdsToColumns[n.id]={}),t.forEach(i=>this.nodeIdsToColumns[n.id][i.getId()]=!0),n=n.parent}linkPathItems(e,t){let n=e;for(let i=0;i<t;i++){let r=this.mapToItems[n.id],o=this.mapToItems[n.parent.id];o.children||(o.children=[]),o.children.push(r),n=n.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;let n=this.createPathItems(e);this.linkPathItems(e,n),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;let n=this.nodeIdsToColumns[e.id];return t.filter(r=>n[r.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;let n=this.nodeIdsToColumns[e.id];return t.filter(r=>!n[r.getId()])}},IY=class extends j{constructor(){super(...arguments),this.beanName="selectionService",this.selectedNodes=new Map,this.selectionCtx=new mEe,this.rowSelectionMode=void 0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){let{gos:e,rowModel:t,onRowSelected:n}=this;this.selectionCtx.init(t),this.rowSelectionMode=Kx(e),this.groupSelectsChildren=ef(e),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{let i=ef(e),r=Kx(e);(i!==this.groupSelectsChildren||r!==this.rowSelectionMode)&&(this.groupSelectsChildren=i,this.rowSelectionMode=r,this.deselectAllRowNodes({source:"api"}))}),this.addManagedEventListeners({rowSelected:n.bind(this)})}destroy(){super.destroy(),this.resetNodes(),this.selectionCtx.reset()}isMultiSelect(){return this.rowSelectionMode==="multiRow"}overrideSelectionValue(e,t){if(!ZTe(t))return e;let n=this.selectionCtx.getRoot();return n?n.isSelected()??!1:!0}setNodesSelected(e){let{newValue:t,clearSelection:n,suppressFinishActions:i,rangeSelect:r,nodes:o,event:s,source:a}=e;if(o.length===0)return 0;if(o.length>1&&!this.isMultiSelect())return X("cannot multi select unless selection mode is 'multiRow'"),0;let l=this.groupSelectsChildren&&e.groupSelectsFiltered===!0,c=o.map(d=>d.footer?d.sibling:d);if(r){if(c.length>1)return X("cannot range select while selecting multiple rows"),0;let d=c[0],h=this.overrideSelectionValue(t,a);if(this.isMultiSelect()){if(this.selectionCtx.isInRange(d)){let p=this.selectionCtx.truncate(d);return h&&this.selectRange(p.discard,!1,a),this.selectRange(p.keep,h,a)}else if(this.selectionCtx.getRoot()!==d){let m=this.selectionCtx.extend(d,this.groupSelectsChildren);return h&&this.selectRange(m.discard,!1,a),this.selectRange(m.keep,h,a)}}}i||this.selectionCtx.setRoot(c[0]);let u=0;for(let d=0;d<c.length;d++){let h=c[d];l&&h.group||h.selectThisNode(t,s,a)&&u++,this.groupSelectsChildren&&h.childrenAfterGroup?.length&&(u+=this.selectChildren(h,t,l,a))}return i||(t&&(n||!this.isMultiSelect())&&(u+=this.clearOtherNodes(c[0],a)),u>0&&(this.updateGroupsFromChildrenSelections(a),this.dispatchSelectionChanged(a))),u}selectRange(e,t,n){let i=0;return e.forEach(r=>{if(r.group&&this.groupSelectsChildren)return;r.selectThisNode(t,void 0,n)&&i++}),i>0&&(this.updateGroupsFromChildrenSelections(n),this.dispatchSelectionChanged(n)),i}selectChildren(e,t,n,i){let r=n?e.childrenAfterAggFilter:e.childrenAfterGroup;return St(r)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:n,source:i,nodes:r})}getSelectedNodes(){let e=[];return this.selectedNodes.forEach(t=>{t&&e.push(t)}),e}getSelectedRows(){let e=[];return this.selectedNodes.forEach(t=>{t&&t.data&&e.push(t.data)}),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){let t=new Map;this.selectedNodes.forEach((n,i)=>{n&&e(n)&&t.set(i,n)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsChildren||!kn(this.gos))return!1;let i=this.rowModel.getRootNode();t||(t=new hD(!0,i),t.setInactive());let r=!1;return t.forEachChangedNodeDepthFirst(o=>{if(o!==i){let s=o.calculateSelectedFromChildren();r=o.selectThisNode(s===null?!1:s,void 0,e)||r}}),r}clearOtherNodes(e,t){let n=new Map,i=0;return this.selectedNodes.forEach(r=>{if(r&&r.id!==e.id){let o=this.selectedNodes.get(r.id);i+=o.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&r.parent&&n.set(r.parent.id,r.parent)}}),n.forEach(r=>{let o=r.calculateSelectedFromChildren();r.selectThisNode(o===null?!1:o,void 0,t)}),i}onRowSelected(e){let t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}syncInOldRowNode(e,t){if(ne(t)&&e.id!==t.id&&t){let i=t.id;this.selectedNodes.get(i)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.setSelectedInitialValue(!0),this.selectedNodes.set(e.id,e)):e.setSelectedInitialValue(!1)}reset(e){let t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes?.clear()}getBestCostNodeSelection(){if(!kn(this.gos))return;let t=this.rowModel.getTopLevelNodes();if(t===null)return;let n=[];function i(r){for(let o=0,s=r.length;o<s;o++){let a=r[o];if(a.isSelected())n.push(a);else{let l=a;l.group&&l.children&&i(l.children)}}}return i(t),n}isEmpty(){let e=0;return this.selectedNodes.forEach(t=>{t&&e++}),e===0}deselectAllRowNodes(e){let t=s=>s.selectThisNode(!1,void 0,i),n=kn(this.gos),{source:i,justFiltered:r,justCurrentPage:o}=e;if(o||r){if(!n){kt("selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(r,o).forEach(t)}else this.selectedNodes.forEach(s=>{s&&t(s)}),this.reset(i);this.selectionCtx.reset(),n&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)}getSelectedCounts(e,t){let n=0,i=0,r=o=>{this.groupSelectsChildren&&o.group||(o.isSelected()?n++:o.selectable&&i++)};return this.getNodesToSelect(e,t).forEach(r),{selectedCount:n,notSelectedCount:i}}getSelectAllState(e,t){let{selectedCount:n,notSelectedCount:i}=this.getSelectedCounts(e,t);return n===0&&i===0?!1:n>0&&i>0?null:n>0}hasNodesToSelect(e=!1,t=!1){return this.getNodesToSelect(e,t).filter(n=>n.selectable).length>0}getNodesToSelect(e=!1,t=!1){this.validateSelectAllType();let n=[];if(t)return this.forEachNodeOnPage(r=>{if(!r.group){n.push(r);return}if(!r.expanded){let o=s=>{n.push(s),s.childrenAfterFilter?.length&&s.childrenAfterFilter.forEach(o)};o(r);return}this.groupSelectsChildren||n.push(r)}),n;let i=this.rowModel;return e?(i.forEachNodeAfterFilter(r=>{n.push(r)}),n):(i.forEachNode(r=>{n.push(r)}),n)}forEachNodeOnPage(e){let t=this.pageBoundsService.getFirstRow(),n=this.pageBoundsService.getLastRow();for(let i=t;i<=n;i++){let r=this.rowModel.getRow(i);r&&e(r)}}selectAllRowNodes(e){if(SCe(this.gos)&&!HO(this.gos))return X("cannot multi select unless selection mode is 'multiRow'");this.validateSelectAllType();let{source:t,justFiltered:n,justCurrentPage:i}=e,r=this.getNodesToSelect(n,i);r.forEach(o=>o.selectThisNode(!0,void 0,t)),this.selectionCtx.setRoot(r[0]??null),this.selectionCtx.setEndRange(Rt(r)??null),kn(this.gos)&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t),this.dispatchSelectionChanged(t)}getSelectionState(){let e=[];return this.selectedNodes.forEach(t=>{t?.id&&e.push(t.id)}),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return kt("Invalid selection state. When using client-side row model, the state must conform to `string[]`.");let n=new Set(e),i=[];this.rowModel.forEachNode(r=>{n.has(r.id)&&i.push(r)}),this.setNodesSelected({newValue:!0,nodes:i,source:t})}dispatchSelectionChanged(e){this.eventService.dispatchEvent({type:"selectionChanged",source:e})}validateSelectAllType(){if(!kn(this.gos))throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`)}},pRe=class extends j{constructor(){super(...arguments),this.beanName="selectableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(e=!1){let{gos:t}=this,n=jx(t),i=GO(t);if(!n||!i)return;let r=ef(t),o=kn(t)&&r,s=[],a=l=>{if(e&&!l.group)return;if(o&&l.group){let u=l.childrenAfterGroup.some(d=>d.selectable===!0);l.setRowSelectable(u,!0);return}let c=i?.(l)??!0;l.setRowSelectable(c,!0),!c&&l.isSelected()&&s.push(l)};if(o){let l=this.rowModel;new hD(!1,l.getRootNode()).forEachChangedNodeDepthFirst(a,!0,!0)}else this.rowModel.forEachNode(a);s.length&&this.selectionService.setNodesSelected({nodes:s,newValue:!1,source:"selectableChanged"}),o&&this.selectionService instanceof IY&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}},Fq=["asc","desc",null],gRe=class extends j{constructor(){super(...arguments),this.beanName="sortController"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.showRowGroupColsService=e.showRowGroupColsService}progressSort(e,t,n){let i=this.getNextSortDirection(e);this.setSortForColumn(e,i,t,n)}setSortForColumn(e,t,n,i){t!=="asc"&&t!=="desc"&&(t=null);let r=ul(this.gos),o=[e];if(r&&e.getColDef().showRowGroup){let c=this.funcColsService.getSourceColumnsForGroupColumn(e)?.filter(u=>u.isSortable());c&&(o=[e,...c])}o.forEach(l=>l.setSort(t,i));let s=(n||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"),a=[];if(!s){let l=this.clearSortBarTheseColumns(o,i);a.push(...l)}this.updateSortIndex(e),a.push(...o),this.dispatchSortChangedEvents(i,a)}updateSortIndex(e){let t=ul(this.gos),n=this.showRowGroupColsService?.getShowRowGroupCol(e.getId()),i=t&&n||e,r=this.getColumnsWithSortingOrdered();this.columnModel.getAllCols().forEach(a=>a.setSortIndex(null));let o=r.filter(a=>t&&a.getColDef().showRowGroup?!1:a!==i);(i.getSort()?[...o,i]:o).forEach((a,l)=>{a.setSortIndex(l)})}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let t=this.columnModel.getAllCols().filter(n=>!!n.getSort());return t&&t.length>0}dispatchSortChangedEvents(e,t){let n={type:"sortChanged",source:e};t&&(n.columns=t),this.eventService.dispatchEvent(n)}clearSortBarTheseColumns(e,t){let n=[];return this.columnModel.getAllCols().forEach(i=>{e.includes(i)||(i.getSort()&&n.push(i),i.setSort(void 0,t))}),n}getNextSortDirection(e){let t;if(e.getColDef().sortingOrder?t=e.getColDef().sortingOrder:this.gos.get("sortingOrder")?t=this.gos.get("sortingOrder"):t=Fq,!Array.isArray(t)||t.length<=0)return X(`sortingOrder must be an array with at least one element, currently it's ${t}`),null;let n=t.indexOf(e.getSort()),i=n<0,r=n==t.length-1,o;return i||r?o=t[0]:o=t[n+1],Fq.indexOf(o)<0?(X("invalid sort type ",o),null):o}getIndexedSortMap(){let e=this.columnModel.getAllCols().filter(o=>!!o.getSort());if(this.columnModel.isPivotMode()){let o=ul(this.gos);e=e.filter(s=>{let a=!!s.getAggFunc(),l=!s.isPrimary(),c=o?this.showRowGroupColsService?.getShowRowGroupCol(s.getId()):s.getColDef().showRowGroup;return a||l||c})}let t=this.funcColsService.getRowGroupColumns().filter(o=>!!o.getSort()),n={};e.forEach((o,s)=>n[o.getId()]=s),e.sort((o,s)=>{let a=o.getSortIndex(),l=s.getSortIndex();if(a!=null&&l!=null)return a-l;if(a==null&&l==null){let c=n[o.getId()],u=n[s.getId()];return c>u?1:-1}else return l==null?-1:1});let i=ul(this.gos)&&!!t.length;i&&(e=[...new Set(e.map(o=>this.showRowGroupColsService?.getShowRowGroupCol(o.getId())??o))]);let r=new Map;return e.forEach((o,s)=>r.set(o,s)),i&&t.forEach(o=>{let s=this.showRowGroupColsService.getShowRowGroupCol(o.getId());r.set(o,r.get(s))}),r}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([e,t],[n,i])=>t-i).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){let t=ul(this.gos),n=!!e.getColDef().showRowGroup;return t&&n}getDisplaySortForColumn(e){let t=this.funcColsService.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSort();let i=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,r=i[0].getSort();return i.every(s=>s.getSort()==r)?r:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}},mRe=class extends j{constructor(){super(...arguments),this.beanName="syncService",this.waitingForColumns=!1}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.rowModel=e.rowModel}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.ctrlsService.whenReady(this,()=>{let e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){this.columnModel.setColumnDefs(e??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.eventService.dispatchEvent({type:"gridReady"});let e=this.gos.isModuleRegistered("@ag-grid-enterprise/core");this.gos.get("debug")&&Rs(`initialised successfully, enterprise = ${e}`)}setColumnDefs(e){let t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.columnModel.setColumnDefs(t,Wh(e.source))}}},vRe="paste",yRe=class extends j{constructor(){super(...arguments),this.beanName="changeDetectionService"}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer}postConstruct(){kn(this.gos)&&(this.clientSideRowModel=this.rowModel),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){e.source!==vRe&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,t){if(this.gos.get("suppressChangeDetection"))return;let n=[e];if(this.clientSideRowModel&&!e.isRowPinned()){let i=this.gos.get("aggregateOnlyChangedColumns"),r=new hD(i,this.clientSideRowModel.getRootNode());r.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(r),r.forEachChangedNodeDepthFirst(o=>{n.push(o)})}this.rowRenderer.refreshCells({rowNodes:n})}},CRe=class extends j{constructor(){super(...arguments),this.beanName="expressionService",this.expressionToFunctionCache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);kt("value should be either a string or a function",e)}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(n){return Rs("Processing of the expression failed"),Rs("Expression = ",e),Rs("Params = ",t),Rs("Exception = ",n),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];let t=this.createFunctionBody(e),n=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=n,n}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}},wRe=class extends j{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,n){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=n)}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},bRe=class extends j{constructor(){super(...arguments),this.beanName="valueService",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionService=e.expressionService,this.columnModel=e.columnModel,this.valueCache=e.valueCache,this.dataTypeService=e.dataTypeService}postConstruct(){this.initialised||this.init()}init(){this.isSsrm=vc(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;let e=n=>this.callColumnCellValueChangedHandler(n),t=Wx(this.gos);this.eventService.addEventListener("cellValueChanged",e,t),this.addDestroyFunc(()=>this.eventService.removeEventListener("cellValueChanged",e,t)),this.addManagedPropertyListener("treeData",n=>this.isTreeData=n.currentValue)}getValueForDisplay(e,t){let n=t.leafGroup&&this.columnModel.isPivotMode(),i=t.group&&t.expanded&&!t.footer&&!n,r=this.gos.get("groupSuppressBlankHeader");if(!i||r)return this.getValue(e,t);let o=!1,s=this.gos.get("groupTotalRow")??this.gos.get("groupIncludeFooter");typeof s!="function"?o=!!s:o=!!(this.gos.getCallback("groupTotalRow")??this.gos.getCallback("groupIncludeFooter"))({node:this});let a=i&&o;return this.getValue(e,t,!1,a)}getValue(e,t,n=!1,i=!1){if(this.initialised||this.init(),!t)return;let r=e.getColDef(),o=r.field,s=e.getColId(),a=t.data,l,c=t.groupData&&t.groupData[s]!==void 0,u=!i&&t.aggData&&t.aggData[s]!==void 0,d=this.isSsrm&&i&&!!e.getColDef().aggFunc,h=this.isSsrm&&t.footer&&t.field&&(e.getColDef().showRowGroup===!0||e.getColDef().showRowGroup===t.field);if(n&&r.filterValueGetter?l=this.executeFilterValueGetter(r.filterValueGetter,a,e,t):this.isTreeData&&u?l=t.aggData[s]:this.isTreeData&&r.valueGetter?l=this.executeValueGetter(r.valueGetter,a,e,t):this.isTreeData&&o&&a?l=aC(a,o,e.isFieldContainsDots()):c?l=t.groupData[s]:u?l=t.aggData[s]:r.valueGetter?l=this.executeValueGetter(r.valueGetter,a,e,t):h?l=aC(a,t.field,e.isFieldContainsDots()):o&&a&&!d&&(l=aC(a,o,e.isFieldContainsDots())),this.cellExpressions&&typeof l=="string"&&l.indexOf("=")===0){let p=l.substring(1);l=this.executeValueGetter(p,a,e,t)}if(l==null){let p=this.getOpenedGroup(t,e);if(p!=null)return p}return l}parseValue(e,t,n,i){let r=e.getColDef(),o=r.valueParser;if(ne(o)){let s=this.gos.addGridCommonParams({node:t,data:t?.data,oldValue:i,newValue:n,colDef:r,column:e});return typeof o=="function"?o(s):this.expressionService.evaluate(o,s)}return n}getDeleteValue(e,t){return ne(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t))??null:null}formatValue(e,t,n,i,r=!0){let o=null,s,a=e.getColDef();if(i?s=i:r&&(s=a.valueFormatter),s){let l=this.gos.addGridCommonParams({value:n,node:t,data:t?t.data:null,colDef:a,column:e});typeof s=="function"?o=s(l):o=this.expressionService.evaluate(s,l)}else if(a.refData)return a.refData[n]||"";return o==null&&Array.isArray(n)&&(o=n.join(", ")),o}getOpenedGroup(e,t){if(!this.gos.get("showOpenedGroup")||!t.getColDef().showRowGroup)return;let i=t.getColDef().showRowGroup,r=e.parent;for(;r!=null;){if(r.rowGroupColumn&&(i===!0||i===r.rowGroupColumn.getColId()))return r.key;r=r.parent}}setValue(e,t,n,i){let r=this.columnModel.getColDefCol(t);if(!e||!r)return!1;St(e.data)&&(e.data={});let{field:o,valueSetter:s}=r.getColDef();if(St(o)&&St(s))return X("you need either field or valueSetter set on colDef for editing to work"),!1;if(this.dataTypeService&&!this.dataTypeService.checkType(r,n))return X("Data type of the new value does not match the cell data type of the column"),!1;let a=this.gos.addGridCommonParams({node:e,data:e.data,oldValue:this.getValue(r,e),newValue:n,colDef:r.getColDef(),column:r});a.newValue=n;let l;if(ne(s)?typeof s=="function"?l=s(a):l=this.expressionService.evaluate(s,a):l=this.setValueUsingField(e.data,o,n,r.isFieldContainsDots()),l===void 0&&(l=!0),!l)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged();let c=this.getValue(r,e);return this.eventService.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:a.column,colDef:a.colDef,data:e.data,node:e,oldValue:a.oldValue,newValue:c,value:c,source:i}),!0}callColumnCellValueChangedHandler(e){let t=e.colDef.onCellValueChanged;typeof t=="function"&&this.getFrameworkOverrides().wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,n,i){if(!t)return!1;let r=!1;if(!i)r=e[t]===n,r||(e[t]=n);else{let o=t.split("."),s=e;for(;o.length>0&&s;){let a=o.shift();o.length===0?(r=s[a]===n,r||(s[a]=n)):s=s[a]}}return!r}executeFilterValueGetter(e,t,n,i){let r=this.gos.addGridCommonParams({data:t,node:i,column:n,colDef:n.getColDef(),getValue:this.getValueCallback.bind(this,i)});return typeof e=="function"?e(r):this.expressionService.evaluate(e,r)}executeValueGetter(e,t,n,i){let r=n.getColId(),o=this.valueCache.getValue(i,r);if(o!==void 0)return o;let s=this.gos.addGridCommonParams({data:t,node:i,column:n,colDef:n.getColDef(),getValue:this.getValueCallback.bind(this,i)}),a;return typeof e=="function"?a=e(s):a=this.expressionService.evaluate(e,s),this.valueCache.setValue(i,r,a),a}getValueCallback(e,t){let n=this.columnModel.getColDefCol(t);return n?this.getValue(n,e):null}getKeyForNode(e,t){let n=this.getValue(e,t),i=e.getColDef().keyCreator,r=n;if(i){let o=this.gos.addGridCommonParams({value:n,colDef:e.getColDef(),column:e,node:t,data:t.data});r=i(o)}return typeof r=="string"||r==null||(r=String(r),r==="[object Object]"&&X("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),r}},yN=class jh{static applyGlobalGridOptions(t){if(!jh.gridOptions)return t;let n={};return Yr(n,jh.gridOptions,!0,!0),jh.mergeStrategy==="deep"?Yr(n,t,!0,!0):n=B(B({},n),t),jh.gridOptions.context&&(n.context=jh.gridOptions.context),t.context&&(jh.mergeStrategy==="deep"&&n.context&&Yr(t.context,n.context,!0,!0),n.context=t.context),n}};yN.gridOptions=void 0;yN.mergeStrategy="shallow";var SRe=yN;function FY(e,t,n){if(!t)return kt("No gridOptions provided to createGrid"),{};let i=new ERe().create(e,t,r=>{let o=new QEe(e);r.createBean(o)},void 0,n);if(!Object.isFrozen(t)&&!n?.frameworkOverrides){let r="https://ag-grid.com/javascript-data-grid/grid-interface/#grid-api";Object.defineProperty(t,"api",{get:()=>{kt(`gridOptions.api is no longer supported. See ${r}.`)},configurable:!0})}return i}var _Re=1,ERe=class{create(e,t,n,i,r){let o=SRe.applyGlobalGridOptions(t),s=eRe(o),a=s.gridId??String(_Re++),l=this.getRegisteredModules(r,a),c=this.createBeansList(s.rowModelType,l,a),u=this.createProvidedBeans(e,s,r);if(!c){kt("Failed to create grid.");return}let d={providedBeanInstances:u,beanClasses:c,gridId:a,beanInitComparator:NEe,beanDestroyComparator:LEe,derivedBeans:[TEe]},h=new bbe(d);return this.registerModuleUserComponents(h,l),this.registerControllers(h,l),this.registerModuleApiFunctions(h,l),n(h),h.getBean("syncService").start(),i&&i(h),h.getBean("gridApi")}registerControllers(e,t){let n=e.getBean("ctrlsFactory");t.forEach(i=>{i.controllers&&i.controllers.forEach(r=>n.register(r))})}getRegisteredModules(e,t){let n=e?e.modules:null,i=hc.__getRegisteredModules(t),r=[],o={},s=(a,l,c)=>{(d=>{o[d.moduleName]||(o[d.moduleName]=!0,r.push(d),hc.__register(d,a,c))})(l),l.dependantModules&&l.dependantModules.forEach(d=>s(a,d,c))};return s(!!n?.length||!hc.__isPackageBased(),xY,void 0),n&&n.forEach(a=>s(!0,a,t)),i&&i.forEach(a=>s(!hc.__isPackageBased(),a,void 0)),r}registerModuleUserComponents(e,t){let n=this.extractModuleEntity(t,r=>r.userComponents?r.userComponents:[]),i=e.getBean("userComponentRegistry");n.forEach(({name:r,classImp:o,params:s})=>{i.registerDefaultComponent(r,o,s)})}registerModuleApiFunctions(e,t){let n=e.getBean("apiFunctionService");t.forEach(i=>{let r=i.apiFunctions;r&&Object.keys(r).forEach(s=>{n?.addFunction(s,r[s])})})}createProvidedBeans(e,t,n){let i=n?n.frameworkOverrides:null;St(i)&&(i=new mN);let r={gridOptions:t,eGridDiv:e,globalEventListener:n?n.globalEventListener:null,globalSyncEventListener:n?n.globalSyncEventListener:null,frameworkOverrides:i};return n&&n.providedBeanInstances&&Object.assign(r,n.providedBeanInstances),r}createBeansList(e="clientSide",t,n){let i=t.filter(l=>!l.rowModel||l.rowModel===e),r={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!r[e]){kt("Could not find row model for rowModelType = ",e);return}if(!hc.__assertRegistered(r[e],`rowModelType = '${e}'`,n))return;let o=[zEe,GEe,nRe,$Te,DEe,tbe,PEe,kEe,b_e,TK,hRe,C_e,iRe,hEe,xbe,nwe,WEe,tRe,SEe,IY,UCe,GSe,sRe,oRe,uEe,CRe,zCe,y_e,wRe,bRe,lEe,w_e,Sbe,qEe,v_e,UEe,EEe,vEe,m_e,gRe,cRe,lRe,pRe,yRe,S_e,REe,dRe,fRe,BEe,KEe,HEe,VEe,mRe,uRe,__e,rRe,aRe,E_e,qCe,IEe,KCe,jCe,FEe,AEe,twe,WCe,JCe,MEe,ewe,LCe],s=this.extractModuleEntity(i,l=>l.beans?l.beans:[]);o.push(...s);let a=[];return o.forEach(l=>{a.indexOf(l)<0&&a.push(l)}),a}extractModuleEntity(e,t){return[].concat(...e.map(t))}},AY=class extends j{constructor(){super(...arguments),this.beanName="rowModelHelperService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){let e=this.rowModel;switch(e.getType()){case"clientSide":this.clientSideRowModel=e;break;case"infinite":this.infiniteRowModel=e;break;case"serverSide":this.serverSideRowModel=e;break}}getClientSideRowModel(){return this.clientSideRowModel}getInfiniteRowModel(){return this.infiniteRowModel}getServerSideRowModel(){return this.serverSideRowModel}};function xRe(e){e.expansionService.expandAll(!0)}function DRe(e){e.expansionService.expandAll(!1)}function TRe(e){let t=e.rowModelHelperService?.getClientSideRowModel(),n=e.rowModelHelperService?.getServerSideRowModel();t?t.onRowHeightChanged():n&&n.onRowHeightChanged()}function RRe(e,t,n){let i=e.rowModelHelperService?.getServerSideRowModel();if(i){if(e.funcColsService.isRowGroupEmpty()){i.setRowCount(t,n);return}kt("setRowCount cannot be used while using row grouping.");return}let r=e.rowModelHelperService?.getInfiniteRowModel();if(r){r.setRowCount(t,n);return}}function IRe(e){return e.rowNodeBlockLoader?.getBlockState()??{}}function FRe(e){return e.rowModel.isLastRowIndexKnown()}var ARe={version:qe,moduleName:"@ag-grid-community/csrm-ssrm-shared-api",apiFunctions:{expandAll:xRe,collapseAll:DRe,onRowHeightChanged:TRe}},MRe={version:qe,moduleName:"@ag-grid-community/ssrm-infinite-shared-api",apiFunctions:{setRowCount:RRe,getCacheBlockState:IRe,isLastRowIndexKnown:FRe}},MY=class{wrap(e,t,n=[],i){let r=this.createWrapper(e,i);return t.forEach(o=>{this.createMethod(r,o,!0)}),n.forEach(o=>{this.createMethod(r,o,!1)}),r}createMethod(e,t,n){e.addMethod(t,this.createMethodProxy(e,t,n))}createMethodProxy(e,t,n){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(n&&X("Framework component is missing the method "+t+"()"),null)}}},CN=class{};CN.CHART_TYPE_TO_SERIES_TYPE={column:"bar",groupedColumn:"bar",stackedColumn:"bar",normalizedColumn:"bar",bar:"bar",groupedBar:"bar",stackedBar:"bar",normalizedBar:"bar",line:"line",scatter:"scatter",bubble:"bubble",pie:"pie",donut:"donut",doughnut:"donut",area:"area",stackedArea:"area",normalizedArea:"area",histogram:"histogram",radarLine:"radar-line",radarArea:"radar-area",nightingale:"nightingale",radialColumn:"radial-column",radialBar:"radial-bar",sunburst:"sunburst",rangeBar:"range-bar",rangeArea:"range-area",boxPlot:"box-plot",treemap:"treemap",heatmap:"heatmap",waterfall:"waterfall"};CN.COMBO_CHART_TYPES=["columnLineCombo","areaColumnCombo","customCombo"];CN.SERIES_GROUP_TYPES=["grouped","stacked","normalized"];var vm=typeof global>"u"?{}:global;vm.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;vm.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;vm.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;vm.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;vm.Node=typeof Node>"u"?{}:Node;vm.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var PRe="ROOT_NODE_ID",mO=0,kRe=class{constructor(e,t,n,i,r,o){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gos=t,this.eventService=n,this.funcColsService=i,this.beans=o,this.selectionService=r,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=PRe,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return Yq(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if(typeof e=="string"){X("rowData must be an array.");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);let t=this.rootNode,n=this.rootNode.sibling;t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?t.allLeafChildren=e.map((i,r)=>this.createNode(i,this.rootNode,mO,r)):(t.allLeafChildren=[],t.childrenAfterGroup=[]),n&&(n.childrenAfterFilter=t.childrenAfterFilter,n.childrenAfterGroup=t.childrenAfterGroup,n.childrenAfterAggFilter=t.childrenAfterAggFilter,n.childrenAfterSort=t.childrenAfterSort,n.childrenMapped=t.childrenMapped,n.allLeafChildren=t.allLeafChildren)}updateRowData(e){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);let t={rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},n=[];return this.executeRemove(e,t,n),this.executeUpdate(e,t,n),this.executeAdd(e,t),this.updateSelection(n,"rowDataChanged"),t}updateRowOrderFromRowData(e){let t=this.rootNode.allLeafChildren,n=t?.length??0,i=new Map,r=-1,o=-1;for(let s=0;s<n;++s){let a=t[s],l=a.data;l!==e[s]&&(o<0&&(r=s),o=s,i.set(l,a))}if(r<0)return!1;for(let s=r;s<=o;++s){let a=i.get(e[s]);a!==void 0&&(t[s]=a,a.sourceRowIndex=s)}return!0}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){this.eventService.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e?.length?e[0]:null})}updateSelection(e,t){let n=e.length>0;n&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),this.selectionService.updateGroupsFromChildrenSelections(t),n&&this.eventService.dispatchEvent({type:"selectionChanged",source:t})}executeAdd(e,t){let n=e.add;if(Jo(n))return;let i=this.rootNode.allLeafChildren,r=i.length;if(typeof e.addIndex=="number"&&(r=this.sanitizeAddIndex(e.addIndex),r>0&&this.gos.get("treeData"))){for(let l=0;l<i.length;l++)if(i[l]?.rowIndex==r-1){r=l+1;break}}let o=n.map((a,l)=>this.createNode(a,this.rootNode,mO,r+l));if(r<i.length){let a=i.slice(0,r),l=i.slice(r,i.length),c=a.length+o.length;for(let u=0,d=l.length;u<d;++u)l[u].sourceRowIndex=c+u;this.rootNode.allLeafChildren=[...a,...o,...l],t.rowsInserted=!0}else this.rootNode.allLeafChildren=i.concat(o);let s=this.rootNode.sibling;s&&(s.allLeafChildren=i),t.rowNodeTransaction.add=o}sanitizeAddIndex(e){let t=this.rootNode.allLeafChildren?.length??0;return e<0||e>=t||Number.isNaN(e)?t:Math.ceil(e)}executeRemove(e,{rowNodeTransaction:t},n){let{remove:i}=e;if(Jo(i))return;let r={};i.forEach(s=>{let a=this.lookupRowNode(s);a&&(a.isSelected()&&n.push(a),a.clearRowTopAndRowIndex(),r[a.id]=!0,delete this.allNodesMap[a.id],t.remove.push(a))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren?.filter(s=>!r[s.id])??null,this.rootNode.allLeafChildren?.forEach((s,a)=>{s.sourceRowIndex=a});let o=this.rootNode.sibling;o&&(o.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,{rowNodeTransaction:t},n){let{update:i}=e;Jo(i)||i.forEach(r=>{let o=this.lookupRowNode(r);o&&(o.updateData(r),!o.selectable&&o.isSelected()&&n.push(o),this.setMasterForRow(o,r,mO,!1),t.update.push(o))})}lookupRowNode(e){let t=pm(this.gos),n;if(t){let i=t({data:e,level:0});if(n=this.allNodesMap[i],!n)return kt(`could not find row id=${i}, data item was not found for this id`),null}else if(n=this.rootNode.allLeafChildren?.find(i=>i.data===e),!n)return kt("could not find data item as object was not found",e),kt("Consider using getRowId to help the Grid find matching row data"),null;return n||null}createNode(e,t,n,i){let r=new gc(this.beans);return r.sourceRowIndex=i,r.group=!1,this.setMasterForRow(r,e,n,!0),t&&(r.parent=t),r.level=n,r.setDataAndId(e,this.nextId.toString()),this.allNodesMap[r.id]&&X(`duplicate node id '${r.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[r.id]=r,this.nextId++,r}setMasterForRow(e,t,n,i){if(this.gos.get("treeData"))e.setMaster(!1),i&&(e.expanded=!1);else{if(this.gos.get("masterDetail")){let s=this.gos.get("isRowMaster");s?e.setMaster(s(t)):e.setMaster(!0)}else e.setMaster(!1);if(i){let s=this.funcColsService.getRowGroupColumns(),a=s?s.length:0,l=n+a;e.expanded=e.master?this.isExpanded(l):!1}}}isExpanded(e){let t=this.gos.get("groupDefaultExpanded");return t===-1?!0:e<t}},ORe=class extends j{constructor(){super(...arguments),this.beanName="rowModel",this.onRowHeightChanged_debounced=Qr(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}wireBeans(e){this.beans=e,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.selectionService=e.selectionService,this.valueCache=e.valueCache,this.environment=e.environment,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggregationStage=e.aggregationStage,this.pivotStage=e.pivotStage,this.filterAggregatesStage=e.filterAggregatesStage}postConstruct(){let e=this.refreshModel.bind(this,{step:"group"}),t=!this.gos.get("suppressAnimationFrame"),n=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedEventListeners({newColumnsLoaded:n,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new gc(this.beans),this.nodeManager=new kRe(this.rootNode,this.gos,this.eventService,this.funcColsService,this.selectionService,this.beans)}addPropertyListeners(){let e=new Set(["treeData","masterDetail"]),t=new Set(["groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),n=new Set(["excludeChildrenWhenTreeDataFiltering"]),i=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),r=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),o=new Set(["postSortRows","groupDisplayType","accentedSort"]),s=new Set([]),a=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),l=[...e,...t,...n,...i,...i,...r,...o,...s,...a];this.addManagedPropertyListeners(l,c=>{let u=c.changeSet?.properties;if(!u)return;let d=h=>u.some(p=>h.has(p));if(d(e)){this.setRowData(this.rootNode.allLeafChildren.map(h=>h.data));return}if(d(t)){this.refreshModel({step:"group"});return}if(d(n)){this.refreshModel({step:"filter"});return}if(d(i)){this.refreshModel({step:"pivot"});return}if(d(r)){this.refreshModel({step:"aggregate"});return}if(d(o)){this.refreshModel({step:"sort"});return}if(d(s)){this.refreshModel({step:"filter_aggregates"});return}d(a)&&this.refreshModel({step:"map"})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){let e=this.gos.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))}ensureRowHeightsValid(e,t,n,i){let r,o=!1;do{r=!1;let s=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(s,n),c=Math.min(a,i);for(let u=l;u<=c;u++){let d=this.getRow(u);if(d.rowHeightEstimated){let h=ju(this.gos,d);d.setRowHeight(h.height),r=!0,o=!0}}r&&this.setRowTopAndRowIndex()}while(r);return o}setRowTopAndRowIndex(){let e=this.environment.getDefaultRowHeight(),t=0,n=new Set,i=lr(this.gos,"normal");for(let r=0;r<this.rowsToDisplay.length;r++){let o=this.rowsToDisplay[r];if(o.id!=null&&n.add(o.id),o.rowHeight==null){let s=ju(this.gos,o,i,e);o.setRowHeight(s.height,s.estimated)}o.setRowTop(t),o.setRowIndex(r),t+=o.rowHeight}return n}clearRowTopAndRowIndex(e,t){let n=e.isActive(),i=o=>{o&&o.id!=null&&!t.has(o.id)&&o.clearRowTopAndRowIndex()},r=o=>{if(i(o),i(o.detailNode),i(o.sibling),o.hasChildren()&&o.childrenAfterGroup){let s=o.level==-1;n&&!s&&!o.expanded||o.childrenAfterGroup.forEach(r)}};r(this.rootNode)}ensureRowsAtPixel(e,t,n=0){let i=this.getRowIndexAtPixel(t),r=this.getRow(i),o=!this.gos.get("suppressAnimationFrame");if(r===e[0])return!1;let s=this.rootNode.allLeafChildren;return e.forEach(a=>{Xr(s,a)}),e.forEach((a,l)=>{Yx(s,a,Math.max(i+n,0)+l)}),e.forEach((a,l)=>{a.sourceRowIndex=l}),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:o,rowNodesOrderChanged:!0}),!0}highlightRowAtPixel(e,t){let n=t!=null?this.getRowIndexAtPixel(t):null,i=n!=null?this.getRow(n):null;if(!i||!e||t==null){this.clearHighlightedRow();return}let r=this.getHighlightPosition(t,i),o=this.isHighlightingCurrentPosition(e,i,r),s=this.lastHighlightedRow!=null&&this.lastHighlightedRow!==i;(o||s)&&(this.clearHighlightedRow(),o)||(i.setHighlighted(r),this.lastHighlightedRow=i)}getHighlightPosition(e,t){if(!t){let r=this.getRowIndexAtPixel(e);if(t=this.getRow(r||0),!t)return 1}let{rowTop:n,rowHeight:i}=t;return e-n<i/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isHighlightingCurrentPosition(e,t,n){if(e===t)return!0;let i=n===0?-1:1;return this.getRow(t.rowIndex+i)===e}clearHighlightedRow(){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay.length===0)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;let t=this.rootNode.childrenAfterAggFilter,n=this.rootNode.sibling?1:0;return(t?t.length:0)+n}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let n=e;if(this.rowsToDisplay[0].footer){if(e===0)return 0;n-=1}let i=this.rowsToDisplay[this.rowsToDisplay.length-1],r=n>=this.rootNode.childrenAfterSort.length;if(i.footer&&r)return i.rowIndex;let o=this.rootNode.childrenAfterSort[n];if(this.gos.get("groupHideOpenParents"))for(;o.expanded&&o.childrenAfterSort&&o.childrenAfterSort.length>0;)o=o.childrenAfterSort[0];return o.rowIndex}getRowBounds(e){if(St(this.rowsToDisplay))return null;let t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){let e=sm(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;let t=sm(this.gos),i=e.columns.length===0||e.columns.some(r=>r.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:i,keepRenderedRows:!0,animate:t})}onSortChanged(){let e=sm(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(e){let t=Jo(e),n=new hD(!1,this.rootNode);return t&&n.setInactive(),n}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction")||e.rowNodeTransactions==null)return!1;let t=e.rowNodeTransactions.filter(i=>i.add!=null&&i.add.length>0||i.remove!=null&&i.remove.length>0);return t==null||t.length==0}buildRefreshModelParams(e){let t="group",n={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",filter_aggregates:"filter_aggregates",sort:"sort",pivot:"pivot",nothing:"nothing"};if(ne(e)&&(t=n[e]),St(t)){kt(`invalid step ${e}, available steps are ${Object.keys(n).join(", ")}`);return}let i=!this.gos.get("suppressAnimationFrame");return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:i}}refreshModel(e){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.isChangeEventsDispatching())return;let t=typeof e=="object"&&"step"in e?e:this.buildRefreshModelParams(e);if(!t||this.isSuppressModelUpdateAfterUpdateTransaction(t))return;let n=this.createChangePath(t.rowNodeTransactions);switch(this.isRefreshingModel=!0,t.step){case"group":this.doRowGrouping(t.rowNodeTransactions,n,!!t.rowNodesOrderChanged,!!t.afterColumnsChanged);case"filter":this.doFilter(n);case"pivot":this.doPivot(n);case"aggregate":this.doAggregate(n);case"filter_aggregates":this.doFilterAggregates(n);case"sort":this.doSort(t.rowNodeTransactions,n);case"map":this.doRowsToDisplay()}let i=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(n,i),this.isRefreshingModel=!1,this.eventService.dispatchEvent({type:"modelUpdated",animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack})}isEmpty(){let e=St(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return St(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return ne(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let n=!1,i=!1,r=[],o=ef(this.gos);return this.forEachNodeAfterFilterAndSort(s=>{if(i)return;if(n&&(s===t||s===e)&&(i=!0,s.group&&o)){r.push(...s.allLeafChildren);return}if(!n){if(s!==t&&s!==e)return;n=!0}if(!s.group||!o){r.push(s);return}}),r}setDatasource(e){kt("should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let t=0,n=this.rowsToDisplay.length-1;if(e<=0)return 0;if(Rt(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let r=-1,o=-1;for(;;){let s=Math.floor((t+n)/2),a=this.rowsToDisplay[s];if(this.isRowInPixel(a,e)||(a.rowTop<e?t=s+1:a.rowTop>e&&(n=s-1),r===t&&o===n))return s;r=t,o=n}}isRowInPixel(e,t){let n=e.rowTop,i=e.rowTop+e.rowHeight;return n<=t&&i>t}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((t,n)=>e(t,n))}forEachNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:0,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:1,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:2,index:0,includeFooterNodes:t})}forEachPivotNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:3,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){let{nodes:t,callback:n,recursionType:i,includeFooterNodes:r}=e,{index:o}=e,s=a=>{let l=t[0]?.parent;if(!l)return;let c=r&&Bq(this.gos),u=Gq(this.gos),d=r&&u({node:l});if(l===this.rootNode){c===a&&(l.createFooter(),n(l.sibling,o++));return}d===a&&(l.createFooter(),n(l.sibling,o++))};s("top");for(let a=0;a<t.length;a++){let l=t[a];if(n(l,o++),l.hasChildren()&&!l.footer){let c=null;switch(i){case 0:c=l.childrenAfterGroup;break;case 1:c=l.childrenAfterAggFilter;break;case 2:c=l.childrenAfterSort;break;case 3:c=l.leafGroup?null:l.childrenAfterSort;break}c&&(o=this.recursivelyWalkNodesAndCallback({nodes:[...c],callback:n,recursionType:i,index:o,includeFooterNodes:r}))}}return s("bottom"),o}doAggregate(e){this.aggregationStage?.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){let t=this.gos.get("treeData"),n=this.columnModel.isPivotActive(),i=r=>{r&&r.forEach(o=>{let s=()=>{o.expanded=e,i(o.childrenAfterGroup)};if(t){ne(o.childrenAfterGroup)&&s();return}if(n){!o.leafGroup&&s();return}o.group&&s()})};this.rootNode&&i(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"}),this.eventService.dispatchEvent({type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"})}doSort(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})}doRowGrouping(e,t,n,i){if(this.groupStage)e?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,rowNodesOrderChanged:n,changedPath:t}):this.groupStage.execute({rowNode:this.rootNode,changedPath:t,afterColumnsChanged:i}),ef(this.gos)&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",t)&&this.eventService.dispatchEvent({type:"selectionChanged",source:"rowGroupChanged"});else{let r=this.rootNode,o=r.sibling;r.childrenAfterGroup=r.allLeafChildren,o&&(o.childrenAfterGroup=r.childrenAfterGroup),this.rootNode.updateHasChildren()}this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){this.pivotStage?.execute({rowNode:this.rootNode,changedPath:e})}getNodeManager(){return this.nodeManager}getRowNode(e){if(typeof e=="string"&&e.indexOf(gc.ID_PREFIX_ROW_GROUP)==0){let n;return this.forEachNode(i=>{i.id===e&&(n=i)}),n}return this.nodeManager.getRowNode(e)}setRowData(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];let n=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.isAlive()&&this.executeBatchUpdateRowData()},n)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();let e=[],t=[],n=!1;this.rowDataTransactionBatch?.forEach(i=>{let{rowNodeTransaction:r,rowsInserted:o}=this.nodeManager.updateRowData(i.rowDataTransaction);o&&(n=!0),t.push(r),i.callback&&e.push(i.callback.bind(null,r))}),this.commonUpdateRowData(t,n),e.length>0&&window.setTimeout(()=>{e.forEach(i=>i())},0),t.length>0&&this.eventService.dispatchEvent({type:"asyncTransactionsFlushed",results:t}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e){this.valueCache.onDataChanged();let{rowNodeTransaction:t,rowsInserted:n}=this.nodeManager.updateRowData(e);return this.commonUpdateRowData([t],n),t}afterImmutableDataChange(e,t){this.commonUpdateRowData([e],t)}commonUpdateRowData(e,t){if(!this.hasStarted)return;let n=!this.gos.get("suppressAnimationFrame");this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",rowNodeTransactions:e,rowNodesOrderChanged:t,keepRenderedRows:!0,keepEditingRows:!0,animate:n})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){let e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);let n=t.detailNode;n&&n.setRowHeight(n.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.columnModel.isAutoRowHeightActive())return;this.resetRowHeights()}}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}destroy(){super.destroy(),this.clearHighlightedRow()}};function NRe(e){e.expansionService.onGroupExpandedOrCollapsed()}function LRe(e,t){e.rowModelHelperService?.getClientSideRowModel()?.refreshModel(t)}function VRe(e){return e.rowModelHelperService?.getClientSideRowModel()?.isEmpty()??!0}function BRe(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachLeafNode(t)}function GRe(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilter(t)}function HRe(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilterAndSort(t)}function zRe(e){if(e.columnModel.isAutoRowHeightActive()){X("calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}e.rowModelHelperService?.getClientSideRowModel()?.resetRowHeights()}function URe(e,t){return e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.updateRowData(t))}function jRe(e,t,n){e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.batchUpdateRowData(t,n))}function WRe(e){e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.flushAsyncTransactions())}function qRe(e){return e.selectionService.getBestCostNodeSelection()}var KRe=class extends j{constructor(){super(...arguments),this.beanName="filterStage"}wireBeans(e){this.filterManager=e.filterManager}execute(e){let{changedPath:t}=e;this.filter(t)}filter(e){let t=!!this.filterManager?.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){let n=(i,r)=>{i.hasChildren()&&e&&!r?i.childrenAfterFilter=i.childrenAfterGroup.filter(o=>{let s=o.childrenAfterFilter&&o.childrenAfterFilter.length>0,a=o.data&&this.filterManager.doesRowPassFilter({rowNode:o});return s||a}):i.childrenAfterFilter=i.childrenAfterGroup,i.sibling&&(i.sibling.childrenAfterFilter=i.childrenAfterFilter)};if(this.doingTreeDataFiltering()){let i=(o,s)=>{if(o.childrenAfterGroup)for(let a=0;a<o.childrenAfterGroup.length;a++){let l=o.childrenAfterGroup[a],c=s||this.filterManager.doesRowPassFilter({rowNode:l});l.childrenAfterGroup?i(o.childrenAfterGroup[a],c):n(l,c)}n(o,s)},r=o=>i(o,!1);t.executeFromRootNode(r)}else{let i=r=>n(r,!1);t.forEachChangedNodeDepthFirst(i,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},YRe=class extends j{constructor(){super(...arguments),this.beanName="flattenStage"}wireBeans(e){this.beans=e,this.columnModel=e.columnModel}execute(e){let t=e.rowNode,n=[],i=this.columnModel.isPivotMode(),r=i&&t.leafGroup,o=r?[t]:t.childrenAfterSort,s=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(s,o,n,i,0);let a=n.length>0;if(!r&&a&&s.grandTotalRow){t.createFooter();let c=s.grandTotalRow==="top";this.addRowNodeToRowsToDisplay(s,t.sibling,n,0,c)}return n}getFlattenDetails(){let e=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:Hq(this.gos),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:Bq(this.gos),groupTotalRow:Gq(this.gos)}}recursivelyAddToRowsToDisplay(e,t,n,i,r){if(!Jo(t))for(let o=0;o<t.length;o++){let s=t[o],a=s.hasChildren(),l=i&&!a,c=e.groupRemoveSingleChildren&&a&&s.childrenAfterGroup.length===1,u=e.groupRemoveLowestSingleChildren&&a&&s.leafGroup&&s.childrenAfterGroup.length===1,d=i&&s.leafGroup,h=e.hideOpenParents&&s.expanded&&!s.master&&!d;if(!l&&!h&&!c&&!u&&this.addRowNodeToRowsToDisplay(e,s,n,r),!(i&&s.leafGroup)){if(a){let g=c||u;if(s.expanded||g){let m=e.groupTotalRow({node:s});m||s.destroyFooter();let v=g?r:r+1;m==="top"&&(s.createFooter(),this.addRowNodeToRowsToDisplay(e,s.sibling,n,v)),this.recursivelyAddToRowsToDisplay(e,s.childrenAfterSort,n,i,v),m==="bottom"&&(s.createFooter(),this.addRowNodeToRowsToDisplay(e,s.sibling,n,v))}}else if(s.master&&s.expanded){let g=this.createDetailNode(s);this.addRowNodeToRowsToDisplay(e,g,n,r)}}}}addRowNodeToRowsToDisplay(e,t,n,i,r){r?n.unshift(t):n.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:i)}createDetailNode(e){if(ne(e.detailNode))return e.detailNode;let t=new gc(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,ne(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t}},QRe=class extends j{constructor(){super(...arguments),this.beanName="immutableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){kn(this.gos)&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){let e=this.gos.exists("getRowId");return this.gos.get("resetRowDataOnUpdate")?!1:e}setRowData(e){let t=this.createTransactionForRowData(e);if(!t)return;let n=this.clientSideRowModel.getNodeManager(),{rowNodeTransaction:i,rowsInserted:r}=n.updateRowData(t),o=!1;this.gos.get("suppressMaintainUnsortedOrder")||(o=n.updateRowOrderFromRowData(e)),this.clientSideRowModel.afterImmutableDataChange(i,o||r)}createTransactionForRowData(e){if(!kn(this.gos))return kt("ImmutableService only works with ClientSideRowModel"),null;let t=pm(this.gos);if(t==null)return kt("ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!"),null;let n=this.clientSideRowModel.getNodeManager().getCopyOfNodesMap(),i=[],r=[],o=[];return ne(e)&&e.forEach(s=>{let a=t({data:s,level:0}),l=n[a];l?(l.data!==s&&r.push(s),n[a]=void 0):o.push(s)}),Ts(n,(s,a)=>{a&&i.push(a.data)}),{remove:i,update:r,add:o}}onRowDataUpdated(){let e=this.gos.get("rowData");e&&(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))}},XRe=class extends j{constructor(){super(...arguments),this.beanName="sortService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.rowNodeSorter=e.rowNodeSorter,this.showRowGroupColsService=e.showRowGroupColsService}sort(e,t,n,i,r,o){let s=this.gos.get("groupMaintainOrder"),a=this.columnModel.getCols().some(h=>h.isRowGroupActive()),l={};n&&i&&(l=this.calculateDirtyNodes(i));let c=this.columnModel.isPivotMode(),u=this.gos.getCallback("postSortRows"),d=h=>{this.pullDownGroupDataForHideOpenParents(h.childrenAfterAggFilter,!0);let p=c&&h.leafGroup;if(s&&a&&!h.leafGroup&&!o){let v=this.funcColsService.getRowGroupColumns()?.[h.level+1]?.getSort()===null,C=h.childrenAfterAggFilter.slice(0);if(h.childrenAfterSort&&!v){let S={};h.childrenAfterSort.forEach((_,D)=>{S[_.id]=D}),C.sort((_,D)=>(S[_.id]??0)-(S[D.id]??0))}h.childrenAfterSort=C}else!t||p?h.childrenAfterSort=h.childrenAfterAggFilter.slice(0):n?h.childrenAfterSort=this.doDeltaSort(h,l,r,e):h.childrenAfterSort=this.rowNodeSorter.doFullSort(h.childrenAfterAggFilter,e);if(h.sibling&&(h.sibling.childrenAfterSort=h.childrenAfterSort),this.updateChildIndexes(h),u){let m={nodes:h.childrenAfterSort};u(m)}};r&&r.forEachChangedNodeDepthFirst(d),this.updateGroupDataForHideOpenParents(r)}calculateDirtyNodes(e){let t={},n=i=>{i&&i.forEach(r=>t[r.id]=!0)};return e&&e.forEach(i=>{n(i.add),n(i.update),n(i.remove)}),t}doDeltaSort(e,t,n,i){let r=e.childrenAfterAggFilter,o=e.childrenAfterSort;if(!o)return this.rowNodeSorter.doFullSort(r,i);let s={},a=[];r.forEach(d=>{t[d.id]||!n.canSkip(d)?a.push(d):s[d.id]=!0});let l=o.filter(d=>s[d.id]),c=(d,h)=>({currentPos:h,rowNode:d}),u=a.map(c).sort((d,h)=>this.rowNodeSorter.compareRowNodes(i,d,h));return this.mergeSortedArrays(i,u,l.map(c)).map(({rowNode:d})=>d)}mergeSortedArrays(e,t,n){let i=[],r=0,o=0;for(;r<t.length&&o<n.length;)this.rowNodeSorter.compareRowNodes(e,t[r],n[o])<0?i.push(t[r++]):i.push(n[o++]);for(;r<t.length;)i.push(t[r++]);for(;o<n.length;)i.push(n[o++]);return i}updateChildIndexes(e){if(St(e.childrenAfterSort))return;let t=e.childrenAfterSort;for(let n=0;n<t.length;n++){let i=t[n],r=n===0,o=n===e.childrenAfterSort.length-1;i.setFirstChild(r),i.setLastChild(o),i.setChildIndex(n)}}updateGroupDataForHideOpenParents(e){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return X("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;let t=n=>{this.pullDownGroupDataForHideOpenParents(n.childrenAfterSort,!1),n.childrenAfterSort.forEach(i=>{i.hasChildren()&&t(i)})};e&&e.executeFromRootNode(n=>t(n))}pullDownGroupDataForHideOpenParents(e,t){!this.gos.get("groupHideOpenParents")||St(e)||e.forEach(n=>{(this.showRowGroupColsService?.getShowRowGroupCols()??[]).forEach(r=>{let o=r.getColDef().showRowGroup;if(typeof o!="string"){kt("groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}let s=o,a=this.columnModel.getColDefCol(s);if(a!==n.rowGroupColumn)if(t)n.setGroupValue(r.getId(),void 0);else{let c=this.getFirstChildOfFirstChild(n,a);c&&n.setGroupValue(r.getId(),c.key)}})})}getFirstChildOfFirstChild(e,t){let n=e;for(;n;){let i=n.parent;if(i&&n.firstChild){if(i.rowGroupColumn===t)return i}else return null;n=i}return null}},$Re=class extends j{constructor(){super(...arguments),this.beanName="sortStage"}wireBeans(e){this.sortService=e.sortService,this.sortController=e.sortController}execute(e){let t=this.sortController.getSortOptions(),n=ne(t)&&t.length>0,i=n&&ne(e.rowNodeTransactions)&&this.gos.get("deltaSort"),r=t.some(o=>ul(this.gos)?o.column.isPrimary()&&o.column.isRowGroupActive():!!o.column.getColDef().showRowGroup);this.sortService.sort(t,n,i,e.rowNodeTransactions,e.changedPath,r)}},wN="32.3.4",PY={version:wN,moduleName:"@ag-grid-community/client-side-row-model-core",rowModel:"clientSide",beans:[ORe,KRe,$Re,YRe,XRe,QRe]},ZRe={version:wN,moduleName:"@ag-grid-community/client-side-row-model-api",beans:[AY],apiFunctions:{onGroupExpandedOrCollapsed:NRe,refreshClientSideRowModel:LRe,isRowDataEmpty:VRe,forEachLeafNode:BRe,forEachNodeAfterFilter:GRe,forEachNodeAfterFilterAndSort:HRe,resetRowHeights:zRe,applyTransaction:URe,applyTransactionAsync:jRe,flushAsyncTransactions:WRe,getBestCostNodeSelection:qRe},dependantModules:[PY,ARe]},JRe={version:wN,moduleName:"@ag-grid-community/client-side-row-model",dependantModules:[PY,ZRe]},eIe=class extends j{setBeans(e){this.beans=e}getFileName(e){let t=this.getDefaultFileExtension();return(e==null||!e.length)&&(e=this.getDefaultFileName()),e.indexOf(".")===-1?`${e}.${t}`:e}getData(e){let t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},tIe=class{constructor(e){this.groupColumns=[];let{columnModel:t,funcColsService:n,columnNameService:i,valueService:r,gos:o,processCellCallback:s,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c}=e;this.columnModel=t,this.funcColsService=n,this.columnNameService=i,this.valueService=r,this.gos=o,this.processCellCallback=s,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=c}prepare(e){this.groupColumns=e.filter(t=>!!t.getColDef().showRowGroup)}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,n,i,r){let s=(!this.gos.get("groupHideOpenParents")||r.footer)&&this.shouldRenderGroupSummaryCell(r,e,t)?this.createValueForGroupNode(e,r):this.valueService.getValue(e,r);return this.processCell({accumulatedRowIndex:n,rowNode:r,column:e,value:s,processCellCallback:this.processCellCallback,type:i})}shouldRenderGroupSummaryCell(e,t,n){if(!(e&&e.group))return!1;if(this.groupColumns.indexOf(t)!==-1){let s=e.groupData?.[t.getId()],a=this.gos.get("suppressGroupMaintainValueType");if(a&&s!=null||!a&&s!==void 0||vc(this.gos)&&e.group)return!0;if(e.footer&&e.level===-1){let l=t.getColDef();return l==null||l.showRowGroup===!0||l.showRowGroup===this.funcColsService.getRowGroupColumns()[0].getId()}}let o=oD(this.gos,this.columnModel.isPivotMode());return n===0&&o}getHeaderName(e,t){return e?e(this.gos.addGridCommonParams({column:t})):this.columnNameService.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:e,node:t}));let n=this.gos.get("treeData"),i=this.gos.get("suppressGroupMaintainValueType"),r=l=>{if(n||i)return l.key;let c=l.groupData?.[e.getId()];return!c||!l.rowGroupColumn||l.rowGroupColumn.getColDef().useValueFormatterForExport===!1?c:this.valueService.formatValue(l.rowGroupColumn,l,c)??c},o=t.footer,s=[r(t)];if(!Hq(this.gos))for(;t.parent;)t=t.parent,s.push(r(t));let a=s.reverse().join(" -> ");return o?`Total ${a}`:a}processCell(e){let{accumulatedRowIndex:t,rowNode:n,column:i,value:r,processCellCallback:o,type:s}=e;return o?{value:o(this.gos.addGridCommonParams({accumulatedRowIndex:t,column:i,node:n,value:r,type:s,parseValue:a=>this.valueService.parseValue(i,n,a,this.valueService.getValue(i,n)),formatValue:a=>this.valueService.formatValue(i,n,a)??a}))??""}:i.getColDef().useValueFormatterForExport!==!1?{value:r??"",valueFormatted:this.valueService.formatValue(i,n,r)}:{value:r??""}}},nIe=class{static download(e,t){let n=document.defaultView||window;if(!n){X("There is no `window` associated with the current `document`");return}let i=document.createElement("a"),r=n.URL.createObjectURL(t);i.setAttribute("href",r),i.setAttribute("download",e),i.style.display="none",document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:n})),document.body.removeChild(i),n.setTimeout(()=>{n.URL.revokeObjectURL(r)},0)}},Aq=`\r
`,iIe=class extends tIe{constructor(e){super(e),this.isFirstLine=!0,this.result="";let{suppressQuotes:t,columnSeparator:n}=e;this.suppressQuotes=t,this.columnSeparator=n}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,Aq),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((n,i)=>{i!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(n.data.value||""),n.mergeAcross&&this.appendEmptyCells(n.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,n,i){n!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(i)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,n){t!=0&&(this.result+=this.columnSeparator);let i=this.extractRowCellValue(e,t,t,"csv",n);this.result+=this.putInQuotes(i.valueFormatted??i.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(X("unknown value type during csv conversion"),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=Aq),this.isFirstLine=!1}},rIe=class extends eIe{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.gridSerializer=e.gridSerializer}postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(e){let t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){X("Export cancelled. Export is not allowed as per your configuration.");return}let t=this.getMergedParams(e),n=this.getData(t),i=new Blob(["\uFEFF",n],{type:"text/plain"}),r=typeof t.fileName=="function"?t.fileName(this.gos.getGridCommonParams()):t.fileName;nIe.download(this.getFileName(r),i)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){let n=t?Object.assign({},e):this.getMergedParams(e);return this.getData(n)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){let{columnModel:t,columnNameService:n,funcColsService:i,valueService:r,gos:o}=this,{processCellCallback:s,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c,suppressQuotes:u,columnSeparator:d}=e;return new iIe({columnModel:t,columnNameService:n,funcColsService:i,valueService:r,gos:o,processCellCallback:s||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:c||void 0,suppressQuotes:u||!1,columnSeparator:d||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function oIe(e,t){return e.csvCreator?.getDataAsCsv(t)}function sIe(e,t){e.csvCreator?.exportDataAsCsv(t)}var aIe=class extends j{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.selectionService=e.selectionService,this.rowNodeSorter=e.rowNodeSorter,this.sortController=e.sortController}serialize(e,t={}){let{allColumns:n,columnKeys:i,skipRowGroups:r}=t,o=this.getColumnsToExport(n,r,i);return vCe(this.prepareSession(o),this.prependContent(t),this.exportColumnGroups(t,o),this.exportHeaders(t,o),this.processPinnedTopRows(t,o),this.processRows(t,o),this.processPinnedBottomRows(t,o),this.appendContent(t))(e).parse()}processRow(e,t,n,i){let r=t.shouldRowBeSkipped||(()=>!1),o=this.gos.get("groupRemoveSingleChildren"),s=this.gos.get("groupRemoveLowestSingleChildren"),l=t.rowPositions!=null||!!t.onlySelected,c=this.gos.get("groupHideOpenParents")&&!l,u=this.columnModel.isPivotMode()?i.leafGroup:!i.group,d=!!i.footer,h=s&&i.leafGroup,p=i.allChildrenCount===1&&i.childrenAfterGroup?.length===1&&(o||h);if(!u&&!d&&(t.skipRowGroups||p||c)||t.onlySelected&&!i.isSelected()||t.skipPinnedTop&&i.rowPinned==="top"||t.skipPinnedBottom&&i.rowPinned==="bottom"||i.level===-1&&!u&&!d||r(this.gos.addGridCommonParams({node:i})))return;let v=e.onNewBodyRow(i);if(n.forEach((C,S)=>{v.onColumn(C,S,i)}),t.getCustomContentBelowRow){let C=t.getCustomContentBelowRow(this.gos.addGridCommonParams({node:i}));C&&e.addCustomContent(C)}}appendContent(e){return t=>{let n=e.appendContent;return n&&t.addCustomContent(n),t}}prependContent(e){return t=>{let n=e.prependContent;return n&&t.addCustomContent(n),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return n=>{if(!e.skipColumnGroupHeaders){let i=new Zq,r=this.visibleColsService.createGroups({columns:t,idCreator:i,pinned:null,isStandaloneStructure:!0});this.recursivelyAddHeaderGroups(r,n,e.processGroupHeaderCallback)}return n}}exportHeaders(e,t){return n=>{if(!e.skipColumnHeaders){let i=n.onNewHeaderRow();t.forEach((r,o)=>{i.onColumn(r,o,void 0)})}return n}}processPinnedTopRows(e,t){return n=>{let i=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter(r=>r.rowPinned==="top").sort((r,o)=>r.rowIndex-o.rowIndex).map(r=>this.pinnedRowModel.getPinnedTopRow(r.rowIndex)).forEach(i):this.pinnedRowModel.forEachPinnedRow("top",i),n}}processRows(e,t){return n=>{let i=this.rowModel,r=kn(this.gos),o=vc(this.gos),s=!r&&e.onlySelected,a=this.processRow.bind(this,n,e,t),{exportedRows:l="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(c=>c.rowPinned==null).sort((c,u)=>c.rowIndex-u.rowIndex).map(c=>i.getRow(c.rowIndex)).forEach(a);else if(this.columnModel.isPivotMode())r?i.forEachPivotNode(a,!0):o?i.forEachNodeAfterFilterAndSort(a,!0):i.forEachNode(a);else if(e.onlySelectedAllPages||s){let c=this.selectionService.getSelectedNodes();this.replicateSortedOrder(c),c.forEach(a)}else l==="all"?i.forEachNode(a):r||o?i.forEachNodeAfterFilterAndSort(a,!0):i.forEachNode(a);return n}}replicateSortedOrder(e){let t=this.sortController.getSortOptions(),n=(i,r)=>i.rowIndex!=null&&r.rowIndex!=null?i.rowIndex-r.rowIndex:i.level===r.level?i.parent?.id===r.parent?.id?this.rowNodeSorter.compareRowNodes(t,{rowNode:i,currentPos:i.rowIndex??-1},{rowNode:r,currentPos:r.rowIndex??-1}):n(i.parent,r.parent):i.level>r.level?n(i.parent,r):n(i,r.parent);e.sort(n)}processPinnedBottomRows(e,t){return n=>{let i=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter(r=>r.rowPinned==="bottom").sort((r,o)=>r.rowIndex-o.rowIndex).map(r=>this.pinnedRowModel.getPinnedBottomRow(r.rowIndex)).forEach(i):this.pinnedRowModel.forEachPinnedRow("bottom",i),n}}getColumnsToExport(e=!1,t=!1,n){let i=this.columnModel.isPivotMode();if(n&&n.length)return this.columnModel.getColsForKeys(n);let r=this.gos.get("treeData"),o=[];return e&&!i?o=this.columnModel.getCols():o=this.visibleColsService.getAllCols(),t&&!r&&(o=o.filter(s=>!_O(s)&&!wC(s))),o}recursivelyAddHeaderGroups(e,t,n){let i=[];e.forEach(r=>{let o=r;o.getChildren&&o.getChildren().forEach(s=>i.push(s))}),e.length>0&&si(e[0])&&this.doAddHeaderHeader(t,e,n),i&&i.length>0&&this.recursivelyAddHeaderGroups(i,t,n)}doAddHeaderHeader(e,t,n){let i=e.onNewHeaderGroupingRow(),r=0;t.forEach(o=>{let s=o,a;n?a=n(this.gos.addGridCommonParams({columnGroup:s})):a=this.columnNameService.getDisplayNameForColumnGroup(s,"header");let l=s.getLeafColumns().reduce((c,u,d,h)=>{let p=Rt(c);return u.getColumnGroupShow()==="open"?(!p||p[1]!=null)&&(p=[d],c.push(p)):p&&p[1]==null&&(p[1]=d-1),d===h.length-1&&p&&p[1]==null&&(p[1]=d),c},[]);i.onColumn(s,a||"",r++,s.getLeafColumns().length-1,l)})}},bN="32.3.4",kY={version:bN,moduleName:"@ag-grid-community/csv-export-core",beans:[rIe,aIe]},lIe={version:bN,moduleName:"@ag-grid-community/csv-export-api",apiFunctions:{getDataAsCsv:oIe,exportDataAsCsv:sIe},dependantModules:[kY]},cIe={version:bN,moduleName:"@ag-grid-community/csv-export",dependantModules:[kY,lIe]};var uIe=e=>N(void 0,null,function*(){let t=0,n=[],i=new WritableStream({write:s=>{n.push(s),t+=s.length}}),r=new ReadableStream({start:s=>{let a=new FileReader;a.onload=l=>{l.target?.result&&s.enqueue(l.target.result),s.close()},a.readAsArrayBuffer(e)}}),o=new window.CompressionStream("deflate-raw");return yield r.pipeThrough(o).pipeTo(i),{size:t,content:new Blob(n)}}),dIe=e=>N(void 0,null,function*(){let t=new Blob([e]),{size:n,content:i}=yield uIe(t),r=new Uint8Array(yield i.arrayBuffer());return{size:n,content:r}}),hIe=e=>{let t=e.getHours();return t<<=6,t=t|e.getMinutes(),t<<=5,t=t|e.getSeconds()/2,t},fIe=e=>{let t=e.getFullYear()-1980;return t<<=4,t=t|e.getMonth()+1,t<<=5,t=t|e.getDate(),t};function Cr(e,t){let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e&255),e>>>=8;return n}var Mq=e=>{if(!e.length)return 0;let t=-1,n=0,i=0,r=0;for(let o=0;o<e.length;o++)n=e[o],i=(t^n)&255,r=pIe[i],t=t>>>8^r;return t^-1},Pq=e=>e.length?Mq(typeof e=="string"?new TextEncoder().encode(e):e):0,pIe=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),OY=(e,t,n,i,r,o)=>{let{content:s,path:a,created:l}=e,c=hIe(l),u=fIe(l),d=Pq(r),h=o!==void 0?o:i,p=XCe(a),g=p!==a,m="";if(g){let _=Cr(1,1)+Cr(Pq(p),4)+p;m="up"+Cr(_.length,2)+_}let v="\0"+(g?"\0\b":"\0\0")+Cr(t?8:0,2)+Cr(c,2)+Cr(u,2)+Cr(h?d:0,4)+Cr(o??i,4)+Cr(i,4)+Cr(p.length,2)+Cr(m.length,2),C="PK"+v+p+m,S="PK\0"+v+"\0\0\0\0\0\0"+(s?"\0\0\0\0":"\0\0\0")+Cr(n,4)+p+m;return{localFileHeader:Uint8Array.from(C,_=>_.charCodeAt(0)),centralDirectoryHeader:Uint8Array.from(S,_=>_.charCodeAt(0))}},NY=e=>{let t;if(typeof e=="string"){let n=atob(e.split(";base64,")[1]);t=Uint8Array.from(n,i=>i.charCodeAt(0))}else t=e;return{size:t.length,content:t}},gIe=(e,t)=>N(void 0,null,function*(){let{content:n}=e,{size:i,content:r}=n?NY(n):{size:0,content:Uint8Array.from([])},o,s,a=!1;if(e.type==="file"&&r&&i>0){let u=yield dIe(r);o=u.content,s=u.size,a=!0}let c=OY(e,a,t,i,r,s);return pe(B({},c),{content:o||r,isCompressed:a})}),mIe=(e,t)=>{let{content:n}=e,{content:i}=n?NY(n):{content:Uint8Array.from([])},r=OY(e,!1,t,i.length,i,void 0);return pe(B({},r),{content:i,isCompressed:!1})},vIe=(e,t,n)=>{let i="PK\0\0\0\0"+Cr(e,2)+Cr(e,2)+Cr(t,4)+Cr(n,4)+"\0\0";return Uint8Array.from(i,r=>r.charCodeAt(0))},LY=class{static addFolders(e){e.forEach(this.addFolder.bind(this))}static addFolder(e){this.folders.push({path:e,created:new Date,isBase64:!1,type:"folder"})}static addFile(e,t,n=!1){this.files.push({path:e,created:new Date,content:n?t:new TextEncoder().encode(t),isBase64:n,type:"file"})}static getZipFile(e="application/zip"){return N(this,null,function*(){let t=yield this.buildCompressedFileStream();return this.clearStream(),new Blob([t],{type:e})})}static getUncompressedZipFile(e="application/zip"){let t=this.buildFileStream();return this.clearStream(),new Blob([t],{type:e})}static clearStream(){this.folders=[],this.files=[]}static packageFiles(e){let t=0,n=0;for(let c of e){let{localFileHeader:u,centralDirectoryHeader:d,content:h}=c;t+=u.length+h.length,n+=d.length}let i=new Uint8Array(t),r=new Uint8Array(n),o=0,s=0;for(let c of e){let{localFileHeader:u,centralDirectoryHeader:d,content:h}=c;i.set(u,o),o+=u.length,i.set(h,o),o+=h.length,r.set(d,s),s+=d.length}let a=vIe(e.length,n,t),l=new Uint8Array(i.length+r.length+a.length);return l.set(i),l.set(r,i.length),l.set(a,i.length+r.length),l}static buildCompressedFileStream(){return N(this,null,function*(){let e=[...this.folders,...this.files],t=[],n=0;for(let i of e){let r=yield gIe(i,n),{localFileHeader:o,content:s}=r;t.push(r),n+=o.length+s.length}return this.packageFiles(t)})}static buildFileStream(){let e=[...this.folders,...this.files],t=[],n=0;for(let i of e){let r=mIe(i,n),{localFileHeader:o,content:s}=r;t.push(r),n+=o.length+s.length}return this.packageFiles(t)}};LY.folders=[];LY.files=[];var yIe=class extends fEe{wireBeans(e){this.beans=e}constructor(e,t,n){super(e),this.parentCache=t,this.params=n,this.startRow=e*n.blockSize,this.endRow=this.startRow+n.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(e,t,n){ne(t)?e.setDataAndId(t,n.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){let e=this.createLoadParams();if(St(this.params.datasource.getRows)){X("datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(e,t,n){this.rowNodes.forEach((i,r)=>{this.startRow+r<n&&e(i,t.next())})}getLastAccessed(){return this.lastAccessed}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.next());let n=e-this.startRow;return this.rowNodes[n]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let e=0;e<this.params.blockSize;e++){let t=this.startRow+e,n=new gc(this.beans);n.setRowHeight(this.params.rowHeight),n.uiLevel=0,n.setRowIndex(t),n.setRowTop(this.params.rowHeight*t),this.rowNodes.push(n)}}processServerResult(e){this.rowNodes.forEach((n,i)=>{let r=e.rowData?e.rowData[i]:void 0;!n.id&&n.alreadyRendered&&r&&(this.rowNodes[i]=new gc(this.beans),this.rowNodes[i].setRowIndex(n.rowIndex),this.rowNodes[i].setRowTop(n.rowTop),this.rowNodes[i].setRowHeight(n.rowHeight),n.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[i],r,this.startRow+i)});let t=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,t)}destroy(){this.rowNodes.forEach(e=>{e.clearRowTopAndRowIndex()}),super.destroy()}},CIe=2,wIe=class extends j{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}wireBeans(e){this.rowRenderer=e.rowRenderer,this.focusService=e.focusService}getRow(e,t=!1){let n=Math.floor(e/this.params.blockSize),i=this.blocks[n];if(!i){if(t)return;i=this.createBlock(n)}return i.getRow(e)}createBlock(e){let t=this.createBean(new yIe(e,this,this.params));return this.blocks[t.getId()]=t,this.blockCount++,this.purgeBlocksIfNeeded(t),this.params.rowNodeBlockLoader.addBlock(t),t}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(t=>t.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e)),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(this.gos.get("debug")&&Rs(`InfiniteCache - onPageLoaded: page = ${e.getId()}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){let t=this.getBlocksInOrder().filter(s=>s!=e),n=(s,a)=>a.getLastAccessed()-s.getLastAccessed();t.sort(n);let i=this.params.maxBlocksInCache>0,r=i?this.params.maxBlocksInCache-1:null,o=CIe-1;t.forEach((s,a)=>{let l=s.getState()==="needsLoading"&&a>=o,c=i?a>=r:!1;if(l||c){if(this.isBlockCurrentlyDisplayed(s)||this.isBlockFocused(s))return;this.removeBlockFromCache(s)}})}isBlockFocused(e){let t=this.focusService.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;let n=e.getStartRow(),i=e.getEndRow();return t.rowIndex>=n&&t.rowIndex<i}isBlockCurrentlyDisplayed(e){let t=e.getStartRow(),n=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(t,n)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){let i=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<i&&(this.rowCount=i)}}setRowCount(e,t){this.rowCount=e,ne(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){let t=new hm;this.getBlocksInOrder().forEach(n=>n.forEachNode(e,t,this.rowCount))}getBlocksInOrder(){let e=(n,i)=>n.getId()-i.getId();return tf(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventService.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){let e=[];this.getBlocksInOrder().forEach(t=>{t.getId()*this.params.blockSize>=this.rowCount&&e.push(t)}),e.length>0&&e.forEach(t=>this.destroyBlock(t))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){let n=[],i=-1,r=!1,o=new hm,s=!1;return this.getBlocksInOrder().forEach(l=>{if(!s){if(r&&i+1!==l.getId()){s=!0;return}i=l.getId(),l.forEachNode(c=>{let u=c===e||c===t;(r||u)&&n.push(c),u&&(r=!r)},o,this.rowCount)}}),s||r?[]:n}},bIe=class extends j{constructor(){super(...arguments),this.beanName="rowModel"}wireBeans(e){this.filterManager=e.filterManager,this.sortController=e.sortController,this.selectionService=e.selectionService,this.rowRenderer=e.rowRenderer,this.rowNodeBlockLoader=e.rowNodeBlockLoader}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){this.gos.get("rowModelType")==="infinite"&&(this.rowHeight=Qh(this.gos),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&X("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.onCacheUpdated.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=Qh(this.gos),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let e;this.cacheParams?e=this.isSortModelDifferent():e=!0,e&&this.reset()}isSortModelDifferent(){return!hC(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,t):[]}reset(){if(!this.datasource)return;pm(this.gos)!=null||this.selectionService.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventService.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager?.getFilterModel()??{},sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:Qh(this.gos),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new hm},this.infiniteCache=this.createBean(new wIe(this.cacheParams)),this.eventService.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){this.dispatchModelUpdatedEvent()}getRow(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)}getRowNode(e){let t;return this.forEachNode(n=>{n.id===e&&(t=n)}),t}forEachNode(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){let t=Math.floor(e/this.rowHeight),n=this.getRowCount()-1;return t>n?n:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(e,t){this.infiniteCache&&this.infiniteCache.setRowCount(e,t)}};function SIe(e){e.rowModelHelperService?.getInfiniteRowModel()?.refreshCache()}function _Ie(e){e.rowModelHelperService?.getInfiniteRowModel()?.purgeCache()}function EIe(e){return e.rowModelHelperService?.getInfiniteRowModel()?.getRowCount()}var SN="32.3.4",VY={version:SN,moduleName:"@ag-grid-community/infinite-row-model-core",rowModel:"infinite",beans:[bIe],dependantModules:[gEe]},xIe={version:SN,moduleName:"@ag-grid-community/infinite-row-model-api",beans:[AY],apiFunctions:{refreshInfiniteCache:SIe,purgeInfiniteCache:_Ie,getInfiniteRowCount:EIe},dependantModules:[VY,MRe]},DIe={version:SN,moduleName:"@ag-grid-community/infinite-row-model",dependantModules:[VY,xIe]};var TIe=e=>{let t=new Map;return n=>{let i=n;return t.has(i)||t.set(i,e(n)),t.get(i)}},XJe=TIe(e=>{if(/Color$/.test(e))return"color";if(/Scale?$/.test(e))return"scale";if(e==="spacing"||/(Padding|Spacing|Size|Width|Height|Radius|Indent|Start|End|Top|Bottom|Horizontal|Vertical)$/.test(e))return"length";if(/Border$/.test(e))return"border";if(/BorderStyle$/.test(e))return"borderStyle";if(/Shadow$/.test(e))return"shadow";if(/Image$/.test(e))return"image";if(/Family$/.test(e))return"fontFamily";if(/Weight$/.test(e))return"fontWeight";if(/Duration$/.test(e))return"duration";if(/ColorScheme$/.test(e))return"colorScheme";throw new Error(`"${e}" is not a valid theme parameter.`)});var $Je=typeof window!="object"||!window||typeof document!="object"||window.document!==document;hc.__registerModules([xY,JRe,DIe,cIe],!1,void 0);var BY=(()=>{class e extends MY{setViewContainerRef(n,i){this.viewContainerRef=n,this.angularFrameworkOverrides=i}createWrapper(n){let i=this.angularFrameworkOverrides,r=this;class o extends _N{init(l){i.runInsideAngular(()=>{super.init(l),this._componentRef.changeDetectorRef.detectChanges()})}createComponent(){return i.runInsideAngular(()=>r.createComponent(n))}hasMethod(l){return s.getFrameworkComponentInstance()[l]!=null}callMethod(l,c){let u=this.getFrameworkComponentInstance();return i.runInsideAngular(()=>s.getFrameworkComponentInstance()[l].apply(u,c))}addMethod(l,c){s[l]=c}}let s=new o;return s}createComponent(n){return this.viewContainerRef.createComponent(n)}static{this.\u0275fac=(()=>{let n;return function(r){return(n||(n=go(e)))(r||e)}})()}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac})}}return e})(),_N=class{init(t){this._params=t,this._componentRef=this.createComponent(),this._agAwareComponent=this._componentRef.instance,this._frameworkComponentInstance=this._componentRef.instance,this._eGui=this._componentRef.location.nativeElement,Is(this._eGui),this._agAwareComponent.agInit(this._params)}getGui(){return this._eGui}getRootElement(){return this._eGui.firstChild}destroy(){this._frameworkComponentInstance&&typeof this._frameworkComponentInstance.destroy=="function"&&this._frameworkComponentInstance.destroy(),this._componentRef&&this._componentRef.destroy()}getFrameworkComponentInstance(){return this._frameworkComponentInstance}},GY=(()=>{class e extends mN{constructor(n){super("angular"),this._ngZone=n,this.isRunningWithinTestZone=!1,this.wrapIncoming=(i,r)=>this.runOutside(i,r),this.wrapOutgoing=i=>this.runInsideAngular(i),this.isRunningWithinTestZone=window?.AG_GRID_UNDER_TEST??!!window?.Zone?.AsyncTestZoneSpec,this._ngZone?this.isRunningWithinTestZone?this.runOutside=(i,r)=>r==="resize-observer"||r==="popupPositioning"?this._ngZone.runOutsideAngular(i):i():this.runOutside=i=>this._ngZone.runOutsideAngular(i):this.runOutside=i=>i()}get shouldWrapOutgoing(){return this._ngZone&&De.isInAngularZone()}isFrameworkComponent(n){if(!n)return!1;let i=n.prototype;return i&&"agInit"in i}runInsideAngular(n){return this._ngZone?this._ngZone.run(n):n()}runOutsideAngular(n,i){return this.runOutside(n,i)}static{this.\u0275fac=function(i){return new(i||e)($(De))}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac})}}return e})(),HY=(()=>{class e{constructor(n,i,r,o){this.viewContainerRef=i,this.angularFrameworkOverrides=r,this.frameworkComponentWrapper=o,this._initialised=!1,this._destroyed=!1,this._holdEvents=!0,this._fullyReady=new Promise(s=>{this._resolveFullyReady=s}),this.statusBar=void 0,this.sideBar=void 0,this.suppressContextMenu=void 0,this.preventDefaultOnContextMenu=void 0,this.allowContextMenuWithControlKey=void 0,this.columnMenu=void 0,this.suppressMenuHide=void 0,this.enableBrowserTooltips=void 0,this.tooltipTrigger=void 0,this.tooltipShowDelay=void 0,this.tooltipHideDelay=void 0,this.tooltipMouseTrack=void 0,this.tooltipShowMode=void 0,this.tooltipInteraction=void 0,this.popupParent=void 0,this.copyHeadersToClipboard=void 0,this.copyGroupHeadersToClipboard=void 0,this.clipboardDelimiter=void 0,this.suppressCopyRowsToClipboard=void 0,this.suppressCopySingleCellRanges=void 0,this.suppressLastEmptyLineOnPaste=void 0,this.suppressClipboardPaste=void 0,this.suppressClipboardApi=void 0,this.suppressCutToClipboard=void 0,this.columnDefs=void 0,this.defaultColDef=void 0,this.defaultColGroupDef=void 0,this.columnTypes=void 0,this.dataTypeDefinitions=void 0,this.maintainColumnOrder=void 0,this.enableStrictPivotColumnOrder=void 0,this.suppressFieldDotNotation=void 0,this.headerHeight=void 0,this.groupHeaderHeight=void 0,this.floatingFiltersHeight=void 0,this.pivotHeaderHeight=void 0,this.pivotGroupHeaderHeight=void 0,this.allowDragFromColumnsToolPanel=void 0,this.suppressMovableColumns=void 0,this.suppressColumnMoveAnimation=void 0,this.suppressMoveWhenColumnDragging=void 0,this.suppressDragLeaveHidesColumns=void 0,this.suppressRowGroupHidesColumns=void 0,this.colResizeDefault=void 0,this.suppressAutoSize=void 0,this.autoSizePadding=void 0,this.skipHeaderOnAutoSize=void 0,this.autoSizeStrategy=void 0,this.components=void 0,this.editType=void 0,this.singleClickEdit=void 0,this.suppressClickEdit=void 0,this.readOnlyEdit=void 0,this.stopEditingWhenCellsLoseFocus=void 0,this.enterNavigatesVertically=void 0,this.enterNavigatesVerticallyAfterEdit=void 0,this.enableCellEditingOnBackspace=void 0,this.undoRedoCellEditing=void 0,this.undoRedoCellEditingLimit=void 0,this.defaultCsvExportParams=void 0,this.suppressCsvExport=void 0,this.defaultExcelExportParams=void 0,this.suppressExcelExport=void 0,this.excelStyles=void 0,this.quickFilterText=void 0,this.cacheQuickFilter=void 0,this.includeHiddenColumnsInQuickFilter=void 0,this.quickFilterParser=void 0,this.quickFilterMatcher=void 0,this.applyQuickFilterBeforePivotOrAgg=void 0,this.excludeChildrenWhenTreeDataFiltering=void 0,this.enableAdvancedFilter=void 0,this.advancedFilterModel=void 0,this.includeHiddenColumnsInAdvancedFilter=void 0,this.advancedFilterParent=void 0,this.advancedFilterBuilderParams=void 0,this.suppressAdvancedFilterEval=void 0,this.suppressSetFilterByDefault=void 0,this.enableCharts=void 0,this.chartThemes=void 0,this.customChartThemes=void 0,this.chartThemeOverrides=void 0,this.chartToolPanelsDef=void 0,this.chartMenuItems=void 0,this.loadingCellRenderer=void 0,this.loadingCellRendererParams=void 0,this.loadingCellRendererSelector=void 0,this.localeText=void 0,this.masterDetail=void 0,this.keepDetailRows=void 0,this.keepDetailRowsCount=void 0,this.detailCellRenderer=void 0,this.detailCellRendererParams=void 0,this.detailRowHeight=void 0,this.detailRowAutoHeight=void 0,this.context=void 0,this.dragAndDropImageComponent=void 0,this.dragAndDropImageComponentParams=void 0,this.alignedGrids=void 0,this.tabIndex=void 0,this.rowBuffer=void 0,this.valueCache=void 0,this.valueCacheNeverExpires=void 0,this.enableCellExpressions=void 0,this.suppressTouch=void 0,this.suppressFocusAfterRefresh=void 0,this.suppressAsyncEvents=void 0,this.suppressBrowserResizeObserver=void 0,this.suppressPropertyNamesCheck=void 0,this.suppressChangeDetection=void 0,this.debug=void 0,this.loading=void 0,this.overlayLoadingTemplate=void 0,this.loadingOverlayComponent=void 0,this.loadingOverlayComponentParams=void 0,this.suppressLoadingOverlay=void 0,this.overlayNoRowsTemplate=void 0,this.noRowsOverlayComponent=void 0,this.noRowsOverlayComponentParams=void 0,this.suppressNoRowsOverlay=void 0,this.pagination=void 0,this.paginationPageSize=void 0,this.paginationPageSizeSelector=void 0,this.paginationAutoPageSize=void 0,this.paginateChildRows=void 0,this.suppressPaginationPanel=void 0,this.pivotMode=void 0,this.pivotPanelShow=void 0,this.pivotMaxGeneratedColumns=void 0,this.pivotDefaultExpanded=void 0,this.pivotColumnGroupTotals=void 0,this.pivotRowTotals=void 0,this.pivotSuppressAutoColumn=void 0,this.suppressExpandablePivotGroups=void 0,this.functionsReadOnly=void 0,this.aggFuncs=void 0,this.suppressAggFuncInHeader=void 0,this.alwaysAggregateAtRootLevel=void 0,this.aggregateOnlyChangedColumns=void 0,this.suppressAggFilteredOnly=void 0,this.removePivotHeaderRowWhenSingleValueColumn=void 0,this.animateRows=void 0,this.enableCellChangeFlash=void 0,this.cellFlashDuration=void 0,this.cellFlashDelay=void 0,this.cellFadeDuration=void 0,this.cellFadeDelay=void 0,this.allowShowChangeAfterFilter=void 0,this.domLayout=void 0,this.ensureDomOrder=void 0,this.enableRtl=void 0,this.suppressColumnVirtualisation=void 0,this.suppressMaxRenderedRowRestriction=void 0,this.suppressRowVirtualisation=void 0,this.rowDragManaged=void 0,this.suppressRowDrag=void 0,this.suppressMoveWhenRowDragging=void 0,this.rowDragEntireRow=void 0,this.rowDragMultiRow=void 0,this.rowDragText=void 0,this.fullWidthCellRenderer=void 0,this.fullWidthCellRendererParams=void 0,this.embedFullWidthRows=void 0,this.suppressGroupMaintainValueType=void 0,this.groupDisplayType=void 0,this.groupDefaultExpanded=void 0,this.autoGroupColumnDef=void 0,this.groupMaintainOrder=void 0,this.groupSelectsChildren=void 0,this.groupLockGroupColumns=void 0,this.groupAggFiltering=void 0,this.groupIncludeFooter=void 0,this.groupIncludeTotalFooter=void 0,this.groupTotalRow=void 0,this.grandTotalRow=void 0,this.suppressStickyTotalRow=void 0,this.groupSuppressBlankHeader=void 0,this.groupSelectsFiltered=void 0,this.showOpenedGroup=void 0,this.groupRemoveSingleChildren=void 0,this.groupRemoveLowestSingleChildren=void 0,this.groupHideOpenParents=void 0,this.groupAllowUnbalanced=void 0,this.rowGroupPanelShow=void 0,this.groupRowRenderer=void 0,this.groupRowRendererParams=void 0,this.suppressMakeColumnVisibleAfterUnGroup=void 0,this.treeData=void 0,this.rowGroupPanelSuppressSort=void 0,this.suppressGroupRowsSticky=void 0,this.pinnedTopRowData=void 0,this.pinnedBottomRowData=void 0,this.rowModelType=void 0,this.rowData=void 0,this.asyncTransactionWaitMillis=void 0,this.suppressModelUpdateAfterUpdateTransaction=void 0,this.datasource=void 0,this.cacheOverflowSize=void 0,this.infiniteInitialRowCount=void 0,this.serverSideInitialRowCount=void 0,this.suppressServerSideInfiniteScroll=void 0,this.suppressServerSideFullWidthLoadingRow=void 0,this.cacheBlockSize=void 0,this.maxBlocksInCache=void 0,this.maxConcurrentDatasourceRequests=void 0,this.blockLoadDebounceMillis=void 0,this.purgeClosedRowNodes=void 0,this.serverSideDatasource=void 0,this.serverSideSortAllLevels=void 0,this.serverSideEnableClientSideSort=void 0,this.serverSideOnlyRefreshFilteredGroups=void 0,this.serverSideSortOnServer=void 0,this.serverSideFilterOnServer=void 0,this.serverSidePivotResultFieldSeparator=void 0,this.viewportDatasource=void 0,this.viewportRowModelPageSize=void 0,this.viewportRowModelBufferSize=void 0,this.alwaysShowHorizontalScroll=void 0,this.alwaysShowVerticalScroll=void 0,this.debounceVerticalScrollbar=void 0,this.suppressHorizontalScroll=void 0,this.suppressScrollOnNewData=void 0,this.suppressScrollWhenPopupsAreOpen=void 0,this.suppressAnimationFrame=void 0,this.suppressMiddleClickScrolls=void 0,this.suppressPreventDefaultOnMouseWheel=void 0,this.scrollbarWidth=void 0,this.rowSelection=void 0,this.cellSelection=void 0,this.rowMultiSelectWithClick=void 0,this.suppressRowDeselection=void 0,this.suppressRowClickSelection=void 0,this.suppressCellFocus=void 0,this.suppressHeaderFocus=void 0,this.selectionColumnDef=void 0,this.suppressMultiRangeSelection=void 0,this.enableCellTextSelection=void 0,this.enableRangeSelection=void 0,this.enableRangeHandle=void 0,this.enableFillHandle=void 0,this.fillHandleDirection=void 0,this.suppressClearOnFillReduction=void 0,this.sortingOrder=void 0,this.accentedSort=void 0,this.unSortIcon=void 0,this.suppressMultiSort=void 0,this.alwaysMultiSort=void 0,this.multiSortKey=void 0,this.suppressMaintainUnsortedOrder=void 0,this.icons=void 0,this.rowHeight=void 0,this.rowStyle=void 0,this.rowClass=void 0,this.rowClassRules=void 0,this.suppressRowHoverHighlight=void 0,this.suppressRowTransform=void 0,this.columnHoverHighlight=void 0,this.gridId=void 0,this.deltaSort=void 0,this.treeDataDisplayType=void 0,this.enableGroupEdit=void 0,this.initialState=void 0,this.theme=void 0,this.loadThemeGoogleFonts=void 0,this.getContextMenuItems=void 0,this.getMainMenuItems=void 0,this.postProcessPopup=void 0,this.processUnpinnedColumns=void 0,this.processCellForClipboard=void 0,this.processHeaderForClipboard=void 0,this.processGroupHeaderForClipboard=void 0,this.processCellFromClipboard=void 0,this.sendToClipboard=void 0,this.processDataFromClipboard=void 0,this.isExternalFilterPresent=void 0,this.doesExternalFilterPass=void 0,this.getChartToolbarItems=void 0,this.createChartContainer=void 0,this.focusGridInnerElement=void 0,this.navigateToNextHeader=void 0,this.tabToNextHeader=void 0,this.navigateToNextCell=void 0,this.tabToNextCell=void 0,this.getLocaleText=void 0,this.getDocument=void 0,this.paginationNumberFormatter=void 0,this.getGroupRowAgg=void 0,this.isGroupOpenByDefault=void 0,this.initialGroupOrderComparator=void 0,this.processPivotResultColDef=void 0,this.processPivotResultColGroupDef=void 0,this.getDataPath=void 0,this.getChildCount=void 0,this.getServerSideGroupLevelParams=void 0,this.isServerSideGroupOpenByDefault=void 0,this.isApplyServerSideTransaction=void 0,this.isServerSideGroup=void 0,this.getServerSideGroupKey=void 0,this.getBusinessKeyForNode=void 0,this.getRowId=void 0,this.resetRowDataOnUpdate=void 0,this.processRowPostCreate=void 0,this.isRowSelectable=void 0,this.isRowMaster=void 0,this.fillOperation=void 0,this.postSortRows=void 0,this.getRowStyle=void 0,this.getRowClass=void 0,this.getRowHeight=void 0,this.isFullWidthRow=void 0,this.toolPanelVisibleChanged=new Q,this.toolPanelSizeChanged=new Q,this.columnMenuVisibleChanged=new Q,this.contextMenuVisibleChanged=new Q,this.cutStart=new Q,this.cutEnd=new Q,this.pasteStart=new Q,this.pasteEnd=new Q,this.columnVisible=new Q,this.columnPinned=new Q,this.columnResized=new Q,this.columnMoved=new Q,this.columnValueChanged=new Q,this.columnPivotModeChanged=new Q,this.columnPivotChanged=new Q,this.columnGroupOpened=new Q,this.newColumnsLoaded=new Q,this.gridColumnsChanged=new Q,this.displayedColumnsChanged=new Q,this.virtualColumnsChanged=new Q,this.columnEverythingChanged=new Q,this.columnHeaderMouseOver=new Q,this.columnHeaderMouseLeave=new Q,this.columnHeaderClicked=new Q,this.columnHeaderContextMenu=new Q,this.componentStateChanged=new Q,this.cellValueChanged=new Q,this.cellEditRequest=new Q,this.rowValueChanged=new Q,this.cellEditingStarted=new Q,this.cellEditingStopped=new Q,this.rowEditingStarted=new Q,this.rowEditingStopped=new Q,this.undoStarted=new Q,this.undoEnded=new Q,this.redoStarted=new Q,this.redoEnded=new Q,this.cellSelectionDeleteStart=new Q,this.cellSelectionDeleteEnd=new Q,this.rangeDeleteStart=new Q,this.rangeDeleteEnd=new Q,this.fillStart=new Q,this.fillEnd=new Q,this.filterOpened=new Q,this.filterChanged=new Q,this.filterModified=new Q,this.advancedFilterBuilderVisibleChanged=new Q,this.chartCreated=new Q,this.chartRangeSelectionChanged=new Q,this.chartOptionsChanged=new Q,this.chartDestroyed=new Q,this.cellKeyDown=new Q,this.gridReady=new Q,this.firstDataRendered=new Q,this.gridSizeChanged=new Q,this.modelUpdated=new Q,this.virtualRowRemoved=new Q,this.viewportChanged=new Q,this.bodyScroll=new Q,this.bodyScrollEnd=new Q,this.dragStarted=new Q,this.dragStopped=new Q,this.dragCancelled=new Q,this.stateUpdated=new Q,this.paginationChanged=new Q,this.rowDragEnter=new Q,this.rowDragMove=new Q,this.rowDragLeave=new Q,this.rowDragEnd=new Q,this.rowDragCancel=new Q,this.columnRowGroupChanged=new Q,this.rowGroupOpened=new Q,this.expandOrCollapseAll=new Q,this.pivotMaxColumnsExceeded=new Q,this.pinnedRowDataChanged=new Q,this.rowDataUpdated=new Q,this.asyncTransactionsFlushed=new Q,this.storeRefreshed=new Q,this.headerFocused=new Q,this.cellClicked=new Q,this.cellDoubleClicked=new Q,this.cellFocused=new Q,this.cellMouseOver=new Q,this.cellMouseOut=new Q,this.cellMouseDown=new Q,this.rowClicked=new Q,this.rowDoubleClicked=new Q,this.rowSelected=new Q,this.selectionChanged=new Q,this.cellContextMenu=new Q,this.rangeSelectionChanged=new Q,this.cellSelectionChanged=new Q,this.tooltipShow=new Q,this.tooltipHide=new Q,this.sortChanged=new Q,this._nativeElement=n.nativeElement,this._fullyReady.then(()=>{this._holdEvents=!1})}ngAfterViewInit(){this.angularFrameworkOverrides.runOutsideAngular(()=>{this.frameworkComponentWrapper.setViewContainerRef(this.viewContainerRef,this.angularFrameworkOverrides);let n=eK(this.gridOptions,this);this.gridParams={globalEventListener:this.globalEventListener.bind(this),frameworkOverrides:this.angularFrameworkOverrides,providedBeanInstances:{frameworkComponentWrapper:this.frameworkComponentWrapper},modules:this.modules||[]};let i=FY(this._nativeElement,n,this.gridParams);i&&(this.api=i),this._initialised=!0,this._resolveFullyReady()})}ngOnChanges(n){this._initialised&&this.angularFrameworkOverrides.runOutsideAngular(()=>{let i={};Object.entries(n).forEach(([r,o])=>{i[r]=o.currentValue}),tK(i,this.api)})}ngOnDestroy(){this._initialised&&(this._destroyed=!0,this.api?.destroy())}isEmitterUsed(n){let r=this[n],o=r?.observed??r?.observers?.length>0,s=`on${n.charAt(0).toUpperCase()}${n.substring(1)}`,a=!!this.gridOptions&&!!this.gridOptions[s];return o||a}globalEventListener(n,i){if(this._destroyed)return;let r=this[n];if(r&&this.isEmitterUsed(n)){let o=()=>this.angularFrameworkOverrides.runInsideAngular(()=>r.emit(i));this._holdEvents?this._fullyReady.then(()=>o()):o()}}static{this.\u0275fac=function(i){return new(i||e)(J(In),J(Go),J(GY),J(BY))}}static{this.\u0275cmp=je({type:e,selectors:[["ag-grid-angular"]],inputs:{gridOptions:"gridOptions",modules:"modules",statusBar:"statusBar",sideBar:"sideBar",suppressContextMenu:"suppressContextMenu",preventDefaultOnContextMenu:"preventDefaultOnContextMenu",allowContextMenuWithControlKey:"allowContextMenuWithControlKey",columnMenu:"columnMenu",suppressMenuHide:"suppressMenuHide",enableBrowserTooltips:"enableBrowserTooltips",tooltipTrigger:"tooltipTrigger",tooltipShowDelay:"tooltipShowDelay",tooltipHideDelay:"tooltipHideDelay",tooltipMouseTrack:"tooltipMouseTrack",tooltipShowMode:"tooltipShowMode",tooltipInteraction:"tooltipInteraction",popupParent:"popupParent",copyHeadersToClipboard:"copyHeadersToClipboard",copyGroupHeadersToClipboard:"copyGroupHeadersToClipboard",clipboardDelimiter:"clipboardDelimiter",suppressCopyRowsToClipboard:"suppressCopyRowsToClipboard",suppressCopySingleCellRanges:"suppressCopySingleCellRanges",suppressLastEmptyLineOnPaste:"suppressLastEmptyLineOnPaste",suppressClipboardPaste:"suppressClipboardPaste",suppressClipboardApi:"suppressClipboardApi",suppressCutToClipboard:"suppressCutToClipboard",columnDefs:"columnDefs",defaultColDef:"defaultColDef",defaultColGroupDef:"defaultColGroupDef",columnTypes:"columnTypes",dataTypeDefinitions:"dataTypeDefinitions",maintainColumnOrder:"maintainColumnOrder",enableStrictPivotColumnOrder:"enableStrictPivotColumnOrder",suppressFieldDotNotation:"suppressFieldDotNotation",headerHeight:"headerHeight",groupHeaderHeight:"groupHeaderHeight",floatingFiltersHeight:"floatingFiltersHeight",pivotHeaderHeight:"pivotHeaderHeight",pivotGroupHeaderHeight:"pivotGroupHeaderHeight",allowDragFromColumnsToolPanel:"allowDragFromColumnsToolPanel",suppressMovableColumns:"suppressMovableColumns",suppressColumnMoveAnimation:"suppressColumnMoveAnimation",suppressMoveWhenColumnDragging:"suppressMoveWhenColumnDragging",suppressDragLeaveHidesColumns:"suppressDragLeaveHidesColumns",suppressRowGroupHidesColumns:"suppressRowGroupHidesColumns",colResizeDefault:"colResizeDefault",suppressAutoSize:"suppressAutoSize",autoSizePadding:"autoSizePadding",skipHeaderOnAutoSize:"skipHeaderOnAutoSize",autoSizeStrategy:"autoSizeStrategy",components:"components",editType:"editType",singleClickEdit:"singleClickEdit",suppressClickEdit:"suppressClickEdit",readOnlyEdit:"readOnlyEdit",stopEditingWhenCellsLoseFocus:"stopEditingWhenCellsLoseFocus",enterNavigatesVertically:"enterNavigatesVertically",enterNavigatesVerticallyAfterEdit:"enterNavigatesVerticallyAfterEdit",enableCellEditingOnBackspace:"enableCellEditingOnBackspace",undoRedoCellEditing:"undoRedoCellEditing",undoRedoCellEditingLimit:"undoRedoCellEditingLimit",defaultCsvExportParams:"defaultCsvExportParams",suppressCsvExport:"suppressCsvExport",defaultExcelExportParams:"defaultExcelExportParams",suppressExcelExport:"suppressExcelExport",excelStyles:"excelStyles",quickFilterText:"quickFilterText",cacheQuickFilter:"cacheQuickFilter",includeHiddenColumnsInQuickFilter:"includeHiddenColumnsInQuickFilter",quickFilterParser:"quickFilterParser",quickFilterMatcher:"quickFilterMatcher",applyQuickFilterBeforePivotOrAgg:"applyQuickFilterBeforePivotOrAgg",excludeChildrenWhenTreeDataFiltering:"excludeChildrenWhenTreeDataFiltering",enableAdvancedFilter:"enableAdvancedFilter",advancedFilterModel:"advancedFilterModel",includeHiddenColumnsInAdvancedFilter:"includeHiddenColumnsInAdvancedFilter",advancedFilterParent:"advancedFilterParent",advancedFilterBuilderParams:"advancedFilterBuilderParams",suppressAdvancedFilterEval:"suppressAdvancedFilterEval",suppressSetFilterByDefault:"suppressSetFilterByDefault",enableCharts:"enableCharts",chartThemes:"chartThemes",customChartThemes:"customChartThemes",chartThemeOverrides:"chartThemeOverrides",chartToolPanelsDef:"chartToolPanelsDef",chartMenuItems:"chartMenuItems",loadingCellRenderer:"loadingCellRenderer",loadingCellRendererParams:"loadingCellRendererParams",loadingCellRendererSelector:"loadingCellRendererSelector",localeText:"localeText",masterDetail:"masterDetail",keepDetailRows:"keepDetailRows",keepDetailRowsCount:"keepDetailRowsCount",detailCellRenderer:"detailCellRenderer",detailCellRendererParams:"detailCellRendererParams",detailRowHeight:"detailRowHeight",detailRowAutoHeight:"detailRowAutoHeight",context:"context",dragAndDropImageComponent:"dragAndDropImageComponent",dragAndDropImageComponentParams:"dragAndDropImageComponentParams",alignedGrids:"alignedGrids",tabIndex:"tabIndex",rowBuffer:"rowBuffer",valueCache:"valueCache",valueCacheNeverExpires:"valueCacheNeverExpires",enableCellExpressions:"enableCellExpressions",suppressTouch:"suppressTouch",suppressFocusAfterRefresh:"suppressFocusAfterRefresh",suppressAsyncEvents:"suppressAsyncEvents",suppressBrowserResizeObserver:"suppressBrowserResizeObserver",suppressPropertyNamesCheck:"suppressPropertyNamesCheck",suppressChangeDetection:"suppressChangeDetection",debug:"debug",loading:"loading",overlayLoadingTemplate:"overlayLoadingTemplate",loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentParams:"loadingOverlayComponentParams",suppressLoadingOverlay:"suppressLoadingOverlay",overlayNoRowsTemplate:"overlayNoRowsTemplate",noRowsOverlayComponent:"noRowsOverlayComponent",noRowsOverlayComponentParams:"noRowsOverlayComponentParams",suppressNoRowsOverlay:"suppressNoRowsOverlay",pagination:"pagination",paginationPageSize:"paginationPageSize",paginationPageSizeSelector:"paginationPageSizeSelector",paginationAutoPageSize:"paginationAutoPageSize",paginateChildRows:"paginateChildRows",suppressPaginationPanel:"suppressPaginationPanel",pivotMode:"pivotMode",pivotPanelShow:"pivotPanelShow",pivotMaxGeneratedColumns:"pivotMaxGeneratedColumns",pivotDefaultExpanded:"pivotDefaultExpanded",pivotColumnGroupTotals:"pivotColumnGroupTotals",pivotRowTotals:"pivotRowTotals",pivotSuppressAutoColumn:"pivotSuppressAutoColumn",suppressExpandablePivotGroups:"suppressExpandablePivotGroups",functionsReadOnly:"functionsReadOnly",aggFuncs:"aggFuncs",suppressAggFuncInHeader:"suppressAggFuncInHeader",alwaysAggregateAtRootLevel:"alwaysAggregateAtRootLevel",aggregateOnlyChangedColumns:"aggregateOnlyChangedColumns",suppressAggFilteredOnly:"suppressAggFilteredOnly",removePivotHeaderRowWhenSingleValueColumn:"removePivotHeaderRowWhenSingleValueColumn",animateRows:"animateRows",enableCellChangeFlash:"enableCellChangeFlash",cellFlashDuration:"cellFlashDuration",cellFlashDelay:"cellFlashDelay",cellFadeDuration:"cellFadeDuration",cellFadeDelay:"cellFadeDelay",allowShowChangeAfterFilter:"allowShowChangeAfterFilter",domLayout:"domLayout",ensureDomOrder:"ensureDomOrder",enableRtl:"enableRtl",suppressColumnVirtualisation:"suppressColumnVirtualisation",suppressMaxRenderedRowRestriction:"suppressMaxRenderedRowRestriction",suppressRowVirtualisation:"suppressRowVirtualisation",rowDragManaged:"rowDragManaged",suppressRowDrag:"suppressRowDrag",suppressMoveWhenRowDragging:"suppressMoveWhenRowDragging",rowDragEntireRow:"rowDragEntireRow",rowDragMultiRow:"rowDragMultiRow",rowDragText:"rowDragText",fullWidthCellRenderer:"fullWidthCellRenderer",fullWidthCellRendererParams:"fullWidthCellRendererParams",embedFullWidthRows:"embedFullWidthRows",suppressGroupMaintainValueType:"suppressGroupMaintainValueType",groupDisplayType:"groupDisplayType",groupDefaultExpanded:"groupDefaultExpanded",autoGroupColumnDef:"autoGroupColumnDef",groupMaintainOrder:"groupMaintainOrder",groupSelectsChildren:"groupSelectsChildren",groupLockGroupColumns:"groupLockGroupColumns",groupAggFiltering:"groupAggFiltering",groupIncludeFooter:"groupIncludeFooter",groupIncludeTotalFooter:"groupIncludeTotalFooter",groupTotalRow:"groupTotalRow",grandTotalRow:"grandTotalRow",suppressStickyTotalRow:"suppressStickyTotalRow",groupSuppressBlankHeader:"groupSuppressBlankHeader",groupSelectsFiltered:"groupSelectsFiltered",showOpenedGroup:"showOpenedGroup",groupRemoveSingleChildren:"groupRemoveSingleChildren",groupRemoveLowestSingleChildren:"groupRemoveLowestSingleChildren",groupHideOpenParents:"groupHideOpenParents",groupAllowUnbalanced:"groupAllowUnbalanced",rowGroupPanelShow:"rowGroupPanelShow",groupRowRenderer:"groupRowRenderer",groupRowRendererParams:"groupRowRendererParams",suppressMakeColumnVisibleAfterUnGroup:"suppressMakeColumnVisibleAfterUnGroup",treeData:"treeData",rowGroupPanelSuppressSort:"rowGroupPanelSuppressSort",suppressGroupRowsSticky:"suppressGroupRowsSticky",pinnedTopRowData:"pinnedTopRowData",pinnedBottomRowData:"pinnedBottomRowData",rowModelType:"rowModelType",rowData:"rowData",asyncTransactionWaitMillis:"asyncTransactionWaitMillis",suppressModelUpdateAfterUpdateTransaction:"suppressModelUpdateAfterUpdateTransaction",datasource:"datasource",cacheOverflowSize:"cacheOverflowSize",infiniteInitialRowCount:"infiniteInitialRowCount",serverSideInitialRowCount:"serverSideInitialRowCount",suppressServerSideInfiniteScroll:"suppressServerSideInfiniteScroll",suppressServerSideFullWidthLoadingRow:"suppressServerSideFullWidthLoadingRow",cacheBlockSize:"cacheBlockSize",maxBlocksInCache:"maxBlocksInCache",maxConcurrentDatasourceRequests:"maxConcurrentDatasourceRequests",blockLoadDebounceMillis:"blockLoadDebounceMillis",purgeClosedRowNodes:"purgeClosedRowNodes",serverSideDatasource:"serverSideDatasource",serverSideSortAllLevels:"serverSideSortAllLevels",serverSideEnableClientSideSort:"serverSideEnableClientSideSort",serverSideOnlyRefreshFilteredGroups:"serverSideOnlyRefreshFilteredGroups",serverSideSortOnServer:"serverSideSortOnServer",serverSideFilterOnServer:"serverSideFilterOnServer",serverSidePivotResultFieldSeparator:"serverSidePivotResultFieldSeparator",viewportDatasource:"viewportDatasource",viewportRowModelPageSize:"viewportRowModelPageSize",viewportRowModelBufferSize:"viewportRowModelBufferSize",alwaysShowHorizontalScroll:"alwaysShowHorizontalScroll",alwaysShowVerticalScroll:"alwaysShowVerticalScroll",debounceVerticalScrollbar:"debounceVerticalScrollbar",suppressHorizontalScroll:"suppressHorizontalScroll",suppressScrollOnNewData:"suppressScrollOnNewData",suppressScrollWhenPopupsAreOpen:"suppressScrollWhenPopupsAreOpen",suppressAnimationFrame:"suppressAnimationFrame",suppressMiddleClickScrolls:"suppressMiddleClickScrolls",suppressPreventDefaultOnMouseWheel:"suppressPreventDefaultOnMouseWheel",scrollbarWidth:"scrollbarWidth",rowSelection:"rowSelection",cellSelection:"cellSelection",rowMultiSelectWithClick:"rowMultiSelectWithClick",suppressRowDeselection:"suppressRowDeselection",suppressRowClickSelection:"suppressRowClickSelection",suppressCellFocus:"suppressCellFocus",suppressHeaderFocus:"suppressHeaderFocus",selectionColumnDef:"selectionColumnDef",suppressMultiRangeSelection:"suppressMultiRangeSelection",enableCellTextSelection:"enableCellTextSelection",enableRangeSelection:"enableRangeSelection",enableRangeHandle:"enableRangeHandle",enableFillHandle:"enableFillHandle",fillHandleDirection:"fillHandleDirection",suppressClearOnFillReduction:"suppressClearOnFillReduction",sortingOrder:"sortingOrder",accentedSort:"accentedSort",unSortIcon:"unSortIcon",suppressMultiSort:"suppressMultiSort",alwaysMultiSort:"alwaysMultiSort",multiSortKey:"multiSortKey",suppressMaintainUnsortedOrder:"suppressMaintainUnsortedOrder",icons:"icons",rowHeight:"rowHeight",rowStyle:"rowStyle",rowClass:"rowClass",rowClassRules:"rowClassRules",suppressRowHoverHighlight:"suppressRowHoverHighlight",suppressRowTransform:"suppressRowTransform",columnHoverHighlight:"columnHoverHighlight",gridId:"gridId",deltaSort:"deltaSort",treeDataDisplayType:"treeDataDisplayType",enableGroupEdit:"enableGroupEdit",initialState:"initialState",theme:"theme",loadThemeGoogleFonts:"loadThemeGoogleFonts",getContextMenuItems:"getContextMenuItems",getMainMenuItems:"getMainMenuItems",postProcessPopup:"postProcessPopup",processUnpinnedColumns:"processUnpinnedColumns",processCellForClipboard:"processCellForClipboard",processHeaderForClipboard:"processHeaderForClipboard",processGroupHeaderForClipboard:"processGroupHeaderForClipboard",processCellFromClipboard:"processCellFromClipboard",sendToClipboard:"sendToClipboard",processDataFromClipboard:"processDataFromClipboard",isExternalFilterPresent:"isExternalFilterPresent",doesExternalFilterPass:"doesExternalFilterPass",getChartToolbarItems:"getChartToolbarItems",createChartContainer:"createChartContainer",focusGridInnerElement:"focusGridInnerElement",navigateToNextHeader:"navigateToNextHeader",tabToNextHeader:"tabToNextHeader",navigateToNextCell:"navigateToNextCell",tabToNextCell:"tabToNextCell",getLocaleText:"getLocaleText",getDocument:"getDocument",paginationNumberFormatter:"paginationNumberFormatter",getGroupRowAgg:"getGroupRowAgg",isGroupOpenByDefault:"isGroupOpenByDefault",initialGroupOrderComparator:"initialGroupOrderComparator",processPivotResultColDef:"processPivotResultColDef",processPivotResultColGroupDef:"processPivotResultColGroupDef",getDataPath:"getDataPath",getChildCount:"getChildCount",getServerSideGroupLevelParams:"getServerSideGroupLevelParams",isServerSideGroupOpenByDefault:"isServerSideGroupOpenByDefault",isApplyServerSideTransaction:"isApplyServerSideTransaction",isServerSideGroup:"isServerSideGroup",getServerSideGroupKey:"getServerSideGroupKey",getBusinessKeyForNode:"getBusinessKeyForNode",getRowId:"getRowId",resetRowDataOnUpdate:"resetRowDataOnUpdate",processRowPostCreate:"processRowPostCreate",isRowSelectable:"isRowSelectable",isRowMaster:"isRowMaster",fillOperation:"fillOperation",postSortRows:"postSortRows",getRowStyle:"getRowStyle",getRowClass:"getRowClass",getRowHeight:"getRowHeight",isFullWidthRow:"isFullWidthRow"},outputs:{toolPanelVisibleChanged:"toolPanelVisibleChanged",toolPanelSizeChanged:"toolPanelSizeChanged",columnMenuVisibleChanged:"columnMenuVisibleChanged",contextMenuVisibleChanged:"contextMenuVisibleChanged",cutStart:"cutStart",cutEnd:"cutEnd",pasteStart:"pasteStart",pasteEnd:"pasteEnd",columnVisible:"columnVisible",columnPinned:"columnPinned",columnResized:"columnResized",columnMoved:"columnMoved",columnValueChanged:"columnValueChanged",columnPivotModeChanged:"columnPivotModeChanged",columnPivotChanged:"columnPivotChanged",columnGroupOpened:"columnGroupOpened",newColumnsLoaded:"newColumnsLoaded",gridColumnsChanged:"gridColumnsChanged",displayedColumnsChanged:"displayedColumnsChanged",virtualColumnsChanged:"virtualColumnsChanged",columnEverythingChanged:"columnEverythingChanged",columnHeaderMouseOver:"columnHeaderMouseOver",columnHeaderMouseLeave:"columnHeaderMouseLeave",columnHeaderClicked:"columnHeaderClicked",columnHeaderContextMenu:"columnHeaderContextMenu",componentStateChanged:"componentStateChanged",cellValueChanged:"cellValueChanged",cellEditRequest:"cellEditRequest",rowValueChanged:"rowValueChanged",cellEditingStarted:"cellEditingStarted",cellEditingStopped:"cellEditingStopped",rowEditingStarted:"rowEditingStarted",rowEditingStopped:"rowEditingStopped",undoStarted:"undoStarted",undoEnded:"undoEnded",redoStarted:"redoStarted",redoEnded:"redoEnded",cellSelectionDeleteStart:"cellSelectionDeleteStart",cellSelectionDeleteEnd:"cellSelectionDeleteEnd",rangeDeleteStart:"rangeDeleteStart",rangeDeleteEnd:"rangeDeleteEnd",fillStart:"fillStart",fillEnd:"fillEnd",filterOpened:"filterOpened",filterChanged:"filterChanged",filterModified:"filterModified",advancedFilterBuilderVisibleChanged:"advancedFilterBuilderVisibleChanged",chartCreated:"chartCreated",chartRangeSelectionChanged:"chartRangeSelectionChanged",chartOptionsChanged:"chartOptionsChanged",chartDestroyed:"chartDestroyed",cellKeyDown:"cellKeyDown",gridReady:"gridReady",firstDataRendered:"firstDataRendered",gridSizeChanged:"gridSizeChanged",modelUpdated:"modelUpdated",virtualRowRemoved:"virtualRowRemoved",viewportChanged:"viewportChanged",bodyScroll:"bodyScroll",bodyScrollEnd:"bodyScrollEnd",dragStarted:"dragStarted",dragStopped:"dragStopped",dragCancelled:"dragCancelled",stateUpdated:"stateUpdated",paginationChanged:"paginationChanged",rowDragEnter:"rowDragEnter",rowDragMove:"rowDragMove",rowDragLeave:"rowDragLeave",rowDragEnd:"rowDragEnd",rowDragCancel:"rowDragCancel",columnRowGroupChanged:"columnRowGroupChanged",rowGroupOpened:"rowGroupOpened",expandOrCollapseAll:"expandOrCollapseAll",pivotMaxColumnsExceeded:"pivotMaxColumnsExceeded",pinnedRowDataChanged:"pinnedRowDataChanged",rowDataUpdated:"rowDataUpdated",asyncTransactionsFlushed:"asyncTransactionsFlushed",storeRefreshed:"storeRefreshed",headerFocused:"headerFocused",cellClicked:"cellClicked",cellDoubleClicked:"cellDoubleClicked",cellFocused:"cellFocused",cellMouseOver:"cellMouseOver",cellMouseOut:"cellMouseOut",cellMouseDown:"cellMouseDown",rowClicked:"rowClicked",rowDoubleClicked:"rowDoubleClicked",rowSelected:"rowSelected",selectionChanged:"selectionChanged",cellContextMenu:"cellContextMenu",rangeSelectionChanged:"rangeSelectionChanged",cellSelectionChanged:"cellSelectionChanged",tooltipShow:"tooltipShow",tooltipHide:"tooltipHide",sortChanged:"sortChanged"},standalone:!0,features:[Br([GY,BY]),Vn,We],decls:0,vars:0,template:function(i,r){},encapsulation:2})}}return e})();var RIe=e=>({"add-tag":e});function IIe(e,t){if(e&1){let n=Tt();z(0,"div",3),ye(1),z(2,"i",4),be("click",function(){Ge(n);let r=Se();return He(r.removeExistingTag())}),H()()}if(e&2){let n=Se();Z(),qn(" ",n.selectedTag.name," ")}}function FIe(e,t){if(e&1){let n=Tt();z(0,"textarea",5),be("keydown.enter",function(r){Ge(n);let o=Se();return He(o.onEnterKey(r))})("focus",function(){Ge(n);let r=Se();return He(r.onFocus())})("blur",function(){Ge(n);let r=Se();return He(r.onBlur())}),H()}if(e&2){let n=Se();ue("formControl",n.tagForm)}}function AIe(e,t){if(e&1){let n=Tt();z(0,"li",10),be("click",function(){Ge(n);let r=Se(2);return He(r.addTag(r.tagForm.value))}),ye(1),H()}if(e&2){let n=Se(2);Z(),qn(' Add tag "',n.tagForm.value,'" ')}}function MIe(e,t){if(e&1){let n=Tt();z(0,"li",11),be("click",function(){let r=Ge(n).$implicit,o=Se(2);return He(o.addExistingTag(r))}),ye(1),he(2,"i",12),H()}if(e&2){let n=t.$implicit,i=Se(2);ue("ngClass",Np(2,RIe,i.isOptionHighlighted(n.name))),Z(),qn(" ",n.name," ")}}function PIe(e,t){if(e&1&&(z(0,"div",6)(1,"ul",7),Fe(2,AIe,2,1,"li",8)(3,MIe,3,4,"li",9),H()()),e&2){let n=Se();Z(2),ue("ngIf",n.showAddTagOption()&&n.tagForm.value),Z(),ue("ngForOf",n.suggestions)}}var zY=(()=>{class e{constructor(n){this.tagService=n,this.type="income",this.tagId=null,this.tagAdded=new Q,this.incomeTags=[],this.expenseTags=[],this.tagForm=new ql(""),this.selectedTag=null,this.suggestions=[],this.searchDelay=0,this.isFocused=!1,this.destroy$=new nt,this.tagService.incomeTags$.subscribe(i=>{this.incomeTags=i}),this.tagService.expenseTags$.subscribe(i=>{this.expenseTags=i}),this.tagForm.valueChanges.pipe(mp(this.searchDelay)).subscribe(i=>{this.filterSuggestions(i)})}ngOnInit(){this.suggestions=this.type==="income"?this.incomeTags:this.expenseTags,this.tagId!==null&&(this.removeTagFromSuggestions(this.tagId),this.tagService.getTagFromId(this.tagId,this.type).pipe(mn(this.destroy$)).subscribe(n=>{this.selectedTag=n}))}filterSuggestions(n){if(!n)this.suggestions=this.type==="income"?this.incomeTags:this.expenseTags;else{let i=n.toLowerCase();this.suggestions=(this.type==="income"?this.incomeTags:this.expenseTags).filter(r=>r.name.toLowerCase().includes(i)).sort((r,o)=>r.name.length-o.name.length)}this.selectedTag&&this.removeTagFromSuggestions(this.selectedTag.id)}addTag(n){this.tagService.addTag(n,this.type).subscribe(i=>{this.tagAdded.emit(i),this.tagForm.setValue(""),this.tagService.getTagFromId(i,this.type).subscribe(r=>{this.selectedTag=r}),this.removeTagFromSuggestions(i)},i=>{console.error("Error adding tag:",i)})}addExistingTag(n){document.getElementById("tagIds").blur(),this.tagAdded.emit(n.id),this.tagForm.setValue(""),this.selectedTag=n,this.removeTagFromSuggestions(n.id)}onFocus(){this.isFocused=!0}onBlur(){setTimeout(()=>{this.isFocused=!1},200)}removeExistingTag(){this.selectedTag&&(this.tagAdded.emit(null),this.suggestions=this.type==="income"?this.incomeTags:this.expenseTags,this.selectedTag=null)}removeTagFromSuggestions(n){this.suggestions=this.suggestions.filter(i=>i.id!==n)}showAddTagOption(){return!this.suggestions.some(n=>n.name.toLowerCase()===this.tagForm.value.toLowerCase())}onEnterKey(n){if(!this.tagForm.value)return;n.preventDefault();let i=this.suggestions.find(o=>o.name.toLowerCase()===this.tagForm.value.toLowerCase());if(i){this.addExistingTag(i);return}this.addTag(this.tagForm.value),document.getElementById("tagIds").blur()}isOptionHighlighted(n){return n.toLowerCase()===this.tagForm.value.toLowerCase()}ngOnDestroy(){this.destroy$.next()}static{this.\u0275fac=function(i){return new(i||e)(J(Vu))}}static{this.\u0275cmp=je({type:e,selectors:[["app-tag-input"]],inputs:{type:"type",tagId:"tagId"},outputs:{tagAdded:"tagAdded"},standalone:!0,features:[We],decls:3,vars:3,consts:[["class","badge bg-primary text-wrap",4,"ngIf"],["class","form-control border-0 shadow-none","id","tagIds","placeholder","Add a tag","style","height: 40px; resize: none; overflow: hidden","rows","3",3,"formControl","keydown.enter","focus","blur",4,"ngIf"],["class","position-relative col-6",4,"ngIf"],[1,"badge","bg-primary","text-wrap"],["role","button",1,"bi","bi-x-circle-fill","ms-1",3,"click"],["id","tagIds","placeholder","Add a tag","rows","3",1,"form-control","border-0","shadow-none",2,"height","40px","resize","none","overflow","hidden",3,"keydown.enter","focus","blur","formControl"],[1,"position-relative","col-6"],[1,"list-group","position-absolute","shadow","rounded","border","border-1","border-secondary","bg-white","w-100","mt-1","p-0",2,"max-height","125px","overflow-y","auto"],["class","add-tag list-group-item d-flex justify-content-between align-items-center p-2",3,"click",4,"ngIf"],["class","list-group-item d-flex justify-content-between align-items-center p-2 icon-link-hover",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"add-tag","list-group-item","d-flex","justify-content-between","align-items-center","p-2",3,"click"],[1,"list-group-item","d-flex","justify-content-between","align-items-center","p-2","icon-link-hover",3,"click","ngClass"],[1,"bi","bi-plus-lg","mx-1"]],template:function(i,r){i&1&&Fe(0,IIe,3,1,"div",0)(1,FIe,1,1,"textarea",1)(2,PIe,4,2,"div",2),i&2&&(ue("ngIf",r.selectedTag),Z(),ue("ngIf",r.selectedTag===null),Z(),ue("ngIf",r.isFocused))},dependencies:[$a,ys,Cs,Z0,_n,H1,gs,Gi],styles:[".add-tag[_ngcontent-%COMP%]{background-color:#fd7e14;color:#fff}li[_ngcontent-%COMP%]{cursor:pointer}"]})}}return e})();var Yu=(()=>{class e{constructor(n,i){this.afAuth=n,this.fs=i,this.userId=null,this.incomeTransactionsSubject=new jt([]),this.incomeTransactions$=this.incomeTransactionsSubject.asObservable(),this.expenseTransactionsSubject=new jt([]),this.expenseTransactions$=this.expenseTransactionsSubject.asObservable(),this.initialize()}initialize(){this.afAuth.authState.pipe(Ne(n=>n?(this.userId=n.uid,this.getAllTransactions()):(this.userId=null,se({incomeTransactions:[],expenseTransactions:[]})))).subscribe({next:({incomeTransactions:n,expenseTransactions:i})=>{this.incomeTransactionsSubject.next(n),this.expenseTransactionsSubject.next(i)},error:n=>{console.error("Error fetching transactions:",n)}})}getTransactionFromId(n,i){return(i==="income"?this.incomeTransactionsSubject:this.expenseTransactionsSubject).value.find(r=>r.id===n)}getAllTransactions(){if(!this.userId)return se({incomeTransactions:[],expenseTransactions:[]});let n=this.getIncomeTransactions(),i=this.getExpenseTransactions();return Ar([n,i]).pipe(ae(([r,o])=>({incomeTransactions:r,expenseTransactions:o})))}getTransactions(n){if(!this.userId)return se([]);let i=zh(this.fs,`transactions/${this.userId}/${n}`),r=Z9(i,$9("date"));return eC(r,{idField:"id"}).pipe(ae(o=>o.map(s=>pe(B({},s),{date:s.date instanceof yn?s.date.toDate():s.date}))))}getIncomeTransactions(){return this.getTransactions("income")}getExpenseTransactions(){return this.getTransactions("expense")}addTransaction(n){let i=Rx(zh(this.fs,`transactions/${this.userId}/${n.type}`),n);return se(i)}updateTransaction(n,i){let r=uc(this.fs,`transactions/${this.userId}/${i.type}`,n),o=nm(r,pe(B({},i),{date:yn.fromDate(i.date)}));return se(o)}deleteTransaction(n){let i=uc(this.fs,`transactions/${this.userId}/${n.type}`,n.id);return se(Ix(i))}static{this.\u0275fac=function(i){return new(i||e)($(Za),$(cc))}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var kIe=["deleteConfirmationModal"];function OIe(e,t){e&1&&(z(0,"div",21),ye(1," Title is required. "),H())}function NIe(e,t){e&1&&(z(0,"div",21),ye(1," Amount is required and must be greater than or equal to 0. "),H())}function LIe(e,t){e&1&&(z(0,"div",21),ye(1," Date is required. "),H())}function VIe(e,t){if(e&1){let n=Tt();z(0,"div",22)(1,"span",23),be("click",function(){Ge(n);let r=Se();return He(r.deleteConfirmation())}),he(2,"i",24),ye(3," Delete Transaction "),H()()}}function BIe(e,t){if(e&1){let n=Tt();z(0,"div",1)(1,"div",2)(2,"i",3),be("click",function(){Ge(n);let r=Se();return He(r.closeDeleteConfirmation())}),H(),z(3,"h4",25),ye(4,"Delete Confirmation"),H(),z(5,"p",26),ye(6," Are you sure you want to delete this transaction? "),H(),z(7,"div",27)(8,"button",28),be("click",function(){Ge(n);let r=Se();return He(r.deleteTransaction())}),ye(9," Delete "),H(),z(10,"button",29),be("click",function(){Ge(n);let r=Se();return He(r.closeDeleteConfirmation())}),ye(11," Cancel "),H()()()()}}var pD=(()=>{class e{constructor(n,i,r){this.ngbModal=n,this.fb=i,this.transactionService=r,this.transactionForm=this.fb.group({title:["",vs.required],amount:[0,[vs.required,vs.min(0)]],type:["income",vs.required],description:[""],date:["",vs.required],tagIds:[[]]}),this.transactionType="income",this.selectedTransaction=null}ngOnInit(){this.initializeForm()}ngOnChanges(n){n&&n.transactionType&&(this.transactionType=n.transactionType.currentValue,this.transactionForm.get("type")?.setValue(this.transactionType)),n&&n.selectedTransaction&&(this.selectedTransaction=n.selectedTransaction.currentValue,this.initializeForm())}initializeForm(){this.selectedTransaction?this.transactionForm.patchValue(pe(B({},this.selectedTransaction),{date:this.formatDate(new Date(this.selectedTransaction.date))})):this.transactionForm.patchValue({amount:null,type:this.transactionType,description:"",date:this.formatDate(new Date),tagIds:[]})}formatDate(n){return n.toISOString().split("T")[0]}deleteConfirmation(){this.deleteConfirmationModalReference=this.ngbModal.open(this.deleteConfirmationModal,{centered:!0,backdrop:!0,size:"sm"})}closeDeleteConfirmation(){this.deleteConfirmationModalReference.close()}deleteTransaction(){this.selectedTransaction&&this.transactionService.deleteTransaction(this.selectedTransaction).subscribe({next:()=>{console.log("Transaction deleted successfully")},error:n=>{console.error("Error deleting transaction",n)}}),this.closeModal()}parseDate(n){return new Date(n)}closeModal(){this.ngbModal.dismissAll(),this.transactionForm.reset()}updateTransactionTag(n){if(console.log("Tag ID:",n),!n){this.transactionForm.get("tagIds")?.setValue([]);return}this.transactionForm.get("tagIds")?.setValue([n])}onSubmit(){if(this.transactionForm.valid){let n=this.transactionForm.value,i={title:n.title??"",amount:n.amount??0,type:n.type,description:n.description??"",date:this.parseDate(n.date??""),tagIds:n.tagIds??[]};this.selectedTransaction?this.transactionService.updateTransaction(this.selectedTransaction.id,i).subscribe({next:()=>{console.log("Transaction updated successfully")},error:r=>{console.error("Error updating transaction",r)}}):this.transactionService.addTransaction(i).subscribe({next:()=>{console.log("Transaction added successfully")},error:r=>{console.error("Error adding transaction",r)}}),this.closeModal()}else console.error("Form is invalid")}get isPost(){return this.selectedTransaction===null}static{this.\u0275fac=function(i){return new(i||e)(J(em),J(Zp),J(Yu))}}static{this.\u0275cmp=je({type:e,selectors:[["app-transaction-form"]],viewQuery:function(i,r){if(i&1&&fs(kIe,5),i&2){let o;yo(o=Co())&&(r.deleteConfirmationModal=o.first)}},inputs:{transactionType:"transactionType",selectedTransaction:"selectedTransaction"},standalone:!0,features:[Vn,We],decls:36,vars:13,consts:[["deleteConfirmationModal",""],[1,"modal-content","d-flex","align-items-center","justify-content-center","p-4"],[1,"user-select-none","w-100"],["role","button",1,"bi","bi-x-lg","float-end",3,"click"],["id","modal-title",1,"modal-title","fw-bold"],[1,"text-muted"],[1,"p-3",3,"ngSubmit","formGroup"],[1,"form-row","mb-3"],["for","title",1,"form-label"],["type","text","id","title","formControlName","title","placeholder","Enter title",1,"form-control"],["class","text-danger",4,"ngIf"],["for","amount",1,"form-label"],["type","number","id","amount","formControlName","amount","placeholder","Enter amount",1,"form-control"],["for","description",1,"form-label"],["id","description","formControlName","description","placeholder","Enter description","rows","3",1,"form-control"],["for","date",1,"form-label"],["type","date","id","date","formControlName","date",1,"form-control"],[3,"tagAdded","tagId","type"],[1,"d-flex","justify-content-end"],["autofocus","","type","submit",1,"btn","btn-warning",3,"disabled"],["class","modal-footer d-flex justify-content-center",4,"ngIf"],[1,"text-danger"],[1,"modal-footer","d-flex","justify-content-center"],["role","button",1,"text-danger",3,"click"],[1,"bi","bi-trash"],[1,"modal-title","fw-bold"],[1,"text-muted","mb-3"],[1,"d-flex","justify-content-center"],["type","button",1,"bg-danger","text-white","border-0","rounded-3","col-5","p-2",3,"click"],["type","button",1,"col-5","bg-white","rounded-3","offset-2","border-1","p-2",3,"click"]],template:function(i,r){if(i&1){let o=Tt();z(0,"div",1)(1,"div",2)(2,"i",3),be("click",function(){return Ge(o),He(r.closeModal())}),H(),z(3,"h4",4),ye(4),b0(5,"titlecase"),H(),z(6,"p",5),ye(7),H(),z(8,"form",6),be("ngSubmit",function(){return Ge(o),He(r.onSubmit())}),z(9,"div",7)(10,"label",8),ye(11,"Title"),H(),he(12,"input",9),Fe(13,OIe,2,0,"div",10),H(),z(14,"div",7)(15,"label",11),ye(16,"Amount"),H(),he(17,"input",12),Fe(18,NIe,2,0,"div",10),H(),z(19,"div",7)(20,"label",13),ye(21,"Description"),H(),he(22,"textarea",14),H(),z(23,"div",7)(24,"label",15),ye(25,"Date"),H(),he(26,"input",16),Fe(27,LIe,2,0,"div",10),H(),z(28,"div",7)(29,"app-tag-input",17),be("tagAdded",function(a){return Ge(o),He(r.updateTransactionTag(a))}),H()(),z(30,"div",18)(31,"button",19),ye(32),H()()(),Fe(33,VIe,4,0,"div",20),H()(),Fe(34,BIe,12,0,"ng-template",null,0,tr)}i&2&&(Z(4),qn(" ",S0(5,11,r.isPost?r.transactionType:"Update Transaction")," "),Z(3),qn("Enter your ",r.transactionType," details below."),Z(),ue("formGroup",r.transactionForm),Z(5),ue("ngIf",r.transactionForm.controls.title.invalid&&r.transactionForm.controls.title.touched),Z(5),ue("ngIf",r.transactionForm.controls.amount.invalid&&r.transactionForm.controls.amount.touched),Z(9),ue("ngIf",r.transactionForm.controls.date.invalid&&r.transactionForm.controls.date.touched),Z(2),ue("tagId",(r.selectedTransaction==null||r.selectedTransaction.tagIds==null?null:r.selectedTransaction.tagIds[0])||null)("type",r.transactionType),Z(2),ue("disabled",r.transactionForm.invalid),Z(),qn(" ",r.isPost?"Submit":"Update"," "),Z(),ue("ngIf",!r.isPost))},dependencies:[$a,$p,ys,TM,Cs,Xp,nh,ih,_n,Gi,JH,zY]})}}return e})();var GIe=["modalTemplate"];function HIe(e,t){if(e&1&&(z(0,"div"),he(1,"input",3),H()),e&2){let n=Se();Z(),ue("formControl",n.filterText)}}function zIe(e,t){if(e&1&&he(0,"app-transaction-form",4),e&2){let n=Se();ue("transactionType",n.transactionType)("selectedTransaction",n.selectedTransaction)}}var UY=(()=>{class e{constructor(n,i,r,o){this.utilService=n,this.tagService=i,this.transactionService=r,this.ngbModal=o,this.transactions=[],this.showFilter=!1,this.filterText=new ql(""),this.rowData=[],this.colDefs=[{field:"title"},{field:"amount",valueFormatter:s=>`${s.value.toLocaleString()}`},{field:"date"},{field:"category"},{field:"description"},{field:"type"}],this.gridOptions={getRowStyle:s=>{let a=s.data.type==="income",l=(s.node.rowIndex??0)%2===0;return a?{backgroundColor:l?"#e6f3e6":"#f0f8f0"}:{backgroundColor:l?"#fce4e4":"#fdf0f0"}}},this.selectedTransaction=null,this.transactionType="income"}onGridReady(n){this.gridApi=n.api}ngOnChanges(){this.transactions.length===0&&(this.rowData=[]),this.transactionToRowData(this.transactions).subscribe(n=>{this.rowData=n,this.filterText.valueChanges.subscribe(i=>{this.filterTable(i??"")})})}onRowDoubleClicked(n){if(n.data){let i=this.transactionService.getTransactionFromId(n.data.id,n.data.type==="income"?"income":"expense");this.selectedTransaction=i??null,this.openModal(i?i.type:"income")}}transactionToRowData(n){let i=n.map(r=>this.tagService.getTagFromId(r.tagIds[0],r.type).pipe(ae(o=>({id:r.id,title:r.title,date:this.utilService.formatDateToDayMonthYearWeekday(r.date),description:r.description,category:o.name,amount:r.amount,type:r.type}))));return Ar(i)}filterTable(n){this.gridApi.setGridOption("quickFilterText",n)}openModal(n){this.transactionType=n,this.ngbModal.open(this.modalTemplate,{centered:!0,fullscreen:"sm"})}static{this.\u0275fac=function(i){return new(i||e)(J(Ax),J(Vu),J(Yu),J(em))}}static{this.\u0275cmp=je({type:e,selectors:[["app-transaction-table"]],viewQuery:function(i,r){if(i&1&&fs(GIe,5),i&2){let o;yo(o=Co())&&(r.modalTemplate=o.first)}},inputs:{transactions:"transactions",showFilter:"showFilter"},standalone:!0,features:[Vn,We],decls:4,vars:4,consts:[["modalTemplate",""],[4,"ngIf"],[1,"ag-theme-alpine",2,"height","300px",3,"rowDoubleClicked","gridReady","rowData","columnDefs","gridOptions"],["type","text","id","filter-text-box","placeholder","Filter...",1,"filter-box","mb-2",3,"formControl"],[3,"transactionType","selectedTransaction"]],template:function(i,r){if(i&1){let o=Tt();Fe(0,HIe,2,1,"div",1),z(1,"ag-grid-angular",2),be("rowDoubleClicked",function(a){return Ge(o),He(r.onRowDoubleClicked(a))})("gridReady",function(a){return Ge(o),He(r.onGridReady(a))}),H(),Fe(2,zIe,1,2,"ng-template",null,0,tr)}i&2&&(ue("ngIf",r.showFilter),Z(),ue("rowData",r.rowData)("columnDefs",r.colDefs)("gridOptions",r.gridOptions))},dependencies:[HY,_n,Gi,$a,ys,Cs,Z0,pD],styles:[".filter-box[_ngcontent-%COMP%]{height:30px}"]})}}return e})();var UIe=["modalTemplate"];function jIe(e,t){if(e&1&&he(0,"app-transaction-form",6),e&2){let n=Se();ue("transactionType",n.transactionType)}}var jY=(()=>{class e{constructor(n){this.ngbModal=n,this.transactionType="income"}openModal(n){this.transactionType=n,this.ngbModal.open(this.modalTemplate,{centered:!0,fullscreen:"sm"})}static{this.\u0275fac=function(i){return new(i||e)(J(em))}}static{this.\u0275cmp=je({type:e,selectors:[["app-transaction-form-buttons"]],viewQuery:function(i,r){if(i&1&&fs(UIe,5),i&2){let o;yo(o=Co())&&(r.modalTemplate=o.first)}},standalone:!0,features:[We],decls:7,vars:0,consts:[["modalTemplate",""],[1,"btn-group"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"bi","bi-plus-circle-fill"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"bi","bi-dash-circle-fill"],[3,"transactionType"]],template:function(i,r){if(i&1){let o=Tt();z(0,"div",1)(1,"button",2),be("click",function(){return Ge(o),He(r.openModal("income"))}),he(2,"i",3),H(),z(3,"button",4),be("click",function(){return Ge(o),He(r.openModal("expense"))}),he(4,"i",5),H()(),Fe(5,jIe,1,1,"ng-template",null,0,tr)}},dependencies:[pD]})}}return e})();function WIe(e,t){e&1&&(z(0,"div"),he(1,"app-loader"),H())}function qIe(e,t){if(e&1){let n=Tt();z(0,"div",18),be("click",function(){Ge(n);let r=Se(2);return He(r.preventCloseOnClick())}),he(1,"app-date-selector"),H()}}function KIe(e,t){if(e&1&&(z(0,"div",19),he(1,"app-stat-card",20),H()),e&2){let n=t.$implicit;Z(),ue("title",n.title)("value",n.value)("percentChange",n.percentChange)("isIncome",n.isIncome)}}function YIe(e,t){if(e&1){let n=Tt();z(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h1",6),ye(5,"Dashboard"),H(),z(6,"div",7)(7,"button",8),be("click",function(){Ge(n);let r=Se();return r.toggleDateSelector(),He(r.preventCloseOnClick())}),he(8,"i",9),H(),Fe(9,qIe,2,0,"div",10),z(10,"div",11),he(11,"app-transaction-form-buttons"),H()()(),z(12,"div",12),Fe(13,KIe,2,4,"div",13),H(),he(14,"app-transaction-table",14),H(),z(15,"div",15),he(16,"app-line-bar-chart",16)(17,"app-line-bar-chart",17),H()()()}if(e&2){let n=Se();Z(9),ue("ngIf",n.showDateSelector),Z(4),ue("ngForOf",n.statCards),Z(),ue("transactions",n.allTransactions)("showFilter",!0),Z(2),ue("data",n.incomeLineBarData)("isIncome",!0),Z(),ue("data",n.expenseLineBarData)("isIncome",!1)}}var WY=(()=>{class e{constructor(n,i,r,o){this.authService=n,this.transactionService=i,this.dateSelectorService=r,this.renderer=o,this.statCards=[{title:"In",value:0,percentChange:0,isIncome:!0},{title:"Out",value:0,percentChange:0,isIncome:!1},{title:"On Hand",value:0,percentChange:0,isIncome:!0}],this.allTransactions=[],this.incomeLineBarData=[],this.expenseLineBarData=[],this.showDateSelector=!1,this.dateSelectorClicked=!1,this.isLoading=!0,this.destroy$=new nt,this.renderer.listen("window","click",s=>{this.dateSelectorClicked||(this.showDateSelector=!1),this.dateSelectorClicked=!1})}ngOnInit(){this.initializeData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeData(){Ar([this.transactionService.expenseTransactions$,this.transactionService.incomeTransactions$,this.dateSelectorService.dateRange$]).pipe(mn(this.destroy$),ae(([n,i,r])=>({expenses:this.filterTransactionsByDateRange(n,r),income:this.filterTransactionsByDateRange(i,r)}))).subscribe(({expenses:n,income:i})=>{this.updateDashboard(n,i),this.showDateSelector=!1,this.isLoading=!1},n=>console.error("Error fetching transactions:",n))}filterTransactionsByDateRange(n,i){if(!i||!i.from||!i.to)return n;let r=new Date(i.to);return r.setHours(23,59,59,999),n.filter(o=>new Date(o.date)>=i.from&&new Date(o.date)<=r)}updateDashboard(n,i){this.updateStatCard(i,0),this.updateStatCard(n,1),this.calculateNetIncome(i,n),this.incomeLineBarData=this.convertTransactionsToLineBarData(i),this.expenseLineBarData=this.convertTransactionsToLineBarData(n),this.allTransactions=this.combineAndSortTransactions(i,n)}updateStatCard(n,i){if(n.length===0){this.statCards[i].value=0,this.statCards[i].percentChange=0;return}this.statCards[i].value=this.aggregateTransactions(n),this.statCards[i].percentChange=this.calculatePercentChange(n[n.length-1].amount,n[0].amount)}calculateNetIncome(n,i){let r=this.aggregateTransactions(n),o=this.aggregateTransactions(i),s=r-o,a=n.length>0?n[0].amount:0,l=i.length>0?i[0].amount:0,c=a-l;this.statCards[2].value=s,this.statCards[2].percentChange=this.calculatePercentChange(s,c)}aggregateTransactions(n){return Math.round(n.reduce((i,r)=>i+r.amount,0))}calculatePercentChange(n,i){return i!==0?(n-i)/Math.abs(i)*100:0}convertTransactionsToLineBarData(n){return n.map(i=>({tag:i.tagIds[0],value:[new Date(i.date).getTime(),i.amount],title:i.title}))}combineAndSortTransactions(n,i){return[...n,...i].sort((r,o)=>new Date(o.date).getTime()-new Date(r.date).getTime())}toggleDateSelector(){this.showDateSelector=!this.showDateSelector}preventCloseOnClick(){this.dateSelectorClicked=!0}static{this.\u0275fac=function(i){return new(i||e)(J(bo),J(Yu),J(tm),J(Lr))}}static{this.\u0275cmp=je({type:e,selectors:[["app-dashboard-page"]],standalone:!0,features:[We],decls:3,vars:2,consts:[["content",""],[4,"ngIf","ngIfElse"],[1,"container-fluid","d-flex","justify-content-center"],[1,"mt-2","row","d-flex","justify-content-center"],[1,"row","col-12","col-lg-6"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-start","fw-bold"],[1,"row","d-flex","justify-content-between","align-items-center"],[1,"d-none","d-md-block","col","btn-warning","btn","btn-sm",2,"{width","20px}",3,"click"],[1,"bi","bi-calendar-fill"],["class","d-none d-md-block date-selector-container d-flex justify-content-center align-items-center position-absolute",3,"click",4,"ngIf"],[1,"col"],[1,"row","mb-3"],["class","col-6 col-xl-4 mb-2 mx-auto mx-xl-0",4,"ngFor","ngForOf"],[3,"transactions","showFilter"],[1,"row","col-12","col-lg-6","mt-3","mt-lg-0","mx-lg-2"],["title","Total Ins","percentChangeMessage","Previous gains:",1,"mb-3",3,"data","isIncome"],["title","Total Outs","percentChangeMessage","Previous dip:",3,"data","isIncome"],[1,"d-none","d-md-block","date-selector-container","d-flex","justify-content-center","align-items-center","position-absolute",3,"click"],[1,"col-6","col-xl-4","mb-2","mx-auto","mx-xl-0"],[3,"title","value","percentChange","isIncome"]],template:function(i,r){if(i&1&&Fe(0,WIe,2,0,"div",1)(1,YIe,18,8,"ng-template",null,0,tr),i&2){let o=Ka(2);ue("ngIf",r.isLoading)("ngIfElse",o)}},dependencies:[_n,gs,Gi,tq,nq,D_,UY,jY,Dx]})}}return e})();var qY=(()=>{class e{constructor(n){this.router=n,this.router.navigate(["/login"])}static{this.\u0275fac=function(i){return new(i||e)(J(pi))}}static{this.\u0275cmp=je({type:e,selectors:[["app-landing-page"]],standalone:!0,features:[We],decls:2,vars:0,template:function(i,r){i&1&&(z(0,"p"),ye(1,"landing-page works!"),H())}})}}return e})();var EN=function(e,t){return EN=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)i.hasOwnProperty(r)&&(n[r]=i[r])},EN(e,t)};function W(e,t){EN(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var Xe=function(){return Xe=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},Xe.apply(this,arguments)};function KY(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n}function Ae(e,t,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(i.next(u))}catch(d){s(d)}}function l(u){try{c(i.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):r(u.value).then(a,l)}c((i=i.apply(e,t||[])).next())})}function Me(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,r,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,r&&(o=c[0]&2?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,r=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(u){c=[6,u],r=0}finally{i=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function ut(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),r=0,t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}var ym="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xC=new Uint8Array(256);for(EC=0;EC<ym.length;EC++)xC[ym.charCodeAt(EC)]=EC;var EC,QY=function(e){for(var t="",n=e.length,i=0;i<n;i+=3)t+=ym[e[i]>>2],t+=ym[(e[i]&3)<<4|e[i+1]>>4],t+=ym[(e[i+1]&15)<<2|e[i+2]>>6],t+=ym[e[i+2]&63];return n%3===2?t=t.substring(0,t.length-1)+"=":n%3===1&&(t=t.substring(0,t.length-2)+"=="),t},YY=function(e){var t=e.length*.75,n=e.length,i,r=0,o,s,a,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var c=new Uint8Array(t);for(i=0;i<n;i+=4)o=xC[e.charCodeAt(i)],s=xC[e.charCodeAt(i+1)],a=xC[e.charCodeAt(i+2)],l=xC[e.charCodeAt(i+3)],c[r++]=o<<2|s>>4,c[r++]=(s&15)<<4|a>>2,c[r++]=(a&3)<<6|l&63;return c},QIe=/^(data)?:?([\w\/\+]+)?;?(charset=[\w-]+|base64)?.*,/i,XY=function(e){var t=e.trim(),n=t.substring(0,100),i=n.match(QIe);if(!i)return YY(t);var r=i[0],o=t.substring(r.length);return YY(o)};var Je=function(e){return e.charCodeAt(0)},$Y=function(e){return e.codePointAt(0)},Cc=function(e,t){return ns(e.toString(16),t,"0").toUpperCase()},Qu=function(e){return Cc(e,2)},ts=function(e){return String.fromCharCode(e)},ZY=function(e){return ts(parseInt(e,16))},ns=function(e,t,n){for(var i="",r=0,o=t-e.length;r<o;r++)i+=n;return i+e},sn=function(e,t,n){for(var i=e.length,r=0;r<i;r++)t[n++]=e.charCodeAt(r);return i};var XIe=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},af=function(e){return e.replace(/\t|\u0085|\u2028|\u2029/g,"    ").replace(/[\b\v]/g,"")},$Ie=["\\n","\\f","\\r","\\u000B"];var JY=function(e){return/^[\n\f\r\u000B]$/.test(e)},gD=function(e){return e.split(/[\n\f\r\u000B]/)},xN=function(e){return e.replace(/[\n\f\r\u000B]/g," ")},DN=function(e,t){var n=e.charCodeAt(t),i,r=t+1,o=1;return n>=55296&&n<=56319&&e.length>r&&(i=e.charCodeAt(r),i>=56320&&i<=57343&&(o=2)),[e.slice(t,t+o),o]},eQ=function(e){for(var t=[],n=0,i=e.length;n<i;){var r=DN(e,n),o=r[0],s=r[1];t.push(o),n+=s}return t},ZIe=function(e){for(var t=$Ie.join("|"),n=["$"],i=0,r=e.length;i<r;i++){var o=e[i];if(JY(o))throw new TypeError("`wordBreak` must not include "+t);n.push(o===""?".":XIe(o))}var s=n.join("|");return new RegExp("("+t+")|((.*?)("+s+"))","gm")},tQ=function(e,t,n,i){for(var r=ZIe(t),o=af(e).match(r),s="",a=0,l=[],c=function(){s!==""&&l.push(s),s="",a=0},u=0,d=o.length;u<d;u++){var h=o[u];if(JY(h))c();else{var p=i(h);a+p>n&&c(),s+=h,a+=p}}return c(),l},JIe=/^D:(\d\d\d\d)(\d\d)?(\d\d)?(\d\d)?(\d\d)?(\d\d)?([+\-Z])?(\d\d)?'?(\d\d)?'?$/,mD=function(e){var t=e.match(JIe);if(t){var n=t[1],i=t[2],r=i===void 0?"01":i,o=t[3],s=o===void 0?"01":o,a=t[4],l=a===void 0?"00":a,c=t[5],u=c===void 0?"00":c,d=t[6],h=d===void 0?"00":d,p=t[7],g=p===void 0?"Z":p,m=t[8],v=m===void 0?"00":m,C=t[9],S=C===void 0?"00":C,_=g==="Z"?"Z":""+g+v+":"+S,D=new Date(n+"-"+r+"-"+s+"T"+l+":"+u+":"+h+_);return D}},DC=function(e,t){for(var n,i=0,r;i<e.length;){var o=e.substring(i).match(t);if(!o)return{match:r,pos:i};r=o,i+=((n=o.index)!==null&&n!==void 0?n:0)+o[0].length}return{match:r,pos:i}};var Cm=function(e){return e[e.length-1]},vD=function(e){if(e instanceof Uint8Array)return e;for(var t=e.length,n=new Uint8Array(t),i=0;i<t;i++)n[i]=e.charCodeAt(i);return n},nQ=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e.length,i=[],r=0;r<n;r++){var o=e[r];i[r]=o instanceof Uint8Array?o:vD(o)}for(var s=0,r=0;r<n;r++)s+=e[r].length;for(var a=new Uint8Array(s),l=0,c=0;c<n;c++)for(var u=i[c],d=0,h=u.length;d<h;d++)a[l++]=u[d];return a},iQ=function(e){for(var t=0,n=0,i=e.length;n<i;n++)t+=e[n].length;for(var r=new Uint8Array(t),o=0,n=0,i=e.length;n<i;n++){var s=e[n];r.set(s,o),o+=s.length}return r},yD=function(e){for(var t="",n=0,i=e.length;n<i;n++)t+=ts(e[n]);return t},rQ=function(e,t){return e.id-t.id},oQ=function(e,t){for(var n=[],i=0,r=e.length;i<r;i++){var o=e[i],s=e[i-1];(i===0||t(o)!==t(s))&&n.push(o)}return n},lf=function(e){for(var t=e.length,n=0,i=Math.floor(t/2);n<i;n++){var r=n,o=t-n-1,s=e[n];e[r]=e[o],e[o]=s}return e},sQ=function(e){for(var t=0,n=0,i=e.length;n<i;n++)t+=e[n];return t},aQ=function(e,t){for(var n=new Array(t-e),i=0,r=n.length;i<r;i++)n[i]=e+i;return n},lQ=function(e,t){for(var n=new Array(t.length),i=0,r=t.length;i<r;i++)n[i]=e[t[i]];return n},cQ=function(e){return e instanceof Uint8Array||e instanceof ArrayBuffer||typeof e=="string"},wm=function(e){if(typeof e=="string")return XY(e);if(e instanceof ArrayBuffer)return new Uint8Array(e);if(e instanceof Uint8Array)return e;throw new TypeError("`input` must be one of `string | ArrayBuffer | Uint8Array`")};var pl=function(){return new Promise(function(e){setTimeout(function(){return e()},0)})};var hQ=function(e,t){t===void 0&&(t=!0);var n=[];t&&n.push(65279);for(var i=0,r=e.length;i<r;){var o=e.codePointAt(i);if(o<65536)n.push(o),i+=1;else if(o<1114112)n.push(TN(o),RN(o)),i+=2;else throw new Error("Invalid code point: 0x"+Qu(o))}return new Uint16Array(n)},fQ=function(e){return e>=0&&e<=65535},pQ=function(e){return e>=65536&&e<=1114111},TN=function(e){return Math.floor((e-65536)/1024)+55296},RN=function(e){return(e-65536)%1024+56320},cf=function(e){return e.BigEndian="BigEndian",e.LittleEndian="LittleEndian",e}(cf||{}),TC="\uFFFD".codePointAt(0),CD=function(e,t){if(t===void 0&&(t=!0),e.length<=1)return String.fromCodePoint(TC);for(var n=t?tFe(e):cf.BigEndian,i=t?2:0,r=[];e.length-i>=2;){var o=dQ(e[i++],e[i++],n);if(eFe(o))if(e.length-i<2)r.push(TC);else{var s=dQ(e[i++],e[i++],n);uQ(s)?r.push(o,s):r.push(TC)}else uQ(o)?(i+=2,r.push(TC)):r.push(o)}return i<e.length&&r.push(TC),String.fromCodePoint.apply(String,r)},eFe=function(e){return e>=55296&&e<=56319},uQ=function(e){return e>=56320&&e<=57343},dQ=function(e,t,n){if(n===cf.LittleEndian)return t<<8|e;if(n===cf.BigEndian)return e<<8|t;throw new Error("Invalid byteOrder: "+n)},tFe=function(e){return gQ(e)?cf.BigEndian:mQ(e)?cf.LittleEndian:cf.BigEndian},gQ=function(e){return e[0]===254&&e[1]===255},mQ=function(e){return e[0]===255&&e[1]===254},wD=function(e){return gQ(e)||mQ(e)};var vQ=function(e){var t=String(e);if(Math.abs(e)<1){var n=parseInt(e.toString().split("e-")[1]);if(n){var i=e<0;i&&(e*=-1),e*=Math.pow(10,n-1),t="0."+new Array(n).join("0")+e.toString().substring(2),i&&(t="-"+t)}}else{var n=parseInt(e.toString().split("+")[1]);n>20&&(n-=20,e/=Math.pow(10,n),t=e.toString()+new Array(n+1).join("0"))}return t},RC=function(e){return Math.ceil(e.toString(2).length/8)},uf=function(e){for(var t=new Uint8Array(RC(e)),n=1;n<=t.length;n++)t[n-1]=e>>(t.length-n)*8;return t};var df=function(e){throw new Error(e)};var o$=Mb(WC()),r$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",KC=new Uint8Array(256);for(qC=0;qC<r$.length;qC++)KC[r$.charCodeAt(qC)]=qC;var qC,YAe=function(e){var t=e.length*.75,n=e.length,i,r=0,o,s,a,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var c=new Uint8Array(t);for(i=0;i<n;i+=4)o=KC[e.charCodeAt(i)],s=KC[e.charCodeAt(i+1)],a=KC[e.charCodeAt(i+2)],l=KC[e.charCodeAt(i+3)],c[r++]=o<<2|s>>4,c[r++]=(s&15)<<4|a>>2,c[r++]=(a&3)<<6|l&63;return c},QAe=function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},LD=function(e){return QAe(o$.default.inflate(YAe(e)))},s$=function(e,t,n){for(var i="",r=0,o=t-e.length;r<o;r++)i+=n;return i+e};var a$="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";var l$="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";var c$="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";var u$="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";var d$="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";var h$="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";var f$="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";var p$="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";var g$="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";var m$="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";var v$="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";var y$="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";var C$="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";var w$="eJxtmNtu20YQhl+F4FULyMGeD7pz3AY1ChtG7NpFA18w1NomIlECSRcxgrx7SVk7+wOdG8H5OJydf2Z2d5gf9cV+t0v9VK/r+6vXsXlOlbHe28paq229qj/t++m62aXZ4J/m8PRb1z9/baZxefK63Z6eXN5dVMvTCh83u277xr/6kLrnl2XNq7TpXnczuZyabdee98/b2VzM/x4/dd/T5qab2pd6PQ2vaVVfvDRD005puE3Lu7eH1HbN9hTjx4/77/X6y5lcnUmjVzHIVVDicVX/1W/SsO36dLMfu6nb9/X6TAoBD+5euvZbn8axXtuZ36dhPJrVQqgPQoh5hev91LWLkIv94W1Ygq9+aX+tZAx2tfz64284/sblN/rqfLP/mqrbt3FKu7G67Nv9cNgPzZQ2H6rz7bb6vLgZq89pTMO/M/xfEqturJpqSM/d7GJIm2oamk3aNcO3av80O5xh3yyKmm1193ZIT02bqovTKjP+MAf++7zsZvZ3276kYyWWXB0z99S18/PbafPHQ71W4fjn/fxnFO+ZvkrT0LVzTr78qB/+nk38bHM9exgP8zr1z9U7jt6840YW5uSJKcZOCaBBnKgm5mU8MVNYyMwWFvO7Ukagkmgg6sDWQ5yFFqjzUrLEaQ3BEmiwNsMSaZS0vgWfOkPHWQowNeTUc0kumnxZvsgPxlGai6VTGUqAVCTQ6QkWnc77DKEiLktSUBJKqHIQZ86d8gCpHYoiEzMsb1ubYy8vW50DChB5ZhGqrijD0EqUIeiaEHIfCg5Kpuu0ApiToaGPSY0uaQsyr65L2oKi1yFt1PLaQ3lzfXTgXodGoJYzglndSLDMPg1sTPJpQJHJigw0QrGERqD9YhyTOgONQDUyuF1zaxuokc/BW2ztXCMrGZ9WMW1oQZHIXWNBkSCfRZEL5BMUiZw6CzVSFCfUSGZFNjIldoKDkonTKQiJIGzWmFd3BizJJ9SINoLDriOfUCOZS+zg+KGD1qGiLNMLxtJD1/ns00ON6EzyUCM6vbxhoBKaqbG3DFQCNiL1iHccBPV0DHhQH/JW8EW90dkyFKGywCJU0WkVSvSGeiSUODWFFD0HYdPQVoiRgfPMA+/nnRgiAyNYSjpWNQcNSMrtFCUH4ZIRpSCWocFCSuhCEY6hoUClc0WC52BJlCYYLQdhN+hygRRRlo5BKRRLS6oihSqh+ZzzRGG1Mo4Iz1LoP0qsxDGFzk0JE42ji0jCPejomJKCuwil4m5CiRMEUMVSzVLDUstSx1Juc0oVWMpqY295qVltmtWmWW2a1aZZbZrVplltmtWmWW2G1WZYbYbVZlhthtVmWG2G1WZYbYbVZlhtltVmWW2W1WZZbZbVZlltltVmWW2W1QYjQCh7E2aAQHeGhCFgPoNoy8KNb2wxBhmGKBxoUZXlLGsLI6AsftEDHV0wIURVbANLcTKlGGBIKPOAxCmhePCKUwFzAmpDFRQvjA9R06Hq8TONvshgKDCuRAZTXigUxjxNFfKRo3CLhnIJBMFRvMZpqpNBMlQJzGT5WFQMVQI/AikPMIhEU1aDjqJvQwmjSHB05cC9jbYwc5UtAHNLhDw41ha+lEqF4JaH3gmB61SYcqInxTDmQK8v08vjqv4zDf1N0w3Lf4A8/vwPpfK11w==";var uMe={Courier:u$,"Courier-Bold":a$,"Courier-Oblique":c$,"Courier-BoldOblique":l$,Helvetica:p$,"Helvetica-Bold":d$,"Helvetica-Oblique":f$,"Helvetica-BoldOblique":h$,"Times-Roman":y$,"Times-Bold":g$,"Times-Italic":v$,"Times-BoldItalic":m$,Symbol:C$,ZapfDingbats:w$},Am=function(e){return e.Courier="Courier",e.CourierBold="Courier-Bold",e.CourierOblique="Courier-Oblique",e.CourierBoldOblique="Courier-BoldOblique",e.Helvetica="Helvetica",e.HelveticaBold="Helvetica-Bold",e.HelveticaOblique="Helvetica-Oblique",e.HelveticaBoldOblique="Helvetica-BoldOblique",e.TimesRoman="Times-Roman",e.TimesRomanBold="Times-Bold",e.TimesRomanItalic="Times-Italic",e.TimesRomanBoldItalic="Times-BoldItalic",e.Symbol="Symbol",e.ZapfDingbats="ZapfDingbats",e}(Am||{}),b$={},S$=function(){function e(){var t=this;this.getWidthOfGlyph=function(n){return t.CharWidths[n]},this.getXAxisKerningForPair=function(n,i){return(t.KernPairXAmounts[n]||{})[i]}}return e.load=function(t){var n=b$[t];if(n)return n;var i=LD(uMe[t]),r=Object.assign(new e,JSON.parse(i));return r.CharWidths=r.CharMetrics.reduce(function(o,s){return o[s.N]=s.WX,o},{}),r.KernPairXAmounts=r.KernPairs.reduce(function(o,s){var a=s[0],l=s[1],c=s[2];return o[a]||(o[a]={}),o[a][l]=c,o},{}),b$[t]=r,r},e}();var _$="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";var hMe=LD(_$),cL=JSON.parse(hMe),uL=function(){function e(t,n){var i=this;this.canEncodeUnicodeCodePoint=function(r){return r in i.unicodeMappings},this.encodeUnicodeCodePoint=function(r){var o=i.unicodeMappings[r];if(!o){var s=String.fromCharCode(r),a="0x"+s$(r.toString(16),4,"0"),l=i.name+' cannot encode "'+s+'" ('+a+")";throw new Error(l)}return{code:o[0],name:o[1]}},this.name=t,this.supportedCodePoints=Object.keys(n).map(Number).sort(function(r,o){return r-o}),this.unicodeMappings=n}return e}(),YC={Symbol:new uL("Symbol",cL.symbol),ZapfDingbats:new uL("ZapfDingbats",cL.zapfdingbats),WinAnsi:new uL("WinAnsi",cL.win1252)};var QC=function(e){return Object.keys(e).map(function(t){return e[t]})},fMe=QC(Am),dL=function(e){return fMe.includes(e)},XC=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height};var ki=function(e){return"`"+e+"`"},pMe=function(e){return"'"+e+"'"},E$=function(e){var t=typeof e;return t==="string"?pMe(e):t==="undefined"?ki(e):e},gMe=function(e,t,n){for(var i=new Array(n.length),r=0,o=n.length;r<o;r++){var s=n[r];i[r]=E$(s)}var a=i.join(" or ");return ki(t)+" must be one of "+a+", but was actually "+E$(e)},_a=function(e,t,n){Array.isArray(n)||(n=QC(n));for(var i=0,r=n.length;i<r;i++)if(e===n[i])return;throw new TypeError(gMe(e,t,n))},To=function(e,t,n){Array.isArray(n)||(n=QC(n)),_a(e,t,n.concat(void 0))},x$=function(e,t,n){Array.isArray(n)||(n=QC(n));for(var i=0,r=e.length;i<r;i++)_a(e[i],t,n)},mMe=function(e){return e===null?"null":e===void 0?"undefined":typeof e=="string"?"string":isNaN(e)?"NaN":typeof e=="number"?"number":typeof e=="boolean"?"boolean":typeof e=="symbol"?"symbol":typeof e=="bigint"?"bigint":e.constructor&&e.constructor.name?e.constructor.name:e.name?e.name:e.constructor?String(e.constructor):String(e)},vMe=function(e,t){return t==="null"?e===null:t==="undefined"?e===void 0:t==="string"?typeof e=="string":t==="number"?typeof e=="number"&&!isNaN(e):t==="boolean"?typeof e=="boolean":t==="symbol"?typeof e=="symbol":t==="bigint"?typeof e=="bigint":t===Date?e instanceof Date:t===Array?e instanceof Array:t===Uint8Array?e instanceof Uint8Array:t===ArrayBuffer?e instanceof ArrayBuffer:t===Function?e instanceof Function:e instanceof t[0]},yMe=function(e,t,n){for(var i=new Array(n.length),r=0,o=n.length;r<o;r++){var s=n[r];s==="null"&&(i[r]=ki("null")),s==="undefined"&&(i[r]=ki("undefined")),s==="string"?i[r]=ki("string"):s==="number"?i[r]=ki("number"):s==="boolean"?i[r]=ki("boolean"):s==="symbol"?i[r]=ki("symbol"):s==="bigint"?i[r]=ki("bigint"):s===Array?i[r]=ki("Array"):s===Uint8Array?i[r]=ki("Uint8Array"):s===ArrayBuffer?i[r]=ki("ArrayBuffer"):i[r]=ki(s[1])}var a=i.join(" or ");return ki(t)+" must be of type "+a+", but was actually of type "+ki(mMe(e))},L=function(e,t,n){for(var i=0,r=n.length;i<r;i++)if(vMe(e,n[i]))return;throw new TypeError(yMe(e,t,n))},ie=function(e,t,n){L(e,t,n.concat("undefined"))},VD=function(e,t,n){for(var i=0,r=e.length;i<r;i++)L(e[i],t,n)},Sr=function(e,t,n,i){if(L(e,t,["number"]),L(n,"min",["number"]),L(i,"max",["number"]),i=Math.max(n,i),e<n||e>i)throw new Error(ki(t)+" must be at least "+n+" and at most "+i+", but was actually "+e)},rs=function(e,t,n,i){L(e,t,["number","undefined"]),typeof e=="number"&&Sr(e,t,n,i)},BD=function(e,t,n){if(L(e,t,["number"]),e%n!==0)throw new Error(ki(t)+" must be a multiple of "+n+", but was actually "+e)},D$=function(e,t){if(!Number.isInteger(e))throw new Error(ki(t)+" must be an integer, but was actually "+e)},nd=function(e,t){if(![1,0].includes(Math.sign(e)))throw new Error(ki(t)+" must be a positive number or 0, but was actually "+e)};var ot=new Uint16Array(256);for($C=0;$C<256;$C++)ot[$C]=$C;var $C;ot[22]=Je("");ot[24]=Je("\u02D8");ot[25]=Je("\u02C7");ot[26]=Je("\u02C6");ot[27]=Je("\u02D9");ot[28]=Je("\u02DD");ot[29]=Je("\u02DB");ot[30]=Je("\u02DA");ot[31]=Je("\u02DC");ot[127]=Je("\uFFFD");ot[128]=Je("\u2022");ot[129]=Je("\u2020");ot[130]=Je("\u2021");ot[131]=Je("\u2026");ot[132]=Je("\u2014");ot[133]=Je("\u2013");ot[134]=Je("\u0192");ot[135]=Je("\u2044");ot[136]=Je("\u2039");ot[137]=Je("\u203A");ot[138]=Je("\u2212");ot[139]=Je("\u2030");ot[140]=Je("\u201E");ot[141]=Je("\u201C");ot[142]=Je("\u201D");ot[143]=Je("\u2018");ot[144]=Je("\u2019");ot[145]=Je("\u201A");ot[146]=Je("\u2122");ot[147]=Je("\uFB01");ot[148]=Je("\uFB02");ot[149]=Je("\u0141");ot[150]=Je("\u0152");ot[151]=Je("\u0160");ot[152]=Je("\u0178");ot[153]=Je("\u017D");ot[154]=Je("\u0131");ot[155]=Je("\u0142");ot[156]=Je("\u0153");ot[157]=Je("\u0161");ot[158]=Je("\u017E");ot[159]=Je("\uFFFD");ot[160]=Je("\u20AC");ot[173]=Je("\uFFFD");var GD=function(e){for(var t=new Array(e.length),n=0,i=e.length;n<i;n++)t[n]=ot[e[n]];return String.fromCodePoint.apply(String,t)};var CMe=function(){function e(t){this.populate=t,this.value=void 0}return e.prototype.getValue=function(){return this.value},e.prototype.access=function(){return this.value||(this.value=this.populate()),this.value},e.prototype.invalidate=function(){this.value=void 0},e.populatedBy=function(t){return new e(t)},e}(),_r=CMe;var ur=function(e){W(t,e);function t(n,i){var r=this,o="Method "+n+"."+i+"() not implemented";return r=e.call(this,o)||this,r}return t}(Error);var Mm=function(e){W(t,e);function t(n){var i=this,r="Cannot construct "+n+" - it has a private constructor";return i=e.call(this,r)||this,i}return t}(Error);var wf=function(e){W(t,e);function t(n,i){var r=this,o=function(l){var c,u;return(c=l?.name)!==null&&c!==void 0?c:(u=l?.constructor)===null||u===void 0?void 0:u.name},s=Array.isArray(n)?n.map(o):[o(n)],a="Expected instance of "+s.join(" or ")+", "+("but got instance of "+(i&&o(i)));return r=e.call(this,a)||this,r}return t}(Error);var T$=function(e){W(t,e);function t(n){var i=this,r=n+" stream encoding not supported";return i=e.call(this,r)||this,i}return t}(Error);var Pm=function(e){W(t,e);function t(n,i){var r=this,o="Cannot call "+n+"."+i+"() more than once";return r=e.call(this,o)||this,r}return t}(Error);var oat=function(e){W(t,e);function t(n){var i=this,r="Missing catalog (ref="+n+")";return i=e.call(this,r)||this,i}return t}(Error);var R$=function(e){W(t,e);function t(){var n=this,i="Can't embed page with missing Contents";return n=e.call(this,i)||this,n}return t}(Error);var I$=function(e){W(t,e);function t(n){var i,r,o,s=this,a=(o=(r=(i=n?.contructor)===null||i===void 0?void 0:i.name)!==null&&r!==void 0?r:n?.name)!==null&&o!==void 0?o:n,l="Unrecognized stream type: "+a;return s=e.call(this,l)||this,s}return t}(Error);var F$=function(e){W(t,e);function t(){var n=this,i="Found mismatched contexts while embedding pages. All pages in the array passed to `PDFDocument.embedPages()` must be from the same document.";return n=e.call(this,i)||this,n}return t}(Error);var A$=function(e){W(t,e);function t(n){var i=this,r="Attempted to convert PDFArray with "+n+" elements to rectangle, but must have exactly 4 elements.";return i=e.call(this,r)||this,i}return t}(Error);var HD=function(e){W(t,e);function t(n){var i=this,r='Attempted to convert "'+n+'" to a date, but it does not match the PDF date string format.';return i=e.call(this,r)||this,i}return t}(Error);var hL=function(e){W(t,e);function t(n,i){var r=this,o="Invalid targetIndex specified: targetIndex="+n+" must be less than Count="+i;return r=e.call(this,o)||this,r}return t}(Error);var fL=function(e){W(t,e);function t(n,i){var r=this,o="Failed to "+i+" at targetIndex="+n+" due to corrupt page tree: It is likely that one or more 'Count' entries are invalid";return r=e.call(this,o)||this,r}return t}(Error);var km=function(e){W(t,e);function t(n,i,r){var o=this,s="index should be at least "+i+" and at most "+r+", but was actually "+n;return o=e.call(this,s)||this,o}return t}(Error);var Om=function(e){W(t,e);function t(){var n=this,i="Attempted to set invalid field value";return n=e.call(this,i)||this,n}return t}(Error);var M$=function(e){W(t,e);function t(){var n=this,i="Attempted to select multiple values for single-select field";return n=e.call(this,i)||this,n}return t}(Error);var P$=function(e){W(t,e);function t(n){var i=this,r="No /DA (default appearance) entry found for field: "+n;return i=e.call(this,r)||this,i}return t}(Error);var k$=function(e){W(t,e);function t(n){var i=this,r="No Tf operator found for DA of field: "+n;return i=e.call(this,r)||this,i}return t}(Error);var pL=function(e){W(t,e);function t(n,i){var r=this,o="Failed to parse number "+("(line:"+n.line+" col:"+n.column+" offset="+n.offset+'): "'+i+'"');return r=e.call(this,o)||this,r}return t}(Error);var id=function(e){W(t,e);function t(n,i){var r=this,o="Failed to parse PDF document "+("(line:"+n.line+" col:"+n.column+" offset="+n.offset+"): "+i);return r=e.call(this,o)||this,r}return t}(Error);var O$=function(e){W(t,e);function t(n,i,r){var o=this,s="Expected next byte to be "+i+" but it was actually "+r;return o=e.call(this,n,s)||this,o}return t}(id);var N$=function(e){W(t,e);function t(n,i){var r=this,o="Failed to parse PDF object starting with the following byte: "+i;return r=e.call(this,n,o)||this,r}return t}(id);var L$=function(e){W(t,e);function t(n){var i=this,r="Failed to parse invalid PDF object";return i=e.call(this,n,r)||this,i}return t}(id);var V$=function(e){W(t,e);function t(n){var i=this,r="Failed to parse PDF stream";return i=e.call(this,n,r)||this,i}return t}(id);var B$=function(e){W(t,e);function t(n){var i=this,r="Failed to parse PDF literal string due to unbalanced parenthesis";return i=e.call(this,n,r)||this,i}return t}(id);var G$=function(e){W(t,e);function t(n){var i=this,r="Parser stalled";return i=e.call(this,n,r)||this,i}return t}(id);var H$=function(e){W(t,e);function t(n){var i=this,r="No PDF header found";return i=e.call(this,n,r)||this,i}return t}(id);var z$=function(e){W(t,e);function t(n,i){var r=this,o="Did not find expected keyword '"+yD(i)+"'";return r=e.call(this,n,o)||this,r}return t}(id);var U$=function(e){return e[e.Null=0]="Null",e[e.Backspace=8]="Backspace",e[e.Tab=9]="Tab",e[e.Newline=10]="Newline",e[e.FormFeed=12]="FormFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationPoint=33]="ExclamationPoint",e[e.Hash=35]="Hash",e[e.Percent=37]="Percent",e[e.LeftParen=40]="LeftParen",e[e.RightParen=41]="RightParen",e[e.Plus=43]="Plus",e[e.Minus=45]="Minus",e[e.Dash=45]="Dash",e[e.Period=46]="Period",e[e.ForwardSlash=47]="ForwardSlash",e[e.Zero=48]="Zero",e[e.One=49]="One",e[e.Two=50]="Two",e[e.Three=51]="Three",e[e.Four=52]="Four",e[e.Five=53]="Five",e[e.Six=54]="Six",e[e.Seven=55]="Seven",e[e.Eight=56]="Eight",e[e.Nine=57]="Nine",e[e.LessThan=60]="LessThan",e[e.GreaterThan=62]="GreaterThan",e[e.A=65]="A",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.O=79]="O",e[e.P=80]="P",e[e.R=82]="R",e[e.LeftSquareBracket=91]="LeftSquareBracket",e[e.BackSlash=92]="BackSlash",e[e.RightSquareBracket=93]="RightSquareBracket",e[e.a=97]="a",e[e.b=98]="b",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.i=105]="i",e[e.j=106]="j",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.x=120]="x",e[e.LeftCurly=123]="LeftCurly",e[e.RightCurly=125]="RightCurly",e[e.Tilde=126]="Tilde",e}(U$||{}),M=U$;var Z$=Mb(WC());var wMe=function(){function e(t,n){this.major=String(t),this.minor=String(n)}return e.prototype.toString=function(){var t=ts(129);return"%PDF-"+this.major+"."+this.minor+`
%`+t+t+t+t},e.prototype.sizeInBytes=function(){return 12+this.major.length+this.minor.length},e.prototype.copyBytesInto=function(t,n){var i=n;return t[n++]=M.Percent,t[n++]=M.P,t[n++]=M.D,t[n++]=M.F,t[n++]=M.Dash,n+=sn(this.major,t,n),t[n++]=M.Period,n+=sn(this.minor,t,n),t[n++]=M.Newline,t[n++]=M.Percent,t[n++]=129,t[n++]=129,t[n++]=129,t[n++]=129,n-i},e.forVersion=function(t,n){return new e(t,n)},e}(),Ec=wMe;var bMe=function(){function e(){}return e.prototype.clone=function(t){throw new ur(this.constructor.name,"clone")},e.prototype.toString=function(){throw new ur(this.constructor.name,"toString")},e.prototype.sizeInBytes=function(){throw new ur(this.constructor.name,"sizeInBytes")},e.prototype.copyBytesInto=function(t,n){throw new ur(this.constructor.name,"copyBytesInto")},e}(),tn=bMe;var SMe=function(e){W(t,e);function t(n){var i=e.call(this)||this;return i.numberValue=n,i.stringValue=vQ(n),i}return t.prototype.asNumber=function(){return this.numberValue},t.prototype.value=function(){return this.numberValue},t.prototype.clone=function(){return t.of(this.numberValue)},t.prototype.toString=function(){return this.stringValue},t.prototype.sizeInBytes=function(){return this.stringValue.length},t.prototype.copyBytesInto=function(n,i){return i+=sn(this.stringValue,n,i),this.stringValue.length},t.of=function(n){return new t(n)},t}(tn),Ee=SMe;var _Me=function(e){W(t,e);function t(n){var i=e.call(this)||this;return i.array=[],i.context=n,i}return t.prototype.size=function(){return this.array.length},t.prototype.push=function(n){this.array.push(n)},t.prototype.insert=function(n,i){this.array.splice(n,0,i)},t.prototype.indexOf=function(n){var i=this.array.indexOf(n);return i===-1?void 0:i},t.prototype.remove=function(n){this.array.splice(n,1)},t.prototype.set=function(n,i){this.array[n]=i},t.prototype.get=function(n){return this.array[n]},t.prototype.lookupMaybe=function(n){for(var i,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return(i=this.context).lookupMaybe.apply(i,ut([this.get(n)],r))},t.prototype.lookup=function(n){for(var i,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return(i=this.context).lookup.apply(i,ut([this.get(n)],r))},t.prototype.asRectangle=function(){if(this.size()!==4)throw new A$(this.size());var n=this.lookup(0,Ee).asNumber(),i=this.lookup(1,Ee).asNumber(),r=this.lookup(2,Ee).asNumber(),o=this.lookup(3,Ee).asNumber(),s=n,a=i,l=r-n,c=o-i;return{x:s,y:a,width:l,height:c}},t.prototype.asArray=function(){return this.array.slice()},t.prototype.clone=function(n){for(var i=t.withContext(n||this.context),r=0,o=this.size();r<o;r++)i.push(this.array[r]);return i},t.prototype.toString=function(){for(var n="[ ",i=0,r=this.size();i<r;i++)n+=this.get(i).toString(),n+=" ";return n+="]",n},t.prototype.sizeInBytes=function(){for(var n=3,i=0,r=this.size();i<r;i++)n+=this.get(i).sizeInBytes()+1;return n},t.prototype.copyBytesInto=function(n,i){var r=i;n[i++]=M.LeftSquareBracket,n[i++]=M.Space;for(var o=0,s=this.size();o<s;o++)i+=this.get(o).copyBytesInto(n,i),n[i++]=M.Space;return n[i++]=M.RightSquareBracket,i-r},t.prototype.scalePDFNumbers=function(n,i){for(var r=0,o=this.size();r<o;r++){var s=this.lookup(r);if(s instanceof Ee){var a=r%2===0?n:i;this.set(r,Ee.of(s.asNumber()*a))}}},t.withContext=function(n){return new t(n)},t}(tn),Ye=_Me;var gL={},EMe=function(e){W(t,e);function t(n,i){var r=this;if(n!==gL)throw new Mm("PDFBool");return r=e.call(this)||this,r.value=i,r}return t.prototype.asBoolean=function(){return this.value},t.prototype.clone=function(){return this},t.prototype.toString=function(){return String(this.value)},t.prototype.sizeInBytes=function(){return this.value?4:5},t.prototype.copyBytesInto=function(n,i){return this.value?(n[i++]=M.t,n[i++]=M.r,n[i++]=M.u,n[i++]=M.e,4):(n[i++]=M.f,n[i++]=M.a,n[i++]=M.l,n[i++]=M.s,n[i++]=M.e,5)},t.True=new t(gL,!0),t.False=new t(gL,!1),t}(tn),xc=EMe;var Ro=new Uint8Array(256);Ro[M.LeftParen]=1;Ro[M.RightParen]=1;Ro[M.LessThan]=1;Ro[M.GreaterThan]=1;Ro[M.LeftSquareBracket]=1;Ro[M.RightSquareBracket]=1;Ro[M.LeftCurly]=1;Ro[M.RightCurly]=1;Ro[M.ForwardSlash]=1;Ro[M.Percent]=1;var Ns=new Uint8Array(256);Ns[M.Null]=1;Ns[M.Tab]=1;Ns[M.Newline]=1;Ns[M.FormFeed]=1;Ns[M.CarriageReturn]=1;Ns[M.Space]=1;var zD=new Uint8Array(256);for(Nm=0,j$=256;Nm<j$;Nm++)zD[Nm]=Ns[Nm]||Ro[Nm]?1:0;var Nm,j$;zD[M.Hash]=1;var xMe=function(e){return e.replace(/#([\dABCDEF]{2})/g,function(t,n){return ZY(n)})},DMe=function(e){return e>=M.ExclamationPoint&&e<=M.Tilde&&!zD[e]},W$={},q$=new Map,TMe=function(e){W(t,e);function t(n,i){var r=this;if(n!==W$)throw new Mm("PDFName");r=e.call(this)||this;for(var o="/",s=0,a=i.length;s<a;s++){var l=i[s],c=Je(l);o+=DMe(c)?l:"#"+Qu(c)}return r.encodedName=o,r}return t.prototype.asBytes=function(){for(var n=[],i="",r=!1,o=function(d){d!==void 0&&n.push(d),r=!1},s=1,a=this.encodedName.length;s<a;s++){var l=this.encodedName[s],c=Je(l),u=this.encodedName[s+1];r?c>=M.Zero&&c<=M.Nine||c>=M.a&&c<=M.f||c>=M.A&&c<=M.F?(i+=l,(i.length===2||!(u>="0"&&u<="9"||u>="a"&&u<="f"||u>="A"&&u<="F"))&&(o(parseInt(i,16)),i="")):o(c):c===M.Hash?r=!0:o(c)}return new Uint8Array(n)},t.prototype.decodeText=function(){var n=this.asBytes();return String.fromCharCode.apply(String,Array.from(n))},t.prototype.asString=function(){return this.encodedName},t.prototype.value=function(){return this.encodedName},t.prototype.clone=function(){return this},t.prototype.toString=function(){return this.encodedName},t.prototype.sizeInBytes=function(){return this.encodedName.length},t.prototype.copyBytesInto=function(n,i){return i+=sn(this.encodedName,n,i),this.encodedName.length},t.of=function(n){var i=xMe(n),r=q$.get(i);return r||(r=new t(W$,i),q$.set(i,r)),r},t.Length=t.of("Length"),t.FlateDecode=t.of("FlateDecode"),t.Resources=t.of("Resources"),t.Font=t.of("Font"),t.XObject=t.of("XObject"),t.ExtGState=t.of("ExtGState"),t.Contents=t.of("Contents"),t.Type=t.of("Type"),t.Parent=t.of("Parent"),t.MediaBox=t.of("MediaBox"),t.Page=t.of("Page"),t.Annots=t.of("Annots"),t.TrimBox=t.of("TrimBox"),t.ArtBox=t.of("ArtBox"),t.BleedBox=t.of("BleedBox"),t.CropBox=t.of("CropBox"),t.Rotate=t.of("Rotate"),t.Title=t.of("Title"),t.Author=t.of("Author"),t.Subject=t.of("Subject"),t.Creator=t.of("Creator"),t.Keywords=t.of("Keywords"),t.Producer=t.of("Producer"),t.CreationDate=t.of("CreationDate"),t.ModDate=t.of("ModDate"),t}(tn),T=TMe;var RMe=function(e){W(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.asNull=function(){return null},t.prototype.clone=function(){return this},t.prototype.toString=function(){return"null"},t.prototype.sizeInBytes=function(){return 4},t.prototype.copyBytesInto=function(n,i){return n[i++]=M.n,n[i++]=M.u,n[i++]=M.l,n[i++]=M.l,4},t}(tn),Wi=new RMe;var IMe=function(e){W(t,e);function t(n,i){var r=e.call(this)||this;return r.dict=n,r.context=i,r}return t.prototype.keys=function(){return Array.from(this.dict.keys())},t.prototype.values=function(){return Array.from(this.dict.values())},t.prototype.entries=function(){return Array.from(this.dict.entries())},t.prototype.set=function(n,i){this.dict.set(n,i)},t.prototype.get=function(n,i){i===void 0&&(i=!1);var r=this.dict.get(n);if(!(r===Wi&&!i))return r},t.prototype.has=function(n){var i=this.dict.get(n);return i!==void 0&&i!==Wi},t.prototype.lookupMaybe=function(n){for(var i,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var s=r.includes(Wi),a=(i=this.context).lookupMaybe.apply(i,ut([this.get(n,s)],r));if(!(a===Wi&&!s))return a},t.prototype.lookup=function(n){for(var i,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var s=r.includes(Wi),a=(i=this.context).lookup.apply(i,ut([this.get(n,s)],r));if(!(a===Wi&&!s))return a},t.prototype.delete=function(n){return this.dict.delete(n)},t.prototype.asMap=function(){return new Map(this.dict)},t.prototype.uniqueKey=function(n){n===void 0&&(n="");for(var i=this.keys(),r=T.of(this.context.addRandomSuffix(n,10));i.includes(r);)r=T.of(this.context.addRandomSuffix(n,10));return r},t.prototype.clone=function(n){for(var i=t.withContext(n||this.context),r=this.entries(),o=0,s=r.length;o<s;o++){var a=r[o],l=a[0],c=a[1];i.set(l,c)}return i},t.prototype.toString=function(){for(var n=`<<
`,i=this.entries(),r=0,o=i.length;r<o;r++){var s=i[r],a=s[0],l=s[1];n+=a.toString()+" "+l.toString()+`
`}return n+=">>",n},t.prototype.sizeInBytes=function(){for(var n=5,i=this.entries(),r=0,o=i.length;r<o;r++){var s=i[r],a=s[0],l=s[1];n+=a.sizeInBytes()+l.sizeInBytes()+2}return n},t.prototype.copyBytesInto=function(n,i){var r=i;n[i++]=M.LessThan,n[i++]=M.LessThan,n[i++]=M.Newline;for(var o=this.entries(),s=0,a=o.length;s<a;s++){var l=o[s],c=l[0],u=l[1];i+=c.copyBytesInto(n,i),n[i++]=M.Space,i+=u.copyBytesInto(n,i),n[i++]=M.Newline}return n[i++]=M.GreaterThan,n[i++]=M.GreaterThan,i-r},t.withContext=function(n){return new t(new Map,n)},t.fromMapWithContext=function(n,i){return new t(n,i)},t}(tn),Te=IMe;var FMe=function(e){W(t,e);function t(n){var i=e.call(this)||this;return i.dict=n,i}return t.prototype.clone=function(n){throw new ur(this.constructor.name,"clone")},t.prototype.getContentsString=function(){throw new ur(this.constructor.name,"getContentsString")},t.prototype.getContents=function(){throw new ur(this.constructor.name,"getContents")},t.prototype.getContentsSize=function(){throw new ur(this.constructor.name,"getContentsSize")},t.prototype.updateDict=function(){var n=this.getContentsSize();this.dict.set(T.Length,Ee.of(n))},t.prototype.sizeInBytes=function(){return this.updateDict(),this.dict.sizeInBytes()+this.getContentsSize()+18},t.prototype.toString=function(){this.updateDict();var n=this.dict.toString();return n+=`
stream
`,n+=this.getContentsString(),n+=`
endstream`,n},t.prototype.copyBytesInto=function(n,i){this.updateDict();var r=i;i+=this.dict.copyBytesInto(n,i),n[i++]=M.Newline,n[i++]=M.s,n[i++]=M.t,n[i++]=M.r,n[i++]=M.e,n[i++]=M.a,n[i++]=M.m,n[i++]=M.Newline;for(var o=this.getContents(),s=0,a=o.length;s<a;s++)n[i++]=o[s];return n[i++]=M.Newline,n[i++]=M.e,n[i++]=M.n,n[i++]=M.d,n[i++]=M.s,n[i++]=M.t,n[i++]=M.r,n[i++]=M.e,n[i++]=M.a,n[i++]=M.m,i-r},t}(tn),Tn=FMe;var AMe=function(e){W(t,e);function t(n,i){var r=e.call(this,n)||this;return r.contents=i,r}return t.prototype.asUint8Array=function(){return this.contents.slice()},t.prototype.clone=function(n){return t.of(this.dict.clone(n),this.contents.slice())},t.prototype.getContentsString=function(){return yD(this.contents)},t.prototype.getContents=function(){return this.contents},t.prototype.getContentsSize=function(){return this.contents.length},t.of=function(n,i){return new t(n,i)},t}(Tn),wl=AMe;var K$={},Y$=new Map,MMe=function(e){W(t,e);function t(n,i,r){var o=this;if(n!==K$)throw new Mm("PDFRef");return o=e.call(this)||this,o.objectNumber=i,o.generationNumber=r,o.tag=i+" "+r+" R",o}return t.prototype.clone=function(){return this},t.prototype.toString=function(){return this.tag},t.prototype.sizeInBytes=function(){return this.tag.length},t.prototype.copyBytesInto=function(n,i){return i+=sn(this.tag,n,i),this.tag.length},t.of=function(n,i){i===void 0&&(i=0);var r=n+" "+i+" R",o=Y$.get(r);return o||(o=new t(K$,n,i),Y$.set(r,o)),o},t}(tn),$e=MMe;var PMe=function(){function e(t,n){this.name=t,this.args=n||[]}return e.prototype.clone=function(t){for(var n=new Array(this.args.length),i=0,r=n.length;i<r;i++){var o=this.args[i];n[i]=o instanceof tn?o.clone(t):o}return e.of(this.name,n)},e.prototype.toString=function(){for(var t="",n=0,i=this.args.length;n<i;n++)t+=String(this.args[n])+" ";return t+=this.name,t},e.prototype.sizeInBytes=function(){for(var t=0,n=0,i=this.args.length;n<i;n++){var r=this.args[n];t+=(r instanceof tn?r.sizeInBytes():r.length)+1}return t+=this.name.length,t},e.prototype.copyBytesInto=function(t,n){for(var i=n,r=0,o=this.args.length;r<o;r++){var s=this.args[r];s instanceof tn?n+=s.copyBytesInto(t,n):n+=sn(s,t,n),t[n++]=M.Space}return n+=sn(this.name,t,n),n-i},e.of=function(t,n){return new e(t,n)},e}(),mt=PMe;var Q$=function(e){return e.NonStrokingColor="sc",e.NonStrokingColorN="scn",e.NonStrokingColorRgb="rg",e.NonStrokingColorGray="g",e.NonStrokingColorCmyk="k",e.NonStrokingColorspace="cs",e.StrokingColor="SC",e.StrokingColorN="SCN",e.StrokingColorRgb="RG",e.StrokingColorGray="G",e.StrokingColorCmyk="K",e.StrokingColorspace="CS",e.BeginMarkedContentSequence="BDC",e.BeginMarkedContent="BMC",e.EndMarkedContent="EMC",e.MarkedContentPointWithProps="DP",e.MarkedContentPoint="MP",e.DrawObject="Do",e.ConcatTransformationMatrix="cm",e.PopGraphicsState="Q",e.PushGraphicsState="q",e.SetFlatness="i",e.SetGraphicsStateParams="gs",e.SetLineCapStyle="J",e.SetLineDashPattern="d",e.SetLineJoinStyle="j",e.SetLineMiterLimit="M",e.SetLineWidth="w",e.SetTextMatrix="Tm",e.SetRenderingIntent="ri",e.AppendRectangle="re",e.BeginInlineImage="BI",e.BeginInlineImageData="ID",e.EndInlineImage="EI",e.ClipEvenOdd="W*",e.ClipNonZero="W",e.CloseAndStroke="s",e.CloseFillEvenOddAndStroke="b*",e.CloseFillNonZeroAndStroke="b",e.ClosePath="h",e.AppendBezierCurve="c",e.CurveToReplicateFinalPoint="y",e.CurveToReplicateInitialPoint="v",e.EndPath="n",e.FillEvenOddAndStroke="B*",e.FillEvenOdd="f*",e.FillNonZeroAndStroke="B",e.FillNonZero="f",e.LegacyFillNonZero="F",e.LineTo="l",e.MoveTo="m",e.ShadingFill="sh",e.StrokePath="S",e.BeginText="BT",e.EndText="ET",e.MoveText="Td",e.MoveTextSetLeading="TD",e.NextLine="T*",e.SetCharacterSpacing="Tc",e.SetFontAndSize="Tf",e.SetTextHorizontalScaling="Tz",e.SetTextLineHeight="TL",e.SetTextRenderingMode="Tr",e.SetTextRise="Ts",e.SetWordSpacing="Tw",e.ShowText="Tj",e.ShowTextAdjusted="TJ",e.ShowTextLine="'",e.ShowTextLineAndSpace='"',e.Type3D0="d0",e.Type3D1="d1",e.BeginCompatibilitySection="BX",e.EndCompatibilitySection="EX",e}(Q$||{}),_t=Q$;var X$=Mb(WC());var kMe=function(e){W(t,e);function t(n,i){var r=e.call(this,n)||this;return r.computeContents=function(){var o=r.getUnencodedContents();return r.encode?X$.default.deflate(o):o},r.encode=i,i&&n.set(T.of("Filter"),T.of("FlateDecode")),r.contentsCache=_r.populatedBy(r.computeContents),r}return t.prototype.getContents=function(){return this.contentsCache.access()},t.prototype.getContentsSize=function(){return this.contentsCache.access().length},t.prototype.getUnencodedContents=function(){throw new ur(this.constructor.name,"getUnencodedContents")},t}(Tn),bf=kMe;var OMe=function(e){W(t,e);function t(n,i,r){r===void 0&&(r=!0);var o=e.call(this,n,r)||this;return o.operators=i,o}return t.prototype.push=function(){for(var n,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];(n=this.operators).push.apply(n,i)},t.prototype.clone=function(n){for(var i=new Array(this.operators.length),r=0,o=this.operators.length;r<o;r++)i[r]=this.operators[r].clone(n);var s=this,a=s.dict,l=s.encode;return t.of(a.clone(n),i,l)},t.prototype.getContentsString=function(){for(var n="",i=0,r=this.operators.length;i<r;i++)n+=this.operators[i]+`
`;return n},t.prototype.getUnencodedContents=function(){for(var n=new Uint8Array(this.getUnencodedContentsSize()),i=0,r=0,o=this.operators.length;r<o;r++)i+=this.operators[r].copyBytesInto(n,i),n[i++]=M.Newline;return n},t.prototype.getUnencodedContentsSize=function(){for(var n=0,i=0,r=this.operators.length;i<r;i++)n+=this.operators[i].sizeInBytes()+1;return n},t.of=function(n,i,r){return r===void 0&&(r=!0),new t(n,i,r)},t}(bf),Dc=OMe;var $$=function(){function e(t){this.seed=t}return e.prototype.nextInt=function(){var t=Math.sin(this.seed++)*1e4;return t-Math.floor(t)},e.withSeed=function(t){return new e(t)},e}();var NMe=function(e,t){var n=e[0],i=t[0];return n.objectNumber-i.objectNumber},LMe=function(){function e(){this.largestObjectNumber=0,this.header=Ec.forVersion(1,7),this.trailerInfo={},this.indirectObjects=new Map,this.rng=$$.withSeed(1)}return e.prototype.assign=function(t,n){this.indirectObjects.set(t,n),t.objectNumber>this.largestObjectNumber&&(this.largestObjectNumber=t.objectNumber)},e.prototype.nextRef=function(){return this.largestObjectNumber+=1,$e.of(this.largestObjectNumber)},e.prototype.register=function(t){var n=this.nextRef();return this.assign(n,t),n},e.prototype.delete=function(t){return this.indirectObjects.delete(t)},e.prototype.lookupMaybe=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var r=n.includes(Wi),o=t instanceof $e?this.indirectObjects.get(t):t;if(!(!o||o===Wi&&!r)){for(var s=0,a=n.length;s<a;s++){var l=n[s];if(l===Wi){if(o===Wi)return o}else if(o instanceof l)return o}throw new wf(n,o)}},e.prototype.lookup=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var r=t instanceof $e?this.indirectObjects.get(t):t;if(n.length===0)return r;for(var o=0,s=n.length;o<s;o++){var a=n[o];if(a===Wi){if(r===Wi)return r}else if(r instanceof a)return r}throw new wf(n,r)},e.prototype.getObjectRef=function(t){for(var n=Array.from(this.indirectObjects.entries()),i=0,r=n.length;i<r;i++){var o=n[i],s=o[0],a=o[1];if(a===t)return s}},e.prototype.enumerateIndirectObjects=function(){return Array.from(this.indirectObjects.entries()).sort(NMe)},e.prototype.obj=function(t){if(t instanceof tn)return t;if(t==null)return Wi;if(typeof t=="string")return T.of(t);if(typeof t=="number")return Ee.of(t);if(typeof t=="boolean")return t?xc.True:xc.False;if(Array.isArray(t)){for(var n=Ye.withContext(this),i=0,r=t.length;i<r;i++)n.push(this.obj(t[i]));return n}else{for(var o=Te.withContext(this),s=Object.keys(t),i=0,r=s.length;i<r;i++){var a=s[i],l=t[a];l!==void 0&&o.set(T.of(a),this.obj(l))}return o}},e.prototype.stream=function(t,n){return n===void 0&&(n={}),wl.of(this.obj(n),vD(t))},e.prototype.flateStream=function(t,n){return n===void 0&&(n={}),this.stream(Z$.default.deflate(vD(t)),Xe(Xe({},n),{Filter:"FlateDecode"}))},e.prototype.contentStream=function(t,n){return n===void 0&&(n={}),Dc.of(this.obj(n),t)},e.prototype.formXObject=function(t,n){return n===void 0&&(n={}),this.contentStream(t,Xe(Xe({BBox:this.obj([0,0,0,0]),Matrix:this.obj([1,0,0,1,0,0])},n),{Type:"XObject",Subtype:"Form"}))},e.prototype.getPushGraphicsStateContentStream=function(){if(this.pushGraphicsStateContentStreamRef)return this.pushGraphicsStateContentStreamRef;var t=this.obj({}),n=mt.of(_t.PushGraphicsState),i=Dc.of(t,[n]);return this.pushGraphicsStateContentStreamRef=this.register(i),this.pushGraphicsStateContentStreamRef},e.prototype.getPopGraphicsStateContentStream=function(){if(this.popGraphicsStateContentStreamRef)return this.popGraphicsStateContentStreamRef;var t=this.obj({}),n=mt.of(_t.PopGraphicsState),i=Dc.of(t,[n]);return this.popGraphicsStateContentStreamRef=this.register(i),this.popGraphicsStateContentStreamRef},e.prototype.addRandomSuffix=function(t,n){return n===void 0&&(n=4),t+"-"+Math.floor(this.rng.nextInt()*Math.pow(10,n))},e.create=function(){return new e},e}(),Lm=LMe;var VMe=function(e){W(t,e);function t(n,i,r){r===void 0&&(r=!0);var o=e.call(this,n,i)||this;return o.normalized=!1,o.autoNormalizeCTM=r,o}return t.prototype.clone=function(n){for(var i=t.fromMapWithContext(new Map,n||this.context,this.autoNormalizeCTM),r=this.entries(),o=0,s=r.length;o<s;o++){var a=r[o],l=a[0],c=a[1];i.set(l,c)}return i},t.prototype.Parent=function(){return this.lookupMaybe(T.Parent,Te)},t.prototype.Contents=function(){return this.lookup(T.of("Contents"))},t.prototype.Annots=function(){return this.lookupMaybe(T.Annots,Ye)},t.prototype.BleedBox=function(){return this.lookupMaybe(T.BleedBox,Ye)},t.prototype.TrimBox=function(){return this.lookupMaybe(T.TrimBox,Ye)},t.prototype.ArtBox=function(){return this.lookupMaybe(T.ArtBox,Ye)},t.prototype.Resources=function(){var n=this.getInheritableAttribute(T.Resources);return this.context.lookupMaybe(n,Te)},t.prototype.MediaBox=function(){var n=this.getInheritableAttribute(T.MediaBox);return this.context.lookup(n,Ye)},t.prototype.CropBox=function(){var n=this.getInheritableAttribute(T.CropBox);return this.context.lookupMaybe(n,Ye)},t.prototype.Rotate=function(){var n=this.getInheritableAttribute(T.Rotate);return this.context.lookupMaybe(n,Ee)},t.prototype.getInheritableAttribute=function(n){var i;return this.ascend(function(r){i||(i=r.get(n))}),i},t.prototype.setParent=function(n){this.set(T.Parent,n)},t.prototype.addContentStream=function(n){var i=this.normalizedEntries().Contents||this.context.obj([]);this.set(T.Contents,i),i.push(n)},t.prototype.wrapContentStreams=function(n,i){var r=this.Contents();return r instanceof Ye?(r.insert(0,n),r.push(i),!0):!1},t.prototype.addAnnot=function(n){var i=this.normalizedEntries().Annots;i.push(n)},t.prototype.removeAnnot=function(n){var i=this.normalizedEntries().Annots,r=i.indexOf(n);r!==void 0&&i.remove(r)},t.prototype.setFontDictionary=function(n,i){var r=this.normalizedEntries().Font;r.set(n,i)},t.prototype.newFontDictionaryKey=function(n){var i=this.normalizedEntries().Font;return i.uniqueKey(n)},t.prototype.newFontDictionary=function(n,i){var r=this.newFontDictionaryKey(n);return this.setFontDictionary(r,i),r},t.prototype.setXObject=function(n,i){var r=this.normalizedEntries().XObject;r.set(n,i)},t.prototype.newXObjectKey=function(n){var i=this.normalizedEntries().XObject;return i.uniqueKey(n)},t.prototype.newXObject=function(n,i){var r=this.newXObjectKey(n);return this.setXObject(r,i),r},t.prototype.setExtGState=function(n,i){var r=this.normalizedEntries().ExtGState;r.set(n,i)},t.prototype.newExtGStateKey=function(n){var i=this.normalizedEntries().ExtGState;return i.uniqueKey(n)},t.prototype.newExtGState=function(n,i){var r=this.newExtGStateKey(n);return this.setExtGState(r,i),r},t.prototype.ascend=function(n){n(this);var i=this.Parent();i&&i.ascend(n)},t.prototype.normalize=function(){if(!this.normalized){var n=this.context,i=this.get(T.Contents),r=this.context.lookup(i);r instanceof Tn&&this.set(T.Contents,n.obj([i])),this.autoNormalizeCTM&&this.wrapContentStreams(this.context.getPushGraphicsStateContentStream(),this.context.getPopGraphicsStateContentStream());var o=this.getInheritableAttribute(T.Resources),s=n.lookupMaybe(o,Te)||n.obj({});this.set(T.Resources,s);var a=s.lookupMaybe(T.Font,Te)||n.obj({});s.set(T.Font,a);var l=s.lookupMaybe(T.XObject,Te)||n.obj({});s.set(T.XObject,l);var c=s.lookupMaybe(T.ExtGState,Te)||n.obj({});s.set(T.ExtGState,c);var u=this.Annots()||n.obj([]);this.set(T.Annots,u),this.normalized=!0}},t.prototype.normalizedEntries=function(){this.normalize();var n=this.Annots(),i=this.Resources(),r=this.Contents();return{Annots:n,Resources:i,Contents:r,Font:i.lookup(T.Font,Te),XObject:i.lookup(T.XObject,Te),ExtGState:i.lookup(T.ExtGState,Te)}},t.InheritableEntries=["Resources","MediaBox","CropBox","Rotate"],t.withContextAndParent=function(n,i){var r=new Map;return r.set(T.Type,T.Page),r.set(T.Parent,i),r.set(T.Resources,n.obj({})),r.set(T.MediaBox,n.obj([0,0,612,792])),new t(r,n,!1)},t.fromMapWithContext=function(n,i,r){return r===void 0&&(r=!0),new t(n,i,r)},t}(Te),Jr=VMe;var BMe=function(){function e(t,n){var i=this;this.traversedObjects=new Map,this.copy=function(r){return r instanceof Jr?i.copyPDFPage(r):r instanceof Te?i.copyPDFDict(r):r instanceof Ye?i.copyPDFArray(r):r instanceof Tn?i.copyPDFStream(r):r instanceof $e?i.copyPDFIndirectObject(r):r.clone()},this.copyPDFPage=function(r){for(var o=r.clone(),s=Jr.InheritableEntries,a=0,l=s.length;a<l;a++){var c=T.of(s[a]),u=o.getInheritableAttribute(c);!o.get(c)&&u&&o.set(c,u)}return o.delete(T.of("Parent")),i.copyPDFDict(o)},this.copyPDFDict=function(r){if(i.traversedObjects.has(r))return i.traversedObjects.get(r);var o=r.clone(i.dest);i.traversedObjects.set(r,o);for(var s=r.entries(),a=0,l=s.length;a<l;a++){var c=s[a],u=c[0],d=c[1];o.set(u,i.copy(d))}return o},this.copyPDFArray=function(r){if(i.traversedObjects.has(r))return i.traversedObjects.get(r);var o=r.clone(i.dest);i.traversedObjects.set(r,o);for(var s=0,a=r.size();s<a;s++){var l=r.get(s);o.set(s,i.copy(l))}return o},this.copyPDFStream=function(r){if(i.traversedObjects.has(r))return i.traversedObjects.get(r);var o=r.clone(i.dest);i.traversedObjects.set(r,o);for(var s=r.dict.entries(),a=0,l=s.length;a<l;a++){var c=s[a],u=c[0],d=c[1];o.dict.set(u,i.copy(d))}return o},this.copyPDFIndirectObject=function(r){var o=i.traversedObjects.has(r);if(!o){var s=i.dest.nextRef();i.traversedObjects.set(r,s);var a=i.src.lookup(r);if(a){var l=i.copy(a);i.dest.assign(s,l)}}return i.traversedObjects.get(r)},this.src=t,this.dest=n}return e.for=function(t,n){return new e(t,n)},e}(),UD=BMe;var GMe=function(){function e(t){this.subsections=t?[[t]]:[],this.chunkIdx=0,this.chunkLength=t?1:0}return e.prototype.addEntry=function(t,n){this.append({ref:t,offset:n,deleted:!1})},e.prototype.addDeletedEntry=function(t,n){this.append({ref:t,offset:n,deleted:!0})},e.prototype.toString=function(){for(var t=`xref
`,n=0,i=this.subsections.length;n<i;n++){var r=this.subsections[n];t+=r[0].ref.objectNumber+" "+r.length+`
`;for(var o=0,s=r.length;o<s;o++){var a=r[o];t+=ns(String(a.offset),10,"0"),t+=" ",t+=ns(String(a.ref.generationNumber),5,"0"),t+=" ",t+=a.deleted?"f":"n",t+=` 
`}}return t},e.prototype.sizeInBytes=function(){for(var t=5,n=0,i=this.subsections.length;n<i;n++){var r=this.subsections[n],o=r.length,s=r[0];t+=2,t+=String(s.ref.objectNumber).length,t+=String(o).length,t+=20*o}return t},e.prototype.copyBytesInto=function(t,n){var i=n;return t[n++]=M.x,t[n++]=M.r,t[n++]=M.e,t[n++]=M.f,t[n++]=M.Newline,n+=this.copySubsectionsIntoBuffer(this.subsections,t,n),n-i},e.prototype.copySubsectionsIntoBuffer=function(t,n,i){for(var r=i,o=t.length,s=0;s<o;s++){var a=this.subsections[s],l=String(a[0].ref.objectNumber);i+=sn(l,n,i),n[i++]=M.Space;var c=String(a.length);i+=sn(c,n,i),n[i++]=M.Newline,i+=this.copyEntriesIntoBuffer(a,n,i)}return i-r},e.prototype.copyEntriesIntoBuffer=function(t,n,i){for(var r=t.length,o=0;o<r;o++){var s=t[o],a=ns(String(s.offset),10,"0");i+=sn(a,n,i),n[i++]=M.Space;var l=ns(String(s.ref.generationNumber),5,"0");i+=sn(l,n,i),n[i++]=M.Space,n[i++]=s.deleted?M.f:M.n,n[i++]=M.Space,n[i++]=M.Newline}return 20*r},e.prototype.append=function(t){if(this.chunkLength===0){this.subsections.push([t]),this.chunkIdx=0,this.chunkLength=1;return}var n=this.subsections[this.chunkIdx],i=n[this.chunkLength-1];t.ref.objectNumber-i.ref.objectNumber>1?(this.subsections.push([t]),this.chunkIdx+=1,this.chunkLength=1):(n.push(t),this.chunkLength+=1)},e.create=function(){return new e({ref:$e.of(0,65535),offset:0,deleted:!0})},e.createEmpty=function(){return new e},e}(),ZC=GMe;var HMe=function(){function e(t){this.lastXRefOffset=String(t)}return e.prototype.toString=function(){return`startxref
`+this.lastXRefOffset+`
%%EOF`},e.prototype.sizeInBytes=function(){return 16+this.lastXRefOffset.length},e.prototype.copyBytesInto=function(t,n){var i=n;return t[n++]=M.s,t[n++]=M.t,t[n++]=M.a,t[n++]=M.r,t[n++]=M.t,t[n++]=M.x,t[n++]=M.r,t[n++]=M.e,t[n++]=M.f,t[n++]=M.Newline,n+=sn(this.lastXRefOffset,t,n),t[n++]=M.Newline,t[n++]=M.Percent,t[n++]=M.Percent,t[n++]=M.E,t[n++]=M.O,t[n++]=M.F,n-i},e.forLastCrossRefSectionOffset=function(t){return new e(t)},e}(),Sf=HMe;var zMe=function(){function e(t){this.dict=t}return e.prototype.toString=function(){return`trailer
`+this.dict.toString()},e.prototype.sizeInBytes=function(){return 8+this.dict.sizeInBytes()},e.prototype.copyBytesInto=function(t,n){var i=n;return t[n++]=M.t,t[n++]=M.r,t[n++]=M.a,t[n++]=M.i,t[n++]=M.l,t[n++]=M.e,t[n++]=M.r,t[n++]=M.Newline,n+=this.dict.copyBytesInto(t,n),n-i},e.of=function(t){return new e(t)},e}(),mL=zMe;var UMe=function(e){W(t,e);function t(n,i,r){r===void 0&&(r=!0);var o=e.call(this,n.obj({}),r)||this;return o.objects=i,o.offsets=o.computeObjectOffsets(),o.offsetsString=o.computeOffsetsString(),o.dict.set(T.of("Type"),T.of("ObjStm")),o.dict.set(T.of("N"),Ee.of(o.objects.length)),o.dict.set(T.of("First"),Ee.of(o.offsetsString.length)),o}return t.prototype.getObjectsCount=function(){return this.objects.length},t.prototype.clone=function(n){return t.withContextAndObjects(n||this.dict.context,this.objects.slice(),this.encode)},t.prototype.getContentsString=function(){for(var n=this.offsetsString,i=0,r=this.objects.length;i<r;i++){var o=this.objects[i],s=o[1];n+=s+`
`}return n},t.prototype.getUnencodedContents=function(){for(var n=new Uint8Array(this.getUnencodedContentsSize()),i=sn(this.offsetsString,n,0),r=0,o=this.objects.length;r<o;r++){var s=this.objects[r],a=s[1];i+=a.copyBytesInto(n,i),n[i++]=M.Newline}return n},t.prototype.getUnencodedContentsSize=function(){return this.offsetsString.length+Cm(this.offsets)[1]+Cm(this.objects)[1].sizeInBytes()+1},t.prototype.computeOffsetsString=function(){for(var n="",i=0,r=this.offsets.length;i<r;i++){var o=this.offsets[i],s=o[0],a=o[1];n+=s+" "+a+" "}return n},t.prototype.computeObjectOffsets=function(){for(var n=0,i=new Array(this.objects.length),r=0,o=this.objects.length;r<o;r++){var s=this.objects[r],a=s[0],l=s[1];i[r]=[a.objectNumber,n],n+=l.sizeInBytes()+1}return i},t.withContextAndObjects=function(n,i,r){return r===void 0&&(r=!0),new t(n,i,r)},t}(bf),JC=UMe;var jMe=function(){function e(t,n){var i=this;this.parsedObjects=0,this.shouldWaitForTick=function(r){return i.parsedObjects+=r,i.parsedObjects%i.objectsPerTick===0},this.context=t,this.objectsPerTick=n}return e.prototype.serializeToBuffer=function(){return Ae(this,void 0,void 0,function(){var t,n,i,r,o,s,a,l,c,u,d,h,p,g,m,v,C;return Me(this,function(S){switch(S.label){case 0:return[4,this.computeBufferSize()];case 1:t=S.sent(),n=t.size,i=t.header,r=t.indirectObjects,o=t.xref,s=t.trailerDict,a=t.trailer,l=0,c=new Uint8Array(n),l+=i.copyBytesInto(c,l),c[l++]=M.Newline,c[l++]=M.Newline,u=0,d=r.length,S.label=2;case 2:return u<d?(h=r[u],p=h[0],g=h[1],m=String(p.objectNumber),l+=sn(m,c,l),c[l++]=M.Space,v=String(p.generationNumber),l+=sn(v,c,l),c[l++]=M.Space,c[l++]=M.o,c[l++]=M.b,c[l++]=M.j,c[l++]=M.Newline,l+=g.copyBytesInto(c,l),c[l++]=M.Newline,c[l++]=M.e,c[l++]=M.n,c[l++]=M.d,c[l++]=M.o,c[l++]=M.b,c[l++]=M.j,c[l++]=M.Newline,c[l++]=M.Newline,C=g instanceof JC?g.getObjectsCount():1,this.shouldWaitForTick(C)?[4,pl()]:[3,4]):[3,5];case 3:S.sent(),S.label=4;case 4:return u++,[3,2];case 5:return o&&(l+=o.copyBytesInto(c,l),c[l++]=M.Newline),s&&(l+=s.copyBytesInto(c,l),c[l++]=M.Newline,c[l++]=M.Newline),l+=a.copyBytesInto(c,l),[2,c]}})})},e.prototype.computeIndirectObjectSize=function(t){var n=t[0],i=t[1],r=n.sizeInBytes()+3,o=i.sizeInBytes()+9;return r+o},e.prototype.createTrailerDict=function(){return this.context.obj({Size:this.context.largestObjectNumber+1,Root:this.context.trailerInfo.Root,Encrypt:this.context.trailerInfo.Encrypt,Info:this.context.trailerInfo.Info,ID:this.context.trailerInfo.ID})},e.prototype.computeBufferSize=function(){return Ae(this,void 0,void 0,function(){var t,n,i,r,o,s,a,l,c,u,d;return Me(this,function(h){switch(h.label){case 0:t=Ec.forVersion(1,7),n=t.sizeInBytes()+2,i=ZC.create(),r=this.context.enumerateIndirectObjects(),o=0,s=r.length,h.label=1;case 1:return o<s?(a=r[o],l=a[0],i.addEntry(l,n),n+=this.computeIndirectObjectSize(a),this.shouldWaitForTick(1)?[4,pl()]:[3,3]):[3,4];case 2:h.sent(),h.label=3;case 3:return o++,[3,1];case 4:return c=n,n+=i.sizeInBytes()+1,u=mL.of(this.createTrailerDict()),n+=u.sizeInBytes()+2,d=Sf.forLastCrossRefSectionOffset(c),n+=d.sizeInBytes(),[2,{size:n,header:t,indirectObjects:r,xref:i,trailerDict:u,trailer:d}]}})})},e.forContext=function(t,n){return new e(t,n)},e}(),ew=jMe;var WMe=function(e){W(t,e);function t(n){var i=e.call(this)||this;return i.data=n,i}return t.prototype.clone=function(){return t.of(this.data.slice())},t.prototype.toString=function(){return"PDFInvalidObject("+this.data.length+" bytes)"},t.prototype.sizeInBytes=function(){return this.data.length},t.prototype.copyBytesInto=function(n,i){for(var r=this.data.length,o=0;o<r;o++)n[i++]=this.data[o];return r},t.of=function(n){return new t(n)},t}(tn),tw=WMe;var _f=function(e){return e[e.Deleted=0]="Deleted",e[e.Uncompressed=1]="Uncompressed",e[e.Compressed=2]="Compressed",e}(_f||{}),qMe=function(e){W(t,e);function t(n,i,r){r===void 0&&(r=!0);var o=e.call(this,n,r)||this;return o.computeIndex=function(){for(var s=[],a=0,l=0,c=o.entries.length;l<c;l++){var u=o.entries[l],d=o.entries[l-1];l===0?s.push(u.ref.objectNumber):u.ref.objectNumber-d.ref.objectNumber>1&&(s.push(a),s.push(u.ref.objectNumber),a=0),a+=1}return s.push(a),s},o.computeEntryTuples=function(){for(var s=new Array(o.entries.length),a=0,l=o.entries.length;a<l;a++){var c=o.entries[a];if(c.type===_f.Deleted){var u=c.type,d=c.nextFreeObjectNumber,h=c.ref;s[a]=[u,d,h.generationNumber]}if(c.type===_f.Uncompressed){var u=c.type,p=c.offset,h=c.ref;s[a]=[u,p,h.generationNumber]}if(c.type===_f.Compressed){var u=c.type,g=c.objectStreamRef,m=c.index;s[a]=[u,g.objectNumber,m]}}return s},o.computeMaxEntryByteWidths=function(){for(var s=o.entryTuplesCache.access(),a=[0,0,0],l=0,c=s.length;l<c;l++){var u=s[l],d=u[0],h=u[1],p=u[2],g=RC(d),m=RC(h),v=RC(p);g>a[0]&&(a[0]=g),m>a[1]&&(a[1]=m),v>a[2]&&(a[2]=v)}return a},o.entries=i||[],o.entryTuplesCache=_r.populatedBy(o.computeEntryTuples),o.maxByteWidthsCache=_r.populatedBy(o.computeMaxEntryByteWidths),o.indexCache=_r.populatedBy(o.computeIndex),n.set(T.of("Type"),T.of("XRef")),o}return t.prototype.addDeletedEntry=function(n,i){var r=_f.Deleted;this.entries.push({type:r,ref:n,nextFreeObjectNumber:i}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},t.prototype.addUncompressedEntry=function(n,i){var r=_f.Uncompressed;this.entries.push({type:r,ref:n,offset:i}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},t.prototype.addCompressedEntry=function(n,i,r){var o=_f.Compressed;this.entries.push({type:o,ref:n,objectStreamRef:i,index:r}),this.entryTuplesCache.invalidate(),this.maxByteWidthsCache.invalidate(),this.indexCache.invalidate(),this.contentsCache.invalidate()},t.prototype.clone=function(n){var i=this,r=i.dict,o=i.entries,s=i.encode;return t.of(r.clone(n),o.slice(),s)},t.prototype.getContentsString=function(){for(var n=this.entryTuplesCache.access(),i=this.maxByteWidthsCache.access(),r="",o=0,s=n.length;o<s;o++){for(var a=n[o],l=a[0],c=a[1],u=a[2],d=lf(uf(l)),h=lf(uf(c)),p=lf(uf(u)),g=i[0]-1;g>=0;g--)r+=(d[g]||0).toString(2);for(var g=i[1]-1;g>=0;g--)r+=(h[g]||0).toString(2);for(var g=i[2]-1;g>=0;g--)r+=(p[g]||0).toString(2)}return r},t.prototype.getUnencodedContents=function(){for(var n=this.entryTuplesCache.access(),i=this.maxByteWidthsCache.access(),r=new Uint8Array(this.getUnencodedContentsSize()),o=0,s=0,a=n.length;s<a;s++){for(var l=n[s],c=l[0],u=l[1],d=l[2],h=lf(uf(c)),p=lf(uf(u)),g=lf(uf(d)),m=i[0]-1;m>=0;m--)r[o++]=h[m]||0;for(var m=i[1]-1;m>=0;m--)r[o++]=p[m]||0;for(var m=i[2]-1;m>=0;m--)r[o++]=g[m]||0}return r},t.prototype.getUnencodedContentsSize=function(){var n=this.maxByteWidthsCache.access(),i=sQ(n);return i*this.entries.length},t.prototype.updateDict=function(){e.prototype.updateDict.call(this);var n=this.maxByteWidthsCache.access(),i=this.indexCache.access(),r=this.dict.context;this.dict.set(T.of("W"),r.obj(n)),this.dict.set(T.of("Index"),r.obj(i))},t.create=function(n,i){i===void 0&&(i=!0);var r=new t(n,[],i);return r.addDeletedEntry($e.of(0,65535),0),r},t.of=function(n,i,r){return r===void 0&&(r=!0),new t(n,i,r)},t}(bf),vL=qMe;var KMe=function(e){W(t,e);function t(n,i,r,o){var s=e.call(this,n,i)||this;return s.encodeStreams=r,s.objectsPerStream=o,s}return t.prototype.computeBufferSize=function(){return Ae(this,void 0,void 0,function(){var n,i,r,o,s,a,l,c,g,m,u,C,d,h,v,p,g,m,v,C,S,_,D,F;return Me(this,function(I){switch(I.label){case 0:n=this.context.largestObjectNumber+1,i=Ec.forVersion(1,7),r=i.sizeInBytes()+2,o=vL.create(this.createTrailerDict(),this.encodeStreams),s=[],a=[],l=[],c=this.context.enumerateIndirectObjects(),g=0,m=c.length,I.label=1;case 1:return g<m?(u=c[g],C=u[0],d=u[1],h=C===this.context.trailerInfo.Encrypt||d instanceof Tn||d instanceof tw||C.generationNumber!==0,h?(s.push(u),o.addUncompressedEntry(C,r),r+=this.computeIndirectObjectSize(u),this.shouldWaitForTick(1)?[4,pl()]:[3,3]):[3,4]):[3,6];case 2:I.sent(),I.label=3;case 3:return[3,5];case 4:v=Cm(a),p=Cm(l),(!v||v.length%this.objectsPerStream===0)&&(v=[],a.push(v),p=$e.of(n++),l.push(p)),o.addCompressedEntry(C,p,v.length),v.push(u),I.label=5;case 5:return g++,[3,1];case 6:g=0,m=a.length,I.label=7;case 7:return g<m?(v=a[g],C=l[g],S=JC.withContextAndObjects(this.context,v,this.encodeStreams),o.addUncompressedEntry(C,r),r+=this.computeIndirectObjectSize([C,S]),s.push([C,S]),this.shouldWaitForTick(v.length)?[4,pl()]:[3,9]):[3,10];case 8:I.sent(),I.label=9;case 9:return g++,[3,7];case 10:return _=$e.of(n++),o.dict.set(T.of("Size"),Ee.of(n)),o.addUncompressedEntry(_,r),D=r,r+=this.computeIndirectObjectSize([_,o]),s.push([_,o]),F=Sf.forLastCrossRefSectionOffset(D),r+=F.sizeInBytes(),[2,{size:r,header:i,indirectObjects:s,trailer:F}]}})})},t.forContext=function(n,i,r,o){return r===void 0&&(r=!0),o===void 0&&(o=50),new t(n,i,r,o)},t}(ew),yL=KMe;var YMe=function(e){W(t,e);function t(n){var i=e.call(this)||this;return i.value=n,i}return t.prototype.asBytes=function(){for(var n=this.value+(this.value.length%2===1?"0":""),i=n.length,r=new Uint8Array(n.length/2),o=0,s=0;o<i;){var a=parseInt(n.substring(o,o+2),16);r[s]=a,o+=2,s+=1}return r},t.prototype.decodeText=function(){var n=this.asBytes();return wD(n)?CD(n):GD(n)},t.prototype.decodeDate=function(){var n=this.decodeText(),i=mD(n);if(!i)throw new HD(n);return i},t.prototype.asString=function(){return this.value},t.prototype.clone=function(){return t.of(this.value)},t.prototype.toString=function(){return"<"+this.value+">"},t.prototype.sizeInBytes=function(){return this.value.length+2},t.prototype.copyBytesInto=function(n,i){return n[i++]=M.LessThan,i+=sn(this.value,n,i),n[i++]=M.GreaterThan,this.value.length+2},t.of=function(n){return new t(n)},t.fromText=function(n){for(var i=hQ(n),r="",o=0,s=i.length;o<s;o++)r+=Cc(i[o],4);return new t(r)},t}(tn),_e=YMe;var QMe=function(){function e(t,n){this.encoding=t===Am.ZapfDingbats?YC.ZapfDingbats:t===Am.Symbol?YC.Symbol:YC.WinAnsi,this.font=S$.load(t),this.fontName=this.font.FontName,this.customName=n}return e.prototype.encodeText=function(t){for(var n=this.encodeTextAsGlyphs(t),i=new Array(n.length),r=0,o=n.length;r<o;r++)i[r]=Qu(n[r].code);return _e.of(i.join(""))},e.prototype.widthOfTextAtSize=function(t,n){for(var i=this.encodeTextAsGlyphs(t),r=0,o=0,s=i.length;o<s;o++){var a=i[o].name,l=(i[o+1]||{}).name,c=this.font.getXAxisKerningForPair(a,l)||0;r+=this.widthOfGlyph(a)+c}var u=n/1e3;return r*u},e.prototype.heightOfFontAtSize=function(t,n){n===void 0&&(n={});var i=n.descender,r=i===void 0?!0:i,o=this.font,s=o.Ascender,a=o.Descender,l=o.FontBBox,c=s||l[3],u=a||l[1],d=c-u;return r||(d+=a||0),d/1e3*t},e.prototype.sizeOfFontAtHeight=function(t){var n=this.font,i=n.Ascender,r=n.Descender,o=n.FontBBox,s=i||o[3],a=r||o[1];return 1e3*t/(s-a)},e.prototype.embedIntoContext=function(t,n){var i=t.obj({Type:"Font",Subtype:"Type1",BaseFont:this.customName||this.fontName,Encoding:this.encoding===YC.WinAnsi?"WinAnsiEncoding":void 0});return n?(t.assign(n,i),n):t.register(i)},e.prototype.widthOfGlyph=function(t){return this.font.getWidthOfGlyph(t)||250},e.prototype.encodeTextAsGlyphs=function(t){for(var n=Array.from(t),i=new Array(n.length),r=0,o=n.length;r<o;r++){var s=$Y(n[r]);i[r]=this.encoding.encodeUnicodeCodePoint(s)}return i},e.for=function(t,n){return new e(t,n)},e}(),Ef=QMe;var eZ=function(e,t){for(var n=new Array(e.length),i=0,r=e.length;i<r;i++){var o=e[i],s=J$(jD(t(o))),a=J$.apply(void 0,o.codePoints.map($Me));n[i]=[s,a]}return XMe(n)},XMe=function(e){return`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange
`+e.length+` beginbfchar
`+e.map(function(t){var n=t[0],i=t[1];return n+" "+i}).join(`
`)+`
endbfchar
endcmap
CMapName currentdict /CMap defineresource pop
end
end`},J$=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"<"+e.join("")+">"},jD=function(e){return Cc(e,4)},$Me=function(e){if(fQ(e))return jD(e);if(pQ(e)){var t=TN(e),n=RN(e);return""+jD(t)+jD(n)}var i=Qu(e),r="0x"+i+" is not a valid UTF-8 or UTF-16 codepoint.";throw new Error(r)};var ZMe=function(e){var t=0,n=function(i){t|=1<<i-1};return e.fixedPitch&&n(1),e.serif&&n(2),e.symbolic&&n(3),e.script&&n(4),e.nonsymbolic&&n(6),e.italic&&n(7),e.allCap&&n(17),e.smallCap&&n(18),e.forceBold&&n(19),t},tZ=function(e){var t=e["OS/2"]?e["OS/2"].sFamilyClass:0,n=ZMe({fixedPitch:e.post.isFixedPitch,serif:1<=t&&t<=7,symbolic:!0,script:t===10,italic:e.head.macStyle.italic});return n};var JMe=function(e){W(t,e);function t(n){var i=e.call(this)||this;return i.value=n,i}return t.prototype.asBytes=function(){for(var n=[],i="",r=!1,o=function(d){d!==void 0&&n.push(d),r=!1},s=0,a=this.value.length;s<a;s++){var l=this.value[s],c=Je(l),u=this.value[s+1];r?c===M.Newline||c===M.CarriageReturn?o():c===M.n?o(M.Newline):c===M.r?o(M.CarriageReturn):c===M.t?o(M.Tab):c===M.b?o(M.Backspace):c===M.f?o(M.FormFeed):c===M.LeftParen?o(M.LeftParen):c===M.RightParen?o(M.RightParen):c===M.Backspace?o(M.BackSlash):c>=M.Zero&&c<=M.Seven?(i+=l,(i.length===3||!(u>="0"&&u<="7"))&&(o(parseInt(i,8)),i="")):o(c):c===M.BackSlash?r=!0:o(c)}return new Uint8Array(n)},t.prototype.decodeText=function(){var n=this.asBytes();return wD(n)?CD(n):GD(n)},t.prototype.decodeDate=function(){var n=this.decodeText(),i=mD(n);if(!i)throw new HD(n);return i},t.prototype.asString=function(){return this.value},t.prototype.clone=function(){return t.of(this.value)},t.prototype.toString=function(){return"("+this.value+")"},t.prototype.sizeInBytes=function(){return this.value.length+2},t.prototype.copyBytesInto=function(n,i){return n[i++]=M.LeftParen,i+=sn(this.value,n,i),n[i++]=M.RightParen,this.value.length+2},t.of=function(n){return new t(n)},t.fromDate=function(n){var i=ns(String(n.getUTCFullYear()),4,"0"),r=ns(String(n.getUTCMonth()+1),2,"0"),o=ns(String(n.getUTCDate()),2,"0"),s=ns(String(n.getUTCHours()),2,"0"),a=ns(String(n.getUTCMinutes()),2,"0"),l=ns(String(n.getUTCSeconds()),2,"0");return new t("D:"+i+r+o+s+a+l+"Z")},t}(tn),dt=JMe;var ePe=function(){function e(t,n,i,r){var o=this;this.allGlyphsInFontSortedById=function(){for(var s=new Array(o.font.characterSet.length),a=0,l=s.length;a<l;a++){var c=o.font.characterSet[a];s[a]=o.font.glyphForCodePoint(c)}return oQ(s.sort(rQ),function(u){return u.id})},this.font=t,this.scale=1e3/this.font.unitsPerEm,this.fontData=n,this.fontName=this.font.postscriptName||"Font",this.customName=i,this.fontFeatures=r,this.baseFontName="",this.glyphCache=_r.populatedBy(this.allGlyphsInFontSortedById)}return e.for=function(t,n,i,r){return Ae(this,void 0,void 0,function(){var o;return Me(this,function(s){switch(s.label){case 0:return[4,t.create(n)];case 1:return o=s.sent(),[2,new e(o,n,i,r)]}})})},e.prototype.encodeText=function(t){for(var n=this.font.layout(t,this.fontFeatures).glyphs,i=new Array(n.length),r=0,o=n.length;r<o;r++)i[r]=Cc(n[r].id,4);return _e.of(i.join(""))},e.prototype.widthOfTextAtSize=function(t,n){for(var i=this.font.layout(t,this.fontFeatures).glyphs,r=0,o=0,s=i.length;o<s;o++)r+=i[o].advanceWidth*this.scale;var a=n/1e3;return r*a},e.prototype.heightOfFontAtSize=function(t,n){n===void 0&&(n={});var i=n.descender,r=i===void 0?!0:i,o=this.font,s=o.ascent,a=o.descent,l=o.bbox,c=(s||l.maxY)*this.scale,u=(a||l.minY)*this.scale,d=c-u;return r||(d-=Math.abs(a)||0),d/1e3*t},e.prototype.sizeOfFontAtHeight=function(t){var n=this.font,i=n.ascent,r=n.descent,o=n.bbox,s=(i||o.maxY)*this.scale,a=(r||o.minY)*this.scale;return 1e3*t/(s-a)},e.prototype.embedIntoContext=function(t,n){return this.baseFontName=this.customName||t.addRandomSuffix(this.fontName),this.embedFontDict(t,n)},e.prototype.embedFontDict=function(t,n){return Ae(this,void 0,void 0,function(){var i,r,o;return Me(this,function(s){switch(s.label){case 0:return[4,this.embedCIDFontDict(t)];case 1:return i=s.sent(),r=this.embedUnicodeCmap(t),o=t.obj({Type:"Font",Subtype:"Type0",BaseFont:this.baseFontName,Encoding:"Identity-H",DescendantFonts:[i],ToUnicode:r}),n?(t.assign(n,o),[2,n]):[2,t.register(o)]}})})},e.prototype.isCFF=function(){return this.font.cff},e.prototype.embedCIDFontDict=function(t){return Ae(this,void 0,void 0,function(){var n,i;return Me(this,function(r){switch(r.label){case 0:return[4,this.embedFontDescriptor(t)];case 1:return n=r.sent(),i=t.obj({Type:"Font",Subtype:this.isCFF()?"CIDFontType0":"CIDFontType2",CIDToGIDMap:"Identity",BaseFont:this.baseFontName,CIDSystemInfo:{Registry:dt.of("Adobe"),Ordering:dt.of("Identity"),Supplement:0},FontDescriptor:n,W:this.computeWidths()}),[2,t.register(i)]}})})},e.prototype.embedFontDescriptor=function(t){return Ae(this,void 0,void 0,function(){var n,i,r,o,s,a,l,c,u,d,h,p,g,m,v;return Me(this,function(C){switch(C.label){case 0:return[4,this.embedFontStream(t)];case 1:return n=C.sent(),i=this.scale,r=this.font,o=r.italicAngle,s=r.ascent,a=r.descent,l=r.capHeight,c=r.xHeight,u=this.font.bbox,d=u.minX,h=u.minY,p=u.maxX,g=u.maxY,m=t.obj((v={Type:"FontDescriptor",FontName:this.baseFontName,Flags:tZ(this.font),FontBBox:[d*i,h*i,p*i,g*i],ItalicAngle:o,Ascent:s*i,Descent:a*i,CapHeight:(l||s)*i,XHeight:(c||0)*i,StemV:0},v[this.isCFF()?"FontFile3":"FontFile2"]=n,v)),[2,t.register(m)]}})})},e.prototype.serializeFont=function(){return Ae(this,void 0,void 0,function(){return Me(this,function(t){return[2,this.fontData]})})},e.prototype.embedFontStream=function(t){return Ae(this,void 0,void 0,function(){var n,i,r;return Me(this,function(o){switch(o.label){case 0:return r=(i=t).flateStream,[4,this.serializeFont()];case 1:return n=r.apply(i,[o.sent(),{Subtype:this.isCFF()?"CIDFontType0C":void 0}]),[2,t.register(n)]}})})},e.prototype.embedUnicodeCmap=function(t){var n=eZ(this.glyphCache.access(),this.glyphId.bind(this)),i=t.flateStream(n);return t.register(i)},e.prototype.glyphId=function(t){return t?t.id:-1},e.prototype.computeWidths=function(){for(var t=this.glyphCache.access(),n=[],i=[],r=0,o=t.length;r<o;r++){var s=t[r],a=t[r-1],l=this.glyphId(s),c=this.glyphId(a);r===0?n.push(l):l-c!==1&&(n.push(i),n.push(l),i=[]),i.push(s.advanceWidth*this.scale)}return n.push(i),n},e}(),xf=ePe;var tPe=function(e){W(t,e);function t(n,i,r,o){var s=e.call(this,n,i,r,o)||this;return s.subset=s.font.createSubset(),s.glyphs=[],s.glyphCache=_r.populatedBy(function(){return s.glyphs}),s.glyphIdMap=new Map,s}return t.for=function(n,i,r,o){return Ae(this,void 0,void 0,function(){var s;return Me(this,function(a){switch(a.label){case 0:return[4,n.create(i)];case 1:return s=a.sent(),[2,new t(s,i,r,o)]}})})},t.prototype.encodeText=function(n){for(var i=this.font.layout(n,this.fontFeatures).glyphs,r=new Array(i.length),o=0,s=i.length;o<s;o++){var a=i[o],l=this.subset.includeGlyph(a);this.glyphs[l-1]=a,this.glyphIdMap.set(a.id,l),r[o]=Cc(l,4)}return this.glyphCache.invalidate(),_e.of(r.join(""))},t.prototype.isCFF=function(){return this.subset.cff},t.prototype.glyphId=function(n){return n?this.glyphIdMap.get(n.id):-1},t.prototype.serializeFont=function(){var n=this;return new Promise(function(i,r){var o=[];n.subset.encodeStream().on("data",function(s){return o.push(s)}).on("end",function(){return i(iQ(o))}).on("error",function(s){return r(s)})})},t}(xf),CL=tPe;var WD=function(e){return e.Source="Source",e.Data="Data",e.Alternative="Alternative",e.Supplement="Supplement",e.EncryptedPayload="EncryptedPayload",e.FormData="EncryptedPayload",e.Schema="Schema",e.Unspecified="Unspecified",e}(WD||{}),nPe=function(){function e(t,n,i){i===void 0&&(i={}),this.fileData=t,this.fileName=n,this.options=i}return e.for=function(t,n,i){return i===void 0&&(i={}),new e(t,n,i)},e.prototype.embedIntoContext=function(t,n){return Ae(this,void 0,void 0,function(){var i,r,o,s,a,l,c,u,d;return Me(this,function(h){return i=this.options,r=i.mimeType,o=i.description,s=i.creationDate,a=i.modificationDate,l=i.afRelationship,c=t.flateStream(this.fileData,{Type:"EmbeddedFile",Subtype:r??void 0,Params:{Size:this.fileData.length,CreationDate:s?dt.fromDate(s):void 0,ModDate:a?dt.fromDate(a):void 0}}),u=t.register(c),d=t.obj({Type:"Filespec",F:dt.of(this.fileName),UF:_e.fromText(this.fileName),EF:{F:u},Desc:o?_e.fromText(o):void 0,AFRelationship:l??void 0}),n?(t.assign(n,d),[2,n]):[2,t.register(d)]})})},e}(),wL=nPe;var nZ=[65472,65473,65474,65475,65477,65478,65479,65480,65481,65482,65483,65484,65485,65486,65487],nw=function(e){return e.DeviceGray="DeviceGray",e.DeviceRGB="DeviceRGB",e.DeviceCMYK="DeviceCMYK",e}(nw||{}),iPe={1:nw.DeviceGray,3:nw.DeviceRGB,4:nw.DeviceCMYK},rPe=function(){function e(t,n,i,r,o){this.imageData=t,this.bitsPerComponent=n,this.width=i,this.height=r,this.colorSpace=o}return e.for=function(t){return Ae(this,void 0,void 0,function(){var n,i,r,o,s,a,l,c,u,d;return Me(this,function(h){if(n=new DataView(t.buffer),i=n.getUint16(0),i!==65496)throw new Error("SOI not found in JPEG");for(r=2;r<n.byteLength&&(o=n.getUint16(r),r+=2,!nZ.includes(o));)r+=n.getUint16(r);if(!nZ.includes(o))throw new Error("Invalid JPEG");if(r+=2,s=n.getUint8(r++),a=n.getUint16(r),r+=2,l=n.getUint16(r),r+=2,c=n.getUint8(r++),u=iPe[c],!u)throw new Error("Unknown JPEG channel.");return d=u,[2,new e(t,s,l,a,d)]})})},e.prototype.embedIntoContext=function(t,n){return Ae(this,void 0,void 0,function(){var i;return Me(this,function(r){return i=t.stream(this.imageData,{Type:"XObject",Subtype:"Image",BitsPerComponent:this.bitsPerComponent,Width:this.width,Height:this.height,ColorSpace:this.colorSpace,Filter:"DCTDecode",Decode:this.colorSpace===nw.DeviceCMYK?[1,0,1,0,1,0,1,0]:void 0}),n?(t.assign(n,i),[2,n]):[2,t.register(i)]})})},e}(),iw=rPe;var iZ=Mb(WC()),re={};re.toRGBA8=function(e){var t=e.width,n=e.height;if(e.tabs.acTL==null)return[re.toRGBA8.decodeImage(e.data,t,n,e).buffer];var i=[];e.frames[0].data==null&&(e.frames[0].data=e.data);for(var r=t*n*4,o=new Uint8Array(r),s=new Uint8Array(r),a=new Uint8Array(r),l=0;l<e.frames.length;l++){var c=e.frames[l],u=c.rect.x,d=c.rect.y,h=c.rect.width,p=c.rect.height,g=re.toRGBA8.decodeImage(c.data,h,p,e);if(l!=0)for(var m=0;m<r;m++)a[m]=o[m];if(c.blend==0?re._copyTile(g,h,p,o,t,n,u,d,0):c.blend==1&&re._copyTile(g,h,p,o,t,n,u,d,1),i.push(o.buffer.slice(0)),c.dispose!=0){if(c.dispose==1)re._copyTile(s,h,p,o,t,n,u,d,0);else if(c.dispose==2)for(var m=0;m<r;m++)o[m]=a[m]}}return i};re.toRGBA8.decodeImage=function(e,t,n,i){var r=t*n,o=re.decode._getBPP(i),s=Math.ceil(t*o/8),a=new Uint8Array(r*4),l=new Uint32Array(a.buffer),c=i.ctype,u=i.depth,d=re._bin.readUshort,h=Date.now();if(c==6){var p=r<<2;if(u==8)for(var g=0;g<p;g+=4)a[g]=e[g],a[g+1]=e[g+1],a[g+2]=e[g+2],a[g+3]=e[g+3];if(u==16)for(var g=0;g<p;g++)a[g]=e[g<<1]}else if(c==2){var m=i.tabs.tRNS;if(m==null){if(u==8)for(var g=0;g<r;g++){var v=g*3;l[g]=255<<24|e[v+2]<<16|e[v+1]<<8|e[v]}if(u==16)for(var g=0;g<r;g++){var v=g*6;l[g]=255<<24|e[v+4]<<16|e[v+2]<<8|e[v]}}else{var C=m[0],S=m[1],_=m[2];if(u==8)for(var g=0;g<r;g++){var D=g<<2,v=g*3;l[g]=255<<24|e[v+2]<<16|e[v+1]<<8|e[v],e[v]==C&&e[v+1]==S&&e[v+2]==_&&(a[D+3]=0)}if(u==16)for(var g=0;g<r;g++){var D=g<<2,v=g*6;l[g]=255<<24|e[v+4]<<16|e[v+2]<<8|e[v],d(e,v)==C&&d(e,v+2)==S&&d(e,v+4)==_&&(a[D+3]=0)}}}else if(c==3){var F=i.tabs.PLTE,I=i.tabs.tRNS,E=I?I.length:0;if(u==1)for(var b=0;b<n;b++)for(var x=b*s,k=b*t,g=0;g<t;g++){var D=k+g<<2,A=e[x+(g>>3)]>>7-((g&7)<<0)&1,O=3*A;a[D]=F[O],a[D+1]=F[O+1],a[D+2]=F[O+2],a[D+3]=A<E?I[A]:255}if(u==2)for(var b=0;b<n;b++)for(var x=b*s,k=b*t,g=0;g<t;g++){var D=k+g<<2,A=e[x+(g>>2)]>>6-((g&3)<<1)&3,O=3*A;a[D]=F[O],a[D+1]=F[O+1],a[D+2]=F[O+2],a[D+3]=A<E?I[A]:255}if(u==4)for(var b=0;b<n;b++)for(var x=b*s,k=b*t,g=0;g<t;g++){var D=k+g<<2,A=e[x+(g>>1)]>>4-((g&1)<<2)&15,O=3*A;a[D]=F[O],a[D+1]=F[O+1],a[D+2]=F[O+2],a[D+3]=A<E?I[A]:255}if(u==8)for(var g=0;g<r;g++){var D=g<<2,A=e[g],O=3*A;a[D]=F[O],a[D+1]=F[O+1],a[D+2]=F[O+2],a[D+3]=A<E?I[A]:255}}else if(c==4){if(u==8)for(var g=0;g<r;g++){var D=g<<2,P=g<<1,le=e[P];a[D]=le,a[D+1]=le,a[D+2]=le,a[D+3]=e[P+1]}if(u==16)for(var g=0;g<r;g++){var D=g<<2,P=g<<2,le=e[P];a[D]=le,a[D+1]=le,a[D+2]=le,a[D+3]=e[P+2]}}else if(c==0)for(var C=i.tabs.tRNS?i.tabs.tRNS:-1,b=0;b<n;b++){var Re=b*s,Ue=b*t;if(u==1)for(var we=0;we<t;we++){var le=255*(e[Re+(we>>>3)]>>>7-(we&7)&1),Ct=le==C*255?0:255;l[Ue+we]=Ct<<24|le<<16|le<<8|le}else if(u==2)for(var we=0;we<t;we++){var le=85*(e[Re+(we>>>2)]>>>6-((we&3)<<1)&3),Ct=le==C*85?0:255;l[Ue+we]=Ct<<24|le<<16|le<<8|le}else if(u==4)for(var we=0;we<t;we++){var le=17*(e[Re+(we>>>1)]>>>4-((we&1)<<2)&15),Ct=le==C*17?0:255;l[Ue+we]=Ct<<24|le<<16|le<<8|le}else if(u==8)for(var we=0;we<t;we++){var le=e[Re+we],Ct=le==C?0:255;l[Ue+we]=Ct<<24|le<<16|le<<8|le}else if(u==16)for(var we=0;we<t;we++){var le=e[Re+(we<<1)],Ct=d(e,Re+(we<<g))==C?0:255;l[Ue+we]=Ct<<24|le<<16|le<<8|le}}return a};re.decode=function(e){for(var t=new Uint8Array(e),n=8,i=re._bin,r=i.readUshort,o=i.readUint,s={tabs:{},frames:[]},a=new Uint8Array(t.length),l=0,c,u=0,d=[137,80,78,71,13,10,26,10],h=0;h<8;h++)if(t[h]!=d[h])throw"The input is not a PNG file!";for(;n<t.length;){var p=i.readUint(t,n);n+=4;var g=i.readASCII(t,n,4);if(n+=4,g=="IHDR")re.decode._IHDR(t,n,s);else if(g=="IDAT"){for(var h=0;h<p;h++)a[l+h]=t[n+h];l+=p}else if(g=="acTL")s.tabs[g]={num_frames:o(t,n),num_plays:o(t,n+4)},c=new Uint8Array(t.length);else if(g=="fcTL"){if(u!=0){var m=s.frames[s.frames.length-1];m.data=re.decode._decompress(s,c.slice(0,u),m.rect.width,m.rect.height),u=0}var v={x:o(t,n+12),y:o(t,n+16),width:o(t,n+4),height:o(t,n+8)},C=r(t,n+22);C=r(t,n+20)/(C==0?100:C);var S={rect:v,delay:Math.round(C*1e3),dispose:t[n+24],blend:t[n+25]};s.frames.push(S)}else if(g=="fdAT"){for(var h=0;h<p-4;h++)c[u+h]=t[n+h+4];u+=p-4}else if(g=="pHYs")s.tabs[g]=[i.readUint(t,n),i.readUint(t,n+4),t[n+8]];else if(g=="cHRM"){s.tabs[g]=[];for(var h=0;h<8;h++)s.tabs[g].push(i.readUint(t,n+h*4))}else if(g=="tEXt"){s.tabs[g]==null&&(s.tabs[g]={});var _=i.nextZero(t,n),D=i.readASCII(t,n,_-n),F=i.readASCII(t,_+1,n+p-_-1);s.tabs[g][D]=F}else if(g=="iTXt"){s.tabs[g]==null&&(s.tabs[g]={});var _=0,I=n;_=i.nextZero(t,I);var D=i.readASCII(t,I,_-I);I=_+1;var E=t[I],b=t[I+1];I+=2,_=i.nextZero(t,I);var x=i.readASCII(t,I,_-I);I=_+1,_=i.nextZero(t,I);var k=i.readUTF8(t,I,_-I);I=_+1;var F=i.readUTF8(t,I,p-(I-n));s.tabs[g][D]=F}else if(g=="PLTE")s.tabs[g]=i.readBytes(t,n,p);else if(g=="hIST"){var A=s.tabs.PLTE.length/3;s.tabs[g]=[];for(var h=0;h<A;h++)s.tabs[g].push(r(t,n+h*2))}else if(g=="tRNS")s.ctype==3?s.tabs[g]=i.readBytes(t,n,p):s.ctype==0?s.tabs[g]=r(t,n):s.ctype==2&&(s.tabs[g]=[r(t,n),r(t,n+2),r(t,n+4)]);else if(g=="gAMA")s.tabs[g]=i.readUint(t,n)/1e5;else if(g=="sRGB")s.tabs[g]=t[n];else if(g=="bKGD")s.ctype==0||s.ctype==4?s.tabs[g]=[r(t,n)]:s.ctype==2||s.ctype==6?s.tabs[g]=[r(t,n),r(t,n+2),r(t,n+4)]:s.ctype==3&&(s.tabs[g]=t[n]);else if(g=="IEND")break;n+=p;var O=i.readUint(t,n);n+=4}if(u!=0){var m=s.frames[s.frames.length-1];m.data=re.decode._decompress(s,c.slice(0,u),m.rect.width,m.rect.height),u=0}return s.data=re.decode._decompress(s,a,s.width,s.height),delete s.compress,delete s.interlace,delete s.filter,s};re.decode._decompress=function(e,t,n,i){var a=Date.now(),r=re.decode._getBPP(e),o=Math.ceil(n*r/8),s=new Uint8Array((o+1+e.interlace)*i);t=re.decode._inflate(t,s);var a=Date.now();return e.interlace==0?t=re.decode._filterZero(t,e,0,n,i):e.interlace==1&&(t=re.decode._readInterlace(t,e)),t};re.decode._inflate=function(e,t){var n=re.inflateRaw(new Uint8Array(e.buffer,2,e.length-6),t);return n};re.inflateRaw=function(){var e={};return e.H={},e.H.N=function(t,n){var i=Uint8Array,r=0,o=0,s=0,a=0,l=0,c=0,u=0,d=0,h=0,p,g;if(t[0]==3&&t[1]==0)return n||new i(0);var m=e.H,v=m.b,C=m.e,S=m.R,_=m.n,D=m.A,F=m.Z,I=m.m,E=n==null;for(E&&(n=new i(t.length>>>2<<3));r==0;){if(r=v(t,h,1),o=v(t,h+1,2),h+=3,o==0){h&7&&(h+=8-(h&7));var b=(h>>>3)+4,x=t[b-4]|t[b-3]<<8;E&&(n=e.H.W(n,d+x)),n.set(new i(t.buffer,t.byteOffset+b,x),d),h=b+x<<3,d+=x;continue}if(E&&(n=e.H.W(n,d+(1<<17))),o==1&&(p=I.J,g=I.h,c=511,u=31),o==2){s=C(t,h,5)+257,a=C(t,h+5,5)+1,l=C(t,h+10,4)+4,h+=14;for(var k=h,A=1,O=0;O<38;O+=2)I.Q[O]=0,I.Q[O+1]=0;for(var O=0;O<l;O++){var P=C(t,h+O*3,3);I.Q[(I.X[O]<<1)+1]=P,P>A&&(A=P)}h+=3*l,_(I.Q,A),D(I.Q,A,I.u),p=I.w,g=I.d,h=S(I.u,(1<<A)-1,s+a,t,h,I.v);var le=m.V(I.v,0,s,I.C);c=(1<<le)-1;var Re=m.V(I.v,s,a,I.D);u=(1<<Re)-1,_(I.C,le),D(I.C,le,p),_(I.D,Re),D(I.D,Re,g)}for(;;){var Ue=p[F(t,h)&c];h+=Ue&15;var we=Ue>>>4;if(!(we>>>8))n[d++]=we;else{if(we==256)break;var Ct=d+we-254;if(we>264){var ln=I.q[we-257];Ct=d+(ln>>>3)+C(t,h,ln&7),h+=ln&7}var Ao=g[F(t,h)&u];h+=Ao&15;var Ws=Ao>>>4,wn=I.c[Ws],Vt=(wn>>>4)+v(t,h,wn&15);for(h+=wn&15;d<Ct;)n[d]=n[d++-Vt],n[d]=n[d++-Vt],n[d]=n[d++-Vt],n[d]=n[d++-Vt];d=Ct}}}return n.length==d?n:n.slice(0,d)},e.H.W=function(t,n){var i=t.length;if(n<=i)return t;var r=new Uint8Array(i<<1);return r.set(t,0),r},e.H.R=function(t,n,i,r,o,s){for(var a=e.H.e,l=e.H.Z,c=0;c<i;){var u=t[l(r,o)&n];o+=u&15;var d=u>>>4;if(d<=15)s[c]=d,c++;else{var h=0,p=0;d==16?(p=3+a(r,o,2),o+=2,h=s[c-1]):d==17?(p=3+a(r,o,3),o+=3):d==18&&(p=11+a(r,o,7),o+=7);for(var g=c+p;c<g;)s[c]=h,c++}}return o},e.H.V=function(t,n,i,r){for(var o=0,s=0,a=r.length>>>1;s<i;){var l=t[s+n];r[s<<1]=0,r[(s<<1)+1]=l,l>o&&(o=l),s++}for(;s<a;)r[s<<1]=0,r[(s<<1)+1]=0,s++;return o},e.H.n=function(t,n){for(var i=e.H.m,r=t.length,o,s,a,l,c,u=i.j,l=0;l<=n;l++)u[l]=0;for(l=1;l<r;l+=2)u[t[l]]++;var d=i.K;for(o=0,u[0]=0,s=1;s<=n;s++)o=o+u[s-1]<<1,d[s]=o;for(a=0;a<r;a+=2)c=t[a+1],c!=0&&(t[a]=d[c],d[c]++)},e.H.A=function(t,n,i){for(var r=t.length,o=e.H.m,s=o.r,a=0;a<r;a+=2)if(t[a+1]!=0)for(var l=a>>1,c=t[a+1],u=l<<4|c,d=n-c,h=t[a]<<d,p=h+(1<<d);h!=p;){var g=s[h]>>>15-n;i[g]=u,h++}},e.H.l=function(t,n){for(var i=e.H.m.r,r=15-n,o=0;o<t.length;o+=2){var s=t[o]<<n-t[o+1];t[o]=i[s]>>>r}},e.H.M=function(t,n,i){i=i<<(n&7);var r=n>>>3;t[r]|=i,t[r+1]|=i>>>8},e.H.I=function(t,n,i){i=i<<(n&7);var r=n>>>3;t[r]|=i,t[r+1]|=i>>>8,t[r+2]|=i>>>16},e.H.e=function(t,n,i){return(t[n>>>3]|t[(n>>>3)+1]<<8)>>>(n&7)&(1<<i)-1},e.H.b=function(t,n,i){return(t[n>>>3]|t[(n>>>3)+1]<<8|t[(n>>>3)+2]<<16)>>>(n&7)&(1<<i)-1},e.H.Z=function(t,n){return(t[n>>>3]|t[(n>>>3)+1]<<8|t[(n>>>3)+2]<<16)>>>(n&7)},e.H.i=function(t,n){return(t[n>>>3]|t[(n>>>3)+1]<<8|t[(n>>>3)+2]<<16|t[(n>>>3)+3]<<24)>>>(n&7)},e.H.m=function(){var t=Uint16Array,n=Uint32Array;return{K:new t(16),j:new t(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new t(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new n(32),J:new t(512),_:[],h:new t(32),$:[],w:new t(32768),C:[],v:[],d:new t(32768),D:[],u:new t(512),Q:[],r:new t(32768),s:new n(286),Y:new n(30),a:new n(19),t:new n(15e3),k:new t(65536),g:new t(32768)}}(),function(){for(var t=e.H.m,n=32768,i=0;i<n;i++){var r=i;r=(r&2863311530)>>>1|(r&1431655765)<<1,r=(r&3435973836)>>>2|(r&858993459)<<2,r=(r&4042322160)>>>4|(r&252645135)<<4,r=(r&4278255360)>>>8|(r&16711935)<<8,t.r[i]=(r>>>16|r<<16)>>>17}function o(s,a,l){for(;a--!=0;)s.push(0,l)}for(var i=0;i<32;i++)t.q[i]=t.S[i]<<3|t.T[i],t.c[i]=t.p[i]<<4|t.z[i];o(t._,144,8),o(t._,112,9),o(t._,24,7),o(t._,8,8),e.H.n(t._,9),e.H.A(t._,9,t.J),e.H.l(t._,9),o(t.$,32,5),e.H.n(t.$,5),e.H.A(t.$,5,t.h),e.H.l(t.$,5),o(t.Q,19,0),o(t.C,286,0),o(t.D,30,0),o(t.v,320,0)}(),e.H.N}();re.decode._readInterlace=function(e,t){for(var n=t.width,i=t.height,r=re.decode._getBPP(t),o=r>>3,s=Math.ceil(n*r/8),a=new Uint8Array(i*s),l=0,c=[0,0,4,0,2,0,1],u=[0,4,0,2,0,1,0],d=[8,8,8,4,4,2,2],h=[8,8,4,4,2,2,1],p=0;p<7;){for(var g=d[p],m=h[p],v=0,C=0,S=c[p];S<i;)S+=g,C++;for(var _=u[p];_<n;)_+=m,v++;var D=Math.ceil(v*r/8);re.decode._filterZero(e,t,l,v,C);for(var F=0,I=c[p];I<i;){for(var E=u[p],b=l+F*D<<3;E<n;){if(r==1){var x=e[b>>3];x=x>>7-(b&7)&1,a[I*s+(E>>3)]|=x<<7-((E&7)<<0)}if(r==2){var x=e[b>>3];x=x>>6-(b&7)&3,a[I*s+(E>>2)]|=x<<6-((E&3)<<1)}if(r==4){var x=e[b>>3];x=x>>4-(b&7)&15,a[I*s+(E>>1)]|=x<<4-((E&1)<<2)}if(r>=8)for(var k=I*s+E*o,A=0;A<o;A++)a[k+A]=e[(b>>3)+A];b+=r,E+=m}F++,I+=g}v*C!=0&&(l+=C*(1+D)),p=p+1}return a};re.decode._getBPP=function(e){var t=[1,null,3,1,2,null,4][e.ctype];return t*e.depth};re.decode._filterZero=function(e,t,n,i,r){var o=re.decode._getBPP(t),s=Math.ceil(i*o/8),a=re.decode._paeth;o=Math.ceil(o/8);var l=0,c=1,u=e[n],d=0;if(u>1&&(e[n]=[0,0,1][u-2]),u==3)for(d=o;d<s;d++)e[d+1]=e[d+1]+(e[d+1-o]>>>1)&255;for(var h=0;h<r;h++)if(l=n+h*s,c=l+h+1,u=e[c-1],d=0,u==0)for(;d<s;d++)e[l+d]=e[c+d];else if(u==1){for(;d<o;d++)e[l+d]=e[c+d];for(;d<s;d++)e[l+d]=e[c+d]+e[l+d-o]}else if(u==2)for(;d<s;d++)e[l+d]=e[c+d]+e[l+d-s];else if(u==3){for(;d<o;d++)e[l+d]=e[c+d]+(e[l+d-s]>>>1);for(;d<s;d++)e[l+d]=e[c+d]+(e[l+d-s]+e[l+d-o]>>>1)}else{for(;d<o;d++)e[l+d]=e[c+d]+a(0,e[l+d-s],0);for(;d<s;d++)e[l+d]=e[c+d]+a(e[l+d-o],e[l+d-s],e[l+d-o-s])}return e};re.decode._paeth=function(e,t,n){var i=e+t-n,r=i-e,o=i-t,s=i-n;return r*r<=o*o&&r*r<=s*s?e:o*o<=s*s?t:n};re.decode._IHDR=function(e,t,n){var i=re._bin;n.width=i.readUint(e,t),t+=4,n.height=i.readUint(e,t),t+=4,n.depth=e[t],t++,n.ctype=e[t],t++,n.compress=e[t],t++,n.filter=e[t],t++,n.interlace=e[t],t++};re._bin={nextZero:function(e,t){for(;e[t]!=0;)t++;return t},readUshort:function(e,t){return e[t]<<8|e[t+1]},writeUshort:function(e,t,n){e[t]=n>>8&255,e[t+1]=n&255},readUint:function(e,t){return e[t]*(256*256*256)+(e[t+1]<<16|e[t+2]<<8|e[t+3])},writeUint:function(e,t,n){e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=n&255},readASCII:function(e,t,n){for(var i="",r=0;r<n;r++)i+=String.fromCharCode(e[t+r]);return i},writeASCII:function(e,t,n){for(var i=0;i<n.length;i++)e[t+i]=n.charCodeAt(i)},readBytes:function(e,t,n){for(var i=[],r=0;r<n;r++)i.push(e[t+r]);return i},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,t,n){for(var i="",r,o=0;o<n;o++)i+="%"+re._bin.pad(e[t+o].toString(16));try{r=decodeURIComponent(i)}catch{return re._bin.readASCII(e,t,n)}return r}};re._copyTile=function(e,t,n,i,r,o,s,a,l){for(var c=Math.min(t,r),u=Math.min(n,o),d=0,h=0,p=0;p<u;p++)for(var g=0;g<c;g++)if(s>=0&&a>=0?(d=p*t+g<<2,h=(a+p)*r+s+g<<2):(d=(-a+p)*t-s+g<<2,h=p*r+g<<2),l==0)i[h]=e[d],i[h+1]=e[d+1],i[h+2]=e[d+2],i[h+3]=e[d+3];else if(l==1){var m=e[d+3]*.00392156862745098,v=e[d]*m,C=e[d+1]*m,S=e[d+2]*m,_=i[h+3]*(1/255),D=i[h]*_,F=i[h+1]*_,I=i[h+2]*_,E=1-m,b=m+_*E,x=b==0?0:1/b;i[h+3]=255*b,i[h+0]=(v+D*E)*x,i[h+1]=(C+F*E)*x,i[h+2]=(S+I*E)*x}else if(l==2){var m=e[d+3],v=e[d],C=e[d+1],S=e[d+2],_=i[h+3],D=i[h],F=i[h+1],I=i[h+2];m==_&&v==D&&C==F&&S==I?(i[h]=0,i[h+1]=0,i[h+2]=0,i[h+3]=0):(i[h]=v,i[h+1]=C,i[h+2]=S,i[h+3]=m)}else if(l==3){var m=e[d+3],v=e[d],C=e[d+1],S=e[d+2],_=i[h+3],D=i[h],F=i[h+1],I=i[h+2];if(m==_&&v==D&&C==F&&S==I)continue;if(m<220&&_>20)return!1}return!0};re.encode=function(e,t,n,i,r,o,s){i==null&&(i=0),s==null&&(s=!1);var a=re.encode.compress(e,t,n,i,[!1,!1,!1,0,s]);return re.encode.compressPNG(a,-1),re.encode._main(a,t,n,r,o)};re.encodeLL=function(e,t,n,i,r,o,s,a){for(var l={ctype:0+(i==1?0:2)+(r==0?0:4),depth:o,frames:[]},c=Date.now(),u=(i+r)*o,d=u*t,h=0;h<e.length;h++)l.frames.push({rect:{x:0,y:0,width:t,height:n},img:new Uint8Array(e[h]),blend:0,dispose:1,bpp:Math.ceil(u/8),bpl:Math.ceil(d/8)});re.encode.compressPNG(l,0,!0);var p=re.encode._main(l,t,n,s,a);return p};re.encode._main=function(e,t,n,i,r){r==null&&(r={});var o=re.crc.crc,s=re._bin.writeUint,a=re._bin.writeUshort,l=re._bin.writeASCII,c=8,u=e.frames.length>1,d=!1,h=33+(u?20:0);if(r.sRGB!=null&&(h+=13),r.pHYs!=null&&(h+=21),e.ctype==3){for(var p=e.plte.length,g=0;g<p;g++)e.plte[g]>>>24!=255&&(d=!0);h+=8+p*3+4+(d?8+p*1+4:0)}for(var m=0;m<e.frames.length;m++){var v=e.frames[m];u&&(h+=38),h+=v.cimg.length+12,m!=0&&(h+=4)}h+=12;for(var C=new Uint8Array(h),S=[137,80,78,71,13,10,26,10],g=0;g<8;g++)C[g]=S[g];if(s(C,c,13),c+=4,l(C,c,"IHDR"),c+=4,s(C,c,t),c+=4,s(C,c,n),c+=4,C[c]=e.depth,c++,C[c]=e.ctype,c++,C[c]=0,c++,C[c]=0,c++,C[c]=0,c++,s(C,c,o(C,c-17,17)),c+=4,r.sRGB!=null&&(s(C,c,1),c+=4,l(C,c,"sRGB"),c+=4,C[c]=r.sRGB,c++,s(C,c,o(C,c-5,5)),c+=4),r.pHYs!=null&&(s(C,c,9),c+=4,l(C,c,"pHYs"),c+=4,s(C,c,r.pHYs[0]),c+=4,s(C,c,r.pHYs[1]),c+=4,C[c]=r.pHYs[2],c++,s(C,c,o(C,c-13,13)),c+=4),u&&(s(C,c,8),c+=4,l(C,c,"acTL"),c+=4,s(C,c,e.frames.length),c+=4,s(C,c,r.loop!=null?r.loop:0),c+=4,s(C,c,o(C,c-12,12)),c+=4),e.ctype==3){var p=e.plte.length;s(C,c,p*3),c+=4,l(C,c,"PLTE"),c+=4;for(var g=0;g<p;g++){var _=g*3,D=e.plte[g],F=D&255,I=D>>>8&255,E=D>>>16&255;C[c+_+0]=F,C[c+_+1]=I,C[c+_+2]=E}if(c+=p*3,s(C,c,o(C,c-p*3-4,p*3+4)),c+=4,d){s(C,c,p),c+=4,l(C,c,"tRNS"),c+=4;for(var g=0;g<p;g++)C[c+g]=e.plte[g]>>>24&255;c+=p,s(C,c,o(C,c-p-4,p+4)),c+=4}}for(var b=0,m=0;m<e.frames.length;m++){var v=e.frames[m];u&&(s(C,c,26),c+=4,l(C,c,"fcTL"),c+=4,s(C,c,b++),c+=4,s(C,c,v.rect.width),c+=4,s(C,c,v.rect.height),c+=4,s(C,c,v.rect.x),c+=4,s(C,c,v.rect.y),c+=4,a(C,c,i[m]),c+=2,a(C,c,1e3),c+=2,C[c]=v.dispose,c++,C[c]=v.blend,c++,s(C,c,o(C,c-30,30)),c+=4);var x=v.cimg,p=x.length;s(C,c,p+(m==0?0:4)),c+=4;var k=c;l(C,c,m==0?"IDAT":"fdAT"),c+=4,m!=0&&(s(C,c,b++),c+=4),C.set(x,c),c+=p,s(C,c,o(C,k,c-k)),c+=4}return s(C,c,0),c+=4,l(C,c,"IEND"),c+=4,s(C,c,o(C,c-4,4)),c+=4,C.buffer};re.encode.compressPNG=function(e,t,n){for(var i=0;i<e.frames.length;i++){var r=e.frames[i],o=r.rect.width,s=r.rect.height,a=new Uint8Array(s*r.bpl+s);r.cimg=re.encode._filterZero(r.img,s,r.bpp,r.bpl,a,t,n)}};re.encode.compress=function(e,t,n,i,r){for(var o=r[0],s=r[1],a=r[2],l=r[3],c=r[4],u=6,d=8,h=255,p=0;p<e.length;p++)for(var g=new Uint8Array(e[p]),m=g.length,v=0;v<m;v+=4)h&=g[v+3];var C=h!=255,S=re.encode.framize(e,t,n,o,s,a),_={},D=[],F=[];if(i!=0){for(var I=[],v=0;v<S.length;v++)I.push(S[v].img.buffer);for(var E=re.encode.concatRGBA(I),b=re.quantize(E,i),x=0,k=new Uint8Array(b.abuf),v=0;v<S.length;v++){var A=S[v].img,O=A.length;F.push(new Uint8Array(b.inds.buffer,x>>2,O>>2));for(var p=0;p<O;p+=4)A[p]=k[x+p],A[p+1]=k[x+p+1],A[p+2]=k[x+p+2],A[p+3]=k[x+p+3];x+=O}for(var v=0;v<b.plte.length;v++)D.push(b.plte[v].est.rgba)}else for(var p=0;p<S.length;p++){var P=S[p],le=new Uint32Array(P.img.buffer),Re=P.rect.width,m=le.length,Ue=new Uint8Array(m);F.push(Ue);for(var v=0;v<m;v++){var we=le[v];if(v!=0&&we==le[v-1])Ue[v]=Ue[v-1];else if(v>Re&&we==le[v-Re])Ue[v]=Ue[v-Re];else{var Ct=_[we];if(Ct==null&&(_[we]=Ct=D.length,D.push(we),D.length>=300))break;Ue[v]=Ct}}}var ln=D.length;ln<=256&&c==!1&&(ln<=2?d=1:ln<=4?d=2:ln<=16?d=4:d=8,d=Math.max(d,l));for(var p=0;p<S.length;p++){var P=S[p],Ao=P.rect.x,Ws=P.rect.y,Re=P.rect.width,wn=P.rect.height,Vt=P.img,Rl=new Uint32Array(Vt.buffer),ui=4*Re,qs=4;if(ln<=256&&c==!1){ui=Math.ceil(d*Re/8);for(var $n=new Uint8Array(ui*wn),ao=F[p],Aa=0;Aa<wn;Aa++){var v=Aa*ui,Ks=Aa*Re;if(d==8)for(var Qt=0;Qt<Re;Qt++)$n[v+Qt]=ao[Ks+Qt];else if(d==4)for(var Qt=0;Qt<Re;Qt++)$n[v+(Qt>>1)]|=ao[Ks+Qt]<<4-(Qt&1)*4;else if(d==2)for(var Qt=0;Qt<Re;Qt++)$n[v+(Qt>>2)]|=ao[Ks+Qt]<<6-(Qt&3)*2;else if(d==1)for(var Qt=0;Qt<Re;Qt++)$n[v+(Qt>>3)]|=ao[Ks+Qt]<<7-(Qt&7)*1}Vt=$n,u=3,qs=1}else if(C==!1&&S.length==1){for(var $n=new Uint8Array(Re*wn*3),wd=Re*wn,v=0;v<wd;v++){var A=v*3,Ma=v*4;$n[A]=Vt[Ma],$n[A+1]=Vt[Ma+1],$n[A+2]=Vt[Ma+2]}Vt=$n,u=2,qs=3,ui=3*Re}P.img=Vt,P.bpl=ui,P.bpp=qs}return{ctype:u,depth:d,plte:D,frames:S}};re.encode.framize=function(e,t,n,i,r,o){for(var s=[],a=0;a<e.length;a++){var l=new Uint8Array(e[a]),c=new Uint32Array(l.buffer),u,d=0,h=0,p=t,g=n,m=i?1:0;if(a!=0){for(var v=o||i||a==1||s[a-2].dispose!=0?1:2,C=0,S=1e9,_=0;_<v;_++){for(var P=new Uint8Array(e[a-1-_]),D=new Uint32Array(e[a-1-_]),F=t,I=n,E=-1,b=-1,x=0;x<n;x++)for(var k=0;k<t;k++){var A=x*t+k;c[A]!=D[A]&&(k<F&&(F=k),k>E&&(E=k),x<I&&(I=x),x>b&&(b=x))}E==-1&&(F=I=E=b=0),r&&((F&1)==1&&F--,(I&1)==1&&I--);var O=(E-F+1)*(b-I+1);O<S&&(S=O,C=_,d=F,h=I,p=E-F+1,g=b-I+1)}var P=new Uint8Array(e[a-1-C]);C==1&&(s[a-1].dispose=2),u=new Uint8Array(p*g*4),re._copyTile(P,t,n,u,p,g,-d,-h,0),m=re._copyTile(l,t,n,u,p,g,-d,-h,3)?1:0,m==1?re.encode._prepareDiff(l,t,n,u,{x:d,y:h,width:p,height:g}):re._copyTile(l,t,n,u,p,g,-d,-h,0)}else u=l.slice(0);s.push({rect:{x:d,y:h,width:p,height:g},img:u,blend:m,dispose:0})}if(i)for(var a=0;a<s.length;a++){var le=s[a];if(le.blend!=1){var Re=le.rect,Ue=s[a-1].rect,we=Math.min(Re.x,Ue.x),Ct=Math.min(Re.y,Ue.y),ln=Math.max(Re.x+Re.width,Ue.x+Ue.width),Ao=Math.max(Re.y+Re.height,Ue.y+Ue.height),Ws={x:we,y:Ct,width:ln-we,height:Ao-Ct};s[a-1].dispose=1,a-1!=0&&re.encode._updateFrame(e,t,n,s,a-1,Ws,r),re.encode._updateFrame(e,t,n,s,a,Ws,r)}}var wn=0;if(e.length!=1)for(var A=0;A<s.length;A++){var le=s[A];wn+=le.rect.width*le.rect.height}return s};re.encode._updateFrame=function(e,t,n,i,r,o,s){for(var a=Uint8Array,l=Uint32Array,c=new a(e[r-1]),u=new l(e[r-1]),d=r+1<e.length?new a(e[r+1]):null,h=new a(e[r]),p=new l(h.buffer),g=t,m=n,v=-1,C=-1,S=0;S<o.height;S++)for(var _=0;_<o.width;_++){var D=o.x+_,F=o.y+S,I=F*t+D,E=p[I];E==0||i[r-1].dispose==0&&u[I]==E&&(d==null||d[I*4+3]!=0)||(D<g&&(g=D),D>v&&(v=D),F<m&&(m=F),F>C&&(C=F))}v==-1&&(g=m=v=C=0),s&&((g&1)==1&&g--,(m&1)==1&&m--),o={x:g,y:m,width:v-g+1,height:C-m+1};var b=i[r];b.rect=o,b.blend=1,b.img=new Uint8Array(o.width*o.height*4),i[r-1].dispose==0?(re._copyTile(c,t,n,b.img,o.width,o.height,-o.x,-o.y,0),re.encode._prepareDiff(h,t,n,b.img,o)):re._copyTile(h,t,n,b.img,o.width,o.height,-o.x,-o.y,0)};re.encode._prepareDiff=function(e,t,n,i,r){re._copyTile(e,t,n,i,r.width,r.height,-r.x,-r.y,2)};re.encode._filterZero=function(e,t,n,i,r,o,s){var a=[],l=[0,1,2,3,4];o!=-1?l=[o]:(t*i>5e5||n==1)&&(l=[0]);var c;s&&(c={level:0});for(var u=s&&UZIP!=null?UZIP:iZ.default,d=0;d<l.length;d++){for(var h=0;h<t;h++)re.encode._filterLine(r,e,h,i,n,l[d]);a.push(u.deflate(r,c))}for(var p,g=1e9,d=0;d<a.length;d++)a[d].length<g&&(p=d,g=a[d].length);return a[p]};re.encode._filterLine=function(e,t,n,i,r,o){var s=n*i,a=s+n,l=re.decode._paeth;if(e[a]=o,a++,o==0)if(i<500)for(var c=0;c<i;c++)e[a+c]=t[s+c];else e.set(new Uint8Array(t.buffer,s,i),a);else if(o==1){for(var c=0;c<r;c++)e[a+c]=t[s+c];for(var c=r;c<i;c++)e[a+c]=t[s+c]-t[s+c-r]+256&255}else if(n==0){for(var c=0;c<r;c++)e[a+c]=t[s+c];if(o==2)for(var c=r;c<i;c++)e[a+c]=t[s+c];if(o==3)for(var c=r;c<i;c++)e[a+c]=t[s+c]-(t[s+c-r]>>1)+256&255;if(o==4)for(var c=r;c<i;c++)e[a+c]=t[s+c]-l(t[s+c-r],0,0)+256&255}else{if(o==2)for(var c=0;c<i;c++)e[a+c]=t[s+c]+256-t[s+c-i]&255;if(o==3){for(var c=0;c<r;c++)e[a+c]=t[s+c]+256-(t[s+c-i]>>1)&255;for(var c=r;c<i;c++)e[a+c]=t[s+c]+256-(t[s+c-i]+t[s+c-r]>>1)&255}if(o==4){for(var c=0;c<r;c++)e[a+c]=t[s+c]+256-l(0,t[s+c-i],0)&255;for(var c=r;c<i;c++)e[a+c]=t[s+c]+256-l(t[s+c-r],t[s+c-i],t[s+c-r-i])&255}}};re.crc={table:function(){for(var e=new Uint32Array(256),t=0;t<256;t++){for(var n=t,i=0;i<8;i++)n&1?n=3988292384^n>>>1:n=n>>>1;e[t]=n}return e}(),update:function(e,t,n,i){for(var r=0;r<i;r++)e=re.crc.table[(e^t[n+r])&255]^e>>>8;return e},crc:function(e,t,n){return re.crc.update(4294967295,e,t,n)^4294967295}};re.quantize=function(e,t){for(var n=new Uint8Array(e),i=n.slice(0),r=new Uint32Array(i.buffer),o=re.quantize.getKDtree(i,t),s=o[0],a=o[1],l=re.quantize.planeDst,c=n,u=r,d=c.length,h=new Uint8Array(n.length>>2),p=0;p<d;p+=4){var g=c[p]*.00392156862745098,m=c[p+1]*(1/255),v=c[p+2]*(1/255),C=c[p+3]*(1/255),S=re.quantize.getNearest(s,g,m,v,C);h[p>>2]=S.ind,u[p>>2]=S.est.rgba}return{abuf:i.buffer,inds:h,plte:a}};re.quantize.getKDtree=function(e,t,n){n==null&&(n=1e-4);var i=new Uint32Array(e.buffer),r={i0:0,i1:e.length,bst:null,est:null,tdst:0,left:null,right:null};r.bst=re.quantize.stats(e,r.i0,r.i1),r.est=re.quantize.estats(r.bst);for(var o=[r];o.length<t;){for(var s=0,a=0,l=0;l<o.length;l++)o[l].est.L>s&&(s=o[l].est.L,a=l);if(s<n)break;var c=o[a],u=re.quantize.splitPixels(e,i,c.i0,c.i1,c.est.e,c.est.eMq255),d=c.i0>=u||c.i1<=u;if(d){c.est.L=0;continue}var h={i0:c.i0,i1:u,bst:null,est:null,tdst:0,left:null,right:null};h.bst=re.quantize.stats(e,h.i0,h.i1),h.est=re.quantize.estats(h.bst);var p={i0:u,i1:c.i1,bst:null,est:null,tdst:0,left:null,right:null};p.bst={R:[],m:[],N:c.bst.N-h.bst.N};for(var l=0;l<16;l++)p.bst.R[l]=c.bst.R[l]-h.bst.R[l];for(var l=0;l<4;l++)p.bst.m[l]=c.bst.m[l]-h.bst.m[l];p.est=re.quantize.estats(p.bst),c.left=h,c.right=p,o[a]=h,o.push(p)}o.sort(function(g,m){return m.bst.N-g.bst.N});for(var l=0;l<o.length;l++)o[l].ind=l;return[r,o]};re.quantize.getNearest=function(e,t,n,i,r){if(e.left==null)return e.tdst=re.quantize.dist(e.est.q,t,n,i,r),e;var o=re.quantize.planeDst(e.est,t,n,i,r),s=e.left,a=e.right;o>0&&(s=e.right,a=e.left);var l=re.quantize.getNearest(s,t,n,i,r);if(l.tdst<=o*o)return l;var c=re.quantize.getNearest(a,t,n,i,r);return c.tdst<l.tdst?c:l};re.quantize.planeDst=function(e,t,n,i,r){var o=e.e;return o[0]*t+o[1]*n+o[2]*i+o[3]*r-e.eMq};re.quantize.dist=function(e,t,n,i,r){var o=t-e[0],s=n-e[1],a=i-e[2],l=r-e[3];return o*o+s*s+a*a+l*l};re.quantize.splitPixels=function(e,t,n,i,r,o){var s=re.quantize.vecDot;i-=4;for(var a=0;n<i;){for(;s(e,n,r)<=o;)n+=4;for(;s(e,i,r)>o;)i-=4;if(n>=i)break;var l=t[n>>2];t[n>>2]=t[i>>2],t[i>>2]=l,n+=4,i-=4}for(;s(e,n,r)>o;)n-=4;return n+4};re.quantize.vecDot=function(e,t,n){return e[t]*n[0]+e[t+1]*n[1]+e[t+2]*n[2]+e[t+3]*n[3]};re.quantize.stats=function(e,t,n){for(var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=[0,0,0,0],o=n-t>>2,s=t;s<n;s+=4){var a=e[s]*.00392156862745098,l=e[s+1]*(1/255),c=e[s+2]*(1/255),u=e[s+3]*(1/255);r[0]+=a,r[1]+=l,r[2]+=c,r[3]+=u,i[0]+=a*a,i[1]+=a*l,i[2]+=a*c,i[3]+=a*u,i[5]+=l*l,i[6]+=l*c,i[7]+=l*u,i[10]+=c*c,i[11]+=c*u,i[15]+=u*u}return i[4]=i[1],i[8]=i[2],i[9]=i[6],i[12]=i[3],i[13]=i[7],i[14]=i[11],{R:i,m:r,N:o}};re.quantize.estats=function(e){var t=e.R,n=e.m,i=e.N,r=n[0],o=n[1],s=n[2],a=n[3],l=i==0?0:1/i,c=[t[0]-r*r*l,t[1]-r*o*l,t[2]-r*s*l,t[3]-r*a*l,t[4]-o*r*l,t[5]-o*o*l,t[6]-o*s*l,t[7]-o*a*l,t[8]-s*r*l,t[9]-s*o*l,t[10]-s*s*l,t[11]-s*a*l,t[12]-a*r*l,t[13]-a*o*l,t[14]-a*s*l,t[15]-a*a*l],u=c,d=re.M4,h=[.5,.5,.5,.5],p=0,g=0;if(i!=0)for(var m=0;m<10&&(h=d.multVec(u,h),g=Math.sqrt(d.dot(h,h)),h=d.sml(1/g,h),!(Math.abs(g-p)<1e-9));m++)p=g;var v=[r*l,o*l,s*l,a*l],C=d.dot(d.sml(255,v),h);return{Cov:c,q:v,e:h,L:p,eMq255:C,eMq:d.dot(h,v),rgba:(Math.round(255*v[3])<<24|Math.round(255*v[2])<<16|Math.round(255*v[1])<<8|Math.round(255*v[0])<<0)>>>0}};re.M4={multVec:function(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],e[4]*t[0]+e[5]*t[1]+e[6]*t[2]+e[7]*t[3],e[8]*t[0]+e[9]*t[1]+e[10]*t[2]+e[11]*t[3],e[12]*t[0]+e[13]*t[1]+e[14]*t[2]+e[15]*t[3]]},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},sml:function(e,t){return[e*t[0],e*t[1],e*t[2],e*t[3]]}};re.encode.concatRGBA=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].byteLength;for(var i=new Uint8Array(t),r=0,n=0;n<e.length;n++){for(var o=new Uint8Array(e[n]),s=o.length,a=0;a<s;a+=4){var l=o[a],c=o[a+1],u=o[a+2],d=o[a+3];d==0&&(l=c=u=0),i[r+a]=l,i[r+a+1]=c,i[r+a+2]=u,i[r+a+3]=d}r+=s}return i.buffer};var bL=re;var oPe=function(e){if(e===0)return Vm.Greyscale;if(e===2)return Vm.Truecolour;if(e===3)return Vm.IndexedColour;if(e===4)return Vm.GreyscaleWithAlpha;if(e===6)return Vm.TruecolourWithAlpha;throw new Error("Unknown color type: "+e)},sPe=function(e){for(var t=Math.floor(e.length/4),n=new Uint8Array(t*3),i=new Uint8Array(t*1),r=0,o=0,s=0;r<e.length;)n[o++]=e[r++],n[o++]=e[r++],n[o++]=e[r++],i[s++]=e[r++];return{rgbChannel:n,alphaChannel:i}},Vm=function(e){return e.Greyscale="Greyscale",e.Truecolour="Truecolour",e.IndexedColour="IndexedColour",e.GreyscaleWithAlpha="GreyscaleWithAlpha",e.TruecolourWithAlpha="TruecolourWithAlpha",e}(Vm||{}),rZ=function(){function e(t){var n=bL.decode(t),i=bL.toRGBA8(n);if(i.length>1)throw new Error("Animated PNGs are not supported");var r=new Uint8Array(i[0]),o=sPe(r),s=o.rgbChannel,a=o.alphaChannel;this.rgbChannel=s;var l=a.some(function(c){return c<255});l&&(this.alphaChannel=a),this.type=oPe(n.ctype),this.width=n.width,this.height=n.height,this.bitsPerComponent=8}return e.load=function(t){return new e(t)},e}();var aPe=function(){function e(t){this.image=t,this.bitsPerComponent=t.bitsPerComponent,this.width=t.width,this.height=t.height,this.colorSpace="DeviceRGB"}return e.for=function(t){return Ae(this,void 0,void 0,function(){var n;return Me(this,function(i){return n=rZ.load(t),[2,new e(n)]})})},e.prototype.embedIntoContext=function(t,n){return Ae(this,void 0,void 0,function(){var i,r;return Me(this,function(o){return i=this.embedAlphaChannel(t),r=t.flateStream(this.image.rgbChannel,{Type:"XObject",Subtype:"Image",BitsPerComponent:this.image.bitsPerComponent,Width:this.image.width,Height:this.image.height,ColorSpace:this.colorSpace,SMask:i}),n?(t.assign(n,r),[2,n]):[2,t.register(r)]})})},e.prototype.embedAlphaChannel=function(t){if(this.image.alphaChannel){var n=t.flateStream(this.image.alphaChannel,{Type:"XObject",Subtype:"Image",Height:this.image.height,Width:this.image.width,BitsPerComponent:this.image.bitsPerComponent,ColorSpace:"DeviceGray",Decode:[0,1]});return t.register(n)}},e}(),rw=aPe;var lPe=function(){function e(t,n,i){this.bytes=t,this.start=n||0,this.pos=this.start,this.end=n&&i?n+i:this.bytes.length}return Object.defineProperty(e.prototype,"length",{get:function(){return this.end-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this.length===0},enumerable:!1,configurable:!0}),e.prototype.getByte=function(){return this.pos>=this.end?-1:this.bytes[this.pos++]},e.prototype.getUint16=function(){var t=this.getByte(),n=this.getByte();return t===-1||n===-1?-1:(t<<8)+n},e.prototype.getInt32=function(){var t=this.getByte(),n=this.getByte(),i=this.getByte(),r=this.getByte();return(t<<24)+(n<<16)+(i<<8)+r},e.prototype.getBytes=function(t,n){n===void 0&&(n=!1);var i=this.bytes,r=this.pos,o=this.end;if(t){var a=r+t;a>o&&(a=o),this.pos=a;var s=i.subarray(r,a);return n?new Uint8ClampedArray(s):s}else{var s=i.subarray(r,o);return n?new Uint8ClampedArray(s):s}},e.prototype.peekByte=function(){var t=this.getByte();return this.pos--,t},e.prototype.peekBytes=function(t,n){n===void 0&&(n=!1);var i=this.getBytes(t,n);return this.pos-=i.length,i},e.prototype.skip=function(t){t||(t=1),this.pos+=t},e.prototype.reset=function(){this.pos=this.start},e.prototype.moveStart=function(){this.start=this.pos},e.prototype.makeSubStream=function(t,n){return new e(this.bytes,t,n)},e.prototype.decode=function(){return this.bytes},e}(),qD=lPe;var cPe=new Uint8Array(0),uPe=function(){function e(t){if(this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=cPe,this.minBufferLength=512,t)for(;this.minBufferLength<t;)this.minBufferLength*=2}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){for(;!this.eof&&this.bufferLength===0;)this.readBlock();return this.bufferLength===0},enumerable:!1,configurable:!0}),e.prototype.getByte=function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.pos++]},e.prototype.getUint16=function(){var t=this.getByte(),n=this.getByte();return t===-1||n===-1?-1:(t<<8)+n},e.prototype.getInt32=function(){var t=this.getByte(),n=this.getByte(),i=this.getByte(),r=this.getByte();return(t<<24)+(n<<16)+(i<<8)+r},e.prototype.getBytes=function(t,n){n===void 0&&(n=!1);var i,r=this.pos;if(t){for(this.ensureBuffer(r+t),i=r+t;!this.eof&&this.bufferLength<i;)this.readBlock();var o=this.bufferLength;i>o&&(i=o)}else{for(;!this.eof;)this.readBlock();i=this.bufferLength}this.pos=i;var s=this.buffer.subarray(r,i);return n&&!(s instanceof Uint8ClampedArray)?new Uint8ClampedArray(s):s},e.prototype.peekByte=function(){var t=this.getByte();return this.pos--,t},e.prototype.peekBytes=function(t,n){n===void 0&&(n=!1);var i=this.getBytes(t,n);return this.pos-=i.length,i},e.prototype.skip=function(t){t||(t=1),this.pos+=t},e.prototype.reset=function(){this.pos=0},e.prototype.makeSubStream=function(t,n){for(var i=t+n;this.bufferLength<=i&&!this.eof;)this.readBlock();return new qD(this.buffer,t,n)},e.prototype.decode=function(){for(;!this.eof;)this.readBlock();return this.buffer.subarray(0,this.bufferLength)},e.prototype.readBlock=function(){throw new ur(this.constructor.name,"readBlock")},e.prototype.ensureBuffer=function(t){var n=this.buffer;if(t<=n.byteLength)return n;for(var i=this.minBufferLength;i<t;)i*=2;var r=new Uint8Array(i);return r.set(n),this.buffer=r},e}(),bl=uPe;var oZ=function(e){return e===32||e===9||e===13||e===10},dPe=function(e){W(t,e);function t(n,i){var r=e.call(this,i)||this;return r.stream=n,r.input=new Uint8Array(5),i&&(i=.8*i),r}return t.prototype.readBlock=function(){for(var n=126,i=122,r=-1,o=this.stream,s=o.getByte();oZ(s);)s=o.getByte();if(s===r||s===n){this.eof=!0;return}var a=this.bufferLength,l,c;if(s===i){for(l=this.ensureBuffer(a+4),c=0;c<4;++c)l[a+c]=0;this.bufferLength+=4}else{var u=this.input;for(u[0]=s,c=1;c<5;++c){for(s=o.getByte();oZ(s);)s=o.getByte();if(u[c]=s,s===r||s===n)break}if(l=this.ensureBuffer(a+c-1),this.bufferLength+=c-1,c<5){for(;c<5;++c)u[c]=117;this.eof=!0}var d=0;for(c=0;c<5;++c)d=d*85+(u[c]-33);for(c=3;c>=0;--c)l[a+c]=d&255,d>>=8}},t}(bl),sZ=dPe;var hPe=function(e){W(t,e);function t(n,i){var r=e.call(this,i)||this;return r.stream=n,r.firstDigit=-1,i&&(i=.5*i),r}return t.prototype.readBlock=function(){var n=8e3,i=this.stream.getBytes(n);if(!i.length){this.eof=!0;return}for(var r=i.length+1>>1,o=this.ensureBuffer(this.bufferLength+r),s=this.bufferLength,a=this.firstDigit,l=0,c=i.length;l<c;l++){var u=i[l],d=void 0;if(u>=48&&u<=57)d=u&15;else if(u>=65&&u<=70||u>=97&&u<=102)d=(u&15)+9;else if(u===62){this.eof=!0;break}else continue;a<0?a=d:(o[s++]=a<<4|d,a=-1)}a>=0&&this.eof&&(o[s++]=a<<4,a=-1),this.firstDigit=a,this.bufferLength=s},t}(bl),aZ=hPe;var lZ=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),fPe=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),pPe=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),gPe=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],mPe=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5],vPe=function(e){W(t,e);function t(n,i){var r=e.call(this,i)||this;r.stream=n;var o=n.getByte(),s=n.getByte();if(o===-1||s===-1)throw new Error("Invalid header in flate stream: "+o+", "+s);if((o&15)!==8)throw new Error("Unknown compression method in flate stream: "+o+", "+s);if(((o<<8)+s)%31!==0)throw new Error("Bad FCHECK in flate stream: "+o+", "+s);if(s&32)throw new Error("FDICT bit set in flate stream: "+o+", "+s);return r.codeSize=0,r.codeBuf=0,r}return t.prototype.readBlock=function(){var n,i,r=this.stream,o=this.getBits(3);if(o&1&&(this.eof=!0),o>>=1,o===0){var s=void 0;if((s=r.getByte())===-1)throw new Error("Bad block header in flate stream");var a=s;if((s=r.getByte())===-1)throw new Error("Bad block header in flate stream");if(a|=s<<8,(s=r.getByte())===-1)throw new Error("Bad block header in flate stream");var l=s;if((s=r.getByte())===-1)throw new Error("Bad block header in flate stream");if(l|=s<<8,l!==(~a&65535)&&(a!==0||l!==0))throw new Error("Bad uncompressed block length in flate stream");this.codeBuf=0,this.codeSize=0;var c=this.bufferLength;n=this.ensureBuffer(c+a);var u=c+a;if(this.bufferLength=u,a===0)r.peekByte()===-1&&(this.eof=!0);else for(var d=c;d<u;++d){if((s=r.getByte())===-1){this.eof=!0;break}n[d]=s}return}var h,p;if(o===1)h=gPe,p=mPe;else if(o===2){var g=this.getBits(5)+257,m=this.getBits(5)+1,v=this.getBits(4)+4,C=new Uint8Array(lZ.length),S=void 0;for(S=0;S<v;++S)C[lZ[S]]=this.getBits(3);var _=this.generateHuffmanTable(C);i=0,S=0;for(var D=g+m,F=new Uint8Array(D),I=void 0,E=void 0,b=void 0;S<D;){var x=this.getCode(_);if(x===16)I=2,E=3,b=i;else if(x===17)I=3,E=3,b=i=0;else if(x===18)I=7,E=11,b=i=0;else{F[S++]=i=x;continue}for(var k=this.getBits(I)+E;k-- >0;)F[S++]=b}h=this.generateHuffmanTable(F.subarray(0,g)),p=this.generateHuffmanTable(F.subarray(g,D))}else throw new Error("Unknown block type in flate stream");n=this.buffer;for(var A=n?n.length:0,O=this.bufferLength;;){var P=this.getCode(h);if(P<256){O+1>=A&&(n=this.ensureBuffer(O+1),A=n.length),n[O++]=P;continue}if(P===256){this.bufferLength=O;return}P-=257,P=fPe[P];var le=P>>16;le>0&&(le=this.getBits(le)),i=(P&65535)+le,P=this.getCode(p),P=pPe[P],le=P>>16,le>0&&(le=this.getBits(le));var Re=(P&65535)+le;O+i>=A&&(n=this.ensureBuffer(O+i),A=n.length);for(var Ue=0;Ue<i;++Ue,++O)n[O]=n[O-Re]}},t.prototype.getBits=function(n){for(var i=this.stream,r=this.codeSize,o=this.codeBuf,s;r<n;){if((s=i.getByte())===-1)throw new Error("Bad encoding in flate stream");o|=s<<r,r+=8}return s=o&(1<<n)-1,this.codeBuf=o>>n,this.codeSize=r-=n,s},t.prototype.getCode=function(n){for(var i=this.stream,r=n[0],o=n[1],s=this.codeSize,a=this.codeBuf,l;s<o&&(l=i.getByte())!==-1;)a|=l<<s,s+=8;var c=r[a&(1<<o)-1];typeof r=="number"&&console.log("FLATE:",c);var u=c>>16,d=c&65535;if(u<1||s<u)throw new Error("Bad encoding in flate stream");return this.codeBuf=a>>u,this.codeSize=s-u,d},t.prototype.generateHuffmanTable=function(n){var i=n.length,r=0,o;for(o=0;o<i;++o)n[o]>r&&(r=n[o]);for(var s=1<<r,a=new Int32Array(s),l=1,c=0,u=2;l<=r;++l,c<<=1,u<<=1)for(var d=0;d<i;++d)if(n[d]===l){var h=0,p=c;for(o=0;o<l;++o)h=h<<1|p&1,p>>=1;for(o=h;o<s;o+=u)a[o]=l<<16|d;++c}return[a,r]},t}(bl),cZ=vPe;var yPe=function(e){W(t,e);function t(n,i,r){var o=e.call(this,i)||this;o.stream=n,o.cachedData=0,o.bitsCached=0;for(var s=4096,a={earlyChange:r,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(s),dictionaryLengths:new Uint16Array(s),dictionaryPrevCodes:new Uint16Array(s),currentSequence:new Uint8Array(s),currentSequenceLength:0},l=0;l<256;++l)a.dictionaryValues[l]=l,a.dictionaryLengths[l]=1;return o.lzwState=a,o}return t.prototype.readBlock=function(){var n=512,i=n*2,r=n,o,s,a,l=this.lzwState;if(l){var c=l.earlyChange,u=l.nextCode,d=l.dictionaryValues,h=l.dictionaryLengths,p=l.dictionaryPrevCodes,g=l.codeLength,m=l.prevCode,v=l.currentSequence,C=l.currentSequenceLength,S=0,_=this.bufferLength,D=this.ensureBuffer(this.bufferLength+i);for(o=0;o<n;o++){var F=this.readBits(g),I=C>0;if(!F||F<256)v[0]=F,C=1;else if(F>=258)if(F<u)for(C=h[F],s=C-1,a=F;s>=0;s--)v[s]=d[a],a=p[a];else v[C++]=v[0];else if(F===256){g=9,u=258,C=0;continue}else{this.eof=!0,delete this.lzwState;break}if(I&&(p[u]=m,h[u]=h[m]+1,d[u]=v[0],u++,g=u+c&u+c-1?g:Math.min(Math.log(u+c)/.6931471805599453+1,12)|0),m=F,S+=C,i<S){do i+=r;while(i<S);D=this.ensureBuffer(this.bufferLength+i)}for(s=0;s<C;s++)D[_++]=v[s]}l.nextCode=u,l.codeLength=g,l.prevCode=m,l.currentSequenceLength=C,this.bufferLength=_}},t.prototype.readBits=function(n){for(var i=this.bitsCached,r=this.cachedData;i<n;){var o=this.stream.getByte();if(o===-1)return this.eof=!0,null;r=r<<8|o,i+=8}return this.bitsCached=i-=n,this.cachedData=r,r>>>i&(1<<n)-1},t}(bl),uZ=yPe;var CPe=function(e){W(t,e);function t(n,i){var r=e.call(this,i)||this;return r.stream=n,r}return t.prototype.readBlock=function(){var n=this.stream.getBytes(2);if(!n||n.length<2||n[0]===128){this.eof=!0;return}var i,r=this.bufferLength,o=n[0];if(o<128){if(i=this.ensureBuffer(r+o+1),i[r++]=n[1],o>0){var s=this.stream.getBytes(o);i.set(s,r),r+=o}}else{o=257-o;var a=n[1];i=this.ensureBuffer(r+o+1);for(var l=0;l<o;l++)i[r++]=a}this.bufferLength=r},t}(bl),dZ=CPe;var hZ=function(e,t,n){if(t===T.of("FlateDecode"))return new cZ(e);if(t===T.of("LZWDecode")){var i=1;if(n instanceof Te){var r=n.lookup(T.of("EarlyChange"));r instanceof Ee&&(i=r.asNumber())}return new uZ(e,void 0,i)}if(t===T.of("ASCII85Decode"))return new sZ(e);if(t===T.of("ASCIIHexDecode"))return new aZ(e);if(t===T.of("RunLengthDecode"))return new dZ(e);throw new T$(t.asString())},ow=function(e){var t=e.dict,n=e.contents,i=new qD(n),r=t.lookup(T.of("Filter")),o=t.lookup(T.of("DecodeParms"));if(r instanceof T)i=hZ(i,r,o);else if(r instanceof Ye)for(var s=0,a=r.size();s<a;s++)i=hZ(i,r.lookup(s,T),o&&o.lookupMaybe(s,Te));else if(r)throw new wf([T,Ye],r);return i};var wPe=function(e){var t=e.MediaBox(),n=t.lookup(2,Ee).asNumber()-t.lookup(0,Ee).asNumber(),i=t.lookup(3,Ee).asNumber()-t.lookup(1,Ee).asNumber();return{left:0,bottom:0,right:n,top:i}},bPe=function(e){return[1,0,0,1,-e.left,-e.bottom]},SPe=function(){function e(t,n,i){this.page=t;var r=n??wPe(t);this.width=r.right-r.left,this.height=r.top-r.bottom,this.boundingBox=r,this.transformationMatrix=i??bPe(r)}return e.for=function(t,n,i){return Ae(this,void 0,void 0,function(){return Me(this,function(r){return[2,new e(t,n,i)]})})},e.prototype.embedIntoContext=function(t,n){return Ae(this,void 0,void 0,function(){var i,r,o,s,a,l,c,u,d,h;return Me(this,function(p){if(i=this.page.normalizedEntries(),r=i.Contents,o=i.Resources,!r)throw new R$;return s=this.decodeContents(r),a=this.boundingBox,l=a.left,c=a.bottom,u=a.right,d=a.top,h=t.flateStream(s,{Type:"XObject",Subtype:"Form",FormType:1,BBox:[l,c,u,d],Matrix:this.transformationMatrix,Resources:o}),n?(t.assign(n,h),[2,n]):[2,t.register(h)]})})},e.prototype.decodeContents=function(t){for(var n=Uint8Array.of(M.Newline),i=[],r=0,o=t.size();r<o;r++){var s=t.lookup(r,Tn),a=void 0;if(s instanceof wl)a=ow(s).decode();else if(s instanceof Dc)a=s.getUnencodedContents();else throw new I$(s);i.push(a,n)}return nQ.apply(void 0,i)},e}(),sw=SPe;var KD=function(e,t){if(e!==void 0)return t[e]},aw=function(e){return e.UseNone="UseNone",e.UseOutlines="UseOutlines",e.UseThumbs="UseThumbs",e.UseOC="UseOC",e}(aw||{}),lw=function(e){return e.L2R="L2R",e.R2L="R2L",e}(lw||{}),cw=function(e){return e.None="None",e.AppDefault="AppDefault",e}(cw||{}),YD=function(e){return e.Simplex="Simplex",e.DuplexFlipShortEdge="DuplexFlipShortEdge",e.DuplexFlipLongEdge="DuplexFlipLongEdge",e}(YD||{}),_Pe=function(){function e(t){this.dict=t}return e.prototype.lookupBool=function(t){var n=this.dict.lookup(T.of(t));if(n instanceof xc)return n},e.prototype.lookupName=function(t){var n=this.dict.lookup(T.of(t));if(n instanceof T)return n},e.prototype.HideToolbar=function(){return this.lookupBool("HideToolbar")},e.prototype.HideMenubar=function(){return this.lookupBool("HideMenubar")},e.prototype.HideWindowUI=function(){return this.lookupBool("HideWindowUI")},e.prototype.FitWindow=function(){return this.lookupBool("FitWindow")},e.prototype.CenterWindow=function(){return this.lookupBool("CenterWindow")},e.prototype.DisplayDocTitle=function(){return this.lookupBool("DisplayDocTitle")},e.prototype.NonFullScreenPageMode=function(){return this.lookupName("NonFullScreenPageMode")},e.prototype.Direction=function(){return this.lookupName("Direction")},e.prototype.PrintScaling=function(){return this.lookupName("PrintScaling")},e.prototype.Duplex=function(){return this.lookupName("Duplex")},e.prototype.PickTrayByPDFSize=function(){return this.lookupBool("PickTrayByPDFSize")},e.prototype.PrintPageRange=function(){var t=this.dict.lookup(T.of("PrintPageRange"));if(t instanceof Ye)return t},e.prototype.NumCopies=function(){var t=this.dict.lookup(T.of("NumCopies"));if(t instanceof Ee)return t},e.prototype.getHideToolbar=function(){var t,n;return(n=(t=this.HideToolbar())===null||t===void 0?void 0:t.asBoolean())!==null&&n!==void 0?n:!1},e.prototype.getHideMenubar=function(){var t,n;return(n=(t=this.HideMenubar())===null||t===void 0?void 0:t.asBoolean())!==null&&n!==void 0?n:!1},e.prototype.getHideWindowUI=function(){var t,n;return(n=(t=this.HideWindowUI())===null||t===void 0?void 0:t.asBoolean())!==null&&n!==void 0?n:!1},e.prototype.getFitWindow=function(){var t,n;return(n=(t=this.FitWindow())===null||t===void 0?void 0:t.asBoolean())!==null&&n!==void 0?n:!1},e.prototype.getCenterWindow=function(){var t,n;return(n=(t=this.CenterWindow())===null||t===void 0?void 0:t.asBoolean())!==null&&n!==void 0?n:!1},e.prototype.getDisplayDocTitle=function(){var t,n;return(n=(t=this.DisplayDocTitle())===null||t===void 0?void 0:t.asBoolean())!==null&&n!==void 0?n:!1},e.prototype.getNonFullScreenPageMode=function(){var t,n,i=(t=this.NonFullScreenPageMode())===null||t===void 0?void 0:t.decodeText();return(n=KD(i,aw))!==null&&n!==void 0?n:aw.UseNone},e.prototype.getReadingDirection=function(){var t,n,i=(t=this.Direction())===null||t===void 0?void 0:t.decodeText();return(n=KD(i,lw))!==null&&n!==void 0?n:lw.L2R},e.prototype.getPrintScaling=function(){var t,n,i=(t=this.PrintScaling())===null||t===void 0?void 0:t.decodeText();return(n=KD(i,cw))!==null&&n!==void 0?n:cw.AppDefault},e.prototype.getDuplex=function(){var t,n=(t=this.Duplex())===null||t===void 0?void 0:t.decodeText();return KD(n,YD)},e.prototype.getPickTrayByPDFSize=function(){var t;return(t=this.PickTrayByPDFSize())===null||t===void 0?void 0:t.asBoolean()},e.prototype.getPrintPageRange=function(){var t=this.PrintPageRange();if(!t)return[];for(var n=[],i=0;i<t.size();i+=2){var r=t.lookup(i,Ee).asNumber(),o=t.lookup(i+1,Ee).asNumber();n.push({start:r,end:o})}return n},e.prototype.getNumCopies=function(){var t,n;return(n=(t=this.NumCopies())===null||t===void 0?void 0:t.asNumber())!==null&&n!==void 0?n:1},e.prototype.setHideToolbar=function(t){var n=this.dict.context.obj(t);this.dict.set(T.of("HideToolbar"),n)},e.prototype.setHideMenubar=function(t){var n=this.dict.context.obj(t);this.dict.set(T.of("HideMenubar"),n)},e.prototype.setHideWindowUI=function(t){var n=this.dict.context.obj(t);this.dict.set(T.of("HideWindowUI"),n)},e.prototype.setFitWindow=function(t){var n=this.dict.context.obj(t);this.dict.set(T.of("FitWindow"),n)},e.prototype.setCenterWindow=function(t){var n=this.dict.context.obj(t);this.dict.set(T.of("CenterWindow"),n)},e.prototype.setDisplayDocTitle=function(t){var n=this.dict.context.obj(t);this.dict.set(T.of("DisplayDocTitle"),n)},e.prototype.setNonFullScreenPageMode=function(t){_a(t,"nonFullScreenPageMode",aw);var n=T.of(t);this.dict.set(T.of("NonFullScreenPageMode"),n)},e.prototype.setReadingDirection=function(t){_a(t,"readingDirection",lw);var n=T.of(t);this.dict.set(T.of("Direction"),n)},e.prototype.setPrintScaling=function(t){_a(t,"printScaling",cw);var n=T.of(t);this.dict.set(T.of("PrintScaling"),n)},e.prototype.setDuplex=function(t){_a(t,"duplex",YD);var n=T.of(t);this.dict.set(T.of("Duplex"),n)},e.prototype.setPickTrayByPDFSize=function(t){var n=this.dict.context.obj(t);this.dict.set(T.of("PickTrayByPDFSize"),n)},e.prototype.setPrintPageRange=function(t){Array.isArray(t)||(t=[t]);for(var n=[],i=0,r=t.length;i<r;i++)n.push(t[i].start),n.push(t[i].end);VD(n,"printPageRange",["number"]);var o=this.dict.context.obj(n);this.dict.set(T.of("PrintPageRange"),o)},e.prototype.setNumCopies=function(t){Sr(t,"numCopies",1,Number.MAX_VALUE),D$(t,"numCopies");var n=this.dict.context.obj(t);this.dict.set(T.of("NumCopies"),n)},e.fromDict=function(t){return new e(t)},e.create=function(t){var n=t.obj({});return new e(n)},e}(),QD=_Pe;var EPe=/\/([^\0\t\n\f\r\ ]+)[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]+Tf/,xPe=function(){function e(t,n){this.dict=t,this.ref=n}return e.prototype.T=function(){return this.dict.lookupMaybe(T.of("T"),dt,_e)},e.prototype.Ff=function(){var t=this.getInheritableAttribute(T.of("Ff"));return this.dict.context.lookupMaybe(t,Ee)},e.prototype.V=function(){var t=this.getInheritableAttribute(T.of("V"));return this.dict.context.lookup(t)},e.prototype.Kids=function(){return this.dict.lookupMaybe(T.of("Kids"),Ye)},e.prototype.DA=function(){var t=this.dict.lookup(T.of("DA"));if(t instanceof dt||t instanceof _e)return t},e.prototype.setKids=function(t){this.dict.set(T.of("Kids"),this.dict.context.obj(t))},e.prototype.getParent=function(){var t=this.dict.get(T.of("Parent"));if(t instanceof $e){var n=this.dict.lookup(T.of("Parent"),Te);return new e(n,t)}},e.prototype.setParent=function(t){t?this.dict.set(T.of("Parent"),t):this.dict.delete(T.of("Parent"))},e.prototype.getFullyQualifiedName=function(){var t=this.getParent();return t?t.getFullyQualifiedName()+"."+this.getPartialName():this.getPartialName()},e.prototype.getPartialName=function(){var t;return(t=this.T())===null||t===void 0?void 0:t.decodeText()},e.prototype.setPartialName=function(t){t?this.dict.set(T.of("T"),_e.fromText(t)):this.dict.delete(T.of("T"))},e.prototype.setDefaultAppearance=function(t){this.dict.set(T.of("DA"),dt.of(t))},e.prototype.getDefaultAppearance=function(){var t=this.DA();return t instanceof _e?t.decodeText():t?.asString()},e.prototype.setFontSize=function(t){var n,i=(n=this.getFullyQualifiedName())!==null&&n!==void 0?n:"",r=this.getDefaultAppearance();if(!r)throw new P$(i);var o=DC(r,EPe);if(!o.match)throw new k$(i);var s=r.slice(0,o.pos-o.match[0].length),a=o.pos<=r.length?r.slice(o.pos):"",l=o.match[1],c=s+" /"+l+" "+t+" Tf "+a;this.setDefaultAppearance(c)},e.prototype.getFlags=function(){var t,n;return(n=(t=this.Ff())===null||t===void 0?void 0:t.asNumber())!==null&&n!==void 0?n:0},e.prototype.setFlags=function(t){this.dict.set(T.of("Ff"),Ee.of(t))},e.prototype.hasFlag=function(t){var n=this.getFlags();return(n&t)!==0},e.prototype.setFlag=function(t){var n=this.getFlags();this.setFlags(n|t)},e.prototype.clearFlag=function(t){var n=this.getFlags();this.setFlags(n&~t)},e.prototype.setFlagTo=function(t,n){n?this.setFlag(t):this.clearFlag(t)},e.prototype.getInheritableAttribute=function(t){var n;return this.ascend(function(i){n||(n=i.dict.get(t))}),n},e.prototype.ascend=function(t){t(this);var n=this.getParent();n&&n.ascend(t)},e}(),uw=xPe;var DPe=function(){function e(t){this.dict=t}return e.prototype.W=function(){var t=this.dict.lookup(T.of("W"));if(t instanceof Ee)return t},e.prototype.getWidth=function(){var t,n;return(n=(t=this.W())===null||t===void 0?void 0:t.asNumber())!==null&&n!==void 0?n:1},e.prototype.setWidth=function(t){var n=this.dict.context.obj(t);this.dict.set(T.of("W"),n)},e.fromDict=function(t){return new e(t)},e}(),XD=DPe;var TPe=function(){function e(t){this.dict=t}return e.prototype.Rect=function(){return this.dict.lookup(T.of("Rect"),Ye)},e.prototype.AP=function(){return this.dict.lookupMaybe(T.of("AP"),Te)},e.prototype.F=function(){var t=this.dict.lookup(T.of("F"));return this.dict.context.lookupMaybe(t,Ee)},e.prototype.getRectangle=function(){var t,n=this.Rect();return(t=n?.asRectangle())!==null&&t!==void 0?t:{x:0,y:0,width:0,height:0}},e.prototype.setRectangle=function(t){var n=t.x,i=t.y,r=t.width,o=t.height,s=this.dict.context.obj([n,i,n+r,i+o]);this.dict.set(T.of("Rect"),s)},e.prototype.getAppearanceState=function(){var t=this.dict.lookup(T.of("AS"));if(t instanceof T)return t},e.prototype.setAppearanceState=function(t){this.dict.set(T.of("AS"),t)},e.prototype.setAppearances=function(t){this.dict.set(T.of("AP"),t)},e.prototype.ensureAP=function(){var t=this.AP();return t||(t=this.dict.context.obj({}),this.dict.set(T.of("AP"),t)),t},e.prototype.getNormalAppearance=function(){var t=this.ensureAP(),n=t.get(T.of("N"));if(n instanceof $e||n instanceof Te)return n;throw new Error("Unexpected N type: "+n?.constructor.name)},e.prototype.setNormalAppearance=function(t){var n=this.ensureAP();n.set(T.of("N"),t)},e.prototype.setRolloverAppearance=function(t){var n=this.ensureAP();n.set(T.of("R"),t)},e.prototype.setDownAppearance=function(t){var n=this.ensureAP();n.set(T.of("D"),t)},e.prototype.removeRolloverAppearance=function(){var t=this.AP();t?.delete(T.of("R"))},e.prototype.removeDownAppearance=function(){var t=this.AP();t?.delete(T.of("D"))},e.prototype.getAppearances=function(){var t=this.AP();if(t){var n=t.lookup(T.of("N"),Te,Tn),i=t.lookupMaybe(T.of("R"),Te,Tn),r=t.lookupMaybe(T.of("D"),Te,Tn);return{normal:n,rollover:i,down:r}}},e.prototype.getFlags=function(){var t,n;return(n=(t=this.F())===null||t===void 0?void 0:t.asNumber())!==null&&n!==void 0?n:0},e.prototype.setFlags=function(t){this.dict.set(T.of("F"),Ee.of(t))},e.prototype.hasFlag=function(t){var n=this.getFlags();return(n&t)!==0},e.prototype.setFlag=function(t){var n=this.getFlags();this.setFlags(n|t)},e.prototype.clearFlag=function(t){var n=this.getFlags();this.setFlags(n&~t)},e.prototype.setFlagTo=function(t,n){n?this.setFlag(t):this.clearFlag(t)},e.fromDict=function(t){return new e(t)},e}(),SL=TPe;var RPe=function(){function e(t){this.dict=t}return e.prototype.R=function(){var t=this.dict.lookup(T.of("R"));if(t instanceof Ee)return t},e.prototype.BC=function(){var t=this.dict.lookup(T.of("BC"));if(t instanceof Ye)return t},e.prototype.BG=function(){var t=this.dict.lookup(T.of("BG"));if(t instanceof Ye)return t},e.prototype.CA=function(){var t=this.dict.lookup(T.of("CA"));if(t instanceof _e||t instanceof dt)return t},e.prototype.RC=function(){var t=this.dict.lookup(T.of("RC"));if(t instanceof _e||t instanceof dt)return t},e.prototype.AC=function(){var t=this.dict.lookup(T.of("AC"));if(t instanceof _e||t instanceof dt)return t},e.prototype.getRotation=function(){var t;return(t=this.R())===null||t===void 0?void 0:t.asNumber()},e.prototype.getBorderColor=function(){var t=this.BC();if(t){for(var n=[],i=0,r=t?.size();i<r;i++){var o=t.get(i);o instanceof Ee&&n.push(o.asNumber())}return n}},e.prototype.getBackgroundColor=function(){var t=this.BG();if(t){for(var n=[],i=0,r=t?.size();i<r;i++){var o=t.get(i);o instanceof Ee&&n.push(o.asNumber())}return n}},e.prototype.getCaptions=function(){var t=this.CA(),n=this.RC(),i=this.AC();return{normal:t?.decodeText(),rollover:n?.decodeText(),down:i?.decodeText()}},e.prototype.setRotation=function(t){var n=this.dict.context.obj(t);this.dict.set(T.of("R"),n)},e.prototype.setBorderColor=function(t){var n=this.dict.context.obj(t);this.dict.set(T.of("BC"),n)},e.prototype.setBackgroundColor=function(t){var n=this.dict.context.obj(t);this.dict.set(T.of("BG"),n)},e.prototype.setCaptions=function(t){var n=_e.fromText(t.normal);if(this.dict.set(T.of("CA"),n),t.rollover){var i=_e.fromText(t.rollover);this.dict.set(T.of("RC"),i)}else this.dict.delete(T.of("RC"));if(t.down){var r=_e.fromText(t.down);this.dict.set(T.of("AC"),r)}else this.dict.delete(T.of("AC"))},e.fromDict=function(t){return new e(t)},e}(),dw=RPe;var IPe=function(e){W(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.MK=function(){var n=this.dict.lookup(T.of("MK"));if(n instanceof Te)return n},t.prototype.BS=function(){var n=this.dict.lookup(T.of("BS"));if(n instanceof Te)return n},t.prototype.DA=function(){var n=this.dict.lookup(T.of("DA"));if(n instanceof dt||n instanceof _e)return n},t.prototype.P=function(){var n=this.dict.get(T.of("P"));if(n instanceof $e)return n},t.prototype.setP=function(n){this.dict.set(T.of("P"),n)},t.prototype.setDefaultAppearance=function(n){this.dict.set(T.of("DA"),dt.of(n))},t.prototype.getDefaultAppearance=function(){var n=this.DA();return n instanceof _e?n.decodeText():n?.asString()},t.prototype.getAppearanceCharacteristics=function(){var n=this.MK();if(n)return dw.fromDict(n)},t.prototype.getOrCreateAppearanceCharacteristics=function(){var n=this.MK();if(n)return dw.fromDict(n);var i=dw.fromDict(this.dict.context.obj({}));return this.dict.set(T.of("MK"),i.dict),i},t.prototype.getBorderStyle=function(){var n=this.BS();if(n)return XD.fromDict(n)},t.prototype.getOrCreateBorderStyle=function(){var n=this.BS();if(n)return XD.fromDict(n);var i=XD.fromDict(this.dict.context.obj({}));return this.dict.set(T.of("BS"),i.dict),i},t.prototype.getOnValue=function(){var n,i=(n=this.getAppearances())===null||n===void 0?void 0:n.normal;if(i instanceof Te)for(var r=i.keys(),o=0,s=r.length;o<s;o++){var a=r[o];if(a!==T.of("Off"))return a}},t.fromDict=function(n){return new t(n)},t.create=function(n,i){var r=n.obj({Type:"Annot",Subtype:"Widget",Rect:[0,0,0,0],Parent:i});return new t(r)},t}(SL),Bm=IPe;var FPe=function(e){W(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.FT=function(){var n=this.getInheritableAttribute(T.of("FT"));return this.dict.context.lookup(n,T)},t.prototype.getWidgets=function(){var n=this.Kids();if(!n)return[Bm.fromDict(this.dict)];for(var i=new Array(n.size()),r=0,o=n.size();r<o;r++){var s=n.lookup(r,Te);i[r]=Bm.fromDict(s)}return i},t.prototype.addWidget=function(n){var i=this.normalizedEntries().Kids;i.push(n)},t.prototype.removeWidget=function(n){var i=this.Kids();if(i){if(n<0||n>i.size())throw new km(n,0,i.size());i.remove(n)}else{if(n!==0)throw new km(n,0,0);this.setKids([])}},t.prototype.normalizedEntries=function(){var n=this.Kids();return n||(n=this.dict.context.obj([this.ref]),this.dict.set(T.of("Kids"),n)),{Kids:n}},t.fromDict=function(n,i){return new t(n,i)},t}(uw),os=FPe;var APe=function(e){W(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.Opt=function(){return this.dict.lookupMaybe(T.of("Opt"),dt,_e,Ye)},t.prototype.setOpt=function(n){this.dict.set(T.of("Opt"),this.dict.context.obj(n))},t.prototype.getExportValues=function(){var n=this.Opt();if(n){if(n instanceof dt||n instanceof _e)return[n];for(var i=[],r=0,o=n.size();r<o;r++){var s=n.lookup(r);(s instanceof dt||s instanceof _e)&&i.push(s)}return i}},t.prototype.removeExportValue=function(n){var i=this.Opt();if(i)if(i instanceof dt||i instanceof _e){if(n!==0)throw new km(n,0,0);this.setOpt([])}else{if(n<0||n>i.size())throw new km(n,0,i.size());i.remove(n)}},t.prototype.normalizeExportValues=function(){for(var n,i,r,o,s=(n=this.getExportValues())!==null&&n!==void 0?n:[],a=[],l=this.getWidgets(),c=0,u=l.length;c<u;c++){var d=l[c],h=(i=s[c])!==null&&i!==void 0?i:_e.fromText((o=(r=d.getOnValue())===null||r===void 0?void 0:r.decodeText())!==null&&o!==void 0?o:"");a.push(h)}this.setOpt(a)},t.prototype.addOpt=function(n,i){var r;this.normalizeExportValues();var o=n.decodeText(),s;if(i)for(var a=(r=this.getExportValues())!==null&&r!==void 0?r:[],l=0,c=a.length;l<c;l++){var u=a[l];u.decodeText()===o&&(s=l)}var d=this.Opt();return d.push(n),s??d.size()-1},t.prototype.addWidgetWithOpt=function(n,i,r){var o=this.addOpt(i,r),s=T.of(String(o));return this.addWidget(n),s},t}(os),Df=APe;var MPe=function(e){W(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.setValue=function(n){var i,r=(i=this.getOnValue())!==null&&i!==void 0?i:T.of("Yes");if(n!==r&&n!==T.of("Off"))throw new Om;this.dict.set(T.of("V"),n);for(var o=this.getWidgets(),s=0,a=o.length;s<a;s++){var l=o[s],c=l.getOnValue()===n?n:T.of("Off");l.setAppearanceState(c)}},t.prototype.getValue=function(){var n=this.V();return n instanceof T?n:T.of("Off")},t.prototype.getOnValue=function(){var n=this.getWidgets()[0];return n?.getOnValue()},t.fromDict=function(n,i){return new t(n,i)},t.create=function(n){var i=n.obj({FT:"Btn",Kids:[]}),r=n.register(i);return new t(i,r)},t}(Df),rd=MPe;var wi=function(e){return 1<<e},Ea=function(e){return e[e.ReadOnly=wi(0)]="ReadOnly",e[e.Required=wi(1)]="Required",e[e.NoExport=wi(2)]="NoExport",e}(Ea||{}),eo=function(e){return e[e.NoToggleToOff=wi(14)]="NoToggleToOff",e[e.Radio=wi(15)]="Radio",e[e.PushButton=wi(16)]="PushButton",e[e.RadiosInUnison=wi(25)]="RadiosInUnison",e}(eo||{}),Gn=function(e){return e[e.Multiline=wi(12)]="Multiline",e[e.Password=wi(13)]="Password",e[e.FileSelect=wi(20)]="FileSelect",e[e.DoNotSpellCheck=wi(22)]="DoNotSpellCheck",e[e.DoNotScroll=wi(23)]="DoNotScroll",e[e.Comb=wi(24)]="Comb",e[e.RichText=wi(25)]="RichText",e}(Gn||{}),Nt=function(e){return e[e.Combo=wi(17)]="Combo",e[e.Edit=wi(18)]="Edit",e[e.Sort=wi(19)]="Sort",e[e.MultiSelect=wi(21)]="MultiSelect",e[e.DoNotSpellCheck=wi(22)]="DoNotSpellCheck",e[e.CommitOnSelChange=wi(26)]="CommitOnSelChange",e}(Nt||{});var PPe=function(e){W(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.setValues=function(n){if(this.hasFlag(Nt.Combo)&&!this.hasFlag(Nt.Edit)&&!this.valuesAreValid(n))throw new Om;if(n.length===0&&this.dict.delete(T.of("V")),n.length===1&&this.dict.set(T.of("V"),n[0]),n.length>1){if(!this.hasFlag(Nt.MultiSelect))throw new M$;this.dict.set(T.of("V"),this.dict.context.obj(n))}this.updateSelectedIndices(n)},t.prototype.valuesAreValid=function(n){for(var i=this.getOptions(),r=function(l,c){var u=n[l].decodeText();if(!i.find(function(d){return u===(d.display||d.value).decodeText()}))return{value:!1}},o=0,s=n.length;o<s;o++){var a=r(o,s);if(typeof a=="object")return a.value}return!0},t.prototype.updateSelectedIndices=function(n){if(n.length>1){for(var i=new Array(n.length),r=this.getOptions(),o=function(l,c){var u=n[l].decodeText();i[l]=r.findIndex(function(d){return u===(d.display||d.value).decodeText()})},s=0,a=n.length;s<a;s++)o(s,a);this.dict.set(T.of("I"),this.dict.context.obj(i.sort()))}else this.dict.delete(T.of("I"))},t.prototype.getValues=function(){var n=this.V();if(n instanceof dt||n instanceof _e)return[n];if(n instanceof Ye){for(var i=[],r=0,o=n.size();r<o;r++){var s=n.lookup(r);(s instanceof dt||s instanceof _e)&&i.push(s)}return i}return[]},t.prototype.Opt=function(){return this.dict.lookupMaybe(T.of("Opt"),dt,_e,Ye)},t.prototype.setOptions=function(n){for(var i=new Array(n.length),r=0,o=n.length;r<o;r++){var s=n[r],a=s.value,l=s.display;i[r]=this.dict.context.obj([a,l||a])}this.dict.set(T.of("Opt"),this.dict.context.obj(i))},t.prototype.getOptions=function(){var n=this.Opt();if(n instanceof dt||n instanceof _e)return[{value:n,display:n}];if(n instanceof Ye){for(var i=[],r=0,o=n.size();r<o;r++){var s=n.lookup(r);if((s instanceof dt||s instanceof _e)&&i.push({value:s,display:s}),s instanceof Ye&&s.size()>0){var a=s.lookup(0,dt,_e),l=s.lookupMaybe(1,dt,_e);i.push({value:a,display:l||a})}}return i}return[]},t}(os),hw=PPe;var kPe=function(e){W(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.fromDict=function(n,i){return new t(n,i)},t.create=function(n){var i=n.obj({FT:"Ch",Ff:Nt.Combo,Kids:[]}),r=n.register(i);return new t(i,r)},t}(hw),od=kPe;var OPe=function(e){W(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.addField=function(n){var i=this.normalizedEntries().Kids;i?.push(n)},t.prototype.normalizedEntries=function(){var n=this.Kids();return n||(n=this.dict.context.obj([]),this.dict.set(T.of("Kids"),n)),{Kids:n}},t.fromDict=function(n,i){return new t(n,i)},t.create=function(n){var i=n.obj({}),r=n.register(i);return new t(i,r)},t}(uw),sd=OPe;var NPe=function(e){W(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.fromDict=function(n,i){return new t(n,i)},t}(os),Tf=NPe;var LPe=function(e){W(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.MaxLen=function(){var n=this.dict.lookup(T.of("MaxLen"));if(n instanceof Ee)return n},t.prototype.Q=function(){var n=this.dict.lookup(T.of("Q"));if(n instanceof Ee)return n},t.prototype.setMaxLength=function(n){this.dict.set(T.of("MaxLen"),Ee.of(n))},t.prototype.removeMaxLength=function(){this.dict.delete(T.of("MaxLen"))},t.prototype.getMaxLength=function(){var n;return(n=this.MaxLen())===null||n===void 0?void 0:n.asNumber()},t.prototype.setQuadding=function(n){this.dict.set(T.of("Q"),Ee.of(n))},t.prototype.getQuadding=function(){var n;return(n=this.Q())===null||n===void 0?void 0:n.asNumber()},t.prototype.setValue=function(n){this.dict.set(T.of("V"),n)},t.prototype.removeValue=function(){this.dict.delete(T.of("V"))},t.prototype.getValue=function(){var n=this.V();if(n instanceof dt||n instanceof _e)return n},t.fromDict=function(n,i){return new t(n,i)},t.create=function(n){var i=n.obj({FT:"Tx",Kids:[]}),r=n.register(i);return new t(i,r)},t}(os),ad=LPe;var VPe=function(e){W(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.fromDict=function(n,i){return new t(n,i)},t.create=function(n){var i=n.obj({FT:"Btn",Ff:eo.PushButton,Kids:[]}),r=n.register(i);return new t(i,r)},t}(Df),ld=VPe;var BPe=function(e){W(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.setValue=function(n){var i=this.getOnValues();if(!i.includes(n)&&n!==T.of("Off"))throw new Om;this.dict.set(T.of("V"),n);for(var r=this.getWidgets(),o=0,s=r.length;o<s;o++){var a=r[o],l=a.getOnValue()===n?n:T.of("Off");a.setAppearanceState(l)}},t.prototype.getValue=function(){var n=this.V();return n instanceof T?n:T.of("Off")},t.prototype.getOnValues=function(){for(var n=this.getWidgets(),i=[],r=0,o=n.length;r<o;r++){var s=n[r].getOnValue();s&&i.push(s)}return i},t.fromDict=function(n,i){return new t(n,i)},t.create=function(n){var i=n.obj({FT:"Btn",Ff:eo.Radio,Kids:[]}),r=n.register(i);return new t(i,r)},t}(Df),cd=BPe;var GPe=function(e){W(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.fromDict=function(n,i){return new t(n,i)},t.create=function(n){var i=n.obj({FT:"Ch",Kids:[]}),r=n.register(i);return new t(i,r)},t}(hw),ud=GPe;var fw=function(e){if(!e)return[];for(var t=[],n=0,i=e.size();n<i;n++){var r=e.get(n),o=e.lookup(n);r instanceof $e&&o instanceof Te&&t.push([EL(o,r),r])}return t},EL=function(e,t){var n=HPe(e);return n?sd.fromDict(e,t):zPe(e,t)},HPe=function(e){var t=e.lookup(T.of("Kids"));if(t instanceof Ye)for(var n=0,i=t.size();n<i;n++){var r=t.lookup(n),o=r instanceof Te&&r.has(T.of("T"));if(o)return!0}return!1},zPe=function(e,t){var n=xL(e,T.of("FT")),i=e.context.lookup(n,T);return i===T.of("Btn")?UPe(e,t):i===T.of("Ch")?jPe(e,t):i===T.of("Tx")?ad.fromDict(e,t):i===T.of("Sig")?Tf.fromDict(e,t):os.fromDict(e,t)},UPe=function(e,t){var n,i=xL(e,T.of("Ff")),r=e.context.lookupMaybe(i,Ee),o=(n=r?.asNumber())!==null&&n!==void 0?n:0;return _L(o,eo.PushButton)?ld.fromDict(e,t):_L(o,eo.Radio)?cd.fromDict(e,t):rd.fromDict(e,t)},jPe=function(e,t){var n,i=xL(e,T.of("Ff")),r=e.context.lookupMaybe(i,Ee),o=(n=r?.asNumber())!==null&&n!==void 0?n:0;return _L(o,Nt.Combo)?od.fromDict(e,t):ud.fromDict(e,t)},_L=function(e,t){return(e&t)!==0},xL=function(e,t){var n;return fZ(e,function(i){n||(n=i.get(t))}),n},fZ=function(e,t){t(e);var n=e.lookupMaybe(T.of("Parent"),Te);n&&fZ(n,t)};var WPe=function(){function e(t){this.dict=t}return e.prototype.Fields=function(){var t=this.dict.lookup(T.of("Fields"));if(t instanceof Ye)return t},e.prototype.getFields=function(){for(var t=this.normalizedEntries().Fields,n=new Array(t.size()),i=0,r=t.size();i<r;i++){var o=t.get(i),s=t.lookup(i,Te);n[i]=[EL(s,o),o]}return n},e.prototype.getAllFields=function(){var t=[],n=function(i){if(i)for(var r=0,o=i.length;r<o;r++){var s=i[r];t.push(s);var a=s[0];a instanceof sd&&n(fw(a.Kids()))}};return n(this.getFields()),t},e.prototype.addField=function(t){var n=this.normalizedEntries().Fields;n?.push(t)},e.prototype.removeField=function(t){var n=t.getParent(),i=n===void 0?this.normalizedEntries().Fields:n.Kids(),r=i?.indexOf(t.ref);if(i===void 0||r===void 0)throw new Error("Tried to remove inexistent field "+t.getFullyQualifiedName());i.remove(r),n!==void 0&&i.size()===0&&this.removeField(n)},e.prototype.normalizedEntries=function(){var t=this.Fields();return t||(t=this.dict.context.obj([]),this.dict.set(T.of("Fields"),t)),{Fields:t}},e.fromDict=function(t){return new e(t)},e.create=function(t){var n=t.obj({Fields:[]});return new e(n)},e}(),Rf=WPe;var qPe=function(e){W(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.Pages=function(){return this.lookup(T.of("Pages"),Te)},t.prototype.AcroForm=function(){return this.lookupMaybe(T.of("AcroForm"),Te)},t.prototype.getAcroForm=function(){var n=this.AcroForm();if(n)return Rf.fromDict(n)},t.prototype.getOrCreateAcroForm=function(){var n=this.getAcroForm();if(!n){n=Rf.create(this.context);var i=this.context.register(n.dict);this.set(T.of("AcroForm"),i)}return n},t.prototype.ViewerPreferences=function(){return this.lookupMaybe(T.of("ViewerPreferences"),Te)},t.prototype.getViewerPreferences=function(){var n=this.ViewerPreferences();if(n)return QD.fromDict(n)},t.prototype.getOrCreateViewerPreferences=function(){var n=this.getViewerPreferences();if(!n){n=QD.create(this.context);var i=this.context.register(n.dict);this.set(T.of("ViewerPreferences"),i)}return n},t.prototype.insertLeafNode=function(n,i){var r=this.get(T.of("Pages")),o=this.Pages().insertLeafNode(n,i);return o||r},t.prototype.removeLeafNode=function(n){this.Pages().removeLeafNode(n)},t.withContextAndPages=function(n,i){var r=new Map;return r.set(T.of("Type"),T.of("Catalog")),r.set(T.of("Pages"),i),new t(r,n)},t.fromMapWithContext=function(n,i){return new t(n,i)},t}(Te),pw=qPe;var KPe=function(e){W(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.Parent=function(){return this.lookup(T.of("Parent"))},t.prototype.Kids=function(){return this.lookup(T.of("Kids"),Ye)},t.prototype.Count=function(){return this.lookup(T.of("Count"),Ee)},t.prototype.pushTreeNode=function(n){var i=this.Kids();i.push(n)},t.prototype.pushLeafNode=function(n){var i=this.Kids();this.insertLeafKid(i.size(),n)},t.prototype.insertLeafNode=function(n,i){var r=this.Kids(),o=this.Count().asNumber();if(i>o)throw new hL(i,o);for(var s=i,a=0,l=r.size();a<l;a++){if(s===0){this.insertLeafKid(a,n);return}var c=r.get(a),u=this.context.lookup(c);if(u instanceof t){if(u.Count().asNumber()>s)return u.insertLeafNode(n,s)||c;s-=u.Count().asNumber()}u instanceof Jr&&(s-=1)}if(s===0){this.insertLeafKid(r.size(),n);return}throw new fL(i,"insertLeafNode")},t.prototype.removeLeafNode=function(n,i){i===void 0&&(i=!0);var r=this.Kids(),o=this.Count().asNumber();if(n>=o)throw new hL(n,o);for(var s=n,a=0,l=r.size();a<l;a++){var c=r.get(a),u=this.context.lookup(c);if(u instanceof t)if(u.Count().asNumber()>s){u.removeLeafNode(s,i),i&&u.Kids().size()===0&&r.remove(a);return}else s-=u.Count().asNumber();if(u instanceof Jr)if(s===0){this.removeKid(a);return}else s-=1}throw new fL(n,"removeLeafNode")},t.prototype.ascend=function(n){n(this);var i=this.Parent();i&&i.ascend(n)},t.prototype.traverse=function(n){for(var i=this.Kids(),r=0,o=i.size();r<o;r++){var s=i.get(r),a=this.context.lookup(s);a instanceof t&&a.traverse(n),n(a,s)}},t.prototype.insertLeafKid=function(n,i){var r=this.Kids();this.ascend(function(o){var s=o.Count().asNumber()+1;o.set(T.of("Count"),Ee.of(s))}),r.insert(n,i)},t.prototype.removeKid=function(n){var i=this.Kids(),r=i.lookup(n);r instanceof Jr&&this.ascend(function(o){var s=o.Count().asNumber()-1;o.set(T.of("Count"),Ee.of(s))}),i.remove(n)},t.withContext=function(n,i){var r=new Map;return r.set(T.of("Type"),T.of("Pages")),r.set(T.of("Kids"),n.obj([])),r.set(T.of("Count"),n.obj(0)),i&&r.set(T.of("Parent"),i),new t(r,n)},t.fromMapWithContext=function(n,i){return new t(n,i)},t}(Te),gw=KPe;var Oi=new Uint8Array(256);Oi[M.Zero]=1;Oi[M.One]=1;Oi[M.Two]=1;Oi[M.Three]=1;Oi[M.Four]=1;Oi[M.Five]=1;Oi[M.Six]=1;Oi[M.Seven]=1;Oi[M.Eight]=1;Oi[M.Nine]=1;var $D=new Uint8Array(256);$D[M.Period]=1;$D[M.Plus]=1;$D[M.Minus]=1;var mw=new Uint8Array(256);for(Gm=0,pZ=256;Gm<pZ;Gm++)mw[Gm]=Oi[Gm]||$D[Gm]?1:0;var Gm,pZ;var gZ=M.Newline,mZ=M.CarriageReturn,YPe=function(){function e(t,n){n===void 0&&(n=!1),this.bytes=t,this.capNumbers=n}return e.prototype.parseRawInt=function(){for(var t="";!this.bytes.done();){var n=this.bytes.peek();if(!Oi[n])break;t+=ts(this.bytes.next())}var i=Number(t);if(!t||!isFinite(i))throw new pL(this.bytes.position(),t);return i},e.prototype.parseRawNumber=function(){for(var t="";!this.bytes.done();){var n=this.bytes.peek();if(!mw[n]||(t+=ts(this.bytes.next()),n===M.Period))break}for(;!this.bytes.done();){var n=this.bytes.peek();if(!Oi[n])break;t+=ts(this.bytes.next())}var i=Number(t);if(!t||!isFinite(i))throw new pL(this.bytes.position(),t);if(i>Number.MAX_SAFE_INTEGER)if(this.capNumbers){var r="Parsed number that is too large for some PDF readers: "+t+", using Number.MAX_SAFE_INTEGER instead.";return console.warn(r),Number.MAX_SAFE_INTEGER}else{var r="Parsed number that is too large for some PDF readers: "+t+", not capping.";console.warn(r)}return i},e.prototype.skipWhitespace=function(){for(;!this.bytes.done()&&Ns[this.bytes.peek()];)this.bytes.next()},e.prototype.skipLine=function(){for(;!this.bytes.done();){var t=this.bytes.peek();if(t===gZ||t===mZ)return;this.bytes.next()}},e.prototype.skipComment=function(){if(this.bytes.peek()!==M.Percent)return!1;for(;!this.bytes.done();){var t=this.bytes.peek();if(t===gZ||t===mZ)return!0;this.bytes.next()}return!0},e.prototype.skipWhitespaceAndComments=function(){for(this.skipWhitespace();this.skipComment();)this.skipWhitespace()},e.prototype.matchKeyword=function(t){for(var n=this.bytes.offset(),i=0,r=t.length;i<r;i++)if(this.bytes.done()||this.bytes.next()!==t[i])return this.bytes.moveTo(n),!1;return!0},e}(),vZ=YPe;var QPe=function(){function e(t){this.idx=0,this.line=0,this.column=0,this.bytes=t,this.length=this.bytes.length}return e.prototype.moveTo=function(t){this.idx=t},e.prototype.next=function(){var t=this.bytes[this.idx++];return t===M.Newline?(this.line+=1,this.column=0):this.column+=1,t},e.prototype.assertNext=function(t){if(this.peek()!==t)throw new O$(this.position(),t,this.peek());return this.next()},e.prototype.peek=function(){return this.bytes[this.idx]},e.prototype.peekAhead=function(t){return this.bytes[this.idx+t]},e.prototype.peekAt=function(t){return this.bytes[t]},e.prototype.done=function(){return this.idx>=this.length},e.prototype.offset=function(){return this.idx},e.prototype.slice=function(t,n){return this.bytes.slice(t,n)},e.prototype.position=function(){return{line:this.line,column:this.column,offset:this.idx}},e.of=function(t){return new e(t)},e.fromPDFRawStream=function(t){return e.of(ow(t).decode())},e}(),dd=QPe;var XPe=M.Space,vw=M.CarriageReturn,yw=M.Newline,Cw=[M.s,M.t,M.r,M.e,M.a,M.m],ZD=[M.e,M.n,M.d,M.s,M.t,M.r,M.e,M.a,M.m],Jt={header:[M.Percent,M.P,M.D,M.F,M.Dash],eof:[M.Percent,M.Percent,M.E,M.O,M.F],obj:[M.o,M.b,M.j],endobj:[M.e,M.n,M.d,M.o,M.b,M.j],xref:[M.x,M.r,M.e,M.f],trailer:[M.t,M.r,M.a,M.i,M.l,M.e,M.r],startxref:[M.s,M.t,M.a,M.r,M.t,M.x,M.r,M.e,M.f],true:[M.t,M.r,M.u,M.e],false:[M.f,M.a,M.l,M.s,M.e],null:[M.n,M.u,M.l,M.l],stream:Cw,streamEOF1:ut(Cw,[XPe,vw,yw]),streamEOF2:ut(Cw,[vw,yw]),streamEOF3:ut(Cw,[vw]),streamEOF4:ut(Cw,[yw]),endstream:ZD,EOF1endstream:ut([vw,yw],ZD),EOF2endstream:ut([vw],ZD),EOF3endstream:ut([yw],ZD)};var $Pe=function(e){W(t,e);function t(n,i,r){r===void 0&&(r=!1);var o=e.call(this,n,r)||this;return o.context=i,o}return t.prototype.parseObject=function(){if(this.skipWhitespaceAndComments(),this.matchKeyword(Jt.true))return xc.True;if(this.matchKeyword(Jt.false))return xc.False;if(this.matchKeyword(Jt.null))return Wi;var n=this.bytes.peek();if(n===M.LessThan&&this.bytes.peekAhead(1)===M.LessThan)return this.parseDictOrStream();if(n===M.LessThan)return this.parseHexString();if(n===M.LeftParen)return this.parseString();if(n===M.ForwardSlash)return this.parseName();if(n===M.LeftSquareBracket)return this.parseArray();if(mw[n])return this.parseNumberOrRef();throw new N$(this.bytes.position(),n)},t.prototype.parseNumberOrRef=function(){var n=this.parseRawNumber();this.skipWhitespaceAndComments();var i=this.bytes.offset();if(Oi[this.bytes.peek()]){var r=this.parseRawNumber();if(this.skipWhitespaceAndComments(),this.bytes.peek()===M.R)return this.bytes.assertNext(M.R),$e.of(n,r)}return this.bytes.moveTo(i),Ee.of(n)},t.prototype.parseHexString=function(){var n="";for(this.bytes.assertNext(M.LessThan);!this.bytes.done()&&this.bytes.peek()!==M.GreaterThan;)n+=ts(this.bytes.next());return this.bytes.assertNext(M.GreaterThan),_e.of(n)},t.prototype.parseString=function(){for(var n=0,i=!1,r="";!this.bytes.done();){var o=this.bytes.next();if(r+=ts(o),i||(o===M.LeftParen&&(n+=1),o===M.RightParen&&(n-=1)),o===M.BackSlash?i=!i:i&&(i=!1),n===0)return dt.of(r.substring(1,r.length-1))}throw new B$(this.bytes.position())},t.prototype.parseName=function(){this.bytes.assertNext(M.ForwardSlash);for(var n="";!this.bytes.done();){var i=this.bytes.peek();if(Ns[i]||Ro[i])break;n+=ts(i),this.bytes.next()}return T.of(n)},t.prototype.parseArray=function(){this.bytes.assertNext(M.LeftSquareBracket),this.skipWhitespaceAndComments();for(var n=Ye.withContext(this.context);this.bytes.peek()!==M.RightSquareBracket;){var i=this.parseObject();n.push(i),this.skipWhitespaceAndComments()}return this.bytes.assertNext(M.RightSquareBracket),n},t.prototype.parseDict=function(){this.bytes.assertNext(M.LessThan),this.bytes.assertNext(M.LessThan),this.skipWhitespaceAndComments();for(var n=new Map;!this.bytes.done()&&this.bytes.peek()!==M.GreaterThan&&this.bytes.peekAhead(1)!==M.GreaterThan;){var i=this.parseName(),r=this.parseObject();n.set(i,r),this.skipWhitespaceAndComments()}this.skipWhitespaceAndComments(),this.bytes.assertNext(M.GreaterThan),this.bytes.assertNext(M.GreaterThan);var o=n.get(T.of("Type"));return o===T.of("Catalog")?pw.fromMapWithContext(n,this.context):o===T.of("Pages")?gw.fromMapWithContext(n,this.context):o===T.of("Page")?Jr.fromMapWithContext(n,this.context):Te.fromMapWithContext(n,this.context)},t.prototype.parseDictOrStream=function(){var n=this.bytes.position(),i=this.parseDict();if(this.skipWhitespaceAndComments(),!this.matchKeyword(Jt.streamEOF1)&&!this.matchKeyword(Jt.streamEOF2)&&!this.matchKeyword(Jt.streamEOF3)&&!this.matchKeyword(Jt.streamEOF4)&&!this.matchKeyword(Jt.stream))return i;var r=this.bytes.offset(),o,s=i.get(T.of("Length"));s instanceof Ee?(o=r+s.asNumber(),this.bytes.moveTo(o),this.skipWhitespaceAndComments(),this.matchKeyword(Jt.endstream)||(this.bytes.moveTo(r),o=this.findEndOfStreamFallback(n))):o=this.findEndOfStreamFallback(n);var a=this.bytes.slice(r,o);return wl.of(i,a)},t.prototype.findEndOfStreamFallback=function(n){for(var i=1,r=this.bytes.offset();!this.bytes.done()&&(r=this.bytes.offset(),this.matchKeyword(Jt.stream)?i+=1:this.matchKeyword(Jt.EOF1endstream)||this.matchKeyword(Jt.EOF2endstream)||this.matchKeyword(Jt.EOF3endstream)||this.matchKeyword(Jt.endstream)?i-=1:this.bytes.next(),i!==0););if(i!==0)throw new V$(n);return r},t.forBytes=function(n,i,r){return new t(dd.of(n),i,r)},t.forByteStream=function(n,i,r){return r===void 0&&(r=!1),new t(n,i,r)},t}(vZ),ww=$Pe;var ZPe=function(e){W(t,e);function t(n,i){var r=e.call(this,dd.fromPDFRawStream(n),n.dict.context)||this,o=n.dict;return r.alreadyParsed=!1,r.shouldWaitForTick=i||function(){return!1},r.firstOffset=o.lookup(T.of("First"),Ee).asNumber(),r.objectCount=o.lookup(T.of("N"),Ee).asNumber(),r}return t.prototype.parseIntoContext=function(){return Ae(this,void 0,void 0,function(){var n,i,r,o,s,a,l,c;return Me(this,function(u){switch(u.label){case 0:if(this.alreadyParsed)throw new Pm("PDFObjectStreamParser","parseIntoContext");this.alreadyParsed=!0,n=this.parseOffsetsAndObjectNumbers(),i=0,r=n.length,u.label=1;case 1:return i<r?(o=n[i],s=o.objectNumber,a=o.offset,this.bytes.moveTo(this.firstOffset+a),l=this.parseObject(),c=$e.of(s,0),this.context.assign(c,l),this.shouldWaitForTick()?[4,pl()]:[3,3]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t.prototype.parseOffsetsAndObjectNumbers=function(){for(var n=[],i=0,r=this.objectCount;i<r;i++){this.skipWhitespaceAndComments();var o=this.parseRawInt();this.skipWhitespaceAndComments();var s=this.parseRawInt();n.push({objectNumber:o,offset:s})}return n},t.forStream=function(n,i){return new t(n,i)},t}(ww),DL=ZPe;var JPe=function(){function e(t){this.alreadyParsed=!1,this.dict=t.dict,this.bytes=dd.fromPDFRawStream(t),this.context=this.dict.context;var n=this.dict.lookup(T.of("Size"),Ee),i=this.dict.lookup(T.of("Index"));if(i instanceof Ye){this.subsections=[];for(var r=0,o=i.size();r<o;r+=2){var s=i.lookup(r+0,Ee).asNumber(),a=i.lookup(r+1,Ee).asNumber();this.subsections.push({firstObjectNumber:s,length:a})}}else this.subsections=[{firstObjectNumber:0,length:n.asNumber()}];var l=this.dict.lookup(T.of("W"),Ye);this.byteWidths=[-1,-1,-1];for(var r=0,o=l.size();r<o;r++)this.byteWidths[r]=l.lookup(r,Ee).asNumber()}return e.prototype.parseIntoContext=function(){if(this.alreadyParsed)throw new Pm("PDFXRefStreamParser","parseIntoContext");this.alreadyParsed=!0,this.context.trailerInfo={Root:this.dict.get(T.of("Root")),Encrypt:this.dict.get(T.of("Encrypt")),Info:this.dict.get(T.of("Info")),ID:this.dict.get(T.of("ID"))};var t=this.parseEntries();return t},e.prototype.parseEntries=function(){for(var t=[],n=this.byteWidths,i=n[0],r=n[1],o=n[2],s=0,a=this.subsections.length;s<a;s++)for(var l=this.subsections[s],c=l.firstObjectNumber,u=l.length,d=0;d<u;d++){for(var h=0,p=0,g=i;p<g;p++)h=h<<8|this.bytes.next();for(var m=0,p=0,g=r;p<g;p++)m=m<<8|this.bytes.next();for(var v=0,p=0,g=o;p<g;p++)v=v<<8|this.bytes.next();i===0&&(h=1);var C=c+d,S={ref:$e.of(C,v),offset:m,deleted:h===0,inObjectStream:h===2};t.push(S)}return t},e.forStream=function(t){return new e(t)},e}(),TL=JPe;var e2e=function(e){W(t,e);function t(n,i,r,o){i===void 0&&(i=1/0),r===void 0&&(r=!1),o===void 0&&(o=!1);var s=e.call(this,dd.of(n),Lm.create(),o)||this;return s.alreadyParsed=!1,s.parsedObjects=0,s.shouldWaitForTick=function(){return s.parsedObjects+=1,s.parsedObjects%s.objectsPerTick===0},s.objectsPerTick=i,s.throwOnInvalidObject=r,s}return t.prototype.parseDocument=function(){return Ae(this,void 0,void 0,function(){var n,i;return Me(this,function(r){switch(r.label){case 0:if(this.alreadyParsed)throw new Pm("PDFParser","parseDocument");this.alreadyParsed=!0,this.context.header=this.parseHeader(),r.label=1;case 1:return this.bytes.done()?[3,3]:[4,this.parseDocumentSection()];case 2:if(r.sent(),i=this.bytes.offset(),i===n)throw new G$(this.bytes.position());return n=i,[3,1];case 3:return this.maybeRecoverRoot(),this.context.lookup($e.of(0))&&(console.warn("Removing parsed object: 0 0 R"),this.context.delete($e.of(0))),[2,this.context]}})})},t.prototype.maybeRecoverRoot=function(){var n=function(u){return u instanceof Te&&u.lookup(T.of("Type"))===T.of("Catalog")},i=this.context.lookup(this.context.trailerInfo.Root);if(!n(i))for(var r=this.context.enumerateIndirectObjects(),o=0,s=r.length;o<s;o++){var a=r[o],l=a[0],c=a[1];n(c)&&(this.context.trailerInfo.Root=l)}},t.prototype.parseHeader=function(){for(;!this.bytes.done();){if(this.matchKeyword(Jt.header)){var n=this.parseRawInt();this.bytes.assertNext(M.Period);var i=this.parseRawInt(),r=Ec.forVersion(n,i);return this.skipBinaryHeaderComment(),r}this.bytes.next()}throw new H$(this.bytes.position())},t.prototype.parseIndirectObjectHeader=function(){this.skipWhitespaceAndComments();var n=this.parseRawInt();this.skipWhitespaceAndComments();var i=this.parseRawInt();if(this.skipWhitespaceAndComments(),!this.matchKeyword(Jt.obj))throw new z$(this.bytes.position(),Jt.obj);return $e.of(n,i)},t.prototype.matchIndirectObjectHeader=function(){var n=this.bytes.offset();try{return this.parseIndirectObjectHeader(),!0}catch{return this.bytes.moveTo(n),!1}},t.prototype.parseIndirectObject=function(){return Ae(this,void 0,void 0,function(){var n,i;return Me(this,function(r){switch(r.label){case 0:return n=this.parseIndirectObjectHeader(),this.skipWhitespaceAndComments(),i=this.parseObject(),this.skipWhitespaceAndComments(),this.matchKeyword(Jt.endobj),i instanceof wl&&i.dict.lookup(T.of("Type"))===T.of("ObjStm")?[4,DL.forStream(i,this.shouldWaitForTick).parseIntoContext()]:[3,2];case 1:return r.sent(),[3,3];case 2:i instanceof wl&&i.dict.lookup(T.of("Type"))===T.of("XRef")?TL.forStream(i).parseIntoContext():this.context.assign(n,i),r.label=3;case 3:return[2,n]}})})},t.prototype.tryToParseInvalidIndirectObject=function(){var n=this.bytes.position(),i="Trying to parse invalid object: "+JSON.stringify(n)+")";if(this.throwOnInvalidObject)throw new Error(i);console.warn(i);var r=this.parseIndirectObjectHeader();console.warn("Invalid object ref: "+r),this.skipWhitespaceAndComments();for(var o=this.bytes.offset(),s=!0;!this.bytes.done()&&(this.matchKeyword(Jt.endobj)&&(s=!1),!!s);)this.bytes.next();if(s)throw new L$(n);var a=this.bytes.offset()-Jt.endobj.length,l=tw.of(this.bytes.slice(o,a));return this.context.assign(r,l),r},t.prototype.parseIndirectObjects=function(){return Ae(this,void 0,void 0,function(){var n,i;return Me(this,function(r){switch(r.label){case 0:this.skipWhitespaceAndComments(),r.label=1;case 1:if(!(!this.bytes.done()&&Oi[this.bytes.peek()]))return[3,8];n=this.bytes.offset(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this.parseIndirectObject()];case 3:return r.sent(),[3,5];case 4:return i=r.sent(),this.bytes.moveTo(n),this.tryToParseInvalidIndirectObject(),[3,5];case 5:return this.skipWhitespaceAndComments(),this.skipJibberish(),this.shouldWaitForTick()?[4,pl()]:[3,7];case 6:r.sent(),r.label=7;case 7:return[3,1];case 8:return[2]}})})},t.prototype.maybeParseCrossRefSection=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(Jt.xref)){this.skipWhitespaceAndComments();for(var n=-1,i=ZC.createEmpty();!this.bytes.done()&&Oi[this.bytes.peek()];){var r=this.parseRawInt();this.skipWhitespaceAndComments();var o=this.parseRawInt();this.skipWhitespaceAndComments();var s=this.bytes.peek();if(s===M.n||s===M.f){var a=$e.of(n,o);this.bytes.next()===M.n?i.addEntry(a,r):i.addDeletedEntry(a,r),n+=1}else n=r;this.skipWhitespaceAndComments()}return i}},t.prototype.maybeParseTrailerDict=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(Jt.trailer)){this.skipWhitespaceAndComments();var n=this.parseDict(),i=this.context;i.trailerInfo={Root:n.get(T.of("Root"))||i.trailerInfo.Root,Encrypt:n.get(T.of("Encrypt"))||i.trailerInfo.Encrypt,Info:n.get(T.of("Info"))||i.trailerInfo.Info,ID:n.get(T.of("ID"))||i.trailerInfo.ID}}},t.prototype.maybeParseTrailer=function(){if(this.skipWhitespaceAndComments(),!!this.matchKeyword(Jt.startxref)){this.skipWhitespaceAndComments();var n=this.parseRawInt();return this.skipWhitespace(),this.matchKeyword(Jt.eof),this.skipWhitespaceAndComments(),this.matchKeyword(Jt.eof),this.skipWhitespaceAndComments(),Sf.forLastCrossRefSectionOffset(n)}},t.prototype.parseDocumentSection=function(){return Ae(this,void 0,void 0,function(){return Me(this,function(n){switch(n.label){case 0:return[4,this.parseIndirectObjects()];case 1:return n.sent(),this.maybeParseCrossRefSection(),this.maybeParseTrailerDict(),this.maybeParseTrailer(),this.skipJibberish(),[2]}})})},t.prototype.skipJibberish=function(){for(this.skipWhitespaceAndComments();!this.bytes.done();){var n=this.bytes.offset(),i=this.bytes.peek(),r=i>=M.Space&&i<=M.Tilde;if(r&&(this.matchKeyword(Jt.xref)||this.matchKeyword(Jt.trailer)||this.matchKeyword(Jt.startxref)||this.matchIndirectObjectHeader())){this.bytes.moveTo(n);break}this.bytes.next()}},t.prototype.skipBinaryHeaderComment=function(){this.skipWhitespaceAndComments();try{var n=this.bytes.offset();this.parseIndirectObjectHeader(),this.bytes.moveTo(n)}catch{this.bytes.next(),this.skipWhitespaceAndComments()}},t.forBytesWithOptions=function(n,i,r,o){return new t(n,i,r,o)},t}(ww),RL=e2e;var Sl=function(e){return 1<<e},bw=function(e){return e[e.Invisible=Sl(0)]="Invisible",e[e.Hidden=Sl(1)]="Hidden",e[e.Print=Sl(2)]="Print",e[e.NoZoom=Sl(3)]="NoZoom",e[e.NoRotate=Sl(4)]="NoRotate",e[e.NoView=Sl(5)]="NoView",e[e.ReadOnly=Sl(6)]="ReadOnly",e[e.Locked=Sl(7)]="Locked",e[e.ToggleNoView=Sl(8)]="ToggleNoView",e[e.LockedContents=Sl(9)]="LockedContents",e}(bw||{});var Sw=function(e){return e instanceof T?e:T.of(e)},et=function(e){return e instanceof Ee?e:Ee.of(e)},st=function(e){return e instanceof Ee?e.asNumber():e};var JD=function(e){return e.Degrees="degrees",e.Radians="radians",e}(JD||{});var Pe=function(e){return L(e,"degreeAngle",["number"]),{type:JD.Degrees,angle:e}},yZ=JD.Radians,CZ=JD.Degrees,IL=function(e){return e*Math.PI/180},t2e=function(e){return e*180/Math.PI},qi=function(e){return e.type===yZ?e.angle:e.type===CZ?IL(e.angle):df("Invalid rotation: "+JSON.stringify(e))},eT=function(e){return e.type===yZ?t2e(e.angle):e.type===CZ?e.angle:df("Invalid rotation: "+JSON.stringify(e))},xa=function(e){e===void 0&&(e=0);var t=e/90%4;return t===0?0:t===1?90:t===2?180:t===3?270:0},Tc=function(e,t){t===void 0&&(t=0);var n=xa(t);return n===90||n===270?{width:e.height,height:e.width}:{width:e.width,height:e.height}},wZ=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=0);var i=e.x,r=e.y,o=e.width,s=e.height,a=xa(n),l=t/2;return a===0?{x:i-l,y:r-l,width:o,height:s}:a===90?{x:i-s+l,y:r-l,width:s,height:o}:a===180?{x:i-o+l,y:r-s+l,width:o,height:s}:a===270?{x:i-l,y:r-o+l,width:s,height:o}:{x:i-l,y:r-l,width:o,height:s}};var FL=function(){return mt.of(_t.ClipNonZero)};var tT=Math.cos,nT=Math.sin,iT=Math.tan,rT=function(e,t,n,i,r,o){return mt.of(_t.ConcatTransformationMatrix,[et(e),et(t),et(n),et(i),et(r),et(o)])},to=function(e,t){return rT(1,0,0,1,e,t)},If=function(e,t){return rT(e,0,0,t,0,0)},Ff=function(e){return rT(tT(st(e)),nT(st(e)),-nT(st(e)),tT(st(e)),0,0)},_w=function(e){return Ff(IL(st(e)))},oT=function(e,t){return rT(1,iT(st(e)),iT(st(t)),1,0,0)};var Ew=function(e,t){return mt.of(_t.SetLineDashPattern,["["+e.map(et).join(" ")+"]",et(t)])};var Hm=function(e){return e[e.Butt=0]="Butt",e[e.Round=1]="Round",e[e.Projecting=2]="Projecting",e}(Hm||{}),xw=function(e){return mt.of(_t.SetLineCapStyle,[et(e)])};var hd=function(e){return mt.of(_t.SetGraphicsStateParams,[Sw(e)])},Qn=function(){return mt.of(_t.PushGraphicsState)},Xn=function(){return mt.of(_t.PopGraphicsState)},zm=function(e){return mt.of(_t.SetLineWidth,[et(e)])},no=function(e,t,n,i,r,o){return mt.of(_t.AppendBezierCurve,[et(e),et(t),et(n),et(i),et(r),et(o)])},Dw=function(e,t,n,i){return mt.of(_t.CurveToReplicateInitialPoint,[et(e),et(t),et(n),et(i)])},_l=function(){return mt.of(_t.ClosePath)},Ls=function(e,t){return mt.of(_t.MoveTo,[et(e),et(t)])},bi=function(e,t){return mt.of(_t.LineTo,[et(e),et(t)])};var Um=function(){return mt.of(_t.StrokePath)},sT=function(){return mt.of(_t.FillNonZero)},aT=function(){return mt.of(_t.FillNonZeroAndStroke)},AL=function(){return mt.of(_t.EndPath)},bZ=function(){return mt.of(_t.NextLine)};var ML=function(e){return mt.of(_t.ShowText,[e])},PL=function(){return mt.of(_t.BeginText)},kL=function(){return mt.of(_t.EndText)},Tw=function(e,t){return mt.of(_t.SetFontAndSize,[Sw(e),et(t)])};var SZ=function(e){return mt.of(_t.SetTextLineHeight,[et(e)])};var n2e=function(e,t,n,i,r,o){return mt.of(_t.SetTextMatrix,[et(e),et(t),et(n),et(i),et(r),et(o)])},OL=function(e,t,n,i,r){return n2e(tT(st(e)),nT(st(e))+iT(st(t)),-nT(st(e))+iT(st(n)),tT(st(e)),i,r)};var Rw=function(e){return mt.of(_t.DrawObject,[Sw(e)])},_Z=function(e){return mt.of(_t.NonStrokingColorGray,[et(e)])},EZ=function(e){return mt.of(_t.StrokingColorGray,[et(e)])},xZ=function(e,t,n){return mt.of(_t.NonStrokingColorRgb,[et(e),et(t),et(n)])},DZ=function(e,t,n){return mt.of(_t.StrokingColorRgb,[et(e),et(t),et(n)])},TZ=function(e,t,n,i){return mt.of(_t.NonStrokingColorCmyk,[et(e),et(t),et(n),et(i)])},RZ=function(e,t,n,i){return mt.of(_t.StrokingColorCmyk,[et(e),et(t),et(n),et(i)])},NL=function(e){return mt.of(_t.BeginMarkedContent,[Sw(e)])},LL=function(){return mt.of(_t.EndMarkedContent)};var Af=function(e){return e.Grayscale="Grayscale",e.RGB="RGB",e.CMYK="CMYK",e}(Af||{}),VL=function(e){return Sr(e,"gray",0,1),{type:Af.Grayscale,gray:e}},yt=function(e,t,n){return Sr(e,"red",0,1),Sr(t,"green",0,1),Sr(n,"blue",0,1),{type:Af.RGB,red:e,green:t,blue:n}},BL=function(e,t,n,i){return Sr(e,"cyan",0,1),Sr(t,"magenta",0,1),Sr(n,"yellow",0,1),Sr(i,"key",0,1),{type:Af.CMYK,cyan:e,magenta:t,yellow:n,key:i}},GL=Af.Grayscale,HL=Af.RGB,zL=Af.CMYK,El=function(e){return e.type===GL?_Z(e.gray):e.type===HL?xZ(e.red,e.green,e.blue):e.type===zL?TZ(e.cyan,e.magenta,e.yellow,e.key):df("Invalid color: "+JSON.stringify(e))},jm=function(e){return e.type===GL?EZ(e.gray):e.type===HL?DZ(e.red,e.green,e.blue):e.type===zL?RZ(e.cyan,e.magenta,e.yellow,e.key):df("Invalid color: "+JSON.stringify(e))},Er=function(e,t){return t===void 0&&(t=1),e?.length===1?VL(e[0]*t):e?.length===3?yt(e[0]*t,e[1]*t,e[2]*t):e?.length===4?BL(e[0]*t,e[1]*t,e[2]*t,e[3]*t):void 0},UL=function(e){return e.type===GL?[e.gray]:e.type===HL?[e.red,e.green,e.blue]:e.type===zL?[e.cyan,e.magenta,e.yellow,e.key]:df("Invalid color: "+JSON.stringify(e))};var ke=0,Oe=0,Mt=0,Pt=0,Iw=0,Fw=0,IZ=new Map([["A",7],["a",7],["C",6],["c",6],["H",1],["h",1],["L",2],["l",2],["M",2],["m",2],["Q",4],["q",4],["S",4],["s",4],["T",2],["t",2],["V",1],["v",1],["Z",0],["z",0]]),i2e=function(e){for(var t,n=[],i=[],r="",o=!1,s=0,a=0,l=e;a<l.length;a++){var c=l[a];if(IZ.has(c))s=IZ.get(c),t&&(r.length>0&&(i[i.length]=+r),n[n.length]={cmd:t,args:i},i=[],r="",o=!1),t=c;else if([" ",","].includes(c)||c==="-"&&r.length>0&&r[r.length-1]!=="e"||c==="."&&o){if(r.length===0)continue;i.length===s?(n[n.length]={cmd:t,args:i},i=[+r],t==="M"&&(t="L"),t==="m"&&(t="l")):i[i.length]=+r,o=c===".",r=["-","."].includes(c)?c:""}else r+=c,c==="."&&(o=!0)}return r.length>0&&(i.length===s?(n[n.length]={cmd:t,args:i},i=[+r],t==="M"&&(t="L"),t==="m"&&(t="l")):i[i.length]=+r),n[n.length]={cmd:t,args:i},n},r2e=function(e){ke=Oe=Mt=Pt=Iw=Fw=0;for(var t=[],n=0;n<e.length;n++){var i=e[n];if(i.cmd&&typeof FZ[i.cmd]=="function"){var r=FZ[i.cmd](i.args);Array.isArray(r)?t=t.concat(r):t.push(r)}}return t},FZ={M:function(e){return ke=e[0],Oe=e[1],Mt=Pt=null,Iw=ke,Fw=Oe,Ls(ke,Oe)},m:function(e){return ke+=e[0],Oe+=e[1],Mt=Pt=null,Iw=ke,Fw=Oe,Ls(ke,Oe)},C:function(e){return ke=e[4],Oe=e[5],Mt=e[2],Pt=e[3],no(e[0],e[1],e[2],e[3],e[4],e[5])},c:function(e){var t=no(e[0]+ke,e[1]+Oe,e[2]+ke,e[3]+Oe,e[4]+ke,e[5]+Oe);return Mt=ke+e[2],Pt=Oe+e[3],ke+=e[4],Oe+=e[5],t},S:function(e){(Mt===null||Pt===null)&&(Mt=ke,Pt=Oe);var t=no(ke-(Mt-ke),Oe-(Pt-Oe),e[0],e[1],e[2],e[3]);return Mt=e[0],Pt=e[1],ke=e[2],Oe=e[3],t},s:function(e){(Mt===null||Pt===null)&&(Mt=ke,Pt=Oe);var t=no(ke-(Mt-ke),Oe-(Pt-Oe),ke+e[0],Oe+e[1],ke+e[2],Oe+e[3]);return Mt=ke+e[0],Pt=Oe+e[1],ke+=e[2],Oe+=e[3],t},Q:function(e){return Mt=e[0],Pt=e[1],ke=e[2],Oe=e[3],Dw(e[0],e[1],ke,Oe)},q:function(e){var t=Dw(e[0]+ke,e[1]+Oe,e[2]+ke,e[3]+Oe);return Mt=ke+e[0],Pt=Oe+e[1],ke+=e[2],Oe+=e[3],t},T:function(e){Mt===null||Pt===null?(Mt=ke,Pt=Oe):(Mt=ke-(Mt-ke),Pt=Oe-(Pt-Oe));var t=Dw(Mt,Pt,e[0],e[1]);return Mt=ke-(Mt-ke),Pt=Oe-(Pt-Oe),ke=e[0],Oe=e[1],t},t:function(e){Mt===null||Pt===null?(Mt=ke,Pt=Oe):(Mt=ke-(Mt-ke),Pt=Oe-(Pt-Oe));var t=Dw(Mt,Pt,ke+e[0],Oe+e[1]);return ke+=e[0],Oe+=e[1],t},A:function(e){var t=AZ(ke,Oe,e);return ke=e[5],Oe=e[6],t},a:function(e){e[5]+=ke,e[6]+=Oe;var t=AZ(ke,Oe,e);return ke=e[5],Oe=e[6],t},L:function(e){return ke=e[0],Oe=e[1],Mt=Pt=null,bi(ke,Oe)},l:function(e){return ke+=e[0],Oe+=e[1],Mt=Pt=null,bi(ke,Oe)},H:function(e){return ke=e[0],Mt=Pt=null,bi(ke,Oe)},h:function(e){return ke+=e[0],Mt=Pt=null,bi(ke,Oe)},V:function(e){return Oe=e[0],Mt=Pt=null,bi(ke,Oe)},v:function(e){return Oe+=e[0],Mt=Pt=null,bi(ke,Oe)},Z:function(){var e=_l();return ke=Iw,Oe=Fw,e},z:function(){var e=_l();return ke=Iw,Oe=Fw,e}},AZ=function(e,t,n){for(var i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],l=n[5],c=n[6],u=o2e(l,c,i,r,s,a,o,e,t),d=[],h=0,p=u;h<p.length;h++){var g=p[h],m=s2e.apply(void 0,g);d.push(no.apply(void 0,m))}return d},o2e=function(e,t,n,i,r,o,s,a,l){var c=s*(Math.PI/180),u=Math.sin(c),d=Math.cos(c);n=Math.abs(n),i=Math.abs(i),Mt=d*(a-e)*.5+u*(l-t)*.5,Pt=d*(l-t)*.5-u*(a-e)*.5;var h=Mt*Mt/(n*n)+Pt*Pt/(i*i);h>1&&(h=Math.sqrt(h),n*=h,i*=h);var p=d/n,g=u/n,m=-u/i,v=d/i,C=p*a+g*l,S=m*a+v*l,_=p*e+g*t,D=m*e+v*t,F=(_-C)*(_-C)+(D-S)*(D-S),I=1/F-.25;I<0&&(I=0);var E=Math.sqrt(I);o===r&&(E=-E);var b=.5*(C+_)-E*(D-S),x=.5*(S+D)+E*(_-C),k=Math.atan2(S-x,C-b),A=Math.atan2(D-x,_-b),O=A-k;O<0&&o===1?O+=2*Math.PI:O>0&&o===0&&(O-=2*Math.PI);for(var P=Math.ceil(Math.abs(O/(Math.PI*.5+.001))),le=[],Re=0;Re<P;Re++){var Ue=k+Re*O/P,we=k+(Re+1)*O/P;le[Re]=[b,x,Ue,we,n,i,u,d]}return le},s2e=function(e,t,n,i,r,o,s,a){var l=a*r,c=-s*o,u=s*r,d=a*o,h=.5*(i-n),p=8/3*Math.sin(h*.5)*Math.sin(h*.5)/Math.sin(h),g=e+Math.cos(n)-p*Math.sin(n),m=t+Math.sin(n)+p*Math.cos(n),v=e+Math.cos(i),C=t+Math.sin(i),S=v+p*Math.sin(i),_=C-p*Math.cos(i),D=[l*g+c*m,u*g+d*m,l*S+c*_,u*S+d*_,l*v+c*C,u*v+d*C];return D},MZ=function(e){return r2e(i2e(e))};var PZ=function(e,t){for(var n=[Qn(),t.graphicsState&&hd(t.graphicsState),PL(),El(t.color),Tw(t.font,t.size),SZ(t.lineHeight),OL(qi(t.rotate),qi(t.xSkew),qi(t.ySkew),t.x,t.y)].filter(Boolean),i=0,r=e.length;i<r;i++)n.push(ML(e[i]),bZ());return n.push(kL(),Xn()),n},uT=function(e,t){return[Qn(),t.graphicsState&&hd(t.graphicsState),to(t.x,t.y),Ff(qi(t.rotate)),If(t.width,t.height),oT(qi(t.xSkew),qi(t.ySkew)),Rw(e),Xn()].filter(Boolean)},kZ=function(e,t){return[Qn(),t.graphicsState&&hd(t.graphicsState),to(t.x,t.y),Ff(qi(t.rotate)),If(t.xScale,t.yScale),oT(qi(t.xSkew),qi(t.ySkew)),Rw(e),Xn()].filter(Boolean)},OZ=function(e){var t,n;return[Qn(),e.graphicsState&&hd(e.graphicsState),e.color&&jm(e.color),zm(e.thickness),Ew((t=e.dashArray)!==null&&t!==void 0?t:[],(n=e.dashPhase)!==null&&n!==void 0?n:0),Ls(e.start.x,e.start.y),e.lineCap&&xw(e.lineCap),Ls(e.start.x,e.start.y),bi(e.end.x,e.end.y),Um(),Xn()].filter(Boolean)},Mf=function(e){var t,n;return[Qn(),e.graphicsState&&hd(e.graphicsState),e.color&&El(e.color),e.borderColor&&jm(e.borderColor),zm(e.borderWidth),e.borderLineCap&&xw(e.borderLineCap),Ew((t=e.borderDashArray)!==null&&t!==void 0?t:[],(n=e.borderDashPhase)!==null&&n!==void 0?n:0),to(e.x,e.y),Ff(qi(e.rotate)),oT(qi(e.xSkew),qi(e.ySkew)),Ls(0,0),bi(0,e.height),bi(e.width,e.height),bi(e.width,0),_l(),e.color&&e.borderWidth?aT():e.color?sT():e.borderColor?Um():_l(),Xn()].filter(Boolean)},lT=4*((Math.sqrt(2)-1)/3),a2e=function(e){var t=st(e.x),n=st(e.y),i=st(e.xScale),r=st(e.yScale);t-=i,n-=r;var o=i*lT,s=r*lT,a=t+i*2,l=n+r*2,c=t+i,u=n+r;return[Qn(),Ls(t,u),no(t,u-s,c-o,n,c,n),no(c+o,n,a,u-s,a,u),no(a,u+s,c+o,l,c,l),no(c-o,l,t,u+s,t,u),Xn()]},l2e=function(e){var t=st(e.x),n=st(e.y),i=st(e.xScale),r=st(e.yScale),o=-i,s=-r,a=i*lT,l=r*lT,c=o+i*2,u=s+r*2,d=o+i,h=s+r;return[to(t,n),Ff(qi(e.rotate)),Ls(o,h),no(o,h-l,d-a,s,d,s),no(d+a,s,c,h-l,c,h),no(c,h+l,d+a,u,d,u),no(d-a,u,o,h+l,o,h)]},cT=function(e){var t,n,i;return ut([Qn(),e.graphicsState&&hd(e.graphicsState),e.color&&El(e.color),e.borderColor&&jm(e.borderColor),zm(e.borderWidth),e.borderLineCap&&xw(e.borderLineCap),Ew((t=e.borderDashArray)!==null&&t!==void 0?t:[],(n=e.borderDashPhase)!==null&&n!==void 0?n:0)],e.rotate===void 0?a2e({x:e.x,y:e.y,xScale:e.xScale,yScale:e.yScale}):l2e({x:e.x,y:e.y,xScale:e.xScale,yScale:e.yScale,rotate:(i=e.rotate)!==null&&i!==void 0?i:Pe(0)}),[e.color&&e.borderWidth?aT():e.color?sT():e.borderColor?Um():_l(),Xn()]).filter(Boolean)},NZ=function(e,t){var n,i,r;return ut([Qn(),t.graphicsState&&hd(t.graphicsState),to(t.x,t.y),Ff(qi((n=t.rotate)!==null&&n!==void 0?n:Pe(0))),t.scale?If(t.scale,-t.scale):If(1,-1),t.color&&El(t.color),t.borderColor&&jm(t.borderColor),t.borderWidth&&zm(t.borderWidth),t.borderLineCap&&xw(t.borderLineCap),Ew((i=t.borderDashArray)!==null&&i!==void 0?i:[],(r=t.borderDashPhase)!==null&&r!==void 0?r:0)],MZ(e),[t.color&&t.borderWidth?aT():t.color?sT():t.borderColor?Um():_l(),Xn()]).filter(Boolean)},c2e=function(e){var t=st(e.size),n=-1+.75,i=-1+.51,r=1-.525,o=1-.31,s=-1+.325,a=-((s-n)*(o-n))/(r-i)+i;return[Qn(),e.color&&jm(e.color),zm(e.thickness),to(e.x,e.y),Ls(s*t,a*t),bi(n*t,i*t),bi(o*t,r*t),Um(),Xn()].filter(Boolean)},Da=function(e){return e.rotation===0?[to(0,0),_w(0)]:e.rotation===90?[to(e.width,0),_w(90)]:e.rotation===180?[to(e.width,e.height),_w(180)]:e.rotation===270?[to(0,e.height),_w(270)]:[]},Aw=function(e){var t=Mf({x:e.x,y:e.y,width:e.width,height:e.height,borderWidth:e.borderWidth,color:e.color,borderColor:e.borderColor,rotate:Pe(0),xSkew:Pe(0),ySkew:Pe(0)});if(!e.filled)return t;var n=st(e.width),i=st(e.height),r=Math.min(n,i)/2,o=c2e({x:n/2,y:i/2,size:r,thickness:e.thickness,color:e.markColor});return ut([Qn()],t,o,[Xn()])},Mw=function(e){var t=st(e.width),n=st(e.height),i=Math.min(t,n)/2,r=cT({x:e.x,y:e.y,xScale:i,yScale:i,color:e.color,borderColor:e.borderColor,borderWidth:e.borderWidth});if(!e.filled)return r;var o=cT({x:e.x,y:e.y,xScale:i*.45,yScale:i*.45,color:e.dotColor,borderColor:void 0,borderWidth:0});return ut([Qn()],r,o,[Xn()])},jL=function(e){var t=st(e.x),n=st(e.y),i=st(e.width),r=st(e.height),o=Mf({x:t,y:n,width:i,height:r,borderWidth:e.borderWidth,color:e.color,borderColor:e.borderColor,rotate:Pe(0),xSkew:Pe(0),ySkew:Pe(0)}),s=WL(e.textLines,{color:e.textColor,font:e.font,size:e.fontSize,rotate:Pe(0),xSkew:Pe(0),ySkew:Pe(0)});return ut([Qn()],o,s,[Xn()])},WL=function(e,t){for(var n=[PL(),El(t.color),Tw(t.font,t.size)],i=0,r=e.length;i<r;i++){var o=e[i],s=o.encoded,a=o.x,l=o.y;n.push(OL(qi(t.rotate),qi(t.xSkew),qi(t.ySkew),a,l),ML(s))}return n.push(kL()),n},qL=function(e){var t=st(e.x),n=st(e.y),i=st(e.width),r=st(e.height),o=st(e.borderWidth),s=st(e.padding),a=t+o/2+s,l=n+o/2+s,c=i-(o/2+s)*2,u=r-(o/2+s)*2,d=[Ls(a,l),bi(a,l+u),bi(a+c,l+u),bi(a+c,l),_l(),FL(),AL()],h=Mf({x:t,y:n,width:i,height:r,borderWidth:e.borderWidth,color:e.color,borderColor:e.borderColor,rotate:Pe(0),xSkew:Pe(0),ySkew:Pe(0)}),p=WL(e.textLines,{color:e.textColor,font:e.font,size:e.fontSize,rotate:Pe(0),xSkew:Pe(0),ySkew:Pe(0)}),g=ut([NL("Tx"),Qn()],p,[Xn(),LL()]);return ut([Qn()],h,d,g,[Xn()])},LZ=function(e){for(var t=st(e.x),n=st(e.y),i=st(e.width),r=st(e.height),o=st(e.lineHeight),s=st(e.borderWidth),a=st(e.padding),l=t+s/2+a,c=n+s/2+a,u=i-(s/2+a)*2,d=r-(s/2+a)*2,h=[Ls(l,c),bi(l,c+d),bi(l+u,c+d),bi(l+u,c),_l(),FL(),AL()],p=Mf({x:t,y:n,width:i,height:r,borderWidth:e.borderWidth,color:e.color,borderColor:e.borderColor,rotate:Pe(0),xSkew:Pe(0),ySkew:Pe(0)}),g=[],m=0,v=e.selectedLines.length;m<v;m++){var C=e.textLines[e.selectedLines[m]];g.push.apply(g,Mf({x:C.x-a,y:C.y-(o-C.height)/2,width:i-s,height:C.height+(o-C.height)/2,borderWidth:0,color:e.selectedColor,borderColor:void 0,rotate:Pe(0),xSkew:Pe(0),ySkew:Pe(0)}))}var S=WL(e.textLines,{color:e.textColor,font:e.font,size:e.fontSize,rotate:Pe(0),xSkew:Pe(0),ySkew:Pe(0)}),_=ut([NL("Tx"),Qn()],S,[Xn(),LL()]);return ut([Qn()],p,g,h,_,[Xn()])};var VZ=function(e){W(t,e);function t(){var n=this,i="Input document to `PDFDocument.load` is encrypted. You can use `PDFDocument.load(..., { ignoreEncryption: true })` if you wish to load the document anyways.";return n=e.call(this,i)||this,n}return t}(Error);var BZ=function(e){W(t,e);function t(){var n=this,i="Input to `PDFDocument.embedFont` was a custom font, but no `fontkit` instance was found. You must register a `fontkit` instance with `PDFDocument.registerFontkit(...)` before embedding custom fonts.";return n=e.call(this,i)||this,n}return t}(Error);var GZ=function(e){W(t,e);function t(){var n=this,i="A `page` passed to `PDFDocument.addPage` or `PDFDocument.insertPage` was from a different (foreign) PDF document. If you want to copy pages from one PDFDocument to another, you must use `PDFDocument.copyPages(...)` to copy the pages before adding or inserting them.";return n=e.call(this,i)||this,n}return t}(Error);var HZ=function(e){W(t,e);function t(){var n=this,i="PDFDocument has no pages so `PDFDocument.removePage` cannot be called";return n=e.call(this,i)||this,n}return t}(Error);var zZ=function(e){W(t,e);function t(n){var i=this,r='PDFDocument has no form field with the name "'+n+'"';return i=e.call(this,r)||this,i}return t}(Error);var fd=function(e){W(t,e);function t(n,i,r){var o,s,a=this,l=i?.name,c=(s=(o=r?.constructor)===null||o===void 0?void 0:o.name)!==null&&s!==void 0?s:r,u='Expected field "'+n+'" to be of type '+l+", "+("but it is actually of type "+c);return a=e.call(this,u)||this,a}return t}(Error);var pvt=function(e){W(t,e);function t(n){var i=this,r='Failed to select check box due to missing onValue: "'+n+'"';return i=e.call(this,r)||this,i}return t}(Error);var KL=function(e){W(t,e);function t(n){var i=this,r='A field already exists with the specified name: "'+n+'"';return i=e.call(this,r)||this,i}return t}(Error);var UZ=function(e){W(t,e);function t(n){var i=this,r='Field name contains invalid component: "'+n+'"';return i=e.call(this,r)||this,i}return t}(Error);var gvt=function(e){W(t,e);function t(n){var i=this,r='A non-terminal field already exists with the specified name: "'+n+'"';return i=e.call(this,r)||this,i}return t}(Error);var jZ=function(e){W(t,e);function t(n){var i=this,r="Reading rich text fields is not supported: Attempted to read rich text field: "+n;return i=e.call(this,r)||this,i}return t}(Error);var WZ=function(e){W(t,e);function t(n,i){var r=this,o="Failed to layout combed text as lineLength="+n+" is greater than cellCount="+i;return r=e.call(this,o)||this,r}return t}(Error);var qZ=function(e){W(t,e);function t(n,i,r){var o=this,s="Attempted to set text with length="+n+" for TextField with maxLength="+i+" and name="+r;return o=e.call(this,s)||this,o}return t}(Error);var KZ=function(e){W(t,e);function t(n,i,r){var o=this,s="Attempted to set maxLength="+i+", which is less than "+n+", the length of this field's current value (name="+r+")";return o=e.call(this,s)||this,o}return t}(Error);var li=function(e){return e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right",e}(li||{});var YZ=4,QZ=500,XZ=function(e,t,n,i){i===void 0&&(i=!1);for(var r=YZ;r<QZ;){for(var o=0,s=0,a=e.length;s<a;s++){o+=1;for(var l=e[s],c=l.split(" "),u=n.width,d=0,h=c.length;d<h;d++){var p=d===h-1,g=p?c[d]:c[d]+" ",m=t.widthOfTextAtSize(g,r);u-=m,u<=0&&(o+=1,u=n.width-m)}}if(!i&&o>e.length)return r-1;var v=t.heightAtSize(r),C=v+v*.2,S=C*o;if(S>Math.abs(n.height))return r-1;r+=1}return r},u2e=function(e,t,n,i){for(var r=n.width/i,o=n.height,s=YZ,a=eQ(e);s<QZ;){for(var l=0,c=a.length;l<c;l++){var u=a[l],d=t.widthOfTextAtSize(u,s)>r*.75;if(d)return s-1}var h=t.heightAtSize(s,{descender:!1});if(h>o)return s-1;s+=1}return s},d2e=function(e){for(var t=e.length;t>0;t--)if(/\s/.test(e[t]))return t},h2e=function(e,t,n,i){for(var r,o=e.length;o>0;){var s=e.substring(0,o),a=n.encodeText(s),l=n.widthOfTextAtSize(s,i);if(l<t){var c=e.substring(o)||void 0;return{line:s,encoded:a,width:l,remainder:c}}o=(r=d2e(s))!==null&&r!==void 0?r:0}return{line:e,encoded:n.encodeText(e),width:n.widthOfTextAtSize(e,i),remainder:void 0}},YL=function(e,t){var n=t.alignment,i=t.fontSize,r=t.font,o=t.bounds,s=gD(af(e));(i===void 0||i===0)&&(i=XZ(s,r,o,!0));for(var a=r.heightAtSize(i),l=a+a*.2,c=[],u=o.x,d=o.y,h=o.x+o.width,p=o.y+o.height,g=o.y+o.height,m=0,v=s.length;m<v;m++)for(var C=s[m];C!==void 0;){var S=h2e(C,o.width,r,i),_=S.line,D=S.encoded,F=S.width,I=S.remainder,E=n===li.Left?o.x:n===li.Center?o.x+o.width/2-F/2:n===li.Right?o.x+o.width-F:o.x;g-=l,E<u&&(u=E),g<d&&(d=g),E+F>h&&(h=E+F),g+a>p&&(p=g+a),c.push({text:_,encoded:D,width:F,height:a,x:E,y:g}),C=I?.trim()}return{fontSize:i,lineHeight:l,lines:c,bounds:{x:u,y:d,width:h-u,height:p-d}}},$Z=function(e,t){var n=t.fontSize,i=t.font,r=t.bounds,o=t.cellCount,s=xN(af(e));if(s.length>o)throw new WZ(s.length,o);(n===void 0||n===0)&&(n=u2e(s,i,r,o));for(var a=r.width/o,l=i.heightAtSize(n,{descender:!1}),c=r.y+(r.height/2-l/2),u=[],d=r.x,h=r.y,p=r.x+r.width,g=r.y+r.height,m=0,v=0;m<o;){var C=DN(s,v),S=C[0],_=C[1],D=i.encodeText(S),F=i.widthOfTextAtSize(S,n),I=r.x+(a*m+a/2),E=I-F/2;E<d&&(d=E),c<h&&(h=c),E+F>p&&(p=E+F),c+l>g&&(g=c+l),u.push({text:s,encoded:D,width:F,height:l,x:E,y:c}),m+=1,v+=_}return{fontSize:n,cells:u,bounds:{x:d,y:h,width:p-d,height:g-h}}},Pw=function(e,t){var n=t.alignment,i=t.fontSize,r=t.font,o=t.bounds,s=xN(af(e));(i===void 0||i===0)&&(i=XZ([s],r,o));var a=r.encodeText(s),l=r.widthOfTextAtSize(s,i),c=r.heightAtSize(i,{descender:!1}),u=n===li.Left?o.x:n===li.Center?o.x+o.width/2-l/2:n===li.Right?o.x+o.width-l:o.x,d=o.y+(o.height/2-c/2);return{fontSize:i,line:{text:s,encoded:a,width:l,height:c,x:u,y:d},bounds:{x:u,y:d,width:l,height:c}}};var Gs=function(e){return"normal"in e?e:{normal:e}},f2e=/\/([^\0\t\n\f\r\ ]+)[\0\t\n\f\r\ ]+(\d*\.\d+|\d+)[\0\t\n\f\r\ ]+Tf/,pd=function(e){var t,n,i=(t=e.getDefaultAppearance())!==null&&t!==void 0?t:"",r=(n=DC(i,f2e).match)!==null&&n!==void 0?n:[],o=Number(r[2]);return isFinite(o)?o:void 0},p2e=/(\d*\.\d+|\d+)[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]*(\d*\.\d+|\d+)?[\0\t\n\f\r\ ]+(g|rg|k)/,Vs=function(e){var t,n=(t=e.getDefaultAppearance())!==null&&t!==void 0?t:"",i=DC(n,p2e).match,r=i??[],o=r[1],s=r[2],a=r[3],l=r[4],c=r[5];if(c==="g"&&o)return VL(Number(o));if(c==="rg"&&o&&s&&a)return yt(Number(o),Number(s),Number(a));if(c==="k"&&o&&s&&a&&l)return BL(Number(o),Number(s),Number(a),Number(l))},Bs=function(e,t,n,i){var r;i===void 0&&(i=0);var o=[El(t).toString(),Tw((r=n?.name)!==null&&r!==void 0?r:"dummy__noop",i).toString()].join(`
`);e.setDefaultAppearance(o)},ZZ=function(e,t){var n,i,r,o=Vs(t),s=Vs(e.acroField),a=t.getRectangle(),l=t.getAppearanceCharacteristics(),c=t.getBorderStyle(),u=(n=c?.getWidth())!==null&&n!==void 0?n:0,d=xa(l?.getRotation()),h=Tc(a,d),p=h.width,g=h.height,m=Da(Xe(Xe({},a),{rotation:d})),v=yt(0,0,0),C=(i=Er(l?.getBorderColor()))!==null&&i!==void 0?i:v,S=Er(l?.getBackgroundColor()),_=Er(l?.getBackgroundColor(),.8),D=(r=o??s)!==null&&r!==void 0?r:v;Bs(o?t:e.acroField,D);var F={x:0+u/2,y:0+u/2,width:p-u,height:g-u,thickness:1.5,borderWidth:u,borderColor:C,markColor:D};return{normal:{on:ut(m,Aw(Xe(Xe({},F),{color:S,filled:!0}))),off:ut(m,Aw(Xe(Xe({},F),{color:S,filled:!1})))},down:{on:ut(m,Aw(Xe(Xe({},F),{color:_,filled:!0}))),off:ut(m,Aw(Xe(Xe({},F),{color:_,filled:!1})))}}},JZ=function(e,t){var n,i,r,o=Vs(t),s=Vs(e.acroField),a=t.getRectangle(),l=t.getAppearanceCharacteristics(),c=t.getBorderStyle(),u=(n=c?.getWidth())!==null&&n!==void 0?n:0,d=xa(l?.getRotation()),h=Tc(a,d),p=h.width,g=h.height,m=Da(Xe(Xe({},a),{rotation:d})),v=yt(0,0,0),C=(i=Er(l?.getBorderColor()))!==null&&i!==void 0?i:v,S=Er(l?.getBackgroundColor()),_=Er(l?.getBackgroundColor(),.8),D=(r=o??s)!==null&&r!==void 0?r:v;Bs(o?t:e.acroField,D);var F={x:p/2,y:g/2,width:p-u,height:g-u,borderWidth:u,borderColor:C,dotColor:D};return{normal:{on:ut(m,Mw(Xe(Xe({},F),{color:S,filled:!0}))),off:ut(m,Mw(Xe(Xe({},F),{color:S,filled:!1})))},down:{on:ut(m,Mw(Xe(Xe({},F),{color:_,filled:!0}))),off:ut(m,Mw(Xe(Xe({},F),{color:_,filled:!1})))}}},eJ=function(e,t,n){var i,r,o,s,a,l=Vs(t),c=Vs(e.acroField),u=pd(t),d=pd(e.acroField),h=t.getRectangle(),p=t.getAppearanceCharacteristics(),g=t.getBorderStyle(),m=p?.getCaptions(),v=(i=m?.normal)!==null&&i!==void 0?i:"",C=(o=(r=m?.down)!==null&&r!==void 0?r:v)!==null&&o!==void 0?o:"",S=(s=g?.getWidth())!==null&&s!==void 0?s:0,_=xa(p?.getRotation()),D=Tc(h,_),F=D.width,I=D.height,E=Da(Xe(Xe({},h),{rotation:_})),b=yt(0,0,0),x=Er(p?.getBorderColor()),k=Er(p?.getBackgroundColor()),A=Er(p?.getBackgroundColor(),.8),O={x:S,y:S,width:F-S*2,height:I-S*2},P=Pw(v,{alignment:li.Center,fontSize:u??d,font:n,bounds:O}),le=Pw(C,{alignment:li.Center,fontSize:u??d,font:n,bounds:O}),Re=Math.min(P.fontSize,le.fontSize),Ue=(a=l??c)!==null&&a!==void 0?a:b;Bs(l||u!==void 0?t:e.acroField,Ue,n,Re);var we={x:0+S/2,y:0+S/2,width:F-S,height:I-S,borderWidth:S,borderColor:x,textColor:Ue,font:n.name,fontSize:Re};return{normal:ut(E,jL(Xe(Xe({},we),{color:k,textLines:[P.line]}))),down:ut(E,jL(Xe(Xe({},we),{color:A,textLines:[le.line]})))}},tJ=function(e,t,n){var i,r,o,s,a=Vs(t),l=Vs(e.acroField),c=pd(t),u=pd(e.acroField),d=t.getRectangle(),h=t.getAppearanceCharacteristics(),p=t.getBorderStyle(),g=(i=e.getText())!==null&&i!==void 0?i:"",m=(r=p?.getWidth())!==null&&r!==void 0?r:0,v=xa(h?.getRotation()),C=Tc(d,v),S=C.width,_=C.height,D=Da(Xe(Xe({},d),{rotation:v})),F=yt(0,0,0),I=Er(h?.getBorderColor()),E=Er(h?.getBackgroundColor()),b,x,k=e.isCombed()?0:1,A={x:m+k,y:m+k,width:S-(m+k)*2,height:_-(m+k)*2};if(e.isMultiline()){var O=YL(g,{alignment:e.getAlignment(),fontSize:c??u,font:n,bounds:A});b=O.lines,x=O.fontSize}else if(e.isCombed()){var O=$Z(g,{fontSize:c??u,font:n,bounds:A,cellCount:(o=e.getMaxLength())!==null&&o!==void 0?o:0});b=O.cells,x=O.fontSize}else{var O=Pw(g,{alignment:e.getAlignment(),fontSize:c??u,font:n,bounds:A});b=[O.line],x=O.fontSize}var P=(s=a??l)!==null&&s!==void 0?s:F;Bs(a||c!==void 0?t:e.acroField,P,n,x);var le={x:0+m/2,y:0+m/2,width:S-m,height:_-m,borderWidth:m??0,borderColor:I,textColor:P,font:n.name,fontSize:x,color:E,textLines:b,padding:k};return ut(D,qL(le))},nJ=function(e,t,n){var i,r,o,s=Vs(t),a=Vs(e.acroField),l=pd(t),c=pd(e.acroField),u=t.getRectangle(),d=t.getAppearanceCharacteristics(),h=t.getBorderStyle(),p=(i=e.getSelected()[0])!==null&&i!==void 0?i:"",g=(r=h?.getWidth())!==null&&r!==void 0?r:0,m=xa(d?.getRotation()),v=Tc(u,m),C=v.width,S=v.height,_=Da(Xe(Xe({},u),{rotation:m})),D=yt(0,0,0),F=Er(d?.getBorderColor()),I=Er(d?.getBackgroundColor()),E=1,b={x:g+E,y:g+E,width:C-(g+E)*2,height:S-(g+E)*2},x=Pw(p,{alignment:li.Left,fontSize:l??c,font:n,bounds:b}),k=x.line,A=x.fontSize,O=(o=s??a)!==null&&o!==void 0?o:D;Bs(s||l!==void 0?t:e.acroField,O,n,A);var P={x:0+g/2,y:0+g/2,width:C-g,height:S-g,borderWidth:g??0,borderColor:F,textColor:O,font:n.name,fontSize:A,color:I,textLines:[k],padding:E};return ut(_,qL(P))},iJ=function(e,t,n){var i,r,o=Vs(t),s=Vs(e.acroField),a=pd(t),l=pd(e.acroField),c=t.getRectangle(),u=t.getAppearanceCharacteristics(),d=t.getBorderStyle(),h=(i=d?.getWidth())!==null&&i!==void 0?i:0,p=xa(u?.getRotation()),g=Tc(c,p),m=g.width,v=g.height,C=Da(Xe(Xe({},c),{rotation:p})),S=yt(0,0,0),_=Er(u?.getBorderColor()),D=Er(u?.getBackgroundColor()),F=e.getOptions(),I=e.getSelected();e.isSorted()&&F.sort();for(var E="",b=0,x=F.length;b<x;b++)E+=F[b],b<x-1&&(E+=`
`);for(var k=1,A={x:h+k,y:h+k,width:m-(h+k)*2,height:v-(h+k)*2},O=YL(E,{alignment:li.Left,fontSize:a??l,font:n,bounds:A}),P=O.lines,le=O.fontSize,Re=O.lineHeight,Ue=[],b=0,x=P.length;b<x;b++){var we=P[b];I.includes(we.text)&&Ue.push(b)}var Ct=yt(153/255,193/255,218/255),ln=(r=o??s)!==null&&r!==void 0?r:S;return Bs(o||a!==void 0?t:e.acroField,ln,n,le),ut(C,LZ({x:0+h/2,y:0+h/2,width:m-h,height:v-h,borderWidth:h??0,borderColor:_,textColor:ln,font:n.name,fontSize:le,color:D,textLines:P,lineHeight:Re,selectedColor:Ct,selectedLines:Ue,padding:k}))};var g2e=function(){function e(t,n,i){this.alreadyEmbedded=!1,L(t,"ref",[[$e,"PDFRef"]]),L(n,"doc",[[xr,"PDFDocument"]]),L(i,"embedder",[[sw,"PDFPageEmbedder"]]),this.ref=t,this.doc=n,this.width=i.width,this.height=i.height,this.embedder=i}return e.prototype.scale=function(t){return L(t,"factor",["number"]),{width:this.width*t,height:this.height*t}},e.prototype.size=function(){return this.scale(1)},e.prototype.embed=function(){return Ae(this,void 0,void 0,function(){return Me(this,function(t){switch(t.label){case 0:return this.alreadyEmbedded?[3,2]:[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:t.sent(),this.alreadyEmbedded=!0,t.label=2;case 2:return[2]}})})},e.of=function(t,n,i){return new e(t,n,i)},e}(),kw=g2e;var m2e=function(){function e(t,n,i){this.modified=!0,L(t,"ref",[[$e,"PDFRef"]]),L(n,"doc",[[xr,"PDFDocument"]]),L(i,"embedder",[[xf,"CustomFontEmbedder"],[Ef,"StandardFontEmbedder"]]),this.ref=t,this.doc=n,this.name=i.fontName,this.embedder=i}return e.prototype.encodeText=function(t){return L(t,"text",["string"]),this.modified=!0,this.embedder.encodeText(t)},e.prototype.widthOfTextAtSize=function(t,n){return L(t,"text",["string"]),L(n,"size",["number"]),this.embedder.widthOfTextAtSize(t,n)},e.prototype.heightAtSize=function(t,n){var i;return L(t,"size",["number"]),ie(n?.descender,"options.descender",["boolean"]),this.embedder.heightOfFontAtSize(t,{descender:(i=n?.descender)!==null&&i!==void 0?i:!0})},e.prototype.sizeAtHeight=function(t){return L(t,"height",["number"]),this.embedder.sizeOfFontAtHeight(t)},e.prototype.getCharacterSet=function(){return this.embedder instanceof Ef?this.embedder.encoding.supportedCodePoints:this.embedder.font.characterSet},e.prototype.embed=function(){return Ae(this,void 0,void 0,function(){return Me(this,function(t){switch(t.label){case 0:return this.modified?[4,this.embedder.embedIntoContext(this.doc.context,this.ref)]:[3,2];case 1:t.sent(),this.modified=!1,t.label=2;case 2:return[2]}})})},e.of=function(t,n,i){return new e(t,n,i)},e}(),ci=m2e;var v2e=function(){function e(t,n,i){L(t,"ref",[[$e,"PDFRef"]]),L(n,"doc",[[xr,"PDFDocument"]]),L(i,"embedder",[[iw,"JpegEmbedder"],[rw,"PngEmbedder"]]),this.ref=t,this.doc=n,this.width=i.width,this.height=i.height,this.embedder=i}return e.prototype.scale=function(t){return L(t,"factor",["number"]),{width:this.width*t,height:this.height*t}},e.prototype.scaleToFit=function(t,n){L(t,"width",["number"]),L(n,"height",["number"]);var i=t/this.width,r=n/this.height,o=Math.min(i,r);return this.scale(o)},e.prototype.size=function(){return this.scale(1)},e.prototype.embed=function(){return Ae(this,void 0,void 0,function(){var t,n,i;return Me(this,function(r){switch(r.label){case 0:return this.embedder?(this.embedTask||(t=this,n=t.doc,i=t.ref,this.embedTask=this.embedder.embedIntoContext(n.context,i)),[4,this.embedTask]):[2];case 1:return r.sent(),this.embedder=void 0,[2]}})})},e.of=function(t,n,i){return new e(t,n,i)},e}(),Wm=v2e;var xl=function(e){return e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right",e}(xl||{});var Hs=function(e){ie(e?.x,"options.x",["number"]),ie(e?.y,"options.y",["number"]),ie(e?.width,"options.width",["number"]),ie(e?.height,"options.height",["number"]),ie(e?.textColor,"options.textColor",[[Object,"Color"]]),ie(e?.backgroundColor,"options.backgroundColor",[[Object,"Color"]]),ie(e?.borderColor,"options.borderColor",[[Object,"Color"]]),ie(e?.borderWidth,"options.borderWidth",["number"]),ie(e?.rotate,"options.rotate",[[Object,"Rotation"]])},y2e=function(){function e(t,n,i){L(t,"acroField",[[os,"PDFAcroTerminal"]]),L(n,"ref",[[$e,"PDFRef"]]),L(i,"doc",[[xr,"PDFDocument"]]),this.acroField=t,this.ref=n,this.doc=i}return e.prototype.getName=function(){var t;return(t=this.acroField.getFullyQualifiedName())!==null&&t!==void 0?t:""},e.prototype.isReadOnly=function(){return this.acroField.hasFlag(Ea.ReadOnly)},e.prototype.enableReadOnly=function(){this.acroField.setFlagTo(Ea.ReadOnly,!0)},e.prototype.disableReadOnly=function(){this.acroField.setFlagTo(Ea.ReadOnly,!1)},e.prototype.isRequired=function(){return this.acroField.hasFlag(Ea.Required)},e.prototype.enableRequired=function(){this.acroField.setFlagTo(Ea.Required,!0)},e.prototype.disableRequired=function(){this.acroField.setFlagTo(Ea.Required,!1)},e.prototype.isExported=function(){return!this.acroField.hasFlag(Ea.NoExport)},e.prototype.enableExporting=function(){this.acroField.setFlagTo(Ea.NoExport,!1)},e.prototype.disableExporting=function(){this.acroField.setFlagTo(Ea.NoExport,!0)},e.prototype.needsAppearancesUpdate=function(){throw new ur(this.constructor.name,"needsAppearancesUpdate")},e.prototype.defaultUpdateAppearances=function(t){throw new ur(this.constructor.name,"defaultUpdateAppearances")},e.prototype.markAsDirty=function(){this.doc.getForm().markFieldAsDirty(this.ref)},e.prototype.markAsClean=function(){this.doc.getForm().markFieldAsClean(this.ref)},e.prototype.isDirty=function(){return this.doc.getForm().fieldIsDirty(this.ref)},e.prototype.createWidget=function(t){var n,i=t.textColor,r=t.backgroundColor,o=t.borderColor,s=t.borderWidth,a=eT(t.rotate),l=t.caption,c=t.x,u=t.y,d=t.width+s,h=t.height+s,p=!!t.hidden,g=t.page;BD(a,"degreesAngle",90);var m=Bm.create(this.doc.context,this.ref),v=wZ({x:c,y:u,width:d,height:h},s,a);m.setRectangle(v),g&&m.setP(g);var C=m.getOrCreateAppearanceCharacteristics();r&&C.setBackgroundColor(UL(r)),C.setRotation(a),l&&C.setCaptions({normal:l}),o&&C.setBorderColor(UL(o));var S=m.getOrCreateBorderStyle();if(s!==void 0&&S.setWidth(s),m.setFlagTo(bw.Print,!0),m.setFlagTo(bw.Hidden,p),m.setFlagTo(bw.Invisible,!1),i){var _=(n=this.acroField.getDefaultAppearance())!==null&&n!==void 0?n:"",D=_+`
`+El(i).toString();this.acroField.setDefaultAppearance(D)}return m},e.prototype.updateWidgetAppearanceWithFont=function(t,n,i){var r=i.normal,o=i.rollover,s=i.down;this.updateWidgetAppearances(t,{normal:this.createAppearanceStream(t,r,n),rollover:o&&this.createAppearanceStream(t,o,n),down:s&&this.createAppearanceStream(t,s,n)})},e.prototype.updateOnOffWidgetAppearance=function(t,n,i){var r=i.normal,o=i.rollover,s=i.down;this.updateWidgetAppearances(t,{normal:this.createAppearanceDict(t,r,n),rollover:o&&this.createAppearanceDict(t,o,n),down:s&&this.createAppearanceDict(t,s,n)})},e.prototype.updateWidgetAppearances=function(t,n){var i=n.normal,r=n.rollover,o=n.down;t.setNormalAppearance(i),r?t.setRolloverAppearance(r):t.removeRolloverAppearance(),o?t.setDownAppearance(o):t.removeDownAppearance()},e.prototype.createAppearanceStream=function(t,n,i){var r,o=this.acroField.dict.context,s=t.getRectangle(),a=s.width,l=s.height,c=i&&{Font:(r={},r[i.name]=i.ref,r)},u=o.formXObject(n,{Resources:c,BBox:o.obj([0,0,a,l]),Matrix:o.obj([1,0,0,1,0,0])}),d=o.register(u);return d},e.prototype.createImageAppearanceStream=function(t,n,i){var r,o,s=this.acroField.dict.context,a=t.getRectangle(),l=t.getAppearanceCharacteristics(),c=t.getBorderStyle(),u=(o=c?.getWidth())!==null&&o!==void 0?o:0,d=xa(l?.getRotation()),h=Da(Xe(Xe({},a),{rotation:d})),p=Tc(a,d),g=n.scaleToFit(p.width-u*2,p.height-u*2),m={x:u,y:u,width:g.width,height:g.height,rotate:Pe(0),xSkew:Pe(0),ySkew:Pe(0)};i===xl.Center?(m.x+=(p.width-u*2)/2-g.width/2,m.y+=(p.height-u*2)/2-g.height/2):i===xl.Right&&(m.x=p.width-u-g.width,m.y=p.height-u-g.height);var v=this.doc.context.addRandomSuffix("Image",10),C=ut(h,uT(v,m)),S={XObject:(r={},r[v]=n.ref,r)},_=s.formXObject(C,{Resources:S,BBox:s.obj([0,0,a.width,a.height]),Matrix:s.obj([1,0,0,1,0,0])});return s.register(_)},e.prototype.createAppearanceDict=function(t,n,i){var r=this.acroField.dict.context,o=this.createAppearanceStream(t,n.on),s=this.createAppearanceStream(t,n.off),a=r.obj({});return a.set(i,o),a.set(T.of("Off"),s),a},e}(),io=y2e;var C2e=function(e){W(t,e);function t(n,i,r){var o=e.call(this,n,i,r)||this;return L(n,"acroCheckBox",[[rd,"PDFAcroCheckBox"]]),o.acroField=n,o}return t.prototype.check=function(){var n,i=(n=this.acroField.getOnValue())!==null&&n!==void 0?n:T.of("Yes");this.markAsDirty(),this.acroField.setValue(i)},t.prototype.uncheck=function(){this.markAsDirty(),this.acroField.setValue(T.of("Off"))},t.prototype.isChecked=function(){var n=this.acroField.getOnValue();return!!n&&n===this.acroField.getValue()},t.prototype.addToPage=function(n,i){var r,o,s,a,l,c;L(n,"page",[[Si,"PDFPage"]]),Hs(i),i||(i={}),"textColor"in i||(i.textColor=yt(0,0,0)),"backgroundColor"in i||(i.backgroundColor=yt(1,1,1)),"borderColor"in i||(i.borderColor=yt(0,0,0)),"borderWidth"in i||(i.borderWidth=1);var u=this.createWidget({x:(r=i.x)!==null&&r!==void 0?r:0,y:(o=i.y)!==null&&o!==void 0?o:0,width:(s=i.width)!==null&&s!==void 0?s:50,height:(a=i.height)!==null&&a!==void 0?a:50,textColor:i.textColor,backgroundColor:i.backgroundColor,borderColor:i.borderColor,borderWidth:(l=i.borderWidth)!==null&&l!==void 0?l:0,rotate:(c=i.rotate)!==null&&c!==void 0?c:Pe(0),hidden:i.hidden,page:n.ref}),d=this.doc.context.register(u.dict);this.acroField.addWidget(d),u.setAppearanceState(T.of("Off")),this.updateWidgetAppearance(u,T.of("Yes")),n.node.addAnnot(d)},t.prototype.needsAppearancesUpdate=function(){for(var n,i=this.acroField.getWidgets(),r=0,o=i.length;r<o;r++){var s=i[r],a=s.getAppearanceState(),l=(n=s.getAppearances())===null||n===void 0?void 0:n.normal;if(!(l instanceof Te)||a&&!l.has(a))return!0}return!1},t.prototype.defaultUpdateAppearances=function(){this.updateAppearances()},t.prototype.updateAppearances=function(n){var i;ie(n,"provider",[Function]);for(var r=this.acroField.getWidgets(),o=0,s=r.length;o<s;o++){var a=r[o],l=(i=a.getOnValue())!==null&&i!==void 0?i:T.of("Yes");l&&this.updateWidgetAppearance(a,l,n)}this.markAsClean()},t.prototype.updateWidgetAppearance=function(n,i,r){var o=r??ZZ,s=Gs(o(this,n));this.updateOnOffWidgetAppearance(n,i,s)},t.of=function(n,i,r){return new t(n,i,r)},t}(io),Pf=C2e;var w2e=function(e){W(t,e);function t(n,i,r){var o=e.call(this,n,i,r)||this;return L(n,"acroComboBox",[[od,"PDFAcroComboBox"]]),o.acroField=n,o}return t.prototype.getOptions=function(){for(var n=this.acroField.getOptions(),i=new Array(n.length),r=0,o=i.length;r<o;r++){var s=n[r],a=s.display,l=s.value;i[r]=(a??l).decodeText()}return i},t.prototype.getSelected=function(){for(var n=this.acroField.getValues(),i=new Array(n.length),r=0,o=n.length;r<o;r++)i[r]=n[r].decodeText();return i},t.prototype.setOptions=function(n){L(n,"options",[Array]);for(var i=new Array(n.length),r=0,o=n.length;r<o;r++)i[r]={value:_e.fromText(n[r])};this.acroField.setOptions(i)},t.prototype.addOptions=function(n){L(n,"options",["string",Array]);for(var i=Array.isArray(n)?n:[n],r=this.acroField.getOptions(),o=new Array(i.length),s=0,a=i.length;s<a;s++)o[s]={value:_e.fromText(i[s])};this.acroField.setOptions(r.concat(o))},t.prototype.select=function(n,i){i===void 0&&(i=!1),L(n,"options",["string",Array]),L(i,"merge",["boolean"]);var r=Array.isArray(n)?n:[n],o=this.getOptions(),s=r.find(function(d){return!o.includes(d)});s&&this.enableEditing(),this.markAsDirty(),(r.length>1||r.length===1&&i)&&this.enableMultiselect();for(var a=new Array(r.length),l=0,c=r.length;l<c;l++)a[l]=_e.fromText(r[l]);if(i){var u=this.acroField.getValues();this.acroField.setValues(u.concat(a))}else this.acroField.setValues(a)},t.prototype.clear=function(){this.markAsDirty(),this.acroField.setValues([])},t.prototype.setFontSize=function(n){nd(n,"fontSize"),this.acroField.setFontSize(n),this.markAsDirty()},t.prototype.isEditable=function(){return this.acroField.hasFlag(Nt.Edit)},t.prototype.enableEditing=function(){this.acroField.setFlagTo(Nt.Edit,!0)},t.prototype.disableEditing=function(){this.acroField.setFlagTo(Nt.Edit,!1)},t.prototype.isSorted=function(){return this.acroField.hasFlag(Nt.Sort)},t.prototype.enableSorting=function(){this.acroField.setFlagTo(Nt.Sort,!0)},t.prototype.disableSorting=function(){this.acroField.setFlagTo(Nt.Sort,!1)},t.prototype.isMultiselect=function(){return this.acroField.hasFlag(Nt.MultiSelect)},t.prototype.enableMultiselect=function(){this.acroField.setFlagTo(Nt.MultiSelect,!0)},t.prototype.disableMultiselect=function(){this.acroField.setFlagTo(Nt.MultiSelect,!1)},t.prototype.isSpellChecked=function(){return!this.acroField.hasFlag(Nt.DoNotSpellCheck)},t.prototype.enableSpellChecking=function(){this.acroField.setFlagTo(Nt.DoNotSpellCheck,!1)},t.prototype.disableSpellChecking=function(){this.acroField.setFlagTo(Nt.DoNotSpellCheck,!0)},t.prototype.isSelectOnClick=function(){return this.acroField.hasFlag(Nt.CommitOnSelChange)},t.prototype.enableSelectOnClick=function(){this.acroField.setFlagTo(Nt.CommitOnSelChange,!0)},t.prototype.disableSelectOnClick=function(){this.acroField.setFlagTo(Nt.CommitOnSelChange,!1)},t.prototype.addToPage=function(n,i){var r,o,s,a,l,c,u;L(n,"page",[[Si,"PDFPage"]]),Hs(i),i||(i={}),"textColor"in i||(i.textColor=yt(0,0,0)),"backgroundColor"in i||(i.backgroundColor=yt(1,1,1)),"borderColor"in i||(i.borderColor=yt(0,0,0)),"borderWidth"in i||(i.borderWidth=1);var d=this.createWidget({x:(r=i.x)!==null&&r!==void 0?r:0,y:(o=i.y)!==null&&o!==void 0?o:0,width:(s=i.width)!==null&&s!==void 0?s:200,height:(a=i.height)!==null&&a!==void 0?a:50,textColor:i.textColor,backgroundColor:i.backgroundColor,borderColor:i.borderColor,borderWidth:(l=i.borderWidth)!==null&&l!==void 0?l:0,rotate:(c=i.rotate)!==null&&c!==void 0?c:Pe(0),hidden:i.hidden,page:n.ref}),h=this.doc.context.register(d.dict);this.acroField.addWidget(h);var p=(u=i.font)!==null&&u!==void 0?u:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(d,p),n.node.addAnnot(h)},t.prototype.needsAppearancesUpdate=function(){var n;if(this.isDirty())return!0;for(var i=this.acroField.getWidgets(),r=0,o=i.length;r<o;r++){var s=i[r],a=((n=s.getAppearances())===null||n===void 0?void 0:n.normal)instanceof Tn;if(!a)return!0}return!1},t.prototype.defaultUpdateAppearances=function(n){L(n,"font",[[ci,"PDFFont"]]),this.updateAppearances(n)},t.prototype.updateAppearances=function(n,i){L(n,"font",[[ci,"PDFFont"]]),ie(i,"provider",[Function]);for(var r=this.acroField.getWidgets(),o=0,s=r.length;o<s;o++){var a=r[o];this.updateWidgetAppearance(a,n,i)}this.markAsClean()},t.prototype.updateWidgetAppearance=function(n,i,r){var o=r??nJ,s=Gs(o(this,n,i));this.updateWidgetAppearanceWithFont(n,i,s)},t.of=function(n,i,r){return new t(n,i,r)},t}(io),qm=w2e;var b2e=function(e){W(t,e);function t(n,i,r){var o=e.call(this,n,i,r)||this;return L(n,"acroListBox",[[ud,"PDFAcroListBox"]]),o.acroField=n,o}return t.prototype.getOptions=function(){for(var n=this.acroField.getOptions(),i=new Array(n.length),r=0,o=i.length;r<o;r++){var s=n[r],a=s.display,l=s.value;i[r]=(a??l).decodeText()}return i},t.prototype.getSelected=function(){for(var n=this.acroField.getValues(),i=new Array(n.length),r=0,o=n.length;r<o;r++)i[r]=n[r].decodeText();return i},t.prototype.setOptions=function(n){L(n,"options",[Array]),this.markAsDirty();for(var i=new Array(n.length),r=0,o=n.length;r<o;r++)i[r]={value:_e.fromText(n[r])};this.acroField.setOptions(i)},t.prototype.addOptions=function(n){L(n,"options",["string",Array]),this.markAsDirty();for(var i=Array.isArray(n)?n:[n],r=this.acroField.getOptions(),o=new Array(i.length),s=0,a=i.length;s<a;s++)o[s]={value:_e.fromText(i[s])};this.acroField.setOptions(r.concat(o))},t.prototype.select=function(n,i){i===void 0&&(i=!1),L(n,"options",["string",Array]),L(i,"merge",["boolean"]);var r=Array.isArray(n)?n:[n],o=this.getOptions();x$(r,"option",o),this.markAsDirty(),(r.length>1||r.length===1&&i)&&this.enableMultiselect();for(var s=new Array(r.length),a=0,l=r.length;a<l;a++)s[a]=_e.fromText(r[a]);if(i){var c=this.acroField.getValues();this.acroField.setValues(c.concat(s))}else this.acroField.setValues(s)},t.prototype.clear=function(){this.markAsDirty(),this.acroField.setValues([])},t.prototype.setFontSize=function(n){nd(n,"fontSize"),this.acroField.setFontSize(n),this.markAsDirty()},t.prototype.isSorted=function(){return this.acroField.hasFlag(Nt.Sort)},t.prototype.enableSorting=function(){this.acroField.setFlagTo(Nt.Sort,!0)},t.prototype.disableSorting=function(){this.acroField.setFlagTo(Nt.Sort,!1)},t.prototype.isMultiselect=function(){return this.acroField.hasFlag(Nt.MultiSelect)},t.prototype.enableMultiselect=function(){this.acroField.setFlagTo(Nt.MultiSelect,!0)},t.prototype.disableMultiselect=function(){this.acroField.setFlagTo(Nt.MultiSelect,!1)},t.prototype.isSelectOnClick=function(){return this.acroField.hasFlag(Nt.CommitOnSelChange)},t.prototype.enableSelectOnClick=function(){this.acroField.setFlagTo(Nt.CommitOnSelChange,!0)},t.prototype.disableSelectOnClick=function(){this.acroField.setFlagTo(Nt.CommitOnSelChange,!1)},t.prototype.addToPage=function(n,i){var r,o,s,a,l,c,u;L(n,"page",[[Si,"PDFPage"]]),Hs(i),i||(i={}),"textColor"in i||(i.textColor=yt(0,0,0)),"backgroundColor"in i||(i.backgroundColor=yt(1,1,1)),"borderColor"in i||(i.borderColor=yt(0,0,0)),"borderWidth"in i||(i.borderWidth=1);var d=this.createWidget({x:(r=i.x)!==null&&r!==void 0?r:0,y:(o=i.y)!==null&&o!==void 0?o:0,width:(s=i.width)!==null&&s!==void 0?s:200,height:(a=i.height)!==null&&a!==void 0?a:100,textColor:i.textColor,backgroundColor:i.backgroundColor,borderColor:i.borderColor,borderWidth:(l=i.borderWidth)!==null&&l!==void 0?l:0,rotate:(c=i.rotate)!==null&&c!==void 0?c:Pe(0),hidden:i.hidden,page:n.ref}),h=this.doc.context.register(d.dict);this.acroField.addWidget(h);var p=(u=i.font)!==null&&u!==void 0?u:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(d,p),n.node.addAnnot(h)},t.prototype.needsAppearancesUpdate=function(){var n;if(this.isDirty())return!0;for(var i=this.acroField.getWidgets(),r=0,o=i.length;r<o;r++){var s=i[r],a=((n=s.getAppearances())===null||n===void 0?void 0:n.normal)instanceof Tn;if(!a)return!0}return!1},t.prototype.defaultUpdateAppearances=function(n){L(n,"font",[[ci,"PDFFont"]]),this.updateAppearances(n)},t.prototype.updateAppearances=function(n,i){L(n,"font",[[ci,"PDFFont"]]),ie(i,"provider",[Function]);for(var r=this.acroField.getWidgets(),o=0,s=r.length;o<s;o++){var a=r[o];this.updateWidgetAppearance(a,n,i)}this.markAsClean()},t.prototype.updateWidgetAppearance=function(n,i,r){var o=r??iJ,s=Gs(o(this,n,i));this.updateWidgetAppearanceWithFont(n,i,s)},t.of=function(n,i,r){return new t(n,i,r)},t}(io),Km=b2e;var S2e=function(e){W(t,e);function t(n,i,r){var o=e.call(this,n,i,r)||this;return L(n,"acroRadioButton",[[cd,"PDFAcroRadioButton"]]),o.acroField=n,o}return t.prototype.getOptions=function(){var n=this.acroField.getExportValues();if(n){for(var i=new Array(n.length),r=0,o=n.length;r<o;r++)i[r]=n[r].decodeText();return i}for(var s=this.acroField.getOnValues(),a=new Array(s.length),r=0,o=a.length;r<o;r++)a[r]=s[r].decodeText();return a},t.prototype.getSelected=function(){var n=this.acroField.getValue();if(n!==T.of("Off")){var i=this.acroField.getExportValues();if(i){for(var r=this.acroField.getOnValues(),o=0,s=r.length;o<s;o++)if(r[o]===n)return i[o].decodeText()}return n.decodeText()}},t.prototype.select=function(n){L(n,"option",["string"]);var i=this.getOptions();_a(n,"option",i),this.markAsDirty();var r=this.acroField.getOnValues(),o=this.acroField.getExportValues();if(o)for(var s=0,a=o.length;s<a;s++)o[s].decodeText()===n&&this.acroField.setValue(r[s]);else for(var s=0,a=r.length;s<a;s++){var l=r[s];l.decodeText()===n&&this.acroField.setValue(l)}},t.prototype.clear=function(){this.markAsDirty(),this.acroField.setValue(T.of("Off"))},t.prototype.isOffToggleable=function(){return!this.acroField.hasFlag(eo.NoToggleToOff)},t.prototype.enableOffToggling=function(){this.acroField.setFlagTo(eo.NoToggleToOff,!1)},t.prototype.disableOffToggling=function(){this.acroField.setFlagTo(eo.NoToggleToOff,!0)},t.prototype.isMutuallyExclusive=function(){return!this.acroField.hasFlag(eo.RadiosInUnison)},t.prototype.enableMutualExclusion=function(){this.acroField.setFlagTo(eo.RadiosInUnison,!1)},t.prototype.disableMutualExclusion=function(){this.acroField.setFlagTo(eo.RadiosInUnison,!0)},t.prototype.addOptionToPage=function(n,i,r){var o,s,a,l,c,u,d,h,p;L(n,"option",["string"]),L(i,"page",[[Si,"PDFPage"]]),Hs(r);var g=this.createWidget({x:(o=r?.x)!==null&&o!==void 0?o:0,y:(s=r?.y)!==null&&s!==void 0?s:0,width:(a=r?.width)!==null&&a!==void 0?a:50,height:(l=r?.height)!==null&&l!==void 0?l:50,textColor:(c=r?.textColor)!==null&&c!==void 0?c:yt(0,0,0),backgroundColor:(u=r?.backgroundColor)!==null&&u!==void 0?u:yt(1,1,1),borderColor:(d=r?.borderColor)!==null&&d!==void 0?d:yt(0,0,0),borderWidth:(h=r?.borderWidth)!==null&&h!==void 0?h:1,rotate:(p=r?.rotate)!==null&&p!==void 0?p:Pe(0),hidden:r?.hidden,page:i.ref}),m=this.doc.context.register(g.dict),v=this.acroField.addWidgetWithOpt(m,_e.fromText(n),!this.isMutuallyExclusive());g.setAppearanceState(T.of("Off")),this.updateWidgetAppearance(g,v),i.node.addAnnot(m)},t.prototype.needsAppearancesUpdate=function(){for(var n,i=this.acroField.getWidgets(),r=0,o=i.length;r<o;r++){var s=i[r],a=s.getAppearanceState(),l=(n=s.getAppearances())===null||n===void 0?void 0:n.normal;if(!(l instanceof Te)||a&&!l.has(a))return!0}return!1},t.prototype.defaultUpdateAppearances=function(){this.updateAppearances()},t.prototype.updateAppearances=function(n){ie(n,"provider",[Function]);for(var i=this.acroField.getWidgets(),r=0,o=i.length;r<o;r++){var s=i[r],a=s.getOnValue();a&&this.updateWidgetAppearance(s,a,n)}},t.prototype.updateWidgetAppearance=function(n,i,r){var o=r??JZ,s=Gs(o(this,n));this.updateOnOffWidgetAppearance(n,i,s)},t.of=function(n,i,r){return new t(n,i,r)},t}(io),kf=S2e;var _2e=function(e){W(t,e);function t(n,i,r){var o=e.call(this,n,i,r)||this;return L(n,"acroSignature",[[Tf,"PDFAcroSignature"]]),o.acroField=n,o}return t.prototype.needsAppearancesUpdate=function(){return!1},t.of=function(n,i,r){return new t(n,i,r)},t}(io),Ow=_2e;var E2e=function(e){W(t,e);function t(n,i,r){var o=e.call(this,n,i,r)||this;return L(n,"acroText",[[ad,"PDFAcroText"]]),o.acroField=n,o}return t.prototype.getText=function(){var n=this.acroField.getValue();if(!n&&this.isRichFormatted())throw new jZ(this.getName());return n?.decodeText()},t.prototype.setText=function(n){ie(n,"text",["string"]);var i=this.getMaxLength();if(i!==void 0&&n&&n.length>i)throw new qZ(n.length,i,this.getName());this.markAsDirty(),this.disableRichFormatting(),n?this.acroField.setValue(_e.fromText(n)):this.acroField.removeValue()},t.prototype.getAlignment=function(){var n=this.acroField.getQuadding();return n===0?li.Left:n===1?li.Center:n===2?li.Right:li.Left},t.prototype.setAlignment=function(n){_a(n,"alignment",li),this.markAsDirty(),this.acroField.setQuadding(n)},t.prototype.getMaxLength=function(){return this.acroField.getMaxLength()},t.prototype.setMaxLength=function(n){if(rs(n,"maxLength",0,Number.MAX_SAFE_INTEGER),this.markAsDirty(),n===void 0)this.acroField.removeMaxLength();else{var i=this.getText();if(i&&i.length>n)throw new KZ(i.length,n,this.getName());this.acroField.setMaxLength(n)}},t.prototype.removeMaxLength=function(){this.markAsDirty(),this.acroField.removeMaxLength()},t.prototype.setImage=function(n){for(var i=this.getAlignment(),r=i===li.Center?xl.Center:i===li.Right?xl.Right:xl.Left,o=this.acroField.getWidgets(),s=0,a=o.length;s<a;s++){var l=o[s],c=this.createImageAppearanceStream(l,n,r);this.updateWidgetAppearances(l,{normal:c})}this.markAsClean()},t.prototype.setFontSize=function(n){nd(n,"fontSize"),this.acroField.setFontSize(n),this.markAsDirty()},t.prototype.isMultiline=function(){return this.acroField.hasFlag(Gn.Multiline)},t.prototype.enableMultiline=function(){this.markAsDirty(),this.acroField.setFlagTo(Gn.Multiline,!0)},t.prototype.disableMultiline=function(){this.markAsDirty(),this.acroField.setFlagTo(Gn.Multiline,!1)},t.prototype.isPassword=function(){return this.acroField.hasFlag(Gn.Password)},t.prototype.enablePassword=function(){this.acroField.setFlagTo(Gn.Password,!0)},t.prototype.disablePassword=function(){this.acroField.setFlagTo(Gn.Password,!1)},t.prototype.isFileSelector=function(){return this.acroField.hasFlag(Gn.FileSelect)},t.prototype.enableFileSelection=function(){this.acroField.setFlagTo(Gn.FileSelect,!0)},t.prototype.disableFileSelection=function(){this.acroField.setFlagTo(Gn.FileSelect,!1)},t.prototype.isSpellChecked=function(){return!this.acroField.hasFlag(Gn.DoNotSpellCheck)},t.prototype.enableSpellChecking=function(){this.acroField.setFlagTo(Gn.DoNotSpellCheck,!1)},t.prototype.disableSpellChecking=function(){this.acroField.setFlagTo(Gn.DoNotSpellCheck,!0)},t.prototype.isScrollable=function(){return!this.acroField.hasFlag(Gn.DoNotScroll)},t.prototype.enableScrolling=function(){this.acroField.setFlagTo(Gn.DoNotScroll,!1)},t.prototype.disableScrolling=function(){this.acroField.setFlagTo(Gn.DoNotScroll,!0)},t.prototype.isCombed=function(){return this.acroField.hasFlag(Gn.Comb)&&!this.isMultiline()&&!this.isPassword()&&!this.isFileSelector()&&this.getMaxLength()!==void 0},t.prototype.enableCombing=function(){if(this.getMaxLength()===void 0){var n="PDFTextFields must have a max length in order to be combed";console.warn(n)}this.markAsDirty(),this.disableMultiline(),this.disablePassword(),this.disableFileSelection(),this.acroField.setFlagTo(Gn.Comb,!0)},t.prototype.disableCombing=function(){this.markAsDirty(),this.acroField.setFlagTo(Gn.Comb,!1)},t.prototype.isRichFormatted=function(){return this.acroField.hasFlag(Gn.RichText)},t.prototype.enableRichFormatting=function(){this.acroField.setFlagTo(Gn.RichText,!0)},t.prototype.disableRichFormatting=function(){this.acroField.setFlagTo(Gn.RichText,!1)},t.prototype.addToPage=function(n,i){var r,o,s,a,l,c,u;L(n,"page",[[Si,"PDFPage"]]),Hs(i),i||(i={}),"textColor"in i||(i.textColor=yt(0,0,0)),"backgroundColor"in i||(i.backgroundColor=yt(1,1,1)),"borderColor"in i||(i.borderColor=yt(0,0,0)),"borderWidth"in i||(i.borderWidth=1);var d=this.createWidget({x:(r=i.x)!==null&&r!==void 0?r:0,y:(o=i.y)!==null&&o!==void 0?o:0,width:(s=i.width)!==null&&s!==void 0?s:200,height:(a=i.height)!==null&&a!==void 0?a:50,textColor:i.textColor,backgroundColor:i.backgroundColor,borderColor:i.borderColor,borderWidth:(l=i.borderWidth)!==null&&l!==void 0?l:0,rotate:(c=i.rotate)!==null&&c!==void 0?c:Pe(0),hidden:i.hidden,page:n.ref}),h=this.doc.context.register(d.dict);this.acroField.addWidget(h);var p=(u=i.font)!==null&&u!==void 0?u:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(d,p),n.node.addAnnot(h)},t.prototype.needsAppearancesUpdate=function(){var n;if(this.isDirty())return!0;for(var i=this.acroField.getWidgets(),r=0,o=i.length;r<o;r++){var s=i[r],a=((n=s.getAppearances())===null||n===void 0?void 0:n.normal)instanceof Tn;if(!a)return!0}return!1},t.prototype.defaultUpdateAppearances=function(n){L(n,"font",[[ci,"PDFFont"]]),this.updateAppearances(n)},t.prototype.updateAppearances=function(n,i){L(n,"font",[[ci,"PDFFont"]]),ie(i,"provider",[Function]);for(var r=this.acroField.getWidgets(),o=0,s=r.length;o<s;o++){var a=r[o];this.updateWidgetAppearance(a,n,i)}this.markAsClean()},t.prototype.updateWidgetAppearance=function(n,i,r){var o=r??tJ,s=Gs(o(this,n,i));this.updateWidgetAppearanceWithFont(n,i,s)},t.of=function(n,i,r){return new t(n,i,r)},t}(io),gd=E2e;var Nw=function(e){return e.Courier="Courier",e.CourierBold="Courier-Bold",e.CourierOblique="Courier-Oblique",e.CourierBoldOblique="Courier-BoldOblique",e.Helvetica="Helvetica",e.HelveticaBold="Helvetica-Bold",e.HelveticaOblique="Helvetica-Oblique",e.HelveticaBoldOblique="Helvetica-BoldOblique",e.TimesRoman="Times-Roman",e.TimesRomanBold="Times-Bold",e.TimesRomanItalic="Times-Italic",e.TimesRomanBoldItalic="Times-BoldItalic",e.Symbol="Symbol",e.ZapfDingbats="ZapfDingbats",e}(Nw||{});var x2e=function(){function e(t,n){var i=this;this.embedDefaultFont=function(){return i.doc.embedStandardFont(Nw.Helvetica)},L(t,"acroForm",[[Rf,"PDFAcroForm"]]),L(n,"doc",[[xr,"PDFDocument"]]),this.acroForm=t,this.doc=n,this.dirtyFields=new Set,this.defaultFontCache=_r.populatedBy(this.embedDefaultFont)}return e.prototype.hasXFA=function(){return this.acroForm.dict.has(T.of("XFA"))},e.prototype.deleteXFA=function(){this.acroForm.dict.delete(T.of("XFA"))},e.prototype.getFields=function(){for(var t=this.acroForm.getAllFields(),n=[],i=0,r=t.length;i<r;i++){var o=t[i],s=o[0],a=o[1],l=D2e(s,a,this.doc);l&&n.push(l)}return n},e.prototype.getFieldMaybe=function(t){L(t,"name",["string"]);for(var n=this.getFields(),i=0,r=n.length;i<r;i++){var o=n[i];if(o.getName()===t)return o}},e.prototype.getField=function(t){L(t,"name",["string"]);var n=this.getFieldMaybe(t);if(n)return n;throw new zZ(t)},e.prototype.getButton=function(t){L(t,"name",["string"]);var n=this.getField(t);if(n instanceof Xm)return n;throw new fd(t,Xm,n)},e.prototype.getCheckBox=function(t){L(t,"name",["string"]);var n=this.getField(t);if(n instanceof Pf)return n;throw new fd(t,Pf,n)},e.prototype.getDropdown=function(t){L(t,"name",["string"]);var n=this.getField(t);if(n instanceof qm)return n;throw new fd(t,qm,n)},e.prototype.getOptionList=function(t){L(t,"name",["string"]);var n=this.getField(t);if(n instanceof Km)return n;throw new fd(t,Km,n)},e.prototype.getRadioGroup=function(t){L(t,"name",["string"]);var n=this.getField(t);if(n instanceof kf)return n;throw new fd(t,kf,n)},e.prototype.getSignature=function(t){L(t,"name",["string"]);var n=this.getField(t);if(n instanceof Ow)return n;throw new fd(t,Ow,n)},e.prototype.getTextField=function(t){L(t,"name",["string"]);var n=this.getField(t);if(n instanceof gd)return n;throw new fd(t,gd,n)},e.prototype.createButton=function(t){L(t,"name",["string"]);var n=Ym(t),i=this.findOrCreateNonTerminals(n.nonTerminal),r=ld.create(this.doc.context);return r.setPartialName(n.terminal),Qm(i,[r,r.ref],n.terminal),Xm.of(r,r.ref,this.doc)},e.prototype.createCheckBox=function(t){L(t,"name",["string"]);var n=Ym(t),i=this.findOrCreateNonTerminals(n.nonTerminal),r=rd.create(this.doc.context);return r.setPartialName(n.terminal),Qm(i,[r,r.ref],n.terminal),Pf.of(r,r.ref,this.doc)},e.prototype.createDropdown=function(t){L(t,"name",["string"]);var n=Ym(t),i=this.findOrCreateNonTerminals(n.nonTerminal),r=od.create(this.doc.context);return r.setPartialName(n.terminal),Qm(i,[r,r.ref],n.terminal),qm.of(r,r.ref,this.doc)},e.prototype.createOptionList=function(t){L(t,"name",["string"]);var n=Ym(t),i=this.findOrCreateNonTerminals(n.nonTerminal),r=ud.create(this.doc.context);return r.setPartialName(n.terminal),Qm(i,[r,r.ref],n.terminal),Km.of(r,r.ref,this.doc)},e.prototype.createRadioGroup=function(t){L(t,"name",["string"]);var n=Ym(t),i=this.findOrCreateNonTerminals(n.nonTerminal),r=cd.create(this.doc.context);return r.setPartialName(n.terminal),Qm(i,[r,r.ref],n.terminal),kf.of(r,r.ref,this.doc)},e.prototype.createTextField=function(t){L(t,"name",["string"]);var n=Ym(t),i=this.findOrCreateNonTerminals(n.nonTerminal),r=ad.create(this.doc.context);return r.setPartialName(n.terminal),Qm(i,[r,r.ref],n.terminal),gd.of(r,r.ref,this.doc)},e.prototype.flatten=function(t){t===void 0&&(t={updateFieldAppearances:!0}),t.updateFieldAppearances&&this.updateFieldAppearances();for(var n=this.getFields(),i=0,r=n.length;i<r;i++){for(var o=n[i],s=o.acroField.getWidgets(),a=0,l=s.length;a<l;a++){var c=s[a],u=this.findWidgetPage(c),d=this.findWidgetAppearanceRef(o,c),h=u.node.newXObject("FlatWidget",d),p=c.getRectangle(),g=ut([Qn(),to(p.x,p.y)],Da(Xe(Xe({},p),{rotation:0})),[Rw(h),Xn()]).filter(Boolean);u.pushOperators.apply(u,g)}this.removeField(o)}},e.prototype.removeField=function(t){for(var n=t.acroField.getWidgets(),i=new Set,r=0,o=n.length;r<o;r++){var s=n[r],a=this.findWidgetAppearanceRef(t,s),l=this.findWidgetPage(s);i.add(l),l.node.removeAnnot(a)}i.forEach(function(p){return p.node.removeAnnot(t.ref)}),this.acroForm.removeField(t.acroField);for(var c=t.acroField.normalizedEntries().Kids,u=c.size(),d=0;d<u;d++){var h=c.get(d);h instanceof $e&&this.doc.context.delete(h)}this.doc.context.delete(t.ref)},e.prototype.updateFieldAppearances=function(t){ie(t,"font",[[ci,"PDFFont"]]),t=t??this.getDefaultFont();for(var n=this.getFields(),i=0,r=n.length;i<r;i++){var o=n[i];o.needsAppearancesUpdate()&&o.defaultUpdateAppearances(t)}},e.prototype.markFieldAsDirty=function(t){ie(t,"fieldRef",[[$e,"PDFRef"]]),this.dirtyFields.add(t)},e.prototype.markFieldAsClean=function(t){ie(t,"fieldRef",[[$e,"PDFRef"]]),this.dirtyFields.delete(t)},e.prototype.fieldIsDirty=function(t){return ie(t,"fieldRef",[[$e,"PDFRef"]]),this.dirtyFields.has(t)},e.prototype.getDefaultFont=function(){return this.defaultFontCache.access()},e.prototype.findWidgetPage=function(t){var n=t.P(),i=this.doc.getPages().find(function(o){return o.ref===n});if(i===void 0){var r=this.doc.context.getObjectRef(t.dict);if(r===void 0)throw new Error("Could not find PDFRef for PDFObject");if(i=this.doc.findPageForAnnotationRef(r),i===void 0)throw new Error("Could not find page for PDFRef "+r)}return i},e.prototype.findWidgetAppearanceRef=function(t,n){var i,r=n.getNormalAppearance();if(r instanceof Te&&(t instanceof Pf||t instanceof kf)){var o=t.acroField.getValue(),s=(i=r.get(o))!==null&&i!==void 0?i:r.get(T.of("Off"));s instanceof $e&&(r=s)}if(!(r instanceof $e)){var a=t.getName();throw new Error("Failed to extract appearance ref for: "+a)}return r},e.prototype.findOrCreateNonTerminals=function(t){for(var n=[this.acroForm],i=0,r=t.length;i<r;i++){var o=t[i];if(!o)throw new UZ(o);var s=n[0],a=n[1],l=this.findNonTerminal(o,s);if(l)n=l;else{var c=sd.create(this.doc.context);c.setPartialName(o),c.setParent(a);var u=this.doc.context.register(c.dict);s.addField(u),n=[c,u]}}return n},e.prototype.findNonTerminal=function(t,n){for(var i=n instanceof Rf?this.acroForm.getFields():fw(n.Kids()),r=0,o=i.length;r<o;r++){var s=i[r],a=s[0],l=s[1];if(a.getPartialName()===t){if(a instanceof sd)return[a,l];throw new KL(t)}}},e.of=function(t,n){return new e(t,n)},e}(),QL=x2e,D2e=function(e,t,n){if(e instanceof ld)return Xm.of(e,t,n);if(e instanceof rd)return Pf.of(e,t,n);if(e instanceof od)return qm.of(e,t,n);if(e instanceof ud)return Km.of(e,t,n);if(e instanceof ad)return gd.of(e,t,n);if(e instanceof cd)return kf.of(e,t,n);if(e instanceof Tf)return Ow.of(e,t,n)},Ym=function(e){if(e.length===0)throw new Error("PDF field names must not be empty strings");for(var t=e.split("."),n=0,i=t.length;n<i;n++)if(t[n]==="")throw new Error('Periods in PDF field names must be separated by at least one character: "'+e+'"');return t.length===1?{nonTerminal:[],terminal:t[0]}:{nonTerminal:t.slice(0,t.length-1),terminal:t[t.length-1]}},Qm=function(e,t,n){for(var i=e[0],r=e[1],o=t[0],s=t[1],a=i.normalizedEntries(),l=fw("Kids"in a?a.Kids:a.Fields),c=0,u=l.length;c<u;c++)if(l[c][0].getPartialName()===n)throw new KL(n);i.addField(s),o.setParent(r)};var rJ={"4A0":[4767.87,6740.79],"2A0":[3370.39,4767.87],A0:[2383.94,3370.39],A1:[1683.78,2383.94],A2:[1190.55,1683.78],A3:[841.89,1190.55],A4:[595.28,841.89],A5:[419.53,595.28],A6:[297.64,419.53],A7:[209.76,297.64],A8:[147.4,209.76],A9:[104.88,147.4],A10:[73.7,104.88],B0:[2834.65,4008.19],B1:[2004.09,2834.65],B2:[1417.32,2004.09],B3:[1000.63,1417.32],B4:[708.66,1000.63],B5:[498.9,708.66],B6:[354.33,498.9],B7:[249.45,354.33],B8:[175.75,249.45],B9:[124.72,175.75],B10:[87.87,124.72],C0:[2599.37,3676.54],C1:[1836.85,2599.37],C2:[1298.27,1836.85],C3:[918.43,1298.27],C4:[649.13,918.43],C5:[459.21,649.13],C6:[323.15,459.21],C7:[229.61,323.15],C8:[161.57,229.61],C9:[113.39,161.57],C10:[79.37,113.39],RA0:[2437.8,3458.27],RA1:[1729.13,2437.8],RA2:[1218.9,1729.13],RA3:[864.57,1218.9],RA4:[609.45,864.57],SRA0:[2551.18,3628.35],SRA1:[1814.17,2551.18],SRA2:[1275.59,1814.17],SRA3:[907.09,1275.59],SRA4:[637.8,907.09],Executive:[521.86,756],Folio:[612,936],Legal:[612,1008],Letter:[612,792],Tabloid:[792,1224]};var XL=function(e){return e[e.Fastest=1/0]="Fastest",e[e.Fast=1500]="Fast",e[e.Medium=500]="Medium",e[e.Slow=100]="Slow",e}(XL||{});var T2e=function(){function e(t,n,i){this.alreadyEmbedded=!1,this.ref=t,this.doc=n,this.embedder=i}return e.prototype.embed=function(){return Ae(this,void 0,void 0,function(){var t,n,i,r,o;return Me(this,function(s){switch(s.label){case 0:return this.alreadyEmbedded?[3,2]:[4,this.embedder.embedIntoContext(this.doc.context,this.ref)];case 1:t=s.sent(),this.doc.catalog.has(T.of("Names"))||this.doc.catalog.set(T.of("Names"),this.doc.context.obj({})),n=this.doc.catalog.lookup(T.of("Names"),Te),n.has(T.of("EmbeddedFiles"))||n.set(T.of("EmbeddedFiles"),this.doc.context.obj({})),i=n.lookup(T.of("EmbeddedFiles"),Te),i.has(T.of("Names"))||i.set(T.of("Names"),this.doc.context.obj([])),r=i.lookup(T.of("Names"),Ye),r.push(_e.fromText(this.embedder.fileName)),r.push(t),this.doc.catalog.has(T.of("AF"))||this.doc.catalog.set(T.of("AF"),this.doc.context.obj([])),o=this.doc.catalog.lookup(T.of("AF"),Ye),o.push(t),this.alreadyEmbedded=!0,s.label=2;case 2:return[2]}})})},e.of=function(t,n,i){return new e(t,n,i)},e}(),oJ=T2e;var R2e=function(){function e(t,n,i){this.alreadyEmbedded=!1,this.ref=t,this.doc=n,this.embedder=i}return e.prototype.embed=function(){return Ae(this,void 0,void 0,function(){var t,n,i,r,o,s,a;return Me(this,function(l){switch(l.label){case 0:return this.alreadyEmbedded?[3,2]:(t=this.doc,n=t.catalog,i=t.context,[4,this.embedder.embedIntoContext(this.doc.context,this.ref)]);case 1:r=l.sent(),n.has(T.of("Names"))||n.set(T.of("Names"),i.obj({})),o=n.lookup(T.of("Names"),Te),o.has(T.of("JavaScript"))||o.set(T.of("JavaScript"),i.obj({})),s=o.lookup(T.of("JavaScript"),Te),s.has(T.of("Names"))||s.set(T.of("Names"),i.obj([])),a=s.lookup(T.of("Names"),Ye),a.push(_e.fromText(this.embedder.scriptName)),a.push(r),this.alreadyEmbedded=!0,l.label=2;case 2:return[2]}})})},e.of=function(t,n,i){return new e(t,n,i)},e}(),$L=R2e;var I2e=function(){function e(t,n){this.script=t,this.scriptName=n}return e.for=function(t,n){return new e(t,n)},e.prototype.embedIntoContext=function(t,n){return Ae(this,void 0,void 0,function(){var i;return Me(this,function(r){return i=t.obj({Type:"Action",S:"JavaScript",JS:_e.fromText(this.script)}),n?(t.assign(n,i),[2,n]):[2,t.register(i)]})})},e}(),sJ=I2e;var F2e=function(){function e(t,n,i){var r=this;if(this.defaultWordBreaks=[" "],this.computePages=function(){var o=[];return r.catalog.Pages().traverse(function(s,a){if(s instanceof Jr){var l=r.pageMap.get(s);l||(l=Si.of(s,a,r),r.pageMap.set(s,l)),o.push(l)}}),o},this.getOrCreateForm=function(){var o=r.catalog.getOrCreateAcroForm();return QL.of(o,r)},L(t,"context",[[Lm,"PDFContext"]]),L(n,"ignoreEncryption",["boolean"]),this.context=t,this.catalog=t.lookup(t.trailerInfo.Root),this.isEncrypted=!!t.lookup(t.trailerInfo.Encrypt),this.pageCache=_r.populatedBy(this.computePages),this.pageMap=new Map,this.formCache=_r.populatedBy(this.getOrCreateForm),this.fonts=[],this.images=[],this.embeddedPages=[],this.embeddedFiles=[],this.javaScripts=[],!n&&this.isEncrypted)throw new VZ;i&&this.updateInfoDict()}return e.load=function(t,n){return n===void 0&&(n={}),Ae(this,void 0,void 0,function(){var i,r,o,s,a,l,c,u,d,h,p,g;return Me(this,function(m){switch(m.label){case 0:return i=n.ignoreEncryption,r=i===void 0?!1:i,o=n.parseSpeed,s=o===void 0?XL.Slow:o,a=n.throwOnInvalidObject,l=a===void 0?!1:a,c=n.updateMetadata,u=c===void 0?!0:c,d=n.capNumbers,h=d===void 0?!1:d,L(t,"pdf",["string",Uint8Array,ArrayBuffer]),L(r,"ignoreEncryption",["boolean"]),L(s,"parseSpeed",["number"]),L(l,"throwOnInvalidObject",["boolean"]),p=wm(t),[4,RL.forBytesWithOptions(p,s,l,h).parseDocument()];case 1:return g=m.sent(),[2,new e(g,r,u)]}})})},e.create=function(t){return t===void 0&&(t={}),Ae(this,void 0,void 0,function(){var n,i,r,o,s,a;return Me(this,function(l){return n=t.updateMetadata,i=n===void 0?!0:n,r=Lm.create(),o=gw.withContext(r),s=r.register(o),a=pw.withContextAndPages(r,s),r.trailerInfo.Root=r.register(a),[2,new e(r,!1,i)]})})},e.prototype.registerFontkit=function(t){this.fontkit=t},e.prototype.getForm=function(){var t=this.formCache.access();return t.hasXFA()&&(console.warn("Removing XFA form data as pdf-lib does not support reading or writing XFA"),t.deleteXFA()),t},e.prototype.getTitle=function(){var t=this.getInfoDict().lookup(T.Title);if(t)return md(t),t.decodeText()},e.prototype.getAuthor=function(){var t=this.getInfoDict().lookup(T.Author);if(t)return md(t),t.decodeText()},e.prototype.getSubject=function(){var t=this.getInfoDict().lookup(T.Subject);if(t)return md(t),t.decodeText()},e.prototype.getKeywords=function(){var t=this.getInfoDict().lookup(T.Keywords);if(t)return md(t),t.decodeText()},e.prototype.getCreator=function(){var t=this.getInfoDict().lookup(T.Creator);if(t)return md(t),t.decodeText()},e.prototype.getProducer=function(){var t=this.getInfoDict().lookup(T.Producer);if(t)return md(t),t.decodeText()},e.prototype.getCreationDate=function(){var t=this.getInfoDict().lookup(T.CreationDate);if(t)return md(t),t.decodeDate()},e.prototype.getModificationDate=function(){var t=this.getInfoDict().lookup(T.ModDate);if(t)return md(t),t.decodeDate()},e.prototype.setTitle=function(t,n){L(t,"title",["string"]);var i=T.of("Title");if(this.getInfoDict().set(i,_e.fromText(t)),n?.showInWindowTitleBar){var r=this.catalog.getOrCreateViewerPreferences();r.setDisplayDocTitle(!0)}},e.prototype.setAuthor=function(t){L(t,"author",["string"]);var n=T.of("Author");this.getInfoDict().set(n,_e.fromText(t))},e.prototype.setSubject=function(t){L(t,"author",["string"]);var n=T.of("Subject");this.getInfoDict().set(n,_e.fromText(t))},e.prototype.setKeywords=function(t){L(t,"keywords",[Array]);var n=T.of("Keywords");this.getInfoDict().set(n,_e.fromText(t.join(" ")))},e.prototype.setCreator=function(t){L(t,"creator",["string"]);var n=T.of("Creator");this.getInfoDict().set(n,_e.fromText(t))},e.prototype.setProducer=function(t){L(t,"creator",["string"]);var n=T.of("Producer");this.getInfoDict().set(n,_e.fromText(t))},e.prototype.setLanguage=function(t){L(t,"language",["string"]);var n=T.of("Lang");this.catalog.set(n,dt.of(t))},e.prototype.setCreationDate=function(t){L(t,"creationDate",[[Date,"Date"]]);var n=T.of("CreationDate");this.getInfoDict().set(n,dt.fromDate(t))},e.prototype.setModificationDate=function(t){L(t,"modificationDate",[[Date,"Date"]]);var n=T.of("ModDate");this.getInfoDict().set(n,dt.fromDate(t))},e.prototype.getPageCount=function(){return this.pageCount===void 0&&(this.pageCount=this.getPages().length),this.pageCount},e.prototype.getPages=function(){return this.pageCache.access()},e.prototype.getPage=function(t){var n=this.getPages();return Sr(t,"index",0,n.length-1),n[t]},e.prototype.getPageIndices=function(){return aQ(0,this.getPageCount())},e.prototype.removePage=function(t){var n=this.getPageCount();if(this.pageCount===0)throw new HZ;Sr(t,"index",0,n-1),this.catalog.removeLeafNode(t),this.pageCount=n-1},e.prototype.addPage=function(t){return L(t,"page",["undefined",[Si,"PDFPage"],Array]),this.insertPage(this.getPageCount(),t)},e.prototype.insertPage=function(t,n){var i=this.getPageCount();if(Sr(t,"index",0,i),L(n,"page",["undefined",[Si,"PDFPage"],Array]),!n||Array.isArray(n)){var r=Array.isArray(n)?n:rJ.A4;n=Si.create(this),n.setSize.apply(n,r)}else if(n.doc!==this)throw new GZ;var o=this.catalog.insertLeafNode(n.ref,t);return n.node.setParent(o),this.pageMap.set(n.node,n),this.pageCache.invalidate(),this.pageCount=i+1,n},e.prototype.copyPages=function(t,n){return Ae(this,void 0,void 0,function(){var i,r,o,s,a,l,c,u;return Me(this,function(d){switch(d.label){case 0:return L(t,"srcDoc",[[e,"PDFDocument"]]),L(n,"indices",[Array]),[4,t.flush()];case 1:for(d.sent(),i=UD.for(t.context,this.context),r=t.getPages(),o=new Array(n.length),s=0,a=n.length;s<a;s++)l=r[n[s]],c=i.copy(l.node),u=this.context.register(c),o[s]=Si.of(c,u,this);return[2,o]}})})},e.prototype.copy=function(){return Ae(this,void 0,void 0,function(){var t,n,i,r;return Me(this,function(o){switch(o.label){case 0:return[4,e.create()];case 1:return t=o.sent(),[4,t.copyPages(this,this.getPageIndices())];case 2:for(n=o.sent(),i=0,r=n.length;i<r;i++)t.addPage(n[i]);return this.getAuthor()!==void 0&&t.setAuthor(this.getAuthor()),this.getCreationDate()!==void 0&&t.setCreationDate(this.getCreationDate()),this.getCreator()!==void 0&&t.setCreator(this.getCreator()),this.getModificationDate()!==void 0&&t.setModificationDate(this.getModificationDate()),this.getProducer()!==void 0&&t.setProducer(this.getProducer()),this.getSubject()!==void 0&&t.setSubject(this.getSubject()),this.getTitle()!==void 0&&t.setTitle(this.getTitle()),t.defaultWordBreaks=this.defaultWordBreaks,[2,t]}})})},e.prototype.addJavaScript=function(t,n){L(t,"name",["string"]),L(n,"script",["string"]);var i=sJ.for(n,t),r=this.context.nextRef(),o=$L.of(r,this,i);this.javaScripts.push(o)},e.prototype.attach=function(t,n,i){return i===void 0&&(i={}),Ae(this,void 0,void 0,function(){var r,o,s,a;return Me(this,function(l){return L(t,"attachment",["string",Uint8Array,ArrayBuffer]),L(n,"name",["string"]),ie(i.mimeType,"mimeType",["string"]),ie(i.description,"description",["string"]),ie(i.creationDate,"options.creationDate",[Date]),ie(i.modificationDate,"options.modificationDate",[Date]),To(i.afRelationship,"options.afRelationship",WD),r=wm(t),o=wL.for(r,n,i),s=this.context.nextRef(),a=oJ.of(s,this,o),this.embeddedFiles.push(a),[2]})})},e.prototype.embedFont=function(t,n){return n===void 0&&(n={}),Ae(this,void 0,void 0,function(){var i,r,o,s,a,l,c,u,d,h;return Me(this,function(p){switch(p.label){case 0:return i=n.subset,r=i===void 0?!1:i,o=n.customName,s=n.features,L(t,"font",["string",Uint8Array,ArrayBuffer]),L(r,"subset",["boolean"]),dL(t)?(a=Ef.for(t,o),[3,7]):[3,1];case 1:return cQ(t)?(l=wm(t),c=this.assertFontkit(),r?[4,CL.for(c,l,o,s)]:[3,3]):[3,6];case 2:return u=p.sent(),[3,5];case 3:return[4,xf.for(c,l,o,s)];case 4:u=p.sent(),p.label=5;case 5:return a=u,[3,7];case 6:throw new TypeError("`font` must be one of `StandardFonts | string | Uint8Array | ArrayBuffer`");case 7:return d=this.context.nextRef(),h=ci.of(d,this,a),this.fonts.push(h),[2,h]}})})},e.prototype.embedStandardFont=function(t,n){if(L(t,"font",["string"]),!dL(t))throw new TypeError("`font` must be one of type `StandardFonts`");var i=Ef.for(t,n),r=this.context.nextRef(),o=ci.of(r,this,i);return this.fonts.push(o),o},e.prototype.embedJpg=function(t){return Ae(this,void 0,void 0,function(){var n,i,r,o;return Me(this,function(s){switch(s.label){case 0:return L(t,"jpg",["string",Uint8Array,ArrayBuffer]),n=wm(t),[4,iw.for(n)];case 1:return i=s.sent(),r=this.context.nextRef(),o=Wm.of(r,this,i),this.images.push(o),[2,o]}})})},e.prototype.embedPng=function(t){return Ae(this,void 0,void 0,function(){var n,i,r,o;return Me(this,function(s){switch(s.label){case 0:return L(t,"png",["string",Uint8Array,ArrayBuffer]),n=wm(t),[4,rw.for(n)];case 1:return i=s.sent(),r=this.context.nextRef(),o=Wm.of(r,this,i),this.images.push(o),[2,o]}})})},e.prototype.embedPdf=function(t,n){return n===void 0&&(n=[0]),Ae(this,void 0,void 0,function(){var i,r,o;return Me(this,function(s){switch(s.label){case 0:return L(t,"pdf",["string",Uint8Array,ArrayBuffer,[e,"PDFDocument"]]),L(n,"indices",[Array]),t instanceof e?(r=t,[3,3]):[3,1];case 1:return[4,e.load(t)];case 2:r=s.sent(),s.label=3;case 3:return i=r,o=lQ(i.getPages(),n),[2,this.embedPages(o)]}})})},e.prototype.embedPage=function(t,n,i){return Ae(this,void 0,void 0,function(){var r;return Me(this,function(o){switch(o.label){case 0:return L(t,"page",[[Si,"PDFPage"]]),[4,this.embedPages([t],[n],[i])];case 1:return r=o.sent()[0],[2,r]}})})},e.prototype.embedPages=function(t,n,i){return n===void 0&&(n=[]),i===void 0&&(i=[]),Ae(this,void 0,void 0,function(){var c,u,r,o,s,a,l,c,u,d,h,p,g,m,v;return Me(this,function(C){switch(C.label){case 0:if(t.length===0)return[2,[]];for(c=0,u=t.length-1;c<u;c++)if(r=t[c],o=t[c+1],r.node.context!==o.node.context)throw new F$;s=t[0].node.context,a=s===this.context?function(S){return S}:UD.for(s,this.context).copy,l=new Array(t.length),c=0,u=t.length,C.label=1;case 1:return c<u?(d=a(t[c].node),h=n[c],p=i[c],[4,sw.for(d,h,p)]):[3,4];case 2:g=C.sent(),m=this.context.nextRef(),l[c]=kw.of(m,this,g),C.label=3;case 3:return c++,[3,1];case 4:return(v=this.embeddedPages).push.apply(v,l),[2,l]}})})},e.prototype.flush=function(){return Ae(this,void 0,void 0,function(){return Me(this,function(t){switch(t.label){case 0:return[4,this.embedAll(this.fonts)];case 1:return t.sent(),[4,this.embedAll(this.images)];case 2:return t.sent(),[4,this.embedAll(this.embeddedPages)];case 3:return t.sent(),[4,this.embedAll(this.embeddedFiles)];case 4:return t.sent(),[4,this.embedAll(this.javaScripts)];case 5:return t.sent(),[2]}})})},e.prototype.save=function(t){return t===void 0&&(t={}),Ae(this,void 0,void 0,function(){var n,i,r,o,s,a,l,c,u,d;return Me(this,function(h){switch(h.label){case 0:return n=t.useObjectStreams,i=n===void 0?!0:n,r=t.addDefaultPage,o=r===void 0?!0:r,s=t.objectsPerTick,a=s===void 0?50:s,l=t.updateFieldAppearances,c=l===void 0?!0:l,L(i,"useObjectStreams",["boolean"]),L(o,"addDefaultPage",["boolean"]),L(a,"objectsPerTick",["number"]),L(c,"updateFieldAppearances",["boolean"]),o&&this.getPageCount()===0&&this.addPage(),c&&(u=this.formCache.getValue(),u&&u.updateFieldAppearances()),[4,this.flush()];case 1:return h.sent(),d=i?yL:ew,[2,d.forContext(this.context,a).serializeToBuffer()]}})})},e.prototype.saveAsBase64=function(t){return t===void 0&&(t={}),Ae(this,void 0,void 0,function(){var n,i,r,o,s;return Me(this,function(a){switch(a.label){case 0:return n=t.dataUri,i=n===void 0?!1:n,r=KY(t,["dataUri"]),L(i,"dataUri",["boolean"]),[4,this.save(r)];case 1:return o=a.sent(),s=QY(o),[2,i?"data:application/pdf;base64,"+s:s]}})})},e.prototype.findPageForAnnotationRef=function(t){for(var n=this.getPages(),i=0,r=n.length;i<r;i++){var o=n[i],s=o.node.Annots();if(s?.indexOf(t)!==void 0)return o}},e.prototype.embedAll=function(t){return Ae(this,void 0,void 0,function(){var n,i;return Me(this,function(r){switch(r.label){case 0:n=0,i=t.length,r.label=1;case 1:return n<i?[4,t[n].embed()]:[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},e.prototype.updateInfoDict=function(){var t="pdf-lib (https://github.com/Hopding/pdf-lib)",n=new Date,i=this.getInfoDict();this.setProducer(t),this.setModificationDate(n),i.get(T.of("Creator"))||this.setCreator(t),i.get(T.of("CreationDate"))||this.setCreationDate(n)},e.prototype.getInfoDict=function(){var t=this.context.lookup(this.context.trailerInfo.Info);if(t instanceof Te)return t;var n=this.context.obj({});return this.context.trailerInfo.Info=this.context.register(n),n},e.prototype.assertFontkit=function(){if(!this.fontkit)throw new BZ;return this.fontkit},e}(),xr=F2e;function md(e){if(!(e instanceof _e)&&!(e instanceof dt))throw new wf([_e,dt],e)}var Rc=function(e){return e.Normal="Normal",e.Multiply="Multiply",e.Screen="Screen",e.Overlay="Overlay",e.Darken="Darken",e.Lighten="Lighten",e.ColorDodge="ColorDodge",e.ColorBurn="ColorBurn",e.HardLight="HardLight",e.SoftLight="SoftLight",e.Difference="Difference",e.Exclusion="Exclusion",e}(Rc||{});var A2e=function(){function e(t,n,i){this.fontSize=24,this.fontColor=yt(0,0,0),this.lineHeight=24,this.x=0,this.y=0,L(t,"leafNode",[[Jr,"PDFPageLeaf"]]),L(n,"ref",[[$e,"PDFRef"]]),L(i,"doc",[[xr,"PDFDocument"]]),this.node=t,this.ref=n,this.doc=i}return e.prototype.setRotation=function(t){var n=eT(t);BD(n,"degreesAngle",90),this.node.set(T.of("Rotate"),this.doc.context.obj(n))},e.prototype.getRotation=function(){var t=this.node.Rotate();return Pe(t?t.asNumber():0)},e.prototype.setSize=function(t,n){L(t,"width",["number"]),L(n,"height",["number"]);var i=this.getMediaBox();this.setMediaBox(i.x,i.y,t,n);var r=this.getCropBox(),o=this.getBleedBox(),s=this.getTrimBox(),a=this.getArtBox(),l=this.node.CropBox(),c=this.node.BleedBox(),u=this.node.TrimBox(),d=this.node.ArtBox();l&&XC(r,i)&&this.setCropBox(i.x,i.y,t,n),c&&XC(o,i)&&this.setBleedBox(i.x,i.y,t,n),u&&XC(s,i)&&this.setTrimBox(i.x,i.y,t,n),d&&XC(a,i)&&this.setArtBox(i.x,i.y,t,n)},e.prototype.setWidth=function(t){L(t,"width",["number"]),this.setSize(t,this.getSize().height)},e.prototype.setHeight=function(t){L(t,"height",["number"]),this.setSize(this.getSize().width,t)},e.prototype.setMediaBox=function(t,n,i,r){L(t,"x",["number"]),L(n,"y",["number"]),L(i,"width",["number"]),L(r,"height",["number"]);var o=this.doc.context.obj([t,n,t+i,n+r]);this.node.set(T.MediaBox,o)},e.prototype.setCropBox=function(t,n,i,r){L(t,"x",["number"]),L(n,"y",["number"]),L(i,"width",["number"]),L(r,"height",["number"]);var o=this.doc.context.obj([t,n,t+i,n+r]);this.node.set(T.CropBox,o)},e.prototype.setBleedBox=function(t,n,i,r){L(t,"x",["number"]),L(n,"y",["number"]),L(i,"width",["number"]),L(r,"height",["number"]);var o=this.doc.context.obj([t,n,t+i,n+r]);this.node.set(T.BleedBox,o)},e.prototype.setTrimBox=function(t,n,i,r){L(t,"x",["number"]),L(n,"y",["number"]),L(i,"width",["number"]),L(r,"height",["number"]);var o=this.doc.context.obj([t,n,t+i,n+r]);this.node.set(T.TrimBox,o)},e.prototype.setArtBox=function(t,n,i,r){L(t,"x",["number"]),L(n,"y",["number"]),L(i,"width",["number"]),L(r,"height",["number"]);var o=this.doc.context.obj([t,n,t+i,n+r]);this.node.set(T.ArtBox,o)},e.prototype.getSize=function(){var t=this.getMediaBox(),n=t.width,i=t.height;return{width:n,height:i}},e.prototype.getWidth=function(){return this.getSize().width},e.prototype.getHeight=function(){return this.getSize().height},e.prototype.getMediaBox=function(){var t=this.node.MediaBox();return t.asRectangle()},e.prototype.getCropBox=function(){var t,n=this.node.CropBox();return(t=n?.asRectangle())!==null&&t!==void 0?t:this.getMediaBox()},e.prototype.getBleedBox=function(){var t,n=this.node.BleedBox();return(t=n?.asRectangle())!==null&&t!==void 0?t:this.getCropBox()},e.prototype.getTrimBox=function(){var t,n=this.node.TrimBox();return(t=n?.asRectangle())!==null&&t!==void 0?t:this.getCropBox()},e.prototype.getArtBox=function(){var t,n=this.node.ArtBox();return(t=n?.asRectangle())!==null&&t!==void 0?t:this.getCropBox()},e.prototype.translateContent=function(t,n){L(t,"x",["number"]),L(n,"y",["number"]),this.node.normalize(),this.getContentStream();var i=this.createContentStream(Qn(),to(t,n)),r=this.doc.context.register(i),o=this.createContentStream(Xn()),s=this.doc.context.register(o);this.node.wrapContentStreams(r,s)},e.prototype.scale=function(t,n){L(t,"x",["number"]),L(n,"y",["number"]),this.setSize(this.getWidth()*t,this.getHeight()*n),this.scaleContent(t,n),this.scaleAnnotations(t,n)},e.prototype.scaleContent=function(t,n){L(t,"x",["number"]),L(n,"y",["number"]),this.node.normalize(),this.getContentStream();var i=this.createContentStream(Qn(),If(t,n)),r=this.doc.context.register(i),o=this.createContentStream(Xn()),s=this.doc.context.register(o);this.node.wrapContentStreams(r,s)},e.prototype.scaleAnnotations=function(t,n){L(t,"x",["number"]),L(n,"y",["number"]);var i=this.node.Annots();if(i)for(var r=0;r<i.size();r++){var o=i.lookup(r);o instanceof Te&&this.scaleAnnot(o,t,n)}},e.prototype.resetPosition=function(){this.getContentStream(!1),this.x=0,this.y=0},e.prototype.setFont=function(t){L(t,"font",[[ci,"PDFFont"]]),this.font=t,this.fontKey=this.node.newFontDictionary(this.font.name,this.font.ref)},e.prototype.setFontSize=function(t){L(t,"fontSize",["number"]),this.fontSize=t},e.prototype.setFontColor=function(t){L(t,"fontColor",[[Object,"Color"]]),this.fontColor=t},e.prototype.setLineHeight=function(t){L(t,"lineHeight",["number"]),this.lineHeight=t},e.prototype.getPosition=function(){return{x:this.x,y:this.y}},e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e.prototype.moveTo=function(t,n){L(t,"x",["number"]),L(n,"y",["number"]),this.x=t,this.y=n},e.prototype.moveDown=function(t){L(t,"yDecrease",["number"]),this.y-=t},e.prototype.moveUp=function(t){L(t,"yIncrease",["number"]),this.y+=t},e.prototype.moveLeft=function(t){L(t,"xDecrease",["number"]),this.x-=t},e.prototype.moveRight=function(t){L(t,"xIncrease",["number"]),this.x+=t},e.prototype.pushOperators=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];VD(t,"operator",[[mt,"PDFOperator"]]);var i=this.getContentStream();i.push.apply(i,t)},e.prototype.drawText=function(t,n){var i,r,o,s,a,l,c;n===void 0&&(n={}),L(t,"text",["string"]),ie(n.color,"options.color",[[Object,"Color"]]),rs(n.opacity,"opacity.opacity",0,1),ie(n.font,"options.font",[[ci,"PDFFont"]]),ie(n.size,"options.size",["number"]),ie(n.rotate,"options.rotate",[[Object,"Rotation"]]),ie(n.xSkew,"options.xSkew",[[Object,"Rotation"]]),ie(n.ySkew,"options.ySkew",[[Object,"Rotation"]]),ie(n.x,"options.x",["number"]),ie(n.y,"options.y",["number"]),ie(n.lineHeight,"options.lineHeight",["number"]),ie(n.maxWidth,"options.maxWidth",["number"]),ie(n.wordBreaks,"options.wordBreaks",[Array]),To(n.blendMode,"options.blendMode",Rc);for(var u=this.setOrEmbedFont(n.font),d=u.oldFont,h=u.newFont,p=u.newFontKey,g=n.size||this.fontSize,m=n.wordBreaks||this.doc.defaultWordBreaks,v=function(E){return h.widthOfTextAtSize(E,g)},C=n.maxWidth===void 0?gD(af(t)):tQ(t,m,n.maxWidth,v),S=new Array(C.length),_=0,D=C.length;_<D;_++)S[_]=h.encodeText(C[_]);var F=this.maybeEmbedGraphicsState({opacity:n.opacity,blendMode:n.blendMode}),I=this.getContentStream();I.push.apply(I,PZ(S,{color:(i=n.color)!==null&&i!==void 0?i:this.fontColor,font:p,size:g,rotate:(r=n.rotate)!==null&&r!==void 0?r:Pe(0),xSkew:(o=n.xSkew)!==null&&o!==void 0?o:Pe(0),ySkew:(s=n.ySkew)!==null&&s!==void 0?s:Pe(0),x:(a=n.x)!==null&&a!==void 0?a:this.x,y:(l=n.y)!==null&&l!==void 0?l:this.y,lineHeight:(c=n.lineHeight)!==null&&c!==void 0?c:this.lineHeight,graphicsState:F})),n.font&&(d?this.setFont(d):this.resetFont())},e.prototype.drawImage=function(t,n){var i,r,o,s,a,l,c;n===void 0&&(n={}),L(t,"image",[[Wm,"PDFImage"]]),ie(n.x,"options.x",["number"]),ie(n.y,"options.y",["number"]),ie(n.width,"options.width",["number"]),ie(n.height,"options.height",["number"]),ie(n.rotate,"options.rotate",[[Object,"Rotation"]]),ie(n.xSkew,"options.xSkew",[[Object,"Rotation"]]),ie(n.ySkew,"options.ySkew",[[Object,"Rotation"]]),rs(n.opacity,"opacity.opacity",0,1),To(n.blendMode,"options.blendMode",Rc);var u=this.node.newXObject("Image",t.ref),d=this.maybeEmbedGraphicsState({opacity:n.opacity,blendMode:n.blendMode}),h=this.getContentStream();h.push.apply(h,uT(u,{x:(i=n.x)!==null&&i!==void 0?i:this.x,y:(r=n.y)!==null&&r!==void 0?r:this.y,width:(o=n.width)!==null&&o!==void 0?o:t.size().width,height:(s=n.height)!==null&&s!==void 0?s:t.size().height,rotate:(a=n.rotate)!==null&&a!==void 0?a:Pe(0),xSkew:(l=n.xSkew)!==null&&l!==void 0?l:Pe(0),ySkew:(c=n.ySkew)!==null&&c!==void 0?c:Pe(0),graphicsState:d}))},e.prototype.drawPage=function(t,n){var i,r,o,s,a;n===void 0&&(n={}),L(t,"embeddedPage",[[kw,"PDFEmbeddedPage"]]),ie(n.x,"options.x",["number"]),ie(n.y,"options.y",["number"]),ie(n.xScale,"options.xScale",["number"]),ie(n.yScale,"options.yScale",["number"]),ie(n.width,"options.width",["number"]),ie(n.height,"options.height",["number"]),ie(n.rotate,"options.rotate",[[Object,"Rotation"]]),ie(n.xSkew,"options.xSkew",[[Object,"Rotation"]]),ie(n.ySkew,"options.ySkew",[[Object,"Rotation"]]),rs(n.opacity,"opacity.opacity",0,1),To(n.blendMode,"options.blendMode",Rc);var l=this.node.newXObject("EmbeddedPdfPage",t.ref),c=this.maybeEmbedGraphicsState({opacity:n.opacity,blendMode:n.blendMode}),u=n.width!==void 0?n.width/t.width:n.xScale!==void 0?n.xScale:1,d=n.height!==void 0?n.height/t.height:n.yScale!==void 0?n.yScale:1,h=this.getContentStream();h.push.apply(h,kZ(l,{x:(i=n.x)!==null&&i!==void 0?i:this.x,y:(r=n.y)!==null&&r!==void 0?r:this.y,xScale:u,yScale:d,rotate:(o=n.rotate)!==null&&o!==void 0?o:Pe(0),xSkew:(s=n.xSkew)!==null&&s!==void 0?s:Pe(0),ySkew:(a=n.ySkew)!==null&&a!==void 0?a:Pe(0),graphicsState:c}))},e.prototype.drawSvgPath=function(t,n){var i,r,o,s,a,l,c,u,d;n===void 0&&(n={}),L(t,"path",["string"]),ie(n.x,"options.x",["number"]),ie(n.y,"options.y",["number"]),ie(n.scale,"options.scale",["number"]),ie(n.rotate,"options.rotate",[[Object,"Rotation"]]),ie(n.borderWidth,"options.borderWidth",["number"]),ie(n.color,"options.color",[[Object,"Color"]]),rs(n.opacity,"opacity.opacity",0,1),ie(n.borderColor,"options.borderColor",[[Object,"Color"]]),ie(n.borderDashArray,"options.borderDashArray",[Array]),ie(n.borderDashPhase,"options.borderDashPhase",["number"]),To(n.borderLineCap,"options.borderLineCap",Hm),rs(n.borderOpacity,"options.borderOpacity",0,1),To(n.blendMode,"options.blendMode",Rc);var h=this.maybeEmbedGraphicsState({opacity:n.opacity,borderOpacity:n.borderOpacity,blendMode:n.blendMode});!("color"in n)&&!("borderColor"in n)&&(n.borderColor=yt(0,0,0));var p=this.getContentStream();p.push.apply(p,NZ(t,{x:(i=n.x)!==null&&i!==void 0?i:this.x,y:(r=n.y)!==null&&r!==void 0?r:this.y,scale:n.scale,rotate:(o=n.rotate)!==null&&o!==void 0?o:Pe(0),color:(s=n.color)!==null&&s!==void 0?s:void 0,borderColor:(a=n.borderColor)!==null&&a!==void 0?a:void 0,borderWidth:(l=n.borderWidth)!==null&&l!==void 0?l:0,borderDashArray:(c=n.borderDashArray)!==null&&c!==void 0?c:void 0,borderDashPhase:(u=n.borderDashPhase)!==null&&u!==void 0?u:void 0,borderLineCap:(d=n.borderLineCap)!==null&&d!==void 0?d:void 0,graphicsState:h}))},e.prototype.drawLine=function(t){var n,i,r,o,s;L(t.start,"options.start",[[Object,"{ x: number, y: number }"]]),L(t.end,"options.end",[[Object,"{ x: number, y: number }"]]),L(t.start.x,"options.start.x",["number"]),L(t.start.y,"options.start.y",["number"]),L(t.end.x,"options.end.x",["number"]),L(t.end.y,"options.end.y",["number"]),ie(t.thickness,"options.thickness",["number"]),ie(t.color,"options.color",[[Object,"Color"]]),ie(t.dashArray,"options.dashArray",[Array]),ie(t.dashPhase,"options.dashPhase",["number"]),To(t.lineCap,"options.lineCap",Hm),rs(t.opacity,"opacity.opacity",0,1),To(t.blendMode,"options.blendMode",Rc);var a=this.maybeEmbedGraphicsState({borderOpacity:t.opacity,blendMode:t.blendMode});"color"in t||(t.color=yt(0,0,0));var l=this.getContentStream();l.push.apply(l,OZ({start:t.start,end:t.end,thickness:(n=t.thickness)!==null&&n!==void 0?n:1,color:(i=t.color)!==null&&i!==void 0?i:void 0,dashArray:(r=t.dashArray)!==null&&r!==void 0?r:void 0,dashPhase:(o=t.dashPhase)!==null&&o!==void 0?o:void 0,lineCap:(s=t.lineCap)!==null&&s!==void 0?s:void 0,graphicsState:a}))},e.prototype.drawRectangle=function(t){var n,i,r,o,s,a,l,c,u,d,h,p,g;t===void 0&&(t={}),ie(t.x,"options.x",["number"]),ie(t.y,"options.y",["number"]),ie(t.width,"options.width",["number"]),ie(t.height,"options.height",["number"]),ie(t.rotate,"options.rotate",[[Object,"Rotation"]]),ie(t.xSkew,"options.xSkew",[[Object,"Rotation"]]),ie(t.ySkew,"options.ySkew",[[Object,"Rotation"]]),ie(t.borderWidth,"options.borderWidth",["number"]),ie(t.color,"options.color",[[Object,"Color"]]),rs(t.opacity,"opacity.opacity",0,1),ie(t.borderColor,"options.borderColor",[[Object,"Color"]]),ie(t.borderDashArray,"options.borderDashArray",[Array]),ie(t.borderDashPhase,"options.borderDashPhase",["number"]),To(t.borderLineCap,"options.borderLineCap",Hm),rs(t.borderOpacity,"options.borderOpacity",0,1),To(t.blendMode,"options.blendMode",Rc);var m=this.maybeEmbedGraphicsState({opacity:t.opacity,borderOpacity:t.borderOpacity,blendMode:t.blendMode});!("color"in t)&&!("borderColor"in t)&&(t.color=yt(0,0,0));var v=this.getContentStream();v.push.apply(v,Mf({x:(n=t.x)!==null&&n!==void 0?n:this.x,y:(i=t.y)!==null&&i!==void 0?i:this.y,width:(r=t.width)!==null&&r!==void 0?r:150,height:(o=t.height)!==null&&o!==void 0?o:100,rotate:(s=t.rotate)!==null&&s!==void 0?s:Pe(0),xSkew:(a=t.xSkew)!==null&&a!==void 0?a:Pe(0),ySkew:(l=t.ySkew)!==null&&l!==void 0?l:Pe(0),borderWidth:(c=t.borderWidth)!==null&&c!==void 0?c:0,color:(u=t.color)!==null&&u!==void 0?u:void 0,borderColor:(d=t.borderColor)!==null&&d!==void 0?d:void 0,borderDashArray:(h=t.borderDashArray)!==null&&h!==void 0?h:void 0,borderDashPhase:(p=t.borderDashPhase)!==null&&p!==void 0?p:void 0,graphicsState:m,borderLineCap:(g=t.borderLineCap)!==null&&g!==void 0?g:void 0}))},e.prototype.drawSquare=function(t){t===void 0&&(t={});var n=t.size;ie(n,"size",["number"]),this.drawRectangle(Xe(Xe({},t),{width:n,height:n}))},e.prototype.drawEllipse=function(t){var n,i,r,o,s,a,l,c,u,d,h;t===void 0&&(t={}),ie(t.x,"options.x",["number"]),ie(t.y,"options.y",["number"]),ie(t.xScale,"options.xScale",["number"]),ie(t.yScale,"options.yScale",["number"]),ie(t.rotate,"options.rotate",[[Object,"Rotation"]]),ie(t.color,"options.color",[[Object,"Color"]]),rs(t.opacity,"opacity.opacity",0,1),ie(t.borderColor,"options.borderColor",[[Object,"Color"]]),rs(t.borderOpacity,"options.borderOpacity",0,1),ie(t.borderWidth,"options.borderWidth",["number"]),ie(t.borderDashArray,"options.borderDashArray",[Array]),ie(t.borderDashPhase,"options.borderDashPhase",["number"]),To(t.borderLineCap,"options.borderLineCap",Hm),To(t.blendMode,"options.blendMode",Rc);var p=this.maybeEmbedGraphicsState({opacity:t.opacity,borderOpacity:t.borderOpacity,blendMode:t.blendMode});!("color"in t)&&!("borderColor"in t)&&(t.color=yt(0,0,0));var g=this.getContentStream();g.push.apply(g,cT({x:(n=t.x)!==null&&n!==void 0?n:this.x,y:(i=t.y)!==null&&i!==void 0?i:this.y,xScale:(r=t.xScale)!==null&&r!==void 0?r:100,yScale:(o=t.yScale)!==null&&o!==void 0?o:100,rotate:(s=t.rotate)!==null&&s!==void 0?s:void 0,color:(a=t.color)!==null&&a!==void 0?a:void 0,borderColor:(l=t.borderColor)!==null&&l!==void 0?l:void 0,borderWidth:(c=t.borderWidth)!==null&&c!==void 0?c:0,borderDashArray:(u=t.borderDashArray)!==null&&u!==void 0?u:void 0,borderDashPhase:(d=t.borderDashPhase)!==null&&d!==void 0?d:void 0,borderLineCap:(h=t.borderLineCap)!==null&&h!==void 0?h:void 0,graphicsState:p}))},e.prototype.drawCircle=function(t){t===void 0&&(t={});var n=t.size,i=n===void 0?100:n;ie(i,"size",["number"]),this.drawEllipse(Xe(Xe({},t),{xScale:i,yScale:i}))},e.prototype.setOrEmbedFont=function(t){var n=this.font,i=this.fontKey;t?this.setFont(t):this.getFont();var r=this.font,o=this.fontKey;return{oldFont:n,oldFontKey:i,newFont:r,newFontKey:o}},e.prototype.getFont=function(){if(!this.font||!this.fontKey){var t=this.doc.embedStandardFont(Nw.Helvetica);this.setFont(t)}return[this.font,this.fontKey]},e.prototype.resetFont=function(){this.font=void 0,this.fontKey=void 0},e.prototype.getContentStream=function(t){return t===void 0&&(t=!0),t&&this.contentStream?this.contentStream:(this.contentStream=this.createContentStream(),this.contentStreamRef=this.doc.context.register(this.contentStream),this.node.addContentStream(this.contentStreamRef),this.contentStream)},e.prototype.createContentStream=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this.doc.context.obj({}),r=Dc.of(i,t);return r},e.prototype.maybeEmbedGraphicsState=function(t){var n=t.opacity,i=t.borderOpacity,r=t.blendMode;if(!(n===void 0&&i===void 0&&r===void 0)){var o=this.doc.context.obj({Type:"ExtGState",ca:n,CA:i,BM:r}),s=this.node.newExtGState("GS",o);return s}},e.prototype.scaleAnnot=function(t,n,i){for(var r=["RD","CL","Vertices","QuadPoints","L","Rect"],o=0,s=r.length;o<s;o++){var a=t.lookup(T.of(r[o]));a instanceof Ye&&a.scalePDFNumbers(n,i)}var l=t.lookup(T.of("InkList"));if(l instanceof Ye)for(var o=0,s=l.size();o<s;o++){var c=l.lookup(o);c instanceof Ye&&c.scalePDFNumbers(n,i)}},e.of=function(t,n,i){return new e(t,n,i)},e.create=function(t){L(t,"doc",[[xr,"PDFDocument"]]);var n=$e.of(-1),i=Jr.withContextAndParent(t.context,n),r=t.context.register(i);return new e(i,r,t)},e}(),Si=A2e;var M2e=function(e){W(t,e);function t(n,i,r){var o=e.call(this,n,i,r)||this;return L(n,"acroButton",[[ld,"PDFAcroPushButton"]]),o.acroField=n,o}return t.prototype.setImage=function(n,i){i===void 0&&(i=xl.Center);for(var r=this.acroField.getWidgets(),o=0,s=r.length;o<s;o++){var a=r[o],l=this.createImageAppearanceStream(a,n,i);this.updateWidgetAppearances(a,{normal:l})}this.markAsClean()},t.prototype.setFontSize=function(n){nd(n,"fontSize"),this.acroField.setFontSize(n),this.markAsDirty()},t.prototype.addToPage=function(n,i,r){var o,s,a,l,c,u,d,h,p,g,m;ie(n,"text",["string"]),ie(i,"page",[[Si,"PDFPage"]]),Hs(r);var v=this.createWidget({x:((o=r?.x)!==null&&o!==void 0?o:0)-((s=r?.borderWidth)!==null&&s!==void 0?s:0)/2,y:((a=r?.y)!==null&&a!==void 0?a:0)-((l=r?.borderWidth)!==null&&l!==void 0?l:0)/2,width:(c=r?.width)!==null&&c!==void 0?c:100,height:(u=r?.height)!==null&&u!==void 0?u:50,textColor:(d=r?.textColor)!==null&&d!==void 0?d:yt(0,0,0),backgroundColor:(h=r?.backgroundColor)!==null&&h!==void 0?h:yt(.75,.75,.75),borderColor:r?.borderColor,borderWidth:(p=r?.borderWidth)!==null&&p!==void 0?p:0,rotate:(g=r?.rotate)!==null&&g!==void 0?g:Pe(0),caption:n,hidden:r?.hidden,page:i.ref}),C=this.doc.context.register(v.dict);this.acroField.addWidget(C);var S=(m=r?.font)!==null&&m!==void 0?m:this.doc.getForm().getDefaultFont();this.updateWidgetAppearance(v,S),i.node.addAnnot(C)},t.prototype.needsAppearancesUpdate=function(){var n;if(this.isDirty())return!0;for(var i=this.acroField.getWidgets(),r=0,o=i.length;r<o;r++){var s=i[r],a=((n=s.getAppearances())===null||n===void 0?void 0:n.normal)instanceof Tn;if(!a)return!0}return!1},t.prototype.defaultUpdateAppearances=function(n){L(n,"font",[[ci,"PDFFont"]]),this.updateAppearances(n)},t.prototype.updateAppearances=function(n,i){L(n,"font",[[ci,"PDFFont"]]),ie(i,"provider",[Function]);for(var r=this.acroField.getWidgets(),o=0,s=r.length;o<s;o++){var a=r[o];this.updateWidgetAppearance(a,n,i)}},t.prototype.updateWidgetAppearance=function(n,i,r){var o=r??eJ,s=Gs(o(this,n,i));this.updateWidgetAppearanceWithFont(n,i,s)},t.of=function(n,i,r){return new t(n,i,r)},t}(io),Xm=M2e;var gJ="firebasestorage.googleapis.com",mJ="storageBucket",P2e=2*60*1e3,k2e=10*60*1e3,O2e=1e3;var Hn=class e extends Qs{constructor(t,n,i=0){super(ZL(t),`Firebase Storage: ${n} (${ZL(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,e.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return ZL(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Nn=function(e){return e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment",e}(Nn||{});function ZL(e){return"storage/"+e}function sV(){let e="An unknown error occurred, please check the error payload for server response.";return new Hn(Nn.UNKNOWN,e)}function N2e(e){return new Hn(Nn.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function L2e(e){return new Hn(Nn.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function V2e(){let e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Hn(Nn.UNAUTHENTICATED,e)}function B2e(){return new Hn(Nn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function G2e(e){return new Hn(Nn.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function vJ(){return new Hn(Nn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yJ(){return new Hn(Nn.CANCELED,"User canceled the upload/download.")}function H2e(e){return new Hn(Nn.INVALID_URL,"Invalid URL '"+e+"'.")}function z2e(e){return new Hn(Nn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function U2e(){return new Hn(Nn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+mJ+"' property when initializing the app?")}function CJ(){return new Hn(Nn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function j2e(){return new Hn(Nn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function W2e(){return new Hn(Nn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function q2e(e){return new Hn(Nn.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Of(e){return new Hn(Nn.INVALID_ARGUMENT,e)}function wJ(){return new Hn(Nn.APP_DELETED,"The Firebase app was deleted.")}function aV(e){return new Hn(Nn.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Vw(e,t){return new Hn(Nn.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Lw(e){throw new Hn(Nn.INTERNAL_ERROR,"Internal error: "+e)}var ro=class e{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let i;try{i=e.makeFromUrl(t,n)}catch{return new e(t,"")}if(i.path==="")return i;throw z2e(t)}static makeFromUrl(t,n){let i=null,r="([A-Za-z0-9.\\-_]+)";function o(D){D.path.charAt(D.path.length-1)==="/"&&(D.path_=D.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+r+s,"i"),l={bucket:1,path:3};function c(D){D.path_=decodeURIComponent(D.path)}let u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",p=new RegExp(`^https?://${d}/${u}/b/${r}/o${h}`,"i"),g={bucket:1,path:3},m=n===gJ?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",C=new RegExp(`^https?://${m}/${r}/${v}`,"i"),_=[{regex:a,indices:l,postModify:o},{regex:p,indices:g,postModify:c},{regex:C,indices:{bucket:1,path:2},postModify:c}];for(let D=0;D<_.length;D++){let F=_[D],I=F.regex.exec(t);if(I){let E=I[F.indices.bucket],b=I[F.indices.path];b||(b=""),i=new e(E,b),F.postModify(i);break}}if(i==null)throw H2e(t);return i}},eV=class{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}};function K2e(e,t,n){let i=1,r=null,o=null,s=!1,a=0;function l(){return a===2}let c=!1;function u(...v){c||(c=!0,t.apply(null,v))}function d(v){r=setTimeout(()=>{r=null,e(p,l())},v)}function h(){o&&clearTimeout(o)}function p(v,...C){if(c){h();return}if(v){h(),u.call(null,v,...C);return}if(l()||s){h(),u.call(null,v,...C);return}i<64&&(i*=2);let _;a===1?(a=2,_=0):_=(i+Math.random())*1e3,d(_)}let g=!1;function m(v){g||(g=!0,h(),!c&&(r!==null?(v||(a=2),clearTimeout(r),d(0)):v||(a=1)))}return d(0),o=setTimeout(()=>{s=!0,m(!0)},n),m}function Y2e(e){e(!1)}function Q2e(e){return e!==void 0}function X2e(e){return typeof e=="function"}function $2e(e){return typeof e=="object"&&!Array.isArray(e)}function fT(e){return typeof e=="string"||e instanceof String}function aJ(e){return lV()&&e instanceof Blob}function lV(){return typeof Blob<"u"}function tV(e,t,n,i){if(i<t)throw Of(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw Of(`Invalid value for '${e}'. Expected ${n} or less.`)}function vd(e,t,n){let i=t;return n==null&&(i=`https://${t}`),`${n}://${i}/v0${e}`}function bJ(e){let t=encodeURIComponent,n="?";for(let i in e)if(e.hasOwnProperty(i)){let r=t(i)+"="+t(e[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Jm=function(e){return e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT",e}(Jm||{});function SJ(e,t){let n=e>=500&&e<600,r=[408,429].indexOf(e)!==-1,o=t.indexOf(e)!==-1;return n||r||o}var nV=class{constructor(t,n,i,r,o,s,a,l,c,u,d,h=!0){this.url_=t,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,g)=>{this.resolve_=p,this.reject_=g,this.start_()})}start_(){let t=(i,r)=>{if(r){i(!1,new Zm(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===Jm.NO_ERROR,l=o.getStatus();if(!a||SJ(l,this.additionalRetryCodes_)&&this.retry){let u=o.getErrorCode()===Jm.ABORT;i(!1,new Zm(!1,null,u));return}let c=this.successCodes_.indexOf(l)!==-1;i(!0,new Zm(c,o))})},n=(i,r)=>{let o=this.resolve_,s=this.reject_,a=r.connection;if(r.wasSuccessCode)try{let l=this.callback_(a,a.getResponse());Q2e(l)?o(l):o()}catch(l){s(l)}else if(a!==null){let l=sV();l.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,l)):s(l)}else if(r.canceled){let l=this.appDelete_?wJ():yJ();s(l)}else{let l=vJ();s(l)}};this.canceled_?n(!1,new Zm(!1,null,!0)):this.backoffId_=K2e(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Y2e(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Zm=class{constructor(t,n,i){this.wasSuccessCode=t,this.connection=n,this.canceled=!!i}};function Z2e(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function J2e(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function eke(e,t){t&&(e["X-Firebase-GMPID"]=t)}function tke(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function nke(e,t,n,i,r,o,s=!0){let a=bJ(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return eke(c,t),Z2e(c,n),J2e(c,o),tke(c,i),new nV(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,s)}function ike(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function rke(...e){let t=ike();if(t!==void 0){let n=new t;for(let i=0;i<e.length;i++)n.append(e[i]);return n.getBlob()}else{if(lV())return new Blob(e);throw new Hn(Nn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function oke(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}function ske(e){if(typeof atob>"u")throw q2e("base-64");return atob(e)}var ss={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Bw=class{constructor(t,n){this.data=t,this.contentType=n||null}};function cV(e,t){switch(e){case ss.RAW:return new Bw(_J(t));case ss.BASE64:case ss.BASE64URL:return new Bw(EJ(e,t));case ss.DATA_URL:return new Bw(lke(t),cke(t))}throw sV()}function _J(e){let t=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{let o=i,s=e.charCodeAt(++n);i=65536|(o&1023)<<10|s&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(t)}function ake(e){let t;try{t=decodeURIComponent(e)}catch{throw Vw(ss.DATA_URL,"Malformed data URL.")}return _J(t)}function EJ(e,t){switch(e){case ss.BASE64:{let r=t.indexOf("-")!==-1,o=t.indexOf("_")!==-1;if(r||o)throw Vw(e,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case ss.BASE64URL:{let r=t.indexOf("+")!==-1,o=t.indexOf("/")!==-1;if(r||o)throw Vw(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ske(t)}catch(r){throw r.message.includes("polyfill")?r:Vw(e,"Invalid character found")}let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}var hT=class{constructor(t){this.base64=!1,this.contentType=null;let n=t.match(/^data:([^,]+)?,/);if(n===null)throw Vw(ss.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let i=n[1]||null;i!=null&&(this.base64=uke(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}};function lke(e){let t=new hT(e);return t.base64?EJ(ss.BASE64,t.rest):ake(t.rest)}function cke(e){return new hT(e).contentType}function uke(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}var ev=class e{constructor(t,n){let i=0,r="";aJ(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,n){if(aJ(this.data_)){let i=this.data_,r=oke(i,t,n);return r===null?null:new e(r)}else{let i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}}static getBlob(...t){if(lV()){let n=t.map(i=>i instanceof e?i.data_:i);return new e(rke.apply(null,n))}else{let n=t.map(s=>fT(s)?cV(ss.RAW,s).data:s.data_),i=0;n.forEach(s=>{i+=s.byteLength});let r=new Uint8Array(i),o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)r[o++]=s[a]}),new e(r,!0)}}uploadData(){return this.data_}};function uV(e){let t;try{t=JSON.parse(e)}catch{return null}return $2e(t)?t:null}function dke(e){if(e.length===0)return null;let t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function hke(e,t){let n=t.split("/").filter(i=>i.length>0).join("/");return e.length===0?n:e+"/"+n}function xJ(e){let t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}function fke(e,t){return t}var dr=class{constructor(t,n,i,r){this.server=t,this.local=n||t,this.writable=!!i,this.xform=r||fke}},dT=null;function pke(e){return!fT(e)||e.length<2?e:xJ(e)}function pT(){if(dT)return dT;let e=[];e.push(new dr("bucket")),e.push(new dr("generation")),e.push(new dr("metageneration")),e.push(new dr("name","fullPath",!0));function t(o,s){return pke(s)}let n=new dr("name");n.xform=t,e.push(n);function i(o,s){return s!==void 0?Number(s):s}let r=new dr("size");return r.xform=i,e.push(r),e.push(new dr("timeCreated")),e.push(new dr("updated")),e.push(new dr("md5Hash",null,!0)),e.push(new dr("cacheControl",null,!0)),e.push(new dr("contentDisposition",null,!0)),e.push(new dr("contentEncoding",null,!0)),e.push(new dr("contentLanguage",null,!0)),e.push(new dr("contentType",null,!0)),e.push(new dr("metadata","customMetadata",!0)),dT=e,dT}function gke(e,t){function n(){let i=e.bucket,r=e.fullPath,o=new ro(i,r);return t._makeStorageReference(o)}Object.defineProperty(e,"ref",{get:n})}function mke(e,t,n){let i={};i.type="file";let r=n.length;for(let o=0;o<r;o++){let s=n[o];i[s.local]=s.xform(i,t[s.server])}return gke(i,e),i}function DJ(e,t,n){let i=uV(t);return i===null?null:mke(e,i,n)}function vke(e,t,n,i){let r=uV(t);if(r===null||!fT(r.downloadTokens))return null;let o=r.downloadTokens;if(o.length===0)return null;let s=encodeURIComponent;return o.split(",").map(c=>{let u=e.bucket,d=e.fullPath,h="/b/"+s(u)+"/o/"+s(d),p=vd(h,n,i),g=bJ({alt:"media",token:c});return p+g})[0]}function dV(e,t){let n={},i=t.length;for(let r=0;r<i;r++){let o=t[r];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}var lJ="prefixes",cJ="items";function yke(e,t,n){let i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[lJ])for(let r of n[lJ]){let o=r.replace(/\/$/,""),s=e._makeStorageReference(new ro(t,o));i.prefixes.push(s)}if(n[cJ])for(let r of n[cJ]){let o=e._makeStorageReference(new ro(t,r.name));i.items.push(o)}return i}function Cke(e,t,n){let i=uV(n);return i===null?null:yke(e,t,i)}var Ta=class{constructor(t,n,i,r){this.url=t,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function Tl(e){if(!e)throw sV()}function gT(e,t){function n(i,r){let o=DJ(e,r,t);return Tl(o!==null),o}return n}function wke(e,t){function n(i,r){let o=Cke(e,t,r);return Tl(o!==null),o}return n}function bke(e,t){function n(i,r){let o=DJ(e,r,t);return Tl(o!==null),vke(o,r,e.host,e._protocol)}return n}function iv(e){function t(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=B2e():r=V2e():n.getStatus()===402?r=L2e(e.bucket):n.getStatus()===403?r=G2e(e.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return t}function mT(e){let t=iv(e);function n(i,r){let o=t(i,r);return i.getStatus()===404&&(o=N2e(e.path)),o.serverResponse=r.serverResponse,o}return n}function TJ(e,t,n){let i=t.fullServerUrl(),r=vd(i,e.host,e._protocol),o="GET",s=e.maxOperationRetryTime,a=new Ta(r,o,gT(e,n),s);return a.errorHandler=mT(t),a}function Ske(e,t,n,i,r){let o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&n.length>0&&(o.delimiter=n),i&&(o.pageToken=i),r&&(o.maxResults=r);let s=t.bucketOnlyServerUrl(),a=vd(s,e.host,e._protocol),l="GET",c=e.maxOperationRetryTime,u=new Ta(a,l,wke(e,t.bucket),c);return u.urlParams=o,u.errorHandler=iv(t),u}function _ke(e,t,n){let i=t.fullServerUrl(),r=vd(i,e.host,e._protocol),o="GET",s=e.maxOperationRetryTime,a=new Ta(r,o,bke(e,n),s);return a.errorHandler=mT(t),a}function Eke(e,t,n,i){let r=t.fullServerUrl(),o=vd(r,e.host,e._protocol),s="PATCH",a=dV(n,i),l={"Content-Type":"application/json; charset=utf-8"},c=e.maxOperationRetryTime,u=new Ta(o,s,gT(e,i),c);return u.headers=l,u.body=a,u.errorHandler=mT(t),u}function xke(e,t){let n=t.fullServerUrl(),i=vd(n,e.host,e._protocol),r="DELETE",o=e.maxOperationRetryTime;function s(l,c){}let a=new Ta(i,r,s,o);return a.successCodes=[200,204],a.errorHandler=mT(t),a}function Dke(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function RJ(e,t,n){let i=Object.assign({},n);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=Dke(null,t)),i}function Tke(e,t,n,i,r){let o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let D=0;D<2;D++)_=_+Math.random().toString().slice(2);return _}let l=a();s["Content-Type"]="multipart/related; boundary="+l;let c=RJ(t,i,r),u=dV(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,h=`\r
--`+l+"--",p=ev.getBlob(d,i,h);if(p===null)throw CJ();let g={name:c.fullPath},m=vd(o,e.host,e._protocol),v="POST",C=e.maxUploadRetryTime,S=new Ta(m,v,gT(e,n),C);return S.urlParams=g,S.headers=s,S.body=p.uploadData(),S.errorHandler=iv(t),S}var tv=class{constructor(t,n,i,r){this.current=t,this.total=n,this.finalized=!!i,this.metadata=r||null}};function hV(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch{Tl(!1)}return Tl(!!n&&(t||["active"]).indexOf(n)!==-1),n}function Rke(e,t,n,i,r){let o=t.bucketOnlyServerUrl(),s=RJ(t,i,r),a={name:s.fullPath},l=vd(o,e.host,e._protocol),c="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},d=dV(s,n),h=e.maxUploadRetryTime;function p(m){hV(m);let v;try{v=m.getResponseHeader("X-Goog-Upload-URL")}catch{Tl(!1)}return Tl(fT(v)),v}let g=new Ta(l,c,p,h);return g.urlParams=a,g.headers=u,g.body=d,g.errorHandler=iv(t),g}function Ike(e,t,n,i){let r={"X-Goog-Upload-Command":"query"};function o(c){let u=hV(c,["active","final"]),d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Tl(!1)}d||Tl(!1);let h=Number(d);return Tl(!isNaN(h)),new tv(h,i.size(),u==="final")}let s="POST",a=e.maxUploadRetryTime,l=new Ta(n,s,o,a);return l.headers=r,l.errorHandler=iv(t),l}var uJ=256*1024;function Fke(e,t,n,i,r,o,s,a){let l=new tv(0,0);if(s?(l.current=s.current,l.total=s.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw j2e();let c=l.total-l.current,u=c;r>0&&(u=Math.min(u,r));let d=l.current,h=d+u,p="";u===0?p="finalize":c===u?p="upload, finalize":p="upload";let g={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${l.current}`},m=i.slice(d,h);if(m===null)throw CJ();function v(D,F){let I=hV(D,["active","final"]),E=l.current+u,b=i.size(),x;return I==="final"?x=gT(t,o)(D,F):x=null,new tv(E,b,I==="final",x)}let C="POST",S=t.maxUploadRetryTime,_=new Ta(n,C,v,S);return _.headers=g,_.body=m.uploadData(),_.progressCallback=a||null,_.errorHandler=iv(e),_}var IJ={STATE_CHANGED:"state_changed"},Dr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function JL(e){switch(e){case"running":case"pausing":case"canceling":return Dr.RUNNING;case"paused":return Dr.PAUSED;case"success":return Dr.SUCCESS;case"canceled":return Dr.CANCELED;case"error":return Dr.ERROR;default:return Dr.ERROR}}var iV=class{constructor(t,n,i){if(X2e(t)||n!=null||i!=null)this.next=t,this.error=n??void 0,this.complete=i??void 0;else{let o=t;this.next=o.next,this.error=o.error,this.complete=o.complete}}};function $m(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}var dJ=null,rV=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Jm.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Jm.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Jm.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,i,r){if(this.sent_)throw Lw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),r!==void 0)for(let o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Lw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Lw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Lw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Lw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}},oV=class extends rV{initXhr(){this.xhr_.responseType="text"}};function Dl(){return dJ?dJ():new oV}var Gw=class{constructor(t,n,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=pT(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(Nn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let o=this.isExponentialBackoffExpired();if(SJ(r.status,[]))if(o)r=vJ();else{this.sleepTime=Math.max(this.sleepTime*2,O2e),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(Nn.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,o)=>{this._resolve=r,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){let t=this._transferred;return n=>this._updateProgress(t+n)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,i])=>{switch(this._state){case"running":t(n,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,n)=>{let i=Rke(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Dl,t,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let t=this._uploadUrl;this._resolveToken((n,i)=>{let r=Ike(this._ref.storage,this._ref._location,t,this._blob),o=this._ref.storage._makeRequest(r,Dl,n,i);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let t=uJ*this._chunkMultiplier,n=new tv(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,o)=>{let s;try{s=Fke(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}let a=this._ref.storage._makeRequest(s,Dl,r,o,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){uJ*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,n)=>{let i=TJ(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,Dl,t,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,n)=>{let i=Tke(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,Dl,t,n);this._request=r,r.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){let n=this._transferred;this._transferred=t,this._transferred!==n&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let n=this._state==="paused";this._state=t,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=yJ(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){let t=JL(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,n,i,r){let o=new iV(n||void 0,i||void 0,r||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(t,n){return this._promise.then(t,n)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){let n=this._observers.indexOf(t);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(JL(this._state)){case Dr.SUCCESS:$m(this._resolve.bind(null,this.snapshot))();break;case Dr.CANCELED:case Dr.ERROR:let n=this._reject;$m(n.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(JL(this._state)){case Dr.RUNNING:case Dr.PAUSED:t.next&&$m(t.next.bind(t,this.snapshot))();break;case Dr.SUCCESS:t.complete&&$m(t.complete.bind(t))();break;case Dr.CANCELED:case Dr.ERROR:t.error&&$m(t.error.bind(t,this._error))();break;default:t.error&&$m(t.error.bind(t,this._error))()}}resume(){let t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){let t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){let t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}};var nv=class e{constructor(t,n){this._service=t,n instanceof ro?this._location=n:this._location=ro.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new e(t,n)}get root(){let t=new ro(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xJ(this._location.path)}get storage(){return this._service}get parent(){let t=dke(this._location.path);if(t===null)return null;let n=new ro(this._location.bucket,t);return new e(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw aV(t)}};function Ake(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Gw(e,new ev(t),n)}function Mke(e){let t={prefixes:[],items:[]};return FJ(e,t).then(()=>t)}function FJ(e,t,n){return N(this,null,function*(){let r=yield AJ(e,{pageToken:n});t.prefixes.push(...r.prefixes),t.items.push(...r.items),r.nextPageToken!=null&&(yield FJ(e,t,r.nextPageToken))})}function AJ(e,t){t!=null&&typeof t.maxResults=="number"&&tV("options.maxResults",1,1e3,t.maxResults);let n=t||{},i=Ske(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(i,Dl)}function Pke(e){e._throwIfRoot("getMetadata");let t=TJ(e.storage,e._location,pT());return e.storage.makeRequestWithTokens(t,Dl)}function kke(e,t){e._throwIfRoot("updateMetadata");let n=Eke(e.storage,e._location,t,pT());return e.storage.makeRequestWithTokens(n,Dl)}function Oke(e){e._throwIfRoot("getDownloadURL");let t=_ke(e.storage,e._location,pT());return e.storage.makeRequestWithTokens(t,Dl).then(n=>{if(n===null)throw W2e();return n})}function Nke(e){e._throwIfRoot("deleteObject");let t=xke(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Dl)}function MJ(e,t){let n=hke(e._location.path,t),i=new ro(e._location.bucket,n);return new nv(e.storage,i)}function Lke(e){return/^[A-Za-z]+:\/\//.test(e)}function Vke(e,t){return new nv(e,t)}function PJ(e,t){if(e instanceof Hw){let n=e;if(n._bucket==null)throw U2e();let i=new nv(n,n._bucket);return t!=null?PJ(i,t):i}else return t!==void 0?MJ(e,t):e}function Bke(e,t){if(t&&Lke(t)){if(e instanceof Hw)return Vke(e,t);throw Of("To use ref(service, url), the first argument must be a Storage instance.")}else return PJ(e,t)}function hJ(e,t){let n=t?.[mJ];return n==null?null:ro.makeFromBucketSpec(n,e)}function Gke(e,t,n,i={}){e.host=`${t}:${n}`,e._protocol="http";let{mockUserToken:r}=i;r&&(e._overrideAuthToken=typeof r=="string"?r:ip(r,e.app.options.projectId))}var Hw=class{constructor(t,n,i,r,o){this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._bucket=null,this._host=gJ,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=P2e,this._maxUploadRetryTime=k2e,this._requests=new Set,r!=null?this._bucket=ro.makeFromBucketSpec(r,this._host):this._bucket=hJ(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=ro.makeFromBucketSpec(this._url,t):this._bucket=hJ(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){tV("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){tV("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){return N(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let t=this._authProvider.getImmediate({optional:!0});if(t){let n=yield t.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return N(this,null,function*(){let t=this._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new nv(this,t)}_makeRequest(t,n,i,r,o=!0){if(this._deleted)return new eV(wJ());{let s=nke(t,this._appId,i,r,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(t,n){return N(this,null,function*(){let[i,r]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,i,r).getPromise()})}},fJ="@firebase/storage",pJ="0.13.2";var kJ="storage";function fV(e,t,n){return e=tt(e),Ake(e,t,n)}function pV(e){return e=tt(e),Pke(e)}function gV(e,t){return e=tt(e),kke(e,t)}function mV(e,t){return e=tt(e),AJ(e,t)}function vV(e){return e=tt(e),Mke(e)}function yV(e){return e=tt(e),Oke(e)}function CV(e){return e=tt(e),Nke(e)}function vT(e,t){return e=tt(e),Bke(e,t)}function OJ(e,t){return MJ(e,t)}function NJ(e=Vi(),t){e=tt(e);let i=Ei(e,kJ).getImmediate({identifier:t}),r=Nc("storage");return r&&yT(i,...r),i}function yT(e,t,n,i={}){Gke(e,t,n,i)}function Hke(e,{instanceIdentifier:t}){let n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return new Hw(n,i,r,t,Lc)}function zke(){jn(new gn(kJ,Hke,"PUBLIC").setMultipleInstances(!0)),Qe(fJ,pJ,""),Qe(fJ,pJ,"esm2017")}zke();var rv=class{constructor(t,n,i){this._delegate=t,this.task=n,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}};var CT=class{constructor(t,n){this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new rv(this._delegate.snapshot,this,this._ref)}then(t,n){return this._delegate.then(i=>{if(t)return t(new rv(i,this,this._ref))},n)}on(t,n,i,r){let o;return n&&(typeof n=="function"?o=s=>n(new rv(s,this,this._ref)):o={next:n.next?s=>n.next(new rv(s,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(t,o,i||void 0,r||void 0)}},wT=class{constructor(t,n){this._delegate=t,this._service=n}get prefixes(){return this._delegate.prefixes.map(t=>new Nf(t,this._service))}get items(){return this._delegate.items.map(t=>new Nf(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}};var Nf=class e{constructor(t,n){this._delegate=t,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){let n=OJ(this._delegate,t);return new e(n,this.storage)}get root(){return new e(this._delegate.root,this.storage)}get parent(){let t=this._delegate.parent;return t==null?null:new e(t,this.storage)}put(t,n){return this._throwIfRoot("put"),new CT(fV(this._delegate,t,n),this)}putString(t,n=ss.RAW,i){this._throwIfRoot("putString");let r=cV(n,t),o=Object.assign({},i);return o.contentType==null&&r.contentType!=null&&(o.contentType=r.contentType),new CT(new Gw(this._delegate,new ev(r.data,!0),o),this)}listAll(){return vV(this._delegate).then(t=>new wT(t,this.storage))}list(t){return mV(this._delegate,t||void 0).then(n=>new wT(n,this.storage))}getMetadata(){return pV(this._delegate)}updateMetadata(t){return gV(this._delegate,t)}getDownloadURL(){return yV(this._delegate)}delete(){return this._throwIfRoot("delete"),CV(this._delegate)}_throwIfRoot(t){if(this._delegate._location.path==="")throw aV(t)}};var bT=class{constructor(t,n){this.app=t,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(LJ(t))throw Of("ref() expected a child path but got a URL, use refFromURL instead.");return new Nf(vT(this._delegate,t),this)}refFromURL(t){if(!LJ(t))throw Of("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ro.makeFromUrl(t,this._delegate.host)}catch{throw Of("refFromUrl() expected a valid full URL but got an invalid one.")}return new Nf(vT(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,n,i={}){yT(this._delegate,t,n,i)}};function LJ(e){return/^[A-Za-z]+:\/\//.test(e)}var Uke="@firebase/storage-compat",jke="0.3.12";var Wke="storage-compat";function qke(e,{instanceIdentifier:t}){let n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:t});return new bT(n,i)}function Kke(e){let t={TaskState:Dr,TaskEvent:IJ,StringFormat:ss,Storage:bT,Reference:Nf};e.INTERNAL.registerComponent(new gn(Wke,qke,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion(Uke,jke)}Kke(Po);function Yke(e){return new ge(t=>{let n=s=>t.next(s),i=s=>t.error(s),r=()=>t.complete();n(e.snapshot);let o=e.on("state_changed",n);return e.then(s=>{n(s),r()},s=>{n(e.snapshot),i(s)}),function(){o()}}).pipe(mp(0))}function VJ(e){let t=Yke(e);return{task:e,then:e.then.bind(e),catch:e.catch.bind(e),pause:e.pause.bind(e),cancel:e.cancel.bind(e),resume:e.resume.bind(e),snapshotChanges:()=>t,percentageChanges:()=>t.pipe(ae(n=>n.bytesTransferred/n.totalBytes*100))}}function ST(e){return{getDownloadURL:()=>se(void 0).pipe(FM,Ne(()=>e.getDownloadURL()),Hi),getMetadata:()=>se(void 0).pipe(FM,Ne(()=>e.getMetadata()),Hi),delete:()=>Ze(e.delete()),child:t=>ST(e.child(t)),updateMetadata:t=>Ze(e.updateMetadata(t)),put:(t,n)=>{let i=e.put(t,n);return VJ(i)},putString:(t,n,i)=>{let r=e.putString(t,n,i);return VJ(r)},list:t=>Ze(e.list(t)),listAll:()=>Ze(e.listAll())}}var Qke=new ce("angularfire2.storageBucket"),Xke=new ce("angularfire2.storage.maxUploadRetryTime"),$ke=new ce("angularfire2.storage.maxOperationRetryTime"),Zke=new ce("angularfire2.storage.use-emulator"),BJ=(()=>{class e{storage;constructor(n,i,r,o,s,a,l,c,u,d){let h=rg(n,s,i);this.storage=og(`${h.name}.storage.${r}`,"AngularFireStorage",h.name,()=>{let p=s.runOutsideAngular(()=>h.storage(r||void 0)),g=u;return g&&p.useEmulator(...g),l&&p.setMaxUploadRetryTime(l),c&&p.setMaxOperationRetryTime(c),p},[l,c])}ref(n){return ST(this.storage.ref(n))}refFromURL(n){return ST(this.storage.refFromURL(n))}upload(n,i,r){let o=this.storage.ref(n);return ST(o).put(i,r)}static \u0275fac=function(i){return new(i||e)($(pu),$(ig,8),$(Qke,8),$(Sn),$(De),$(An),$(Xke,8),$($ke,8),$(Zke,8),$(Ti,8))};static \u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})();var GJ=(()=>{class e{constructor(n,i,r){this.storage=n,this.firestore=i,this.afAuth=r,this.PDF_COLLECTION="pdfs",this.PDF_STORAGE_PATH="pdfs",this.userId=null,this.pdfsSubject=new jt([]),this.pdfs$=this.pdfsSubject.asObservable(),this.initialize()}initialize(){this.afAuth.authState.pipe(Ne(n=>n?(this.userId=n.uid,this.getAllPdfs()):(this.userId=null,se([])))).subscribe(n=>{this.pdfsSubject.next(n)},n=>{console.error(n)})}uploadPdf(n){if(!this.userId)throw new Error("User not authenticated");let i=`${this.PDF_STORAGE_PATH}/${this.userId}/userPdfs/${n.name}`,r=this.storage.ref(i);return this.storage.upload(i,n).snapshotChanges().pipe(Ne(()=>r.getDownloadURL()),Ne(s=>Ze(r.getMetadata()).pipe(ae(a=>({id:a.name,name:n.name,url:s,createdAt:new Date(a.timeCreated)})))),Ne(s=>this.getAllPdfs().pipe(ae(a=>(this.pdfsSubject.next([...a,s]),s)))))}getAllPdfs(){if(!this.userId)return se([]);let n=`${this.PDF_STORAGE_PATH}/${this.userId}/userPdfs`;return Ze(this.storage.storage.ref().child(n).listAll()).pipe(Ne(i=>{let o=i.items.map(s=>Ze(s.getMetadata()).pipe(Ne(a=>Ze(s.getDownloadURL()).pipe(ae(l=>({id:a.name,name:a.name,url:l,createdAt:new Date(a.timeCreated)}))))));return gp(o)}))}getPdfById(n){if(!this.userId)throw new Error("User not authenticated");return this.firestore.collection(this.PDF_COLLECTION).doc(this.userId).collection("userPdfs").doc(n).valueChanges()}deletePdf(n){if(!this.userId)throw new Error("User not authenticated");let i=this.storage.refFromURL(n.url);return gp([Ze(this.firestore.collection(this.PDF_COLLECTION).doc(this.userId).collection("userPdfs").doc(n.id).delete()),Ze(i.delete())]).pipe(Ne(()=>this.getAllPdfs()),ae(r=>{this.pdfsSubject.next(r)}))}static{this.\u0275fac=function(i){return new(i||e)($(BJ),$(cx),$(Za))}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function t3e(e,t){if(e&1&&(z(0,"option",8),ye(1),H()),e&2){let n=t.$implicit;ue("value",n),Z(),er(n)}}function n3e(e,t){if(e&1&&(z(0,"option",8),ye(1),H()),e&2){let n=t.$implicit;ue("value",n),Z(),er(n)}}function i3e(e,t){if(e&1){let n=Tt();z(0,"div",12)(1,"div",13)(2,"div",14)(3,"h5",15),ye(4),H(),z(5,"button",16),be("click",function(){let r=Ge(n).$implicit,o=Se(3);return He(o.fillForm(r))}),ye(6," Fill Form "),H()()()()}if(e&2){let n=t.$implicit;Z(4),er(n.name)}}function r3e(e,t){if(e&1&&(z(0,"div")(1,"h3"),ye(2,"Uploaded Files"),H(),z(3,"div",10),Fe(4,i3e,7,1,"div",11),H()()),e&2){let n=Se().ngIf;Z(4),ue("ngForOf",n)}}function o3e(e,t){e&1&&(z(0,"p"),ye(1,"No files have been uploaded yet."),H())}function s3e(e,t){if(e&1&&(Ho(0),Fe(1,r3e,5,1,"div",9)(2,o3e,2,0,"ng-template",null,0,tr),zo()),e&2){let n=t.ngIf,i=Ka(3);Z(),ue("ngIf",n.length>0)("ngIfElse",i)}}var HJ=(()=>{class e{constructor(n,i,r,o){this.pdfService=n,this.transactionService=i,this.tagService=r,this.cdr=o,this.uploadedFilesSubject=new jt([]),this.uploadedFiles$=this.uploadedFilesSubject.asObservable(),this.boTransactions=[],this.months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.name="West Tanza",this.city="Tanza",this.province="Cavite",this.selectedMonth=this.months[new Date().getMonth()],this.selectedYear=new Date().getFullYear(),this.oldestToNewestTransactionYearRange=[],this.transactionsSubject=new jt({income:[],expense:[]}),this.transactions$=this.transactionsSubject.asObservable(),this.totalIns$=this.transactions$.pipe(Ne(({income:s})=>this.calculateTotal(s))),this.totalForwardedFromLastMonth$=this.transactions$.pipe(Ne(({income:s,expense:a})=>this.calculateTotalForwarded(s,a)))}ngOnInit(){this.loadTransactions(),this.loadUploadedFiles()}loadTransactions(){Ar([this.transactionService.incomeTransactions$,this.transactionService.expenseTransactions$]).subscribe(([n,i])=>{this.transactionsSubject.next({income:n,expense:i}),this.setOldestAndNewestYearFromTransaction(n,i),this.cdr.markForCheck()})}setOldestAndNewestYearFromTransaction(n,i){let r=[...n,...i];if(r.length===0)return;let o=r.map(c=>new Date(c.date)),s=Math.min(...o.map(c=>c.getFullYear())),a=Math.max(...o.map(c=>c.getFullYear())),l=[];for(let c=s;c<=a;c++)l.push(c),c===a&&!this.oldestToNewestTransactionYearRange.includes(this.selectedYear)&&(this.selectedYear=c);this.oldestToNewestTransactionYearRange=l}onYearChange(n){this.selectedYear=+n}loadUploadedFiles(){this.pdfService.pdfs$.subscribe(n=>{this.uploadedFilesSubject.next(n),this.cdr.markForCheck()},n=>{console.error("Error fetching uploaded files:",n)})}uploadFile(n){let i=n.target;if(i.files&&i.files.length>0){let r=i.files[0];r.type==="application/pdf"?this.pdfService.uploadPdf(r).pipe(Zs(o=>(console.error("Error uploading PDF:",o),alert("Failed to upload PDF. Please try again."),[]))).subscribe(o=>{let s=this.uploadedFilesSubject.value;this.uploadedFilesSubject.next([...s,o]),this.cdr.markForCheck()}):alert("Please upload a PDF file")}}fillForm(n){return N(this,null,function*(){switch(n.name.split("_")[0].split("-")[1]){case"26":this.fill26(n);break;case"30":this.fill30(n);break;case"62":this.fill62(n);break;default:alert("Unsupported PDF form");break}})}fill26(n){return N(this,null,function*(){try{let i=yield this.loadPdfDocument(n.url);this.modifyFont(i);let r=i.getForm();this.setBasic26InfoFieldValues(r),yield this.inputTransactionData(r);let o=yield i.save();this.downloadModifiedPdf(o,n.name),this.boTransactions=[]}catch(i){this.boTransactions=[],console.error("Error filling form:",i),alert("An error occurred while filling the form. Please try again.")}})}fill30(n){return N(this,null,function*(){let i=yield this.loadPdfDocument(n.url);this.modifyFont(i);let r=i.getForm();this.setBasic30InfoFieldValues(r);let o=yield i.save();this.downloadModifiedPdf(o,n.name),this.boTransactions=[]})}fill62(n){return N(this,null,function*(){let i=[];this.transactionsSubject.value.income.forEach(c=>{this.tagService.synchronousGetTagFromId(c.tagIds[0],"income").name==="W"&&i.push(c)});let r=this.filterTransactionsByMonthYear(i);this.filterTransactionsByMonthYear(this.transactionsSubject.value.expense);let o=this.boTransactions.find(c=>c.title.includes("resolution")),s=yield this.loadPdfDocument(n.url);this.modifyFont(s);let a=s.getForm();a.getCheckBox("900_1_CheckBox").check(),a.getTextField("900_3_Text").setText(this.name),this.calculateTotal(r).pipe(Dt(1)).subscribe(c=>{a.getTextField("901_1_TO62Donate").setText(c)}),o&&a.getTextField("901_2_TO62Donate").setText(o.amount.toFixed(2).toString());let l=yield s.save();this.downloadModifiedPdf(l,n.name),this.boTransactions=[]})}loadPdfDocument(n){return N(this,null,function*(){let i=yield fetch(n);if(!i.ok)throw new Error("Failed to fetch PDF file");let r=yield i.arrayBuffer();return xr.load(r)})}setBasic26InfoFieldValues(n){[{name:"900_1_Text_C",value:this.name},{name:"900_2_Text_C",value:this.city},{name:"900_3_Text_C",value:this.province},{name:"900_4_Text_C",value:this.selectedMonth},{name:"900_5_Text_C",value:this.selectedYear.toString()}].forEach(r=>{let o=n.getTextField(r.name);this.manuallyModifyFont(o,11.65),o.setText(r.value)})}setBasic30InfoFieldValues(n){let i=[],r=[];this.transactionsSubject.value.income.forEach(a=>{let l=this.tagService.synchronousGetTagFromId(a.tagIds[0],"income");l.name==="W"?i.push(a):l.name==="C"&&r.push(a)});let o=this.filterTransactionsByMonthYear(r),s=[{name:"900_1_Text",value:this.name},{name:"900_2_Text",value:`${this.selectedMonth} ${this.selectedYear}`},{name:"900_17_Text_C",value:this.selectedMonth}];this.totalForwardedFromLastMonth$.pipe(Dt(1)).subscribe(a=>{s.push({name:"901_1_S30_Value",value:a})}),this.calculateTotal(o).pipe(Dt(1)).subscribe(a=>{s.push({name:"901_2_S30_Value",value:a})}),this.transactions$.pipe(Dt(1)).subscribe(({expense:a})=>{let l=this.filterTransactionsByMonthYear(a);l.forEach(c=>{c.title.includes("KHOC")&&(s.push({name:"901_12_S30_Value",value:c.amount.toFixed(2).toString()}),l.splice(l.indexOf(c),1))}),this.boTransactions.forEach(c=>{c.title.includes("resolution")&&s.push({name:"901_13_S30_Value",value:c.amount.toFixed(2).toString()}),c.title.includes("from Box")&&(s.push({name:"901_7_S30_Value",value:c.amount.toFixed(2).toString()}),s.push({name:"901_20_S30_Value",value:c.amount.toFixed(2).toString()}))}),this.calculateTotal(l).pipe(Dt(1)).subscribe(c=>{s.push({name:"900_7_Text",value:`Expenses - Refer to ${this.uploadedFilesSubject.value[0].name.split("_")[0]}`}),s.push({name:"901_14_S30_Value",value:c})})}),s.forEach(a=>{let l=n.getTextField(a.name);this.manuallyModifyFont(l,11.65),l.setText(a.value)})}inputTransactionData(n){return N(this,null,function*(){let{income:i,expense:r}=this.transactionsSubject.value,o=this.filterTransactionsByMonthYear(i,"income").sort((c,u)=>c.date.getTime()-u.date.getTime()),s=this.filterTransactionsByMonthYear(r).sort((c,u)=>c.date.getTime()-u.date.getTime()),a=[...o,...s],l=this.createFieldMappings(a);this.fillFormFields(n,l)})}filterTransactionsByMonthYear(n,i){return this.boTransactions=[],n.filter(r=>{let o=new Date(r.date),s=o.getMonth()===this.months.indexOf(this.selectedMonth)&&o.getFullYear()===this.selectedYear;return!i&&r.title.includes("WWW")&&s?(this.boTransactions.push(r),!1):s})}createFieldMappings(n){let i={},r=0,o=0;n.forEach((l,c)=>{let u=l.type==="income",d=u?`900_${c+7}_Text_C`:`900_${c+10}_Text_C`,h=u?`900_${c+59}_Text`:`900_${c+62}_Text`,p=u?`901_${c+1}_S26Value`:`902_${c+57}_S26Value`;if(i[d]=l.date.getDate().toString(),i[h]=l.title,i[p]=l.amount.toFixed(2),u){r=c;let g=`900_${c+111}_Text_C`;i[g]=this.tagService.synchronousGetTagFromId(l.tagIds[0],"income").name}else o=c});let s=new Date(this.selectedYear,this.months.indexOf(this.selectedMonth)+1,0).getDate();i[`900_${r+9}_Text_C`]=s.toString(),i[`900_${r+113}_Text_C`]="D",i[`900_${r+61}_Text`]="Deposit to cashbox";let a=n.filter(l=>l.type==="income").reduce((l,c)=>l+c.amount,0).toFixed(2);return i[`901_${r+56}_S26Value`]=a,i[`902_${r+3}_S26Value`]=a,this.boTransactions.length>0&&(i[`900_${o+64}_Text`]="To Branch Office"),this.boTransactions.forEach((l,c)=>{i[`900_${o+c+13}_Text_C`]=l.date.getDate().toString(),i[`900_${o+c+65}_Text`]=l.title,i[`902_${o+c+60}_S26Value`]=l.amount.toFixed(2)}),this.totalForwardedFromLastMonth$.pipe(Dt(1)).subscribe(l=>{i["904_24_S26Amount"]=l,i["904_33_S26Amount"]=l}),i}fillFormFields(n,i){Object.entries(i).forEach(([r,o])=>{n.getTextField(r).setText(o)})}modifyFont(n){n.getForm().getFields().forEach(i=>{i instanceof gd&&i.setFontSize(10)})}manuallyModifyFont(n,i){n.setFontSize(i)}calculateTotal(n){return new ge(i=>{let r=n.reduce((o,s)=>o+s.amount,0);i.next(r.toFixed(2)),i.complete()})}calculateTotalForwarded(n,i){return new ge(r=>{let o=this.filterPreviousMonthsTransactions(n),s=this.filterPreviousMonthsTransactions(i),a=o.reduce((u,d)=>u+d.amount,0),l=s.reduce((u,d)=>u+d.amount,0),c=(a-l).toFixed(2);r.next(c),r.complete()})}filterPreviousMonthsTransactions(n){let i=this.months.indexOf(this.selectedMonth);return n.filter(r=>{let o=new Date(r.date);return o.getMonth()<i&&o.getFullYear()===this.selectedYear})}downloadModifiedPdf(n,i){let r=new Blob([n],{type:"application/pdf"}),o=URL.createObjectURL(r),s=document.createElement("a");s.href=o,s.download=`${this.selectedMonth}_${this.selectedYear}-${i}`,s.click(),URL.revokeObjectURL(o)}static{this.\u0275fac=function(i){return new(i||e)(J(GJ),J(Yu),J(Vu),J(Gr))}}static{this.\u0275cmp=je({type:e,selectors:[["app-form-filler"]],standalone:!0,features:[We],decls:13,vars:7,consts:[["noFiles",""],[1,"mb-3","d-flex","justify-content-center","justify-content-md-start","align-items-center"],[1,"col-6","col-md-2","col-xl-1","px-1"],["id","monthSelector",1,"form-select","w-100",3,"ngModelChange","ngModel"],["selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["id","yearSelector",1,"form-select","w-100",3,"ngModelChange","ngModel"],[4,"ngIf"],[3,"value"],[4,"ngIf","ngIfElse"],[1,"row"],["class","col-md-4 mb-3",4,"ngFor","ngForOf"],[1,"col-md-4","mb-3"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"btn","btn-warning",3,"click"]],template:function(i,r){i&1&&(z(0,"div",1)(1,"div",2)(2,"select",3),S1("ngModelChange",function(s){return oA(r.selectedMonth,s)||(r.selectedMonth=s),s}),z(3,"option",4),ye(4,"Month"),H(),Fe(5,t3e,2,2,"option",5),H()(),z(6,"div",2)(7,"select",6),S1("ngModelChange",function(s){return oA(r.selectedYear,s)||(r.selectedYear=s),s}),be("ngModelChange",function(s){return r.onYearChange(s)}),z(8,"option",4),ye(9,"Year"),H(),Fe(10,n3e,2,2,"option",5),H()()(),Fe(11,s3e,4,2,"ng-container",7),b0(12,"async")),i&2&&(Z(2),b1("ngModel",r.selectedMonth),Z(3),ue("ngForOf",r.months),Z(2),b1("ngModel",r.selectedYear),Z(3),ue("ngForOf",r.oldestToNewestTransactionYearRange),Z(),ue("ngIf",S0(12,5,r.uploadedFiles$)))},dependencies:[_n,gs,Gi,ZH,A7,T7,I7,__,Cs,DM]})}}return e})();var a3e=[{path:"",component:WY},{path:"fill-form",component:HJ,canActivate:[l9]}],zJ=[{path:"",component:qY,canActivate:[dx]},{path:"login",component:o9,canActivate:[dx]},{path:"register",component:s9,canActivate:[dx]},{path:"dashboard",component:L9,canActivate:[a9],children:a3e}];var WJ="@firebase/installations",_V="0.6.9";var qJ=1e4,KJ=`w:${_V}`,YJ="FIS_v2",l3e="https://firebaseinstallations.googleapis.com/v1",c3e=60*60*1e3,u3e="installations",d3e="Installations";var h3e={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Vf=new Oa(u3e,d3e,h3e);function QJ(e){return e instanceof Qs&&e.code.includes("request-failed")}function XJ({projectId:e}){return`${l3e}/projects/${e}/installations`}function $J(e){return{token:e.token,requestStatus:2,expiresIn:p3e(e.expiresIn),creationTime:Date.now()}}function ZJ(e,t){return N(this,null,function*(){let i=(yield t.json()).error;return Vf.create("request-failed",{requestName:e,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})})}function JJ({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function f3e(e,{refreshToken:t}){let n=JJ(e);return n.append("Authorization",g3e(t)),n}function eee(e){return N(this,null,function*(){let t=yield e();return t.status>=500&&t.status<600?e():t})}function p3e(e){return Number(e.replace("s","000"))}function g3e(e){return`${YJ} ${e}`}function m3e(i,r){return N(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},{fid:n}){let o=XJ(e),s=JJ(e),a=t.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}let l={fid:n,authVersion:YJ,appId:e.appId,sdkVersion:KJ},c={method:"POST",headers:s,body:JSON.stringify(l)},u=yield eee(()=>fetch(o,c));if(u.ok){let d=yield u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:$J(d.authToken)}}else throw yield ZJ("Create Installation",u)})}function tee(e){return new Promise(t=>{setTimeout(t,e)})}function v3e(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}var y3e=/^[cdef][\w-]{21}$/,SV="";function C3e(){try{let e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;let n=w3e(e);return y3e.test(n)?n:SV}catch{return SV}}function w3e(e){return v3e(e).substr(0,22)}function ET(e){return`${e.appName}!${e.appId}`}var nee=new Map;function iee(e,t){let n=ET(e);ree(n,t),b3e(n,t)}function ree(e,t){let n=nee.get(e);if(n)for(let i of n)i(t)}function b3e(e,t){let n=S3e();n&&n.postMessage({key:e,fid:t}),_3e()}var Lf=null;function S3e(){return!Lf&&"BroadcastChannel"in self&&(Lf=new BroadcastChannel("[Firebase] FID Change"),Lf.onmessage=e=>{ree(e.data.key,e.data.fid)}),Lf}function _3e(){nee.size===0&&Lf&&(Lf.close(),Lf=null)}var E3e="firebase-installations-database",x3e=1,Bf="firebase-installations-store",wV=null;function EV(){return wV||(wV=Wv(E3e,x3e,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Bf)}}})),wV}function _T(e,t){return N(this,null,function*(){let n=ET(e),r=(yield EV()).transaction(Bf,"readwrite"),o=r.objectStore(Bf),s=yield o.get(n);return yield o.put(t,n),yield r.done,(!s||s.fid!==t.fid)&&iee(e,t.fid),t})}function oee(e){return N(this,null,function*(){let t=ET(e),i=(yield EV()).transaction(Bf,"readwrite");yield i.objectStore(Bf).delete(t),yield i.done})}function xT(e,t){return N(this,null,function*(){let n=ET(e),r=(yield EV()).transaction(Bf,"readwrite"),o=r.objectStore(Bf),s=yield o.get(n),a=t(s);return a===void 0?yield o.delete(n):yield o.put(a,n),yield r.done,a&&(!s||s.fid!==a.fid)&&iee(e,a.fid),a})}function xV(e){return N(this,null,function*(){let t,n=yield xT(e.appConfig,i=>{let r=D3e(i),o=T3e(e,r);return t=o.registrationPromise,o.installationEntry});return n.fid===SV?{installationEntry:yield t}:{installationEntry:n,registrationPromise:t}})}function D3e(e){let t=e||{fid:C3e(),registrationStatus:0};return see(t)}function T3e(e,t){if(t.registrationStatus===0){if(!navigator.onLine){let r=Promise.reject(Vf.create("app-offline"));return{installationEntry:t,registrationPromise:r}}let n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=R3e(e,n);return{installationEntry:n,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:I3e(e)}:{installationEntry:t}}function R3e(e,t){return N(this,null,function*(){try{let n=yield m3e(e,t);return _T(e.appConfig,n)}catch(n){throw QJ(n)&&n.customData.serverCode===409?yield oee(e.appConfig):yield _T(e.appConfig,{fid:t.fid,registrationStatus:0}),n}})}function I3e(e){return N(this,null,function*(){let t=yield UJ(e.appConfig);for(;t.registrationStatus===1;)yield tee(100),t=yield UJ(e.appConfig);if(t.registrationStatus===0){let{installationEntry:n,registrationPromise:i}=yield xV(e);return i||n}return t})}function UJ(e){return xT(e,t=>{if(!t)throw Vf.create("installation-not-found");return see(t)})}function see(e){return F3e(e)?{fid:e.fid,registrationStatus:0}:e}function F3e(e){return e.registrationStatus===1&&e.registrationTime+qJ<Date.now()}function A3e(i,r){return N(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},n){let o=M3e(e,n),s=f3e(e,n),a=t.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}let l={installation:{sdkVersion:KJ,appId:e.appId}},c={method:"POST",headers:s,body:JSON.stringify(l)},u=yield eee(()=>fetch(o,c));if(u.ok){let d=yield u.json();return $J(d)}else throw yield ZJ("Generate Auth Token",u)})}function M3e(e,{fid:t}){return`${XJ(e)}/${t}/authTokens:generate`}function DV(e,t=!1){return N(this,null,function*(){let n,i=yield xT(e.appConfig,o=>{if(!aee(o))throw Vf.create("not-registered");let s=o.authToken;if(!t&&O3e(s))return o;if(s.requestStatus===1)return n=P3e(e,t),o;{if(!navigator.onLine)throw Vf.create("app-offline");let a=L3e(o);return n=k3e(e,a),a}});return n?yield n:i.authToken})}function P3e(e,t){return N(this,null,function*(){let n=yield jJ(e.appConfig);for(;n.authToken.requestStatus===1;)yield tee(100),n=yield jJ(e.appConfig);let i=n.authToken;return i.requestStatus===0?DV(e,t):i})}function jJ(e){return xT(e,t=>{if(!aee(t))throw Vf.create("not-registered");let n=t.authToken;return V3e(n)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}function k3e(e,t){return N(this,null,function*(){try{let n=yield A3e(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return yield _T(e.appConfig,i),n}catch(n){if(QJ(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield oee(e.appConfig);else{let i=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});yield _T(e.appConfig,i)}throw n}})}function aee(e){return e!==void 0&&e.registrationStatus===2}function O3e(e){return e.requestStatus===2&&!N3e(e)}function N3e(e){let t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+c3e}function L3e(e){let t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function V3e(e){return e.requestStatus===1&&e.requestTime+qJ<Date.now()}function B3e(e){return N(this,null,function*(){let t=e,{installationEntry:n,registrationPromise:i}=yield xV(t);return i?i.catch(console.error):DV(t).catch(console.error),n.fid})}function G3e(e,t=!1){return N(this,null,function*(){let n=e;return yield H3e(n),(yield DV(n,t)).token})}function H3e(e){return N(this,null,function*(){let{registrationPromise:t}=yield xV(e);t&&(yield t)})}function z3e(e){if(!e||!e.options)throw bV("App Configuration");if(!e.name)throw bV("App Name");let t=["projectId","apiKey","appId"];for(let n of t)if(!e.options[n])throw bV(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function bV(e){return Vf.create("missing-app-config-values",{valueName:e})}var lee="installations",U3e="installations-internal",j3e=e=>{let t=e.getProvider("app").getImmediate(),n=z3e(t),i=Ei(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},W3e=e=>{let t=e.getProvider("app").getImmediate(),n=Ei(t,lee).getImmediate();return{getId:()=>B3e(n),getToken:r=>G3e(n,r)}};function q3e(){jn(new gn(lee,j3e,"PUBLIC")),jn(new gn(U3e,W3e,"PRIVATE"))}q3e();Qe(WJ,_V);Qe(WJ,_V,"esm2017");var DT="analytics",K3e="firebase_id",Y3e="origin",Q3e=60*1e3,X3e="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",PV="https://www.googletagmanager.com/gtag/js";var oo=new La("@firebase/analytics");var $3e={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},as=new Oa("analytics","Analytics",$3e);function Z3e(e){if(!e.startsWith(PV)){let t=as.create("invalid-gtag-resource",{gtagURL:e});return oo.warn(t.message),""}return e}function gee(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function J3e(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function eOe(e,t){let n=J3e("firebase-js-sdk-policy",{createScriptURL:Z3e}),i=document.createElement("script"),r=`${PV}?l=${e}&id=${t}`;i.src=n?n?.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function tOe(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}function nOe(e,t,n,i,r,o){return N(this,null,function*(){let s=i[r];try{if(s)yield t[s];else{let l=(yield gee(n)).find(c=>c.measurementId===r);l&&(yield t[l.appId])}}catch(a){oo.error(a)}e("config",r,o)})}function iOe(e,t,n,i,r){return N(this,null,function*(){try{let o=[];if(r&&r.send_to){let s=r.send_to;Array.isArray(s)||(s=[s]);let a=yield gee(n);for(let l of s){let c=a.find(d=>d.measurementId===l),u=c&&t[c.appId];if(u)o.push(u);else{o=[];break}}}o.length===0&&(o=Object.values(t)),yield Promise.all(o),e("event",i,r||{})}catch(o){oo.error(o)}})}function rOe(e,t,n,i){function r(o,...s){return N(this,null,function*(){try{if(o==="event"){let[a,l]=s;yield iOe(e,t,n,a,l)}else if(o==="config"){let[a,l]=s;yield nOe(e,t,n,i,a,l)}else if(o==="consent"){let[a,l]=s;e("consent",a,l)}else if(o==="get"){let[a,l,c]=s;e("get",a,l,c)}else if(o==="set"){let[a]=s;e("set",a)}else e(o,...s)}catch(a){oo.error(a)}})}return r}function oOe(e,t,n,i,r){let o=function(...s){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(o=window[r]),window[r]=rOe(o,e,t,n),{gtagCore:o,wrappedGtag:window[r]}}function sOe(e){let t=window.document.getElementsByTagName("script");for(let n of Object.values(t))if(n.src&&n.src.includes(PV)&&n.src.includes(e))return n;return null}var aOe=30,lOe=1e3,RV=class{constructor(t={},n=lOe){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}},mee=new RV;function cOe(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function uOe(e){return N(this,null,function*(){var t;let{appId:n,apiKey:i}=e,r={method:"GET",headers:cOe(i)},o=X3e.replace("{app-id}",n),s=yield fetch(o,r);if(s.status!==200&&s.status!==304){let a="";try{let l=yield s.json();!((t=l.error)===null||t===void 0)&&t.message&&(a=l.error.message)}catch{}throw as.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})}function dOe(i){return N(this,arguments,function*(e,t=mee,n){let{appId:r,apiKey:o,measurementId:s}=e.options;if(!r)throw as.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:r};throw as.create("no-api-key")}let a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new IV;return setTimeout(()=>N(this,null,function*(){l.abort()}),n!==void 0?n:Q3e),vee({appId:r,apiKey:o,measurementId:s},a,l,t)})}function vee(o,s,a){return N(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:n},i,r=mee){var l;let{appId:c,measurementId:u}=e;try{yield hOe(i,t)}catch(d){if(u)return oo.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:c,measurementId:u};throw d}try{let d=yield uOe(e);return r.deleteThrottleMetadata(c),d}catch(d){let h=d;if(!fOe(h)){if(r.deleteThrottleMetadata(c),u)return oo.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:c,measurementId:u};throw d}let p=Number((l=h?.customData)===null||l===void 0?void 0:l.httpStatus)===503?rp(n,r.intervalMillis,aOe):rp(n,r.intervalMillis),g={throttleEndTimeMillis:Date.now()+p,backoffCount:n+1};return r.setThrottleMetadata(c,g),oo.debug(`Calling attemptFetch again in ${p} millis`),vee(e,g,i,r)}})}function hOe(e,t){return new Promise((n,i)=>{let r=Math.max(t-Date.now(),0),o=setTimeout(n,r);e.addEventListener(()=>{clearTimeout(o),i(as.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function fOe(e){if(!(e instanceof Qs)||!e.customData)return!1;let t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var IV=class{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}};var FV;function pOe(e,t,n,i,r){return N(this,null,function*(){if(r&&r.global){e("event",n,i);return}else{let o=yield t,s=Object.assign(Object.assign({},i),{send_to:o});e("event",n,s)}})}function gOe(e,t,n,i){return N(this,null,function*(){if(i&&i.global)return e("set",{user_id:n}),Promise.resolve();{let r=yield t;e("config",r,{update:!0,user_id:n})}})}var AV;function mOe(e){AV=e}function vOe(e){FV=e}function yOe(){return N(this,null,function*(){if(cs())try{yield Dd()}catch(e){return oo.warn(as.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}else return oo.warn(as.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function COe(e,t,n,i,r,o,s){return N(this,null,function*(){var a;let l=dOe(e);l.then(p=>{n[p.measurementId]=p.appId,e.options.measurementId&&p.measurementId!==e.options.measurementId&&oo.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>oo.error(p)),t.push(l);let c=yOe().then(p=>{if(p)return i.getId()}),[u,d]=yield Promise.all([l,c]);sOe(o)||eOe(o,u.measurementId),AV&&(r("consent","default",AV),mOe(void 0)),r("js",new Date);let h=(a=s?.config)!==null&&a!==void 0?a:{};return h[Y3e]="firebase",h.update=!0,d!=null&&(h[K3e]=d),r("config",u.measurementId,h),FV&&(r("set",FV),vOe(void 0)),u.measurementId})}var MV=class{constructor(t){this.app=t}_delete(){return delete ov[this.app.options.appId],Promise.resolve()}},ov={},cee=[],uee={},TV="dataLayer",wOe="gtag",dee,kV,hee=!1;function bOe(){let e=[];if(gR()&&e.push("This is a browser extension environment."),Hv()||e.push("Cookies are not available."),e.length>0){let t=e.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=as.create("invalid-analytics-context",{errorInfo:t});oo.warn(n.message)}}function SOe(e,t,n){bOe();let i=e.options.appId;if(!i)throw as.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)oo.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw as.create("no-api-key");if(ov[i]!=null)throw as.create("already-exists",{id:i});if(!hee){tOe(TV);let{wrappedGtag:o,gtagCore:s}=oOe(ov,cee,uee,TV,wOe);kV=o,dee=s,hee=!0}return ov[i]=COe(e,cee,uee,t,dee,TV,n),new MV(e)}function yee(e=Vi()){e=tt(e);let t=Ei(e,DT);return t.isInitialized()?t.getImmediate():Cee(e)}function Cee(e,t={}){let n=Ei(e,DT);if(n.isInitialized()){let r=n.getImmediate();if(Uv(t,n.getOptions()))return r;throw as.create("already-initialized")}return n.initialize({options:t})}function wee(){return N(this,null,function*(){if(gR()||!Hv()||!cs())return!1;try{return yield Dd()}catch{return!1}})}function bee(e,t,n){e=tt(e),gOe(kV,ov[e.app.options.appId],t,n).catch(i=>oo.error(i))}function OV(e,t,n,i){e=tt(e),pOe(kV,ov[e.app.options.appId],t,n,i).catch(r=>oo.error(r))}var fee="@firebase/analytics",pee="0.10.8";function _Oe(){jn(new gn(DT,(t,{options:n})=>{let i=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();return SOe(i,r,n)},"PUBLIC")),jn(new gn("analytics-internal",e,"PRIVATE")),Qe(fee,pee),Qe(fee,pee,"esm2017");function e(t){try{let n=t.getProvider(DT).getImmediate();return{logEvent:(i,r,o)=>OV(n,i,r,o)}}catch(n){throw as.create("interop-component-reg-failed",{reason:n})}}}_Oe();var Gf=class{constructor(t){return t}},Eee="analytics",LV=class{constructor(){return ir(Eee)}};var VV="__angularfire_symbol__analyticsIsSupportedValue",xee="__angularfire_symbol__analyticsIsSupported";globalThis[xee]||=wee().then(e=>globalThis[VV]=e).catch(()=>globalThis[VV]=!1);var TT={async:()=>globalThis[xee],sync:()=>{let e=globalThis[VV];if(e===void 0)throw new Error(tg("Analytics"));return e}},Dee=TT.async,Tee=It(yee,!0);var EOe=It(OV,!0);var xOe=It(bee,!0);var GV=(()=>{class e{initialized;disposables=[];constructor(n,i,r){Qe("angularfire",Fn.full,"user-tracking");let o;this.initialized=i.runOutsideAngular(()=>new Promise(s=>{o=s})),Dee().then(()=>{let s=r.get(Gf);s?this.disposables=[ng(n).subscribe(a=>{xOe(s,a?.uid),o()})]:o()})}ngOnDestroy(){this.disposables.forEach(n=>n.unsubscribe())}static \u0275fac=function(i){return new(i||e)($(Ko),$(De),$(bt))};static \u0275prov=oe({token:e,factory:e.\u0275fac})}return e})(),DOe="firebase_event_origin",TOe="firebase_previous_class",ROe="firebase_previous_id",IOe="firebase_previous_screen",FOe="firebase_screen_class",See="firebase_screen_id",AOe="firebase_screen",BV="outlet",MOe="page_path",POe="page_title",zw="screen_class",_ee="screen_name",kOe="screen_view",OOe="auto",NOe="#",LOe=Math.floor(Math.random()*(2**32-1))-2**31,NV={},VOe=e=>{let t=[e[zw],e[BV]].join(NOe);if(NV.hasOwnProperty(t))return NV[t];{let n=LOe++;return NV[t]=n,n}},BOe=(e,t,n)=>e.events.pipe(xt(r=>r instanceof V0)).pipe(Ne(r=>{let s=e.parseUrl(e.url.replace(/(?:\().+(?:\))/g,h=>h.replace("://",":///"))).root.children[r.snapshot.outlet]?.toString()||"",a=e.routerState.root.children.map(h=>h).find(h=>h.outlet===r.snapshot.outlet);if(!a)return se(null);let l=a;for(;l.firstChild;)l=l.firstChild;let c=l.pathFromRoot.map(h=>h.routeConfig?.path).filter(h=>h).join("/")||"/",u={[_ee]:c,[MOe]:`/${s}`,[DOe]:OOe,[AOe]:c,[BV]:r.snapshot.outlet};t&&(u[POe]=t.getTitle());let d=a.component;if(d){if(d===hM){let h=r.snapshot;for(;h.firstChild;)h=h.firstChild;d=h.component}}else d=r.snapshot.component;if(typeof d=="string")return se(pe(B({},u),{[zw]:d}));if(d){let h=n.resolveComponentFactory(d);return se(pe(B({},u),{[zw]:h.selector}))}return se(null)}),xt(r=>!!r),ae(r=>B({[FOe]:r[zw],[See]:VOe(r)},r)),zR(r=>r[BV]),un(r=>r.pipe(Ba((o,s)=>JSON.stringify(o)===JSON.stringify(s)),Js(void 0),qc(),ae(([o,s])=>o?B({[TOe]:o[zw],[IOe]:o[_ee],[ROe]:o[See]},s):s)))),Ree=(()=>{class e{disposable;constructor(n,i,r,o,s,a){Qe("angularfire",Fn.full,"screen-tracking"),Dee().then(()=>{let l=a.get(Gf);!n||!l||o.runOutsideAngular(()=>{this.disposable=BOe(n,i,r).pipe(Ne(c=>N(this,null,function*(){return s&&(yield s.initialized),EOe(l,kOe,c)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(i){return new(i||e)($(pi,8),$(K1,8),$(Op),$(De),$(GV,8),$(bt))};static \u0275prov=oe({token:e,factory:e.\u0275fac})}return e})(),HV=new ce("angularfire2.analytics-instances");function GOe(e,t){if(!TT.sync())return null;let n=mr(Eee,e,t);return n&&new Gf(n)}function HOe(e){return(t,n)=>{if(!TT.sync())return null;let i=t.runOutsideAngular(()=>e(n));return new Gf(i)}}var zOe={provide:LV,deps:[[new gt,HV]]},UOe={provide:Gf,useFactory:GOe,deps:[[new gt,HV],ti]};function Iee(e,...t){return Qe("angularfire",Fn.full,"analytics"),hn([UOe,zOe,{provide:Ya,useValue:TT.async,multi:!0},{provide:HV,useFactory:HOe(e),multi:!0,deps:[De,bt,An,Ri,...t]}])}var Fee="@firebase/database",Aee="1.0.8";var B6="";function jOe(e){B6=e}var QV=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Li(n))}get(t){let n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:Ob(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var XV=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Na(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var cte=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new QV(t)}}catch{}return new XV},zf=cte("localStorage"),$V=cte("sessionStorage");var cv=new La("@firebase/database"),WOe=function(){let e=1;return function(){return e++}}(),ute=function(e){let t=O4(e),n=new P4;n.update(t);let i=n.digest();return kb.encodeByteArray(i)},tb=function(...e){let t="";for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=tb.apply(null,i):typeof i=="object"?t+=Li(i):t+=i,t+=" "}return t},Uf=null,Mee=!0,qOe=function(e,t){Ce(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(cv.logLevel=lo.VERBOSE,Uf=cv.log.bind(cv),t&&$V.set("logging_enabled",!0)):typeof e=="function"?Uf=e:(Uf=null,$V.remove("logging_enabled"))},Tr=function(...e){if(Mee===!0&&(Mee=!1,Uf===null&&$V.get("logging_enabled")===!0&&qOe(!0)),Uf){let t=tb.apply(null,e);Uf(t)}},nb=function(e){return function(...t){Tr(e,...t)}},ZV=function(...e){let t="FIREBASE INTERNAL ERROR: "+tb(...e);cv.error(t)},Fc=function(...e){let t=`FIREBASE FATAL ERROR: ${tb(...e)}`;throw cv.error(t),new Error(t)},ls=function(...e){let t="FIREBASE WARNING: "+tb(...e);cv.warn(t)},KOe=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&ls("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},dte=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},YOe=function(e){if(ka()||document.readyState==="complete")e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},dv="[MIN_NAME]",jf="[MAX_NAME]",yv=function(e,t){if(e===t)return 0;if(e===dv||t===jf)return-1;if(t===dv||e===jf)return 1;{let n=Pee(e),i=Pee(t);return n!==null?i!==null?n-i===0?e.length-t.length:n-i:-1:i!==null?1:e<t?-1:1}},QOe=function(e,t){return e===t?0:e<t?-1:1},Uw=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Li(t))},G6=function(e){if(typeof e!="object"||e===null)return Li(e);let t=[];for(let i in e)t.push(i);t.sort();let n="{";for(let i=0;i<t.length;i++)i!==0&&(n+=","),n+=Li(t[i]),n+=":",n+=G6(e[t[i]]);return n+="}",n},hte=function(e,t){let n=e.length;if(n<=t)return[e];let i=[];for(let r=0;r<n;r+=t)r+t>n?i.push(e.substring(r,n)):i.push(e.substring(r,r+t));return i};function js(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var fte=function(e){Ce(!dte(e),"Invalid JSON number");let t=11,n=52,i=(1<<t-1)-1,r,o,s,a,l;e===0?(o=0,s=0,r=1/e===-1/0?1:0):(r=e<0,e=Math.abs(e),e>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),i),o=a+i,s=Math.round(e*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(e/Math.pow(2,1-i-n))));let c=[];for(l=n;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);for(l=t;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);c.push(r?1:0),c.reverse();let u=c.join(""),d="";for(l=0;l<64;l+=8){let h=parseInt(u.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},XOe=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},$Oe=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var ZOe=new RegExp("^-?(0*)\\d{1,10}$"),JOe=-2147483648,eNe=2147483647,Pee=function(e){if(ZOe.test(e)){let t=Number(e);if(t>=JOe&&t<=eNe)return t}return null},ib=function(e){try{e()}catch(t){setTimeout(()=>{let n=t.stack||"";throw ls("Exception was thrown by user callback.",n),t},Math.floor(0))}},tNe=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Yw=function(e,t){let n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var JV=class{constructor(t,n){this.appName_=t,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){ls(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var e6=class{constructor(t,n,i){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(Tr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ls(t)}},Qw=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),IT="5",pte="v",gte="s",mte="r",vte="f",yte=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Cte="ls",wte="p",t6="ac",bte="websocket",Ste="long_polling";var FT=class{constructor(t,n,i,r,o=!1,s="",a=!1,l=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=zf.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&zf.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}};function nNe(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function _te(e,t,n){Ce(typeof t=="string","typeof type must == string"),Ce(typeof n=="object","typeof params must == object");let i;if(t===bte)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===Ste)i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);nNe(e)&&(n.ns=e.namespace);let r=[];return js(n,(o,s)=>{r.push(o+"="+s)}),i+r.join("&")}var n6=class{constructor(){this.counters_={}}incrementCounter(t,n=1){Na(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return R4(this.counters_)}};var zV={},UV={};function H6(e){let t=e.toString();return zV[t]||(zV[t]=new n6),zV[t]}function iNe(e,t){let n=e.toString();return UV[n]||(UV[n]=t()),UV[n]}var i6=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&ib(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var kee="start",rNe="close",oNe="pLPCommand",sNe="pRTLPCB",Ete="id",xte="pw",Dte="ser",aNe="cb",lNe="seg",cNe="ts",uNe="d",dNe="dframe",Tte=1870,Rte=30,hNe=Tte-Rte,fNe=25e3,pNe=3e4,r6=class e{constructor(t,n,i,r,o,s,a){this.connId=t,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=nb(t),this.stats_=H6(n),this.urlFn=l=>(this.appCheckToken&&(l[t6]=this.appCheckToken),_te(n,Ste,l))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new i6(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(pNe)),YOe(()=>{if(this.isClosed_)return;this.scriptTagHolder=new o6((...o)=>{let[s,a,l,c,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===kee)this.id=a,this.password=l;else if(s===rNe)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[kee]="t",i[Dte]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[aNe]=this.scriptTagHolder.uniqueCallbackIdentifier),i[pte]=IT,this.transportSessionId&&(i[gte]=this.transportSessionId),this.lastSessionId&&(i[Cte]=this.lastSessionId),this.applicationId&&(i[wte]=this.applicationId),this.appCheckToken&&(i[t6]=this.appCheckToken),typeof location<"u"&&location.hostname&&yte.test(location.hostname)&&(i[mte]=vte);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return ka()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!XOe()&&!$Oe()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let n=Li(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let i=T4(n),r=hte(i,hNe);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if(ka())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[dNe]="t",i[Ete]=t,i[xte]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let n=Li(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},o6=class e{constructor(t,n,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,ka())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=WOe(),window[oNe+this.uniqueCallbackIdentifier]=t,window[sNe+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Tr("frame writing exception"),a.stack&&Tr(a.stack),Tr(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Tr("No IE domain setting required")}catch{let i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[Ete]=this.myID,t[xte]=this.myPW,t[Dte]=this.currentSerial;let n=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Rte+i.length<=Tte;){let s=this.pendingSegs.shift();i=i+"&"+lNe+r+"="+s.seg+"&"+cNe+r+"="+s.ts+"&"+uNe+r+"="+s.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,i){this.pendingSegs.push({seg:t,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);let i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(fNe)),o=()=>{clearTimeout(r),i()};this.addTag(t,o)}addTag(t,n){ka()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Tr("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var gNe=16384,mNe=45e3,AT=null;typeof MozWebSocket<"u"?AT=MozWebSocket:typeof WebSocket<"u"&&(AT=WebSocket);var jw=(()=>{class e{constructor(n,i,r,o,s,a,l){this.connId=n,this.applicationId=r,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=nb(this.connId),this.stats_=H6(i),this.connURL=e.connectionURL_(i,a,l,o,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(n,i,r,o,s){let a={};return a[pte]=IT,!ka()&&typeof location<"u"&&location.hostname&&yte.test(location.hostname)&&(a[mte]=vte),i&&(a[gte]=i),r&&(a[Cte]=r),o&&(a[t6]=o),s&&(a[wte]=s),_te(n,bte,a)}open(n,i){this.onDisconnect=i,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,zf.set("previous_websocket_failure",!0);try{let r;if(ka()){let o=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${IT}/${B6}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new AT(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let o=r.message||r.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let o=r.message||r.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(n=!0)}return!n&&AT!==null&&!e.forceDisallow_}static previouslyFailed(){return zf.isInMemoryStorage||zf.get("previous_websocket_failure")===!0}markConnectionHealthy(){zf.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=Ob(i);this.onMessage(r)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(Ce(this.frames===null,"We already have a frame buffer"),n.length<=6){let i=Number(n);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let i=n.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(n){this.resetKeepAlive();let i=Li(n);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=hte(i,gNe);r.length>1&&this.sendString_(String(r.length));for(let o=0;o<r.length;o++)this.sendString_(r[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(mNe))}sendString_(n){try{this.mySock.send(n)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),vNe=(()=>{class e{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[r6,jw]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let i=jw&&jw.isAvailable(),r=i&&!jw.previouslyFailed();if(n.webSocketOnly&&(i||ls("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[jw];else{let o=this.transports_=[];for(let s of e.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),yNe=6e4,CNe=5e3,wNe=10*1024,bNe=100*1024,jV="t",Oee="d",SNe="s",Nee="r",_Ne="e",Lee="o",Vee="a",Bee="n",Gee="p",ENe="h",s6=class{constructor(t,n,i,r,o,s,a,l,c,u){this.id=t,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=nb("c:"+this.id+":"),this.transportManager_=new vNe(n),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));let r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=Yw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>bNe?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>wNe?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){let n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(jV in t){let n=t[jV];n===Vee?this.upgradeIfSecondaryHealthy_():n===Nee?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Lee&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let n=Uw("t",t),i=Uw("d",t);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Gee,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Vee,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Bee,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let n=Uw("t",t),i=Uw("d",t);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let n=Uw(jV,t);if(Oee in t){let i=t[Oee];if(n===ENe){let r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===Bee){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===SNe?this.onConnectionShutdown_(i):n===Nee?this.onReset_(i):n===_Ne?ZV("Server Error: "+i):n===Lee?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ZV("Unknown control packet command: "+n)}}onHandshake_(t){let n=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),IT!==i&&ls("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Yw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(yNe))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Yw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(CNe))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Gee,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(zf.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var MT=class{put(t,n,i,r){}merge(t,n,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,i){}onDisconnectMerge(t,n,i){}onDisconnectCancel(t,n){}reportStats(t){}};var PT=class{constructor(t){this.allowedEvents_=t,this.listeners_={},Ce(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){let i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(t,n,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:i});let r=this.getInitialEvent(t);r&&n.apply(i,r)}off(t,n,i){this.validateEventType_(t);let r=this.listeners_[t]||[];for(let o=0;o<r.length;o++)if(r[o].callback===n&&(!i||i===r[o].context)){r.splice(o,1);return}}validateEventType_(t){Ce(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}};var kT=class e extends PT{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!pR()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new e}getInitialEvent(t){return Ce(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var Hee=32,zee=768,pn=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function an(){return new pn("")}function zt(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Cd(e){return e.pieces_.length-e.pieceNum_}function Rn(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new pn(e.pieces_,t)}function Ite(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function xNe(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function Fte(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function Ate(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new pn(t,0)}function Ki(e,t){let n=[];for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);if(t instanceof pn)for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{let i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new pn(n,0)}function Lt(e){return e.pieceNum_>=e.pieces_.length}function zs(e,t){let n=zt(e),i=zt(t);if(n===null)return t;if(n===i)return zs(Rn(e),Rn(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Mte(e,t){if(Cd(e)!==Cd(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function Ia(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(Cd(e)>Cd(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}var a6=class{constructor(t,n){this.errorPrefix_=n,this.parts_=Fte(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=jv(this.parts_[i]);Pte(this)}};function DNe(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=jv(t),Pte(e)}function TNe(e){let t=e.parts_.pop();e.byteLength_-=jv(t),e.parts_.length>0&&(e.byteLength_-=1)}function Pte(e){if(e.byteLength_>zee)throw new Error(e.errorPrefix_+"has a key path longer than "+zee+" bytes ("+e.byteLength_+").");if(e.parts_.length>Hee)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Hee+") or object contains a cycle "+Hf(e))}function Hf(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var l6=class e extends PT{constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new e}getInitialEvent(t){return Ce(t==="visible","Unknown event type: "+t),[this.visible_]}};var Ww=1e3,RNe=60*5*1e3,Uee=30*1e3,INe=1.3,FNe=3e4,ANe="server_kill",jee=3,z6=(()=>{class e extends MT{constructor(n,i,r,o,s,a,l,c){if(super(),this.repoInfo_=n,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=e.nextPersistentConnectionId_++,this.log_=nb("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ww,this.maxReconnectDelay_=RNe,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!ka())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");l6.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&kT.getInstance().on("online",this.onOnline_,this)}sendRequest(n,i,r){let o=++this.requestNumber_,s={r:o,a:n,b:i};this.log_(Li(s)),Ce(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[o]=r)}get(n){this.initConnection_();let i=new np,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?i.resolve(l):i.reject(l)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),i.promise}listen(n,i,r,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),Ce(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Ce(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let l={onComplete:o,hashFn:i,query:n,tag:r};this.listens.get(a).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(n){let i=this.outstandingGets_[n];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(n){let i=n.query,r=i._path.toString(),o=i._queryIdentifier;this.log_("Listen on "+r+" for "+o);let s={p:r},a="q";n.tag&&(s.q=i._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,l=>{let c=l.d,u=l.s;e.warnOnListenWarnings_(c,i),(this.listens.get(r)&&this.listens.get(r).get(o))===n&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,o),n.onComplete&&n.onComplete(u,c))})}static warnOnListenWarnings_(n,i){if(n&&typeof n=="object"&&Na(n,"w")){let r=Td(n,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let o='".indexOn": "'+i._queryParams.getIndex().toString()+'"',s=i._path.toString();ls(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||A4(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Uee)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,i=F4(n)?"auth":"gauth",r={cred:n};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let i=n.s,r=n.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(n,i){let r=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+r+" "+o),Ce(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,o)&&this.connected_&&this.sendUnlisten_(r,o,n._queryObject,i)}sendUnlisten_(n,i,r,o){this.log_("Unlisten on "+n+" for "+i);let s={p:n},a="n";o&&(s.q=r,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:i,onComplete:r})}onDisconnectMerge(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:i,onComplete:r})}onDisconnectCancel(n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(n,i,r,o){let s={p:i,d:r};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,i,r,o){this.putInternal("p",n,i,r,o)}merge(n,i,r,o){this.putInternal("m",n,i,r,o)}putInternal(n,i,r,o,s){this.initConnection_();let a={p:i,d:r};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+i)}sendPut_(n){let i=this.outstandingPuts_[n].action,r=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,r,s=>{this.log_(i+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Li(n));let i=n.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,i){this.log_("handleServerMessage",n,i),n==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):n==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):n==="c"?this.onListenRevoked_(i.p,i.q):n==="ac"?this.onAuthRevoked_(i.s,i.d):n==="apc"?this.onAppCheckRevoked_(i.s,i.d):n==="sd"?this.onSecurityDebugPacket_(i):ZV("Unrecognized action received from server: "+Li(n)+`
Are you using the latest client?`)}onReady_(n,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){Ce(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ww,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Ww,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>FNe&&(this.reconnectDelay_=Ww),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-n);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*INe)}this.onConnectStatus_(!1)}establishConnection_(){return N(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,a=!1,l=null,c=function(){l?l.close():(a=!0,r())},u=function(h){Ce(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(h)};this.realtime_={close:c,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,p]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Tr("getToken() completed but was canceled"):(Tr("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=p&&p.token,l=new s6(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,i,r,g=>{ls(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(ANe)},s))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&ls(h),c())}}})}interrupt(n){Tr("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Tr("Resuming connection for reason: "+n),delete this.interruptReasons_[n],vR(this.interruptReasons_)&&(this.reconnectDelay_=Ww,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let i=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let i=this.outstandingPuts_[n];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,i){let r;i?r=i.map(s=>G6(s)).join("$"):r="default";let o=this.removeListen_(n,r);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,i){let r=new pn(n).toString(),o;if(this.listens.has(r)){let s=this.listens.get(r);o=s.get(i),s.delete(i),s.size===0&&this.listens.delete(r)}else o=void 0;return o}onAuthRevoked_(n,i){Tr("Auth token revoked: "+n+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=jee&&(this.reconnectDelay_=Uee,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,i){Tr("App check token revoked: "+n+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=jee&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let i of n.values())this.sendListen_(i);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},i="js";ka()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),n["sdk."+i+"."+B6.replace(/\./g,"-")]=1,pR()?n["framework.cordova"]=1:I4()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=kT.getInstance().currentlyOnline();return vR(this.interruptReasons_)&&n}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),Ut=class e{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new e(t,n)}};var hv=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){let i=new Ut(dv,t),r=new Ut(dv,n);return this.compare(i,r)!==0}minPost(){return Ut.MIN}};var RT,OT=class extends hv{static get __EMPTY_NODE(){return RT}static set __EMPTY_NODE(t){RT=t}compare(t,n){return yv(t.name,n.name)}isDefinedOn(t){throw tp("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return Ut.MIN}maxPost(){return new Ut(jf,RT)}makePost(t,n){return Ce(typeof t=="string","KeyIndex indexValue must always be a string."),new Ut(t,RT)}toString(){return".key"}},uv=new OT;var av=class{constructor(t,n,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(t=t,s=n?i(t.key,n):1,r&&(s*=-1),s<0)this.isReverse_?t=t.left:t=t.right;else if(s===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},Ra=(()=>{class e{constructor(n,i,r,o,s){this.key=n,this.value=i,this.color=r??e.RED,this.left=o??Us.EMPTY_NODE,this.right=s??Us.EMPTY_NODE}copy(n,i,r,o,s){return new e(n??this.key,i??this.value,r??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,i,r){let o=this,s=r(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,i,r),null):s===0?o=o.copy(null,i,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,i,r)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Us.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,i){let r,o;if(r=this,i(n,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(n,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(n,r.key)===0){if(r.right.isEmpty())return Us.EMPTY_NODE;o=r.right.min_(),r=r.copy(o.key,o.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(n,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,i)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),c6=class{copy(t,n,i,r,o){return this}insert(t,n,i){return new Ra(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Us=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Ra.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Ra.BLACK,null,null))}get(t){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(t,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(t){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(t,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new av(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new av(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new av(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new av(this.root_,null,this.comparator_,!0,t)}};Us.EMPTY_NODE=new c6;function MNe(e,t){return yv(e.name,t.name)}function U6(e,t){return yv(e,t)}var u6;function PNe(e){u6=e}var kte=function(e){return typeof e=="number"?"number:"+fte(e):"string:"+e},Ote=function(e){if(e.isLeafNode()){let t=e.val();Ce(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Na(t,".sv"),"Priority must be a string or number.")}else Ce(e===u6||e.isEmpty(),"priority of unexpected type.");Ce(e===u6||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var Wee,fv=(()=>{class e{constructor(n,i=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=i,this.lazyHash_=null,Ce(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Ote(this.priorityNode_)}static set __childrenNodeConstructor(n){Wee=n}static get __childrenNodeConstructor(){return Wee}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return Lt(n)?this:zt(n)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,i){return null}updateImmediateChild(n,i){return n===".priority"?this.updatePriority(i):i.isEmpty()&&n!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,i).updatePriority(this.priorityNode_)}updateChild(n,i){let r=zt(n);return r===null?i:i.isEmpty()&&r!==".priority"?this:(Ce(r!==".priority"||Cd(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Rn(n),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,i){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+kte(this.priorityNode_.val())+":");let i=typeof this.value_;n+=i+":",i==="number"?n+=fte(this.value_):n+=this.value_,this.lazyHash_=ute(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(Ce(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let i=typeof n.value_,r=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(i),s=e.VALUE_TYPE_ORDER.indexOf(r);return Ce(o>=0,"Unknown leaf type: "+i),Ce(s>=0,"Unknown leaf type: "+r),o===s?r==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let i=n;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),Nte,Lte;function kNe(e){Nte=e}function ONe(e){Lte=e}var d6=class extends hv{compare(t,n){let i=t.node.getPriority(),r=n.node.getPriority(),o=i.compareTo(r);return o===0?yv(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return Ut.MIN}maxPost(){return new Ut(jf,new fv("[PRIORITY-POST]",Lte))}makePost(t,n){let i=Nte(t);return new Ut(n,new fv("[PRIORITY-POST]",i))}toString(){return".priority"}},Ir=new d6;var NNe=Math.log(2),h6=class{constructor(t){let n=o=>parseInt(Math.log(o)/NNe,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;let r=i(this.count);this.bits_=t+1&r}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},NT=function(e,t,n,i){e.sort(t);let r=function(l,c){let u=c-l,d,h;if(u===0)return null;if(u===1)return d=e[l],h=n?n(d):d,new Ra(h,d.node,Ra.BLACK,null,null);{let p=parseInt(u/2,10)+l,g=r(l,p),m=r(p+1,c);return d=e[p],h=n?n(d):d,new Ra(h,d.node,Ra.BLACK,g,m)}},o=function(l){let c=null,u=null,d=e.length,h=function(g,m){let v=d-g,C=d;d-=g;let S=r(v+1,C),_=e[v],D=n?n(_):_;p(new Ra(D,_.node,m,null,S))},p=function(g){c?(c.left=g,c=g):(u=g,c=g)};for(let g=0;g<l.count;++g){let m=l.nextBitIsOne(),v=Math.pow(2,l.count-(g+1));m?h(v,Ra.BLACK):(h(v,Ra.BLACK),h(v,Ra.RED))}return u},s=new h6(e.length),a=o(s);return new Us(i||t,a)};var WV,sv={},pv=class e{constructor(t,n){this.indexes_=t,this.indexSet_=n}static get Default(){return Ce(sv&&Ir,"ChildrenNode.ts has not been loaded"),WV=WV||new e({".priority":sv},{".priority":Ir}),WV}get(t){let n=Td(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof Us?n:null}hasIndex(t){return Na(this.indexSet_,t.toString())}addIndex(t,n){Ce(t!==uv,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,o=n.getIterator(Ut.Wrap),s=o.getNext();for(;s;)r=r||t.isDefinedOn(s.node),i.push(s),s=o.getNext();let a;r?a=NT(i,t.getCompare()):a=sv;let l=t.toString(),c=Object.assign({},this.indexSet_);c[l]=t;let u=Object.assign({},this.indexes_);return u[l]=a,new e(u,c)}addToIndexes(t,n){let i=zv(this.indexes_,(r,o)=>{let s=Td(this.indexSet_,o);if(Ce(s,"Missing index implementation for "+o),r===sv)if(s.isDefinedOn(t.node)){let a=[],l=n.getIterator(Ut.Wrap),c=l.getNext();for(;c;)c.name!==t.name&&a.push(c),c=l.getNext();return a.push(t),NT(a,s.getCompare())}else return sv;else{let a=n.get(t.name),l=r;return a&&(l=l.remove(new Ut(t.name,a))),l.insert(t,t.node)}});return new e(i,this.indexSet_)}removeFromIndexes(t,n){let i=zv(this.indexes_,r=>{if(r===sv)return r;{let o=n.get(t.name);return o?r.remove(new Ut(t.name,o)):r}});return new e(i,this.indexSet_)}};var qw,zn=(()=>{class e{constructor(n,i,r){this.children_=n,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Ote(this.priorityNode_),this.children_.isEmpty()&&Ce(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return qw||(qw=new e(new Us(U6),null,pv.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||qw}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let i=this.children_.get(n);return i===null?qw:i}}getChild(n){let i=zt(n);return i===null?this:this.getImmediateChild(i).getChild(Rn(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,i){if(Ce(i,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(i);{let r=new Ut(n,i),o,s;i.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(n,i),s=this.indexMap_.addToIndexes(r,this.children_));let a=o.isEmpty()?qw:this.priorityNode_;return new e(o,a,s)}}updateChild(n,i){let r=zt(n);if(r===null)return i;{Ce(zt(n)!==".priority"||Cd(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(r).updateChild(Rn(n),i);return this.updateImmediateChild(r,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let i={},r=0,o=0,s=!0;if(this.forEachChild(Ir,(a,l)=>{i[a]=l.val(n),r++,s&&e.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*r){let a=[];for(let l in i)a[l]=i[l];return a}else return n&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+kte(this.getPriority().val())+":"),this.forEachChild(Ir,(i,r)=>{let o=r.hash();o!==""&&(n+=":"+i+":"+o)}),this.lazyHash_=n===""?"":ute(n)}return this.lazyHash_}getPredecessorChildName(n,i,r){let o=this.resolveIndex_(r);if(o){let s=o.getPredecessorKey(new Ut(n,i));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let i=this.resolveIndex_(n);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(n){let i=this.getFirstChildName(n);return i?new Ut(i,this.children_.get(i)):null}getLastChildName(n){let i=this.resolveIndex_(n);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(n){let i=this.getLastChildName(n);return i?new Ut(i,this.children_.get(i)):null}forEachChild(n,i){let r=this.resolveIndex_(n);return r?r.inorderTraversal(o=>i(o.name,o.node)):this.children_.inorderTraversal(i)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,Ut.Wrap),s=o.peek();for(;s!=null&&i.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,Ut.Wrap),s=o.peek();for(;s!=null&&i.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===rb?-1:0}withIndex(n){if(n===uv||this.indexMap_.hasIndex(n))return this;{let i=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,i)}}isIndexed(n){return n===uv||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let i=n;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator(Ir),o=i.getIterator(Ir),s=r.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=r.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===uv?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),f6=class extends zn{constructor(){super(new Us(U6),zn.EMPTY_NODE,pv.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return zn.EMPTY_NODE}isEmpty(){return!1}},rb=new f6;Object.defineProperties(Ut,{MIN:{value:new Ut(dv,zn.EMPTY_NODE)},MAX:{value:new Ut(jf,rb)}});OT.__EMPTY_NODE=zn.EMPTY_NODE;fv.__childrenNodeConstructor=zn;PNe(rb);ONe(rb);var LNe=!0;function Rr(e,t=null){if(e===null)return zn.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),Ce(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let n=e;return new fv(n,Rr(t))}if(!(e instanceof Array)&&LNe){let n=[],i=!1;if(js(e,(s,a)=>{if(s.substring(0,1)!=="."){let l=Rr(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),n.push(new Ut(s,l)))}}),n.length===0)return zn.EMPTY_NODE;let o=NT(n,MNe,s=>s.name,U6);if(i){let s=NT(n,Ir.getCompare());return new zn(o,Rr(t),new pv({".priority":s},{".priority":Ir}))}else return new zn(o,Rr(t),pv.Default)}else{let n=zn.EMPTY_NODE;return js(e,(i,r)=>{if(Na(e,i)&&i.substring(0,1)!=="."){let o=Rr(r);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(i,o))}}),n.updatePriority(Rr(t))}}kNe(Rr);var p6=class extends hv{constructor(t){super(),this.indexPath_=t,Ce(!Lt(t)&&zt(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){let i=this.extractChild(t.node),r=this.extractChild(n.node),o=i.compareTo(r);return o===0?yv(t.name,n.name):o}makePost(t,n){let i=Rr(t),r=zn.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ut(n,r)}maxPost(){let t=zn.EMPTY_NODE.updateChild(this.indexPath_,rb);return new Ut(jf,t)}toString(){return Fte(this.indexPath_,0).join("/")}};var g6=class extends hv{compare(t,n){let i=t.node.compareTo(n.node);return i===0?yv(t.name,n.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return Ut.MIN}maxPost(){return Ut.MAX}makePost(t,n){let i=Rr(t);return new Ut(n,i)}toString(){return".value"}},VNe=new g6;function BNe(e){return{type:"value",snapshotNode:e}}function GNe(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function HNe(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function qee(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function zNe(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var m6=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ir}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Ce(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Ce(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:dv}hasEnd(){return this.endSet_}getIndexEndValue(){return Ce(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Ce(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:jf}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Ce(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ir}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function Kee(e){let t={};if(e.isDefault())return t;let n;if(e.index_===Ir?n="$priority":e.index_===VNe?n="$value":e.index_===uv?n="$key":(Ce(e.index_ instanceof p6,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Li(n),e.startSet_){let i=e.startAfterSet_?"startAfter":"startAt";t[i]=Li(e.indexStartValue_),e.startNameSet_&&(t[i]+=","+Li(e.indexStartName_))}if(e.endSet_){let i=e.endBeforeSet_?"endBefore":"endAt";t[i]=Li(e.indexEndValue_),e.endNameSet_&&(t[i]+=","+Li(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Yee(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==Ir&&(t.i=e.index_.toString()),t}var v6=class e extends MT{constructor(t,n,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=nb("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(Ce(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,n,i,r){let o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);let s=e.getListenId_(t,i),a={};this.listens_[s]=a;let l=Kee(t._queryParams);this.restRequest_(o+".json",l,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(o,d,!1,i),Td(this.listens_,s)===a){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",r(h,null)}})}unlisten(t,n){let i=e.getListenId_(t,n);delete this.listens_[i]}get(t){let n=Kee(t._queryParams),i=t._path.toString(),r=new np;return this.restRequest_(i+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(t){}restRequest_(t,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(n.auth=r.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+M4(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=Ob(a.responseText)}catch{ls("Failed to parse JSON response for "+s+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&ls("Got unsuccessful REST response for "+s+" Status: "+a.status),i(a.status);i=null}},a.open("GET",s,!0),a.send()})}};var y6=class{constructor(){this.rootNode_=zn.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}};function LT(){return{value:null,children:new Map}}function Vte(e,t,n){if(Lt(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let i=zt(t);e.children.has(i)||e.children.set(i,LT());let r=e.children.get(i);t=Rn(t),Vte(r,t,n)}}function C6(e,t,n){e.value!==null?n(t,e.value):UNe(e,(i,r)=>{let o=new pn(t.toString()+"/"+i);C6(r,o,n)})}function UNe(e,t){e.children.forEach((n,i)=>{t(i,n)})}var w6=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),n=Object.assign({},t);return this.last_&&js(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=t,n}};var Qee=10*1e3,jNe=30*1e3,WNe=5*60*1e3,b6=class{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new w6(t);let i=Qee+(jNe-Qee)*Math.random();Yw(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let t=this.statsListener_.get(),n={},i=!1;js(t,(r,o)=>{o>0&&Na(this.statsToReport_,r)&&(n[r]=o,i=!0)}),i&&this.server_.reportStats(n),Yw(this.reportStats_.bind(this),Math.floor(Math.random()*2*WNe))}};var Ic=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(Ic||{});function Bte(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Gte(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Hte(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var S6=class e{constructor(t,n,i){this.path=t,this.affectedTree=n,this.revert=i,this.type=Ic.ACK_USER_WRITE,this.source=Bte()}operationForChild(t){if(Lt(this.path)){if(this.affectedTree.value!=null)return Ce(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new pn(t));return new e(an(),n,this.revert)}}else return Ce(zt(this.path)===t,"operationForChild called for unrelated child."),new e(Rn(this.path),this.affectedTree,this.revert)}};var gv=class e{constructor(t,n,i){this.source=t,this.path=n,this.snap=i,this.type=Ic.OVERWRITE}operationForChild(t){return Lt(this.path)?new e(this.source,an(),this.snap.getImmediateChild(t)):new e(this.source,Rn(this.path),this.snap)}};var VT=class e{constructor(t,n,i){this.source=t,this.path=n,this.children=i,this.type=Ic.MERGE}operationForChild(t){if(Lt(this.path)){let n=this.children.subtree(new pn(t));return n.isEmpty()?null:n.value?new gv(this.source,an(),n.value):new e(this.source,an(),n)}else return Ce(zt(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Rn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Zw=class{constructor(t,n,i){this.node_=t,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Lt(t))return this.isFullyInitialized()&&!this.filtered_;let n=zt(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};function qNe(e,t,n,i){let r=[],o=[];return t.forEach(s=>{s.type==="child_changed"&&e.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(zNe(s.childName,s.snapshotNode))}),Kw(e,r,"child_removed",t,i,n),Kw(e,r,"child_added",t,i,n),Kw(e,r,"child_moved",o,i,n),Kw(e,r,"child_changed",t,i,n),Kw(e,r,"value",t,i,n),r}function Kw(e,t,n,i,r,o){let s=i.filter(a=>a.type===n);s.sort((a,l)=>YNe(e,a,l)),s.forEach(a=>{let l=KNe(e,a,o);r.forEach(c=>{c.respondsTo(a.type)&&t.push(c.createEvent(l,e.query_))})})}function KNe(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function YNe(e,t,n){if(t.childName==null||n.childName==null)throw tp("Should only compare child_ events.");let i=new Ut(t.childName,t.snapshotNode),r=new Ut(n.childName,n.snapshotNode);return e.index_.compare(i,r)}function zte(e,t){return{eventCache:e,serverCache:t}}function Xw(e,t,n,i){return zte(new Zw(t,n,i),e.serverCache)}function Ute(e,t,n,i){return zte(e.eventCache,new Zw(t,n,i))}function _6(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Wf(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var qV,QNe=()=>(qV||(qV=new Us(QOe)),qV),Io=class e{constructor(t,n=QNe()){this.value=t,this.children=n}static fromObject(t){let n=new e(null);return js(t,(i,r)=>{n=n.set(new pn(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:an(),value:this.value};if(Lt(t))return null;{let i=zt(t),r=this.children.get(i);if(r!==null){let o=r.findRootMostMatchingPathAndValue(Rn(t),n);return o!=null?{path:Ki(new pn(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Lt(t))return this;{let n=zt(t),i=this.children.get(n);return i!==null?i.subtree(Rn(t)):new e(null)}}set(t,n){if(Lt(t))return new e(n,this.children);{let i=zt(t),o=(this.children.get(i)||new e(null)).set(Rn(t),n),s=this.children.insert(i,o);return new e(this.value,s)}}remove(t){if(Lt(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=zt(t),i=this.children.get(n);if(i){let r=i.remove(Rn(t)),o;return r.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,r),this.value===null&&o.isEmpty()?new e(null):new e(this.value,o)}else return this}}get(t){if(Lt(t))return this.value;{let n=zt(t),i=this.children.get(n);return i?i.get(Rn(t)):null}}setTree(t,n){if(Lt(t))return n;{let i=zt(t),o=(this.children.get(i)||new e(null)).setTree(Rn(t),n),s;return o.isEmpty()?s=this.children.remove(i):s=this.children.insert(i,o),new e(this.value,s)}}fold(t){return this.fold_(an(),t)}fold_(t,n){let i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(Ki(t,r),n)}),n(t,this.value,i)}findOnPath(t,n){return this.findOnPath_(t,an(),n)}findOnPath_(t,n,i){let r=this.value?i(n,this.value):!1;if(r)return r;if(Lt(t))return null;{let o=zt(t),s=this.children.get(o);return s?s.findOnPath_(Rn(t),Ki(n,o),i):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,an(),n)}foreachOnPath_(t,n,i){if(Lt(t))return this;{this.value&&i(n,this.value);let r=zt(t),o=this.children.get(r);return o?o.foreachOnPath_(Rn(t),Ki(n,r),i):new e(null)}}foreach(t){this.foreach_(an(),t)}foreach_(t,n){this.children.inorderTraversal((i,r)=>{r.foreach_(Ki(t,i),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,i)=>{i.value&&t(n,i.value)})}};var Fa=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new Io(null))}};function $w(e,t,n){if(Lt(t))return new Fa(new Io(n));{let i=e.writeTree_.findRootMostValueAndPath(t);if(i!=null){let r=i.path,o=i.value,s=zs(r,t);return o=o.updateChild(s,n),new Fa(e.writeTree_.set(r,o))}else{let r=new Io(n),o=e.writeTree_.setTree(t,r);return new Fa(o)}}}function Xee(e,t,n){let i=e;return js(n,(r,o)=>{i=$w(i,Ki(t,r),o)}),i}function $ee(e,t){if(Lt(t))return Fa.empty();{let n=e.writeTree_.setTree(t,new Io(null));return new Fa(n)}}function E6(e,t){return qf(e,t)!=null}function qf(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(zs(n.path,t)):null}function Zee(e){let t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ir,(i,r)=>{t.push(new Ut(i,r))}):e.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&t.push(new Ut(i,r.value))}),t}function yd(e,t){if(Lt(t))return e;{let n=qf(e,t);return n!=null?new Fa(new Io(n)):new Fa(e.writeTree_.subtree(t))}}function x6(e){return e.writeTree_.isEmpty()}function mv(e,t){return jte(an(),e.writeTree_,t)}function jte(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal((r,o)=>{r===".priority"?(Ce(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):n=jte(Ki(e,r),o,n)}),!n.getChild(e).isEmpty()&&i!==null&&(n=n.updateChild(Ki(e,".priority"),i)),n}}function Wte(e,t){return Xte(t,e)}function XNe(e,t,n,i,r){Ce(i>e.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:r}),r&&(e.visibleWrites=$w(e.visibleWrites,t,n)),e.lastWriteId=i}function $Ne(e,t){for(let n=0;n<e.allWrites.length;n++){let i=e.allWrites[n];if(i.writeId===t)return i}return null}function ZNe(e,t){let n=e.allWrites.findIndex(a=>a.writeId===t);Ce(n>=0,"removeWrite called with nonexistent writeId.");let i=e.allWrites[n];e.allWrites.splice(n,1);let r=i.visible,o=!1,s=e.allWrites.length-1;for(;r&&s>=0;){let a=e.allWrites[s];a.visible&&(s>=n&&JNe(a,i.path)?r=!1:Ia(i.path,a.path)&&(o=!0)),s--}if(r){if(o)return eLe(e),!0;if(i.snap)e.visibleWrites=$ee(e.visibleWrites,i.path);else{let a=i.children;js(a,l=>{e.visibleWrites=$ee(e.visibleWrites,Ki(i.path,l))})}return!0}else return!1}function JNe(e,t){if(e.snap)return Ia(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&Ia(Ki(e.path,n),t))return!0;return!1}function eLe(e){e.visibleWrites=qte(e.allWrites,tLe,an()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function tLe(e){return e.visible}function qte(e,t,n){let i=Fa.empty();for(let r=0;r<e.length;++r){let o=e[r];if(t(o)){let s=o.path,a;if(o.snap)Ia(n,s)?(a=zs(n,s),i=$w(i,a,o.snap)):Ia(s,n)&&(a=zs(s,n),i=$w(i,an(),o.snap.getChild(a)));else if(o.children){if(Ia(n,s))a=zs(n,s),i=Xee(i,a,o.children);else if(Ia(s,n))if(a=zs(s,n),Lt(a))i=Xee(i,an(),o.children);else{let l=Td(o.children,zt(a));if(l){let c=l.getChild(Rn(a));i=$w(i,an(),c)}}}else throw tp("WriteRecord should have .snap or .children")}}return i}function Kte(e,t,n,i,r){if(!i&&!r){let o=qf(e.visibleWrites,t);if(o!=null)return o;{let s=yd(e.visibleWrites,t);if(x6(s))return n;if(n==null&&!E6(s,an()))return null;{let a=n||zn.EMPTY_NODE;return mv(s,a)}}}else{let o=yd(e.visibleWrites,t);if(!r&&x6(o))return n;if(!r&&n==null&&!E6(o,an()))return null;{let s=function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(Ia(c.path,t)||Ia(t,c.path))},a=qte(e.allWrites,s,t),l=n||zn.EMPTY_NODE;return mv(a,l)}}}function nLe(e,t,n){let i=zn.EMPTY_NODE,r=qf(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Ir,(o,s)=>{i=i.updateImmediateChild(o,s)}),i;if(n){let o=yd(e.visibleWrites,t);return n.forEachChild(Ir,(s,a)=>{let l=mv(yd(o,new pn(s)),a);i=i.updateImmediateChild(s,l)}),Zee(o).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}else{let o=yd(e.visibleWrites,t);return Zee(o).forEach(s=>{i=i.updateImmediateChild(s.name,s.node)}),i}}function iLe(e,t,n,i,r){Ce(i||r,"Either existingEventSnap or existingServerSnap must exist");let o=Ki(t,n);if(E6(e.visibleWrites,o))return null;{let s=yd(e.visibleWrites,o);return x6(s)?r.getChild(n):mv(s,r.getChild(n))}}function rLe(e,t,n,i){let r=Ki(t,n),o=qf(e.visibleWrites,r);if(o!=null)return o;if(i.isCompleteForChild(n)){let s=yd(e.visibleWrites,r);return mv(s,i.getNode().getImmediateChild(n))}else return null}function oLe(e,t){return qf(e.visibleWrites,t)}function sLe(e,t,n,i,r,o,s){let a,l=yd(e.visibleWrites,t),c=qf(l,an());if(c!=null)a=c;else if(n!=null)a=mv(l,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),h=o?a.getReverseIteratorFrom(i,s):a.getIteratorFrom(i,s),p=h.getNext();for(;p&&u.length<r;)d(p,i)!==0&&u.push(p),p=h.getNext();return u}else return[]}function aLe(){return{visibleWrites:Fa.empty(),allWrites:[],lastWriteId:-1}}function D6(e,t,n,i){return Kte(e.writeTree,e.treePath,t,n,i)}function Yte(e,t){return nLe(e.writeTree,e.treePath,t)}function Jee(e,t,n,i){return iLe(e.writeTree,e.treePath,t,n,i)}function BT(e,t){return oLe(e.writeTree,Ki(e.treePath,t))}function lLe(e,t,n,i,r,o){return sLe(e.writeTree,e.treePath,t,n,i,r,o)}function j6(e,t,n){return rLe(e.writeTree,e.treePath,t,n)}function Qte(e,t){return Xte(Ki(e.treePath,t),e.writeTree)}function Xte(e,t){return{treePath:e,writeTree:t}}var T6=class{constructor(){this.changeMap=new Map}trackChildChange(t){let n=t.type,i=t.childName;Ce(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Ce(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let o=r.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(i,qee(i,t.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(i,HNe(i,r.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(i,GNe(i,t.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(i,qee(i,t.snapshotNode,r.oldSnap));else throw tp("Illegal combination of changes: "+t+" occurred after "+r)}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}};var R6=class{getCompleteChild(t){return null}getChildAfterChild(t,n,i){return null}},$te=new R6,Jw=class{constructor(t,n,i=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(t){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{let i=this.optCompleteServerCache_!=null?new Zw(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return j6(this.writes_,t,i)}}getChildAfterChild(t,n,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Wf(this.viewCache_),o=lLe(this.writes_,r,n,1,i,t);return o.length===0?null:o[0]}};function cLe(e,t){Ce(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),Ce(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function uLe(e,t,n,i,r){let o=new T6,s,a;if(n.type===Ic.OVERWRITE){let c=n;c.source.fromUser?s=I6(e,t,c.path,c.snap,i,r,o):(Ce(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered()&&!Lt(c.path),s=GT(e,t,c.path,c.snap,i,r,a,o))}else if(n.type===Ic.MERGE){let c=n;c.source.fromUser?s=hLe(e,t,c.path,c.children,i,r,o):(Ce(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered(),s=F6(e,t,c.path,c.children,i,r,a,o))}else if(n.type===Ic.ACK_USER_WRITE){let c=n;c.revert?s=gLe(e,t,c.path,i,r,o):s=fLe(e,t,c.path,c.affectedTree,i,r,o)}else if(n.type===Ic.LISTEN_COMPLETE)s=pLe(e,t,n.path,i,o);else throw tp("Unknown operation type: "+n.type);let l=o.getChanges();return dLe(t,s,l),{viewCache:s,changes:l}}function dLe(e,t,n){let i=t.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=_6(e);(n.length>0||!e.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(BNe(_6(t)))}}function Zte(e,t,n,i,r,o){let s=t.eventCache;if(BT(i,n)!=null)return t;{let a,l;if(Lt(n))if(Ce(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let c=Wf(t),u=c instanceof zn?c:zn.EMPTY_NODE,d=Yte(i,u);a=e.filter.updateFullNode(t.eventCache.getNode(),d,o)}else{let c=D6(i,Wf(t));a=e.filter.updateFullNode(t.eventCache.getNode(),c,o)}else{let c=zt(n);if(c===".priority"){Ce(Cd(n)===1,"Can't have a priority with additional path components");let u=s.getNode();l=t.serverCache.getNode();let d=Jee(i,n,u,l);d!=null?a=e.filter.updatePriority(u,d):a=s.getNode()}else{let u=Rn(n),d;if(s.isCompleteForChild(c)){l=t.serverCache.getNode();let h=Jee(i,n,s.getNode(),l);h!=null?d=s.getNode().getImmediateChild(c).updateChild(u,h):d=s.getNode().getImmediateChild(c)}else d=j6(i,c,t.serverCache);d!=null?a=e.filter.updateChild(s.getNode(),c,d,u,r,o):a=s.getNode()}}return Xw(t,a,s.isFullyInitialized()||Lt(n),e.filter.filtersNodes())}}function GT(e,t,n,i,r,o,s,a){let l=t.serverCache,c,u=s?e.filter:e.filter.getIndexedFilter();if(Lt(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){let p=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),p,null)}else{let p=zt(n);if(!l.isCompleteForPath(n)&&Cd(n)>1)return t;let g=Rn(n),v=l.getNode().getImmediateChild(p).updateChild(g,i);p===".priority"?c=u.updatePriority(l.getNode(),v):c=u.updateChild(l.getNode(),p,v,g,$te,null)}let d=Ute(t,c,l.isFullyInitialized()||Lt(n),u.filtersNodes()),h=new Jw(r,d,o);return Zte(e,d,n,r,h,a)}function I6(e,t,n,i,r,o,s){let a=t.eventCache,l,c,u=new Jw(r,t,o);if(Lt(n))c=e.filter.updateFullNode(t.eventCache.getNode(),i,s),l=Xw(t,c,!0,e.filter.filtersNodes());else{let d=zt(n);if(d===".priority")c=e.filter.updatePriority(t.eventCache.getNode(),i),l=Xw(t,c,a.isFullyInitialized(),a.isFiltered());else{let h=Rn(n),p=a.getNode().getImmediateChild(d),g;if(Lt(h))g=i;else{let m=u.getCompleteChild(d);m!=null?Ite(h)===".priority"&&m.getChild(Ate(h)).isEmpty()?g=m:g=m.updateChild(h,i):g=zn.EMPTY_NODE}if(p.equals(g))l=t;else{let m=e.filter.updateChild(a.getNode(),d,g,h,u,s);l=Xw(t,m,a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function ete(e,t){return e.eventCache.isCompleteForChild(t)}function hLe(e,t,n,i,r,o,s){let a=t;return i.foreach((l,c)=>{let u=Ki(n,l);ete(t,zt(u))&&(a=I6(e,a,u,c,r,o,s))}),i.foreach((l,c)=>{let u=Ki(n,l);ete(t,zt(u))||(a=I6(e,a,u,c,r,o,s))}),a}function tte(e,t,n){return n.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function F6(e,t,n,i,r,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l=t,c;Lt(n)?c=i:c=new Io(null).setTree(n,i);let u=t.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){let p=t.serverCache.getNode().getImmediateChild(d),g=tte(e,p,h);l=GT(e,l,new pn(d),g,r,o,s,a)}}),c.children.inorderTraversal((d,h)=>{let p=!t.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!p){let g=t.serverCache.getNode().getImmediateChild(d),m=tte(e,g,h);l=GT(e,l,new pn(d),m,r,o,s,a)}}),l}function fLe(e,t,n,i,r,o,s){if(BT(r,n)!=null)return t;let a=t.serverCache.isFiltered(),l=t.serverCache;if(i.value!=null){if(Lt(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return GT(e,t,n,l.getNode().getChild(n),r,o,a,s);if(Lt(n)){let c=new Io(null);return l.getNode().forEachChild(uv,(u,d)=>{c=c.set(new pn(u),d)}),F6(e,t,n,c,r,o,a,s)}else return t}else{let c=new Io(null);return i.foreach((u,d)=>{let h=Ki(n,u);l.isCompleteForPath(h)&&(c=c.set(u,l.getNode().getChild(h)))}),F6(e,t,n,c,r,o,a,s)}}function pLe(e,t,n,i,r){let o=t.serverCache,s=Ute(t,o.getNode(),o.isFullyInitialized()||Lt(n),o.isFiltered());return Zte(e,s,n,i,$te,r)}function gLe(e,t,n,i,r,o){let s;if(BT(i,n)!=null)return t;{let a=new Jw(i,t,r),l=t.eventCache.getNode(),c;if(Lt(n)||zt(n)===".priority"){let u;if(t.serverCache.isFullyInitialized())u=D6(i,Wf(t));else{let d=t.serverCache.getNode();Ce(d instanceof zn,"serverChildren would be complete if leaf node"),u=Yte(i,d)}u=u,c=e.filter.updateFullNode(l,u,o)}else{let u=zt(n),d=j6(i,u,t.serverCache);d==null&&t.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),d!=null?c=e.filter.updateChild(l,u,d,Rn(n),a,o):t.eventCache.getNode().hasChild(u)?c=e.filter.updateChild(l,u,zn.EMPTY_NODE,Rn(n),a,o):c=l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=D6(i,Wf(t)),s.isLeafNode()&&(c=e.filter.updateFullNode(c,s,o)))}return s=t.serverCache.isFullyInitialized()||BT(i,an())!=null,Xw(t,c,s,e.filter.filtersNodes())}}function mLe(e,t){let n=Wf(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Lt(t)&&!n.getImmediateChild(zt(t)).isEmpty())?n.getChild(t):null}function nte(e,t,n,i){t.type===Ic.MERGE&&t.source.queryId!==null&&(Ce(Wf(e.viewCache_),"We should always have a full cache before handling merges"),Ce(_6(e.viewCache_),"Missing event cache, even though we have a server cache"));let r=e.viewCache_,o=uLe(e.processor_,r,t,n,i);return cLe(e.processor_,o.viewCache),Ce(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,vLe(e,o.changes,o.viewCache.eventCache.getNode(),null)}function vLe(e,t,n,i){let r=i?[i]:e.eventRegistrations_;return qNe(e.eventGenerator_,t,n,r)}var ite;function yLe(e){Ce(!ite,"__referenceConstructor has already been defined"),ite=e}function W6(e,t,n,i){let r=t.source.queryId;if(r!==null){let o=e.views.get(r);return Ce(o!=null,"SyncTree gave us an op for an invalid query."),nte(o,t,n,i)}else{let o=[];for(let s of e.views.values())o=o.concat(nte(s,t,n,i));return o}}function q6(e,t){let n=null;for(let i of e.views.values())n=n||mLe(i,t);return n}var rte;function CLe(e){Ce(!rte,"__referenceConstructor has already been defined"),rte=e}var HT=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Io(null),this.pendingWriteTree_=aLe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function wLe(e,t,n,i,r){return XNe(e.pendingWriteTree_,t,n,i,r),r?UT(e,new gv(Bte(),t,n)):[]}function lv(e,t,n=!1){let i=$Ne(e.pendingWriteTree_,t);if(ZNe(e.pendingWriteTree_,t)){let o=new Io(null);return i.snap!=null?o=o.set(an(),!0):js(i.children,s=>{o=o.set(new pn(s),!0)}),UT(e,new S6(i.path,o,n))}else return[]}function zT(e,t,n){return UT(e,new gv(Gte(),t,n))}function bLe(e,t,n){let i=Io.fromObject(n);return UT(e,new VT(Gte(),t,i))}function SLe(e,t,n,i){let r=nne(e,i);if(r!=null){let o=ine(r),s=o.path,a=o.queryId,l=zs(s,t),c=new gv(Hte(a),l,n);return rne(e,s,c)}else return[]}function _Le(e,t,n,i){let r=nne(e,i);if(r){let o=ine(r),s=o.path,a=o.queryId,l=zs(s,t),c=Io.fromObject(n),u=new VT(Hte(a),l,c);return rne(e,s,u)}else return[]}function Jte(e,t,n){let r=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(s,a)=>{let l=zs(s,t),c=q6(a,l);if(c)return c});return Kte(r,t,o,n,!0)}function UT(e,t){return ene(t,e.syncPointTree_,null,Wte(e.pendingWriteTree_,an()))}function ene(e,t,n,i){if(Lt(e.path))return tne(e,t,n,i);{let r=t.get(an());n==null&&r!=null&&(n=q6(r,an()));let o=[],s=zt(e.path),a=e.operationForChild(s),l=t.children.get(s);if(l&&a){let c=n?n.getImmediateChild(s):null,u=Qte(i,s);o=o.concat(ene(a,l,c,u))}return r&&(o=o.concat(W6(r,e,i,n))),o}}function tne(e,t,n,i){let r=t.get(an());n==null&&r!=null&&(n=q6(r,an()));let o=[];return t.children.inorderTraversal((s,a)=>{let l=n?n.getImmediateChild(s):null,c=Qte(i,s),u=e.operationForChild(s);u&&(o=o.concat(tne(u,a,l,c)))}),r&&(o=o.concat(W6(r,e,i,n))),o}function nne(e,t){return e.tagToQueryMap.get(t)}function ine(e){let t=e.indexOf("$");return Ce(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new pn(e.substr(0,t))}}function rne(e,t,n){let i=e.syncPointTree_.get(t);Ce(i,"Missing sync point for query tag that we're tracking");let r=Wte(e.pendingWriteTree_,t);return W6(i,n,r,null)}var A6=class e{constructor(t){this.node_=t}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},M6=class e{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){let n=Ki(this.path_,t);return new e(this.syncTree_,n)}node(){return Jte(this.syncTree_,this.path_)}},ELe=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},ote=function(e,t,n){if(!e||typeof e!="object")return e;if(Ce(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return xLe(e[".sv"],t,n);if(typeof e[".sv"]=="object")return DLe(e[".sv"],t);Ce(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},xLe=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:Ce(!1,"Unexpected server value: "+e)}},DLe=function(e,t,n){e.hasOwnProperty("increment")||Ce(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let i=e.increment;typeof i!="number"&&Ce(!1,"Unexpected increment value: "+i);let r=t.node();if(Ce(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let s=r.getValue();return typeof s!="number"?i:s+i},TLe=function(e,t,n,i){return K6(t,new M6(n,e),i)},RLe=function(e,t,n){return K6(e,new A6(t),n)};function K6(e,t,n){let i=e.getPriority().val(),r=ote(i,t.getImmediateChild(".priority"),n),o;if(e.isLeafNode()){let s=e,a=ote(s.getValue(),t,n);return a!==s.getValue()||r!==s.getPriority().val()?new fv(a,Rr(r)):e}else{let s=e;return o=s,r!==s.getPriority().val()&&(o=o.updatePriority(new fv(r))),s.forEachChild(Ir,(a,l)=>{let c=K6(l,t.getImmediateChild(a),n);c!==l&&(o=o.updateImmediateChild(a,c))}),o}}var eb=class{constructor(t="",n=null,i={children:{},childCount:0}){this.name=t,this.parent=n,this.node=i}};function Y6(e,t){let n=t instanceof pn?t:new pn(t),i=e,r=zt(n);for(;r!==null;){let o=Td(i.node.children,r)||{children:{},childCount:0};i=new eb(r,i,o),n=Rn(n),r=zt(n)}return i}function Cv(e){return e.node.value}function one(e,t){e.node.value=t,P6(e)}function sne(e){return e.node.childCount>0}function ILe(e){return Cv(e)===void 0&&!sne(e)}function jT(e,t){js(e.node.children,(n,i)=>{t(new eb(n,e,i))})}function ane(e,t,n,i){n&&!i&&t(e),jT(e,r=>{ane(r,t,!0,i)}),n&&i&&t(e)}function FLe(e,t,n){let i=n?e:e.parent;for(;i!==null;){if(t(i))return!0;i=i.parent}return!1}function ob(e){return new pn(e.parent===null?e.name:ob(e.parent)+"/"+e.name)}function P6(e){e.parent!==null&&ALe(e.parent,e.name,e)}function ALe(e,t,n){let i=ILe(n),r=Na(e.node.children,t);i&&r?(delete e.node.children[t],e.node.childCount--,P6(e)):!i&&!r&&(e.node.children[t]=n.node,e.node.childCount++,P6(e))}var MLe=/[\[\].#$\/\u0000-\u001F\u007F]/,PLe=/[\[\].#$\u0000-\u001F\u007F]/,KV=10*1024*1024,lne=function(e){return typeof e=="string"&&e.length!==0&&!MLe.test(e)},kLe=function(e){return typeof e=="string"&&e.length!==0&&!PLe.test(e)},OLe=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),kLe(e)};var cne=function(e,t,n){let i=n instanceof pn?new a6(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+Hf(i));if(typeof t=="function")throw new Error(e+"contains a function "+Hf(i)+" with contents = "+t.toString());if(dte(t))throw new Error(e+"contains "+t.toString()+" "+Hf(i));if(typeof t=="string"&&t.length>KV/3&&jv(t)>KV)throw new Error(e+"contains a string greater than "+KV+" utf8 bytes "+Hf(i)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let r=!1,o=!1;if(js(t,(s,a)=>{if(s===".value")r=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!lne(s)))throw new Error(e+" contains an invalid key ("+s+") "+Hf(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);DNe(i,s),cne(e,a,i),TNe(i)}),r&&o)throw new Error(e+' contains ".value" child '+Hf(i)+" in addition to actual children.")}};var NLe=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!lne(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!OLe(n))throw new Error(k4(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var k6=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function LLe(e,t){let n=null;for(let i=0;i<t.length;i++){let r=t[i],o=r.getPath();n!==null&&!Mte(o,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(r)}n&&e.eventLists_.push(n)}function Kf(e,t,n){LLe(e,n),VLe(e,i=>Ia(i,t)||Ia(t,i))}function VLe(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){let r=e.eventLists_[i];if(r){let o=r.path;t(o)?(BLe(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function BLe(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let i=n.getEventRunner();Uf&&Tr("event: "+n.toString()),ib(i)}}}var GLe="repo_interrupt",HLe=25,O6=class{constructor(t,n,i,r){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new k6,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=LT(),this.transactionQueueTree_=new eb,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function zLe(e,t,n){if(e.stats_=H6(e.repoInfo_),e.forceRestClient_||tNe())e.server_=new v6(e.repoInfo_,(i,r,o,s)=>{ste(e,i,r,o,s)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>ate(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Li(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}e.persistentConnection_=new z6(e.repoInfo_,t,(i,r,o,s)=>{ste(e,i,r,o,s)},i=>{ate(e,i)},i=>{jLe(e,i)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(i=>{e.server_.refreshAuthToken(i)}),e.appCheckProvider_.addTokenChangeListener(i=>{e.server_.refreshAppCheckToken(i.token)}),e.statsReporter_=iNe(e.repoInfo_,()=>new b6(e.stats_,e.server_)),e.infoData_=new y6,e.infoSyncTree_=new HT({startListening:(i,r,o,s)=>{let a=[],l=e.infoData_.getNode(i._path);return l.isEmpty()||(a=zT(e.infoSyncTree_,i._path,l),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),Q6(e,"connected",!1),e.serverSyncTree_=new HT({startListening:(i,r,o,s)=>(e.server_.listen(i,o,r,(a,l)=>{let c=s(a,l);Kf(e.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{e.server_.unlisten(i,r)}})}function ULe(e){let n=e.infoData_.getNode(new pn(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function une(e){return ELe({timestamp:ULe(e)})}function ste(e,t,n,i,r){e.dataUpdateCount++;let o=new pn(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(r)if(i){let l=zv(n,c=>Rr(c));s=_Le(e.serverSyncTree_,o,l,r)}else{let l=Rr(n);s=SLe(e.serverSyncTree_,o,l,r)}else if(i){let l=zv(n,c=>Rr(c));s=bLe(e.serverSyncTree_,o,l)}else{let l=Rr(n);s=zT(e.serverSyncTree_,o,l)}let a=o;s.length>0&&(a=$6(e,o)),Kf(e.eventQueue_,a,s)}function ate(e,t){Q6(e,"connected",t),t===!1&&qLe(e)}function jLe(e,t){js(t,(n,i)=>{Q6(e,n,i)})}function Q6(e,t,n){let i=new pn("/.info/"+t),r=Rr(n);e.infoData_.updateSnapshot(i,r);let o=zT(e.infoSyncTree_,i,r);Kf(e.eventQueue_,i,o)}function WLe(e){return e.nextWriteId_++}function qLe(e){dne(e,"onDisconnectEvents");let t=une(e),n=LT();C6(e.onDisconnect_,an(),(r,o)=>{let s=TLe(r,o,e.serverSyncTree_,t);Vte(n,r,s)});let i=[];C6(n,an(),(r,o)=>{i=i.concat(zT(e.serverSyncTree_,r,o));let s=XLe(e,r);$6(e,s)}),e.onDisconnect_=LT(),Kf(e.eventQueue_,an(),i)}function KLe(e){e.persistentConnection_&&e.persistentConnection_.interrupt(GLe)}function dne(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),Tr(n,...t)}function hne(e,t,n){return Jte(e.serverSyncTree_,t,n)||zn.EMPTY_NODE}function X6(e,t=e.transactionQueueTree_){if(t||WT(e,t),Cv(t)){let n=pne(e,t);Ce(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&YLe(e,ob(t),n)}else sne(t)&&jT(t,n=>{X6(e,n)})}function YLe(e,t,n){let i=n.map(c=>c.currentWriteId),r=hne(e,t,i),o=r,s=r.hash();for(let c=0;c<n.length;c++){let u=n[c];Ce(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=zs(t,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),l=t;e.server_.put(l.toString(),a,c=>{dne(e,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){let d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(lv(e.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();WT(e,Y6(e.transactionQueueTree_,t)),X6(e,e.transactionQueueTree_),Kf(e.eventQueue_,t,u);for(let h=0;h<d.length;h++)ib(d[h])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{ls("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}$6(e,t)}},s)}function $6(e,t){let n=fne(e,t),i=ob(n),r=pne(e,n);return QLe(e,r,i),i}function QLe(e,t,n){if(t.length===0)return;let i=[],r=[],s=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let l=t[a],c=zs(n,l.path),u=!1,d;if(Ce(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,d=l.abortReason,r=r.concat(lv(e.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=HLe)u=!0,d="maxretry",r=r.concat(lv(e.serverSyncTree_,l.currentWriteId,!0));else{let h=hne(e,l.path,s);l.currentInputSnapshot=h;let p=t[a].update(h.val());if(p!==void 0){cne("transaction failed: Data returned ",p,l.path);let g=Rr(p);typeof p=="object"&&p!=null&&Na(p,".priority")||(g=g.updatePriority(h.getPriority()));let v=l.currentWriteId,C=une(e),S=RLe(g,h,C);l.currentOutputSnapshotRaw=g,l.currentOutputSnapshotResolved=S,l.currentWriteId=WLe(e),s.splice(s.indexOf(v),1),r=r.concat(wLe(e.serverSyncTree_,l.path,S,l.currentWriteId,l.applyLocally)),r=r.concat(lv(e.serverSyncTree_,v,!0))}else u=!0,d="nodata",r=r.concat(lv(e.serverSyncTree_,l.currentWriteId,!0))}Kf(e.eventQueue_,n,r),r=[],u&&(t[a].status=2,function(h){setTimeout(h,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(d==="nodata"?i.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):i.push(()=>t[a].onComplete(new Error(d),!1,null))))}WT(e,e.transactionQueueTree_);for(let a=0;a<i.length;a++)ib(i[a]);X6(e,e.transactionQueueTree_)}function fne(e,t){let n,i=e.transactionQueueTree_;for(n=zt(t);n!==null&&Cv(i)===void 0;)i=Y6(i,n),t=Rn(t),n=zt(t);return i}function pne(e,t){let n=[];return gne(e,t,n),n.sort((i,r)=>i.order-r.order),n}function gne(e,t,n){let i=Cv(t);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);jT(t,r=>{gne(e,r,n)})}function WT(e,t){let n=Cv(t);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,one(t,n.length>0?n:void 0)}jT(t,i=>{WT(e,i)})}function XLe(e,t){let n=ob(fne(e,t)),i=Y6(e.transactionQueueTree_,t);return FLe(i,r=>{YV(e,r)}),YV(e,i),ane(i,r=>{YV(e,r)}),n}function YV(e,t){let n=Cv(t);if(n){let i=[],r=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(Ce(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(Ce(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),r=r.concat(lv(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&i.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?one(t,void 0):n.length=o+1,Kf(e.eventQueue_,ob(t),r);for(let s=0;s<i.length;s++)ib(i[s])}}function $Le(e){let t="",n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}function ZLe(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let n of e.split("&")){if(n.length===0)continue;let i=n.split("=");i.length===2?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):ls(`Invalid query segment '${n}' in query '${e}'`)}return t}var lte=function(e,t){let n=JLe(e),i=n.namespace;n.domain==="firebase.com"&&Fc(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&Fc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||KOe();let r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new FT(n.host,n.secure,i,r,t,"",i!==n.subdomain),path:new pn(n.pathString)}},JLe=function(e){let t="",n="",i="",r="",o="",s=!0,a="https",l=443;if(typeof e=="string"){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");u===-1&&(u=e.length);let d=e.indexOf("?");d===-1&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(r=$Le(e.substring(u,d)));let h=ZLe(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(s=a==="https"||a==="wss",l=parseInt(t.substring(c+1),10)):c=t.length;let p=t.slice(0,c);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{let g=t.indexOf(".");i=t.substring(0,g).toLowerCase(),n=t.substring(g+1),o=i}"ns"in h&&(o=h.ns)}return{host:t,port:l,domain:n,subdomain:i,secure:s,scheme:a,pathString:r,namespace:o}};var N6=class e{constructor(t,n,i,r){this._repo=t,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return Lt(this._path)?null:Ite(this._path)}get ref(){return new vv(this._repo,this._path)}get _queryIdentifier(){let t=Yee(this._queryParams),n=G6(t);return n==="{}"?"default":n}get _queryObject(){return Yee(this._queryParams)}isEqual(t){if(t=tt(t),!(t instanceof e))return!1;let n=this._repo===t._repo,i=Mte(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+xNe(this._path)}};var vv=class e extends N6{constructor(t,n){super(t,n,new m6,!1)}get parent(){let t=Ate(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}};yLe(vv);CLe(vv);var eVe="FIREBASE_DATABASE_EMULATOR_HOST",L6={},tVe=!1;function nVe(e,t,n,i){e.repoInfo_=new FT(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),i&&(e.authTokenProvider_=i)}function iVe(e,t,n,i,r){let o=i||e.options.databaseURL;o===void 0&&(e.options.projectId||Fc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Tr("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let s=lte(o,r),a=s.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[eVe]),c?(l=!0,o=`http://${c}?ns=${a.namespace}`,s=lte(o,r),a=s.repoInfo):l=!s.repoInfo.secure;let u=r&&l?new Qw(Qw.OWNER):new e6(e.name,e.options,t);NLe("Invalid Firebase Database URL",s),Lt(s.path)||Fc("Database URL must point to the root of a Firebase Database (not including a child path).");let d=oVe(a,e,u,new JV(e.name,n));return new V6(d,e)}function rVe(e,t){let n=L6[t];(!n||n[e.key]!==e)&&Fc(`Database ${t}(${e.repoInfo_}) has already been deleted.`),KLe(e),delete n[e.key]}function oVe(e,t,n,i){let r=L6[t.name];r||(r={},L6[t.name]=r);let o=r[e.toURLString()];return o&&Fc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new O6(e,tVe,n,i),r[e.toURLString()]=o,o}var V6=class{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(zLe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new vv(this._repo,an())),this._rootInternal}_delete(){return this._rootInternal!==null&&(rVe(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Fc("Cannot call "+t+" on a deleted database.")}};function mne(e=Vi(),t){let n=Ei(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){let i=Nc("database");i&&vne(n,...i)}return n}function vne(e,t,n,i={}){e=tt(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Fc("Cannot call useEmulator() after instance has already been initialized.");let r=e._repoInternal,o;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Fc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Qw(Qw.OWNER);else if(i.mockUserToken){let s=typeof i.mockUserToken=="string"?i.mockUserToken:ip(i.mockUserToken,e.app.options.projectId);o=new Qw(s)}nVe(r,t,n,o)}function sVe(e){jOe(Lc),jn(new gn("database",(t,{instanceIdentifier:n})=>{let i=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return iVe(i,r,o,n)},"PUBLIC").setMultipleInstances(!0)),Qe(Fee,Aee,e),Qe(Fee,Aee,"esm2017")}z6.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};z6.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};sVe();var sb=class{constructor(t){return t}},yne="database",Z6=class{constructor(){return ir(yne)}};var J6=new ce("angularfire2.database-instances");function aVe(e,t){let n=mr(yne,e,t);return n&&new sb(n)}function lVe(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new sb(i)}}var cVe={provide:Z6,deps:[[new gt,J6]]},uVe={provide:sb,useFactory:aVe,deps:[[new gt,J6],ti]};function Cne(e,...t){return Qe("angularfire",Fn.full,"rtdb"),hn([uVe,cVe,{provide:J6,useFactory:lVe(e),multi:!0,deps:[De,bt,An,Ri,[new gt,la],[new gt,Ti],...t]}])}var wne=It(mne,!0);var _ne="functions";var eB=class{constructor(t,n,i){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(r=>this.auth=r,()=>{}),this.messaging||n.get().then(r=>this.messaging=r,()=>{}),this.appCheck||i.get().then(r=>this.appCheck=r,()=>{})}getAuthToken(){return N(this,null,function*(){if(this.auth)try{let t=yield this.auth.getToken();return t?.accessToken}catch{return}})}getMessagingToken(){return N(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(t){return N(this,null,function*(){if(this.appCheck){let n=t?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return n.error?null:n.token}return null})}getContext(t){return N(this,null,function*(){let n=yield this.getAuthToken(),i=yield this.getMessagingToken(),r=yield this.getAppCheckToken(t);return{authToken:n,messagingToken:i,appCheckToken:r}})}};var tB="us-central1";var nB=class{constructor(t,n,i,r,o=tB,s){this.app=t,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new eB(n,i,r),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(o);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=tB}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(t){let n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${n}.cloudfunctions.net/${t}`}};function dVe(e,t,n){e.emulatorOrigin=`http://${t}:${n}`}var bne="@firebase/functions",Sne="0.11.8";var hVe="auth-internal",fVe="app-check-internal",pVe="messaging-internal";function gVe(e,t){let n=(i,{instanceIdentifier:r})=>{let o=i.getProvider("app").getImmediate(),s=i.getProvider(hVe),a=i.getProvider(pVe),l=i.getProvider(fVe);return new nB(o,s,a,l,r,e)};jn(new gn(_ne,n,"PUBLIC").setMultipleInstances(!0)),Qe(bne,Sne,t),Qe(bne,Sne,"esm2017")}function Ene(e=Vi(),t=tB){let i=Ei(tt(e),_ne).getImmediate({identifier:t}),r=Nc("functions");return r&&xne(i,...r),i}function xne(e,t,n){dVe(tt(e),t,n)}gVe(fetch.bind(self));var ab=class{constructor(t){return t}},Dne="functions",iB=class{constructor(){return ir(Dne)}};var rB=new ce("angularfire2.functions-instances");function mVe(e,t){let n=mr(Dne,e,t);return n&&new ab(n)}function vVe(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new ab(i)}}var yVe={provide:iB,deps:[[new gt,rB]]},CVe={provide:ab,useFactory:mVe,deps:[[new gt,rB],ti]};function Tne(e,...t){return Qe("angularfire",Fn.full,"fn"),hn([CVe,yVe,{provide:rB,useFactory:vVe(e),multi:!0,deps:[De,bt,An,Ri,[new gt,la],[new gt,Ti],...t]}])}var Rne=It(Ene,!0);var wVe="/firebase-messaging-sw.js",bVe="/firebase-cloud-messaging-push-scope",kne="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",SVe="https://fcmregistrations.googleapis.com/v1",One="google.c.a.c_id",_Ve="google.c.a.c_l",EVe="google.c.a.ts",xVe="google.c.a.e";var qT=function(e){return e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked",e}(qT||{});function Ac(e){let t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function DVe(e){let t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(n),r=new Uint8Array(i.length);for(let o=0;o<i.length;++o)r[o]=i.charCodeAt(o);return r}var oB="fcm_token_details_db",TVe=5,Ine="fcm_token_object_Store";function RVe(e){return N(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(o=>o.name).includes(oB))return null;let t=null;return(yield Wv(oB,TVe,{upgrade:(i,r,o,s)=>N(this,null,function*(){var a;if(r<2||!i.objectStoreNames.contains(Ine))return;let l=s.objectStore(Ine),c=yield l.index("fcmSenderId").get(e);if(yield l.clear(),!!c){if(r===2){let u=c;if(!u.auth||!u.p256dh||!u.endpoint)return;t={token:u.fcmToken,createTime:(a=u.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:typeof u.vapidKey=="string"?u.vapidKey:Ac(u.vapidKey)}}}else if(r===3){let u=c;t={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Ac(u.auth),p256dh:Ac(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Ac(u.vapidKey)}}}else if(r===4){let u=c;t={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Ac(u.auth),p256dh:Ac(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Ac(u.vapidKey)}}}}})})).close(),yield Nb(oB),yield Nb("fcm_vapid_details_db"),yield Nb("undefined"),IVe(t)?t:null})}function IVe(e){if(!e||!e.subscriptionOptions)return!1;let{subscriptionOptions:t}=e;return typeof e.createTime=="number"&&e.createTime>0&&typeof e.token=="string"&&e.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}var FVe="firebase-messaging-database",AVe=1,lb="firebase-messaging-store",sB=null;function Nne(){return sB||(sB=Wv(FVe,AVe,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(lb)}}})),sB}function MVe(e){return N(this,null,function*(){let t=Lne(e),i=yield(yield Nne()).transaction(lb).objectStore(lb).get(t);if(i)return i;{let r=yield RVe(e.appConfig.senderId);if(r)return yield cB(e,r),r}})}function cB(e,t){return N(this,null,function*(){let n=Lne(e),r=(yield Nne()).transaction(lb,"readwrite");return yield r.objectStore(lb).put(t,n),yield r.done,t})}function Lne({appConfig:e}){return e.appId}var PVe={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},so=new Oa("messaging","Messaging",PVe);function kVe(e,t){return N(this,null,function*(){let n=yield dB(e),i=Vne(t),r={method:"POST",headers:n,body:JSON.stringify(i)},o;try{o=yield(yield fetch(uB(e.appConfig),r)).json()}catch(s){throw so.create("token-subscribe-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw so.create("token-subscribe-failed",{errorInfo:s})}if(!o.token)throw so.create("token-subscribe-no-token");return o.token})}function OVe(e,t){return N(this,null,function*(){let n=yield dB(e),i=Vne(t.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(i)},o;try{o=yield(yield fetch(`${uB(e.appConfig)}/${t.token}`,r)).json()}catch(s){throw so.create("token-update-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw so.create("token-update-failed",{errorInfo:s})}if(!o.token)throw so.create("token-update-no-token");return o.token})}function NVe(e,t){return N(this,null,function*(){let i={method:"DELETE",headers:yield dB(e)};try{let o=yield(yield fetch(`${uB(e.appConfig)}/${t}`,i)).json();if(o.error){let s=o.error.message;throw so.create("token-unsubscribe-failed",{errorInfo:s})}}catch(r){throw so.create("token-unsubscribe-failed",{errorInfo:r?.toString()})}})}function uB({projectId:e}){return`${SVe}/projects/${e}/registrations`}function dB(n){return N(this,arguments,function*({appConfig:e,installations:t}){let i=yield t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${i}`})})}function Vne({p256dh:e,auth:t,endpoint:n,vapidKey:i}){let r={web:{endpoint:n,auth:t,p256dh:e}};return i!==kne&&(r.web.applicationPubKey=i),r}var LVe=7*24*60*60*1e3;function VVe(e){return N(this,null,function*(){let t=yield GVe(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:Ac(t.getKey("auth")),p256dh:Ac(t.getKey("p256dh"))},i=yield MVe(e.firebaseDependencies);if(i){if(HVe(i.subscriptionOptions,n))return Date.now()>=i.createTime+LVe?BVe(e,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{yield NVe(e.firebaseDependencies,i.token)}catch(r){console.warn(r)}return Fne(e.firebaseDependencies,n)}else return Fne(e.firebaseDependencies,n)})}function BVe(e,t){return N(this,null,function*(){try{let n=yield OVe(e.firebaseDependencies,t),i=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return yield cB(e.firebaseDependencies,i),n}catch(n){throw n}})}function Fne(e,t){return N(this,null,function*(){let i={token:yield kVe(e,t),createTime:Date.now(),subscriptionOptions:t};return yield cB(e,i),i.token})}function GVe(e,t){return N(this,null,function*(){let n=yield e.pushManager.getSubscription();return n||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:DVe(t)})})}function HVe(e,t){let n=t.vapidKey===e.vapidKey,i=t.endpoint===e.endpoint,r=t.auth===e.auth,o=t.p256dh===e.p256dh;return n&&i&&r&&o}function Ane(e){let t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return zVe(t,e),UVe(t,e),jVe(t,e),t}function zVe(e,t){if(!t.notification)return;e.notification={};let n=t.notification.title;n&&(e.notification.title=n);let i=t.notification.body;i&&(e.notification.body=i);let r=t.notification.image;r&&(e.notification.image=r);let o=t.notification.icon;o&&(e.notification.icon=o)}function UVe(e,t){t.data&&(e.data=t.data)}function jVe(e,t){var n,i,r,o,s;if(!t.fcmOptions&&!(!((n=t.notification)===null||n===void 0)&&n.click_action))return;e.fcmOptions={};let a=(r=(i=t.fcmOptions)===null||i===void 0?void 0:i.link)!==null&&r!==void 0?r:(o=t.notification)===null||o===void 0?void 0:o.click_action;a&&(e.fcmOptions.link=a);let l=(s=t.fcmOptions)===null||s===void 0?void 0:s.analytics_label;l&&(e.fcmOptions.analyticsLabel=l)}function WVe(e){return typeof e=="object"&&!!e&&One in e}qVe("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function qVe(e,t){let n=[];for(let i=0;i<e.length;i++)n.push(e.charAt(i)),i<t.length&&n.push(t.charAt(i));return n.join("")}function KVe(e){if(!e||!e.options)throw aB("App Configuration Object");if(!e.name)throw aB("App Name");let t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(let i of t)if(!n[i])throw aB(i);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function aB(e){return so.create("missing-app-config-values",{valueName:e})}var lB=class{constructor(t,n,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let r=KVe(t);this.firebaseDependencies={app:t,appConfig:r,installations:n,analyticsProvider:i}}_delete(){return Promise.resolve()}};function YVe(e){return N(this,null,function*(){try{e.swRegistration=yield navigator.serviceWorker.register(wVe,{scope:bVe}),e.swRegistration.update().catch(()=>{})}catch(t){throw so.create("failed-service-worker-registration",{browserErrorMessage:t?.message})}})}function QVe(e,t){return N(this,null,function*(){if(!t&&!e.swRegistration&&(yield YVe(e)),!(!t&&e.swRegistration)){if(!(t instanceof ServiceWorkerRegistration))throw so.create("invalid-sw-registration");e.swRegistration=t}})}function XVe(e,t){return N(this,null,function*(){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=kne)})}function $Ve(e,t){return N(this,null,function*(){if(!navigator)throw so.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw so.create("permission-blocked");return yield XVe(e,t?.vapidKey),yield QVe(e,t?.serviceWorkerRegistration),VVe(e)})}function ZVe(e,t,n){return N(this,null,function*(){let i=JVe(t);(yield e.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:n[One],message_name:n[_Ve],message_time:n[EVe],message_device_time:Math.floor(Date.now()/1e3)})})}function JVe(e){switch(e){case qT.NOTIFICATION_CLICKED:return"notification_open";case qT.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function e6e(e,t){return N(this,null,function*(){let n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===qT.PUSH_RECEIVED&&(typeof e.onMessageHandler=="function"?e.onMessageHandler(Ane(n)):e.onMessageHandler.next(Ane(n)));let i=n.data;WVe(i)&&i[xVe]==="1"&&(yield ZVe(e,n.messageType,i))})}var Mne="@firebase/messaging",Pne="0.12.12";var t6e=e=>{let t=new lB(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>e6e(t,n)),t},n6e=e=>{let t=e.getProvider("messaging").getImmediate();return{getToken:i=>$Ve(t,i)}};function i6e(){jn(new gn("messaging",t6e,"PUBLIC")),jn(new gn("messaging-internal",n6e,"PRIVATE")),Qe(Mne,Pne),Qe(Mne,Pne,"esm2017")}function hB(){return N(this,null,function*(){try{yield Dd()}catch{return!1}return typeof window<"u"&&cs()&&Hv()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function Bne(e=Vi()){return hB().then(t=>{if(!t)throw so.create("unsupported-browser")},t=>{throw so.create("indexed-db-unsupported")}),Ei(tt(e),"messaging").getImmediate()}i6e();var cb=class{constructor(t){return t}},Gne="messaging",fB=class{constructor(){return ir(Gne)}};var Hne="__angularfire_symbol__messagingIsSupported",pB="__angularfire_symbol__messagingIsSupportedValue";globalThis[Hne]||=hB().then(e=>globalThis[pB]=e).catch(()=>globalThis[pB]=!1);var KT={async:()=>globalThis[Hne],sync:()=>{let e=globalThis[pB];if(e===void 0)throw new Error(tg("Messaging"));return e}},gB=new ce("angularfire2.messaging-instances");function r6e(e,t){if(!KT.sync())return null;let n=mr(Gne,e,t);return n&&new cb(n)}function o6e(e){return(t,n)=>{if(!KT.sync())return null;let i=t.runOutsideAngular(()=>e(n));return new cb(i)}}var s6e={provide:fB,deps:[[new gt,gB]]},a6e={provide:cb,useFactory:r6e,deps:[[new gt,gB],ti]};function zne(e,...t){return Qe("angularfire",Fn.full,"fcm"),hn([a6e,s6e,{provide:Ya,useValue:KT.async,multi:!0},{provide:gB,useFactory:o6e(e),multi:!0,deps:[De,bt,An,Ri,...t]}])}var p1t=KT.async;var Une=It(Bne,!0);var ub=class{constructor(t){return t}},jne="storage",mB=class{constructor(){return ir(jne)}};var vB=new ce("angularfire2.storage-instances");function l6e(e,t){let n=mr(jne,e,t);return n&&new ub(n)}function c6e(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new ub(i)}}var u6e={provide:mB,deps:[[new gt,vB]]},d6e={provide:ub,useFactory:l6e,deps:[[new gt,vB],ti]};function Wne(e,...t){return Qe("angularfire",Fn.full,"gcs"),hn([d6e,u6e,{provide:vB,useFactory:c6e(e),multi:!0,deps:[De,bt,An,Ri,[new gt,la],[new gt,Ti],...t]}])}var qne=It(NJ,!0);var yB="@firebase/remote-config",Kne="0.4.9";var Yne="remote-config";var h6e={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},Fo=new Oa("remoteconfig","Remote Config",h6e);function Qne(e=Vi()){return e=tt(e),Ei(e,Yne).getImmediate()}function Xne(e){let t=tt(e);return t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(()=>{t._isInitializationComplete=!0})),t._initializePromise}var CB=class{constructor(t,n,i,r){this.client=t,this.storage=n,this.storageCache=i,this.logger=r}isCachedDataFresh(t,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let i=Date.now()-n,r=i<=t;return this.logger.debug(`Config fetch cache check. Cache age millis: ${i}. Cache max age millis (minimumFetchIntervalMillis setting): ${t}. Is cache hit: ${r}.`),r}fetch(t){return N(this,null,function*(){let[n,i]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(i&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n))return i;t.eTag=i&&i.eTag;let r=yield this.client.fetch(t),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return r.status===200&&o.push(this.storage.setLastSuccessfulFetchResponse(r)),yield Promise.all(o),r})}};function f6e(e=navigator){return e.languages&&e.languages[0]||e.language}var wB=class{constructor(t,n,i,r,o,s){this.firebaseInstallations=t,this.sdkVersion=n,this.namespace=i,this.projectId=r,this.apiKey=o,this.appId=s}fetch(t){return N(this,null,function*(){let[n,i]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:i,app_id:this.appId,language_code:f6e()},l={method:"POST",headers:s,body:JSON.stringify(a)},c=fetch(o,l),u=new Promise((v,C)=>{t.signal.addEventListener(()=>{let S=new Error("The operation was aborted.");S.name="AbortError",C(S)})}),d;try{yield Promise.race([c,u]),d=yield c}catch(v){let C="fetch-client-network";throw v?.name==="AbortError"&&(C="fetch-timeout"),Fo.create(C,{originalErrorMessage:v?.message})}let h=d.status,p=d.headers.get("ETag")||void 0,g,m;if(d.status===200){let v;try{v=yield d.json()}catch(C){throw Fo.create("fetch-client-parse",{originalErrorMessage:C?.message})}g=v.entries,m=v.state}if(m==="INSTANCE_STATE_UNSPECIFIED"?h=500:m==="NO_CHANGE"?h=304:(m==="NO_TEMPLATE"||m==="EMPTY_CONFIG")&&(g={}),h!==304&&h!==200)throw Fo.create("fetch-status",{httpStatus:h});return{status:h,eTag:p,config:g}})}};function p6e(e,t){return new Promise((n,i)=>{let r=Math.max(t-Date.now(),0),o=setTimeout(n,r);e.addEventListener(()=>{clearTimeout(o),i(Fo.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function g6e(e){if(!(e instanceof Qs)||!e.customData)return!1;let t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var bB=class{constructor(t,n){this.client=t,this.storage=n}fetch(t){return N(this,null,function*(){let n=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(t,n)})}attemptFetch(r,o){return N(this,arguments,function*(t,{throttleEndTimeMillis:n,backoffCount:i}){yield p6e(t.signal,n);try{let s=yield this.client.fetch(t);return yield this.storage.deleteThrottleMetadata(),s}catch(s){if(!g6e(s))throw s;let a={throttleEndTimeMillis:Date.now()+rp(i),backoffCount:i+1};return yield this.storage.setThrottleMetadata(a),this.attemptFetch(t,a)}})}};var m6e=60*1e3,v6e=12*60*60*1e3,SB=class{constructor(t,n,i,r,o){this.app=t,this._client=n,this._storageCache=i,this._storage=r,this._logger=o,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:m6e,minimumFetchIntervalMillis:v6e},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}};function YT(e,t){let n=e.target.error||void 0;return Fo.create(t,{originalErrorMessage:n&&n?.message})}var Yf="app_namespace_store",y6e="firebase_remote_config",C6e=1;function w6e(){return new Promise((e,t)=>{try{let n=indexedDB.open(y6e,C6e);n.onerror=i=>{t(YT(i,"storage-open"))},n.onsuccess=i=>{e(i.target.result)},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(Yf,{keyPath:"compositeKey"})}}}catch(n){t(Fo.create("storage-open",{originalErrorMessage:n?.message}))}})}var _B=class{constructor(t,n,i,r=w6e()){this.appId=t,this.appName=n,this.namespace=i,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(t){return this.set("last_fetch_status",t)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(t){return this.set("last_successful_fetch_timestamp_millis",t)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(t){return this.set("last_successful_fetch_response",t)}getActiveConfig(){return this.get("active_config")}setActiveConfig(t){return this.set("active_config",t)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(t){return this.set("active_config_etag",t)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(t){return this.set("throttle_metadata",t)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(t){return N(this,null,function*(){let n=yield this.openDbPromise;return new Promise((i,r)=>{let s=n.transaction([Yf],"readonly").objectStore(Yf),a=this.createCompositeKey(t);try{let l=s.get(a);l.onerror=c=>{r(YT(c,"storage-get"))},l.onsuccess=c=>{let u=c.target.result;i(u?u.value:void 0)}}catch(l){r(Fo.create("storage-get",{originalErrorMessage:l?.message}))}})})}set(t,n){return N(this,null,function*(){let i=yield this.openDbPromise;return new Promise((r,o)=>{let a=i.transaction([Yf],"readwrite").objectStore(Yf),l=this.createCompositeKey(t);try{let c=a.put({compositeKey:l,value:n});c.onerror=u=>{o(YT(u,"storage-set"))},c.onsuccess=()=>{r()}}catch(c){o(Fo.create("storage-set",{originalErrorMessage:c?.message}))}})})}delete(t){return N(this,null,function*(){let n=yield this.openDbPromise;return new Promise((i,r)=>{let s=n.transaction([Yf],"readwrite").objectStore(Yf),a=this.createCompositeKey(t);try{let l=s.delete(a);l.onerror=c=>{r(YT(c,"storage-delete"))},l.onsuccess=()=>{i()}}catch(l){r(Fo.create("storage-delete",{originalErrorMessage:l?.message}))}})})}createCompositeKey(t){return[this.appId,this.appName,this.namespace,t].join()}};var EB=class{constructor(t){this.storage=t}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){return N(this,null,function*(){let t=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),i=this.storage.getActiveConfig(),r=yield t;r&&(this.lastFetchStatus=r);let o=yield n;o&&(this.lastSuccessfulFetchTimestampMillis=o);let s=yield i;s&&(this.activeConfig=s)})}setLastFetchStatus(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)}setLastSuccessfulFetchTimestampMillis(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)}setActiveConfig(t){return this.activeConfig=t,this.storage.setActiveConfig(t)}};function b6e(){jn(new gn(Yne,e,"PUBLIC").setMultipleInstances(!0)),Qe(yB,Kne),Qe(yB,Kne,"esm2017");function e(t,{instanceIdentifier:n}){let i=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Fo.create("registration-window");if(!cs())throw Fo.create("indexed-db-unavailable");let{projectId:o,apiKey:s,appId:a}=i.options;if(!o)throw Fo.create("registration-project-id");if(!s)throw Fo.create("registration-api-key");if(!a)throw Fo.create("registration-app-id");n=n||"firebase";let l=new _B(a,i.name,n),c=new EB(l),u=new La(yB);u.logLevel=lo.ERROR;let d=new wB(r,Lc,n,o,s,a),h=new bB(d,l),p=new CB(h,l,c,u),g=new SB(i,p,c,l,u);return Xne(g),g}}function $ne(){return N(this,null,function*(){if(!cs())return!1;try{return yield Dd()}catch{return!1}})}b6e();var db=class{constructor(t){return t}},Zne="remote-config",xB=class{constructor(){return ir(Zne)}};var DB="__angularfire_symbol__remoteConfigIsSupportedValue",Jne="__angularfire_symbol__remoteConfigIsSupported";globalThis[Jne]||=$ne().then(e=>globalThis[DB]=e).catch(()=>globalThis[DB]=!1);var QT={async:()=>globalThis[Jne],sync:()=>{let e=globalThis[DB];if(e===void 0)throw new Error(tg("RemoteConfig"));return e}},TB=new ce("angularfire2.remote-config-instances");function S6e(e,t){if(!QT.sync())return null;let n=mr(Zne,e,t);return n&&new db(n)}function _6e(e){return(t,n)=>{if(!QT.sync())return null;let i=t.runOutsideAngular(()=>e(n));return new db(i)}}var E6e={provide:xB,deps:[[new gt,TB]]},x6e={provide:db,useFactory:S6e,deps:[[new gt,TB],ti]};function eie(e,...t){return Qe("angularfire",Fn.full,"rc"),hn([x6e,E6e,{provide:Ya,useValue:QT.async,multi:!0},{provide:TB,useFactory:_6e(e),multi:!0,deps:[De,bt,An,Ri,...t]}])}var i_t=QT.async;var tie=It(Qne,!0);var RB={firebaseConfig:{projectId:"expense-tracker-app-ee455",appId:"1:652658231358:web:16ee9e447afa0f2385696f",storageBucket:"expense-tracker-app-ee455.appspot.com",apiKey:"AIzaSyDOMgJPMGTfIHUNZDV8k4z4jXNGEaXMZBo",authDomain:"expense-tracker-app-ee455.firebaseapp.com",messagingSenderId:"652658231358",measurementId:"G-8E6SEFV1FX"}};var fb="Service workers are disabled or not supported by this browser";function D6e(e){return Ad(()=>Gc(new Error(e)))}var wv=class{constructor(t){if(this.serviceWorker=t,!t)this.worker=this.events=this.registration=D6e(fb);else{let i=di(t,"controllerchange").pipe(ae(()=>t.controller)),r=Ad(()=>se(t.controller)),o=ds(r,i);this.worker=o.pipe(xt(u=>!!u)),this.registration=this.worker.pipe(Ne(()=>t.getRegistration()));let c=di(t,"message").pipe(ae(u=>u.data)).pipe(xt(u=>u&&u.type)).pipe(jR());c.connect(),this.events=c}}postMessage(t,n){return this.worker.pipe(Dt(1),nn(i=>{i.postMessage(B({action:t},n))})).toPromise().then(()=>{})}postMessageWithOperation(t,n,i){let r=this.waitForOperationCompleted(i),o=this.postMessage(t,n);return Promise.all([o,r]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(t){let n;return typeof t=="string"?n=i=>i.type===t:n=i=>t.includes(i.type),this.events.pipe(xt(n))}nextEventOfType(t){return this.eventsOfType(t).pipe(Dt(1))}waitForOperationCompleted(t){return this.eventsOfType("OPERATION_COMPLETED").pipe(xt(n=>n.nonce===t),Dt(1),ae(n=>{if(n.result!==void 0)return n.result;throw new Error(n.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},T6e=(()=>{class e{get isEnabled(){return this.sw.isEnabled}constructor(n){if(this.sw=n,this.pushManager=null,this.subscriptionChanges=new nt,!n.isEnabled){this.messages=Uc,this.notificationClicks=Uc,this.subscription=Uc;return}this.messages=this.sw.eventsOfType("PUSH").pipe(ae(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(ae(r=>r.data)),this.pushManager=this.sw.registration.pipe(ae(r=>r.pushManager));let i=this.pushManager.pipe(Ne(r=>r.getSubscription()));this.subscription=zc(i,this.subscriptionChanges)}requestSubscription(n){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(fb));let i={userVisibleOnly:!0},r=this.decodeBase64(n.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(r.length));for(let s=0;s<r.length;s++)o[s]=r.charCodeAt(s);return i.applicationServerKey=o,this.pushManager.pipe(Ne(s=>s.subscribe(i)),Dt(1)).toPromise().then(s=>(this.subscriptionChanges.next(s),s))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(fb));let n=i=>{if(i===null)throw new Error("Not subscribed to push notifications.");return i.unsubscribe().then(r=>{if(!r)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(Dt(1),Ne(n)).toPromise()}decodeBase64(n){return atob(n)}static{this.\u0275fac=function(i){return new(i||e)($(wv))}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac})}}return e})(),R6e=(()=>{class e{get isEnabled(){return this.sw.isEnabled}constructor(n){if(this.sw=n,!n.isEnabled){this.versionUpdates=Uc,this.unrecoverable=Uc;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(fb));let n=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:n},n)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(fb));let n=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:n},n)}static{this.\u0275fac=function(i){return new(i||e)($(wv))}}static{this.\u0275prov=oe({token:e,factory:e.\u0275fac})}}return e})();var nie=new ce("");function I6e(e,t,n,i){return()=>{if(!(Vp(i)&&"serviceWorker"in navigator&&n.enabled!==!1))return;navigator.serviceWorker.addEventListener("controllerchange",()=>{navigator.serviceWorker.controller!==null&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})});let r;if(typeof n.registrationStrategy=="function")r=n.registrationStrategy();else{let[s,...a]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":r=se(null);break;case"registerWithDelay":r=iie(+a[0]||0);break;case"registerWhenStable":r=a[0]?zc(rie(e),iie(+a[0])):rie(e);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}e.get(De).runOutsideAngular(()=>r.pipe(Dt(1)).subscribe(()=>navigator.serviceWorker.register(t,{scope:n.scope}).catch(s=>console.error("Service worker registration failed with:",s))))}}function iie(e){return se(null).pipe(Zv(e))}function rie(e){return e.get(Uo).isStable.pipe(xt(n=>n))}function F6e(e,t){return new wv(Vp(t)&&e.enabled!==!1?navigator.serviceWorker:void 0)}var hb=class{};function oie(e,t={}){return hn([T6e,R6e,{provide:nie,useValue:e},{provide:hb,useValue:t},{provide:wv,useFactory:F6e,deps:[hb,Sn]},{provide:Ya,useFactory:I6e,deps:[bt,nie,hb,Sn],multi:!0}])}var sie={providers:[{provide:pu,useValue:RB.firebaseConfig},Jz(zJ),yz(),M7(()=>P7(RB.firebaseConfig)),V7(()=>H7()),Iee(()=>Tee()),Ree,GV,q9(()=>X9()),Cne(()=>wne()),Tne(()=>Rne()),zne(()=>Une()),Wne(()=>qne()),eie(()=>tie()),oie("ngsw-worker.js",{enabled:!E0(),registrationStrategy:"registerWhenStable:30000"})]};var aie=(()=>{class e{onDoubleClick(n){n.preventDefault()}constructor(n){this.auth=n}ngOnInit(){this.auth.initializeUserState()}static{this.\u0275fac=function(i){return new(i||e)(J(bo))}}static{this.\u0275cmp=je({type:e,selectors:[["app-root"]],hostBindings:function(i,r){i&1&&be("dblclick",function(s){return r.onDoubleClick(s)})},standalone:!0,features:[Br([G9()]),We],decls:1,vars:0,template:function(i,r){i&1&&he(0,"router-outlet")},dependencies:[_n,W0]})}}return e})();vz(aie,sie).catch(e=>console.error(e));
