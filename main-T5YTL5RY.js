import{$ as Ay,A as fM,B as xs,C as aa,D as Ry,E as yd,F as wd,G as pM,H as gM,I as mM,J as vM,K as Sd,L as zl,M as et,N as bt,O as hi,P as Os,Q as _d,R as fp,S as Et,T as jt,U as ao,V as CM,W as nn,X as pp,Y as ge,Z as Ty,_ as Iy,a as sM,aa as My,b as up,ba as Py,c as rM,ca as gp,d as oM,da as mp,e as ne,ea as Fy,f as Ul,fa as la,g as dp,h as aM,i as lM,j as oo,k as Wl,l as jl,m as cM,n as Ey,o as Dy,p as uM,q as Ps,r as dM,s as is,t as oa,u as Cd,v as ss,w as Fs,x as hp,y as tn,z as hM}from"./chunk-R6OJBXS7.js";import{a as B,b as se,c as cp,f as F}from"./chunk-FO65GQC2.js";function nj(e,t){return Object.is(e,t)}var sn=null,vp=!1,Cp=1,ql=Symbol("SIGNAL");function qe(e){let t=sn;return sn=e,t}var xy={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function yM(e){if(vp)throw new Error("");if(sn===null)return;sn.consumerOnSignalRead(e);let t=sn.nextProducerIndex++;if($l(sn),t<sn.producerNode.length&&sn.producerNode[t]!==e&&bd(sn)){let n=sn.producerNode[t];yp(n,sn.producerIndexOfThis[t])}sn.producerNode[t]!==e&&(sn.producerNode[t]=e,sn.producerIndexOfThis[t]=bd(sn)?DM(e,sn,t):0),sn.producerLastReadVersion[t]=e.version}function ij(){Cp++}function sj(e){if(!(bd(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Cp)){if(!e.producerMustRecompute(e)&&!Oy(e)){e.dirty=!1,e.lastCleanEpoch=Cp;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=Cp}}function wM(e){if(e.liveConsumerNode===void 0)return;let t=vp;vp=!0;try{for(let n of e.liveConsumerNode)n.dirty||rj(n)}finally{vp=t}}function SM(){return sn?.consumerAllowSignalWrites!==!1}function rj(e){e.dirty=!0,wM(e),e.consumerMarkedDirty?.(e)}function _M(e){return e&&(e.nextProducerIndex=0),qe(e)}function bM(e,t){if(qe(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(bd(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)yp(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Oy(e){$l(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],i=e.producerLastReadVersion[t];if(i!==n.version||(sj(n),i!==n.version))return!0}return!1}function EM(e){if($l(e),bd(e))for(let t=0;t<e.producerNode.length;t++)yp(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function DM(e,t,n){if(RM(e),$l(e),e.liveConsumerNode.length===0)for(let i=0;i<e.producerNode.length;i++)e.producerIndexOfThis[i]=DM(e.producerNode[i],e,i);return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function yp(e,t){if(RM(e),$l(e),e.liveConsumerNode.length===1)for(let i=0;i<e.producerNode.length;i++)yp(e.producerNode[i],e.producerIndexOfThis[i]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let i=e.liveConsumerIndexOfThis[t],s=e.liveConsumerNode[t];$l(s),s.producerIndexOfThis[i]=t}}function bd(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function $l(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function RM(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function oj(){throw new Error}var TM=oj;function IM(){TM()}function AM(e){TM=e}var aj=null;function MM(e){let t=Object.create(FM);t.value=e;let n=()=>(yM(t),t.value);return n[ql]=t,n}function Ny(e,t){SM()||IM(),e.equal(e.value,t)||(e.value=t,lj(e))}function PM(e,t){SM()||IM(),Ny(e,t(e.value))}var FM=se(B({},xy),{equal:nj,value:void 0});function lj(e){e.version++,ij(),wM(e),aj?.()}function fe(e){return typeof e=="function"}function Kl(e){let n=e(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var wp=Kl(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,s)=>`${s+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ca(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var yt=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let r of n)r.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(fe(i))try{i()}catch(r){t=r instanceof wp?r.errors:[r]}let{_finalizers:s}=this;if(s){this._finalizers=null;for(let r of s)try{xM(r)}catch(o){t=t??[],o instanceof wp?t=[...t,...o.errors]:t.push(o)}}if(t)throw new wp(t)}}add(t){var n;if(t&&t!==this)if(this.closed)xM(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&ca(n,t)}remove(t){let{_finalizers:n}=this;n&&ca(n,t),t instanceof e&&t._removeParent(this)}};yt.EMPTY=(()=>{let e=new yt;return e.closed=!0,e})();var ky=yt.EMPTY;function Sp(e){return e instanceof yt||e&&"closed"in e&&fe(e.remove)&&fe(e.add)&&fe(e.unsubscribe)}function xM(e){fe(e)?e():e.unsubscribe()}var rs={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ql={setTimeout(e,t,...n){let{delegate:i}=Ql;return i?.setTimeout?i.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=Ql;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function _p(e){Ql.setTimeout(()=>{let{onUnhandledError:t}=rs;if(t)t(e);else throw e})}function ur(){}var OM=Ly("C",void 0,void 0);function NM(e){return Ly("E",void 0,e)}function kM(e){return Ly("N",e,void 0)}function Ly(e,t,n){return{kind:e,value:t,error:n}}var ua=null;function Yl(e){if(rs.useDeprecatedSynchronousErrorHandling){let t=!ua;if(t&&(ua={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:i}=ua;if(ua=null,n)throw i}}else e()}function LM(e){rs.useDeprecatedSynchronousErrorHandling&&ua&&(ua.errorThrown=!0,ua.error=e)}var da=class extends yt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Sp(t)&&t.add(this)):this.destination=dj}static create(t,n,i){return new dr(t,n,i)}next(t){this.isStopped?By(kM(t),this):this._next(t)}error(t){this.isStopped?By(NM(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?By(OM,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},cj=Function.prototype.bind;function Vy(e,t){return cj.call(e,t)}var Gy=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(i){bp(i)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(i){bp(i)}else bp(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){bp(n)}}},dr=class extends da{constructor(t,n,i){super();let s;if(fe(t)||!t)s={next:t??void 0,error:n??void 0,complete:i??void 0};else{let r;this&&rs.useDeprecatedNextContext?(r=Object.create(t),r.unsubscribe=()=>this.unsubscribe(),s={next:t.next&&Vy(t.next,r),error:t.error&&Vy(t.error,r),complete:t.complete&&Vy(t.complete,r)}):s=t}this.destination=new Gy(s)}};function bp(e){rs.useDeprecatedSynchronousErrorHandling?LM(e):_p(e)}function uj(e){throw e}function By(e,t){let{onStoppedNotification:n}=rs;n&&Ql.setTimeout(()=>n(e,t))}var dj={closed:!0,next:ur,error:uj,complete:ur};var Jl=typeof Symbol=="function"&&Symbol.observable||"@@observable";function yn(e){return e}function Ep(...e){return Hy(e)}function Hy(e){return e.length===0?yn:e.length===1?e[0]:function(n){return e.reduce((i,s)=>s(i),n)}}var re=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new e;return i.source=this,i.operator=n,i}subscribe(n,i,s){let r=fj(n)?n:new dr(n,i,s);return Yl(()=>{let{operator:o,source:a}=this;r.add(o?o.call(r,a):a?this._subscribe(r):this._trySubscribe(r))}),r}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=VM(i),new i((s,r)=>{let o=new dr({next:a=>{try{n(a)}catch(l){r(l),o.unsubscribe()}},error:r,complete:s});this.subscribe(o)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[Jl](){return this}pipe(...n){return Hy(n)(this)}toPromise(n){return n=VM(n),new n((i,s)=>{let r;this.subscribe(o=>r=o,o=>s(o),()=>i(r))})}}return e.create=t=>new e(t),e})();function VM(e){var t;return(t=e??rs.Promise)!==null&&t!==void 0?t:Promise}function hj(e){return e&&fe(e.next)&&fe(e.error)&&fe(e.complete)}function fj(e){return e&&e instanceof da||hj(e)&&Sp(e)}function Uy(e){return fe(e?.lift)}function Ce(e){return t=>{if(Uy(t))return t.lift(function(n){try{return e(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(e,t,n,i,s){return new Ed(e,t,n,i,s)}var Ed=class extends da{constructor(t,n,i,s,r,o){super(t),this.onFinalize=r,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){t.error(l)}}:super._next,this._error=s?function(a){try{s(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Xl(){return Ce((e,t)=>{let n=null;e._refCount++;let i=de(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let s=e._connection,r=n;n=null,s&&(!r||s===r)&&s.unsubscribe(),t.unsubscribe()});e.subscribe(i),i.closed||(n=e.connect())})}var Zl=class extends re{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Uy(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new yt;let n=this.getSubject();t.add(this.source.subscribe(de(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=yt.EMPTY)}return t}refCount(){return Xl()(this)}};var BM=Kl(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Le=(()=>{class e extends re{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new Dp(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new BM}next(n){Yl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){Yl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Yl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:s,observers:r}=this;return i||s?ky:(this.currentObservers=null,r.push(n),new yt(()=>{this.currentObservers=null,ca(r,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:s,isStopped:r}=this;i?n.error(s):r&&n.complete()}asObservable(){let n=new re;return n.source=this,n}}return e.create=(t,n)=>new Dp(t,n),e})(),Dp=class extends Le{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,t)}error(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&i!==void 0?i:ky}};var vt=class extends Le{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:i}=this;if(t)throw n;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var Dd={now(){return(Dd.delegate||Date).now()},delegate:void 0};var lo=class extends Le{constructor(t=1/0,n=1/0,i=Dd){super(),this._bufferSize=t,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,n)}next(t){let{isStopped:n,_buffer:i,_infiniteTimeWindow:s,_timestampProvider:r,_windowTime:o}=this;n||(i.push(t),!s&&i.push(r.now()+o)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:s}=this,r=s.slice();for(let o=0;o<r.length&&!t.closed;o+=i?1:2)t.next(r[o]);return this._checkFinalizedStatuses(t),n}_trimBuffer(){let{_bufferSize:t,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:s}=this,r=(s?1:2)*t;if(t<1/0&&r<i.length&&i.splice(0,i.length-r),!s){let o=n.now(),a=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)a=l;a&&i.splice(0,a+1)}}};var Rp=class extends yt{constructor(t,n){super()}schedule(t,n=0){return this}};var Rd={setInterval(e,t,...n){let{delegate:i}=Rd;return i?.setInterval?i.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=Rd;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var ec=class extends Rp{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var i;if(this.closed)return this;this.state=t;let s=this.id,r=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(r,s,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(r,this.id,n),this}requestAsyncId(t,n,i=0){return Rd.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&Rd.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let i=!1,s;try{this.work(t)}catch(r){i=!0,s=r||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ca(i,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var tc=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,i){return new this.schedulerActionCtor(this,t).schedule(i,n)}};tc.now=Dd.now;var nc=class extends tc{constructor(t,n=tc.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,i){for(;t=n.shift();)t.unsubscribe();throw i}}};var Fi=new nc(ec),Wy=Fi;var Tp=class extends ec{constructor(t,n){super(t,n),this.scheduler=t,this.work=n}schedule(t,n=0){return n>0?super.schedule(t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)}execute(t,n){return n>0||this.closed?super.execute(t,n):this._execute(t,n)}requestAsyncId(t,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(t,n,i):(t.flush(this),0)}};var Ip=class extends nc{};var jy=new Ip(Tp);var zt=new re(e=>e.complete());function Ap(e){return e&&fe(e.schedule)}function zy(e){return e[e.length-1]}function co(e){return fe(zy(e))?e.pop():void 0}function Ns(e){return Ap(zy(e))?e.pop():void 0}function GM(e,t){return typeof zy(e)=="number"?e.pop():t}var ic=e=>e&&typeof e.length=="number"&&typeof e!="function";function Mp(e){return fe(e?.then)}function Pp(e){return fe(e[Jl])}function Fp(e){return Symbol.asyncIterator&&fe(e?.[Symbol.asyncIterator])}function xp(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function pj(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Op=pj();function Np(e){return fe(e?.[Op])}function kp(e){return rM(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:i,done:s}=yield up(n.read());if(s)return yield up(void 0);yield yield up(i)}}finally{n.releaseLock()}})}function Lp(e){return fe(e?.getReader)}function Ae(e){if(e instanceof re)return e;if(e!=null){if(Pp(e))return gj(e);if(ic(e))return mj(e);if(Mp(e))return vj(e);if(Fp(e))return HM(e);if(Np(e))return Cj(e);if(Lp(e))return yj(e)}throw xp(e)}function gj(e){return new re(t=>{let n=e[Jl]();if(fe(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function mj(e){return new re(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function vj(e){return new re(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,_p)})}function Cj(e){return new re(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function HM(e){return new re(t=>{wj(e,t).catch(n=>t.error(n))})}function yj(e){return HM(kp(e))}function wj(e,t){var n,i,s,r;return sM(this,void 0,void 0,function*(){try{for(n=oM(e);i=yield n.next(),!i.done;){let o=i.value;if(t.next(o),t.closed)return}}catch(o){s={error:o}}finally{try{i&&!i.done&&(r=n.return)&&(yield r.call(n))}finally{if(s)throw s.error}}t.complete()})}function ii(e,t,n,i=0,s=!1){let r=t.schedule(function(){n(),s?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(r),!s)return r}function fi(e,t=0){return Ce((n,i)=>{n.subscribe(de(i,s=>ii(i,e,()=>i.next(s),t),()=>ii(i,e,()=>i.complete(),t),s=>ii(i,e,()=>i.error(s),t)))})}function xi(e,t=0){return Ce((n,i)=>{i.add(e.schedule(()=>n.subscribe(i),t))})}function UM(e,t){return Ae(e).pipe(xi(t),fi(t))}function WM(e,t){return Ae(e).pipe(xi(t),fi(t))}function jM(e,t){return new re(n=>{let i=0;return t.schedule(function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||this.schedule())})})}function zM(e,t){return new re(n=>{let i;return ii(n,t,()=>{i=e[Op](),ii(n,t,()=>{let s,r;try{({value:s,done:r}=i.next())}catch(o){n.error(o);return}r?n.complete():n.next(s)},0,!0)}),()=>fe(i?.return)&&i.return()})}function Vp(e,t){if(!e)throw new Error("Iterable cannot be null");return new re(n=>{ii(n,t,()=>{let i=e[Symbol.asyncIterator]();ii(n,t,()=>{i.next().then(s=>{s.done?n.complete():n.next(s.value)})},0,!0)})})}function $M(e,t){return Vp(kp(e),t)}function qM(e,t){if(e!=null){if(Pp(e))return UM(e,t);if(ic(e))return jM(e,t);if(Mp(e))return WM(e,t);if(Fp(e))return Vp(e,t);if(Np(e))return zM(e,t);if(Lp(e))return $M(e,t)}throw xp(e)}function Ke(e,t){return t?qM(e,t):Ae(e)}function ee(...e){let t=Ns(e);return Ke(e,t)}function sc(e,t){let n=fe(e)?e:()=>e,i=s=>s.error(n());return new re(t?s=>t.schedule(i,0,s):i)}function $y(e){return!!e&&(e instanceof re||fe(e.lift)&&fe(e.subscribe))}var hr=Kl(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function KM(e){return e instanceof Date&&!isNaN(e)}function oe(e,t){return Ce((n,i)=>{let s=0;n.subscribe(de(i,r=>{i.next(e.call(t,r,s++))}))})}var{isArray:Sj}=Array;function _j(e,t){return Sj(t)?e(...t):e(t)}function rc(e){return oe(t=>_j(e,t))}var{isArray:bj}=Array,{getPrototypeOf:Ej,prototype:Dj,keys:Rj}=Object;function Bp(e){if(e.length===1){let t=e[0];if(bj(t))return{args:t,keys:null};if(Tj(t)){let n=Rj(t);return{args:n.map(i=>t[i]),keys:n}}}return{args:e,keys:null}}function Tj(e){return e&&typeof e=="object"&&Ej(e)===Dj}function Gp(e,t){return e.reduce((n,i,s)=>(n[i]=t[s],n),{})}function fr(...e){let t=Ns(e),n=co(e),{args:i,keys:s}=Bp(e);if(i.length===0)return Ke([],t);let r=new re(Ij(i,t,s?o=>Gp(s,o):yn));return n?r.pipe(rc(n)):r}function Ij(e,t,n=yn){return i=>{QM(t,()=>{let{length:s}=e,r=new Array(s),o=s,a=s;for(let l=0;l<s;l++)QM(t,()=>{let c=Ke(e[l],t),u=!1;c.subscribe(de(i,h=>{r[l]=h,u||(u=!0,a--),a||i.next(n(r.slice()))},()=>{--o||i.complete()}))},i)},i)}}function QM(e,t,n){e?ii(n,e,t):t()}function YM(e,t,n,i,s,r,o,a){let l=[],c=0,u=0,h=!1,f=()=>{h&&!l.length&&!c&&t.complete()},g=y=>c<i?v(y):l.push(y),v=y=>{r&&t.next(y),c++;let C=!1;Ae(n(y,u++)).subscribe(de(t,E=>{s?.(E),r?g(E):t.next(E)},()=>{C=!0},void 0,()=>{if(C)try{for(c--;l.length&&c<i;){let E=l.shift();o?ii(t,o,()=>v(E)):v(E)}f()}catch(E){t.error(E)}}))};return e.subscribe(de(t,g,()=>{h=!0,f()})),()=>{a?.()}}function ot(e,t,n=1/0){return fe(t)?ot((i,s)=>oe((r,o)=>t(i,r,s,o))(Ae(e(i,s))),n):(typeof t=="number"&&(n=t),Ce((i,s)=>YM(i,s,e,n)))}function Td(e=1/0){return ot(yn,e)}function JM(){return Td(1)}function ks(...e){return JM()(Ke(e,Ns(e)))}function Hp(e){return new re(t=>{Ae(e()).subscribe(t)})}function qy(...e){let t=co(e),{args:n,keys:i}=Bp(e),s=new re(r=>{let{length:o}=n;if(!o){r.complete();return}let a=new Array(o),l=o,c=o;for(let u=0;u<o;u++){let h=!1;Ae(n[u]).subscribe(de(r,f=>{h||(h=!0,c--),a[u]=f},()=>l--,void 0,()=>{(!l||!h)&&(c||r.next(i?Gp(i,a):a),r.complete())}))}});return t?s.pipe(rc(t)):s}var Aj=["addListener","removeListener"],Mj=["addEventListener","removeEventListener"],Pj=["on","off"];function Bn(e,t,n,i){if(fe(n)&&(i=n,n=void 0),i)return Bn(e,t,n).pipe(rc(i));let[s,r]=Oj(e)?Mj.map(o=>a=>e[o](t,a,n)):Fj(e)?Aj.map(XM(e,t)):xj(e)?Pj.map(XM(e,t)):[];if(!s&&ic(e))return ot(o=>Bn(o,t,n))(Ae(e));if(!s)throw new TypeError("Invalid event target");return new re(o=>{let a=(...l)=>o.next(1<l.length?l:l[0]);return s(a),()=>r(a)})}function XM(e,t){return n=>i=>e[n](t,i)}function Fj(e){return fe(e.addListener)&&fe(e.removeListener)}function xj(e){return fe(e.on)&&fe(e.off)}function Oj(e){return fe(e.addEventListener)&&fe(e.removeEventListener)}function uo(e=0,t,n=Wy){let i=-1;return t!=null&&(Ap(t)?n=t:i=t),new re(s=>{let r=KM(e)?+e-n.now():e;r<0&&(r=0);let o=0;return n.schedule(function(){s.closed||(s.next(o++),0<=i?this.schedule(void 0,i):s.complete())},r)})}function Up(...e){let t=Ns(e),n=GM(e,1/0),i=e;return i.length?i.length===1?Ae(i[0]):Td(n)(Ke(i,t)):zt}var{isArray:Nj}=Array;function Wp(e){return e.length===1&&Nj(e[0])?e[0]:e}function ft(e,t){return Ce((n,i)=>{let s=0;n.subscribe(de(i,r=>e.call(t,r,s++)&&i.next(r)))})}function jp(...e){return e=Wp(e),e.length===1?Ae(e[0]):new re(kj(e))}function kj(e){return t=>{let n=[];for(let i=0;n&&!t.closed&&i<e.length;i++)n.push(Ae(e[i]).subscribe(de(t,s=>{if(n){for(let r=0;r<n.length;r++)r!==i&&n[r].unsubscribe();n=null}t.next(s)})))}}function Id(...e){let t=co(e),n=Wp(e);return n.length?new re(i=>{let s=n.map(()=>[]),r=n.map(()=>!1);i.add(()=>{s=r=null});for(let o=0;!i.closed&&o<n.length;o++)Ae(n[o]).subscribe(de(i,a=>{if(s[o].push(a),s.every(l=>l.length)){let l=s.map(c=>c.shift());i.next(t?t(...l):l),s.some((c,u)=>!c.length&&r[u])&&i.complete()}},()=>{r[o]=!0,!s[o].length&&i.complete()}));return()=>{s=r=null}}):zt}function ho(e){return Ce((t,n)=>{let i=null,s=!1,r;i=t.subscribe(de(n,void 0,void 0,o=>{r=Ae(e(o,ho(e)(t))),i?(i.unsubscribe(),i=null,r.subscribe(n)):s=!0})),s&&(i.unsubscribe(),i=null,r.subscribe(n))})}function ZM(e,t,n,i,s){return(r,o)=>{let a=n,l=t,c=0;r.subscribe(de(o,u=>{let h=c++;l=a?e(l,u,h):(a=!0,u),i&&o.next(l)},s&&(()=>{a&&o.next(l),o.complete()})))}}function fo(e,t){return fe(t)?ot(e,t,1):ot(e,1)}function Ky(e,t=Fi){return Ce((n,i)=>{let s=null,r=null,o=null,a=()=>{if(s){s.unsubscribe(),s=null;let c=r;r=null,i.next(c)}};function l(){let c=o+e,u=t.now();if(u<c){s=this.schedule(void 0,c-u),i.add(s);return}a()}n.subscribe(de(i,c=>{r=c,o=t.now(),s||(s=t.schedule(l,e),i.add(s))},()=>{a(),i.complete()},void 0,()=>{r=s=null}))})}function po(e){return Ce((t,n)=>{let i=!1;t.subscribe(de(n,s=>{i=!0,n.next(s)},()=>{i||n.next(e),n.complete()}))})}function Pt(e){return e<=0?()=>zt:Ce((t,n)=>{let i=0;t.subscribe(de(n,s=>{++i<=e&&(n.next(s),e<=i&&n.complete())}))})}function eP(){return Ce((e,t)=>{e.subscribe(de(t,ur))})}function Ad(e){return oe(()=>e)}function Qy(e,t){return t?n=>ks(t.pipe(Pt(1),eP()),n.pipe(Qy(e))):ot((n,i)=>Ae(e(n,i)).pipe(Pt(1),Ad(n)))}function Yy(e,t=Fi){let n=uo(e,t);return Qy(()=>n)}function Md(e,t=yn){return e=e??Lj,Ce((n,i)=>{let s,r=!0;n.subscribe(de(i,o=>{let a=t(o);(r||!e(s,a))&&(r=!1,s=a,i.next(o))}))})}function Lj(e,t){return e===t}function zp(e=Vj){return Ce((t,n)=>{let i=!1;t.subscribe(de(n,s=>{i=!0,n.next(s)},()=>i?n.complete():n.error(e())))})}function Vj(){return new hr}function Jy(...e){return t=>ks(t,ee(...e))}function ha(e){return Ce((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function pi(e,t){let n=arguments.length>=2;return i=>i.pipe(e?ft((s,r)=>e(s,r,i)):yn,Pt(1),n?po(t):zp(()=>new hr))}function Xy(e,t,n,i){return Ce((s,r)=>{let o;!t||typeof t=="function"?o=t:{duration:n,element:o,connector:i}=t;let a=new Map,l=v=>{a.forEach(v),v(r)},c=v=>l(y=>y.error(v)),u=0,h=!1,f=new Ed(r,v=>{try{let y=e(v),C=a.get(y);if(!C){a.set(y,C=i?i():new Le);let E=g(y,C);if(r.next(E),n){let I=de(C,()=>{C.complete(),I?.unsubscribe()},void 0,void 0,()=>a.delete(y));f.add(Ae(n(E)).subscribe(I))}}C.next(o?o(v):v)}catch(y){c(y)}},()=>l(v=>v.complete()),c,()=>a.clear(),()=>(h=!0,u===0));s.subscribe(f);function g(v,y){let C=new re(E=>{u++;let I=y.subscribe(E);return()=>{I.unsubscribe(),--u===0&&h&&f.unsubscribe()}});return C.key=v,C}})}function oc(e){return e<=0?()=>zt:Ce((t,n)=>{let i=[];t.subscribe(de(n,s=>{i.push(s),e<i.length&&i.shift()},()=>{for(let s of i)n.next(s);n.complete()},void 0,()=>{i=null}))})}function Zy(e,t){let n=arguments.length>=2;return i=>i.pipe(e?ft((s,r)=>e(s,r,i)):yn,oc(1),n?po(t):zp(()=>new hr))}function $p(){return Ce((e,t)=>{let n,i=!1;e.subscribe(de(t,s=>{let r=n;n=s,i&&t.next([r,s]),i=!0}))})}function qp(e,t){return Ce(ZM(e,t,arguments.length>=2,!0))}function tP(e={}){let{connector:t=()=>new Le,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:s=!0}=e;return r=>{let o,a,l,c=0,u=!1,h=!1,f=()=>{a?.unsubscribe(),a=void 0},g=()=>{f(),o=l=void 0,u=h=!1},v=()=>{let y=o;g(),y?.unsubscribe()};return Ce((y,C)=>{c++,!h&&!u&&f();let E=l=l??t();C.add(()=>{c--,c===0&&!h&&!u&&(a=ew(v,s))}),E.subscribe(C),!o&&c>0&&(o=new dr({next:I=>E.next(I),error:I=>{h=!0,f(),a=ew(g,n,I),E.error(I)},complete:()=>{u=!0,f(),a=ew(g,i),E.complete()}}),Ae(y).subscribe(o))})(r)}}function ew(e,t,...n){if(t===!0){e();return}if(t===!1)return;let i=new dr({next:()=>{i.unsubscribe(),e()}});return Ae(t(...n)).subscribe(i)}function Kp(e,t,n){let i,s=!1;return e&&typeof e=="object"?{bufferSize:i=1/0,windowTime:t=1/0,refCount:s=!1,scheduler:n}=e:i=e??1/0,tP({connector:()=>new lo(i,t,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function fa(...e){let t=Ns(e);return Ce((n,i)=>{(t?ks(e,n,t):ks(e,n)).subscribe(i)})}function Ge(e,t){return Ce((n,i)=>{let s=null,r=0,o=!1,a=()=>o&&!s&&i.complete();n.subscribe(de(i,l=>{s?.unsubscribe();let c=0,u=r++;Ae(e(l,u)).subscribe(s=de(i,h=>i.next(t?t(l,h,u,c++):h),()=>{s=null,a()}))},()=>{o=!0,a()}))})}function Qp(e,t){return fe(t)?Ge(()=>e,t):Ge(()=>e)}function $t(e){return Ce((t,n)=>{Ae(e).subscribe(de(n,()=>n.complete(),ur)),!n.closed&&t.subscribe(n)})}function nt(e,t,n){let i=fe(e)||t||n?{next:e,error:t,complete:n}:e;return i?Ce((s,r)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;s.subscribe(de(r,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),r.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),r.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),r.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):yn}function nP(e,t){return Ce((n,i)=>{let{leading:s=!0,trailing:r=!1}=t??{},o=!1,a=null,l=null,c=!1,u=()=>{l?.unsubscribe(),l=null,r&&(g(),c&&i.complete())},h=()=>{l=null,c&&i.complete()},f=v=>l=Ae(e(v)).subscribe(de(i,u,h)),g=()=>{if(o){o=!1;let v=a;a=null,i.next(v),!c&&f(v)}};n.subscribe(de(i,v=>{o=!0,a=v,!(l&&!l.closed)&&(s?g():f(v))},()=>{c=!0,!(r&&o&&l&&!l.closed)&&i.complete()}))})}function tw(e,t=Fi,n){let i=uo(e,t);return nP(()=>i,n)}function Pd(...e){let t=co(e);return Ce((n,i)=>{let s=e.length,r=new Array(s),o=e.map(()=>!1),a=!1;for(let l=0;l<s;l++)Ae(e[l]).subscribe(de(i,c=>{r[l]=c,!a&&!o[l]&&(o[l]=!0,(a=o.every(yn))&&(o=null))},ur));n.subscribe(de(i,l=>{if(a){let c=[l,...r];i.next(t?t(...c):c)}}))})}var Bj="https://g.co/ng/security#xss",he=class extends Error{constructor(t,n){super(Mg(t,n)),this.code=t}};function Mg(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function zd(e){return{toString:e}.toString()}var Yp="__parameters__";function Gj(e){return function(...n){if(e){let i=e(...n);for(let s in i)this[s]=i[s]}}}function kP(e,t,n){return zd(()=>{let i=Gj(t);function s(...r){if(this instanceof s)return i.apply(this,r),this;let o=new s(...r);return a.annotation=o,a;function a(l,c,u){let h=l.hasOwnProperty(Yp)?l[Yp]:Object.defineProperty(l,Yp,{value:[]})[Yp];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(o),l}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=e,s.annotationCls=s,s})}var Fd=globalThis;function at(e){for(let t in e)if(e[t]===at)return t;throw Error("Could not find renamed property on target object.")}function Hj(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Un(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(Un).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function yw(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var Uj=at({__forward_ref__:at});function wr(e){return e.__forward_ref__=wr,e.toString=function(){return Un(this())},e}function Gn(e){return LP(e)?e():e}function LP(e){return typeof e=="function"&&e.hasOwnProperty(Uj)&&e.__forward_ref__===wr}function te(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function vi(e){return{providers:e.providers||[],imports:e.imports||[]}}function Pg(e){return iP(e,BP)||iP(e,GP)}function VP(e){return Pg(e)!==null}function iP(e,t){return e.hasOwnProperty(t)?e[t]:null}function Wj(e){let t=e&&(e[BP]||e[GP]);return t||null}function sP(e){return e&&(e.hasOwnProperty(rP)||e.hasOwnProperty(jj))?e[rP]:null}var BP=at({\u0275prov:at}),rP=at({\u0275inj:at}),GP=at({ngInjectableDef:at}),jj=at({ngInjectorDef:at}),X=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=te({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function HP(e){return e&&!!e.\u0275providers}var zj=at({\u0275cmp:at}),$j=at({\u0275dir:at}),qj=at({\u0275pipe:at}),Kj=at({\u0275mod:at}),lg=at({\u0275fac:at}),xd=at({__NG_ELEMENT_ID__:at}),oP=at({__NG_ENV_ID__:at});function vS(e){return typeof e=="string"?e:e==null?"":String(e)}function Qj(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():vS(e)}function Yj(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new he(-200,e)}function CS(e,t){throw new he(-201,!1)}var Fe=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(Fe||{}),ww;function UP(){return ww}function si(e){let t=ww;return ww=e,t}function WP(e,t,n){let i=Pg(e);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&Fe.Optional)return null;if(t!==void 0)return t;CS(e,"Injector")}var Jj={},Od=Jj,Sw="__NG_DI_FLAG__",cg="ngTempTokenPath",Xj="ngTokenPath",Zj=/\n/gm,ez="\u0275",aP="__source",uc;function tz(){return uc}function go(e){let t=uc;return uc=e,t}function nz(e,t=Fe.Default){if(uc===void 0)throw new he(-203,!1);return uc===null?WP(e,void 0,t):uc.get(e,t&Fe.Optional?null:void 0,t)}function Y(e,t=Fe.Default){return(UP()||nz)(Gn(e),t)}function U(e,t=Fe.Default){return Y(e,Fg(t))}function Fg(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function _w(e){let t=[];for(let n=0;n<e.length;n++){let i=Gn(e[n]);if(Array.isArray(i)){if(i.length===0)throw new he(900,!1);let s,r=Fe.Default;for(let o=0;o<i.length;o++){let a=i[o],l=iz(a);typeof l=="number"?l===-1?s=a.token:r|=l:s=a}t.push(Y(s,r))}else t.push(Y(i))}return t}function jP(e,t){return e[Sw]=t,e.prototype[Sw]=t,e}function iz(e){return e[Sw]}function sz(e,t,n,i){let s=e[cg];throw t[aP]&&s.unshift(t[aP]),e.message=rz(`
`+e.message,s,n,i),e[Xj]=s,e[cg]=null,e}function rz(e,t,n,i=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==ez?e.slice(2):e;let s=Un(t);if(Array.isArray(t))s=t.map(Un).join(" -> ");else if(typeof t=="object"){let r=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];r.push(o+":"+(typeof a=="string"?JSON.stringify(a):Un(a)))}s=`{${r.join(", ")}}`}return`${n}${i?"("+i+")":""}[${s}]: ${e.replace(Zj,`
  `)}`}var Me=jP(kP("Optional"),8);var zP=jP(kP("SkipSelf"),4);function ga(e,t){let n=e.hasOwnProperty(lg);return n?e[lg]:null}function oz(e,t,n){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){let s=e[i],r=t[i];if(n&&(s=n(s),r=n(r)),r!==s)return!1}return!0}function az(e){return e.flat(Number.POSITIVE_INFINITY)}function yS(e,t){e.forEach(n=>Array.isArray(n)?yS(n,t):t(n))}function $P(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function ug(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function lz(e,t){let n=[];for(let i=0;i<e;i++)n.push(t);return n}function cz(e,t,n,i){let s=e.length;if(s==t)e.push(n,i);else if(s===1)e.push(i,e[0]),e[0]=n;else{for(s--,e.push(e[s-1],e[s]);s>t;){let r=s-2;e[s]=e[r],s--}e[t]=n,e[t+1]=i}}function wS(e,t,n){let i=$d(e,t);return i>=0?e[i|1]=n:(i=~i,cz(e,i,t,n)),i}function nw(e,t){let n=$d(e,t);if(n>=0)return e[n|1]}function $d(e,t){return uz(e,t,1)}function uz(e,t,n){let i=0,s=e.length>>n;for(;s!==i;){let r=i+(s-i>>1),o=e[r<<n];if(t===o)return r<<n;o>t?s=r:i=r+1}return~(s<<n)}var hc={},Hn=[],ma=new X(""),qP=new X("",-1),KP=new X(""),dg=class{get(t,n=Od){if(n===Od){let i=new Error(`NullInjectorError: No provider for ${Un(t)}!`);throw i.name="NullInjectorError",i}return n}},QP=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(QP||{}),Bs=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Bs||{}),rn=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(rn||{});function dz(e,t,n){let i=e.length;for(;;){let s=e.indexOf(t,n);if(s===-1)return s;if(s===0||e.charCodeAt(s-1)<=32){let r=t.length;if(s+r===i||e.charCodeAt(s+r)<=32)return s}n=s+1}}function bw(e,t,n){let i=0;for(;i<n.length;){let s=n[i];if(typeof s=="number"){if(s!==0)break;i++;let r=n[i++],o=n[i++],a=n[i++];e.setAttribute(t,o,a,r)}else{let r=s,o=n[++i];fz(r)?e.setProperty(t,r,o):e.setAttribute(t,r,o),i++}}return i}function hz(e){return e===3||e===4||e===6}function fz(e){return e.charCodeAt(0)===64}function Nd(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){let s=t[i];typeof s=="number"?n=s:n===0||(n===-1||n===2?lP(e,n,s,null,t[++i]):lP(e,n,s,null,null))}}return e}function lP(e,t,n,i,s){let r=0,o=e.length;if(t===-1)o=-1;else for(;r<e.length;){let a=e[r++];if(typeof a=="number"){if(a===t){o=-1;break}else if(a>t){o=r-1;break}}}for(;r<e.length;){let a=e[r];if(typeof a=="number")break;if(a===n){if(i===null){s!==null&&(e[r+1]=s);return}else if(i===e[r+1]){e[r+2]=s;return}}r++,i!==null&&r++,s!==null&&r++}o!==-1&&(e.splice(o,0,t),r=o+1),e.splice(r++,0,n),i!==null&&e.splice(r++,0,i),s!==null&&e.splice(r++,0,s)}var YP="ng-template";function pz(e,t,n,i){let s=0;if(i){for(;s<t.length&&typeof t[s]=="string";s+=2)if(t[s]==="class"&&dz(t[s+1].toLowerCase(),n,0)!==-1)return!0}else if(SS(e))return!1;if(s=t.indexOf(1,s),s>-1){let r;for(;++s<t.length&&typeof(r=t[s])=="string";)if(r.toLowerCase()===n)return!0}return!1}function SS(e){return e.type===4&&e.value!==YP}function gz(e,t,n){let i=e.type===4&&!n?YP:e.value;return t===i}function mz(e,t,n){let i=4,s=e.attrs,r=s!==null?yz(s):0,o=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!o&&!os(i)&&!os(l))return!1;if(o&&os(l))continue;o=!1,i=l|i&1;continue}if(!o)if(i&4){if(i=2|i&1,l!==""&&!gz(e,l,n)||l===""&&t.length===1){if(os(i))return!1;o=!0}}else if(i&8){if(s===null||!pz(e,s,l,n)){if(os(i))return!1;o=!0}}else{let c=t[++a],u=vz(l,s,SS(e),n);if(u===-1){if(os(i))return!1;o=!0;continue}if(c!==""){let h;if(u>r?h="":h=s[u+1].toLowerCase(),i&2&&c!==h){if(os(i))return!1;o=!0}}}}return os(i)||o}function os(e){return(e&1)===0}function vz(e,t,n,i){if(t===null)return-1;let s=0;if(i||!n){let r=!1;for(;s<t.length;){let o=t[s];if(o===e)return s;if(o===3||o===6)r=!0;else if(o===1||o===2){let a=t[++s];for(;typeof a=="string";)a=t[++s];continue}else{if(o===4)break;if(o===0){s+=4;continue}}s+=r?1:2}return-1}else return wz(t,e)}function JP(e,t,n=!1){for(let i=0;i<t.length;i++)if(mz(e,t[i],n))return!0;return!1}function Cz(e){let t=e.attrs;if(t!=null){let n=t.indexOf(5);if(!(n&1))return t[n+1]}return null}function yz(e){for(let t=0;t<e.length;t++){let n=e[t];if(hz(n))return t}return e.length}function wz(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let i=e[n];if(typeof i=="number")return-1;if(i===t)return n;n++}return-1}function Sz(e,t){e:for(let n=0;n<t.length;n++){let i=t[n];if(e.length===i.length){for(let s=0;s<e.length;s++)if(e[s]!==i[s])continue e;return!0}}return!1}function cP(e,t){return e?":not("+t.trim()+")":t}function _z(e){let t=e[0],n=1,i=2,s="",r=!1;for(;n<e.length;){let o=e[n];if(typeof o=="string")if(i&2){let a=e[++n];s+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?s+="."+o:i&4&&(s+=" "+o);else s!==""&&!os(o)&&(t+=cP(r,s),s=""),i=o,r=r||!os(i);n++}return s!==""&&(t+=cP(r,s)),t}function bz(e){return e.map(_z).join(",")}function Ez(e){let t=[],n=[],i=1,s=2;for(;i<e.length;){let r=e[i];if(typeof r=="string")s===2?r!==""&&t.push(r,e[++i]):s===8&&n.push(r);else{if(!os(s))break;s=r}i++}return{attrs:t,classes:n}}function Ee(e){return zd(()=>{let t=iF(e),n=se(B({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===QP.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Bs.Emulated,styles:e.styles||Hn,_:null,schemas:e.schemas||null,tView:null,id:""});sF(n);let i=e.dependencies;return n.directiveDefs=dP(i,!1),n.pipeDefs=dP(i,!0),n.id=Tz(n),n})}function Dz(e){return vo(e)||ZP(e)}function Rz(e){return e!==null}function Ci(e){return zd(()=>({type:e.type,bootstrap:e.bootstrap||Hn,declarations:e.declarations||Hn,imports:e.imports||Hn,exports:e.exports||Hn,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function uP(e,t){if(e==null)return hc;let n={};for(let i in e)if(e.hasOwnProperty(i)){let s=e[i],r,o,a=rn.None;Array.isArray(s)?(a=s[0],r=s[1],o=s[2]??r):(r=s,o=s),t?(n[r]=a!==rn.None?[i,a]:i,t[r]=o):n[r]=i}return n}function Ft(e){return zd(()=>{let t=iF(e);return sF(t),t})}function XP(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone===!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function vo(e){return e[zj]||null}function ZP(e){return e[$j]||null}function eF(e){return e[qj]||null}function tF(e){let t=vo(e)||ZP(e)||eF(e);return t!==null?t.standalone:!1}function nF(e,t){let n=e[Kj]||null;if(!n&&t===!0)throw new Error(`Type ${Un(e)} does not have '\u0275mod' property.`);return n}function iF(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||hc,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Hn,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:uP(e.inputs,t),outputs:uP(e.outputs),debugInfo:null}}function sF(e){e.features?.forEach(t=>t(e))}function dP(e,t){if(!e)return null;let n=t?eF:Dz;return()=>(typeof e=="function"?e():e).map(i=>n(i)).filter(Rz)}function Tz(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let s of n)t=Math.imul(31,t)+s.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function pt(e){return{\u0275providers:e}}function Iz(...e){return{\u0275providers:rF(!0,e),\u0275fromNgModule:!0}}function rF(e,...t){let n=[],i=new Set,s,r=o=>{n.push(o)};return yS(t,o=>{let a=o;Ew(a,r,[],i)&&(s||=[],s.push(a))}),s!==void 0&&oF(s,r),n}function oF(e,t){for(let n=0;n<e.length;n++){let{ngModule:i,providers:s}=e[n];_S(s,r=>{t(r,i)})}}function Ew(e,t,n,i){if(e=Gn(e),!e)return!1;let s=null,r=sP(e),o=!r&&vo(e);if(!r&&!o){let l=e.ngModule;if(r=sP(l),r)s=l;else return!1}else{if(o&&!o.standalone)return!1;s=e}let a=i.has(s);if(o){if(a)return!1;if(i.add(s),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)Ew(c,t,n,i)}}else if(r){if(r.imports!=null&&!a){i.add(s);let c;try{yS(r.imports,u=>{Ew(u,t,n,i)&&(c||=[],c.push(u))})}finally{}c!==void 0&&oF(c,t)}if(!a){let c=ga(s)||(()=>new s);t({provide:s,useFactory:c,deps:Hn},s),t({provide:KP,useValue:s,multi:!0},s),t({provide:ma,useValue:()=>Y(s),multi:!0},s)}let l=r.providers;if(l!=null&&!a){let c=e;_S(l,u=>{t(u,c)})}}else return!1;return s!==e&&e.providers!==void 0}function _S(e,t){for(let n of e)HP(n)&&(n=n.\u0275providers),Array.isArray(n)?_S(n,t):t(n)}var Az=at({provide:String,useValue:at});function aF(e){return e!==null&&typeof e=="object"&&Az in e}function Mz(e){return!!(e&&e.useExisting)}function Pz(e){return!!(e&&e.useFactory)}function fc(e){return typeof e=="function"}function Fz(e){return!!e.useClass}var xg=new X(""),ng={},xz={},iw;function Og(){return iw===void 0&&(iw=new dg),iw}var jn=class{},kd=class extends jn{get destroyed(){return this._destroyed}constructor(t,n,i,s){super(),this.parent=n,this.source=i,this.scopes=s,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Rw(t,o=>this.processProvider(o)),this.records.set(qP,ac(void 0,this)),s.has("environment")&&this.records.set(jn,ac(void 0,this));let r=this.records.get(xg);r!=null&&typeof r.value=="string"&&this.scopes.add(r.value),this.injectorDefTypes=new Set(this.get(KP,Hn,Fe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=qe(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),qe(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=go(this),i=si(void 0),s;try{return t()}finally{go(n),si(i)}}get(t,n=Od,i=Fe.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(oP))return t[oP](this);i=Fg(i);let s,r=go(this),o=si(void 0);try{if(!(i&Fe.SkipSelf)){let l=this.records.get(t);if(l===void 0){let c=Vz(t)&&Pg(t);c&&this.injectableDefInScope(c)?l=ac(Dw(t),ng):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let a=i&Fe.Self?Og():this.parent;return n=i&Fe.Optional&&n===Od?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[cg]=a[cg]||[]).unshift(Un(t)),r)throw a;return sz(a,t,"R3InjectorError",this.source)}else throw a}finally{si(o),go(r)}}resolveInjectorInitializers(){let t=qe(null),n=go(this),i=si(void 0),s;try{let r=this.get(ma,Hn,Fe.Self);for(let o of r)o()}finally{go(n),si(i),qe(t)}}toString(){let t=[],n=this.records;for(let i of n.keys())t.push(Un(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new he(205,!1)}processProvider(t){t=Gn(t);let n=fc(t)?t:Gn(t&&t.provide),i=Nz(t);if(!fc(t)&&t.multi===!0){let s=this.records.get(n);s||(s=ac(void 0,ng,!0),s.factory=()=>_w(s.multi),this.records.set(n,s)),n=t,s.multi.push(t)}this.records.set(n,i)}hydrate(t,n){let i=qe(null);try{return n.value===ng&&(n.value=xz,n.value=n.factory()),typeof n.value=="object"&&n.value&&Lz(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{qe(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Gn(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Dw(e){let t=Pg(e),n=t!==null?t.factory:ga(e);if(n!==null)return n;if(e instanceof X)throw new he(204,!1);if(e instanceof Function)return Oz(e);throw new he(204,!1)}function Oz(e){if(e.length>0)throw new he(204,!1);let n=Wj(e);return n!==null?()=>n.factory(e):()=>new e}function Nz(e){if(aF(e))return ac(void 0,e.useValue);{let t=lF(e);return ac(t,ng)}}function lF(e,t,n){let i;if(fc(e)){let s=Gn(e);return ga(s)||Dw(s)}else if(aF(e))i=()=>Gn(e.useValue);else if(Pz(e))i=()=>e.useFactory(..._w(e.deps||[]));else if(Mz(e))i=()=>Y(Gn(e.useExisting));else{let s=Gn(e&&(e.useClass||e.provide));if(kz(e))i=()=>new s(..._w(e.deps));else return ga(s)||Dw(s)}return i}function ac(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function kz(e){return!!e.deps}function Lz(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function Vz(e){return typeof e=="function"||typeof e=="object"&&e instanceof X}function Rw(e,t){for(let n of e)Array.isArray(n)?Rw(n,t):n&&HP(n)?Rw(n.\u0275providers,t):t(n)}function So(e,t){e instanceof kd&&e.assertNotDestroyed();let n,i=go(e),s=si(void 0);try{return t()}finally{go(i),si(s)}}function Bz(){return UP()!==void 0||tz()!=null}function Gz(e){return typeof e=="function"}var gi=0,Se=1,ye=2,on=3,ls=4,yi=5,Oi=6,Ld=7,Ni=8,pc=9,Gs=10,ut=11,Vd=12,hP=13,yc=14,mi=15,qd=16,lc=17,gr=18,Ng=19,cF=20,mo=21,sw=22,va=23,kt=25,uF=1,Bd=6,mr=7,hg=8,gc=9,Wn=10,bS=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(bS||{});function pr(e){return Array.isArray(e)&&typeof e[uF]=="object"}function Us(e){return Array.isArray(e)&&e[uF]===!0}function ES(e){return(e.flags&4)!==0}function Kd(e){return e.componentOffset>-1}function kg(e){return(e.flags&1)===1}function Co(e){return!!e.template}function dF(e){return(e[ye]&512)!==0}var Tw=class{constructor(t,n,i){this.previousValue=t,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function hF(e,t,n,i){t!==null?t.applyValueToInputSignal(t,i):e[n]=i}function an(){return fF}function fF(e){return e.type.prototype.ngOnChanges&&(e.setInput=Uz),Hz}an.ngInherit=!0;function Hz(){let e=gF(this),t=e?.current;if(t){let n=e.previous;if(n===hc)e.previous=t;else for(let i in t)n[i]=t[i];e.current=null,this.ngOnChanges(t)}}function Uz(e,t,n,i,s){let r=this.declaredInputs[i],o=gF(e)||Wz(e,{previous:hc,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[r];a[r]=new Tw(c&&c.currentValue,n,l===hc),hF(e,t,s,n)}var pF="__ngSimpleChanges__";function gF(e){return e[pF]||null}function Wz(e,t){return e[pF]=t}var fP=null;var Ls=function(e,t,n){fP?.(e,t,n)},mF="svg",jz="math",zz=!1;function $z(){return zz}function cs(e){for(;Array.isArray(e);)e=e[gi];return e}function vF(e,t){return cs(t[e])}function wi(e,t){return cs(t[e.index])}function DS(e,t){return e.data[t]}function CF(e,t){return e[t]}function _o(e,t){let n=t[e];return pr(n)?n:n[gi]}function qz(e){return(e[ye]&4)===4}function RS(e){return(e[ye]&128)===128}function Kz(e){return Us(e[on])}function mc(e,t){return t==null?null:e[t]}function yF(e){e[lc]=0}function Qz(e){e[ye]&1024||(e[ye]|=1024,RS(e)&&Gd(e))}function Yz(e,t){for(;e>0;)t=t[yc],e--;return t}function TS(e){return!!(e[ye]&9216||e[va]?.dirty)}function Iw(e){e[Gs].changeDetectionScheduler?.notify(1),TS(e)?Gd(e):e[ye]&64&&($z()?(e[ye]|=1024,Gd(e)):e[Gs].changeDetectionScheduler?.notify())}function Gd(e){e[Gs].changeDetectionScheduler?.notify();let t=Hd(e);for(;t!==null&&!(t[ye]&8192||(t[ye]|=8192,!RS(t)));)t=Hd(t)}function wF(e,t){if((e[ye]&256)===256)throw new he(911,!1);e[mo]===null&&(e[mo]=[]),e[mo].push(t)}function Jz(e,t){if(e[mo]===null)return;let n=e[mo].indexOf(t);n!==-1&&e[mo].splice(n,1)}function Hd(e){let t=e[on];return Us(t)?t[on]:t}var Te={lFrame:IF(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Xz(){return Te.lFrame.elementDepthCount}function Zz(){Te.lFrame.elementDepthCount++}function e$(){Te.lFrame.elementDepthCount--}function SF(){return Te.bindingsEnabled}function wc(){return Te.skipHydrationRootTNode!==null}function t$(e){return Te.skipHydrationRootTNode===e}function n$(e){Te.skipHydrationRootTNode=e}function i$(){Te.skipHydrationRootTNode=null}function He(){return Te.lFrame.lView}function qt(){return Te.lFrame.tView}function Dt(e){return Te.lFrame.contextLView=e,e[Ni]}function Rt(e){return Te.lFrame.contextLView=null,e}function Si(){let e=_F();for(;e!==null&&e.type===64;)e=e.parent;return e}function _F(){return Te.lFrame.currentTNode}function s$(){let e=Te.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function ba(e,t){let n=Te.lFrame;n.currentTNode=e,n.isParent=t}function IS(){return Te.lFrame.isParent}function AS(){Te.lFrame.isParent=!1}function r$(){return Te.lFrame.contextLView}function bF(){let e=Te.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function o$(e){return Te.lFrame.bindingIndex=e}function Qd(){return Te.lFrame.bindingIndex++}function EF(e){let t=Te.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function a$(){return Te.lFrame.inI18n}function l$(e,t){let n=Te.lFrame;n.bindingIndex=n.bindingRootIndex=e,Aw(t)}function c$(){return Te.lFrame.currentDirectiveIndex}function Aw(e){Te.lFrame.currentDirectiveIndex=e}function u$(e){let t=Te.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function DF(){return Te.lFrame.currentQueryIndex}function MS(e){Te.lFrame.currentQueryIndex=e}function d$(e){let t=e[Se];return t.type===2?t.declTNode:t.type===1?e[yi]:null}function RF(e,t,n){if(n&Fe.SkipSelf){let s=t,r=e;for(;s=s.parent,s===null&&!(n&Fe.Host);)if(s=d$(r),s===null||(r=r[yc],s.type&10))break;if(s===null)return!1;t=s,e=r}let i=Te.lFrame=TF();return i.currentTNode=t,i.lView=e,!0}function PS(e){let t=TF(),n=e[Se];Te.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function TF(){let e=Te.lFrame,t=e===null?null:e.child;return t===null?IF(e):t}function IF(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function AF(){let e=Te.lFrame;return Te.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var MF=AF;function FS(){let e=AF();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function h$(e){return(Te.lFrame.contextLView=Yz(e,Te.lFrame.contextLView))[Ni]}function Ea(){return Te.lFrame.selectedIndex}function Ca(e){Te.lFrame.selectedIndex=e}function xS(){let e=Te.lFrame;return DS(e.tView,e.selectedIndex)}function Sr(){Te.lFrame.currentNamespace=mF}function PF(){return Te.lFrame.currentNamespace}var FF=!0;function Lg(){return FF}function Ws(e){FF=e}function f$(e,t,n){let{ngOnChanges:i,ngOnInit:s,ngDoCheck:r}=t.type.prototype;if(i){let o=fF(t);(n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o)}s&&(n.preOrderHooks??=[]).push(0-e,s),r&&((n.preOrderHooks??=[]).push(e,r),(n.preOrderCheckHooks??=[]).push(e,r))}function Vg(e,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){let r=e.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=r;o&&(e.contentHooks??=[]).push(-n,o),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),l&&(e.viewHooks??=[]).push(-n,l),c&&((e.viewHooks??=[]).push(n,c),(e.viewCheckHooks??=[]).push(n,c)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function ig(e,t,n){xF(e,t,3,n)}function sg(e,t,n,i){(e[ye]&3)===n&&xF(e,t,n,i)}function rw(e,t){let n=e[ye];(n&3)===t&&(n&=16383,n+=1,e[ye]=n)}function xF(e,t,n,i){let s=i!==void 0?e[lc]&65535:0,r=i??-1,o=t.length-1,a=0;for(let l=s;l<o;l++)if(typeof t[l+1]=="number"){if(a=t[l],i!=null&&a>=i)break}else t[l]<0&&(e[lc]+=65536),(a<r||r==-1)&&(p$(e,n,t,l),e[lc]=(e[lc]&4294901760)+l+2),l++}function pP(e,t){Ls(4,e,t);let n=qe(null);try{t.call(e)}finally{qe(n),Ls(5,e,t)}}function p$(e,t,n,i){let s=n[i]<0,r=n[i+1],o=s?-n[i]:n[i],a=e[o];s?e[ye]>>14<e[lc]>>16&&(e[ye]&3)===t&&(e[ye]+=16384,pP(a,r)):pP(a,r)}var dc=-1,ya=class{constructor(t,n,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function g$(e){return e instanceof ya}function m$(e){return(e.flags&8)!==0}function v$(e){return(e.flags&16)!==0}function OF(e){return e!==dc}function fg(e){return e&32767}function C$(e){return e>>16}function pg(e,t){let n=C$(e),i=t;for(;n>0;)i=i[yc],n--;return i}var Mw=!0;function gg(e){let t=Mw;return Mw=e,t}var y$=256,NF=y$-1,kF=5,w$=0,Vs={};function S$(e,t,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(xd)&&(i=n[xd]),i==null&&(i=n[xd]=w$++);let s=i&NF,r=1<<s;t.data[e+(s>>kF)]|=r}function mg(e,t){let n=LF(e,t);if(n!==-1)return n;let i=t[Se];i.firstCreatePass&&(e.injectorIndex=t.length,ow(i.data,e),ow(t,null),ow(i.blueprint,null));let s=OS(e,t),r=e.injectorIndex;if(OF(s)){let o=fg(s),a=pg(s,t),l=a[Se].data;for(let c=0;c<8;c++)t[r+c]=a[o+c]|l[o+c]}return t[r+8]=s,r}function ow(e,t){e.push(0,0,0,0,0,0,0,0,t)}function LF(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function OS(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,i=null,s=t;for(;s!==null;){if(i=UF(s),i===null)return dc;if(n++,s=s[yc],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return dc}function Pw(e,t,n){S$(e,t,n)}function VF(e,t,n){if(n&Fe.Optional||e!==void 0)return e;CS(t,"NodeInjector")}function BF(e,t,n,i){if(n&Fe.Optional&&i===void 0&&(i=null),!(n&(Fe.Self|Fe.Host))){let s=e[pc],r=si(void 0);try{return s?s.get(t,i,n&Fe.Optional):WP(t,i,n&Fe.Optional)}finally{si(r)}}return VF(i,t,n)}function GF(e,t,n,i=Fe.Default,s){if(e!==null){if(t[ye]&2048&&!(i&Fe.Self)){let o=D$(e,t,n,i,Vs);if(o!==Vs)return o}let r=HF(e,t,n,i,Vs);if(r!==Vs)return r}return BF(t,n,i,s)}function HF(e,t,n,i,s){let r=b$(n);if(typeof r=="function"){if(!RF(t,e,i))return i&Fe.Host?VF(s,n,i):BF(t,n,i,s);try{let o;if(o=r(i),o==null&&!(i&Fe.Optional))CS(n);else return o}finally{MF()}}else if(typeof r=="number"){let o=null,a=LF(e,t),l=dc,c=i&Fe.Host?t[mi][yi]:null;for((a===-1||i&Fe.SkipSelf)&&(l=a===-1?OS(e,t):t[a+8],l===dc||!mP(i,!1)?a=-1:(o=t[Se],a=fg(l),t=pg(l,t)));a!==-1;){let u=t[Se];if(gP(r,a,u.data)){let h=_$(a,t,n,o,i,c);if(h!==Vs)return h}l=t[a+8],l!==dc&&mP(i,t[Se].data[a+8]===c)&&gP(r,a,t)?(o=u,a=fg(l),t=pg(l,t)):a=-1}}return s}function _$(e,t,n,i,s,r){let o=t[Se],a=o.data[e+8],l=i==null?Kd(a)&&Mw:i!=o&&(a.type&3)!==0,c=s&Fe.Host&&r===a,u=rg(a,o,n,l,c);return u!==null?wa(t,o,u,a):Vs}function rg(e,t,n,i,s){let r=e.providerIndexes,o=t.data,a=r&1048575,l=e.directiveStart,c=e.directiveEnd,u=r>>20,h=i?a:a+u,f=s?a+u:c;for(let g=h;g<f;g++){let v=o[g];if(g<l&&n===v||g>=l&&v.type===n)return g}if(s){let g=o[l];if(g&&Co(g)&&g.type===n)return l}return null}function wa(e,t,n,i){let s=e[n],r=t.data;if(g$(s)){let o=s;o.resolving&&Yj(Qj(r[n]));let a=gg(o.canSeeViewProviders);o.resolving=!0;let l,c=o.injectImpl?si(o.injectImpl):null,u=RF(e,i,Fe.Default);try{s=e[n]=o.factory(void 0,r,e,i),t.firstCreatePass&&n>=i.directiveStart&&f$(n,r[n],t)}finally{c!==null&&si(c),gg(a),o.resolving=!1,MF()}}return s}function b$(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(xd)?e[xd]:void 0;return typeof t=="number"?t>=0?t&NF:E$:t}function gP(e,t,n){let i=1<<e;return!!(n[t+(e>>kF)]&i)}function mP(e,t){return!(e&Fe.Self)&&!(e&Fe.Host&&t)}var pa=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,i){return GF(this._tNode,this._lView,t,Fg(i),n)}};function E$(){return new pa(Si(),He())}function _r(e){return zd(()=>{let t=e.prototype.constructor,n=t[lg]||Fw(t),i=Object.prototype,s=Object.getPrototypeOf(e.prototype).constructor;for(;s&&s!==i;){let r=s[lg]||Fw(s);if(r&&r!==n)return r;s=Object.getPrototypeOf(s)}return r=>new r})}function Fw(e){return LP(e)?()=>{let t=Fw(Gn(e));return t&&t()}:ga(e)}function D$(e,t,n,i,s){let r=e,o=t;for(;r!==null&&o!==null&&o[ye]&2048&&!(o[ye]&512);){let a=HF(r,o,n,i|Fe.Self,Vs);if(a!==Vs)return a;let l=r.parent;if(!l){let c=o[cF];if(c){let u=c.get(n,Vs,i);if(u!==Vs)return u}l=UF(o),o=o[yc]}r=l}return s}function UF(e){let t=e[Se],n=t.type;return n===2?t.declTNode:n===1?e[yi]:null}function vP(e,t=null,n=null,i){let s=WF(e,t,n,i);return s.resolveInjectorInitializers(),s}function WF(e,t=null,n=null,i,s=new Set){let r=[n||Hn,Iz(e)];return i=i||(typeof e=="object"?void 0:Un(e)),new kd(r,t||Og(),i||null,s)}var Ue=(()=>{let t=class t{static create(i,s){if(Array.isArray(i))return vP({name:""},s,i,"");{let r=i.name??"";return vP({name:r},i.parent,i.providers,r)}}};t.THROW_IF_NOT_FOUND=Od,t.NULL=new dg,t.\u0275prov=te({token:t,providedIn:"any",factory:()=>Y(qP)}),t.__NG_ELEMENT_ID__=-1;let e=t;return e})();var R$="ngOriginalError";function aw(e){return e[R$]}var vr=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&aw(t);for(;n&&aw(n);)n=aw(n);return n||null}},jF=new X("",{providedIn:"root",factory:()=>U(vr).handleError.bind(void 0)}),NS=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=T$,t.__NG_ENV_ID__=i=>i;let e=t;return e})(),xw=class extends NS{constructor(t){super(),this._lView=t}onDestroy(t){return wF(this._lView,t),()=>Jz(this._lView,t)}};function T$(){return new xw(He())}function I$(){return Sc(Si(),He())}function Sc(e,t){return new Kt(wi(e,t))}var Kt=(()=>{let t=class t{constructor(i){this.nativeElement=i}};t.__NG_ELEMENT_ID__=I$;let e=t;return e})();function A$(e){return e instanceof Kt?e.nativeElement:e}var Ow=class extends Le{constructor(t=!1){super(),this.destroyRef=void 0,this.__isAsync=t,Bz()&&(this.destroyRef=U(NS,{optional:!0})??void 0)}emit(t){let n=qe(null);try{super.next(t)}finally{qe(n)}}subscribe(t,n,i){let s=t,r=n||(()=>null),o=i;if(t&&typeof t=="object"){let l=t;s=l.next?.bind(l),r=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(r=lw(r),s&&(s=lw(s)),o&&(o=lw(o)));let a=super.subscribe({next:s,error:r,complete:o});return t instanceof yt&&t.add(a),a}};function lw(e){return t=>{setTimeout(e,void 0,t)}}var H=Ow;function M$(){return this._results[Symbol.iterator]()}var Nw=class e{get changes(){return this._changes??=new H}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=M$)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let i=az(t);(this._changesDetected=!oz(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},P$="ngSkipHydration",F$="ngskiphydration";function zF(e){let t=e.mergedAttrs;if(t===null)return!1;for(let n=0;n<t.length;n+=2){let i=t[n];if(typeof i=="number")return!1;if(typeof i=="string"&&i.toLowerCase()===F$)return!0}return!1}function $F(e){return e.hasAttribute(P$)}function vg(e){return(e.flags&128)===128}function x$(e){if(vg(e))return!0;let t=e.parent;for(;t;){if(vg(e)||zF(t))return!0;t=t.parent}return!1}var qF=new Map,O$=0;function N$(){return O$++}function k$(e){qF.set(e[Ng],e)}function L$(e){qF.delete(e[Ng])}var CP="__ngContext__";function yo(e,t){pr(t)?(e[CP]=t[Ng],k$(t)):e[CP]=t}function KF(e){return YF(e[Vd])}function QF(e){return YF(e[ls])}function YF(e){for(;e!==null&&!Us(e);)e=e[ls];return e}var kw;function JF(e){kw=e}function Bg(){if(kw!==void 0)return kw;if(typeof document<"u")return document;throw new he(210,!1)}var Gg=new X("",{providedIn:"root",factory:()=>V$}),V$="ng",kS=new X(""),ln=new X("",{providedIn:"platform",factory:()=>"unknown"});var LS=new X("",{providedIn:"root",factory:()=>Bg().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function B$(){let e=new Da;return U(ln)==="browser"&&(e.store=G$(Bg(),U(Gg))),e}var Da=(()=>{let t=class t{constructor(){this.store={},this.onSerializeCallbacks={}}get(i,s){return this.store[i]!==void 0?this.store[i]:s}set(i,s){this.store[i]=s}remove(i){delete this.store[i]}hasKey(i){return this.store.hasOwnProperty(i)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(i,s){this.onSerializeCallbacks[i]=s}toJson(){for(let i in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(i))try{this.store[i]=this.onSerializeCallbacks[i]()}catch(s){console.warn("Exception in onSerialize callback: ",s)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}};t.\u0275prov=te({token:t,providedIn:"root",factory:B$});let e=t;return e})();function G$(e,t){let n=e.getElementById(t+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(i){console.warn("Exception while restoring TransferState for app "+t,i)}return{}}var XF="h",ZF="b",Lw=function(e){return e.FirstChild="f",e.NextSibling="n",e}(Lw||{}),H$="e",U$="t",VS="c",ex="x",Cg="r",W$="i",j$="n",z$="d",$$="__nghData__",tx=$$,cw="ngh",q$="nghm",nx=()=>null;function K$(e,t,n=!1){let i=e.getAttribute(cw);if(i==null)return null;let[s,r]=i.split("|");if(i=n?r:s,!i)return null;let o=r?`|${r}`:"",a=n?s:o,l={};if(i!==""){let u=t.get(Da,null,{optional:!0});u!==null&&(l=u.get(tx,[])[Number(i)])}let c={data:l,firstChild:e.firstChild??null};return n&&(c.firstChild=e,Hg(c,0,e.nextSibling)),a?e.setAttribute(cw,a):e.removeAttribute(cw),c}function Q$(){nx=K$}function BS(e,t,n=!1){return nx(e,t,n)}function Y$(e){let t=e._lView;return t[Se].type===2?null:(dF(t)&&(t=t[kt]),t)}function J$(e){return e.textContent?.replace(/\s/gm,"")}function X$(e){let t=Bg(),n=t.createNodeIterator(e,NodeFilter.SHOW_COMMENT,{acceptNode(r){let o=J$(r);return o==="ngetn"||o==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),i,s=[];for(;i=n.nextNode();)s.push(i);for(let r of s)r.textContent==="ngetn"?r.replaceWith(t.createTextNode("")):r.remove()}function Hg(e,t,n){e.segmentHeads??={},e.segmentHeads[t]=n}function Vw(e,t){return e.segmentHeads?.[t]??null}function Z$(e,t){let n=e.data,i=n[H$]?.[t]??null;return i===null&&n[VS]?.[t]&&(i=GS(e,t)),i}function ix(e,t){return e.data[VS]?.[t]??null}function GS(e,t){let n=ix(e,t)??[],i=0;for(let s of n)i+=s[Cg]*(s[ex]??1);return i}function Ug(e,t){if(typeof e.disconnectedNodes>"u"){let n=e.data[z$];e.disconnectedNodes=n?new Set(n):null}return!!e.disconnectedNodes?.has(t)}var Jp=new X(""),sx=!1,rx=new X("",{providedIn:"root",factory:()=>sx}),e3=new X("");var Bw=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Bj})`}};function Wg(e){return e instanceof Bw?e.changingThisBreaksApplicationSecurity:e}var t3=/^>|^->|<!--|-->|--!>|<!-$/g,n3=/(<|>)/g,i3="\u200B$1\u200B";function s3(e){return e.replace(t3,t=>t.replace(n3,i3))}function r3(e){return e.ownerDocument.body}function ox(e){return e instanceof Function?e():e}function Xp(e){return(e??U(Ue)).get(ln)==="browser"}var Cr=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Cr||{}),o3;function HS(e,t){return o3(e,t)}function cc(e,t,n,i,s){if(i!=null){let r,o=!1;Us(i)?r=i:pr(i)&&(o=!0,i=i[gi]);let a=cs(i);e===0&&n!==null?s==null?ux(t,n,a):wg(t,n,a,s||null,!0):e===1&&n!==null?wg(t,n,a,s||null,!0):e===2?$S(t,a,o):e===3&&t.destroyNode(a),r!=null&&S3(t,e,r,n,s)}}function US(e,t){return e.createText(t)}function a3(e,t,n){e.setValue(t,n)}function WS(e,t){return e.createComment(s3(t))}function jg(e,t,n){return e.createElement(t,n)}function l3(e,t){ax(e,t),t[gi]=null,t[yi]=null}function c3(e,t,n,i,s,r){i[gi]=s,i[yi]=t,$g(e,i,n,1,s,r)}function ax(e,t){t[Gs].changeDetectionScheduler?.notify(1),$g(e,t,t[ut],2,null,null)}function u3(e){let t=e[Vd];if(!t)return uw(e[Se],e);for(;t;){let n=null;if(pr(t))n=t[Vd];else{let i=t[Wn];i&&(n=i)}if(!n){for(;t&&!t[ls]&&t!==e;)pr(t)&&uw(t[Se],t),t=t[on];t===null&&(t=e),pr(t)&&uw(t[Se],t),n=t&&t[ls]}t=n}}function d3(e,t,n,i){let s=Wn+i,r=n.length;i>0&&(n[s-1][ls]=t),i<r-Wn?(t[ls]=n[s],$P(n,Wn+i,t)):(n.push(t),t[ls]=null),t[on]=n;let o=t[qd];o!==null&&n!==o&&h3(o,t);let a=t[gr];a!==null&&a.insertView(e),Iw(t),t[ye]|=128}function h3(e,t){let n=e[gc],s=t[on][on][mi];t[mi]!==s&&(e[ye]|=bS.HasTransplantedViews),n===null?e[gc]=[t]:n.push(t)}function lx(e,t){let n=e[gc],i=n.indexOf(t);n.splice(i,1)}function yg(e,t){if(e.length<=Wn)return;let n=Wn+t,i=e[n];if(i){let s=i[qd];s!==null&&s!==e&&lx(s,i),t>0&&(e[n-1][ls]=i[ls]);let r=ug(e,Wn+t);l3(i[Se],i);let o=r[gr];o!==null&&o.detachView(r[Se]),i[on]=null,i[ls]=null,i[ye]&=-129}return i}function jS(e,t){if(!(t[ye]&256)){let n=t[ut];n.destroyNode&&$g(e,t,n,3,null,null),u3(t)}}function uw(e,t){if(t[ye]&256)return;let n=qe(null);try{t[ye]&=-129,t[ye]|=256,t[va]&&EM(t[va]),p3(e,t),f3(e,t),t[Se].type===1&&t[ut].destroy();let i=t[qd];if(i!==null&&Us(t[on])){i!==t[on]&&lx(i,t);let s=t[gr];s!==null&&s.detachView(e)}L$(t)}finally{qe(n)}}function f3(e,t){let n=e.cleanup,i=t[Ld];if(n!==null)for(let r=0;r<n.length-1;r+=2)if(typeof n[r]=="string"){let o=n[r+3];o>=0?i[o]():i[-o].unsubscribe(),r+=2}else{let o=i[n[r+1]];n[r].call(o)}i!==null&&(t[Ld]=null);let s=t[mo];if(s!==null){t[mo]=null;for(let r=0;r<s.length;r++){let o=s[r];o()}}}function p3(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let s=t[n[i]];if(!(s instanceof ya)){let r=n[i+1];if(Array.isArray(r))for(let o=0;o<r.length;o+=2){let a=s[r[o]],l=r[o+1];Ls(4,a,l);try{l.call(a)}finally{Ls(5,a,l)}}else{Ls(4,s,r);try{r.call(s)}finally{Ls(5,s,r)}}}}}function cx(e,t,n){return g3(e,t.parent,n)}function g3(e,t,n){let i=t;for(;i!==null&&i.type&40;)t=i,i=t.parent;if(i===null)return n[gi];{let{componentOffset:s}=i;if(s>-1){let{encapsulation:r}=e.data[i.directiveStart+s];if(r===Bs.None||r===Bs.Emulated)return null}return wi(i,n)}}function wg(e,t,n,i,s){e.insertBefore(t,n,i,s)}function ux(e,t,n){e.appendChild(t,n)}function yP(e,t,n,i,s){i!==null?wg(e,t,n,i,s):ux(e,t,n)}function m3(e,t,n,i){e.removeChild(t,n,i)}function zS(e,t){return e.parentNode(t)}function v3(e,t){return e.nextSibling(t)}function dx(e,t,n){return y3(e,t,n)}function C3(e,t,n){return e.type&40?wi(e,n):null}var y3=C3,wP;function zg(e,t,n,i){let s=cx(e,i,t),r=t[ut],o=i.parent||t[yi],a=dx(o,i,t);if(s!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)yP(r,s,n[l],a,!1);else yP(r,s,n,a,!1);wP!==void 0&&wP(r,i,t,n,s)}function og(e,t){if(t!==null){let n=t.type;if(n&3)return wi(t,e);if(n&4)return Gw(-1,e[t.index]);if(n&8){let i=t.child;if(i!==null)return og(e,i);{let s=e[t.index];return Us(s)?Gw(-1,s):cs(s)}}else{if(n&32)return HS(t,e)()||cs(e[t.index]);{let i=hx(e,t);if(i!==null){if(Array.isArray(i))return i[0];let s=Hd(e[mi]);return og(s,i)}else return og(e,t.next)}}}return null}function hx(e,t){if(t!==null){let i=e[mi][yi],s=t.projection;return i.projection[s]}return null}function Gw(e,t){let n=Wn+e+1;if(n<t.length){let i=t[n],s=i[Se].firstChild;if(s!==null)return og(i,s)}return t[mr]}function $S(e,t,n){let i=zS(e,t);i&&m3(e,i,t,n)}function fx(e){e.textContent=""}function qS(e,t,n,i,s,r,o){for(;n!=null;){let a=i[n.index],l=n.type;if(o&&t===0&&(a&&yo(cs(a),i),n.flags|=2),(n.flags&32)!==32)if(l&8)qS(e,t,n.child,i,s,r,!1),cc(t,e,s,a,r);else if(l&32){let c=HS(n,i),u;for(;u=c();)cc(t,e,s,u,r);cc(t,e,s,a,r)}else l&16?px(e,t,i,n,s,r):cc(t,e,s,a,r);n=o?n.projectionNext:n.next}}function $g(e,t,n,i,s,r){qS(n,i,e.firstChild,t,s,r,!1)}function w3(e,t,n){let i=t[ut],s=cx(e,n,t),r=n.parent||t[yi],o=dx(r,n,t);px(i,0,t,n,s,o)}function px(e,t,n,i,s,r){let o=n[mi],l=o[yi].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];cc(t,e,s,u,r)}else{let c=l,u=o[on];vg(i)&&(c.flags|=128),qS(e,t,c,u,s,r,!0)}}function S3(e,t,n,i,s){let r=n[mr],o=cs(n);r!==o&&cc(t,e,i,r,s);for(let a=Wn;a<n.length;a++){let l=n[a];$g(l[Se],l,e,t,i,r)}}function _3(e,t,n,i,s){if(t)s?e.addClass(n,i):e.removeClass(n,i);else{let r=i.indexOf("-")===-1?void 0:Cr.DashCase;s==null?e.removeStyle(n,i,r):(typeof s=="string"&&s.endsWith("!important")&&(s=s.slice(0,-10),r|=Cr.Important),e.setStyle(n,i,s,r))}}function b3(e,t,n){e.setAttribute(t,"style",n)}function gx(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function mx(e,t,n){let{mergedAttrs:i,classes:s,styles:r}=n;i!==null&&bw(e,t,i),s!==null&&gx(e,t,s),r!==null&&b3(e,t,r)}var br={};function ce(e=1){vx(qt(),He(),Ea()+e,!1)}function vx(e,t,n,i){if(!i)if((t[ye]&3)===3){let r=e.preOrderCheckHooks;r!==null&&ig(t,r,n)}else{let r=e.preOrderHooks;r!==null&&sg(t,r,0,n)}Ca(n)}function J(e,t=Fe.Default){let n=He();if(n===null)return Y(e,t);let i=Si();return GF(i,n,Gn(e),t)}function Cx(e,t,n,i,s,r){let o=qe(null);try{let a=null;s&rn.SignalBased&&(a=t[i][ql]),a!==null&&a.transformFn!==void 0&&(r=a.transformFn(r)),s&rn.HasDecoratorInputTransform&&(r=e.inputTransforms[i].call(t,r)),e.setInput!==null?e.setInput(t,a,r,n,i):hF(t,a,i,r)}finally{qe(o)}}function E3(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let s=n[i];if(s<0)Ca(~s);else{let r=s,o=n[++i],a=n[++i];l$(o,r);let l=t[r];a(2,l)}}}finally{Ca(-1)}}function qg(e,t,n,i,s,r,o,a,l,c,u){let h=t.blueprint.slice();return h[gi]=s,h[ye]=i|4|128|8|64,(c!==null||e&&e[ye]&2048)&&(h[ye]|=2048),yF(h),h[on]=h[yc]=e,h[Ni]=n,h[Gs]=o||e&&e[Gs],h[ut]=a||e&&e[ut],h[pc]=l||e&&e[pc]||null,h[yi]=r,h[Ng]=N$(),h[Oi]=u,h[cF]=c,h[mi]=t.type==2?e[mi]:h,h}function _c(e,t,n,i,s){let r=e.data[t];if(r===null)r=D3(e,t,n,i,s),a$()&&(r.flags|=32);else if(r.type&64){r.type=n,r.value=i,r.attrs=s;let o=s$();r.injectorIndex=o===null?-1:o.injectorIndex}return ba(r,!0),r}function D3(e,t,n,i,s){let r=_F(),o=IS(),a=o?r:r&&r.parent,l=e.data[t]=F3(e,a,n,t,i,s);return e.firstChild===null&&(e.firstChild=l),r!==null&&(o?r.child==null&&l.parent!==null&&(r.child=l):r.next===null&&(r.next=l,l.prev=r)),l}function yx(e,t,n,i){if(n===0)return-1;let s=t.length;for(let r=0;r<n;r++)t.push(i),e.blueprint.push(i),e.data.push(null);return s}function wx(e,t,n,i,s){let r=Ea(),o=i&2;try{Ca(-1),o&&t.length>kt&&vx(e,t,kt,!1),Ls(o?2:0,s),n(i,s)}finally{Ca(r),Ls(o?3:1,s)}}function KS(e,t,n){if(ES(t)){let i=qe(null);try{let s=t.directiveStart,r=t.directiveEnd;for(let o=s;o<r;o++){let a=e.data[o];if(a.contentQueries){let l=n[o];a.contentQueries(1,l,o)}}}finally{qe(i)}}}function QS(e,t,n){SF()&&(V3(e,t,n,wi(n,t)),(n.flags&64)===64&&Dx(e,t,n))}function YS(e,t,n=wi){let i=t.localNames;if(i!==null){let s=t.index+1;for(let r=0;r<i.length;r+=2){let o=i[r+1],a=o===-1?n(t,e):e[o];e[s++]=a}}}function Sx(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=JS(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function JS(e,t,n,i,s,r,o,a,l,c,u){let h=kt+i,f=h+s,g=R3(h,f),v=typeof c=="function"?c():c;return g[Se]={type:e,blueprint:g,template:n,queries:null,viewQuery:a,declTNode:t,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof r=="function"?r():r,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:v,incompleteFirstPass:!1,ssrId:u}}function R3(e,t){let n=[];for(let i=0;i<t;i++)n.push(i<e?null:br);return n}function T3(e,t,n,i){let r=i.get(rx,sx)||n===Bs.ShadowDom,o=e.selectRootElement(t,r);return I3(o),o}function I3(e){_x(e)}var _x=()=>null;function A3(e){$F(e)?fx(e):X$(e)}function M3(){_x=A3}function P3(e,t,n,i){let s=Ix(t);s.push(n),e.firstCreatePass&&Ax(e).push(i,s.length-1)}function F3(e,t,n,i,s,r){let o=t?t.injectorIndex:-1,a=0;return wc()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:s,attrs:r,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function SP(e,t,n,i,s){for(let r in t){if(!t.hasOwnProperty(r))continue;let o=t[r];if(o===void 0)continue;i??={};let a,l=rn.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=r;if(s!==null){if(!s.hasOwnProperty(r))continue;c=s[r]}e===0?_P(i,n,c,a,l):_P(i,n,c,a)}return i}function _P(e,t,n,i,s){let r;e.hasOwnProperty(n)?(r=e[n]).push(t,i):r=e[n]=[t,i],s!==void 0&&r.push(s)}function x3(e,t,n){let i=t.directiveStart,s=t.directiveEnd,r=e.data,o=t.attrs,a=[],l=null,c=null;for(let u=i;u<s;u++){let h=r[u],f=n?n.get(h):null,g=f?f.inputs:null,v=f?f.outputs:null;l=SP(0,h.inputs,u,l,g),c=SP(1,h.outputs,u,c,v);let y=l!==null&&o!==null&&!SS(t)?Q3(l,u,o):null;a.push(y)}l!==null&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}function O3(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function bx(e,t,n,i,s,r,o,a){let l=wi(t,n),c=t.inputs,u;!a&&c!=null&&(u=c[i])?(ZS(e,n,u,i,s),Kd(t)&&N3(n,t.index)):t.type&3?(i=O3(i),s=o!=null?o(s,t.value||"",i):s,r.setProperty(l,i,s)):t.type&12}function N3(e,t){let n=_o(t,e);n[ye]&16||(n[ye]|=64)}function XS(e,t,n,i){if(SF()){let s=i===null?null:{"":-1},r=G3(e,n),o,a;r===null?o=a=null:[o,a]=r,o!==null&&Ex(e,t,n,o,s,a),s&&H3(n,i,s)}n.mergedAttrs=Nd(n.mergedAttrs,n.attrs)}function Ex(e,t,n,i,s,r){for(let c=0;c<i.length;c++)Pw(mg(n,t),e,i[c].type);W3(n,e.data.length,i.length);for(let c=0;c<i.length;c++){let u=i[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=yx(e,t,i.length,null);for(let c=0;c<i.length;c++){let u=i[c];n.mergedAttrs=Nd(n.mergedAttrs,u.hostAttrs),j3(e,n,t,l,u),U3(l,u,s),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let h=u.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}x3(e,n,r)}function k3(e,t,n,i,s){let r=s.hostBindings;if(r){let o=e.hostBindingOpCodes;o===null&&(o=e.hostBindingOpCodes=[]);let a=~t.index;L3(o)!=a&&o.push(a),o.push(n,i,r)}}function L3(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function V3(e,t,n,i){let s=n.directiveStart,r=n.directiveEnd;Kd(n)&&z3(t,n,e.data[s+n.componentOffset]),e.firstCreatePass||mg(n,t),yo(i,t);let o=n.initialInputs;for(let a=s;a<r;a++){let l=e.data[a],c=wa(t,e,a,n);if(yo(c,t),o!==null&&K3(t,a-s,c,l,n,o),Co(l)){let u=_o(n.index,t);u[Ni]=wa(t,e,a,n)}}}function Dx(e,t,n){let i=n.directiveStart,s=n.directiveEnd,r=n.index,o=c$();try{Ca(r);for(let a=i;a<s;a++){let l=e.data[a],c=t[a];Aw(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&B3(l,c)}}finally{Ca(-1),Aw(o)}}function B3(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function G3(e,t){let n=e.directiveRegistry,i=null,s=null;if(n)for(let r=0;r<n.length;r++){let o=n[r];if(JP(t,o.selectors,!1))if(i||(i=[]),Co(o))if(o.findHostDirectiveDefs!==null){let a=[];s=s||new Map,o.findHostDirectiveDefs(o,a,s),i.unshift(...a,o);let l=a.length;Hw(e,t,l)}else i.unshift(o),Hw(e,t,0);else s=s||new Map,o.findHostDirectiveDefs?.(o,i,s),i.push(o)}return i===null?null:[i,s]}function Hw(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function H3(e,t,n){if(t){let i=e.localNames=[];for(let s=0;s<t.length;s+=2){let r=n[t[s+1]];if(r==null)throw new he(-301,!1);i.push(t[s],r)}}}function U3(e,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;Co(t)&&(n[""]=e)}}function W3(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function j3(e,t,n,i,s){e.data[i]=s;let r=s.factory||(s.factory=ga(s.type,!0)),o=new ya(r,Co(s),J);e.blueprint[i]=o,n[i]=o,k3(e,t,i,yx(e,n,s.hostVars,br),s)}function z3(e,t,n){let i=wi(t,e),s=Sx(n),r=e[Gs].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Kg(e,qg(e,s,null,o,i,t,null,r.createRenderer(i,n),null,null,null));e[t.index]=a}function $3(e,t,n,i,s,r){let o=wi(e,t);q3(t[ut],o,r,e.value,n,i,s)}function q3(e,t,n,i,s,r,o){if(r==null)e.removeAttribute(t,s,n);else{let a=o==null?vS(r):o(r,i||"",s);e.setAttribute(t,s,a,n)}}function K3(e,t,n,i,s,r){let o=r[t];if(o!==null)for(let a=0;a<o.length;){let l=o[a++],c=o[a++],u=o[a++],h=o[a++];Cx(i,n,l,c,u,h)}}function Q3(e,t,n){let i=null,s=0;for(;s<n.length;){let r=n[s];if(r===0){s+=4;continue}else if(r===5){s+=2;continue}if(typeof r=="number")break;if(e.hasOwnProperty(r)){i===null&&(i=[]);let o=e[r];for(let a=0;a<o.length;a+=3)if(o[a]===t){i.push(r,o[a+1],o[a+2],n[s+1]);break}}s+=2}return i}function Rx(e,t,n,i){return[e,!0,0,t,null,i,null,n,null,null]}function Tx(e,t){let n=e.contentQueries;if(n!==null){let i=qe(null);try{for(let s=0;s<n.length;s+=2){let r=n[s],o=n[s+1];if(o!==-1){let a=e.data[o];MS(r),a.contentQueries(2,t[o],o)}}}finally{qe(i)}}}function Kg(e,t){return e[Vd]?e[hP][ls]=t:e[Vd]=t,e[hP]=t,t}function Uw(e,t,n){MS(0);let i=qe(null);try{t(e,n)}finally{qe(i)}}function Ix(e){return e[Ld]||(e[Ld]=[])}function Ax(e){return e.cleanup||(e.cleanup=[])}function Mx(e,t){let n=e[pc],i=n?n.get(vr,null):null;i&&i.handleError(t)}function ZS(e,t,n,i,s){for(let r=0;r<n.length;){let o=n[r++],a=n[r++],l=n[r++],c=t[o],u=e.data[o];Cx(u,c,i,a,l,s)}}function Y3(e,t,n){let i=vF(t,e);a3(e[ut],i,n)}function J3(e,t){let n=_o(t,e),i=n[Se];X3(i,n);let s=n[gi];s!==null&&n[Oi]===null&&(n[Oi]=BS(s,n[pc])),e_(i,n,n[Ni])}function X3(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function e_(e,t,n){PS(t);try{let i=e.viewQuery;i!==null&&Uw(1,i,n);let s=e.template;s!==null&&wx(e,t,s,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[gr]?.finishViewCreation(e),e.staticContentQueries&&Tx(e,t),e.staticViewQueries&&Uw(2,e.viewQuery,n);let r=e.components;r!==null&&Z3(t,r)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{t[ye]&=-5,FS()}}function Z3(e,t){for(let n=0;n<t.length;n++)J3(e,t[n])}function Px(e,t,n,i){let s=qe(null);try{let r=t.tView,a=e[ye]&4096?4096:16,l=qg(e,r,n,a,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=e[t.index];l[qd]=c;let u=e[gr];return u!==null&&(l[gr]=u.createEmbeddedView(r)),e_(r,l,n),l}finally{qe(s)}}function e4(e,t){let n=Wn+t;if(n<e.length)return e[n]}function Ww(e,t){return!t||t.firstChild===null||vg(e)}function Fx(e,t,n,i=!0){let s=t[Se];if(d3(s,t,e,n),i){let o=Gw(n,e),a=t[ut],l=zS(a,e[mr]);l!==null&&c3(s,e[yi],a,t,l,o)}let r=t[Oi];r!==null&&r.firstChild!==null&&(r.firstChild=null)}function t4(e,t){let n=yg(e,t);return n!==void 0&&jS(n[Se],n),n}function Sg(e,t,n,i,s=!1){for(;n!==null;){let r=t[n.index];r!==null&&i.push(cs(r)),Us(r)&&n4(r,i);let o=n.type;if(o&8)Sg(e,t,n.child,i);else if(o&32){let a=HS(n,t),l;for(;l=a();)i.push(l)}else if(o&16){let a=hx(t,n);if(Array.isArray(a))i.push(...a);else{let l=Hd(t[mi]);Sg(l[Se],l,a,i,!0)}}n=s?n.projectionNext:n.next}return i}function n4(e,t){for(let n=Wn;n<e.length;n++){let i=e[n],s=i[Se].firstChild;s!==null&&Sg(i[Se],i,s,t)}e[mr]!==e[gi]&&t.push(e[mr])}var xx=[];function i4(e){return e[va]??s4(e)}function s4(e){let t=xx.pop()??Object.create(o4);return t.lView=e,t}function r4(e){e.lView[va]!==e&&(e.lView=null,xx.push(e))}var o4=se(B({},xy),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Gd(e.lView)},consumerOnSignalRead(){this.lView[va]=this}}),Ox=100;function Nx(e,t=!0,n=0){let i=e[Gs],s=i.rendererFactory,r=!1;r||s.begin?.();try{a4(e,n)}catch(o){throw t&&Mx(e,o),o}finally{r||(s.end?.(),i.inlineEffectRunner?.flush())}}function a4(e,t){jw(e,t);let n=0;for(;TS(e);){if(n===Ox)throw new he(103,!1);n++,jw(e,1)}}function l4(e,t,n,i){let s=t[ye];if((s&256)===256)return;let r=!1;!r&&t[Gs].inlineEffectRunner?.flush(),PS(t);let o=null,a=null;!r&&c4(e)&&(a=i4(t),o=_M(a));try{yF(t),o$(e.bindingStartIndex),n!==null&&wx(e,t,n,2,i);let l=(s&3)===3;if(!r)if(l){let h=e.preOrderCheckHooks;h!==null&&ig(t,h,null)}else{let h=e.preOrderHooks;h!==null&&sg(t,h,0,null),rw(t,0)}if(u4(t),kx(t,0),e.contentQueries!==null&&Tx(e,t),!r)if(l){let h=e.contentCheckHooks;h!==null&&ig(t,h)}else{let h=e.contentHooks;h!==null&&sg(t,h,1),rw(t,1)}E3(e,t);let c=e.components;c!==null&&Vx(t,c,0);let u=e.viewQuery;if(u!==null&&Uw(2,u,i),!r)if(l){let h=e.viewCheckHooks;h!==null&&ig(t,h)}else{let h=e.viewHooks;h!==null&&sg(t,h,2),rw(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[sw]){for(let h of t[sw])h();t[sw]=null}r||(t[ye]&=-73)}catch(l){throw Gd(t),l}finally{a!==null&&(bM(a,o),r4(a)),FS()}}function c4(e){return e.type!==2}function kx(e,t){for(let n=KF(e);n!==null;n=QF(n))for(let i=Wn;i<n.length;i++){let s=n[i];Lx(s,t)}}function u4(e){for(let t=KF(e);t!==null;t=QF(t)){if(!(t[ye]&bS.HasTransplantedViews))continue;let n=t[gc];for(let i=0;i<n.length;i++){let s=n[i],r=s[on];Qz(s)}}}function d4(e,t,n){let i=_o(t,e);Lx(i,n)}function Lx(e,t){RS(e)&&jw(e,t)}function jw(e,t){let i=e[Se],s=e[ye],r=e[va],o=!!(t===0&&s&16);if(o||=!!(s&64&&t===0),o||=!!(s&1024),o||=!!(r?.dirty&&Oy(r)),r&&(r.dirty=!1),e[ye]&=-9217,o)l4(i,e,i.template,e[Ni]);else if(s&8192){kx(e,1);let a=i.components;a!==null&&Vx(e,a,1)}}function Vx(e,t,n){for(let i=0;i<t.length;i++)d4(e,t[i],n)}function t_(e){for(e[Gs].changeDetectionScheduler?.notify();e;){e[ye]|=64;let t=Hd(e);if(dF(e)&&!t)return e;e=t}return null}var Sa=class{get rootNodes(){let t=this._lView,n=t[Se];return Sg(n,t,n.firstChild,[])}constructor(t,n,i=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ni]}set context(t){this._lView[Ni]=t}get destroyed(){return(this._lView[ye]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[on];if(Us(t)){let n=t[hg],i=n?n.indexOf(this):-1;i>-1&&(yg(t,i),ug(n,i))}this._attachedToViewContainer=!1}jS(this._lView[Se],this._lView)}onDestroy(t){wF(this._lView,t)}markForCheck(){t_(this._cdRefInjectingView||this._lView)}detach(){this._lView[ye]&=-129}reattach(){Iw(this._lView),this._lView[ye]|=128}detectChanges(){this._lView[ye]|=1024,Nx(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new he(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,ax(this._lView[Se],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new he(902,!1);this._appRef=t,Iw(this._lView)}},Hs=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=p4;let e=t;return e})(),h4=Hs,f4=class extends h4{constructor(t,n,i){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,i){let s=Px(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:i});return new Sa(s)}};function p4(){return Qg(Si(),He())}function Qg(e,t){return e.type&4?new f4(t,e,Sc(e,t)):null}function Bx(e){let t=e[Bd]??[],i=e[on][ut];for(let s of t)g4(s,i);e[Bd]=Hn}function g4(e,t){let n=0,i=e.firstChild;if(i){let s=e.data[Cg];for(;n<s;){let r=i.nextSibling;$S(t,i,!1),i=r,n++}}}function Gx(e){Bx(e);for(let t=Wn;t<e.length;t++)_g(e[t])}function m4(e){let t=e[Oi]?.i18nNodes;if(t){let n=e[ut];for(let i of t.values())$S(n,i,!1);e[Oi].i18nNodes=void 0}}function _g(e){m4(e);let t=e[Se];for(let n=kt;n<t.bindingStartIndex;n++)if(Us(e[n])){let i=e[n];Gx(i)}else pr(e[n])&&_g(e[n])}function v4(e){let t=e._views;for(let n of t){let i=Y$(n);if(i!==null&&i[gi]!==null)if(pr(i))_g(i);else{let s=i[gi];_g(s),Gx(i)}}}var C4=new RegExp(`^(\\d+)*(${ZF}|${XF})*(.*)`);function y4(e){let t=e.match(C4),[n,i,s,r]=t,o=i?parseInt(i,10):s,a=[];for(let[l,c,u]of r.matchAll(/(f|n)(\d*)/g)){let h=parseInt(u,10)||1;a.push(c,h)}return[o,...a]}function w4(e){return!e.prev&&e.parent?.type===8}function dw(e){return e.index-kt}function S4(e,t){let n=e.i18nNodes;if(n){let i=n.get(t);return i&&n.delete(t),i}return null}function Yg(e,t,n,i){let s=dw(i),r=S4(e,s);if(!r){let o=e.data[j$];if(o?.[s])r=b4(o[s],n);else if(t.firstChild===i)r=e.firstChild;else{let a=i.prev===null,l=i.prev??i.parent;if(w4(i)){let c=dw(i.parent);r=Vw(e,c)}else{let c=wi(l,n);if(a)r=c.firstChild;else{let u=dw(l),h=Vw(e,u);if(l.type===2&&h){let g=GS(e,u)+1;r=Jg(g,h)}else r=c.nextSibling}}}}return r}function Jg(e,t){let n=t;for(let i=0;i<e;i++)n=n.nextSibling;return n}function _4(e,t){let n=e;for(let i=0;i<t.length;i+=2){let s=t[i],r=t[i+1];for(let o=0;o<r;o++)switch(s){case Lw.FirstChild:n=n.firstChild;break;case Lw.NextSibling:n=n.nextSibling;break}}return n}function b4(e,t){let[n,...i]=y4(e),s;if(n===XF)s=t[mi][gi];else if(n===ZF)s=r3(t[mi][gi]);else{let r=Number(n);s=cs(t[r+kt])}return _4(s,i)}function E4(e,t){let n=[];for(let i of t)for(let s=0;s<(i[ex]??1);s++){let r={data:i,firstChild:null};i[Cg]>0&&(r.firstChild=e,e=Jg(i[Cg],e)),n.push(r)}return[e,n]}var Hx=()=>null;function D4(e,t){let n=e[Bd];return!t||n===null||n.length===0?null:n[0].data[W$]===t?n.shift():(Bx(e),null)}function R4(){Hx=D4}function zw(e,t){return Hx(e,t)}var $w=class{},qw=class{},bg=class{};function T4(e){let t=Error(`No component factory found for ${Un(e)}.`);return t[I4]=e,t}var I4="ngComponent";var Kw=class{resolveComponentFactory(t){throw T4(t)}},bc=(()=>{let t=class t{};t.NULL=new Kw;let e=t;return e})(),Ud=class{},Er=(()=>{let t=class t{constructor(){this.destroyNode=null}};t.__NG_ELEMENT_ID__=()=>A4();let e=t;return e})();function A4(){let e=He(),t=Si(),n=_o(t.index,e);return(pr(n)?n:e)[ut]}var M4=(()=>{let t=class t{};t.\u0275prov=te({token:t,providedIn:"root",factory:()=>null});let e=t;return e})(),hw={};var bP=new Set;function Ra(e){bP.has(e)||(bP.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function EP(...e){}function P4(){let e=typeof Fd.requestAnimationFrame=="function",t=Fd[e?"requestAnimationFrame":"setTimeout"],n=Fd[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i);let s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}var ue=class e{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new H(!1),this.onMicrotaskEmpty=new H(!1),this.onStable=new H(!1),this.onError=new H(!1),typeof Zone>"u")throw new he(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&n,s.shouldCoalesceRunChangeDetection=i,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=P4().nativeRequestAnimationFrame,O4(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new he(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new he(909,!1)}run(t,n,i){return this._inner.run(t,n,i)}runTask(t,n,i,s){let r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+s,t,F4,EP,EP);try{return r.runTask(o,n,i)}finally{r.cancelTask(o)}}runGuarded(t,n,i){return this._inner.runGuarded(t,n,i)}runOutsideAngular(t){return this._outer.run(t)}},F4={};function n_(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function x4(e){e.isCheckStableRunning||e.lastRequestAnimationFrameId!==-1||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Fd,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Qw(e),e.isCheckStableRunning=!0,n_(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Qw(e))}function O4(e){let t=()=>{x4(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,s,r,o,a)=>{if(N4(a))return n.invokeTask(s,r,o,a);try{return DP(e),n.invokeTask(s,r,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&r.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),RP(e)}},onInvoke:(n,i,s,r,o,a,l)=>{try{return DP(e),n.invoke(s,r,o,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),RP(e)}},onHasTask:(n,i,s,r)=>{n.hasTask(s,r),i===s&&(r.change=="microTask"?(e._hasPendingMicrotasks=r.microTask,Qw(e),n_(e)):r.change=="macroTask"&&(e.hasPendingMacrotasks=r.macroTask))},onHandleError:(n,i,s,r)=>(n.handleError(s,r),e.runOutsideAngular(()=>e.onError.emit(r)),!1)})}function Qw(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.lastRequestAnimationFrameId!==-1?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function DP(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function RP(e){e._nesting--,n_(e)}function N4(e){return!Array.isArray(e)||e.length!==1?!1:e[0].data?.__ignore_ng_zone__===!0}var Ux=(()=>{let t=class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let s of i)s()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};t.\u0275prov=te({token:t,providedIn:"root",factory:()=>new t});let e=t;return e})();function Eg(e,t,n){let i=n?e.styles:null,s=n?e.classes:null,r=0;if(t!==null)for(let o=0;o<t.length;o++){let a=t[o];if(typeof a=="number")r=a;else if(r==1)s=yw(s,a);else if(r==2){let l=a,c=t[++o];i=yw(i,l+": "+c+";")}}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=s:e.classesWithoutHost=s}var Dg=class extends bc{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=vo(t);return new vc(n,this.ngModule)}};function TP(e){let t=[];for(let n in e){if(!e.hasOwnProperty(n))continue;let i=e[n];i!==void 0&&t.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return t}function k4(e){let t=e.toLowerCase();return t==="svg"?mF:t==="math"?jz:null}var Yw=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,i){i=Fg(i);let s=this.injector.get(t,hw,i);return s!==hw||n===hw?s:this.parentInjector.get(t,n,i)}},vc=class extends bg{get inputs(){let t=this.componentDef,n=t.inputTransforms,i=TP(t.inputs);if(n!==null)for(let s of i)n.hasOwnProperty(s.propName)&&(s.transform=n[s.propName]);return i}get outputs(){return TP(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=bz(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,i,s){let r=qe(null);try{s=s||this.ngModule;let o=s instanceof jn?s:s?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Yw(t,o):t,l=a.get(Ud,null);if(l===null)throw new he(407,!1);let c=a.get(M4,null),u=a.get(Ux,null),h=a.get($w,null),f={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:h},g=l.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",y=i?T3(g,i,this.componentDef.encapsulation,a):jg(g,v,k4(v)),C=512;this.componentDef.signals?C|=4096:this.componentDef.onPush||(C|=16);let E=null;y!==null&&(E=BS(y,a,!0));let I=JS(0,null,null,1,0,null,null,null,null,null,null),T=qg(null,I,null,C,null,null,f,g,a,null,E);PS(T);let x,z;try{let V=this.componentDef,b,S=null;V.findHostDirectiveDefs?(b=[],S=new Map,V.findHostDirectiveDefs(V,b,S),b.push(V)):b=[V];let _=L4(T,y),R=V4(_,y,V,b,T,f,g);z=DS(I,kt),y&&H4(g,V,y,i),n!==void 0&&U4(z,this.ngContentSelectors,n),x=G4(R,V,b,S,T,[W4]),e_(I,T,null)}finally{FS()}return new Jw(this.componentType,x,Sc(z,T),T,z)}finally{qe(r)}}},Jw=class extends qw{constructor(t,n,i,s,r){super(),this.location=i,this._rootLView=s,this._tNode=r,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Sa(s,void 0,!1),this.componentType=t}setInput(t,n){let i=this._tNode.inputs,s;if(i!==null&&(s=i[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let r=this._rootLView;ZS(r[Se],r,s,t,n),this.previousInputValues.set(t,n);let o=_o(this._tNode.index,r);t_(o)}}get injector(){return new pa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function L4(e,t){let n=e[Se],i=kt;return e[i]=t,_c(n,i,2,"#host",null)}function V4(e,t,n,i,s,r,o){let a=s[Se];B4(i,e,t,o);let l=null;t!==null&&(l=BS(t,s[pc]));let c=r.rendererFactory.createRenderer(t,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let h=qg(s,Sx(n),null,u,s[e.index],e,r,c,null,null,l);return a.firstCreatePass&&Hw(a,e,i.length-1),Kg(s,h),s[e.index]=h}function B4(e,t,n,i){for(let s of e)t.mergedAttrs=Nd(t.mergedAttrs,s.hostAttrs);t.mergedAttrs!==null&&(Eg(t,t.mergedAttrs,!0),n!==null&&mx(i,n,t))}function G4(e,t,n,i,s,r){let o=Si(),a=s[Se],l=wi(o,s);Ex(a,s,o,n,null,i);for(let u=0;u<n.length;u++){let h=o.directiveStart+u,f=wa(s,a,h,o);yo(f,s)}Dx(a,s,o),l&&yo(l,s);let c=wa(s,a,o.directiveStart+o.componentOffset,o);if(e[Ni]=s[Ni]=c,r!==null)for(let u of r)u(c,t);return KS(a,o,s),c}function H4(e,t,n,i){if(i)bw(e,n,["ng-version","17.3.11"]);else{let{attrs:s,classes:r}=Ez(t.selectors[0]);s&&bw(e,n,s),r&&r.length>0&&gx(e,n,r.join(" "))}}function U4(e,t,n){let i=e.projection=[];for(let s=0;s<t.length;s++){let r=n[s];i.push(r!=null?Array.from(r):null)}}function W4(){let e=Si();Vg(He()[Se],e)}var ki=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=j4;let e=t;return e})();function j4(){let e=Si();return jx(e,He())}var z4=ki,Wx=class extends z4{constructor(t,n,i){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=i}get element(){return Sc(this._hostTNode,this._hostLView)}get injector(){return new pa(this._hostTNode,this._hostLView)}get parentInjector(){let t=OS(this._hostTNode,this._hostLView);if(OF(t)){let n=pg(t,this._hostLView),i=fg(t),s=n[Se].data[i+8];return new pa(s,n)}else return new pa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=IP(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-Wn}createEmbeddedView(t,n,i){let s,r;typeof i=="number"?s=i:i!=null&&(s=i.index,r=i.injector);let o=zw(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},r,o);return this.insertImpl(a,s,Ww(this._hostTNode,o)),a}createComponent(t,n,i,s,r){let o=t&&!Gz(t),a;if(o)a=n;else{let v=n||{};a=v.index,i=v.injector,s=v.projectableNodes,r=v.environmentInjector||v.ngModuleRef}let l=o?t:new vc(vo(t)),c=i||this.parentInjector;if(!r&&l.ngModule==null){let y=(o?c:this.parentInjector).get(jn,null);y&&(r=y)}let u=vo(l.componentType??{}),h=zw(this._lContainer,u?.id??null),f=h?.firstChild??null,g=l.create(c,s,f,r);return this.insertImpl(g.hostView,a,Ww(this._hostTNode,h)),g}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,i){let s=t._lView;if(Kz(s)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=s[on],c=new Wx(l,l[yi],l[on]);c.detach(c.indexOf(t))}}let r=this._adjustIndex(n),o=this._lContainer;return Fx(o,s,r,i),t.attachToViewContainerRef(),$P(fw(o),r,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=IP(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),i=yg(this._lContainer,n);i&&(ug(fw(this._lContainer),n),jS(i[Se],i))}detach(t){let n=this._adjustIndex(t,-1),i=yg(this._lContainer,n);return i&&ug(fw(this._lContainer),n)!=null?new Sa(i):null}_adjustIndex(t,n=0){return t??this.length+n}};function IP(e){return e[hg]}function fw(e){return e[hg]||(e[hg]=[])}function jx(e,t){let n,i=t[e.index];return Us(i)?n=i:(n=Rx(i,t,null,e),t[e.index]=n,Kg(t,n)),zx(n,t,e,i),new Wx(n,e,t)}function $4(e,t){let n=e[ut],i=n.createComment(""),s=wi(t,e),r=zS(n,s);return wg(n,r,i,v3(n,s),!1),i}var zx=$x,i_=()=>!1;function q4(e,t,n){return i_(e,t,n)}function $x(e,t,n,i){if(e[mr])return;let s;n.type&8?s=cs(i):s=$4(t,n),e[mr]=s}function K4(e,t,n){if(e[mr]&&e[Bd])return!0;let i=n[Oi],s=t.index-kt;if(!i||x$(t)||Ug(i,s))return!1;let o=Vw(i,s),a=i.data[VS]?.[s],[l,c]=E4(o,a);return e[mr]=l,e[Bd]=c,!0}function Q4(e,t,n,i){i_(e,n,t)||$x(e,t,n,i)}function Y4(){zx=Q4,i_=K4}var Xw=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},Zw=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let i=t.contentQueries!==null?t.contentQueries[0]:n.length,s=[];for(let r=0;r<i;r++){let o=n.getByIndex(r),a=this.queries[o.indexInDeclarationView];s.push(a.clone())}return new e(s)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)s_(t,n).matches!==null&&this.queries[n].setDirty()}},eS=class{constructor(t,n,i=null){this.flags=n,this.read=i,typeof t=="string"?this.predicate=sq(t):this.predicate=t}},tS=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let i=0;i<this.length;i++){let s=n!==null?n.length:0,r=this.getByIndex(i).embeddedTView(t,s);r&&(r.indexInDeclarationView=i,n!==null?n.push(r):n=[r])}return n!==null?new e(n):null}template(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},nS=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let s=0;s<i.length;s++){let r=i[s];this.matchTNodeWithReadOption(t,n,J4(n,r)),this.matchTNodeWithReadOption(t,n,rg(n,t,r,!1,!1))}else i===Hs?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,rg(n,t,i,!1,!1))}matchTNodeWithReadOption(t,n,i){if(i!==null){let s=this.metadata.read;if(s!==null)if(s===Kt||s===ki||s===Hs&&n.type&4)this.addMatch(n.index,-2);else{let r=rg(n,t,s,!1,!1);r!==null&&this.addMatch(n.index,r)}else this.addMatch(n.index,i)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function J4(e,t){let n=e.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1]}return null}function X4(e,t){return e.type&11?Sc(e,t):e.type&4?Qg(e,t):null}function Z4(e,t,n,i){return n===-1?X4(t,e):n===-2?eq(e,t,i):wa(e,e[Se],n,t)}function eq(e,t,n){if(n===Kt)return Sc(t,e);if(n===Hs)return Qg(t,e);if(n===ki)return jx(t,e)}function qx(e,t,n,i){let s=t[gr].queries[i];if(s.matches===null){let r=e.data,o=n.matches,a=[];for(let l=0;o!==null&&l<o.length;l+=2){let c=o[l];if(c<0)a.push(null);else{let u=r[c];a.push(Z4(t,u,o[l+1],n.metadata.read))}}s.matches=a}return s.matches}function iS(e,t,n,i){let s=e.queries.getByIndex(n),r=s.matches;if(r!==null){let o=qx(e,t,s,n);for(let a=0;a<r.length;a+=2){let l=r[a];if(l>0)i.push(o[a/2]);else{let c=r[a+1],u=t[-l];for(let h=Wn;h<u.length;h++){let f=u[h];f[qd]===f[on]&&iS(f[Se],f,c,i)}if(u[gc]!==null){let h=u[gc];for(let f=0;f<h.length;f++){let g=h[f];iS(g[Se],g,c,i)}}}}}return i}function tq(e,t){return e[gr].queries[t].queryList}function nq(e,t,n){let i=new Nw((n&4)===4);return P3(e,t,i,i.destroy),(t[gr]??=new Zw).queries.push(new Xw(i))-1}function iq(e,t,n){let i=qt();return i.firstCreatePass&&(rq(i,new eS(e,t,n),-1),(t&2)===2&&(i.staticViewQueries=!0)),nq(i,He(),t)}function sq(e){return e.split(",").map(t=>t.trim())}function rq(e,t,n){e.queries===null&&(e.queries=new tS),e.queries.track(new nS(t,n))}function s_(e,t){return e.queries.getByIndex(t)}function oq(e,t){let n=e[Se],i=s_(n,t);return i.crossesNgTemplate?iS(n,e,t,[]):qx(n,e,i,t)}function Kx(e,t){Ra("NgSignals");let n=MM(e),i=n[ql];return t?.equal&&(i.equal=t.equal),n.set=s=>Ny(i,s),n.update=s=>PM(i,s),n.asReadonly=aq.bind(n),n}function aq(){let e=this[ql];if(e.readonlyFn===void 0){let t=()=>this();t[ql]=e,e.readonlyFn=t}return e.readonlyFn}function lq(e){return Object.getPrototypeOf(e.prototype).constructor}function us(e){let t=lq(e.type),n=!0,i=[e];for(;t;){let s;if(Co(e))s=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new he(903,!1);s=t.\u0275dir}if(s){if(n){i.push(s);let o=e;o.inputs=Zp(e.inputs),o.inputTransforms=Zp(e.inputTransforms),o.declaredInputs=Zp(e.declaredInputs),o.outputs=Zp(e.outputs);let a=s.hostBindings;a&&fq(e,a);let l=s.viewQuery,c=s.contentQueries;if(l&&dq(e,l),c&&hq(e,c),cq(e,s),Hj(e.outputs,s.outputs),Co(s)&&s.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(s.data.animation)}}let r=s.features;if(r)for(let o=0;o<r.length;o++){let a=r[o];a&&a.ngInherit&&a(e),a===us&&(n=!1)}}t=Object.getPrototypeOf(t)}uq(i)}function cq(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let i=t.inputs[n];if(i!==void 0&&(e.inputs[n]=i,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let s=Array.isArray(i)?i[0]:i;if(!t.inputTransforms.hasOwnProperty(s))continue;e.inputTransforms??={},e.inputTransforms[s]=t.inputTransforms[s]}}}function uq(e){let t=0,n=null;for(let i=e.length-1;i>=0;i--){let s=e[i];s.hostVars=t+=s.hostVars,s.hostAttrs=Nd(s.hostAttrs,n=Nd(n,s.hostAttrs))}}function Zp(e){return e===hc?{}:e===Hn?[]:e}function dq(e,t){let n=e.viewQuery;n?e.viewQuery=(i,s)=>{t(i,s),n(i,s)}:e.viewQuery=t}function hq(e,t){let n=e.contentQueries;n?e.contentQueries=(i,s,r)=>{t(i,s,r),n(i,s,r)}:e.contentQueries=t}function fq(e,t){let n=e.hostBindings;n?e.hostBindings=(i,s)=>{t(i,s),n(i,s)}:e.hostBindings=t}var wo=class{},Wd=class{};var sS=class extends wo{constructor(t,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Dg(this);let s=nF(t);this._bootstrapComponents=ox(s.bootstrap),this._r3Injector=WF(t,n,[{provide:wo,useValue:this},{provide:bc,useValue:this.componentFactoryResolver},...i],Un(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},rS=class extends Wd{constructor(t){super(),this.moduleType=t}create(t){return new sS(this.moduleType,t,[])}};var Rg=class extends wo{constructor(t){super(),this.componentFactoryResolver=new Dg(this),this.instance=null;let n=new kd([...t.providers,{provide:wo,useValue:this},{provide:bc,useValue:this.componentFactoryResolver}],t.parent||Og(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function r_(e,t,n=null){return new Rg({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var Yd=(()=>{let t=class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new vt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Qx(e){return gq(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function pq(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),i;for(;!(i=n.next()).done;)t(i.value)}}function gq(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function mq(e,t,n){return e[t]=n}function bo(e,t,n){let i=e[t];return Object.is(i,n)?!1:(e[t]=n,!0)}function Jd(e){return(e.flags&32)===32}function vq(e,t,n,i,s,r,o,a,l){let c=t.consts,u=_c(t,e,4,o||null,mc(c,a));XS(t,n,u,mc(c,l)),Vg(t,u);let h=u.tView=JS(2,u,i,s,r,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return t.queries!==null&&(t.queries.template(t,u),h.queries=t.queries.embeddedTView(u)),u}function tt(e,t,n,i,s,r,o,a){let l=He(),c=qt(),u=e+kt,h=c.firstCreatePass?vq(u,c,l,t,n,i,s,r,o):c.data[u];ba(h,!1);let f=Yx(c,l,h,e);Lg()&&zg(c,l,f,h),yo(f,l);let g=Rx(f,l,f,h);return l[u]=g,Kg(l,g),q4(g,h,l),kg(h)&&QS(c,l,h),o!=null&&YS(l,h,a),tt}var Yx=Jx;function Jx(e,t,n,i){return Ws(!0),t[ut].createComment("")}function Cq(e,t,n,i){let s=t[Oi],r=!s||wc()||Jd(n)||Ug(s,i);if(Ws(r),r)return Jx(e,t,n,i);let o=s.data[U$]?.[i]??null;o!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=o);let a=Yg(s,e,t,n);Hg(s,i,a);let l=GS(s,i);return Jg(l,a)}function yq(){Yx=Cq}function Ta(e,t,n,i){let s=He(),r=Qd();if(bo(s,r,t)){let o=qt(),a=xS();$3(a,s,e,t,n,i)}return Ta}function wq(e,t,n,i){return bo(e,Qd(),n)?t+vS(n)+i:br}function eg(e,t){return e<<17|t<<2}function _a(e){return e>>17&32767}function Sq(e){return(e&2)==2}function _q(e,t){return e&131071|t<<17}function oS(e){return e|2}function Cc(e){return(e&131068)>>2}function pw(e,t){return e&-131069|t<<2}function bq(e){return(e&1)===1}function aS(e){return e|1}function Eq(e,t,n,i,s,r){let o=r?t.classBindings:t.styleBindings,a=_a(o),l=Cc(o);e[i]=n;let c=!1,u;if(Array.isArray(n)){let h=n;u=h[1],(u===null||$d(h,u)>0)&&(c=!0)}else u=n;if(s)if(l!==0){let f=_a(e[a+1]);e[i+1]=eg(f,a),f!==0&&(e[f+1]=pw(e[f+1],i)),e[a+1]=_q(e[a+1],i)}else e[i+1]=eg(a,0),a!==0&&(e[a+1]=pw(e[a+1],i)),a=i;else e[i+1]=eg(l,0),a===0?a=i:e[l+1]=pw(e[l+1],i),l=i;c&&(e[i+1]=oS(e[i+1])),AP(e,u,i,!0),AP(e,u,i,!1),Dq(t,u,e,i,r),o=eg(a,l),r?t.classBindings=o:t.styleBindings=o}function Dq(e,t,n,i,s){let r=s?e.residualClasses:e.residualStyles;r!=null&&typeof t=="string"&&$d(r,t)>=0&&(n[i+1]=aS(n[i+1]))}function AP(e,t,n,i){let s=e[n+1],r=t===null,o=i?_a(s):Cc(s),a=!1;for(;o!==0&&(a===!1||r);){let l=e[o],c=e[o+1];Rq(l,t)&&(a=!0,e[o+1]=i?aS(c):oS(c)),o=i?_a(c):Cc(c)}a&&(e[n+1]=i?oS(s):aS(s))}function Rq(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?$d(e,t)>=0:!1}var as={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Tq(e){return e.substring(as.key,as.keyEnd)}function Iq(e){return Aq(e),Xx(e,Zx(e,0,as.textEnd))}function Xx(e,t){let n=as.textEnd;return n===t?-1:(t=as.keyEnd=Mq(e,as.key=t,n),Zx(e,t,n))}function Aq(e){as.key=0,as.keyEnd=0,as.value=0,as.valueEnd=0,as.textEnd=e.length}function Zx(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function Mq(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}function me(e,t,n){let i=He(),s=Qd();if(bo(i,s,t)){let r=qt(),o=xS();bx(r,o,i,e,t,i[ut],n,!1)}return me}function lS(e,t,n,i,s){let r=t.inputs,o=s?"class":"style";ZS(e,n,r[o],o,i)}function Ia(e,t,n){return e1(e,t,n,!1),Ia}function Eo(e,t){return e1(e,t,null,!0),Eo}function wn(e){Fq(Vq,Pq,e,!0)}function Pq(e,t){for(let n=Iq(t);n>=0;n=Xx(t,n))wS(e,Tq(t),!0)}function e1(e,t,n,i){let s=He(),r=qt(),o=EF(2);if(r.firstUpdatePass&&n1(r,e,o,i),t!==br&&bo(s,o,t)){let a=r.data[Ea()];i1(r,a,s,s[ut],e,s[o+1]=Gq(t,n),i,o)}}function Fq(e,t,n,i){let s=qt(),r=EF(2);s.firstUpdatePass&&n1(s,null,r,i);let o=He();if(n!==br&&bo(o,r,n)){let a=s.data[Ea()];if(s1(a,i)&&!t1(s,r)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(n=yw(l,n||"")),lS(s,a,o,n,i)}else Bq(s,a,o,o[ut],o[r+1],o[r+1]=Lq(e,t,n),i,r)}}function t1(e,t){return t>=e.expandoStartIndex}function n1(e,t,n,i){let s=e.data;if(s[n+1]===null){let r=s[Ea()],o=t1(e,n);s1(r,i)&&t===null&&!o&&(t=!1),t=xq(s,r,t,i),Eq(s,r,t,n,o,i)}}function xq(e,t,n,i){let s=u$(e),r=i?t.residualClasses:t.residualStyles;if(s===null)(i?t.classBindings:t.styleBindings)===0&&(n=gw(null,e,t,n,i),n=jd(n,t.attrs,i),r=null);else{let o=t.directiveStylingLast;if(o===-1||e[o]!==s)if(n=gw(s,e,t,n,i),r===null){let l=Oq(e,t,i);l!==void 0&&Array.isArray(l)&&(l=gw(null,e,t,l[1],i),l=jd(l,t.attrs,i),Nq(e,t,i,l))}else r=kq(e,t,i)}return r!==void 0&&(i?t.residualClasses=r:t.residualStyles=r),n}function Oq(e,t,n){let i=n?t.classBindings:t.styleBindings;if(Cc(i)!==0)return e[_a(i)]}function Nq(e,t,n,i){let s=n?t.classBindings:t.styleBindings;e[_a(s)]=i}function kq(e,t,n){let i,s=t.directiveEnd;for(let r=1+t.directiveStylingLast;r<s;r++){let o=e[r].hostAttrs;i=jd(i,o,n)}return jd(i,t.attrs,n)}function gw(e,t,n,i,s){let r=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(r=t[a],i=jd(i,r.hostAttrs,s),r!==e);)a++;return e!==null&&(n.directiveStylingLast=a),i}function jd(e,t,n){let i=n?1:2,s=-1;if(t!==null)for(let r=0;r<t.length;r++){let o=t[r];typeof o=="number"?s=o:s===i&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),wS(e,o,n?!0:t[++r]))}return e===void 0?null:e}function Lq(e,t,n){if(n==null||n==="")return Hn;let i=[],s=Wg(n);if(Array.isArray(s))for(let r=0;r<s.length;r++)e(i,s[r],!0);else if(typeof s=="object")for(let r in s)s.hasOwnProperty(r)&&e(i,r,s[r]);else typeof s=="string"&&t(i,s);return i}function Vq(e,t,n){let i=String(t);i!==""&&!i.includes(" ")&&wS(e,i,n)}function Bq(e,t,n,i,s,r,o,a){s===br&&(s=Hn);let l=0,c=0,u=0<s.length?s[0]:null,h=0<r.length?r[0]:null;for(;u!==null||h!==null;){let f=l<s.length?s[l+1]:void 0,g=c<r.length?r[c+1]:void 0,v=null,y;u===h?(l+=2,c+=2,f!==g&&(v=h,y=g)):h===null||u!==null&&u<h?(l+=2,v=u):(c+=2,v=h,y=g),v!==null&&i1(e,t,n,i,v,y,o,a),u=l<s.length?s[l]:null,h=c<r.length?r[c]:null}}function i1(e,t,n,i,s,r,o,a){if(!(t.type&3))return;let l=e.data,c=l[a+1],u=bq(c)?MP(l,t,n,s,Cc(c),o):void 0;if(!Tg(u)){Tg(r)||Sq(c)&&(r=MP(l,null,n,s,a,o));let h=vF(Ea(),n);_3(i,o,h,s,r)}}function MP(e,t,n,i,s,r){let o=t===null,a;for(;s>0;){let l=e[s],c=Array.isArray(l),u=c?l[1]:l,h=u===null,f=n[s+1];f===br&&(f=h?Hn:void 0);let g=h?nw(f,i):u===i?f:void 0;if(c&&!Tg(g)&&(g=nw(l,i)),Tg(g)&&(a=g,o))return a;let v=e[s+1];s=o?_a(v):Cc(v)}if(t!==null){let l=r?t.residualClasses:t.residualStyles;l!=null&&(a=nw(l,i))}return a}function Tg(e){return e!==void 0}function Gq(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Un(Wg(e)))),e}function s1(e,t){return(e.flags&(t?8:16))!==0}function Xg(e,t,n){Ra("NgControlFlow");let i=He(),s=Qd(),r=Hq(i,kt+e),o=0;if(bo(i,s,t)){let a=qe(null);try{if(t4(r,o),t!==-1){let l=Uq(i[Se],kt+t),c=zw(r,l.tView.ssrId),u=Px(i,l,n,{dehydratedView:c});Fx(r,u,o,Ww(l,c))}}finally{qe(a)}}else{let a=e4(r,o);a!==void 0&&(a[Ni]=n)}}function Hq(e,t){return e[t]}function Uq(e,t){return DS(e,t)}function Wq(e,t,n,i,s,r){let o=t.consts,a=mc(o,s),l=_c(t,e,2,i,a);return XS(t,n,l,mc(o,r)),l.attrs!==null&&Eg(l,l.attrs,!1),l.mergedAttrs!==null&&Eg(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function $(e,t,n,i){let s=He(),r=qt(),o=kt+e,a=s[ut],l=r.firstCreatePass?Wq(o,r,s,t,n,i):r.data[o],c=r1(r,s,l,a,t,e);s[o]=c;let u=kg(l);return ba(l,!0),mx(a,c,l),!Jd(l)&&Lg()&&zg(r,s,c,l),Xz()===0&&yo(c,s),Zz(),u&&(QS(r,s,l),KS(r,l,s)),i!==null&&YS(s,l),$}function q(){let e=Si();IS()?AS():(e=e.parent,ba(e,!1));let t=e;t$(t)&&i$(),e$();let n=qt();return n.firstCreatePass&&(Vg(n,e),ES(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&m$(t)&&lS(n,t,He(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&v$(t)&&lS(n,t,He(),t.stylesWithoutHost,!1),q}function ae(e,t,n,i){return $(e,t,n,i),q(),ae}var r1=(e,t,n,i,s,r)=>(Ws(!0),jg(i,s,PF()));function jq(e,t,n,i,s,r){let o=t[Oi],a=!o||wc()||Jd(n)||Ug(o,r);if(Ws(a),a)return jg(i,s,PF());let l=Yg(o,e,t,n);return ix(o,r)&&Hg(o,r,l.nextSibling),o&&(zF(n)||$F(l))&&Kd(n)&&(n$(n),fx(l)),l}function zq(){r1=jq}function $q(e,t,n,i,s){let r=t.consts,o=mc(r,i),a=_c(t,e,8,"ng-container",o);o!==null&&Eg(a,o,!0);let l=mc(r,s);return XS(t,n,a,l),t.queries!==null&&t.queries.elementStart(t,a),a}function ds(e,t,n){let i=He(),s=qt(),r=e+kt,o=s.firstCreatePass?$q(r,s,i,t,n):s.data[r];ba(o,!0);let a=o1(s,i,o,e);return i[r]=a,Lg()&&zg(s,i,a,o),yo(a,i),kg(o)&&(QS(s,i,o),KS(s,o,i)),n!=null&&YS(i,o),ds}function hs(){let e=Si(),t=qt();return IS()?AS():(e=e.parent,ba(e,!1)),t.firstCreatePass&&(Vg(t,e),ES(e)&&t.queries.elementEnd(e)),hs}var o1=(e,t,n,i)=>(Ws(!0),WS(t[ut],""));function qq(e,t,n,i){let s,r=t[Oi],o=!r||wc()||Jd(n);if(Ws(o),o)return WS(t[ut],"");let a=Yg(r,e,t,n),l=Z$(r,i);return Hg(r,i,a),s=Jg(l,a),s}function Kq(){o1=qq}function cn(){return He()}function o_(e,t,n){let i=He(),s=Qd();if(bo(i,s,t)){let r=qt(),o=xS();bx(r,o,i,e,t,i[ut],n,!0)}return o_}var Ig="en-US";var Qq=Ig;function Yq(e){typeof e=="string"&&(Qq=e.toLowerCase().replace(/_/g,"-"))}function a1(e,t,n){let i=e[ut];switch(n){case Node.COMMENT_NODE:return WS(i,t);case Node.TEXT_NODE:return US(i,t);case Node.ELEMENT_NODE:return jg(i,t,null)}}var Jq=(e,t,n,i)=>(Ws(!0),a1(e,n,i));function Xq(e,t,n,i){return Ws(!0),a1(e,n,i)}function Zq(){Jq=Xq}function We(e,t,n,i){let s=He(),r=qt(),o=Si();return t5(r,s,s[ut],o,e,t,i),We}function e5(e,t,n,i){let s=e.cleanup;if(s!=null)for(let r=0;r<s.length-1;r+=2){let o=s[r];if(o===n&&s[r+1]===i){let a=t[Ld],l=s[r+2];return a.length>l?a[l]:null}typeof o=="string"&&(r+=2)}return null}function t5(e,t,n,i,s,r,o){let a=kg(i),c=e.firstCreatePass&&Ax(e),u=t[Ni],h=Ix(t),f=!0;if(i.type&3||o){let y=wi(i,t),C=o?o(y):y,E=h.length,I=o?x=>o(cs(x[i.index])):i.index,T=null;if(!o&&a&&(T=e5(e,t,s,i.index)),T!==null){let x=T.__ngLastListenerFn__||T;x.__ngNextListenerFn__=r,T.__ngLastListenerFn__=r,f=!1}else{r=FP(i,t,u,r,!1);let x=n.listen(C,s,r);h.push(r,x),c&&c.push(s,I,E,E+1)}}else r=FP(i,t,u,r,!1);let g=i.outputs,v;if(f&&g!==null&&(v=g[s])){let y=v.length;if(y)for(let C=0;C<y;C+=2){let E=v[C],I=v[C+1],z=t[E][I].subscribe(r),V=h.length;h.push(r,z),c&&c.push(s,i.index,V,-(V+1))}}}function PP(e,t,n,i){let s=qe(null);try{return Ls(6,t,n),n(i)!==!1}catch(r){return Mx(e,r),!1}finally{Ls(7,t,n),qe(s)}}function FP(e,t,n,i,s){return function r(o){if(o===Function)return i;let a=e.componentOffset>-1?_o(e.index,t):t;t_(a);let l=PP(t,n,i,o),c=r.__ngNextListenerFn__;for(;c;)l=PP(t,n,c,o)&&l,c=c.__ngNextListenerFn__;return s&&l===!1&&o.preventDefault(),l}}function it(e=1){return h$(e)}function n5(e,t){let n=null,i=Cz(e);for(let s=0;s<t.length;s++){let r=t[s];if(r==="*"){n=s;continue}if(i===null?JP(e,r,!0):Sz(i,r))return s}return n}function a_(e){let t=He()[mi][yi];if(!t.projection){let n=e?e.length:1,i=t.projection=lz(n,null),s=i.slice(),r=t.child;for(;r!==null;){let o=e?n5(r,e):0;o!==null&&(s[o]?s[o].projectionNext=r:i[o]=r,s[o]=r),r=r.next}}}function l_(e,t=0,n){let i=He(),s=qt(),r=_c(s,kt+e,16,null,n||null);r.projection===null&&(r.projection=t),AS(),(!i[Oi]||wc())&&(r.flags&32)!==32&&w3(s,i,r)}function Zg(e,t,n){iq(e,t,n)}function Xd(e){let t=He(),n=qt(),i=DF();MS(i+1);let s=s_(n,i);if(e.dirty&&qz(t)===((s.metadata.flags&2)===2)){if(s.matches===null)e.reset([]);else{let r=oq(t,i);e.reset(r,A$),e.notifyOnChanges()}return!0}return!1}function Zd(){return tq(He(),DF())}function i5(e,t,n,i){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=i}function eh(e){let t=r$();return CF(t,kt+e)}function _e(e,t=""){let n=He(),i=qt(),s=e+kt,r=i.firstCreatePass?_c(i,s,1,t,null):i.data[s],o=l1(i,n,r,t,e);n[s]=o,Lg()&&zg(i,n,o,r),ba(r,!1)}var l1=(e,t,n,i,s)=>(Ws(!0),US(t[ut],i));function s5(e,t,n,i,s){let r=t[Oi],o=!r||wc()||Jd(n)||Ug(r,s);return Ws(o),o?US(t[ut],i):Yg(r,e,t,n)}function r5(){l1=s5}function Aa(e){return Sn("",e,""),Aa}function Sn(e,t,n){let i=He(),s=wq(i,e,t,n);return s!==br&&Y3(i,Ea(),s),Sn}function o5(e,t,n){let i=qt();if(i.firstCreatePass){let s=Co(e);cS(n,i.data,i.blueprint,s,!0),cS(t,i.data,i.blueprint,s,!1)}}function cS(e,t,n,i,s){if(e=Gn(e),Array.isArray(e))for(let r=0;r<e.length;r++)cS(e[r],t,n,i,s);else{let r=qt(),o=He(),a=Si(),l=fc(e)?e:Gn(e.provide),c=lF(e),u=a.providerIndexes&1048575,h=a.directiveStart,f=a.providerIndexes>>20;if(fc(e)||!e.multi){let g=new ya(c,s,J),v=vw(l,t,s?u:u+f,h);v===-1?(Pw(mg(a,o),r,l),mw(r,e,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),n.push(g),o.push(g)):(n[v]=g,o[v]=g)}else{let g=vw(l,t,u+f,h),v=vw(l,t,u,u+f),y=g>=0&&n[g],C=v>=0&&n[v];if(s&&!C||!s&&!y){Pw(mg(a,o),r,l);let E=c5(s?l5:a5,n.length,s,i,c);!s&&C&&(n[v].providerFactory=E),mw(r,e,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),n.push(E),o.push(E)}else{let E=c1(n[s?v:g],c,!s&&i);mw(r,e,g>-1?g:v,E)}!s&&i&&C&&n[v].componentProviders++}}}function mw(e,t,n,i){let s=fc(t),r=Fz(t);if(s||r){let l=(r?Gn(t.useClass):t).prototype.ngOnDestroy;if(l){let c=e.destroyHooks||(e.destroyHooks=[]);if(!s&&t.multi){let u=c.indexOf(n);u===-1?c.push(n,[i,l]):c[u+1].push(i,l)}else c.push(n,l)}}}function c1(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function vw(e,t,n,i){for(let s=n;s<i;s++)if(t[s]===e)return s;return-1}function a5(e,t,n,i){return uS(this.multi,[])}function l5(e,t,n,i){let s=this.multi,r;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=wa(n,n[Se],this.providerFactory.index,i);r=a.slice(0,o),uS(s,r);for(let l=o;l<a.length;l++)r.push(a[l])}else r=[],uS(s,r);return r}function uS(e,t){for(let n=0;n<e.length;n++){let i=e[n];t.push(i())}return t}function c5(e,t,n,i,s){let r=new ya(e,n,J);return r.multi=[],r.index=t,r.componentProviders=0,c1(r,s,i&&!n),r}function fs(e,t=[]){return n=>{n.providersResolver=(i,s)=>o5(i,s?s(e):e,t)}}var u5=(()=>{let t=class t{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let s=rF(!1,i.type),r=s.length>0?r_([s],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,r)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};t.\u0275prov=te({token:t,providedIn:"environment",factory:()=>new t(Y(jn))});let e=t;return e})();function De(e){Ra("NgStandalone"),e.getStandaloneInjector=t=>t.get(u5).getOrCreateStandaloneInjector(e)}function th(e,t,n,i){return u1(He(),bF(),e,t,n,i)}function d5(e,t){let n=e[t];return n===br?void 0:n}function u1(e,t,n,i,s,r){let o=t+n;return bo(e,o,s)?mq(e,o+1,r?i.call(r,s):i(s)):d5(e,o+1)}function c_(e,t){let n=qt(),i,s=e+kt;n.firstCreatePass?(i=h5(t,n.pipeRegistry),n.data[s]=i,i.onDestroy&&(n.destroyHooks??=[]).push(s,i.onDestroy)):i=n.data[s];let r=i.factory||(i.factory=ga(i.type,!0)),o,a=si(J);try{let l=gg(!1),c=r();return gg(l),i5(n,He(),s,c),c}finally{si(a)}}function h5(e,t){if(t)for(let n=t.length-1;n>=0;n--){let i=t[n];if(e===i.name)return i}}function u_(e,t,n){let i=e+kt,s=He(),r=CF(s,i);return f5(s,i)?u1(s,bF(),t,r.transform,n,r):r.transform(n)}function f5(e,t){return e[Se].data[t].pure}function Ma(e,t){return Qg(e,t)}var yr=class{constructor(t){this.full=t;let n=t.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},d_=new yr("17.3.11"),em=(()=>{let t=class t{log(i){console.log(i)}warn(i){console.warn(i)}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"platform"});let e=t;return e})();var d1=new X("");function Pa(e){return!!e&&typeof e.then=="function"}function h1(e){return!!e&&typeof e.subscribe=="function"}var Do=new X(""),f1=(()=>{let t=class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,s)=>{this.resolve=i,this.reject=s}),this.appInits=U(Do,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let r of this.appInits){let o=r();if(Pa(o))i.push(o);else if(h1(o)){let a=new Promise((l,c)=>{o.subscribe({complete:l,error:c})});i.push(a)}}let s=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{s()}).catch(r=>{this.reject(r)}),i.length===0&&s(),this.initialized=!0}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Ec=new X("");function p5(){AM(()=>{throw new he(600,!1)})}function g5(e){return e.isBoundToModule}function m5(e,t,n){try{let i=n();return Pa(i)?i.catch(s=>{throw t.runOutsideAngular(()=>e.handleError(s)),s}):i}catch(i){throw t.runOutsideAngular(()=>e.handleError(i)),i}}var ps=(()=>{let t=class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=U(jF),this.afterRenderEffectManager=U(Ux),this.externalTestViews=new Set,this.beforeRender=new Le,this.afterTick=new Le,this.componentTypes=[],this.components=[],this.isStable=U(Yd).hasPendingTasks.pipe(oe(i=>!i)),this._injector=U(jn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,s){let r=i instanceof bg;if(!this._injector.get(f1).done){let g=!r&&tF(i),v=!1;throw new he(405,v)}let a;r?a=i:a=this._injector.get(bc).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let l=g5(a)?void 0:this._injector.get(wo),c=s||a.selector,u=a.create(Ue.NULL,[],c,l),h=u.location.nativeElement,f=u.injector.get(d1,null);return f?.registerApplication(h),u.onDestroy(()=>{this.detachView(u.hostView),Cw(this.components,u),f?.unregisterApplication(h)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new he(101,!1);let s=qe(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(r){this.internalErrorHandler(r)}finally{this.afterTick.next(),this._runningTick=!1,qe(s)}}detectChangesInAttachedViews(i){let s=0,r=this.afterRenderEffectManager;for(;;){if(s===Ox)throw new he(103,!1);if(i){let o=s===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:l}of this._views)v5(a,o,l)}if(s++,r.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>dS(o))&&(r.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>dS(o))))break}}attachView(i){let s=i;this._views.push(s),s.attachToAppRef(this)}detachView(i){let s=i;Cw(this._views,s),s.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let s=this._injector.get(Ec,[]);[...this._bootstrapListeners,...s].forEach(r=>r(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>Cw(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new he(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Cw(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}var tg;function h_(e){tg??=new WeakMap;let t=tg.get(e);if(t)return t;let n=e.isStable.pipe(pi(i=>i)).toPromise().then(()=>{});return tg.set(e,n),e.onDestroy(()=>tg?.delete(e)),n}function v5(e,t,n){!t&&!dS(e)||C5(e,n,t)}function dS(e){return TS(e)}function C5(e,t,n){let i;n?(i=0,e[ye]|=1024):e[ye]&64?i=0:i=1,Nx(e,t,i)}var hS=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},f_=(()=>{let t=class t{compileModuleSync(i){return new rS(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let s=this.compileModuleSync(i),r=nF(i),o=ox(r.declarations).reduce((a,l)=>{let c=vo(l);return c&&a.push(new vc(c)),a},[]);return new hS(s,o)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var y5=(()=>{let t=class t{constructor(){this.zone=U(ue),this.applicationRef=U(ps)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function w5(e){return[{provide:ue,useFactory:e},{provide:ma,multi:!0,useFactory:()=>{let t=U(y5,{optional:!0});return()=>t.initialize()}},{provide:ma,multi:!0,useFactory:()=>{let t=U(E5);return()=>{t.initialize()}}},{provide:jF,useFactory:S5}]}function S5(){let e=U(ue),t=U(vr);return n=>e.runOutsideAngular(()=>t.handleError(n))}function _5(e){let t=w5(()=>new ue(b5(e)));return pt([[],t])}function b5(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var E5=(()=>{let t=class t{constructor(){this.subscription=new yt,this.initialized=!1,this.zone=U(ue),this.pendingTasks=U(Yd)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ue.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ue.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function D5(){return typeof $localize<"u"&&$localize.locale||Ig}var tm=new X("",{providedIn:"root",factory:()=>U(tm,Fe.Optional|Fe.SkipSelf)||D5()});var p1=new X("");var ag=null;function R5(e=[],t){return Ue.create({name:t,providers:[{provide:xg,useValue:"platform"},{provide:p1,useValue:new Set([()=>ag=null])},...e]})}function T5(e=[]){if(ag)return ag;let t=R5(e);return ag=t,p5(),I5(t),t}function I5(e){e.get(kS,null)?.forEach(n=>n())}function p_(){return!1}var Dr=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=A5;let e=t;return e})();function A5(e){return M5(Si(),He(),(e&16)===16)}function M5(e,t,n){if(Kd(e)&&!n){let i=_o(e.index,t);return new Sa(i,i)}else if(e.type&47){let i=t[mi];return new Sa(i,t)}return null}var fS=class{constructor(){}supports(t){return Qx(t)}create(t){return new pS(t)}},P5=(e,t)=>t,pS=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||P5}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,i=this._removalsHead,s=0,r=null;for(;n||i;){let o=!i||n&&n.currentIndex<xP(i,s,r)?n:i,a=xP(o,s,r),l=o.currentIndex;if(o===i)s--,i=i._nextRemoved;else if(n=n._next,o.previousIndex==null)s++;else{r||(r=[]);let c=a-s,u=l-s;if(c!=u){for(let f=0;f<c;f++){let g=f<r.length?r[f]:r[f]=0,v=g+f;u<=v&&v<c&&(r[f]=g+1)}let h=o.previousIndex;r[h]=u-c}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!Qx(t))throw new he(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,i=!1,s,r,o;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)r=t[a],o=this._trackByFn(a,r),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,r,o,a),i=!0):(i&&(n=this._verifyReinsertion(n,r,o,a)),Object.is(n.item,r)||this._addIdentityChange(n,r)),n=n._next}else s=0,pq(t,a=>{o=this._trackByFn(s,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,s),i=!0):(i&&(n=this._verifyReinsertion(n,a,o,s)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,s++}),this.length=s;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,i,s){let r;return t===null?r=this._itTail:(r=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,r,s)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,s),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,r,s)):t=this._addAfter(new gS(n,i),r,s)),t}_verifyReinsertion(t,n,i,s){let r=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return r!==null?t=this._reinsertAfter(r,t._prev,s):t.currentIndex!=s&&(t.currentIndex=s,this._addToMoves(t,s)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let s=t._prevRemoved,r=t._nextRemoved;return s===null?this._removalsHead=r:s._nextRemoved=r,r===null?this._removalsTail=s:r._prevRemoved=s,this._insertAfter(t,n,i),this._addToMoves(t,i),t}_moveAfter(t,n,i){return this._unlink(t),this._insertAfter(t,n,i),this._addToMoves(t,i),t}_addAfter(t,n,i){return this._insertAfter(t,n,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,i){let s=n===null?this._itHead:n._next;return t._next=s,t._prev=n,s===null?this._itTail=t:s._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new Ag),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,i=t._next;return n===null?this._itHead=i:n._next=i,i===null?this._itTail=n:i._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ag),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},gS=class{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},mS=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let i;for(i=this._head;i!==null;i=i._nextDup)if((n===null||n<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let n=t._prevDup,i=t._nextDup;return n===null?this._head=i:n._nextDup=i,i===null?this._tail=n:i._prevDup=n,this._head===null}},Ag=class{constructor(){this.map=new Map}put(t){let n=t.trackById,i=this.map.get(n);i||(i=new mS,this.map.set(n,i)),i.add(t)}get(t,n){let i=t,s=this.map.get(i);return s?s.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function xP(e,t,n){let i=e.previousIndex;if(i===null)return i;let s=0;return n&&i<n.length&&(s=n[i]),i+t+s}function OP(){return new g_([new fS])}var g_=(()=>{let t=class t{constructor(i){this.factories=i}static create(i,s){if(s!=null){let r=s.factories.slice();i=i.concat(r)}return new t(i)}static extend(i){return{provide:t,useFactory:s=>t.create(i,s||OP()),deps:[[t,new zP,new Me]]}}find(i){let s=this.factories.find(r=>r.supports(i));if(s!=null)return s;throw new he(901,!1)}};t.\u0275prov=te({token:t,providedIn:"root",factory:OP});let e=t;return e})();function g1(e){try{let{rootComponent:t,appProviders:n,platformProviders:i}=e,s=T5(i),r=[_5(),...n||[]],a=new Rg({providers:r,parent:s,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(ue);return l.run(()=>{a.resolveInjectorInitializers();let c=a.get(vr,null),u;l.runOutsideAngular(()=>{u=l.onError.subscribe({next:g=>{c.handleError(g)}})});let h=()=>a.destroy(),f=s.get(p1);return f.add(h),a.onDestroy(()=>{u.unsubscribe(),f.delete(h)}),m5(c,l,()=>{let g=a.get(f1);return g.runInitializers(),g.donePromise.then(()=>{let v=a.get(tm,Ig);Yq(v||Ig);let y=a.get(ps);return t!==void 0&&y.bootstrap(t),y})})})}catch(t){return Promise.reject(t)}}var NP=!1,F5=!1;function x5(){NP||(NP=!0,Q$(),zq(),r5(),Kq(),yq(),Y4(),R4(),M3(),Zq())}function O5(e,t){return h_(e)}function m1(){return pt([{provide:Jp,useFactory:()=>{let e=!0;return Xp()&&(e=!!U(Da,{optional:!0})?.get(tx,null)),e&&Ra("NgHydration"),e}},{provide:ma,useValue:()=>{F5=!!U(e3,{optional:!0}),Xp()&&U(Jp)&&(N5(),x5())},multi:!0},{provide:rx,useFactory:()=>Xp()&&U(Jp)},{provide:Ec,useFactory:()=>{if(Xp()&&U(Jp)){let e=U(ps),t=U(Ue);return()=>{O5(e,t).then(()=>{v4(e)})}}return()=>{}},multi:!0}])}function N5(){let e=Bg(),t;for(let n of e.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===q$){t=n;break}if(!t)throw new he(-507,!1)}function nm(e,t){let n=vo(e),i=t.elementInjector||Og();return new vc(n).create(i,t.projectableNodes,t.hostElement,t.environmentInjector)}var E1=null;function Rr(){return E1}function D1(e){E1??=e}var im=class{};var Lt=new X(""),R1=(()=>{let t=class t{historyGo(i){throw new Error("")}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:()=>U(L5),providedIn:"platform"});let e=t;return e})();var L5=(()=>{let t=class t extends R1{constructor(){super(),this._doc=U(Lt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Rr().getBaseHref(this._doc)}onPopState(i){let s=Rr().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",i,!1),()=>s.removeEventListener("popstate",i)}onHashChange(i){let s=Rr().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",i,!1),()=>s.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,s,r){this._history.pushState(i,s,r)}replaceState(i,s,r){this._history.replaceState(i,s,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:()=>new t,providedIn:"platform"});let e=t;return e})();function T1(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function v1(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,i=n-(e[n-1]==="/"?1:0);return e.slice(0,i)+e.slice(n)}function Fa(e){return e&&e[0]!=="?"?"?"+e:e}var rm=(()=>{let t=class t{historyGo(i){throw new Error("")}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:()=>U(I1),providedIn:"root"});let e=t;return e})(),V5=new X(""),I1=(()=>{let t=class t extends rm{constructor(i,s){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=s??this._platformLocation.getBaseHrefFromDOM()??U(Lt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return T1(this._baseHref,i)}path(i=!1){let s=this._platformLocation.pathname+Fa(this._platformLocation.search),r=this._platformLocation.hash;return r&&i?`${s}${r}`:s}pushState(i,s,r,o){let a=this.prepareExternalUrl(r+Fa(o));this._platformLocation.pushState(i,s,a)}replaceState(i,s,r,o){let a=this.prepareExternalUrl(r+Fa(o));this._platformLocation.replaceState(i,s,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};t.\u0275fac=function(s){return new(s||t)(Y(R1),Y(V5,8))},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var nh=(()=>{let t=class t{constructor(i){this._subject=new H,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let s=this._locationStrategy.getBaseHref();this._basePath=H5(v1(C1(s))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,s=""){return this.path()==this.normalize(i+Fa(s))}normalize(i){return t.stripTrailingSlash(G5(this._basePath,C1(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,s="",r=null){this._locationStrategy.pushState(r,"",i,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Fa(s)),r)}replaceState(i,s="",r=null){this._locationStrategy.replaceState(r,"",i,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Fa(s)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)}),()=>{let s=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(s,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",s){this._urlChangeListeners.forEach(r=>r(i,s))}subscribe(i,s,r){return this._subject.subscribe({next:i,error:s,complete:r})}};t.normalizeQueryParams=Fa,t.joinWithSlash=T1,t.stripTrailingSlash=v1,t.\u0275fac=function(s){return new(s||t)(Y(rm))},t.\u0275prov=te({token:t,factory:()=>B5(),providedIn:"root"});let e=t;return e})();function B5(){return new nh(Y(rm))}function G5(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function C1(e){return e.replace(/\/index.html$/,"")}function H5(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function y_(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let i=n.indexOf("="),[s,r]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(s.trim()===t)return decodeURIComponent(r)}return null}var m_=/\s+/,y1=[],om=(()=>{let t=class t{constructor(i,s){this._ngEl=i,this._renderer=s,this.initialClasses=y1,this.stateMap=new Map}set klass(i){this.initialClasses=i!=null?i.trim().split(m_):y1}set ngClass(i){this.rawClass=typeof i=="string"?i.trim().split(m_):i}ngDoCheck(){for(let s of this.initialClasses)this._updateState(s,!0);let i=this.rawClass;if(Array.isArray(i)||i instanceof Set)for(let s of i)this._updateState(s,!0);else if(i!=null)for(let s of Object.keys(i))this._updateState(s,!!i[s]);this._applyStateDiff()}_updateState(i,s){let r=this.stateMap.get(i);r!==void 0?(r.enabled!==s&&(r.changed=!0,r.enabled=s),r.touched=!0):this.stateMap.set(i,{enabled:s,changed:!0,touched:!0})}_applyStateDiff(){for(let i of this.stateMap){let s=i[0],r=i[1];r.changed?(this._toggleClass(s,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(s,!1),this.stateMap.delete(s)),r.touched=!1}}_toggleClass(i,s){i=i.trim(),i.length>0&&i.split(m_).forEach(r=>{s?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}};t.\u0275fac=function(s){return new(s||t)(J(Kt),J(Er))},t.\u0275dir=Ft({type:t,selectors:[["","ngClass",""]],inputs:{klass:[rn.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let e=t;return e})();var v_=class{constructor(t,n,i,s){this.$implicit=t,this.ngForOf=n,this.index=i,this.count=s}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},js=(()=>{let t=class t{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,s,r){this._viewContainer=i,this._template=s,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let i=this._ngForOf;if(!this._differ&&i)if(0)try{}catch{}else this._differ=this._differs.find(i).create(this.ngForTrackBy)}if(this._differ){let i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){let s=this._viewContainer;i.forEachOperation((r,o,a)=>{if(r.previousIndex==null)s.createEmbeddedView(this._template,new v_(r.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)s.remove(o===null?void 0:o);else if(o!==null){let l=s.get(o);s.move(l,a),w1(l,r)}});for(let r=0,o=s.length;r<o;r++){let l=s.get(r).context;l.index=r,l.count=o,l.ngForOf=this._ngForOf}i.forEachIdentityChange(r=>{let o=s.get(r.currentIndex);w1(o,r)})}static ngTemplateContextGuard(i,s){return!0}};t.\u0275fac=function(s){return new(s||t)(J(ki),J(Hs),J(g_))},t.\u0275dir=Ft({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let e=t;return e})();function w1(e,t){e.context.$implicit=t.item}var Li=(()=>{let t=class t{constructor(i,s){this._viewContainer=i,this._context=new C_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=s}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){S1("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){S1("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,s){return!0}};t.\u0275fac=function(s){return new(s||t)(J(ki),J(Hs))},t.\u0275dir=Ft({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let e=t;return e})(),C_=class{constructor(){this.$implicit=null,this.ngIf=null}};function S1(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${Un(t)}'.`)}function U5(e,t){return new he(2100,!1)}var W5=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,A1=(()=>{let t=class t{transform(i){if(i==null)return null;if(typeof i!="string")throw U5(t,i);return i.replace(W5,s=>s[0].toUpperCase()+s.slice(1).toLowerCase())}};t.\u0275fac=function(s){return new(s||t)},t.\u0275pipe=XP({name:"titlecase",type:t,pure:!0,standalone:!0});let e=t;return e})();var xt=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=Ci({type:t}),t.\u0275inj=vi({});let e=t;return e})(),w_="browser",j5="server";function S_(e){return e===w_}function Tr(e){return e===j5}var sm=class{};var lm=class e{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let i=n.indexOf(":");if(i>0){let s=n.slice(0,i),r=s.toLowerCase(),o=n.slice(i+1).trim();this.maybeSetNormalizedName(s,r),this.headers.has(r)?this.headers.get(r).push(o):this.headers.set(r,[o])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,n);let s=(t.op==="a"?this.headers.get(n):void 0)||[];s.push(...i),this.headers.set(n,s);break;case"d":let r=t.value;if(!r)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>r.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(t,n){let i=(Array.isArray(n)?n:[n]).map(r=>r.toString()),s=t.toLowerCase();this.headers.set(s,i),this.maybeSetNormalizedName(t,s)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var L1=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(L1||{}),__=class{constructor(t,n=V1.Ok,i="OK"){this.headers=t.headers||new lm,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}};var cm=class e extends __{constructor(t={}){super(t),this.type=L1.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}};var V1=function(e){return e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Processing=102]="Processing",e[e.EarlyHints=103]="EarlyHints",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultiStatus=207]="MultiStatus",e[e.AlreadyReported=208]="AlreadyReported",e[e.ImUsed=226]="ImUsed",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.MisdirectedRequest=421]="MisdirectedRequest",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.TooEarly=425]="TooEarly",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",e}(V1||{});var $5=new X("");var M1="b",P1="h",F1="s",x1="st",O1="u",N1="rt",am=new X(""),q5=["GET","HEAD"];function K5(e,t){let h=U(am),{isCacheActive:n}=h,i=cp(h,["isCacheActive"]),{transferCache:s,method:r}=e;if(!n||r==="POST"&&!i.includePostRequests&&!s||r!=="POST"&&!q5.includes(r)||s===!1||i.filter?.(e)===!1)return t(e);let o=U(Da),a=Y5(e),l=o.get(a,null),c=i.includeHeaders;if(typeof s=="object"&&s.includeHeaders&&(c=s.includeHeaders),l){let{[M1]:f,[N1]:g,[P1]:v,[F1]:y,[x1]:C,[O1]:E}=l,I=f;switch(g){case"arraybuffer":I=new TextEncoder().encode(f).buffer;break;case"blob":I=new Blob([f]);break}let T=new lm(v);return ee(new cm({body:I,headers:T,status:y,statusText:C,url:E}))}let u=Tr(U(ln));return t(e).pipe(nt(f=>{f instanceof cm&&u&&o.set(a,{[M1]:f.body,[P1]:Q5(f.headers,c),[F1]:f.status,[x1]:f.statusText,[O1]:f.url||"",[N1]:e.responseType})}))}function Q5(e,t){if(!t)return{};let n={};for(let i of t){let s=e.getAll(i);s!==null&&(n[i]=s)}return n}function k1(e){return[...e.keys()].sort().map(t=>`${t}=${e.getAll(t)}`).join("&")}function Y5(e){let{params:t,method:n,responseType:i,url:s}=e,r=k1(t),o=e.serializeBody();o instanceof URLSearchParams?o=k1(o):typeof o!="string"&&(o="");let a=[n,i,s,o,r].join("|"),l=J5(a);return l}function J5(e){let t=0;for(let n of e)t=Math.imul(31,t)+n.charCodeAt(0)<<0;return t+=2147483648,t.toString()}function B1(e){return[{provide:am,useFactory:()=>(Ra("NgHttpTransferCache"),B({isCacheActive:!0},e))},{provide:$5,useValue:K5,multi:!0,deps:[Da,am]},{provide:Ec,multi:!0,useFactory:()=>{let t=U(ps),n=U(am);return()=>{h_(t).then(()=>{n.isCacheActive=!1})}}}]}var D_=class extends im{constructor(){super(...arguments),this.supportsDOMEvents=!0}},R_=class e extends D_{static makeCurrent(){D1(new e)}onAndCancel(t,n,i){return t.addEventListener(n,i),()=>{t.removeEventListener(n,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=X5();return n==null?null:Z5(n)}resetBaseElement(){ih=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return y_(document.cookie,t)}},ih=null;function X5(){return ih=ih||document.querySelector("base"),ih?ih.getAttribute("href"):null}function Z5(e){return new URL(e,document.baseURI).pathname}var e6=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac});let e=t;return e})(),T_=new X(""),W1=(()=>{let t=class t{constructor(i,s){this._zone=s,this._eventNameToPlugin=new Map,i.forEach(r=>{r.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,s,r){return this._findPluginFor(s).addEventListener(i,s,r)}getZone(){return this._zone}_findPluginFor(i){let s=this._eventNameToPlugin.get(i);if(s)return s;if(s=this._plugins.find(o=>o.supports(i)),!s)throw new he(5101,!1);return this._eventNameToPlugin.set(i,s),s}};t.\u0275fac=function(s){return new(s||t)(Y(T_),Y(ue))},t.\u0275prov=te({token:t,factory:t.\u0275fac});let e=t;return e})(),um=class{constructor(t){this._doc=t}},b_="ng-app-id",j1=(()=>{let t=class t{constructor(i,s,r,o={}){this.doc=i,this.appId=s,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Tr(o),this.resetHostNodes()}addStyles(i){for(let s of i)this.changeUsageCount(s,1)===1&&this.onStyleAdded(s)}removeStyles(i){for(let s of i)this.changeUsageCount(s,-1)<=0&&this.onStyleRemoved(s)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(s=>s.remove()),i.clear());for(let s of this.getAllStyles())this.onStyleRemoved(s);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let s of this.getAllStyles())this.addStyleToHost(i,s)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let s of this.hostNodes)this.addStyleToHost(s,i)}onStyleRemoved(i){let s=this.styleRef;s.get(i)?.elements?.forEach(r=>r.remove()),s.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${b_}="${this.appId}"]`);if(i?.length){let s=new Map;return i.forEach(r=>{r.textContent!=null&&s.set(r.textContent,r)}),s}return null}changeUsageCount(i,s){let r=this.styleRef;if(r.has(i)){let o=r.get(i);return o.usage+=s,o.usage}return r.set(i,{usage:s,elements:[]}),s}getStyleElement(i,s){let r=this.styleNodesInDOM,o=r?.get(s);if(o?.parentNode===i)return r.delete(s),o.removeAttribute(b_),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=s,this.platformIsServer&&a.setAttribute(b_,this.appId),i.appendChild(a),a}}addStyleToHost(i,s){let r=this.getStyleElement(i,s),o=this.styleRef,a=o.get(s)?.elements;a?a.push(r):o.set(s,{elements:[r],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};t.\u0275fac=function(s){return new(s||t)(Y(Lt),Y(Gg),Y(LS,8),Y(ln))},t.\u0275prov=te({token:t,factory:t.\u0275fac});let e=t;return e})(),E_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},M_=/%COMP%/g,z1="%COMP%",t6=`_nghost-${z1}`,n6=`_ngcontent-${z1}`,i6=!0,s6=new X("",{providedIn:"root",factory:()=>i6});function r6(e){return n6.replace(M_,e)}function o6(e){return t6.replace(M_,e)}function $1(e,t){return t.map(n=>n.replace(M_,e))}var G1=(()=>{let t=class t{constructor(i,s,r,o,a,l,c,u=null){this.eventManager=i,this.sharedStylesHost=s,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=Tr(l),this.defaultRenderer=new sh(i,a,c,this.platformIsServer)}createRenderer(i,s){if(!i||!s)return this.defaultRenderer;this.platformIsServer&&s.encapsulation===Bs.ShadowDom&&(s=se(B({},s),{encapsulation:Bs.Emulated}));let r=this.getOrCreateRenderer(i,s);return r instanceof dm?r.applyToHost(i):r instanceof rh&&r.applyStyles(),r}getOrCreateRenderer(i,s){let r=this.rendererByCompId,o=r.get(s.id);if(!o){let a=this.doc,l=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(s.encapsulation){case Bs.Emulated:o=new dm(c,u,s,this.appId,h,a,l,f);break;case Bs.ShadowDom:return new I_(c,u,i,s,a,l,this.nonce,f);default:o=new rh(c,u,s,h,a,l,f);break}r.set(s.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(s){return new(s||t)(Y(W1),Y(j1),Y(Gg),Y(s6),Y(Lt),Y(ln),Y(ue),Y(LS))},t.\u0275prov=te({token:t,factory:t.\u0275fac});let e=t;return e})(),sh=class{constructor(t,n,i,s){this.eventManager=t,this.doc=n,this.ngZone=i,this.platformIsServer=s,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(E_[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(H1(t)?t.content:t).appendChild(n)}insertBefore(t,n,i){t&&(H1(t)?t.content:t).insertBefore(n,i)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new he(-5104,!1);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,s){if(s){n=s+":"+n;let r=E_[s];r?t.setAttributeNS(r,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){let s=E_[i];s?t.removeAttributeNS(s,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,s){s&(Cr.DashCase|Cr.Important)?t.style.setProperty(n,i,s&Cr.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&Cr.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t!=null&&(t[n]=i)}setValue(t,n){t.nodeValue=n}listen(t,n,i){if(typeof t=="string"&&(t=Rr().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(i))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function H1(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var I_=class extends sh{constructor(t,n,i,s,r,o,a,l){super(t,r,o,l),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=$1(s.id,s.styles);for(let u of c){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},rh=class extends sh{constructor(t,n,i,s,r,o,a,l){super(t,r,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=s,this.styles=l?$1(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},dm=class extends rh{constructor(t,n,i,s,r,o,a,l){let c=s+"-"+i.id;super(t,n,i,r,o,a,l,c),this.contentAttr=r6(c),this.hostAttr=o6(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}},a6=(()=>{let t=class t extends um{constructor(i){super(i)}supports(i){return!0}addEventListener(i,s,r){return i.addEventListener(s,r,!1),()=>this.removeEventListener(i,s,r)}removeEventListener(i,s,r){return i.removeEventListener(s,r)}};t.\u0275fac=function(s){return new(s||t)(Y(Lt))},t.\u0275prov=te({token:t,factory:t.\u0275fac});let e=t;return e})(),U1=["alt","control","meta","shift"],l6={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},c6={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},u6=(()=>{let t=class t extends um{constructor(i){super(i)}supports(i){return t.parseEventName(i)!=null}addEventListener(i,s,r){let o=t.parseEventName(s),a=t.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Rr().onAndCancel(i,o.domEventName,a))}static parseEventName(i){let s=i.toLowerCase().split("."),r=s.shift();if(s.length===0||!(r==="keydown"||r==="keyup"))return null;let o=t._normalizeKey(s.pop()),a="",l=s.indexOf("code");if(l>-1&&(s.splice(l,1),a="code."),U1.forEach(u=>{let h=s.indexOf(u);h>-1&&(s.splice(h,1),a+=u+".")}),a+=o,s.length!=0||o.length===0)return null;let c={};return c.domEventName=r,c.fullKey=a,c}static matchEventFullKeyCode(i,s){let r=l6[i.key]||i.key,o="";return s.indexOf("code.")>-1&&(r=i.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),U1.forEach(a=>{if(a!==r){let l=c6[a];l(i)&&(o+=a+".")}}),o+=r,o===s)}static eventCallback(i,s,r){return o=>{t.matchEventFullKeyCode(o,i)&&r.runGuarded(()=>s(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};t.\u0275fac=function(s){return new(s||t)(Y(Lt))},t.\u0275prov=te({token:t,factory:t.\u0275fac});let e=t;return e})();function q1(e,t){return g1(B({rootComponent:e},d6(t)))}function d6(e){return{appProviders:[...m6,...e?.providers??[]],platformProviders:g6}}function h6(){R_.makeCurrent()}function f6(){return new vr}function p6(){return JF(document),document}var g6=[{provide:ln,useValue:w_},{provide:kS,useValue:h6,multi:!0},{provide:Lt,useFactory:p6,deps:[]}];var m6=[{provide:xg,useValue:"root"},{provide:vr,useFactory:f6,deps:[]},{provide:T_,useClass:a6,multi:!0,deps:[Lt,ue,ln]},{provide:T_,useClass:u6,multi:!0,deps:[Lt]},G1,j1,W1,{provide:Ud,useExisting:G1},{provide:sm,useClass:e6,deps:[]},[]];var hm=(()=>{let t=class t{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};t.\u0275fac=function(s){return new(s||t)(Y(Lt))},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var A_=function(e){return e[e.NoHttpTransferCache=0]="NoHttpTransferCache",e[e.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",e}(A_||{});function K1(...e){let t=[],n=new Set,i=n.has(A_.HttpTransferCacheOptions);for(let{\u0275providers:s,\u0275kind:r}of e)n.add(r),s.length&&t.push(s);return pt([[],m1(),n.has(A_.NoHttpTransferCache)||i?[]:B1({}),t])}var Ie="primary",Sh=Symbol("RouteTitle"),N_=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ac(e){return new N_(e)}function C6(e,t,n){let i=n.path.split("/");if(i.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||i.length<e.length))return null;let s={};for(let r=0;r<i.length;r++){let o=i[r],a=e[r];if(o.startsWith(":"))s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:e.slice(0,i.length),posParams:s}}function y6(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!zs(e[n],t[n]))return!1;return!0}function zs(e,t){let n=e?k_(e):void 0,i=t?k_(t):void 0;if(!n||!i||n.length!=i.length)return!1;let s;for(let r=0;r<n.length;r++)if(s=n[r],!tO(e[s],t[s]))return!1;return!0}function k_(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function tO(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),i=[...t].sort();return n.every((s,r)=>i[r]===s)}else return e===t}function nO(e){return e.length>0?e[e.length-1]:null}function Io(e){return $y(e)?e:Pa(e)?Ke(Promise.resolve(e)):ee(e)}var w6={exact:sO,subset:rO},iO={exact:S6,subset:_6,ignored:()=>!0};function Y1(e,t,n){return w6[n.paths](e.root,t.root,n.matrixParams)&&iO[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function S6(e,t){return zs(e,t)}function sO(e,t,n){if(!Oa(e.segments,t.segments)||!gm(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!e.children[i]||!sO(e.children[i],t.children[i],n))return!1;return!0}function _6(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>tO(e[n],t[n]))}function rO(e,t,n){return oO(e,t,t.segments,n)}function oO(e,t,n,i){if(e.segments.length>n.length){let s=e.segments.slice(0,n.length);return!(!Oa(s,n)||t.hasChildren()||!gm(s,n,i))}else if(e.segments.length===n.length){if(!Oa(e.segments,n)||!gm(e.segments,n,i))return!1;for(let s in t.children)if(!e.children[s]||!rO(e.children[s],t.children[s],i))return!1;return!0}else{let s=n.slice(0,e.segments.length),r=n.slice(e.segments.length);return!Oa(e.segments,s)||!gm(e.segments,s,i)||!e.children[Ie]?!1:oO(e.children[Ie],t,r,i)}}function gm(e,t,n){return t.every((i,s)=>iO[n](e[s].parameters,i.parameters))}var Ro=class{constructor(t=new Ze([],{}),n={},i=null){this.root=t,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Ac(this.queryParams),this._queryParamMap}toString(){return D6.serialize(this)}},Ze=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mm(this)}},xa=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=Ac(this.parameters),this._parameterMap}toString(){return lO(this)}};function b6(e,t){return Oa(e,t)&&e.every((n,i)=>zs(n.parameters,t[i].parameters))}function Oa(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.path===t[i].path)}function E6(e,t){let n=[];return Object.entries(e.children).forEach(([i,s])=>{i===Ie&&(n=n.concat(t(s,i)))}),Object.entries(e.children).forEach(([i,s])=>{i!==Ie&&(n=n.concat(t(s,i)))}),n}var ab=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:()=>new Cm,providedIn:"root"});let e=t;return e})(),Cm=class{parse(t){let n=new V_(t);return new Ro(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${oh(t.root,!0)}`,i=I6(t.queryParams),s=typeof t.fragment=="string"?`#${R6(t.fragment)}`:"";return`${n}${i}${s}`}},D6=new Cm;function mm(e){return e.segments.map(t=>lO(t)).join("/")}function oh(e,t){if(!e.hasChildren())return mm(e);if(t){let n=e.children[Ie]?oh(e.children[Ie],!1):"",i=[];return Object.entries(e.children).forEach(([s,r])=>{s!==Ie&&i.push(`${s}:${oh(r,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=E6(e,(i,s)=>s===Ie?[oh(e.children[Ie],!1)]:[`${s}:${oh(i,!1)}`]);return Object.keys(e.children).length===1&&e.children[Ie]!=null?`${mm(e)}/${n[0]}`:`${mm(e)}/(${n.join("//")})`}}function aO(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fm(e){return aO(e).replace(/%3B/gi,";")}function R6(e){return encodeURI(e)}function L_(e){return aO(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vm(e){return decodeURIComponent(e)}function J1(e){return vm(e.replace(/\+/g,"%20"))}function lO(e){return`${L_(e.path)}${T6(e.parameters)}`}function T6(e){return Object.entries(e).map(([t,n])=>`;${L_(t)}=${L_(n)}`).join("")}function I6(e){let t=Object.entries(e).map(([n,i])=>Array.isArray(i)?i.map(s=>`${fm(n)}=${fm(s)}`).join("&"):`${fm(n)}=${fm(i)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var A6=/^[^\/()?;#]+/;function P_(e){let t=e.match(A6);return t?t[0]:""}var M6=/^[^\/()?;=#]+/;function P6(e){let t=e.match(M6);return t?t[0]:""}var F6=/^[^=?&#]+/;function x6(e){let t=e.match(F6);return t?t[0]:""}var O6=/^[^&#]+/;function N6(e){let t=e.match(O6);return t?t[0]:""}var V_=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ze([],{}):new Ze([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(i[Ie]=new Ze(t,n)),i}parseSegment(){let t=P_(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new he(4009,!1);return this.capture(t),new xa(vm(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=P6(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let s=P_(this.remaining);s&&(i=s,this.capture(i))}t[vm(n)]=vm(i)}parseQueryParam(t){let n=x6(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let o=N6(this.remaining);o&&(i=o,this.capture(i))}let s=J1(n),r=J1(i);if(t.hasOwnProperty(s)){let o=t[s];Array.isArray(o)||(o=[o],t[s]=o),o.push(r)}else t[s]=r}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=P_(this.remaining),s=this.remaining[i.length];if(s!=="/"&&s!==")"&&s!==";")throw new he(4010,!1);let r;i.indexOf(":")>-1?(r=i.slice(0,i.indexOf(":")),this.capture(r),this.capture(":")):t&&(r=Ie);let o=this.parseChildren();n[r]=Object.keys(o).length===1?o[Ie]:new Ze([],o),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new he(4011,!1)}};function cO(e){return e.segments.length>0?new Ze([],{[Ie]:e}):e}function uO(e){let t={};for(let[i,s]of Object.entries(e.children)){let r=uO(s);if(i===Ie&&r.segments.length===0&&r.hasChildren())for(let[o,a]of Object.entries(r.children))t[o]=a;else(r.segments.length>0||r.hasChildren())&&(t[i]=r)}let n=new Ze(e.segments,t);return k6(n)}function k6(e){if(e.numberOfChildren===1&&e.children[Ie]){let t=e.children[Ie];return new Ze(e.segments.concat(t.segments),t.children)}return e}function Mc(e){return e instanceof Ro}function L6(e,t,n=null,i=null){let s=dO(e);return hO(s,t,n,i)}function dO(e){let t;function n(r){let o={};for(let l of r.children){let c=n(l);o[l.outlet]=c}let a=new Ze(r.url,o);return r===e&&(t=a),a}let i=n(e.root),s=cO(i);return t??s}function hO(e,t,n,i){let s=e;for(;s.parent;)s=s.parent;if(t.length===0)return F_(s,s,s,n,i);let r=V6(t);if(r.toRoot())return F_(s,s,new Ze([],{}),n,i);let o=B6(r,s,e),a=o.processChildren?ch(o.segmentGroup,o.index,r.commands):pO(o.segmentGroup,o.index,r.commands);return F_(s,o.segmentGroup,a,n,i)}function ym(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function hh(e){return typeof e=="object"&&e!=null&&e.outlets}function F_(e,t,n,i,s){let r={};i&&Object.entries(i).forEach(([l,c])=>{r[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let o;e===t?o=n:o=fO(e,t,n);let a=cO(uO(o));return new Ro(a,r,s)}function fO(e,t,n){let i={};return Object.entries(e.children).forEach(([s,r])=>{r===t?i[s]=n:i[s]=fO(r,t,n)}),new Ze(e.segments,i)}var wm=class{constructor(t,n,i){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=i,t&&i.length>0&&ym(i[0]))throw new he(4003,!1);let s=i.find(hh);if(s&&s!==nO(i))throw new he(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function V6(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new wm(!0,0,e);let t=0,n=!1,i=e.reduce((s,r,o)=>{if(typeof r=="object"&&r!=null){if(r.outlets){let a={};return Object.entries(r.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...s,{outlets:a}]}if(r.segmentPath)return[...s,r.segmentPath]}return typeof r!="string"?[...s,r]:o===0?(r.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?t++:a!=""&&s.push(a))}),s):[...s,r]},[]);return new wm(n,t,i)}var Tc=class{constructor(t,n,i){this.segmentGroup=t,this.processChildren=n,this.index=i}};function B6(e,t,n){if(e.isAbsolute)return new Tc(t,!0,0);if(!n)return new Tc(t,!1,NaN);if(n.parent===null)return new Tc(n,!0,0);let i=ym(e.commands[0])?0:1,s=n.segments.length-1+i;return G6(n,s,e.numberOfDoubleDots)}function G6(e,t,n){let i=e,s=t,r=n;for(;r>s;){if(r-=s,i=i.parent,!i)throw new he(4005,!1);s=i.segments.length}return new Tc(i,!1,s-r)}function H6(e){return hh(e[0])?e[0].outlets:{[Ie]:e}}function pO(e,t,n){if(e??=new Ze([],{}),e.segments.length===0&&e.hasChildren())return ch(e,t,n);let i=U6(e,t,n),s=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){let r=new Ze(e.segments.slice(0,i.pathIndex),{});return r.children[Ie]=new Ze(e.segments.slice(i.pathIndex),e.children),ch(r,0,s)}else return i.match&&s.length===0?new Ze(e.segments,{}):i.match&&!e.hasChildren()?B_(e,t,n):i.match?ch(e,0,s):B_(e,t,n)}function ch(e,t,n){if(n.length===0)return new Ze(e.segments,{});{let i=H6(n),s={};if(Object.keys(i).some(r=>r!==Ie)&&e.children[Ie]&&e.numberOfChildren===1&&e.children[Ie].segments.length===0){let r=ch(e.children[Ie],t,n);return new Ze(e.segments,r.children)}return Object.entries(i).forEach(([r,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(s[r]=pO(e.children[r],t,o))}),Object.entries(e.children).forEach(([r,o])=>{i[r]===void 0&&(s[r]=o)}),new Ze(e.segments,s)}}function U6(e,t,n){let i=0,s=t,r={match:!1,pathIndex:0,commandIndex:0};for(;s<e.segments.length;){if(i>=n.length)return r;let o=e.segments[s],a=n[i];if(hh(a))break;let l=`${a}`,c=i<n.length-1?n[i+1]:null;if(s>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!Z1(l,c,o))return r;i+=2}else{if(!Z1(l,{},o))return r;i++}s++}return{match:!0,pathIndex:s,commandIndex:i}}function B_(e,t,n){let i=e.segments.slice(0,t),s=0;for(;s<n.length;){let r=n[s];if(hh(r)){let l=W6(r.outlets);return new Ze(i,l)}if(s===0&&ym(n[0])){let l=e.segments[t];i.push(new xa(l.path,X1(n[0]))),s++;continue}let o=hh(r)?r.outlets[Ie]:`${r}`,a=s<n.length-1?n[s+1]:null;o&&a&&ym(a)?(i.push(new xa(o,X1(a))),s+=2):(i.push(new xa(o,{})),s++)}return new Ze(i,{})}function W6(e){let t={};return Object.entries(e).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[n]=B_(new Ze([],{}),0,i))}),t}function X1(e){let t={};return Object.entries(e).forEach(([n,i])=>t[n]=`${i}`),t}function Z1(e,t,n){return e==n.path&&zs(t,n.parameters)}var uh="imperative",_n=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(_n||{}),Vi=class{constructor(t,n){this.id=t,this.url=n}},fh=class extends Vi{constructor(t,n,i="imperative",s=null){super(t,n),this.type=_n.NavigationStart,this.navigationTrigger=i,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Na=class extends Vi{constructor(t,n,i){super(t,n),this.urlAfterRedirects=i,this.type=_n.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},bi=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(bi||{}),G_=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(G_||{}),To=class extends Vi{constructor(t,n,i,s){super(t,n),this.reason=i,this.code=s,this.type=_n.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ka=class extends Vi{constructor(t,n,i,s){super(t,n),this.reason=i,this.code=s,this.type=_n.NavigationSkipped}},ph=class extends Vi{constructor(t,n,i,s){super(t,n),this.error=i,this.target=s,this.type=_n.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Sm=class extends Vi{constructor(t,n,i,s){super(t,n),this.urlAfterRedirects=i,this.state=s,this.type=_n.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},H_=class extends Vi{constructor(t,n,i,s){super(t,n),this.urlAfterRedirects=i,this.state=s,this.type=_n.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},U_=class extends Vi{constructor(t,n,i,s,r){super(t,n),this.urlAfterRedirects=i,this.state=s,this.shouldActivate=r,this.type=_n.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},W_=class extends Vi{constructor(t,n,i,s){super(t,n),this.urlAfterRedirects=i,this.state=s,this.type=_n.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},j_=class extends Vi{constructor(t,n,i,s){super(t,n),this.urlAfterRedirects=i,this.state=s,this.type=_n.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},z_=class{constructor(t){this.route=t,this.type=_n.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},$_=class{constructor(t){this.route=t,this.type=_n.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},q_=class{constructor(t){this.snapshot=t,this.type=_n.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},K_=class{constructor(t){this.snapshot=t,this.type=_n.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Q_=class{constructor(t){this.snapshot=t,this.type=_n.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gh=class{constructor(t){this.snapshot=t,this.type=_n.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var mh=class{},vh=class{constructor(t){this.url=t}};var Y_=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Tm,this.attachRef=null}},Tm=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(i,s){let r=this.getOrCreateContext(i);r.outlet=s,this.contexts.set(i,r)}onChildOutletDestroyed(i){let s=this.getContext(i);s&&(s.outlet=null,s.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let s=this.getContext(i);return s||(s=new Y_,this.contexts.set(i,s)),s}getContext(i){return this.contexts.get(i)||null}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),_m=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=J_(t,this._root);return n?n.children.map(i=>i.value):[]}firstChild(t){let n=J_(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=X_(t,this._root);return n.length<2?[]:n[n.length-2].children.map(s=>s.value).filter(s=>s!==t)}pathFromRoot(t){return X_(t,this._root).map(n=>n.value)}};function J_(e,t){if(e===t.value)return t;for(let n of t.children){let i=J_(e,n);if(i)return i}return null}function X_(e,t){if(e===t.value)return[t];for(let n of t.children){let i=X_(e,n);if(i.length)return i.unshift(t),i}return[]}var _i=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Rc(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var bm=class extends _m{constructor(t,n){super(t),this.snapshot=n,cb(this,t)}toString(){return this.snapshot.toString()}};function gO(e){let t=j6(e),n=new vt([new xa("",{})]),i=new vt({}),s=new vt({}),r=new vt({}),o=new vt(""),a=new Pc(n,i,r,o,s,Ie,e,t.root);return a.snapshot=t.root,new bm(new _i(a,[]),t)}function j6(e){let t={},n={},i={},s="",r=new Ch([],t,i,s,n,Ie,e,null,{});return new Em("",new _i(r,[]))}var Pc=class{constructor(t,n,i,s,r,o,a,l){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=s,this.dataSubject=r,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(oe(c=>c[Sh]))??ee(void 0),this.url=t,this.params=n,this.queryParams=i,this.fragment=s,this.data=r}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(oe(t=>Ac(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(oe(t=>Ac(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function lb(e,t,n="emptyOnly"){let i,{routeConfig:s}=e;return t!==null&&(n==="always"||s?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:B(B({},t.params),e.params),data:B(B({},t.data),e.data),resolve:B(B(B(B({},e.data),t.data),s?.data),e._resolvedData)}:i={params:B({},e.params),data:B({},e.data),resolve:B(B({},e.data),e._resolvedData??{})},s&&vO(s)&&(i.resolve[Sh]=s.title),i}var Ch=class{get title(){return this.data?.[Sh]}constructor(t,n,i,s,r,o,a,l,c){this.url=t,this.params=n,this.queryParams=i,this.fragment=s,this.data=r,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ac(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ac(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Em=class extends _m{constructor(t,n){super(n),this.url=t,cb(this,n)}toString(){return mO(this._root)}};function cb(e,t){t.value._routerState=e,t.children.forEach(n=>cb(e,n))}function mO(e){let t=e.children.length>0?` { ${e.children.map(mO).join(", ")} } `:"";return`${e.value}${t}`}function x_(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,zs(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),zs(t.params,n.params)||e.paramsSubject.next(n.params),y6(t.url,n.url)||e.urlSubject.next(n.url),zs(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Z_(e,t){let n=zs(e.params,t.params)&&b6(e.url,t.url),i=!e.parent!=!t.parent;return n&&!i&&(!e.parent||Z_(e.parent,t.parent))}function vO(e){return typeof e.title=="string"||e.title===null}var _h=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ie,this.activateEvents=new H,this.deactivateEvents=new H,this.attachEvents=new H,this.detachEvents=new H,this.parentContexts=U(Tm),this.location=U(ki),this.changeDetector=U(Dr),this.environmentInjector=U(jn),this.inputBinder=U(ub,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:s,previousValue:r}=i.name;if(s)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new he(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new he(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new he(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,s){this.activated=i,this._activatedRoute=s,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,s){if(this.isActivated)throw new he(4013,!1);this._activatedRoute=i;let r=this.location,a=i.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new eb(i,l,r.injector);this.activated=r.createComponent(a,{index:r.length,injector:c,environmentInjector:s??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(s){return new(s||t)},t.\u0275dir=Ft({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[an]});let e=t;return e})(),eb=class e{__ngOutletInjector(t){return new e(this.route,this.childContexts,t)}constructor(t,n,i){this.route=t,this.childContexts=n,this.parent=i}get(t,n){return t===Pc?this.route:t===Tm?this.childContexts:this.parent.get(t,n)}},ub=new X("");function z6(e,t,n){let i=yh(e,t._root,n?n._root:void 0);return new bm(i,t)}function yh(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=t.value;let s=$6(e,t,n);return new _i(i,s)}else{if(e.shouldAttach(t.value)){let r=e.retrieve(t.value);if(r!==null){let o=r.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>yh(e,a)),o}}let i=q6(t.value),s=t.children.map(r=>yh(e,r));return new _i(i,s)}}function $6(e,t,n){return t.children.map(i=>{for(let s of n.children)if(e.shouldReuseRoute(i.value,s.value.snapshot))return yh(e,i,s);return yh(e,i)})}function q6(e){return new Pc(new vt(e.url),new vt(e.params),new vt(e.queryParams),new vt(e.fragment),new vt(e.data),e.outlet,e.component,e)}var CO="ngNavigationCancelingError";function yO(e,t){let{redirectTo:n,navigationBehaviorOptions:i}=Mc(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,s=wO(!1,bi.Redirect);return s.url=n,s.navigationBehaviorOptions=i,s}function wO(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[CO]=!0,n.cancellationCode=t,n}function K6(e){return SO(e)&&Mc(e.url)}function SO(e){return!!e&&e[CO]}var db=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Ee({type:t,selectors:[["ng-component"]],standalone:!0,features:[De],decls:1,vars:0,template:function(s,r){s&1&&ae(0,"router-outlet")},dependencies:[_h],encapsulation:2});let e=t;return e})();function Q6(e,t){return e.providers&&!e._injector&&(e._injector=r_(e.providers,t,`Route: ${e.path}`)),e._injector??t}function hb(e){let t=e.children&&e.children.map(hb),n=t?se(B({},e),{children:t}):B({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Ie&&(n.component=db),n}function $s(e){return e.outlet||Ie}function Y6(e,t){let n=e.filter(i=>$s(i)===t);return n.push(...e.filter(i=>$s(i)!==t)),n}function bh(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var J6=(e,t,n,i)=>oe(s=>(new tb(t,s.targetRouterState,s.currentRouterState,n,i).activate(e),s)),tb=class{constructor(t,n,i,s,r){this.routeReuseStrategy=t,this.futureState=n,this.currState=i,this.forwardEvent=s,this.inputBindingEnabled=r}activate(t){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,t),x_(this.futureState.root),this.activateChildRoutes(n,i,t)}deactivateChildRoutes(t,n,i){let s=Rc(n);t.children.forEach(r=>{let o=r.value.outlet;this.deactivateRoutes(r,s[o],i),delete s[o]}),Object.values(s).forEach(r=>{this.deactivateRouteAndItsChildren(r,i)})}deactivateRoutes(t,n,i){let s=t.value,r=n?n.value:null;if(s===r)if(s.component){let o=i.getContext(s.outlet);o&&this.deactivateChildRoutes(t,n,o.children)}else this.deactivateChildRoutes(t,n,i);else r&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let i=n.getContext(t.value.outlet),s=i&&t.value.component?i.children:n,r=Rc(t);for(let o of Object.values(r))this.deactivateRouteAndItsChildren(o,s);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let i=n.getContext(t.value.outlet),s=i&&t.value.component?i.children:n,r=Rc(t);for(let o of Object.values(r))this.deactivateRouteAndItsChildren(o,s);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,n,i){let s=Rc(n);t.children.forEach(r=>{this.activateRoutes(r,s[r.value.outlet],i),this.forwardEvent(new gh(r.value.snapshot))}),t.children.length&&this.forwardEvent(new K_(t.value.snapshot))}activateRoutes(t,n,i){let s=t.value,r=n?n.value:null;if(x_(s),s===r)if(s.component){let o=i.getOrCreateContext(s.outlet);this.activateChildRoutes(t,n,o.children)}else this.activateChildRoutes(t,n,i);else if(s.component){let o=i.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){let a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),x_(a.route.value),this.activateChildRoutes(t,null,o.children)}else{let a=bh(s.snapshot);o.attachRef=null,o.route=s,o.injector=a,o.outlet&&o.outlet.activateWith(s,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,i)}},Dm=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Ic=class{constructor(t,n){this.component=t,this.route=n}};function X6(e,t,n){let i=e._root,s=t?t._root:null;return ah(i,s,n,[i.value])}function Z6(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function xc(e,t){let n=Symbol(),i=t.get(e,n);return i===n?typeof e=="function"&&!VP(e)?e:t.get(e):i}function ah(e,t,n,i,s={canDeactivateChecks:[],canActivateChecks:[]}){let r=Rc(t);return e.children.forEach(o=>{eK(o,r[o.value.outlet],n,i.concat([o.value]),s),delete r[o.value.outlet]}),Object.entries(r).forEach(([o,a])=>dh(a,n.getContext(o),s)),s}function eK(e,t,n,i,s={canDeactivateChecks:[],canActivateChecks:[]}){let r=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&r.routeConfig===o.routeConfig){let l=tK(o,r,r.routeConfig.runGuardsAndResolvers);l?s.canActivateChecks.push(new Dm(i)):(r.data=o.data,r._resolvedData=o._resolvedData),r.component?ah(e,t,a?a.children:null,i,s):ah(e,t,n,i,s),l&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new Ic(a.outlet.component,o))}else o&&dh(t,a,s),s.canActivateChecks.push(new Dm(i)),r.component?ah(e,null,a?a.children:null,i,s):ah(e,null,n,i,s);return s}function tK(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Oa(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Oa(e.url,t.url)||!zs(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Z_(e,t)||!zs(e.queryParams,t.queryParams);case"paramsChange":default:return!Z_(e,t)}}function dh(e,t,n){let i=Rc(e),s=e.value;Object.entries(i).forEach(([r,o])=>{s.component?t?dh(o,t.children.getContext(r),n):dh(o,null,n):dh(o,t,n)}),s.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Ic(t.outlet.component,s)):n.canDeactivateChecks.push(new Ic(null,s)):n.canDeactivateChecks.push(new Ic(null,s))}function Eh(e){return typeof e=="function"}function nK(e){return typeof e=="boolean"}function iK(e){return e&&Eh(e.canLoad)}function sK(e){return e&&Eh(e.canActivate)}function rK(e){return e&&Eh(e.canActivateChild)}function oK(e){return e&&Eh(e.canDeactivate)}function aK(e){return e&&Eh(e.canMatch)}function _O(e){return e instanceof hr||e?.name==="EmptyError"}var pm=Symbol("INITIAL_VALUE");function Fc(){return Ge(e=>fr(e.map(t=>t.pipe(Pt(1),fa(pm)))).pipe(oe(t=>{for(let n of t)if(n!==!0){if(n===pm)return pm;if(n===!1||n instanceof Ro)return n}return!0}),ft(t=>t!==pm),Pt(1)))}function lK(e,t){return ot(n=>{let{targetSnapshot:i,currentSnapshot:s,guards:{canActivateChecks:r,canDeactivateChecks:o}}=n;return o.length===0&&r.length===0?ee(se(B({},n),{guardsResult:!0})):cK(o,i,s,e).pipe(ot(a=>a&&nK(a)?uK(i,r,e,t):ee(a)),oe(a=>se(B({},n),{guardsResult:a})))})}function cK(e,t,n,i){return Ke(e).pipe(ot(s=>gK(s.component,s.route,n,t,i)),pi(s=>s!==!0,!0))}function uK(e,t,n,i){return Ke(t).pipe(fo(s=>ks(hK(s.route.parent,i),dK(s.route,i),pK(e,s.path,n),fK(e,s.route,n))),pi(s=>s!==!0,!0))}function dK(e,t){return e!==null&&t&&t(new Q_(e)),ee(!0)}function hK(e,t){return e!==null&&t&&t(new q_(e)),ee(!0)}function fK(e,t,n){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return ee(!0);let s=i.map(r=>Hp(()=>{let o=bh(t)??n,a=xc(r,o),l=sK(a)?a.canActivate(t,e):So(o,()=>a(t,e));return Io(l).pipe(pi())}));return ee(s).pipe(Fc())}function pK(e,t,n){let i=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(o=>Z6(o)).filter(o=>o!==null).map(o=>Hp(()=>{let a=o.guards.map(l=>{let c=bh(o.node)??n,u=xc(l,c),h=rK(u)?u.canActivateChild(i,e):So(c,()=>u(i,e));return Io(h).pipe(pi())});return ee(a).pipe(Fc())}));return ee(r).pipe(Fc())}function gK(e,t,n,i,s){let r=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!r||r.length===0)return ee(!0);let o=r.map(a=>{let l=bh(t)??s,c=xc(a,l),u=oK(c)?c.canDeactivate(e,t,n,i):So(l,()=>c(e,t,n,i));return Io(u).pipe(pi())});return ee(o).pipe(Fc())}function mK(e,t,n,i){let s=t.canLoad;if(s===void 0||s.length===0)return ee(!0);let r=s.map(o=>{let a=xc(o,e),l=iK(a)?a.canLoad(t,n):So(e,()=>a(t,n));return Io(l)});return ee(r).pipe(Fc(),bO(i))}function bO(e){return Ep(nt(t=>{if(Mc(t))throw yO(e,t)}),oe(t=>t===!0))}function vK(e,t,n,i){let s=t.canMatch;if(!s||s.length===0)return ee(!0);let r=s.map(o=>{let a=xc(o,e),l=aK(a)?a.canMatch(t,n):So(e,()=>a(t,n));return Io(l)});return ee(r).pipe(Fc(),bO(i))}var wh=class{constructor(t){this.segmentGroup=t||null}},Rm=class extends Error{constructor(t){super(),this.urlTree=t}};function Dc(e){return sc(new wh(e))}function CK(e){return sc(new he(4e3,!1))}function yK(e){return sc(wO(!1,bi.GuardRejected))}var nb=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let i=[],s=n.root;for(;;){if(i=i.concat(s.segments),s.numberOfChildren===0)return ee(i);if(s.numberOfChildren>1||!s.children[Ie])return CK(t.redirectTo);s=s.children[Ie]}}applyRedirectCommands(t,n,i){let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,i);if(n.startsWith("/"))throw new Rm(s);return s}applyRedirectCreateUrlTree(t,n,i,s){let r=this.createSegmentGroup(t,n.root,i,s);return new Ro(r,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let i={};return Object.entries(t).forEach(([s,r])=>{if(typeof r=="string"&&r.startsWith(":")){let a=r.substring(1);i[s]=n[a]}else i[s]=r}),i}createSegmentGroup(t,n,i,s){let r=this.createSegments(t,n.segments,i,s),o={};return Object.entries(n.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(t,l,i,s)}),new Ze(r,o)}createSegments(t,n,i,s){return n.map(r=>r.path.startsWith(":")?this.findPosParam(t,r,s):this.findOrReturn(r,i))}findPosParam(t,n,i){let s=i[n.path.substring(1)];if(!s)throw new he(4001,!1);return s}findOrReturn(t,n){let i=0;for(let s of n){if(s.path===t.path)return n.splice(i),s;i++}return t}},ib={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function wK(e,t,n,i,s){let r=fb(e,t,n);return r.matched?(i=Q6(t,i),vK(i,t,n,s).pipe(oe(o=>o===!0?r:B({},ib)))):ee(r)}function fb(e,t,n){if(t.path==="**")return SK(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?B({},ib):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let s=(t.matcher||C6)(n,e,t);if(!s)return B({},ib);let r={};Object.entries(s.posParams??{}).forEach(([a,l])=>{r[a]=l.path});let o=s.consumed.length>0?B(B({},r),s.consumed[s.consumed.length-1].parameters):r;return{matched:!0,consumedSegments:s.consumed,remainingSegments:n.slice(s.consumed.length),parameters:o,positionalParamSegments:s.posParams??{}}}function SK(e){return{matched:!0,parameters:e.length>0?nO(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function eO(e,t,n,i){return n.length>0&&EK(e,n,i)?{segmentGroup:new Ze(t,bK(i,new Ze(n,e.children))),slicedSegments:[]}:n.length===0&&DK(e,n,i)?{segmentGroup:new Ze(e.segments,_K(e,n,i,e.children)),slicedSegments:n}:{segmentGroup:new Ze(e.segments,e.children),slicedSegments:n}}function _K(e,t,n,i){let s={};for(let r of n)if(Im(e,t,r)&&!i[$s(r)]){let o=new Ze([],{});s[$s(r)]=o}return B(B({},i),s)}function bK(e,t){let n={};n[Ie]=t;for(let i of e)if(i.path===""&&$s(i)!==Ie){let s=new Ze([],{});n[$s(i)]=s}return n}function EK(e,t,n){return n.some(i=>Im(e,t,i)&&$s(i)!==Ie)}function DK(e,t,n){return n.some(i=>Im(e,t,i))}function Im(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function RK(e,t,n,i){return $s(e)!==i&&(i===Ie||!Im(t,n,e))?!1:fb(t,e,n).matched}function TK(e,t,n){return t.length===0&&!e.children[n]}var sb=class{};function IK(e,t,n,i,s,r,o="emptyOnly"){return new rb(e,t,n,i,s,o,r).recognize()}var AK=31,rb=class{constructor(t,n,i,s,r,o,a){this.injector=t,this.configLoader=n,this.rootComponentType=i,this.config=s,this.urlTree=r,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new nb(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new he(4002,`'${t.segmentGroup}'`)}recognize(){let t=eO(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(oe(n=>{let i=new Ch([],Object.freeze({}),Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ie,this.rootComponentType,null,{}),s=new _i(i,n),r=new Em("",s),o=L6(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,r.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(r._root,null),{state:r,tree:o}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,Ie).pipe(ho(i=>{if(i instanceof Rm)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof wh?this.noMatchError(i):i}))}inheritParamsAndData(t,n){let i=t.value,s=lb(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(s.params),i.data=Object.freeze(s.data),t.children.forEach(r=>this.inheritParamsAndData(r,i))}processSegmentGroup(t,n,i,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,n,i):this.processSegment(t,n,i,i.segments,s,!0).pipe(oe(r=>r instanceof _i?[r]:[]))}processChildren(t,n,i){let s=[];for(let r of Object.keys(i.children))r==="primary"?s.unshift(r):s.push(r);return Ke(s).pipe(fo(r=>{let o=i.children[r],a=Y6(n,r);return this.processSegmentGroup(t,a,o,r)}),qp((r,o)=>(r.push(...o),r)),po(null),Zy(),ot(r=>{if(r===null)return Dc(i);let o=EO(r);return MK(o),ee(o)}))}processSegment(t,n,i,s,r,o){return Ke(n).pipe(fo(a=>this.processSegmentAgainstRoute(a._injector??t,n,a,i,s,r,o).pipe(ho(l=>{if(l instanceof wh)return ee(null);throw l}))),pi(a=>!!a),ho(a=>{if(_O(a))return TK(i,s,r)?ee(new sb):Dc(i);throw a}))}processSegmentAgainstRoute(t,n,i,s,r,o,a){return RK(i,s,r,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,s,i,r,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,s,n,i,r,o):Dc(s):Dc(s)}expandSegmentAgainstRouteUsingRedirect(t,n,i,s,r,o){let{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:u}=fb(n,s,r);if(!a)return Dc(n);s.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>AK&&(this.allowRedirects=!1));let h=this.applyRedirects.applyRedirectCommands(l,s.redirectTo,c);return this.applyRedirects.lineralizeSegments(s,h).pipe(ot(f=>this.processSegment(t,i,n,f.concat(u),o,!1)))}matchSegmentAgainstRoute(t,n,i,s,r){let o=wK(n,i,s,t,this.urlSerializer);return i.path==="**"&&(n.children={}),o.pipe(Ge(a=>a.matched?(t=i._injector??t,this.getChildConfig(t,i,s).pipe(Ge(({routes:l})=>{let c=i._loadedInjector??t,{consumedSegments:u,remainingSegments:h,parameters:f}=a,g=new Ch(u,f,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,FK(i),$s(i),i.component??i._loadedComponent??null,i,xK(i)),{segmentGroup:v,slicedSegments:y}=eO(n,u,h,l);if(y.length===0&&v.hasChildren())return this.processChildren(c,l,v).pipe(oe(E=>E===null?null:new _i(g,E)));if(l.length===0&&y.length===0)return ee(new _i(g,[]));let C=$s(i)===r;return this.processSegment(c,l,v,y,C?Ie:r,!0).pipe(oe(E=>new _i(g,E instanceof _i?[E]:[])))}))):Dc(n)))}getChildConfig(t,n,i){return n.children?ee({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?ee({routes:n._loadedRoutes,injector:n._loadedInjector}):mK(t,n,i,this.urlSerializer).pipe(ot(s=>s?this.configLoader.loadChildren(t,n).pipe(nt(r=>{n._loadedRoutes=r.routes,n._loadedInjector=r.injector})):yK(n))):ee({routes:[],injector:t})}};function MK(e){e.sort((t,n)=>t.value.outlet===Ie?-1:n.value.outlet===Ie?1:t.value.outlet.localeCompare(n.value.outlet))}function PK(e){let t=e.value.routeConfig;return t&&t.path===""}function EO(e){let t=[],n=new Set;for(let i of e){if(!PK(i)){t.push(i);continue}let s=t.find(r=>i.value.routeConfig===r.value.routeConfig);s!==void 0?(s.children.push(...i.children),n.add(s)):t.push(i)}for(let i of n){let s=EO(i.children);t.push(new _i(i.value,s))}return t.filter(i=>!n.has(i))}function FK(e){return e.data||{}}function xK(e){return e.resolve||{}}function OK(e,t,n,i,s,r){return ot(o=>IK(e,t,n,i,o.extractedUrl,s,r).pipe(oe(({state:a,tree:l})=>se(B({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function NK(e,t){return ot(n=>{let{targetSnapshot:i,guards:{canActivateChecks:s}}=n;if(!s.length)return ee(n);let r=new Set(s.map(l=>l.route)),o=new Set;for(let l of r)if(!o.has(l))for(let c of DO(l))o.add(c);let a=0;return Ke(o).pipe(fo(l=>r.has(l)?kK(l,i,e,t):(l.data=lb(l,l.parent,e).resolve,ee(void 0))),nt(()=>a++),oc(1),ot(l=>a===o.size?ee(n):zt))})}function DO(e){let t=e.children.map(n=>DO(n)).flat();return[e,...t]}function kK(e,t,n,i){let s=e.routeConfig,r=e._resolve;return s?.title!==void 0&&!vO(s)&&(r[Sh]=s.title),LK(r,e,t,i).pipe(oe(o=>(e._resolvedData=o,e.data=lb(e,e.parent,n).resolve,null)))}function LK(e,t,n,i){let s=k_(e);if(s.length===0)return ee({});let r={};return Ke(s).pipe(ot(o=>VK(e[o],t,n,i).pipe(pi(),nt(a=>{r[o]=a}))),oc(1),Ad(r),ho(o=>_O(o)?zt:sc(o)))}function VK(e,t,n,i){let s=bh(t)??i,r=xc(e,s),o=r.resolve?r.resolve(t,n):So(s,()=>r(t,n));return Io(o)}function O_(e){return Ge(t=>{let n=e(t);return n?Ke(n).pipe(oe(()=>t)):ee(t)})}var RO=(()=>{let t=class t{buildTitle(i){let s,r=i.root;for(;r!==void 0;)s=this.getResolvedTitleForRoute(r)??s,r=r.children.find(o=>o.outlet===Ie);return s}getResolvedTitleForRoute(i){return i.data[Sh]}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:()=>U(BK),providedIn:"root"});let e=t;return e})(),BK=(()=>{let t=class t extends RO{constructor(i){super(),this.title=i}updateTitle(i){let s=this.buildTitle(i);s!==void 0&&this.title.setTitle(s)}};t.\u0275fac=function(s){return new(s||t)(Y(hm))},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),pb=new X("",{providedIn:"root",factory:()=>({})}),gb=new X(""),GK=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=U(f_)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return ee(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let s=Io(i.loadComponent()).pipe(oe(TO),nt(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),ha(()=>{this.componentLoaders.delete(i)})),r=new Zl(s,()=>new Le).pipe(Xl());return this.componentLoaders.set(i,r),r}loadChildren(i,s){if(this.childrenLoaders.get(s))return this.childrenLoaders.get(s);if(s._loadedRoutes)return ee({routes:s._loadedRoutes,injector:s._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(s);let o=HK(s,this.compiler,i,this.onLoadEndListener).pipe(ha(()=>{this.childrenLoaders.delete(s)})),a=new Zl(o,()=>new Le).pipe(Xl());return this.childrenLoaders.set(s,a),a}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function HK(e,t,n,i){return Io(e.loadChildren()).pipe(oe(TO),ot(s=>s instanceof Wd||Array.isArray(s)?ee(s):Ke(t.compileModuleAsync(s))),oe(s=>{i&&i(e);let r,o,a=!1;return Array.isArray(s)?(o=s,a=!0):(r=s.create(n).injector,o=r.get(gb,[],{optional:!0,self:!0}).flat()),{routes:o.map(hb),injector:r}}))}function UK(e){return e&&typeof e=="object"&&"default"in e}function TO(e){return UK(e)?e.default:e}var mb=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:()=>U(WK),providedIn:"root"});let e=t;return e})(),WK=(()=>{let t=class t{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,s){return i}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),jK=new X("");var zK=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Le,this.transitionAbortSubject=new Le,this.configLoader=U(GK),this.environmentInjector=U(jn),this.urlSerializer=U(ab),this.rootContexts=U(Tm),this.location=U(nh),this.inputBindingEnabled=U(ub,{optional:!0})!==null,this.titleStrategy=U(RO),this.options=U(pb,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=U(mb),this.createViewTransition=U(jK,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ee(void 0),this.rootComponentType=null;let i=r=>this.events.next(new z_(r)),s=r=>this.events.next(new $_(r));this.configLoader.onLoadEndListener=s,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let s=++this.navigationId;this.transitions?.next(se(B(B({},this.transitions.value),i),{id:s}))}setupNavigations(i,s,r){return this.transitions=new vt({id:0,currentUrlTree:s,currentRawUrl:s,extractedUrl:this.urlHandlingStrategy.extract(s),urlAfterRedirects:this.urlHandlingStrategy.extract(s),rawUrl:s,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:uh,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ft(o=>o.id!==0),oe(o=>se(B({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ge(o=>{let a=!1,l=!1;return ee(o).pipe(Ge(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",bi.SupersededByNewNavigation),zt;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?se(B({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!u&&h!=="reload"){let f="";return this.events.next(new ka(c.id,this.urlSerializer.serialize(c.rawUrl),f,G_.IgnoredSameUrlNavigation)),c.resolve(null),zt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ee(c).pipe(Ge(f=>{let g=this.transitions?.getValue();return this.events.next(new fh(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?zt:Promise.resolve(f)}),OK(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),nt(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=se(B({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new Sm(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:g,source:v,restoredState:y,extras:C}=c,E=new fh(f,this.urlSerializer.serialize(g),v,y);this.events.next(E);let I=gO(this.rootComponentType).snapshot;return this.currentTransition=o=se(B({},c),{targetSnapshot:I,urlAfterRedirects:g,extras:se(B({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,ee(o)}else{let f="";return this.events.next(new ka(c.id,this.urlSerializer.serialize(c.extractedUrl),f,G_.IgnoredByUrlHandlingStrategy)),c.resolve(null),zt}}),nt(c=>{let u=new H_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),oe(c=>(this.currentTransition=o=se(B({},c),{guards:X6(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),lK(this.environmentInjector,c=>this.events.next(c)),nt(c=>{if(o.guardsResult=c.guardsResult,Mc(c.guardsResult))throw yO(this.urlSerializer,c.guardsResult);let u=new U_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),ft(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",bi.GuardRejected),!1)),O_(c=>{if(c.guards.canActivateChecks.length)return ee(c).pipe(nt(u=>{let h=new W_(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),Ge(u=>{let h=!1;return ee(u).pipe(NK(this.paramsInheritanceStrategy,this.environmentInjector),nt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(u,"",bi.NoDataFromResolver)}}))}),nt(u=>{let h=new j_(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}))}),O_(c=>{let u=h=>{let f=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(h.routeConfig).pipe(nt(g=>{h.component=g}),oe(()=>{})));for(let g of h.children)f.push(...u(g));return f};return fr(u(c.targetSnapshot.root)).pipe(po(null),Pt(1))}),O_(()=>this.afterPreactivation()),Ge(()=>{let{currentSnapshot:c,targetSnapshot:u}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return h?Ke(h).pipe(oe(()=>o)):ee(o)}),oe(c=>{let u=z6(i.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=se(B({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),nt(()=>{this.events.next(new mh)}),J6(this.rootContexts,i.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Pt(1),nt({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Na(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),$t(this.transitionAbortSubject.pipe(nt(c=>{throw c}))),ha(()=>{!a&&!l&&this.cancelNavigationTransition(o,"",bi.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),ho(c=>{if(l=!0,SO(c))this.events.next(new To(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),K6(c)?this.events.next(new vh(c.url)):o.resolve(!1);else{this.events.next(new ph(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(i.errorHandler(c))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return zt}))}))}cancelNavigationTransition(i,s,r){let o=new To(i.id,this.urlSerializer.serialize(i.extractedUrl),s,r);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function $K(e){return e!==uh}var qK=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:()=>U(KK),providedIn:"root"});let e=t;return e})(),ob=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},KK=(()=>{let t=class t extends ob{};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=_r(t)))(r||t)}})(),t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),IO=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:()=>U(QK),providedIn:"root"});let e=t;return e})(),QK=(()=>{let t=class t extends IO{constructor(){super(...arguments),this.location=U(nh),this.urlSerializer=U(ab),this.options=U(pb,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=U(mb),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ro,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=gO(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(s=>{s.type==="popstate"&&i(s.url,s.state)})}handleRouterEvent(i,s){if(i instanceof fh)this.stateMemento=this.createStateMemento();else if(i instanceof ka)this.rawUrlTree=s.initialUrl;else if(i instanceof Sm){if(this.urlUpdateStrategy==="eager"&&!s.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(s.finalUrl,s.initialUrl);this.setBrowserUrl(r,s)}}else i instanceof mh?(this.currentUrlTree=s.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(s.finalUrl,s.initialUrl),this.routerState=s.targetRouterState,this.urlUpdateStrategy==="deferred"&&(s.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,s))):i instanceof To&&(i.code===bi.GuardRejected||i.code===bi.NoDataFromResolver)?this.restoreHistory(s):i instanceof ph?this.restoreHistory(s,!0):i instanceof Na&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,s){let r=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(r)||s.extras.replaceUrl){let o=this.browserPageId,a=B(B({},s.extras.state),this.generateNgRouterState(s.id,o));this.location.replaceState(r,"",a)}else{let o=B(B({},s.extras.state),this.generateNgRouterState(s.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(i,s=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(s&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,s){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:s}:{navigationId:i}}};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=_r(t)))(r||t)}})(),t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),lh=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(lh||{});function YK(e,t){e.events.pipe(ft(n=>n instanceof Na||n instanceof To||n instanceof ph||n instanceof ka),oe(n=>n instanceof Na||n instanceof ka?lh.COMPLETE:(n instanceof To?n.code===bi.Redirect||n.code===bi.SupersededByNewNavigation:!1)?lh.REDIRECTING:lh.FAILED),ft(n=>n!==lh.REDIRECTING),Pt(1)).subscribe(()=>{t()})}function JK(e){throw e}var XK={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ZK={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Qt=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=U(em),this.stateManager=U(IO),this.options=U(pb,{optional:!0})||{},this.pendingTasks=U(Yd),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=U(zK),this.urlSerializer=U(ab),this.location=U(nh),this.urlHandlingStrategy=U(mb),this._events=new Le,this.errorHandler=this.options.errorHandler||JK,this.navigated=!1,this.routeReuseStrategy=U(qK),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=U(gb,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!U(ub,{optional:!0}),this.eventsSubscription=new yt,this.isNgZoneEnabled=U(ue)instanceof ue&&ue.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(s=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(s,o),s instanceof To&&s.code!==bi.Redirect&&s.code!==bi.SupersededByNewNavigation)this.navigated=!0;else if(s instanceof Na)this.navigated=!0;else if(s instanceof vh){let a=this.urlHandlingStrategy.merge(s.url,r.currentRawUrl),l={info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||$K(r.source)};this.scheduleNavigation(a,uh,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}t8(s)&&this._events.next(s)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),uh,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,s)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",s)},0)})}navigateToSyncWithBrowser(i,s,r){let o={replaceUrl:!0},a=r?.navigationId?r:null;if(r){let c=B({},r);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let l=this.parseUrl(i);this.scheduleNavigation(l,s,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(hb),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,s={}){let{relativeTo:r,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:c}=s,u=c?this.currentUrlTree.fragment:a,h=null;switch(l){case"merge":h=B(B({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let f;try{let g=r?r.snapshot:this.routerState.snapshot.root;f=dO(g)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),f=this.currentUrlTree.root}return hO(f,i,h,u??null)}navigateByUrl(i,s={skipLocationChange:!1}){let r=Mc(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,uh,null,s)}navigate(i,s={skipLocationChange:!1}){return e8(i),this.navigateByUrl(this.createUrlTree(i,s),s)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,s){let r;if(s===!0?r=B({},XK):s===!1?r=B({},ZK):r=s,Mc(i))return Y1(this.currentUrlTree,i,r);let o=this.parseUrl(i);return Y1(this.currentUrlTree,o,r)}removeEmptyProps(i){return Object.entries(i).reduce((s,[r,o])=>(o!=null&&(s[r]=o),s),{})}scheduleNavigation(i,s,r,o,a){if(this.disposed)return Promise.resolve(!1);let l,c,u;a?(l=a.resolve,c=a.reject,u=a.promise):u=new Promise((f,g)=>{l=f,c=g});let h=this.pendingTasks.add();return YK(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:s,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function e8(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new he(4008,!1)}function t8(e){return!(e instanceof mh)&&!(e instanceof vh)}var n8=new X("");function AO(e,...t){return pt([{provide:gb,multi:!0,useValue:e},[],{provide:Pc,useFactory:i8,deps:[Qt]},{provide:Ec,multi:!0,useFactory:s8},t.map(n=>n.\u0275providers)])}function i8(e){return e.routerState.root}function s8(){let e=U(Ue);return t=>{let n=e.get(ps);if(t!==n.components[0])return;let i=e.get(Qt),s=e.get(r8);e.get(o8)===1&&i.initialNavigation(),e.get(a8,null,Fe.Optional)?.setUpPreloading(),e.get(n8,null,Fe.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}var r8=new X("",{factory:()=>new Le}),o8=new X("",{providedIn:"root",factory:()=>1});var a8=new X("");var kO=(()=>{let t=class t{constructor(i,s){this._renderer=i,this._elementRef=s,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(i,s){this._renderer.setProperty(this._elementRef.nativeElement,i,s)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};t.\u0275fac=function(s){return new(s||t)(J(Er),J(Kt))},t.\u0275dir=Ft({type:t});let e=t;return e})(),LO=(()=>{let t=class t extends kO{};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=_r(t)))(r||t)}})(),t.\u0275dir=Ft({type:t,features:[us]});let e=t;return e})(),Lm=new X("");var l8={provide:Lm,useExisting:wr(()=>qs),multi:!0};function c8(){let e=Rr()?Rr().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var u8=new X(""),qs=(()=>{let t=class t extends kO{constructor(i,s,r){super(i,s),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!c8())}writeValue(i){let s=i??"";this.setProperty("value",s)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};t.\u0275fac=function(s){return new(s||t)(J(Er),J(Kt),J(u8,8))},t.\u0275dir=Ft({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(s,r){s&1&&We("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[fs([l8]),us]});let e=t;return e})();function Mo(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}function VO(e){return e!=null&&typeof e.length=="number"}var Sb=new X(""),_b=new X(""),d8=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Bi=class{static min(t){return h8(t)}static max(t){return f8(t)}static required(t){return p8(t)}static requiredTrue(t){return g8(t)}static email(t){return m8(t)}static minLength(t){return v8(t)}static maxLength(t){return C8(t)}static pattern(t){return y8(t)}static nullValidator(t){return BO(t)}static compose(t){return zO(t)}static composeAsync(t){return qO(t)}};function h8(e){return t=>{if(Mo(t.value)||Mo(e))return null;let n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}function f8(e){return t=>{if(Mo(t.value)||Mo(e))return null;let n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}function p8(e){return Mo(e.value)?{required:!0}:null}function g8(e){return e.value===!0?null:{required:!0}}function m8(e){return Mo(e.value)||d8.test(e.value)?null:{email:!0}}function v8(e){return t=>Mo(t.value)||!VO(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}function C8(e){return t=>VO(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}function y8(e){if(!e)return BO;let t,n;return typeof e=="string"?(n="",e.charAt(0)!=="^"&&(n+="^"),n+=e,e.charAt(e.length-1)!=="$"&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),i=>{if(Mo(i.value))return null;let s=i.value;return t.test(s)?null:{pattern:{requiredPattern:n,actualValue:s}}}}function BO(e){return null}function GO(e){return e!=null}function HO(e){return Pa(e)?Ke(e):e}function UO(e){let t={};return e.forEach(n=>{t=n!=null?B(B({},t),n):t}),Object.keys(t).length===0?null:t}function WO(e,t){return t.map(n=>n(e))}function w8(e){return!e.validate}function jO(e){return e.map(t=>w8(t)?t:n=>t.validate(n))}function zO(e){if(!e)return null;let t=e.filter(GO);return t.length==0?null:function(n){return UO(WO(n,t))}}function $O(e){return e!=null?zO(jO(e)):null}function qO(e){if(!e)return null;let t=e.filter(GO);return t.length==0?null:function(n){let i=WO(n,t).map(HO);return qy(i).pipe(oe(UO))}}function KO(e){return e!=null?qO(jO(e)):null}function MO(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function QO(e){return e._rawValidators}function YO(e){return e._rawAsyncValidators}function vb(e){return e?Array.isArray(e)?e:[e]:[]}function Mm(e,t){return Array.isArray(e)?e.includes(t):e===t}function PO(e,t){let n=vb(t);return vb(e).forEach(s=>{Mm(n,s)||n.push(s)}),n}function FO(e,t){return vb(t).filter(n=>!Mm(e,n))}var Pm=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=$O(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=KO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},kc=class extends Pm{get formDirective(){return null}get path(){return null}},La=class extends Pm{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Fm=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},S8={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},DEe=se(B({},S8),{"[class.ng-submitted]":"isSubmitted"}),Po=(()=>{let t=class t extends Fm{constructor(i){super(i)}};t.\u0275fac=function(s){return new(s||t)(J(La,2))},t.\u0275dir=Ft({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(s,r){s&2&&Eo("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[us]});let e=t;return e})(),Vc=(()=>{let t=class t extends Fm{constructor(i){super(i)}};t.\u0275fac=function(s){return new(s||t)(J(kc,10))},t.\u0275dir=Ft({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(s,r){s&2&&Eo("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[us]});let e=t;return e})();var Dh="VALID",Am="INVALID",Oc="PENDING",Rh="DISABLED";function bb(e){return(Vm(e)?e.validators:e)||null}function _8(e){return Array.isArray(e)?$O(e):e||null}function Eb(e,t){return(Vm(t)?t.asyncValidators:e)||null}function b8(e){return Array.isArray(e)?KO(e):e||null}function Vm(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function JO(e,t,n){let i=e.controls;if(!(t?Object.keys(i):i).length)throw new he(1e3,"");if(!i[n])throw new he(1001,"")}function XO(e,t,n){e._forEachChild((i,s)=>{if(n[s]===void 0)throw new he(1002,"")})}var Lc=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Dh}get invalid(){return this.status===Am}get pending(){return this.status==Oc}get disabled(){return this.status===Rh}get enabled(){return this.status!==Rh}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(PO(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(PO(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(FO(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(FO(t,this._rawAsyncValidators))}hasValidator(t){return Mm(this._rawValidators,t)}hasAsyncValidator(t){return Mm(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Oc,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Rh,this.errors=null,this._forEachChild(i=>{i.disable(se(B({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(se(B({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Dh,this._forEachChild(i=>{i.enable(se(B({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(se(B({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Dh||this.status===Oc)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Rh:Dh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Oc,this._hasOwnPendingAsyncValidator=!0;let n=HO(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,s)=>i&&i._find(s),this)}getError(t,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new H,this.statusChanges=new H}_calculateStatus(){return this._allControlsDisabled()?Rh:this.errors?Am:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Oc)?Oc:this._anyControlsHaveStatus(Am)?Am:Dh}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Vm(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=_8(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=b8(this._rawAsyncValidators)}},xm=class extends Lc{constructor(t,n,i){super(bb(n),Eb(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,i={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){XO(this,!0,t),Object.keys(t).forEach(i=>{JO(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(i=>{let s=this.controls[i];s&&s.patchValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((i,s)=>{i.reset(t?t[s]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,i)=>(t[i]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&t(i,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,i,s)=>((i.enabled||this.disabled)&&(n[s]=i.value),n))}_reduceChildren(t,n){let i=t;return this._forEachChild((s,r)=>{i=n(i,s,r)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Cb=class extends xm{};var Db=new X("CallSetDisabledState",{providedIn:"root",factory:()=>Rb}),Rb="always";function E8(e,t){return[...t.path,e]}function yb(e,t,n=Rb){Tb(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),R8(e,t),I8(e,t),T8(e,t),D8(e,t)}function Om(e,t,n=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),km(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function Nm(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function D8(e,t){if(t.valueAccessor.setDisabledState){let n=i=>{t.valueAccessor.setDisabledState(i)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function Tb(e,t){let n=QO(e);t.validator!==null?e.setValidators(MO(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let i=YO(e);t.asyncValidator!==null?e.setAsyncValidators(MO(i,t.asyncValidator)):typeof i=="function"&&e.setAsyncValidators([i]);let s=()=>e.updateValueAndValidity();Nm(t._rawValidators,s),Nm(t._rawAsyncValidators,s)}function km(e,t){let n=!1;if(e!==null){if(t.validator!==null){let s=QO(e);if(Array.isArray(s)&&s.length>0){let r=s.filter(o=>o!==t.validator);r.length!==s.length&&(n=!0,e.setValidators(r))}}if(t.asyncValidator!==null){let s=YO(e);if(Array.isArray(s)&&s.length>0){let r=s.filter(o=>o!==t.asyncValidator);r.length!==s.length&&(n=!0,e.setAsyncValidators(r))}}}let i=()=>{};return Nm(t._rawValidators,i),Nm(t._rawAsyncValidators,i),n}function R8(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&ZO(e,t)})}function T8(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&ZO(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function ZO(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function I8(e,t){let n=(i,s)=>{t.valueAccessor.writeValue(i),s&&t.viewToModelUpdate(i)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function A8(e,t){e==null,Tb(e,t)}function M8(e,t){return km(e,t)}function eN(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function P8(e){return Object.getPrototypeOf(e.constructor)===LO}function F8(e,t){e._syncPendingControls(),t.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function tN(e,t){if(!t)return null;Array.isArray(t);let n,i,s;return t.forEach(r=>{r.constructor===qs?n=r:P8(r)?i=r:s=r}),s||i||n||null}function x8(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function xO(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function OO(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var Nc=class extends Lc{constructor(t=null,n,i){super(bb(n),Eb(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Vm(n)&&(n.nonNullable||n.initialValueIsDefault)&&(OO(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){xO(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){xO(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){OO(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var O8=e=>e instanceof Nc;var Bc=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275dir=Ft({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let e=t;return e})(),N8={provide:Lm,useExisting:wr(()=>Ib),multi:!0},Ib=(()=>{let t=class t extends LO{writeValue(i){let s=i??"";this.setProperty("value",s)}registerOnChange(i){this.onChange=s=>{i(s==""?null:parseFloat(s))}}};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=_r(t)))(r||t)}})(),t.\u0275dir=Ft({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(s,r){s&1&&We("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[fs([N8]),us]});let e=t;return e})();var Ab=new X(""),k8={provide:La,useExisting:wr(()=>Mb)},Mb=(()=>{let t=class t extends La{set isDisabled(i){}constructor(i,s,r,o,a){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=a,this.update=new H,this._ngModelWarningSent=!1,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=tN(this,r)}ngOnChanges(i){if(this._isControlChanged(i)){let s=i.form.previousValue;s&&Om(s,this,!1),yb(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}eN(i,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Om(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_isControlChanged(i){return i.hasOwnProperty("form")}};t._ngModelWarningSentOnce=!1,t.\u0275fac=function(s){return new(s||t)(J(Sb,10),J(_b,10),J(Lm,10),J(Ab,8),J(Db,8))},t.\u0275dir=Ft({type:t,selectors:[["","formControl",""]],inputs:{form:[rn.None,"formControl","form"],isDisabled:[rn.None,"disabled","isDisabled"],model:[rn.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[fs([k8]),us,an]});let e=t;return e})(),L8={provide:kc,useExisting:wr(()=>Va)},Va=(()=>{let t=class t extends kc{constructor(i,s,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new H,this._setValidators(i),this._setAsyncValidators(s)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(km(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let s=this.form.get(i.path);return yb(s,i,this.callSetDisabledState),s.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),s}getControl(i){return this.form.get(i.path)}removeControl(i){Om(i.control||null,i,!1),x8(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,s){this.form.get(i.path).setValue(s)}onSubmit(i){return this.submitted=!0,F8(this.form,this.directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_updateDomValue(){this.directives.forEach(i=>{let s=i.control,r=this.form.get(i.path);s!==r&&(Om(s||null,i),O8(r)&&(yb(r,i,this.callSetDisabledState),i.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let s=this.form.get(i.path);A8(s,i),s.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let s=this.form.get(i.path);s&&M8(s,i)&&s.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Tb(this.form,this),this._oldForm&&km(this._oldForm,this)}_checkFormPresent(){this.form}};t.\u0275fac=function(s){return new(s||t)(J(Sb,10),J(_b,10),J(Db,8))},t.\u0275dir=Ft({type:t,selectors:[["","formGroup",""]],hostBindings:function(s,r){s&1&&We("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:[rn.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[fs([L8]),us,an]});let e=t;return e})();var V8={provide:La,useExisting:wr(()=>Ba)},Ba=(()=>{let t=class t extends La{set isDisabled(i){}constructor(i,s,r,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new H,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(s),this._setAsyncValidators(r),this.valueAccessor=tN(this,o)}ngOnChanges(i){this._added||this._setUpControl(),eN(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return E8(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};t._ngModelWarningSentOnce=!1,t.\u0275fac=function(s){return new(s||t)(J(kc,13),J(Sb,10),J(_b,10),J(Lm,10),J(Ab,8))},t.\u0275dir=Ft({type:t,selectors:[["","formControlName",""]],inputs:{name:[rn.None,"formControlName","name"],isDisabled:[rn.None,"disabled","isDisabled"],model:[rn.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[fs([V8]),us,an]});let e=t;return e})();var B8=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=Ci({type:t}),t.\u0275inj=vi({});let e=t;return e})(),wb=class extends Lc{constructor(t,n,i){super(bb(n),Eb(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,n={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(t,n,i={}){this.controls.splice(t,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,n={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(t,n,i={}){let s=this._adjustIndex(t);s<0&&(s=0),this.controls[s]&&this.controls[s]._registerOnCollectionChange(()=>{}),this.controls.splice(s,1),n&&(this.controls.splice(s,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,n={}){XO(this,!1,t),t.forEach((i,s)=>{JO(this,!1,s),this.at(s).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(t.forEach((i,s)=>{this.at(s)&&this.at(s).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t=[],n={}){this._forEachChild((i,s)=>{i.reset(t[s],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((n,i)=>i._syncPendingControls()?!0:n,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((n,i)=>{t(n,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(n=>n.enabled&&t(n))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function NO(e){return!!e&&(e.asyncValidators!==void 0||e.validators!==void 0||e.updateOn!==void 0)}var Gc=(()=>{let t=class t{constructor(){this.useNonNullable=!1}get nonNullable(){let i=new t;return i.useNonNullable=!0,i}group(i,s=null){let r=this._reduceControls(i),o={};return NO(s)?o=s:s!==null&&(o.validators=s.validator,o.asyncValidators=s.asyncValidator),new xm(r,o)}record(i,s=null){let r=this._reduceControls(i);return new Cb(r,s)}control(i,s,r){let o={};return this.useNonNullable?(NO(s)?o=s:(o.validators=s,o.asyncValidators=r),new Nc(i,se(B({},o),{nonNullable:!0}))):new Nc(i,s,r)}array(i,s,r){let o=i.map(a=>this._createControl(a));return new wb(o,s,r)}_reduceControls(i){let s={};return Object.keys(i).forEach(r=>{s[r]=this._createControl(i[r])}),s}_createControl(i){if(i instanceof Nc)return i;if(i instanceof Lc)return i;if(Array.isArray(i)){let s=i[0],r=i.length>1?i[1]:null,o=i.length>2?i[2]:null;return this.control(s,r,o)}else return this.control(i)}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Fo=(()=>{let t=class t{static withConfig(i){return{ngModule:t,providers:[{provide:Ab,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:Db,useValue:i.callSetDisabledState??Rb}]}}};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=Ci({type:t}),t.\u0275inj=vi({imports:[B8]});let e=t;return e})();function G8(e,t){if(e&1&&(ds(0),Sr(),$(1,"svg",1),ae(2,"path",2),q(),hs()),e&2){let n=t.$implicit;ce(),Ia("top",n.top)("left",n.left)("width",n.size)("height",n.size)("opacity",n.opacity)}}var Gm=(()=>{let t=class t{constructor(){this.dollarSigns=5,this.minSize=50,this.maxSize=80,this.minOpacity=.05,this.maxOpacity=.15,this.random=!1,this.dollarSignArray=[{top:"70%",left:"25%",size:"200px",opacity:.1},{top:"20%",left:"75%",size:"150px",opacity:.05},{top:"25%",left:"50%",size:"70px",opacity:.15},{top:"60%",left:"40%",size:"80px",opacity:.1}]}ngOnInit(){this.random&&this.generateDollarSigns()}generateDollarSigns(){this.dollarSignArray=Array(this.dollarSigns).fill(null).map(()=>({top:`${this.getRandomNumber(10,90)}%`,left:`${this.getRandomNumber(10,90)}%`,size:`${this.getRandomNumber(this.minSize,this.maxSize)}px`,opacity:this.getRandomNumber(this.minOpacity,this.maxOpacity)}))}getRandomNumber(i,s){return Math.random()*(s-i)+i}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Ee({type:t,selectors:[["app-dollar-sign-svgs"]],inputs:{dollarSigns:"dollarSigns",minSize:"minSize",maxSize:"maxSize",minOpacity:"minOpacity",maxOpacity:"maxOpacity",random:"random"},standalone:!0,features:[De],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["viewBox","0 0 24 24",1,"position-absolute","dollar-sign","z-0"],["fill","#fd7e14","d","M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M11,17H13V16H14A1,1 0 0,0 15,15V12A1,1 0 0,0 14,11H11V10H15V8H13V7H11V8H10A1,1 0 0,0 9,9V12A1,1 0 0,0 10,13H13V14H9V16H11V17Z"]],template:function(s,r){s&1&&tt(0,G8,3,10,"ng-container",0),s&2&&me("ngForOf",r.dollarSignArray)},dependencies:[xt,js],styles:[".dollar-sign[_ngcontent-%COMP%]{pointer-events:none}"]});let e=t;return e})();function H8(e,t){e&1&&(ds(0),Sr(),$(1,"svg",1),ae(2,"path",2),q(),hs())}function U8(e,t){e&1&&(ds(0),Sr(),$(1,"svg",3),ae(2,"path",4),q(),hs())}var Hm=(()=>{let t=class t{constructor(){this.wave="top"}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Ee({type:t,selectors:[["app-wave"]],inputs:{wave:"wave"},standalone:!0,features:[De],decls:2,vars:2,consts:[[4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320",1,"wave-top","z-0"],["fill","#ff9d00","fill-opacity","0.2","d","M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,165.3C1248,171,1344,149,1392,138.7L1440,128L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320",1,"wave-bottom"],["fill","#ff9d00","fill-opacity","0.2","d","M0,224L48,213.3C96,203,192,181,288,181.3C384,181,480,203,576,224C672,245,768,267,864,250.7C960,235,1056,181,1152,165.3C1248,149,1344,171,1392,181.3L1440,192L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"]],template:function(s,r){s&1&&tt(0,H8,3,0,"ng-container",0)(1,U8,3,0,"ng-container",0),s&2&&(me("ngIf",r.wave==="top"),ce(),me("ngIf",r.wave==="bottom"))},dependencies:[xt,Li],styles:[".wave-top[_ngcontent-%COMP%], .wave-bottom[_ngcontent-%COMP%]{position:absolute;width:100%}.wave-top[_ngcontent-%COMP%]{top:0}.wave-bottom[_ngcontent-%COMP%]{bottom:0}"]});let e=t;return e})();var Um=(()=>{let t=class t{constructor(){this.size=250}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Ee({type:t,selectors:[["app-loader"]],inputs:{size:"size"},standalone:!0,features:[De],decls:4,vars:2,consts:[["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24"],["d","M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M11,17H13V16H14A1,1 0 0,0 15,15V12A1,1 0 0,0 14,11H11V10H15V8H13V7H11V8H10A1,1 0 0,0 9,9V12A1,1 0 0,0 10,13H13V14H9V16H11V17Z",1,"loader"]],template:function(s,r){s&1&&(Sr(),$(0,"svg",0)(1,"style"),_e(2," @keyframes spin { 0% { transform: rotate(0deg) scale(1); } 25% { transform: rotate(90deg) scale(1.1); } 50% { transform: rotate(180deg) scale(1); } 75% { transform: rotate(270deg) scale(1.1); } 100% { transform: rotate(360deg) scale(1); } } .loader { animation: spin 2s linear infinite; transform-origin: center; fill: #fd7e14; stroke: #000000; stroke-width: 0.5; } "),q(),ae(3,"path",1),q()),s&2&&Ta("width",r.size)("height",r.size)},styles:["svg[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}"]});let e=t;return e})();var W8="firebase",j8="10.12.3";ge(W8,j8,"app");var Tt=new yr("ANGULARFIRE2_VERSION"),Uc=e=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${e} in the constructor, first ensure that ${e} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${e})\`.`;function In(e,t,n){if(t){if(t.length===1)return t[0];let r=t.filter(o=>o.app===n);if(r.length===1)return r[0]}return n.container.getProvider(e).getImmediate({optional:!0})}var bn=(e,t)=>{let n=t?[t]:pp(),i=[];return n.forEach(s=>{s.container.getProvider(e).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},zn=class{constructor(){return bn(z8)}},z8="app-check";function Hc(){}var Wm=class{zone;delegate;constructor(t,n=jy){this.zone=t,this.delegate=n}now(){return this.delegate.now()}schedule(t,n,i){let s=this.zone,r=function(o){s.runGuarded(()=>{t.apply(this,[o])})};return this.delegate.schedule(r,n,i)}},Pb=class{zone;task=null;constructor(t){this.zone=t}call(t,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Hc,{},Hc,Hc)),n.pipe(nt({next:i,complete:i,error:i})).subscribe(t).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Vt=(()=>{class e{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Wm(Zone.current)),this.insideAngular=n.run(()=>new Wm(Zone.current,Fi)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||e)(Y(ue))};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function jm(){let e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return e}function $8(e){return jm().ngZone.runOutsideAngular(()=>e())}function Ga(e){return jm().ngZone.run(()=>e())}function Fb(e){return q8(jm())(e)}function q8(e){return function(n){return n=n.lift(new Pb(e.ngZone)),n.pipe(xi(e.outsideAngular),fi(e.insideAngular))}}var K8=(e,t)=>function(){let i=arguments;return t&&setTimeout(()=>{t.state==="scheduled"&&t.invoke()},10),Ga(()=>e.apply(void 0,i))},Oe=(e,t)=>function(){let n,i=arguments;for(let r=0;r<arguments.length;r++)typeof i[r]=="function"&&(t&&(n||=Ga(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Hc,{},Hc,Hc))),i[r]=K8(i[r],n));let s=$8(()=>e.apply(this,i));if(!t)if(s instanceof re){let r=jm();return s.pipe(xi(r.outsideAngular),fi(r.insideAngular))}else return Ga(()=>s);return s instanceof re?s.pipe(Fb):s instanceof Promise?Ga(()=>new Promise((r,o)=>s.then(a=>Ga(()=>r(a)),a=>Ga(()=>o(a))))):typeof s=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),s.apply(this,arguments)}:Ga(()=>s)};var Ot=class{constructor(t){return t}},Yt=class{constructor(){return pp()}};function Y8(e){return e&&e.length===1?e[0]:new Ot(nn())}var xb=new X("angularfire2._apps"),J8={provide:Ot,useFactory:Y8,deps:[[new Me,xb]]},X8={provide:Yt,deps:[[new Me,xb]]};function Z8(e){return(t,n)=>{let i=n.get(ln);ge("angularfire",Tt.full,"core"),ge("angularfire",Tt.full,"app"),ge("angular",d_.full,i.toString());let s=t.runOutsideAngular(()=>e(n));return new Ot(s)}}function nN(e,...t){return pt([J8,X8,{provide:xb,useFactory:Z8(e),multi:!0,deps:[ue,Ue,Vt,...t]}])}var iN=Oe(CM,!0);function rN(e){return new re(function(t){var n=mp(e,t.next.bind(t),t.error.bind(t),t.complete.bind(t));return{unsubscribe:n}})}function oN(e){return new re(function(t){var n=gp(e,t.next.bind(t),t.error.bind(t),t.complete.bind(t));return{unsubscribe:n}})}var aN="auth",Gi=class{constructor(t){return t}},gs=class{constructor(){return bn(aN)}};var Ob=new X("angularfire2.auth-instances");function q9(e,t){let n=In(aN,e,t);return n&&new Gi(n)}function K9(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new Gi(i)}}var Q9={provide:gs,deps:[[new Me,Ob]]},Y9={provide:Gi,useFactory:q9,deps:[[new Me,Ob],Ot]};function lN(e,...t){return ge("angularfire",Tt.full,"auth"),pt([Y9,Q9,{provide:Ob,useFactory:K9(e),multi:!0,deps:[ue,Ue,Vt,Yt,[new Me,zn],...t]}])}var Th=Oe(rN,!0),cN=Oe(oN,!0);var uN=Oe(Ay,!0);var dN=Oe(Fy,!0);var hN=Oe(My,!0);var fN=Oe(Py,!0);var J9=new Map,X9={activated:!1,tokenObservers:[]},Z9={initialized:!1,enabled:!1};function ms(e){return J9.get(e)||Object.assign({},X9)}function CN(){return Z9}var e7="https://content-firebaseappcheck.googleapis.com/v1";var t7="exchangeDebugToken",pN={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},ZDe=24*60*60*1e3;var Lb=class{constructor(t,n,i,s,r){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=s,this.upperBound=r,this.pending=null,this.nextErrorWaitInterval=s,s>r)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return F(this,null,function*(){this.stop();try{this.pending=new Wl,this.pending.promise.catch(n=>{}),yield n7(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new Wl,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function n7(e){return new Promise(t=>{setTimeout(t,e)})}var i7={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},xo=new Fs("appCheck","AppCheck",i7);function yN(e){if(!ms(e).activated)throw xo.create("use-before-activation",{appName:e.name})}function wN(i,s){return F(this,arguments,function*({url:e,body:t},n){let r={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){let g=yield o.getHeartbeatsHeader();g&&(r["X-Firebase-Client"]=g)}let a={method:"POST",body:JSON.stringify(t),headers:r},l;try{l=yield fetch(e,a)}catch(g){throw xo.create("fetch-network-error",{originalErrorMessage:g?.message})}if(l.status!==200)throw xo.create("fetch-status-error",{httpStatus:l.status});let c;try{c=yield l.json()}catch(g){throw xo.create("fetch-parse-error",{originalErrorMessage:g?.message})}let u=c.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw xo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let h=Number(u[1])*1e3,f=Date.now();return{token:c.token,expireTimeMillis:f+h,issuedAtTimeMillis:f}})}function SN(e,t){let{projectId:n,appId:i,apiKey:s}=e.options;return{url:`${e7}/projects/${n}/apps/${i}:${t7}?key=${s}`,body:{debug_token:t}}}var s7="firebase-app-check-database",r7=1,Vb="firebase-app-check-store";var zm=null;function o7(){return zm||(zm=new Promise((e,t)=>{try{let n=indexedDB.open(s7,r7);n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{var s;t(xo.create("storage-open",{originalErrorMessage:(s=i.target.error)===null||s===void 0?void 0:s.message}))},n.onupgradeneeded=i=>{let s=i.target.result;switch(i.oldVersion){case 0:s.createObjectStore(Vb,{keyPath:"compositeKey"})}}}catch(n){t(xo.create("storage-open",{originalErrorMessage:n?.message}))}}),zm)}function a7(e,t){return l7(c7(e),t)}function l7(e,t){return F(this,null,function*(){let i=(yield o7()).transaction(Vb,"readwrite"),r=i.objectStore(Vb).put({compositeKey:e,value:t});return new Promise((o,a)=>{r.onsuccess=l=>{o()},i.onerror=l=>{var c;a(xo.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})})}function c7(e){return`${e.options.appId}-${e.name}`}var Bb=new Os("@firebase/app-check");function kb(e,t){return is()?a7(e,t).catch(n=>{Bb.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function _N(){return CN().enabled}function bN(){return F(this,null,function*(){let e=CN();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var u7={error:"UNKNOWN_ERROR"};function d7(e){return dp.encodeString(JSON.stringify(e),!1)}function Gb(e,t=!1){return F(this,null,function*(){let n=e.app;yN(n);let i=ms(n),s=i.token,r;if(s&&!Ih(s)&&(i.token=void 0,s=void 0),!s){let l=yield i.cachedTokenPromise;l&&(Ih(l)?s=l:yield kb(n,void 0))}if(!t&&s&&Ih(s))return{token:s.token};let o=!1;if(_N()){i.exchangeTokenPromise||(i.exchangeTokenPromise=wN(SN(n,yield bN()),e.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);let l=yield i.exchangeTokenPromise;return yield kb(n,l),i.token=l,{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),s=yield ms(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?Bb.warn(l.message):Bb.error(l),r=l}let a;return s?r?Ih(s)?a={token:s.token,internalError:r}:a=mN(r):(a={token:s.token},i.token=s,yield kb(n,s)):a=mN(r),o&&g7(n,a),a})}function h7(e){return F(this,null,function*(){let t=e.app;yN(t);let{provider:n}=ms(t);if(_N()){let i=yield bN(),{token:s}=yield wN(SN(t,i),e.heartbeatServiceProvider);return{token:s}}else{let{token:i}=yield n.getToken();return{token:i}}})}function f7(e,t,n,i){let{app:s}=e,r=ms(s),o={next:n,error:i,type:t};if(r.tokenObservers=[...r.tokenObservers,o],r.token&&Ih(r.token)){let a=r.token;Promise.resolve().then(()=>{n({token:a.token}),gN(e)}).catch(()=>{})}r.cachedTokenPromise.then(()=>gN(e))}function EN(e,t){let n=ms(e),i=n.tokenObservers.filter(s=>s.next!==t);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function gN(e){let{app:t}=e,n=ms(t),i=n.tokenRefresher;i||(i=p7(e),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function p7(e){let{app:t}=e;return new Lb(()=>F(this,null,function*(){let n=ms(t),i;if(n.token?i=yield Gb(e,!0):i=yield Gb(e),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=ms(t);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,s=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,s),Math.max(0,i-Date.now())}else return 0},pN.RETRIAL_MIN_WAIT,pN.RETRIAL_MAX_WAIT)}function g7(e,t){let n=ms(e).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&t.error!=null?i.error(t.error):i.next(t)}catch{}}function Ih(e){return e.expireTimeMillis-Date.now()>0}function mN(e){return{token:d7(u7),error:e}}var Hb=class{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:t}=ms(this.app);for(let n of t)EN(this.app,n.next);return Promise.resolve()}};function m7(e,t){return new Hb(e,t)}function v7(e){return{getToken:t=>Gb(e,t),getLimitedUseToken:()=>h7(e),addTokenListener:t=>f7(e,"INTERNAL",t),removeTokenListener:t=>EN(e.app,t)}}var C7="@firebase/app-check",y7="0.8.5";var w7="app-check",vN="app-check-internal";function S7(){Et(new bt(w7,e=>{let t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return m7(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(vN).initialize()})),Et(new bt(vN,e=>{let t=e.getProvider("app-check").getImmediate();return v7(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),ge(C7,y7)}S7();var _7=["localhost","0.0.0.0","127.0.0.1"],dRe=typeof window<"u"&&_7.includes(window.location.hostname);var E7="firebase",D7="10.12.3";la.registerVersion(E7,D7,"app-compat");var R7=["ngOnDestroy"],RN=(e,t,n,i={})=>new Proxy(e,{get:(s,r)=>n.runOutsideAngular(()=>{if(e[r])return i?.spy?.get&&i.spy.get(r,e[r]),e[r];if(R7.indexOf(r)>-1)return()=>{};let o=t.toPromise().then(a=>{let l=a?.[r];return typeof l=="function"?l.bind(a):l?.then?l.then(c=>n.run(()=>c)):n.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(u=>{let h=u?.(...c);return i?.spy?.apply&&i.spy.apply(r,c,h),h})})})});var Ub=class{constructor(t){return t}},$m=new X("angularfire2.app.options"),TN=new X("angularfire2.app.name");function IN(e,t,n){let i=typeof n=="string"&&n||"[DEFAULT]",s=typeof n=="object"&&n||{};s.name=s.name||i;let o=la.apps.filter(a=>a&&a.name===s.name)[0]||t.runOutsideAngular(()=>la.initializeApp(e,s));try{if(JSON.stringify(e)!==JSON.stringify(o.options)){let a=!!module.hot;T7("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Ub(o)}var T7=(e,...t)=>{p_()&&typeof console<"u"&&console[e](...t)};function AN(e,t,n,i,s){let[,r,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===e)||[];if(r)return I7(s,o)||(DN("error",`${t} was already initialized on the ${n} Firebase App with different settings.${A7?" You may need to reload as Firebase is not HMR aware.":""}`),DN("warn",{is:s,was:o})),r;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([e,a,s]),a}}function I7(e,t){try{return e.toString()===t.toString()}catch{return e===t}}var A7=typeof module<"u"&&!!module.hot,DN=(e,...t)=>{p_()&&typeof console<"u"&&console[e](...t)};globalThis.\u0275AngularfireInstanceCache||=[];var M7=new X("angularfire2.auth.use-emulator"),P7=new X("angularfire2.auth.settings"),F7=new X("angularfire2.auth.tenant-id"),x7=new X("angularfire2.auth.langugage-code"),O7=new X("angularfire2.auth.use-device-language"),N7=new X("angularfire.auth.persistence"),k7=(e,t,n,i,s,r,o,a)=>AN(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{let l=t.runOutsideAngular(()=>e.auth());if(n&&l.useEmulator(...n),i&&(l.tenantId=i),l.languageCode=s,r&&l.useDeviceLanguage(),o)for(let[c,u]of Object.entries(o))l.settings[c]=u;return a&&l.setPersistence(a),l},[n,i,s,r,o,a]),Wc=(()=>{class e{authState;idToken;user;idTokenResult;credential;constructor(n,i,s,r,o,a,l,c,u,h,f,g){let v=new Le,y=ee(void 0).pipe(fi(o.outsideAngular),Ge(()=>r.runOutsideAngular(()=>import("./chunk-NRXGYUBU.js"))),oe(()=>IN(n,r,i)),oe(C=>k7(C,r,a,c,u,h,l,f)),Kp({bufferSize:1,refCount:!1}));if(Tr(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ee(null);else{y.pipe(pi()).subscribe();let C=y.pipe(Ge(T=>T.getRedirectResult().then(x=>x,()=>null)),Fb,Kp({bufferSize:1,refCount:!1})),E=y.pipe(Ge(T=>new re(x=>({unsubscribe:r.runOutsideAngular(()=>T.onAuthStateChanged(z=>x.next(z),z=>x.error(z),()=>x.complete()))})))),I=y.pipe(Ge(T=>new re(x=>({unsubscribe:r.runOutsideAngular(()=>T.onIdTokenChanged(z=>x.next(z),z=>x.error(z),()=>x.complete()))}))));this.authState=C.pipe(Qp(E),xi(o.outsideAngular),fi(o.insideAngular)),this.user=C.pipe(Qp(I),xi(o.outsideAngular),fi(o.insideAngular)),this.idToken=this.user.pipe(Ge(T=>T?Ke(T.getIdToken()):ee(null))),this.idTokenResult=this.user.pipe(Ge(T=>T?Ke(T.getIdTokenResult()):ee(null))),this.credential=Up(C,v,this.authState.pipe(ft(T=>!T))).pipe(oe(T=>T?.user?T:null),xi(o.outsideAngular),fi(o.insideAngular))}return RN(this,y,r,{spy:{apply:(C,E,I)=>{(C.startsWith("signIn")||C.startsWith("createUser"))&&I.then(T=>v.next(T))}}})}static \u0275fac=function(i){return new(i||e)(Y($m),Y(TN,8),Y(ln),Y(ue),Y(Vt),Y(M7,8),Y(P7,8),Y(F7,8),Y(x7,8),Y(O7,8),Y(N7,8),Y(zn,8))};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})();var Hi=(()=>{let t=class t{constructor(i,s,r){this.firebaseAuth=i,this.router=s,this.fireAuth=r,this.user$=cN(this.firebaseAuth),this.currentUserSig=Kx(void 0)}register(i,s,r){let o=uN(this.firebaseAuth,i,s).then(a=>fN(a.user,{displayName:r}));return Ke(o)}login(i,s){let r=hN(this.firebaseAuth,i,s).then(()=>{});return Ke(r)}logout(){this.firebaseAuth.signOut().then(()=>{this.currentUserSig.set(null),this.router.navigateByUrl("/login")})}googleSignIn(){return this.fireAuth.signInWithPopup(new Iy).then(i=>{this.router.navigate(["/dashboard"]),localStorage.setItem("token",JSON.stringify(i.user?.uid))},i=>{console.log(i)})}facebookSignIn(){return this.fireAuth.signInWithPopup(new Ty).then(i=>{this.router.navigate(["/dashboard"]),localStorage.setItem("token",JSON.stringify(i.user?.uid))},i=>{console.log(i)})}};t.\u0275fac=function(s){return new(s||t)(Y(Gi),Y(Qt),Y(Wc))},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var MN=(()=>{let t=class t{constructor(i){this.authService=i}googleSignIn(){this.authService.googleSignIn()}facebookSignIn(){this.authService.facebookSignIn()}};t.\u0275fac=function(s){return new(s||t)(J(Hi))},t.\u0275cmp=Ee({type:t,selectors:[["app-platform-buttons"]],standalone:!0,features:[De],decls:4,vars:0,consts:[[1,"w-100","shadow-none","platform-signup-button","mb-2",3,"click"],[1,"bi","bi-google"],[1,"ms-2"]],template:function(s,r){s&1&&($(0,"button",0),We("click",function(){return r.googleSignIn()}),ae(1,"i",1),$(2,"span",2),_e(3,"Sign in with Google"),q()())}});let e=t;return e})();var PN=(()=>{let t=class t{constructor(i){this.platformId=i}isBrowser(){return S_(this.platformId)}isServer(){return Tr(this.platformId)}};t.\u0275fac=function(s){return new(s||t)(Y(ln))},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function V7(e,t){e&1&&($(0,"div"),ae(1,"app-loader"),q())}function B7(e,t){if(e&1&&($(0,"div",22),_e(1),q()),e&2){let n=it(2);ce(),Sn(" ",n.error," ")}}function G7(e,t){if(e&1){let n=cn();ae(0,"app-wave",2),$(1,"div",3),ae(2,"app-dollar-sign-svgs",2),$(3,"form",4),We("ngSubmit",function(){Dt(n);let s=it();return Rt(s.login())}),$(4,"div",5)(5,"div",6)(6,"h1",7),_e(7,"Login"),q(),$(8,"h5",8),_e(9,"Please sign in to continue"),q(),$(10,"div",9),ae(11,"app-platform-buttons"),$(12,"div",10),ae(13,"hr",11),$(14,"span",12),_e(15,"or"),q()(),ae(16,"input",13),q(),$(17,"div",14),ae(18,"input",15),q(),$(19,"button",16),_e(20," Login "),ae(21,"i",17),q(),$(22,"div",18)(23,"a",19),We("click",function(){Dt(n);let s=it();return Rt(s.navigateToRegister())}),_e(24,"Sign Up"),q()(),tt(25,B7,2,1,"div",20),q()()()(),ae(26,"app-wave",21)}if(e&2){let n=it();ce(3),me("formGroup",n.loginForm),ce(22),me("ngIf",n.error),ce(),me("wave","bottom")}}var FN=(()=>{let t=class t{constructor(i,s,r,o){this.fb=i,this.auth=s,this.router=r,this.platformService=o,this.isLoading=!0,this.loginForm=this.fb.nonNullable.group({email:[""],password:[""]}),this.error=null,this.platformService.isBrowser()&&(this.isLoading=!1)}login(){this.isLoading=!0;let i=this.loginForm.getRawValue();this.auth.login(i.email,i.password).subscribe({next:()=>this.router.navigateByUrl("/dashboard"),error:s=>{this.error=s.message,this.isLoading=!1},complete:()=>{this.isLoading=!1}})}navigateToRegister(){this.router.navigateByUrl("/register")}};t.\u0275fac=function(s){return new(s||t)(J(Gc),J(Hi),J(Qt),J(PN))},t.\u0275cmp=Ee({type:t,selectors:[["app-login"]],standalone:!0,features:[De],decls:3,vars:2,consts:[["loginFormTemplate",""],[4,"ngIf","ngIfElse"],[1,"z-0"],[1,"container-fluid","vh-100","d-flex","flex-column","align-items-center","justify-content-center","bg-light","z-n1"],[1,"z-3",3,"ngSubmit","formGroup"],[1,"d-flex","justify-content-center","align-items-center"],[1,"row","col-11","col-md-9","col-lg-7","col-xl-5"],[1,"fs-1","fw-bolder","text-start"],[1,"fs-6","text-muted","mb-4"],[1,"mb-0"],[1,"position-relative","text-center","my-4"],[1,"m-0"],[1,"position-absolute","top-50","start-50","translate-middle","bg-light","px-2"],["id","email","type","email","formControlName","email","placeholder","Email",1,"email","w-100","shadow-none"],[1,"mb-4","position-relative"],["id","password","type","password","formControlName","password","placeholder","Password",1,"password","w-100"],["type","submit",1,"col-4","offset-8","btn","btn-warning","text-white","mb-3"],[1,"bi","bi-arrow-right"],[1,"text-end"],["role","button",1,"text-decoration-none","hyperlink",3,"click"],["class","text-danger",4,"ngIf"],[1,"z-0",3,"wave"],[1,"text-danger"]],template:function(s,r){if(s&1&&tt(0,V7,2,0,"div",1)(1,G7,27,3,"ng-template",null,0,Ma),s&2){let o=eh(2);me("ngIf",r.isLoading)("ngIfElse",o)}},dependencies:[xt,Li,Fo,Bc,qs,Po,Vc,Va,Ba,Gm,Hm,Um,MN],styles:["svg[_ngcontent-%COMP%]{pointer-events:none}.email[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px;border-bottom:none}.password[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px}"]});let e=t;return e})();var xN=(()=>{let t=class t{constructor(i,s,r){this.fb=i,this.authService=s,this.router=r,this.registerForm=this.fb.nonNullable.group({email:["",Bi.required],username:["",Bi.required],password:["",Bi.required]}),this.error=null}register(){console.log(this.registerForm.value);let i=this.registerForm.getRawValue();this.authService.register(i.email,i.password,i.username).subscribe({next:()=>this.router.navigate(["/login"]),error:s=>{this.error=s.code}})}navigateToLogin(){this.router.navigateByUrl("/login")}};t.\u0275fac=function(s){return new(s||t)(J(Gc),J(Hi),J(Qt))},t.\u0275cmp=Ee({type:t,selectors:[["app-register"]],standalone:!0,features:[De],decls:23,vars:2,consts:[[1,"z-0"],[1,"container-fluid","vh-100","d-flex","flex-column","align-items-center","justify-content-center","bg-light","z-n1"],[1,"z-3",3,"ngSubmit","formGroup"],[1,"d-flex","justify-content-center","align-items-center"],[1,"row","col-11","col-md-9","col-lg-7","col-xl-5"],[1,"fs-1","fw-bolder","text-start"],[1,"fs-6","text-muted","mb-4"],[1,"mb-0"],["id","email","type","email","formControlName","email","placeholder","Email",1,"email","w-100","shadow-none"],[1,"mb-0","position-relative"],["id","username","type","text","formControlName","username","placeholder","Username",1,"username","w-100"],[1,"mb-4","position-relative"],["id","password","type","password","formControlName","password","placeholder","Password",1,"password","w-100"],["type","submit",1,"col-4","offset-8","btn","btn-warning","text-white","mb-3"],[1,"bi","bi-arrow-right"],[1,"text-end"],["role","button",1,"text-decoration-none",2,"color","#fd7e14",3,"click"],[1,"z-0",3,"wave"]],template:function(s,r){s&1&&(ae(0,"app-wave",0),$(1,"div",1),ae(2,"app-dollar-sign-svgs",0),$(3,"form",2),We("ngSubmit",function(){return r.register()}),$(4,"div",3)(5,"div",4)(6,"h1",5),_e(7,"Register"),q(),$(8,"h5",6),_e(9,"Please sign up to continue"),q(),$(10,"div",7),ae(11,"input",8),q(),$(12,"div",9),ae(13,"input",10),q(),$(14,"div",11),ae(15,"input",12),q(),$(16,"button",13),_e(17," Register "),ae(18,"i",14),q(),$(19,"div",15)(20,"a",16),We("click",function(){return r.navigateToLogin()}),_e(21,"Login"),q()()()()()(),ae(22,"app-wave",17)),s&2&&(ce(3),me("formGroup",r.registerForm),ce(19),me("wave","bottom"))},dependencies:[Fo,Bc,qs,Po,Vc,Va,Ba,Hm,Gm],styles:[".email[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px;border-bottom:none}.password[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px;border-top:none}"]});let e=t;return e})();var H7=(()=>{let t=class t{constructor(i,s){this.auth=i,this.router=s}canActivate(){return Th(this.auth).pipe(Pt(1),oe(i=>i?!0:(this.router.navigate(["/login"]),!1)))}};t.\u0275fac=function(s){return new(s||t)(Y(Gi),Y(Qt))},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),U7=(()=>{let t=class t{constructor(i,s){this.auth=i,this.router=s}canActivate(){return Th(this.auth).pipe(Pt(1),oe(i=>i?(this.router.navigate(["/dashboard"]),!1):!0))}};t.\u0275fac=function(s){return new(s||t)(Y(Gi),Y(Qt))},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),ON=(e,t)=>U(H7).canActivate(),qm=(e,t)=>U(U7).canActivate();var Bt="top",En="bottom",un="right",Jt="left",Km="auto",Oo=[Bt,En,un,Jt],Ar="start",Ha="end",NN="clippingParents",Qm="viewport",zc="popper",kN="reference",jb=Oo.reduce(function(e,t){return e.concat([t+"-"+Ar,t+"-"+Ha])},[]),Ym=[].concat(Oo,[Km]).reduce(function(e,t){return e.concat([t,t+"-"+Ar,t+"-"+Ha])},[]),W7="beforeRead",j7="read",z7="afterRead",$7="beforeMain",q7="main",K7="afterMain",Q7="beforeWrite",Y7="write",J7="afterWrite",LN=[W7,j7,z7,$7,q7,K7,Q7,Y7,J7];function dn(e){return e?(e.nodeName||"").toLowerCase():null}function Ct(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Ui(e){var t=Ct(e).Element;return e instanceof t||e instanceof Element}function Xt(e){var t=Ct(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function $c(e){if(typeof ShadowRoot>"u")return!1;var t=Ct(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function X7(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var i=t.styles[n]||{},s=t.attributes[n]||{},r=t.elements[n];!Xt(r)||!dn(r)||(Object.assign(r.style,i),Object.keys(s).forEach(function(o){var a=s[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function Z7(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(i){var s=t.elements[i],r=t.attributes[i]||{},o=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:n[i]),a=o.reduce(function(l,c){return l[c]="",l},{});!Xt(s)||!dn(s)||(Object.assign(s.style,a),Object.keys(r).forEach(function(l){s.removeAttribute(l)}))})}}var VN={name:"applyStyles",enabled:!0,phase:"write",fn:X7,effect:Z7,requires:["computeStyles"]};function hn(e){return e.split("-")[0]}var vs=Math.max,Ua=Math.min,Mr=Math.round;function qc(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Ah(){return!/^((?!chrome|android).)*safari/i.test(qc())}function Wi(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=e.getBoundingClientRect(),s=1,r=1;t&&Xt(e)&&(s=e.offsetWidth>0&&Mr(i.width)/e.offsetWidth||1,r=e.offsetHeight>0&&Mr(i.height)/e.offsetHeight||1);var o=Ui(e)?Ct(e):window,a=o.visualViewport,l=!Ah()&&n,c=(i.left+(l&&a?a.offsetLeft:0))/s,u=(i.top+(l&&a?a.offsetTop:0))/r,h=i.width/s,f=i.height/r;return{width:h,height:f,top:u,right:c+h,bottom:u+f,left:c,x:c,y:u}}function Wa(e){var t=Wi(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function Mh(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&$c(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function $n(e){return Ct(e).getComputedStyle(e)}function zb(e){return["table","td","th"].indexOf(dn(e))>=0}function Dn(e){return((Ui(e)?e.ownerDocument:e.document)||window.document).documentElement}function Pr(e){return dn(e)==="html"?e:e.assignedSlot||e.parentNode||($c(e)?e.host:null)||Dn(e)}function BN(e){return!Xt(e)||$n(e).position==="fixed"?null:e.offsetParent}function eQ(e){var t=/firefox/i.test(qc()),n=/Trident/i.test(qc());if(n&&Xt(e)){var i=$n(e);if(i.position==="fixed")return null}var s=Pr(e);for($c(s)&&(s=s.host);Xt(s)&&["html","body"].indexOf(dn(s))<0;){var r=$n(s);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||t&&r.willChange==="filter"||t&&r.filter&&r.filter!=="none")return s;s=s.parentNode}return null}function Cs(e){for(var t=Ct(e),n=BN(e);n&&zb(n)&&$n(n).position==="static";)n=BN(n);return n&&(dn(n)==="html"||dn(n)==="body"&&$n(n).position==="static")?t:n||eQ(e)||t}function ja(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function za(e,t,n){return vs(e,Ua(t,n))}function GN(e,t,n){var i=za(e,t,n);return i>n?n:i}function Ph(){return{top:0,right:0,bottom:0,left:0}}function Fh(e){return Object.assign({},Ph(),e)}function xh(e,t){return t.reduce(function(n,i){return n[i]=e,n},{})}var tQ=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,Fh(typeof t!="number"?t:xh(t,Oo))};function nQ(e){var t,n=e.state,i=e.name,s=e.options,r=n.elements.arrow,o=n.modifiersData.popperOffsets,a=hn(n.placement),l=ja(a),c=[Jt,un].indexOf(a)>=0,u=c?"height":"width";if(!(!r||!o)){var h=tQ(s.padding,n),f=Wa(r),g=l==="y"?Bt:Jt,v=l==="y"?En:un,y=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],C=o[l]-n.rects.reference[l],E=Cs(r),I=E?l==="y"?E.clientHeight||0:E.clientWidth||0:0,T=y/2-C/2,x=h[g],z=I-f[u]-h[v],V=I/2-f[u]/2+T,b=za(x,V,z),S=l;n.modifiersData[i]=(t={},t[S]=b,t.centerOffset=b-V,t)}}function iQ(e){var t=e.state,n=e.options,i=n.element,s=i===void 0?"[data-popper-arrow]":i;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||Mh(t.elements.popper,s)&&(t.elements.arrow=s))}var $b={name:"arrow",enabled:!0,phase:"main",fn:nQ,effect:iQ,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ji(e){return e.split("-")[1]}var sQ={top:"auto",right:"auto",bottom:"auto",left:"auto"};function rQ(e,t){var n=e.x,i=e.y,s=t.devicePixelRatio||1;return{x:Mr(n*s)/s||0,y:Mr(i*s)/s||0}}function HN(e){var t,n=e.popper,i=e.popperRect,s=e.placement,r=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,h=e.isFixed,f=o.x,g=f===void 0?0:f,v=o.y,y=v===void 0?0:v,C=typeof u=="function"?u({x:g,y}):{x:g,y};g=C.x,y=C.y;var E=o.hasOwnProperty("x"),I=o.hasOwnProperty("y"),T=Jt,x=Bt,z=window;if(c){var V=Cs(n),b="clientHeight",S="clientWidth";if(V===Ct(n)&&(V=Dn(n),$n(V).position!=="static"&&a==="absolute"&&(b="scrollHeight",S="scrollWidth")),V=V,s===Bt||(s===Jt||s===un)&&r===Ha){x=En;var _=h&&V===z&&z.visualViewport?z.visualViewport.height:V[b];y-=_-i.height,y*=l?1:-1}if(s===Jt||(s===Bt||s===En)&&r===Ha){T=un;var R=h&&V===z&&z.visualViewport?z.visualViewport.width:V[S];g-=R-i.width,g*=l?1:-1}}var A=Object.assign({position:a},c&&sQ),M=u===!0?rQ({x:g,y},Ct(n)):{x:g,y};if(g=M.x,y=M.y,l){var D;return Object.assign({},A,(D={},D[x]=I?"0":"",D[T]=E?"0":"",D.transform=(z.devicePixelRatio||1)<=1?"translate("+g+"px, "+y+"px)":"translate3d("+g+"px, "+y+"px, 0)",D))}return Object.assign({},A,(t={},t[x]=I?y+"px":"",t[T]=E?g+"px":"",t.transform="",t))}function oQ(e){var t=e.state,n=e.options,i=n.gpuAcceleration,s=i===void 0?!0:i,r=n.adaptive,o=r===void 0?!0:r,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:hn(t.placement),variation:ji(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,HN(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,HN(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var UN={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:oQ,data:{}};var Jm={passive:!0};function aQ(e){var t=e.state,n=e.instance,i=e.options,s=i.scroll,r=s===void 0?!0:s,o=i.resize,a=o===void 0?!0:o,l=Ct(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&c.forEach(function(u){u.addEventListener("scroll",n.update,Jm)}),a&&l.addEventListener("resize",n.update,Jm),function(){r&&c.forEach(function(u){u.removeEventListener("scroll",n.update,Jm)}),a&&l.removeEventListener("resize",n.update,Jm)}}var WN={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:aQ,data:{}};var lQ={left:"right",right:"left",bottom:"top",top:"bottom"};function Kc(e){return e.replace(/left|right|bottom|top/g,function(t){return lQ[t]})}var cQ={start:"end",end:"start"};function Xm(e){return e.replace(/start|end/g,function(t){return cQ[t]})}function $a(e){var t=Ct(e),n=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:n,scrollTop:i}}function qa(e){return Wi(Dn(e)).left+$a(e).scrollLeft}function qb(e,t){var n=Ct(e),i=Dn(e),s=n.visualViewport,r=i.clientWidth,o=i.clientHeight,a=0,l=0;if(s){r=s.width,o=s.height;var c=Ah();(c||!c&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:a+qa(e),y:l}}function Kb(e){var t,n=Dn(e),i=$a(e),s=(t=e.ownerDocument)==null?void 0:t.body,r=vs(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=vs(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-i.scrollLeft+qa(e),l=-i.scrollTop;return $n(s||n).direction==="rtl"&&(a+=vs(n.clientWidth,s?s.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function Ka(e){var t=$n(e),n=t.overflow,i=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+i)}function Zm(e){return["html","body","#document"].indexOf(dn(e))>=0?e.ownerDocument.body:Xt(e)&&Ka(e)?e:Zm(Pr(e))}function No(e,t){var n;t===void 0&&(t=[]);var i=Zm(e),s=i===((n=e.ownerDocument)==null?void 0:n.body),r=Ct(i),o=s?[r].concat(r.visualViewport||[],Ka(i)?i:[]):i,a=t.concat(o);return s?a:a.concat(No(Pr(o)))}function Qc(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function uQ(e,t){var n=Wi(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function jN(e,t,n){return t===Qm?Qc(qb(e,n)):Ui(t)?uQ(t,n):Qc(Kb(Dn(e)))}function dQ(e){var t=No(Pr(e)),n=["absolute","fixed"].indexOf($n(e).position)>=0,i=n&&Xt(e)?Cs(e):e;return Ui(i)?t.filter(function(s){return Ui(s)&&Mh(s,i)&&dn(s)!=="body"}):[]}function Qb(e,t,n,i){var s=t==="clippingParents"?dQ(e):[].concat(t),r=[].concat(s,[n]),o=r[0],a=r.reduce(function(l,c){var u=jN(e,c,i);return l.top=vs(u.top,l.top),l.right=Ua(u.right,l.right),l.bottom=Ua(u.bottom,l.bottom),l.left=vs(u.left,l.left),l},jN(e,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Oh(e){var t=e.reference,n=e.element,i=e.placement,s=i?hn(i):null,r=i?ji(i):null,o=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,l;switch(s){case Bt:l={x:o,y:t.y-n.height};break;case En:l={x:o,y:t.y+t.height};break;case un:l={x:t.x+t.width,y:a};break;case Jt:l={x:t.x-n.width,y:a};break;default:l={x:t.x,y:t.y}}var c=s?ja(s):null;if(c!=null){var u=c==="y"?"height":"width";switch(r){case Ar:l[c]=l[c]-(t[u]/2-n[u]/2);break;case Ha:l[c]=l[c]+(t[u]/2-n[u]/2);break;default:}}return l}function ko(e,t){t===void 0&&(t={});var n=t,i=n.placement,s=i===void 0?e.placement:i,r=n.strategy,o=r===void 0?e.strategy:r,a=n.boundary,l=a===void 0?NN:a,c=n.rootBoundary,u=c===void 0?Qm:c,h=n.elementContext,f=h===void 0?zc:h,g=n.altBoundary,v=g===void 0?!1:g,y=n.padding,C=y===void 0?0:y,E=Fh(typeof C!="number"?C:xh(C,Oo)),I=f===zc?kN:zc,T=e.rects.popper,x=e.elements[v?I:f],z=Qb(Ui(x)?x:x.contextElement||Dn(e.elements.popper),l,u,o),V=Wi(e.elements.reference),b=Oh({reference:V,element:T,strategy:"absolute",placement:s}),S=Qc(Object.assign({},T,b)),_=f===zc?S:V,R={top:z.top-_.top+E.top,bottom:_.bottom-z.bottom+E.bottom,left:z.left-_.left+E.left,right:_.right-z.right+E.right},A=e.modifiersData.offset;if(f===zc&&A){var M=A[s];Object.keys(R).forEach(function(D){var mn=[un,En].indexOf(D)>=0?1:-1,ui=[Bt,En].indexOf(D)>=0?"y":"x";R[D]+=M[ui]*mn})}return R}function Yb(e,t){t===void 0&&(t={});var n=t,i=n.placement,s=n.boundary,r=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?Ym:l,u=ji(i),h=u?a?jb:jb.filter(function(v){return ji(v)===u}):Oo,f=h.filter(function(v){return c.indexOf(v)>=0});f.length===0&&(f=h);var g=f.reduce(function(v,y){return v[y]=ko(e,{placement:y,boundary:s,rootBoundary:r,padding:o})[hn(y)],v},{});return Object.keys(g).sort(function(v,y){return g[v]-g[y]})}function hQ(e){if(hn(e)===Km)return[];var t=Kc(e);return[Xm(e),t,Xm(t)]}function fQ(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var s=n.mainAxis,r=s===void 0?!0:s,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,f=n.altBoundary,g=n.flipVariations,v=g===void 0?!0:g,y=n.allowedAutoPlacements,C=t.options.placement,E=hn(C),I=E===C,T=l||(I||!v?[Kc(C)]:hQ(C)),x=[C].concat(T).reduce(function(eo,ni){return eo.concat(hn(ni)===Km?Yb(t,{placement:ni,boundary:u,rootBoundary:h,padding:c,flipVariations:v,allowedAutoPlacements:y}):ni)},[]),z=t.rects.reference,V=t.rects.popper,b=new Map,S=!0,_=x[0],R=0;R<x.length;R++){var A=x[R],M=hn(A),D=ji(A)===Ar,mn=[Bt,En].indexOf(M)>=0,ui=mn?"width":"height",Ln=ko(t,{placement:A,boundary:u,rootBoundary:h,altBoundary:f,padding:c}),vn=mn?D?un:Jt:D?En:Bt;z[ui]>V[ui]&&(vn=Kc(vn));var Is=Kc(vn),ts=[];if(r&&ts.push(Ln[M]<=0),a&&ts.push(Ln[vn]<=0,Ln[Is]<=0),ts.every(function(eo){return eo})){_=A,S=!1;break}b.set(A,ts)}if(S)for(var Zo=v?3:1,Yu=function(ni){var ea=x.find(function(As){var ar=b.get(As);if(ar)return ar.slice(0,ni).every(function(Ju){return Ju})});if(ea)return _=ea,"break"},ti=Zo;ti>0;ti--){var Mt=Yu(ti);if(Mt==="break")break}t.placement!==_&&(t.modifiersData[i]._skip=!0,t.placement=_,t.reset=!0)}}var Jb={name:"flip",enabled:!0,phase:"main",fn:fQ,requiresIfExists:["offset"],data:{_skip:!1}};function pQ(e,t,n){var i=hn(e),s=[Jt,Bt].indexOf(i)>=0?-1:1,r=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,o=r[0],a=r[1];return o=o||0,a=(a||0)*s,[Jt,un].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function gQ(e){var t=e.state,n=e.options,i=e.name,s=n.offset,r=s===void 0?[0,0]:s,o=Ym.reduce(function(u,h){return u[h]=pQ(h,t.rects,r),u},{}),a=o[t.placement],l=a.x,c=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[i]=o}var Xb={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:gQ};function mQ(e){var t=e.state,n=e.name;t.modifiersData[n]=Oh({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var zN={name:"popperOffsets",enabled:!0,phase:"read",fn:mQ,data:{}};function Zb(e){return e==="x"?"y":"x"}function vQ(e){var t=e.state,n=e.options,i=e.name,s=n.mainAxis,r=s===void 0?!0:s,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,f=n.tether,g=f===void 0?!0:f,v=n.tetherOffset,y=v===void 0?0:v,C=ko(t,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),E=hn(t.placement),I=ji(t.placement),T=!I,x=ja(E),z=Zb(x),V=t.modifiersData.popperOffsets,b=t.rects.reference,S=t.rects.popper,_=typeof y=="function"?y(Object.assign({},t.rects,{placement:t.placement})):y,R=typeof _=="number"?{mainAxis:_,altAxis:_}:Object.assign({mainAxis:0,altAxis:0},_),A=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,M={x:0,y:0};if(V){if(r){var D,mn=x==="y"?Bt:Jt,ui=x==="y"?En:un,Ln=x==="y"?"height":"width",vn=V[x],Is=vn+C[mn],ts=vn-C[ui],Zo=g?-S[Ln]/2:0,Yu=I===Ar?b[Ln]:S[Ln],ti=I===Ar?-S[Ln]:-b[Ln],Mt=t.elements.arrow,eo=g&&Mt?Wa(Mt):{width:0,height:0},ni=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Ph(),ea=ni[mn],As=ni[ui],ar=za(0,b[Ln],eo[Ln]),Ju=T?b[Ln]/2-Zo-ar-ea-R.mainAxis:Yu-ar-ea-R.mainAxis,Ol=T?-b[Ln]/2+Zo+ar+As+R.mainAxis:ti+ar+As+R.mainAxis,to=t.elements.arrow&&Cs(t.elements.arrow),Xu=to?x==="y"?to.clientTop||0:to.clientLeft||0:0,Nl=(D=A?.[x])!=null?D:0,Zu=vn+Ju-Nl-Xu,ed=vn+Ol-Nl,td=za(g?Ua(Is,Zu):Is,vn,g?vs(ts,ed):ts);V[x]=td,M[x]=td-vn}if(a){var nd,ay=x==="x"?Bt:Jt,$f=x==="x"?En:un,Ms=V[z],no=z==="y"?"height":"width",id=Ms+C[ay],qf=Ms-C[$f],ta=[Bt,Jt].indexOf(E)!==-1,kl=(nd=A?.[z])!=null?nd:0,Ll=ta?id:Ms-b[no]-S[no]-kl+R.altAxis,Wt=ta?Ms+b[no]+S[no]-kl-R.altAxis:qf,en=g&&ta?GN(Ll,Ms,Wt):za(g?Ll:id,Ms,g?Wt:qf);V[z]=en,M[z]=en-Ms}t.modifiersData[i]=M}}var e0={name:"preventOverflow",enabled:!0,phase:"main",fn:vQ,requiresIfExists:["offset"]};function t0(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function n0(e){return e===Ct(e)||!Xt(e)?$a(e):t0(e)}function CQ(e){var t=e.getBoundingClientRect(),n=Mr(t.width)/e.offsetWidth||1,i=Mr(t.height)/e.offsetHeight||1;return n!==1||i!==1}function i0(e,t,n){n===void 0&&(n=!1);var i=Xt(t),s=Xt(t)&&CQ(t),r=Dn(t),o=Wi(e,s,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&((dn(t)!=="body"||Ka(r))&&(a=n0(t)),Xt(t)?(l=Wi(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):r&&(l.x=qa(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function yQ(e){var t=new Map,n=new Set,i=[];e.forEach(function(r){t.set(r.name,r)});function s(r){n.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=t.get(a);l&&s(l)}}),i.push(r)}return e.forEach(function(r){n.has(r.name)||s(r)}),i}function s0(e){var t=yQ(e);return LN.reduce(function(n,i){return n.concat(t.filter(function(s){return s.phase===i}))},[])}function r0(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function o0(e){var t=e.reduce(function(n,i){var s=n[i.name];return n[i.name]=s?Object.assign({},s,i,{options:Object.assign({},s.options,i.options),data:Object.assign({},s.data,i.data)}):i,n},{});return Object.keys(t).map(function(n){return t[n]})}var $N={placement:"bottom",modifiers:[],strategy:"absolute"};function qN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function KN(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,i=n===void 0?[]:n,s=t.defaultOptions,r=s===void 0?$N:s;return function(a,l,c){c===void 0&&(c=r);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},$N,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},h=[],f=!1,g={state:u,setOptions:function(E){var I=typeof E=="function"?E(u.options):E;y(),u.options=Object.assign({},r,u.options,I),u.scrollParents={reference:Ui(a)?No(a):a.contextElement?No(a.contextElement):[],popper:No(l)};var T=s0(o0([].concat(i,u.options.modifiers)));return u.orderedModifiers=T.filter(function(x){return x.enabled}),v(),g.update()},forceUpdate:function(){if(!f){var E=u.elements,I=E.reference,T=E.popper;if(qN(I,T)){u.rects={reference:i0(I,Cs(T),u.options.strategy==="fixed"),popper:Wa(T)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(R){return u.modifiersData[R.name]=Object.assign({},R.data)});for(var x=0;x<u.orderedModifiers.length;x++){if(u.reset===!0){u.reset=!1,x=-1;continue}var z=u.orderedModifiers[x],V=z.fn,b=z.options,S=b===void 0?{}:b,_=z.name;typeof V=="function"&&(u=V({state:u,options:S,name:_,instance:g})||u)}}}},update:r0(function(){return new Promise(function(C){g.forceUpdate(),C(u)})}),destroy:function(){y(),f=!0}};if(!qN(a,l))return g;g.setOptions(c).then(function(C){!f&&c.onFirstUpdate&&c.onFirstUpdate(C)});function v(){u.orderedModifiers.forEach(function(C){var E=C.name,I=C.options,T=I===void 0?{}:I,x=C.effect;if(typeof x=="function"){var z=x({state:u,name:E,instance:g,options:T}),V=function(){};h.push(z||V)}})}function y(){h.forEach(function(C){return C()}),h=[]}return g}}var wQ=[WN,zN,UN,VN],a0=KN({defaultModifiers:wQ});var XN=["*"];var SQ=["dialog"];var ZN={animation:!0,transitionTimerDelayMs:5},ek=(()=>{let t=class t{constructor(){this.animation=ZN.animation}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function _Q(e){let{transitionDelay:t,transitionDuration:n}=window.getComputedStyle(e),i=parseFloat(t),s=parseFloat(n);return(i+s)*1e3}function h0(e){return typeof e=="string"}function l0(e){return e!=null}function bQ(e){return e&&e.then}function EQ(e,t){return!t||typeof e.closest>"u"?null:e.closest(t)}function tk(e){return(e||document.body).getBoundingClientRect()}function DQ(e){return t=>new re(n=>{let i=o=>e.run(()=>n.next(o)),s=o=>e.run(()=>n.error(o)),r=()=>e.run(()=>n.complete());return t.subscribe({next:i,error:s,complete:r})})}var RQ=()=>{},{transitionTimerDelayMs:TQ}=ZN,ev=new Map,Fr=(e,t,n,i)=>{let s=i.context||{},r=ev.get(t);if(r)switch(i.runningTransition){case"continue":return zt;case"stop":e.run(()=>r.transition$.complete()),s=Object.assign(r.context,s),ev.delete(t)}let o=n(t,i.animation,s)||RQ;if(!i.animation||window.getComputedStyle(t).transitionProperty==="none")return e.run(()=>o()),ee(void 0).pipe(DQ(e));let a=new Le,l=new Le,c=a.pipe(Jy(!0));ev.set(t,{transition$:a,complete:()=>{l.next(),l.complete()},context:s});let u=_Q(t);return e.runOutsideAngular(()=>{let h=Bn(t,"transitionend").pipe($t(c),ft(({target:g})=>g===t)),f=uo(u+TQ).pipe($t(c));jp(f,h,l).pipe($t(c)).subscribe(()=>{ev.delete(t),e.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};var iv=function(e){return e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.ArrowLeft=37]="ArrowLeft",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowRight=39]="ArrowRight",e[e.ArrowDown=40]="ArrowDown",e}(iv||{});var tv=(e,t)=>t?t.some(n=>n.contains(e)):!1,QN=(e,t)=>!t||EQ(e,t)!=null,IQ=(()=>{let e=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,t=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(e()||t()):!1})(),AQ=e=>IQ?()=>setTimeout(()=>e(),100):e;function MQ(e,t,n,i,s,r,o,a){n&&e.runOutsideAngular(AQ(()=>{let l=f=>{let g=f.target;return f.button===2||tv(g,o)?!1:n==="inside"?tv(g,r)&&QN(g,a):n==="outside"?!tv(g,r):QN(g,a)||!tv(g,r)},c=Bn(t,"keydown").pipe($t(s),ft(f=>f.which===iv.Escape),nt(f=>f.preventDefault())),u=Bn(t,"mousedown").pipe(oe(l),$t(s)),h=Bn(t,"mouseup").pipe(Pd(u),ft(([f,g])=>g),Yy(0),$t(s));jp([c.pipe(oe(f=>0)),h.pipe(oe(f=>1))]).subscribe(f=>e.run(()=>i(f)))}))}var PQ=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function nk(e){let t=Array.from(e.querySelectorAll(PQ)).filter(n=>n.tabIndex!==-1);return[t[0],t[t.length-1]]}var FQ=(e,t,n,i=!1)=>{e.runOutsideAngular(()=>{let s=Bn(t,"focusin").pipe($t(n),oe(r=>r.target));Bn(t,"keydown").pipe($t(n),ft(r=>r.which===iv.Tab),Pd(s)).subscribe(([r,o])=>{let[a,l]=nk(t);(o===a||o===t)&&r.shiftKey&&(l.focus(),r.preventDefault()),o===l&&!r.shiftKey&&(a.focus(),r.preventDefault())}),i&&Bn(t,"click").pipe($t(n),Pd(s),oe(r=>r[1])).subscribe(r=>r.focus())})},xQ=(()=>{let t=class t{constructor(){this._element=U(Lt).documentElement}isRTL(){return(this._element.getAttribute("dir")||"").toLowerCase()==="rtl"}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),OQ=/\s+/,NQ=/  +/gi,kQ={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]};function LQ(e,t){let[n,i]=kQ[e];return t&&i||n}var VQ=/^left/,BQ=/^right/,GQ=/^start/,HQ=/^end/;function UQ(e,t){let[n,i]=t.split("-"),s=n.replace(VQ,"start").replace(BQ,"end"),r=[s];if(i){let o=i;(n==="left"||n==="right")&&(o=o.replace(GQ,"top").replace(HQ,"bottom")),r.push(`${s}-${o}`)}return e&&(r=r.map(o=>`${e}-${o}`)),r.join(" ")}function YN({placement:e,baseClass:t},n){let i=Array.isArray(e)?e:e.split(OQ),s=["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"],r=i.findIndex(c=>c==="auto");r>=0&&s.forEach(function(c){i.find(u=>u.search("^"+c)!==-1)==null&&i.splice(r++,1,c)});let o=i.map(c=>LQ(c,n.isRTL()));return{placement:o.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!t,phase:"write",fn({state:c}){let u=new RegExp(t+"(-[a-z]+)*","gi"),h=c.elements.popper,f=c.placement,g=h.className;g=g.replace(u,""),g+=` ${UQ(t,f)}`,g=g.trim().replace(NQ," "),h.className=g}},Jb,e0,$b,{enabled:!0,name:"flip",options:{fallbackPlacements:o}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function JN(e){return e}function WQ(){let e=U(xQ),t=null;return{createPopper(n){if(!t){let s=(n.updatePopperOptions||JN)(YN(n,e));t=a0(n.hostElement,n.targetElement,s)}},update(){t&&t.update()},setOptions(n){if(t){let s=(n.updatePopperOptions||JN)(YN(n,e));t.setOptions(s)}},destroy(){t&&(t.destroy(),t=null)}}}function jQ(e){return t=>(t.modifiers.push(Xb,{name:"offset",options:{offset:()=>e}}),t)}var OPe=new Date(1882,10,12),NPe=new Date(2174,10,25);var kPe=1e3*60*60*24;var f0=1080,zQ=24*f0,$Q=12*f0+793,LPe=29*zQ+$Q,VPe=11*f0+204;var qQ=(()=>{let t=class t{constructor(){this._ngbConfig=U(ek),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(i){this._animation=i}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),xr=class{constructor(t,n,i){this.nodes=t,this.viewRef=n,this.componentRef=i}},c0=class{constructor(t){this._componentType=t,this._windowRef=null,this._contentRef=null,this._document=U(Lt),this._applicationRef=U(ps),this._injector=U(Ue),this._viewContainerRef=U(ki),this._ngZone=U(ue)}open(t,n,i=!1){this._windowRef||(this._contentRef=this._getContentRef(t,n),this._windowRef=this._viewContainerRef.createComponent(this._componentType,{injector:this._injector,projectableNodes:this._contentRef.nodes}));let{nativeElement:s}=this._windowRef.location,r=this._ngZone.onStable.pipe(Pt(1),ot(()=>Fr(this._ngZone,s,({classList:o})=>o.add("show"),{animation:i,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:r}}close(t=!1){return this._windowRef?Fr(this._ngZone,this._windowRef.location.nativeElement,({classList:n})=>n.remove("show"),{animation:t,runningTransition:"stop"}).pipe(nt(()=>{this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),this._contentRef?.viewRef&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):ee(void 0)}_getContentRef(t,n){if(t)if(t instanceof Hs){let i=t.createEmbeddedView(n);return this._applicationRef.attachView(i),new xr([i.rootNodes],i)}else return new xr([[this._document.createTextNode(`${t}`)]]);else return new xr([])}},KQ=(()=>{let t=class t{constructor(){this._document=U(Lt)}hide(){let i=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),s=this._document.body,r=s.style,{overflow:o,paddingRight:a}=r;if(i>0){let l=parseFloat(window.getComputedStyle(s).paddingRight);r.paddingRight=`${l+i}px`}return r.overflow="hidden",()=>{i>0&&(r.paddingRight=a),r.overflow=o}}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),QQ=(()=>{let t=class t{constructor(){this._nativeElement=U(Kt).nativeElement,this._zone=U(ue)}ngOnInit(){this._zone.onStable.asObservable().pipe(Pt(1)).subscribe(()=>{Fr(this._zone,this._nativeElement,(i,s)=>{s&&tk(i),i.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Fr(this._zone,this._nativeElement,({classList:i})=>i.remove("show"),{animation:this.animation,runningTransition:"stop"})}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Ee({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(s,r){s&2&&(wn("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),Eo("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[De],decls:0,vars:0,template:function(s,r){},encapsulation:2});let e=t;return e})(),nv=class{update(t){}close(t){}dismiss(t){}},YQ=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],JQ=["animation","backdropClass"],u0=class{_applyWindowOptions(t,n){YQ.forEach(i=>{l0(n[i])&&(t[i]=n[i])})}_applyBackdropOptions(t,n){JQ.forEach(i=>{l0(n[i])&&(t[i]=n[i])})}update(t){this._applyWindowOptions(this._windowCmptRef.instance,t),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,t)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe($t(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe($t(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(t,n,i,s){this._windowCmptRef=t,this._contentRef=n,this._backdropCmptRef=i,this._beforeDismiss=s,this._closed=new Le,this._dismissed=new Le,this._hidden=new Le,t.instance.dismissEvent.subscribe(r=>{this.dismiss(r)}),this.result=new Promise((r,o)=>{this._resolve=r,this._reject=o}),this.result.then(null,()=>{})}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(t);else{let n=this._beforeDismiss();bQ(n)?n.then(i=>{i!==!1&&this._dismiss(t)},()=>{}):n!==!1&&this._dismiss(t)}}_removeModalElements(){let t=this._windowCmptRef.instance.hide(),n=this._backdropCmptRef?this._backdropCmptRef.instance.hide():ee(void 0);t.subscribe(()=>{let{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),n.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Id(t,n).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},d0=function(e){return e[e.BACKDROP_CLICK=0]="BACKDROP_CLICK",e[e.ESC=1]="ESC",e}(d0||{}),XQ=(()=>{let t=class t{constructor(){this._document=U(Lt),this._elRef=U(Kt),this._zone=U(ue),this._closed$=new Le,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new H,this.shown=new Le,this.hidden=new Le}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":h0(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(i){this.dismissEvent.emit(i)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Pt(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:i}=this._elRef,s={animation:this.animation,runningTransition:"stop"},r=Fr(this._zone,i,()=>i.classList.remove("show"),s),o=Fr(this._zone,this._dialogEl.nativeElement,()=>{},s),a=Id(r,o);return a.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),a}_show(){let i={animation:this.animation,runningTransition:"continue"},s=Fr(this._zone,this._elRef.nativeElement,(o,a)=>{a&&tk(o),o.classList.add("show")},i),r=Fr(this._zone,this._dialogEl.nativeElement,()=>{},i);Id(s,r).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:i}=this._elRef;this._zone.runOutsideAngular(()=>{Bn(i,"keydown").pipe($t(this._closed$),ft(r=>r.which===iv.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(d0.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let s=!1;Bn(this._dialogEl.nativeElement,"mousedown").pipe($t(this._closed$),nt(()=>s=!1),Ge(()=>Bn(i,"mouseup").pipe($t(this._closed$),Pt(1))),ft(({target:r})=>i===r)).subscribe(()=>{s=!0}),Bn(i,"click").pipe($t(this._closed$)).subscribe(({target:r})=>{i===r&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!s&&this._zone.run(()=>this.dismiss(d0.BACKDROP_CLICK))),s=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:i}=this._elRef;if(!i.contains(document.activeElement)){let s=i.querySelector("[ngbAutofocus]"),r=nk(i)[0];(s||r||i).focus()}}_restoreFocus(){let i=this._document.body,s=this._elWithFocus,r;s&&s.focus&&i.contains(s)?r=s:r=i,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&Fr(this._zone,this._elRef.nativeElement,({classList:i})=>(i.add("modal-static"),()=>i.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Ee({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(s,r){if(s&1&&Zg(SQ,7),s&2){let o;Xd(o=Zd())&&(r._dialogEl=o.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(s,r){s&2&&(Ta("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),wn("modal d-block"+(r.windowClass?" "+r.windowClass:"")),Eo("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[De],ngContentSelectors:XN,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(s,r){s&1&&(a_(),$(0,"div",1,0)(2,"div",2),l_(3),q()()),s&2&&wn("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2});let e=t;return e})(),ZQ=(()=>{let t=class t{constructor(){this._applicationRef=U(ps),this._injector=U(Ue),this._environmentInjector=U(jn),this._document=U(Lt),this._scrollBar=U(KQ),this._activeWindowCmptHasChanged=new Le,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new H;let i=U(ue);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let s=this._windowCmpts[this._windowCmpts.length-1];FQ(i,s.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(s.location.nativeElement)}})}_restoreScrollBar(){let i=this._scrollBarRestoreFn;i&&(this._scrollBarRestoreFn=null,i())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(i,s,r){let o=r.container instanceof HTMLElement?r.container:l0(r.container)?this._document.querySelector(r.container):this._document.body;if(!o)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let a=new nv;i=r.injector||i;let l=i.get(jn,null)||this._environmentInjector,c=this._getContentRef(i,l,s,a,r),u=r.backdrop!==!1?this._attachBackdrop(o):void 0,h=this._attachWindowComponent(o,c.nodes),f=new u0(h,c,u,r.beforeDismiss);return this._registerModalRef(f),this._registerWindowCmpt(h),f.hidden.pipe(Pt(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=g=>{f.close(g)},a.dismiss=g=>{f.dismiss(g)},a.update=g=>{f.update(g)},f.update(r),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),u&&u.instance&&u.changeDetectorRef.detectChanges(),h.changeDetectorRef.detectChanges(),f}get activeInstances(){return this._activeInstances}dismissAll(i){this._modalRefs.forEach(s=>s.dismiss(i))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(i){let s=nm(QQ,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(s.hostView),i.appendChild(s.location.nativeElement),s}_attachWindowComponent(i,s){let r=nm(XQ,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:s});return this._applicationRef.attachView(r.hostView),i.appendChild(r.location.nativeElement),r}_getContentRef(i,s,r,o,a){return r?r instanceof Hs?this._createFromTemplateRef(r,o):h0(r)?this._createFromString(r):this._createFromComponent(i,s,r,o,a):new xr([])}_createFromTemplateRef(i,s){let r={$implicit:s,close(a){s.close(a)},dismiss(a){s.dismiss(a)}},o=i.createEmbeddedView(r);return this._applicationRef.attachView(o),new xr([o.rootNodes],o)}_createFromString(i){let s=this._document.createTextNode(`${i}`);return new xr([[s]])}_createFromComponent(i,s,r,o,a){let l=Ue.create({providers:[{provide:nv,useValue:o}],parent:i}),c=nm(r,{environmentInjector:s,elementInjector:l}),u=c.location.nativeElement;return a.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new xr([[u]],c.hostView,c)}_setAriaHidden(i){let s=i.parentElement;s&&i!==this._document.body&&(Array.from(s.children).forEach(r=>{r!==i&&r.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(s))}_revertAriaHidden(){this._ariaHiddenValues.forEach((i,s)=>{i?s.setAttribute("aria-hidden",i):s.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(i){let s=()=>{let r=this._modalRefs.indexOf(i);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(i),this._activeInstances.emit(this._modalRefs),i.result.then(s,s)}_registerWindowCmpt(i){this._windowCmpts.push(i),this._activeWindowCmptHasChanged.next(),i.onDestroy(()=>{let s=this._windowCmpts.indexOf(i);s>-1&&(this._windowCmpts.splice(s,1),this._activeWindowCmptHasChanged.next())})}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),ik=(()=>{let t=class t{constructor(){this._injector=U(Ue),this._modalStack=U(ZQ),this._config=U(qQ)}open(i,s={}){let r=B(se(B({},this._config),{animation:this._config.animation}),s);return this._modalStack.open(this._injector,i,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(i){this._modalStack.dismissAll(i)}hasOpenModals(){return this._modalStack.hasOpenModals()}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var eY={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]};function tY(e){let t=(e||"").trim();if(t.length===0)return[];let n=t.split(/\s+/).map(s=>s.split(":")).map(s=>eY[s[0]]||s),i=n.filter(s=>s.includes("manual"));if(i.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(i.length===1&&n.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return i.length?[]:n}function nY(e,t,n,i,s,r=0,o=0){let a=tY(t);if(a.length===0)return()=>{};let l=new Set,c=[],u;function h(g,v){e.addEventListener(g,v),c.push(()=>e.removeEventListener(g,v))}function f(g,v){clearTimeout(u),v>0?u=setTimeout(g,v):g()}for(let[g,v]of a)v?(h(g,()=>{l.add(g),f(()=>l.size>0&&i(),r)}),h(v,()=>{l.delete(g),f(()=>l.size===0&&s(),o)})):h(g,()=>n()?f(s,o):f(i,r));return()=>c.forEach(g=>g())}var iY=(()=>{let t=class t{constructor(){this._ngbConfig=U(ek),this.autoClose=!0,this.placement="auto",this.popperOptions=i=>i,this.triggers="hover focus",this.disableTooltip=!1,this.openDelay=0,this.closeDelay=0}get animation(){return this._animation??this._ngbConfig.animation}set animation(i){this._animation=i}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),sY=0,rY=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Ee({type:t,selectors:[["ngb-tooltip-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(s,r){s&2&&(o_("id",r.id),wn("tooltip"+(r.tooltipClass?" "+r.tooltipClass:"")),Eo("fade",r.animation))},inputs:{animation:"animation",id:"id",tooltipClass:"tooltipClass"},standalone:!0,features:[De],ngContentSelectors:XN,decls:3,vars:0,consts:[["data-popper-arrow","",1,"tooltip-arrow"],[1,"tooltip-inner"]],template:function(s,r){s&1&&(a_(),ae(0,"div",0),$(1,"div",1),l_(2),q())},styles:[`ngb-tooltip-window{pointer-events:none;position:absolute}ngb-tooltip-window .tooltip-inner{pointer-events:auto}ngb-tooltip-window.bs-tooltip-top,ngb-tooltip-window.bs-tooltip-bottom{padding-left:0;padding-right:0}ngb-tooltip-window.bs-tooltip-start,ngb-tooltip-window.bs-tooltip-end{padding-top:0;padding-bottom:0}
`],encapsulation:2,changeDetection:0});let e=t;return e})(),sv=(()=>{let t=class t{constructor(){this._config=U(iY),this.animation=this._config.animation,this.autoClose=this._config.autoClose,this.placement=this._config.placement,this.popperOptions=this._config.popperOptions,this.triggers=this._config.triggers,this.container=this._config.container,this.disableTooltip=this._config.disableTooltip,this.tooltipClass=this._config.tooltipClass,this.openDelay=this._config.openDelay,this.closeDelay=this._config.closeDelay,this.shown=new H,this.hidden=new H,this._nativeElement=U(Kt).nativeElement,this._ngZone=U(ue),this._document=U(Lt),this._changeDetector=U(Dr),this._ngbTooltipWindowId=`ngb-tooltip-${sY++}`,this._popupService=new c0(rY),this._windowRef=null,this._positioning=WQ()}set ngbTooltip(i){this._ngbTooltip=i,!i&&this._windowRef&&this.close()}get ngbTooltip(){return this._ngbTooltip}open(i){if(!this._windowRef&&this._ngbTooltip&&!this.disableTooltip){let{windowRef:s,transition$:r}=this._popupService.open(this._ngbTooltip,i??this.tooltipContext,this.animation);this._windowRef=s,this._windowRef.setInput("animation",this.animation),this._windowRef.setInput("tooltipClass",this.tooltipClass),this._windowRef.setInput("id",this._ngbTooltipWindowId),this._getPositionTargetElement().setAttribute("aria-describedby",this._ngbTooltipWindowId),this.container==="body"&&this._document.body.appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._getPositionTargetElement(),targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:this.container==="body",baseClass:"bs-tooltip",updatePopperOptions:o=>this.popperOptions(jQ([0,6])(o))}),Promise.resolve().then(()=>{this._positioning.update(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positioning.update())})}),MQ(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement],[this._nativeElement]),r.subscribe(()=>this.shown.emit())}}close(i=this.animation){this._windowRef!=null&&(this._getPositionTargetElement().removeAttribute("aria-describedby"),this._popupService.close(i).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return this._windowRef!=null}ngOnInit(){this._unregisterListenersFn=nY(this._nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({tooltipClass:i}){i&&this.isOpen()&&this._windowRef.setInput("tooltipClass",i.currentValue)}ngOnDestroy(){this.close(!1),this._unregisterListenersFn?.()}_getPositionTargetElement(){return(h0(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget)||this._nativeElement}};t.\u0275fac=function(s){return new(s||t)},t.\u0275dir=Ft({type:t,selectors:[["","ngbTooltip",""]],inputs:{animation:"animation",autoClose:"autoClose",placement:"placement",popperOptions:"popperOptions",triggers:"triggers",positionTarget:"positionTarget",container:"container",disableTooltip:"disableTooltip",tooltipClass:"tooltipClass",tooltipContext:"tooltipContext",openDelay:"openDelay",closeDelay:"closeDelay",ngbTooltip:"ngbTooltip"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbTooltip"],standalone:!0,features:[an]});let e=t;return e})(),sk=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=Ci({type:t}),t.\u0275inj=vi({});let e=t;return e})();var BPe=new X("live announcer delay",{providedIn:"root",factory:()=>100});function oY(e,t){if(e&1){let n=cn();ds(0),$(1,"div",2),We("click",function(){let s=Dt(n).$implicit;return Rt(s.action())}),ae(2,"i"),q(),hs()}if(e&2){let n=t.$implicit;ce(),wn(n.icon==="flex-grow-spacer"?"flex-grow-spacer":"sidebar-item"),me("ngbTooltip",n.label),ce(),wn(n.icon)}}var ok=(()=>{let t=class t{constructor(i,s){this.authService=i,this.router=s,this.sidebarItems=[{label:"Dashboard",icon:"bi bi-house",action:()=>{this.router.navigateByUrl("/dashboard")}},{label:"Profile",icon:"bi bi-person",action:()=>{this.router.navigateByUrl("/profile")}},{label:"Settings",icon:"bi bi-gear",action:()=>{this.router.navigateByUrl("/settings")}},{label:"",icon:"flex-grow-spacer",action:()=>{}},{label:"Logout",icon:"bi bi-box-arrow-right",action:()=>{this.logout()}}]}logout(){this.authService.logout()}};t.\u0275fac=function(s){return new(s||t)(J(Hi),J(Qt))},t.\u0275cmp=Ee({type:t,selectors:[["app-sidebar"]],inputs:{sidebarItems:"sidebarItems"},standalone:!0,features:[De],decls:2,vars:1,consts:[[1,"sidebar"],[4,"ngFor","ngForOf"],["placement","right",3,"click","ngbTooltip"]],template:function(s,r){s&1&&($(0,"div",0),tt(1,oY,3,5,"ng-container",1),q()),s&2&&(ce(),me("ngForOf",r.sidebarItems))},dependencies:[xt,js,sk,sv],styles:[".sidebar[_ngcontent-%COMP%]{width:60px;height:100vh;background-color:#1f1f1f;display:flex;flex-direction:column;align-items:center;padding:10px 0;position:fixed;left:0;top:0}.sidebar-item[_ngcontent-%COMP%]{width:100%;padding:15px 0;display:flex;justify-content:center;align-items:center;cursor:pointer;color:#ccc}.sidebar-item[_ngcontent-%COMP%]:hover{background-color:#333}.flex-grow-spacer[_ngcontent-%COMP%]{flex-grow:1}.icon[_ngcontent-%COMP%]{font-size:24px;color:#ccc}.icon[_ngcontent-%COMP%]:hover{color:#fff}"]});let e=t;return e})();function aY(e,t){if(e&1){let n=cn();ds(0),$(1,"div",2),We("click",function(){let s=Dt(n).$implicit;return Rt(s.action())}),ae(2,"i"),q(),hs()}if(e&2){let n=t.$implicit;ce(),wn(n.icon==="flex-grow-spacer"?"flex-grow-spacer":"topbar-item"),me("ngbTooltip",n.label),ce(),wn(n.icon)}}var ak=(()=>{let t=class t{constructor(i){this.router=i,this.showSidebar=!1,this.topbarItems=[{label:"Show Options",icon:"bi bi-three-dots-vertical",action:()=>{this.showSidebar=!this.showSidebar,this.toggleSidebar.emit(this.showSidebar)}},{label:"",icon:"flex-grow-spacer",action:()=>{}}],this.toggleSidebar=new H}};t.\u0275fac=function(s){return new(s||t)(J(Qt))},t.\u0275cmp=Ee({type:t,selectors:[["app-topbar"]],inputs:{showSidebar:"showSidebar",topbarItems:"topbarItems"},outputs:{toggleSidebar:"toggleSidebar"},standalone:!0,features:[De],decls:2,vars:1,consts:[[1,"topbar"],[4,"ngFor","ngForOf"],["placement","bottom",3,"click","ngbTooltip"]],template:function(s,r){s&1&&($(0,"div",0),tt(1,aY,3,5,"ng-container",1),q()),s&2&&(ce(),me("ngForOf",r.topbarItems))},dependencies:[xt,js,sv],styles:[".topbar[_ngcontent-%COMP%]{height:60px;width:100vw;background-color:#1f1f1f;display:flex;justify-content:flex-start;align-items:center;padding:0 20px;position:fixed;top:0;z-index:1000}.topbar-item[_ngcontent-%COMP%]{padding:15px;display:flex;justify-content:center;align-items:center;cursor:pointer;color:#ccc;z-index:1001}.topbar-item[_ngcontent-%COMP%]:hover{background-color:#333}.flex-grow-spacer[_ngcontent-%COMP%]{flex-grow:1}"]});let e=t;return e})();var lY=e=>({"dim-content":e});function cY(e,t){if(e&1){let n=cn();$(0,"aside",6),We("click",function(){Dt(n);let s=it();return Rt(s.preventCloseOnClick())}),ae(1,"app-sidebar"),q()}}var lk=(()=>{let t=class t{constructor(i){this.renderer=i,this.showSidebar=!1,this.mobileSidebarTogglerClicked=!1,this.renderer.listen("window","click",s=>{this.mobileSidebarTogglerClicked||(this.showSidebar=!1),this.mobileSidebarTogglerClicked=!1})}toggleSidebar(i){this.showSidebar=i}preventCloseOnClick(){this.mobileSidebarTogglerClicked=!0}};t.\u0275fac=function(s){return new(s||t)(J(Er))},t.\u0275cmp=Ee({type:t,selectors:[["app-dashboard"]],standalone:!0,features:[De],decls:8,vars:5,consts:[[1,"app-container"],[1,"d-none","d-md-block"],["class","d-md-none sidebar-transition","style","z-index: 1002",3,"click",4,"ngIf"],[1,"d-md-none"],[3,"toggleSidebar","showSidebar"],[1,"main-content","ms-md-5","ps-md-4","ps-xl-5",3,"ngClass"],[1,"d-md-none","sidebar-transition",2,"z-index","1002",3,"click"]],template:function(s,r){s&1&&($(0,"div",0)(1,"aside",1),ae(2,"app-sidebar"),q(),tt(3,cY,2,0,"aside",2),$(4,"header",3)(5,"app-topbar",4),We("toggleSidebar",function(a){return r.toggleSidebar(a),r.preventCloseOnClick()}),q()(),$(6,"main",5),ae(7,"router-outlet"),q()()),s&2&&(ce(3),me("ngIf",r.showSidebar),ce(2),me("showSidebar",r.showSidebar),ce(),me("ngClass",th(3,lY,r.showSidebar)))},dependencies:[_h,ok,ak,xt,om,Li],styles:[".app-container[_ngcontent-%COMP%]{display:flex;height:100vh}.main-content[_ngcontent-%COMP%]{flex-grow:1;padding:20px;overflow-y:auto}@media (max-width: 768px){.main-content[_ngcontent-%COMP%]{padding-top:80px}.dim-content[_ngcontent-%COMP%]{opacity:.3}}"]});let e=t;return e})();var p0=class{constructor(){this.subject=new lo(1),this.subscriptions=new yt}doFilter(t){this.subject.next(t)}dispose(){this.subscriptions.unsubscribe()}notEmpty(t,n){this.subscriptions.add(this.subject.subscribe(i=>{if(i[t]){let s=i[t].currentValue;s!=null&&n(s)}}))}has(t,n){this.subscriptions.add(this.subject.subscribe(i=>{if(i[t]){let s=i[t].currentValue;n(s)}}))}notFirst(t,n){this.subscriptions.add(this.subject.subscribe(i=>{if(i[t]&&!i[t].isFirstChange()){let s=i[t].currentValue;n(s)}}))}notFirstAndEmpty(t,n){this.subscriptions.add(this.subject.subscribe(i=>{if(i[t]&&!i[t].isFirstChange()){let s=i[t].currentValue;s!=null&&n(s)}}))}},ck=new X("NGX_ECHARTS_CONFIG"),uk=(()=>{let t=class t{constructor(i,s,r){this.el=s,this.ngZone=r,this.options=null,this.theme=null,this.initOpts=null,this.merge=null,this.autoResize=!0,this.loading=!1,this.loadingType="default",this.loadingOpts=null,this.chartInit=new H,this.optionsError=new H,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartHighlight=this.createLazyEvent("highlight"),this.chartDownplay=this.createLazyEvent("downplay"),this.chartSelectChanged=this.createLazyEvent("selectchanged"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendLegendSelectAll=this.createLazyEvent("legendselectall"),this.chartLegendLegendInverseSelect=this.createLazyEvent("legendinverseselect"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartGraphRoam=this.createLazyEvent("graphroam"),this.chartGeoRoam=this.createLazyEvent("georoam"),this.chartTreeRoam=this.createLazyEvent("treeroam"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartGeoSelectChanged=this.createLazyEvent("geoselectchanged"),this.chartGeoSelected=this.createLazyEvent("geoselected"),this.chartGeoUnselected=this.createLazyEvent("geounselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartGlobalCursorTaken=this.createLazyEvent("globalcursortaken"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.chart$=new lo(1),this.resize$=new Le,this.changeFilter=new p0,this.resizeObFired=!1,this.echarts=i.echarts,this.theme=i.theme||null}ngOnChanges(i){this.changeFilter.doFilter(i)}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe(tw(100,Fi,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(i=>{for(let s of i)s.target===this.el.nativeElement&&(this.resizeObFired?this.animationFrameID=window.requestAnimationFrame(()=>{this.resize$.next()}):this.resizeObFired=!0)})),this.resizeOb.observe(this.el.nativeElement)),this.changeFilter.notFirstAndEmpty("options",i=>this.onOptionsChange(i)),this.changeFilter.notFirstAndEmpty("merge",i=>this.setOption(i)),this.changeFilter.has("loading",i=>this.toggleLoading(!!i)),this.changeFilter.notFirst("theme",()=>this.refreshChart())}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.loadingSub&&this.loadingSub.unsubscribe(),this.changeFilter.dispose(),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(i){this.chart?i?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading():this.loadingSub=this.chart$.subscribe(s=>i?s.showLoading(this.loadingType,this.loadingOpts):s.hideLoading())}setOption(i,s){if(this.chart)try{this.chart.setOption(i,s)}catch(r){console.error(r),this.optionsError.emit(r)}}refreshChart(){return F(this,null,function*(){this.dispose(),yield this.initChart()})}createChart(){let i=this.el.nativeElement;if(window&&window.getComputedStyle){let s=window.getComputedStyle(i,null).getPropertyValue("height");(!s||s==="0px")&&(!i.style.height||i.style.height==="0px")&&(i.style.height="400px")}return this.ngZone.runOutsideAngular(()=>(typeof this.echarts=="function"?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:r})=>r(i,this.theme,this.initOpts)))}initChart(){return F(this,null,function*(){yield this.onOptionsChange(this.options),this.merge&&this.chart&&this.setOption(this.merge)})}onOptionsChange(i){return F(this,null,function*(){i&&(this.chart?this.setOption(this.options,!0):(this.chart=yield this.createChart(),this.chart$.next(this.chart),this.chartInit.emit(this.chart),this.setOption(this.options,!0)))})}createLazyEvent(i){return this.chartInit.pipe(Ge(s=>new re(r=>(s.on(i,o=>this.ngZone.run(()=>r.next(o))),()=>{this.chart&&(this.chart.isDisposed()||s.off(i))}))))}};t.\u0275fac=function(s){return new(s||t)(J(ck),J(Kt),J(ue))},t.\u0275dir=Ft({type:t,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loading:"loading",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartHighlight:"chartHighlight",chartDownplay:"chartDownplay",chartSelectChanged:"chartSelectChanged",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendLegendSelectAll:"chartLegendLegendSelectAll",chartLegendLegendInverseSelect:"chartLegendLegendInverseSelect",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartGraphRoam:"chartGraphRoam",chartGeoRoam:"chartGeoRoam",chartTreeRoam:"chartTreeRoam",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartGeoSelectChanged:"chartGeoSelectChanged",chartGeoSelected:"chartGeoSelected",chartGeoUnselected:"chartGeoUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartGlobalCursorTaken:"chartGlobalCursorTaken",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],standalone:!0,features:[an]});let e=t;return e})(),dk=(e={})=>({provide:ck,useFactory:()=>se(B({},e),{echarts:()=>import("./chunk-CC4FQ6XH.js")})});var hk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fk={};var Lo,g0;(function(){var e;function t(b,S){function _(){}_.prototype=S.prototype,b.D=S.prototype,b.prototype=new _,b.prototype.constructor=b,b.C=function(R,A,M){for(var D=Array(arguments.length-2),mn=2;mn<arguments.length;mn++)D[mn-2]=arguments[mn];return S.prototype[A].apply(R,D)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,S,_){_||(_=0);var R=Array(16);if(typeof S=="string")for(var A=0;16>A;++A)R[A]=S.charCodeAt(_++)|S.charCodeAt(_++)<<8|S.charCodeAt(_++)<<16|S.charCodeAt(_++)<<24;else for(A=0;16>A;++A)R[A]=S[_++]|S[_++]<<8|S[_++]<<16|S[_++]<<24;S=b.g[0],_=b.g[1],A=b.g[2];var M=b.g[3],D=S+(M^_&(A^M))+R[0]+3614090360&4294967295;S=_+(D<<7&4294967295|D>>>25),D=M+(A^S&(_^A))+R[1]+3905402710&4294967295,M=S+(D<<12&4294967295|D>>>20),D=A+(_^M&(S^_))+R[2]+606105819&4294967295,A=M+(D<<17&4294967295|D>>>15),D=_+(S^A&(M^S))+R[3]+3250441966&4294967295,_=A+(D<<22&4294967295|D>>>10),D=S+(M^_&(A^M))+R[4]+4118548399&4294967295,S=_+(D<<7&4294967295|D>>>25),D=M+(A^S&(_^A))+R[5]+1200080426&4294967295,M=S+(D<<12&4294967295|D>>>20),D=A+(_^M&(S^_))+R[6]+2821735955&4294967295,A=M+(D<<17&4294967295|D>>>15),D=_+(S^A&(M^S))+R[7]+4249261313&4294967295,_=A+(D<<22&4294967295|D>>>10),D=S+(M^_&(A^M))+R[8]+1770035416&4294967295,S=_+(D<<7&4294967295|D>>>25),D=M+(A^S&(_^A))+R[9]+2336552879&4294967295,M=S+(D<<12&4294967295|D>>>20),D=A+(_^M&(S^_))+R[10]+4294925233&4294967295,A=M+(D<<17&4294967295|D>>>15),D=_+(S^A&(M^S))+R[11]+2304563134&4294967295,_=A+(D<<22&4294967295|D>>>10),D=S+(M^_&(A^M))+R[12]+1804603682&4294967295,S=_+(D<<7&4294967295|D>>>25),D=M+(A^S&(_^A))+R[13]+4254626195&4294967295,M=S+(D<<12&4294967295|D>>>20),D=A+(_^M&(S^_))+R[14]+2792965006&4294967295,A=M+(D<<17&4294967295|D>>>15),D=_+(S^A&(M^S))+R[15]+1236535329&4294967295,_=A+(D<<22&4294967295|D>>>10),D=S+(A^M&(_^A))+R[1]+4129170786&4294967295,S=_+(D<<5&4294967295|D>>>27),D=M+(_^A&(S^_))+R[6]+3225465664&4294967295,M=S+(D<<9&4294967295|D>>>23),D=A+(S^_&(M^S))+R[11]+643717713&4294967295,A=M+(D<<14&4294967295|D>>>18),D=_+(M^S&(A^M))+R[0]+3921069994&4294967295,_=A+(D<<20&4294967295|D>>>12),D=S+(A^M&(_^A))+R[5]+3593408605&4294967295,S=_+(D<<5&4294967295|D>>>27),D=M+(_^A&(S^_))+R[10]+38016083&4294967295,M=S+(D<<9&4294967295|D>>>23),D=A+(S^_&(M^S))+R[15]+3634488961&4294967295,A=M+(D<<14&4294967295|D>>>18),D=_+(M^S&(A^M))+R[4]+3889429448&4294967295,_=A+(D<<20&4294967295|D>>>12),D=S+(A^M&(_^A))+R[9]+568446438&4294967295,S=_+(D<<5&4294967295|D>>>27),D=M+(_^A&(S^_))+R[14]+3275163606&4294967295,M=S+(D<<9&4294967295|D>>>23),D=A+(S^_&(M^S))+R[3]+4107603335&4294967295,A=M+(D<<14&4294967295|D>>>18),D=_+(M^S&(A^M))+R[8]+1163531501&4294967295,_=A+(D<<20&4294967295|D>>>12),D=S+(A^M&(_^A))+R[13]+2850285829&4294967295,S=_+(D<<5&4294967295|D>>>27),D=M+(_^A&(S^_))+R[2]+4243563512&4294967295,M=S+(D<<9&4294967295|D>>>23),D=A+(S^_&(M^S))+R[7]+1735328473&4294967295,A=M+(D<<14&4294967295|D>>>18),D=_+(M^S&(A^M))+R[12]+2368359562&4294967295,_=A+(D<<20&4294967295|D>>>12),D=S+(_^A^M)+R[5]+4294588738&4294967295,S=_+(D<<4&4294967295|D>>>28),D=M+(S^_^A)+R[8]+2272392833&4294967295,M=S+(D<<11&4294967295|D>>>21),D=A+(M^S^_)+R[11]+1839030562&4294967295,A=M+(D<<16&4294967295|D>>>16),D=_+(A^M^S)+R[14]+4259657740&4294967295,_=A+(D<<23&4294967295|D>>>9),D=S+(_^A^M)+R[1]+2763975236&4294967295,S=_+(D<<4&4294967295|D>>>28),D=M+(S^_^A)+R[4]+1272893353&4294967295,M=S+(D<<11&4294967295|D>>>21),D=A+(M^S^_)+R[7]+4139469664&4294967295,A=M+(D<<16&4294967295|D>>>16),D=_+(A^M^S)+R[10]+3200236656&4294967295,_=A+(D<<23&4294967295|D>>>9),D=S+(_^A^M)+R[13]+681279174&4294967295,S=_+(D<<4&4294967295|D>>>28),D=M+(S^_^A)+R[0]+3936430074&4294967295,M=S+(D<<11&4294967295|D>>>21),D=A+(M^S^_)+R[3]+3572445317&4294967295,A=M+(D<<16&4294967295|D>>>16),D=_+(A^M^S)+R[6]+76029189&4294967295,_=A+(D<<23&4294967295|D>>>9),D=S+(_^A^M)+R[9]+3654602809&4294967295,S=_+(D<<4&4294967295|D>>>28),D=M+(S^_^A)+R[12]+3873151461&4294967295,M=S+(D<<11&4294967295|D>>>21),D=A+(M^S^_)+R[15]+530742520&4294967295,A=M+(D<<16&4294967295|D>>>16),D=_+(A^M^S)+R[2]+3299628645&4294967295,_=A+(D<<23&4294967295|D>>>9),D=S+(A^(_|~M))+R[0]+4096336452&4294967295,S=_+(D<<6&4294967295|D>>>26),D=M+(_^(S|~A))+R[7]+1126891415&4294967295,M=S+(D<<10&4294967295|D>>>22),D=A+(S^(M|~_))+R[14]+2878612391&4294967295,A=M+(D<<15&4294967295|D>>>17),D=_+(M^(A|~S))+R[5]+4237533241&4294967295,_=A+(D<<21&4294967295|D>>>11),D=S+(A^(_|~M))+R[12]+1700485571&4294967295,S=_+(D<<6&4294967295|D>>>26),D=M+(_^(S|~A))+R[3]+2399980690&4294967295,M=S+(D<<10&4294967295|D>>>22),D=A+(S^(M|~_))+R[10]+4293915773&4294967295,A=M+(D<<15&4294967295|D>>>17),D=_+(M^(A|~S))+R[1]+2240044497&4294967295,_=A+(D<<21&4294967295|D>>>11),D=S+(A^(_|~M))+R[8]+1873313359&4294967295,S=_+(D<<6&4294967295|D>>>26),D=M+(_^(S|~A))+R[15]+4264355552&4294967295,M=S+(D<<10&4294967295|D>>>22),D=A+(S^(M|~_))+R[6]+2734768916&4294967295,A=M+(D<<15&4294967295|D>>>17),D=_+(M^(A|~S))+R[13]+1309151649&4294967295,_=A+(D<<21&4294967295|D>>>11),D=S+(A^(_|~M))+R[4]+4149444226&4294967295,S=_+(D<<6&4294967295|D>>>26),D=M+(_^(S|~A))+R[11]+3174756917&4294967295,M=S+(D<<10&4294967295|D>>>22),D=A+(S^(M|~_))+R[2]+718787259&4294967295,A=M+(D<<15&4294967295|D>>>17),D=_+(M^(A|~S))+R[9]+3951481745&4294967295,b.g[0]=b.g[0]+S&4294967295,b.g[1]=b.g[1]+(A+(D<<21&4294967295|D>>>11))&4294967295,b.g[2]=b.g[2]+A&4294967295,b.g[3]=b.g[3]+M&4294967295}i.prototype.u=function(b,S){S===void 0&&(S=b.length);for(var _=S-this.blockSize,R=this.B,A=this.h,M=0;M<S;){if(A==0)for(;M<=_;)s(this,b,M),M+=this.blockSize;if(typeof b=="string"){for(;M<S;)if(R[A++]=b.charCodeAt(M++),A==this.blockSize){s(this,R),A=0;break}}else for(;M<S;)if(R[A++]=b[M++],A==this.blockSize){s(this,R),A=0;break}}this.h=A,this.o+=S},i.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var S=1;S<b.length-8;++S)b[S]=0;var _=8*this.o;for(S=b.length-8;S<b.length;++S)b[S]=_&255,_/=256;for(this.u(b),b=Array(16),S=_=0;4>S;++S)for(var R=0;32>R;R+=8)b[_++]=this.g[S]>>>R&255;return b};function r(b,S){var _=a;return Object.prototype.hasOwnProperty.call(_,b)?_[b]:_[b]=S(b)}function o(b,S){this.h=S;for(var _=[],R=!0,A=b.length-1;0<=A;A--){var M=b[A]|0;R&&M==S||(_[A]=M,R=!1)}this.g=_}var a={};function l(b){return-128<=b&&128>b?r(b,function(S){return new o([S|0],0>S?-1:0)}):new o([b|0],0>b?-1:0)}function c(b){if(isNaN(b)||!isFinite(b))return h;if(0>b)return C(c(-b));for(var S=[],_=1,R=0;b>=_;R++)S[R]=b/_|0,_*=4294967296;return new o(S,0)}function u(b,S){if(b.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(b.charAt(0)=="-")return C(u(b.substring(1),S));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=c(Math.pow(S,8)),R=h,A=0;A<b.length;A+=8){var M=Math.min(8,b.length-A),D=parseInt(b.substring(A,A+M),S);8>M?(M=c(Math.pow(S,M)),R=R.j(M).add(c(D))):(R=R.j(_),R=R.add(c(D)))}return R}var h=l(0),f=l(1),g=l(16777216);e=o.prototype,e.m=function(){if(y(this))return-C(this).m();for(var b=0,S=1,_=0;_<this.g.length;_++){var R=this.i(_);b+=(0<=R?R:4294967296+R)*S,S*=4294967296}return b},e.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(v(this))return"0";if(y(this))return"-"+C(this).toString(b);for(var S=c(Math.pow(b,6)),_=this,R="";;){var A=x(_,S).g;_=E(_,A.j(S));var M=((0<_.g.length?_.g[0]:_.h)>>>0).toString(b);if(_=A,v(_))return M+R;for(;6>M.length;)M="0"+M;R=M+R}},e.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function v(b){if(b.h!=0)return!1;for(var S=0;S<b.g.length;S++)if(b.g[S]!=0)return!1;return!0}function y(b){return b.h==-1}e.l=function(b){return b=E(this,b),y(b)?-1:v(b)?0:1};function C(b){for(var S=b.g.length,_=[],R=0;R<S;R++)_[R]=~b.g[R];return new o(_,~b.h).add(f)}e.abs=function(){return y(this)?C(this):this},e.add=function(b){for(var S=Math.max(this.g.length,b.g.length),_=[],R=0,A=0;A<=S;A++){var M=R+(this.i(A)&65535)+(b.i(A)&65535),D=(M>>>16)+(this.i(A)>>>16)+(b.i(A)>>>16);R=D>>>16,M&=65535,D&=65535,_[A]=D<<16|M}return new o(_,_[_.length-1]&-2147483648?-1:0)};function E(b,S){return b.add(C(S))}e.j=function(b){if(v(this)||v(b))return h;if(y(this))return y(b)?C(this).j(C(b)):C(C(this).j(b));if(y(b))return C(this.j(C(b)));if(0>this.l(g)&&0>b.l(g))return c(this.m()*b.m());for(var S=this.g.length+b.g.length,_=[],R=0;R<2*S;R++)_[R]=0;for(R=0;R<this.g.length;R++)for(var A=0;A<b.g.length;A++){var M=this.i(R)>>>16,D=this.i(R)&65535,mn=b.i(A)>>>16,ui=b.i(A)&65535;_[2*R+2*A]+=D*ui,I(_,2*R+2*A),_[2*R+2*A+1]+=M*ui,I(_,2*R+2*A+1),_[2*R+2*A+1]+=D*mn,I(_,2*R+2*A+1),_[2*R+2*A+2]+=M*mn,I(_,2*R+2*A+2)}for(R=0;R<S;R++)_[R]=_[2*R+1]<<16|_[2*R];for(R=S;R<2*S;R++)_[R]=0;return new o(_,0)};function I(b,S){for(;(b[S]&65535)!=b[S];)b[S+1]+=b[S]>>>16,b[S]&=65535,S++}function T(b,S){this.g=b,this.h=S}function x(b,S){if(v(S))throw Error("division by zero");if(v(b))return new T(h,h);if(y(b))return S=x(C(b),S),new T(C(S.g),C(S.h));if(y(S))return S=x(b,C(S)),new T(C(S.g),S.h);if(30<b.g.length){if(y(b)||y(S))throw Error("slowDivide_ only works with positive integers.");for(var _=f,R=S;0>=R.l(b);)_=z(_),R=z(R);var A=V(_,1),M=V(R,1);for(R=V(R,2),_=V(_,2);!v(R);){var D=M.add(R);0>=D.l(b)&&(A=A.add(_),M=D),R=V(R,1),_=V(_,1)}return S=E(b,A.j(S)),new T(A,S)}for(A=h;0<=b.l(S);){for(_=Math.max(1,Math.floor(b.m()/S.m())),R=Math.ceil(Math.log(_)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),M=c(_),D=M.j(S);y(D)||0<D.l(b);)_-=R,M=c(_),D=M.j(S);v(M)&&(M=f),A=A.add(M),b=E(b,D)}return new T(A,b)}e.A=function(b){return x(this,b).h},e.and=function(b){for(var S=Math.max(this.g.length,b.g.length),_=[],R=0;R<S;R++)_[R]=this.i(R)&b.i(R);return new o(_,this.h&b.h)},e.or=function(b){for(var S=Math.max(this.g.length,b.g.length),_=[],R=0;R<S;R++)_[R]=this.i(R)|b.i(R);return new o(_,this.h|b.h)},e.xor=function(b){for(var S=Math.max(this.g.length,b.g.length),_=[],R=0;R<S;R++)_[R]=this.i(R)^b.i(R);return new o(_,this.h^b.h)};function z(b){for(var S=b.g.length+1,_=[],R=0;R<S;R++)_[R]=b.i(R)<<1|b.i(R-1)>>>31;return new o(_,b.h)}function V(b,S){var _=S>>5;S%=32;for(var R=b.g.length-_,A=[],M=0;M<R;M++)A[M]=0<S?b.i(M+_)>>>S|b.i(M+_+1)<<32-S:b.i(M+_);return new o(A,b.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,g0=fk.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Lo=fk.Integer=o}).apply(typeof hk<"u"?hk:typeof self<"u"?self:typeof window<"u"?window:{});var rv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Or={};var m0,v0,Yc,C0,Nh,ov,y0,w0,S0;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,p,m){return d==Array.prototype||d==Object.prototype||(d[p]=m.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof rv=="object"&&rv];for(var p=0;p<d.length;++p){var m=d[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var i=n(this);function s(d,p){if(p)e:{var m=i;d=d.split(".");for(var w=0;w<d.length-1;w++){var P=d[w];if(!(P in m))break e;m=m[P]}d=d[d.length-1],w=m[d],p=p(w),p!=w&&p!=null&&t(m,d,{configurable:!0,writable:!0,value:p})}}function r(d,p){d instanceof String&&(d+="");var m=0,w=!1,P={next:function(){if(!w&&m<d.length){var L=m++;return{value:p(L,d[L]),done:!1}}return w=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}s("Array.prototype.values",function(d){return d||function(){return r(this,function(p,m){return m})}});var o=o||{},a=this||self;function l(d){var p=typeof d;return p=p!="object"?p:d?Array.isArray(d)?"array":p:"null",p=="array"||p=="object"&&typeof d.length=="number"}function c(d){var p=typeof d;return p=="object"&&d!=null||p=="function"}function u(d,p,m){return d.call.apply(d.bind,arguments)}function h(d,p,m){if(!d)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,w),d.apply(p,P)}}return function(){return d.apply(p,arguments)}}function f(d,p,m){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,f.apply(null,arguments)}function g(d,p){var m=Array.prototype.slice.call(arguments,1);return function(){var w=m.slice();return w.push.apply(w,arguments),d.apply(this,w)}}function v(d,p){function m(){}m.prototype=p.prototype,d.aa=p.prototype,d.prototype=new m,d.prototype.constructor=d,d.Qb=function(w,P,L){for(var Q=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)Q[rt-2]=arguments[rt];return p.prototype[P].apply(w,Q)}}function y(d){let p=d.length;if(0<p){let m=Array(p);for(let w=0;w<p;w++)m[w]=d[w];return m}return[]}function C(d,p){for(let m=1;m<arguments.length;m++){let w=arguments[m];if(l(w)){let P=d.length||0,L=w.length||0;d.length=P+L;for(let Q=0;Q<L;Q++)d[P+Q]=w[Q]}else d.push(w)}}class E{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function I(d){return/^[\s\xa0]*$/.test(d)}function T(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function x(d){return x[" "](d),d}x[" "]=function(){};var z=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function V(d,p,m){for(let w in d)p.call(m,d[w],w,d)}function b(d,p){for(let m in d)p.call(void 0,d[m],m,d)}function S(d){let p={};for(let m in d)p[m]=d[m];return p}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(d,p){let m,w;for(let P=1;P<arguments.length;P++){w=arguments[P];for(m in w)d[m]=w[m];for(let L=0;L<_.length;L++)m=_[L],Object.prototype.hasOwnProperty.call(w,m)&&(d[m]=w[m])}}function A(d){var p=1;d=d.split(":");let m=[];for(;0<p&&d.length;)m.push(d.shift()),p--;return d.length&&m.push(d.join(":")),m}function M(d){a.setTimeout(()=>{throw d},0)}function D(){var d=ts;let p=null;return d.g&&(p=d.g,d.g=d.g.next,d.g||(d.h=null),p.next=null),p}class mn{constructor(){this.h=this.g=null}add(p,m){let w=ui.get();w.set(p,m),this.h?this.h.next=w:this.g=w,this.h=w}}var ui=new E(()=>new Ln,d=>d.reset());class Ln{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let vn,Is=!1,ts=new mn,Zo=()=>{let d=a.Promise.resolve(void 0);vn=()=>{d.then(Yu)}};var Yu=()=>{for(var d;d=D();){try{d.h.call(d.g)}catch(m){M(m)}var p=ui;p.j(d),100>p.h&&(p.h++,d.next=p.g,p.g=d)}Is=!1};function ti(){this.s=this.s,this.C=this.C}ti.prototype.s=!1,ti.prototype.ma=function(){this.s||(this.s=!0,this.N())},ti.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Mt(d,p){this.type=d,this.g=this.target=p,this.defaultPrevented=!1}Mt.prototype.h=function(){this.defaultPrevented=!0};var eo=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,p=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let m=()=>{};a.addEventListener("test",m,p),a.removeEventListener("test",m,p)}catch{}return d}();function ni(d,p){if(Mt.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var m=this.type=d.type,w=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=p,p=d.relatedTarget){if(z){e:{try{x(p.nodeName);var P=!0;break e}catch{}P=!1}P||(p=null)}}else m=="mouseover"?p=d.fromElement:m=="mouseout"&&(p=d.toElement);this.relatedTarget=p,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:ea[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&ni.aa.h.call(this)}}v(ni,Mt);var ea={2:"touch",3:"pen",4:"mouse"};ni.prototype.h=function(){ni.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var As="closure_listenable_"+(1e6*Math.random()|0),ar=0;function Ju(d,p,m,w,P){this.listener=d,this.proxy=null,this.src=p,this.type=m,this.capture=!!w,this.ha=P,this.key=++ar,this.da=this.fa=!1}function Ol(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function to(d){this.src=d,this.g={},this.h=0}to.prototype.add=function(d,p,m,w,P){var L=d.toString();d=this.g[L],d||(d=this.g[L]=[],this.h++);var Q=Nl(d,p,w,P);return-1<Q?(p=d[Q],m||(p.fa=!1)):(p=new Ju(p,this.src,L,!!w,P),p.fa=m,d.push(p)),p};function Xu(d,p){var m=p.type;if(m in d.g){var w=d.g[m],P=Array.prototype.indexOf.call(w,p,void 0),L;(L=0<=P)&&Array.prototype.splice.call(w,P,1),L&&(Ol(p),d.g[m].length==0&&(delete d.g[m],d.h--))}}function Nl(d,p,m,w){for(var P=0;P<d.length;++P){var L=d[P];if(!L.da&&L.listener==p&&L.capture==!!m&&L.ha==w)return P}return-1}var Zu="closure_lm_"+(1e6*Math.random()|0),ed={};function td(d,p,m,w,P){if(w&&w.once)return $f(d,p,m,w,P);if(Array.isArray(p)){for(var L=0;L<p.length;L++)td(d,p[L],m,w,P);return null}return m=Ll(m),d&&d[As]?d.K(p,m,c(w)?!!w.capture:!!w,P):nd(d,p,m,!1,w,P)}function nd(d,p,m,w,P,L){if(!p)throw Error("Invalid event type");var Q=c(P)?!!P.capture:!!P,rt=ta(d);if(rt||(d[Zu]=rt=new to(d)),m=rt.add(p,m,w,Q,L),m.proxy)return m;if(w=ay(),m.proxy=w,w.src=d,w.listener=m,d.addEventListener)eo||(P=Q),P===void 0&&(P=!1),d.addEventListener(p.toString(),w,P);else if(d.attachEvent)d.attachEvent(id(p.toString()),w);else if(d.addListener&&d.removeListener)d.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ay(){function d(m){return p.call(d.src,d.listener,m)}let p=qf;return d}function $f(d,p,m,w,P){if(Array.isArray(p)){for(var L=0;L<p.length;L++)$f(d,p[L],m,w,P);return null}return m=Ll(m),d&&d[As]?d.L(p,m,c(w)?!!w.capture:!!w,P):nd(d,p,m,!0,w,P)}function Ms(d,p,m,w,P){if(Array.isArray(p))for(var L=0;L<p.length;L++)Ms(d,p[L],m,w,P);else w=c(w)?!!w.capture:!!w,m=Ll(m),d&&d[As]?(d=d.i,p=String(p).toString(),p in d.g&&(L=d.g[p],m=Nl(L,m,w,P),-1<m&&(Ol(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete d.g[p],d.h--)))):d&&(d=ta(d))&&(p=d.g[p.toString()],d=-1,p&&(d=Nl(p,m,w,P)),(m=-1<d?p[d]:null)&&no(m))}function no(d){if(typeof d!="number"&&d&&!d.da){var p=d.src;if(p&&p[As])Xu(p.i,d);else{var m=d.type,w=d.proxy;p.removeEventListener?p.removeEventListener(m,w,d.capture):p.detachEvent?p.detachEvent(id(m),w):p.addListener&&p.removeListener&&p.removeListener(w),(m=ta(p))?(Xu(m,d),m.h==0&&(m.src=null,p[Zu]=null)):Ol(d)}}}function id(d){return d in ed?ed[d]:ed[d]="on"+d}function qf(d,p){if(d.da)d=!0;else{p=new ni(p,this);var m=d.listener,w=d.ha||d.src;d.fa&&no(d),d=m.call(w,p)}return d}function ta(d){return d=d[Zu],d instanceof to?d:null}var kl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ll(d){return typeof d=="function"?d:(d[kl]||(d[kl]=function(p){return d.handleEvent(p)}),d[kl])}function Wt(){ti.call(this),this.i=new to(this),this.M=this,this.F=null}v(Wt,ti),Wt.prototype[As]=!0,Wt.prototype.removeEventListener=function(d,p,m,w){Ms(this,d,p,m,w)};function en(d,p){var m,w=d.F;if(w)for(m=[];w;w=w.F)m.push(w);if(d=d.M,w=p.type||p,typeof p=="string")p=new Mt(p,d);else if(p instanceof Mt)p.target=p.target||d;else{var P=p;p=new Mt(w,d),R(p,P)}if(P=!0,m)for(var L=m.length-1;0<=L;L--){var Q=p.g=m[L];P=Kf(Q,w,!0,p)&&P}if(Q=p.g=d,P=Kf(Q,w,!0,p)&&P,P=Kf(Q,w,!1,p)&&P,m)for(L=0;L<m.length;L++)Q=p.g=m[L],P=Kf(Q,w,!1,p)&&P}Wt.prototype.N=function(){if(Wt.aa.N.call(this),this.i){var d=this.i,p;for(p in d.g){for(var m=d.g[p],w=0;w<m.length;w++)Ol(m[w]);delete d.g[p],d.h--}}this.F=null},Wt.prototype.K=function(d,p,m,w){return this.i.add(String(d),p,!1,m,w)},Wt.prototype.L=function(d,p,m,w){return this.i.add(String(d),p,!0,m,w)};function Kf(d,p,m,w){if(p=d.i.g[String(p)],!p)return!0;p=p.concat();for(var P=!0,L=0;L<p.length;++L){var Q=p[L];if(Q&&!Q.da&&Q.capture==m){var rt=Q.listener,Cn=Q.ha||Q.src;Q.fa&&Xu(d.i,Q),P=rt.call(Cn,w)!==!1&&P}}return P&&!w.defaultPrevented}function cA(d,p,m){if(typeof d=="function")m&&(d=f(d,m));else if(d&&typeof d.handleEvent=="function")d=f(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(d,p||0)}function uA(d){d.g=cA(()=>{d.g=null,d.i&&(d.i=!1,uA(d))},d.l);let p=d.h;d.h=null,d.m.apply(null,p)}class MW extends ti{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:uA(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sd(d){ti.call(this),this.h=d,this.g={}}v(sd,ti);var dA=[];function hA(d){V(d.g,function(p,m){this.g.hasOwnProperty(m)&&no(p)},d),d.g={}}sd.prototype.N=function(){sd.aa.N.call(this),hA(this)},sd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ly=a.JSON.stringify,PW=a.JSON.parse,FW=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function cy(){}cy.prototype.h=null;function fA(d){return d.h||(d.h=d.i())}function pA(){}var rd={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function uy(){Mt.call(this,"d")}v(uy,Mt);function dy(){Mt.call(this,"c")}v(dy,Mt);var na={},gA=null;function Qf(){return gA=gA||new Wt}na.La="serverreachability";function mA(d){Mt.call(this,na.La,d)}v(mA,Mt);function od(d){let p=Qf();en(p,new mA(p))}na.STAT_EVENT="statevent";function vA(d,p){Mt.call(this,na.STAT_EVENT,d),this.stat=p}v(vA,Mt);function Vn(d){let p=Qf();en(p,new vA(p,d))}na.Ma="timingevent";function CA(d,p){Mt.call(this,na.Ma,d),this.size=p}v(CA,Mt);function ad(d,p){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},p)}function ld(){this.g=!0}ld.prototype.xa=function(){this.g=!1};function xW(d,p,m,w,P,L){d.info(function(){if(d.g)if(L)for(var Q="",rt=L.split("&"),Cn=0;Cn<rt.length;Cn++){var Ye=rt[Cn].split("=");if(1<Ye.length){var Rn=Ye[0];Ye=Ye[1];var Tn=Rn.split("_");Q=2<=Tn.length&&Tn[1]=="type"?Q+(Rn+"="+Ye+"&"):Q+(Rn+"=redacted&")}}else Q=null;else Q=L;return"XMLHTTP REQ ("+w+") [attempt "+P+"]: "+p+`
`+m+`
`+Q})}function OW(d,p,m,w,P,L,Q){d.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+P+"]: "+p+`
`+m+`
`+L+" "+Q})}function Vl(d,p,m,w){d.info(function(){return"XMLHTTP TEXT ("+p+"): "+kW(d,m)+(w?" "+w:"")})}function NW(d,p){d.info(function(){return"TIMEOUT: "+p})}ld.prototype.info=function(){};function kW(d,p){if(!d.g)return p;if(!p)return null;try{var m=JSON.parse(p);if(m){for(d=0;d<m.length;d++)if(Array.isArray(m[d])){var w=m[d];if(!(2>w.length)){var P=w[1];if(Array.isArray(P)&&!(1>P.length)){var L=P[0];if(L!="noop"&&L!="stop"&&L!="close")for(var Q=1;Q<P.length;Q++)P[Q]=""}}}}return ly(m)}catch{return p}}var Yf={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yA={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hy;function Jf(){}v(Jf,cy),Jf.prototype.g=function(){return new XMLHttpRequest},Jf.prototype.i=function(){return{}},hy=new Jf;function io(d,p,m,w){this.j=d,this.i=p,this.l=m,this.R=w||1,this.U=new sd(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new wA}function wA(){this.i=null,this.g="",this.h=!1}var SA={},fy={};function py(d,p,m){d.L=1,d.v=tp(lr(p)),d.m=m,d.P=!0,_A(d,null)}function _A(d,p){d.F=Date.now(),Xf(d),d.A=lr(d.v);var m=d.A,w=d.R;Array.isArray(w)||(w=[String(w)]),kA(m.i,"t",w),d.C=0,m=d.j.J,d.h=new wA,d.g=eM(d.j,m?p:null,!d.m),0<d.O&&(d.M=new MW(f(d.Y,d,d.g),d.O)),p=d.U,m=d.g,w=d.ca;var P="readystatechange";Array.isArray(P)||(P&&(dA[0]=P.toString()),P=dA);for(var L=0;L<P.length;L++){var Q=td(m,P[L],w||p.handleEvent,!1,p.h||p);if(!Q)break;p.g[Q.key]=Q}p=d.H?S(d.H):{},d.m?(d.u||(d.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,p)):(d.u="GET",d.g.ea(d.A,d.u,null,p)),od(),xW(d.i,d.u,d.A,d.l,d.R,d.m)}io.prototype.ca=function(d){d=d.target;let p=this.M;p&&cr(d)==3?p.j():this.Y(d)},io.prototype.Y=function(d){try{if(d==this.g)e:{let Tn=cr(this.g);var p=this.g.Ba();let Hl=this.g.Z();if(!(3>Tn)&&(Tn!=3||this.g&&(this.h.h||this.g.oa()||WA(this.g)))){this.J||Tn!=4||p==7||(p==8||0>=Hl?od(3):od(2)),gy(this);var m=this.g.Z();this.X=m;t:if(bA(this)){var w=WA(this.g);d="";var P=w.length,L=cr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ia(this),cd(this);var Q="";break t}this.h.i=new a.TextDecoder}for(p=0;p<P;p++)this.h.h=!0,d+=this.h.i.decode(w[p],{stream:!(L&&p==P-1)});w.length=0,this.h.g+=d,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=m==200,OW(this.i,this.u,this.A,this.l,this.R,Tn,m),this.o){if(this.T&&!this.K){t:{if(this.g){var rt,Cn=this.g;if((rt=Cn.g?Cn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(rt)){var Ye=rt;break t}}Ye=null}if(m=Ye)Vl(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,my(this,m);else{this.o=!1,this.s=3,Vn(12),ia(this),cd(this);break e}}if(this.P){m=!0;let ns;for(;!this.J&&this.C<Q.length;)if(ns=LW(this,Q),ns==fy){Tn==4&&(this.s=4,Vn(14),m=!1),Vl(this.i,this.l,null,"[Incomplete Response]");break}else if(ns==SA){this.s=4,Vn(15),Vl(this.i,this.l,Q,"[Invalid Chunk]"),m=!1;break}else Vl(this.i,this.l,ns,null),my(this,ns);if(bA(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Tn!=4||Q.length!=0||this.h.h||(this.s=1,Vn(16),m=!1),this.o=this.o&&m,!m)Vl(this.i,this.l,Q,"[Invalid Chunked Response]"),ia(this),cd(this);else if(0<Q.length&&!this.W){this.W=!0;var Rn=this.j;Rn.g==this&&Rn.ba&&!Rn.M&&(Rn.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),_y(Rn),Rn.M=!0,Vn(11))}}else Vl(this.i,this.l,Q,null),my(this,Q);Tn==4&&ia(this),this.o&&!this.J&&(Tn==4?YA(this.j,this):(this.o=!1,Xf(this)))}else ej(this.g),m==400&&0<Q.indexOf("Unknown SID")?(this.s=3,Vn(12)):(this.s=0,Vn(13)),ia(this),cd(this)}}}catch{}finally{}};function bA(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function LW(d,p){var m=d.C,w=p.indexOf(`
`,m);return w==-1?fy:(m=Number(p.substring(m,w)),isNaN(m)?SA:(w+=1,w+m>p.length?fy:(p=p.slice(w,w+m),d.C=w+m,p)))}io.prototype.cancel=function(){this.J=!0,ia(this)};function Xf(d){d.S=Date.now()+d.I,EA(d,d.I)}function EA(d,p){if(d.B!=null)throw Error("WatchDog timer not null");d.B=ad(f(d.ba,d),p)}function gy(d){d.B&&(a.clearTimeout(d.B),d.B=null)}io.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(NW(this.i,this.A),this.L!=2&&(od(),Vn(17)),ia(this),this.s=2,cd(this)):EA(this,this.S-d)};function cd(d){d.j.G==0||d.J||YA(d.j,d)}function ia(d){gy(d);var p=d.M;p&&typeof p.ma=="function"&&p.ma(),d.M=null,hA(d.U),d.g&&(p=d.g,d.g=null,p.abort(),p.ma())}function my(d,p){try{var m=d.j;if(m.G!=0&&(m.g==d||vy(m.h,d))){if(!d.K&&vy(m.h,d)&&m.G==3){try{var w=m.Da.g.parse(p)}catch{w=null}if(Array.isArray(w)&&w.length==3){var P=w;if(P[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<d.F)op(m),sp(m);else break e;Sy(m),Vn(18)}}else m.za=P[1],0<m.za-m.T&&37500>P[2]&&m.F&&m.v==0&&!m.C&&(m.C=ad(f(m.Za,m),6e3));if(1>=TA(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ra(m,11)}else if((d.K||m.g==d)&&op(m),!I(p))for(P=m.Da.g.parse(p),p=0;p<P.length;p++){let Ye=P[p];if(m.T=Ye[0],Ye=Ye[1],m.G==2)if(Ye[0]=="c"){m.K=Ye[1],m.ia=Ye[2];let Rn=Ye[3];Rn!=null&&(m.la=Rn,m.j.info("VER="+m.la));let Tn=Ye[4];Tn!=null&&(m.Aa=Tn,m.j.info("SVER="+m.Aa));let Hl=Ye[5];Hl!=null&&typeof Hl=="number"&&0<Hl&&(w=1.5*Hl,m.L=w,m.j.info("backChannelRequestTimeoutMs_="+w)),w=m;let ns=d.g;if(ns){let lp=ns.g?ns.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(lp){var L=w.h;L.g||lp.indexOf("spdy")==-1&&lp.indexOf("quic")==-1&&lp.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Cy(L,L.h),L.h=null))}if(w.D){let by=ns.g?ns.g.getResponseHeader("X-HTTP-Session-Id"):null;by&&(w.ya=by,ht(w.I,w.D,by))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-d.F,m.j.info("Handshake RTT: "+m.R+"ms")),w=m;var Q=d;if(w.qa=ZA(w,w.J?w.ia:null,w.W),Q.K){IA(w.h,Q);var rt=Q,Cn=w.L;Cn&&(rt.I=Cn),rt.B&&(gy(rt),Xf(rt)),w.g=Q}else KA(w);0<m.i.length&&rp(m)}else Ye[0]!="stop"&&Ye[0]!="close"||ra(m,7);else m.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?ra(m,7):wy(m):Ye[0]!="noop"&&m.l&&m.l.ta(Ye),m.v=0)}}od(4)}catch{}}var VW=class{constructor(d,p){this.g=d,this.map=p}};function DA(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function RA(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function TA(d){return d.h?1:d.g?d.g.size:0}function vy(d,p){return d.h?d.h==p:d.g?d.g.has(p):!1}function Cy(d,p){d.g?d.g.add(p):d.h=p}function IA(d,p){d.h&&d.h==p?d.h=null:d.g&&d.g.has(p)&&d.g.delete(p)}DA.prototype.cancel=function(){if(this.i=AA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function AA(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let p=d.i;for(let m of d.g.values())p=p.concat(m.D);return p}return y(d.i)}function BW(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var p=[],m=d.length,w=0;w<m;w++)p.push(d[w]);return p}p=[],m=0;for(w in d)p[m++]=d[w];return p}function GW(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var p=[];d=d.length;for(var m=0;m<d;m++)p.push(m);return p}p=[],m=0;for(let w in d)p[m++]=w;return p}}}function MA(d,p){if(d.forEach&&typeof d.forEach=="function")d.forEach(p,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,p,void 0);else for(var m=GW(d),w=BW(d),P=w.length,L=0;L<P;L++)p.call(void 0,w[L],m&&m[L],d)}var PA=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function HW(d,p){if(d){d=d.split("&");for(var m=0;m<d.length;m++){var w=d[m].indexOf("="),P=null;if(0<=w){var L=d[m].substring(0,w);P=d[m].substring(w+1)}else L=d[m];p(L,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function sa(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof sa){this.h=d.h,Zf(this,d.j),this.o=d.o,this.g=d.g,ep(this,d.s),this.l=d.l;var p=d.i,m=new hd;m.i=p.i,p.g&&(m.g=new Map(p.g),m.h=p.h),FA(this,m),this.m=d.m}else d&&(p=String(d).match(PA))?(this.h=!1,Zf(this,p[1]||"",!0),this.o=ud(p[2]||""),this.g=ud(p[3]||"",!0),ep(this,p[4]),this.l=ud(p[5]||"",!0),FA(this,p[6]||"",!0),this.m=ud(p[7]||"")):(this.h=!1,this.i=new hd(null,this.h))}sa.prototype.toString=function(){var d=[],p=this.j;p&&d.push(dd(p,xA,!0),":");var m=this.g;return(m||p=="file")&&(d.push("//"),(p=this.o)&&d.push(dd(p,xA,!0),"@"),d.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&d.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&d.push("/"),d.push(dd(m,m.charAt(0)=="/"?jW:WW,!0))),(m=this.i.toString())&&d.push("?",m),(m=this.m)&&d.push("#",dd(m,$W)),d.join("")};function lr(d){return new sa(d)}function Zf(d,p,m){d.j=m?ud(p,!0):p,d.j&&(d.j=d.j.replace(/:$/,""))}function ep(d,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);d.s=p}else d.s=null}function FA(d,p,m){p instanceof hd?(d.i=p,qW(d.i,d.h)):(m||(p=dd(p,zW)),d.i=new hd(p,d.h))}function ht(d,p,m){d.i.set(p,m)}function tp(d){return ht(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function ud(d,p){return d?p?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function dd(d,p,m){return typeof d=="string"?(d=encodeURI(d).replace(p,UW),m&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function UW(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var xA=/[#\/\?@]/g,WW=/[#\?:]/g,jW=/[#\?]/g,zW=/[#\?@]/g,$W=/#/g;function hd(d,p){this.h=this.g=null,this.i=d||null,this.j=!!p}function so(d){d.g||(d.g=new Map,d.h=0,d.i&&HW(d.i,function(p,m){d.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}e=hd.prototype,e.add=function(d,p){so(this),this.i=null,d=Bl(this,d);var m=this.g.get(d);return m||this.g.set(d,m=[]),m.push(p),this.h+=1,this};function OA(d,p){so(d),p=Bl(d,p),d.g.has(p)&&(d.i=null,d.h-=d.g.get(p).length,d.g.delete(p))}function NA(d,p){return so(d),p=Bl(d,p),d.g.has(p)}e.forEach=function(d,p){so(this),this.g.forEach(function(m,w){m.forEach(function(P){d.call(p,P,w,this)},this)},this)},e.na=function(){so(this);let d=Array.from(this.g.values()),p=Array.from(this.g.keys()),m=[];for(let w=0;w<p.length;w++){let P=d[w];for(let L=0;L<P.length;L++)m.push(p[w])}return m},e.V=function(d){so(this);let p=[];if(typeof d=="string")NA(this,d)&&(p=p.concat(this.g.get(Bl(this,d))));else{d=Array.from(this.g.values());for(let m=0;m<d.length;m++)p=p.concat(d[m])}return p},e.set=function(d,p){return so(this),this.i=null,d=Bl(this,d),NA(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[p]),this.h+=1,this},e.get=function(d,p){return d?(d=this.V(d),0<d.length?String(d[0]):p):p};function kA(d,p,m){OA(d,p),0<m.length&&(d.i=null,d.g.set(Bl(d,p),y(m)),d.h+=m.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],p=Array.from(this.g.keys());for(var m=0;m<p.length;m++){var w=p[m];let L=encodeURIComponent(String(w)),Q=this.V(w);for(w=0;w<Q.length;w++){var P=L;Q[w]!==""&&(P+="="+encodeURIComponent(String(Q[w]))),d.push(P)}}return this.i=d.join("&")};function Bl(d,p){return p=String(p),d.j&&(p=p.toLowerCase()),p}function qW(d,p){p&&!d.j&&(so(d),d.i=null,d.g.forEach(function(m,w){var P=w.toLowerCase();w!=P&&(OA(this,w),kA(this,P,m))},d)),d.j=p}function KW(d,p){let m=new ld;if(a.Image){let w=new Image;w.onload=g(ro,m,"TestLoadImage: loaded",!0,p,w),w.onerror=g(ro,m,"TestLoadImage: error",!1,p,w),w.onabort=g(ro,m,"TestLoadImage: abort",!1,p,w),w.ontimeout=g(ro,m,"TestLoadImage: timeout",!1,p,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=d}else p(!1)}function QW(d,p){let m=new ld,w=new AbortController,P=setTimeout(()=>{w.abort(),ro(m,"TestPingServer: timeout",!1,p)},1e4);fetch(d,{signal:w.signal}).then(L=>{clearTimeout(P),L.ok?ro(m,"TestPingServer: ok",!0,p):ro(m,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(P),ro(m,"TestPingServer: error",!1,p)})}function ro(d,p,m,w,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),w(m)}catch{}}function YW(){this.g=new FW}function JW(d,p,m){let w=m||"";try{MA(d,function(P,L){let Q=P;c(P)&&(Q=ly(P)),p.push(w+L+"="+encodeURIComponent(Q))})}catch(P){throw p.push(w+"type="+encodeURIComponent("_badmap")),P}}function fd(d){this.l=d.Ub||null,this.j=d.eb||!1}v(fd,cy),fd.prototype.g=function(){return new np(this.l,this.j)},fd.prototype.i=function(d){return function(){return d}}({});function np(d,p){Wt.call(this),this.D=d,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(np,Wt),e=np.prototype,e.open=function(d,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=p,this.readyState=1,gd(this)},e.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(p.body=d),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pd(this)),this.readyState=0},e.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,gd(this)),this.g&&(this.readyState=3,gd(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;LA(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function LA(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}e.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var p=d.value?d.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!d.done}))&&(this.response=this.responseText+=p)}d.done?pd(this):gd(this),this.readyState==3&&LA(this)}},e.Ra=function(d){this.g&&(this.response=this.responseText=d,pd(this))},e.Qa=function(d){this.g&&(this.response=d,pd(this))},e.ga=function(){this.g&&pd(this)};function pd(d){d.readyState=4,d.l=null,d.j=null,d.v=null,gd(d)}e.setRequestHeader=function(d,p){this.u.append(d,p)},e.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],p=this.h.entries();for(var m=p.next();!m.done;)m=m.value,d.push(m[0]+": "+m[1]),m=p.next();return d.join(`\r
`)};function gd(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(np.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function VA(d){let p="";return V(d,function(m,w){p+=w,p+=":",p+=m,p+=`\r
`}),p}function yy(d,p,m){e:{for(w in m){var w=!1;break e}w=!0}w||(m=VA(m),typeof d=="string"?m!=null&&encodeURIComponent(String(m)):ht(d,p,m))}function _t(d){Wt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(_t,Wt);var XW=/^https?$/i,ZW=["POST","PUT"];e=_t.prototype,e.Ha=function(d){this.J=d},e.ea=function(d,p,m,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);p=p?p.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hy.g(),this.v=this.o?fA(this.o):fA(hy),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(d),!0),this.B=!1}catch(L){BA(this,L);return}if(d=m||"",m=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var P in w)m.set(P,w[P]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(let L of w.keys())m.set(L,w.get(L));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),P=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(ZW,p,void 0))||w||P||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[L,Q]of m)this.g.setRequestHeader(L,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{UA(this),this.u=!0,this.g.send(d),this.u=!1}catch(L){BA(this,L)}};function BA(d,p){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=p,d.m=5,GA(d),ip(d)}function GA(d){d.A||(d.A=!0,en(d,"complete"),en(d,"error"))}e.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,en(this,"complete"),en(this,"abort"),ip(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ip(this,!0)),_t.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?HA(this):this.bb())},e.bb=function(){HA(this)};function HA(d){if(d.h&&typeof o<"u"&&(!d.v[1]||cr(d)!=4||d.Z()!=2)){if(d.u&&cr(d)==4)cA(d.Ea,0,d);else if(en(d,"readystatechange"),cr(d)==4){d.h=!1;try{let Q=d.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var m;if(!(m=p)){var w;if(w=Q===0){var P=String(d.D).match(PA)[1]||null;!P&&a.self&&a.self.location&&(P=a.self.location.protocol.slice(0,-1)),w=!XW.test(P?P.toLowerCase():"")}m=w}if(m)en(d,"complete"),en(d,"success");else{d.m=6;try{var L=2<cr(d)?d.g.statusText:""}catch{L=""}d.l=L+" ["+d.Z()+"]",GA(d)}}finally{ip(d)}}}}function ip(d,p){if(d.g){UA(d);let m=d.g,w=d.v[0]?()=>{}:null;d.g=null,d.v=null,p||en(d,"ready");try{m.onreadystatechange=w}catch{}}}function UA(d){d.I&&(a.clearTimeout(d.I),d.I=null)}e.isActive=function(){return!!this.g};function cr(d){return d.g?d.g.readyState:0}e.Z=function(){try{return 2<cr(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(d){if(this.g){var p=this.g.responseText;return d&&p.indexOf(d)==0&&(p=p.substring(d.length)),PW(p)}};function WA(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function ej(d){let p={};d=(d.g&&2<=cr(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<d.length;w++){if(I(d[w]))continue;var m=A(d[w]);let P=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let L=p[P]||[];p[P]=L,L.push(m)}b(p,function(w){return w.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function md(d,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[d]||p}function jA(d){this.Aa=0,this.i=[],this.j=new ld,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=md("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=md("baseRetryDelayMs",5e3,d),this.cb=md("retryDelaySeedMs",1e4,d),this.Wa=md("forwardChannelMaxRetries",2,d),this.wa=md("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new DA(d&&d.concurrentRequestLimit),this.Da=new YW,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=jA.prototype,e.la=8,e.G=1,e.connect=function(d,p,m,w){Vn(0),this.W=d,this.H=p||{},m&&w!==void 0&&(this.H.OSID=m,this.H.OAID=w),this.F=this.X,this.I=ZA(this,null,this.W),rp(this)};function wy(d){if(zA(d),d.G==3){var p=d.U++,m=lr(d.I);if(ht(m,"SID",d.K),ht(m,"RID",p),ht(m,"TYPE","terminate"),vd(d,m),p=new io(d,d.j,p),p.L=2,p.v=tp(lr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=p.v,m=!0),m||(p.g=eM(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Xf(p)}XA(d)}function sp(d){d.g&&(_y(d),d.g.cancel(),d.g=null)}function zA(d){sp(d),d.u&&(a.clearTimeout(d.u),d.u=null),op(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function rp(d){if(!RA(d.h)&&!d.s){d.s=!0;var p=d.Ga;vn||Zo(),Is||(vn(),Is=!0),ts.add(p,d),d.B=0}}function tj(d,p){return TA(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=p.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=ad(f(d.Ga,d,p),JA(d,d.B)),d.B++,!0)}e.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let P=new io(this,this.j,d),L=this.o;if(this.S&&(L?(L=S(L),R(L,this.S)):L=this.S),this.m!==null||this.O||(P.H=L,L=null),this.P)e:{for(var p=0,m=0;m<this.i.length;m++){t:{var w=this.i[m];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(p+=w,4096<p){p=m;break e}if(p===4096||m===this.i.length-1){p=m+1;break e}}p=1e3}else p=1e3;p=qA(this,P,p),m=lr(this.I),ht(m,"RID",d),ht(m,"CVER",22),this.D&&ht(m,"X-HTTP-Session-Id",this.D),vd(this,m),L&&(this.O?p="headers="+encodeURIComponent(String(VA(L)))+"&"+p:this.m&&yy(m,this.m,L)),Cy(this.h,P),this.Ua&&ht(m,"TYPE","init"),this.P?(ht(m,"$req",p),ht(m,"SID","null"),P.T=!0,py(P,m,null)):py(P,m,p),this.G=2}}else this.G==3&&(d?$A(this,d):this.i.length==0||RA(this.h)||$A(this))};function $A(d,p){var m;p?m=p.l:m=d.U++;let w=lr(d.I);ht(w,"SID",d.K),ht(w,"RID",m),ht(w,"AID",d.T),vd(d,w),d.m&&d.o&&yy(w,d.m,d.o),m=new io(d,d.j,m,d.B+1),d.m===null&&(m.H=d.o),p&&(d.i=p.D.concat(d.i)),p=qA(d,m,1e3),m.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Cy(d.h,m),py(m,w,p)}function vd(d,p){d.H&&V(d.H,function(m,w){ht(p,w,m)}),d.l&&MA({},function(m,w){ht(p,w,m)})}function qA(d,p,m){m=Math.min(d.i.length,m);var w=d.l?f(d.l.Na,d.l,d):null;e:{var P=d.i;let L=-1;for(;;){let Q=["count="+m];L==-1?0<m?(L=P[0].g,Q.push("ofs="+L)):L=0:Q.push("ofs="+L);let rt=!0;for(let Cn=0;Cn<m;Cn++){let Ye=P[Cn].g,Rn=P[Cn].map;if(Ye-=L,0>Ye)L=Math.max(0,P[Cn].g-100),rt=!1;else try{JW(Rn,Q,"req"+Ye+"_")}catch{w&&w(Rn)}}if(rt){w=Q.join("&");break e}}}return d=d.i.splice(0,m),p.D=d,w}function KA(d){if(!d.g&&!d.u){d.Y=1;var p=d.Fa;vn||Zo(),Is||(vn(),Is=!0),ts.add(p,d),d.v=0}}function Sy(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=ad(f(d.Fa,d),JA(d,d.v)),d.v++,!0)}e.Fa=function(){if(this.u=null,QA(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=ad(f(this.ab,this),d)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Vn(10),sp(this),QA(this))};function _y(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function QA(d){d.g=new io(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var p=lr(d.qa);ht(p,"RID","rpc"),ht(p,"SID",d.K),ht(p,"AID",d.T),ht(p,"CI",d.F?"0":"1"),!d.F&&d.ja&&ht(p,"TO",d.ja),ht(p,"TYPE","xmlhttp"),vd(d,p),d.m&&d.o&&yy(p,d.m,d.o),d.L&&(d.g.I=d.L);var m=d.g;d=d.ia,m.L=1,m.v=tp(lr(p)),m.m=null,m.P=!0,_A(m,d)}e.Za=function(){this.C!=null&&(this.C=null,sp(this),Sy(this),Vn(19))};function op(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function YA(d,p){var m=null;if(d.g==p){op(d),_y(d),d.g=null;var w=2}else if(vy(d.h,p))m=p.D,IA(d.h,p),w=1;else return;if(d.G!=0){if(p.o)if(w==1){m=p.m?p.m.length:0,p=Date.now()-p.F;var P=d.B;w=Qf(),en(w,new CA(w,m)),rp(d)}else KA(d);else if(P=p.s,P==3||P==0&&0<p.X||!(w==1&&tj(d,p)||w==2&&Sy(d)))switch(m&&0<m.length&&(p=d.h,p.i=p.i.concat(m)),P){case 1:ra(d,5);break;case 4:ra(d,10);break;case 3:ra(d,6);break;default:ra(d,2)}}}function JA(d,p){let m=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(m*=2),m*p}function ra(d,p){if(d.j.info("Error code "+p),p==2){var m=f(d.fb,d),w=d.Xa;let P=!w;w=new sa(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Zf(w,"https"),tp(w),P?KW(w.toString(),m):QW(w.toString(),m)}else Vn(2);d.G=0,d.l&&d.l.sa(p),XA(d),zA(d)}e.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Vn(2)):(this.j.info("Failed to ping google.com"),Vn(1))};function XA(d){if(d.G=0,d.ka=[],d.l){let p=AA(d.h);(p.length!=0||d.i.length!=0)&&(C(d.ka,p),C(d.ka,d.i),d.h.i.length=0,y(d.i),d.i.length=0),d.l.ra()}}function ZA(d,p,m){var w=m instanceof sa?lr(m):new sa(m);if(w.g!="")p&&(w.g=p+"."+w.g),ep(w,w.s);else{var P=a.location;w=P.protocol,p=p?p+"."+P.hostname:P.hostname,P=+P.port;var L=new sa(null);w&&Zf(L,w),p&&(L.g=p),P&&ep(L,P),m&&(L.l=m),w=L}return m=d.D,p=d.ya,m&&p&&ht(w,m,p),ht(w,"VER",d.la),vd(d,w),w}function eM(d,p,m){if(p&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=d.Ca&&!d.pa?new _t(new fd({eb:m})):new _t(d.pa),p.Ha(d.J),p}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function tM(){}e=tM.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function ap(){}ap.prototype.g=function(d,p){return new di(d,p)};function di(d,p){Wt.call(this),this.g=new jA(p),this.l=d,this.h=p&&p.messageUrlParams||null,d=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(d?d["X-WebChannel-Content-Type"]=p.messageContentType:d={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(d?d["X-WebChannel-Client-Profile"]=p.va:d={"X-WebChannel-Client-Profile":p.va}),this.g.S=d,(d=p&&p.Sb)&&!I(d)&&(this.g.m=d),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!I(p)&&(this.g.D=p,d=this.h,d!==null&&p in d&&(d=this.h,p in d&&delete d[p])),this.j=new Gl(this)}v(di,Wt),di.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},di.prototype.close=function(){wy(this.g)},di.prototype.o=function(d){var p=this.g;if(typeof d=="string"){var m={};m.__data__=d,d=m}else this.u&&(m={},m.__data__=ly(d),d=m);p.i.push(new VW(p.Ya++,d)),p.G==3&&rp(p)},di.prototype.N=function(){this.g.l=null,delete this.j,wy(this.g),delete this.g,di.aa.N.call(this)};function nM(d){uy.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var p=d.__sm__;if(p){e:{for(let m in p){d=m;break e}d=void 0}(this.i=d)&&(d=this.i,p=p!==null&&d in p?p[d]:void 0),this.data=p}else this.data=d}v(nM,uy);function iM(){dy.call(this),this.status=1}v(iM,dy);function Gl(d){this.g=d}v(Gl,tM),Gl.prototype.ua=function(){en(this.g,"a")},Gl.prototype.ta=function(d){en(this.g,new nM(d))},Gl.prototype.sa=function(d){en(this.g,new iM)},Gl.prototype.ra=function(){en(this.g,"b")},ap.prototype.createWebChannel=ap.prototype.g,di.prototype.send=di.prototype.o,di.prototype.open=di.prototype.m,di.prototype.close=di.prototype.close,S0=Or.createWebChannelTransport=function(){return new ap},w0=Or.getStatEventTarget=function(){return Qf()},y0=Or.Event=na,ov=Or.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yf.NO_ERROR=0,Yf.TIMEOUT=8,Yf.HTTP_ERROR=6,Nh=Or.ErrorCode=Yf,yA.COMPLETE="complete",C0=Or.EventType=yA,pA.EventType=rd,rd.OPEN="a",rd.CLOSE="b",rd.ERROR="c",rd.MESSAGE="d",Wt.prototype.listen=Wt.prototype.K,Yc=Or.WebChannel=pA,v0=Or.FetchXmlHttpFactory=fd,_t.prototype.listenOnce=_t.prototype.L,_t.prototype.getLastError=_t.prototype.Ka,_t.prototype.getLastErrorCode=_t.prototype.Ba,_t.prototype.getStatus=_t.prototype.Z,_t.prototype.getResponseJson=_t.prototype.Oa,_t.prototype.getResponseText=_t.prototype.oa,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Ha,m0=Or.XhrIo=_t}).apply(typeof rv<"u"?rv:typeof self<"u"?self:typeof window<"u"?window:{});var pk="@firebase/firestore";var fn=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");var gu="10.12.3";var Xa=new Os("@firebase/firestore");function kh(){return Xa.logLevel}function le(e,...t){if(Xa.logLevel<=hi.DEBUG){let n=t.map(lD);Xa.debug(`Firestore (${gu}): ${e}`,...n)}}function kr(e,...t){if(Xa.logLevel<=hi.ERROR){let n=t.map(lD);Xa.error(`Firestore (${gu}): ${e}`,...n)}}function iu(e,...t){if(Xa.logLevel<=hi.WARN){let n=t.map(lD);Xa.warn(`Firestore (${gu}): ${e}`,...n)}}function lD(e){if(typeof e=="string")return e;try{return function(n){return JSON.stringify(n)}(e)}catch{return e}}function we(e="Unexpected state"){let t=`FIRESTORE (${gu}) INTERNAL ASSERTION FAILED: `+e;throw kr(t),new Error(t)}function dt(e,t){e||we()}function be(e,t){return e}var W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ie=class extends ss{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Qs=class{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}};var dv=class{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},R0=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(fn.UNAUTHENTICATED))}shutdown(){}},T0=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},I0=class{constructor(t){this.t=t,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let i=this.i,s=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve(),r=new Qs;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Qs,t.enqueueRetryable(()=>s(this.currentUser))};let o=()=>{let l=r;t.enqueueRetryable(()=>F(this,null,function*(){yield l.promise,yield s(this.currentUser)}))},a=l=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Qs)}},0),o()}getToken(){let t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(dt(typeof i.accessToken=="string"),new dv(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return dt(t===null||typeof t=="string"),new fn(t)}},A0=class{constructor(t,n,i){this.l=t,this.h=n,this.P=i,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},M0=class{constructor(t,n,i){this.l=t,this.h=n,this.P=i}getToken(){return Promise.resolve(new A0(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},P0=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},F0=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){let i=r=>{r.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);let o=r.token!==this.R;return this.R=r.token,le("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>i(r))};let s=r=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){let r=this.A.getImmediate({optional:!0});r?s(r):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(dt(typeof n.token=="string"),this.R=n.token,new P0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function uY(e){let t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}var hv=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length,i="";for(;i.length<20;){let s=uY(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=t.charAt(s[r]%t.length))}return i}};function Xe(e,t){return e<t?-1:e>t?1:0}function su(e,t,n){return e.length===t.length&&e.every((i,s)=>n(i,t[s]))}var Zt=class e{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new ie(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new ie(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ie(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*n));return new e(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Xe(this.nanoseconds,t.nanoseconds):Xe(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Re=class e{constructor(t){this.timestamp=t}static fromTimestamp(t){return new e(t)}static min(){return new e(new Zt(0,0))}static max(){return new e(new Zt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var fv=class e{constructor(t,n,i){n===void 0?n=0:n>t.length&&we(),i===void 0?i=t.length-n:i>t.length-n&&we(),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let i=Math.min(t.length,n.length);for(let s=0;s<i;s++){let r=t.get(s),o=n.get(s);if(r<o)return-1;if(r>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}},wt=class e extends fv{construct(t,n,i){return new e(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let n=[];for(let i of t){if(i.indexOf("//")>=0)throw new ie(W.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new e(n)}static emptyPath(){return new e([])}},dY=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Di=class e extends fv{construct(t,n,i){return new e(t,n,i)}static isValidIdentifier(t){return dY.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new e(["__name__"])}static fromServerFormat(t){let n=[],i="",s=0,r=()=>{if(i.length===0)throw new ie(W.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},o=!1;for(;s<t.length;){let a=t[s];if(a==="\\"){if(s+1===t.length)throw new ie(W.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let l=t[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ie(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(i+=a,s++):(r(),s++)}if(r(),o)throw new ie(W.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}};var pe=class e{constructor(t){this.path=t}static fromPath(t){return new e(wt.fromString(t))}static fromName(t){return new e(wt.fromString(t).popFirst(5))}static empty(){return new e(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&wt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return wt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new e(new wt(t.slice()))}};var x0=class{constructor(t,n,i,s){this.indexId=t,this.collectionGroup=n,this.fields=i,this.indexState=s}};x0.UNKNOWN_ID=-1;function hY(e,t){let n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,s=Re.fromTimestamp(i===1e9?new Zt(n+1,0):new Zt(n,i));return new Za(s,pe.empty(),t)}function fY(e){return new Za(e.readTime,e.key,-1)}var Za=class e{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new e(Re.min(),pe.empty(),-1)}static max(){return new e(Re.max(),pe.empty(),-1)}};function pY(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=pe.comparator(e.documentKey,t.documentKey),n!==0?n:Xe(e.largestBatchId,t.largestBatchId))}var gY="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",O0=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function Zh(e){return F(this,null,function*(){if(e.code!==W.FAILED_PRECONDITION||e.message!==gY)throw e;le("LocalStore","Unexpectedly lost primary lease")})}var K=class e{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&we(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(n){return e.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):e.reject(n)}static resolve(t){return new e((n,i)=>{n(t)})}static reject(t){return new e((n,i)=>{i(t)})}static waitFor(t){return new e((n,i)=>{let s=0,r=0,o=!1;t.forEach(a=>{++s,a.next(()=>{++r,o&&r===s&&n()},l=>i(l))}),o=!0,r===s&&n()})}static or(t){let n=e.resolve(!1);for(let i of t)n=n.next(s=>s?e.resolve(s):i());return n}static forEach(t,n){let i=[];return t.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(t,n){return new e((i,s)=>{let r=t.length,o=new Array(r),a=0;for(let l=0;l<r;l++){let c=l;n(t[c]).next(u=>{o[c]=u,++a,a===r&&i(o)},u=>s(u))}})}static doWhile(t,n){return new e((i,s)=>{let r=()=>{t()===!0?n().next(()=>{r()},s):i()};r()})}};function mY(e){let t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ef(e){return e.name==="IndexedDbTransactionError"}var $k=(()=>{class e{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=s=>this.ie(s),this.se=s=>i.writeSequenceNumber(s))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return e.oe=-1,e})();function $v(e){return e==null}function Uh(e){return e===0&&1/e==-1/0}function vY(e){return typeof e=="number"&&Number.isInteger(e)&&!Uh(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var CY=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],EFe=[...CY,"documentOverlays"],yY=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],wY=yY,DFe=[...wY,"indexConfiguration","indexState","indexEntries"];function gk(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function rl(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function qk(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var At=class e{constructor(t,n){this.comparator=t,this.root=n||Ys.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ys.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ys.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){let s=this.comparator(t,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){let t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new eu(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new eu(this.root,t,this.comparator,!1)}getReverseIterator(){return new eu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new eu(this.root,t,this.comparator,!0)}},eu=class{constructor(t,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?i(t.key,n):1,n&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Ys=class e{constructor(t,n,i,s,r){this.key=t,this.value=n,this.color=i??e.RED,this.left=s??e.EMPTY,this.right=r??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,s,r){return new e(t??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this,r=i(t,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(t,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return e.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw we();let t=this.left.check();if(t!==this.right.check())throw we();return t+(this.isRed()?0:1)}};Ys.EMPTY=null,Ys.RED=!0,Ys.BLACK=!1;Ys.EMPTY=new class{constructor(){this.size=0}get key(){throw we()}get value(){throw we()}get color(){throw we()}get left(){throw we()}get right(){throw we()}copy(t,n,i,s,r){return this}insert(t,n,i){return new Ys(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Mn=class e{constructor(t){this.comparator=t,this.data=new At(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){let i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){let s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){let n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new pv(this.data.getIterator())}getIteratorFrom(t){return new pv(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){let s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(n=>{t.push(n)}),t}toString(){let t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){let n=new e(this.comparator);return n.data=t,n}},pv=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var zi=class e{constructor(t){this.fields=t,t.sort(Di.comparator)}static empty(){return new e([])}unionWith(t){let n=new Mn(Di.comparator);for(let i of this.fields)n=n.add(i);for(let i of t)n=n.add(i);return new e(n.toArray())}covers(t){for(let n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return su(this.fields,t.fields,(n,i)=>n.isEqual(i))}};var gv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Kn=class e{constructor(t){this.binaryString=t}static fromBase64String(t){let n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new gv("Invalid base64 string: "+r):r}}(t);return new e(n)}static fromUint8Array(t){let n=function(s){let r="";for(let o=0;o<s.length;++o)r+=String.fromCharCode(s[o]);return r}(t);return new e(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Xe(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};Kn.EMPTY_BYTE_STRING=new Kn("");var SY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lr(e){if(dt(!!e),typeof e=="string"){let t=0,n=SY.exec(e);if(dt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}let i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:It(e.seconds),nanos:It(e.nanos)}}function It(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Bo(e){return typeof e=="string"?Kn.fromBase64String(e):Kn.fromUint8Array(e)}function cD(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function uD(e){let t=e.mapValue.fields.__previous_value__;return cD(t)?uD(t):t}function Wh(e){let t=Lr(e.mapValue.fields.__local_write_time__.timestampValue);return new Zt(t.seconds,t.nanos)}var N0=class{constructor(t,n,i,s,r,o,a,l,c){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}},mv=class e{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new e("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}};var av={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function el(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?cD(e)?4:Kk(e)?9007199254740991:10:we()}function er(e,t){if(e===t)return!0;let n=el(e);if(n!==el(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Wh(e).isEqual(Wh(t));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;let o=Lr(s.timestampValue),a=Lr(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,r){return Bo(s.bytesValue).isEqual(Bo(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,r){return It(s.geoPointValue.latitude)===It(r.geoPointValue.latitude)&&It(s.geoPointValue.longitude)===It(r.geoPointValue.longitude)}(e,t);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return It(s.integerValue)===It(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){let o=It(s.doubleValue),a=It(r.doubleValue);return o===a?Uh(o)===Uh(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return su(e.arrayValue.values||[],t.arrayValue.values||[],er);case 10:return function(s,r){let o=s.mapValue.fields||{},a=r.mapValue.fields||{};if(gk(o)!==gk(a))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!er(o[l],a[l])))return!1;return!0}(e,t);default:return we()}}function jh(e,t){return(e.values||[]).find(n=>er(n,t))!==void 0}function ru(e,t){if(e===t)return 0;let n=el(e),i=el(t);if(n!==i)return Xe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xe(e.booleanValue,t.booleanValue);case 2:return function(r,o){let a=It(r.integerValue||r.doubleValue),l=It(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return mk(e.timestampValue,t.timestampValue);case 4:return mk(Wh(e),Wh(t));case 5:return Xe(e.stringValue,t.stringValue);case 6:return function(r,o){let a=Bo(r),l=Bo(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(r,o){let a=r.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){let u=Xe(a[c],l[c]);if(u!==0)return u}return Xe(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,o){let a=Xe(It(r.latitude),It(o.latitude));return a!==0?a:Xe(It(r.longitude),It(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(r,o){let a=r.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){let u=ru(a[c],l[c]);if(u)return u}return Xe(a.length,l.length)}(e.arrayValue,t.arrayValue);case 10:return function(r,o){if(r===av.mapValue&&o===av.mapValue)return 0;if(r===av.mapValue)return 1;if(o===av.mapValue)return-1;let a=r.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){let f=Xe(l[h],u[h]);if(f!==0)return f;let g=ru(a[l[h]],c[u[h]]);if(g!==0)return g}return Xe(l.length,u.length)}(e.mapValue,t.mapValue);default:throw we()}}function mk(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Xe(e,t);let n=Lr(e),i=Lr(t),s=Xe(n.seconds,i.seconds);return s!==0?s:Xe(n.nanos,i.nanos)}function ou(e){return k0(e)}function k0(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){let i=Lr(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Bo(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return pe.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",s=!0;for(let r of n.values||[])s?s=!1:i+=",",i+=k0(r);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){let i=Object.keys(n.fields||{}).sort(),s="{",r=!0;for(let o of i)r?r=!1:s+=",",s+=`${o}:${k0(n.fields[o])}`;return s+"}"}(e.mapValue):we()}function vk(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function L0(e){return!!e&&"integerValue"in e}function dD(e){return!!e&&"arrayValue"in e}function Ck(e){return!!e&&"nullValue"in e}function yk(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function cv(e){return!!e&&"mapValue"in e}function Vh(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return rl(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=Vh(i)),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Vh(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Kk(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Ei=class e{constructor(t){this.value=t}static empty(){return new e({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!cv(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Vh(n)}setAll(t){let n=Di.emptyPath(),i={},s=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let l=this.getFieldsMap(n);this.applyChanges(l,i,s),i={},s=[],n=a.popLast()}o?i[a.lastSegment()]=Vh(o):s.push(a.lastSegment())});let r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(t){let n=this.field(t.popLast());cv(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return er(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=n.mapValue.fields[t.get(i)];cv(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,i){rl(n,(s,r)=>t[s]=r);for(let s of i)delete t[s]}clone(){return new e(Vh(this.value))}};function Qk(e){let t=[];return rl(e.fields,(n,i)=>{let s=new Di([n]);if(cv(i)){let r=Qk(i.mapValue).fields;if(r.length===0)t.push(s);else for(let o of r)t.push(s.child(o))}else t.push(s)}),new zi(t)}var ys=class e{constructor(t,n,i,s,r,o,a){this.key=t,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(t){return new e(t,0,Re.min(),Re.min(),Re.min(),Ei.empty(),0)}static newFoundDocument(t,n,i,s){return new e(t,1,n,Re.min(),i,s,0)}static newNoDocument(t,n){return new e(t,2,n,Re.min(),Re.min(),Ei.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,Re.min(),Re.min(),Ei.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ei.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ei.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var au=class{constructor(t,n){this.position=t,this.inclusive=n}};function wk(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){let r=t[s],o=e.position[s];if(r.field.isKeyField()?i=pe.comparator(pe.fromName(o.referenceValue),n.key):i=ru(o,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function Sk(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!er(e.position[n],t.position[n]))return!1;return!0}var tl=class{constructor(t,n="asc"){this.field=t,this.dir=n}};function _Y(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var vv=class{},Ut=class e extends vv{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new B0(t,n,i):n==="array-contains"?new U0(t,i):n==="in"?new W0(t,i):n==="not-in"?new j0(t,i):n==="array-contains-any"?new z0(t,i):new e(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new G0(t,i):new H0(t,i)}matches(t){let n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ru(n,this.value)):n!==null&&el(this.value)===el(n)&&this.matchesComparison(ru(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return we()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ws=class e extends vv{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new e(t,n)}matches(t){return Yk(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Yk(e){return e.op==="and"}function Jk(e){return bY(e)&&Yk(e)}function bY(e){for(let t of e.filters)if(t instanceof ws)return!1;return!0}function V0(e){if(e instanceof Ut)return e.field.canonicalString()+e.op.toString()+ou(e.value);if(Jk(e))return e.filters.map(t=>V0(t)).join(",");{let t=e.filters.map(n=>V0(n)).join(",");return`${e.op}(${t})`}}function Xk(e,t){return e instanceof Ut?function(i,s){return s instanceof Ut&&i.op===s.op&&i.field.isEqual(s.field)&&er(i.value,s.value)}(e,t):e instanceof ws?function(i,s){return s instanceof ws&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,o,a)=>r&&Xk(o,s.filters[a]),!0):!1}(e,t):void we()}function Zk(e){return e instanceof Ut?function(n){return`${n.field.canonicalString()} ${n.op} ${ou(n.value)}`}(e):e instanceof ws?function(n){return n.op.toString()+" {"+n.getFilters().map(Zk).join(" ,")+"}"}(e):"Filter"}var B0=class extends Ut{constructor(t,n,i){super(t,n,i),this.key=pe.fromName(i.referenceValue)}matches(t){let n=pe.comparator(t.key,this.key);return this.matchesComparison(n)}},G0=class extends Ut{constructor(t,n){super(t,"in",n),this.keys=eL("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}},H0=class extends Ut{constructor(t,n){super(t,"not-in",n),this.keys=eL("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}};function eL(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>pe.fromName(i.referenceValue))}var U0=class extends Ut{constructor(t,n){super(t,"array-contains",n)}matches(t){let n=t.data.field(this.field);return dD(n)&&jh(n.arrayValue,this.value)}},W0=class extends Ut{constructor(t,n){super(t,"in",n)}matches(t){let n=t.data.field(this.field);return n!==null&&jh(this.value.arrayValue,n)}},j0=class extends Ut{constructor(t,n){super(t,"not-in",n)}matches(t){if(jh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=t.data.field(this.field);return n!==null&&!jh(this.value.arrayValue,n)}},z0=class extends Ut{constructor(t,n){super(t,"array-contains-any",n)}matches(t){let n=t.data.field(this.field);return!(!dD(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>jh(this.value.arrayValue,i))}};var $0=class{constructor(t,n=null,i=[],s=[],r=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=o,this.endAt=a,this.ue=null}};function _k(e,t=null,n=[],i=[],s=null,r=null,o=null){return new $0(e,t,n,i,s,r,o)}function hD(e){let t=be(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>V0(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),$v(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>ou(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>ou(i)).join(",")),t.ue=n}return t.ue}function fD(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!_Y(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Xk(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Sk(e.startAt,t.startAt)&&Sk(e.endAt,t.endAt)}function q0(e){return pe.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}var Go=class{constructor(t,n=null,i=[],s=[],r=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function EY(e,t,n,i,s,r,o,a){return new Go(e,t,n,i,s,r,o,a)}function qv(e){return new Go(e)}function bk(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function tL(e){return e.collectionGroup!==null}function Bh(e){let t=be(e);if(t.ce===null){t.ce=[];let n=new Set;for(let r of t.explicitOrderBy)t.ce.push(r),n.add(r.field.canonicalString());let i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Mn(Di.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||t.ce.push(new tl(r,i))}),n.has(Di.keyField().canonicalString())||t.ce.push(new tl(Di.keyField(),i))}return t.ce}function Js(e){let t=be(e);return t.le||(t.le=DY(t,Bh(e))),t.le}function DY(e,t){if(e.limitType==="F")return _k(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{let r=s.dir==="desc"?"asc":"desc";return new tl(s.field,r)});let n=e.endAt?new au(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new au(e.startAt.position,e.startAt.inclusive):null;return _k(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function K0(e,t){let n=e.filters.concat([t]);return new Go(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Q0(e,t,n){return new Go(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Kv(e,t){return fD(Js(e),Js(t))&&e.limitType===t.limitType}function nL(e){return`${hD(Js(e))}|lt:${e.limitType}`}function Jc(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>Zk(s)).join(", ")}]`),$v(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>ou(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>ou(s)).join(",")),`Target(${i})`}(Js(e))}; limitType=${e.limitType})`}function Qv(e,t){return t.isFoundDocument()&&function(i,s){let r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):pe.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(e,t)&&function(i,s){for(let r of Bh(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(e,t)&&function(i,s){for(let r of i.filters)if(!r.matches(s))return!1;return!0}(e,t)&&function(i,s){return!(i.startAt&&!function(o,a,l){let c=wk(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,Bh(i),s)||i.endAt&&!function(o,a,l){let c=wk(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,Bh(i),s))}(e,t)}function RY(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function iL(e){return(t,n)=>{let i=!1;for(let s of Bh(e)){let r=TY(s,t,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function TY(e,t,n){let i=e.field.isKeyField()?pe.comparator(t.key,n.key):function(r,o,a){let l=o.data.field(r),c=a.data.field(r);return l!==null&&c!==null?ru(l,c):we()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return we()}}var Ho=class{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){let n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(let[s,r]of i)if(this.equalsFn(s,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){let i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return void(s[r]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){let n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){rl(this.inner,(n,i)=>{for(let[s,r]of i)t(s,r)})}isEmpty(){return qk(this.inner)}size(){return this.innerSize}};var IY=new At(pe.comparator);function Vr(){return IY}var sL=new At(pe.comparator);function Lh(...e){let t=sL;for(let n of e)t=t.insert(n.key,n);return t}function rL(e){let t=sL;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Qa(){return Gh()}function oL(){return Gh()}function Gh(){return new Ho(e=>e.toString(),(e,t)=>e.isEqual(t))}var AY=new At(pe.comparator),MY=new Mn(pe.comparator);function Ne(...e){let t=MY;for(let n of e)t=t.add(n);return t}var PY=new Mn(Xe);function FY(){return PY}function aL(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uh(t)?"-0":t}}function lL(e){return{integerValue:""+e}}function xY(e,t){return vY(t)?lL(t):aL(e,t)}var lu=class{constructor(){this._=void 0}};function OY(e,t,n){return e instanceof cu?function(s,r){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&cD(r)&&(r=uD(r)),r&&(o.fields.__previous_value__=r),{mapValue:o}}(n,t):e instanceof Uo?uL(e,t):e instanceof Wo?dL(e,t):function(s,r){let o=cL(s,r),a=Ek(o)+Ek(s.Pe);return L0(o)&&L0(s.Pe)?lL(a):aL(s.serializer,a)}(e,t)}function NY(e,t,n){return e instanceof Uo?uL(e,t):e instanceof Wo?dL(e,t):n}function cL(e,t){return e instanceof uu?function(i){return L0(i)||function(r){return!!r&&"doubleValue"in r}(i)}(t)?t:{integerValue:0}:null}var cu=class extends lu{},Uo=class extends lu{constructor(t){super(),this.elements=t}};function uL(e,t){let n=hL(t);for(let i of e.elements)n.some(s=>er(s,i))||n.push(i);return{arrayValue:{values:n}}}var Wo=class extends lu{constructor(t){super(),this.elements=t}};function dL(e,t){let n=hL(t);for(let i of e.elements)n=n.filter(s=>!er(s,i));return{arrayValue:{values:n}}}var uu=class extends lu{constructor(t,n){super(),this.serializer=t,this.Pe=n}};function Ek(e){return It(e.integerValue||e.doubleValue)}function hL(e){return dD(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Cv=class{constructor(t,n){this.field=t,this.transform=n}};function kY(e,t){return e.field.isEqual(t.field)&&function(i,s){return i instanceof Uo&&s instanceof Uo||i instanceof Wo&&s instanceof Wo?su(i.elements,s.elements,er):i instanceof uu&&s instanceof uu?er(i.Pe,s.Pe):i instanceof cu&&s instanceof cu}(e.transform,t.transform)}var Y0=class{constructor(t,n){this.version=t,this.transformResults=n}},Nr=class e{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function uv(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}var du=class{};function fL(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new zh(e.key,Nr.none()):new nl(e.key,e.data,Nr.none());{let n=e.data,i=Ei.empty(),s=new Mn(Di.comparator);for(let r of t.fields)if(!s.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?i.delete(r):i.set(r,o),s=s.add(r)}return new tr(e.key,i,new zi(s.toArray()),Nr.none())}}function LY(e,t,n){e instanceof nl?function(s,r,o){let a=s.value.clone(),l=Rk(s.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof tr?function(s,r,o){if(!uv(s.precondition,r))return void r.convertToUnknownDocument(o.version);let a=Rk(s.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(pL(s)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(s,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function Hh(e,t,n,i){return e instanceof nl?function(r,o,a,l){if(!uv(r.precondition,o))return a;let c=r.value.clone(),u=Tk(r.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,i):e instanceof tr?function(r,o,a,l){if(!uv(r.precondition,o))return a;let c=Tk(r.fieldTransforms,l,o),u=o.data;return u.setAll(pL(r)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(h=>h.field))}(e,t,n,i):function(r,o,a){return uv(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function VY(e,t){let n=null;for(let i of e.fieldTransforms){let s=t.data.field(i.field),r=cL(i.transform,s||null);r!=null&&(n===null&&(n=Ei.empty()),n.set(i.field,r))}return n||null}function Dk(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&su(i,s,(r,o)=>kY(r,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var nl=class extends du{constructor(t,n,i,s=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}},tr=class extends du{constructor(t,n,i,s,r=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}};function pL(e){let t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=e.data.field(n);t.set(n,i)}}),t}function Rk(e,t,n){let i=new Map;dt(e.length===n.length);for(let s=0;s<n.length;s++){let r=e[s],o=r.transform,a=t.data.field(r.field);i.set(r.field,NY(o,a,n[s]))}return i}function Tk(e,t,n){let i=new Map;for(let s of e){let r=s.transform,o=n.data.field(s.field);i.set(s.field,OY(r,o,t))}return i}var zh=class extends du{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},J0=class extends du{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var X0=class{constructor(t,n,i,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,n){let i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){let r=this.mutations[s];r.key.isEqual(t.key)&&LY(r,t,i[s])}}applyToLocalView(t,n){for(let i of this.baseMutations)i.key.isEqual(t.key)&&(n=Hh(i,t,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(t.key)&&(n=Hh(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){let i=oL();return this.mutations.forEach(s=>{let r=t.get(s.key),o=r.overlayedDocument,a=this.applyToLocalView(o,r.mutatedFields);a=n.has(s.key)?null:a;let l=fL(o,a);l!==null&&i.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Re.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Ne())}isEqual(t){return this.batchId===t.batchId&&su(this.mutations,t.mutations,(n,i)=>Dk(n,i))&&su(this.baseMutations,t.baseMutations,(n,i)=>Dk(n,i))}},Z0=class e{constructor(t,n,i,s){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(t,n,i){dt(t.mutations.length===i.length);let s=function(){return AY}(),r=t.mutations;for(let o=0;o<r.length;o++)s=s.insert(r[o].key,i[o].version);return new e(t,n,i,s)}};var eE=class{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var tE=class{constructor(t,n){this.count=t,this.unchangedNames=n}};var Gt,je;function BY(e){switch(e){default:return we();case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0}}function gL(e){if(e===void 0)return kr("GRPC error has no .code"),W.UNKNOWN;switch(e){case Gt.OK:return W.OK;case Gt.CANCELLED:return W.CANCELLED;case Gt.UNKNOWN:return W.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return W.INTERNAL;case Gt.UNAVAILABLE:return W.UNAVAILABLE;case Gt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Gt.NOT_FOUND:return W.NOT_FOUND;case Gt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Gt.ABORTED:return W.ABORTED;case Gt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Gt.DATA_LOSS:return W.DATA_LOSS;default:return we()}}(je=Gt||(Gt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";var Ik=null;function GY(){return new TextEncoder}var HY=new Lo([4294967295,4294967295],0);function Ak(e){let t=GY().encode(e),n=new g0;return n.update(t),new Uint8Array(n.digest())}function Mk(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new Lo([n,i],0),new Lo([s,r],0)]}var nE=class e{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ya(`Invalid padding: ${n}`);if(i<0)throw new Ya(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Ya(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Ya(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=Lo.fromNumber(this.Ie)}Ee(t,n,i){let s=t.add(n.multiply(Lo.fromNumber(i)));return s.compare(HY)===1&&(s=new Lo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;let n=Ak(t),[i,s]=Mk(n);for(let r=0;r<this.hashCount;r++){let o=this.Ee(i,s,r);if(!this.de(o))return!1}return!0}static create(t,n,i){let s=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),o=new e(r,s,n);return i.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;let n=Ak(t),[i,s]=Mk(n);for(let r=0;r<this.hashCount;r++){let o=this.Ee(i,s,r);this.Ae(o)}}Ae(t){let n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}},Ya=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var yv=class e{constructor(t,n,i,s,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,i){let s=new Map;return s.set(t,$h.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new e(Re.min(),s,new At(Xe),Vr(),Ne())}},$h=class e{constructor(t,n,i,s,r){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new e(i,n,Ne(),Ne(),Ne())}};var tu=class{constructor(t,n,i,s){this.Re=t,this.removedTargetIds=n,this.key=i,this.Ve=s}},wv=class{constructor(t,n){this.targetId=t,this.me=n}},Sv=class{constructor(t,n,i=Kn.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=s}},_v=class{constructor(){this.fe=0,this.ge=Fk(),this.pe=Kn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=Ne(),n=Ne(),i=Ne();return this.ge.forEach((s,r)=>{switch(r){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:we()}}),new $h(this.pe,this.ye,t,n,i)}ve(){this.we=!1,this.ge=Fk()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,dt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},iE=class{constructor(t){this.Le=t,this.Be=new Map,this.ke=Vr(),this.qe=Pk(),this.Qe=new At(Xe)}Ke(t){for(let n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(let n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{let i=this.Ge(n);switch(t.state){case 0:this.ze(n)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(t.resumeToken));break;default:we()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((i,s)=>{this.ze(s)&&n(s)})}He(t){let n=t.targetId,i=t.me.count,s=this.Je(n);if(s){let r=s.target;if(q0(r))if(i===0){let o=new pe(r.path);this.Ue(n,o,ys.newNoDocument(o,Re.min()))}else dt(i===1);else{let o=this.Ye(n);if(o!==i){let a=this.Ze(t),l=a?this.Xe(a,t,o):1;if(l!==0){this.je(n);let c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}Ik?.et(function(u,h,f,g,v){var y,C,E,I,T,x;let z={localCacheCount:u,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},V=h.unchangedNames;return V&&(z.bloomFilter={applied:v===0,hashCount:(y=V?.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(I=(E=(C=V?.bits)===null||C===void 0?void 0:C.bitmap)===null||E===void 0?void 0:E.length)!==null&&I!==void 0?I:0,padding:(x=(T=V?.bits)===null||T===void 0?void 0:T.padding)!==null&&x!==void 0?x:0,mightContain:b=>{var S;return(S=g?.mightContain(b))!==null&&S!==void 0&&S}}),z}(o,t.me,this.Le.tt(),a,l))}}}}Ze(t){let n=t.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n,o,a;try{o=Bo(i).toUint8Array()}catch(l){if(l instanceof gv)return iu("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new nE(o,s,r)}catch(l){return iu(l instanceof Ya?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(t,n,i){return n.me.count===i-this.nt(t,n.targetId)?0:2}nt(t,n){let i=this.Le.getRemoteKeysForTarget(n),s=0;return i.forEach(r=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,r,null),s++)}),s}rt(t){let n=new Map;this.Be.forEach((r,o)=>{let a=this.Je(o);if(a){if(r.current&&q0(a.target)){let l=new pe(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,ys.newNoDocument(l,t))}r.be&&(n.set(o,r.Ce()),r.ve())}});let i=Ne();this.qe.forEach((r,o)=>{let a=!0;o.forEachWhile(l=>{let c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(r))}),this.ke.forEach((r,o)=>o.setReadTime(t));let s=new yv(t,n,this.Qe,this.ke,i);return this.ke=Vr(),this.qe=Pk(),this.Qe=new At(Xe),s}$e(t,n){if(!this.ze(t))return;let i=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,i){if(!this.ze(t))return;let s=this.Ge(t);this.it(t,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(t){this.Be.delete(t)}Ye(t){let n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new _v,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Mn(Xe),this.qe=this.qe.insert(t,n)),n}ze(t){let n=this.Je(t)!==null;return n||le("WatchChangeAggregator","Detected inactive target",t),n}Je(t){let n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new _v),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}};function Pk(){return new At(pe.comparator)}function Fk(){return new At(pe.comparator)}var UY={asc:"ASCENDING",desc:"DESCENDING"},WY={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jY={and:"AND",or:"OR"},sE=class{constructor(t,n){this.databaseId=t,this.useProto3Json=n}};function rE(e,t){return e.useProto3Json||$v(t)?t:{value:t}}function bv(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function mL(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function zY(e,t){return bv(e,t.toTimestamp())}function Xs(e){return dt(!!e),Re.fromTimestamp(function(n){let i=Lr(n);return new Zt(i.seconds,i.nanos)}(e))}function pD(e,t){return oE(e,t).canonicalString()}function oE(e,t){let n=function(s){return new wt(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function vL(e){let t=wt.fromString(e);return dt(_L(t)),t}function aE(e,t){return pD(e.databaseId,t.path)}function _0(e,t){let n=vL(t);if(n.get(1)!==e.databaseId.projectId)throw new ie(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ie(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new pe(yL(n))}function CL(e,t){return pD(e.databaseId,t)}function $Y(e){let t=vL(e);return t.length===4?wt.emptyPath():yL(t)}function lE(e){return new wt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function yL(e){return dt(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function xk(e,t,n){return{name:aE(e,t),fields:n.value.mapValue.fields}}function qY(e,t){let n;if("targetChange"in t){t.targetChange;let i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:we()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=function(c,u){return c.useProto3Json?(dt(u===void 0||typeof u=="string"),Kn.fromBase64String(u||"")):(dt(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Kn.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){let u=c.code===void 0?W.UNKNOWN:gL(c.code);return new ie(u,c.message||"")}(o);n=new Sv(i,s,r,a||null)}else if("documentChange"in t){t.documentChange;let i=t.documentChange;i.document,i.document.name,i.document.updateTime;let s=_0(e,i.document.name),r=Xs(i.document.updateTime),o=i.document.createTime?Xs(i.document.createTime):Re.min(),a=new Ei({mapValue:{fields:i.document.fields}}),l=ys.newFoundDocument(s,r,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new tu(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;let i=t.documentDelete;i.document;let s=_0(e,i.document),r=i.readTime?Xs(i.readTime):Re.min(),o=ys.newNoDocument(s,r),a=i.removedTargetIds||[];n=new tu([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;let i=t.documentRemove;i.document;let s=_0(e,i.document),r=i.removedTargetIds||[];n=new tu([],r,s,null)}else{if(!("filter"in t))return we();{t.filter;let i=t.filter;i.targetId;let{count:s=0,unchangedNames:r}=i,o=new tE(s,r),a=i.targetId;n=new wv(a,o)}}return n}function KY(e,t){let n;if(t instanceof nl)n={update:xk(e,t.key,t.value)};else if(t instanceof zh)n={delete:aE(e,t.key)};else if(t instanceof tr)n={update:xk(e,t.key,t.data),updateMask:iJ(t.fieldMask)};else{if(!(t instanceof J0))return we();n={verify:aE(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(r,o){let a=o.transform;if(a instanceof cu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Uo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Wo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof uu)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw we()}(0,i))),t.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:zY(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:we()}(e,t.precondition)),n}function QY(e,t){return e&&e.length>0?(dt(t!==void 0),e.map(n=>function(s,r){let o=s.updateTime?Xs(s.updateTime):Xs(r);return o.isEqual(Re.min())&&(o=Xs(r)),new Y0(o,s.transformResults||[])}(n,t))):[]}function YY(e,t){return{documents:[CL(e,t.path)]}}function JY(e,t){let n={structuredQuery:{}},i=t.path,s;t.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=CL(e,s);let r=function(c){if(c.length!==0)return SL(ws.create(c,"and"))}(t.filters);r&&(n.structuredQuery.where=r);let o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:Xc(f.field),direction:eJ(f.dir)}}(u))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);let a=rE(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{_t:n,parent:s}}function XY(e){let t=$Y(e.parent),n=e.structuredQuery,i=n.from?n.from.length:0,s=null;if(i>0){dt(i===1);let u=n.from[0];u.allDescendants?s=u.collectionId:t=t.child(u.collectionId)}let r=[];n.where&&(r=function(h){let f=wL(h);return f instanceof ws&&Jk(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(v){return new tl(Zc(v.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,$v(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){let f=!!h.before,g=h.values||[];return new au(g,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){let f=!h.before,g=h.values||[];return new au(g,f)}(n.endAt)),EY(t,s,o,r,a,"F",l,c)}function ZY(e,t){let n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function wL(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=Zc(n.unaryFilter.field);return Ut.create(i,"==",{doubleValue:NaN});case"IS_NULL":let s=Zc(n.unaryFilter.field);return Ut.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let r=Zc(n.unaryFilter.field);return Ut.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Zc(n.unaryFilter.field);return Ut.create(o,"!=",{nullValue:"NULL_VALUE"});default:return we()}}(e):e.fieldFilter!==void 0?function(n){return Ut.create(Zc(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return we()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return ws.create(n.compositeFilter.filters.map(i=>wL(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return we()}}(n.compositeFilter.op))}(e):we()}function eJ(e){return UY[e]}function tJ(e){return WY[e]}function nJ(e){return jY[e]}function Xc(e){return{fieldPath:e.canonicalString()}}function Zc(e){return Di.fromServerFormat(e.fieldPath)}function SL(e){return e instanceof Ut?function(n){if(n.op==="=="){if(yk(n.value))return{unaryFilter:{field:Xc(n.field),op:"IS_NAN"}};if(Ck(n.value))return{unaryFilter:{field:Xc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(yk(n.value))return{unaryFilter:{field:Xc(n.field),op:"IS_NOT_NAN"}};if(Ck(n.value))return{unaryFilter:{field:Xc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xc(n.field),op:tJ(n.op),value:n.value}}}(e):e instanceof ws?function(n){let i=n.getFilters().map(s=>SL(s));return i.length===1?i[0]:{compositeFilter:{op:nJ(n.op),filters:i}}}(e):we()}function iJ(e){let t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function _L(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}var qh=class e{constructor(t,n,i,s,r=Re.min(),o=Re.min(),a=Kn.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var cE=class{constructor(t){this.ct=t}};function sJ(e){let t=XY({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Q0(t,t.limit,"L"):t}var Ev=class{constructor(){}Pt(t,n){this.It(t,n),n.Tt()}It(t,n){if("nullValue"in t)this.Et(n,5);else if("booleanValue"in t)this.Et(n,10),n.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(n,15),n.dt(It(t.integerValue));else if("doubleValue"in t){let i=It(t.doubleValue);isNaN(i)?this.Et(n,13):(this.Et(n,15),Uh(i)?n.dt(0):n.dt(i))}else if("timestampValue"in t){let i=t.timestampValue;this.Et(n,20),typeof i=="string"&&(i=Lr(i)),n.At(`${i.seconds||""}`),n.dt(i.nanos||0)}else if("stringValue"in t)this.Rt(t.stringValue,n),this.Vt(n);else if("bytesValue"in t)this.Et(n,30),n.ft(Bo(t.bytesValue)),this.Vt(n);else if("referenceValue"in t)this.gt(t.referenceValue,n);else if("geoPointValue"in t){let i=t.geoPointValue;this.Et(n,45),n.dt(i.latitude||0),n.dt(i.longitude||0)}else"mapValue"in t?Kk(t)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,n),this.Vt(n)):"arrayValue"in t?(this.wt(t.arrayValue,n),this.Vt(n)):we()}Rt(t,n){this.Et(n,25),this.St(t,n)}St(t,n){n.At(t)}yt(t,n){let i=t.fields||{};this.Et(n,55);for(let s of Object.keys(i))this.Rt(s,n),this.It(i[s],n)}wt(t,n){let i=t.values||[];this.Et(n,50);for(let s of i)this.It(s,n)}gt(t,n){this.Et(n,37),pe.fromName(t).path.forEach(i=>{this.Et(n,60),this.St(i,n)})}Et(t,n){t.dt(n)}Vt(t){t.dt(2)}};Ev.bt=new Ev;var uE=class{constructor(){this._n=new dE}addToCollectionParentIndex(t,n){return this._n.add(n),K.resolve()}getCollectionParents(t,n){return K.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return K.resolve()}deleteFieldIndex(t,n){return K.resolve()}deleteAllFieldIndexes(t){return K.resolve()}createTargetIndexes(t,n){return K.resolve()}getDocumentsMatchingTarget(t,n){return K.resolve(null)}getIndexType(t,n){return K.resolve(0)}getFieldIndexes(t,n){return K.resolve([])}getNextCollectionGroupToUpdate(t){return K.resolve(null)}getMinOffset(t,n){return K.resolve(Za.min())}getMinOffsetFromCollectionGroup(t,n){return K.resolve(Za.min())}updateCollectionGroup(t,n,i){return K.resolve()}updateIndexEntries(t,n){return K.resolve()}},dE=class{constructor(){this.index={}}add(t){let n=t.lastSegment(),i=t.popLast(),s=this.index[n]||new Mn(wt.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(t){let n=t.lastSegment(),i=t.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(t){return(this.index[t]||new Mn(wt.comparator)).toArray()}};var TFe=new Uint8Array(0);var Ks=class e{constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Ks.DEFAULT_COLLECTION_PERCENTILE=10,Ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ks.DEFAULT=new Ks(41943040,Ks.DEFAULT_COLLECTION_PERCENTILE,Ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ks.DISABLED=new Ks(-1,0,0);var Kh=class e{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new e(0)}static Ln(){return new e(-1)}};var hE=class{constructor(){this.changes=new Ho(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ys.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?K.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var fE=class{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}};var pE=class{constructor(t,n,i,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(i!==null&&Hh(i.mutation,s,zi.empty(),Zt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,Ne()).next(()=>i))}getLocalViewOfDocuments(t,n,i=Ne()){let s=Qa();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,i).next(r=>{let o=Lh();return r.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){let i=Qa();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,Ne()))}populateOverlays(t,n,i){let s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(t,s).next(r=>{r.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,i,s){let r=Vr(),o=Gh(),a=function(){return Gh()}();return n.forEach((l,c)=>{let u=i.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof tr)?r=r.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Hh(u.mutation,c,u.mutation.getFieldMask(),Zt.now())):o.set(c.key,zi.empty())}),this.recalculateAndSaveOverlays(t,r).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new fE(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(t,n){let i=Gh(),s=new At((o,a)=>o-a),r=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(let a of o)a.keys().forEach(l=>{let c=n.get(l);if(c===null)return;let u=i.get(l)||zi.empty();u=a.applyToLocalView(c,u),i.set(l,u);let h=(s.get(a.batchId)||Ne()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{let o=[],a=s.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),c=l.key,u=l.value,h=oL();u.forEach(f=>{if(!r.has(f)){let g=fL(n.get(f),i.get(f));g!==null&&h.set(f,g),r=r.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,h))}return K.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,s){return function(o){return pe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):tL(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,s):this.getDocumentsMatchingCollectionQuery(t,n,i,s)}getNextDocuments(t,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,s).next(r=>{let o=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,s-r.size):K.resolve(Qa()),a=-1,l=r;return o.next(c=>K.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),r.get(u)?K.resolve():this.remoteDocumentCache.getEntry(t,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(t,c,r)).next(()=>this.computeViews(t,l,c,Ne())).next(u=>({batchId:a,changes:rL(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new pe(n)).next(i=>{let s=Lh();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,i,s){let r=n.collectionGroup,o=Lh();return this.indexManager.getCollectionParents(t,r).next(a=>K.forEach(a,l=>{let c=function(h,f){return new Go(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(r));return this.getDocumentsMatchingCollectionQuery(t,c,i,s).next(u=>{u.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,r,s))).next(o=>{r.forEach((l,c)=>{let u=c.getKey();o.get(u)===null&&(o=o.insert(u,ys.newInvalidDocument(u)))});let a=Lh();return o.forEach((l,c)=>{let u=r.get(l);u!==void 0&&Hh(u.mutation,c,zi.empty(),Zt.now()),Qv(n,c)&&(a=a.insert(l,c))}),a})}};var gE=class{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return K.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Xs(s.createTime)}}(n)),K.resolve()}getNamedQuery(t,n){return K.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(s){return{name:s.name,query:sJ(s.bundledQuery),readTime:Xs(s.readTime)}}(n)),K.resolve()}};var mE=class{constructor(){this.overlays=new At(pe.comparator),this.hr=new Map}getOverlay(t,n){return K.resolve(this.overlays.get(n))}getOverlays(t,n){let i=Qa();return K.forEach(n,s=>this.getOverlay(t,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((s,r)=>{this.ht(t,n,r)}),K.resolve()}removeOverlaysForBatchId(t,n,i){let s=this.hr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.hr.delete(i)),K.resolve()}getOverlaysForCollection(t,n,i){let s=Qa(),r=n.length+1,o=new pe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===r&&l.largestBatchId>i&&s.set(l.getKey(),l)}return K.resolve(s)}getOverlaysForCollectionGroup(t,n,i,s){let r=new At((c,u)=>c-u),o=this.overlays.getIterator();for(;o.hasNext();){let c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let u=r.get(c.largestBatchId);u===null&&(u=Qa(),r=r.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}let a=Qa(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return K.resolve(a)}ht(t,n,i){let s=this.overlays.get(i.key);if(s!==null){let o=this.hr.get(s.largestBatchId).delete(i.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new eE(n,i));let r=this.hr.get(n);r===void 0&&(r=Ne(),this.hr.set(n,r)),this.hr.set(n,r.add(i.key))}};var Qh=class{constructor(){this.Pr=new Mn(Ht.Ir),this.Tr=new Mn(Ht.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){let i=new Ht(t,n);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Ar(new Ht(t,n))}Rr(t,n){t.forEach(i=>this.removeReference(i,n))}Vr(t){let n=new pe(new wt([])),i=new Ht(n,t),s=new Ht(n,t+1),r=[];return this.Tr.forEachInRange([i,s],o=>{this.Ar(o),r.push(o.key)}),r}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){let n=new pe(new wt([])),i=new Ht(n,t),s=new Ht(n,t+1),r=Ne();return this.Tr.forEachInRange([i,s],o=>{r=r.add(o.key)}),r}containsKey(t){let n=new Ht(t,0),i=this.Pr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}},Ht=class{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return pe.comparator(t.key,n.key)||Xe(t.pr,n.pr)}static Er(t,n){return Xe(t.pr,n.pr)||pe.comparator(t.key,n.key)}};var vE=class{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Mn(Ht.Ir)}checkEmpty(t){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,s){let r=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new X0(r,n,i,s);this.mutationQueue.push(o);for(let a of s)this.wr=this.wr.add(new Ht(a.key,r)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return K.resolve(o)}lookupMutationBatch(t,n){return K.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){let i=n+1,s=this.br(i),r=s<0?0:s;return K.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){let i=new Ht(n,0),s=new Ht(n,Number.POSITIVE_INFINITY),r=[];return this.wr.forEachInRange([i,s],o=>{let a=this.Sr(o.pr);r.push(a)}),K.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new Mn(Xe);return n.forEach(s=>{let r=new Ht(s,0),o=new Ht(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([r,o],a=>{i=i.add(a.pr)})}),K.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(t,n){let i=n.path,s=i.length+1,r=i;pe.isDocumentKey(r)||(r=r.child(""));let o=new Ht(new pe(r),0),a=new Mn(Xe);return this.wr.forEachWhile(l=>{let c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),K.resolve(this.Dr(a))}Dr(t){let n=[];return t.forEach(i=>{let s=this.Sr(i);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){dt(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return K.forEach(n.mutations,s=>{let r=new Ht(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.wr=i})}Mn(t){}containsKey(t,n){let i=new Ht(n,0),s=this.wr.firstAfterOrEqual(i);return K.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,K.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){let n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var CE=class{constructor(t){this.vr=t,this.docs=function(){return new At(pe.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){let i=n.key,s=this.docs.get(i),r=s?s.size:0,o=this.vr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){let n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){let i=this.docs.get(n);return K.resolve(i?i.document.mutableCopy():ys.newInvalidDocument(n))}getEntries(t,n){let i=Vr();return n.forEach(s=>{let r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():ys.newInvalidDocument(s))}),K.resolve(i)}getDocumentsMatchingQuery(t,n,i,s){let r=Vr(),o=n.path,a=new pe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||pY(fY(u),i)<=0||(s.has(u.key)||Qv(n,u))&&(r=r.insert(u.key,u.mutableCopy()))}return K.resolve(r)}getAllFromCollectionGroup(t,n,i,s){we()}Fr(t,n){return K.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new yE(this)}getSize(t){return K.resolve(this.size)}},yE=class extends hE{constructor(t){super(),this.ar=t}applyChanges(t){let n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(t,s)):this.ar.removeEntry(i)}),K.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}};var wE=class{constructor(t){this.persistence=t,this.Mr=new Ho(n=>hD(n),fD),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Qh,this.targetCount=0,this.Lr=Kh.Nn()}forEachTarget(t,n){return this.Mr.forEach((i,s)=>n(s)),K.resolve()}getLastRemoteSnapshotVersion(t){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return K.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Or&&(this.Or=n),K.resolve()}qn(t){this.Mr.set(t.target,t);let n=t.targetId;n>this.highestTargetId&&(this.Lr=new Kh(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,K.resolve()}updateTargetData(t,n){return this.qn(n),K.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,K.resolve()}removeTargets(t,n,i){let s=0,r=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Mr.delete(o),r.push(this.removeMatchingKeysForTargetId(t,a.targetId)),s++)}),K.waitFor(r).next(()=>s)}getTargetCount(t){return K.resolve(this.targetCount)}getTargetData(t,n){let i=this.Mr.get(n)||null;return K.resolve(i)}addMatchingKeys(t,n,i){return this.Nr.dr(n,i),K.resolve()}removeMatchingKeys(t,n,i){this.Nr.Rr(n,i);let s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(o=>{r.push(s.markPotentiallyOrphaned(t,o))}),K.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),K.resolve()}getMatchingKeysForTargetId(t,n){let i=this.Nr.gr(n);return K.resolve(i)}containsKey(t,n){return K.resolve(this.Nr.containsKey(n))}};var SE=class{constructor(t,n){this.Br={},this.overlays={},this.kr=new $k(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new wE(this),this.indexManager=new uE,this.remoteDocumentCache=function(s){return new CE(s)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new cE(n),this.$r=new gE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new mE,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.Br[t.toKey()];return i||(i=new vE(n,this.referenceDelegate),this.Br[t.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,i){le("MemoryPersistence","Starting transaction:",t);let s=new _E(this.kr.next());return this.referenceDelegate.Ur(),i(s).next(r=>this.referenceDelegate.Wr(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Gr(t,n){return K.or(Object.values(this.Br).map(i=>()=>i.containsKey(t,n)))}},_E=class extends O0{constructor(t){super(),this.currentSequenceNumber=t}},bE=class e{constructor(t){this.persistence=t,this.zr=new Qh,this.jr=null}static Hr(t){return new e(t)}get Jr(){if(this.jr)return this.jr;throw we()}addReference(t,n,i){return this.zr.addReference(i,n),this.Jr.delete(i.toString()),K.resolve()}removeReference(t,n,i){return this.zr.removeReference(i,n),this.Jr.add(i.toString()),K.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),K.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(r=>this.Jr.add(r.toString()))}).next(()=>i.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.Jr,i=>{let s=pe.fromPath(i);return this.Yr(t,s).next(r=>{r||n.removeEntry(s,Re.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(i=>{i?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return K.or([()=>K.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}};var EE=class e{constructor(t,n,i,s){this.targetId=t,this.fromCache=n,this.qi=i,this.Qi=s}static Ki(t,n){let i=Ne(),s=Ne();for(let r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new e(t,n.fromCache,i,s)}};var DE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var RE=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return dM()?8:mY(cM())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,i,s){let r={result:null};return this.ji(t,n).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.Hi(t,n,s,i).next(o=>{r.result=o})}).next(()=>{if(r.result)return;let o=new DE;return this.Ji(t,n,o).next(a=>{if(r.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>r.result)}Yi(t,n,i,s){return i.documentReadCount<this.Wi?(kh()<=hi.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Jc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),K.resolve()):(kh()<=hi.DEBUG&&le("QueryEngine","Query:",Jc(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.Gi*s?(kh()<=hi.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Jc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Js(n))):K.resolve())}ji(t,n){if(bk(n))return K.resolve(null);let i=Js(n);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Q0(n,null,"F"),i=Js(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(r=>{let o=Ne(...r);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{let c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(t,Q0(n,null,"F")):this.es(t,c,n,l)}))})))}Hi(t,n,i,s){return bk(n)||s.isEqual(Re.min())?K.resolve(null):this.zi.getDocuments(t,i).next(r=>{let o=this.Zi(n,r);return this.Xi(n,o,i,s)?K.resolve(null):(kh()<=hi.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Jc(n)),this.es(t,o,n,hY(s,-1)).next(a=>a))})}Zi(t,n){let i=new Mn(iL(t));return n.forEach((s,r)=>{Qv(t,r)&&(i=i.add(r))}),i}Xi(t,n,i,s){if(t.limit===null)return!1;if(i.size!==n.size)return!0;let r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ji(t,n,i){return kh()<=hi.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Jc(n)),this.zi.getDocumentsMatchingQuery(t,n,Za.min(),i)}es(t,n,i,s){return this.zi.getDocumentsMatchingQuery(t,i,s).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}};var TE=class{constructor(t,n,i,s){this.persistence=t,this.ts=n,this.serializer=s,this.ns=new At(Xe),this.rs=new Ho(r=>hD(r),fD),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(i)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new pE(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}};function rJ(e,t,n,i){return new TE(e,t,n,i)}function bL(e,t){return F(this,null,function*(){let n=be(e);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n._s(t),n.mutationQueue.getAllMutationBatches(i))).next(r=>{let o=[],a=[],l=Ne();for(let c of s){o.push(c.batchId);for(let u of c.mutations)l=l.add(u.key)}for(let c of r){a.push(c.batchId);for(let u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(i,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})})}function oJ(e,t){let n=be(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let s=t.batch.keys(),r=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){let h=c.batch,f=h.keys(),g=K.resolve();return f.forEach(v=>{g=g.next(()=>u.getEntry(l,v)).next(y=>{let C=c.docVersions.get(v);dt(C!==null),y.version.compareTo(C)<0&&(h.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,i,t,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=Ne();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(t))).next(()=>n.localDocuments.getDocuments(i,s))})}function EL(e){let t=be(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function aJ(e,t){let n=be(e),i=t.snapshotVersion,s=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{let o=n.os.newChangeBuffer({trackRemovals:!0});s=n.ns;let a=[];t.targetChanges.forEach((u,h)=>{let f=s.get(h);if(!f)return;a.push(n.Qr.removeMatchingKeys(r,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(r,u.addedDocuments,h)));let g=f.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(h)!==null?g=g.withResumeToken(Kn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,i)),s=s.insert(h,g),function(y,C,E){return y.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,g,u)&&a.push(n.Qr.updateTargetData(r,g))});let l=Vr(),c=Ne();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,u))}),a.push(lJ(r,o,t.documentUpdates).next(u=>{l=u.cs,c=u.ls})),!i.isEqual(Re.min())){let u=n.Qr.getLastRemoteSnapshotVersion(r).next(h=>n.Qr.setTargetsMetadata(r,r.currentSequenceNumber,i));a.push(u)}return K.waitFor(a).next(()=>o.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,l,c)).next(()=>l)}).then(r=>(n.ns=s,r))}function lJ(e,t,n){let i=Ne(),s=Ne();return n.forEach(r=>i=i.add(r)),t.getEntries(e,i).next(r=>{let o=Vr();return n.forEach((a,l)=>{let c=r.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Re.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):le("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:s}})}function cJ(e,t){let n=be(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function uJ(e,t){let n=be(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Qr.getTargetData(i,t).next(r=>r?(s=r,K.resolve(s)):n.Qr.allocateTargetId(i).next(o=>(s=new qh(t,o,"TargetPurposeListen",i.currentSequenceNumber),n.Qr.addTargetData(i,s).next(()=>s))))}).then(i=>{let s=n.ns.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ns=n.ns.insert(i.targetId,i),n.rs.set(t,i.targetId)),i})}function IE(e,t,n){return F(this,null,function*(){let i=be(e),s=i.ns.get(t),r=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",r,o=>i.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!ef(o))throw o;le("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}i.ns=i.ns.remove(t),i.rs.delete(s.target)})}function Ok(e,t,n){let i=be(e),s=Re.min(),r=Ne();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){let h=be(l),f=h.rs.get(u);return f!==void 0?K.resolve(h.ns.get(f)):h.Qr.getTargetData(c,u)}(i,o,Js(t)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{r=l})}).next(()=>i.ts.getDocumentsMatchingQuery(o,t,n?s:Re.min(),n?r:Ne())).next(a=>(dJ(i,RY(t),a),{documents:a,hs:r})))}function dJ(e,t,n){let i=e.ss.get(t)||Re.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),e.ss.set(t,i)}var Dv=class{constructor(){this.activeTargetIds=FY()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}};var AE=class{constructor(){this.no=new Dv,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,i){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Dv,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var ME=class{io(t){}shutdown(){}};var Rv=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.uo)t(0)}ao(){le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var lv=null;function b0(){return lv===null?lv=function(){return 268435456+Math.round(2147483648*Math.random())}():lv++,"0x"+lv.toString(16)}var hJ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var PE=class{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}};var An="WebChannelConnection",FE=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+n.host,this.So=`projects/${s}/databases/${r}`,this.bo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${r}`}get Do(){return!1}Co(n,i,s,r,o){let a=b0(),l=this.vo(n,i.toUriEncodedString());le("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);let c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,r,o),this.Mo(n,l,c,s).then(u=>(le("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw iu("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}xo(n,i,s,r,o,a){return this.Co(n,i,s,r,o)}Fo(n,i,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gu}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((r,o)=>n[o]=r),s&&s.headers.forEach((r,o)=>n[o]=r)}vo(n,i){let s=hJ[n];return`${this.wo}/v1/${i}:${s}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,i,s){let r=b0();return new Promise((o,a)=>{let l=new m0;l.setWithCredentials(!0),l.listenOnce(C0.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Nh.NO_ERROR:let u=l.getResponseJson();le(An,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(u)),o(u);break;case Nh.TIMEOUT:le(An,`RPC '${t}' ${r} timed out`),a(new ie(W.DEADLINE_EXCEEDED,"Request time out"));break;case Nh.HTTP_ERROR:let h=l.getStatus();if(le(An,`RPC '${t}' ${r} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);let g=f?.error;if(g&&g.status&&g.message){let v=function(C){let E=C.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(E)>=0?E:W.UNKNOWN}(g.status);a(new ie(v,g.message))}else a(new ie(W.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ie(W.UNAVAILABLE,"Connection failed."));break;default:we()}}finally{le(An,`RPC '${t}' ${r} completed.`)}});let c=JSON.stringify(s);le(An,`RPC '${t}' ${r} sending request:`,s),l.send(n,"POST",c,i,15)})}Oo(t,n,i){let s=b0(),r=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=S0(),a=w0(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new v0({})),this.Fo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;let u=r.join("");le(An,`Creating RPC '${t}' stream ${s}: ${u}`,l);let h=o.createWebChannel(u,l),f=!1,g=!1,v=new PE({lo:C=>{g?le(An,`Not sending because RPC '${t}' stream ${s} is closed:`,C):(f||(le(An,`Opening RPC '${t}' stream ${s} transport.`),h.open(),f=!0),le(An,`RPC '${t}' stream ${s} sending:`,C),h.send(C))},ho:()=>h.close()}),y=(C,E,I)=>{C.listen(E,T=>{try{I(T)}catch(x){setTimeout(()=>{throw x},0)}})};return y(h,Yc.EventType.OPEN,()=>{g||(le(An,`RPC '${t}' stream ${s} transport opened.`),v.mo())}),y(h,Yc.EventType.CLOSE,()=>{g||(g=!0,le(An,`RPC '${t}' stream ${s} transport closed`),v.po())}),y(h,Yc.EventType.ERROR,C=>{g||(g=!0,iu(An,`RPC '${t}' stream ${s} transport errored:`,C),v.po(new ie(W.UNAVAILABLE,"The operation could not be completed")))}),y(h,Yc.EventType.MESSAGE,C=>{var E;if(!g){let I=C.data[0];dt(!!I);let T=I,x=T.error||((E=T[0])===null||E===void 0?void 0:E.error);if(x){le(An,`RPC '${t}' stream ${s} received error:`,x);let z=x.status,V=function(_){let R=Gt[_];if(R!==void 0)return gL(R)}(z),b=x.message;V===void 0&&(V=W.INTERNAL,b="Unknown error status: "+z+" with message "+x.message),g=!0,v.po(new ie(V,b)),h.close()}else le(An,`RPC '${t}' stream ${s} received:`,I),v.yo(I)}}),y(a,y0.STAT_EVENT,C=>{C.stat===ov.PROXY?le(An,`RPC '${t}' stream ${s} detected buffering proxy`):C.stat===ov.NOPROXY&&le(An,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.fo()},0),v}};function E0(){return typeof document<"u"?document:null}function Yv(e){return new sE(e,!0)}var Tv=class{constructor(t,n,i=1e3,s=1.5,r=6e4){this.oi=t,this.timerId=n,this.No=i,this.Lo=s,this.Bo=r,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();let n=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),s=Math.max(0,n-i);s>0&&le("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Iv=class{constructor(t,n,i,s,r,o,a,l){this.oi=t,this.Go=i,this.zo=s,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Tv(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return F(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}r_(){return F(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(t,n){return F(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(kr(n.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.jo===n&&this.u_(i,s)},i=>{t(()=>{let s=new ie(W.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(s)})})}u_(t,n){let i=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(s=>{i(()=>this.c_(s))}),this.stream.onMessage(s=>{i(()=>this.onMessage(s))})}e_(){this.state=5,this.Yo.$o(()=>F(this,null,function*(){this.state=0,this.start()}))}c_(t){return le("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},xE=class extends Iv{constructor(t,n,i,s,r,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,o),this.serializer=r}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();let n=qY(this.serializer,t),i=function(r){if(!("targetChange"in r))return Re.min();let o=r.targetChange;return o.targetIds&&o.targetIds.length?Re.min():o.readTime?Xs(o.readTime):Re.min()}(t);return this.listener.h_(n,i)}P_(t){let n={};n.database=lE(this.serializer),n.addTarget=function(r,o){let a,l=o.target;if(a=q0(l)?{documents:YY(r,l)}:{query:JY(r,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=mL(r,o.resumeToken);let c=rE(r,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Re.min())>0){a.readTime=bv(r,o.snapshotVersion.toTimestamp());let c=rE(r,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);let i=ZY(this.serializer,t);i&&(n.labels=i),this.i_(n)}I_(t){let n={};n.database=lE(this.serializer),n.removeTarget=t,this.i_(n)}},OE=class extends Iv{constructor(t,n,i,s,r,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,o),this.serializer=r,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(dt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();let n=QY(t.writeResults,t.commitTime),i=Xs(t.commitTime);return this.listener.A_(i,n)}return dt(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let t={};t.database=lE(this.serializer),this.i_(t)}d_(t){let n={streamToken:this.lastStreamToken,writes:t.map(i=>KY(this.serializer,i))};this.i_(n)}};var NE=class extends class{}{constructor(t,n,i,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.m_=!1}f_(){if(this.m_)throw new ie(W.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.Co(t,oE(n,i),s,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new ie(W.UNKNOWN,r.toString())})}xo(t,n,i,s,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,oE(n,i),s,o,a,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(W.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},kE=class{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){let n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(kr(n),this.y_=!1):le("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var LE=class{constructor(t,n,i,s,r){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=r,this.O_.io(o=>{i.enqueueAndForget(()=>F(this,null,function*(){ol(this)&&(le("RemoteStore","Restarting streams for network reachability change."),yield function(l){return F(this,null,function*(){let c=be(l);c.M_.add(4),yield tf(c),c.N_.set("Unknown"),c.M_.delete(4),yield Jv(c)})}(this))}))}),this.N_=new kE(i,s)}};function Jv(e){return F(this,null,function*(){if(ol(e))for(let t of e.x_)yield t(!0)})}function tf(e){return F(this,null,function*(){for(let t of e.x_)yield t(!1)})}function DL(e,t){let n=be(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),CD(n)?vD(n):mu(n).Xo()&&mD(n,t))}function gD(e,t){let n=be(e),i=mu(n);n.F_.delete(t),i.Xo()&&RL(n,t),n.F_.size===0&&(i.Xo()?i.n_():ol(n)&&n.N_.set("Unknown"))}function mD(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Re.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}mu(e).P_(t)}function RL(e,t){e.L_.xe(t),mu(e).I_(t)}function vD(e){e.L_=new iE({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),mu(e).start(),e.N_.w_()}function CD(e){return ol(e)&&!mu(e).Zo()&&e.F_.size>0}function ol(e){return be(e).M_.size===0}function TL(e){e.L_=void 0}function fJ(e){return F(this,null,function*(){e.N_.set("Online")})}function pJ(e){return F(this,null,function*(){e.F_.forEach((t,n)=>{mD(e,t)})})}function gJ(e,t){return F(this,null,function*(){TL(e),CD(e)?(e.N_.D_(t),vD(e)):e.N_.set("Unknown")})}function mJ(e,t,n){return F(this,null,function*(){if(e.N_.set("Online"),t instanceof Sv&&t.state===2&&t.cause)try{yield function(s,r){return F(this,null,function*(){let o=r.cause;for(let a of r.targetIds)s.F_.has(a)&&(yield s.remoteSyncer.rejectListen(a,o),s.F_.delete(a),s.L_.removeTarget(a))})}(e,t)}catch(i){le("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield Av(e,i)}else if(t instanceof tu?e.L_.Ke(t):t instanceof wv?e.L_.He(t):e.L_.We(t),!n.isEqual(Re.min()))try{let i=yield EL(e.localStore);n.compareTo(i)>=0&&(yield function(r,o){let a=r.L_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){let u=r.F_.get(c);u&&r.F_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{let u=r.F_.get(l);if(!u)return;r.F_.set(l,u.withResumeToken(Kn.EMPTY_BYTE_STRING,u.snapshotVersion)),RL(r,l);let h=new qh(u.target,l,c,u.sequenceNumber);mD(r,h)}),r.remoteSyncer.applyRemoteEvent(a)}(e,n))}catch(i){le("RemoteStore","Failed to raise snapshot:",i),yield Av(e,i)}})}function Av(e,t,n){return F(this,null,function*(){if(!ef(t))throw t;e.M_.add(1),yield tf(e),e.N_.set("Offline"),n||(n=()=>EL(e.localStore)),e.asyncQueue.enqueueRetryable(()=>F(this,null,function*(){le("RemoteStore","Retrying IndexedDB access"),yield n(),e.M_.delete(1),yield Jv(e)}))})}function IL(e,t){return t().catch(n=>Av(e,n,t))}function Xv(e){return F(this,null,function*(){let t=be(e),n=jo(t),i=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;vJ(t);)try{let s=yield cJ(t.localStore,i);if(s===null){t.v_.length===0&&n.n_();break}i=s.batchId,CJ(t,s)}catch(s){yield Av(t,s)}AL(t)&&ML(t)})}function vJ(e){return ol(e)&&e.v_.length<10}function CJ(e,t){e.v_.push(t);let n=jo(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function AL(e){return ol(e)&&!jo(e).Zo()&&e.v_.length>0}function ML(e){jo(e).start()}function yJ(e){return F(this,null,function*(){jo(e).V_()})}function wJ(e){return F(this,null,function*(){let t=jo(e);for(let n of e.v_)t.d_(n.mutations)})}function SJ(e,t,n){return F(this,null,function*(){let i=e.v_.shift(),s=Z0.from(i,t,n);yield IL(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),yield Xv(e)})}function _J(e,t){return F(this,null,function*(){t&&jo(e).E_&&(yield function(i,s){return F(this,null,function*(){if(function(o){return BY(o)&&o!==W.ABORTED}(s.code)){let r=i.v_.shift();jo(i).t_(),yield IL(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),yield Xv(i)}})}(e,t)),AL(e)&&ML(e)})}function Nk(e,t){return F(this,null,function*(){let n=be(e);n.asyncQueue.verifyOperationInProgress(),le("RemoteStore","RemoteStore received new credentials");let i=ol(n);n.M_.add(3),yield tf(n),i&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),yield Jv(n)})}function bJ(e,t){return F(this,null,function*(){let n=be(e);t?(n.M_.delete(2),yield Jv(n)):t||(n.M_.add(2),yield tf(n),n.N_.set("Unknown"))})}function mu(e){return e.B_||(e.B_=function(n,i,s){let r=be(n);return r.f_(),new xE(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Po:fJ.bind(null,e),To:pJ.bind(null,e),Ao:gJ.bind(null,e),h_:mJ.bind(null,e)}),e.x_.push(t=>F(this,null,function*(){t?(e.B_.t_(),CD(e)?vD(e):e.N_.set("Unknown")):(yield e.B_.stop(),TL(e))}))),e.B_}function jo(e){return e.k_||(e.k_=function(n,i,s){let r=be(n);return r.f_(),new OE(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:yJ.bind(null,e),Ao:_J.bind(null,e),R_:wJ.bind(null,e),A_:SJ.bind(null,e)}),e.x_.push(t=>F(this,null,function*(){t?(e.k_.t_(),yield Xv(e)):(yield e.k_.stop(),e.v_.length>0&&(le("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))}))),e.k_}var VE=class e{constructor(t,n,i,s,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Qs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,s,r){let o=Date.now()+i,a=new e(t,n,o,s,r);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(W.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function yD(e,t){if(kr("AsyncQueue",`${t}: ${e}`),ef(e))return new ie(W.UNAVAILABLE,`${t}: ${e}`);throw e}var Mv=class e{constructor(t){this.comparator=t?(n,i)=>t(n,i)||pe.comparator(n.key,i.key):(n,i)=>pe.comparator(n.key,i.key),this.keyedMap=Lh(),this.sortedSet=new At(this.comparator)}static emptySet(t){return new e(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){let n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){let n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){let s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){let t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){let i=new e;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}};var Pv=class{constructor(){this.q_=new At(pe.comparator)}track(t){let n=t.doc.key,i=this.q_.get(n);i?t.type!==0&&i.type===3?this.q_=this.q_.insert(n,t):t.type===3&&i.type!==1?this.q_=this.q_.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.q_=this.q_.remove(n):t.type===1&&i.type===2?this.q_=this.q_.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):we():this.q_=this.q_.insert(n,t)}Q_(){let t=[];return this.q_.inorderTraversal((n,i)=>{t.push(i)}),t}},hu=class e{constructor(t,n,i,s,r,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,i,s,r){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new e(t,n,Mv.emptySet(n),o,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Kv(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}};var BE=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}},GE=class{constructor(){this.queries=new Ho(t=>nL(t),Kv),this.onlineState="Unknown",this.z_=new Set}};function PL(e,t){return F(this,null,function*(){let n=be(e),i=3,s=t.query,r=n.queries.get(s);r?!r.W_()&&t.G_()&&(i=2):(r=new BE,i=t.G_()?0:1);try{switch(i){case 0:r.K_=yield n.onListen(s,!0);break;case 1:r.K_=yield n.onListen(s,!1);break;case 2:yield n.onFirstRemoteStoreListen(s)}}catch(o){let a=yD(o,`Initialization of query '${Jc(t.query)}' failed`);return void t.onError(a)}n.queries.set(s,r),r.U_.push(t),t.j_(n.onlineState),r.K_&&t.H_(r.K_)&&wD(n)})}function FL(e,t){return F(this,null,function*(){let n=be(e),i=t.query,s=3,r=n.queries.get(i);if(r){let o=r.U_.indexOf(t);o>=0&&(r.U_.splice(o,1),r.U_.length===0?s=t.G_()?0:1:!r.W_()&&t.G_()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function EJ(e,t){let n=be(e),i=!1;for(let s of t){let r=s.query,o=n.queries.get(r);if(o){for(let a of o.U_)a.H_(s)&&(i=!0);o.K_=s}}i&&wD(n)}function DJ(e,t,n){let i=be(e),s=i.queries.get(t);if(s)for(let r of s.U_)r.onError(n);i.queries.delete(t)}function wD(e){e.z_.forEach(t=>{t.next()})}var HE,kk;(kk=HE||(HE={})).J_="default",kk.Cache="cache";var Fv=class{constructor(t,n,i){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(t){if(!this.options.includeMetadataChanges){let i=[];for(let s of t.docChanges)s.type!==3&&i.push(s);t=new hu(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;let i=n!=="Offline";return(!this.options.ra||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=hu.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==HE.Cache}};var xv=class{constructor(t){this.key=t}},Ov=class{constructor(t){this.key=t}},UE=class{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Ne(),this.mutatedKeys=Ne(),this.Ia=iL(t),this.Ta=new Mv(this.Ia)}get Ea(){return this.la}da(t,n){let i=n?n.Aa:new Pv,s=n?n.Ta:this.Ta,r=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1,l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((u,h)=>{let f=s.get(u),g=Qv(this.query,h)?h:null,v=!!f&&this.mutatedKeys.has(f.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations),C=!1;f&&g?f.data.isEqual(g.data)?v!==y&&(i.track({type:3,doc:g}),C=!0):this.Ra(f,g)||(i.track({type:2,doc:g}),C=!0,(l&&this.Ia(g,l)>0||c&&this.Ia(g,c)<0)&&(a=!0)):!f&&g?(i.track({type:0,doc:g}),C=!0):f&&!g&&(i.track({type:1,doc:f}),C=!0,(l||c)&&(a=!0)),C&&(g?(o=o.add(g),r=y?r.add(u):r.delete(u)):(o=o.delete(u),r=r.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),r=r.delete(u.key),i.track({type:1,doc:u})}return{Ta:o,Aa:i,Xi:a,mutatedKeys:r}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,s){let r=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;let o=t.Aa.Q_();o.sort((u,h)=>function(g,v){let y=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we()}};return y(g)-y(v)}(u.type,h.type)||this.Ia(u.doc,h.doc)),this.Va(i),s=s!=null&&s;let a=n&&!s?this.ma():[],l=this.Pa.size===0&&this.current&&!s?1:0,c=l!==this.ha;return this.ha=l,o.length!==0||c?{snapshot:new hu(this.query,t.Ta,r,o,t.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Pv,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];let t=this.Pa;this.Pa=Ne(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});let n=[];return t.forEach(i=>{this.Pa.has(i)||n.push(new Ov(i))}),this.Pa.forEach(i=>{t.has(i)||n.push(new xv(i))}),n}pa(t){this.la=t.hs,this.Pa=Ne();let n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return hu.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},WE=class{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}},jE=class{constructor(t){this.key=t,this.wa=!1}},zE=class{constructor(t,n,i,s,r,o){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Ho(a=>nL(a),Kv),this.Da=new Map,this.Ca=new Set,this.va=new At(pe.comparator),this.Fa=new Map,this.Ma=new Qh,this.xa={},this.Oa=new Map,this.Na=Kh.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function RJ(e,t,n=!0){return F(this,null,function*(){let i=VL(e),s,r=i.ba.get(t);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.ya()):s=yield xL(i,t,n,!0),s})}function TJ(e,t){return F(this,null,function*(){let n=VL(e);yield xL(n,t,!0,!1)})}function xL(e,t,n,i){return F(this,null,function*(){let s=yield uJ(e.localStore,Js(t)),r=s.targetId,o=n?e.sharedClientState.addLocalQueryTarget(r):"not-current",a;return i&&(a=yield IJ(e,t,r,o==="current",s.resumeToken)),e.isPrimaryClient&&n&&DL(e.remoteStore,s),a})}function IJ(e,t,n,i,s){return F(this,null,function*(){e.Ba=(h,f,g)=>function(y,C,E,I){return F(this,null,function*(){let T=C.view.da(E);T.Xi&&(T=yield Ok(y.localStore,C.query,!1).then(({documents:b})=>C.view.da(b,T)));let x=I&&I.targetChanges.get(C.targetId),z=I&&I.targetMismatches.get(C.targetId)!=null,V=C.view.applyChanges(T,y.isPrimaryClient,x,z);return Vk(y,C.targetId,V.fa),V.snapshot})}(e,h,f,g);let r=yield Ok(e.localStore,t,!0),o=new UE(t,r.hs),a=o.da(r.documents),l=$h.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",s),c=o.applyChanges(a,e.isPrimaryClient,l);Vk(e,n,c.fa);let u=new WE(t,n,o);return e.ba.set(t,u),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),c.snapshot})}function AJ(e,t,n){return F(this,null,function*(){let i=be(e),s=i.ba.get(t),r=i.Da.get(s.targetId);if(r.length>1)return i.Da.set(s.targetId,r.filter(o=>!Kv(o,t))),void i.ba.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||(yield IE(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&gD(i.remoteStore,s.targetId),$E(i,s.targetId)}).catch(Zh))):($E(i,s.targetId),yield IE(i.localStore,s.targetId,!0))})}function MJ(e,t){return F(this,null,function*(){let n=be(e),i=n.ba.get(t),s=n.Da.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),gD(n.remoteStore,i.targetId))})}function PJ(e,t,n){return F(this,null,function*(){let i=VJ(e);try{let s=yield function(o,a){let l=be(o),c=Zt.now(),u=a.reduce((g,v)=>g.add(v.key),Ne()),h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=Vr(),y=Ne();return l.os.getEntries(g,u).next(C=>{v=C,v.forEach((E,I)=>{I.isValidDocument()||(y=y.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,v)).next(C=>{h=C;let E=[];for(let I of a){let T=VY(I,h.get(I.key).overlayedDocument);T!=null&&E.push(new tr(I.key,T,Qk(T.value.mapValue),Nr.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,E,a)}).next(C=>{f=C;let E=C.applyToLocalDocumentSet(h,y);return l.documentOverlayCache.saveOverlays(g,C.batchId,E)})}).then(()=>({batchId:f.batchId,changes:rL(h)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.xa[o.currentUser.toKey()];c||(c=new At(Xe)),c=c.insert(a,l),o.xa[o.currentUser.toKey()]=c}(i,s.batchId,n),yield nf(i,s.changes),yield Xv(i.remoteStore)}catch(s){let r=yD(s,"Failed to persist write");n.reject(r)}})}function OL(e,t){return F(this,null,function*(){let n=be(e);try{let i=yield aJ(n.localStore,t);t.targetChanges.forEach((s,r)=>{let o=n.Fa.get(r);o&&(dt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.wa=!0:s.modifiedDocuments.size>0?dt(o.wa):s.removedDocuments.size>0&&(dt(o.wa),o.wa=!1))}),yield nf(n,i,t)}catch(i){yield Zh(i)}})}function Lk(e,t,n){let i=be(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let s=[];i.ba.forEach((r,o)=>{let a=o.view.j_(t);a.snapshot&&s.push(a.snapshot)}),function(o,a){let l=be(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(let f of h.U_)f.j_(a)&&(c=!0)}),c&&wD(l)}(i.eventManager,t),s.length&&i.Sa.h_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function FJ(e,t,n){return F(this,null,function*(){let i=be(e);i.sharedClientState.updateQueryState(t,"rejected",n);let s=i.Fa.get(t),r=s&&s.key;if(r){let o=new At(pe.comparator);o=o.insert(r,ys.newNoDocument(r,Re.min()));let a=Ne().add(r),l=new yv(Re.min(),new Map,new At(Xe),o,a);yield OL(i,l),i.va=i.va.remove(r),i.Fa.delete(t),SD(i)}else yield IE(i.localStore,t,!1).then(()=>$E(i,t,n)).catch(Zh)})}function xJ(e,t){return F(this,null,function*(){let n=be(e),i=t.batch.batchId;try{let s=yield oJ(n.localStore,t);kL(n,i,null),NL(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield nf(n,s)}catch(s){yield Zh(s)}})}function OJ(e,t,n){return F(this,null,function*(){let i=be(e);try{let s=yield function(o,a){let l=be(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(dt(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(i.localStore,t);kL(i,t,n),NL(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),yield nf(i,s)}catch(s){yield Zh(s)}})}function NL(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function kL(e,t,n){let i=be(e),s=i.xa[i.currentUser.toKey()];if(s){let r=s.get(t);r&&(n?r.reject(n):r.resolve(),s=s.remove(t)),i.xa[i.currentUser.toKey()]=s}}function $E(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(let i of e.Da.get(t))e.ba.delete(i),n&&e.Sa.ka(i,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(i=>{e.Ma.containsKey(i)||LL(e,i)})}function LL(e,t){e.Ca.delete(t.path.canonicalString());let n=e.va.get(t);n!==null&&(gD(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),SD(e))}function Vk(e,t,n){for(let i of n)i instanceof xv?(e.Ma.addReference(i.key,t),NJ(e,i)):i instanceof Ov?(le("SyncEngine","Document no longer in limbo: "+i.key),e.Ma.removeReference(i.key,t),e.Ma.containsKey(i.key)||LL(e,i.key)):we()}function NJ(e,t){let n=t.key,i=n.path.canonicalString();e.va.get(n)||e.Ca.has(i)||(le("SyncEngine","New document in limbo: "+n),e.Ca.add(i),SD(e))}function SD(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){let t=e.Ca.values().next().value;e.Ca.delete(t);let n=new pe(wt.fromString(t)),i=e.Na.next();e.Fa.set(i,new jE(n)),e.va=e.va.insert(n,i),DL(e.remoteStore,new qh(Js(qv(n.path)),i,"TargetPurposeLimboResolution",$k.oe))}}function nf(e,t,n){return F(this,null,function*(){let i=be(e),s=[],r=[],o=[];i.ba.isEmpty()||(i.ba.forEach((a,l)=>{o.push(i.Ba(l,t,n).then(c=>{var u;if((c||n)&&i.isPrimaryClient){let h=c?!c.fromCache:(u=n?.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;i.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);let h=EE.Ki(l.targetId,c);r.push(h)}}))}),yield Promise.all(o),i.Sa.h_(s),yield function(l,c){return F(this,null,function*(){let u=be(l);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>K.forEach(c,f=>K.forEach(f.qi,g=>u.persistence.referenceDelegate.addReference(h,f.targetId,g)).next(()=>K.forEach(f.Qi,g=>u.persistence.referenceDelegate.removeReference(h,f.targetId,g)))))}catch(h){if(!ef(h))throw h;le("LocalStore","Failed to update sequence numbers: "+h)}for(let h of c){let f=h.targetId;if(!h.fromCache){let g=u.ns.get(f),v=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(v);u.ns=u.ns.insert(f,y)}}})}(i.localStore,r))})}function kJ(e,t){return F(this,null,function*(){let n=be(e);if(!n.currentUser.isEqual(t)){le("SyncEngine","User change. New user:",t.toKey());let i=yield bL(n.localStore,t);n.currentUser=t,function(r,o){r.Oa.forEach(a=>{a.forEach(l=>{l.reject(new ie(W.CANCELLED,o))})}),r.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield nf(n,i.us)}})}function LJ(e,t){let n=be(e),i=n.Fa.get(t);if(i&&i.wa)return Ne().add(i.key);{let s=Ne(),r=n.Da.get(t);if(!r)return s;for(let o of r){let a=n.ba.get(o);s=s.unionWith(a.view.Ea)}return s}}function VL(e){let t=be(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=OL.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=LJ.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=FJ.bind(null,t),t.Sa.h_=EJ.bind(null,t.eventManager),t.Sa.ka=DJ.bind(null,t.eventManager),t}function VJ(e){let t=be(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=xJ.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=OJ.bind(null,t),t}var Nv=class{constructor(){this.synchronizeTabs=!1}initialize(t){return F(this,null,function*(){this.serializer=Yv(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return rJ(this.persistence,new RE,t.initialUser,this.serializer)}createPersistence(t){return new SE(bE.Hr,this.serializer)}createSharedClientState(t){return new AE}terminate(){return F(this,null,function*(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var qE=class{initialize(t,n){return F(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Lk(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=kJ.bind(null,this.syncEngine),yield bJ(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new GE}()}createDatastore(t){let n=Yv(t.databaseInfo.databaseId),i=function(r){return new FE(r)}(t.databaseInfo);return function(r,o,a,l){return new NE(r,o,a,l)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,s,r,o,a){return new LE(i,s,r,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Lk(this.syncEngine,n,0),function(){return Rv.D()?new Rv:new ME}())}createSyncEngine(t,n){return function(s,r,o,a,l,c,u){let h=new zE(s,r,o,a,l,c);return u&&(h.La=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return F(this,null,function*(){var t;yield function(i){return F(this,null,function*(){let s=be(i);le("RemoteStore","RemoteStore shutting down."),s.M_.add(5),yield tf(s),s.O_.shutdown(),s.N_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()})}};var kv=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):kr("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}};var KE=class{constructor(t,n,i,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=fn.UNAUTHENTICATED,this.clientId=hv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,r=>F(this,null,function*(){le("FirestoreClient","Received user=",r.uid),yield this.authCredentialListener(r),this.user=r})),this.appCheckCredentials.start(i,r=>(le("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ie(W.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new Qs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>F(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){let i=yD(n,"Failed to shutdown persistence");t.reject(i)}})),t.promise}};function D0(e,t){return F(this,null,function*(){e.asyncQueue.verifyOperationInProgress(),le("FirestoreClient","Initializing OfflineComponentProvider");let n=e.configuration;yield t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(s=>F(this,null,function*(){i.isEqual(s)||(yield bL(t.localStore,s),i=s)})),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t})}function Bk(e,t){return F(this,null,function*(){e.asyncQueue.verifyOperationInProgress();let n=yield GJ(e);le("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>Nk(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>Nk(t.remoteStore,s)),e._onlineComponents=t})}function BJ(e){return e.name==="FirebaseError"?e.code===W.FAILED_PRECONDITION||e.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}function GJ(e){return F(this,null,function*(){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){le("FirestoreClient","Using user provided OfflineComponentProvider");try{yield D0(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!BJ(n))throw n;iu("Error using user provided cache. Falling back to memory cache: "+n),yield D0(e,new Nv)}}else le("FirestoreClient","Using default OfflineComponentProvider"),yield D0(e,new Nv);return e._offlineComponents})}function BL(e){return F(this,null,function*(){return e._onlineComponents||(e._uninitializedComponentsProvider?(le("FirestoreClient","Using user provided OnlineComponentProvider"),yield Bk(e,e._uninitializedComponentsProvider._online)):(le("FirestoreClient","Using default OnlineComponentProvider"),yield Bk(e,new qE))),e._onlineComponents})}function HJ(e){return BL(e).then(t=>t.syncEngine)}function QE(e){return F(this,null,function*(){let t=yield BL(e),n=t.eventManager;return n.onListen=RJ.bind(null,t.syncEngine),n.onUnlisten=AJ.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=TJ.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=MJ.bind(null,t.syncEngine),n})}function UJ(e,t,n={}){let i=new Qs;return e.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return function(r,o,a,l,c){let u=new kv({next:f=>{o.enqueueAndForget(()=>FL(r,h));let g=f.docs.has(a);!g&&f.fromCache?c.reject(new ie(W.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?c.reject(new ie(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Fv(qv(a.path),u,{includeMetadataChanges:!0,ra:!0});return PL(r,h)}(yield QE(e),e.asyncQueue,t,n,i)})),i.promise}function GL(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}var Gk=new Map;function HL(e,t,n){if(!n)throw new ie(W.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function WJ(e,t,n,i){if(t===!0&&i===!0)throw new ie(W.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Hk(e){if(!pe.isDocumentKey(e))throw new ie(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Uk(e){if(pe.isDocumentKey(e))throw new ie(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Zv(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{let t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":we()}function Zs(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ie(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Zv(e);throw new ie(W.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}var Lv=class{constructor(t){var n,i;if(t.host===void 0){if(t.ssl!==void 0)throw new ie(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new ie(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}WJ("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GL((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},fu=class{constructor(t,n,i,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ie(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new ie(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lv(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new R0;switch(i.type){case"firstParty":return new M0(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ie(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=Gk.get(n);i&&(le("ComponentProvider","Removing Datastore"),Gk.delete(n),i.terminate())}(this),Promise.resolve()}};function UL(e,t,n,i={}){var s;let r=(e=Zs(e,fu))._getSettings(),o=`${t}:${n}`;if(r.host!=="firestore.googleapis.com"&&r.host!==o&&iu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},r),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=fn.MOCK_USER;else{a=jl(i.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);let c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new ie(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new fn(c)}e._authCredentials=new T0(new dv(a,l))}}var il=class e{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new e(this.firestore,t,this._query)}},qn=class e{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vo(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}},Vo=class e extends il{constructor(t,n,i){super(t,n,qv(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new qn(this.firestore,null,new pe(t))}withConverter(t){return new e(this.firestore,t,this._path)}};function WL(e,t,...n){if(e=et(e),HL("collection","path",t),e instanceof fu){let i=wt.fromString(t,...n);return Uk(i),new Vo(e,null,i)}{if(!(e instanceof qn||e instanceof Vo))throw new ie(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=e._path.child(wt.fromString(t,...n));return Uk(i),new Vo(e.firestore,null,i)}}function _D(e,t,...n){if(e=et(e),arguments.length===1&&(t=hv.newId()),HL("doc","path",t),e instanceof fu){let i=wt.fromString(t,...n);return Hk(i),new qn(e,null,new pe(i))}{if(!(e instanceof qn||e instanceof Vo))throw new ie(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=e._path.child(wt.fromString(t,...n));return Hk(i),new qn(e.firestore,e instanceof Vo?e.converter:null,new pe(i))}}var YE=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Tv(this,"async_queue_retry"),this.hu=()=>{let n=E0();n&&le("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let t=E0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;let n=E0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new Qs;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}Tu(){return F(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!ef(t))throw t;le("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(t){let n=this.iu.then(()=>(this.uu=!0,t().catch(i=>{this.au=i,this.uu=!1;let s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw kr("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.uu=!1,i))));return this.iu=n,n}enqueueAfterDelay(t,n,i){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);let s=VE.createAndSchedule(this,t,n,i,r=>this.Eu(r));return this._u.push(s),s}Pu(){this.au&&we()}verifyOperationInProgress(){}du(){return F(this,null,function*(){let t;do t=this.iu,yield t;while(t!==this.iu)})}Au(t){for(let n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){let n=this._u.indexOf(t);this._u.splice(n,1)}};function Wk(e){return function(n,i){if(typeof n!="object"||n===null)return!1;let s=n;for(let r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(e,["next","error","complete"])}var Br=class extends fu{constructor(t,n,i,s){super(t,n,i,s),this.type="firestore",this._queue=function(){return new YE}(),this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||zL(this),this._firestoreClient.terminate()}};function jL(e,t){let n=typeof e=="object"?e:nn(),i=typeof e=="string"?e:t||"(default)",s=jt(n,"firestore").getImmediate({identifier:i});if(!s._initialized){let r=oo("firestore");r&&UL(s,...r)}return s}function bD(e){return e._firestoreClient||zL(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function zL(e){var t,n,i;let s=e._freezeSettings(),r=function(a,l,c,u){return new N0(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,GL(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._firestoreClient=new KE(e._authCredentials,e._appCheckCredentials,e._queue,r),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}var Yh=class e{constructor(t){this._byteString=t}static fromBase64String(t){try{return new e(Kn.fromBase64String(t))}catch(n){throw new ie(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new e(Kn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var pu=class{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new ie(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Di(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var sl=class{constructor(t){this._methodName=t}};var Jh=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new ie(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ie(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Xe(this._lat,t._lat)||Xe(this._long,t._long)}};var jJ=/^__.*__$/,JE=class{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new tr(t,this.data,this.fieldMask,n,this.fieldTransforms):new nl(t,this.data,n,this.fieldTransforms)}},Vv=class{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new tr(t,this.data,this.fieldMask,n,this.fieldTransforms)}};function $L(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we()}}var Bv=class e{constructor(t,n,i,s,r,o){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.mu(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.gu({path:i,yu:!1});return s.wu(t),s}Su(t){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.gu({path:i,yu:!1});return s.mu(),s}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return Hv(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if($L(this.fu)&&jJ.test(t))throw this.Du('Document fields cannot begin and end with "__"')}},XE=class{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Yv(t)}Fu(t,n,i,s=!1){return new Bv({fu:t,methodName:n,vu:i,path:Di.emptyPath(),yu:!1,Cu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ED(e){let t=e._freezeSettings(),n=Yv(e._databaseId);return new XE(e._databaseId,!!t.ignoreUndefinedProperties,n)}function zJ(e,t,n,i,s,r={}){let o=e.Fu(r.merge||r.mergeFields?2:0,t,n,s);DD("Data must be an object, but it was:",o,i);let a=KL(i,o),l,c;if(r.merge)l=new zi(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){let u=[];for(let h of r.mergeFields){let f=tD(t,h,n);if(!o.contains(f))throw new ie(W.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);YL(u,f)||u.push(f)}l=new zi(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new JE(new Ei(a),l,c)}var Gv=class e extends sl{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof e}};function qL(e,t,n){return new Bv({fu:3,vu:t.settings.vu,methodName:e._methodName,yu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var ZE=class e extends sl{constructor(t,n){super(t),this.Mu=n}_toFieldTransform(t){let n=qL(this,t,!0),i=this.Mu.map(r=>al(r,n)),s=new Uo(i);return new Cv(t.path,s)}isEqual(t){return t instanceof e&&wd(this.Mu,t.Mu)}},eD=class e extends sl{constructor(t,n){super(t),this.Mu=n}_toFieldTransform(t){let n=qL(this,t,!0),i=this.Mu.map(r=>al(r,n)),s=new Wo(i);return new Cv(t.path,s)}isEqual(t){return t instanceof e&&wd(this.Mu,t.Mu)}};function $J(e,t,n,i){let s=e.Fu(1,t,n);DD("Data must be an object, but it was:",s,i);let r=[],o=Ei.empty();rl(i,(l,c)=>{let u=RD(t,l,n);c=et(c);let h=s.Su(u);if(c instanceof Gv)r.push(u);else{let f=al(c,h);f!=null&&(r.push(u),o.set(u,f))}});let a=new zi(r);return new Vv(o,a,s.fieldTransforms)}function qJ(e,t,n,i,s,r){let o=e.Fu(1,t,n),a=[tD(t,i,n)],l=[s];if(r.length%2!=0)throw new ie(W.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<r.length;f+=2)a.push(tD(t,r[f])),l.push(r[f+1]);let c=[],u=Ei.empty();for(let f=a.length-1;f>=0;--f)if(!YL(c,a[f])){let g=a[f],v=l[f];v=et(v);let y=o.Su(g);if(v instanceof Gv)c.push(g);else{let C=al(v,y);C!=null&&(c.push(g),u.set(g,C))}}let h=new zi(c);return new Vv(u,h,o.fieldTransforms)}function KJ(e,t,n,i=!1){return al(n,e.Fu(i?4:3,t))}function al(e,t){if(QL(e=et(e)))return DD("Unsupported field value:",t,e),KL(e,t);if(e instanceof sl)return function(i,s){if(!$L(s.fu))throw s.Du(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Du(`${i._methodName}() is not currently supported inside arrays`);let r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(i,s){let r=[],o=0;for(let a of i){let l=al(a,s.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}}(e,t)}return function(i,s){if((i=et(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return xY(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let r=Zt.fromDate(i);return{timestampValue:bv(s.serializer,r)}}if(i instanceof Zt){let r=new Zt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:bv(s.serializer,r)}}if(i instanceof Jh)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Yh)return{bytesValue:mL(s.serializer,i._byteString)};if(i instanceof qn){let r=s.databaseId,o=i.firestore._databaseId;if(!o.isEqual(r))throw s.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:pD(i.firestore._databaseId||s.databaseId,i._key.path)}}throw s.Du(`Unsupported field value: ${Zv(i)}`)}(e,t)}function KL(e,t){let n={};return qk(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):rl(e,(i,s)=>{let r=al(s,t.pu(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function QL(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Zt||e instanceof Jh||e instanceof Yh||e instanceof qn||e instanceof sl)}function DD(e,t,n){if(!QL(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){let i=Zv(n);throw i==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+i)}}function tD(e,t,n){if((t=et(t))instanceof pu)return t._internalPath;if(typeof t=="string")return RD(e,t);throw Hv("Field path arguments must be of type string or ",e,!1,void 0,n)}var QJ=new RegExp("[~\\*/\\[\\]]");function RD(e,t,n){if(t.search(QJ)>=0)throw Hv(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new pu(...t.split("."))._internalPath}catch{throw Hv(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Hv(e,t,n,i,s){let r=i&&!i.isEmpty(),o=s!==void 0,a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${i}`),o&&(l+=` in document ${s}`),l+=")"),new ie(W.INVALID_ARGUMENT,a+e+l)}function YL(e,t){return e.some(n=>n.isEqual(t))}var Uv=class{constructor(t,n,i,s,r){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new nD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let n=this._document.data.field(TD("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}},nD=class extends Uv{data(){return super.data()}};function TD(e,t){return typeof t=="string"?RD(e,t):t instanceof pu?t._internalPath:t._delegate._internalPath}function YJ(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new ie(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Xh=class{},Wv=class extends Xh{};function JL(e,t,...n){let i=[];t instanceof Xh&&i.push(t),i=i.concat(n),function(r){let o=r.filter(l=>l instanceof sD).length,a=r.filter(l=>l instanceof iD).length;if(o>1||o>0&&a>0)throw new ie(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let s of i)e=s._apply(e);return e}var iD=class e extends Wv{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new e(t,n,i)}_apply(t){let n=this._parse(t);return ZL(t._query,n),new il(t.firestore,t.converter,K0(t._query,n))}_parse(t){let n=ED(t.firestore);return function(r,o,a,l,c,u,h){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ie(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){zk(h,u);let g=[];for(let v of h)g.push(jk(l,r,v));f={arrayValue:{values:g}}}else f=jk(l,r,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||zk(h,u),f=KJ(a,o,h,u==="in"||u==="not-in");return Ut.create(c,u,f)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}};var sD=class e extends Xh{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new e(t,n)}_parse(t){let n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:ws.create(n,this._getOperator())}_apply(t){let n=this._parse(t);return n.getFilters().length===0?t:(function(s,r){let o=s,a=r.getFlattenedFilters();for(let l of a)ZL(o,l),o=K0(o,l)}(t._query,n),new il(t.firestore,t.converter,K0(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var rD=class e extends Wv{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new e(t,n)}_apply(t){let n=function(s,r,o){if(s.startAt!==null)throw new ie(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ie(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new tl(r,o)}(t._query,this._field,this._direction);return new il(t.firestore,t.converter,function(s,r){let o=s.explicitOrderBy.concat([r]);return new Go(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,n))}};function XL(e,t="asc"){let n=t,i=TD("orderBy",e);return rD._create(i,n)}function jk(e,t,n){if(typeof(n=et(n))=="string"){if(n==="")throw new ie(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tL(t)&&n.indexOf("/")!==-1)throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=t.path.child(wt.fromString(n));if(!pe.isDocumentKey(i))throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return vk(e,new pe(i))}if(n instanceof qn)return vk(e,n._key);throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zv(n)}.`)}function zk(e,t){if(!Array.isArray(e)||e.length===0)throw new ie(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function ZL(e,t){let n=function(s,r){for(let o of s)for(let a of o.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new ie(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ie(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}var oD=class{convertValue(t,n="none"){switch(el(t)){case 0:return null;case 1:return t.booleanValue;case 2:return It(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Bo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw we()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){let i={};return rl(t,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertGeoPoint(t){return new Jh(It(t.latitude),It(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":let i=uD(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Wh(t));default:return null}}convertTimestamp(t){let n=Lr(t);return new Zt(n.seconds,n.nanos)}convertDocumentKey(t,n){let i=wt.fromString(t);dt(_L(i));let s=new mv(i.get(1),i.get(3)),r=new pe(i.popFirst(5));return s.isEqual(n)||kr(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}};function JJ(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}var Ja=class{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},jv=class extends Uv{constructor(t,n,i,s,r,o){super(t,n,i,s,o),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let n=new nu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){let i=this._document.data.field(TD("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},nu=class extends jv{data(t={}){return super.data(t)}},aD=class{constructor(t,n,i,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ja(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){let t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new nu(this._firestore,this._userDataWriter,i.key,i,new Ja(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{let l=new nu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ja(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{let l=new nu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Ja(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter),c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:XJ(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function XJ(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we()}}function eV(e){e=Zs(e,qn);let t=Zs(e.firestore,Br);return UJ(bD(t),e._key).then(n=>sV(t,e,n))}var zv=class extends oD{constructor(t){super(),this.firestore=t}convertBytes(t){return new Yh(t)}convertReference(t){let n=this.convertDocumentKey(t,this.firestore._databaseId);return new qn(this.firestore,null,n)}};function tV(e,t,n,...i){e=Zs(e,qn);let s=Zs(e.firestore,Br),r=ED(s),o;return o=typeof(t=et(t))=="string"||t instanceof pu?qJ(r,"updateDoc",e._key,t,n,i):$J(r,"updateDoc",e._key,t),AD(s,[o.toMutation(e._key,Nr.exists(!0))])}function nV(e){return AD(Zs(e.firestore,Br),[new zh(e._key,Nr.none())])}function iV(e,t){let n=Zs(e.firestore,Br),i=_D(e),s=JJ(e.converter,t);return AD(n,[zJ(ED(e.firestore),"addDoc",i._key,s,e.converter!==null,{}).toMutation(i._key,Nr.exists(!1))]).then(()=>i)}function ID(e,...t){var n,i,s;e=et(e);let r={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||Wk(t[o])||(r=t[o],o++);let a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(Wk(t[o])){let h=t[o];t[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),t[o+1]=(i=h.error)===null||i===void 0?void 0:i.bind(h),t[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,c,u;if(e instanceof qn)c=Zs(e.firestore,Br),u=qv(e._key.path),l={next:h=>{t[o]&&t[o](sV(c,e,h))},error:t[o+1],complete:t[o+2]};else{let h=Zs(e,il);c=Zs(h.firestore,Br),u=h._query;let f=new zv(c);l={next:g=>{t[o]&&t[o](new aD(c,f,h,g))},error:t[o+1],complete:t[o+2]},YJ(e._query)}return function(f,g,v,y){let C=new kv(y),E=new Fv(g,C,v);return f.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return PL(yield QE(f),E)})),()=>{C.$a(),f.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return FL(yield QE(f),E)}))}}(bD(c),u,a,l)}function AD(e,t){return function(i,s){let r=new Qs;return i.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return PJ(yield HJ(i),s,r)})),r.promise}(bD(e),t)}function sV(e,t,n){let i=n.docs.get(t._key),s=new zv(e);return new jv(e,s,t._key,i,new Ja(n.hasPendingWrites,n.fromCache),t.converter)}function rV(...e){return new ZE("arrayUnion",e)}function oV(...e){return new eD("arrayRemove",e)}(function(t,n=!0){(function(s){gu=s})(ao),Et(new bt("firestore",(i,{instanceIdentifier:s,options:r})=>{let o=i.getProvider("app").getImmediate(),a=new Br(new I0(i.getProvider("auth-internal")),new F0(i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ie(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mv(c.options.projectId,u)}(o,s),o);return r=Object.assign({useFetchStreams:n},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),ge(pk,"4.6.4",t),ge(pk,"4.6.4","esm2017")})();var eC=function(){return eC=Object.assign||function(t){for(var n,i=1,s=arguments.length;i<s;i++){n=arguments[i];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},eC.apply(this,arguments)};var tX={includeMetadataChanges:!1};function aV(e,t){return t===void 0&&(t=tX),new re(function(n){var i=ID(e,t,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:i}})}function lV(e,t){var n;t===void 0&&(t={});var i=e.data(t);return!e.exists()||typeof i!="object"||i===null||!t.idField?i:eC(eC({},i),(n={},n[t.idField]=e.id,n))}function cV(e){return aV(e,{includeMetadataChanges:!0}).pipe(oe(function(t){return t.docs}))}function uV(e,t){return t===void 0&&(t={}),cV(e).pipe(oe(function(n){return n.map(function(i){return lV(i,t)})}))}var Gr=class{constructor(t){return t}},dV="firestore",MD=class{constructor(){return bn(dV)}};var PD=new X("angularfire2.firestore-instances");function nX(e,t){let n=In(dV,e,t);return n&&new Gr(n)}function iX(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new Gr(i)}}var sX={provide:MD,deps:[[new Me,PD]]},rX={provide:Gr,useFactory:nX,deps:[[new Me,PD],Ot]};function hV(e,...t){return ge("angularfire",Tt.full,"fst"),pt([rX,sX,{provide:PD,useFactory:iX(e),multi:!0,deps:[ue,Ue,Vt,Yt,[new Me,gs],[new Me,zn],...t]}])}var sf=Oe(uV,!0);var tC=Oe(iV,!0);var fV=Oe(oV,!0),pV=Oe(rV,!0);var ll=Oe(WL,!0);var gV=Oe(nV,!0);var vu=Oe(_D,!0);var mV=Oe(eV,!0);var vV=Oe(jL,!0);var CV=Oe(XL,!0);var yV=Oe(JL,!0);var nC=Oe(tV,!0);var Cu=(()=>{let t=class t{constructor(i,s){this.afAuth=i,this.fs=s,this.userId=null,this.incomeTags=new vt([]),this.incomeTags$=this.incomeTags.asObservable(),this.expenseTags=new vt([]),this.expenseTags$=this.expenseTags.asObservable(),this.afAuth.authState.pipe(Ge(r=>r?(this.userId=r.uid,this.getTags()):(this.userId=null,ee([])))).subscribe(r=>{this.separateTagsByType(r)})}getTagFromId(i,s){return(s==="income"?this.incomeTags.value:this.expenseTags.value).find(a=>a.id===i)||{id:"",name:"",type:s}}separateTagsByType(i){this.incomeTags.next(i.filter(s=>s.type==="income")),this.expenseTags.next(i.filter(s=>s.type==="expense"))}getTags(){if(!this.userId)return ee([]);let i=ll(this.fs,`tags/${this.userId}/userTags`);return sf(i,{idField:"id"})}addTag(i,s){if(!this.userId)return ee("");let r={name:i,type:s};return new re(o=>{tC(ll(this.fs,`tags/${this.userId}/userTags`),r).then(a=>{o.next(a.id),o.complete()}).catch(a=>o.error(a))})}updateTag(i,s){if(!this.userId)return ee();let r=vu(this.fs,`tags/${this.userId}/userTags/${i}`);return new re(o=>{nC(r,s).then(()=>{o.next(),o.complete()}).catch(a=>o.error(a))})}deleteTag(i){if(!this.userId)return ee();let s=vu(this.fs,`tags/${this.userId}/userTags/${i}`);return new re(r=>{gV(s).then(()=>{r.next(),r.complete()}).catch(o=>r.error(o))})}addTagToTransaction(i,s,r){if(!this.userId)return ee();let o=vu(this.fs,`transactions/${this.userId}/${r}/${i}`);return new re(a=>{nC(o,{tagIds:pV(s)}).then(()=>{a.next(),a.complete()}).catch(l=>a.error(l))})}removeTagFromTransaction(i,s,r){if(!this.userId)return ee();let o=vu(this.fs,`transactions/${this.userId}/${r}/${i}`);return new re(a=>{nC(o,{tagIds:fV(s)}).then(()=>{a.next(),a.complete()}).catch(l=>a.error(l))})}getTagsForTransaction(i,s){if(!this.userId)return ee([]);let r=vu(this.fs,`transactions/${this.userId}/${s}/${i}`);return new re(o=>{mV(r).then(a=>{if(a.exists()){let l=B({id:a.id},a.data());this.getTags().pipe(oe(c=>c.filter(u=>l.tagIds.includes(u.id)))).subscribe(c=>{o.next(c),o.complete()},c=>o.error(c))}else o.next([]),o.complete()}).catch(a=>o.error(a))})}getTransactionsByTag(i,s){if(!this.userId)return ee([]);let r=ll(this.fs,`transactions/${this.userId}/${s}`);return sf(r,{idField:"id"}).pipe(oe(o=>o.filter(a=>{let l=a.tagIds||[];return Array.isArray(l)&&l.includes(i)})))}};t.\u0275fac=function(s){return new(s||t)(Y(Wc),Y(Gr))},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var iC=(()=>{let t=class t{constructor(i){this.tagService=i}formatDateToDayMonthYearWeekday(i){let s={day:"2-digit",month:"short",year:"numeric",weekday:"short"},r=i.toLocaleDateString("en-GB",s),[o,a,l,c]=r.replace(",","").split(" ");return`${l} ${a} ${c} (${o})`}moneyToLineBarData(i){return i.map(s=>({tag:s.tags[0],value:[s.date,s.amount],title:s.title??""}))}dateToMilli(i){return new Date(i).getTime()}milliToDate(i){return new Date(i).toLocaleDateString("en-CA",{month:"short",day:"2-digit"}).split("T")[0]}dateToMonthDateYearDay(i,s=!0){let r={weekday:"short",year:"numeric",month:"long",day:s?"numeric":void 0};return new Date(i).toLocaleDateString("en-US",r)}groupLineBarDataByDay(i){let s={};return i.forEach(r=>{let o=new Date(r.value[0]),a=`${o.getFullYear()}-${(o.getMonth()+1).toString().padStart(2,"0")}-${o.getDate().toString().padStart(2,"0")}`;s[a]||(s[a]=[]),s[a].push({tag:r.tag,value:r.value[1],title:r.title})}),Object.entries(s).map(([r,o])=>{let a=o,[l,c,u]=r.split("-");return{value:[new Date(parseInt(l),parseInt(c)-1,parseInt(u)).getTime(),a.reduce((f,g)=>f+Number(g.value),0)],points:a}})}groupBarDataByMonth(i){let s=[];return i.forEach(r=>{let o=new Date(r[0]),a=`${o.getFullYear()}-${(o.getMonth()+1).toString().padStart(2,"0")}`;s[a]||(s[a]=0),s[a]+=r[1]}),Object.entries(s).map(([r,o])=>{let[a,l]=r.split("-");return[new Date(parseInt(a),parseInt(l)-1).getTime(),o]})}groupPointsByTags(i){return i.reduce((s,r)=>(s[r.tag]||(s[r.tag]={tag:r.tag,points:[]}),s[r.tag].points.push({title:r.title,value:r.value}),s),{})}formatTooltipBySortedPoints(i,s=!1){return Object.values(i).map(r=>{let o=this.tagService.getTagFromId(r.tag,s?"income":"expense").name,a=r.points.map(l=>`${l.title}: \u20B1${l.value}`).join("<br/>");return`<small><pr><code>${o}</code></pr></small><br/>${a}`}).join("<br/>")}};t.\u0275fac=function(s){return new(s||t)(Y(Cu))},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function oX(e,t){if(e&1&&(Sr(),$(0,"svg",10),ae(1,"path",11),q()),e&2){let n=it(2);wn(n.arrowIconClass)}}function aX(e,t){if(e&1){let n=cn();$(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),_e(4),q(),$(5,"p",4),_e(6),$(7,"span",5),_e(8),tt(9,oX,2,2,":svg:svg",6),q()()(),$(10,"div",7)(11,"button",8),We("click",function(){Dt(n);let s=it();return Rt(s.toggleChartType())}),ae(12,"i"),q()()(),$(13,"div"),ae(14,"div",9),q()()}if(e&2){let n=it();ce(4),Aa(n.title),ce(2),Sn(" ",n.percentChangeMessage," "),ce(),wn(n.percentChangeClass),ce(),Sn(" ",n.percentChange.toFixed(0),"% "),ce(),Xg(9,n.percentChange!==0?9:-1),ce(3),wn(n.toggleChartTypeSymbol),ce(2),Ia("height",n.height),me("options",n.options)}}var _V=(()=>{let t=class t{constructor(i){this.utilService=i,this.data=[],this.title="",this.percentChangeMessage="Recent change:",this.isIncome=!1,this.type="line",this.height="150px",this.percentChange=0,this.isLoading=!1,this.options={tooltip:{trigger:"axis",formatter:s=>{s=s[0];let r=this.utilService.groupPointsByTags(s.data.points),o=this.utilService.dateToMonthDateYearDay(s.value[0]),a=this.utilService.formatTooltipBySortedPoints(r,this.isIncome);return`<small>${o}</small><br/>${a}<br/>${s.data.points.length>1?`<small>Total: \u20B1${s.value[1]}</small>`:""}`},axisPointer:{animation:!1}},xAxis:{type:"category",splitLine:{show:!1},axisLabel:{formatter:s=>this.utilService.milliToDate(Number(s))},show:!1},grid:{bottom:"5%",top:"5%",left:0,right:0},yAxis:{type:"value",splitLine:{show:!1},show:!1},series:[{name:"Mock Data",type:this.type,showSymbol:!0,data:[],itemStyle:{color:"#c23531"}}]}}ngOnInit(){this.loadData()}ngOnChanges(){this.loadData()}toggleChartType(){this.type==="line"?this.type="bar":this.type="line",this.loadData()}loadData(){this.isLoading=!0;let i=this.utilService.groupLineBarDataByDay(this.data);this.percentChange=this.calculatePercentChange(this.data),this.options=se(B({},this.options),{series:[{data:i,type:this.type,itemStyle:{color:"#c23531"}}]}),this.isLoading=!1}get toggleChartTypeSymbol(){return this.type==="bar"?"bi bi-bar-chart-fill":"bi bi-graph-up"}calculatePercentChange(i){if(i.length<2)return 0;let s=i[0].value[1];return(i[i.length-1].value[1]-s)/s*100}get arrowIconClass(){return this.percentChange>0?"w-3 h-3 ms-1":"w-3 h-3 ms-1 rotate-180"}get percentChangeClass(){let i="";if(this.percentChange!==0){let s=this.percentChange>0;this.isIncome?i=s?"text-success":"text-danger":i=s?"text-danger":"text-success"}return`${i}`}};t.\u0275fac=function(s){return new(s||t)(J(iC))},t.\u0275cmp=Ee({type:t,selectors:[["app-line-bar-chart"]],inputs:{data:"data",title:"title",percentChangeMessage:"percentChangeMessage",isIncome:"isIncome",type:"type",height:"height"},standalone:!0,features:[an,De],decls:1,vars:1,consts:[[1,"bg-light","rounded-3","p-3"],[1,"d-flex","m-3"],[1,"col-6","d-flex","flex-column","justify-content-start"],[1,"fw-bold"],[1,"text-muted"],[1,"fw-semibold","text-start","ms-2"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 10 14",3,"class"],[1,"col-3","offset-2","d-flex","justify-content-end"],["type","button",1,"btn","btn-warning","p-1","col-6","offset-6",3,"click"],["echarts","",1,"demo-chart",3,"options"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 10 14"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13V1m0 0L1 5m4-4 4 4"]],template:function(s,r){s&1&&tt(0,aX,15,11,"div",0),s&2&&Xg(0,r.isLoading?-1:0)},dependencies:[uk],styles:["svg[_ngcontent-%COMP%]{width:20px;height:20px}.btn[_ngcontent-%COMP%]{width:50px;height:50px}"]});let e=t;return e})();var bV=(()=>{let t=class t{constructor(){this.title="Title",this.value=0,this.percentChange=0,this.isIncome=!0}get roundedPercentChange(){let i=Math.round(this.percentChange);return`${i>0?"+":""}${i}`}get percentChangeClass(){return this.percentChange===0?"":this.isIncome?this.percentChange>0?"text-success":"text-danger":this.percentChange>0?"text-danger":"text-success"}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Ee({type:t,selectors:[["app-stat-card"]],inputs:{title:"title",value:"value",percentChange:"percentChange",isIncome:"isIncome"},standalone:!0,features:[De],decls:7,vars:5,consts:[[1,"bg-light","border","border-primary","rounded-4","p-4"],[1,"text-muted","small"],[1,"h2","fw-bold"],[1,"small","mb-0"]],template:function(s,r){s&1&&($(0,"div",0)(1,"h3",1),_e(2),q(),$(3,"p",2),_e(4),q(),$(5,"p",3),_e(6),q()()),s&2&&(ce(2),Aa(r.title),ce(2),Aa(r.value),ce(),wn(r.percentChangeClass),ce(),Sn(" ",r.roundedPercentChange,"% "))}});let e=t;return e})();var lX=e=>({"add-tag":e});function cX(e,t){if(e&1){let n=cn();$(0,"div",3),_e(1),$(2,"i",4),We("click",function(){Dt(n);let s=it();return Rt(s.removeExistingTag())}),q()()}if(e&2){let n=it();ce(),Sn(" ",n.selectedTag.name," ")}}function uX(e,t){if(e&1){let n=cn();$(0,"textarea",5),We("keydown.enter",function(s){Dt(n);let r=it();return Rt(r.onEnterKey(s))}),q()}if(e&2){let n=it();me("formControl",n.tagForm)}}function dX(e,t){if(e&1&&($(0,"li",10),_e(1),q()),e&2){let n=it(2);ce(),Sn(' Add tag "',n.tagForm.value,'" ')}}function hX(e,t){if(e&1){let n=cn();$(0,"li",11),We("click",function(){let s=Dt(n).$implicit,r=it(2);return Rt(r.addExistingTag(s))}),_e(1),ae(2,"i",12),q()}if(e&2){let n=t.$implicit,i=it(2);me("ngClass",th(2,lX,i.isOptionHighlighted(n.name))),ce(),Sn(" ",n.name," ")}}function fX(e,t){if(e&1&&($(0,"div",6)(1,"ul",7),tt(2,dX,2,1,"li",8)(3,hX,3,4,"li",9),q()()),e&2){let n=it();ce(2),me("ngIf",n.showAddTagOption()),ce(),me("ngForOf",n.suggestions)}}var EV=(()=>{let t=class t{constructor(i){this.tagService=i,this.type="income",this.tagId=null,this.tagAdded=new H,this.incomeTags=[],this.expenseTags=[],this.tagForm=new Nc(""),this.selectedTag=null,this.suggestions=[],this.searchDelay=0,this.tagService.incomeTags$.subscribe(s=>{this.incomeTags=s}),this.tagService.expenseTags$.subscribe(s=>{this.expenseTags=s}),this.tagForm.valueChanges.pipe(Ky(this.searchDelay)).subscribe(s=>{this.filterSuggestions(s)})}ngOnInit(){this.suggestions=this.type==="income"?this.incomeTags:this.expenseTags,this.tagId!==null&&(this.removeTagFromSuggestions(this.tagId),this.selectedTag=this.tagService.getTagFromId(this.tagId,this.type))}filterSuggestions(i){if(!i)this.suggestions=this.type==="income"?this.incomeTags:this.expenseTags;else{let s=i.toLowerCase();this.suggestions=(this.type==="income"?this.incomeTags:this.expenseTags).filter(r=>r.name.toLowerCase().includes(s)).sort((r,o)=>r.name.length-o.name.length)}this.selectedTag&&this.removeTagFromSuggestions(this.selectedTag.id)}addTag(i){console.log("Adding tag:",i),this.tagService.addTag(i,this.type).subscribe(s=>{console.log("Tag added successfully"),this.tagAdded.emit(s),this.tagForm.setValue(""),this.removeTagFromSuggestions(s)},s=>{console.error("Error adding tag:",s)})}addExistingTag(i){console.log("Adding existing tag:",i.name),this.tagAdded.emit(i.id),this.tagForm.setValue(""),this.selectedTag=i,this.removeTagFromSuggestions(i.id)}removeExistingTag(){this.selectedTag&&(this.tagAdded.emit(null),this.suggestions=this.type==="income"?this.incomeTags:this.expenseTags,this.selectedTag=null)}removeTagFromSuggestions(i){this.suggestions=this.suggestions.filter(s=>s.id.toLowerCase()!==i.toLowerCase())}showAddTagOption(){return!this.suggestions.some(i=>i.name.toLowerCase()===this.tagForm.value.toLowerCase())}onEnterKey(i){if(!this.tagForm.value)return;if(i.preventDefault(),this.suggestions.find(r=>r.name.toLowerCase()===this.tagForm.value.toLowerCase())){this.addExistingTag(this.suggestions[0]);return}this.addTag(this.tagForm.value)}isOptionHighlighted(i){return i.toLowerCase()===this.tagForm.value.toLowerCase()}};t.\u0275fac=function(s){return new(s||t)(J(Cu))},t.\u0275cmp=Ee({type:t,selectors:[["app-tag-input"]],inputs:{type:"type",tagId:"tagId"},outputs:{tagAdded:"tagAdded"},standalone:!0,features:[De],decls:3,vars:3,consts:[["class","badge bg-primary text-wrap",4,"ngIf"],["class","form-control border-0 shadow-none","id","tagIds","placeholder","Add a tag","style","height: 40px; resize: none; overflow: hidden","rows","3",3,"formControl","keydown.enter",4,"ngIf"],["class","position-relative col-6",4,"ngIf"],[1,"badge","bg-primary","text-wrap"],[1,"bi","bi-x-circle-fill","ms-1",3,"click"],["id","tagIds","placeholder","Add a tag","rows","3",1,"form-control","border-0","shadow-none",2,"height","40px","resize","none","overflow","hidden",3,"keydown.enter","formControl"],[1,"position-relative","col-6"],[1,"list-group","position-absolute","shadow","rounded","border","border-1","border-secondary","bg-white","w-100","mt-1","p-0",2,"max-height","125px","overflow-y","auto"],["class","add-tag list-group-item d-flex justify-content-between align-items-center p-2",4,"ngIf"],["class","list-group-item d-flex justify-content-between align-items-center p-2 icon-link-hover",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"add-tag","list-group-item","d-flex","justify-content-between","align-items-center","p-2"],[1,"list-group-item","d-flex","justify-content-between","align-items-center","p-2","icon-link-hover",3,"click","ngClass"],[1,"bi","bi-plus-lg","mx-1"]],template:function(s,r){s&1&&tt(0,cX,3,1,"div",0)(1,uX,1,1,"textarea",1)(2,fX,4,2,"div",2),s&2&&(me("ngIf",r.selectedTag),ce(),me("ngIf",r.selectedTag===null),ce(),me("ngIf",r.tagForm.value))},dependencies:[Fo,qs,Po,Mb,xt,om,js,Li],styles:[".add-tag[_ngcontent-%COMP%]{background-color:#fd7e14;color:#fff}li[_ngcontent-%COMP%]{cursor:pointer}"]});let e=t;return e})();var sC=(()=>{let t=class t{constructor(i,s){this.afAuth=i,this.fs=s,this.userId=null,this.incomeTransactionsSubject=new vt([]),this.incomeTransactions$=this.incomeTransactionsSubject.asObservable(),this.expenseTransactionsSubject=new vt([]),this.expenseTransactions$=this.expenseTransactionsSubject.asObservable(),this.afAuth.authState.pipe(Ge(r=>r?(this.userId=r.uid,this.getAllTransactions()):(this.userId=null,ee({incomeTransactions:[],expenseTransactions:[]})))).subscribe({next:({incomeTransactions:r,expenseTransactions:o})=>{this.incomeTransactionsSubject.next(r),this.expenseTransactionsSubject.next(o)},error:r=>{console.error("Error fetching transactions:",r)}})}getAllTransactions(){if(!this.userId)return ee({incomeTransactions:[],expenseTransactions:[]});let i=this.getIncomeTransactions(),s=this.getExpenseTransactions();return fr([i,s]).pipe(oe(([r,o])=>({incomeTransactions:r,expenseTransactions:o})))}getTransactions(i){if(!this.userId)return ee([]);let s=ll(this.fs,`transactions/${this.userId}/${i}`),r=yV(s,CV("date"));return sf(r,{idField:"id"}).pipe(oe(o=>o.map(a=>se(B({},a),{date:a.date instanceof Zt?a.date.toDate():a.date}))))}getIncomeTransactions(){return this.getTransactions("income")}getExpenseTransactions(){return this.getTransactions("expense")}addTransaction(i){let s=tC(ll(this.fs,`transactions/${this.userId}/${i.type}`),i);return ee(s)}};t.\u0275fac=function(s){return new(s||t)(Y(Wc),Y(Gr))},t.\u0275prov=te({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var pX=["transactionModal"];function gX(e,t){e&1&&($(0,"div",23),_e(1," Amount is required and must be greater than 0. "),q())}function mX(e,t){e&1&&($(0,"div",23),_e(1," Description is required. "),q())}function vX(e,t){e&1&&($(0,"div",23),_e(1," Date is required. "),q())}function CX(e,t){if(e&1){let n=cn();$(0,"div",6)(1,"div",7)(2,"i",8),We("click",function(){Dt(n);let s=it();return Rt(s.closeModal())}),q(),$(3,"h4",9),_e(4),c_(5,"titlecase"),q(),$(6,"p",10),_e(7),q(),$(8,"form",11),We("ngSubmit",function(){Dt(n);let s=it();return Rt(s.onSubmit())}),$(9,"div",12)(10,"label",13),_e(11,"Amount"),q(),ae(12,"input",14),tt(13,gX,2,0,"div",15),q(),$(14,"div",12)(15,"label",16),_e(16,"Description"),q(),ae(17,"textarea",17),tt(18,mX,2,0,"div",15),q(),$(19,"div",12)(20,"label",18),_e(21,"Date"),q(),ae(22,"input",19),tt(23,vX,2,0,"div",15),q(),$(24,"div",12)(25,"app-tag-input",20),We("tagAdded",function(s){Dt(n);let r=it();return Rt(r.updateTransactionTag(s))}),q()(),$(26,"div",21)(27,"button",22),_e(28," Submit "),q()()()()()}if(e&2){let n=it();ce(4),Sn(" ",u_(5,8,n.transactionType)," "),ce(3),Sn("Enter your ",n.transactionType," details below."),ce(),me("formGroup",n.transactionForm),ce(5),me("ngIf",n.transactionForm.controls.amount.invalid&&n.transactionForm.controls.amount.touched),ce(5),me("ngIf",n.transactionForm.controls.description.invalid&&n.transactionForm.controls.description.touched),ce(5),me("ngIf",n.transactionForm.controls.date.invalid&&n.transactionForm.controls.date.touched),ce(2),me("type",n.transactionType),ce(2),me("disabled",n.transactionForm.invalid)}}var RV=(()=>{let t=class t{constructor(i,s,r){this.ngbModal=i,this.fb=s,this.transactionService=r,this.transactionForm=this.fb.group({amount:[null,[Bi.required,Bi.min(.01)]],type:["income",Bi.required],description:["",Bi.required],date:[new Date,Bi.required],tagIds:[[]]}),this.transactionType="income"}openModal(i){this.ngbModal.open(this.transactionModal,{centered:!0,fullscreen:"sm"}),this.transactionForm.get("type").setValue(i),this.transactionType=i}closeModal(){this.ngbModal.dismissAll(),this.transactionForm.reset()}updateTransactionTag(i){if(console.log("Tag ID:",i),!i){this.transactionForm.get("tagIds")?.setValue([]);return}let s=this.transactionForm.get("tagIds")?.value;if(!s)return;let r=s.includes(i)?s.filter(o=>o!==i):[...s,i];this.transactionForm.get("tagIds")?.setValue(r)}onSubmit(){if(this.transactionForm.valid){let i=this.transactionForm.value,s={amount:i.amount??0,type:i.type,description:i.description??"",date:new Date(i.date??new Date),tagIds:i.tagIds??[]};this.transactionService.addTransaction(s).subscribe({next:()=>{console.log("Transaction added successfully")},error:r=>{console.error("Error adding transaction",r)}}),this.closeModal()}else console.error("Form is invalid")}};t.\u0275fac=function(s){return new(s||t)(J(ik),J(Gc),J(sC))},t.\u0275cmp=Ee({type:t,selectors:[["app-transaction-form"]],viewQuery:function(s,r){if(s&1&&Zg(pX,7),s&2){let o;Xd(o=Zd())&&(r.transactionModal=o.first)}},standalone:!0,features:[De],decls:7,vars:0,consts:[["transactionModal",""],[1,"btn-group"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"bi","bi-plus-circle-fill"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"bi","bi-dash-circle-fill"],[1,"modal-content","d-flex","align-items-center","justify-content-center","p-4"],[1,"user-select-none","w-100"],["role","button",1,"bi","bi-x-lg","float-end",3,"click"],["id","modal-title",1,"modal-title","fw-bold"],[1,"text-muted"],[1,"p-3",3,"ngSubmit","formGroup"],[1,"form-row","mb-3"],["for","amount",1,"form-label"],["type","number","id","amount","formControlName","amount","placeholder","Enter amount",1,"form-control"],["class","text-danger",4,"ngIf"],["for","description",1,"form-label"],["id","description","formControlName","description","placeholder","Enter description","rows","3",1,"form-control"],["for","date",1,"form-label"],["type","date","id","date","formControlName","date",1,"form-control"],[3,"tagAdded","type"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-warning",3,"disabled"],[1,"text-danger"]],template:function(s,r){if(s&1){let o=cn();$(0,"div",1)(1,"button",2),We("click",function(){return Dt(o),Rt(r.openModal("income"))}),ae(2,"i",3),q(),$(3,"button",4),We("click",function(){return Dt(o),Rt(r.openModal("expense"))}),ae(4,"i",5),q()(),tt(5,CX,29,10,"ng-template",null,0,Ma)}},dependencies:[Fo,Bc,qs,Ib,Po,Vc,Va,Ba,xt,Li,A1,EV]});let e=t;return e})();var Mu=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,n){let i=t?this.allAsyncListeners:this.allSyncListeners,s=i.get(e);return!s&&n&&(s=new Set,i.set(e,s)),s}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,n=!1){this.getListeners(e,n,!0).add(t)}removeEventListener(e,t,n=!1){let i=this.getListeners(e,n,!1);i&&(i.delete(t),i.size===0&&(n?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){let t=e;this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){let n=e.type;if(t&&"event"in e){let a=e.event;a instanceof Event&&(e.eventPath=a.composedPath())}let i=(a,l)=>a.forEach(c=>{if(!l.has(c))return;let u=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>c(e)):()=>c(e);t?this.dispatchAsync(u):u()}),s=this.getListeners(n,t,!1)??new Set,r=new Set(s);r.size>0&&i(r,s),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(a=>{let l=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>a(n,e)):()=>a(n,e);t?this.dispatchAsync(l):l()})}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){let t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;let e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}};function xe(e){if(!(!e||!e.length))return e[e.length-1]}function vl(e,t,n){return e==null&&t==null?!0:e!=null&&t!=null&&e.length===t.length&&e.every((i,s)=>n?n(i,t[s]):t[s]===i)}function yX(e){return e.sort((t,n)=>t-n)}function ZV(e,t){let n=e.indexOf(t);n>=0&&(e[n]=e[e.length-1],e.pop())}function Jn(e,t){let n=e.indexOf(t);n>=0&&e.splice(n,1)}function wX(e,t){for(let n=0;n<t.length;n++)ZV(e,t[n])}function SX(e,t){for(let n=0;n<t.length;n++)Jn(e,t[n])}function yC(e,t,n){e.splice(n,0,t)}function eB(e,t,n){SX(e,t),t.slice().reverse().forEach(i=>yC(e,i,n))}function hl(e,t){return e.indexOf(t)>-1}function _X(e){return[].concat.apply([],e)}function TV(e,t){t==null||e==null||t.forEach(n=>e.push(n))}var tB="__ag_Grid_Stop_Propagation",bX=["touchstart","touchend","touchmove","touchcancel","scroll"],xD={};function Ru(e){e[tB]=!0}function $o(e){return e[tB]===!0}var nB=(()=>{let e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return n=>{if(typeof xD[n]=="boolean")return xD[n];let i=document.createElement(e[n]||"div");return n="on"+n,xD[n]=n in i}})();function QD(e,t,n){let i=t;for(;i;){let s=e.getDomData(i,n);if(s)return s;i=i.parentElement}return null}function EX(e,t){return!t||!e?!1:RX(t).indexOf(e)>=0}function DX(e){let t=[],n=e.target;for(;n;)t.push(n),n=n.parentElement;return t}function RX(e){let t=e;return t.path?t.path:t.composedPath?t.composedPath():DX(t)}function TX(e,t,n,i){let r=hl(bX,n)?{passive:!0}:void 0;e&&e.addEventListener&&e.addEventListener(t,n,i,r)}var k=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.gridId=e.context.getGridId(),this.frameworkOverrides=e.frameworkOverrides,this.stubContext=e.context,this.eventService=e.eventService,this.gos=e.gos,this.localeService=e.localeService}getFrameworkOverrides(){return this.frameworkOverrides}destroy(){for(let e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t){this.localEventService||(this.localEventService=new Mu),this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService&&this.localEventService.removeEventListener(e,t)}dispatchLocalEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventService,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){let n=[];for(let i in t){let s=t[i];s&&n.push(this._setupListener(e,i,s))}return n}_setupListener(e,t,n){if(this.destroyed)return()=>null;e instanceof HTMLElement?TX(this.getFrameworkOverrides(),e,t,n):e.addEventListener(t,n);let i=()=>(e.removeEventListener(t,n),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(s=>s!==i),null)}setupGridOptionListener(e,t){this.gos.addPropertyEventListener(e,t);let n=()=>(this.gos.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter(i=>i!==n),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;let n=e.join("-")+this.propertyListenerId++,i=s=>{if(s.changeSet){if(s.changeSet&&s.changeSet.id===this.lastChangeSetIdLookup[n])return;this.lastChangeSetIdLookup[n]=s.changeSet.id}let r={type:"gridPropertyChanged",changeSet:s.changeSet,source:s.source};t(r)};e.forEach(s=>this.setupGridOptionListener(s,i))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,t){let n=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),n}createBean(e,t,n){return(t||this.stubContext).createBean(e,n)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}},hR=class{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=n=>{this.frameworkOverrides.wrapOutgoing(()=>e(n))},this.wrappedListeners.set(e,t)),t}wrapGlobal(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=(n,i)=>{this.frameworkOverrides.wrapOutgoing(()=>e(n,i))},this.wrappedGlobalListeners.set(e,t)),t}unwrap(e){return this.wrappedListeners.get(e)??e}unwrapGlobal(e){return this.wrappedGlobalListeners.get(e)??e}};function fl(e){return e==null||e===""?null:e}function j(e,t=!1){return e!=null&&(e!==""||t)}function Pe(e){return!j(e)}function pn(e){return e==null||e.length===0}function YD(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function pl(e){if(e===void 0)return;if(e===null||e==="")return null;if(typeof e=="number")return isNaN(e)?void 0:e;let t=parseInt(e,10);return isNaN(t)?void 0:t}function JD(e){if(e!==void 0)return e===null||e===""?!1:XD(e)}function XD(e){return typeof e=="boolean"?e:typeof e=="string"?e.toUpperCase()==="TRUE"||e=="":!1}function wC(e,t){let n=e?JSON.stringify(e):null,i=t?JSON.stringify(t):null;return n===i}function IX(e,t,n=!1){let i=e==null,s=t==null;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),i&&s)return 0;if(i)return-1;if(s)return 1;function r(o,a){return o>a?1:o<a?-1:0}if(typeof e!="string"||!n)return r(e,t);try{return e.localeCompare(t)}catch{return r(e,t)}}function gC(e){if(e instanceof Set||e instanceof Map){let t=[];return e.forEach(n=>t.push(n)),t}return Object.values(e)}var fR=new Set(["__proto__","constructor","prototype"]);function $i(e,t){if(e!=null){if(Array.isArray(e)){for(let n=0;n<e.length;n++)t(n.toString(),e[n]);return}for(let[n,i]of Object.entries(e))t(n,i)}}function iB(e){let t={},n=Object.keys(e);for(let i=0;i<n.length;i++){if(fR.has(n[i]))continue;let s=n[i],r=e[s];t[s]=r}return t}function ZD(e,t){if(!e)return;let n=e,i={};return Object.keys(n).forEach(s=>{if(t&&t.indexOf(s)>=0||fR.has(s))return;let r=n[s];eR(r)&&r.constructor===Object?i[s]=ZD(r):i[s]=r}),i}function Ko(e){if(!e)return[];let t=Object;if(typeof t.values=="function")return t.values(e);let n=[];for(let i in e)e.hasOwnProperty(i)&&e.propertyIsEnumerable(i)&&n.push(e[i]);return n}function qi(e,t,n=!0,i=!1){j(t)&&$i(t,(s,r)=>{if(fR.has(s))return;let o=e[s];o!==r&&(i&&o==null&&r!=null&&typeof r=="object"&&r.constructor===Object&&(o={},e[s]=o),eR(r)&&eR(o)&&!Array.isArray(o)?qi(o,r,n,i):(n||r!==void 0)&&(e[s]=r))})}function uf(e,t,n){if(!t||!e)return;if(!n)return e[t];let i=t.split("."),s=e;for(let r=0;r<i.length;r++){if(s==null)return;s=s[i[r]]}return s}function eR(e){return typeof e=="object"&&e!==null}var AX={resizable:!0,sortable:!0},MX=0;function sB(){return MX++}function Qo(e){return e instanceof oB}var rB=20,oB=class extends k{constructor(e,t,n,i){super(),this.isColumn=!0,this.instanceId=sB(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.columnEventService=new Mu,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=t,this.colId=n,this.primary=i,this.setState(e)}wireBeans(e){this.columnHoverService=e.columnHoverService}getInstanceId(){return this.instanceId}setState(e){e.sort!==void 0?(e.sort==="asc"||e.sort==="desc")&&(this.sort=e.sort):(e.initialSort==="asc"||e.initialSort==="desc")&&(this.sort=e.initialSort);let t=e.sortIndex,n=e.initialSortIndex;t!==void 0?t!==null&&(this.sortIndex=t):n!==null&&(this.sortIndex=n);let i=e.hide,s=e.initialHide;i!==void 0?this.visible=!i:this.visible=!s,e.pinned!==void 0?this.setPinned(e.pinned):this.setPinned(e.initialPinned);let r=e.flex,o=e.initialFlex;r!==void 0?this.flex=r:o!==void 0&&(this.flex=o)}setColDef(e,t,n){this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.columnEventService.dispatchEvent(this.createColumnEvent("colDefChanged",n))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}postConstruct(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){let e=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=j(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=j(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){let e=this.colDef;this.minWidth=e.minWidth??rB,this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=j(this.colDef.tooltipField)||j(this.colDef.tooltipValueGetter)||j(this.colDef.tooltipComponent)}resetActualWidth(e){let t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t,n=pl(e.width),i=pl(e.initialWidth);return n!=null?t=n:i!=null?t=i:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(Pe(this.colDef)||Pe(this.colDef.showRowGroup))return!1;let t=this.colDef.showRowGroup===!0,n=this.colDef.showRowGroup===e;return t||n}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}addEventListener(e,t){this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.columnEventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new hR(this.frameworkOverrides));let n=this.frameworkEventListenerService?.wrap(t)??t;this.columnEventService.addEventListener(e,n)}removeEventListener(e,t){let n=this.frameworkEventListenerService?.unwrap(t)??t;this.columnEventService.removeEventListener(e,n)}createColumnFunctionCallbackParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){let t=this.createColumnFunctionCallbackParams(e),n=this.colDef.suppressNavigable;return n(t)}return!1}isCellEditable(e){return e.group&&!this.gos.get("enableGroupEdit")?!1:this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??AX[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){let n=this.createColumnFunctionCallbackParams(e);return t(n)}return!1}setMoving(e,t){this.moving=e,this.columnEventService.dispatchEvent(this.createColumnEvent("movingChanged",t))}createColumnEvent(e,t){return this.gos.addGridCommonParams({type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,t){this.sort!==e&&(this.sort=e,this.columnEventService.dispatchEvent(this.createColumnEvent("sortChanged",t))),this.dispatchStateUpdatedEvent("sort")}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return Pe(this.sort)}isSorting(){return j(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setMenuVisible(e,t){this.menuVisible!==e&&(this.menuVisible=e,this.columnEventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",t)))}isMenuVisible(){return this.menuVisible}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.columnEventService.dispatchEvent(this.createColumnEvent("leftChanged",t)))}isFilterActive(){return this.filterActive}setFilterActive(e,t,n){this.filterActive!==e&&(this.filterActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",t)));let i=this.createColumnEvent("filterChanged",t);n&&qi(i,n),this.columnEventService.dispatchEvent(i)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){e===!0||e==="left"?this.pinned="left":e==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",t)))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",t)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){let n=e===!0;this.visible!==n&&(this.visible=n,this.columnEventService.dispatchEvent(this.createColumnEvent("visibleChanged",t))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){let e=this.getColDef();return!e.suppressSpanHeaderHeight&&!e.autoHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};let t=e.getPaddingLevel()+1,n=!0;for(;e;){if(!e.isPadding()){n=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:n}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){let t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(Pe(this.colDef.colSpan))return 1;let t=this.createBaseColDefParams(e),n=this.colDef.colSpan(t);return Math.max(n,1)}getRowSpan(e){if(Pe(this.colDef.rowSpan))return 1;let t=this.createBaseColDefParams(e),n=this.colDef.rowSpan(t);return Math.max(n,1)}setActualWidth(e,t,n=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),n||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.columnEventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,t){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",t))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,t){this.pivotActive!==e&&(this.pivotActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",t))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,t){this.aggregationActive!==e&&(this.aggregationActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnValueChanged",t)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchStateUpdatedEvent(e){this.columnEventService.dispatchEvent({type:"columnStateUpdated",key:e})}};function Qn(e){return e instanceof mC}var mC=class extends k{constructor(e,t,n,i){super(),this.isColumn=!1,this.expandable=!1,this.instanceId=sB(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=t,this.expanded=!!e&&!!e.openByDefault,this.padding=n,this.level=i}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(t=>{Qo(t)?e.push(t):Qn(t)&&t.addLeafColumns(e)})}getColumnGroupShow(){let e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();let e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,n=!1,i=this.findChildrenRemovingPadding();for(let r=0,o=i.length;r<o;r++){let a=i[r];if(!a.isVisible())continue;let l=a.getColumnGroupShow();l==="open"?(e=!0,n=!0):l==="closed"?(t=!0,n=!0):(e=!0,t=!0)}let s=e&&t&&n;this.expandable!==s&&(this.expandable=s,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){let e=[],t=n=>{n.forEach(i=>{Qn(i)&&i.isPadding()?t(i.children):e.push(i)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},PX={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},IV={};function pR(e,t){IV[t]||(e(),IV[t]=!0)}function Ki(e,...t){console.log("AG Grid: "+e,...t)}function G(e,...t){pR(()=>console.warn("AG Grid: "+e,...t),e+t?.join(""))}function ke(e,...t){pR(()=>console.error("AG Grid: "+e,...t),e+t?.join(""))}function gR(e){return!!(e&&e.constructor&&e.call&&e.apply)}function FX(e){xX(e,400)}var OD=[],ND=!1;function AV(e){OD.push(e),!ND&&(ND=!0,window.setTimeout(()=>{let t=OD.slice();OD.length=0,ND=!1,t.forEach(n=>n())},0))}function xX(e,t=0){e.length>0&&window.setTimeout(()=>e.forEach(n=>n()),t)}function Xn(e,t){let n;return function(...i){let s=this;window.clearTimeout(n),n=window.setTimeout(function(){e.apply(s,i)},t)}}function MV(e,t){let n=0;return function(...i){let s=this,r=new Date().getTime();r-n<t||(n=r,e.apply(s,i))}}function OX(e,t,n=100,i){let s=new Date().getTime(),r=null,o=!1,a=()=>{let l=new Date().getTime()-s>n;(e()||l)&&(t(),o=!0,r!=null&&(window.clearInterval(r),r=null),l&&i&&G(i))};a(),o||(r=window.setInterval(a,10))}function NX(...e){return t=>e.reduce((n,i)=>i(n),t)}var kX=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=YD(e);let n=0;for(;;){let i;if(e?(i=e,n!==0&&(i+="_"+n)):t?(i=t,n!==0&&(i+="_"+n)):i=n,!this.existingKeys[i])return this.existingKeys[i]=!0,String(i);n++}}},yf="ag-Grid-AutoColumn";function mR(e){let t=[],n=i=>{for(let s=0;s<i.length;s++){let r=i[s];Qo(r)?t.push(r):Qn(r)&&n(r.getChildren())}};return n(e),t}function Wr(e){return e.reduce((t,n)=>t+n.getActualWidth(),0)}function _u(e,t,n){let i={};if(!t)return;$r(null,t,r=>{i[r.getInstanceId()]=r}),n&&$r(null,n,r=>{i[r.getInstanceId()]=null});let s=Object.values(i).filter(r=>r!=null);e.destroyBeans(s)}function PV(e){return e.getId().startsWith(yf)}function vC(e){let t=[];return e instanceof Array?e.some(i=>typeof i!="string")?G("if colDef.type is supplied an array it should be of type 'string[]'"):t=e:typeof e=="string"?t=e.split(","):G("colDef.type should be of type 'string' | 'string[]'"),t}var LX=class extends k{constructor(){super(...arguments),this.beanName="columnFactory"}wireBeans(e){this.dataTypeService=e.dataTypeService}createColumnTree(e,t,n,i){let s=new kX,{existingCols:r,existingGroups:o,existingColKeys:a}=this.extractExistingTreeData(n);s.addExistingKeys(a);let l=this.recursivelyCreateColumns(e,0,t,r,s,o,i),c=this.findMaxDept(l,0),u=this.balanceColumnTree(l,0,c,s);return $r(null,u,(f,g)=>{Qn(f)&&f.setupExpandable(),f.setOriginalParent(g)}),{columnTree:u,treeDept:c}}extractExistingTreeData(e){let t=[],n=[],i=[];return e&&$r(null,e,s=>{if(Qn(s)){let r=s;n.push(r)}else{let r=s;i.push(r.getId()),t.push(r)}}),{existingCols:t,existingGroups:n,existingColKeys:i}}createForAutoGroups(e,t){let n=[],i=this.findDepth(t);return e.forEach(s=>{let r=s;for(let o=i-1;o>=0;o--){let a=new mC(null,`FAKE_PATH_${s.getId()}}_${o}`,!0,o);this.createBean(a),a.setChildren([r]),r.setOriginalParent(a),r=a}i===0&&s.setOriginalParent(null),n.push(r)}),[n,i]}findDepth(e){let t=0,n=e;for(;n&&n[0]&&Qn(n[0]);)t++,n=n[0].getChildren();return t}balanceColumnTree(e,t,n,i){let s=[];for(let r=0;r<e.length;r++){let o=e[r];if(Qn(o)){let a=o,l=this.balanceColumnTree(a.getChildren(),t+1,n,i);a.setChildren(l),s.push(a)}else{let a,l;for(let c=n-1;c>=t;c--){let u=i.getUniqueKey(null,null),h=this.createMergedColGroupDef(null),f=new mC(h,u,!0,t);this.createBean(f),l&&l.setChildren([f]),l=f,a||(a=l)}if(a&&l)if(s.push(a),e.some(u=>Qn(u))){l.setChildren([o]);continue}else{l.setChildren(e);break}s.push(o)}}return s}findMaxDept(e,t){let n=t;for(let i=0;i<e.length;i++){let s=e[i];if(Qn(s)){let r=s,o=this.findMaxDept(r.getChildren(),t+1);n<o&&(n=o)}}return n}recursivelyCreateColumns(e,t,n,i,s,r,o){if(!e)return[];let a=new Array(e.length);for(let l=0;l<a.length;l++){let c=e[l];this.isColumnGroup(c)?a[l]=this.createColumnGroup(n,c,t,i,s,r,o):a[l]=this.createColumn(n,c,i,s,o)}return a}createColumnGroup(e,t,n,i,s,r,o){let a=this.createMergedColGroupDef(t),l=s.getUniqueKey(a.groupId||null,null),c=new mC(a,l,!1,n);this.createBean(c);let u=this.findExistingGroup(t,r);u&&r.splice(u.idx,1);let h=u?.group;h&&c.setExpanded(h.isExpanded());let f=this.recursivelyCreateColumns(a.children,n+1,e,i,s,r,o);return c.setChildren(f),c}createMergedColGroupDef(e){let t={};return Object.assign(t,this.gos.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,n,i,s){let r=this.findExistingColumn(t,n);r&&n?.splice(r.idx,1);let o=r?.column;if(o){let a=this.addColumnDefaultAndTypes(t,o.getColId());o.setColDef(a,t,s),this.applyColumnState(o,a,s)}else{let a=i.getUniqueKey(t.colId,t.field),l=this.addColumnDefaultAndTypes(t,a);o=new oB(l,t,a,e),this.createBean(o)}return this.dataTypeService?.addColumnListeners(o),o}applyColumnState(e,t,n){let i=pl(t.flex);if(i!==void 0&&e.setFlex(i),e.getFlex()<=0){let a=pl(t.width);if(a!=null)e.setActualWidth(a,n);else{let l=e.getActualWidth();e.setActualWidth(l,n)}}t.sort!==void 0&&(t.sort=="asc"||t.sort=="desc"?e.setSort(t.sort,n):e.setSort(void 0,n));let r=pl(t.sortIndex);r!==void 0&&e.setSortIndex(r);let o=JD(t.hide);o!==void 0&&e.setVisible(!o,n),t.pinned!==void 0&&e.setPinned(t.pinned)}findExistingColumn(e,t){if(t)for(let n=0;n<t.length;n++){let i=t[n].getUserProvidedColDef();if(!i)continue;if(e.colId!=null){if(t[n].getId()===e.colId)return{idx:n,column:t[n]};continue}if(e.field!=null){if(i.field===e.field)return{idx:n,column:t[n]};continue}if(i===e)return{idx:n,column:t[n]}}}findExistingGroup(e,t){if(e.groupId!=null)for(let i=0;i<t.length;i++){let s=t[i];if(s.getColGroupDef()&&s.getId()===e.groupId)return{idx:i,group:s}}}addColumnDefaultAndTypes(e,t){let n={},i=this.gos.get("defaultColDef");qi(n,i,!1,!0);let s=this.updateColDefAndGetColumnType(n,e,t);s&&this.assignColumnTypes(s,n),qi(n,e,!1,!0);let r=this.gos.get("autoGroupColumnDef"),o=this.gos.isColumnsSortingCoupledToGroup();return e.rowGroup&&r&&o&&qi(n,{sort:r.sort,initialSort:r.initialSort},!1,!0),this.dataTypeService?.validateColDef(n),n}updateColDefAndGetColumnType(e,t,n){let i=this.dataTypeService?.updateColDefAndGetColumnType(e,t,n),s=t.type??i??e.type;return e.type=s,s?vC(s):void 0}assignColumnTypes(e,t){if(!e.length)return;let n=Object.assign({},PX),i=this.gos.get("columnTypes")||{};$i(i,(s,r)=>{s in n?G(`the column type '${s}' is a default column type and cannot be overridden.`):(r.type&&G("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),n[s]=r)}),e.forEach(s=>{let r=n[s.trim()];r?qi(t,r,!1,!0):G("colDef.type '"+s+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(e){return e.children!==void 0}};function $r(e,t,n){if(t)for(let i=0;i<t.length;i++){let s=t[i];Qn(s)&&$r(s,s.getChildren(),n),n(s,e)}}var VX=class extends k{constructor(){super(...arguments),this.beanName="columnModel",this.pivotMode=!1,this.autoHeightActiveAtLeastOnce=!1,this.ready=!1,this.changeEventsDispatching=!1,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}wireBeans(e){this.context=e.context,this.columnFactory=e.columnFactory,this.columnSizeService=e.columnSizeService,this.visibleColsService=e.visibleColsService,this.columnViewportService=e.columnViewportService,this.pivotResultColsService=e.pivotResultColsService,this.columnAnimationService=e.columnAnimationService,this.autoColService=e.autoColService,this.valueCache=e.valueCache,this.columnDefFactory=e.columnDefFactory,this.columnApplyStateService=e.columnApplyStateService,this.columnGroupStateService=e.columnGroupStateService,this.eventDispatcher=e.columnEventDispatcher,this.columnMoveService=e.columnMoveService,this.columnAutosizeService=e.columnAutosizeService,this.funcColsService=e.funcColsService,this.quickFilterService=e.quickFilterService,this.showRowGroupColsService=e.showRowGroupColsService,this.environment=e.environment}postConstruct(){let e=this.gos.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],t=>this.refreshAll(bu(t.source))),this.addManagedPropertyListener("autoGroupColumnDef",t=>this.onAutoGroupColumnDefChanged(bu(t.source))),this.addManagedPropertyListeners(["defaultColDef","columnTypes","suppressFieldDotNotation"],t=>this.recreateColumnDefs(bu(t.source))),this.addManagedPropertyListener("pivotMode",t=>this.setPivotMode(this.gos.get("pivotMode"),bu(t.source))),this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}createColsFromColDefs(e,t){let n=e?this.columnApplyStateService.compareColumnStatesAndDispatchEvents(t):void 0;this.valueCache.expire();let i=this.colDefCols&&this.colDefCols.list,s=this.colDefCols&&this.colDefCols.tree,r=this.columnFactory.createColumnTree(this.colDefs,!0,s,t);_u(this.context,this.colDefCols?.tree,r.columnTree);let o=r.columnTree,a=r.treeDept,l=mR(o),c={};l.forEach(h=>c[h.getId()]=h),this.colDefCols={tree:o,treeDepth:a,list:l,map:c},this.funcColsService.extractCols(t,i),this.ready=!0,this.refreshCols(),e&&!this.showingPivotResult&&!this.gos.get("maintainColumnOrder")&&this.orderColsLikeColDefCols(),this.visibleColsService.refresh(t),this.columnViewportService.checkViewportColumns(),this.eventDispatcher.everythingChanged(t),n&&(this.changeEventsDispatching=!0,n(),this.changeEventsDispatching=!1),this.eventDispatcher.newColumnsLoaded(t),t==="gridInitializing"&&this.columnSizeService.applyAutosizeStrategy()}refreshCols(){if(!this.colDefCols)return;let e=this.cols?.tree;this.saveColOrder(),this.selectCols(),this.createAutoCols(),this.addAutoCols(),this.restoreColOrder(),this.positionLockedCols(),this.showRowGroupColsService?.refresh(),this.quickFilterService?.refreshQuickFilterCols(),this.setColSpanActive(),this.setAutoHeightActive(),this.visibleColsService.clear(),this.columnViewportService.clear(),!vl(e,this.cols.tree)&&this.eventDispatcher.gridColumns()}selectCols(){let e=this.pivotResultColsService.getPivotResultCols();if(this.showingPivotResult=e!=null,e){let{map:t,list:n,tree:i,treeDepth:s}=e;this.cols={list:n.slice(),map:B({},t),tree:i.slice(),treeDepth:s},e.list.some(o=>this.cols?.map[o.getColId()]!==void 0)||(this.lastPivotOrder=null)}else{let{map:t,list:n,tree:i,treeDepth:s}=this.colDefCols;this.cols={list:n.slice(),map:B({},t),tree:i.slice(),treeDepth:s}}}getColsToShow(){let e=this.isPivotMode()&&!this.isShowingPivotResult(),t=this.funcColsService.getValueColumns();return this.cols.list.filter(i=>{let s=PV(i);if(e){let r=t&&hl(t,i);return s||r}else return s||i.isVisible()})}addAutoCols(){this.autoCols!=null&&(this.cols.list=this.autoCols.list.concat(this.cols.list),this.cols.tree=this.autoCols.tree.concat(this.cols.tree),BX(this.cols))}createAutoCols(){let e=this.gos.isGroupUseEntireRow(this.pivotMode),t=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),n=this.funcColsService.getRowGroupColumns(),s=!(n.length>0||this.gos.get("treeData"))||t||e,r=()=>{this.autoCols&&(_u(this.context,this.autoCols.tree),this.autoCols=null)};if(s||!this.autoColService){r();return}let o=this.autoColService.createAutoCols(n)??[],a=GX(o,this.autoCols?.list||null),l=this.cols.treeDepth,u=(this.autoCols?this.autoCols.treeDepth:-1)==l;if(a&&u)return;r();let[h,f]=this.columnFactory.createForAutoGroups(o,this.cols?.tree);this.autoCols={list:o,tree:h,treeDepth:f,map:{}};let g=v=>{if(!v)return null;let y=v.filter(C=>!PV(C));return[...o,...y]};this.lastOrder=g(this.lastOrder),this.lastPivotOrder=g(this.lastPivotOrder)}refreshAll(e){this.isReady()&&(this.refreshCols(),this.visibleColsService.refresh(e))}setColsVisible(e,t=!1,n){this.columnApplyStateService.applyColumnState({state:e.map(i=>({colId:typeof i=="string"?i:i.getColId(),hide:!t}))},n)}setColsPinned(e,t,n){if(!this.cols||pn(e))return;if(this.gos.isDomLayout("print")){G("Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let i;t===!0||t==="left"?i="left":t==="right"?i="right":i=null;let s=[];e.forEach(r=>{if(!r)return;let o=this.getCol(r);o&&o.getPinned()!==i&&(o.setPinned(i),s.push(o))}),s.length&&(this.visibleColsService.refresh(n),this.eventDispatcher.columnPinned(s,n)),this.columnAnimationService.finish()}setColumnGroupOpened(e,t,n){let i;Qn(e)?i=e.getId():i=e||"",this.columnGroupStateService.setColumnGroupState([{groupId:i,open:t}],n)}getProvidedColGroup(e){let t=null;return $r(null,this.cols?.tree,n=>{Qn(n)&&n.getId()===e&&(t=n)}),t}isColGroupLocked(e){let t=this.gos.get("groupLockGroupColumns");if(!e.isRowGroupActive()||t===0)return!1;if(t===-1)return!0;let i=this.funcColsService.getRowGroupColumns().findIndex(s=>s.getColId()===e.getColId());return t>i}isSuppressAutoCol(){return this.gos.get("groupDisplayType")==="custom"?!0:this.gos.get("treeDataDisplayType")==="custom"}setAutoHeightActive(){this.autoHeightActive=this.cols.list.some(e=>e.isAutoHeight()),this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,this.gos.isRowModelType("clientSide")||this.gos.isRowModelType("serverSide")||G("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}restoreColOrder(){let e=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!e)return;let t=new Map(e.map((l,c)=>[l,c]));if(!this.cols.list.some(l=>t.has(l)))return;let i=new Map(this.cols.list.map(l=>[l,!0])),s=e.filter(l=>i.has(l)),r=new Map(s.map(l=>[l,!0])),o=this.cols.list.filter(l=>!r.has(l)),a=s.slice();o.forEach(l=>{let c=l.getOriginalParent();if(!c){a.push(l);return}let u=[];for(;!u.length&&c;)c.getLeafColumns().forEach(v=>{let y=a.indexOf(v)>=0,C=u.indexOf(v)<0;y&&C&&u.push(v)}),c=c.getOriginalParent();if(!u.length){a.push(l);return}let h=u.map(g=>a.indexOf(g)),f=Math.max(...h);yC(a,l,f+1)}),this.cols.list=a}orderColsLikeColDefCols(){if(!this.colDefCols||!this.cols)return;let e=this.colDefCols.list.filter(n=>this.cols.list.indexOf(n)>=0),t=this.cols.list.filter(n=>e.indexOf(n)<0);this.cols.list=[...t,...e],this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}sortColsLikeKeys(e){if(this.cols==null)return;let t=[],n={};e.forEach(s=>{if(n[s])return;let r=this.cols.map[s];r&&(t.push(r),n[s]=!0)});let i=0;if(this.cols.list.forEach(s=>{let r=s.getColId();if(n[r]!=null)return;r.startsWith(yf)?yC(t,s,i++):t.push(s)}),t=this.columnMoveService.placeLockedColumns(t),!this.columnMoveService.doesMovePassMarryChildren(t)){G("Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.cols.list=t}sortColsLikeCols(e){!e||e.length<=1||e.filter(n=>this.cols.list.indexOf(n)<0).length>0||e.sort((n,i)=>{let s=this.cols.list.indexOf(n),r=this.cols.list.indexOf(i);return s-r})}resetColDefIntoCol(e,t){let n=e.getUserProvidedColDef();if(!n)return!1;let i=this.columnFactory.addColumnDefaultAndTypes(n,e.getColId());return e.setColDef(i,n,t),!0}queueResizeOperations(){this.shouldQueueResizeOperations=!0}isShouldQueueResizeOperations(){return this.shouldQueueResizeOperations}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}moveInCols(e,t,n){eB(this.cols?.list,e,t),this.visibleColsService.refresh(n)}positionLockedCols(){this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list:this.lastOrder=this.cols?.list}getColumnDefs(){if(!this.colDefCols)return;let e=this.colDefCols.list.slice();this.showingPivotResult?e.sort((i,s)=>this.lastOrder.indexOf(i)-this.lastOrder.indexOf(s)):this.lastOrder&&e.sort((i,s)=>this.cols.list.indexOf(i)-this.cols.list.indexOf(s));let t=this.funcColsService.getRowGroupColumns(),n=this.funcColsService.getPivotColumns();return this.columnDefFactory.buildColumnDefs(e,t,n)}isShowingPivotResult(){return this.showingPivotResult}isChangeEventsDispatching(){return this.changeEventsDispatching}isColSpanActive(){return this.colSpanActive}isProvidedColGroupsPresent(){return this.colDefCols?.treeDepth>0}setColSpanActive(){this.colSpanActive=this.cols.list.some(e=>e.getColDef().colSpan!=null)}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}getHeaderRowCount(){return this.cols?this.cols.treeDepth+1:-1}isReady(){return this.ready}isPivotMode(){return this.pivotMode}setPivotMode(e,t){e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=e,this.ready&&(this.refreshCols(),this.visibleColsService.refresh(t),this.eventDispatcher.pivotModeChanged()))}isPivotSettingAllowed(e){return e&&this.gos.get("treeData")?(G("Pivot mode not available with treeData."),!1):!0}isPivotActive(){let e=this.funcColsService.getPivotColumns();return this.pivotMode&&!pn(e)}recreateColumnDefs(e){this.cols&&(this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e),this.createColsFromColDefs(!0,e))}setColumnDefs(e,t){let n=!!this.colDefs;this.colDefs=e,this.createColsFromColDefs(n,t)}destroy(){_u(this.context,this.colDefCols?.tree),_u(this.context,this.autoCols?.tree),super.destroy()}getColTree(){return this.cols.tree}getColDefColTree(){return this.colDefCols.tree}getColDefCols(){return this.colDefCols?.list?this.colDefCols.list:null}getCols(){return this.cols?.list??[]}getAllCols(){let t=this.pivotResultColsService.getPivotResultCols()?.list;return[].concat(this.colDefCols?.list||[],this.autoCols?.list||[],t||[])}getColsForKeys(e){return e?e.map(n=>this.getCol(n)).filter(n=>n!=null):[]}getColDefCol(e){return this.colDefCols?.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColFromCollection(e,t){if(t==null)return null;let{map:n,list:i}=t;if(typeof e=="string"&&n[e])return n[e];for(let s=0;s<i.length;s++)if(FV(i[s],e))return i[s];return this.getAutoCol(e)}getAutoCol(e){return this.autoCols==null?null:this.autoCols.list.find(t=>FV(t,e))||null}getAutoCols(){return this.autoCols?.list||null}setColHeaderHeight(e,t){e.setAutoHeaderHeight(t)&&this.eventDispatcher.headerHeight(e)}getColumnGroupHeaderRowHeight(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()}getColumnHeaderRowHeight(){let e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),n=this.visibleColsService.getAllCols().filter(i=>i.isAutoHeaderHeight()).map(i=>i.getAutoHeaderHeight()||0);return Math.max(e,...n)}getHeaderHeight(){return this.gos.get("headerHeight")??this.environment.getDefaultHeaderHeight()}getFloatingFiltersHeight(){return this.gos.get("floatingFiltersHeight")??this.getHeaderHeight()}getGroupHeaderHeight(){return this.gos.get("groupHeaderHeight")??this.getHeaderHeight()}getPivotHeaderHeight(){return this.gos.get("pivotHeaderHeight")??this.getHeaderHeight()}getPivotGroupHeaderHeight(){return this.gos.get("pivotGroupHeaderHeight")??this.getGroupHeaderHeight()}onFirstDataRendered(){let e=this.gos.get("autoSizeStrategy");if(e?.type!=="fitCellContents")return;let{colIds:t,skipHeader:n}=e;setTimeout(()=>{t?this.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:n,source:"autosizeColumns"}):this.columnAutosizeService.autoSizeAllColumns("autosizeColumns",n)})}onAutoGroupColumnDefChanged(e){this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e)}};function bu(e){return e==="gridOptionsUpdated"?"gridOptionsChanged":e}function BX(e){e.map={},e.list.forEach(t=>e.map[t.getId()]=t)}function FV(e,t){let n=e===t,i=e.getColDef()===t,s=e.getColId()==t;return n||i||s}function GX(e,t){return vl(e,t,(n,i)=>n.getColId()===i.getColId())}var HX=class extends k{constructor(){super(...arguments),this.beanName="columnAutosizeService",this.timesDelayed=0}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.animationFrameService=e.animationFrameService,this.autoWidthCalculator=e.autoWidthCalculator,this.eventDispatcher=e.columnEventDispatcher,this.ctrlsService=e.ctrlsService,this.renderStatusService=e.renderStatusService}autoSizeCols(e){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeCols(e));return}let{colKeys:t,skipHeader:n,skipHeaderGroups:i,stopAtGroup:s,source:r="api"}=e;if(this.animationFrameService.flushAllFrames(),this.timesDelayed<5&&this.renderStatusService&&!this.renderStatusService.areHeaderCellsRendered()){this.timesDelayed++,setTimeout(()=>this.autoSizeCols(e));return}this.timesDelayed=0;let o=[],a=-1,l=n??this.gos.get("skipHeaderOnAutoSize"),c=i??l;for(;a!==0;){a=0;let u=[];t.forEach(h=>{if(!h)return;let f=this.columnModel.getCol(h);if(!f||o.indexOf(f)>=0)return;let g=this.autoWidthCalculator.getPreferredWidthForColumn(f,l);if(g>0){let v=this.normaliseColumnWidth(f,g);f.setActualWidth(v,r),o.push(f),a++}u.push(f)}),u.length&&this.visibleColsService.refresh(r)}c||this.autoSizeColumnGroupsByColumns(t,r,s),this.eventDispatcher.columnResized(o,!0,"autosizeColumns")}autoSizeColumn(e,t,n){e&&this.autoSizeCols({colKeys:[e],skipHeader:n,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,n){let i=new Set;this.columnModel.getColsForKeys(e).forEach(a=>{let l=a.getParent();for(;l&&l!=n;)l.isPadding()||i.add(l),l=l.getParent()});let r,o=[];for(let a of i){for(let l of this.ctrlsService.getHeaderRowContainerCtrls())if(r=l.getHeaderCtrlForColumn(a),r)break;r&&r.resizeLeafColumnsToFit(t)}return o}autoSizeAllColumns(e,t){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeAllColumns(e,t));return}let n=this.visibleColsService.getAllCols();this.autoSizeCols({colKeys:n,skipHeader:t,source:e})}normaliseColumnWidth(e,t){let n=e.getMinWidth();t<n&&(t=n);let i=e.getMaxWidth();return e.isGreaterThanMax(t)&&(t=i),t}},UX=class extends k{constructor(){super(...arguments),this.beanName="funcColsService",this.rowGroupCols=[],this.valueCols=[],this.pivotCols=[]}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.aggFuncService=e.aggFuncService,this.visibleColsService=e.visibleColsService}getModifyColumnsNoEventsCallbacks(){return{addGroupCol:e=>this.rowGroupCols.push(e),removeGroupCol:e=>Jn(this.rowGroupCols,e),addPivotCol:e=>this.pivotCols.push(e),removePivotCol:e=>Jn(this.pivotCols,e),addValueCol:e=>this.valueCols.push(e),removeValueCol:e=>Jn(this.valueCols,e)}}getSourceColumnsForGroupColumn(e){let t=e.getColDef().showRowGroup;if(!t)return null;if(t===!0)return this.rowGroupCols.slice(0);let n=this.columnModel.getColDefCol(t);return n?[n]:null}sortRowGroupColumns(e){this.rowGroupCols.sort(e)}sortPivotColumns(e){this.pivotCols.sort(e)}getValueColumns(){return this.valueCols?this.valueCols:[]}getPivotColumns(){return this.pivotCols?this.pivotCols:[]}getRowGroupColumns(){return this.rowGroupCols?this.rowGroupCols:[]}isRowGroupEmpty(){return pn(this.rowGroupCols)}setColumnAggFunc(e,t,n){if(!e)return;let i=this.columnModel.getColDefCol(e);i&&(i.setAggFunc(t),this.eventDispatcher.columnChanged("columnValueChanged",[i],n))}setRowGroupColumns(e,t){this.setColList(e,this.rowGroupCols,"columnRowGroupChanged",!0,!0,(n,i)=>this.setRowGroupActive(n,i,t),t)}setRowGroupActive(e,t,n){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,n),e&&!this.gos.get("suppressRowGroupHidesColumns")&&this.columnModel.setColsVisible([t],!1,n),!e&&!this.gos.get("suppressMakeColumnVisibleAfterUnGroup")&&this.columnModel.setColsVisible([t],!0,n))}addRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!0,!0,n=>this.setRowGroupActive(!0,n,t),"columnRowGroupChanged",t)}removeRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!1,!0,n=>this.setRowGroupActive(!1,n,t),"columnRowGroupChanged",t)}addPivotColumns(e,t){this.updateColList(e,this.pivotCols,!0,!1,n=>n.setPivotActive(!0,t),"columnPivotChanged",t)}setPivotColumns(e,t){this.setColList(e,this.pivotCols,"columnPivotChanged",!0,!1,(n,i)=>{i.setPivotActive(n,t)},t)}removePivotColumns(e,t){this.updateColList(e,this.pivotCols,!1,!1,n=>n.setPivotActive(!1,t),"columnPivotChanged",t)}setValueColumns(e,t){this.setColList(e,this.valueCols,"columnValueChanged",!1,!1,(n,i)=>this.setValueActive(n,i,t),t)}setValueActive(e,t,n){if(e!==t.isValueActive()&&(t.setValueActive(e,n),e&&!t.getAggFunc()&&this.aggFuncService)){let i=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(i)}}addValueColumns(e,t){this.updateColList(e,this.valueCols,!0,!1,n=>this.setValueActive(!0,n,t),"columnValueChanged",t)}removeValueColumns(e,t){this.updateColList(e,this.valueCols,!1,!1,n=>this.setValueActive(!1,n,t),"columnValueChanged",t)}moveRowGroupColumn(e,t,n){if(this.isRowGroupEmpty())return;let i=this.rowGroupCols[e],s=this.rowGroupCols.slice(e,t);this.rowGroupCols.splice(e,1),this.rowGroupCols.splice(t,0,i),this.eventDispatcher.rowGroupChanged(s,n)}setColList(e,t,n,i,s,r,o){let a=this.columnModel.getCols();if(pn(a))return;let l=new Map;t.forEach((u,h)=>l.set(u,h)),t.length=0,j(e)&&e.forEach(u=>{let h=this.columnModel.getColDefCol(u);h&&t.push(h)}),t.forEach((u,h)=>{let f=l.get(u);if(f===void 0){l.set(u,0);return}i&&f!==h||l.delete(u)}),(this.columnModel.getColDefCols()||[]).forEach(u=>{let h=t.indexOf(u)>=0;r(h,u)}),s&&this.columnModel.refreshCols(),this.visibleColsService.refresh(o),this.eventDispatcher.columnChanged(n,[...l.keys()],o)}updateColList(e,t,n,i,s,r,o){if(!e||pn(e))return;let a=!1;e.forEach(l=>{if(!l)return;let c=this.columnModel.getColDefCol(l);if(c){if(n){if(t.indexOf(c)>=0)return;t.push(c)}else{if(t.indexOf(c)<0)return;Jn(t,c)}s(c),a=!0}}),a&&(i&&this.columnModel.refreshCols(),this.visibleColsService.refresh(o),this.eventDispatcher.genericColumnEvent(r,t,o))}extractCols(e,t){this.extractRowGroupCols(e,t),this.extractPivotCols(e,t),this.extractValueCols(e,t)}extractValueCols(e,t){this.valueCols=this.extractColsCommon(t,this.valueCols,(n,i)=>n.setValueActive(i,e),()=>{},()=>{},n=>{let i=n.aggFunc;if(i===null||i==="")return null;if(i!==void 0)return!!i},n=>n.initialAggFunc!=null&&n.initialAggFunc!=""),this.valueCols.forEach(n=>{let i=n.getColDef();i.aggFunc!=null&&i.aggFunc!=""?n.setAggFunc(i.aggFunc):n.getAggFunc()||n.setAggFunc(i.initialAggFunc)})}extractRowGroupCols(e,t){this.rowGroupCols=this.extractColsCommon(t,this.rowGroupCols,(n,i)=>n.setRowGroupActive(i,e),n=>n.rowGroupIndex,n=>n.initialRowGroupIndex,n=>n.rowGroup,n=>n.initialRowGroup)}extractPivotCols(e,t){this.pivotCols=this.extractColsCommon(t,this.pivotCols,(n,i)=>n.setPivotActive(i,e),n=>n.pivotIndex,n=>n.initialPivotIndex,n=>n.pivot,n=>n.initialPivot)}extractColsCommon(e=[],t=[],n,i,s,r,o){let a=[],l=[];(this.columnModel.getColDefCols()||[]).forEach(f=>{let g=e.indexOf(f)<0,v=f.getColDef(),y=JD(r(v)),C=JD(o(v)),E=pl(i(v)),I=pl(s(v)),T;y!==void 0?T=y:E!==void 0?E===null?T=!1:T=E>=0:g?C!==void 0?T=C:I!==void 0?T=I!=null&&I>=0:T=!1:T=t.indexOf(f)>=0,T&&((g?E!=null||I!=null:E!=null)?a.push(f):l.push(f))});let u=f=>{let g=i(f.getColDef()),v=s(f.getColDef());return g??v};a.sort((f,g)=>{let v=u(f),y=u(g);return v===y?0:v<y?-1:1});let h=[].concat(a);return t.forEach(f=>{l.indexOf(f)>=0&&h.push(f)}),l.forEach(f=>{h.indexOf(f)<0&&h.push(f)}),t.forEach(f=>{h.indexOf(f)<0&&n(f,!1)}),h.forEach(f=>{t.indexOf(f)<0&&n(f,!0)}),h}generateColumnStateForRowGroupAndPivotIndexes(e,t){let n={},i=(s,r,o,a,l,c)=>{let u=this.columnModel.getColDefCols();if(!r.length||!u)return[];let h=Object.keys(s),f=new Set(h),g=new Set(h),v=new Set(r.map(V=>{let b=V.getColId();return g.delete(b),b}).concat(h)),y=[],C={},E=0;for(let V=0;V<u.length;V++){let b=u[V].getColId();v.has(b)&&(y.push(b),C[b]=E++)}let I=1e3,T=!1,x=0,z=V=>{let b=C[V];for(let S=x;S<b;S++){let _=y[S];g.has(_)&&(s[_][l]=I++,g.delete(_))}x=b};r.forEach(V=>{let b=V.getColId();if(f.has(b))z(b),s[b][l]=I++;else{let S=V.getColDef();(S[l]===null||S[l]===void 0&&S[c]==null)&&(T||(S[o]||S[o]===void 0&&S[a]?z(b):(g.forEach(A=>{s[A][l]=I+C[A]}),I+=y.length,T=!0)),n[b]||(n[b]={colId:b}),n[b][l]=I++)}})};return i(e,this.rowGroupCols,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),i(t,this.pivotCols,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(n)}},WX=class extends k{constructor(){super(...arguments),this.beanName="columnApplyStateService"}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.sortController=e.sortController,this.columnGetStateService=e.columnGetStateService,this.funcColsService=e.funcColsService,this.visibleColsService=e.visibleColsService,this.columnAnimationService=e.columnAnimationService,this.pivotResultColsService=e.pivotResultColsService}applyColumnState(e,t){let n=this.columnModel.getColDefCols()||[];if(pn(n))return!1;if(e&&e.state&&!e.state.forEach)return G("applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;let i=this.funcColsService.getModifyColumnsNoEventsCallbacks(),s=(a,l,c)=>{let u=this.compareColumnStatesAndDispatchEvents(t),h=l.slice(),f={},g={},v=[],y=[],C=0,E=this.funcColsService.getRowGroupColumns().slice(),I=this.funcColsService.getPivotColumns().slice();a.forEach(V=>{let b=V.colId||"";if(b.startsWith(yf)){v.push(V),y.push(V);return}let _=c(b);_?(this.syncColumnWithStateItem(_,V,e.defaultState,f,g,!1,t,i),Jn(h,_)):(y.push(V),C+=1)});let T=V=>this.syncColumnWithStateItem(V,null,e.defaultState,f,g,!1,t,i);h.forEach(T),this.funcColsService.sortRowGroupColumns(xV.bind(this,f,E)),this.funcColsService.sortPivotColumns(xV.bind(this,g,I)),this.columnModel.refreshCols();let z=(this.columnModel.getAutoCols()||[]).slice();return v.forEach(V=>{let b=this.columnModel.getAutoCol(V.colId);Jn(z,b),this.syncColumnWithStateItem(b,V,e.defaultState,null,null,!0,t,i)}),z.forEach(T),this.orderLiveColsLikeState(e),this.visibleColsService.refresh(t),this.eventDispatcher.everythingChanged(t),u(),{unmatchedAndAutoStates:y,unmatchedCount:C}};this.columnAnimationService.start();let{unmatchedAndAutoStates:r,unmatchedCount:o}=s(e.state||[],n,a=>this.columnModel.getColDefCol(a));if(r.length>0||j(e.defaultState)){let l=this.pivotResultColsService.getPivotResultCols()?.list;o=s(r,l||[],c=>this.pivotResultColsService.getPivotResultCol(c)).unmatchedCount}return this.columnAnimationService.finish(),o===0}resetColumnState(e){let t=this.columnModel.getColDefCols();if(pn(t))return;let n=this.columnModel.getColDefColTree(),i=mR(n),s=[],r=1e3,o=1e3,a=[],l=this.columnModel.getAutoCols();l&&(a=a.concat(l)),i&&(a=a.concat(i)),a.forEach(c=>{let u=this.getColumnStateFromColDef(c);Pe(u.rowGroupIndex)&&u.rowGroup&&(u.rowGroupIndex=r++),Pe(u.pivotIndex)&&u.pivot&&(u.pivotIndex=o++),s.push(u)}),this.applyColumnState({state:s,applyOrder:!0},e)}getColumnStateFromColDef(e){let t=(v,y)=>v??y??null,n=e.getColDef(),i=t(n.sort,n.initialSort),s=t(n.sortIndex,n.initialSortIndex),r=t(n.hide,n.initialHide),o=t(n.pinned,n.initialPinned),a=t(n.width,n.initialWidth),l=t(n.flex,n.initialFlex),c=t(n.rowGroupIndex,n.initialRowGroupIndex),u=t(n.rowGroup,n.initialRowGroup);c==null&&(u==null||u==!1)&&(c=null,u=null);let h=t(n.pivotIndex,n.initialPivotIndex),f=t(n.pivot,n.initialPivot);h==null&&(f==null||f==!1)&&(h=null,f=null);let g=t(n.aggFunc,n.initialAggFunc);return{colId:e.getColId(),sort:i,sortIndex:s,hide:r,pinned:o,width:a,flex:l,rowGroup:u,rowGroupIndex:c,pivot:f,pivotIndex:h,aggFunc:g}}syncColumnWithStateItem(e,t,n,i,s,r,o,a){if(!e)return;let l=(x,z)=>{let V={value1:void 0,value2:void 0},b=!1;return t&&(t[x]!==void 0&&(V.value1=t[x],b=!0),j(z)&&t[z]!==void 0&&(V.value2=t[z],b=!0)),!b&&n&&(n[x]!==void 0&&(V.value1=n[x]),j(z)&&n[z]!==void 0&&(V.value2=n[z])),V},c=l("hide").value1;c!==void 0&&e.setVisible(!c,o);let u=l("pinned").value1;u!==void 0&&e.setPinned(u);let h=e.getColDef().minWidth??rB,f=l("flex").value1;if(f!==void 0&&e.setFlex(f),f==null){let x=l("width").value1;x!=null&&h!=null&&x>=h&&e.setActualWidth(x,o)}let g=l("sort").value1;g!==void 0&&(g==="desc"||g==="asc"?e.setSort(g,o):e.setSort(void 0,o));let v=l("sortIndex").value1;if(v!==void 0&&e.setSortIndex(v),r||!e.isPrimary())return;let y=l("aggFunc").value1;y!==void 0&&(typeof y=="string"?(e.setAggFunc(y),e.isValueActive()||(e.setValueActive(!0,o),a.addValueCol(e))):(j(y)&&G("stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,o),a.removeValueCol(e))));let{value1:C,value2:E}=l("rowGroup","rowGroupIndex");(C!==void 0||E!==void 0)&&(typeof E=="number"||C?(e.isRowGroupActive()||(e.setRowGroupActive(!0,o),a.addGroupCol(e)),i&&typeof E=="number"&&(i[e.getId()]=E)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,o),a.removeGroupCol(e)));let{value1:I,value2:T}=l("pivot","pivotIndex");(I!==void 0||T!==void 0)&&(typeof T=="number"||I?(e.isPivotActive()||(e.setPivotActive(!0,o),a.addPivotCol(e)),s&&typeof T=="number"&&(s[e.getId()]=T)):e.isPivotActive()&&(e.setPivotActive(!1,o),a.removePivotCol(e)))}orderLiveColsLikeState(e){if(!e.applyOrder||!e.state)return;let t=[];e.state.forEach(n=>{n.colId!=null&&t.push(n.colId)}),this.columnModel.sortColsLikeKeys(t)}compareColumnStatesAndDispatchEvents(e){let t={rowGroupColumns:this.funcColsService.getRowGroupColumns().slice(),pivotColumns:this.funcColsService.getPivotColumns().slice(),valueColumns:this.funcColsService.getValueColumns().slice()},n=this.columnGetStateService.getColumnState(),i={};return n.forEach(s=>{i[s.colId]=s}),()=>{let s=this.columnModel.getAllCols(),r=(y,C,E,I)=>{let T=C.map(I),x=E.map(I);if(vl(T,x))return;let V=new Set(C);E.forEach(_=>{V.delete(_)||V.add(_)});let b=[...V],S={type:y,columns:b,column:b.length===1?b[0]:null,source:e};this.eventService.dispatchEvent(S)},o=y=>{let C=[];return s.forEach(E=>{let I=i[E.getColId()];I&&y(I,E)&&C.push(E)}),C},a=y=>y.getColId();r("columnRowGroupChanged",t.rowGroupColumns,this.funcColsService.getRowGroupColumns(),a),r("columnPivotChanged",t.pivotColumns,this.funcColsService.getPivotColumns(),a);let c=o((y,C)=>{let E=y.aggFunc!=null,I=E!=C.isValueActive(),T=E&&y.aggFunc!=C.getAggFunc();return I||T});c.length>0&&this.eventDispatcher.columnChanged("columnValueChanged",c,e);let u=(y,C)=>y.width!=C.getActualWidth();this.eventDispatcher.columnResized(o(u),!0,e);let h=(y,C)=>y.pinned!=C.getPinned();this.eventDispatcher.columnPinned(o(h),e);let f=(y,C)=>y.hide==C.isVisible();this.eventDispatcher.columnVisible(o(f),e);let v=o((y,C)=>y.sort!=C.getSort()||y.sortIndex!=C.getSortIndex());v.length>0&&this.sortController.dispatchSortChangedEvents(e,v),this.normaliseColumnMovedEventForColumnState(n,e)}}normaliseColumnMovedEventForColumnState(e,t){let n=this.columnGetStateService.getColumnState(),i={};n.forEach(l=>i[l.colId]=l);let s={};e.forEach(l=>{i[l.colId]&&(s[l.colId]=!0)});let r=e.filter(l=>s[l.colId]),o=n.filter(l=>s[l.colId]),a=[];o.forEach((l,c)=>{let u=r&&r[c];if(u&&u.colId!==l.colId){let h=this.columnModel.getCol(u.colId);h&&a.push(h)}}),a.length&&this.eventDispatcher.columnMoved({movedColumns:a,source:t,finished:!0})}},xV=(e,t,n,i)=>{let s=e[n.getId()],r=e[i.getId()],o=s!=null,a=r!=null;if(o&&a)return s-r;if(o)return-1;if(a)return 1;let l=t.indexOf(n),c=t.indexOf(i),u=l>=0,h=c>=0;return u&&h?l-c:u?-1:1},jX=class extends k{constructor(){super(...arguments),this.beanName="columnMoveService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher}moveColumnByIndex(e,t,n){let i=this.columnModel.getCols();if(!i)return;let s=i[e];this.moveColumns([s],t,n)}moveColumns(e,t,n,i=!0){let s=this.columnModel.getCols();if(!s)return;if(this.columnAnimationService.start(),t>s.length-e.length){G("tried to insert columns in invalid location, toIndex = ",t),G("remember that you should not count the moving columns when calculating the new index");return}let r=this.columnModel.getColsForKeys(e);this.doesMovePassRules(r,t)&&(this.columnModel.moveInCols(r,t,n),this.eventDispatcher.columnMoved({movedColumns:r,source:n,toIndex:t,finished:i}),this.columnAnimationService.finish())}doesMovePassRules(e,t){let n=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(n)}doesOrderPassRules(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))}getProposedColumnOrder(e,t){let i=this.columnModel.getCols().slice();return eB(i,e,t),i}doesMovePassLockedPositions(e){let t=r=>r?r==="left"||r===!0?-1:1:0,n=this.gos.get("enableRtl"),i=n?1:-1,s=!0;return e.forEach(r=>{let o=t(r.getColDef().lockPosition);n?o>i&&(s=!1):o<i&&(s=!1),i=o}),s}doesMovePassMarryChildren(e){let t=!0,n=this.columnModel.getColTree();return $r(null,n,i=>{if(!Qn(i))return;let s=i,r=s.getColGroupDef();if(!(r&&r.marryChildren))return;let a=[];s.getLeafColumns().forEach(f=>{let g=e.indexOf(f);a.push(g)});let l=Math.max.apply(Math,a),c=Math.min.apply(Math,a),u=l-c,h=s.getLeafColumns().length-1;u>h&&(t=!1)}),t}placeLockedColumns(e){let t=[],n=[],i=[];return e.forEach(r=>{let o=r.getColDef().lockPosition;o==="right"?i.push(r):o==="left"||o===!0?t.push(r):n.push(r)}),this.gos.get("enableRtl")?[...i,...n,...t]:[...t,...n,...i]}},zX=/[&<>"']/g,$X={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function qX(e){let t=String.fromCharCode;function n(h){let f=[];if(!h)return[];let g=h.length,v=0,y,C;for(;v<g;)y=h.charCodeAt(v++),y>=55296&&y<=56319&&v<g?(C=h.charCodeAt(v++),(C&64512)==56320?f.push(((y&1023)<<10)+(C&1023)+65536):(f.push(y),v--)):f.push(y);return f}function i(h){if(h>=55296&&h<=57343)throw Error("Lone surrogate U+"+h.toString(16).toUpperCase()+" is not a scalar value")}function s(h,f){return t(h>>f&63|128)}function r(h){if(!(h&4294967168))return t(h);let f="";return h&4294965248?h&4294901760?h&4292870144||(f=t(h>>18&7|240),f+=s(h,12),f+=s(h,6)):(i(h),f=t(h>>12&15|224),f+=s(h,6)):f=t(h>>6&31|192),f+=t(h&63|128),f}let o=n(e),a=o.length,l=-1,c,u="";for(;++l<a;)c=o[l],u+=r(c);return u}function rr(e,t){if(e==null)return null;let n=e.toString().toString();return t?n:n.replace(zX,i=>$X[i])}function KX(e){if(!e||e==null)return null;let t=/([a-z])([A-Z])/g,n=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(n,"$1 $2$3").replace(/\./g," ").split(" ").map(s=>s.substring(0,1).toUpperCase()+(s.length>1?s.substring(1,s.length):"")).join(" ")}function QX(e){return e.replace(/[A-Z]/g,t=>`-${t.toLocaleLowerCase()}`)}var YX=class extends k{constructor(){super(...arguments),this.beanName="columnNameService"}wireBeans(e){this.expressionService=e.expressionService,this.funcColsService=e.funcColsService,this.columnModel=e.columnModel}getDisplayNameForColumn(e,t,n=!1){if(!e)return null;let i=this.getHeaderName(e.getColDef(),e,null,null,t);return n?this.wrapHeaderNameWithAggFunc(e,i):i}getDisplayNameForProvidedColumnGroup(e,t,n){let i=t?t.getColGroupDef():null;return i?this.getHeaderName(i,null,e,t,n):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,n,i,s){let r=e.headerValueGetter;if(r){let o=this.gos.addGridCommonParams({colDef:e,column:t,columnGroup:n,providedColumnGroup:i,location:s});return typeof r=="function"?r(o):typeof r=="string"?this.expressionService.evaluate(r,o):(G("headerValueGetter must be a function or a string"),"")}else{if(e.headerName!=null)return e.headerName;if(e.field)return KX(e.field)}return""}wrapHeaderNameWithAggFunc(e,t){if(this.gos.get("suppressAggFuncInHeader"))return t;let n=e.getColDef().pivotValueColumn,i=j(n),s=null,r;if(i){let o=this.funcColsService.getValueColumns(),a=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&o.length===1,l=e.getColDef().pivotTotalColumnIds!==void 0;if(a&&!l)return t;s=n?n.getAggFunc():null,r=!0}else{let o=e.isValueActive(),a=this.columnModel.isPivotMode()||!this.funcColsService.isRowGroupEmpty();o&&a?(s=e.getAggFunc(),r=!0):r=!1}if(r){let o=typeof s=="string"?s:"func";return`${this.localeService.getLocaleTextFunc()(o,o)}(${t})`}return t}},JX=class extends k{constructor(){super(...arguments),this.beanName="pivotResultColsService"}wireBeans(e){this.context=e.context,this.columnModel=e.columnModel,this.columnFactory=e.columnFactory,this.visibleColsService=e.visibleColsService}destroy(){_u(this.context,this.pivotResultCols?.tree),super.destroy()}isPivotResultColsPresent(){return this.pivotResultCols!=null}lookupPivotResultCol(e,t){if(this.pivotResultCols==null)return null;let n=this.columnModel.getColDefCol(t),i=null;return this.pivotResultCols.list.forEach(s=>{let r=s.getColDef().pivotKeys,o=s.getColDef().pivotValueColumn;vl(r,e)&&o===n&&(i=s)}),i}getPivotResultCols(){return this.pivotResultCols}getPivotResultCol(e){return this.pivotResultCols?this.columnModel.getColFromCollection(e,this.pivotResultCols):null}setPivotResultCols(e,t){if(this.columnModel.isReady()&&!(e==null&&this.pivotResultCols==null)){if(e){this.processPivotResultColDef(e);let n=this.columnFactory.createColumnTree(e,!1,this.pivotResultCols?.tree||this.previousPivotResultCols||void 0,t);_u(this.context,this.pivotResultCols?.tree,n.columnTree);let i=n.columnTree,s=n.treeDept,r=mR(i),o={};this.pivotResultCols={tree:i,treeDepth:s,list:r,map:o},this.pivotResultCols.list.forEach(a=>this.pivotResultCols.map[a.getId()]=a),this.previousPivotResultCols=null}else this.previousPivotResultCols=this.pivotResultCols?this.pivotResultCols.tree:null,this.pivotResultCols=null;this.columnModel.refreshCols(),this.visibleColsService.refresh(t)}}processPivotResultColDef(e){let t=this.gos.get("processPivotResultColDef"),n=this.gos.get("processPivotResultColGroupDef");if(!t&&!n)return;let i=s=>{s.forEach(r=>{if(j(r.children)){let a=r;n&&n(a),i(a.children)}else t&&t(r)})};e&&i(e)}},XX=class extends k{constructor(){super(...arguments),this.beanName="columnSizeService"}wireBeans(e){this.columnModel=e.columnModel,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}setColumnWidths(e,t,n,i){let s=[];e.forEach(r=>{let o=this.columnModel.getColDefCol(r.key)||this.columnModel.getCol(r.key);if(!o)return;if(s.push({width:r.newWidth,ratios:[1],columns:[o]}),this.gos.get("colResizeDefault")==="shift"&&(t=!t),t){let l=this.visibleColsService.getColAfter(o);if(!l)return;let c=o.getActualWidth()-r.newWidth,u=l.getActualWidth()+c;s.push({width:u,ratios:[1],columns:[l]})}}),s.length!==0&&this.resizeColumnSets({resizeSets:s,finished:n,source:i})}resizeColumnSets(e){let{resizeSets:t,finished:n,source:i}=e;if(!(!t||t.every(u=>this.checkMinAndMaxWidthsForSet(u)))){if(n){let u=t&&t.length>0?t[0].columns:null;this.eventDispatcher.columnResized(u,n,i)}return}let r=[],o=[];t.forEach(u=>{let{width:h,columns:f,ratios:g}=u,v={},y={};f.forEach(I=>o.push(I));let C=!0,E=0;for(;C;){if(E++,E>1e3){ke("infinite loop in resizeColumnSets");break}C=!1;let I=[],T=0,x=h;f.forEach((V,b)=>{if(y[V.getId()])x-=v[V.getId()];else{I.push(V);let _=g[b];T+=_}});let z=1/T;I.forEach((V,b)=>{let S=b===I.length-1,_;S?_=x:(_=Math.round(g[b]*h*z),x-=_);let R=V.getMinWidth(),A=V.getMaxWidth();_<R?(_=R,y[V.getId()]=!0,C=!0):A>0&&_>A&&(_=A,y[V.getId()]=!0,C=!0),v[V.getId()]=_})}f.forEach(I=>{let T=v[I.getId()];I.getActualWidth()!==T&&(I.setActualWidth(T,i),r.push(I))})});let a=r.length>0,l=[];a&&(l=this.refreshFlexedColumns({resizingCols:o,skipSetLeft:!0}),this.visibleColsService.setLeftValues(i),this.visibleColsService.updateBodyWidths(),this.columnViewportService.checkViewportColumns());let c=o.concat(l);(a||n)&&this.eventDispatcher.columnResized(c,n,i,l)}checkMinAndMaxWidthsForSet(e){let{columns:t,width:n}=e,i=0,s=0,r=!0;t.forEach(l=>{let c=l.getMinWidth();i+=c||0;let u=l.getMaxWidth();u>0?s+=u:r=!1});let o=n>=i,a=!r||n<=s;return o&&a}refreshFlexedColumns(e={}){let t=e.source?e.source:"flex";if(e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];let n=this.visibleColsService.getCenterCols(),i=-1;if(e.resizingCols){let f=new Set(e.resizingCols);for(let g=n.length-1;g>=0;g--)if(f.has(n[g])){i=g;break}}let s=0,r=[],o=0,a=0;for(let f=0;f<n.length;f++)n[f].getFlex()&&f>i?(r.push(n[f]),a+=n[f].getFlex(),o+=n[f].getMinWidth()):s+=n[f].getActualWidth();if(!r.length)return[];let l=[];s+o>this.flexViewportWidth&&(r.forEach(f=>f.setActualWidth(f.getMinWidth(),t)),l=r,r=[]);let c=[],u;e:for(;;){u=this.flexViewportWidth-s;let f=u/a;for(let g=0;g<r.length;g++){let v=r[g],y=f*v.getFlex(),C=0,E=v.getMinWidth(),I=v.getMaxWidth();if(y<E?C=E:y>I&&(C=I),C){v.setActualWidth(C,t),ZV(r,v),a-=v.getFlex(),l.push(v),s+=v.getActualWidth();continue e}c[g]=Math.round(y)}break}let h=u;return r.forEach((f,g)=>{f.setActualWidth(Math.min(c[g],h),t),l.push(f),h-=c[g]}),e.skipSetLeft||this.visibleColsService.setLeftValues(t),e.updateBodyWidths&&this.visibleColsService.updateBodyWidths(),e.fireResizedEvent&&this.eventDispatcher.columnResized(l,!0,t,r),r}sizeColumnsToFit(e,t="sizeColumnsToFit",n,i){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,n,i));return}let s={};i&&i?.columnLimits?.forEach(v=>{var y=v,{key:f}=y,g=cp(y,["key"]);s[typeof f=="string"?f:f.getColId()]=g});let r=this.visibleColsService.getAllCols(),o=e===Wr(r);if(e<=0||!r.length||o)return;let a=[],l=[];r.forEach(f=>{f.getColDef().suppressSizeToFit===!0?l.push(f):a.push(f)});let c=a.slice(0),u=!1,h=f=>{Jn(a,f),l.push(f)};for(a.forEach(f=>{f.resetActualWidth(t);let g=s?.[f.getId()],v=g?.minWidth??i?.defaultMinWidth,y=g?.maxWidth??i?.defaultMaxWidth,C=f.getActualWidth();typeof v=="number"&&C<v?f.setActualWidth(v,t,!0):typeof y=="number"&&C>y&&f.setActualWidth(y,t,!0)});!u;){u=!0;let f=e-Wr(l);if(f<=0)a.forEach(g=>{let v=s?.[g.getId()]?.minWidth??i?.defaultMinWidth;if(typeof v=="number"){g.setActualWidth(v,t,!0);return}g.setMinimum(t)});else{let g=f/Wr(a),v=f;for(let y=a.length-1;y>=0;y--){let C=a[y],E=s?.[C.getId()],I=E?.minWidth??i?.defaultMinWidth,T=E?.maxWidth??i?.defaultMaxWidth,x=C.getMinWidth(),z=C.getMaxWidth(),V=typeof I=="number"&&I>x?I:x,b=typeof T=="number"&&T<z?T:z,S=Math.round(C.getActualWidth()*g);S<V?(S=V,h(C),u=!1):S>b?(S=b,h(C),u=!1):y===0&&(S=v),C.setActualWidth(S,t,!0),v-=S}}}c.forEach(f=>{f.fireColumnWidthChangedEvent(t)}),this.visibleColsService.setLeftValues(t),this.visibleColsService.updateBodyWidths(),!n&&this.eventDispatcher.columnResized(c,!0,t)}applyAutosizeStrategy(){let e=this.gos.get("autoSizeStrategy");if(!e)return;let{type:t}=e;setTimeout(()=>{if(t==="fitGridWidth"){let{columnLimits:n,defaultMinWidth:i,defaultMaxWidth:s}=e,r=n?.map(({colId:o,minWidth:a,maxWidth:l})=>({key:o,minWidth:a,maxWidth:l}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:i,defaultMaxWidth:s,columnLimits:r})}else t==="fitProvidedWidth"&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}};function aB(e,t){return e+"_"+t}function Nt(e){return e instanceof lB}var lB=class extends k{constructor(e,t,n,i){super(),this.isColumn=!1,this.displayedChildren=[],this.parent=null,this.groupId=t,this.partId=n,this.providedColumnGroup=e,this.pinned=i}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return aB(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){let e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{Nt(e)&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){let t=xe(this.displayedChildren).getLeft();this.setLeft(t)}else{let e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach(t=>{e+=t.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){let e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{Qo(t)?e.push(t):Nt(t)&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{Qo(t)?e.push(t):Nt(t)&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){let e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}this.children.forEach(n=>{if(Nt(n)&&(!n.displayedChildren||!n.displayedChildren.length))return;switch(n.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(n);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(n);break;default:this.displayedChildren.push(n);break}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},cB=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){let t=this.existingIds[e],n;return typeof t!="number"?n=0:n=t+1,this.existingIds[e]=n,n}},ZX=class extends k{constructor(){super(...arguments),this.beanName="visibleColsService",this.colsAndGroupsMap={},this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher}refresh(e,t=!1){t||this.buildTrees(),this.updateOpenClosedVisibilityInColumnGroups(),this.columnsLeft=kD(this.treeLeft),this.columnsCenter=kD(this.treeCenter),this.columnsRight=kD(this.treeRight),this.joinColsAriaOrder(),this.joinCols(),this.setLeftValues(e),this.autoHeightCols=this.columns.filter(n=>n.isAutoHeight()),this.columnSizeService.refreshFlexedColumns(),this.updateBodyWidths(),this.columnViewportService.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(e),this.eventDispatcher.visibleCols()}updateBodyWidths(){let e=Wr(this.columnsCenter),t=Wr(this.columnsLeft),n=Wr(this.columnsRight);if(this.bodyWidthDirty=this.bodyWidth!==e,this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==n){this.bodyWidth=e,this.leftWidth=t,this.rightWidth=n;let s={type:"columnContainerWidthChanged"};this.eventService.dispatchEvent(s);let r={type:"displayedColumnsWidthChanged"};this.eventService.dispatchEvent(r)}}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e){let t,n;this.gos.get("enableRtl")?(t=this.columnsLeft?this.columnsLeft[0]:null,n=this.columnsRight?xe(this.columnsRight):null):(t=this.columnsLeft?xe(this.columnsLeft):null,n=this.columnsRight?this.columnsRight[0]:null),this.columnModel.getCols().forEach(i=>{i.setLastLeftPinned(i===t,e),i.setFirstRightPinned(i===n,e)})}buildTrees(){let e=this.columnModel.getColsToShow(),t=e.filter(r=>r.getPinned()=="left"),n=e.filter(r=>r.getPinned()=="right"),i=e.filter(r=>r.getPinned()!="left"&&r.getPinned()!="right"),s=new cB;this.treeLeft=this.createGroups({columns:t,idCreator:s,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=this.createGroups({columns:n,idCreator:s,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=this.createGroups({columns:i,idCreator:s,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.ariaOrderColumns=[]}joinColsAriaOrder(){let e=this.columnModel.getCols(),t=[],n=[],i=[];for(let s of e){let r=s.getPinned();r?r===!0||r==="left"?t.push(s):i.push(s):n.push(s)}this.ariaOrderColumns=t.concat(n).concat(i)}getAriaColIndex(e){let t;return Nt(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}getAllAutoHeightCols(){return this.autoHeightCols}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(e=>{e.forEach(t=>{Nt(t)&&t.checkLeft()})})}setLeftValuesOfCols(e){if(!this.columnModel.getColDefCols())return;let n=this.columnModel.getCols().slice(0),i=this.gos.get("enableRtl");[this.columnsLeft,this.columnsRight,this.columnsCenter].forEach(s=>{if(i){let r=Wr(s);s.forEach(o=>{r-=o.getActualWidth(),o.setLeft(r,e)})}else{let r=0;s.forEach(o=>{o.setLeft(r,e),r+=o.getActualWidth()})}wX(n,s)}),n.forEach(s=>{s.setLeft(null,e)})}joinCols(){this.gos.get("enableRtl")?this.columns=this.columnsRight.concat(this.columnsCenter).concat(this.columnsLeft):this.columns=this.columnsLeft.concat(this.columnsCenter).concat(this.columnsRight)}getColsCenter(){return this.columnsCenter}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}getTreeLeft(){return this.treeLeft}getTreeRight(){return this.treeRight}getTreeCenter(){return this.treeCenter}getAllCols(){return this.columns}isColDisplayed(e){return this.getAllCols().indexOf(e)>=0}getLeftColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsLeft):this.columnsLeft}getRightColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsRight):this.columnsRight}getColsForRow(e,t,n,i){let s=[],r=null;for(let o=0;o<t.length;o++){let a=t[o],l=t.length-o,c=Math.min(a.getColSpan(e),l),u=[a];if(c>1){let f=c-1;for(let g=1;g<=f;g++)u.push(t[o+g]);o+=f}let h;n?(h=!1,u.forEach(f=>{n(f)&&(h=!0)})):h=!0,h&&(s.length===0&&r&&(i&&i(a))&&s.push(r),s.push(a)),r=a}return s}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getCenterCols(){return this.columnsCenter}getLeftCols(){return this.columnsLeft}getRightCols(){return this.columnsRight}getColBefore(e){let t=this.getAllCols(),n=t.indexOf(e);return n>0?t[n-1]:null}getGroupAtDirection(e,t){let n=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),i=e.getDisplayedLeafColumns(),s=t==="After"?xe(i):i[0],r=`getCol${t}`;for(;;){let o=this[r](s);if(!o)return null;let a=this.getColGroupAtLevel(o,n);if(a!==e)return a}}getColGroupAtLevel(e,t){let n=e.getParent(),i,s;for(;i=n.getProvidedColumnGroup().getLevel(),s=n.getPaddingLevel(),!(i+s<=t);)n=n.getParent();return n}isPinningLeft(){return this.columnsLeft.length>0}isPinningRight(){return this.columnsRight.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};let e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};ul(this.treeCenter,!1,e),ul(this.treeLeft,!1,e),ul(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){let e=this.getAllTrees();ul(e,!1,t=>{Nt(t)&&t.calculateDisplayedColumns()})}getFirstColumn(){let e=this.gos.get("enableRtl"),t=["getLeftCols","getCenterCols","getRightCols"];e&&t.reverse();for(let n=0;n<t.length;n++){let i=this[t[n]]();if(i.length)return e?xe(i):i[0]}return null}getColumnGroup(e,t){if(!e)return null;if(Nt(e))return e;let n=this.getAllTrees(),i=typeof t=="number",s=null;return ul(n,!1,r=>{if(Nt(r)){let o=r,a;i?a=e===o.getGroupId()&&t===o.getPartId():a=e===o.getGroupId(),a&&(s=o)}}),s}getColAfter(e){let t=this.getAllCols(),n=t.indexOf(e);return n<t.length-1?t[n+1]:null}isBodyWidthDirty(){return this.bodyWidthDirty}setBodyWidthDirty(){this.bodyWidthDirty=!0}getColsLeftWidth(){return Wr(this.columnsLeft)}getDisplayedColumnsRightWidth(){return Wr(this.columnsRight)}isColAtEdge(e,t){let n=this.getAllCols();if(!n.length)return!1;let i=t==="first",s;if(Nt(e)){let r=e.getDisplayedLeafColumns();if(!r.length)return!1;s=i?r[0]:xe(r)}else s=e;return(i?n[0]:xe(n))===s}createGroups(e){let{columns:t,idCreator:n,pinned:i,oldDisplayedGroups:s,isStandaloneStructure:r}=e,o=this.mapOldGroupsById(s),a=[],l=t;for(;l.length;){let c=l;l=[];let u=0,h=f=>{let g=u;u=f;let v=c[g],C=(Nt(v)?v.getProvidedColumnGroup():v).getOriginalParent();if(C==null){for(let I=g;I<f;I++)a.push(c[I]);return}let E=this.createColGroup(C,n,o,i,r);for(let I=g;I<f;I++)E.addChild(c[I]);l.push(E)};for(let f=1;f<c.length;f++){let g=c[f],y=(Nt(g)?g.getProvidedColumnGroup():g).getOriginalParent(),C=c[u],I=(Nt(C)?C.getProvidedColumnGroup():C).getOriginalParent();y!==I&&h(f)}u<c.length&&h(c.length)}return r||this.setupParentsIntoCols(a,null),a}createColGroup(e,t,n,i,s){let r=e.getGroupId(),o=t.getInstanceIdForKey(r),a=aB(r,o),l=n[a];return l&&l.getProvidedColumnGroup()!==e&&(l=null),j(l)?l.reset():(l=new lB(e,r,o,i),s||this.createBean(l)),l}mapOldGroupsById(e){let t={},n=i=>{i.forEach(s=>{if(Nt(s)){let r=s;t[s.getUniqueId()]=r,n(r.getChildren())}})};return e&&n(e),t}setupParentsIntoCols(e,t){e.forEach(n=>{if(n.setParent(t),Nt(n)){let i=n;this.setupParentsIntoCols(i.getChildren(),i)}})}};function ul(e,t,n){if(e)for(let i=0;i<e.length;i++){let s=e[i];if(Nt(s)){let r=t?s.getDisplayedChildren():s.getChildren();ul(r,t,n)}n(s)}}function kD(e){let t=[];return ul(e,!0,n=>{Qo(n)&&t.push(n)}),t}var uB=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd"],eZ=["scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged"],tZ=[...uB,...eZ],nZ={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,removePivotHeaderRowWhenSingleValueColumn:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0},Fn=class{};Fn.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"];Fn.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy"];Fn.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"];Fn.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"];Fn.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading"];Fn.OTHER_PROPERTIES=["suppressStickyTotalRow"];Fn.FUNCTION_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"];Fn.ALL_PROPERTIES=[...Fn.ARRAY_PROPERTIES,...Fn.OBJECT_PROPERTIES,...Fn.STRING_PROPERTIES,...Fn.NUMBER_PROPERTIES,...Fn.FUNCTION_PROPERTIES,...Fn.BOOLEAN_PROPERTIES,...Fn.OTHER_PROPERTIES];var gf=Fn,Yi=class{static getCallbackForEvent(t){return!t||t.length<2?t:"on"+t[0].toUpperCase()+t.substring(1)}};Yi.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY";Yi.PUBLIC_EVENTS=uB;Yi.EVENT_CALLBACKS=tZ.map(e=>Yi.getCallbackForEvent(e));Yi.BOOLEAN_PROPERTIES=gf.BOOLEAN_PROPERTIES;Yi.ALL_PROPERTIES=gf.ALL_PROPERTIES;Yi.ALL_PROPERTIES_AND_CALLBACKS=[...Yi.ALL_PROPERTIES,...Yi.EVENT_CALLBACKS];Yi.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(Yi.ALL_PROPERTIES_AND_CALLBACKS);var mf=Yi;function dB(e,t){typeof e!="object"&&(e={});let n=B({},e);return mf.ALL_PROPERTIES_AND_CALLBACKS.forEach(s=>{let r=t[s];typeof r<"u"&&r!==mf.VUE_OMITTED_PROPERTY&&(n[s]=r)}),n}function hB(e,t){if(!e)return;let n={},i=!1;if(Object.keys(e).filter(o=>mf.ALL_PROPERTIES_AND_CALLBACKS_SET.has(o)).forEach(o=>{n[o]=e[o],i=!0}),!i)return;let s={type:"gridOptionsChanged",options:n};t.dispatchEvent(s);let r={type:"componentStateChanged"};$i(n,(o,a)=>{r[o]=a}),t.dispatchEvent(r)}var iZ=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){let t=(e||"").split(" ");if(t.length>1){t.forEach(i=>this.addCssClass(i));return}if(this.cssClassStates[e]!==!0&&e.length){let i=this.getGui();i&&i.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){let t=(e||"").split(" ");if(t.length>1){t.forEach(i=>this.removeCssClass(i));return}if(this.cssClassStates[e]!==!1&&e.length){let i=this.getGui();i&&i.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){let t=this.getGui();return t?t.classList.contains(e):!1}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){let i=(e||"").split(" ");if(i.length>1){i.forEach(s=>this.addOrRemoveCssClass(s,t));return}}if(this.cssClassStates[e]!==t&&e.length){let i=this.getGui();i&&i.classList.toggle(e,t),this.cssClassStates[e]=t}}};function Kr(e,t,n){n==null||typeof n=="string"&&n==""?fB(e,t):Es(e,t,n)}function Es(e,t,n){e.setAttribute(pB(t),n.toString())}function fB(e,t){e.removeAttribute(pB(t))}function pB(e){return`aria-${e}`}function ai(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function sZ(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function rZ(e){return e.getAttribute("aria-label")}function Tu(e,t){Kr(e,"label",t)}function vf(e,t){Kr(e,"labelledby",t)}function gB(e,t){Kr(e,"live",t)}function oZ(e,t){Kr(e,"atomic",t)}function aZ(e,t){Kr(e,"relevant",t)}function lZ(e,t){Kr(e,"disabled",t)}function vR(e,t){Kr(e,"hidden",t)}function SC(e,t){Es(e,"expanded",t)}function cZ(e,t){Es(e,"setsize",t)}function uZ(e,t){Es(e,"posinset",t)}function dZ(e,t){Es(e,"multiselectable",t)}function hZ(e,t){Es(e,"rowcount",t)}function mB(e,t){Es(e,"rowindex",t)}function fZ(e,t){Es(e,"colcount",t)}function vB(e,t){Es(e,"colindex",t)}function pZ(e,t){Es(e,"colspan",t)}function gZ(e,t){Es(e,"sort",t)}function mZ(e){fB(e,"sort")}function _C(e,t){Kr(e,"selected",t)}function vZ(e,t){Kr(e,"controls",t.id),vf(t,e.id)}function CR(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var LD,rC,VD,BD,GD,HD,tR,nR;function qr(){return LD===void 0&&(LD=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),LD}function CB(){if(rC===void 0)if(qr()){let e=navigator.userAgent.match(/version\/(\d+)/i);e&&(rC=e[1]!=null?parseFloat(e[1]):0)}else rC=0;return rC}function yR(){if(VD===void 0){let e=window;VD=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return VD}function yB(){return BD===void 0&&(BD=/(firefox)/i.test(navigator.userAgent)),BD}function wB(){return GD===void 0&&(GD=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),GD}function Yo(){return HD===void 0&&(HD=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),HD}function iR(){return!qr()||CB()>=15}function sR(e){if(!e)return null;let t=e.tabIndex,n=e.getAttribute("tabIndex");return t===-1&&(n===null||n===""&&!yB())?null:t.toString()}function CZ(){if(!document.body)return-1;let e=1e6,t=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,n=document.createElement("div");for(document.body.appendChild(n);;){let i=e*2;if(n.style.height=i+"px",i>t||n.clientHeight!==i)break;e=i}return document.body.removeChild(n),e}function yZ(){return document.body?.clientWidth??(window.innerHeight||document.documentElement?.clientWidth||-1)}function wZ(){return document.body?.clientHeight??(window.innerHeight||document.documentElement?.clientHeight||-1)}function SZ(){return nR==null&&SB(),nR}function SB(){let e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let n=t.offsetWidth-t.clientWidth;n===0&&t.clientWidth===0&&(n=null),t.parentNode&&t.parentNode.removeChild(t),n!=null&&(nR=n,tR=n===0)}function _B(){return tR==null&&SB(),tR}var oC;var _Z="[tabindex], input, select, button, textarea, [href]",bB="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function wR(e){let t=Element.prototype.matches||Element.prototype.msMatchesSelector,i=t.call(e,"input, select, button, textarea"),s=t.call(e,bB),r=bs(e);return i&&!s&&r}function gt(e,t,n={}){let{skipAriaHidden:i}=n;e.classList.toggle("ag-hidden",!t),i||vR(e,!t)}function bZ(e,t,n={}){let{skipAriaHidden:i}=n;e.classList.toggle("ag-invisible",!t),i||vR(e,!t)}function Cf(e,t){let n="disabled",i=t?s=>s.setAttribute(n,""):s=>s.removeAttribute(n);i(e),MB(e.querySelectorAll("input"),s=>i(s))}function Du(e,t,n){let i=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof n=="number"){if(++i>n)break}else if(e===n)break}return!1}function Cl(e){let{height:t,width:n,borderTopWidth:i,borderRightWidth:s,borderBottomWidth:r,borderLeftWidth:o,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:u,marginTop:h,marginRight:f,marginBottom:g,marginLeft:v,boxSizing:y}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(n||"0"),borderTopWidth:parseFloat(i||"0"),borderRightWidth:parseFloat(s||"0"),borderBottomWidth:parseFloat(r||"0"),borderLeftWidth:parseFloat(o||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(c||"0"),paddingLeft:parseFloat(u||"0"),marginTop:parseFloat(h||"0"),marginRight:parseFloat(f||"0"),marginBottom:parseFloat(g||"0"),marginLeft:parseFloat(v||"0"),boxSizing:y}}function SR(e){let t=Cl(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function wf(e){let t=Cl(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function EB(e){let{height:t,marginBottom:n,marginTop:i}=Cl(e);return Math.floor(t+n+i)}function bC(e){let{width:t,marginLeft:n,marginRight:i}=Cl(e);return Math.floor(t+n+i)}function DB(e){let t=e.getBoundingClientRect(),{borderTopWidth:n,borderLeftWidth:i,borderRightWidth:s,borderBottomWidth:r}=Cl(e);return{top:t.top+(n||0),left:t.left+(i||0),right:t.right+(s||0),bottom:t.bottom+(r||0)}}function EC(){if(typeof oC=="boolean")return oC;let e=document.createElement("div");return e.style.direction="rtl",e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="0px",e.style.overflow="hidden",e.dir="rtl",e.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(e),e.scrollLeft=1,oC=Math.floor(e.scrollLeft)===0,document.body.removeChild(e),oC}function DC(e,t){let n=e.scrollLeft;return t&&(n=Math.abs(n),yR()&&!EC()&&(n=e.scrollWidth-e.clientWidth-n)),n}function RC(e,t,n){n&&(EC()?t*=-1:(qr()||yR())&&(t=e.scrollWidth-e.clientWidth-t)),e.scrollLeft=t}function xn(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function Qi(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function RB(e){return!!e.offsetParent}function bs(e){let t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!RB(e)||window.getComputedStyle(e).visibility!=="visible")}function Iu(e){let t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function TB(e,t,n){n&&n.nextSibling===t||(n?n.nextSibling?e.insertBefore(t,n.nextSibling):e.appendChild(t):e.firstChild&&e.firstChild!==t&&e.insertAdjacentElement("afterbegin",t))}function IB(e,t){for(let n=0;n<t.length;n++){let i=t[n],s=e.children[n];s!==i&&e.insertBefore(i,s)}}function EZ(e,t,n){n?n.insertAdjacentElement("afterend",t):e.firstChild?e.insertAdjacentElement("afterbegin",t):e.appendChild(t)}function AB(e,t){if(t)for(let[n,i]of Object.entries(t)){if(!n||!n.length||i==null)continue;let s=QX(n),r=i.toString(),o=r.replace(/\s*!important/g,""),a=o.length!=r.length?"important":void 0;e.style.setProperty(s,o,a)}}function DZ(e){return e.clientWidth<e.scrollWidth}function RZ(e){return e.clientHeight<e.scrollHeight}function TC(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):_s(e,t)}function _s(e,t){t=_R(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function df(e,t){t=_R(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function _R(e){return typeof e=="number"?`${e}px`:e}function bR(e){return e instanceof Node||e instanceof HTMLElement}function TZ(e){if(e==null)return[];let t=[];return MB(e,n=>t.push(n)),t}function IZ(e,t){if(e)for(let n=0;n<e.length;n++){let i=e[n];t(i.name,i.value)}}function jr(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n.toString())}function MB(e,t){if(e!=null)for(let n=0;n<e.length;n++)t(e[n])}var Au=class{constructor(e=0,t=1){this.nextValue=e,this.step=t}next(){let e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}},AZ=1e3,MZ=1e3,OV=100,PB=class cl extends k{constructor(t,n,i,s){super(),this.parentComp=t,this.tooltipShowDelayOverride=n,this.tooltipHideDelayOverride=i,this.shouldDisplayTooltip=s,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(t){this.popupService=t.popupService,this.userComponentFactory=t.userComponentFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");let t=this.parentComp.getGui();this.tooltipTrigger===0&&this.addManagedListeners(t,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(t,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(t,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(t,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(t){let n=this.gos.get(t);return n<0&&G(`${t} should not be lower than 0`),Math.max(200,n)}getTooltipDelay(t){return t==="show"?this.tooltipShowDelayOverride??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipHideDelayOverride??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){let t=this.gos.get("tooltipTrigger");return!t||t==="hover"?0:1}onMouseEnter(t){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!Yo()&&(cl.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(t)},OV):this.prepareToShowTooltip(t))}onMouseMove(t){this.lastMouseEvent&&(this.lastMouseEvent=t),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(t){let n=t.relatedTarget,i=this.parentComp.getGui(),s=this.tooltipComp?.getGui();this.isInteractingWithTooltip||i.contains(n)||this.interactionEnabled&&s?.contains(n)||this.setToDoNothing()}onKeyDown(){this.setToDoNothing()}prepareToShowTooltip(t){if(this.state!=0||cl.isLocked)return;let n=0;t&&(n=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=t||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),n),this.state=1}isLastTooltipHiddenRecently(){let t=new Date().getTime(),n=cl.lastTooltipHideTime;return t-n<AZ}setToDoNothing(){this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){let t=B({},this.parentComp.getTooltipParams());if(!j(t.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;let n=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(t).newAgStackInstance().then(n)}hideTooltip(t){if(!t&&this.isInteractingWithTooltip)return;this.tooltipComp&&(this.destroyTooltipComp(),cl.lastTooltipHideTime=new Date().getTime());let n={type:"tooltipHide",parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(n),t&&(this.isInteractingWithTooltip=!1),this.state=0}newTooltipComponentCallback(t,n){if(this.state!==2||this.tooltipInstanceCount!==t){this.destroyBean(n);return}let s=n.getGui();this.tooltipComp=n,s.classList.contains("ag-tooltip")||s.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&s.classList.add("ag-tooltip-animate"),this.interactionEnabled&&s.classList.add("ag-tooltip-interactive");let r=this.localeService.getLocaleTextFunc(),o=this.popupService.addPopup({eChild:s,ariaLabel:r("ariaLabelTooltip","Tooltip")});if(o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){let l=this.setToDoNothing.bind(this);[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:l,columnMoved:l})}this.interactionEnabled&&(this.tooltipTrigger===0?[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(s,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}):[this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(s,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}));let a={type:"tooltipShow",tooltipGui:s,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(a),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isInteractingWithTooltip=!1,this.lockService()}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}onTooltipFocusOut(t){let n=this.parentComp.getGui(),i=this.tooltipComp?.getGui(),s=t.relatedTarget;i?.contains(s)||(this.isInteractingWithTooltip=!1,n.contains(s)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){let t={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(se(B({},t),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(se(B({},t),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");let t=this.tooltipPopupDestroyFunc,n=this.tooltipComp,i=this.tooltipTrigger===0?MZ:0;window.setTimeout(()=>{t(),this.destroyBean(n)},i),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(t=>{t&&t()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){cl.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},OV)}unlockService(){cl.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};PB.isLocked=!1;var PZ=PB,Pu=class extends k{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}wireBeans(e){this.beans=e}postConstruct(){this.refreshToolTip()}setBrowserTooltip(e){let t="title",n=this.ctrl.getGui();n&&(e!=null&&e!=""?n.setAttribute(t,e):n.removeAttribute(t))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){if(this.tooltipManager!=null)return;let e={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new PZ(e,this.ctrl.getTooltipShowDelayOverride?.(),this.ctrl.getTooltipHideDelayOverride?.(),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){let e=this.ctrl,t=e.getColumn?e.getColumn():void 0,n=e.getColDef?e.getColDef():void 0,i=e.getRowNode?e.getRowNode():void 0;return{location:e.getLocation(),colDef:n,column:t,rowIndex:e.getRowIndex?e.getRowIndex():void 0,node:i,data:i?i.data:void 0,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?e.getValueFormatted():void 0,hideTooltipCallback:()=>this.tooltipManager?.hideTooltip(!0)}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}},FZ=new Au,Z=null,Ve=class FB extends k{constructor(t,n){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=FZ.next(),this.cssClassManager=new iZ(()=>this.eGui),this.componentSelectors=new Map((n??[]).map(i=>[i.selector,i])),t&&this.setTemplate(t)}preWireBeans(t){super.preWireBeans(t)}preConstruct(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips"),this.wireTemplate(this.getGui())}wireTemplate(t,n){t&&this.gos&&(this.applyElementsToComponent(t),this.createChildComponentsFromTags(t,n))}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(t){let{newTooltipText:n,showDelayOverride:i,hideDelayOverride:s,location:r,shouldDisplayTooltip:o}=t||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==n&&(this.tooltipText=n);let a=()=>this.tooltipText;n!=null&&(this.tooltipFeature=this.createBean(new Pu({getTooltipValue:a,getGui:()=>this.getGui(),getLocation:()=>r??"UNKNOWN",getColDef:t?.getColDef,getColumn:t?.getColumn,getTooltipShowDelayOverride:i!=null?()=>i:void 0,getTooltipHideDelayOverride:s!=null?()=>s:void 0,shouldDisplayTooltip:o})))}getDataRefAttribute(t){return t.getAttribute?t.getAttribute("data-ref"):null}applyElementsToComponent(t,n,i,s=null){if(n===void 0&&(n=this.getDataRefAttribute(t)),n){let r=this[n];if(r===Z)this[n]=s??t;else{let o=i&&i[n];!this.suppressDataRefValidation&&!o&&G(`Issue with data-ref: ${n} on ${this.constructor.name} with ${r}`)}}}createChildComponentsFromTags(t,n){TZ(t.childNodes).forEach(s=>{if(!(s instanceof HTMLElement))return;let r=this.createComponentFromElement(s,o=>{o.getGui()&&this.copyAttributesFromNode(s,o.getGui())},n);if(r){if(r.addItems&&s.children.length){this.createChildComponentsFromTags(s,n);let o=Array.prototype.slice.call(s.children);r.addItems(o)}this.swapComponentForNode(r,t,s)}else s.childNodes&&this.createChildComponentsFromTags(s,n)})}createComponentFromElement(t,n,i){let s=t.nodeName,r=this.getDataRefAttribute(t),o=s.indexOf("AG-")===0,a=o?this.componentSelectors.get(s):null,l=null;if(a){FB.elementGettingCreated=t;let c=i&&r?i[r]:void 0;l=new a.component(c),l.setParentComponent(this),this.createBean(l,null,n)}else o&&G(`Missing selector: ${s}`);return this.applyElementsToComponent(t,r,i,l),l}copyAttributesFromNode(t,n){IZ(t.attributes,(i,s)=>n.setAttribute(i,s))}swapComponentForNode(t,n,i){let s=t.getGui();n.replaceChild(s,i),n.insertBefore(document.createComment(i.nodeName),s),this.addDestroyFunc(this.destroyBean.bind(this,t))}activateTabIndex(t){let n=this.gos.get("tabIndex");t||(t=[]),t.length||t.push(this.getGui()),t.forEach(i=>i.setAttribute("tabindex",n.toString()))}setTemplate(t,n,i){let s=Iu(t);this.setTemplateFromElement(s,n,i)}setTemplateFromElement(t,n,i,s=!1){if(this.eGui=t,this.suppressDataRefValidation=s,n)for(let r=0;r<n.length;r++){let o=n[r];this.componentSelectors.set(o.selector,o)}this.wireTemplate(t,i)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(t){this.parentComponent=t}getParentComponent(){return this.parentComponent}setGui(t){this.eGui=t}queryForHtmlElement(t){return this.eGui.querySelector(t)}getContainerAndElement(t,n){let i=n;return t==null?null:(i||(i=this.eGui),bR(t)?{element:t,parent:i}:{element:t.getGui(),parent:i})}prependChild(t,n){let{element:i,parent:s}=this.getContainerAndElement(t,n)||{};!i||!s||s.insertAdjacentElement("afterbegin",i)}appendChild(t,n){let{element:i,parent:s}=this.getContainerAndElement(t,n)||{};!i||!s||s.appendChild(i)}isDisplayed(){return this.displayed}setVisible(t,n={}){if(t!==this.visible){this.visible=t;let{skipAriaHidden:i}=n;bZ(this.eGui,t,{skipAriaHidden:i})}}setDisplayed(t,n={}){if(t!==this.displayed){this.displayed=t;let{skipAriaHidden:i}=n;gt(this.eGui,t,{skipAriaHidden:i});let s={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(s)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}addGuiEventListener(t,n,i){this.eGui.addEventListener(t,n,i),this.addDestroyFunc(()=>this.eGui.removeEventListener(t,n))}addCssClass(t){this.cssClassManager.addCssClass(t)}removeCssClass(t){this.cssClassManager.removeCssClass(t)}containsCssClass(t){return this.cssClassManager.containsCssClass(t)}addOrRemoveCssClass(t,n){this.cssClassManager.addOrRemoveCssClass(t,n)}},xZ={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus",checkboxChecked:"checkbox-checked",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off"};function Hr(e,t,n){let i=Ai(e,t,n);if(i){let{className:r}=i;if(typeof r=="string"&&r.indexOf("ag-icon")>-1||typeof r=="object"&&r["ag-icon"])return i}let s=document.createElement("span");return s.appendChild(i),s}function Ai(e,t,n,i){let s=null,r=n&&n.getColDef().icons;if(r&&(s=r[e]),t&&!s){let o=t.get("icons");o&&(s=o[e])}if(s){let o;if(typeof s=="function")o=s();else if(typeof s=="string")o=s;else throw new Error("icon from grid options needs to be a string or a function");if(typeof o=="string")return Iu(o);if(bR(o))return o;G("iconRenderer should return back a string or a dom object")}else{let o=document.createElement("span"),a=xZ[e];return a||(i?a=e:(G(`Did not find icon ${e}`),a="")),o.setAttribute("class",`ag-icon ag-icon-${a}`),o.setAttribute("unselectable","on"),ai(o,"presentation"),o}}function xB(e,t,n){if(n===0)return!1;let i=Math.abs(e.clientX-t.clientX),s=Math.abs(e.clientY-t.clientY);return Math.max(i,s)<=n}var qo=class{constructor(e,t=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new Mu,this.eElement=e,this.preventMouseClick=t;let n=this.onTouchStart.bind(this),i=this.onTouchMove.bind(this),s=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",n,{passive:!0}),this.eElement.addEventListener("touchmove",i,{passive:!0}),this.eElement.addEventListener("touchend",s,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",n,{passive:!0}),this.eElement.removeEventListener("touchmove",i,{passive:!0}),this.eElement.removeEventListener("touchend",s,{passive:!1})})}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;let t=this.touchStart;window.setTimeout(()=>{let n=this.touchStart===t;if(this.touching&&n&&!this.moved){this.moved=!0;let i={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(i)}},500)}onTouchMove(e){if(!this.touching)return;let t=this.getActiveTouch(e.touches);if(!t)return;!xB(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){let t={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(t),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){let e=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){let n={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(n),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}},OZ=`<span class="ag-sort-indicator-container">
        <span data-ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>
        <span data-ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>
        <span data-ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>
        <span data-ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>
        <span data-ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>
    </span>`,ER=class extends Ve{constructor(e){super(),this.eSortOrder=Z,this.eSortAsc=Z,this.eSortDesc=Z,this.eSortMixed=Z,this.eSortNone=Z,e||this.setTemplate(OZ)}wireBeans(e){this.sortController=e.sortController}attachCustomElements(e,t,n,i,s){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=n,this.eSortMixed=i,this.eSortNone=s}setupSort(e,t=!1){this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!(!this.column.isSortable()&&!this.column.getColDef().showRowGroup)&&(this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addManagedPropertyListener("unSortIcon",()=>this.updateIcons()),this.addManagedEventListeners({newColumnsLoaded:this.updateIcons.bind(this),sortChanged:this.onSortChanged.bind(this),columnRowGroupChanged:this.onSortChanged.bind(this)}),this.onSortChanged())}addInIcon(e,t,n){if(t==null)return;let i=Ai(e,this.gos,n);i&&t.appendChild(i)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){let e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){let t=e==="asc";gt(this.eSortAsc,t,{skipAriaHidden:!0})}if(this.eSortDesc){let t=e==="desc";gt(this.eSortDesc,t,{skipAriaHidden:!0})}if(this.eSortNone){let t=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),n=e==null;gt(this.eSortNone,!t&&n,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);let e=this.column.getColDef().showRowGroup;this.gos.isColumnsSortingCoupledToGroup()&&e&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){let e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";gt(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){if(!this.eSortOrder)return;let e=this.sortController.getColumnsWithSortingOrdered(),t=this.sortController.getDisplaySortIndexForColumn(this.column)??-1,n=e.some(s=>this.sortController.getDisplaySortIndexForColumn(s)??!1),i=t>=0&&n;gt(this.eSortOrder,i,{skipAriaHidden:!0}),t>=0?this.eSortOrder.textContent=(t+1).toString():xn(this.eSortOrder)}},NZ={selector:"AG-SORT-INDICATOR",component:ER},kZ=`<div class="ag-cell-label-container" role="presentation">
        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">
            <span data-ref="eText" class="ag-header-cell-text"></span>
            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
            <ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>
        </div>
    </div>`,rR=class extends Ve{constructor(){super(...arguments),this.eFilter=Z,this.eFilterButton=Z,this.eSortIndicator=Z,this.eMenu=Z,this.eLabel=Z,this.eText=Z,this.eSortOrder=Z,this.eSortAsc=Z,this.eSortDesc=Z,this.eSortMixed=Z,this.eSortNone=Z,this.lastMovingChanged=0}wireBeans(e){this.sortController=e.sortController,this.menuService=e.menuService,this.funcColsService=e.funcColsService}destroy(){super.destroy()}refresh(e){let t=this.params;return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon?!1:(this.setDisplayName(e),!0)}workOutTemplate(){let e=this.params.template??kZ;return e=e&&e.trim?e.trim():e,e}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,[NZ]),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;let t=rr(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=t)}}addInIcon(e,t,n){if(t==null)return;let i=Ai(e,this.gos,n);i&&t.appendChild(i)}setupTap(){let{gos:e}=this;if(e.get("suppressTouch"))return;let t=new qo(this.getGui(),!0),n=this.shouldSuppressMenuHide(),i=n&&j(this.eMenu),s=i?new qo(this.eMenu,!0):t;if(this.params.enableMenu){let r=i?"tap":"longTap",o=a=>this.params.showColumnMenuAfterMouseClick(a.touchStart);this.addManagedListeners(s,{[r]:o})}if(this.params.enableSorting){let r=o=>{let a=o.touchStart.target;n&&(this.eMenu?.contains(a)||this.eFilterButton?.contains(a))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListeners(t,{tap:r})}if(this.params.enableFilterButton){let r=new qo(this.eFilterButton,!0);this.addManagedListeners(r,{tap:()=>this.params.showFilter(this.eFilterButton)}),this.addDestroyFunc(()=>r.destroy())}this.addDestroyFunc(()=>t.destroy()),i&&this.addDestroyFunc(()=>s.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){Qi(this.eMenu),this.eMenu=void 0;return}let e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedElementListeners(this.eMenu,{click:()=>this.params.showColumnMenu(this.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){let t=this.params.column,n=this.menuService.isLegacyMenuEnabled();if(e&&!n){if(this.menuService.isFilterMenuInHeaderEnabled(t))return this.params.showFilter(this.eFilterButton??this.eMenu??this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu(this.eMenu??this.eFilterButton??this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.createBean(new ER(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListeners(this.params.column,{movingChanged:()=>{this.lastMovingChanged=new Date().getTime()}}),this.eLabel&&this.addManagedElementListeners(this.eLabel,{click:t=>{let n=this.params.column.isMoving(),s=new Date().getTime()-this.lastMovingChanged<50;if(!(n||s)){let a=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.params.progressSort(a)}}});let e=()=>{let t=this.params.column.getSort();if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",t==="asc"),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",t==="desc"),this.addOrRemoveCssClass("ag-header-cell-sorted-none",!t),this.params.column.getColDef().showRowGroup){let s=!this.funcColsService.getSourceColumnsForGroupColumn(this.params.column)?.every(r=>this.params.column.getSort()==r.getSort());this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",s)}};this.addManagedEventListeners({sortChanged:e,columnRowGroupChanged:e})}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedElementListeners(this.eFilterButton,{click:()=>this.params.showFilter(this.eFilterButton)}):this.eFilterButton=void 0}configureFilter(e,t,n){if(!e)return Qi(t),!1;let i=this.params.column;return this.addInIcon("filter",t,i),this.addManagedListeners(i,{filterChanged:n}),n(),!0}onFilterChangedIcon(){let e=this.params.column.isFilterActive();gt(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){let e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){return e?this.eFilterButton??this.eMenu??this.getGui():this.eMenu??this.eFilterButton??this.getGui()}},LZ=class extends Ve{constructor(){super(`<div class="ag-header-group-cell-label" role="presentation">
            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`),this.agOpened=Z,this.agClosed=Z,this.agLabel=Z}wireBeans(e){this.columnModel=e.columnModel}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&G("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened",this.agOpened),this.addInIcon("columnGroupClosed",this.agClosed);let e=s=>{if($o(s))return;let r=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),r,"uiColumnExpanded")};this.addTouchAndClickListeners(this.agClosed,e),this.addTouchAndClickListeners(this.agOpened,e);let t=s=>{Ru(s)};this.addManagedElementListeners(this.agClosed,{dblclick:t}),this.addManagedElementListeners(this.agOpened,{dblclick:t}),this.addManagedElementListeners(this.getGui(),{dblclick:e}),this.updateIconVisibility();let n=this.params.columnGroup.getProvidedColumnGroup(),i=this.updateIconVisibility.bind(this);this.addManagedListeners(n,{expandedChanged:i,expandableChanged:i})}addTouchAndClickListeners(e,t){let n=new qo(e,!0);this.addManagedListeners(n,{tap:t}),this.addDestroyFunc(()=>n.destroy()),this.addManagedElementListeners(e,{click:t})}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){let t=this.params.columnGroup.isExpanded();gt(this.agOpened,t),gt(this.agClosed,!t)}else gt(this.agOpened,!1),gt(this.agClosed,!1)}addInIcon(e,t){let n=Ai(e,this.gos,null);n&&t.appendChild(n)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){gt(this.agOpened,!1),gt(this.agClosed,!1);return}}setupLabel(){let{displayName:e,columnGroup:t}=this.params;if(j(e)){let n=rr(e,!0);this.agLabel.textContent=n}this.addOrRemoveCssClass("ag-sticky-label",!t.getColGroupDef()?.suppressStickyLabel)}},OB=(e=>(e.CommunityCoreModule="@ag-grid-community/core",e.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",e.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",e.CsvExportModule="@ag-grid-community/csv-export",e.EnterpriseCoreModule="@ag-grid-enterprise/core",e.RowGroupingModule="@ag-grid-enterprise/row-grouping",e.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",e.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",e.MenuModule="@ag-grid-enterprise/menu",e.SetFilterModule="@ag-grid-enterprise/set-filter",e.MultiFilterModule="@ag-grid-enterprise/multi-filter",e.StatusBarModule="@ag-grid-enterprise/status-bar",e.SideBarModule="@ag-grid-enterprise/side-bar",e.RangeSelectionModule="@ag-grid-enterprise/range-selection",e.MasterDetailModule="@ag-grid-enterprise/master-detail",e.RichSelectModule="@ag-grid-enterprise/rich-select",e.GridChartsModule="@ag-grid-enterprise/charts",e.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",e.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",e.ExcelExportModule="@ag-grid-enterprise/excel-export",e.ClipboardModule="@ag-grid-enterprise/clipboard",e.SparklinesModule="@ag-grid-enterprise/sparklines",e.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",e.AngularModule="@ag-grid-community/angular",e.ReactModule="@ag-grid-community/react",e.VueModule="@ag-grid-community/vue",e))(OB||{}),AC=class Je{static register(t){Je.__register(t,!0,void 0)}static registerModules(t){Je.__registerModules(t,!0,void 0)}static __register(t,n,i){Je.runVersionChecks(t),i!==void 0?(Je.areGridScopedModules=!0,Je.gridModulesMap[i]===void 0&&(Je.gridModulesMap[i]={}),Je.gridModulesMap[i][t.moduleName]=t):Je.globalModulesMap[t.moduleName]=t,Je.setModuleBased(n)}static __unRegisterGridModules(t){delete Je.gridModulesMap[t]}static __registerModules(t,n,i){Je.setModuleBased(n),t&&t.forEach(s=>Je.__register(s,n,i))}static isValidModuleVersion(t){let[n,i]=t.version.split(".")||[],[s,r]=Je.currentModuleVersion.split(".")||[];return n===s&&i===r}static runVersionChecks(t){Je.currentModuleVersion||(Je.currentModuleVersion=t.version);let n=i=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${i} Please update all modules to the same version.`;if(t.version?Je.isValidModuleVersion(t)||ke(n(`'${t.moduleName}' is version ${t.version} but the other modules are version ${Je.currentModuleVersion}.`)):ke(n(`'${t.moduleName}' is incompatible.`)),t.validate){let i=t.validate();i.isValid||ke(`${i.message}`)}}static setModuleBased(t){Je.moduleBased===void 0?Je.moduleBased=t:Je.moduleBased!==t&&(ke("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),ke("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information."))}static __setIsBundled(){Je.isBundled=!0}static __assertRegistered(t,n,i){if(this.__isRegistered(t,i))return!0;let s;if(Je.isBundled)s=`AG Grid: unable to use ${n} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(Je.moduleBased||Je.moduleBased===void 0){let r=Object.entries(OB).find(([o,a])=>a===t)?.[0];s=`AG Grid: unable to use ${n} as the ${r} is not registered${Je.areGridScopedModules?` for gridId: ${i}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${r} } from '${t}';
    
    ModuleRegistry.registerModules([ ${r} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else s=`AG Grid: unable to use ${n} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';`;return ke(s),!1}static __isRegistered(t,n){return!!Je.globalModulesMap[t]||!!Je.gridModulesMap[n]?.[t]}static __getRegisteredModules(t){return[...gC(Je.globalModulesMap),...gC(Je.gridModulesMap[t]||{})]}static __getGridRegisteredModules(t){return gC(Je.gridModulesMap[t]??{})||[]}static __isPackageBased(){return!Je.moduleBased}};AC.globalModulesMap={};AC.gridModulesMap={};AC.areGridScopedModules=!1;var Yn=AC,VZ="\u2191",BZ="\u2193",GZ=class extends Ve{constructor(){super(),this.refreshCount=0;let e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");let n=document.createElement("span");n.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(n),this.setTemplateFromElement(e)}wireBeans(e){this.filterManager=e.filterManager}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){let n=Math.abs(t),i=e.formatValue(n),s=j(i)?i:n,r=t>=0;r?this.eDelta.textContent=VZ+s:this.eDelta.textContent=BZ+s,this.eDelta.classList.toggle("ag-value-change-delta-up",r),this.eDelta.classList.toggle("ag-value-change-delta-down",!r)}setTimerToRemoveDelta(){this.refreshCount++;let e=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),xn(this.eDelta)}refresh(e,t=!1){let n=e.value;if(n===this.lastValue||(j(e.valueFormatted)?this.eValue.textContent=e.valueFormatted:j(e.value)?this.eValue.textContent=n:xn(this.eValue),this.filterManager?.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof n=="number"&&typeof this.lastValue=="number"){let i=n-this.lastValue;this.showDelta(e,i)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=n,!0}},HZ=class extends Ve{constructor(){super(),this.refreshCount=0;let e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}wireBeans(e){this.filterManager=e.filterManager}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;let e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);let t=document.createElement("span");t.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=t,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(e,t=!1){let n=e.value;return Pe(n)&&(n=""),n===this.lastValue||this.filterManager?.isSuppressFlashingCellsBecauseFiltering()?!1:(t||this.addSlideAnimation(),this.lastValue=n,j(e.valueFormatted)?this.eCurrent.textContent=e.valueFormatted:j(e.value)?this.eCurrent.textContent=n:xn(this.eCurrent),!0)}},N=class{};N.BACKSPACE="Backspace";N.TAB="Tab";N.ENTER="Enter";N.ESCAPE="Escape";N.SPACE=" ";N.LEFT="ArrowLeft";N.UP="ArrowUp";N.RIGHT="ArrowRight";N.DOWN="ArrowDown";N.DELETE="Delete";N.F2="F2";N.PAGE_UP="PageUp";N.PAGE_DOWN="PageDown";N.PAGE_HOME="Home";N.PAGE_END="End";N.A="KeyA";N.C="KeyC";N.D="KeyD";N.V="KeyV";N.X="KeyX";N.Y="KeyY";N.Z="KeyZ";var UZ=class extends Ve{constructor(e,t,n){super(t,n),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");let{labelSeparator:e,label:t,labelWidth:n,labelAlignment:i,disabled:s}=this.config;s!=null&&this.setDisabled(s),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),n!=null&&this.setLabelWidth(n),this.setLabelAlignment(i||this.labelAlignment),this.refreshLabel()}refreshLabel(){xn(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(gt(this.eLabel,!1),ai(this.eLabel,"presentation")):(gt(this.eLabel,!0),ai(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){let n=this.getGui().classList;return n.toggle("ag-label-align-left",e==="left"),n.toggle("ag-label-align-right",e==="right"),n.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(TC(this.eLabel,e),this)}setDisabled(e){e=!!e;let t=this.getGui();return Cf(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},NB=class extends UZ{constructor(e,t,n,i){super(e,t,n),this.className=i}postConstruct(){super.postConstruct();let{width:e,value:t,onValueChange:n}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),n!=null&&this.onValueChange(n),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){let e=this.getAriaElement(),t=this.getLabelId(),n=this.getLabel();n==null||n==""||rZ(e)!==null?vf(e,""):vf(e,t??"")}setAriaLabel(e){return Tu(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return _s(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}},dl=class extends NB{constructor(e,t,n="text",i="input"){super(e,e?.template??`
            <div role="presentation">
                <div data-ref="eLabel" class="ag-input-field-label"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${i} data-ref="eInput" class="ag-input-field-input"></${i}>
                </div>
            </div>`,[],t),this.inputType=n,this.displayFieldTag=i,this.eLabel=Z,this.eWrapper=Z,this.eInput=Z}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;let{inputName:e,inputWidth:t}=this.config;e!=null&&this.setInputName(e),t!=null&&this.setInputWidth(t),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return TC(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){let t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return jr(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return Tu(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return Cf(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)jr(this.eInput,"autocomplete",null);else{let t=typeof e=="string"?e:"off";jr(this.eInput,"autocomplete",t)}return this}},DR=class extends dl{constructor(e,t="ag-checkbox",n="checkbox"){super(e,t,n),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();let{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;let e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){let t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,t,n){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:n});let i=this.getInputElement(),s={type:"checkboxChanged",id:i.id,name:i.name,selected:e,previousValue:t};this.eventService.dispatchEvent(s)}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;let t=this.isSelected(),n=this.selected=e.target.checked;this.refreshSelectedClass(n),this.dispatchChange(n,t,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",e===!0),this.eWrapper.classList.toggle("ag-indeterminate",e==null)}},RR={selector:"AG-CHECKBOX",component:DR},WZ=class extends Ve{constructor(){super(`
            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[RR]),this.eCheckbox=Z}init(e){this.params=e,this.updateCheckbox(e);let t=this.eCheckbox.getInputElement();t.setAttribute("tabindex","-1"),gB(t,"polite"),this.addManagedListeners(t,{click:n=>{if(Ru(n),this.eCheckbox.isDisabled())return;let i=this.eCheckbox.getValue();this.onCheckboxChanged(i)},dblclick:n=>{Ru(n)}}),this.addManagedElementListeners(this.params.eGridCell,{keydown:n=>{if(n.key===N.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===this.gos.getActiveDomElement()&&this.eCheckbox.toggle();let i=this.eCheckbox.getValue();this.onCheckboxChanged(i),n.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,n=!0;if(e.node.group&&e.column){let a=e.column.getColId();a.startsWith(yf)?t=e.value==null||e.value===""?void 0:e.value==="true":e.node.aggData&&e.node.aggData[a]!==void 0?t=e.value??void 0:n=!1}else t=e.value??void 0;if(!n){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(t);let i=e.disabled!=null?e.disabled:!e.column?.isCellEditable(e.node);this.eCheckbox.setDisabled(i);let s=this.localeService.getLocaleTextFunc(),r=CR(s,t),o=i?r:`${s("ariaToggleCellValue","Press SPACE to toggle cell value")} (${r})`;this.eCheckbox.setInputAriaLabel(o)}onCheckboxChanged(e){let{column:t,node:n,value:i}=this.params,s={type:"cellEditingStarted",column:t,colDef:t?.getColDef(),data:n.data,node:n,rowIndex:n.rowIndex,rowPinned:n.rowPinned,value:i};this.eventService.dispatchEvent(s);let r=this.params.node.setDataValue(this.params.column,e,"edit"),o={type:"cellEditingStopped",column:t,colDef:t?.getColDef(),data:n.data,node:n,rowIndex:n.rowIndex,rowPinned:n.rowPinned,value:i,oldValue:i,newValue:e,valueChanged:r};this.eventService.dispatchEvent(o)}},jZ=class extends Ve{constructor(){super(`<div class="ag-loading">
            <span class="ag-loading-icon" data-ref="eLoadingIcon"></span>
            <span class="ag-loading-text" data-ref="eLoadingText"></span>
        </div>`),this.eLoadingIcon=Z,this.eLoadingText=Z}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){let e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){let e=Ai("groupLoading",this.gos,null);e&&this.eLoadingIcon.appendChild(e);let t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}},zZ=class extends Ve{constructor(){super('<div class="ag-skeleton-container"></div>')}init(e){let t=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",t),this.addDestroyFunc(()=>vf(e.eParentOfValue)),vf(e.eParentOfValue,t),e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){let e=this.localeService.getLocaleTextFunc();this.getGui().innerText=e("loadingError","ERR");let t=e("ariaSkeletonCellLoadingFailed","Row failed to load");Tu(this.getGui(),t)}setupLoading(e){let n=this.gos.getDocument().createElement("div");n.classList.add("ag-skeleton-effect");let i=e.node.rowIndex;if(i!=null){let o=75+25*(i%2===0?Math.sin(i):Math.cos(i));n.style.width=`${o}%`}this.getGui().appendChild(n);let r=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");Tu(this.getGui(),r)}refresh(e){return!1}destroy(){super.destroy()}},kB=class extends Ve{constructor(){super()}destroy(){super.destroy()}},$Z=class extends kB{init(){let e=this.gos.get("overlayLoadingTemplate");if(this.setTemplate(e??'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!e){let t=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=t("loadingOoo","Loading...")})}}},qZ=class extends kB{init(){let e=this.gos.get("overlayNoRowsTemplate");if(this.setTemplate(e??'<span class="ag-overlay-no-rows-center"></span>'),!e){let t=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=t("noRowsToShow","No Rows To Show")})}}},Fu=class extends Ve{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){let e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},KZ=class extends Fu{constructor(){super('<div class="ag-tooltip"></div>')}init(e){let{value:t}=e;this.getGui().textContent=rr(t,!0)}};function QZ(e,t,n){let i={},s=e.filter(r=>!t.some(o=>o===r));return s.length>0&&s.forEach(r=>i[r]=LB(r,n).values),i}function LB(e,t,n,i){let s=t.map((a,l)=>({value:a,relevance:YZ(e.toLowerCase(),a.toLocaleLowerCase()),idx:l}));if(s.sort((a,l)=>l.relevance-a.relevance),n&&(s=s.filter(a=>a.relevance!==0)),s.length>0&&i&&i>0){let l=s[0].relevance*i;s=s.filter(c=>l-c.relevance<0)}let r=[],o=[];for(let a of s)r.push(a.value),o.push(a.idx);return{values:r,indices:o}}function YZ(e,t){let n=e.replace(/\s/g,""),i=t.replace(/\s/g,""),s=0,r=-1;for(let o=0;o<n.length;o++){let a=i.indexOf(n[o],r+1);a!==-1&&(r=a,s+=100-r*100/1e4*100)}return s}var JZ=class extends k{constructor(){super(...arguments),this.beanName="userComponentRegistry",this.agGridDefaults={agColumnHeader:rR,agColumnGroupHeader:LZ,agSortIndicator:ER,agAnimateShowChangeCellRenderer:GZ,agAnimateSlideCellRenderer:HZ,agLoadingCellRenderer:jZ,agSkeletonCellRenderer:zZ,agCheckboxCellRenderer:WZ,agLoadingOverlay:$Z,agNoRowsOverlay:qZ,agTooltipComponent:KZ},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agGroupCellRenderer:"@ag-grid-enterprise/row-grouping",agGroupRowRenderer:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}postConstruct(){let e=this.gos.get("components");e!=null&&$i(e,(t,n)=>this.registerJsComponent(t,n))}registerDefaultComponent(e,t){this.agGridDefaults[e]=t}registerJsComponent(e,t){this.jsComps[e]=t}retrieve(e,t){let n=(a,l)=>({componentFromFramework:l,component:a}),i=this.getFrameworkOverrides().frameworkComponent(t,this.gos.get("components"));if(i!=null)return n(i,!0);let s=this.jsComps[t];if(s){let a=this.getFrameworkOverrides().isFrameworkComponent(s);return n(s,a)}let r=this.agGridDefaults[t];if(r)return n(r,!1);let o=this.enterpriseAgDefaultCompsModule[t];return o?Yn.__assertRegistered(o,`AG Grid '${e}' component: ${t}`,this.gridId):pR(()=>{this.warnAboutMissingComponent(e,t)},"MissingComp"+t),null}warnAboutMissingComponent(e,t){let n=[...Object.keys(this.agGridDefaults).filter(s=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(s)),...Object.keys(this.jsComps)],i=LB(t,n,!0,.8).values;G(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.`),i.length>0&&G(`         Did you mean: [${i.slice(0,3)}]?`),G(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}},Ii=class lf{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(n=>this.onDone(n),n=>this.onReject(n))}static all(t){return t.length?new lf(n=>{let i=t.length,s=new Array(i);t.forEach((r,o)=>{r.then(a=>{s[o]=a,i--,i===0&&n(s)})})}):lf.resolve()}static resolve(t=null){return new lf(n=>n(t))}then(t){return new lf(n=>{this.status===1?n(t(this.resolution)):this.waiters.push(i=>n(t(i)))})}onDone(t){this.status=1,this.resolution=t,this.waiters.forEach(n=>n(t))}onReject(t){}},XZ={propertyName:"dateComponent",cellRenderer:!1},ZZ={propertyName:"headerComponent",cellRenderer:!1},eee={propertyName:"headerGroupComponent",cellRenderer:!1},NV={propertyName:"cellRenderer",cellRenderer:!0},tee={propertyName:"cellRenderer",cellRenderer:!1},nee={propertyName:"loadingCellRenderer",cellRenderer:!0},iee={propertyName:"cellEditor",cellRenderer:!1},kV={propertyName:"innerRenderer",cellRenderer:!0},see={propertyName:"loadingOverlayComponent",cellRenderer:!1},ree={propertyName:"noRowsOverlayComponent",cellRenderer:!1},oee={propertyName:"tooltipComponent",cellRenderer:!1},TR={propertyName:"filter",cellRenderer:!1},aee={propertyName:"floatingFilterComponent",cellRenderer:!1},lee={propertyName:"toolPanel",cellRenderer:!1},cee={propertyName:"statusPanel",cellRenderer:!1},uee={propertyName:"fullWidthCellRenderer",cellRenderer:!0},dee={propertyName:"loadingCellRenderer",cellRenderer:!0},hee={propertyName:"groupRowRenderer",cellRenderer:!0},fee={propertyName:"detailCellRenderer",cellRenderer:!0},pee={propertyName:"menuItem",cellRenderer:!1},VB=class BB extends k{constructor(){super(...arguments),this.beanName="userComponentFactory"}wireBeans(t){this.agComponentUtils=t.agComponentUtils,this.componentMetadataProvider=t.componentMetadataProvider,this.userComponentRegistry=t.userComponentRegistry,this.frameworkComponentWrapper=t.frameworkComponentWrapper,this.gridOptions=t.gridOptions}getHeaderCompDetails(t,n){return this.getCompDetails(t,ZZ,"agColumnHeader",n)}getHeaderGroupCompDetails(t){let n=t.columnGroup.getColGroupDef();return this.getCompDetails(n,eee,"agColumnGroupHeader",t)}getFullWidthCellRendererDetails(t){return this.getCompDetails(this.gridOptions,uee,null,t,!0)}getFullWidthLoadingCellRendererDetails(t){return this.getCompDetails(this.gridOptions,dee,"agLoadingCellRenderer",t,!0)}getFullWidthGroupCellRendererDetails(t){return this.getCompDetails(this.gridOptions,hee,"agGroupRowRenderer",t,!0)}getFullWidthDetailCellRendererDetails(t){return this.getCompDetails(this.gridOptions,fee,"agDetailCellRenderer",t,!0)}getInnerRendererDetails(t,n){return this.getCompDetails(t,kV,null,n)}getFullWidthGroupRowInnerCellRenderer(t,n){return this.getCompDetails(t,kV,null,n)}getCellRendererDetails(t,n){return this.getCompDetails(t,NV,null,n)}getEditorRendererDetails(t,n){return this.getCompDetails(t,tee,null,n)}getLoadingCellRendererDetails(t,n){return this.getCompDetails(t,nee,"agSkeletonCellRenderer",n,!0)}getCellEditorDetails(t,n){return this.getCompDetails(t,iee,"agCellEditor",n,!0)}getFilterDetails(t,n,i){return this.getCompDetails(t,TR,i,n,!0)}getDateCompDetails(t){return this.getCompDetails(this.gridOptions,XZ,"agDateInput",t,!0)}getLoadingOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,see,"agLoadingOverlay",t,!0)}getNoRowsOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,ree,"agNoRowsOverlay",t,!0)}getTooltipCompDetails(t){return this.getCompDetails(t.colDef,oee,"agTooltipComponent",t,!0)}getSetFilterCellRendererDetails(t,n){return this.getCompDetails(t,NV,null,n)}getFloatingFilterCompDetails(t,n,i){return this.getCompDetails(t,aee,i,n)}getToolPanelCompDetails(t,n){return this.getCompDetails(t,lee,null,n,!0)}getStatusPanelCompDetails(t,n){return this.getCompDetails(t,cee,null,n,!0)}getMenuItemCompDetails(t,n){return this.getCompDetails(t,pee,"agMenuItem",n,!0)}getCompDetails(t,n,i,s,r=!1){let{propertyName:o,cellRenderer:a}=n,{compName:l,jsComp:c,fwComp:u,paramsFromSelector:h,popupFromSelector:f,popupPositionFromSelector:g}=BB.getCompKeys(this.frameworkOverrides,t,n,s),v=I=>{let T=this.userComponentRegistry.retrieve(o,I);T&&(c=T.componentFromFramework?void 0:T.component,u=T.componentFromFramework?T.component:void 0)};if(l!=null&&v(l),c==null&&u==null&&i!=null&&v(i),c&&a&&!this.agComponentUtils.doesImplementIComponent(c)&&(c=this.agComponentUtils.adaptFunction(o,c)),!c&&!u){r&&ke(`Could not find component ${l}, did you forget to configure this component?`);return}let y=this.mergeParamsWithApplicationProvidedParams(t,n,s,h),C=c==null,E=c||u;return{componentFromFramework:C,componentClass:E,params:y,type:n,popupFromSelector:f,popupPositionFromSelector:g,newAgStackInstance:()=>this.newAgStackInstance(E,C,y,n)}}static getCompKeys(t,n,i,s){let{propertyName:r}=i,o,a,l,c,u,h;if(n){let f=n,g=f[r+"Selector"],v=g?g(s):null,y=C=>{typeof C=="string"?o=C:C!=null&&C!==!0&&(t.isFrameworkComponent(C)?l=C:a=C)};v?(y(v.component),c=v.params,u=v.popup,h=v.popupPosition):y(f[r])}return{compName:o,jsComp:a,fwComp:l,paramsFromSelector:c,popupFromSelector:u,popupPositionFromSelector:h}}newAgStackInstance(t,n,i,s){let r=s.propertyName,o=!n,a;if(o)a=new t;else{let c=this.componentMetadataProvider.retrieve(r);a=this.frameworkComponentWrapper.wrap(t,c.mandatoryMethodList,c.optionalMethodList,s)}let l=this.initComponent(a,i);return l==null?Ii.resolve(a):l.then(()=>a)}mergeParamsWithApplicationProvidedParams(t,n,i,s=null){let r=this.gos.getGridCommonParams();qi(r,i);let o=t,a=o&&o[n.propertyName+"Params"];if(typeof a=="function"){let l=a(i);qi(r,l)}else typeof a=="object"&&qi(r,a);return qi(r,s),r}initComponent(t,n){if(this.createBean(t),t.init!=null)return t.init(n)}};function hf(e){let t=e;return t!=null&&t.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}var gee=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,!(!e||!e.beanClasses)&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){Object.entries(e.providedBeanInstances).forEach(([t,n])=>{this.beans[t]=n}),e.beanClasses.forEach(t=>{let n=new t;n.beanName?this.beans[n.beanName]=n:console.error(`Bean ${t.name} is missing beanName`),this.createdBeans.push(n)}),e.derivedBeans?.forEach(t=>{let{beanName:n,bean:i}=t(this);this.beans[n]=i,this.createdBeans.push(i)}),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){if(!e)throw Error("Can't wire to bean since it is null");return this.initBeans([e],t),e}initBeans(e,t){e.forEach(n=>{n.preWireBeans?.(this.beans),n.wireBeans?.(this.beans)}),e.forEach(n=>n.preConstruct?.()),t&&e.forEach(t),e.forEach(n=>n.postConstruct?.())}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;let e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){e?.destroy?.()}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},mee=class extends gee{init(e){this.gridId=e.gridId,this.beans.context=this,super.init(e)}destroy(){super.destroy(),Yn.__unRegisterGridModules(this.gridId)}getGridId(){return this.gridId}};var GB=(e=>(e[e.Left=0]="Left",e[e.Right=1]="Right",e))(GB||{});var vee=`<div class="ag-dnd-ghost ag-unselectable">
<span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
<div class="ag-dnd-ghost-label"></div>
</div>`,Cee=class extends k{constructor(){super(...arguments),this.beanName="dragAndDropService",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.dragService=e.dragService,this.mouseEventService=e.mouseEventService,this.environment=e.environment}postConstruct(){this.dropIconMap={pinned:Hr("columnMovePin",this.gos,null),hide:Hr("columnMoveHide",this.gos,null),move:Hr("columnMoveMove",this.gos,null),left:Hr("columnMoveLeft",this.gos,null),right:Hr("columnMoveRight",this.gos,null),group:Hr("columnMoveGroup",this.gos,null),aggregate:Hr("columnMoveValue",this.gos,null),pivot:Hr("columnMovePivot",this.gos,null),notAllowed:Hr("dropNotAllowed",this.gos,null)}}addDragSource(e,t=!1){let n={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:n,dragSource:e}),this.dragService.addDragSource(n)}removeDragSource(e){let t=this.dragSourceAndParamsList.find(n=>n.dragSource===e);t&&(this.dragService.removeDragSource(t.params),Jn(this.dragSourceAndParamsList,t))}destroy(){this.dragSourceAndParamsList.forEach(e=>this.dragService.removeDragSource(e.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0,super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()}onDragStop(e){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){let t=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(t)}this.lastDropTarget=void 0,this.dragItem=null,this.removeGhost()}onDragging(e,t){let n=this.getHorizontalDirection(e),i=this.getVerticalDirection(e);this.eventLastTime=e,this.positionGhost(e);let s=this.dropTargets.filter(o=>this.isMouseOnDropTarget(e,o)),r=this.findCurrentDropTarget(e,s);if(r!==this.lastDropTarget)this.leaveLastTargetIfExists(e,n,i,t),this.lastDropTarget!==null&&r===null&&this.dragSource.onGridExit?.(this.dragItem),this.lastDropTarget===null&&r!==null&&this.dragSource.onGridEnter?.(this.dragItem),this.enterDragTargetIfExists(r,e,n,i,t),this.lastDropTarget=r;else if(r&&r.onDragging){let o=this.createDropTargetEvent(r,e,n,i,t);r.onDragging(o)}}getAllContainersFromDropTarget(e){let t=e.getSecondaryContainers?e.getSecondaryContainers():null,n=[[e.getContainer()]];return t?n.concat(t):n}allContainersIntersect(e,t){for(let n of t){let i=n.getBoundingClientRect();if(i.width===0||i.height===0)return!1;let s=e.clientX>=i.left&&e.clientX<i.right,r=e.clientY>=i.top&&e.clientY<i.bottom;if(!s||!r)return!1}return!0}isMouseOnDropTarget(e,t){let n=this.getAllContainersFromDropTarget(t),i=!1;for(let s of n)if(this.allContainersIntersect(e,s)){i=!0;break}return t.targetContainsSource&&!t.getContainer().contains(this.dragSource.eElement)?!1:i&&t.isInterestedIn(this.dragSource.type,this.dragSource.eElement)}findCurrentDropTarget(e,t){let n=t.length;if(n===0)return null;if(n===1)return t[0];let s=this.gos.getRootNode().elementsFromPoint(e.clientX,e.clientY);for(let r of s)for(let o of t)if(_X(this.getAllContainersFromDropTarget(o)).indexOf(r)!==-1)return o;return null}enterDragTargetIfExists(e,t,n,i,s){if(e){if(e.onDragEnter){let r=this.createDropTargetEvent(e,t,n,i,s);e.onDragEnter(r)}this.setGhostIcon(e.getIconName?e.getIconName():null)}}leaveLastTargetIfExists(e,t,n,i){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){let s=this.createDropTargetEvent(this.lastDropTarget,e,t,n,i);this.lastDropTarget.onDragLeave(s)}this.setGhostIcon(null)}}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(n=>n.external).find(n=>n.getContainer()===e.getContainer())||null}getHorizontalDirection(e){let t=this.eventLastTime&&this.eventLastTime.clientX,n=e.clientX;return t===n?null:t>n?0:1}getVerticalDirection(e){let t=this.eventLastTime&&this.eventLastTime.clientY,n=e.clientY;return t===n?null:t>n?0:1}createDropTargetEvent(e,t,n,i,s){let r=e.getContainer(),o=r.getBoundingClientRect(),{dragItem:a,dragSource:l}=this,c=t.clientX-o.left,u=t.clientY-o.top;return this.gos.addGridCommonParams({event:t,x:c,y:u,vDirection:i,hDirection:n,dragSource:l,fromNudge:s,dragItem:a,dropZoneTarget:r})}positionGhost(e){let t=this.eGhost;if(!t)return;let i=t.getBoundingClientRect().height,s=yZ()-2,r=wZ()-2,o=DB(t.offsetParent),{clientY:a,clientX:l}=e,c=a-o.top-i/2,u=l-o.left-10,h=this.gos.getDocument(),f=h.defaultView||window,g=f.pageYOffset||h.documentElement.scrollTop,v=f.pageXOffset||h.documentElement.scrollLeft;s>0&&u+t.clientWidth>s+v&&(u=s+v-t.clientWidth),u<0&&(u=0),r>0&&c+t.clientHeight>r+g&&(c=r+g-t.clientHeight),c<0&&(c=0),t.style.left=`${u}px`,t.style.top=`${c}px`}removeGhost(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null}createGhost(){this.eGhost=Iu(vee),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost),this.environment.applyThemeClasses(this.eGhost),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);let e=this.eGhost.querySelector(".ag-dnd-ghost-label"),t=this.dragSource.dragItemName;gR(t)&&(t=t()),e.innerHTML=rr(t)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";let n=this.gos.getDocument(),i=null,s=null;try{i=n.fullscreenElement}catch{}finally{i||(i=this.gos.getRootNode());let r=i.querySelector("body");r?s=r:i instanceof ShadowRoot?s=i:i instanceof Document?s=i?.documentElement:s=i}this.eGhostParent=s,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):G("Could not find document body, it is needed for dragging columns")}setGhostIcon(e,t=!1){xn(this.eGhostIcon);let n=null;e||(e=this.dragSource.getDefaultIconName?this.dragSource.getDefaultIconName():"notAllowed"),n=this.dropIconMap[e],this.eGhostIcon.classList.toggle("ag-shake-left-to-right",t),!(n===this.dropIconMap.hide&&this.gos.get("suppressDragLeaveHidesColumns"))&&n&&this.eGhostIcon.appendChild(n)}},yee=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){let n=t||this.shouldSkipVerticalScroll();if(n&&this.shouldSkipHorizontalScroll())return;let i=this.scrollContainer.getBoundingClientRect(),s=this.scrollByTick;this.tickLeft=e.clientX<i.left+s,this.tickRight=e.clientX>i.right-s,this.tickUp=e.clientY<i.top+s&&!n,this.tickDown=e.clientY>i.bottom-s&&!n,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;let e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){let t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){let t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}};var wee=class extends k{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.sortController=e.sortController,this.filterManager=e.filterManager,this.selectionService=e.selectionService,this.mouseEventService=e.mouseEventService,this.ctrlsService=e.ctrlsService,this.funcColsService=e.funcColsService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){this.gos.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(e=>{let t=e.gridBodyCtrl;this.autoScrollService=new yee({scrollContainer:t.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>t.getScrollFeature().getVScrollPosition().top,setVerticalPosition:n=>t.getScrollFeature().setVerticalScrollPosition(n),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){return!!(this.funcColsService.getRowGroupColumns().length||this.filterManager?.isAnyFilterPresent()||this.sortController.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];let t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){let i=[...this.selectionService.getSelectedNodes()].sort((s,r)=>s.rowIndex==null||r.rowIndex==null?0:this.getRowIndexNumber(s)-this.getRowIndexNumber(r));if(i.indexOf(t)!==-1)return i}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach(t=>{t.setDragging(!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){let{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}isDropZoneWithinThisGrid(e){let n=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:i}=e;return!n.contains(i)}onEnterOrDragging(e){this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e;let t=this.mouseEventService.getNormalisedPosition(e).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){let n=this.isFromThisGrid(e),i=this.gos.get("rowDragManaged"),s=e.dragItem.rowNodes;i&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!n?this.isDropZoneWithinThisGrid(e)||this.clientSideRowModel.highlightRowAtPixel(s[0],t):this.moveRows(s,t))}getRowIndexNumber(e){let t=e.getRowIndexString();return parseInt(xe(t.split("-")),10)}moveRowAndClearHighlight(e){let t=this.clientSideRowModel.getLastHighlightedRowNode(),n=t&&t.highlighted===1,i=this.mouseEventService.getNormalisedPosition(e).y,s=e.dragItem.rowNodes,r=n?1:0;if(this.isFromThisGrid(e))s.forEach(o=>{o.rowTop<i&&(r-=1)}),this.moveRows(s,i,r);else{let o=this.gos.getRowIdCallback(),a=this.clientSideRowModel.getRowIndexAtPixel(i)+1;this.clientSideRowModel.getHighlightPosition(i)===0&&a--,this.clientSideRowModel.updateRowData({add:s.filter(l=>!this.clientSideRowModel.getRowNode(o?.({data:l.data,level:0,rowPinned:l.rowPinned})??l.data.id)).map(l=>l.data),addIndex:a})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t,n=0){this.clientSideRowModel.ensureRowsAtPixel(e,t,n)&&(this.focusService.clearFocusedCell(),this.rangeService?.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer()){G("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(e)){G("addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let t={getContainer:e.getContainer};e.fromGrid?t=e:(e.onDragEnter&&(t.onDragEnter=n=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",n))}),e.onDragLeave&&(t.onDragLeave=n=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",n))}),e.onDragging&&(t.onDragging=n=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",n))}),e.onDragStop&&(t.onDragStop=n=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",n))})),this.dragAndDropService.addDropTarget(B({isInterestedIn:n=>n===2,getIconName:()=>"move",external:!0},t))}getRowDropZone(e){let t=this.getContainer.bind(this),n=this.onDragEnter.bind(this),i=this.onDragLeave.bind(this),s=this.onDragging.bind(this),r=this.onDragStop.bind(this);return e?{getContainer:t,onDragEnter:e.onDragEnter?o=>{n(o),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",o))}:n,onDragLeave:e.onDragLeave?o=>{i(o),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",o))}:i,onDragging:e.onDragging?o=>{s(o),e.onDragging(this.draggingToRowDragEvent("rowDragMove",o))}:s,onDragStop:e.onDragStop?o=>{r(o),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",o))}:r,fromGrid:!0}:{getContainer:t,onDragEnter:n,onDragLeave:i,onDragging:s,onDragStop:r,fromGrid:!0}}draggingToRowDragEvent(e,t){let n=this.mouseEventService.getNormalisedPosition(t).y,i=n>this.pageBoundsService.getCurrentPageHeight(),s=-1,r;i||(s=this.rowModel.getRowIndexAtPixel(n),r=this.rowModel.getRow(s));let o;switch(t.vDirection){case 1:o="down";break;case 0:o="up";break;default:o=null;break}return this.gos.addGridCommonParams({type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:s,overNode:r,y:n,vDirection:o})}dispatchGridEvent(e,t){let n=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(n)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&!this.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(t=>{t.setDragging(!1)})}},See=class extends k{constructor(){super(...arguments),this.beanName="dragService",this.dragEndFunctions=[],this.dragSources=[]}wireBeans(e){this.mouseEventService=e.mouseEventService}destroy(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0,super.destroy()}removeListener(e){let t=e.dragSource.eElement,n=e.mouseDownListener;if(t.removeEventListener("mousedown",n),e.touchEnabled){let i=e.touchStartListener;t.removeEventListener("touchstart",i,{passive:!0})}}removeDragSource(e){let t=this.dragSources.find(n=>n.dragSource===e);t&&(this.removeListener(t),Jn(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(e){let t=this.onMouseDown.bind(this,e),{eElement:n,includeTouch:i,stopPropagationForTouch:s}=e;n.addEventListener("mousedown",t);let r=null,o=this.gos.get("suppressTouch");i&&!o&&(r=a=>{wR(a.target)||(a.cancelable&&(a.preventDefault(),s&&a.stopPropagation()),this.onTouchStart(e,a))},n.addEventListener("touchstart",r,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:r,touchEnabled:!!i})}getStartTarget(){return this.startTarget}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;let n=t.touches[0];this.touchLastTime=n,this.touchStart=n;let i=l=>this.onTouchMove(l,e.eElement),s=l=>this.onTouchUp(l,e.eElement),r=l=>{l.cancelable&&l.preventDefault()},o=t.target,a=[{target:this.gos.getRootNode(),type:"touchmove",listener:r,options:{passive:!1}},{target:o,type:"touchmove",listener:i,options:{passive:!0}},{target:o,type:"touchend",listener:s,options:{passive:!0}},{target:o,type:"touchcancel",listener:s,options:{passive:!0}}];this.addTemporaryEvents(a),e.dragStartPixels===0&&this.onCommonMove(n,this.touchStart,e.eElement)}onMouseDown(e,t){let n=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||n._alreadyProcessedByDragService||(n._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;let i=l=>this.onMouseMove(l,e.eElement),s=l=>this.onMouseUp(l,e.eElement),r=l=>l.preventDefault(),o=this.gos.getRootNode(),a=[{target:o,type:"mousemove",listener:i},{target:o,type:"mouseup",listener:s},{target:o,type:"contextmenu",listener:r}];this.addTemporaryEvents(a),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{let{target:n,type:i,listener:s,options:r}=t;n.addEventListener(i,s,r)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{let{target:n,type:i,listener:s,options:r}=t;n.removeEventListener(i,s,r)})})}isEventNearStartEvent(e,t){let{dragStartPixels:n}=this.currentDragParams,i=j(n)?n:4;return xB(e,t,i)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,n){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(e,t))return;this.dragging=!0;let i={type:"dragStarted",target:n};this.eventService.dispatchEvent(i),this.currentDragParams.onDragStart(t),this.currentDragParams.onDragging(t)}this.currentDragParams.onDragging(e)}onTouchMove(e,t){let n=this.getFirstActiveTouch(e.touches);n&&this.onCommonMove(n,this.touchStart,t)}onMouseMove(e,t){qr()&&this.gos.getDocument().getSelection()?.removeAllRanges(),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){let t=this.gos.get("enableCellTextSelection"),n=e.type==="mousemove";return t&&n&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){return!!e.target?.tagName.toLocaleLowerCase()?.match("^a$|textarea|input|select|button")}onTouchUp(e,t){let n=this.getFirstActiveTouch(e.changedTouches);n||(n=this.touchLastTime),this.onUpCommon(n,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(e);let n={type:"dragStopped",target:t};this.eventService.dispatchEvent(n)}this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(n=>n()),this.dragEndFunctions.length=0}},oR=class extends Ve{constructor(e,t,n,i,s,r){super(),this.cellValueFn=e,this.rowNode=t,this.column=n,this.customGui=i,this.dragStartPixels=s,this.suppressVisibilityChange=r,this.dragSource=null}wireBeans(e){this.beans=e}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(Ai("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){let e=this.gos.get("rowDragManaged")?new bee(this,this.beans,this.rowNode,this.column):new _ee(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e),this.addDragSource(t)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];let t=this.beans.selectionService.getSelectedNodes();return t.indexOf(this.rowNode)!==-1?t:[this.rowNode]}checkCompatibility(){let e=this.gos.get("rowDragManaged");this.gos.get("treeData")&&e&&G("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){let t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();let t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:i=>{i?.preventDefault()}})[0]);let n=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:()=>{let i=this.getDragItem(),s=i.rowNodes?.length||1,r=this.getRowDragText(this.column);return r?r(i,s):s===1?this.cellValueFn():`${s} ${n("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},HB=class extends k{constructor(e,t,n){super(),this.parent=e,this.rowNode=t,this.column=n}setDisplayedOrVisible(e){let t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let n=!0,i=!1;this.column&&(n=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),i=gR(this.column.getColDef().rowDrag)),i?(this.parent.setDisplayed(!0,t),this.parent.setVisible(n,t)):(this.parent.setDisplayed(n,t),this.parent.setVisible(!0,t))}}},_ee=class extends HB{constructor(e,t,n,i){super(e,n,i),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));let e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}},bee=class extends HB{constructor(e,t,n,i){super(e,n,i),this.beans=t}postConstruct(){let e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventService,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let t=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),n=t&&t.shouldPreventRowMove(),i=this.gos.get("suppressRowDrag"),s=this.beans.dragAndDropService.hasExternalDropZones(),r=n&&!s||i;this.setDisplayedOrVisible(r)}},Sf=class Su{constructor(t){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=Su.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=t}setData(t){this.setDataCommon(t,!1)}updateData(t){this.setDataCommon(t,!0)}setDataCommon(t,n){let i=this.data;this.data=t,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();let s=this.createDataChangedEvent(t,i,n);this.localEventService?.dispatchEvent(s)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(t,n,i){return{type:"dataChanged",node:this,oldData:n,newData:t,update:i}}getRowIndexString(){return this.rowIndex==null?(ke("Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid."),null):this.rowPinned==="top"?"t-"+this.rowIndex:this.rowPinned==="bottom"?"b-"+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){let t=new Su(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t}setDataAndId(t,n){let i=j(this.id)?this.createDaemonNode():null,s=this.data;this.data=t,this.updateDataOnDetailNode(),this.setId(n),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,i);let r=this.createDataChangedEvent(t,s,!1);this.localEventService?.dispatchEvent(r)}checkRowSelectable(){let t=this.beans.gos.get("isRowSelectable");this.setRowSelectable(t?t(this):!0)}setRowSelectable(t,n){if(this.selectable!==t){if(this.selectable=t,this.dispatchRowEvent("selectableChanged"),n)return;if(this.beans.gos.get("groupSelectsChildren")){let s=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:s??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(t){let n=this.beans.gos.getRowIdCallback();if(n)if(this.data){let i=this.getGroupKeys(!0);this.id=n({data:this.data,parentKeys:i.length>0?i:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(Su.ID_PREFIX_ROW_GROUP)&&ke(`Row IDs cannot start with ${Su.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`)}else this.id=void 0;else this.id=t}getGroupKeys(t=!1){let n=[],i=this;for(t&&(i=i.parent);i&&i.level>=0;)n.push(i.key),i=i.parent;return n.reverse(),n}isPixelInRange(t){return!j(this.rowTop)||!j(this.rowHeight)?!1:t>=this.rowTop&&t<this.rowTop+this.rowHeight}updateIfDifferent(t,n,i){this[t]!==n&&(this[t]=n,this.dispatchRowEvent(i))}setFirstChild(t){this.updateIfDifferent("firstChild",t,"firstChildChanged")}setLastChild(t){this.updateIfDifferent("lastChild",t,"lastChildChanged")}setChildIndex(t){this.updateIfDifferent("childIndex",t,"childIndexChanged")}setRowTop(t){this.oldRowTop=this.rowTop,this.rowTop!==t&&(this.rowTop=t,this.dispatchRowEvent("topChanged"),this.setDisplayed(t!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setDisplayed(t){this.updateIfDifferent("displayed",t,"displayedChanged")}setDragging(t){this.updateIfDifferent("dragging",t,"draggingChanged")}setHighlighted(t){this.updateIfDifferent("highlighted",t,"rowHighlightChanged")}setHovered(t){this.hovered!==t&&(this.hovered=t)}isHovered(){return this.hovered}setAllChildrenCount(t){this.updateIfDifferent("allChildrenCount",t,"allChildrenCountChanged")}setMaster(t){this.master!==t&&(this.master&&!t&&(this.expanded=!1),this.master=t,this.dispatchRowEvent("masterChanged"))}setGroup(t){this.group!==t&&(this.group&&!t&&(this.expanded=!1),this.group=t,this.updateHasChildren(),this.checkRowSelectable(),this.dispatchRowEvent("groupChanged"))}setRowHeight(t,n=!1){this.rowHeight=t,this.rowHeightEstimated=n,this.dispatchRowEvent("heightChanged")}setRowAutoHeight(t,n){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[n.getId()]=t,t!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=Xn(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let t=!1,n=!0,i=0,s=this.__autoHeights;if(s==null||(this.beans.visibleColsService.getAllAutoHeightCols().forEach(a=>{let l=s[a.getId()];if(l==null)if(this.beans.columnModel.isColSpanActive()){let c=[];switch(a.getPinned()){case"left":c=this.beans.visibleColsService.getLeftColsForRow(this);break;case"right":c=this.beans.visibleColsService.getRightColsForRow(this);break;case null:c=this.beans.columnViewportService.getColsWithinViewport(this);break}if(c.includes(a)){t=!0;return}l=-1}else{t=!0;return}else n=!1;l>i&&(i=l)}),t)||((n||i<10)&&(i=this.beans.gos.getRowHeightForNode(this).height),i==this.rowHeight))return;this.setRowHeight(i);let o=this.beans.rowModel;o.onRowHeightChangedDebounced&&o.onRowHeightChangedDebounced()}setRowIndex(t){this.updateIfDifferent("rowIndex",t,"rowIndexChanged")}setUiLevel(t){this.updateIfDifferent("uiLevel",t,"uiLevelChanged")}setExpanded(t,n,i){if(this.expanded===t)return;this.expanded=t,this.dispatchRowEvent("expandedChanged");let s=se(B({},this.createGlobalRowEvent("rowGroupOpened")),{expanded:t,event:n||null});this.beans.rowNodeEventThrottle.dispatchExpanded(s,i),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(t){return this.beans.gos.addGridCommonParams({type:t,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}setDataValue(t,n,i){let r=typeof t!="string"?t:this.beans.columnModel.getCol(t)??this.beans.columnModel.getColDefCol(t),o=this.getValueFromValueService(r);if(this.beans.gos.get("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(r,o,n,i),!1;let a=this.beans.valueService.setValue(this,r,n,i);return this.dispatchCellChangedEvent(r,n,o),this.checkRowSelectable(),a}getValueFromValueService(t){let n=this.leafGroup&&this.beans.columnModel.isPivotMode(),i=this.group&&this.expanded&&!this.footer&&!n,s=!1,r=this.beans.gos.get("groupTotalRow")??this.beans.gos.get("groupIncludeFooter");typeof r!="function"?s=!!r:s=!!(this.beans.gos.getCallback("groupTotalRow")??this.beans.gos.getCallback("groupIncludeFooter"))({node:this});let o=this.beans.gos.get("groupSuppressBlankHeader"),a=i&&s&&!o;return this.beans.valueService.getValue(t,this,!1,a)}dispatchEventForSaveValueReadOnly(t,n,i,s){let r=this.beans.gos.addGridCommonParams({type:"cellEditRequest",event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:t,colDef:t.getColDef(),data:this.data,node:this,oldValue:n,newValue:i,value:i,source:s});this.beans.eventService.dispatchEvent(r)}setGroupValue(t,n){let i=this.beans.columnModel.getCol(t);Pe(this.groupData)&&(this.groupData={});let s=i.getColId(),r=this.groupData[s];r!==n&&(this.groupData[s]=n,this.dispatchCellChangedEvent(i,n,r))}setAggData(t){let n=this.aggData;if(this.aggData=t,this.localEventService){let i=s=>{let r=this.aggData?this.aggData[s]:void 0,o=n?n[s]:void 0;if(r===o)return;let a=this.beans.columnModel.getCol(s);a&&this.dispatchCellChangedEvent(a,r,o)};for(let s in this.aggData)i(s);for(let s in t)s in this.aggData||i(s)}}updateHasChildren(){let t=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(this.beans.gos.isRowModelType("serverSide")){let i=this.beans.gos.get("treeData"),s=this.beans.gos.get("isServerSideGroup");t=!this.stub&&!this.footer&&(i?!!s&&s(this.data):!!this.group)}t!==this.__hasChildren&&(this.__hasChildren=!!t,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}isEmptyRowGroupNode(){return(this.group&&pn(this.childrenAfterGroup))??!1}dispatchCellChangedEvent(t,n,i){let s={type:"cellChanged",node:this,column:t,newValue:n,oldValue:i};this.localEventService?.dispatchEvent(s)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(t){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(n=>n.depthFirstSearch(t)),t(this)}calculateSelectedFromChildren(){let t=!1,n=!1,i=!1;if(!this.childrenAfterGroup?.length)return this.selectable?this.selected:null;for(let s=0;s<this.childrenAfterGroup.length;s++){let r=this.childrenAfterGroup[s],o=r.isSelected();if(!r.selectable){let a=r.calculateSelectedFromChildren();if(a===null)continue;o=a}switch(o){case!0:t=!0;break;case!1:n=!0;break;default:i=!0;break}}if(!(i||t&&n))return t?!0:n?!1:this.selectable?this.selected:null}setSelectedInitialValue(t){this.selected=t}dispatchRowEvent(t){let n={type:t,node:this};this.localEventService?.dispatchEvent(n)}selectThisNode(t,n,i="api"){let s=!this.selectable&&t,r=this.selected===t;if(s||r)return!1;this.selected=t,this.dispatchRowEvent("rowSelected");let o=this.sibling;o&&o.footer&&o.localEventService&&o.dispatchRowEvent("rowSelected");let a=se(B({},this.createGlobalRowEvent("rowSelected")),{event:n||null,source:i});return this.beans.eventService.dispatchEvent(a),!0}setSelected(t,n=!1,i="api"){if(typeof i=="boolean"){G("since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:t,clearSelection:n,rangeSelect:!1,source:i})}setSelectedParams(t){return this.rowPinned?(G("cannot select pinned rows"),0):this.id===void 0?(G("cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(se(B({},t),{nodes:[this.footer?this.sibling:this]}))}isRowPinned(){return this.rowPinned==="top"||this.rowPinned==="bottom"}isParentOfNode(t){let n=this.parent;for(;n;){if(n===t)return!0;n=n.parent}return!1}addEventListener(t,n){this.localEventService||(this.localEventService=new Mu),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.localEventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new hR(this.beans.frameworkOverrides));let i=this.frameworkEventListenerService?.wrap(n)??n;this.localEventService.addEventListener(t,i)}removeEventListener(t,n){if(!this.localEventService)return;let i=this.frameworkEventListenerService?.unwrap(n)??n;this.localEventService.removeEventListener(t,i),this.localEventService.noRegisteredListenersExist()&&(this.localEventService=null)}onMouseEnter(){this.dispatchRowEvent("mouseEnter")}onMouseLeave(){this.dispatchRowEvent("mouseLeave")}getFirstChildOfFirstChild(t){let n=this,i=!0,s=!1,r=null;for(;i&&!s;){let o=n.parent;j(o)&&n.firstChild?o.rowGroupColumn===t&&(s=!0,r=o):i=!1,n=o}return s?r:null}isFullWidthCell(){if(this.detail)return!0;let t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this}):!1}getRoute(){if(this.key==null)return;let t=[],n=this;for(;n&&n.key!=null;)t.push(n.key),n=n.parent;return t.reverse()}createFooter(){if(this.sibling)return;let t=new Set(["eventService","__objectId","sticky"]),n=new Su(this.beans);Object.keys(this).forEach(i=>{t.has(i)||(n[i]=this[i])}),n.footer=!0,n.setRowTop(null),n.setRowIndex(null),n.oldRowTop=null,n.id="rowGroupFooter_"+this.id,n.sibling=this,this.sibling=n}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}};Sf.ID_PREFIX_ROW_GROUP="row-group-";Sf.ID_PREFIX_TOP_PINNED="t-";Sf.ID_PREFIX_BOTTOM_PINNED="b-";Sf.OBJECT_ID_SEQUENCE=0;var zr=Sf,Eee=class extends k{constructor(){super(...arguments),this.beanName="filterManager",this.advancedFilterModelUpdateQueue=[]}wireBeans(e){this.columnModel=e.columnModel,this.dataTypeService=e.dataTypeService,this.quickFilterService=e.quickFilterService,this.advancedFilterService=e.advancedFilterService,this.columnFilterService=e.columnFilterService}postConstruct(){this.addManagedEventListeners({columnValueChanged:this.refreshFiltersForAggregations.bind(this),columnPivotChanged:this.refreshFiltersForAggregations.bind(this),columnPivotModeChanged:this.refreshFiltersForAggregations.bind(this),newColumnsLoaded:this.updateAdvancedFilterColumns.bind(this),columnVisible:this.updateAdvancedFilterColumns.bind(this),advancedFilterEnabledChanged:({enabled:e})=>this.onAdvancedFilterEnabledChanged(e),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",e=>this.setAdvancedFilterModel(e.currentValue)),this.quickFilterService&&this.addManagedListeners(this.quickFilterService,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})})}isExternalFilterPresentCallback(){let e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"?e({}):!1}doesExternalFilterPass(e){let t=this.gos.get("doesExternalFilterPass");return typeof t=="function"?t(e):!1}setFilterModel(e,t="api"){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}this.columnFilterService?.setFilterModel(e,t)}getFilterModel(){return this.columnFilterService?.getFilterModel()??{}}isColumnFilterPresent(){return!!this.columnFilterService?.isColumnFilterPresent()}isAggregateFilterPresent(){return!!this.columnFilterService?.isAggregateFilterPresent()}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){e?this.columnFilterService?.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):this.advancedFilterService?.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){return!!this.advancedFilterService?.isEnabled()}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}resetQuickFilterCache(){this.quickFilterService?.resetQuickFilterCache()}refreshFiltersForAggregations(){this.gos.getGroupAggFiltering()&&this.onFilterChanged()}onFilterChanged(e={}){let{source:t,additionalEventAttributes:n,columns:i=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.columnFilterService?this.columnFilterService.updateBeforeFilterChanged(e):Ii.resolve()).then(()=>{let s={source:t,type:"filterChanged",columns:i};n&&qi(s,n),this.eventService.dispatchEvent(s),this.columnFilterService?.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){return!!this.columnFilterService?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilterService?.isQuickFilterPresent()}updateAggFiltering(){this.aggFiltering=!!this.gos.getGroupAggFiltering()}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.columnFilterService.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.columnFilterService.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))}isFilterActive(e){return!!this.columnFilterService?.isFilterActive(e)}getOrCreateFilterWrapper(e){return this.columnFilterService?.getOrCreateFilterWrapper(e)??null}getDefaultFloatingFilter(e){return this.columnFilterService.getDefaultFloatingFilter(e)}createFilterParams(e,t){return this.columnFilterService.createFilterParams(e,t)}isFilterAllowed(e){return this.isAdvancedFilterEnabled()?!1:!!this.columnFilterService?.isFilterAllowed(e)}getFloatingFilterCompDetails(e,t){return this.columnFilterService?.getFloatingFilterCompDetails(e,t)}getCurrentFloatingFilterParentModel(e){return this.columnFilterService?.getCurrentFloatingFilterParentModel(e)}destroyFilter(e,t="api"){this.columnFilterService?.destroyFilter(e,t)}areFilterCompsDifferent(e,t){return!!this.columnFilterService?.areFilterCompsDifferent(e,t)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){if(this.isAdvancedFilterEnabled()){if(this.dataTypeService?.isPendingInference()){this.advancedFilterModelUpdateQueue.push(e);return}this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"})}}toggleAdvancedFilterBuilder(e,t){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder(t,e)}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvancedFilterEnabled()?!1:!!this.columnFilterService?.hasFloatingFilters()}getFilterInstance(e,t){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}return this.columnFilterService?.getFilterInstance(e,t)}getColumnFilterInstance(e){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve(void 0)):this.columnFilterService?.getColumnFilterInstance(e)??Promise.resolve(void 0)}warnAdvancedFilters(){G("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(e){this.advancedFilterService?.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advancedFilterModelUpdateQueue.forEach(e=>this.setAdvancedFilterModel(e)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(e){return this.columnFilterService?.getColumnFilterModel(e)}setColumnFilterModel(e,t){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve()):this.columnFilterService?.setColumnFilterModel(e,t)??Promise.resolve()}},Dee=class extends Ve{constructor(e,t){super('<div class="ag-filter"></div>'),this.column=e,this.source=t,this.filterWrapper=null}wireBeans(e){this.filterManager=e.filterManager,this.columnModel=e.columnModel}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){return this.filterWrapper?.filterPromise??null}afterInit(){return this.filterWrapper?.filterPromise?.then(()=>{})??Ii.resolve()}afterGuiAttached(e){this.filterWrapper?.filterPromise?.then(t=>{t?.afterGuiAttached?.(e)})}afterGuiDetached(){this.filterWrapper?.filterPromise?.then(e=>{e?.afterGuiDetached?.()})}createFilter(e){let{column:t,source:n}=this;this.filterWrapper=this.filterManager?.getOrCreateFilterWrapper(t)??null,this.filterWrapper?.filterPromise&&this.filterWrapper.filterPromise.then(i=>{let s=i.getGui();if(j(s)||G(`getGui method from filter returned ${s}; it should be a DOM element.`),this.appendChild(s),e){let r={type:"filterOpened",column:t,source:n,eGui:this.getGui()};this.eventService.dispatchEvent(r)}})}onFilterDestroyed(e){(e.source==="api"||e.source==="paramsUpdated")&&e.column.getId()===this.column.getId()&&this.columnModel.getColDefCol(this.column)&&(xn(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},UB="ag-resizer-wrapper",Ree=`<div class="${UB}">
        <div data-ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>
        <div data-ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>
        <div data-ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>
        <div data-ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>
        <div data-ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>
        <div data-ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>
        <div data-ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>
        <div data-ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>
    </div>`,Tee=class extends k{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupService=e.popupService,this.resizeObserverService=e.resizeObserverService,this.dragService=e.dragService}center(){let{clientHeight:e,clientWidth:t}=this.offsetParent,n=t/2-this.getWidth()/2,i=e/2-this.getHeight()/2;this.offsetElement(n,i)}initialisePosition(){if(this.positioned)return;let{centered:e,forcePopupParentAsOffsetParent:t,minWidth:n,width:i,minHeight:s,height:r,x:o,y:a}=this.config;this.offsetParent||this.setOffsetParent();let l=0,c=0,u=bs(this.element);if(u){let h=this.findBoundaryElement(),f=window.getComputedStyle(h);if(f.minWidth!=null){let g=h.offsetWidth-this.element.offsetWidth;c=parseInt(f.minWidth,10)-g}if(f.minHeight!=null){let g=h.offsetHeight-this.element.offsetHeight;l=parseInt(f.minHeight,10)-g}}if(this.minHeight=s||l,this.minWidth=n||c,i&&this.setWidth(i),r&&this.setHeight(r),(!i||!r)&&this.refreshSize(),e)this.center();else if(o||a)this.offsetElement(o,a);else if(u&&t){let h=this.boundaryEl,f=!0;if(h||(h=this.findBoundaryElement(),f=!1),h){let g=parseFloat(h.style.top),v=parseFloat(h.style.left);f?this.offsetElement(isNaN(v)?0:v,isNaN(g)?0:g):this.setPosition(v,g)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;let n=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(n),this.moveElementDragListener=n):(this.dragService.removeDragSource(n),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{let i=!!e[t],s=this.getResizerElement(t),r={dragStartPixels:0,eElement:s,onDragStart:o=>this.onResizeStart(o,t),onDragging:this.onResize.bind(this),onDragStop:o=>this.onResizeEnd(o,t)};(i||!this.isAlive()&&!i)&&(i?(this.dragService.addDragSource(r),this.resizeListeners.push(r),s.style.pointerEvents="all"):s.style.pointerEvents="none",this.resizable[t]=i)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";let{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){let{popup:t}=this.config,n=this.element,i=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)df(n,e),e=EB(n),i=!0;else if(e=Math.max(this.minHeight,e),this.positioned){let s=this.getAvailableHeight();s&&e>s&&(e=s)}this.getHeight()!==e&&(i?(n.style.maxHeight="unset",n.style.minHeight="unset"):t?df(n,e):(n.style.height=`${e}px`,n.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){let{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();let{clientHeight:n}=this.offsetParent;if(!n)return null;let i=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),r=e?this.position.y:i.top,o=e?0:s.top,a=0;if(t){let c=this.element.parentElement;if(c){let{bottom:u}=c.getBoundingClientRect();a=u-i.bottom}}return n+o-r-a}getWidth(){return this.element.offsetWidth}setWidth(e){let t=this.element,{popup:n}=this.config,i=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)_s(t,e),e=bC(t),i=!0;else if(this.positioned){e=Math.max(this.minWidth,e);let{clientWidth:s}=this.offsetParent,r=n?this.position.x:this.element.getBoundingClientRect().left;s&&e+r>s&&(e=s-r)}this.getWidth()!==e&&(i?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?_s(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,t=0){let{forcePopupParentAsOffsetParent:n}=this.config,i=n?this.boundaryEl:this.element;i&&(this.popupService.positionPopup({ePopup:i,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(i.style.left),parseFloat(i.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;let t=()=>{let n=this.getAvailableHeight();this.element.style.setProperty("max-height",`${n}px`)};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){let{e:t,isLeft:n,isTop:i,anywhereWithin:s,topBuffer:r}=e,o=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y,l=this.shouldSkipX(t,!!n,!!s,o)?0:o,c=this.shouldSkipY(t,!!i,r,a)?0:a;return{movementX:l,movementY:c}}shouldSkipX(e,t,n,i){let s=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:s.left,l=a<=0&&r.left>=e.clientX||r.right<=e.clientX&&r.right<=o.right;return l?!0:(t?l=i<0&&e.clientX>a+r.left||i>0&&e.clientX<a+r.left:n?l=i<0&&e.clientX>o.right||i>0&&e.clientX<a+r.left:l=i<0&&e.clientX>o.right||i>0&&e.clientX<o.right,l)}shouldSkipY(e,t,n=0,i){let s=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:s.top,l=a<=0&&r.top>=e.clientY||r.bottom<=e.clientY&&r.bottom<=o.bottom;return l?!0:(t?l=i<0&&e.clientY>a+r.top+n||i>0&&e.clientY<a+r.top:l=i<0&&e.clientY>o.bottom||i>0&&e.clientY<o.bottom,l)}createResizeMap(){let e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[data-ref=eTopLeftResizer]")},top:{element:e.querySelector("[data-ref=eTopResizer]")},topRight:{element:e.querySelector("[data-ref=eTopRightResizer]")},right:{element:e.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:e.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:e.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;let e=this.element;if(!e)return;let n=new DOMParser().parseFromString(Ree,"text/html").body;e.appendChild(n.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;let e=this.element.querySelector(`.${UB}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");let{popup:n,forcePopupParentAsOffsetParent:i}=this.config;!n&&!i&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){let t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(n=>!n.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){let e=this.getSiblings()||[],t=0,n=0;for(let i=0;i<e.length;i++){let s=e[i],r=!!s.style.flex&&s.style.flex!=="0 0 auto";if(s===this.element)continue;let o=this.minHeight||0,a=this.minWidth||0;if(r){let l=window.getComputedStyle(s);l.minHeight&&(o=parseInt(l.minHeight,10)),l.minWidth&&(a=parseInt(l.minWidth,10))}else o=s.offsetHeight,a=s.offsetWidth;t+=o,n+=a}return{height:t,width:n}}applySizeToSiblings(e){let t=null,n=this.getSiblings();if(n){for(let i=0;i<n.length;i++){let s=n[i];s!==t&&(e?s.style.height=`${s.offsetHeight}px`:s.style.width=`${s.offsetWidth}px`,s.style.flex="0 0 auto",s===this.element&&(t=n[i+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;let{popup:t,forcePopupParentAsOffsetParent:n}=this.config,{isTop:i,isRight:s,isBottom:r,isLeft:o}=this.currentResizer,a=s||o,l=r||i,{movementX:c,movementY:u}=this.calculateMouseMovement({e,isLeft:o,isTop:i}),h=this.position.x,f=this.position.y,g=0,v=0;if(a&&c){let y=o?-1:1,C=this.getWidth(),E=C+c*y,I=!1;o&&(g=C-E,(h+g<=0||E<=this.minWidth)&&(I=!0,g=0)),I||this.setWidth(E)}if(l&&u){let y=i?-1:1,C=this.getHeight(),E=C+u*y,I=!1;i?(v=C-E,(f+v<=0||E<=this.minHeight)&&(I=!0,v=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&C<E&&this.getMinSizeOfSiblings().height+E>this.element.parentElement.offsetHeight&&(I=!0),I||this.setHeight(E)}this.updateDragStartPosition(e.clientX,e.clientY),((t||n)&&g||v)&&this.offsetElement(h+g,f+v)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){let e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;let{x:t,y:n}=this.position,i;this.config.calculateTopBuffer&&(i=this.config.calculateTopBuffer());let{movementX:s,movementY:r}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:i});this.offsetElement(t+s,n+r),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){let e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},WB=class jB extends k{constructor(t,n={}){super(),this.eFocusableElement=t,this.callbacks=n,this.callbacks=B({shouldStopEventPropagation:()=>!1,onTabKeyDown:i=>{if(i.defaultPrevented)return;let s=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,i.shiftKey);s&&(s.focus(),i.preventDefault())}},n)}wireBeans(t){this.focusService=t.focusService}postConstruct(){this.eFocusableElement.classList.add(jB.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedElementListeners(this.eFocusableElement,{focusin:this.callbacks.onFocusIn}),this.callbacks.onFocusOut&&this.addManagedElementListeners(this.eFocusableElement,{focusout:this.callbacks.onFocusOut})}addKeyDownListeners(t){this.addManagedElementListeners(t,{keydown:n=>{if(!(n.defaultPrevented||$o(n))){if(this.callbacks.shouldStopEventPropagation(n)){Ru(n);return}n.key===N.TAB?this.callbacks.onTabKeyDown(n):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(n)}}})}};WB.FOCUS_MANAGED_CLASS="ag-focus-managed";var yl=WB,zB={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function IR(e,t){return IC(e)?(e.debounceMs!=null&&G("debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:t}function IC(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}var Iee=class extends Ve{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=Z,this.buttonListeners=[]}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.resetTemplate(),this.createManagedBean(new yl(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new Tee(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);let n=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" data-ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(n,this.getAgComponents(),e),t=this.getGui(),t&&t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.providedFilterParams=e,this.applyActive=IC(e),this.resetButtonsPanel()}updateParams(e){this.providedFilterParams=e,this.applyActive=IC(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(){let{buttons:e}=this.providedFilterParams,t=e&&e.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(xn(this.eButtonsPanel),this.buttonListeners.forEach(s=>s()),this.buttonListeners=[]):t&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!t){this.eButtonsPanel&&Qi(this.eButtonsPanel);return}let n=document.createDocumentFragment(),i=s=>{let r,o;switch(s){case"apply":r=this.translate("applyFilter"),o=c=>this.onBtApply(!1,!1,c);break;case"clear":r=this.translate("clearFilter"),o=()=>this.onBtClear();break;case"reset":r=this.translate("resetFilter"),o=()=>this.onBtReset();break;case"cancel":r=this.translate("cancelFilter"),o=c=>{this.onBtCancel(c)};break;default:G("Unknown button type specified");return}let l=Iu(`<button
                    type="${s==="apply"?"submit":"button"}"
                    data-ref="${s}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${r}
                </button>`);this.buttonListeners.push(...this.addManagedElementListeners(l,{click:o})),n.append(l)};e.forEach(s=>i(s)),this.eButtonsPanel.append(n),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){let e=IR(this.providedFilterParams,this.getDefaultDebounceMs()),t=Xn(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){let n=()=>{this.onUiChanged(!1,"prevent"),t?.()};e!=null?this.setModelIntoUi(e).then(n):this.resetUiToDefaults().then(n)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){let t=this.getModelFromUi();if(!this.isModelValid(t))return!1;let n=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(n,t)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,t=!1,n){n&&n.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:"columnFilter"});let{closeOnApply:i}=this.providedFilterParams;i&&this.applyActive&&!e&&!t&&this.close(n)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;let t=e,n=t&&t.key,i;(n==="Enter"||n==="Space")&&(i={keyboardEvent:t}),this.hidePopup(i),this.hidePopup=null}onUiChanged(e=!1,t){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){let n=this.isModelValid(this.getModelFromUi()),i=this.queryForHtmlElement('[data-ref="applyFilterButton"]');i&&Cf(i,!n)}e&&!t||t==="immediately"?this.onBtApply(e):(!this.applyActive&&!t||t==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){if(!this.positionableFeature||e==="toolPanel")return;let t=e==="floatingFilter"||e==="columnFilter",{positionableFeature:n,gos:i}=this;t?(n.restoreLastSize(),n.setResizable(i.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}refresh(e){return this.providedFilterParams=e,!0}destroy(){let e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,zB[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}},Aee=class extends DR{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}},Mee=class extends Ve{constructor(e="default",t=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){let e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),!this.unFocusable&&this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){let t=e.key;switch(t){case N.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{let n=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(n)}break;case N.DOWN:case N.UP:e.preventDefault(),this.navigate(t);break;case N.PAGE_DOWN:case N.PAGE_UP:case N.PAGE_HOME:case N.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}navigate(e){let t=e===N.DOWN,n;if(!this.highlightedEl)n=this.itemEls[t?0:this.itemEls.length-1];else{let s=this.itemEls.indexOf(this.highlightedEl)+(t?1:-1);s=Math.min(Math.max(s,0),this.itemEls.length-1),n=this.itemEls[s]}this.highlightItem(n)}navigateToPage(e){if(!this.highlightedEl||this.itemEls.length===0)return;let t=this.itemEls.indexOf(this.highlightedEl),n=this.options.length-1,i=this.itemEls[0].clientHeight,s=Math.floor(this.getGui().clientHeight/i),r=-1;e===N.PAGE_HOME?r=0:e===N.PAGE_END?r=n:e===N.PAGE_DOWN?r=Math.min(t+s,n):e===N.PAGE_UP&&(r=Math.max(t-s,0)),r!==-1&&this.highlightItem(this.itemEls[r])}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){let{value:t,text:n}=e,i=n||t;return this.options.push({value:t,text:i}),this.renderOption(t,i),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{Qi(e)}),this.itemEls=[]}updateIndices(){let e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((t,n)=>{uZ(t,n+1),cZ(t,e.length)})}renderOption(e,t){let n=this.gos.getDocument(),i=n.createElement("div");ai(i,"option"),i.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);let s=n.createElement("span");i.appendChild(s),s.textContent=t,this.unFocusable||(i.tabIndex=-1),this.itemEls.push(i),this.addManagedListeners(i,{mouseover:()=>this.highlightItem(i),mousedown:r=>{r.preventDefault(),r.stopPropagation(),this.setValue(e)}}),this.createManagedBean(new Pu({getTooltipValue:()=>t,getGui:()=>i,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>s.scrollWidth>s.clientWidth})),this.getGui().appendChild(i)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;let n=this.options.findIndex(i=>i.value===e);if(n!==-1){let i=this.options[n];this.value=i.value,this.displayValue=i.text,this.highlightItem(this.itemEls[n]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();let e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!bs(e))return;this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(this.activeClass),_C(this.highlightedEl,!0);let t=this.getGui(),{scrollTop:n,clientHeight:i}=t,{offsetTop:s,offsetHeight:r}=e;(s+r>n+i||s<n)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!bs(this.highlightedEl)||(this.highlightedEl.classList.remove(this.activeClass),_C(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},Pee=class extends NB{constructor(e){if(super(e,e?.template||`
            <div class="ag-picker-field" role="presentation">
                <div data-ref="eLabel"></div>
                    <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>
                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
                </div>
            </div>`,e?.agComponents||[],e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=Z,this.eWrapper=Z,this.eDisplayField=Z,this.eIcon=Z,this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;let{pickerGap:t,maxPickerHeight:n,variableWidth:i,minPickerWidth:s,maxPickerWidth:r}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!i,n!=null&&this.setPickerMaxHeight(n),s!=null&&this.setPickerMinWidth(s),r!=null&&this.setPickerMaxWidth(r)}wireBeans(e){this.popupService=e.popupService}postConstruct(){super.postConstruct(),this.setupAria();let e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);let t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});let{pickerIcon:n,inputWidth:i}=this.config;if(n){let s=Ai(n,this.gos);s&&this.eIcon.appendChild(s)}i!=null&&this.setInputWidth(i)}setupAria(){let e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),SC(e,!1),this.ariaRole&&ai(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){let t=this.getFocusableElement();if(t!==this.eWrapper&&e?.target===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case N.UP:case N.DOWN:case N.ENTER:case N.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case N.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());let e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){let e=this.gos.getDocument(),t=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));let n=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:i,pickerAriaLabelValue:s,modalPicker:r=!0}=this.config,o={modal:r,eChild:t,closeOnEsc:!0,closedCallback:()=>{let g=this.gos.getActiveDomElement(),v=!g||g===e.body;this.beforeHidePicker(),v&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:n(i,s)},a=this.popupService.addPopup(o),{maxPickerHeight:l,minPickerWidth:c,maxPickerWidth:u,variableWidth:h}=this;h?(c&&(t.style.minWidth=c),t.style.width=_R(bC(this.eWrapper)),u&&(t.style.maxWidth=u)):TC(t,u??bC(this.eWrapper));let f=l??`${SR(this.popupService.getPopupParent())}px`;return t.style.setProperty("max-height",f),t.style.position="absolute",this.alignPickerToComponent(),a.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;let{pickerType:e}=this.config,{pickerGap:t}=this,n=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:e,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:n,keepWithinBounds:!0,nudgeY:t})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);let e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;let t=this.getAriaElement();SC(t,e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){this.pickerComponent?.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(e){return TC(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},AR=class extends Pee{constructor(e){super(B({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox"},e))}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");let{options:e,value:t,placeholder:n}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),n&&t==null&&(this.eDisplayField.textContent=n),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new Mee("select",!0)),this.listComponent.setParentComponent(this);let e=this.listComponent.getAriaElement(),t=`ag-select-list-${this.listComponent.getCompId()}`;e.setAttribute("id",t),vZ(this.getAriaElement(),e),this.listComponent.addManagedListeners(this.listComponent,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})}}),this.listComponent.addManagedListeners(this.listComponent,{fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){let{key:t}=e;switch(t===N.TAB&&this.hidePicker(),t){case N.ENTER:case N.UP:case N.DOWN:case N.PAGE_UP:case N.PAGE_DOWN:case N.PAGE_HOME:case N.PAGE_END:e.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(e):super.onKeyDown(e);break;case N.ESCAPE:super.onKeyDown(e);break}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){return this.listComponent?.clearOptions(),this}setValue(e,t,n){if(this.value===e||!this.listComponent)return this;if(n||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue())return this;let s=this.listComponent.getDisplayValue();return s==null&&this.config.placeholder&&(s=this.config.placeholder),this.eDisplayField.textContent=s,this.setTooltip({newTooltipText:s??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,t)}destroy(){this.listComponent&&(this.listComponent=this.destroyBean(this.listComponent)),super.destroy()}},Fee={selector:"AG-SELECT",component:AR},$B=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(e=>{if(typeof e=="string")return;let t=[["displayKey"],["displayName"],["predicate","test"]],n=i=>i.some(s=>e[s]!=null)?!0:(G(`ignoring FilterOptionDef as it doesn't contain one of '${i}'`),!1);if(!t.every(n)){this.filterOptions=this.filterOptions.filter(i=>i===e)||[];return}this.customFilterOptions[e.displayKey]=e})}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){let t=this.filterOptions[0];typeof t=="string"?this.defaultOption=t:t.displayKey?this.defaultOption=t.displayKey:G("invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else G("no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}},qB=class extends Iee{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){let t=this.optionsFactory.getCustomOption(e);if(t){let{numberOfInputs:i}=t;return i??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,n)=>{n===0?t.setValue(e,!0):t.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){let e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;let n=!e.operator,i=!t.operator;if(!n&&i||n&&!i)return!1;let r;if(n){let o=e,a=t;r=this.areSimpleModelsEqual(o,a)}else{let o=e,a=t;r=o.operator===a.operator&&vl(o.conditions,a.conditions,(l,c)=>this.areSimpleModelsEqual(l,c))}return r}shouldRefresh(e){let t=this.getModel(),n=t?t.conditions??[t]:null,i=e.filterOptions?.map(r=>typeof r=="string"?r:r.displayKey)??this.getDefaultFilterOptions();return!(!(!n||n.every(r=>i.find(o=>o===r.type)!==void 0))||typeof e.maxNumConditions=="number"&&n&&n.length>e.maxNumConditions)}refresh(e){return!this.shouldRefresh(e)||!super.refresh(e)?!1:(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){let n=e,i=n.conditions;i==null&&(i=[],G("Filter model is missing 'conditions'"));let s=this.validateAndUpdateConditions(i),r=this.getNumConditions();if(s<r)this.removeConditionsAndOperators(s);else if(s>r)for(let a=r;a<s;a++)this.createJoinOperatorPanel(),this.createOption();let o=n.operator==="OR";this.eJoinOperatorsAnd.forEach(a=>a.setValue(!o,!0)),this.eJoinOperatorsOr.forEach(a=>a.setValue(o,!0)),i.forEach((a,l)=>{this.eTypes[l].setValue(a.type,!0),this.setConditionIntoUi(a,l)})}else{let n=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(n.type,!0),this.setConditionIntoUi(n,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),Ii.resolve()}validateAndUpdateConditions(e){let t=e.length;return t>this.maxNumConditions&&(e.splice(this.maxNumConditions),G('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),t=this.maxNumConditions),t}doesFilterPass(e){let t=this.getModel();if(t==null)return!0;let{operator:n}=t,i=[];if(n){let r=t;i.push(...r.conditions??[])}else i.push(t);return i[n&&n==="OR"?"some":"every"](r=>this.individualConditionPasses(e,r))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new $B,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){this.maxNumConditions=e.maxNumConditions??2,this.maxNumConditions<1&&(G('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=e.numAlwaysVisibleConditions??1,this.numAlwaysVisibleConditions<1&&(G('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(G('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){let e=this.createManagedBean(new AR);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());let t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);let n=this.getNumConditions()-1;this.forEachPositionInput(n,i=>this.resetInput(i)),this.addChangedListeners(e,n)}createJoinOperatorPanel(){let e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");let t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),n=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);let i=this.eJoinOperatorPanels.length-1,s=this.joinOperatorId++;this.resetJoinOperatorAnd(t,i,s),this.resetJoinOperatorOr(n,i,s),this.isReadOnly()||(t.onValueChange(this.listener),n.onValueChange(this.listener))}createJoinOperator(e,t,n){let i=this.createManagedBean(new Aee);return e.push(i),i.addCssClass("ag-filter-condition-operator"),i.addCssClass(`ag-filter-condition-operator-${n}`),t.appendChild(i.getGui()),i}getDefaultJoinOperator(e){return e==="AND"||e==="OR"?e:"AND"}createFilterListOptions(){let e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map(t=>typeof t=="string"?this.createBoilerplateListOption(t):this.createCustomListOption(t))}putOptionsIntoDropdown(e){this.filterListOptions.forEach(t=>{e.addOption(t)}),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){let{displayKey:t}=e,n=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:n?this.localeService.getLocaleTextFunc()(n.displayKey,n.displayName):this.translate(t)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){let e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let n=0;n<this.getNumConditions();n++)this.isConditionUiComplete(n)?e=n:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{let n=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<n){this.removeConditionsAndOperators(n+1);let i=e+1,s=n-i;s>0&&this.removeConditionsAndOperators(i,s),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((i,s)=>{let r=this.isConditionDisabled(s,e);i.setDisabled(r||this.filterListOptions.length<=1),s===1&&(Cf(this.eJoinOperatorPanels[0],r),this.eJoinOperatorsAnd[0].setDisabled(r),this.eJoinOperatorsOr[0].setDisabled(r))}),this.eConditionBodies.forEach((i,s)=>{gt(i,this.isConditionBodyVisible(s))});let n=(t??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach(i=>{i.setValue(!n,!0)}),this.eJoinOperatorsOr.forEach(i=>{i.setValue(n,!0)}),this.forEachInput((i,s,r,o)=>{this.setElementDisplayed(i,s<o),this.setElementDisabled(i,this.isConditionDisabled(r,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,t),this.removeElements(this.eConditionBodies,e,t),this.removeValueElements(e,t);let n=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,n,t),this.removeComponents(this.eJoinOperatorsAnd,n,t),this.removeComponents(this.eJoinOperatorsOr,n,t)}removeElements(e,t,n){this.removeItems(e,t,n).forEach(s=>Qi(s))}removeComponents(e,t,n){this.removeItems(e,t,n).forEach(s=>{Qi(s.getGui()),this.destroyBean(s)})}removeItems(e,t,n){return n==null?e.splice(t):e.splice(t,n)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus)if(this.isReadOnly())this.eFilterBody.focus();else{let t=this.getInputs(0)[0];if(!t)return;t instanceof dl&&t.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();let e=this.getModel();this.resetUiToActiveModel(e);let t=-1,n=-1,i=!1,s=this.getJoinOperator();for(let o=this.getNumConditions()-1;o>=0;o--)if(this.isConditionUiComplete(o))t===-1&&(t=o,n=o);else{let a=o>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(o-1),l=o<t;(a||l)&&(this.removeConditionsAndOperators(o,1),i=!0,l&&n--)}let r=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),r=!0),this.shouldAddNewConditionAtEnd(n===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),r=!0),r&&this.updateConditionStatusesAndValues(n,s),i&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=n}getPlaceholderText(e,t){let n=this.translate(e);if(gR(this.filterPlaceholder)){let i=this.filterPlaceholder,s=this.eTypes[t].getValue(),r=this.translate(s);n=i({filterOptionKey:s,filterOption:r,placeholder:n})}else typeof this.filterPlaceholder=="string"&&(n=this.filterPlaceholder);return n}resetPlaceholder(){let e=this.localeService.getLocaleTextFunc();this.forEachInput((t,n,i,s)=>{if(!(t instanceof dl))return;let r=n===0&&s>1?"inRangeStart":n===0?"filterOoo":"inRangeEnd",o=n===0&&s>1?e("ariaFilterFromValue","Filter from value"):n===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(r,i)),t.setInputAriaLabel(o)})}setElementValue(e,t,n){e instanceof dl&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){e instanceof Ve&&gt(e.getGui(),t)}setElementDisabled(e,t){e instanceof Ve&&Cf(e.getGui(),t)}attachElementOnChange(e,t){e instanceof dl&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,n)=>{this.forEachPositionTypeInput(n,t,e)})}forEachPositionInput(e,t){let n=this.getConditionType(e);this.forEachPositionTypeInput(e,n,t)}forEachPositionTypeInput(e,t,n){let i=this.getNumberOfInputs(t),s=this.getInputs(e);for(let r=0;r<s.length;r++){let o=s[r];o!=null&&n(o,r,e,i)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){let t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(n=>n==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){let e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinOperatorsAnd.forEach((t,n)=>this.resetJoinOperatorAnd(t,n,this.joinOperatorId+n)),this.eJoinOperatorsOr.forEach((t,n)=>this.resetJoinOperatorOr(t,n,this.joinOperatorId+n)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),Ii.resolve()}resetType(e){let n=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(n).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,n){this.resetJoinOperator(e,t,this.isDefaultOperator("AND"),this.translate("andCondition"),n)}resetJoinOperatorOr(e,t,n){this.resetJoinOperator(e,t,this.isDefaultOperator("OR"),this.translate("orCondition"),n)}resetJoinOperator(e,t,n,i,s){this.updateJoinOperatorDisabled(e.setValue(n,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${s}`).setLabel(i),t)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t)),this.eJoinOperatorsOr.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t))}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){let n=this.mapValuesFromModel(e);this.forEachInput((i,s,r)=>{r===t&&this.setElementValue(i,n[s]!=null?n[s]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,n,i)=>{this.setElementValue(t,n===0&&i===0?e:null,!0)})}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,n=>{this.attachElementOnChange(n,this.listener)}))}individualConditionPasses(e,t){let n=this.getCellValue(e.node),i=this.mapValuesFromModel(t),s=this.optionsFactory.getCustomOption(t.type),r=this.evaluateCustomFilter(s,i,n);return r??(n==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(i,n,t,e))}evaluateCustomFilter(e,t,n){if(e==null)return;let{predicate:i}=e;if(i!=null&&!t.some(s=>s==null))return i(t,n)}isBlank(e){return e==null||typeof e=="string"&&e.trim().length===0}hasInvalidInputs(){return!1}},KB=class extends qB{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case"equals":case"notEqual":if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case"lessThan":case"lessThanOrEqual":if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case"inRange":if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,n){let i=this.comparator(),s=e[0]!=null?i(e[0],t):0;switch(n.type){case"equals":return s===0;case"notEqual":return s!==0;case"greaterThan":return s>0;case"greaterThanOrEqual":return s>=0;case"lessThan":return s<0;case"lessThanOrEqual":return s<=0;case"inRange":{let r=i(e[1],t);return this.scalarFilterParams.inRangeInclusive?s>=0&&r<=0:s>0&&r<0}case"blank":return this.isBlank(t);case"notBlank":return!this.isBlank(t);default:return G('Unexpected type of filter "'+n.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},xee=65,Oee=67,Nee=86,kee=68,Lee=90,Vee=89;function QB(e){return e.altKey||e.ctrlKey||e.metaKey?!1:e.key.length===1}function aR(e,t,n,i,s){let r=i?i.getColDef().suppressKeyboardEvent:void 0;if(!r)return!1;let o=e.addGridCommonParams({event:t,editing:s,column:i,node:n,data:n.data,colDef:i.getColDef()});return!!(r&&r(o))}function Bee(e,t,n,i){let s=i.getDefinition(),r=s&&s.suppressHeaderKeyboardEvent;if(!j(r))return!1;let o=e.addGridCommonParams({colDef:s,column:i,headerRowIndex:n,event:t});return!!r(o)}function Gee(e){let{keyCode:t}=e,n;switch(t){case xee:n=N.A;break;case Oee:n=N.C;break;case Nee:n=N.V;break;case kee:n=N.D;break;case Lee:n=N.Z;break;case Vee:n=N.Y;break;default:n=e.code}return n}function Hee(e,t=!1){return e===N.DELETE?!0:!t&&e===N.BACKSPACE?wB():!1}var wl=class extends dl{constructor(e,t="ag-text-field",n="text"){super(e,t,n)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){return this.eInput.value!==e&&(this.eInput.value=j(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){let e=new RegExp(`[${this.config.allowedCharPattern}]`),t=n=>{QB(n)&&n.key&&!e.test(n.key)&&n.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:n=>{let i=n.clipboardData?.getData("text");i&&i.split("").some(s=>!e.test(s))&&n.preventDefault()}})}},MC={selector:"AG-INPUT-TEXT-FIELD",component:wl},MR=class extends wl{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListeners(this.eInput,{blur:()=>{let s=parseFloat(this.eInput.value),r=isNaN(s)?"":this.normalizeValue(s.toString());this.value!==r&&this.setValue(r)},wheel:this.onWheel.bind(this)}),this.eInput.step="any";let{precision:e,min:t,max:n,step:i}=this.config;typeof e=="number"&&this.setPrecision(e),typeof t=="number"&&this.setMin(t),typeof n=="number"&&this.setMax(n),typeof i=="number"&&this.setStep(i)}onWheel(e){this.gos.getActiveDomElement()===this.eInput&&e.preventDefault()}normalizeValue(e){if(e==="")return"";this.precision!=null&&(e=this.adjustPrecision(e));let t=parseFloat(e);return this.min!=null&&t<this.min?e=this.min.toString():this.max!=null&&t>this.max&&(e=this.max.toString()),e}adjustPrecision(e,t){if(this.precision==null)return e;if(t){let i=parseFloat(e).toFixed(this.precision);return parseFloat(i).toString()}let n=String(e).split(".");if(n.length>1){if(n[1].length<=this.precision)return e;if(this.precision>0)return`${n[0]}.${n[1].slice(0,this.precision)}`}return n[0]}setMin(e){return this.min===e?this:(this.min=e,jr(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,jr(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,jr(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(n=>super.setValue(n,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,n){if(j(n)){let i=this.isScientificNotation(n);if(i&&this.eInput.validity.valid)return e(n);if(!i){n=this.adjustPrecision(n);let s=this.normalizeValue(n);i=n!=s}if(i)return t(n)}return e(n)}getValue(){if(!this.eInput.validity.valid)return;let e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},Uee={selector:"AG-INPUT-NUMBER-FIELD",component:MR},YB=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],PR=class{constructor(e,t,n){this.localeService=e,this.optionsFactory=t,this.valueFormatter=n}getModelAsString(e){if(!e)return null;let t=e.operator!=null,n=this.localeService.getLocaleTextFunc();if(t){let i=e,r=(i.conditions??[]).map(a=>this.getModelAsString(a)),o=i.operator==="AND"?"andCondition":"orCondition";return r.join(` ${n(o,zB[o])} `)}else{if(e.type==="blank"||e.type==="notBlank")return n(e.type,e.type);{let i=e,s=this.optionsFactory.getCustomOption(i.type),{displayKey:r,displayName:o,numberOfInputs:a}=s||{};return r&&o&&a===0?(n(r,o),o):this.conditionToString(i,s)}}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){return this.valueFormatter?this.valueFormatter(e??null)??"":String(e)}},JB=class extends PR{conditionToString(e,t){let{numberOfInputs:n}=t||{};return e.type=="inRange"||n===2?`${this.formatValue(e.filter)}-${this.formatValue(e.filterTo)}`:e.filter!=null?this.formatValue(e.filter):`${e.type}`}};function lR(e){let{allowedCharPattern:t}=e??{};return t??null}var Wee=class extends KB{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern!==e.allowedCharPattern?!1:super.refresh(e)}mapValuesFromModel(e){let{filter:t,filterTo:n,type:i}=e||{};return[this.processValue(t),this.processValue(n)].slice(0,this.getNumberOfInputs(i))}getDefaultDebounceMs(){return 500}comparator(){return(e,t)=>e===t?0:e<t?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new JB(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return YB}setElementValue(e,t,n){let i=!n&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(t??null):t;super.setElementValue(e,i)}createValueElement(){let e=lR(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),ai(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,n,i){let s=this.createManagedBean(i?new wl({allowedCharPattern:i}):new MR);s.addCssClass(`ag-filter-${n}`),s.addCssClass("ag-filter-filter"),t.push(s),e.appendChild(s.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}getValues(e){let t=[];return this.forEachPositionInput(e,(n,i,s,r)=>{i<r&&t.push(this.processValue(this.stringToFloat(n.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getFilterType(){return"number"}processValue(e){return e==null||isNaN(e)?null:e}stringToFloat(e){if(typeof e=="number")return e;let t=fl(e);return t!=null&&t.trim()===""&&(t=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(t):t==null||t.trim()==="-"?null:parseFloat(t)}createCondition(e){let t=this.getConditionType(e),n={filterType:this.getFilterType(),type:t},i=this.getValues(e);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{if(!t.getInputElement().validity.valid){e=!0;return}}),e}},XB=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],ZB=class extends PR{conditionToString(e,t){let{numberOfInputs:n}=t||{};return e.type=="inRange"||n===2?`${e.filter}-${e.filterTo}`:e.filter!=null?`${e.filter}`:`${e.type}`}};function eG(e){let t=e&&e.trim();return t===""?e:t}var jee=class extends qB{constructor(){super("textFilter"),this.defaultFormatter=e=>e,this.defaultLowercaseFormatter=e=>e==null?null:e.toString().toLowerCase(),this.defaultMatcher=({filterOption:e,value:t,filterText:n})=>{if(n==null)return!1;switch(e){case"contains":return t.indexOf(n)>=0;case"notContains":return t.indexOf(n)<0;case"equals":return t===n;case"notEqual":return t!=n;case"startsWith":return t.indexOf(n)===0;case"endsWith":{let i=t.lastIndexOf(n);return i>=0&&i===t.length-n.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[]}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new ZB(this.localeService,this.optionsFactory)}getTextMatcher(){let e=this.textFilterParams.textCustomComparator;return e?(G("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:t,value:n,filterText:i})=>e(t,n,i)):this.textFilterParams.textMatcher||this.defaultMatcher}createCondition(e){let t=this.getConditionType(e),n={filterType:this.getFilterType(),type:t},i=this.getValuesWithSideEffects(e,!0);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}getFilterType(){return"text"}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){let n=[];return this.forEachPositionInput(e,(i,s,r,o)=>{if(s<o){let a=fl(i.getValue());t&&this.textFilterParams.trimInput&&(a=eG(a)??null,i.setValue(a,!0)),n.push(a)}}),n}getDefaultFilterOptions(){return XB}createValueElement(){let e=document.createElement("div");return e.classList.add("ag-filter-body"),ai(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,n){let i=this.createManagedBean(new wl);i.addCssClass(`ag-filter-${n}`),i.addCssClass("ag-filter-filter"),t.push(i),e.appendChild(i.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}mapValuesFromModel(e){let{filter:t,filterTo:n,type:i}=e||{};return[t||null,n||null].slice(0,this.getNumberOfInputs(i))}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,n,i){let s=e.map(f=>this.formatter(f))||[],r=this.formatter(t),{api:o,colDef:a,column:l,context:c,textFormatter:u}=this.textFilterParams;if(n.type==="blank")return this.isBlank(t);if(n.type==="notBlank")return!this.isBlank(t);let h={api:o,colDef:a,column:l,context:c,node:i.node,data:i.data,filterOption:n.type,value:r,textFormatter:u};return s.some(f=>this.matcher(se(B({},h),{filterText:f})))}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}};function tG(e){if(typeof e=="number")return e;if(typeof e=="string"){let t=parseInt(e);return isNaN(t)?void 0:t}}function nr(e,t=Number.MAX_VALUE){return n=>{let i=tG(n);if(!(i==null||i<e||i>t))return i}}function ff(e,t){return e.toString().padStart(t,"0")}function zee(e,t){let n=[];for(let i=e;i<=t;i++)n.push(i);return n}function $ee(e,t,n){return typeof e!="number"?"":e.toString().replace(".",n).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${t}`)}function Ji(e,t=!0,n="-"){if(!e)return null;let i=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(s=>ff(s,2)).join(n);return t&&(i+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map(s=>ff(s,2)).join(":")),i}var UD=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function pf(e,t="YYYY-MM-DD"){let n=ff(e.getFullYear(),4),i=["January","February","March","April","May","June","July","August","September","October","November","December"],s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r={YYYY:()=>n.slice(n.length-4,n.length),YY:()=>n.slice(n.length-2,n.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>i[e.getMonth()],MMM:()=>i[e.getMonth()].slice(0,3),MM:()=>ff(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${UD(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${UD(e.getDate())}`,DD:()=>ff(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>s[e.getDay()],ddd:()=>s[e.getDay()].slice(0,3),dd:()=>s[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${UD(e.getDay())}`,d:()=>`${e.getDay()}`},o=new RegExp(Object.keys(r).join("|"),"g");return t.replace(o,a=>a in r?r[a]():a)}function oi(e){if(!e)return null;let[t,n]=e.split(" ");if(!t)return null;let i=t.split("-").map(h=>parseInt(h,10));if(i.filter(h=>!isNaN(h)).length!==3)return null;let[s,r,o]=i,a=new Date(s,r-1,o);if(a.getFullYear()!==s||a.getMonth()!==r-1||a.getDate()!==o)return null;if(!n||n==="00:00:00")return a;let[l,c,u]=n.split(":").map(h=>parseInt(h,10));return l>=0&&l<24&&a.setHours(l),c>=0&&c<60&&a.setMinutes(c),u>=0&&u<60&&a.setSeconds(u),a}var nG=class{constructor(e,t,n,i,s){this.alive=!0,this.context=e,this.eParent=i,t.getDateCompDetails(n).newAgStackInstance().then(a=>{if(!this.alive){e.destroyBean(a);return}this.dateComp=a,a&&(i.appendChild(a.getGui()),a.afterGuiAttached&&a.afterGuiAttached(),this.tempValue&&a.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled),s?.(this))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){gt(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(e)}updateParams(e){let t=!1;this.dateComp?.refresh&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(e)!==null&&(t=!0),!t&&this.dateComp?.onParamsUpdated&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(e)!==null&&G("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(e){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(e)}},iG=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],sG=class extends PR{constructor(e,t,n){super(t,n),this.dateFilterParams=e}conditionToString(e,t){let{type:n}=e,{numberOfInputs:i}=t||{},s=n=="inRange"||i===2,r=oi(e.dateFrom),o=oi(e.dateTo),a=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(s){let l=r!==null?pf(r,a):"null",c=o!==null?pf(o,a):"null";return`${l}-${c}`}return r!=null?pf(r,a):`${n}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},LV=1e3,VV=1/0,qee=class extends KB{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=LV,this.maxValidYear=VV,this.minValidDate=null,this.maxValidDate=null}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){let{dateFrom:t,dateTo:n,type:i}=e||{};return[t&&oi(t)||null,n&&oi(n)||null].slice(0,this.getNumberOfInputs(i))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,t){let n=t;return t==null||n<e?-1:n>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);let t=(n,i)=>{if(e[n]!=null)if(isNaN(e[n]))G(`DateFilter ${n} is not a number`);else return e[n]==null?i:Number(e[n]);return i};this.minValidYear=t("minValidYear",LV),this.maxValidYear=t("maxValidYear",VV),this.minValidYear>this.maxValidYear&&G("DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:oi(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:oi(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&G("DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new sG(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){let t=new nG(this.context,this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc(()=>t.destroy()),t}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return iG}createValueElement(){let t=this.gos.getDocument().createElement("div");return t.classList.add("ag-filter-body"),this.createFromToElement(t,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(t,this.eConditionPanelsTo,this.dateConditionToComps,"to"),t}createFromToElement(e,t,n,i){let r=this.gos.getDocument().createElement("div");r.classList.add(`ag-filter-${i}`),r.classList.add(`ag-filter-date-${i}`),t.push(r),e.appendChild(r),n.push(this.createDateCompWrapper(r))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),this.removeItems(this.eConditionPanelsFrom,e,t),this.removeItems(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,n){this.removeItems(e,t,n).forEach(s=>s.destroy())}isValidDateValue(e){if(e===null)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((n,i,s,r)=>{s!==e||!t||i>=r||(t=t&&this.isValidDateValue(n.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}getFilterType(){return"date"}createCondition(e){let t=this.getConditionType(e),n={},i=this.getValues(e);return i.length>0&&(n.dateFrom=Ji(i[0])),i.length>1&&(n.dateTo=Ji(i[1])),B({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:t},n)}resetPlaceholder(){let e=this.localeService.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),n=e("ariaFilterValue","Filter Value");this.forEachInput(i=>{i.setInputPlaceholder(t),i.setInputAriaLabel(n)})}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){let t=[];return this.forEachPositionInput(e,(n,i,s,r)=>{i<r&&t.push(n.getDate())}),t}translate(e){return e==="lessThan"?super.translate("before"):e==="greaterThan"?super.translate("after"):super.translate(e)}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}},FR=class extends k{constructor(e,t,n,i){super(),this.columnOrGroup=e,this.columnOrGroup=e,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=i,this.beans=n}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?xe(this.colsSpanning):this.columnOrGroup}postConstruct(){let e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){let e=this.beans.gos.get("suppressColumnMoveAnimation"),t=j(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){let e=this.getColumnOrGroup(),t=e.getLeft(),n=e.getOldLeft(),i=this.modifyLeftForPrintLayout(e,n),s=this.modifyLeftForPrintLayout(e,t);this.setLeft(i),this.actualLeft=s,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===s&&this.setLeft(s)})}onLeftChanged(){let e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){if(!this.beans.gos.isDomLayout("print")||e.getPinned()==="left")return t;let i=this.beans.visibleColsService.getColsLeftWidth();if(e.getPinned()==="right"){let s=this.beans.visibleColsService.getBodyContainerWidth();return i+s+t}return i+t}setLeft(e){if(j(e)&&(this.eCell.style.left=`${e}px`),Nt(this.columnOrGroup)){let t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&pZ(this.ariaEl,t.length)}}},Kee="ag-column-first",Qee="ag-column-last";function rG(e,t,n,i){return Pe(e)?[]:Jee(e.headerClass,e,t,n,i)}function oG(e,t,n){e.addOrRemoveCssClass(Kee,n.isColAtEdge(t,"first")),e.addOrRemoveCssClass(Qee,n.isColAtEdge(t,"last"))}function Yee(e,t,n,i){return t.addGridCommonParams({colDef:e,column:n,columnGroup:i})}function Jee(e,t,n,i,s){if(Pe(e))return[];let r;if(typeof e=="function"){let o=Yee(t,n,i,s);r=e(o)}else r=e;return typeof r=="string"?[r]:Array.isArray(r)?[...r]:[]}var Xee=0,aG=class lG extends k{constructor(t,n,i){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=t,this.parentRowCtrl=i,this.beans=n,this.instanceId=t.getUniqueId()+"-"+Xee++}wireBeans(t){this.pinnedWidthService=t.pinnedWidthService,this.focusService=t.focusService,this.userComponentFactory=t.userComponentFactory,this.ctrlsService=t.ctrlsService,this.dragAndDropService=t.dragAndDropService,this.menuService=t.menuService}postConstruct(){this.addManagedPropertyListeners(["suppressHeaderFocus"],()=>this.refreshTabIndex())}shouldStopEventPropagation(t){let{headerRowIndex:n,column:i}=this.focusService.getFocusedHeader();return Bee(this.gos,t,n,i)}getWrapperHasFocus(){return this.gos.getActiveDomElement()===this.eGui}setGui(t){this.eGui=t,this.addDomData(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onGuiFocus(){let t={type:"headerFocused",column:this.column};this.eventService.dispatchEvent(t)}onDisplayedColumnsChanged(){!this.comp||!this.column||(this.refreshFirstAndLastStyles(),this.refreshAriaColIndex())}refreshFirstAndLastStyles(){let{comp:t,column:n,beans:i}=this;oG(t,n,i.visibleColsService)}refreshAriaColIndex(){let{beans:t,column:n}=this,i=t.visibleColsService.getAriaColIndex(n);vB(this.eGui,i)}addResizeAndMoveKeyboardListeners(){this.resizeFeature&&this.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){this.gos.get("suppressHeaderFocus")?this.eGui.removeAttribute("tabindex"):this.eGui.setAttribute("tabindex","-1")}onGuiKeyDown(t){let n=this.gos.getActiveDomElement(),i=t.key===N.LEFT||t.key===N.RIGHT;if(this.isResizing&&(t.preventDefault(),t.stopImmediatePropagation()),n!==this.eGui||!t.shiftKey&&!t.altKey||((this.isResizing||i)&&(t.preventDefault(),t.stopImmediatePropagation()),!i))return;let s=t.key===N.LEFT!==this.gos.get("enableRtl"),r=GB[s?"Left":"Right"];if(t.altKey){this.isResizing=!0,this.resizeMultiplier+=1;let o=this.getViewportAdjustedResizeDiff(t);this.resizeHeader(o,t.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(r)}getViewportAdjustedResizeDiff(t){let n=this.getResizeDiff(t);if(this.column.getPinned()){let s=this.pinnedWidthService.getPinnedLeftWidth(),r=this.pinnedWidthService.getPinnedRightWidth(),o=wf(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(s+r+n>o)if(o>s+r)n=o-s-r;else return 0}return n}getResizeDiff(t){let n=t.key===N.LEFT!==this.gos.get("enableRtl"),i=this.column.getPinned(),s=this.gos.get("enableRtl");return i&&s!==(i==="right")&&(n=!n),(n?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{this.resizeFeature?.toggleColumnResizing(!1)},150))}handleKeyDown(t){let n=this.getWrapperHasFocus();switch(t.key){case N.PAGE_DOWN:case N.PAGE_UP:case N.PAGE_HOME:case N.PAGE_END:n&&t.preventDefault()}}addDomData(){let t=lG.DOM_DATA_KEY_HEADER_CTRL;this.gos.setDomData(this.eGui,t,this),this.addDestroyFunc(()=>this.gos.setDomData(this.eGui,t,null))}getGui(){return this.eGui}focus(t){return this.eGui?(this.lastFocusEvent=t||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getInstanceId(){return this.instanceId}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(t,n,i){let s=t??n;this.gos.get("preventDefaultOnContextMenu")&&s.preventDefault();let r=Qo(i)?i:void 0;this.menuService.isHeaderContextMenuEnabled(r)&&this.menuService.showHeaderContextMenu(r,t,n),this.dispatchColumnMouseEvent("columnHeaderContextMenu",i)}dispatchColumnMouseEvent(t,n){let i={type:t,column:n};this.eventService.dispatchEvent(i)}destroy(){super.destroy(),this.removeDragSource(),this.comp=null,this.column=null,this.resizeFeature=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null,this.eGui=null}};aG.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";var PC=aG,xR=class extends k{wireBeans(e){this.columnHoverService=e.columnHoverService}constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListeners(this.element,{mouseout:this.onMouseOut.bind(this),mouseover:this.onMouseOver.bind(this)})}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}},Zee=class extends PC{constructor(e,t,n){super(e,t,n),this.iconCreated=!1,this.column=e}setComp(e,t,n,i){this.comp=e,this.eButtonShowMainFilter=n,this.eFloatingFilterBody=i,this.setGui(t),this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(),this.addManagedListeners(this.column,{colDefChanged:this.onColDefChanged.bind(this)})}resizeHeader(){}moveHeader(){}setupActive(){let e=this.column.getColDef(),t=!!e.filter,n=!!e.floatingFilter;this.active=t&&n}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;let e=Ai("filter",this.gos,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(){this.createManagedBean(new yl(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){let e=this.localeService.getLocaleTextFunc();Tu(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(this.gos.getActiveDomElement()===this.eGui)return;let i=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(i){this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),i.focus();return}let s=this.findNextColumnWithFloatingFilter(e.shiftKey);s&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:s},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){let t=this.beans.visibleColsService,n=this.column;do if(n=e?t.getColBefore(n):t.getColAfter(n),!n)break;while(!n.getColDef().filter||!n.getColDef().floatingFilter);return n}handleKeyDown(e){super.handleKeyDown(e);let t=this.getWrapperHasFocus();switch(e.key){case N.UP:case N.DOWN:t||e.preventDefault();case N.LEFT:case N.RIGHT:if(t)return;e.stopPropagation();case N.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case N.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;let n=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),i=!!e.relatedTarget&&Du(e.relatedTarget,"ag-floating-filter");if(n&&i&&e.target===this.eGui){let r=this.lastFocusEvent,o=!!(r&&r.key===N.TAB);if(r&&o){let a=r.shiftKey;this.focusService.focusInto(this.eGui,a)}}let s=this.getRowIndex();this.beans.focusService.setFocusedHeader(s,this.column)}setupHover(){this.createManagedBean(new xR([this.column],this.eGui));let e=()=>{if(!this.gos.get("columnHoverHighlight"))return;let t=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",t)};this.addManagedEventListeners({columnHoverChanged:e}),e()}setupLeft(){let e=new FR(this.column,this.eGui,this.beans);this.createManagedBean(e)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){if(!this.active)return;let e=this.beans.filterManager?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){let e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(){if(!this.active)return;let{filterManager:e}=this.beans,t=n=>{if(n?.source==="filterDestroyed"&&!this.isAlive())return;let i=this.comp.getFloatingFilterComp();i&&i.then(s=>{if(s){let r=e?.getCurrentFloatingFilterParentModel(this.column),o=n?se(B({},n),{columns:n.columns??[],source:n.source==="api"?"api":"columnFilter"}):null;s.onParentModelChanged(r,o)}})};[this.destroySyncListener]=this.addManagedListeners(this.column,{filterChanged:t}),e?.isFilterActive(this.column)&&t(null)}setupWidth(){let e=()=>{let t=`${this.column.getActualWidth()}px`;this.comp.setWidth(t)};this.addManagedListeners(this.column,{widthChanged:e}),e()}setupFilterChangedListener(){this.active&&([this.destroyFilterChangedListener]=this.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){let e=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(){let e=this.active;this.setupActive();let t=!e&&this.active;e&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());let n=this.active?this.beans.filterManager?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,i=this.comp.getFloatingFilterComp();!i||!n?this.updateCompDetails(n,t):i.then(s=>{!s||this.beans.filterManager?.areFilterCompsDifferent(this.userCompDetails??null,n)?this.updateCompDetails(n,t):this.updateFloatingFilterParams(n)})}updateCompDetails(e,t){this.isAlive()&&(this.setCompDetails(e),this.setupFilterButton(),this.setupUi(),t&&(this.setupSyncWithFilter(),this.setupFilterChangedListener()))}updateFloatingFilterParams(e){if(!e)return;let t=e.params;this.comp.getFloatingFilterComp()?.then(n=>{let i=!1;n?.refresh&&typeof n.refresh=="function"&&n.refresh(t)!==null&&(i=!0),!i&&n?.onParamsUpdated&&typeof n.onParamsUpdated=="function"&&n.onParamsUpdated(t)!==null&&G("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.destroySyncListener=null,this.destroyFilterChangedListener=null}},ve="32.0.2";function ete(e){return!!e.filterManager?.isColumnFilterPresent()||!!e.filterManager?.isAggregateFilterPresent()}function tte(e,t,n){return e.filterManager?.getFilterInstance(t,n)}function nte(e,t){return e.filterManager?.getColumnFilterInstance(t)??Promise.resolve(void 0)}function ite(e,t){let n=e.columnModel.getColDefCol(t);if(n)return e.filterManager?.destroyFilter(n,"api")}function ste(e,t){e.frameworkOverrides.wrapIncoming(()=>e.filterManager?.setFilterModel(t))}function rte(e){return e.filterManager?.getFilterModel()??{}}function ote(e,t){return e.filterManager?.getColumnFilterModel(t)??null}function ate(e,t,n){return e.filterManager?.setColumnFilterModel(t,n)??Promise.resolve()}function lte(e,t){let n=e.columnModel.getCol(t);if(!n){ke(`column '${t}' not found`);return}e.menuService.showFilterMenu({column:n,containerType:"columnFilter",positionBy:"auto"})}function cte(e,t,n){if(t==null)return null;let i=null,{compName:s,jsComp:r,fwComp:o}=VB.getCompKeys(e,t,TR);return s?i={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[s]:r==null&&o==null&&t.filter===!0&&(i=n()),i}var ute=class extends k{constructor(){super(...arguments),this.beanName="columnFilterService",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.userComponentFactory=e.userComponentFactory,this.rowRenderer=e.rowRenderer,this.dataTypeService=e.dataTypeService,this.filterManager=e.filterManager}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),rowDataUpdated:()=>this.onNewRowsLoaded("rowDataUpdated"),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel=B({},this.gos.get("initialState")?.filter?.filterModel??{})}setFilterModel(e,t="api"){if(this.dataTypeService?.isPendingInference()){this.filterModelUpdateQueue.push({model:e,source:t});return}let n=[],i=this.getFilterModel();if(e){let s=new Set(Object.keys(e));this.allColumnFilters.forEach((r,o)=>{let a=e[o];n.push(this.setModelOnFilterWrapper(r.filterPromise,a)),s.delete(o)}),s.forEach(r=>{let o=this.columnModel.getColDefCol(r)||this.columnModel.getCol(r);if(!o){G("setFilterModel() - no column found for colId: "+r);return}if(!o.isFilterAllowed()){G("setFilterModel() - unable to fully apply model, filtering disabled for colId: "+r);return}let a=this.getOrCreateFilterWrapper(o);if(!a){G("setFilterModel() - unable to fully apply model, unable to create filter for colId: "+r);return}n.push(this.setModelOnFilterWrapper(a.filterPromise,e[r]))})}else this.allColumnFilters.forEach(s=>{n.push(this.setModelOnFilterWrapper(s.filterPromise,null))});Ii.all(n).then(()=>{let s=this.getFilterModel(),r=[];this.allColumnFilters.forEach((o,a)=>{let l=i?i[a]:null,c=s?s[a]:null;wC(l,c)||r.push(o.column)}),r.length>0&&this.filterManager?.onFilterChanged({columns:r,source:t})})}setModelOnFilterWrapper(e,t){return new Ii(n=>{e.then(i=>{typeof i.setModel!="function"&&(G("filter missing setModel method, which is needed for setFilterModel"),n()),(i.setModel(t)||Ii.resolve()).then(()=>n())})})}getFilterModel(){let e={};return this.allColumnFilters.forEach((t,n)=>{let i=this.getModelFromFilterWrapper(t);j(i)&&(e[n]=i)}),e}getModelFromFilterWrapper(e){let{filter:t}=e;return t?typeof t.getModel!="function"?(G("filter API missing getModel method, which is needed for getFilterModel"),null):t.getModel():this.getModelFromInitialState(e.column)}getModelFromInitialState(e){return this.initialFilterModel[e.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){return this.allColumnFilters.size?(this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"advancedFilterEnabled")),!0):!1}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){let e=r=>r?r.isFilterActive?r.isFilterActive():(G("Filter is missing isFilterActive() method"),!1):!1,t=!!this.gos.getGroupAggFiltering(),n=r=>{if(!r.isPrimary())return!0;let a=!this.columnModel.isPivotActive();return!r.isValueActive()||!a?!1:this.columnModel.isPivotMode()?!0:t},i=[],s=[];return this.forEachColumnFilter((r,o)=>{e(r)&&(n(o.column)?i.push(r):s.push(r))}).then(()=>{this.activeAggregateFilters=i,this.activeColumnFilters=s})}updateFilterFlagInColumns(e,t){return this.forEachColumnFilter((n,i)=>i.column.setFilterActive(n.isFilterActive(),e,t))}forEachColumnFilter(e){return Ii.all(Array.from(this.allColumnFilters.values()).map(t=>t.filterPromise.then(n=>e(n,t))))}doColumnFiltersPass(e,t,n){let{data:i,aggData:s}=e,r=n?this.activeAggregateFilters:this.activeColumnFilters,o=n?s:i;for(let a=0;a<r.length;a++){let l=r[a];if(!(l==null||l===t)){if(typeof l.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!l.doesFilterPass({node:e,data:o}))return!1}}return!0}callOnFilterChangedOutsideRenderCycle(e){let t=()=>this.filterManager?.onFilterChanged(e);this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}updateBeforeFilterChanged(e={}){let{filterInstance:t,additionalEventAttributes:n}=e;return this.updateDependentFilters(),this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",n).then(()=>{this.allColumnFilters.forEach(i=>{i.filterPromise&&i.filterPromise.then(s=>{s&&s!==t&&s.onAnyFilterChanged&&s.onAnyFilterChanged()})}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){this.forEachColumnFilter(t=>{t.onNewRowsLoaded&&t.onNewRowsLoaded()}).then(()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createValueGetter(e){return({node:t})=>this.valueService.getValue(e,t,!0)}createGetValue(e){return(t,n)=>{let i=n?this.columnModel.getCol(n):e;return i?this.valueService.getValue(i,t,!0):void 0}}isFilterActive(e){let{filter:t}=this.cachedFilter(e)??{};return t?t.isFilterActive():this.getModelFromInitialState(e)!=null}getOrCreateFilterWrapper(e){if(!e.isFilterAllowed())return null;let t=this.cachedFilter(e);return t||(t=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,t)),t}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t;if(Yn.__isRegistered("@ag-grid-enterprise/set-filter",this.gridId))t="agSetColumnFilter";else{let n=this.dataTypeService?.getBaseDataType(e);n==="number"?t="agNumberColumnFilter":n==="date"||n==="dateString"?t="agDateColumnFilter":t="agTextColumnFilter"}return t}getDefaultFloatingFilter(e){let t;if(Yn.__isRegistered("@ag-grid-enterprise/set-filter",this.gridId))t="agSetColumnFloatingFilter";else{let n=this.dataTypeService?.getBaseDataType(e);n==="number"?t="agNumberColumnFloatingFilter":n==="date"||n==="dateString"?t="agDateColumnFloatingFilter":t="agTextColumnFloatingFilter"}return t}createFilterInstance(e,t){let n=this.getDefaultFilter(e),i=e.getColDef(),s,r=se(B({},this.createFilterParams(e,i)),{filterModifiedCallback:()=>this.filterModifiedCallbackFactory(s,e)(),filterChangedCallback:a=>this.filterChangedCallbackFactory(s,e)(a),doesRowPassOtherFilter:a=>this.filterManager?this.filterManager.doesRowPassOtherFilters(s,a):!0}),o=this.userComponentFactory.getFilterDetails(i,r,n);return o?{filterPromise:()=>{let a=o.newAgStackInstance();return a?.then(l=>{s=l,t&&(t.filter=l)}),a},compDetails:o}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return this.gos.addGridCommonParams({column:e,colDef:iB(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e){let t={column:e,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:n,compDetails:i}=this.createFilterInstance(e,t);return t.filterPromise=n?.()??null,t.compDetails=i,t}onColumnsChanged(){let e=[];this.allColumnFilters.forEach((t,n)=>{let i;t.column.isPrimary()?i=this.columnModel.getColDefCol(n):i=this.columnModel.getCol(n),!(i&&i===t.column)&&(e.push(t.column),this.disposeFilterWrapper(t,"columnChanged"),this.disposeColumnListener(n))}),e.length>0?this.filterManager?.onFilterChanged({columns:e,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){this.columnModel.getAutoCols()?.forEach(t=>{t.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(t)})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;let{filter:n}=this.allColumnFilters.get(e.getColId())??{};return n&&typeof n?.isFilterAllowed=="function"?n.isFilterAllowed():!0}getFloatingFilterCompDetails(e,t){let n=l=>{let c=this.getOrCreateFilterWrapper(e)?.filterPromise;c?.then(u=>{l(hf(u))})},i=e.getColDef(),s=se(B({},this.createFilterParams(e,i)),{filterChangedCallback:()=>n(l=>this.filterChangedCallbackFactory(l,e)())}),r=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(i,TR,s),o=cte(this.frameworkOverrides,i,()=>this.getDefaultFloatingFilter(e));o==null&&(o="agReadOnlyFloatingFilter");let a={column:e,filterParams:r,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:n,showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(i,a,o)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilter(e,t="api"){let n=e.getColId(),i=this.allColumnFilters.get(n);this.disposeColumnListener(n),delete this.initialFilterModel[n],i&&(this.disposeFilterWrapper(i,t),this.filterManager?.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){let t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){e.filterPromise.then(n=>{this.destroyBean(n),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId());let i={type:"filterDestroyed",source:t,column:e.column};this.eventService.dispatchEvent(i)})}filterModifiedCallbackFactory(e,t){return()=>{let n={type:"filterModified",column:t,filterInstance:e};this.eventService.dispatchEvent(n)}}filterChangedCallbackFactory(e,t){return n=>{let i=n?.source??"columnFilter",s={filter:e,additionalEventAttributes:n,columns:[t],source:i};this.callOnFilterChangedOutsideRenderCycle(s)}}checkDestroyFilter(e){let t=this.allColumnFilters.get(e);if(!t)return;let n=t.column,{compDetails:i}=n.isFilterAllowed()?this.createFilterInstance(n):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,i)){this.destroyFilter(n,"paramsUpdated");return}let s=n.getColDef().filterParams;if(!t.filterPromise){this.destroyFilter(n,"paramsUpdated");return}t.filterPromise.then(r=>{(r?.refresh?r.refresh(B(se(B({},this.createFilterParams(n,n.getColDef())),{filterModifiedCallback:this.filterModifiedCallbackFactory(r,n),filterChangedCallback:this.filterChangedCallbackFactory(r,n),doesRowPassOtherFilter:a=>this.filterManager?this.filterManager.doesRowPassOtherFilters(r,a):!0}),s)):!0)===!1&&this.destroyFilter(n,"paramsUpdated")})}setColumnFilterWrapper(e,t){let n=e.getColId();this.allColumnFilters.set(n,t),this.allColumnListeners.set(n,this.addManagedListeners(e,{colDefChanged:()=>this.checkDestroyFilter(n)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;let{componentClass:n}=e,{componentClass:i}=t;return!(n===i||n?.render&&i?.render&&n.render===i.render)}hasFloatingFilters(){return this.columnModel.getCols().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e,t){t&&this.getFilterInstanceImpl(e).then(n=>{let i=hf(n);t(i)})}getColumnFilterInstance(e){return new Promise(t=>{this.getFilterInstanceImpl(e).then(n=>{t(hf(n))})})}getFilterInstanceImpl(e){let t=this.columnModel.getColDefCol(e);return t?this.getOrCreateFilterWrapper(t)?.filterPromise??Ii.resolve(null):Ii.resolve(void 0)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:e,source:t})=>this.setFilterModel(e,t)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:e,model:t,resolve:n})=>{this.setColumnFilterModel(e,t).then(()=>n())}),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(e){let t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){if(this.dataTypeService?.isPendingInference()){let r=()=>{},o=new Promise(a=>{r=a});return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:r}),o}let n=this.columnModel.getColDefCol(e),i=n?this.getOrCreateFilterWrapper(n):null;return i?(r=>new Promise(o=>{r.then(a=>o(a))}))(this.setModelOnFilterWrapper(i.filterPromise,t)):Promise.resolve()}getFilterWrapper(e){let t=this.columnModel.getColDefCol(e);return t?this.cachedFilter(t)??null:null}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}};function dte(e){return!!e.filterManager?.isAnyFilterPresent()}function hte(e,t="api"){e.filterManager?.onFilterChanged({source:t})}var fte=class extends Ve{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>
            </div>`,[MC]),this.eFloatingFilterText=Z}wireBeans(e){this.columnNameService=e.columnNameService}destroy(){super.destroy()}init(e){this.params=e;let t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),n=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${n("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){let n=t.getModelAsString(e);this.eFloatingFilterText.setValue(n)}})}onParamsUpdated(e){this.refresh(e)}refresh(e){this.init(e)}},cG=class extends Ve{wireBeans(e){this.columnNameService=e.columnNameService}getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return e?.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.getDefaultOption();return}let t=e.operator,n;t?n=e.conditions[0]:n=e,this.lastType=n.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;let n=e;return this.isTypeEditable(n.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){this.optionsFactory=new $B,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),t||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!e.filterParams.readOnly;let n=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(n)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){let t=this.optionsFactory.getCustomOption(e),{numberOfInputs:n}=t||{};return n==null||n==1}isTypeEditable(e){let t=["inRange","empty","blank","notBlank"];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){let t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),n=this.localeService.getLocaleTextFunc();return`${t} ${n("ariaFilterInput","Filter Input")}`}},pte=class extends cG{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eReadOnlyText"></ag-input-text-field>
                <div data-ref="eDateWrapper" style="display: flex;"></div>
            </div>`,[MC]),this.eReadOnlyText=Z,this.eDateWrapper=Z}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}getDefaultFilterOptions(){return iG}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new sG(this.filterParams,this.localeService,this.optionsFactory);let t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){let t=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){if(e){let n=e;this.dateComp.setDate(oi(n.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){gt(this.eDateWrapper,e),gt(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){let e=this.dateComp.getDate(),t=Ji(e);this.params.parentFilterInstance(n=>{if(n){let i=oi(t);n.onFloatingFilterChanged(this.getLastType()||null,i)}})}getDateComponentParams(){let e=IR(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:Xn(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new nG(this.context,this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,e=>{e.setInputAriaLabel(this.getAriaLabel(this.params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){let e=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}},gte=class extends Ve{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" data-ref="eDateInput"></ag-input-text-field>
            </div>`,[MC]),this.eDateInput=Z}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);let t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus()},input:n=>{n.target===this.gos.getActiveDomElement()&&(this.eDateInput.isDisabled()||this.params.onDateChanged())}})}setParams(e){let t=this.eDateInput.getInputElement(),n=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=n&&qr(),t.type=n?"date":"text";let{minValidYear:i,maxValidYear:s,minValidDate:r,maxValidDate:o}=e.filterParams||{};if(r&&i&&G("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),o&&s&&G("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),r&&o){let[a,l]=[r,o].map(c=>c instanceof Date?c:oi(c));a&&l&&a.getTime()>l.getTime()&&G("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}r?r instanceof Date?t.min=pf(r):t.min=r:i&&(t.min=`${i}-01-01`),o?o instanceof Date?t.max=pf(o):t.max=o:s&&(t.max=`${s}-12-31`)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams(e)}getDate(){return oi(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(Ji(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&e.filterParams.browserDatePicker!=null?e.filterParams.browserDatePicker:yR()||yB()||qr()&&CB()>=14.1}},uG=class extends k{constructor(e){super(),this.params=e,this.eFloatingFilterTextInput=Z,this.valueChangedListener=()=>{}}setupGui(e){this.eFloatingFilterTextInput=this.createManagedBean(new wl(this.params?.config));let t=this.eFloatingFilterTextInput.getGui();e.appendChild(t);let n=i=>this.valueChangedListener(i);this.addManagedListeners(t,{input:n,keydown:n})}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,t){this.eFloatingFilterTextInput.setValue(e,t)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}},dG=class extends cG{constructor(){super(...arguments),this.eFloatingFilterInputContainer=Z}postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){this.params=e;let t=e.browserAutoComplete??!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=IC(this.params.filterParams),!this.isReadOnly()){let n=IR(this.params.filterParams,this.getDefaultDebounceMs()),i=Xn(this.syncUpWithParentFilter.bind(this),n);this.floatingFilterInputService.setValueChangedListener(i)}}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){let t=this.floatingFilterInputService.getValue();xn(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(t,!0)}syncUpWithParentFilter(e){let t=e.key===N.ENTER;if(this.applyActive&&!t)return;let n=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(n=eG(n),this.floatingFilterInputService.setValue(n,!0)),this.params.parentFilterInstance(i=>{i&&i.onFloatingFilterChanged(this.getLastType()||null,n||null)})}setEditable(e){this.floatingFilterInputService.setEditable(e)}},mte=class extends k{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new MR),this.eFloatingFilterTextInput=this.createManagedBean(new wl),this.eFloatingFilterTextInput.setDisabled(!0);let t=this.eFloatingFilterNumberInput.getGui(),n=this.eFloatingFilterTextInput.getGui();e.appendChild(t),e.appendChild(n),this.setupListeners(t,i=>this.valueChangedListener(i)),this.setupListeners(n,i=>this.valueChangedListener(i))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}},vte=class extends dG{init(e){super.init(e),this.filterModelFormatter=new JB(this.localeService,this.optionsFactory,e.filterParams?.numberFormatter)}onParamsUpdated(e){this.refresh(e)}refresh(e){lR(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return YB}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=lR(e.filterParams),this.allowedCharPattern?this.createManagedBean(new uG({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new mte)}},Cte=class extends dG{init(e){super.init(e),this.filterModelFormatter=new ZB(this.localeService,this.optionsFactory)}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return XB}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new uG)}};function yte(e){return!!e.filterManager?.isQuickFilterPresent()}function wte(e){return e.gos.get("quickFilterText")}function Ste(e){e.filterManager?.resetQuickFilterCache()}var _te=class extends k{constructor(){super(...arguments),this.beanName="quickFilterService",this.quickFilter=null,this.quickFilterParts=null}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.pivotResultColsService=e.pivotResultColsService}postConstruct(){let e=this.resetQuickFilterCache.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}}),this.addManagedPropertyListener("quickFilterText",t=>this.setQuickFilter(t.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onQuickFilterColumnConfigChanged()),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}refreshQuickFilterCols(){let e=this.columnModel.isPivotMode(),t=this.columnModel.getAutoCols(),n=this.columnModel.getColDefCols(),i=(e&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?this.pivotResultColsService.getPivotResultCols()?.list:n)??[];t&&(i=i.concat(t)),this.colsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?i:i.filter(s=>s.isVisible()||s.isRowGroupActive())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(e){let t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(t,e):this.quickFilterParts.every(n=>t?this.doesRowPassQuickFilterCache(e,n):this.doesRowPassQuickFilterNoCache(e,n))}resetQuickFilterCache(){this.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}setQuickFilterParts(){let{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseQuickFilter(e){return j(e)?this.gos.isRowModelType("clientSide")?e.toUpperCase():(G("Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(e!=null&&typeof e!="string"){G(`Grid option quickFilterText only supports string inputs, received: ${typeof e}`);return}let t=this.parseQuickFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setQuickFilterParserAndMatcher(){let e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),n=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,n&&(this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onQuickFilterColumnConfigChanged(){this.refreshQuickFilterCols(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassQuickFilterNoCache(e,t){return this.colsForQuickFilter.some(n=>{let i=this.getQuickFilterTextForColumn(n,e);return j(i)&&i.indexOf(t)>=0})}doesRowPassQuickFilterCache(e,t){return this.checkGenerateQuickFilterAggregateText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilterMatcher(e,t){let n;e?(this.checkGenerateQuickFilterAggregateText(t),n=t.quickFilterAggregateText):n=this.getQuickFilterAggregateText(t);let{quickFilterParts:i,matcher:s}=this;return s(i,n)}checkGenerateQuickFilterAggregateText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getQuickFilterAggregateText(e))}getQuickFilterTextForColumn(e,t){let n=this.valueService.getValue(e,t,!0),i=e.getColDef();if(i.getQuickFilterText){let s=this.gos.addGridCommonParams({value:n,node:t,data:t.data,column:e,colDef:i});n=i.getQuickFilterText(s)}return j(n)?n.toString().toUpperCase():null}getQuickFilterAggregateText(e){let t=[];return this.colsForQuickFilter.forEach(n=>{let i=this.getQuickFilterTextForColumn(n,e);j(i)&&t.push(i)}),t.join(`
`)}},OR={version:ve,moduleName:"@ag-grid-community/filter-core",beans:[Eee]},bte={version:ve,moduleName:"@ag-grid-community/filter-api",apiFunctions:{isAnyFilterPresent:dte,onFilterChanged:hte},dependantModules:[OR]},NR={version:ve,moduleName:"@ag-grid-community/column-filter",beans:[ute],dependantModules:[OR]},Ete={version:ve,moduleName:"@ag-grid-community/column-filter-api",apiFunctions:{isColumnFilterPresent:ete,getFilterInstance:tte,getColumnFilterInstance:nte,destroyFilter:ite,setFilterModel:ste,getFilterModel:rte,getColumnFilterModel:ote,setColumnFilterModel:ate,showColumnFilter:lte},dependantModules:[NR,bte]},hG={version:ve,moduleName:"@ag-grid-community/floating-filter-core",controllers:[{name:"headerFilterCell",classImp:Zee}],dependantModules:[NR]};var Dte={version:ve,moduleName:"@ag-grid-community/read-only-floating-filter",userComponents:[{name:"agReadOnlyFloatingFilter",classImp:fte}],dependantModules:[hG]},Rte={version:ve,moduleName:"@ag-grid-community/simple-filter",dependantModules:[NR],userComponents:[{name:"agTextColumnFilter",classImp:jee},{name:"agNumberColumnFilter",classImp:Wee},{name:"agDateColumnFilter",classImp:qee},{name:"agDateInput",classImp:gte}]},Tte={version:ve,moduleName:"@ag-grid-community/simple-floating-filter",dependantModules:[Rte,hG],userComponents:[{name:"agTextColumnFloatingFilter",classImp:Cte},{name:"agNumberColumnFloatingFilter",classImp:vte},{name:"agDateColumnFloatingFilter",classImp:pte}]},fG={version:ve,moduleName:"@ag-grid-community/quick-filter-core",beans:[_te],dependantModules:[OR]},Ite={version:ve,moduleName:"@ag-grid-community/quick-filter-api",apiFunctions:{isQuickFilterPresent:yte,getQuickFilter:wte,resetQuickFilter:Ste},dependantModules:[fG]},Ate={version:ve,moduleName:"@ag-grid-community/quick-filter",dependantModules:[fG,Ite]},Mte={version:ve,moduleName:"@ag-grid-community/filter",dependantModules:[Tte,Dte,Ate,Ete]},kR=class extends Ve{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}},Pte=class extends kR{constructor(e){super(`<div class="ag-header-cell ag-floating-filter" role="gridcell">
            <div data-ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" data-ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" data-ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`,e),this.eFloatingFilterBody=Z,this.eButtonWrapper=Z,this.eButtonShowMainFilter=Z}postConstruct(){let e=this.getGui(),t={addOrRemoveCssClass:(n,i)=>this.addOrRemoveCssClass(n,i),addOrRemoveBodyCssClass:(n,i)=>this.eFloatingFilterBody.classList.toggle(n,i),setButtonWrapperDisplayed:n=>gt(this.eButtonWrapper,n),setCompDetails:n=>this.setCompDetails(n),getFloatingFilterComp:()=>this.compPromise,setWidth:n=>e.style.width=n,setMenuIcon:n=>this.eButtonShowMainFilter.appendChild(n)};this.ctrl.setComp(t,e,this.eButtonShowMainFilter,this.eFloatingFilterBody)}setCompDetails(e){if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(t=>this.afterCompCreated(t))}destroy(){this.destroyFloatingFilterComp(),super.destroy()}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}},Fte=class extends kR{constructor(e){super(`<div class="ag-header-cell" role="columnheader">
            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`,e),this.eResize=Z,this.eHeaderCompWrapper=Z,this.headerCompVersion=0,this.column=e.getColumnGroupChild(),this.pinned=e.getPinned()}postConstruct(){let e=this.getGui();((s,r)=>{r!=null&&r!=""?e.setAttribute(s,r):e.removeAttribute(s)})("col-id",this.column.getColId());let n={setWidth:s=>e.style.width=s,addOrRemoveCssClass:(s,r)=>this.addOrRemoveCssClass(s,r),setAriaSort:s=>s?gZ(e,s):mZ(e),setUserCompDetails:s=>this.setUserCompDetails(s),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(n,this.getGui(),this.eResize,this.eHeaderCompWrapper);let i=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",i)}destroy(){this.destroyHeaderComp(),super.destroy()}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;let t=this.headerCompVersion;e.newAgStackInstance().then(n=>this.afterCompCreated(t,n))}afterCompCreated(e,t){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(t);return}this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}},xte=class extends kR{constructor(e){super(`<div class="ag-header-group-cell" role="columnheader">
            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`,e),this.eResize=Z}postConstruct(){let e=this.getGui(),t=(i,s)=>s!=null?e.setAttribute(i,s):e.removeAttribute(i);e.setAttribute("col-id",this.ctrl.getColId());let n={addOrRemoveCssClass:(i,s)=>this.addOrRemoveCssClass(i,s),setResizableDisplayed:i=>gt(this.eResize,i),setWidth:i=>e.style.width=i,setAriaExpanded:i=>t("aria-expanded",i),setUserCompDetails:i=>this.setUserCompDetails(i),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(n,e,this.eResize)}setUserCompDetails(e){e.newAgStackInstance().then(t=>this.afterHeaderCompCreated(t))}afterHeaderCompCreated(e){let t=()=>this.destroyBean(e);if(!this.isAlive()){t();return}let n=this.getGui(),i=e.getGui();n.appendChild(i),this.addDestroyFunc(t),this.headerGroupComp=e,this.ctrl.setDragSource(n)}};var Ote=class extends Ve{constructor(e){super(),this.headerComps={},this.ctrl=e,this.setTemplate(`<div class="${this.ctrl.getHeaderRowClass()}" role="row"></div>`)}postConstruct(){mB(this.getGui(),this.ctrl.getAriaRowIndex());let e={setHeight:t=>this.getGui().style.height=t,setTop:t=>this.getGui().style.top=t,setHeaderCtrls:(t,n)=>this.setHeaderCtrls(t,n),setWidth:t=>this.getGui().style.width=t};this.ctrl.setComp(e)}destroy(){this.setHeaderCtrls([],!1),super.destroy()}setHeaderCtrls(e,t){if(!this.isAlive())return;let n=this.headerComps;if(this.headerComps={},e.forEach(i=>{let s=i.getInstanceId(),r=n[s];delete n[s],r==null&&(r=this.createHeaderComp(i),this.getGui().appendChild(r.getGui())),this.headerComps[s]=r}),$i(n,(i,s)=>{this.getGui().removeChild(s.getGui()),this.destroyBean(s)}),t){let i=Ko(this.headerComps);i.sort((r,o)=>{let a=r.getCtrl().getColumnGroupChild().getLeft(),l=o.getCtrl().getColumnGroupChild().getLeft();return a-l});let s=i.map(r=>r.getGui());IB(this.getGui(),s)}}createHeaderComp(e){let t;switch(this.ctrl.getType()){case"group":t=new xte(e);break;case"filter":t=new Pte(e);break;default:t=new Fte(e);break}return this.createBean(t),t.setParentComponent(this),t}};var Nte=class extends k{constructor(){super(...arguments),this.beanName="headerNavigationService",this.currentHeaderRowWithoutSpan=-1}wireBeans(e){this.focusService=e.focusService,this.headerPositionUtils=e.headerPositionUtils,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.visibleColService=e.visibleColsService}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridBodyCon=t.gridBodyCtrl});let e=this.gos.getDocument();this.addManagedElementListeners(e,{mousedown:()=>this.setCurrentHeaderRowWithoutSpan(-1)})}getHeaderRowCount(){let e=this.ctrlsService.getHeaderRowContainerCtrl();return e?e.getRowCount():0}getHeaderPositionForColumn(e,t){let n;if(typeof e=="string"?(n=this.columnModel.getCol(e),n||(n=this.visibleColService.getColumnGroup(e))):n=e,!n)return null;let s=this.ctrlsService.getHeaderRowContainerCtrl().getAllCtrls(),r=xe(s).getType()==="filter",o=this.getHeaderRowCount()-1,a=-1,l=n;for(;l;)a++,l=l.getParent();let c=a;return t&&r&&c===o-1&&c++,c===-1?null:{headerRowIndex:c,column:n}}navigateVertically(e,t,n){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;let{headerRowIndex:i}=t,s=t.column,r=this.getHeaderRowCount(),o=e===0,{headerRowIndex:a,column:l,headerRowIndexWithoutSpan:c}=o?this.headerPositionUtils.getColumnVisibleParent(s,i):this.headerPositionUtils.getColumnVisibleChild(s,i),u=!1;return a<0&&(a=0,l=s,u=!0),a>=r?(a=-1,this.setCurrentHeaderRowWithoutSpan(-1)):c!==void 0&&(this.currentHeaderRowWithoutSpan=c),!u&&!l?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a,column:l},allowUserOverride:!0,event:n})}setCurrentHeaderRowWithoutSpan(e){this.currentHeaderRowWithoutSpan=e}navigateHorizontally(e,t=!1,n){let i=this.focusService.getFocusedHeader(),s=e===2,r=this.gos.get("enableRtl"),o,a;if(this.currentHeaderRowWithoutSpan!==-1?i.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=i.headerRowIndex,s!==r?(a="Before",o=this.headerPositionUtils.findHeader(i,a)):(a="After",o=this.headerPositionUtils.findHeader(i,a)),o||!t)return this.focusService.focusHeaderPosition({headerPosition:o,direction:a,fromTab:t,allowUserOverride:!0,event:n});if(t){let l=this.gos.getCallback("tabToNextHeader");if(l)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:o,direction:a})}return this.focusNextHeaderRow(i,a,n)}focusNextHeaderRow(e,t,n){let i=e.headerRowIndex,s=null,r;if(t==="Before"?i>0&&(r=i-1,this.currentHeaderRowWithoutSpan-=1,s=this.headerPositionUtils.findColAtEdgeForHeaderRow(r,"end")):(r=i+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),s=this.headerPositionUtils.findColAtEdgeForHeaderRow(r,"start")),!s)return!1;let{column:o,headerRowIndex:a}=this.headerPositionUtils.getHeaderIndexToFocus(s.column,s?.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:o,headerRowIndex:a},direction:t,fromTab:!0,allowUserOverride:!0,event:n})}scrollToColumn(e,t="After"){if(e.getPinned())return;let n;if(Nt(e)){let i=e.getDisplayedLeafColumns();n=t==="Before"?xe(i):i[0]}else n=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(n)}},kte=class extends k{wireBeans(e){this.headerNavigationService=e.headerNavigationService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService,this.filterManager=e.filterManager,this.menuService=e.menuService}setComp(e,t,n){this.comp=e,this.eGui=t,this.createManagedBean(new yl(n,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.onPivotModeChanged(),this.setupHeaderHeight();let i=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:i}),this.mockContextMenuForIPad(i),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){let e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListener("headerHeight",e),this.addManagedPropertyListener("pivotHeaderHeight",e),this.addManagedPropertyListener("groupHeaderHeight",e),this.addManagedPropertyListener("pivotGroupHeaderHeight",e),this.addManagedPropertyListener("floatingFiltersHeight",e),this.addManagedEventListeners({displayedColumnsChanged:e,columnHeaderHeightChanged:e,gridStylesChanged:e,advancedFilterEnabledChanged:e})}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){let{columnModel:e}=this,t=0,n=e.getHeaderRowCount(),i;this.filterManager?.hasFloatingFilters()&&(n++,t=1);let r=this.columnModel.getColumnGroupHeaderRowHeight(),o=this.columnModel.getColumnHeaderRowHeight(),a=1+t,l=n-a;if(i=t*e.getFloatingFiltersHeight(),i+=l*r,i+=o,this.headerHeight===i)return;this.headerHeight=i;let c=`${i+1}px`;this.comp.setHeightAndMinHeight(c),this.eventService.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(){let e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){let t=this.visibleColsService.getAllCols().some(n=>n.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)}onTabKeyDown(e){let t=this.gos.get("enableRtl"),n=e.shiftKey!==t?2:3;(this.headerNavigationService.navigateHorizontally(n,!0,e)||this.focusService.focusNextGridCoreContainer(e.shiftKey))&&e.preventDefault()}handleKeyDown(e){let t=null;switch(e.key){case N.LEFT:t=2;case N.RIGHT:{j(t)||(t=3),this.headerNavigationService.navigateHorizontally(t,!1,e);break}case N.UP:t=0;case N.DOWN:{j(t)||(t=1),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break}default:return}}onFocusOut(e){let{relatedTarget:t}=e;!t&&this.eGui.contains(this.gos.getActiveDomElement())||this.eGui.contains(t)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(e,t,n){if(!e&&!n||!this.menuService.isHeaderContextMenuEnabled())return;let{target:i}=e??t;(i===this.eGui||i===this.ctrlsService.getHeaderRowContainerCtrl().getViewport())&&this.menuService.showHeaderContextMenu(void 0,e,n)}mockContextMenuForIPad(e){if(!Yo())return;let t=new qo(this.eGui),n=i=>{e(void 0,i.touchStart,i.touchEvent)};this.addManagedListeners(t,{longTap:n}),this.addDestroyFunc(()=>t.destroy())}},LR=class extends k{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}wireBeans(e){this.visibleColsService=e.visibleColsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){let e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){let e=this.gos.isDomLayout("print"),t=this.visibleColsService.getBodyContainerWidth(),n=this.visibleColsService.getColsLeftWidth(),i=this.visibleColsService.getDisplayedColumnsRightWidth(),s;e?s=t+n+i:(s=t,this.addSpacer&&(this.gos.get("enableRtl")?n:i)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(s+=this.gos.getScrollbarWidth())),this.callback(s)}},Lte=class extends k{constructor(e){super(),this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}wireBeans(e){this.funcColsService=e.funcColsService}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;let t=e.dragItem.columns;t&&t.forEach(n=>{n.isPrimary()&&(n.isAnyFunctionActive()||(n.isAllowValue()?this.columnsToAggregate.push(n):n.isAllowRowGroup()?this.columnsToGroup.push(n):n.isAllowPivot()&&this.columnsToPivot.push(n)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.funcColsService.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.funcColsService.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.funcColsService.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}};function VR(e){let{isFromHeader:t,hDirection:n,xPosition:i,fromEnter:s,fakeEvent:r,pinned:o,gos:a,columnModel:l,columnMoveService:c,presentedColsService:u}=e,h=n===0,f=n===1,{allMovingColumns:g}=e;if(t){let V=[];g.forEach(b=>{let S=null,_=b.getParent();for(;_!=null&&_.getDisplayedLeafColumns().length===1;)S=_,_=_.getParent();S!=null?(!!S.getColGroupDef()?.marryChildren?S.getProvidedColumnGroup().getLeafColumns():S.getLeafColumns()).forEach(M=>{V.includes(M)||V.push(M)}):V.includes(b)||V.push(b)}),g=V}let v=g.slice();l.sortColsLikeCols(v);let y=Hte({movingCols:v,draggingRight:f,xPosition:i,pinned:o,gos:a,columnModel:l,presentedColsService:u}),C=Vte(v,l);if(y.length===0)return;let E=y[0],I=C!==null&&!s;if(t&&(I=C!==null),I&&!r&&(h&&E>=C||f&&E<=C))return;let T=u.getAllCols(),x=[],z=null;for(let V=0;V<y.length;V++){let b=y[V],S=c.getProposedColumnOrder(v,b);if(!c.doesOrderPassRules(S))continue;let _=S.filter(A=>T.includes(A));if(z===null)z=_;else if(!vl(_,z))break;let R=Bte(S);x.push({move:b,fragCount:R})}if(x.length!==0)return x.sort((V,b)=>V.fragCount-b.fragCount),pG(g,x[0].move,"uiColumnMoved",!1,c)}function pG(e,t,n,i,s){return s.moveColumns(e,t,n,i),i?null:{columns:e,toIndex:t}}function Vte(e,t){let n=t.getCols(),i=yX(e.map(l=>n.indexOf(l))),s=i[0];return xe(i)-s!==i.length-1?null:s}function Bte(e){function t(i){let s=[],r=i.getOriginalParent();for(;r!=null;)s.push(r),r=r.getOriginalParent();return s}let n=0;for(let i=0;i<e.length-1;i++){let s=t(e[i]),r=t(e[i+1]);[s,r]=s.length>r.length?[s,r]:[r,s],s.forEach(o=>{r.indexOf(o)===-1&&n++})}return n}function Gte(e,t){switch(t){case"left":return e.getLeftCols();case"right":return e.getRightCols();default:return e.getCenterCols()}}function Hte(e){let{movingCols:t,draggingRight:n,xPosition:i,pinned:s,gos:r,columnModel:o,presentedColsService:a}=e;if(r.get("suppressMovableColumns")||t.some(T=>T.getColDef().suppressMovable))return[];let c=Gte(a,s),u=o.getCols(),h=c.filter(T=>hl(t,T)),f=c.filter(T=>!hl(t,T)),g=u.filter(T=>!hl(t,T)),v=0,y=i;if(n){let T=0;h.forEach(x=>T+=x.getActualWidth()),y-=T}if(y>0){for(let T=0;T<f.length;T++){let x=f[T];if(y-=x.getActualWidth(),y<0)break;v++}n&&v++}let C;if(v>0){let T=f[v-1];C=g.indexOf(T)+1}else C=g.indexOf(f[0]),C===-1&&(C=0);let E=[C],I=(T,x)=>T-x;if(n){let T=C+1,x=u.length-1;for(;T<=x;)E.push(T),T++;E.sort(I)}else{let T=C,x=u.length-1,z=u[T];for(;T<=x&&c.indexOf(z)<0;)T++,E.push(T),z=u[T];T=C-1;let V=0;for(;T>=V;)E.push(T),T--;E.sort(I).reverse()}return E}function BR(e,t,n,i,s){let r=s.getHeaderRowContainerCtrl(t).getViewport();return n&&(e-=r.getBoundingClientRect().left),i.get("enableRtl")&&(e=r.clientWidth-e),t==null&&(e+=s.get("center").getCenterViewportScrollLeft()),e}var Ute=class extends k{constructor(e){super(),this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.isCenterContainer=!j(e)}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnMoveService=e.columnMoveService,this.dragAndDropService=e.dragAndDropService,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){return this.pinned?"pinned":"move"}onDragEnter(e){let t=e.dragItem.columns;if(e.dragSource.type===0)this.setColumnsVisible(t,!0,"uiColumnDragged");else{let i=e.dragItem.visibleState,s=(t||[]).filter(r=>i[r.getId()]);this.setColumnsVisible(s,!0,"uiColumnDragged")}this.setColumnsPinned(t,this.pinned,"uiColumnDragged"),this.onDragging(e,!0,!0)}onDragLeave(){this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,n){if(e){let i=e.filter(s=>!s.getColDef().lockVisible);this.columnModel.setColsVisible(i,t,n)}}setColumnsPinned(e,t,n){if(e){let i=e.filter(s=>!s.getColDef().lockPinned);this.columnModel.setColsPinned(i,t,n)}}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}checkCenterForScrolling(e){if(this.isCenterContainer){let t=this.ctrlsService.get("center"),n=t.getCenterViewportScrollLeft(),i=n+t.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=e<n+50,this.needToMoveLeft=e>i-50):(this.needToMoveLeft=e<n+50,this.needToMoveRight=e>i-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}}onDragging(e=this.lastDraggingEvent,t=!1,n=!1,i=!1){if(i){if(this.lastMovedInfo){let{columns:c,toIndex:u}=this.lastMovedInfo;pG(c,u,"uiColumnMoved",!0,this.columnMoveService)}return}if(this.lastDraggingEvent=e,Pe(e.hDirection))return;let s=BR(e.x,this.pinned,!1,this.gos,this.ctrlsService);t||this.checkCenterForScrolling(s);let r=this.normaliseDirection(e.hDirection),o=e.dragSource.type,a=e.dragSource.getDragItem().columns?.filter(c=>c.getColDef().lockPinned?c.getPinned()==this.pinned:!0)||[],l=VR({allMovingColumns:a,isFromHeader:o===1,hDirection:r,xPosition:s,pinned:this.pinned,fromEnter:t,fakeEvent:n,gos:this.gos,columnModel:this.columnModel,columnMoveService:this.columnMoveService,presentedColsService:this.visibleColsService});l&&(this.lastMovedInfo=l)}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case 0:return 1;case 1:return 0;default:ke(`Unknown direction ${e}`)}else return e}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.dragAndDropService.setGhostIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon("move"))}moveInterval(){let e;this.intervalCount++,e=10+this.intervalCount*5,e>100&&(e=100);let t=null,n=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=n.scrollHorizontally(-e):this.needToMoveRight&&(t=n.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;let s=this.lastDraggingEvent.dragItem.columns.filter(r=>!r.getColDef().lockPinned);if(s.length>0&&(this.dragAndDropService.setGhostIcon("pinned"),this.failedMoveAttempts>7)){let r=this.needToMoveLeft?"left":"right";this.setColumnsPinned(s,r,"uiColumnDragged"),this.dragAndDropService.nudge()}}}},Wte=class extends k{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady(e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.left.getContainerElement()],[e.bottomLeft.getContainerElement()],[e.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.right.getContainerElement()],[e.bottomRight.getContainerElement()],[e.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.center.getViewportElement()],[e.bottomCenter.getViewportElement()],[e.topCenter.getViewportElement()]];break}}),this.moveColumnFeature=this.createManagedBean(new Ute(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new Lte(this.pinned)),this.dragAndDropService.addDropTarget(this)}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}},jte=class extends k{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.pinnedWidthService=e.pinnedWidthService,this.ctrlsService=e.ctrlsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,n,i,s){super(),this.pinned=e,this.column=t,this.eResize=n,this.comp=i,this.ctrl=s}postConstruct(){let e=[],t,n,i=()=>{if(gt(this.eResize,t),!t)return;let o=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(e.push(o),n){let a=this.gos.get("skipHeaderOnAutoSize"),l=()=>{this.columnAutosizeService.autoSizeColumn(this.column,"uiColumnResized",a)};this.eResize.addEventListener("dblclick",l);let c=new qo(this.eResize);c.addEventListener("doubleTap",l),e.push(()=>{this.eResize.removeEventListener("dblclick",l),c.removeEventListener("doubleTap",l),c.destroy()})}},s=()=>{e.forEach(o=>o()),e.length=0},r=()=>{let o=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(o!==t||a!==n)&&(t=o,n=a,s(),i())};r(),this.addDestroyFunc(s),this.ctrl.addRefreshFunction(r)}onResizing(e,t){let{column:n,lastResizeAmount:i,resizeStartWidth:s}=this,r=this.normaliseResizeAmount(t),o=s+r,a=[{key:n,newWidth:o}];if(this.column.getPinned()){let l=this.pinnedWidthService.getPinnedLeftWidth(),c=this.pinnedWidthService.getPinnedRightWidth(),u=wf(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(l+c+(r-i)>u)return}this.lastResizeAmount=r,this.columnSizeService.setColumnWidths(a,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e,n=this.pinned!=="left",i=this.pinned==="right";return this.gos.get("enableRtl")?n&&(t*=-1):i&&(t*=-1),t}},zte=class extends k{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}onSpaceKeyDown(e){let t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(this.gos.getActiveDomElement())&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new DR),this.cbSelectAll.addCssClass("ag-header-select-all"),ai(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:this.onNewColumnsLoaded.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedListeners(this.cbSelectAll,{fieldValueChanged:this.onCbSelectAll.bind(this)}),vR(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;let e=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(e);let t=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!t),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){let e=this.localeService.getLocaleTextFunc(),n=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),i=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${i} (${n})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(`${i} (${n})`),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(e){return this.gos.get("rowSelection")==="multiple"?!0:(G(`${e} is only available if using 'multiple' rowSelection.`),!1)}checkRightRowModelType(e){let t=this.rowModel.getType();return t==="clientSide"||t==="serverSide"?!0:(G(`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;let e=this.cbSelectAll.getValue(),t=this.isFilteredOnly(),n=this.isCurrentPageOnly(),i="uiSelectAll";n?i="uiSelectAllCurrentPage":t&&(i="uiSelectAllFiltered");let s={source:i,justFiltered:t,justCurrentPage:n};e?this.selectionService.selectAllRowNodes(s):this.selectionService.deselectAllRowNodes(s)}isCheckboxSelection(){let e=this.column.getColDef().headerCheckboxSelection;if(typeof e=="function"){let t=e,n=this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()});e=t(n)}return e?this.checkRightRowModelType("headerCheckboxSelection")&&this.checkSelectionType("headerCheckboxSelection"):!1}isFilteredOnly(){return!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){return!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}},$te=class extends PC{constructor(e,t,n){super(e,t,n),this.refreshFunctions=[],this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,t,n,i){this.comp=e,this.setGui(t),this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(i),this.addColumnHoverListener(),this.setupFilterClass(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.resizeFeature=this.createManagedBean(new jte(this.getPinned(),this.column,n,e,this)),this.createManagedBean(new xR([this.column],t)),this.createManagedBean(new FR(this.column,t,this.beans)),this.createManagedBean(new yl(t,{shouldStopEventPropagation:s=>this.shouldStopEventPropagation(s),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(),this.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],this.refresh.bind(this)),this.addManagedListeners(this.column,{colDefChanged:this.refresh.bind(this)}),this.addManagedEventListeners({columnValueChanged:this.onColumnValueChanged.bind(this),columnRowGroupChanged:this.onColumnRowGroupChanged.bind(this),columnPivotChanged:this.onColumnPivotChanged.bind(this),headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}resizeHeader(e,t){if(!this.column.isResizable())return;let n=this.column.getActualWidth(),i=this.column.getMinWidth(),s=this.column.getMaxWidth(),r=Math.min(Math.max(n+e,i),s);this.beans.columnSizeService.setColumnWidths([{key:this.column,newWidth:r}],t,!0,"uiColumnResized")}moveHeader(e){let{eGui:t,column:n,gos:i,ctrlsService:s}=this,r=this.getPinned(),o=t.getBoundingClientRect().left,a=n.getActualWidth(),l=i.get("enableRtl"),u=BR(e===0!==l?o-20:o+a+20,r,!0,i,s);VR({allMovingColumns:[n],isFromHeader:!0,hDirection:e,xPosition:u,pinned:r,fromEnter:!1,fakeEvent:!1,gos:i,columnModel:this.beans.columnModel,columnMoveService:this.beans.columnMoveService,presentedColsService:this.beans.visibleColsService}),s.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(n,"auto")}setupUserComp(){let e=this.lookupUserCompDetails();this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){let e=this.createParams(),t=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(t,e)}createParams(){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:t=>{this.menuService.showColumnMenu({column:this.column,buttonElement:t,positionBy:"button"})},showColumnMenuAfterMouseClick:t=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:t,positionBy:"mouse"})},showFilter:t=>{this.menuService.showFilterMenu({column:this.column,buttonElement:t,containerType:"columnFilter",positionBy:"button"})},progressSort:t=>{this.beans.sortController.progressSort(this.column,!!t,"uiColumnSorted")},setSort:(t,n)=>{this.beans.sortController.setSortForColumn(this.column,t,!!n,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(t,n)=>{this.setupTooltip(t,n)}})}setupSelectAll(){this.selectAllFeature=this.createManagedBean(new zte(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===N.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===N.ENTER&&this.onEnterKeyDown(e),e.key===N.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){let t=e.shiftKey;this.beans.sortController.progressSort(this.column,t,"uiColumnSorted")}}showMenuOnKeyPress(e,t){let n=this.comp.getUserCompInstance();!n||!(n instanceof rR)||n.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){let t=this.getRowIndex();this.focusService.setFocusedHeader(t,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));let n=this.gos.get("tooltipShowMode")==="whenTruncated",i=this.eGui,s=this.column.getColDef();!t&&n&&!s.headerComponent&&(t=()=>{let a=i.querySelector(".ag-header-cell-text");return a?a.scrollWidth>a.clientWidth:!0});let r={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>i,getLocation:()=>"header",getTooltipValue:()=>e??this.column.getColDef().headerTooltip,shouldDisplayTooltip:t},o=this.createManagedBean(new Pu(r));this.refreshFunctions.push(()=>o.refreshToolTip())}setupClassesFromColDef(){let e=()=>{let t=this.column.getColDef(),n=rG(t,this.gos,this.column,null),i=this.userHeaderClasses;this.userHeaderClasses=new Set(n),n.forEach(s=>{i.has(s)?i.delete(s):this.comp.addOrRemoveCssClass(s,!0)}),i.forEach(s=>this.comp.addOrRemoveCssClass(s,!1))};this.refreshFunctions.push(e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;let{column:t,beans:n,displayName:i,dragAndDropService:s,gos:r}=this,{columnModel:o}=n,a=!this.gos.get("suppressDragLeaveHidesColumns"),l=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:()=>this.createDragItem(t),dragItemName:i,onDragStarted:()=>{a=!r.get("suppressDragLeaveHidesColumns"),t.setMoving(!0,"uiColumnMoved")},onDragStopped:()=>t.setMoving(!1,"uiColumnMoved"),onGridEnter:c=>{if(a){let u=c?.columns?.filter(h=>!h.getColDef().lockVisible)||[];o.setColsVisible(u,!0,"uiColumnMoved")}},onGridExit:c=>{if(a){let u=c?.columns?.filter(h=>!h.getColDef().lockVisible)||[];o.setColsVisible(u,!1,"uiColumnMoved")}}};s.addDragSource(l,!0)}createDragItem(e){let t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}addRefreshFunction(e){this.refreshFunctions.push(e)}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(e=>e())}refreshHeaderComp(){let e=this.lookupUserCompDetails();(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass?this.attemptHeaderCompRefresh(e.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){let t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.columnNameService.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){let e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}onColumnRowGroupChanged(){this.checkDisplayName()}onColumnPivotChanged(){this.checkDisplayName()}onColumnValueChanged(){this.checkDisplayName()}setupWidth(){let e=()=>{let t=this.column.getActualWidth();this.comp.setWidth(`${t}px`)};this.addManagedListeners(this.column,{widthChanged:e}),e()}setupMovingCss(){let e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};this.addManagedListeners(this.column,{movingChanged:e}),e()}setupMenuClass(){let e=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};this.addManagedListeners(this.column,{menuVisibleChanged:e}),e()}setupSortableClass(){let e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};e(),this.addRefreshFunction(e),this.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(){let e=()=>{let t=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",t),this.refreshAria()};this.addManagedListeners(this.column,{filterActiveChanged:e}),e()}setupWrapTextClass(){let e=()=>{let t=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",t)};e(),this.addRefreshFunction(e)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){let{eGui:e,column:t,comp:n,beans:i}=this;if(!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),n.addOrRemoveCssClass("ag-header-span-height",!1),n.addOrRemoveCssClass("ag-header-span-total",!1);return}let{numberOfParents:s,isSpanningTotal:r}=this.column.getColumnGroupPaddingInfo();n.addOrRemoveCssClass("ag-header-span-height",s>0);let{columnModel:o}=i,a=o.getColumnHeaderRowHeight();if(s===0){n.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${a}px`);return}n.addOrRemoveCssClass("ag-header-span-total",r);let c=o.isPivotMode()?o.getPivotGroupHeaderHeight():o.getGroupHeaderHeight(),u=s*c;e.style.setProperty("top",`${-u}px`),e.style.setProperty("height",`${a+u}px`)}setupAutoHeight(e){let{columnModel:t,resizeObserverService:n}=this.beans,i=c=>{if(!this.isAlive())return;let{paddingTop:u,paddingBottom:h,borderBottomWidth:f,borderTopWidth:g}=Cl(this.getGui()),v=u+h+f+g,C=e.offsetHeight+v;if(c<5){let E=this.beans.gos.getDocument(),I=!E||!E.contains(e),T=C==0;if(I||T){window.setTimeout(()=>i(c+1),0);return}}t.setColHeaderHeight(this.column,C)},s=!1,r,o=()=>{let c=this.column.isAutoHeaderHeight();c&&!s&&a(),!c&&s&&l()},a=()=>{s=!0,i(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),r=n.observeResize(e,()=>i(0))},l=()=>{s=!1,r&&r(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),r=void 0};o(),this.addDestroyFunc(()=>l()),this.addManagedListeners(this.column,{widthChanged:()=>s&&i(0)}),this.addManagedEventListeners({sortChanged:()=>{s&&window.setTimeout(()=>i(0))}}),this.addRefreshFunction(o)}refreshAriaSort(){if(this.sortable){let e=this.localeService.getLocaleTextFunc(),t=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(sZ(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){let e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){let e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){let e=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains(this.beans.gos.getActiveDomElement()))return;let e=Array.from(this.ariaDescriptionProperties.keys()).sort((t,n)=>t==="filter"?-1:n.charCodeAt(0)-t.charCodeAt(0)).map(t=>this.ariaDescriptionProperties.get(t)).join(". ");this.beans.ariaAnnouncementService.announceValue(e)}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(){let e=()=>{if(!this.gos.get("columnHoverHighlight"))return;let t=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",t)};this.addManagedEventListeners({columnHoverChanged:e}),e()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(){let e=i=>this.handleMouseOverChange(i.type==="mouseenter"),t=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column),n=i=>this.handleContextMenuMouseEvent(i,void 0,this.column);this.addManagedListeners(this.getGui(),{mouseenter:e,mouseleave:e,click:t,contextmenu:n})}handleMouseOverChange(e){this.setActiveHeader(e);let n={type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column};this.eventService.dispatchEvent(n)}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){let t=this.comp.getUserCompInstance();return t instanceof rR?t.getAnchorElementForMenu(e):this.getGui()}destroy(){super.destroy(),this.refreshFunctions=null,this.selectAllFeature=null,this.dragSourceElement=null,this.userCompDetails=null,this.userHeaderClasses=null,this.ariaDescriptionProperties=null}},qte=class extends k{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.autoWidthCalculator=e.autoWidthCalculator,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,n,i){super(),this.eResize=t,this.comp=e,this.pinned=n,this.columnGroup=i}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}let e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gos.get("suppressAutoSize")){let t=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{let n=[];this.columnGroup.getDisplayedLeafColumns().forEach(s=>{s.getColDef().suppressAutoSize||n.push(s.getColId())}),n.length>0&&this.columnAutosizeService.autoSizeCols({colKeys:n,skipHeader:t,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(e){let t=this.getInitialValues(e);this.storeLocalValues(t),this.toggleColumnResizing(!0)}onResizing(e,t,n="uiColumnResized"){let i=this.normaliseDragChange(t),s=this.resizeStartWidth+i;this.resizeColumnsFromLocalValues(s,n,e)}getInitialValues(e){let t=this.getColumnsToResize(),n=this.getInitialSizeOfColumns(t),i=this.getSizeRatiosOfColumns(t,n),s={columnsToResize:t,resizeStartWidth:n,resizeRatios:i},r=null;if(e&&(r=this.visibleColsService.getGroupAtDirection(this.columnGroup,"After")),r){let o=r.getDisplayedLeafColumns(),a=s.groupAfterColumns=o.filter(c=>c.isResizable()),l=s.groupAfterStartWidth=this.getInitialSizeOfColumns(a);s.groupAfterRatios=this.getSizeRatiosOfColumns(a,l)}else s.groupAfterColumns=void 0,s.groupAfterStartWidth=void 0,s.groupAfterRatios=void 0;return s}storeLocalValues(e){let{columnsToResize:t,resizeStartWidth:n,resizeRatios:i,groupAfterColumns:s,groupAfterStartWidth:r,groupAfterRatios:o}=e;this.resizeCols=t,this.resizeStartWidth=n,this.resizeRatios=i,this.resizeTakeFromCols=s,this.resizeTakeFromStartWidth=r,this.resizeTakeFromRatios=o}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(e){let t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),n=this.getInitialValues();t>n.resizeStartWidth&&this.resizeColumns(n,t,e,!0)}resizeColumnsFromLocalValues(e,t,n=!0){if(!this.resizeCols||!this.resizeRatios)return;let i={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols??void 0,groupAfterStartWidth:this.resizeTakeFromStartWidth??void 0,groupAfterRatios:this.resizeTakeFromRatios??void 0};this.resizeColumns(i,e,t,n)}resizeColumns(e,t,n,i=!0){let{columnsToResize:s,resizeStartWidth:r,resizeRatios:o,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:c}=e,u=[];if(u.push({columns:s,ratios:o,width:t}),a){let h=t-r;u.push({columns:a,ratios:c,width:l-h})}this.columnSizeService.resizeColumnSets({resizeSets:u,finished:i,source:n}),i&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}getInitialSizeOfColumns(e){return e.reduce((t,n)=>t+n.getActualWidth(),0)}getSizeRatiosOfColumns(e,t){return e.map(n=>n.getActualWidth()/t)}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.clearLocalValues()}},Kte=class extends k{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();let e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){let e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",e===0)}},Qte=class extends PC{constructor(e,t,n){super(e,t,n),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){let i=this.getGui();this.setDragSource(i)}},this.column=e}setComp(e,t,n){this.comp=e,this.setGui(t),this.displayName=this.beans.columnNameService.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.addDestroyFunc(()=>{this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature))}),this.setupUserComp(),this.addHeaderMouseListeners();let i=this.getParentRowCtrl().getPinned(),s=this.column.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new xR(s,t)),this.createManagedBean(new FR(this.column,t,this.beans)),this.createManagedBean(new Kte(e,this.column)),this.resizeFeature=this.createManagedBean(new qte(e,n,i,this.column)),this.createManagedBean(new yl(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners()}resizeHeader(e,t){if(!this.resizeFeature)return;let n=this.resizeFeature.getInitialValues(t);this.resizeFeature.resizeColumns(n,n.resizeStartWidth+e,"uiColumnResized",!0)}moveHeader(e){let{beans:t,eGui:n,column:i,gos:s,ctrlsService:r}=this,o=s.get("enableRtl"),a=e===0,l=this.getPinned(),c=n.getBoundingClientRect(),u=c.left,h=c.width,f=BR(a!==o?u-20:u+h+20,l,!0,s,r),g=i.getGroupId(),v=this.focusService.getFocusedHeader();VR({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,hDirection:e,xPosition:f,pinned:l,fromEnter:!1,fakeEvent:!1,gos:s,columnModel:t.columnModel,columnMoveService:t.columnMoveService,presentedColsService:t.visibleColsService});let y=i.getDisplayedLeafColumns(),C=a?y[0]:xe(y);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(C,"auto"),!this.isAlive()&&v&&this.restoreFocus(g,i,v)}restoreFocus(e,t,n){let i=t.getLeafColumns();if(!i.length)return;let s=i[0].getParent();if(!s)return;let r=this.findGroupWidthId(s,e);r&&this.focusService.focusHeaderPosition({headerPosition:se(B({},n),{column:r})})}findGroupWidthId(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return null}resizeLeafColumnsToFit(e){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(){let e=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:n=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),n,"gridInitializing")},setTooltip:(n,i)=>{this.setupTooltip(n,i)}}),t=this.userComponentFactory.getHeaderGroupCompDetails(e);this.comp.setUserCompDetails(t)}addHeaderMouseListeners(){let e=i=>this.handleMouseOverChange(i.type==="mouseenter"),t=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),n=i=>this.handleContextMenuMouseEvent(i,void 0,this.column.getProvidedColumnGroup());this.addManagedListeners(this.getGui(),{mouseenter:e,mouseleave:e,click:t,contextmenu:n})}handleMouseOverChange(e){let n={type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()};this.eventService.dispatchEvent(n)}setupTooltip(e,t){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));let n=this.column.getColGroupDef(),i=this.gos.get("tooltipShowMode")==="whenTruncated",s=this.eGui;!t&&i&&!n?.headerGroupComponent&&(t=()=>{let o=s.querySelector(".ag-header-group-text");return o?o.scrollWidth>o.clientWidth:!0});let r={getColumn:()=>this.column,getGui:()=>s,getLocation:()=>"headerGroup",getTooltipValue:()=>e??(n&&n.headerTooltip),shouldDisplayTooltip:t};n&&(r.getColDef=()=>n),this.createManagedBean(new Pu(r))}setupExpandable(){let e=this.column.getProvidedColumnGroup();this.refreshExpanded();let t=this.refreshExpanded.bind(this);this.addManagedListeners(e,{expandedChanged:t,expandableChanged:t})}refreshExpanded(){let{column:e}=this;this.expandable=e.isExpandable();let t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){let e=this.column.getColGroupDef(),t=rG(e,this.gos,null,this.column);this.column.isPadding()?(t.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(i=>i.isSpanHeaderHeight())&&t.push("ag-header-span-height")):t.push("ag-header-group-cell-with-group"),t.forEach(n=>this.comp.addOrRemoveCssClass(n,!0))}setupMovingCss(){let t=this.column.getProvidedColumnGroup().getLeafColumns(),n=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());t.forEach(i=>{this.addManagedListeners(i,{movingChanged:n})}),n()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){let t=this.getRowIndex();this.beans.focusService.setFocusedHeader(t,this.column)}}handleKeyDown(e){super.handleKeyDown(e);let t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===N.ENTER){let n=this.column,i=!n.isExpanded();this.beans.columnModel.setColumnGroupOpened(n.getProvidedColumnGroup(),i,"uiColumnExpanded")}}setDragSource(e){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!e))return;let{beans:t,column:n,displayName:i,gos:s,dragAndDropService:r}=this,{columnModel:o}=t,a=n.getProvidedColumnGroup().getLeafColumns(),l=!s.get("suppressDragLeaveHidesColumns"),c=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>l?"hide":"notAllowed",dragItemName:i,getDragItem:()=>this.getDragItemForGroup(n),onDragStarted:()=>{l=!s.get("suppressDragLeaveHidesColumns"),a.forEach(u=>u.setMoving(!0,"uiColumnDragged"))},onDragStopped:()=>a.forEach(u=>u.setMoving(!1,"uiColumnDragged")),onGridEnter:u=>{if(l){let h=u?.columns?.filter(f=>!f.getColDef().lockVisible)||[];o.setColsVisible(h,!0,"uiColumnMoved")}},onGridExit:u=>{if(l){let h=u?.columns?.filter(f=>!f.getColDef().lockVisible)||[];o.setColsVisible(h,!1,"uiColumnMoved")}}};r.addDragSource(c,!0)}getDragItemForGroup(e){let t=e.getProvidedColumnGroup().getLeafColumns(),n={};t.forEach(s=>n[s.getId()]=s.isVisible());let i=[];return this.beans.visibleColsService.getAllCols().forEach(s=>{t.indexOf(s)>=0&&(i.push(s),Jn(t,s))}),t.forEach(s=>i.push(s)),{columns:i,visibleState:n}}isSuppressMoving(){let e=!1;return this.column.getLeafColumns().forEach(n=>{(n.getColDef().suppressMovable||n.getColDef().lockPosition)&&(e=!0)}),e||this.gos.get("suppressMovableColumns")}},Yte=0,WD=class extends k{constructor(e,t,n){super(),this.instanceId=Yte++,this.rowIndex=e,this.pinned=t,this.type=n;let i=n=="group"?"ag-header-row-column-group":n=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${i}`}wireBeans(e){this.beans=e}postConstruct(){this.isPrintLayout=this.gos.isDomLayout("print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}getInstanceId(){return this.instanceId}areCellsRendered(){return this.comp?this.getHeaderCellCtrls().every(e=>e.getGui()!=null):!1}setComp(e,t=!0){this.comp=e,t&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(){let e=this.onRowHeightChanged.bind(this);this.addManagedEventListeners({columnResized:this.onColumnResized.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:t=>this.onVirtualColumnsChanged(t.afterScroll),columnHeaderHeightChanged:e,gridStylesChanged:e,advancedFilterEnabledChanged:e}),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",t=>this.isEnsureDomOrder=t.currentValue),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e)}getHeaderCellCtrl(e){if(this.headerCellCtrls)return gC(this.headerCellCtrls).find(t=>t.getColumnGroupChild()===e)}onDisplayedColumnsChanged(){this.isPrintLayout=this.gos.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){let e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){let{visibleColsService:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){let{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let{columnModel:e,filterManager:t}=this.beans,n=e.getHeaderRowCount(),i=[],s=0;t?.hasFloatingFilters()&&(n++,s=1);let r=e.getColumnGroupHeaderRowHeight(),o=e.getColumnHeaderRowHeight(),a=1+s,l=n-a;for(let h=0;h<l;h++)i.push(r);i.push(o);for(let h=0;h<s;h++)i.push(e.getFloatingFiltersHeight());let c=0;for(let h=0;h<this.rowIndex;h++)c+=i[h];let u=i[this.rowIndex];return{topOffset:c,rowHeight:u}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(e=!1){let t=this.getHeaderCtrls(),n=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,n,e)}getHeaderCtrls(){let e=this.headerCellCtrls;this.headerCellCtrls=new Map;let t=this.getColumnsInViewport();for(let i of t)this.recycleAndCreateHeaderCtrls(i,e);let n=i=>{let{focusService:s,visibleColsService:r}=this.beans;return s.isHeaderWrapperFocused(i)?r.isVisible(i.getColumnGroupChild()):!1};if(e)for(let[i,s]of e)n(s)?this.headerCellCtrls.set(i,s):this.destroyBean(s);return this.getHeaderCellCtrls()}getHeaderCellCtrls(){return Array.from(this.headerCellCtrls?.values()??[])}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls||e.isEmptyGroup())return;let n=e.getUniqueId(),i;if(t&&(i=t.get(n),t.delete(n)),i&&i.getColumnGroupChild()!=e&&(this.destroyBean(i),i=void 0),i==null)switch(this.type){case"filter":{i=this.createBean(this.beans.ctrlsFactory.getInstance("headerFilterCell",e,this.beans,this));break}case"group":i=this.createBean(new Qte(e,this.beans,this));break;default:i=this.createBean(new $te(e,this.beans,this));break}this.headerCellCtrls.set(n,i)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let e=[],t=this.getActualDepth(),{columnViewportService:n}=this.beans;return["left",null,"right"].forEach(i=>{let s=n.getHeadersToRender(i,t);e=e.concat(s)}),e}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnViewportService.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(e){return this.headerCellCtrls?this.getHeaderCellCtrls().find(i=>i.getColumnGroupChild()==e):void 0}focusHeader(e,t){let n=this.findHeaderCellCtrl(e);return n?n.focus(t):!1}destroy(){this.headerCellCtrls&&this.headerCellCtrls.forEach(e=>{this.destroyBean(e)}),this.headerCellCtrls=void 0,super.destroy()}},Jte=class extends k{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}wireBeans(e){this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.focusService=e.focusService,this.filterManager=e.filterManager}setComp(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport);let n=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:n,advancedFilterEnabledChanged:n}),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()}getAllCtrls(){let e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){let t=new Au,n=this.focusService.getFocusHeaderToUseAfterRefresh(),i=()=>{let a=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let l=0;l<a;l++){let c=this.createBean(new WD(t.next(),this.pinned,"group"));this.groupsRowCtrls.push(c)}},s=()=>{let a=t.next(),l=!this.hidden&&(this.columnsRowCtrl==null||!e||this.columnsRowCtrl.getRowIndex()!==a);(l||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),l&&(this.columnsRowCtrl=this.createBean(new WD(a,this.pinned,"column")))},r=()=>{this.includeFloatingFilter=!!this.filterManager?.hasFloatingFilters()&&!this.hidden;let a=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){a();return}let l=t.next();if(this.filtersRowCtrl){let c=this.filtersRowCtrl.getRowIndex()!==l;(!e||c)&&a()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new WD(l,this.pinned,"filter")))};i(),s(),r();let o=this.getAllCtrls();this.comp.setCtrls(o),this.restoreFocusOnHeader(n)}getHeaderCtrlForColumn(e){if(Qo(e))return this.columnsRowCtrl?this.columnsRowCtrl.getHeaderCellCtrl(e):void 0;if(this.groupsRowCtrls.length!==0)for(let t=0;t<this.groupsRowCtrls.length;t++){let n=this.groupsRowCtrls[t].getHeaderCellCtrl(e);if(n)return n}}getHtmlElementForColumnHeader(e){let t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null}getRowType(e){let n=this.getAllCtrls()[e];return n?n.getType():void 0}focusHeader(e,t,n){let s=this.getAllCtrls()[e];return s?s.focusHeader(t,n):!1}getViewport(){return this.eViewport}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}setupDragAndDrop(e){let t=new Wte(this.pinned,e);this.createManagedBean(t)}restoreFocusOnHeader(e){if(!e)return;let{column:t}=e;t.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:e})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){let e=this.filterManager?.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new LR(e=>this.comp.setCenterWidth(`${e}px`),!0))}setupPinnedWidth(){if(this.pinned==null)return;let e=this.pinned==="left",t=this.pinned==="right";this.hidden=!0;let n=()=>{let i=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(i==null)return;let s=i==0,r=this.hidden!==s,o=this.gos.get("enableRtl"),a=this.gos.getScrollbarWidth(),c=this.scrollVisibleService.isVerticalScrollShowing()&&(o&&e||!o&&t)?i+a:i;this.comp.setPinnedContainerWidth(`${c}px`),this.comp.setDisplayed(!s),r&&(this.hidden=s,this.refresh())};this.addManagedEventListeners({leftPinnedWidthChanged:n,rightPinnedWidthChanged:n,scrollVisibilityChanged:n,scrollbarWidthChanged:n})}},Xte='<div class="ag-pinned-left-header" role="rowgroup"></div>',Zte='<div class="ag-pinned-right-header" role="rowgroup"></div>',ene=`<div class="ag-header-viewport" role="presentation">
        <div class="ag-header-container" data-ref="eCenterContainer" role="rowgroup"></div>
    </div>`,jD=class extends Ve{constructor(e){super(),this.eCenterContainer=Z,this.headerRowComps={},this.rowCompsList=[],this.pinned=e}postConstruct(){this.selectAndSetTemplate();let e={setDisplayed:n=>this.setDisplayed(n),setCtrls:n=>this.setCtrls(n),setCenterWidth:n=>this.eCenterContainer.style.width=n,setViewportScrollLeft:n=>this.getGui().scrollLeft=n,setPinnedContainerWidth:n=>{let i=this.getGui();i.style.width=n,i.style.maxWidth=n,i.style.minWidth=n}};this.createManagedBean(new Jte(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){let e=this.pinned=="left",t=this.pinned=="right",n=e?Xte:t?Zte:ene;this.setTemplate(n),this.eRowContainer=this.eCenterContainer!==Z?this.eCenterContainer:this.getGui()}destroy(){this.setCtrls([]),super.destroy()}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){let t=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let n,i=s=>{let r=s.getGui();r.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(r),n&&TB(this.eRowContainer,r,n),n=r};e.forEach(s=>{let r=s.getInstanceId(),o=t[r];delete t[r];let a=o||this.createBean(new Ote(s));this.headerRowComps[r]=a,this.rowCompsList.push(a),i(a)}),Ko(t).forEach(s=>this.destroyRowComp(s))}},tne=class extends Ve{constructor(){super('<div class="ag-header" role="presentation"/>')}postConstruct(){let e={addOrRemoveCssClass:(i,s)=>this.addOrRemoveCssClass(i,s),setHeightAndMinHeight:i=>{this.getGui().style.height=i,this.getGui().style.minHeight=i}};this.createManagedBean(new kte).setComp(e,this.getGui(),this.getFocusableElement());let n=i=>{this.createManagedBean(i),this.appendChild(i)};n(new jD("left")),n(new jD(null)),n(new jD("right"))}},nne={selector:"AG-HEADER-ROOT",component:tne};var GR=class extends k{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){let e=this.getDomLayout(),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},n=t.autoHeight?"ag-layout-auto-height":t.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(n,t)}getDomLayout(){let e=this.gos.get("domLayout")??"normal";return["normal","print","autoHeight"].indexOf(e)===-1?(G(`${e} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):e}},ine=class extends Ve{constructor(){super(`
            <div class="ag-overlay" role="presentation">
                <div class="ag-overlay-panel" role="presentation">
                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>
                </div>
            </div>`),this.eOverlayWrapper=Z,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeOverlayWrapperCssClass=null}wireBeans(e){this.overlayService=e.overlayService}updateLayoutClasses(e,t){let n=this.eOverlayWrapper.classList;n.toggle("ag-layout-auto-height",t.autoHeight),n.toggle("ag-layout-normal",t.normal),n.toggle("ag-layout-print",t.print)}postConstruct(){this.createManagedBean(new GR(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.registerOverlayWrapperComp(this)}setWrapperTypeClass(e){let t=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&t.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,t.toggle(e,!0)}showOverlay(e,t,n){this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.activePromise=e,e?.then(i=>{if(this.activePromise!==e){this.activeOverlay!==i&&(this.destroyBean(i),i=null);return}if(this.activePromise=null,!!i&&this.activeOverlay!=i&&(this.eOverlayWrapper.appendChild(i.getGui()),this.activeOverlay=i,n)){let s=i;this.updateListenerDestroyFunc=this.addManagedPropertyListener(n,({currentValue:r})=>{s.refresh?.(this.gos.addGridCommonParams(B({},r??{})))})}}),this.setDisplayed(!0,{skipAriaHidden:!0})}destroyActiveOverlay(){this.activePromise=null;let e=this.activeOverlay;if(!e)return;this.activeOverlay=null;let t=this.updateListenerDestroyFunc;t&&(t(),this.updateListenerDestroyFunc=null),this.destroyBean(e),xn(this.eOverlayWrapper)}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.destroyActiveOverlay(),super.destroy()}},sne={selector:"AG-OVERLAY-WRAPPER",component:ine},gG=class extends Ve{constructor(e,t){super(),this.direction=t,this.eViewport=Z,this.eContainer=Z,this.hideTimeout=null,this.setTemplate(e)}wireBeans(e){this.animationFrameService=e.animationFrameService}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",wB()||Yo())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=_B(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){let e=this.getGui(),t=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),n=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:n,touchend:n})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)}})}attemptSettingScrollPosition(e){let t=this.getViewport();OX(()=>bs(t),()=>this.setScrollPosition(e),100)}getViewport(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedElementListeners(this.getViewport(),{scroll:e})}},rne=class extends gG{constructor(){super(`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>
        </div>`,"horizontal"),this.eLeftSpacer=Z,this.eRightSpacer=Z}wireBeans(e){super.wireBeans(e),this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){super.postConstruct();let e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new LR(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;let e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){let e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.visibleColsService.getDisplayedColumnsRightWidth(),n=!this.enableRtl&&e,i=this.gos.getScrollbarWidth();n&&(t+=i),_s(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=i);let s=this.visibleColsService.getColsLeftWidth();this.enableRtl&&e&&(s+=i),_s(this.eLeftSpacer,s),this.eLeftSpacer.classList.toggle("ag-scroller-corner",s<=i)}setScrollVisible(){let e=this.scrollVisibleService.isHorizontalScrollShowing(),t=this.invisibleScrollbar,n=this.gos.get("suppressHorizontalScroll"),i=e&&this.gos.getScrollbarWidth()||0,r=n?0:i===0&&t?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),df(this.getGui(),r),df(this.eViewport,r),df(this.eContainer,r),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return DC(this.getViewport(),this.enableRtl)}setScrollPosition(e){bs(this.getViewport())||this.attemptSettingScrollPosition(e),RC(this.getViewport(),e,this.enableRtl)}},one={selector:"AG-FAKE-HORIZONTAL-SCROLL",component:rne},mG=class extends k{wireBeans(e){this.maxDivHeightScaler=e.rowContainerHeightService}constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this)})}onHeightChanged(){let e=this.maxDivHeightScaler.getUiContainerHeight(),t=e!=null?`${e}px`:"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)}},ane=class extends gG{wireBeans(e){super.wireBeans(e),this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}constructor(){super(`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>
            </div>
        </div>`,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new mG(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this)})}setScrollVisible(){let e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.invisibleScrollbar,n=e&&this.gos.getScrollbarWidth()||0,i=n===0&&t?16:n;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),_s(this.getGui(),i),_s(this.eViewport,i),_s(this.eContainer,i),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){let{ctrlsService:e}=this,n=e.getGridBodyCtrl().getBodyViewportElement(),i=this.getScrollPosition(),s=n.scrollTop;i!=s&&this.setScrollPosition(s,!0)}getScrollPosition(){return this.getViewport().scrollTop}setScrollPosition(e,t){!t&&!bs(this.getViewport())&&this.attemptSettingScrollPosition(e),this.getViewport().scrollTop=e}},lne={selector:"AG-FAKE-VERTICAL-SCROLL",component:ane},cne=class extends k{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=Xn(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=Xn(()=>this.lastScrollSource[0]=null,500)}wireBeans(e){this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.rowModel=e.rowModel,this.heightScaler=e.rowContainerHeightService,this.rowRenderer=e.rowRenderer,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)}),this.ctrlsService.whenReady(e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){let{fakeHScrollComp:e,fakeVScrollComp:t}=this.ctrlsService.getParams();this.addManagedElementListeners(this.centerRowsCtrl.getViewportElement(),{scroll:this.onHScroll.bind(this)}),e.onScrollCallback(this.onFakeHScroll.bind(this));let n=this.gos.get("debounceVerticalScrollbar"),i=n?Xn(this.onVScroll.bind(this),100):this.onVScroll.bind(this),s=n?Xn(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedElementListeners(this.eBodyViewport,{scroll:i}),t.onScrollCallback(s)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){if(this.centerRowsCtrl==null)return;e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft());let n=this.enableRtl?e:-e,{topCenter:i,stickyTopCenter:s,stickyBottomCenter:r,centerHeader:o,bottomCenter:a,fakeHScrollComp:l}=this.ctrlsService.getParams();o.setHorizontalScroll(-n),a.setContainerTranslateX(n),i.setContainerTranslateX(n),s.setContainerTranslateX(n),r.setContainerTranslateX(n);let c=this.centerRowsCtrl.getViewportElement(),u=this.lastScrollSource[1]===0;e=Math.abs(e),u?l.setScrollPosition(e):RC(c,e,this.enableRtl)}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(this.lastScrollSource[t]=e,!0):this.lastScrollSource[t]===e}onFakeHScroll(){this.isControllingScroll(1,1)&&this.onHScrollCommon(1)}onHScroll(){this.isControllingScroll(0,1)&&this.onHScrollCommon(0)}onHScrollCommon(e){let t=this.centerRowsCtrl.getViewportElement(),{scrollLeft:n}=t;if(this.shouldBlockScrollUpdate(1,n,!0))return;let i;e===0?i=DC(t,this.enableRtl):i=this.ctrlsService.get("fakeHScrollComp").getScrollPosition(),this.doHorizontalScroll(Math.round(i)),this.resetLastHScrollDebounced()}onFakeVScroll(){this.isControllingScroll(1,0)&&this.onVScrollCommon(1)}onVScroll(){this.isControllingScroll(0,0)&&this.onVScrollCommon(0)}onVScrollCommon(e){let t;e===0?t=this.eBodyViewport.scrollTop:t=this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),!this.shouldBlockScrollUpdate(0,t,!0)&&(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,e===0?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){let t=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){let t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{let n=se(B({},t),{type:"bodyScrollEnd"});this.eventService.dispatchEvent(n)},100)}shouldBlockScrollUpdate(e,t,n=!1){return n&&!Yo()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){let t=SR(this.eBodyViewport),{scrollHeight:n}=this.eBodyViewport;return e<0||e+t>n}shouldBlockHorizontalScroll(e){let t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:n}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl&&EC()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>n}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(0)}scrollGridIfNeeded(){let e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e,t=!1){let i=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl&&EC()?e=e>0?0:i:e=Math.min(Math.max(e,0),i)),RC(this.centerRowsCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){let t=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){let n=this.rowModel.getRowCount(),i=-1;for(let s=0;s<n;s++){let r=this.rowModel.getRow(s);if(typeof e=="function"){if(r&&e(r)){i=s;break}}else if(e===r||e===r.data){i=s;break}}i>=0&&this.ensureIndexVisible(i,t)}ensureIndexVisible(e,t){if(this.gos.isDomLayout("print"))return;let n=this.rowModel.getRowCount();if(typeof e!="number"||e<0||e>=n){G("Invalid row index for ensureIndexVisible: "+e);return}let s=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{s||this.paginationService?.goToPageWithIndex(e);let r=this.ctrlsService.getGridBodyCtrl(),o=r.getStickyTopHeight(),a=r.getStickyBottomHeight(),l=this.rowModel.getRow(e),c;do{let u=l.rowTop,h=l.rowHeight,f=this.pageBoundsService.getPixelOffset(),g=l.rowTop-f,v=g+l.rowHeight,y=this.getVScrollPosition(),C=this.heightScaler.getDivStretchOffset(),E=y.top+C,I=y.bottom+C,T=I-E,x=this.heightScaler.getScrollPositionForPixel(g),z=this.heightScaler.getScrollPositionForPixel(v-T),V=Math.min((x+z)/2,g),b=E+o>g,S=I-a<v,_=null;t==="top"?_=x:t==="bottom"?_=z:t==="middle"?_=V:b?_=x-o:S&&(_=z+a),_!==null&&(this.setVerticalScrollPosition(_),this.rowRenderer.redraw({afterScroll:!0})),c=u!==l.rowTop||h!==l.rowHeight}while(c);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(e,t="auto"){let n=this.columnModel.getCol(e);if(!n||n.isPinned()||!this.visibleColsService.isColDisplayed(n))return;let i=this.getPositionedHorizontalScroll(n,t);this.getFrameworkOverrides().wrapIncoming(()=>{i!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(i),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(e,t){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(t),this.setVerticalScrollPosition(e),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(e,t){let{columnBeforeStart:n,columnAfterEnd:i}=this.isColumnOutsideViewport(e),s=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),r=this.centerRowsCtrl.getCenterWidth(),o=this.enableRtl,a=(o?n:i)||s,l=o?i:n;t!=="auto"&&(a=t==="start",l=t==="end");let c=t==="middle";if(a||l||c){let{colLeft:u,colMiddle:h,colRight:f}=this.getColumnBounds(e);return c?h-r/2:a?o?f:u:o?u-r:f-r}return null}isColumnOutsideViewport(e){let{start:t,end:n}=this.getViewportBounds(),{colLeft:i,colRight:s}=this.getColumnBounds(e),r=this.enableRtl,o=r?t>s:n<s,a=r?n<i:t>i;return{columnBeforeStart:o,columnAfterEnd:a}}getColumnBounds(e){let t=this.enableRtl,n=this.visibleColsService.getBodyContainerWidth(),i=e.getActualWidth(),s=e.getLeft(),r=t?-1:1,o=t?n-s:s,a=o+i*r,l=o+i/2*r;return{colLeft:o,colMiddle:l,colRight:a}}getViewportBounds(){let e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),n=t,i=e+t;return{start:n,end:i,width:e}}},vG="ag-force-vertical-scroll",une="ag-selectable",dne="ag-column-moving",hne=class extends k{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.menuService=e.menuService,this.headerNavigationService=e.headerNavigationService,this.dragAndDropService=e.dragAndDropService,this.pinnedRowModel=e.pinnedRowModel,this.rowRenderer=e.rowRenderer,this.popupService=e.popupService,this.mouseEventService=e.mouseEventService,this.rowModel=e.rowModel,this.filterManager=e.filterManager,this.environment=e.environment}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,t,n,i,s,r,o){this.comp=e,this.eGridBody=t,this.eBodyViewport=n,this.eTop=i,this.eBottom=s,this.eStickyTop=r,this.eStickyBottom=o,this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",a=>this.setCellTextSelection(a.currentValue)),this.createManagedBean(new GR(this.comp)),this.bodyScrollFeature=this.createManagedBean(new cne(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([i,n,s,r,o]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.filterManager?.setupAdvancedFilterHeaderComp(i),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),pinnedRowDataChanged:this.setFloatingHeights.bind(this),pinnedHeightChanged:this.setFloatingHeights.bind(this),headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}addFocusListeners(e){e.forEach(t=>{this.addManagedElementListeners(t,{focusin:n=>{let{target:i}=n,s=Du(i,"ag-root",t);t.classList.toggle("ag-has-focus",!s)},focusout:n=>{let{target:i,relatedTarget:s}=n,r=t.contains(s),o=Du(s,"ag-root",t);Du(i,"ag-root",t)||(!r||o)&&t.classList.remove("ag-has-focus")}})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(dne,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(une,e)}onScrollVisibilityChanged(){let e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyWidth(e),this.setStickyBottomOffsetBottom();let t=e&&this.gos.getScrollbarWidth()||0,n=_B()?16:0,i=`calc(100% + ${t+n}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(i))}onGridColumnsChanged(){let e=this.columnModel.getCols();this.comp.setColumnCount(e.length)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;let e=n=>{let i=n.relatedTarget;if(sR(i)===null){this.rowRenderer.stopEditing();return}let s=t.some(r=>r.contains(i))&&this.mouseEventService.isElementInThisGrid(i);if(!s){let r=this.popupService;s=r.getActivePopups().some(o=>o.contains(i))||r.isElementWithinCustomPopup(i)}s||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];t.forEach(n=>this.addManagedElementListeners(n,{focusout:e}))}updateRowCount(){let e=this.headerNavigationService.getHeaderRowCount()+(this.filterManager?.getHeaderRowCount()??0),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,n=t===-1?-1:e+t;this.comp.setRowCount(n)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){let t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){let e=this.gos.get("alwaysShowVerticalScroll"),t=e?vG:null,n=this.gos.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||n&&RZ(this.eBodyViewport)}setupRowAnimationCssClass(){let e=this.environment.hasMeasuredSizes(),t=()=>{let n=e&&this.gos.isAnimateRows()&&!this.rowContainerHeightService.isStretching(),i=n?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(i,n)};t(),this.addManagedEventListeners({heightScaleChanged:t}),this.addManagedPropertyListener("animateRows",t),this.addManagedEventListeners({gridStylesChanged:()=>{!e&&this.environment.hasMeasuredSizes()&&(e=!0,t())}})}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){let e=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:e}),this.mockContextMenuForIPad(e),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){let e=this.eBodyViewport.querySelector(".ag-full-width-container"),t=this.eBodyViewport.querySelector(".ag-center-cols-viewport");e&&t&&this.addManagedElementListeners(e,{wheel:n=>this.onFullWidthContainerWheel(n,t)})}onFullWidthContainerWheel(e,t){!e.deltaX||Math.abs(e.deltaY)>Math.abs(e.deltaX)||!this.mouseEventService.isEventFromThisGrid(e)||(e.preventDefault(),t.scrollBy({left:e.deltaX}))}onBodyViewportContextMenu(e,t,n){if(!e&&!n)return;this.gos.get("preventDefaultOnContextMenu")&&(e||n).preventDefault();let{target:i}=e||t;(i===this.eBodyViewport||i===this.ctrlsService.get("center").getViewportElement())&&this.menuService.showContextMenu({mouseEvent:e,touchEvent:n,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(e){if(!Yo())return;let t=new qo(this.eBodyViewport),n=i=>{e(void 0,i.touchStart,i.touchEvent)};this.addManagedListeners(t,{longTap:n}),this.addDestroyFunc(()=>t.destroy())}onBodyViewportWheel(e){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}onStickyWheel(e){e.preventDefault(),e.offsetY&&this.scrollVertically(e.deltaY)}getGui(){return this.eGridBody}scrollVertically(e){let t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new wee(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)}getRowDragFeature(){return this.rowDragFeature}setFloatingHeights(){let{pinnedRowModel:e}=this,t=e.getPinnedTopTotalHeight(),n=e.getPinnedBottomTotalHeight();this.comp.setTopHeight(t),this.comp.setBottomHeight(n),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(n?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{let t=this.gos.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){let t=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+(this.filterManager?.getHeaderHeight()??0),n=this.pinnedRowModel.getPinnedTopTotalHeight(),i=0;t>0&&(i+=t),n>0&&(i+=n),i>0&&(i+=1),this.comp.setStickyTopTop(`${i}px`)}setStickyBottomOffsetBottom(){let e=this.pinnedRowModel.getPinnedBottomTotalHeight(),n=this.scrollVisibleService.isHorizontalScrollShowing()&&this.gos.getScrollbarWidth()||0,i=e+n;this.comp.setStickyBottomBottom(`${i}px`)}sizeColumnsToFit(e,t){let i=this.isVerticalScrollShowing()?this.gos.getScrollbarWidth():0,r=wf(this.eGridBody)-i;if(r>0){this.columnSizeService.sizeColumnsToFit(r,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFit(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFit(e,-1)},500):G("tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}},fne=class extends Ve{constructor(e,t,n,i,s){super(),this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.column=t.getColumn(),this.rowNode=t.getRowNode(),this.rowCtrl=t.getRowCtrl(),this.eRow=i,this.cellCtrl=t;let r=document.createElement("div");r.setAttribute("comp-id",`${this.getCompId()}`),this.setTemplateFromElement(r);let o=this.getGui();this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1);let a=(u,h)=>{h!=null&&h!=""?o.setAttribute(u,h):o.removeAttribute(u)};ai(o,t.getCellAriaRole()),a("col-id",t.getColumnIdSanitised());let l=t.getTabIndex();l!==void 0&&a("tabindex",l.toString());let c={addOrRemoveCssClass:(u,h)=>this.addOrRemoveCssClass(u,h),setUserStyles:u=>AB(o,u),getFocusableElement:()=>this.getFocusableElement(),setIncludeSelection:u=>this.includeSelection=u,setIncludeRowDrag:u=>this.includeRowDrag=u,setIncludeDndSource:u=>this.includeDndSource=u,setRenderDetails:(u,h,f)=>this.setRenderDetails(u,h,f),setEditDetails:(u,h,f)=>this.setEditDetails(u,h,f),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};t.setComp(c,this.getGui(),this.eCellWrapper,n,s)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(e,t,n){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;let s=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!(n||s)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(t))}setEditDetails(e,t,n){e?this.createCellEditorInstance(e,t,n):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(e){let t=this.includeRowDrag||this.includeDndSource||this.includeSelection,n=t||this.forceWrapper,i=n&&this.eCellWrapper==null;if(i){let c=document.createElement("div");c.setAttribute("role","presentation"),c.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=c,this.getGui().appendChild(this.eCellWrapper)}let s=!n&&this.eCellWrapper!=null;s&&(Qi(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!n);let r=!e&&n,o=r&&this.eCellValue==null;if(o){let c=document.createElement("span");c.setAttribute("role","presentation"),c.setAttribute("class","ag-cell-value"),this.eCellValue=c,this.eCellWrapper.appendChild(this.eCellValue)}let a=!r&&this.eCellValue!=null;a&&(Qi(this.eCellValue),this.eCellValue=void 0);let l=i||s||o||a;return l&&this.removeControls(),e||t&&this.addControls(),l}addControls(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(e,t,n){let i=this.editorVersion,s=e.newAgStackInstance();if(s==null)return;let{params:r}=e;s.then(a=>this.afterCellEditorCreated(i,a,r,t,n)),Pe(this.cellEditor)&&r.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){let t=this.getParentOfValue();xn(t);let n=e!=null?rr(e,!0):null;n!=null&&(t.textContent=n)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){let{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),Qi(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){let{context:e}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),Qi(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==e.componentClass)return!1;let t=this.cellRenderer.refresh(e.params);return t===!0||t===void 0}createCellRendererInstance(e){let n=!this.beans.gos.get("suppressAnimationFrame"),i=this.rendererVersion,{componentClass:s}=e,r=()=>{if(this.rendererVersion!==i||!this.isAlive())return;let a=e.newAgStackInstance(),l=this.afterCellRendererCreated.bind(this,i,s);a&&a.then(l)};n&&this.firstRender?this.beans.animationFrameService.createTask(r,this.rowNode.rowIndex,"createTasksP2"):r()}getCtrl(){return this.cellCtrl}getRowCtrl(){return this.rowCtrl}getCellRenderer(){return this.cellRenderer}getCellEditor(){return this.cellEditor}afterCellRendererCreated(e,t,n){if(!this.isAlive()||e!==this.rendererVersion){this.beans.context.destroyBean(n);return}if(this.cellRenderer=n,this.cellRendererClass=t,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){let s=this.getParentOfValue();xn(s),s.appendChild(this.cellRendererGui)}}afterCellEditorCreated(e,t,n,i,s){if(e!==this.editorVersion){this.beans.context.destroyBean(t);return}if(t.isCancelBeforeStart&&t.isCancelBeforeStart()){this.beans.context.destroyBean(t),this.cellCtrl.stopEditing(!0);return}if(!t.getGui){G(`cellEditor for column ${this.column.getId()} is missing getGui() method`),this.beans.context.destroyBean(t);return}this.cellEditor=t,this.cellEditorGui=t.getGui();let a=i||t.isPopup!==void 0&&t.isPopup();a?this.addPopupCellEditor(n,s):this.addInCellEditor(),this.refreshEditStyles(!0,a),t.afterGuiAttached&&t.afterGuiAttached()}refreshEditStyles(e,t){this.addOrRemoveCssClass("ag-cell-inline-editing",e&&!t),this.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!t),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!t),this.rowCtrl?.setInlineEditingCss(e)}addInCellEditor(){let e=this.getGui();e.contains(this.beans.gos.getActiveDomElement())&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(e,t){this.beans.gos.get("editType")==="fullRow"&&G("popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");let n=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(this.beans.editService.createPopupEditorWrapper(e));let i=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&i.appendChild(this.cellEditorGui);let s=this.beans.popupService,r=this.beans.gos.get("stopEditingWhenCellsLoseFocus"),o=t??(n.getPopupPosition?n.getPopupPosition():"over"),a=this.beans.gos.get("enableRtl"),l={ePopup:i,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:o,alignSide:a?"right":"left",keepWithinBounds:!0},c=s.positionPopupByComponent.bind(s,l),u=this.beans.localeService.getLocaleTextFunc(),h=s.addPopup({modal:r,eChild:i,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:c,ariaLabel:u("ariaLabelCellEditor","Cell Editor")});h&&(this.hideEditorPopup=h.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){let e=this.getGui();e.contains(this.beans.gos.getActiveDomElement())&&iR()&&e.focus({preventScroll:!0}),xn(this.getParentOfValue())}},pne=class extends Ve{constructor(e,t,n){super(),this.cellComps={},this.beans=t,this.rowCtrl=e;let i=document.createElement("div");i.setAttribute("comp-id",`${this.getCompId()}`),i.setAttribute("style",this.getInitialStyle(n)),this.setTemplateFromElement(i);let s=this.getGui(),r=s.style;this.domOrder=this.rowCtrl.getDomOrder(),ai(s,"row");let o=this.rowCtrl.getTabIndex();o!=null&&s.setAttribute("tabindex",o.toString());let a={setDomOrder:l=>this.domOrder=l,setCellCtrls:l=>this.setCellCtrls(l),showFullWidth:l=>this.showFullWidth(l),getFullWidthCellRenderer:()=>this.getFullWidthCellRenderer(),addOrRemoveCssClass:(l,c)=>this.addOrRemoveCssClass(l,c),setUserStyles:l=>AB(s,l),setTop:l=>r.top=l,setTransform:l=>r.transform=l,setRowIndex:l=>s.setAttribute("row-index",l),setRowId:l=>s.setAttribute("row-id",l),setRowBusinessKey:l=>s.setAttribute("row-business-key",l),refreshFullWidth:l=>this.refreshFullWidth(l)};e.setComp(a,this.getGui(),n),this.addDestroyFunc(()=>{e.unsetComp(n)})}getInitialStyle(e){let t=this.rowCtrl.getInitialTransform(e);return t?`transform: ${t}`:`top: ${this.rowCtrl.getInitialRowTop(e)}`}showFullWidth(e){let t=i=>{if(this.isAlive()){let s=i.getGui();this.getGui().appendChild(s),this.rowCtrl.setupDetailRowAutoHeight(s),this.setFullWidthRowComp(i)}else this.beans.context.destroyBean(i)},n=e.newAgStackInstance();n&&n.then(t)}setCellCtrls(e){let t=Object.assign({},this.cellComps);e.forEach(i=>{let s=i.getInstanceId();this.cellComps[s]==null?this.newCellComp(i):t[s]=null});let n=Ko(t).filter(i=>i!=null);this.destroyCells(n),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;let t=[];e.forEach(n=>{let i=this.cellComps[n.getInstanceId()];i&&t.push(i.getGui())}),IB(this.getGui(),t)}newCellComp(e){let t=new fne(this.beans,e,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[e.getInstanceId()]=t,this.getGui().appendChild(t.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){let e=Ko(this.cellComps).filter(t=>t!=null);this.destroyCells(e)}setFullWidthRowComp(e){this.fullWidthCellRenderer&&ke("should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=e,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}getFullWidthCellRenderer(){return this.fullWidthCellRenderer}destroyCells(e){e.forEach(t=>{if(!t)return;let n=t.getCtrl().getInstanceId();this.cellComps[n]===t&&(t.detach(),t.destroy(),this.cellComps[n]=null)})}refreshFullWidth(e){let{fullWidthCellRenderer:t}=this;if(!t||!t.refresh)return!1;let n=e();return t.refresh(n)}},gne=class extends k{wireBeans(e){this.ctrlsService=e.ctrlsService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.columnViewportService=e.columnViewportService}constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){let e=()=>this.onCenterViewportResized();this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();let e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnSizeService.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){let e=this.gridBodyCtrl.getBodyViewportElement(),t=wf(e);if(t<=50)return;let n=this.getPinnedColumnsOverflowingViewport(t-50),i=this.gos.getCallback("processUnpinnedColumns");n.length&&(i&&(n=i({columns:n,viewportWidth:t})),this.columnModel.setColsPinned(n,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(e){let t=this.pinnedWidthService.getPinnedRightWidth(),n=this.pinnedWidthService.getPinnedLeftWidth(),i=t+n;if(i<e)return[];let s=[...this.visibleColsService.getLeftCols()],r=[...this.visibleColsService.getRightCols()],o=0,a=0,l=0,c=[],u=i-l-e;for(;(a<s.length||o<r.length)&&u>0;){if(o<r.length){let h=r[o++];u-=h.getActualWidth(),c.push(h)}if(a<s.length&&u>0){let h=s[a++];u-=h.getActualWidth(),c.push(h)}}return c}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){let e=this.gridBodyCtrl.getBodyViewportElement(),t=SR(e);if(this.bodyHeight!==t){this.bodyHeight=t;let n={type:"bodyHeightChanged"};this.eventService.dispatchEvent(n)}}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){let e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){let e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnViewportService.setScrollPosition(e,t)}},mne=class extends k{wireBeans(e){this.dragService=e.dragService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListener("enableRangeSelection",t=>{if(t.currentValue){this.enableFeature();return}this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),this.gos.get("enableRangeSelection")&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}},vne=class extends Ve{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[RR]),this.eCheckbox=Z}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){let e=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),n=CR(e,t),[i,s]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],r=e(i,s);this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel(`${r} (${n})`)}onClicked(e,t,n){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:n.shiftKey,groupSelectsFiltered:t,event:n,source:"checkboxSelected"})}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:i=>Ru(i),click:i=>{Ru(i);let s=this.gos.get("groupSelectsFiltered"),r=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(r,s)?this.onClicked(!0,s,i||{})===0&&this.onClicked(!1,s,i):r?this.onClicked(!1,s,i):this.onClicked(!0,s,i||{})}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.gos.get("isRowSelectable")||typeof this.getIsVisible()=="function"){let i=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:i}),this.addManagedListeners(this.rowNode,{dataChanged:i,cellChanged:i}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,t){return t&&(this.eCheckbox.getPreviousValue()===void 0||e===void 0)&&this.gos.isRowModelType("clientSide")}showOrHideSelect(){let e=this.rowNode.selectable,t=this.getIsVisible();if(e)if(typeof t=="function"){let i=this.overrides?.callbackParams;if(!this.column)e=t(se(B({},i),{node:this.rowNode,data:this.rowNode.data}));else{let s=this.column.createColumnFunctionCallbackParams(this.rowNode);e=t(B(B({},i),s))}}else e=t??!1;if(this.column?.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!e),this.setVisible(!0),this.setDisplayed(!0);return}if(this.overrides?.removeHidden){this.setDisplayed(e);return}this.setVisible(e)}getIsVisible(){return this.overrides?this.overrides.isVisible:this.column?.getColDef()?.checkboxSelection}},Cne=class extends Ve{constructor(e,t,n){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=n}postConstruct(){this.getGui().appendChild(Ai("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){let t=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);let n=()=>{try{let i=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",i),e.dataTransfer.setData("text/plain",i)}catch{}};if(t){let i=this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:e});t(i)}else n()}checkVisibility(){let e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}},yne=class extends k{constructor(e,t){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){let e=this.column.getColDef(),{cellClassRules:t}=e,n=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(t===this.cellClassRules?void 0:this.cellClassRules,t,n,i=>this.cellComp.addOrRemoveCssClass(i,!0),i=>this.cellComp.addOrRemoveCssClass(i,!1)),this.cellClassRules=t}applyUserStyles(){let e=this.column.getColDef();if(!e.cellStyle)return;let t;if(typeof e.cellStyle=="function"){let n=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),i=e.cellStyle;t=i(n)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){let e=this.column.getColDef(),t=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(n=>this.cellComp.addOrRemoveCssClass(n,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,t),this.staticClasses.length&&this.staticClasses.forEach(n=>this.cellComp.addOrRemoveCssClass(n,!0))}destroy(){super.destroy()}},wne=class extends k{constructor(e,t,n,i,s){super(),this.cellCtrl=e,this.beans=t,this.rowNode=i,this.rowCtrl=s}setComp(e){this.eGui=e}onKeyDown(e){let t=e.key;switch(t){case N.ENTER:this.onEnterKeyDown(e);break;case N.F2:this.onF2KeyDown(e);break;case N.ESCAPE:this.onEscapeKeyDown(e);break;case N.TAB:this.onTabKeyDown(e);break;case N.BACKSPACE:case N.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case N.DOWN:case N.UP:case N.RIGHT:case N.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;let t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){let{cellCtrl:n,beans:i,rowNode:s}=this,{gos:r,rangeService:o,eventService:a}=i;if(!n.isEditing()){if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),Hee(e,r.get("enableCellEditingOnBackspace"))){if(o&&r.get("enableRangeSelection"))o.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(n.isCellEditable()){let l=n.getColumn(),c=this.beans.valueService.parseValue(l,s,"",s.getValueFromValueService(l))??null;s.setDataValue(l,c,"cellClear")}}else n.startRowOrCellEdit(e,t);a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){let t=e.shiftKey?N.UP:N.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(N.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(N.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;let i=e.key;i===" "?this.onSpaceKeyDown(e):(this.cellCtrl.startRowOrCellEdit(i,e),e.preventDefault())}onSpaceKeyDown(e){let{gos:t}=this.beans;if(!this.cellCtrl.isEditing()&&t.isRowSelection()){let n=this.rowNode.isSelected(),i=!n;if(i||!t.get("suppressRowDeselection")){let s=this.beans.gos.get("groupSelectsFiltered"),r=this.rowNode.setSelectedParams({newValue:i,rangeSelect:e.shiftKey,groupSelectsFiltered:s,event:e,source:"spaceKey"});n===void 0&&r===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:s,event:e,source:"spaceKey"})}}e.preventDefault()}destroy(){super.destroy()}},Sne=class extends k{constructor(e,t,n){super(),this.cellCtrl=e,this.beans=t,this.column=n}onMouseEvent(e,t){if(!$o(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(e),e.preventDefault();return}let{eventService:t,rangeService:n,gos:i}=this.beans,s=e.ctrlKey||e.metaKey;n&&s&&n.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&n.intersectLastRange(!0);let r=this.cellCtrl.createEvent(e,"cellClicked");t.dispatchEvent(r);let o=this.column.getColDef();o.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{o.onCellClicked(r)})},0),(i.get("singleClickEdit")||o.singleClickEdit)&&!i.get("suppressClickEdit")&&!(e.shiftKey&&n?.getCellRanges().length!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!Yo()||nB("dblclick"))return!1;let e=new Date().getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t}onCellDoubleClicked(e){let{column:t,beans:n,cellCtrl:i}=this,{eventService:s,frameworkOverrides:r,gos:o}=n,a=t.getColDef(),l=i.createEvent(e,"cellDoubleClicked");s.dispatchEvent(l),typeof a.onCellDoubleClicked=="function"&&window.setTimeout(()=>{r.wrapOutgoing(()=>{a.onCellDoubleClicked(l)})},0),!o.get("singleClickEdit")&&!o.get("suppressClickEdit")&&i.startRowOrCellEdit(null,e)}onMouseDown(e){let{ctrlKey:t,metaKey:n,shiftKey:i}=e,s=e.target,{cellCtrl:r,beans:o}=this,{eventService:a,rangeService:l,focusService:c,gos:u}=o;if(this.isRightClickInExistingRange(e))return;let h=l&&l.getCellRanges().length!=0;if(!i||!h){let g=u.get("enableCellTextSelection")&&e.defaultPrevented,v=(qr()||g)&&!r.isEditing()&&!wR(s);r.focusCell(v)}if(i&&h&&!c.isCellFocused(r.getCellPosition())){e.preventDefault();let f=c.getFocusedCell();if(f){let{column:g,rowIndex:v,rowPinned:y}=f,E=o.rowRenderer.getRowByPosition({rowIndex:v,rowPinned:y})?.getCellCtrl(g);E?.isEditing()&&E.stopEditing(),c.setFocusedCell({column:g,rowIndex:v,rowPinned:y,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(s)){if(l){let f=this.cellCtrl.getCellPosition();if(i)l.extendLatestRangeToCell(f);else{let g=t||n;l.setRangeToCell(f,g)}}a.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){let{rangeService:t}=this.beans;if(t){let n=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),i=e.button===2||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(n&&i)return!0}return!1}containsWidget(e){return Du(e,"ag-selection-checkbox",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;let t=this.cellCtrl.createEvent(e,"cellMouseOut");this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;let t=this.cellCtrl.createEvent(e,"cellMouseOver");this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;let t=this.cellCtrl.getGui(),n=t.contains(e.target),i=t.contains(e.relatedTarget);return n&&i}destroy(){super.destroy()}},_ne=class extends k{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}setComp(e){this.eGui=e,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){let e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))}onDisplayColumnsChanged(){let e=this.getColSpanningList();vl(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eGui)return;let e=this.getCellWidth();this.eGui.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){let e=this.column.getColSpan(this.rowNode),t=[];if(e===1)t.push(this.column);else{let n=this.column,i=this.column.getPinned();for(let s=0;n&&s<e&&(t.push(n),n=this.beans.visibleColsService.getColAfter(n),!(!n||Pe(n)||i!==n.getPinned()));s++);}return t}onLeftChanged(){if(!this.eGui)return;let e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=xe(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return e;let t=this.beans.visibleColsService.getColsLeftWidth();if(this.column.getPinned()==="right"){let n=this.beans.visibleColsService.getBodyContainerWidth();return t+n+(e||0)}return t+(e||0)}applyRowSpan(e){if(this.rowSpan===1&&!e)return;let n=this.beans.gos.getRowHeightAsNumber()*this.rowSpan;this.eGui.style.height=`${n}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}};var rf="ag-cell-range-selected",bne="ag-cell-range-chart",Ene="ag-cell-range-single-cell",Dne="ag-cell-range-chart-category",Rne="ag-cell-range-handle",Tne="ag-cell-range-top",Ine="ag-cell-range-right",Ane="ag-cell-range-bottom",Mne="ag-cell-range-left",Pne=class{constructor(e,t){this.beans=e,this.rangeService=e.rangeService,this.selectionHandleFactory=e.selectionHandleFactory,this.cellCtrl=t}setComp(e,t){this.cellComp=e,this.eGui=t,this.onRangeSelectionChanged()}onRangeSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(rf,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${rf}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${rf}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${rf}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${rf}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(bne,this.hasChartRange),_C(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(Ene,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){let e=this.getRangeBorders(),t=this.isSingleCell(),n=!t&&e.top,i=!t&&e.right,s=!t&&e.bottom,r=!t&&e.left;this.cellComp.addOrRemoveCssClass(Tne,n),this.cellComp.addOrRemoveCssClass(Ine,i),this.cellComp.addOrRemoveCssClass(Ane,s),this.cellComp.addOrRemoveCssClass(Mne,r)}isSingleCell(){let{rangeService:e}=this.beans;return this.rangeCount===1&&!!e&&!e.isMoreThanOneCell()}getHasChartRange(){let{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;let t=e.getCellRanges();return t.length>0&&t.every(n=>hl([1,0],n.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){let e=this.beans.gos.get("enableRtl"),t=!1,n=!1,i=!1,s=!1,r=this.cellCtrl.getCellPosition().column,o=this.beans.visibleColsService,a,l;e?(a=o.getColAfter(r),l=o.getColBefore(r)):(a=o.getColBefore(r),l=o.getColAfter(r));let c=this.rangeService.getCellRanges().filter(u=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),u));a||(s=!0),l||(n=!0);for(let u=0;u<c.length&&!(t&&n&&i&&s);u++){let h=c[u],f=this.rangeService.getRangeStartRow(h),g=this.rangeService.getRangeEndRow(h);!t&&this.beans.rowPositionUtils.sameRow(f,this.cellCtrl.getCellPosition())&&(t=!0),!i&&this.beans.rowPositionUtils.sameRow(g,this.cellCtrl.getCellPosition())&&(i=!0),!s&&a&&h.columns.indexOf(a)<0&&(s=!0),!n&&l&&h.columns.indexOf(l)<0&&(n=!0)}return{top:t,right:n,bottom:i,left:s}}refreshHandle(){if(this.beans.context.isDestroyed())return;let e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(Rne,!!this.selectionHandle)}shouldHaveSelectionHandle(){let e=this.beans.gos,t=this.rangeService.getCellRanges(),n=t.length;if(this.rangeCount<1||n<1)return!1;let i=xe(t),s=this.cellCtrl.getCellPosition(),r=e.get("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),o=e.get("enableRangeHandle"),a=n===1&&!this.cellCtrl.isEditing()&&(r||o);if(this.hasChartRange){let c=t[0].type===1&&this.rangeService.isCellInSpecificRange(s,t[0]);this.cellComp.addOrRemoveCssClass(Dne,c),a=i.type===0}return a&&i.endRow!=null&&this.rangeService.isContiguousRange(i)&&this.rangeService.isBottomRightCell(i,s)}addSelectionHandle(){let e=this.beans.gos,t=xe(this.rangeService.getCellRanges()).type,i=e.get("enableFillHandle")&&Pe(t)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==i&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(i)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},Fne="ag-cell",xne="ag-cell-auto-height",One="ag-cell-normal-height",Nne="ag-cell-focus",kne="ag-cell-first-right-pinned",Lne="ag-cell-last-left-pinned",Vne="ag-cell-not-inline-editing",Bne="ag-column-hover",Gne="ag-cell-wrap-text",Hne=0,CG=class cR extends k{constructor(t,n,i,s){super(),this.column=t,this.rowNode=n,this.beans=i,this.rowCtrl=s,this.cellRangeFeature=null,this.cellPositionFeature=null,this.cellCustomStyleFeature=null,this.tooltipFeature=null,this.cellMouseListenerFeature=null,this.cellKeyboardListenerFeature=null,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.instanceId=t.getId()+"-"+Hne++,this.colIdSanitised=rr(this.column.getId()),i.gos.get("suppressCellFocus")||(this.tabIndex=-1),this.createCellPosition(),this.addFeatures(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}addFeatures(){this.cellPositionFeature=new _ne(this,this.beans),this.addDestroyFunc(()=>{this.cellPositionFeature?.destroy(),this.cellPositionFeature=null}),this.cellCustomStyleFeature=new yne(this,this.beans),this.addDestroyFunc(()=>{this.cellCustomStyleFeature?.destroy(),this.cellCustomStyleFeature=null}),this.cellMouseListenerFeature=new Sne(this,this.beans,this.column),this.addDestroyFunc(()=>{this.cellMouseListenerFeature?.destroy(),this.cellMouseListenerFeature=null}),this.cellKeyboardListenerFeature=new wne(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(()=>{this.cellKeyboardListenerFeature?.destroy(),this.cellKeyboardListenerFeature=null}),this.column.isTooltipEnabled()&&(this.enableTooltipFeature(),this.addDestroyFunc(()=>{this.disableTooltipFeature()})),this.beans.rangeService&&this.beans.gos.get("enableRangeSelection")&&(this.cellRangeFeature=new Pne(this.beans,this),this.addDestroyFunc(()=>{this.cellRangeFeature?.destroy(),this.cellRangeFeature=null}))}enableTooltipFeature(t,n){let i=()=>{let o=this.column.getColDef(),a=this.rowNode.data;if(o.tooltipField&&j(a))return uf(a,o.tooltipField,this.column.isTooltipFieldContainsDots());let l=o.tooltipValueGetter;return l?l(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},s=this.beans.gos.get("tooltipShowMode")==="whenTruncated";!n&&s&&!this.isCellRenderer()&&(n=()=>{let o=this.getGui(),a=o.children.length===0?o:o.querySelector(".ag-cell-value");return a?a.scrollWidth>a.clientWidth:!0});let r={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:t!=null?()=>t:i,getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:n};this.tooltipFeature=new Pu(r,this.beans)}disableTooltipFeature(){this.tooltipFeature&&(this.tooltipFeature.destroy(),this.tooltipFeature=null)}setComp(t,n,i,s,r){this.cellComp=t,this.eGui=n,this.printLayout=s,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(i),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),this.cellPositionFeature?.setComp(n),this.cellCustomStyleFeature?.setComp(t),this.tooltipFeature?.refreshToolTip(),this.cellKeyboardListenerFeature?.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(t,n),r&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(o=>o()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(t){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!t)return;let n=t.parentElement,i=this.beans.gos.getRowHeightForNode(this.rowNode).height,s=a=>{if(this.editing||!this.isAlive())return;let{paddingTop:l,paddingBottom:c,borderBottomWidth:u,borderTopWidth:h}=Cl(n),f=l+c+u+h,v=t.offsetHeight+f;if(a<5){let C=this.beans.gos.getDocument(),E=!C||!C.contains(t),I=v==0;if(E||I){window.setTimeout(()=>s(a+1),0);return}}let y=Math.max(v,i);this.rowNode.setRowAutoHeight(y,this.column)},r=()=>s(0);r();let o=this.beans.resizeObserverService.observeResize(t,r);this.addDestroyFunc(()=>{o(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}getInstanceId(){return this.instanceId}getColumnIdSanitised(){return this.colIdSanitised}getTabIndex(){return this.tabIndex}isCellRenderer(){let t=this.column.getColDef();return t.cellRenderer!=null||t.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}showValue(t=!1){let n=this.getValueToDisplay(),i;if(this.rowNode.stub){let s=this.createCellRendererParams();i=this.beans.userComponentFactory.getLoadingCellRendererDetails(this.column.getColDef(),s)}else if(this.isCellRenderer()){let s=this.createCellRendererParams();i=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),s)}this.cellComp.setRenderDetails(i,n,t),this.cellRangeFeature?.refreshHandle()}setupControlComps(){let t=this.column.getColDef();this.includeSelection=this.isIncludeControl(t.checkboxSelection),this.includeRowDrag=this.isIncludeControl(t.rowDrag),this.includeDndSource=this.isIncludeControl(t.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(t){return this.rowNode.rowPinned!=null?!1:typeof t=="function"||t===!0}refreshShouldDestroy(){let t=this.column.getColDef(),n=this.includeSelection!=this.isIncludeControl(t.checkboxSelection),i=this.includeRowDrag!=this.isIncludeControl(t.rowDrag),s=this.includeDndSource!=this.isIncludeControl(t.dndSource),r=this.isAutoHeight!=this.column.isAutoHeight();return n||i||s||r}startEditing(t=null,n=!1,i=null){let{editService:s}=this.beans;if(!(!this.isCellEditable()||this.editing||!s)){if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startEditing(t,n,i)});return}s.startEditing(this,t,n,i)}}setEditing(t,n){this.editCompDetails=n,this.editing!==t&&(this.editing=t,this.cellRangeFeature?.refreshHandle())}stopRowOrCellEdit(t=!1){this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.stopEditing(t):this.stopEditing(t)}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(t=!1){let{editService:n}=this.beans;return!this.editing||!n?!1:n.stopEditing(this,t)}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.rowNode.getValueFromValueService(this.column),setValue:n=>this.beans.valueService.setValue(this.rowNode,this.column,n),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(n,i,s,r)=>this.registerRowDragger(n,i,r),setTooltip:(n,i)=>{this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(n,i),this.tooltipFeature?.refreshToolTip()}})}setFocusOutOnEditor(){this.editing&&this.beans.editService?.setFocusOutOnEditor(this)}setFocusInOnEditor(){this.editing&&this.beans.editService?.setFocusInOnEditor(this)}onCellChanged(t){t.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(t){this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(t)}refreshCell(t){if(this.suppressRefreshCell||this.editing)return;let n=this.column.getColDef(),i=t!=null&&!!t.newData,s=t!=null&&!!t.suppressFlash||!!n.suppressCellFlash,r=n.field==null&&n.valueGetter==null&&n.showRowGroup==null,o=t&&t.forceRefresh||r||i,a=!!this.cellComp,l=this.updateAndFormatValue(a),c=o||l;if(a){if(c){this.showValue(i);let u=this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering();!s&&!u&&(this.beans.gos.get("enableCellChangeFlash")||n.enableCellChangeFlash)&&this.flashCell(),this.cellCustomStyleFeature?.applyUserStyles(),this.cellCustomStyleFeature?.applyClassesFromColDef()}this.tooltipFeature?.refreshToolTip(),this.cellCustomStyleFeature?.applyCellClassRules()}}stopEditingAndFocus(t=!1,n=!1){this.beans.editService?.stopEditingAndFocus(this,t,n)}flashCell(t){let n=t?.flashDuration??t?.flashDelay,i=t?.fadeDuration??t?.fadeDelay;this.animateCell("data-changed",n,i)}animateCell(t,n,i){if(!this.cellComp)return;let s=`ag-cell-${t}`,r=`ag-cell-${t}-animation`,{gos:o}=this.beans;n||(n=o.get("cellFlashDuration")),j(i)||(i=o.get("cellFadeDuration")),this.cellComp.addOrRemoveCssClass(s,!0),this.cellComp.addOrRemoveCssClass(r,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(s,!1),this.cellComp.addOrRemoveCssClass(r,!0),this.eGui.style.transition=`background-color ${i}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(r,!1),this.eGui.style.transition="")},i))},n)})}onFlashCells(t){if(!this.cellComp)return;let n=this.beans.cellPositionUtils.createId(this.getCellPosition());t.cells[n]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(t){return this.callValueFormatter(t)??t}callValueFormatter(t){return this.beans.valueService.formatValue(this.column,this.rowNode,t)}updateAndFormatValue(t){let n=this.value,i=this.valueFormatted;return this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value),t?!this.valuesAreEqual(n,this.value)||this.valueFormatted!=i:!0}valuesAreEqual(t,n){let i=this.column.getColDef();return i.equals?i.equals(t,n):t===n}getComp(){return this.cellComp}getValue(){return this.value}addDomData(){let t=this.getGui();this.beans.gos.setDomData(t,cR.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(()=>this.beans.gos.setDomData(t,cR.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(t,n){return this.beans.gos.addGridCommonParams({type:n,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:t,rowIndex:this.rowNode.rowIndex})}processCharacter(t){this.cellKeyboardListenerFeature?.processCharacter(t)}onKeyDown(t){this.cellKeyboardListenerFeature?.onKeyDown(t)}onMouseEvent(t,n){this.cellMouseListenerFeature?.onMouseEvent(t,n)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){this.cellComp&&this.cellPositionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){let{cellComp:t,column:n,beans:i}=this;oG(t,n,i.visibleColsService)}refreshAriaColIndex(){let t=this.beans.visibleColsService.getAriaColIndex(this.column);vB(this.getGui(),t)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){return this.cellPositionFeature?.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(t,n=null){if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(t,n)});return}this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(t,this):this.startEditing(t,!0,n)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onRangeSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(t=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:t})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}onFirstRightPinnedChanged(){if(!this.cellComp)return;let t=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(kne,t)}onLastLeftPinnedChanged(){if(!this.cellComp)return;let t=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(Lne,t)}onCellFocused(t){if(this.beans.gos.get("suppressCellFocus"))return;let n=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){n&&t?.forceBrowserFocus&&(this.focusEventToRestore=t);return}if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(Nne,n),n&&t&&t.forceBrowserFocus){let s=this.cellComp.getFocusableElement();if(this.editing){let r=this.beans.focusService.findFocusableElements(s,null,!0);r.length&&(s=r[0])}s.focus({preventScroll:!!t.preventScrollOnBrowserFocus})}let i=this.beans.gos.get("editType")==="fullRow";!n&&!i&&this.editing&&this.stopRowOrCellEdit(),n&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:fl(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(Fne,!0),this.cellComp.addOrRemoveCssClass(Vne,!0);let t=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(xne,t),this.cellComp.addOrRemoveCssClass(One,!t)}onColumnHover(){if(!this.cellComp||!this.beans.gos.get("columnHoverHighlight"))return;let t=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(Bne,t)}onColDefChanged(){if(!this.cellComp)return;this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?this.beans.editService?.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0})}setWrapText(){let t=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(Gne,t)}dispatchCellContextMenuEvent(t){let n=this.column.getColDef(),i=this.createEvent(t,"cellContextMenu");this.beans.eventService.dispatchEvent(i),n.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{n.onCellContextMenu(i)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){let t=new vne;return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t}createDndSource(){let t=new Cne(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(t),t}registerRowDragger(t,n,i){if(this.customRowDragComp){this.customRowDragComp.setDragElement(t,n);return}let s=this.createRowDragComp(t,n,i);s&&(this.customRowDragComp=s,this.addDestroyFunc(()=>{this.beans.context.destroyBean(s),this.customRowDragComp=null}))}createRowDragComp(t,n,i){let s=this.beans.gos.get("pagination"),r=this.beans.gos.get("rowDragManaged"),o=this.beans.gos.isRowModelType("clientSide");if(r){if(!o){G("managed row dragging is only allowed in the Client Side Row Model");return}if(s){G("managed row dragging is not possible when doing pagination");return}}let a=new oR(()=>this.value,this.rowNode,this.column,t,n,i);return this.beans.context.createBean(a),a}setSuppressRefreshCell(t){this.suppressRefreshCell=t}getEditCompDetails(){return this.editCompDetails}};CG.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var gl=CG,Une=0,yG=class uR extends k{constructor(t,n,i,s,r){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=n,this.gos=n.gos,this.rowNode=t,this.paginationPage=n.paginationService?.getCurrentPage()??0,this.useAnimationFrameForCreate=s,this.printLayout=r,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=t.id+"-"+Une++,this.rowId=rr(t.id),this.initRowBusinessKey(),this.rowFocused=n.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=n.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(i),this.rowStyles=this.processStylesFromGridOptions(),this.isFullWidth()&&!this.gos.get("suppressCellFocus")&&(this.tabIndex=-1),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;let t=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=rr(t)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}getTabIndex(){return this.tabIndex}isSticky(){return this.rowNode.sticky}getInstanceId(){return this.instanceId}updateGui(t,n){t==="left"?this.leftGui=n:t==="right"?this.rightGui=n:t==="fullWidth"?this.fullWidthGui=n:this.centerGui=n}setComp(t,n,i){let s={rowComp:t,element:n,containerType:i};this.allRowGuis.push(s),this.updateGui(i,s),this.initialiseRowComp(s),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(t){this.allRowGuis=this.allRowGuis.filter(n=>n.containerType!==t),this.updateGui(t,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(t){let n=t?"none":"";this.allRowGuis.forEach(i=>i.element.style.display=n)}initialiseRowComp(t){let n=this.gos;this.listenOnDomOrder(t),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),n.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);let i=t.rowComp;this.getInitialRowClasses(t.containerType).forEach(r=>i.addOrRemoveCssClass(r,!0)),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&SC(t.element,this.rowNode.expanded==!0),this.setRowCompRowId(i),this.setRowCompRowBusinessKey(i),n.setDomData(t.element,uR.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc(()=>n.setDomData(t.element,uR.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,t.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(t.element),this.isFullWidth()&&this.setupFullWidth(t),n.get("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&t.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(t){this.businessKeySanitised!=null&&t.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(t){this.rowId=rr(this.rowNode.id),this.rowId!=null&&t.setRowId(this.rowId)}executeSlideAndFadeAnimations(t){let{containerType:n}=t;this.slideInAnimation[n]&&(AV(()=>{this.onTopChanged()}),this.slideInAnimation[n]=!1),this.fadeInAnimation[n]&&(AV(()=>{t.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[n]=!1)}addRowDraggerToRow(t){if(this.gos.get("enableRangeSelection")){G("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`");return}let n=this.beans.localeService.getLocaleTextFunc(),i=new oR(()=>`1 ${n("rowDragRow","row")}`,this.rowNode,void 0,t.element,void 0,!0),s=this.createBean(i,this.beans.context);this.rowDragComps.push(s)}setupFullWidth(t){let n=this.getPinnedForContainer(t.containerType);if(this.rowType=="FullWidthDetail"&&!Yn.__assertRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId()))return;let i=this.createFullWidthCompDetails(t.element,n);t.rowComp.showFullWidth(i)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(t=>t?.rowComp?.getFullWidthCellRenderer()):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}getCellElement(t){let n=this.getCellCtrl(t);return n?n.getGui():null}executeProcessRowPostCreateFunc(){let t=this.gos.getCallback("processRowPostCreate");if(!t||!this.areAllContainersReady())return;let n={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};t(n)}areAllContainersReady(){let t=!!this.leftGui||!this.beans.visibleColsService.isPinningLeft(),n=!!this.centerGui,i=!!this.rightGui||!this.beans.visibleColsService.isPinningRight();return t&&n&&i}setRowType(){let t=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow"),n=this.rowNode.isFullWidthCell(),i=this.gos.get("masterDetail")&&this.rowNode.detail,s=this.beans.columnModel.isPivotMode(),o=!!this.rowNode.group&&!this.rowNode.footer&&this.gos.isGroupUseEntireRow(s);t?this.rowType="FullWidthLoading":i?this.rowType="FullWidthDetail":n?this.rowType="FullWidth":o?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(t=!1,n=!1){if(this.isFullWidth())return;if(t||this.gos.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(n);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(t,n,i=null){let s={list:[],map:{}},r=(o,a)=>{s.list.push(a),s.map[o]=a};return n.forEach(o=>{let a=o.getInstanceId(),l=t.map[a];l||(l=new gl(o,this.rowNode,this.beans,this)),r(a,l)}),t.list.forEach(o=>{if(s.map[o.getColumn().getInstanceId()]!=null)return;if(!this.isCellEligibleToBeRemoved(o,i)){r(o.getColumn().getInstanceId(),o);return}o.destroy()}),s}updateColumnListsImpl(t){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(t)}setCellCtrls(t){this.allRowGuis.forEach(n=>{let i=this.getCellCtrlsForContainer(n.containerType);n.rowComp.setCellCtrls(i,t)})}getCellCtrlsForContainer(t){switch(t){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){let t=this.beans.columnViewportService,n=this.beans.visibleColsService;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,n.getAllCols()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{let i=t.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);let s=n.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,s,"left");let r=n.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,r,"right")}}isCellEligibleToBeRemoved(t,n){if(t.getColumn().getPinned()!=n)return!0;let o=t.isEditing(),a=this.beans.focusService.isCellFocused(t.getCellPosition());if(o||a){let c=t.getColumn();return!(this.beans.visibleColsService.getAllCols().indexOf(c)>=0)}return!0}getDomOrder(){return this.gos.get("ensureDomOrder")||this.gos.isDomLayout("print")}listenOnDomOrder(t){let n=()=>{t.rowComp.setDomOrder(this.getDomOrder())};this.addManagedPropertyListener("domLayout",n),this.addManagedPropertyListener("ensureDomOrder",n)}setAnimateFlags(t){if(this.isSticky()||!t)return;let n=j(this.rowNode.oldRowTop),i=this.beans.visibleColsService.isPinningLeft(),s=this.beans.visibleColsService.isPinningRight();if(n){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=i,this.slideInAnimation.right=s}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=i,this.fadeInAnimation.right=s}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){let t=(a,l)=>a?a.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(a.element,l).params):!0,n=t(this.fullWidthGui,null),i=t(this.centerGui,null),s=t(this.leftGui,"left"),r=t(this.rightGui,"right");return n&&i&&s&&r}addListeners(){this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),expandedChanged:this.updateExpandedCss.bind(this),hasChildrenChanged:this.updateExpandedCss.bind(this)}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventService,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.addDestroyFunc(()=>{this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowDragEntireRow"],()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(n=>{this.addRowDraggerToRow(n)});return}this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach(t=>t.onRowIndexChanged())},cellChanged:t=>{this.getAllCellCtrls().forEach(n=>n.onCellChanged(t))}})}onRowNodeDataChanged(t){if(this.isFullWidth()!==!!this.rowNode.isFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(i=>i.refreshCell({suppressFlash:!t.update,newData:!t.update})),this.allRowGuis.forEach(i=>{this.setRowCompRowId(i.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(i.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){let t=this.rowNode.highlighted;this.allRowGuis.forEach(n=>{let i=t===0,s=t===1;n.rowComp.addOrRemoveCssClass("ag-row-highlight-above",i),n.rowComp.addOrRemoveCssClass("ag-row-highlight-below",s)})}postProcessRowDragging(){let t=this.rowNode.dragging;this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-row-dragging",t))}updateExpandedCss(){let t=this.rowNode.isExpandable(),n=this.rowNode.expanded==!0;this.allRowGuis.forEach(i=>{i.rowComp.addOrRemoveCssClass("ag-row-group",t),i.rowComp.addOrRemoveCssClass("ag-row-group-expanded",t&&n),i.rowComp.addOrRemoveCssClass("ag-row-group-contracted",t&&!n),SC(i.element,t&&n)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:fl(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(t){let n=this.allRowGuis.find(l=>l.element.contains(t.target));if(!((n?n.element:null)===t.target))return;let r=this.rowNode,o=this.beans.focusService.getFocusedCell(),a={rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:o&&o.column};this.beans.navigationService.navigateToNextCell(t,t.key,a,!0),t.preventDefault()}onTabKeyDown(t){if(t.defaultPrevented||$o(t))return;let n=this.allRowGuis.find(o=>o.element.contains(t.target)),i=n?n.element:null,s=i===t.target,r=null;s||(r=this.beans.focusService.findNextFocusableElement(i,!1,t.shiftKey)),(this.isFullWidth()&&s||!r)&&this.beans.navigationService.onTabKeyDown(this,t)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){let t=this.allRowGuis.find(n=>bs(n.element))?.element;return t?t.getBoundingClientRect().top:0}onFullWidthRowFocused(t){let n=this.rowNode,i=t?this.isFullWidth()&&t.rowIndex===n.rowIndex&&t.rowPinned==n.rowPinned:!1,s=this.fullWidthGui?this.fullWidthGui.element:this.centerGui?.element;s&&(s.classList.toggle("ag-full-width-focus",i),i&&t?.forceBrowserFocus&&s.focus({preventScroll:!0}))}recreateCell(t){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,t),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,t),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,t),t.destroy(),this.updateColumnLists()}removeCellCtrl(t,n){let i={list:[],map:{}};return t.list.forEach(s=>{s!==n&&(i.list.push(s),i.map[s.getColumn().getInstanceId()]=s)}),i}onMouseEvent(t,n){switch(t){case"dblclick":this.onRowDblClick(n);break;case"click":this.onRowClick(n);break;case"touchstart":case"mousedown":this.onRowMouseDown(n);break}}createRowEvent(t,n){return this.gos.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:n})}createRowEventWithSource(t,n){let i=this.createRowEvent(t,n);return i.source=this,i}onRowDblClick(t){if($o(t))return;let n=this.createRowEventWithSource("rowDoubleClicked",t);this.beans.eventService.dispatchEvent(n)}onRowMouseDown(t){if(this.lastMouseDownOnDragger=Du(t.target,"ag-row-drag",3),!this.isFullWidth())return;let n=this.rowNode,i=this.beans.visibleColsService;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges();let s=this.getFullWidthElement(),r=t.target,o=!0;s&&s.contains(r)&&wR(r)&&(o=!1),this.beans.focusService.setFocusedCell({rowIndex:n.rowIndex,column:i.getAllCols()[0],rowPinned:n.rowPinned,forceBrowserFocus:o})}onRowClick(t){if($o(t)||this.lastMouseDownOnDragger)return;let i=this.createRowEventWithSource("rowClicked",t);this.beans.eventService.dispatchEvent(i);let s=t.ctrlKey||t.metaKey,r=t.shiftKey;if(this.gos.get("groupSelectsChildren")&&this.rowNode.group||this.isRowSelectionBlocked()||this.gos.get("suppressRowClickSelection"))return;let a=this.gos.get("rowMultiSelectWithClick"),l=!this.gos.get("suppressRowDeselection"),c="rowClicked";if(this.rowNode.isSelected())a?this.rowNode.setSelectedParams({newValue:!1,event:t,source:c}):s?l&&this.rowNode.setSelectedParams({newValue:!1,event:t,source:c}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!r,rangeSelect:r,event:t,source:c});else{let u=a?!1:!s;this.rowNode.setSelectedParams({newValue:!0,clearSelection:u,rangeSelect:r,event:t,source:c})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!this.gos.isRowSelection()}setupDetailRowAutoHeight(t){if(this.rowType!=="FullWidthDetail"||!this.gos.get("detailRowAutoHeight"))return;let n=()=>{let s=t.clientHeight;if(s!=null&&s>0){let r=()=>{this.rowNode.setRowHeight(s),this.beans.rowModel.getType()==="clientSide"?this.beans.rowModel.onRowHeightChanged():this.beans.rowModel.getType()==="serverSide"&&this.beans.rowModel.onRowHeightChanged()};window.setTimeout(r,0)}},i=this.beans.resizeObserverService.observeResize(t,n);this.addDestroyFunc(i),n()}createFullWidthCompDetails(t,n){let{gos:i,rowNode:s}=this,r=i.addGridCommonParams({fullWidth:!0,data:s.data,node:s,value:s.key,valueFormatted:s.key,eGridCell:t,eParentOfValue:t,pinned:n,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(a,l,c,u)=>this.addFullWidthRowDragging(a,l,c,u),setTooltip:(a,l)=>this.refreshRowTooltip(a,l)}),o=this.beans.userComponentFactory;switch(this.rowType){case"FullWidthDetail":return o.getFullWidthDetailCellRendererDetails(r);case"FullWidthGroup":return o.getFullWidthGroupCellRendererDetails(r);case"FullWidthLoading":return o.getFullWidthLoadingCellRendererDetails(r);default:return o.getFullWidthCellRendererDetails(r)}}refreshRowTooltip(t,n){if(!this.fullWidthGui)return;let i={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>t,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:n};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new Pu(i,this.beans))}addFullWidthRowDragging(t,n,i="",s){if(!this.isFullWidth())return;let r=new oR(()=>i,this.rowNode,void 0,t,n,s);this.createBean(r,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(r,this.beans.context)})}onUiLevelChanged(){let t=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=t){let n="ag-row-level-"+t,i="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(s=>{s.rowComp.addOrRemoveCssClass(n,!0),s.rowComp.addOrRemoveCssClass(i,!1)})}this.rowLevel=t}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getLastRow()}refreshFirstAndLastRowStyles(){let t=this.isFirstRowOnPage(),n=this.isLastRowOnPage();this.firstRowOnPage!==t&&(this.firstRowOnPage=t,this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-first",t))),this.lastRowOnPage!==n&&(this.lastRowOnPage=n,this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-last",n)))}stopEditing(t=!1){this.stoppingRowEdit||this.beans.rowEditService?.stopEditing(this,t)}setInlineEditingCss(t){this.allRowGuis.forEach(n=>{n.rowComp.addOrRemoveCssClass("ag-row-inline-editing",t),n.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!t)})}setEditingRow(t){this.editingRow=t}startRowEditing(t=null,n=null,i=null){this.editingRow||this.beans.rowEditService?.startEditing(this,t,n,i)}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){let t=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!t||!t.length||t.forEach(n=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(n,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,t=>{this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass(t,!0))},t=>{this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass(t,!1))})}setStylesFromGridOptions(t,n){t&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(n,i=>i.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(t){return t==="left"||t==="right"?t:null}getInitialRowClasses(t){let n=this.getPinnedForContainer(t),i={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[t],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:n};return this.beans.rowCssClassCalculator.getInitialRowClasses(i)}processStylesFromGridOptions(){let t=this.gos.get("rowStyle");if(t&&typeof t=="function"){G("rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}let n=this.gos.getCallback("getRowStyle"),i;if(n){let s={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};i=n(s)}return i||t?Object.assign({},t,i):this.emptyStyle}onRowSelected(t){let n=!!this.rowNode.isSelected();this.forEachGui(t,i=>{i.rowComp.addOrRemoveCssClass("ag-row-selected",n),_C(i.element,n),i.element.contains(this.gos.getActiveDomElement())&&(i===this.centerGui||i===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;let t=this.rowNode.isSelected();if(t&&this.gos.get("suppressRowDeselection"))return;let i=this.beans.localeService.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(i)}addHoverFunctionality(t){if(!this.active)return;let{rowNode:n,beans:i,gos:s}=this;this.addManagedListeners(t,{mouseenter:()=>n.onMouseEnter(),mouseleave:()=>n.onMouseLeave()}),this.addManagedListeners(n,{mouseEnter:()=>{!i.dragService.isDragging()&&!s.get("suppressRowHoverHighlight")&&(t.classList.add("ag-row-hover"),n.setHovered(!0))},mouseLeave:()=>{t.classList.remove("ag-row-hover"),n.setHovered(!1)}})}roundRowTopToBounds(t){let n=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),i=this.applyPaginationOffset(n.top,!0)-100,s=this.applyPaginationOffset(n.bottom,!0)+100;return Math.min(Math.max(i,t),s)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(t,n){t?n(t):this.allRowGuis.forEach(n)}onRowHeightChanged(t){if(this.rowNode.rowHeight==null)return;let n=this.rowNode.rowHeight,i=this.beans.environment.getDefaultRowHeight(),r=this.gos.isGetRowHeightFunction()?this.gos.getRowHeightForNode(this.rowNode).height:void 0,o=r?`${Math.min(i,r)-2}px`:void 0;this.forEachGui(t,a=>{a.element.style.height=`${n}px`,o&&a.element.style.setProperty("--ag-line-height",o)})}addEventListener(t,n){super.addEventListener(t,n)}removeEventListener(t,n){super.removeEventListener(t,n)}destroyFirstPass(t=!1){if(this.active=!1,!t&&this.gos.isAnimateRows()&&!this.isSticky())if(this.rowNode.rowTop!=null){let s=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(s)}else this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);let n=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(n),this.beans.eventService.dispatchEvent(n),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();let t=n=>(n.list.forEach(i=>i.destroy()),{list:[],map:{}});this.centerCellCtrls=t(this.centerCellCtrls),this.leftCellCtrls=t(this.leftCellCtrls),this.rightCellCtrls=t(this.rightCellCtrls)}setFocusedClasses(t){this.forEachGui(t,n=>{n.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),n.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){let t=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses()),!t&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){let t=this.beans.paginationService?.getCurrentPage()??0;this.paginationPage!==t&&(this.paginationPage=t,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(t,n=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return t;let i=this.beans.pageBoundsService.getPixelOffset();return t+i*(n?1:-1)}setRowTop(t){if(!this.printLayout&&j(t)){let n=this.applyPaginationOffset(t),r=`${this.rowNode.isRowPinned()||this.rowNode.sticky?n:this.beans.rowContainerHeightService.getRealPixelPosition(n)}px`;this.setRowTopStyle(r)}}getInitialRowTop(t){return this.suppressRowTransform?this.getInitialRowTopShared(t):void 0}getInitialTransform(t){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(t)})`}getInitialRowTopShared(t){if(this.printLayout)return"";let n=this.rowNode,i;if(this.isSticky())i=n.stickyRowTop;else{let s=this.slideInAnimation[t]?this.roundRowTopToBounds(n.oldRowTop):n.rowTop,r=this.applyPaginationOffset(s);i=n.isRowPinned()?r:this.beans.rowContainerHeightService.getRealPixelPosition(r)}return i+"px"}setRowTopStyle(t){this.allRowGuis.forEach(n=>this.suppressRowTransform?n.rowComp.setTop(t):n.rowComp.setTransform(`translateY(${t})`))}getRowNode(){return this.rowNode}getCellCtrl(t){let n=null;return this.getAllCellCtrls().forEach(i=>{i.getColumn()==t&&(n=i)}),n!=null||this.getAllCellCtrls().forEach(i=>{i.getColSpanningList().indexOf(t)>=0&&(n=i)}),n}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(t){let n=this.rowNode.getRowIndexString();if(n===null)return;let i=this.beans.headerNavigationService.getHeaderRowCount()+(this.beans.filterManager?.getHeaderRowCount()??0),s=this.rowNode.rowIndex%2===0,r=i+this.rowNode.rowIndex+1;this.forEachGui(t,o=>{o.rowComp.setRowIndex(n),o.rowComp.addOrRemoveCssClass("ag-row-even",s),o.rowComp.addOrRemoveCssClass("ag-row-odd",!s),mB(o.element,r)})}setStoppingRowEdit(t){this.stoppingRowEdit=t}};yG.DOM_DATA_KEY_ROW_CTRL="renderedRow";var ml=yG,Wne=class extends k{wireBeans(e){this.mouseEventService=e.mouseEventService,this.valueService=e.valueService,this.menuService=e.menuService,this.ctrlsService=e.ctrlsService,this.navigationService=e.navigationService,this.focusService=e.focusService,this.undoRedoService=e.undoRedoService,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.rangeService=e.rangeService,this.clipboardService=e.clipboardService}constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){let e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",nB("touchstart")?"touchstart":"mousedown"].forEach(n=>{let i=this.processMouseEvent.bind(this,n);this.addManagedElementListeners(this.element,{[n]:i})})}processMouseEvent(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)||$o(t))return;let n=this.getRowForEvent(t),i=this.mouseEventService.getRenderedCellForEvent(t);e==="contextmenu"?this.handleContextMenuMouseEvent(t,void 0,n,i):(i&&i.onMouseEvent(e,t),n&&n.onMouseEvent(e,t))}mockContextMenuForIPad(){if(!Yo())return;let e=new qo(this.element),t=n=>{let i=this.getRowForEvent(n.touchEvent),s=this.mouseEventService.getRenderedCellForEvent(n.touchEvent);this.handleContextMenuMouseEvent(void 0,n.touchEvent,i,s)};this.addManagedListeners(e,{longTap:t}),this.addDestroyFunc(()=>e.destroy())}getRowForEvent(e){let t=e.target;for(;t;){let n=this.gos.getDomData(t,ml.DOM_DATA_KEY_ROW_CTRL);if(n)return n;t=t.parentElement}return null}handleContextMenuMouseEvent(e,t,n,i){let s=n?n.getRowNode():null,r=i?i.getColumn():null,o=null;if(r){let c=e||t;i.dispatchCellContextMenuEvent(c??null),o=this.valueService.getValue(r,s)}let a=this.ctrlsService.getGridBodyCtrl(),l=i?i.getGui():a.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:s,column:r,value:o,anchorToElement:l})}getControlsForEventTarget(e){return{cellCtrl:QD(this.gos,e,gl.DOM_DATA_KEY_CELL_CTRL),rowCtrl:QD(this.gos,e,ml.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){let{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(n?this.processCellKeyboardEvent(n,e,t):i&&i.isFullWidth()&&this.processFullWidthRowKeyboardEvent(i,e,t))}processCellKeyboardEvent(e,t,n){let i=e.getRowNode(),s=e.getColumn(),r=e.isEditing();if(!aR(this.gos,n,i,s,r)&&t==="keydown"&&(!r&&this.navigationService.handlePageScrollingKey(n)||e.onKeyDown(n),this.doGridOperations(n,e.isEditing()),QB(n)&&e.processCharacter(n)),t==="keydown"){let a=e.createEvent(n,"cellKeyDown");this.eventService.dispatchEvent(a)}}processFullWidthRowKeyboardEvent(e,t,n){let i=e.getRowNode(),s=this.focusService.getFocusedCell(),r=s&&s.column;if(!aR(this.gos,n,i,r,!1)){let a=n.key;if(t==="keydown")switch(a){case N.PAGE_HOME:case N.PAGE_END:case N.PAGE_UP:case N.PAGE_DOWN:this.navigationService.handlePageScrollingKey(n,!0);break;case N.UP:case N.DOWN:e.onKeyboardNavigate(n);break;case N.TAB:e.onTabKeyDown(n);break;default:}}if(t==="keydown"){let a=e.createRowEvent("cellKeyDown",n);this.eventService.dispatchEvent(a)}}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!this.mouseEventService.isEventFromThisGrid(e))return;let n=Gee(e);if(n===N.A)return this.onCtrlAndA(e);if(n===N.C)return this.onCtrlAndC(e);if(n===N.D)return this.onCtrlAndD(e);if(n===N.V)return this.onCtrlAndV(e);if(n===N.X)return this.onCtrlAndX(e);if(n===N.Y)return this.onCtrlAndY();if(n===N.Z)return this.onCtrlAndZ(e)}onCtrlAndA(e){let{pinnedRowModel:t,rowModel:n,rangeService:i}=this;if(i&&n.isRowsToRender()){let[s,r]=[t.isEmpty("top"),t.isEmpty("bottom")],o=s?null:"top",a,l;r?(a=null,l=n.getRowCount()-1):(a="bottom",l=t.getPinnedBottomRowNodes().length-1);let c=this.visibleColsService.getAllCols();if(pn(c))return;i.setCellRange({rowStartIndex:0,rowStartPinned:o,rowEndIndex:l,rowEndPinned:a,columnStart:c[0],columnEnd:xe(c)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;let{cellCtrl:t,rowCtrl:n}=this.getControlsForEventTarget(e.target);t?.isEditing()||n?.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;let{cellCtrl:t,rowCtrl:n}=this.getControlsForEventTarget(e.target);t?.isEditing()||n?.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){let{cellCtrl:t,rowCtrl:n}=this.getControlsForEventTarget(e.target);t?.isEditing()||n?.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){!this.gos.get("undoRedoCellEditing")||!this.undoRedoService||(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService?.redo("ui")}},jne=class extends k{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({leftPinnedWidthChanged:this.onPinnedLeftWidthChanged.bind(this)})}onPinnedLeftWidthChanged(){let e=this.pinnedWidthService.getPinnedLeftWidth(),t=e>0;gt(this.element,t),_s(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}},zne=class extends k{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({rightPinnedWidthChanged:this.onPinnedRightWidthChanged.bind(this)})}onPinnedRightWidthChanged(){let e=this.pinnedWidthService.getPinnedRightWidth(),t=e>0;gt(this.element,t),_s(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}},aC=e=>e.getTopRowCtrls(),lC=e=>e.getStickyTopRowCtrls(),cC=e=>e.getStickyBottomRowCtrls(),uC=e=>e.getBottomRowCtrls(),dC=e=>e.getCentreRowCtrls(),$ne={center:{type:"center",container:"ag-center-cols-container",viewport:"ag-center-cols-viewport",getRowCtrls:dC},left:{type:"left",container:"ag-pinned-left-cols-container",pinnedType:"left",getRowCtrls:dC},right:{type:"right",container:"ag-pinned-right-cols-container",pinnedType:"right",getRowCtrls:dC},fullWidth:{type:"fullWidth",container:"ag-full-width-container",fullWidth:!0,getRowCtrls:dC},topCenter:{type:"center",container:"ag-floating-top-container",viewport:"ag-floating-top-viewport",getRowCtrls:aC},topLeft:{type:"left",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:aC},topRight:{type:"right",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:aC},topFullWidth:{type:"fullWidth",container:"ag-floating-top-full-width-container",fullWidth:!0,getRowCtrls:aC},stickyTopCenter:{type:"center",container:"ag-sticky-top-container",viewport:"ag-sticky-top-viewport",getRowCtrls:lC},stickyTopLeft:{type:"left",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:lC},stickyTopRight:{type:"right",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:lC},stickyTopFullWidth:{type:"fullWidth",container:"ag-sticky-top-full-width-container",fullWidth:!0,getRowCtrls:lC},stickyBottomCenter:{type:"center",container:"ag-sticky-bottom-container",viewport:"ag-sticky-bottom-viewport",getRowCtrls:cC},stickyBottomLeft:{type:"left",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:cC},stickyBottomRight:{type:"right",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:cC},stickyBottomFullWidth:{type:"fullWidth",container:"ag-sticky-bottom-full-width-container",fullWidth:!0,getRowCtrls:cC},bottomCenter:{type:"center",container:"ag-floating-bottom-container",viewport:"ag-floating-bottom-viewport",getRowCtrls:uC},bottomLeft:{type:"left",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:uC},bottomRight:{type:"right",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:uC},bottomFullWidth:{type:"fullWidth",container:"ag-floating-bottom-full-width-container",fullWidth:!0,getRowCtrls:uC}};function wG(e){return $ne[e]}var qne=["topCenter","topLeft","topRight"],Kne=["bottomCenter","bottomLeft","bottomRight"],Qne=["center","left","right"],Yne=["center","left","right","fullWidth"],Jne=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],Xne=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],Zne=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],SG=["stickyTopCenter","stickyTopLeft","stickyTopRight"],_G=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],eie=[...SG,"stickyTopFullWidth",..._G,"stickyBottomFullWidth"],tie=[...qne,...Kne,...Qne,...SG,..._G],nie=class extends k{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.options=wG(e)}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService,this.columnViewportService=e.columnViewportService,this.resizeObserverService=e.resizeObserverService,this.rowRenderer=e.rowRenderer}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new gne(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.ctrlsService.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,t,n){this.comp=e,this.eContainer=t,this.eViewport=n,this.createManagedBean(new Wne(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows(),this.forContainers(Xne,()=>{this.pinnedWidthFeature=this.createManagedBean(new jne(this.eContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:()=>this.onPinnedWidthChanged()})}),this.forContainers(Zne,()=>{this.pinnedWidthFeature=this.createManagedBean(new zne(this.eContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:()=>this.onPinnedWidthChanged()})}),this.forContainers(Yne,()=>this.createManagedBean(new mG(this.eContainer,this.name==="center"?n:void 0))),this.forContainers(tie,()=>this.createManagedBean(new mne(this.eContainer))),this.forContainers(Jne,()=>this.createManagedBean(new LR(i=>this.comp.setContainerWidth(`${i}px`)))),this.addListeners(),this.registerWithCtrlsService()}addListeners(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(eie.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}let t=()=>{let n=this.gos.get("ensureDomOrder"),i=this.gos.isDomLayout("print");this.comp.setDomOrder(n||i)};this.addManagedPropertyListener("domLayout",t),t()}stopHScrollOnPinnedRows(){this.forContainers(["topCenter","stickyTopCenter","bottomCenter","stickyBottomCenter"],()=>{let e=()=>this.eViewport.scrollLeft=0;this.addManagedElementListeners(this.eViewport,{scroll:e})})}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){let e=t=>{this.dragService.isDragging()&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(e=!1){let t=this.getCenterWidth(),n=this.getCenterViewportScrollLeft();this.columnViewportService.setScrollPosition(t,n,e)}getCenterWidth(){return wf(this.eViewport)}getCenterViewportScrollLeft(){return DC(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){let t=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return RB(this.eViewport)}getViewportScrollLeft(){return DC(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||DZ(this.eViewport)}getViewportElement(){return this.eViewport}setContainerTranslateX(e){this.eContainer.style.transform=`translateX(${e}px)`}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){RC(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){let e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){let t=this.options.getRowCtrls(this.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}let n=this.gos.isDomLayout("print"),s=this.gos.get("embedFullWidthRows")||n,r=t.filter(o=>{let a=o.isFullWidth();return this.options.fullWidth?!s&&a:s||!a});this.comp.setRowCtrls({rowCtrls:r,useFlushSync:e})}};function iie(e){let t;return e.type==="center"?t=`<div class="${e.viewport}" data-ref="eViewport" role="presentation">
                <div class="${e.container}" data-ref="eContainer"></div>
            </div>`:t=`<div class="${e.container}" data-ref="eContainer"></div>`,t}var sie=class extends Ve{constructor(){super(),this.eViewport=Z,this.eContainer=Z,this.rowComps={},this.name=Ve.elementGettingCreated.getAttribute("name"),this.options=wG(this.name),this.setTemplate(iie(this.options))}wireBeans(e){this.beans=e}postConstruct(){let e={setViewportHeight:n=>this.eViewport.style.height=n,setRowCtrls:({rowCtrls:n})=>this.setRowCtrls(n),setDomOrder:n=>{this.domOrder=n},setContainerWidth:n=>this.eContainer.style.width=n,setOffsetTop:n=>this.eContainer.style.transform=`translateY(${n})`};this.createManagedBean(new nie(this.name)).setComp(e,this.eContainer,this.eViewport)}destroy(){this.setRowCtrls([]),super.destroy()}setRowCtrls(e){let t=B({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;let n=i=>{let s=i.getInstanceId(),r=t[s];if(r)this.rowComps[s]=r,delete t[s],this.ensureDomOrder(r.getGui());else{if(!i.getRowNode().displayed)return;let o=new pne(i,this.beans,this.options.type);this.rowComps[s]=o,this.appendRow(o.getGui())}};e.forEach(n),Ko(t).forEach(i=>{this.eContainer.removeChild(i.getGui()),i.destroy()}),ai(this.eContainer,"rowgroup")}appendRow(e){this.domOrder?EZ(this.eContainer,e,this.lastPlacedElement):this.eContainer.appendChild(e),this.lastPlacedElement=e}ensureDomOrder(e){this.domOrder&&(TB(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)}},rie={selector:"AG-ROW-CONTAINER",component:sie};function of(e){return e.map(t=>`<ag-row-container name="${t}"></ag-row-container>`).join("")}var oie=`<div class="ag-root ag-unselectable" role="treegrid">
        <ag-header-root></ag-header-root>
        <div class="ag-floating-top" data-ref="eTop" role="presentation">
            ${of(["topLeft","topCenter","topRight","topFullWidth"])}
        </div>
        <div class="ag-body" data-ref="eBody" role="presentation">
            <div class="ag-body-viewport" data-ref="eBodyViewport" role="presentation">
            ${of(["left","center","right","fullWidth"])}
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" data-ref="eStickyTop" role="presentation">
            ${of(["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])}
        </div>
        <div class="ag-sticky-bottom" data-ref="eStickyBottom" role="presentation">
            ${of(["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])}
        </div>
        <div class="ag-floating-bottom" data-ref="eBottom" role="presentation">
            ${of(["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])}
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`,aie=class extends Ve{constructor(){super(oie,[sne,one,lne,nne,rie]),this.eBodyViewport=Z,this.eStickyTop=Z,this.eStickyBottom=Z,this.eTop=Z,this.eBottom=Z,this.eBody=Z}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.rangeService=e.rangeService}postConstruct(){let e=(n,i)=>{let s=`${n}px`;i.style.minHeight=s,i.style.height=s},t={setRowAnimationCssOnBodyViewport:(n,i)=>this.setRowAnimationCssOnBodyViewport(n,i),setColumnCount:n=>fZ(this.getGui(),n),setRowCount:n=>hZ(this.getGui(),n),setTopHeight:n=>e(n,this.eTop),setBottomHeight:n=>e(n,this.eBottom),setTopDisplay:n=>this.eTop.style.display=n,setBottomDisplay:n=>this.eBottom.style.display=n,setStickyTopHeight:n=>this.eStickyTop.style.height=n,setStickyTopTop:n=>this.eStickyTop.style.top=n,setStickyTopWidth:n=>this.eStickyTop.style.width=n,setStickyBottomHeight:n=>this.eStickyBottom.style.height=n,setStickyBottomBottom:n=>this.eStickyBottom.style.bottom=n,setStickyBottomWidth:n=>this.eStickyBottom.style.width=n,setColumnMovingCss:(n,i)=>this.addOrRemoveCssClass(n,i),updateLayoutClasses:(n,i)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach(r=>{r.toggle("ag-layout-auto-height",i.autoHeight),r.toggle("ag-layout-normal",i.normal),r.toggle("ag-layout-print",i.print)}),this.addOrRemoveCssClass("ag-layout-auto-height",i.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",i.normal),this.addOrRemoveCssClass("ag-layout-print",i.print)},setAlwaysVerticalScrollClass:(n,i)=>this.eBodyViewport.classList.toggle(vG,i),registerBodyViewportResizeListener:n=>{let i=this.resizeObserverService.observeResize(this.eBodyViewport,n);this.addDestroyFunc(()=>i())},setPinnedTopBottomOverflowY:n=>this.eTop.style.overflowY=this.eBottom.style.overflowY=n,setCellSelectableCss:(n,i)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(s=>s.classList.toggle(n,i))},setBodyViewportWidth:n=>this.eBodyViewport.style.width=n};this.ctrl=this.createManagedBean(new hne),this.ctrl.setComp(t,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(this.rangeService&&this.gos.get("enableRangeSelection")||this.gos.get("rowSelection")==="multiple")&&dZ(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,t){let n=this.eBodyViewport.classList;n.toggle("ag-row-animation",t),n.toggle("ag-row-no-animation",!t)}getFloatingTopBottom(){return[this.eTop,this.eBottom]}},lie={selector:"AG-GRID-BODY",component:aie},cie=class extends k{constructor(){super(...arguments),this.beanName="scrollVisibleService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnAnimationService=e.columnAnimationService}postConstruct(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)})}onDisplayedColumnsChanged(){this.update()}onDisplayedColumnsWidthChanged(){this.update()}update(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateImpl())}):this.updateImpl()}updateImpl(){let e=this.ctrlsService.get("center");if(!e||this.columnAnimationService.isActive())return;let t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t)}setScrollsVisible(e){if(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing){this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing;let n={type:"scrollVisibilityChanged"};this.eventService.dispatchEvent(n)}}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}},BV="__ag_grid_instance",bG=class EG extends k{constructor(){super(...arguments),this.beanName="mouseEventService",this.gridInstanceId=EG.gridInstanceSequence.next()}wireBeans(t){this.ctrlsService=t.ctrlsService}stampTopLevelGridCompWithGridInstance(t){t[BV]=this.gridInstanceId}getRenderedCellForEvent(t){return QD(this.gos,t.target,gl.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(t){return this.isElementInThisGrid(t.target)}isElementInThisGrid(t){let n=t;for(;n;){let i=n[BV];if(j(i))return i===this.gridInstanceId;n=n.parentElement}return!1}getCellPositionForEvent(t){let n=this.getRenderedCellForEvent(t);return n?n.getCellPosition():null}getNormalisedPosition(t){let n=this.gos.isDomLayout("normal"),i=t,s,r;if(i.clientX!=null||i.clientY!=null?(s=i.clientX,r=i.clientY):(s=i.x,r=i.y),n){let o=this.ctrlsService.getGridBodyCtrl(),a=o.getScrollFeature().getVScrollPosition(),l=o.getScrollFeature().getHScrollPosition();s+=l.left,r+=a.top}return{x:s,y:r}}};bG.gridInstanceSequence=new Au;var uie=bG,die=class extends k{constructor(){super(),this.beanName="navigationService",this.onPageDown=MV(this.onPageDown,100),this.onPageUp=MV(this.onPageUp,100)}wireBeans(e){this.mouseEventService=e.mouseEventService,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.ctrlsService=e.ctrlsService,this.rowRenderer=e.rowRenderer,this.headerNavigationService=e.headerNavigationService,this.rowPositionUtils=e.rowPositionUtils,this.cellNavigationService=e.cellNavigationService,this.pinnedRowModel=e.pinnedRowModel,this.rangeService=e.rangeService}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){let n=e.key,i=e.altKey,s=e.ctrlKey||e.metaKey,r=!!this.rangeService&&e.shiftKey,o=this.mouseEventService.getCellPositionForEvent(e),a=!1;switch(n){case N.PAGE_HOME:case N.PAGE_END:!s&&!i&&(this.onHomeOrEndKey(n),a=!0);break;case N.LEFT:case N.RIGHT:case N.UP:case N.DOWN:if(!o)return!1;s&&!i&&!r&&(this.onCtrlUpDownLeftRight(n,o),a=!0);break;case N.PAGE_DOWN:case N.PAGE_UP:!s&&!i&&(a=this.handlePageUpDown(n,o,t));break}return a&&e.preventDefault(),a}handlePageUpDown(e,t,n){return n&&(t=this.focusService.getFocusedCell()),t?(e===N.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo(e){let{scrollIndex:t,scrollType:n,scrollColumn:i,focusIndex:s,focusColumn:r}=e;j(i)&&!i.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(i),j(t)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t,n),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(s),this.focusService.setFocusedCell({rowIndex:s,column:r,rowPinned:null,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:s,rowPinned:null,column:r})}onPageDown(e){let n=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.getViewportHeight(),s=this.pageBoundsService.getPixelOffset(),r=n.top+i,o=this.rowModel.getRowIndexAtPixel(r+s);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,o):this.navigateToNextPage(e,o)}onPageUp(e){let n=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.pageBoundsService.getPixelOffset(),s=n.top,r=this.rowModel.getRowIndexAtPixel(s+i);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,r,!0):this.navigateToNextPage(e,r,!0)}navigateToNextPage(e,t,n=!1){let i=this.getViewportHeight(),s=this.pageBoundsService.getFirstRow(),r=this.pageBoundsService.getLastRow(),o=this.pageBoundsService.getPixelOffset(),a=this.rowModel.getRow(e.rowIndex),l=n?a?.rowHeight-i-o:i-o,c=a?.rowTop+l,u=this.rowModel.getRowIndexAtPixel(c+o);if(u===e.rowIndex){let f=n?-1:1;t=u=e.rowIndex+f}let h;n?(h="bottom",u<s&&(u=s),t<s&&(t=s)):(h="top",u>r&&(u=r),t>r&&(t=r)),this.isRowTallerThanView(u)&&(t=u,h="top"),this.navigateTo({scrollIndex:t,scrollType:h,scrollColumn:null,focusIndex:u,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,n=!1){this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{let i=this.getNextFocusIndexForAutoHeight(e,n);this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:i,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){let n=t?-1:1,i=this.getViewportHeight(),s=this.pageBoundsService.getLastRow(),r=0,o=e.rowIndex;for(;o>=0&&o<=s;){let a=this.rowModel.getRow(o);if(a){let l=a.rowHeight??0;if(r+l>i)break;r+=l}o+=n}return Math.max(0,Math.min(o,s))}getViewportHeight(){let{gridBodyCtrl:e,center:t}=this.ctrlsService.getParams(),n=e.getScrollFeature().getVScrollPosition(),i=this.gos.getScrollbarWidth(),s=n.bottom-n.top;return t.isHorizontalScrollShowing()&&(s-=i),s}isRowTallerThanView(e){let t=this.rowModel.getRow(e);if(!t)return!1;let n=t.rowHeight;return typeof n!="number"?!1:n>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){let n=this.cellNavigationService.getNextCellToFocus(e,t,!0),{rowIndex:i}=n,s=n.column;this.navigateTo({scrollIndex:i,scrollType:null,scrollColumn:s,focusIndex:i,focusColumn:s})}onHomeOrEndKey(e){let t=e===N.PAGE_HOME,n=this.visibleColsService.getAllCols(),i=t?n[0]:xe(n),s=t?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow();this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:i,focusIndex:s,focusColumn:i})}onTabKeyDown(e,t){let n=t.shiftKey,i=this.tabToNextCellCommon(e,n,t);if(i!==!1){i&&t.preventDefault();return}if(n){let{rowIndex:s,rowPinned:r}=e.getRowPosition();(r?s===0:s===this.pageBoundsService.getFirstRow())&&(this.gos.get("headerHeight")===0||this.gos.get("suppressHeaderFocus")?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else e instanceof gl&&e.focusCell(!0),this.focusService.focusNextGridCoreContainer(n)&&t.preventDefault()}tabToNextCell(e,t){let n=this.focusService.getFocusedCell();if(!n)return!1;let i=this.getCellByPosition(n);return!i&&(i=this.rowRenderer.getRowByPosition(n),!i||!i.isFullWidth())?!1:!!this.tabToNextCellCommon(i,e,t)}tabToNextCellCommon(e,t,n){let i=e.isEditing();if(!i&&e instanceof gl){let o=e.getRowCtrl();o&&(i=o.isEditing())}let s;return i?this.gos.get("editType")==="fullRow"?s=this.moveToNextEditingRow(e,t,n):s=this.moveToNextEditingCell(e,t,n):s=this.moveToNextCellNotEditing(e,t),s===null?s:s||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,t,n=null){let i=e.getCellPosition();e.getGui().focus(),e.stopEditing();let s=this.findNextCellToFocusOn(i,t,!0);return s===!1?null:s==null?!1:(s.startEditing(null,!0,n),s.focusCell(!1),!0)}moveToNextEditingRow(e,t,n=null){let i=e.getCellPosition(),s=this.findNextCellToFocusOn(i,t,!0);if(s===!1)return null;if(s==null)return!1;let r=s.getCellPosition(),o=this.isCellEditable(i),a=this.isCellEditable(r),l=r&&i.rowIndex===r.rowIndex&&i.rowPinned===r.rowPinned;return o&&e.setFocusOutOnEditor(),l||(e.getRowCtrl().stopEditing(),s.getRowCtrl().startRowEditing(void 0,void 0,n)),a?(s.setFocusInOnEditor(),s.focusCell()):s.focusCell(!0),!0}moveToNextCellNotEditing(e,t){let n=this.visibleColsService.getAllCols(),i;e instanceof ml?i=se(B({},e.getRowPosition()),{column:t?n[0]:xe(n)}):i=e.getCellPosition();let s=this.findNextCellToFocusOn(i,t,!1);if(s===!1)return null;if(s instanceof gl)s.focusCell(!0);else if(s)return this.tryToFocusFullWidthRow(s.getRowPosition(),t);return j(s)}findNextCellToFocusOn(e,t,n){let i=e;for(;;){e!==i&&(e=i),t||(i=this.getLastCellOfColSpan(i)),i=this.cellNavigationService.getNextTabbedCell(i,t);let s=this.gos.getCallback("tabToNextCell");if(j(s)){let l=s({backwards:t,editing:n,previousCellPosition:e,nextCellPosition:i||null});if(l===!0||l===null)l===null&&G("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),i=e;else{if(l===!1)return!1;i={rowIndex:l.rowIndex,column:l.column,rowPinned:l.rowPinned}}}if(!i)return null;if(i.rowIndex<0){let a=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a+i.rowIndex,column:i.column},fromCell:!0}),null}let r=this.gos.get("editType")==="fullRow";if(n&&!r&&!this.isCellEditable(i))continue;this.ensureCellVisible(i);let o=this.getCellByPosition(i);if(!o){let a=this.rowRenderer.getRowByPosition(i);if(!a||!a.isFullWidth()||n)continue;return a}if(!o.isSuppressNavigable())return this.rangeService?.setRangeToCell(i),o}}isCellEditable(e){let t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}getCellByPosition(e){let t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return e.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):e.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.rowModel.getRow(e.rowIndex)}navigateToNextCell(e,t,n,i){let s=n,r=!1;for(;s&&(s===n||!this.isValidNavigateCell(s));)this.gos.get("enableRtl")?t===N.LEFT&&(s=this.getLastCellOfColSpan(s)):t===N.RIGHT&&(s=this.getLastCellOfColSpan(s)),s=this.cellNavigationService.getNextCellToFocus(t,s),r=Pe(s);if(r&&e&&e.key===N.UP&&(s={rowIndex:-1,rowPinned:null,column:n.column}),i){let a=this.gos.getCallback("navigateToNextCell");if(j(a)){let c=a({key:t,previousCellPosition:n,nextCellPosition:s||null,event:e});j(c)?s={rowPinned:c.rowPinned,rowIndex:c.rowIndex,column:c.column}:s=null}}if(!s)return;if(s.rowIndex<0){let a=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a+s.rowIndex,column:n.column},event:e||void 0,fromCell:!0});return}let o=this.getNormalisedPosition(s);o?this.focusPosition(o):this.tryToFocusFullWidthRow(s)}getNormalisedPosition(e){this.ensureCellVisible(e);let t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t=!1){let n=this.visibleColsService.getAllCols(),i=this.rowRenderer.getRowByPosition(e);if(!i||!i.isFullWidth())return!1;let s=this.focusService.getFocusedCell(),r={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?xe(n):n[0])};this.focusPosition(r);let o=s!=null?this.rowPositionUtils.before(r,s):!1,a={type:"fullWidthRowFocused",rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:r.column,isFullWidthCell:!0,fromBelow:o};return this.eventService.dispatchEvent(a),!0}focusPosition(e){this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){let t=this.getCellByPosition(e);if(!t)return e;let n=t.getColSpanningList();return n.length===1?e:{rowIndex:e.rowIndex,column:xe(n),rowPinned:e.rowPinned}}ensureCellVisible(e){let t=this.gos.isGroupRowsSticky(),n=this.rowModel.getRow(e.rowIndex);!(t&&n?.sticky)&&Pe(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}},hie=class extends k{constructor(){super(...arguments),this.beanName="horizontalResizeService"}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService}addResizeBar(e){let t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(t),()=>this.dragService.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();let n=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(n)}setResizeIcons(){let e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e,t){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){let e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},fie=class extends k{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupService=e.popupService,this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.menuService=e.menuService}hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,t,n){this.showPopup(e,i=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:n,mouseEvent:t,ePopup:i})},n,t.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(e,t,n){let i=-1,s="left",r=this.menuService.isLegacyMenuEnabled();!r&&this.gos.get("enableRtl")&&(i=1,s="right");let o=r?void 0:4*i,a=r?void 0:4;this.showPopup(e,l=>{this.popupService.positionPopupByComponent({type:n,eventSource:t,ePopup:l,nudgeX:o,nudgeY:a,alignSide:s,keepWithinBounds:!0,position:"under",column:e})},n,t,r)}showPopup(e,t,n,i,s){let r=e?this.createBean(new Dee(e,"COLUMN_MENU")):void 0;if(this.activeMenu=r,!r?.hasFilter()||!e)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");let o=document.createElement("div");ai(o,"presentation"),o.classList.add("ag-menu"),s||o.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(o,{keydown:v=>this.trapFocusWithin(v,o)}),o.appendChild(r?.getGui());let a,l=()=>r?.afterGuiDetached(),c=this.menuService.isColumnMenuAnchoringEnabled()?i??this.ctrlsService.getGridBodyCtrl().getGui():void 0,u=v=>{e.setMenuVisible(!1,"contextMenu");let y=v instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),y&&i&&bs(i)){let C=this.focusService.findTabbableParent(i);C&&C.focus()}l(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,n,e)},h=this.localeService.getLocaleTextFunc(),f=s&&n!=="columnFilter"?h("ariaLabelColumnMenu","Column Menu"):h("ariaLabelColumnFilter","Column Filter"),g=this.popupService.addPopup({modal:!0,eChild:o,closeOnEsc:!0,closedCallback:u,positionCallback:()=>t(o),anchorToElement:c,ariaLabel:f});g&&(this.hidePopup=a=g.hideFunc),r.afterInit().then(()=>{t(o),r.afterGuiAttached({container:n,hidePopup:a})}),e.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,n,e)}trapFocusWithin(e,t){e.key!==N.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,n){let i={type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:n??null};this.eventService.dispatchEvent(i)}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},pie=50,gie=class extends k{constructor(){super(...arguments),this.beanName="resizeObserverService",this.polyfillFunctions=[]}observeResize(e,t){let n=this.gos.getWindow(),i=()=>{let a=new n.ResizeObserver(t);return a.observe(e),()=>a.disconnect()},s=()=>{let a=e?.clientWidth??0,l=e?.clientHeight??0,c=!0,u=()=>{if(c){let h=e?.clientWidth??0,f=e?.clientHeight??0;(h!==a||f!==l)&&(a=h,l=f,t()),this.doNextPolyfillTurn(u)}};return u(),()=>c=!1},r=this.gos.get("suppressBrowserResizeObserver");return!!n.ResizeObserver&&!r?i():this.getFrameworkOverrides().wrapIncoming(()=>s(),"resize-observer")}doNextPolyfillTurn(e){this.polyfillFunctions.push(e),this.schedulePolyfill()}schedulePolyfill(){if(this.polyfillScheduled)return;let e=()=>{let t=this.polyfillFunctions;this.polyfillScheduled=!1,this.polyfillFunctions=[],t.forEach(n=>n())};this.polyfillScheduled=!0,window.setTimeout(e,pie)}},mie=class extends k{constructor(){super(...arguments),this.beanName="animationFrameService",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}setScrollTop(e){let t=this.gos.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&e===0){let n=this.paginationService?.getCurrentPage()??0;n!==this.lastPage&&(this.lastPage=n,this.scrollGoingDown=!0)}this.lastScrollTop=e}postConstruct(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){this.useAnimationFrame===!1&&G(`AnimationFrameService.${e} called but animation frames are off`)}createTask(e,t,n){this.verifyAnimationFrameOn(n);let i={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[n],i),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;let t=this.scrollGoingDown?1:-1;e.list.sort((n,i)=>n.index!==i.index?t*(i.index-n.index):i.createOrder-n.createOrder),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");let t=this.createTasksP1,n=t.list,i=this.createTasksP2,s=i.list,r=this.destroyTasks,o=new Date().getTime(),a=new Date().getTime()-o,l=e<=0,c=this.ctrlsService.getGridBodyCtrl();for(;l||a<e;){if(!c.getScrollFeature().scrollGridIfNeeded()){let h;if(n.length)this.sortTaskList(t),h=n.pop().task;else if(s.length)this.sortTaskList(i),h=s.pop().task;else if(r.length)h=r.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(h)||h()}a=new Date().getTime()-o}n.length||s.length||r.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){let e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){let t=this.gos.getWindow();t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let t=!1;return()=>{if(!this.isOn()){window.setTimeout(e,0);return}t||(t=!0,this.addDestroyTask(()=>{t=!1,e()}))}}};var vie=class extends k{constructor(){super(...arguments),this.beanName="expansionService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.isClientSideRowModel=this.rowModel.getType()==="clientSide"}expandRows(e){if(!this.isClientSideRowModel)return;let t=new Set(e);this.rowModel.forEachNode(n=>{n.id&&t.has(n.id)&&(n.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){let e=[];return this.rowModel.forEachNode(({expanded:t,id:n})=>{t&&n&&e.push(n)}),e}expandAll(e){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(e)}setRowNodeExpanded(e,t,n,i){e&&(n&&e.parent&&e.parent.level!==-1&&this.setRowNodeExpanded(e.parent,t,n,i),e.setExpanded(t,void 0,i))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}},Cie=class extends k{constructor(){super(...arguments),this.beanName="menuService"}wireBeans(e){this.filterMenuFactory=e.filterMenuFactory,this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.filterManager=e.filterManager,this.rowRenderer=e.rowRenderer,this.columnChooserFactory=e.columnChooserFactory,this.contextMenuFactory=e.contextMenuFactory,this.enterpriseMenuFactory=e.enterpriseMenuFactory}postConstruct(){this.activeMenuFactory=this.enterpriseMenuFactory??this.filterMenuFactory}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){let t=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(t,e,e.containerType,!0)}showHeaderContextMenu(e,t,n){this.activeMenuFactory.showMenuAfterContextMenuEvent(e,t,n)}getContextMenuPosition(e,t){let n=this.getRowCtrl(e),i=this.getCellGui(n,t);if(!i)return n?{x:0,y:n.getRowYPosition()}:{x:0,y:0};let s=i.getBoundingClientRect();return{x:s.x+s.width/2,y:s.y+s.height/2}}showContextMenu(e){let{rowNode:t}=e,n=e.column,{anchorToElement:i,value:s}=e;t&&n&&s==null&&(s=t.getValueFromValueService(n)),i==null&&(i=this.getContextMenuAnchorElement(t,n)),this.contextMenuFactory?.onContextMenu(e.mouseEvent??null,e.touchEvent??null,t??null,n??null,s,i)}showColumnChooser(e){this.columnChooserFactory?.showColumnChooser(e)}hidePopupMenu(){this.contextMenuFactory?.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){this.columnChooserFactory?.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(e){let{suppressMenu:t,suppressHeaderMenuButton:n}=e.getColDef();return!(n??t)&&this.activeMenuFactory.isMenuEnabled(e)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&!!this.filterManager?.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){return!e?.getColDef().suppressHeaderContextMenu&&this.getColumnMenuType()==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){let e=!this.isSuppressMenuHide();return!(Yo()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return!!this.filterManager?.isFilterAllowed(e)&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return this.getColumnMenuType()==="new"}isLegacyMenuEnabled(){return this.getColumnMenuType()==="legacy"}isFloatingFilterButtonEnabled(e){let t=e.getColDef(),n=t.floatingFilterComponentParams?.suppressFilterButton;return n!=null&&G("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),t.suppressFloatingFilterButton==null?!n:!t.suppressFloatingFilterButton}getColumnMenuType(){return this.gos.get("columnMenu")}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){let e=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()?this.gos.exists("suppressMenuHide")?e:!1:e}showColumnMenuCommon(e,t,n,i){let{positionBy:s}=t,r=t.column;if(s==="button"){let{buttonElement:o}=t;e.showMenuAfterButtonClick(r,o,n,i)}else if(s==="mouse"){let{mouseEvent:o}=t;e.showMenuAfterMouseEvent(r,o,n,i)}else r&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(r,"auto"),this.animationFrameService.requestAnimationFrame(()=>{let o=this.ctrlsService.getHeaderRowContainerCtrl(r.getPinned()).getHeaderCtrlForColumn(r);e.showMenuAfterButtonClick(r,o.getAnchorElementForMenu(i),n,!0)}))}getRowCtrl(e){let{rowIndex:t,rowPinned:n}=e||{};if(t!=null)return this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:n})||void 0}getCellGui(e,t){return!e||!t?void 0:e.getCellCtrl(t)?.getGui()||void 0}getContextMenuAnchorElement(e,t){let n=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),i=this.getRowCtrl(e);if(!i)return n;let s=this.getCellGui(i,t);return s||(i.isFullWidth()?i.getFullWidthElement():n)}},yie=class extends dl{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){let n=super.setValue(e,t);return this.eInput.value=e,n}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},wie={selector:"AG-INPUT-TEXT-AREA",component:yie},Sie=class extends Fu{constructor(){super(`<div class="ag-large-text">
        <ag-input-text-area data-ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`,[wie]),this.eTextArea=Z}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),j(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){let t=e.key;(t===N.LEFT||t===N.UP||t===N.RIGHT||t===N.DOWN||e.shiftKey&&t===N.ENTER)&&e.stopPropagation()}afterGuiAttached(){let e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){let e=this.eTextArea.getValue();return!j(e)&&!j(this.params.value)?this.params.value:this.params.parseValue(e)}},_ie=class extends Fu{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){this.gos.setDomData(this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){let e=this.getGui(),t=this.params,n=i=>{aR(this.gos,i,t.node,t.column,!0)||t.onKeyDown(i)};this.addManagedElementListeners(e,{keydown:n})}},bie=class extends Fu{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" data-ref="eSelect"></ag-select>
            </div>`,[Fee]),this.eSelect=Z,this.startedByEnter=!1}wireBeans(e){this.valueService=e.valueService}init(e){this.focusAfterAttached=e.cellStartedEdit;let{eSelect:t,valueService:n,gos:i}=this,{values:s,value:r,eventKey:o}=e;if(Pe(s)){G("no values found for select cellEditor");return}this.startedByEnter=o!=null?o===N.ENTER:!1;let a=!1;s.forEach(h=>{let f={value:h},g=n.formatValue(e.column,null,h),v=g!=null;f.text=v?g:h,t.addOption(f),a=a||r===h}),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);let{valueListGap:l,valueListMaxWidth:c,valueListMaxHeight:u}=e;l!=null&&t.setPickerGap(l),u!=null&&t.setPickerMaxHeight(u),c!=null&&t.setPickerMaxWidth(c),i.get("editType")!=="fullRow"&&this.addManagedListeners(this.eSelect,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}},FC=class extends Fu{constructor(e){super(`
            <div class="ag-cell-edit-wrapper">
                ${e.getTemplate()}
            </div>`,e.getAgComponents()),this.cellEditorInput=e,this.eInput=Z}init(e){this.params=e;let t=this.eInput;this.cellEditorInput.init(t,e);let n;if(e.cellStartedEdit){this.focusAfterAttached=!0;let i=e.eventKey;i===N.BACKSPACE||e.eventKey===N.DELETE?n="":i&&i.length===1?n=i:(n=this.cellEditorInput.getStartValue(),i!==N.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,n=this.cellEditorInput.getStartValue();n!=null&&t.setStartValue(n),this.addManagedElementListeners(t.getGui(),{keydown:i=>{let{key:s}=i;(s===N.PAGE_UP||s===N.PAGE_DOWN)&&i.preventDefault()}})}afterGuiAttached(){let e=this.localeService.getLocaleTextFunc(),t=this.eInput;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;qr()||t.getFocusableElement().focus();let n=t.getInputElement();this.highlightAllOnFocus?n.select():this.cellEditorInput.setCaret?.()}focusIn(){let e=this.eInput,t=e.getFocusableElement(),n=e.getInputElement();t.focus(),n.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}},Eie=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" data-ref="eInput"></ag-input-text-field>'}getAgComponents(){return[MC]}init(e,t){this.eInput=e,this.params=t,t.maxLength!=null&&e.setMaxLength(t.maxLength)}getValue(){let e=this.eInput.getValue();return!j(e)&&!j(this.params.value)?this.params.value:this.params.parseValue(e)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){let e=this.eInput.getValue(),t=j(e)&&e.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}},DG=class extends FC{constructor(){super(new Eie)}},Die=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" data-ref="eInput"></ag-input-number-field>'}getAgComponents(){return[Uee]}init(e,t){this.eInput=e,this.params=t,t.max!=null&&e.setMax(t.max),t.min!=null&&e.setMin(t.min),t.precision!=null&&e.setPrecision(t.precision),t.step!=null&&e.setStep(t.step);let n=e.getInputElement();t.preventStepping?e.addManagedElementListeners(n,{keydown:this.preventStepping}):t.showStepperButtons&&n.classList.add("ag-number-field-input-stepper")}preventStepping(e){(e.key===N.UP||e.key===N.DOWN)&&e.preventDefault()}getValue(){let e=this.eInput.getValue();if(!j(e)&&!j(this.params.value))return this.params.value;let t=this.params.parseValue(e);if(t==null)return t;if(typeof t=="string"){if(t==="")return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}},Rie=class extends FC{constructor(){super(new Die)}},Tie=class extends wl{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();let e=qr();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){this.gos.getActiveDomElement()===this.eInput&&e.preventDefault()}setMin(e){let t=e instanceof Date?Ji(e??null,!1)??void 0:e;return this.min===t?this:(this.min=t,jr(this.eInput,"min",t),this)}setMax(e){let t=e instanceof Date?Ji(e??null,!1)??void 0:e;return this.max===t?this:(this.max=t,jr(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,jr(this.eInput,"step",e),this)}getDate(){if(this.eInput.validity.valid)return oi(this.getValue())??void 0}setDate(e,t){this.setValue(Ji(e??null,!1),t)}},RG={selector:"AG-INPUT-DATE-FIELD",component:Tie},Iie=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[RG]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){let e=this.eInput.getDate();return!j(e)&&!j(this.params.value)?this.params.value:e??null}getStartValue(){let{value:e}=this.params;if(e instanceof Date)return Ji(e,!1)}},Aie=class extends FC{constructor(){super(new Iie)}},Mie=class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[RG]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){let e=this.formatDate(this.eInput.getDate());return!j(e)&&!j(this.params.value)?this.params.value:this.params.parseValue(e??"")}getStartValue(){return Ji(this.parseDate(this.params.value??void 0)??null,!1)}parseDate(e){let t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):oi(e)??void 0}formatDate(e){let t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):Ji(e??null,!1)??void 0}},Pie=class extends FC{wireBeans(e){this.dataTypeService=e.dataTypeService}constructor(){super(new Mie(()=>this.dataTypeService))}},Fie=class extends Fu{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[RR]),this.eCheckbox=Z}init(e){this.params=e;let t=e.value??void 0;this.eCheckbox.setValue(t),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(this.eCheckbox,{fieldValueChanged:i=>this.setAriaLabel(i.selected)})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){let t=this.localeService.getLocaleTextFunc(),n=CR(t,e),i=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${i} (${n})`)}},cf=class{constructor(e){this.cellValueChanges=e}},zD=class extends cf{constructor(e,t,n,i){super(e),this.initialRange=t,this.finalRange=n,this.ranges=i}},xie=10,GV=class{constructor(e){this.actionStack=[],this.maxStackSize=e||xie,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},Oie=class extends k{constructor(){super(...arguments),this.beanName="undoRedoService",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{let t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},n=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,t),i=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(n||i||this.isPasting||this.isRangeInAction))return;let{rowPinned:r,rowIndex:o,column:a,oldValue:l,value:c}=e,u={rowPinned:r,rowIndex:o,columnId:a.getColId(),newValue:c,oldValue:l};this.cellValueChanges.push(u)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}wireBeans(e){this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.cellPositionUtils=e.cellPositionUtils,this.rowPositionUtils=e.rowPositionUtils,this.columnModel=e.columnModel,this.rangeService=e.rangeService}postConstruct(){if(!this.gos.get("undoRedoCellEditing"))return;let e=this.gos.get("undoRedoCellEditingLimit");if(e<=0)return;this.undoStack=new GV(e),this.redoStack=new GV(e),this.addListeners();let t=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:n=>{n.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:t,newColumnsLoaded:t,columnGroupOpened:t,columnRowGroupChanged:t,columnMoved:t,columnPinned:t,columnVisible:t,rowDragEnd:t}),this.ctrlsService.whenReady(n=>{this.gridBodyCtrl=n.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){let t={type:"undoStarted",source:e};this.eventService.dispatchEvent(t);let n=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo"),i={type:"undoEnded",source:e,operationPerformed:n};this.eventService.dispatchEvent(i)}redo(e){let t={type:"redoStarted",source:e};this.eventService.dispatchEvent(t);let n=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo"),i={type:"redoEnded",source:e,operationPerformed:n};this.eventService.dispatchEvent(i)}undoRedo(e,t,n,i,s){if(!e)return!1;let r=e.pop();return!r||!r.cellValueChanges?!1:(this.processAction(r,o=>o[i],s),r instanceof zD?this.processRange(this.rangeService,r.ranges||[r[n]]):this.processCell(r.cellValueChanges),t.push(r),!0)}processAction(e,t,n){e.cellValueChanges.forEach(i=>{let{rowIndex:s,rowPinned:r,columnId:o}=i,a={rowIndex:s,rowPinned:r},l=this.rowPositionUtils.getRowNode(a);l.displayed&&l.setDataValue(o,t(i),n)})}processRange(e,t){let n;e.removeAllCellRanges(!0),t.forEach((i,s)=>{if(!i)return;let r=i.startRow,o=i.endRow;s===t.length-1&&(n={rowPinned:r.rowPinned,rowIndex:r.rowIndex,columnId:i.startColumn.getColId()},this.setLastFocusedCell(n));let a={rowStartIndex:r.rowIndex,rowStartPinned:r.rowPinned,rowEndIndex:o.rowIndex,rowEndPinned:o.rowPinned,columnStart:i.startColumn,columns:i.columns};e.addCellRange(a)})}processCell(e){let t=e[0],{rowIndex:n,rowPinned:i}=t,s={rowIndex:n,rowPinned:i},r=this.rowPositionUtils.getRowNode(s),o={rowPinned:t.rowPinned,rowIndex:r.rowIndex,columnId:t.columnId};this.setLastFocusedCell(o,this.rangeService)}setLastFocusedCell(e,t){let{rowIndex:n,columnId:i,rowPinned:s}=e,r=this.gridBodyCtrl.getScrollFeature(),o=this.columnModel.getCol(i);if(!o)return;r.ensureIndexVisible(n),r.ensureColumnVisible(o);let a={rowIndex:n,column:o,rowPinned:s};this.focusService.setFocusedCell(se(B({},a),{forceBrowserFocus:!0})),t?.setRangeToCell(a)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{let e=new cf(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){let n=new cf(this.cellValueChanges);this.pushActionsToUndoStack(n)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{let e=new cf(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{let t=new zD(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;this.rangeService&&this.gos.get("enableRangeSelection")?e=new zD(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):e=new cf(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1}})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}};function Nie(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition()}function kie(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getHScrollPosition()}function TG(e,t,n="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(t,n),"ensureVisible")}function IG(e,t,n){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureIndexVisible(t,n),"ensureVisible")}function Lie(e,t,n=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureNodeVisible(t,n),"ensureVisible")}function Vie(e){e.undoRedoService?.undo("api")}function Bie(e){e.undoRedoService?.redo("api")}function Gie(e,t={}){return e.rowRenderer.getCellEditorInstances(t).map(hf)}function Hie(e){return e.rowRenderer.getEditingCells()}function Uie(e,t=!1){e.rowRenderer.stopEditing(t)}function Wie(e,t){let n=e.columnModel.getCol(t.colKey);if(!n){G(`no column found for ${t.colKey}`);return}let i={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:n};t.rowPinned==null&&IG(e,t.rowIndex),TG(e,t.colKey);let r=e.navigationService.getCellByPosition(i);r&&(e.focusService.isCellFocused(i)||e.focusService.setFocusedCell(i),r.startRowOrCellEdit(t.key))}function jie(e){return e.undoRedoService?.getCurrentUndoStackSize()??0}function zie(e){return e.undoRedoService?.getCurrentRedoStackSize()??0}var $ie=class extends k{constructor(){super(...arguments),this.beanName="editService"}wireBeans(e){this.navigationService=e.navigationService,this.userComponentFactory=e.userComponentFactory,this.valueService=e.valueService}startEditing(e,t=null,n=!1,i=null){let s=this.createCellEditorParams(e,t,n),r=e.getColumn().getColDef(),o=this.userComponentFactory.getCellEditorDetails(r,s),a=o?.popupFromSelector!=null?o.popupFromSelector:!!r.cellEditorPopup,l=o?.popupPositionFromSelector!=null?o.popupPositionFromSelector:r.cellEditorPopupPosition;e.setEditing(!0,o),e.getComp().setEditDetails(o,a,l,this.gos.get("reactiveCustomComponents"));let c=e.createEvent(i,"cellEditingStarted");this.eventService.dispatchEvent(c)}stopEditing(e,t){let n=e.getComp(),{newValue:i,newValueExists:s}=this.takeValueFromCellEditor(t,n),r=e.getRowNode(),o=e.getColumn(),a=r.getValueFromValueService(o),l=!1;s&&(l=this.saveNewValue(e,a,i,r,o)),e.setEditing(!1,void 0),n.setEditDetails(),e.updateAndFormatValue(!1),e.refreshCell({forceRefresh:!0,suppressFlash:!0});let c=se(B({},e.createEvent(null,"cellEditingStopped")),{oldValue:a,newValue:i,valueChanged:l});return this.eventService.dispatchEvent(c),l}handleColDefChanged(e){let t=e.getCellEditor();if(t?.refresh){let{eventKey:n,cellStartedEdit:i}=e.getEditCompDetails().params,s=this.createCellEditorParams(e,n,i),r=e.getColumn().getColDef(),o=this.userComponentFactory.getCellEditorDetails(r,s);t.refresh(o.params)}}setFocusOutOnEditor(e){let t=e.getComp().getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(e){let t=e.getComp().getCellEditor();t&&t.focusIn?t.focusIn():e.focusCell(!0)}stopEditingAndFocus(e,t=!1,n=!1){e.stopRowOrCellEdit(),e.focusCell(!0),t||this.navigateAfterEdit(n,e.getCellPosition())}createPopupEditorWrapper(e){return new _ie(e)}takeValueFromCellEditor(e,t){let n={newValueExists:!1};if(e)return n;let i=t.getCellEditor();return!i||i.isCancelAfterEnd&&i.isCancelAfterEnd()?n:{newValue:i.getValue(),newValueExists:!0}}saveNewValue(e,t,n,i,s){if(n===t)return!1;e.setSuppressRefreshCell(!0);let r=i.setDataValue(s,n,"edit");return e.setSuppressRefreshCell(!1),r}createCellEditorParams(e,t,n){let i=e.getColumn(),s=e.getRowNode();return this.gos.addGridCommonParams({value:s.getValueFromValueService(i),eventKey:t,column:i,colDef:i.getColDef(),rowIndex:e.getCellPosition().rowIndex,node:s,data:s.data,cellStartedEdit:n,onKeyDown:e.onKeyDown.bind(e),stopEditing:e.stopEditingAndFocus.bind(e),eGridCell:e.getGui(),parseValue:r=>this.valueService.parseValue(i,s,r,e.getValue()),formatValue:e.formatValue.bind(e)})}navigateAfterEdit(e,t){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){let i=e?N.UP:N.DOWN;this.navigationService.navigateToNextCell(null,i,t,!1)}}},qie=class extends k{constructor(){super(...arguments),this.beanName="rowEditService"}startEditing(e,t=null,n=null,i=null){e.getAllCellCtrls().reduce((r,o)=>{let a=o===n;return a?o.startEditing(t,a,i):o.startEditing(null,a,i),r?!0:o.isEditing()},!1)&&this.setEditing(e,!0)}stopEditing(e,t=!1){let n=e.getAllCellCtrls(),i=e.isEditing();e.setStoppingRowEdit(!0);let s=!1;for(let r of n){let o=r.stopEditing(t);i&&!t&&!s&&o&&(s=!0)}if(s){let r=e.createRowEvent("rowValueChanged");this.eventService.dispatchEvent(r)}i&&this.setEditing(e,!1),e.setStoppingRowEdit(!1)}setEditing(e,t){e.setEditingRow(t),e.forEachGui(void 0,i=>i.rowComp.addOrRemoveCssClass("ag-row-editing",t));let n=t?e.createRowEvent("rowEditingStarted"):e.createRowEvent("rowEditingStopped");this.eventService.dispatchEvent(n)}},Sl={version:ve,moduleName:"@ag-grid-community/edit-core",beans:[$ie]},Kie={version:ve,moduleName:"@ag-grid-community/edit-api",apiFunctions:{undoCellEditing:Vie,redoCellEditing:Bie,getCellEditorInstances:Gie,getEditingCells:Hie,stopEditing:Uie,startEditingCell:Wie,getCurrentUndoSize:jie,getCurrentRedoSize:zie},dependantModules:[Sl]},Qie={version:ve,moduleName:"@ag-grid-community/undo-redo-edit",beans:[Oie],dependantModules:[Sl]},Yie={version:ve,moduleName:"@ag-grid-community/full-row-edit",beans:[qie],dependantModules:[Sl]},AG={version:ve,moduleName:"@ag-grid-community/default-editor",userComponents:[{name:"agCellEditor",classImp:DG}],dependantModules:[Sl]},Jie={version:ve,moduleName:"@ag-grid-community/data-type-editors",userComponents:[{name:"agTextCellEditor",classImp:DG},{name:"agNumberCellEditor",classImp:Rie},{name:"agDateCellEditor",classImp:Aie},{name:"agDateStringCellEditor",classImp:Pie},{name:"agCheckboxCellEditor",classImp:Fie}],dependantModules:[AG]},Xie={version:ve,moduleName:"@ag-grid-community/select-editor",userComponents:[{name:"agSelectCellEditor",classImp:bie}],dependantModules:[Sl]},Zie={version:ve,moduleName:"@ag-grid-community/large-text-editor",userComponents:[{name:"agLargeTextCellEditor",classImp:Sie}],dependantModules:[Sl]},ese={version:ve,moduleName:"@ag-grid-community/all-editors",dependantModules:[AG,Jie,Xie,Zie]},tse={version:ve,moduleName:"@ag-grid-community/editing",dependantModules:[Sl,Qie,Yie,ese,Kie]},nse=class extends k{constructor(){super(...arguments),this.beanName="autoWidthCalculator"}wireBeans(e){this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){let n=this.getHeaderCellForColumn(e);if(!n)return-1;let i=this.rowRenderer.getAllCellsForColumn(e);return t||i.push(n),this.addElementsToContainerAndGetWidth(i)}getPreferredWidthForColumnGroup(e){let t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){let t=document.createElement("form");t.style.position="fixed";let n=this.centerRowContainerCtrl.getContainerElement();e.forEach(r=>this.cloneItemIntoDummy(r,t)),n.appendChild(t);let i=t.offsetWidth;n.removeChild(t);let s=this.getAutoSizePadding();return i+s}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(e){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(n=>{let i=n.getHtmlElementForColumnHeader(e);i!=null&&(t=i)}),t}cloneItemIntoDummy(e,t){let n=e.cloneNode(!0);n.style.width="",n.style.position="static",n.style.left="";let i=document.createElement("div"),s=i.classList;["ag-header-cell","ag-header-group-cell"].some(a=>n.classList.contains(a))?(s.add("ag-header","ag-header-row"),i.style.position="static"):s.add("ag-row");let o=e.parentElement;for(;o;){if(["ag-header-row","ag-row"].some(l=>o.classList.contains(l))){for(let l=0;l<o.classList.length;l++){let c=o.classList[l];c!="ag-row-position-absolute"&&s.add(c)}break}o=o.parentElement}i.appendChild(n),t.appendChild(i)}},ise=class extends k{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.topContainerHeight=0,this.bottomContainerHeight=0,this.extraTopHeight=0,this.extraBottomHeight=0}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.isClientSide=this.rowModel.getType()==="clientSide",this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl})}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}setOffsetTop(e){if(this.extraTopHeight===e)return;this.extraTopHeight=e;let t={type:"stickyTopOffsetChanged",offset:e};this.eventService.dispatchEvent(t)}setOffsetBottom(e){this.extraBottomHeight!==e&&(this.extraBottomHeight=e)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getExtraTopHeight(){return this.extraTopHeight}getExtraBottomHeight(){return this.extraBottomHeight}getLastPixelOfGroup(e){return this.isClientSide?this.getClientSideLastPixelOfGroup(e):this.getServerSideLastPixelOfGroup(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}getServerSideLastPixelOfGroup(e){if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(e.isExpandable()||e.footer){if(e.master)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let n=e.childStore?.getStoreBounds();return e.footer&&(n=e.sibling.childStore?.getStoreBounds()),(n?.heightPx??0)+(n?.topPx??0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(e){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(e.isExpandable()||e.footer){if(e.footer&&e.rowIndex===0)return Number.MAX_SAFE_INTEGER;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let i=e.footer?e.sibling:e;for(;i.isExpandable()&&i.expanded;)if(i.master)i=i.detailNode;else if(i.childrenAfterSort){if(i.childrenAfterSort.length===0)break;i=xe(i.childrenAfterSort)}return i.rowTop+i.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(e){let t=e==="top",n=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,n);let i=t?this.rowRenderer.getFirstVisibleVerticalPixel()-this.extraTopHeight:this.rowRenderer.getLastVisibleVerticalPixel()-this.extraTopHeight,s=new Set,r=c=>{if(s.add(c),t){let u=this.getLastPixelOfGroup(c),h=i+n+c.rowHeight;u<h?c.stickyRowTop=n+(u-h):c.stickyRowTop=n}else{let u=this.getFirstPixelOfGroup(c),h=i-(n+c.rowHeight);u>h?c.stickyRowTop=n-(u-h):c.stickyRowTop=n}n=0,s.forEach(u=>{let h=u.stickyRowTop+u.rowHeight;n<h&&(n=h)})},o=this.areFooterRowsStickySuppressed(),a=this.gos.get("suppressGroupRowsSticky"),l=c=>c.displayed?c.footer?o===!0||o==="grand"&&c.level===-1||o==="group"&&c.level>-1?!1:!s.has(c):c.isExpandable()?a===!0?!1:!s.has(c)&&c.expanded:!1:!1;for(let c=0;c<100;c++){let u=i+n;t||(u=i-n);let h=this.rowModel.getRowIndexAtPixel(u),f=this.rowModel.getRow(h);if(f==null)break;let v=this.getStickyAncestors(f).find(C=>(t?C.rowIndex<h:C.rowIndex>h)&&l(C));if(v){r(v);continue}if((t?f.rowTop<u:f.rowTop+f.rowHeight>u)&&l(f)){r(f);continue}break}return t||s.forEach(c=>{c.stickyRowTop=n-(c.stickyRowTop+c.rowHeight)}),this.refreshNodesAndContainerHeight(e,s,n)}areFooterRowsStickySuppressed(){let e=this.gos.get("suppressStickyTotalRow");if(e===!0)return!0;let t=!!this.gos.get("groupIncludeFooter")||e==="group",n=!!this.gos.get("groupIncludeTotalFooter")||e==="grand";return t&&n?!0:n?"grand":t?"group":!1}canRowsBeSticky(){let e=this.gos.isGroupRowsSticky(),t=this.areFooterRowsStickySuppressed(),n=this.gos.get("suppressGroupRowsSticky");return e&&(!t||!n)}getStickyAncestors(e){let t=[],n=e.footer?e.sibling:e.parent;for(;n;)n.sibling&&t.push(n.sibling),t.push(n),n=n.parent;return t.reverse()}checkStickyRows(){let e=this.updateStickyRows("top"),t=this.updateStickyRows("bottom");return e||t}destroyStickyCtrls(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){let t=new Set;if(this.stickyTopRowCtrls.some(n=>n.getRowNode()===e)){for(let n=0;n<this.stickyTopRowCtrls.length;n++){let i=this.stickyTopRowCtrls[n].getRowNode();i!==e&&t.add(i)}this.refreshNodesAndContainerHeight("top",t,this.topContainerHeight)&&this.checkStickyRows();return}for(let n=0;n<this.stickyBottomRowCtrls.length;n++){let i=this.stickyBottomRowCtrls[n].getRowNode();i!==e&&t.add(i)}this.refreshNodesAndContainerHeight("bottom",t,this.bottomContainerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(e,t,n){let i=e==="top",s=i?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,r={},o=[];for(let f=0;f<s.length;f++){let g=s[f].getRowNode();if(!t.has(g)){r[g.id]=s[f],g.sticky=!1;continue}o.push(s[f])}let a=new Set;for(let f=0;f<o.length;f++)a.add(o[f].getRowNode());let l=[];t.forEach(f=>{a.has(f)||(f.sticky=!0,l.push(this.createRowCon(f,!1,!1)))});let c=!!l.length||o.length!==s.length;i?this.topContainerHeight!==n&&(this.topContainerHeight=n,this.gridBodyCtrl.setStickyTopHeight(n),c=!0):this.bottomContainerHeight!==n&&(this.bottomContainerHeight=n,this.gridBodyCtrl.setStickyBottomHeight(n),c=!0),this.destroyRowCtrls(r,!1);let u=[...o,...l];u.sort((f,g)=>g.getRowNode().rowIndex-f.getRowNode().rowIndex),i||u.reverse(),u.forEach(f=>f.setRowTop(f.getRowNode().stickyRowTop));let h=0;return i?(t.forEach(f=>{f.rowIndex<this.pageBoundsService.getFirstRow()&&(h+=f.rowHeight)}),h>this.topContainerHeight&&(h=this.topContainerHeight),this.setOffsetTop(h)):(t.forEach(f=>{f.rowIndex>this.pageBoundsService.getLastRow()&&(h+=f.rowHeight)}),h>this.bottomContainerHeight&&(h=this.bottomContainerHeight),this.setOffsetBottom(h)),c?(i?this.stickyTopRowCtrls=u:this.stickyBottomRowCtrls=u,!0):!1}ensureRowHeightsValid(){let e=!1,t=n=>{let i=n.getRowNode();if(i.rowHeightEstimated){let s=this.gos.getRowHeightForNode(i);i.setRowHeight(s.height),e=!0}};return this.stickyTopRowCtrls.forEach(t),this.stickyBottomRowCtrls.forEach(t),e}},sse=class extends k{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{let e=()=>{this.getAllCellCtrls().forEach(r=>r.onRangeSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(r=>r.updateRangeBordersIfRangeCount())},n=()=>{this.eventService.addEventListener("rangeSelectionChanged",e),this.eventService.addEventListener("columnMoved",t),this.eventService.addEventListener("columnPinned",t),this.eventService.addEventListener("columnVisible",t)},i=()=>{this.eventService.removeEventListener("rangeSelectionChanged",e),this.eventService.removeEventListener("columnMoved",t),this.eventService.removeEventListener("columnPinned",t),this.eventService.removeEventListener("columnVisible",t)};this.addDestroyFunc(()=>i()),this.addManagedPropertyListener("enableRangeSelection",r=>{r.currentValue?n():i()}),this.gos.get("enableRangeSelection")&&n()}}wireBeans(e){this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusService=e.focusService,this.beans=e,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){if(this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this)}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListeners(["suppressCellFocus","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.gos.isGroupRowsSticky()){let e=this.rowModel.getType();(e==="clientSide"||e==="serverSide")&&(this.stickyRowFeature=this.createManagedBean(new ise(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gos.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){let e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new rse(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){let e=Ko(this.rowCtrlsByRowIndex),t=Ko(this.zombieRowCtrls),n=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];t.length>0||n.length>0?this.allRowCtrls=[...e,...t,...n]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>{this.onCellFocusChanged(e)},cellFocusCleared:()=>this.onCellFocusChanged(),flashCells:e=>{this.getAllCellCtrls().forEach(t=>t.onFlashCells(e))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getCols().forEach(t=>{let n=l=>{this.getAllCellCtrls().forEach(c=>{c.getColumn()===t&&l(c)})},i=()=>{n(l=>l.onLeftChanged())},s=()=>{n(l=>l.onWidthChanged())},r=()=>{n(l=>l.onFirstRightPinnedChanged())},o=()=>{n(l=>l.onLastLeftPinnedChanged())},a=()=>{n(l=>l.onColDefChanged())};t.addEventListener("leftChanged",i),t.addEventListener("widthChanged",s),t.addEventListener("firstRightPinnedChanged",r),t.addEventListener("lastLeftPinnedChanged",o),t.addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{t.removeEventListener("leftChanged",i),t.removeEventListener("widthChanged",s),t.removeEventListener("firstRightPinnedChanged",r),t.removeEventListener("lastLeftPinnedChanged",o),t.removeEventListener("colDefChanged",a)})})}onDomLayoutChanged(){let e=this.gos.isDomLayout("print"),t=e||this.gos.get("embedFullWidthRows"),n=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,n&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;let e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){let t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsForColumn(e){let t=[];return this.getAllRowCtrls().forEach(n=>{let i=n.getCellElement(e);i&&t.push(i)}),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowNodes()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowNodes())}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,t){let n=Object.fromEntries(t.map(s=>[s.id,s])),i=Object.fromEntries(e.map(s=>[s.getRowNode().id,s]));for(let s=0;s<t.length;s++){let r=t[s],o=e[s];o&&n[o.getRowNode().id]===void 0&&(o.destroyFirstPass(),o.destroySecondPass()),r.id in i?(e[s]=i[r.id],delete i[r.id]):e[s]=new ml(r,this.beans,!1,!1,this.printLayout)}e.length=t.length}onPinnedRowDataChanged(){let e={recycleRows:!0};this.redrawAfterModelUpdate(e)}redrawRow(e,t=!1){if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else if(this.cachedRowCtrls?.has(e)){this.cachedRowCtrls.removeRow(e);return}else{let n=i=>{let s=i[e.rowIndex];s&&s.getRowNode()===e&&(s.destroyFirstPass(),s.destroySecondPass(),i[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":n(this.topRowCtrls);break;case"bottom":n(this.bottomRowCtrls);break;default:n(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(e!=null){e?.forEach(n=>this.redrawRow(n,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){let t=e?.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(t==null)return null;let n=this.gos.getActiveDomElement(),i=this.gos.getDomData(n,gl.DOM_DATA_KEY_CELL_CTRL),s=this.gos.getDomData(n,ml.DOM_DATA_KEY_ROW_CTRL);return i||s?t:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();let t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);let n=!e.domLayoutChanged&&!!e.recycleRows,i=e.animate&&this.gos.isAnimateRows(),s=n?this.getRowsToRecycle():null;if(n||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature){this.stickyRowFeature.checkStickyRows();let r=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();r&&this.updateContainerHeights(r)}this.recycleRows(s,i),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){let t=e.newData||e.newPage,n=this.gos.get("suppressScrollOnNewData");t&&!n&&(this.gridBodyCtrl.getScrollFeature().scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(e=0){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let t=this.pageBoundsService.getCurrentPageHeight();t===0&&(t=1),this.rowContainerHeightService.setModelHeight(t+e)}getLockOnRefresh(){if(this.refreshInProgress){let e=this.frameworkOverrides.getLockOnRefreshError?.()??"";throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace."+e)}this.refreshInProgress=!0,this.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&setTimeout(()=>{this.focusService.setRestoreFocusedCell(e),this.onCellFocusChanged(this.gos.addGridCommonParams({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))})}stopEditing(e=!1){this.getAllRowCtrls().forEach(t=>{t.stopEditing(e)})}getAllCellCtrls(){let e=[],t=this.getAllRowCtrls(),n=t.length;for(let i=0;i<n;i++){let s=t[i].getAllCellCtrls(),r=s.length;for(let o=0;o<r;o++)e.push(s[o])}return e}getAllRowCtrls(){let e=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],t=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],n=[...this.topRowCtrls,...this.bottomRowCtrls,...e,...t];for(let i in this.rowCtrlsByRowIndex)n.push(this.rowCtrlsByRowIndex[i]);return n}addRenderedRowListener(e,t,n){let i=this.rowCtrlsByRowIndex[t];i&&i.addEventListener(e,n)}flashCells(e={}){this.getCellCtrls(e.rowNodes,e.columns).forEach(t=>t.flashCell(e))}refreshCells(e={}){let t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};for(let n of this.getCellCtrls(e.rowNodes,e.columns))n.refreshOrDestroyCell(t);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=null;this.stickyRowFeature&&iR()&&(t=this.getCellToRestoreFocusToAfterRefresh()||null);for(let n of this.getRowCtrls(e)){if(!n.isFullWidth())continue;n.refreshFullWidth()||this.redrawRow(n.getRowNode(),!0)}this.dispatchDisplayedRowsChanged(!1),t&&this.restoreFocusedCell(t)}getCellRendererInstances(e){let t=this.getCellCtrls(e.rowNodes,e.columns).map(s=>s.getCellRenderer()).filter(s=>s!=null);if(e.columns?.length)return t;let n=[],i=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(s=>{if(i&&!this.isRowInMap(s.getRowNode(),i)||!s.isFullWidth())return;let r=s.getFullWidthCellRenderers();for(let o=0;o<r.length;o++){let a=r[o];a!=null&&n.push(a)}}),[...n,...t]}getCellEditorInstances(e){let t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(n=>{let i=n.getCellEditor();i&&t.push(i)}),t}getEditingCells(){let e=[];return this.getAllCellCtrls().forEach(t=>{if(t.isEditing()){let n=t.getCellPosition();e.push(n)}}),e}mapRowNodes(e){if(!e)return;let t={top:{},bottom:{},normal:{}};return e.forEach(n=>{let i=n.id;switch(n.rowPinned){case"top":t.top[i]=n;break;case"bottom":t.bottom[i]=n;break;default:t.normal[i]=n;break}}),t}isRowInMap(e,t){let n=e.id;switch(e.rowPinned){case"top":return t.top[n]!=null;case"bottom":return t.bottom[n]!=null;default:return t.normal[n]!=null}}getRowCtrls(e){let t=this.mapRowNodes(e),n=this.getAllRowCtrls();return!e||!t?n:n.filter(i=>{let s=i.getRowNode();return this.isRowInMap(s,t)})}getCellCtrls(e,t){let n;j(t)&&(n={},t.forEach(s=>{let r=this.columnModel.getCol(s);j(r)&&(n[r.getId()]=!0)}));let i=[];return this.getRowCtrls(e).forEach(s=>{s.getAllCellCtrls().forEach(r=>{let o=r.getColumn().getId();n&&!n[o]||i.push(r)})}),i}destroy(){this.removeAllRowComps(),super.destroy()}removeAllRowComps(){let e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){let e=[];$i(this.rowCtrlsByRowIndex,(n,i)=>{i.getRowNode().id==null&&e.push(n)}),this.removeRowCtrls(e);let t={};return $i(this.rowCtrlsByRowIndex,(n,i)=>{let s=i.getRowNode();t[s.id]=i}),this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(n=>{let i=this.rowCtrlsByRowIndex[n];i&&(i.destroyFirstPass(t),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[n]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){let{afterScroll:t}=e,n;this.stickyRowFeature&&iR()&&(n=this.getCellToRestoreFocusToAfterRefresh()||void 0);let i=this.firstRenderedRow,s=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let r=!1;if(this.stickyRowFeature){r=this.stickyRowFeature.checkStickyRows();let a=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();a&&this.updateContainerHeights(a)}let o=this.firstRenderedRow!==i||this.lastRenderedRow!==s;if(!(t&&!r&&!o)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!r),n!=null)){let a=this.getCellToRestoreFocusToAfterRefresh();n!=null&&a==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(n))}}removeRowCompsNotToDraw(e,t){let n={};e.forEach(r=>n[r]=!0);let s=Object.keys(this.rowCtrlsByRowIndex).filter(r=>!n[r]);this.removeRowCtrls(s,t)}calculateIndexesToDraw(e){let t=zee(this.firstRenderedRow,this.lastRenderedRow),n=(s,r)=>{let o=r.getRowNode().rowIndex;o!=null&&(o<this.firstRenderedRow||o>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(r)&&t.push(o)};$i(this.rowCtrlsByRowIndex,n),$i(e,n),t.sort((s,r)=>s-r);let i=[];for(let s=0;s<t.length;s++){let r=t[s],o=this.rowModel.getRow(r);o&&!o.sticky&&i.push(r)}return i}recycleRows(e,t=!1,n=!1){let i=this.calculateIndexesToDraw(e);(this.printLayout||n)&&(t=!1),this.removeRowCompsNotToDraw(i,!t);let s=[];i.forEach(r=>{let o=this.createOrUpdateRowCtrl(r,e,t,n);j(o)&&s.push(o)}),e&&(n&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){let t={type:"displayedRowsChanged",afterScroll:e};this.eventService.dispatchEvent(t)}onDisplayedColumnsChanged(){let e=this.visibleColsService.isPinningLeft(),t=this.visibleColsService.isPinningRight();(this.pinningLeft!==e||t!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){let e=[];this.getFullWidthRowCtrls().forEach(t=>{let n=t.getRowNode().rowIndex;e.push(n.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){let t=this.mapRowNodes(e);return this.getAllRowCtrls().filter(n=>{if(!n.isFullWidth())return!1;let i=n.getRowNode();return!(t!=null&&!this.isRowInMap(i,t))})}createOrUpdateRowCtrl(e,t,n,i){let s,r=this.rowCtrlsByRowIndex[e];if(r||(s=this.rowModel.getRow(e),j(s)&&j(t)&&t[s.id]&&s.alreadyRendered&&(r=t[s.id],t[s.id]=null)),!r)if(s||(s=this.rowModel.getRow(e)),j(s))r=this.createRowCon(s,n,i);else return;return s&&(s.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=r,r}destroyRowCtrls(e,t){let n=[];$i(e,(i,s)=>{if(s){if(this.cachedRowCtrls&&s.isCacheable()){this.cachedRowCtrls.addRow(s);return}s.destroyFirstPass(!t),t?(this.zombieRowCtrls[s.getInstanceId()]=s,n.push(()=>{s.destroySecondPass(),delete this.zombieRowCtrls[s.getInstanceId()]})):s.destroySecondPass()}}),t&&(n.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),FX(n))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){let e=this.getRowBuffer(),t=this.gos.getRowHeightAsNumber();return e*t}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let e,t;if(!this.rowModel.isRowsToRender())e=0,t=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.pageBoundsService.getFirstRow(),t=this.pageBoundsService.getLastRow();else{let a=this.getRowBufferInPixels(),l=this.ctrlsService.getGridBodyCtrl(),c=this.gos.get("suppressRowVirtualisation"),u=!1,h,f;do{let E=this.pageBoundsService.getPixelOffset(),{pageFirstPixel:I,pageLastPixel:T}=this.pageBoundsService.getCurrentPagePixelRange(),x=this.rowContainerHeightService.getDivStretchOffset(),z=l.getScrollFeature().getVScrollPosition(),V=z.top,b=z.bottom;c?(h=I+x,f=T+x):(h=Math.max(V+E-a,I)+x,f=Math.min(b+E+a,T)+x),this.firstVisibleVPixel=Math.max(V+E,I)+x,this.lastVisibleVPixel=Math.min(b+E,T)+x,u=this.ensureAllRowsInRangeHaveHeightsCalculated(h,f)}while(u);let g=this.rowModel.getRowIndexAtPixel(h),v=this.rowModel.getRowIndexAtPixel(f),y=this.pageBoundsService.getFirstRow(),C=this.pageBoundsService.getLastRow();g<y&&(g=y),v>C&&(v=C),e=g,t=v}let n=this.gos.isDomLayout("normal"),i=this.gos.get("suppressMaxRenderedRowRestriction"),s=Math.max(this.getRowBuffer(),500);n&&!i&&t-e>s&&(t=e+s);let r=e!==this.firstRenderedRow,o=t!==this.lastRenderedRow;if(r||o){this.firstRenderedRow=e,this.lastRenderedRow=t;let a={type:"viewportChanged",firstRow:e,lastRow:t};this.eventService.dispatchEvent(a)}}dispatchFirstDataRenderedEvent(){if(this.dataFirstRenderedFired)return;this.dataFirstRenderedFired=!0;let e={type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent(e)})}ensureAllRowsInRangeHaveHeightsCalculated(e,t){let n=this.pinnedRowModel?.ensureRowHeightsValid(),i=this.stickyRowFeature?.ensureRowHeightsValid(),s=this.rowModel.ensureRowHeightsValid(e,t,this.pageBoundsService.getFirstRow(),this.pageBoundsService.getLastRow());return(s||i)&&this.eventService.dispatchEvent({type:"recalculateRowBounds"}),i||s||n?(this.updateContainerHeights(),!0):!1}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){let i=e.getRowNode(),s=this.focusService.isRowNodeFocused(i),r=e.isEditing(),o=i.detail;return s||r||o?!!this.isRowPresent(i):!1}isRowPresent(e){return this.rowModel.isRowPresent(e)?this.paginationService?this.paginationService.isRowPresent(e):!0:!1}createRowCon(e,t,n){let i=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(i)return i;let s=this.gos.get("suppressAnimationFrame"),r=n&&!s&&!this.printLayout;return new ml(e,this.beans,t,r,this.printLayout)}getRenderedNodes(){let e=this.rowCtrlsByRowIndex;return Object.values(e).map(t=>t.getRowNode())}getRowByPosition(e){let t,{rowIndex:n}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[n];break;case"bottom":t=this.bottomRowCtrls[n];break;default:t=this.rowCtrlsByRowIndex[n],t||(t=this.getStickyTopRowCtrls().find(i=>i.getRowNode().rowIndex===n)||null,t||(t=this.getStickyBottomRowCtrls().find(i=>i.getRowNode().rowIndex===n)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;let i=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!i}},rse=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){let t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e==null||e.id==null)return null;let t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.getRowNode()!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){let t=e.id,n=this.entriesMap[t];delete this.entriesMap[t],Jn(this.entriesList,n)}removeFromCache(e){let t=e.getRowNode().id;delete this.entriesMap[t],Jn(this.entriesList,e)}getEntries(){return this.entriesList}},ose=class extends k{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0}wireBeans(e){this.beans=e}postConstruct(){this.setPinnedTopRowData(),this.setPinnedBottomRowData(),this.addManagedPropertyListener("pinnedTopRowData",()=>this.setPinnedTopRowData()),this.addManagedPropertyListener("pinnedBottomRowData",()=>this.setPinnedBottomRowData()),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(e){let t=e==="top"?this.pinnedTopRows:this.pinnedBottomRows;return pn(t)}isRowsToRender(e){return!this.isEmpty(e)}getRowAtPixel(e,t){let n=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(pn(n))return 0;for(let i=0;i<n.length;i++){let s=n[i];if(s.rowTop+s.rowHeight-1>=e)return i}return n.length-1}onGridStylesChanges(e){if(e.rowHeightChanged){let t=n=>{n.setRowHeight(n.rowHeight,!0)};this.pinnedBottomRows.forEach(t),this.pinnedTopRows.forEach(t)}}ensureRowHeightsValid(){let e=!1,t=0,n=s=>{if(s.rowHeightEstimated){let r=this.gos.getRowHeightForNode(s);s.setRowTop(t),s.setRowHeight(r.height),t+=r.height,e=!0}};this.pinnedBottomRows?.forEach(n),t=0,this.pinnedTopRows?.forEach(n);let i={type:"pinnedHeightChanged"};return this.eventService.dispatchEvent(i),e}setPinnedTopRowData(){let e=this.gos.get("pinnedTopRowData");this.pinnedTopRows=this.createNodesFromData(e,!0);let t={type:"pinnedRowDataChanged"};this.eventService.dispatchEvent(t)}setPinnedBottomRowData(){let e=this.gos.get("pinnedBottomRowData");this.pinnedBottomRows=this.createNodesFromData(e,!1);let t={type:"pinnedRowDataChanged"};this.eventService.dispatchEvent(t)}createNodesFromData(e,t){let n=[];if(e){let i=this.gos.getRowIdCallback(),s=t?zr.ID_PREFIX_TOP_PINNED:zr.ID_PREFIX_BOTTOM_PINNED,r=0,o=t?"top":"bottom";e.forEach((a,l)=>{let c=new zr(this.beans);c.data=a,c.id=i?.({data:a,level:0,rowPinned:o})??s+this.nextId++,c.rowPinned=o,c.setRowTop(r),c.setRowHeight(this.gos.getRowHeightForNode(c).height),c.setRowIndex(l),r+=c.rowHeight,n.push(c)})}return n}getPinnedTopRowNodes(){return this.pinnedTopRows}getPinnedBottomRowNodes(){return this.pinnedBottomRows}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedTopRowCount(){return this.pinnedTopRows?this.pinnedTopRows.length:0}getPinnedBottomRowCount(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0}getPinnedTopRow(e){return this.pinnedTopRows[e]}getPinnedBottomRow(e){return this.pinnedBottomRows[e]}forEachPinnedTopRow(e){pn(this.pinnedTopRows)||this.pinnedTopRows.forEach(e)}forEachPinnedBottomRow(e){pn(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(e)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getTotalHeight(e){if(!e||e.length===0)return 0;let t=xe(e);return t.rowTop+t.rowHeight}};var ase=class extends k{constructor(e){super(),this.state="needsLoading",this.version=0,this.id=e}getId(){return this.id}load(){this.state="loading",this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed",this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,t){this.successCommon(e,t)}pageLoaded(e,t,n){this.successCommon(e,{rowData:t,rowCount:n})}isRequestMostRecentAndLive(e){let t=e===this.version,n=this.isAlive();return t&&n}successCommon(e,t){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}dispatchLoadCompleted(e=!0){let t={type:"loadComplete",success:e,block:this};this.dispatchLocalEvent(t)}},lse=class extends k{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();let e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=Xn(this.performCheckBlocksToLoad.bind(this),e))}getMaxConcurrentDatasourceRequests(){let e=this.gos.get("maxConcurrentDatasourceRequests");if(e==null)return 2;if(!(e<=0))return e}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){Jn(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchLocalEvent({type:"blockLoaded"}),this.activeBlockLoadsCount==0&&this.dispatchLocalEvent({type:"blockLoaderFinished"})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.gos.get("debug")&&Ki("RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}let e=this.getAvailableLoadingCount(),t=this.blocks.filter(n=>n.getState()==="needsLoading").slice(0,e);this.registerLoads(t.length),t.forEach(n=>n.load()),this.printCacheStatus()}getBlockState(){if(this.gos.isRowModelType("serverSide"))return this.rowModel.getBlockStates();let e={};return this.blocks.forEach(t=>{let{id:n,state:i}=t.getBlockStateJson();e[n]=i}),e}printCacheStatus(){this.gos.get("debug")&&Ki(`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}},cse={version:ve,moduleName:"@ag-grid-community/row-node-block",beans:[lse]},use=class{constructor(){this.root=null,this.end=null,this.cachedRange=[]}init(e){this.rowModel=e}reset(){this.root=null,this.end=null,this.cachedRange.length=0}setRoot(e){this.root=e,this.end=null,this.cachedRange.length=0}setEndRange(e){this.end=e,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){let e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(e,t)}return this.cachedRange}isInRange(e){return this.root===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(){return this.root&&this.root?.key===null&&(this.root=this.rowModel.getRowNode(this.root.id)??null),this.root}getEnd(){return this.end&&this.end?.key===null&&(this.end=this.rowModel.getRowNode(this.end.id)??null),this.end}truncate(e){let t=this.getRange();if(t.length===0)return{keep:[],discard:[]};let n=t[0].id===this.root.id,i=t.findIndex(s=>s.id===e.id);if(i>-1){let s=t.slice(0,i),r=t.slice(i+1);return this.setEndRange(e),n?{keep:s,discard:r}:{keep:r,discard:s}}else return{keep:t,discard:[]}}extend(e,t=!1){let n=this.getRoot();if(n==null){let s=this.getRange().slice();return t&&e.depthFirstSearch(r=>!r.group&&s.push(r)),s.push(e),this.setRoot(e),{keep:s,discard:[]}}if(this.rowModel.getNodesInRangeForSelection(n,e).find(s=>s.id===this.end?.id))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{let s=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:s}}}},dse=class extends k{constructor(){super(...arguments),this.beanName="stylingService"}wireBeans(e){this.expressionService=e.expressionService}processAllCellClasses(e,t,n,i){this.processClassRules(void 0,e.cellClassRules,t,n,i),this.processStaticCellClasses(e,t,n)}processClassRules(e,t,n,i,s){if(t==null&&e==null)return;let r={},o={},a=(l,c)=>{l.split(" ").forEach(u=>{u.trim()!=""&&c(u)})};if(t){let l=Object.keys(t);for(let c=0;c<l.length;c++){let u=l[c],h=t[u],f;typeof h=="string"?f=this.expressionService.evaluate(h,n):typeof h=="function"&&(f=h(n)),a(u,g=>{f?r[g]=!0:o[g]=!0})}}e&&s&&Object.keys(e).forEach(l=>a(l,c=>{r[c]||(o[c]=!0)})),s&&Object.keys(o).forEach(s),Object.keys(r).forEach(i)}getStaticCellClasses(e,t){let{cellClass:n}=e;if(!n)return[];let i;return typeof n=="function"?i=n(t):i=n,typeof i=="string"&&(i=[i]),i||[]}processStaticCellClasses(e,t,n){this.getStaticCellClasses(e,t).forEach(s=>{n(s)})}};var hse=class extends k{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;let{comp:t,eTopGuard:n,eBottomGuard:i,focusTrapActive:s,forceFocusOutWhenTabGuardsAreEmpty:r,isFocusableContainer:o,focusInnerElement:a,onFocusIn:l,onFocusOut:c,shouldStopEventPropagation:u,onTabKeyDown:h,handleKeyDown:f,eFocusableElement:g}=e;this.comp=t,this.eTopGuard=n,this.eBottomGuard=i,this.providedFocusInnerElement=a,this.eFocusableElement=g,this.focusTrapActive=!!s,this.forceFocusOutWhenTabGuardsAreEmpty=!!r,this.isFocusableContainer=!!o,this.providedFocusIn=l,this.providedFocusOut=c,this.providedShouldStopEventPropagation=u,this.providedOnTabKeyDown=h,this.providedHandleKeyDown=f}wireBeans(e){this.focusService=e.focusService}postConstruct(){this.createManagedBean(new yl(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)}))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;let e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;let t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}findNextElementOutsideAndFocus(e){let t=this.gos.getDocument(),n=this.focusService.findFocusableElements(t.body,null,!0),i=n.indexOf(e?this.eTopGuard:this.eBottomGuard);if(i===-1)return;let s,r;e?(s=0,r=i):(s=i+1,r=n.length);let o=n.slice(s,r),a=this.gos.get("tabIndex");o.sort((l,c)=>{let u=parseInt(l.getAttribute("tabindex")||"0"),h=parseInt(c.getAttribute("tabindex")||"0");return h===a?1:u===a?-1:u===0?1:h===0?-1:u-h}),o[e?o.length-1:0].focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;let t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();let n=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),n&&(n.focus(),e.preventDefault())}focusInnerElement(e=!1){let t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;let t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},fse=class extends k{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();let{eTopGuard:t,eBottomGuard:n,eFocusableElement:i}=this,s=[t,n],r={setTabIndex:y=>{s.forEach(C=>y!=null?C.setAttribute("tabindex",y):C.removeAttribute("tabindex"))}};this.addTabGuards(t,n);let{focusTrapActive:o=!1,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:h,shouldStopEventPropagation:f,forceFocusOutWhenTabGuardsAreEmpty:g,isFocusableContainer:v}=e;this.tabGuardCtrl=this.createManagedBean(new hse({comp:r,focusTrapActive:o,eTopGuard:t,eBottomGuard:n,eFocusableElement:i,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:h,shouldStopEventPropagation:f,forceFocusOutWhenTabGuardsAreEmpty:g,isFocusableContainer:v}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){let t=this.gos.getDocument().createElement("div"),n=e==="top"?"ag-tab-guard-top":"ag-tab-guard-bottom";return t.classList.add("ag-tab-guard",n),ai(t,"presentation"),t}addTabGuards(e,t){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){let e=[this.eTopGuard,this.eBottomGuard];xn(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,n){bR(t)||(t=t.getGui());let{eBottomGuard:i}=this;i?i.insertAdjacentElement("beforebegin",t):e(t,n)}},MG=class extends Ve{initialiseTabGuard(e){this.tabGuardFeature=this.createManagedBean(new fse(this)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(e=!1){this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},pse=0,gse=200,mse=class extends k{constructor(){super(...arguments),this.beanName="popupService",this.popupList=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.resizeObserverService=e.resizeObserverService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){let e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){let{eventSource:t,ePopup:n}=e,i=this.getPopupIndex(n);if(i!==-1){let g=this.popupList[i];g.alignedToElement=t}let s=t.getBoundingClientRect(),r=this.getParentRect(),o=this.keepXYWithinBounds(n,s.top-r.top,0),a=n.clientWidth>0?n.clientWidth:200;n.style.minWidth=`${a}px`;let c=r.right-r.left-a,u;this.gos.get("enableRtl")?(u=f(),u<0&&(u=h(),this.setAlignedStyles(n,"left")),u>c&&(u=0,this.setAlignedStyles(n,"right"))):(u=h(),u>c&&(u=f(),this.setAlignedStyles(n,"right")),u<0&&(u=0,this.setAlignedStyles(n,"left"))),n.style.left=`${u}px`,n.style.top=`${o}px`;function h(){return s.right-r.left-2}function f(){return s.left-r.left-a}}positionPopupUnderMouseEvent(e){let{ePopup:t,nudgeX:n,nudgeY:i,skipObserver:s}=e;this.positionPopup({ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:!0,skipObserver:s,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){let t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){let{ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:s,eventSource:r,alignSide:o="left",position:a="over",column:l,rowNode:c,type:u}=e,h=r.getBoundingClientRect(),f=this.getParentRect(),g=this.getPopupIndex(t);if(g!==-1){let y=this.popupList[g];y.alignedToElement=r}let v=()=>{let y=h.left-f.left;o==="right"&&(y-=t.offsetWidth-h.width);let C;return a==="over"?(C=h.top-f.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,h,f,e.nudgeY||0)==="under"?C=h.top-f.top+h.height:C=h.top-t.offsetHeight-(i||0)*2-f.top),{x:y,y:C}};this.positionPopup({ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:s,updatePosition:v,postProcessCallback:()=>this.callPostProcessPopup(u,t,r,null,l,c)})}shouldRenderUnderOrAbove(e,t,n,i){let s=n.bottom-t.bottom,r=t.top-n.top,o=e.offsetHeight+i;return s>o?"under":r>o||r>s?"above":"under"}setAlignedStyles(e,t){let n=this.getPopupIndex(e);if(n===-1)return;let i=this.popupList[n],{alignedToElement:s}=i;!s||(["right","left","over","above","under"].forEach(o=>{s.classList.remove(`ag-has-popup-positioned-${o}`),e.classList.remove(`ag-popup-positioned-${o}`)}),!t)||(s.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}callPostProcessPopup(e,t,n,i,s,r){let o=this.gos.getCallback("postProcessPopup");o&&o({column:s,rowNode:r,ePopup:t,type:e,eventSource:n,mouseEvent:i})}positionPopup(e){let{ePopup:t,keepWithinBounds:n,nudgeX:i,nudgeY:s,skipObserver:r,updatePosition:o}=e,a={width:0,height:0},l=(c=!1)=>{let{x:u,y:h}=o();c&&t.clientWidth===a.width&&t.clientHeight===a.height||(a.width=t.clientWidth,a.height=t.clientHeight,i&&(u+=i),s&&(h+=s),n&&(u=this.keepXYWithinBounds(t,u,1),h=this.keepXYWithinBounds(t,h,0)),t.style.left=`${u}px`,t.style.top=`${h}px`,e.postProcessCallback&&e.postProcessCallback())};if(l(),!r){let c=this.resizeObserverService.observeResize(t,()=>l(!0));setTimeout(()=>c(),gse)}}getActivePopups(){return this.popupList.map(e=>e.element)}getPopupList(){return this.popupList}getParentRect(){let e=this.gos.getDocument(),t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),DB(t)}keepXYWithinBounds(e,t,n){let i=n===0,s=i?"clientHeight":"clientWidth",r=i?"top":"left",o=i?"height":"width",a=i?"scrollTop":"scrollLeft",l=this.gos.getDocument(),c=l.documentElement,u=this.getPopupParent(),h=e.getBoundingClientRect(),f=u.getBoundingClientRect(),g=l.documentElement.getBoundingClientRect(),v=u===l.body,y=Math.ceil(h[o]),E=v?(i?EB:bC)(c)+c[a]:u[s];v&&(E-=Math.abs(g[r]-f[r]));let I=E-y;return Math.min(Math.max(t,0),Math.abs(I))}addPopup(e){let t=this.gos.getDocument(),{eChild:n,ariaLabel:i,alwaysOnTop:s,positionCallback:r,anchorToElement:o}=e;if(!t)return G("could not find the document, document is empty"),{hideFunc:()=>{}};let a=this.getPopupIndex(n);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(n);let l=this.createPopupWrapper(n,i,!!s),c=this.addEventListenersToPopup(se(B({},e),{wrapperEl:l}));return r&&r(),this.addPopupToPopupList(n,l,c,o),{hideFunc:c}}initialisePopupPosition(e){let n=this.getPopupParent().getBoundingClientRect();j(e.style.top)||(e.style.top=`${n.top*-1}px`),j(e.style.left)||(e.style.left=`${n.left*-1}px`)}createPopupWrapper(e,t,n){let i=this.getPopupParent(),s=document.createElement("div");return this.environment.applyThemeClasses(s),s.classList.add("ag-popup"),e.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||ai(e,"dialog"),Tu(e,t),s.appendChild(e),i.appendChild(s),n?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),s}handleThemeChange(e){if(e.themeChanged)for(let t of this.popupList)this.environment.applyThemeClasses(t.wrapper)}addEventListenersToPopup(e){let t=this.gos.getDocument(),n=this.getPopupParent(),{wrapperEl:i,eChild:s,closedCallback:r,afterGuiAttached:o,closeOnEsc:a,modal:l}=e,c=!1,u=v=>{if(!i.contains(this.gos.getActiveDomElement()))return;v.key===N.ESCAPE&&!$o(v)&&g({keyboardEvent:v})},h=v=>g({mouseEvent:v}),f=v=>g({touchEvent:v}),g=(v={})=>{let{mouseEvent:y,touchEvent:C,keyboardEvent:E,forceHide:I}=v;!I&&(this.isEventFromCurrentPopup({mouseEvent:y,touchEvent:C},s)||c)||(c=!0,n.removeChild(i),t.removeEventListener("keydown",u),t.removeEventListener("mousedown",h),t.removeEventListener("touchstart",f),t.removeEventListener("contextmenu",h),this.eventService.removeEventListener("dragStarted",h),r&&r(y||C||E),this.removePopupFromPopupList(s))};return o&&o({hidePopup:g}),window.setTimeout(()=>{a&&t.addEventListener("keydown",u),l&&(t.addEventListener("mousedown",h),this.eventService.addEventListener("dragStarted",h),t.addEventListener("touchstart",f),t.addEventListener("contextmenu",h))},0),g}addPopupToPopupList(e,t,n,i){this.popupList.push({element:e,wrapper:t,hideFunc:n,instanceId:pse++,isAnchored:!!i}),i&&this.setPopupPositionRelatedToElement(e,i)}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){let n=this.getPopupIndex(e);if(n===-1)return;let i=this.popupList[n];if(i.stopAnchoringPromise&&i.stopAnchoringPromise.then(r=>r&&r()),i.stopAnchoringPromise=void 0,i.isAnchored=!1,!t)return;let s=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:i.hideFunc});return i.stopAnchoringPromise=s,i.isAnchored=!0,s}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){let t=this.getPopupParent(),n=t.getBoundingClientRect(),{element:i,ePopup:s}=e,r=i.getBoundingClientRect(),o=n.top-r.top,a=n.left-r.left,l=o,c=a,u=s.style.top,h=parseInt(u.substring(0,u.length-1),10),f=s.style.left,g=parseInt(f.substring(0,f.length-1),10),v=this.getFrameworkOverrides();return new Ii(y=>{v.wrapIncoming(()=>{v.setInterval(()=>{let C=t.getBoundingClientRect(),E=i.getBoundingClientRect();if(E.top==0&&E.left==0&&E.height==0&&E.width==0){e.hidePopup();return}let T=C.top-E.top;if(T!=l){let z=this.keepXYWithinBounds(s,h+o-T,0);s.style.top=`${z}px`}l=T;let x=C.left-E.left;if(x!=c){let z=this.keepXYWithinBounds(s,g+a-x,1);s.style.left=`${z}px`}c=x},200).then(C=>{y(()=>{C!=null&&window.clearInterval(C)})})},"popupPositioning")})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){let{mouseEvent:n,touchEvent:i}=e,s=n||i;if(!s)return!1;let r=this.getPopupIndex(t);if(r===-1)return!1;for(let o=r;o<this.popupList.length;o++){let a=this.popupList[o];if(EX(a.element,s))return!0}return this.isElementWithinCustomPopup(s.target)}isElementWithinCustomPopup(e){let t=this.gos.getDocument();for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){let n=this.getWrapper(e);n&&(n.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(n))}bringPopupToFront(e){let t=this.getPopupParent(),n=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),i=n.length,s=Array.prototype.slice.call(t.querySelectorAll(".ag-popup.ag-always-on-top")),r=s.length,o=this.getWrapper(e);if(!o||i<=1||!t.contains(e))return!1;let a=n.indexOf(o),l=o.querySelectorAll("div"),c=[];l.forEach(h=>{h.scrollTop!==0&&c.push([h,h.scrollTop])});let u=!1;for(r?o.classList.contains("ag-always-on-top")?a!==i-1&&(xe(s).insertAdjacentElement("afterend",o),u=!0):a!==i-r-1&&(s[0].insertAdjacentElement("beforebegin",o),u=!0):a!==i-1&&(xe(n).insertAdjacentElement("afterend",o),u=!0);c.length;){let h=c.pop();h[0].scrollTop=h[1]}return u}},vse=["touchstart","touchend","touchmove","touchcancel"],HR=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t()}setInterval(e,t){return new Ii(n=>{n(window.setInterval(e,t))})}addEventListener(e,t,n,i){let s=hl(vse,t);e.addEventListener(t,n,{capture:!!i,passive:s})}get shouldWrapOutgoing(){return!1}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`https://www.ag-grid.com/${this.frameworkName==="solid"?"react":this.frameworkName}-data-grid${e?`/${e}`:""}`}},Cse=class extends k{constructor(){super(...arguments),this.beanName="cellNavigationService"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.pinnedRowModel=e.pinnedRowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}getNextCellToFocus(e,t,n=!1){return n?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){let n=e===N.UP,i=e===N.DOWN,s=e===N.LEFT,r,o;if(n||i)o=n?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow(),r=t.column;else{let a=this.visibleColsService.getAllCols(),l=this.gos.get("enableRtl");o=t.rowIndex,r=s!==l?a[0]:xe(a)}return{rowIndex:o,rowPinned:null,column:r}}getNextCellToFocusWithoutCtrlPressed(e,t){let n=t,i=!1;for(;!i;){switch(e){case N.UP:n=this.getCellAbove(n);break;case N.DOWN:n=this.getCellBelow(n);break;case N.RIGHT:this.gos.get("enableRtl")?n=this.getCellToLeft(n):n=this.getCellToRight(n);break;case N.LEFT:this.gos.get("enableRtl")?n=this.getCellToRight(n):n=this.getCellToLeft(n);break;default:n=null,G("unknown key for navigation ",e);break}n?i=this.isCellGoodToFocusOn(n):i=!0}return n}isCellGoodToFocusOn(e){let t=e.column,n;switch(e.rowPinned){case"top":n=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":n=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:n=this.rowModel.getRow(e.rowIndex);break}return n?!t.isSuppressNavigable(n):!1}getCellToLeft(e){if(!e)return null;let t=this.visibleColsService.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;let t=this.visibleColsService.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){let t=e.rowIndex,n=e.rowPinned;if(this.isLastRowInContainer(e))switch(n){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.pageBoundsService.getFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}let i=this.rowModel.getRow(e.rowIndex),s=this.getNextStickyPosition(i);return s||{rowIndex:t+1,rowPinned:n}}getNextStickyPosition(e,t){if(!this.gos.isGroupRowsSticky()||!e||!e.sticky)return;let n=this.rowRenderer.getStickyTopRowCtrls().some(a=>a.getRowNode().rowIndex===e.rowIndex),i=[];n?i=[...this.rowRenderer.getStickyTopRowCtrls()].sort((a,l)=>a.getRowNode().rowIndex-l.getRowNode().rowIndex):i=[...this.rowRenderer.getStickyBottomRowCtrls()].sort((a,l)=>l.getRowNode().rowIndex-a.getRowNode().rowIndex);let s=t?-1:1,r=i.findIndex(a=>a.getRowNode().rowIndex===e.rowIndex),o=i[r+s];if(o)return{rowIndex:o.getRowNode().rowIndex,rowPinned:null}}getCellBelow(e){if(!e)return null;let t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){let t=e.rowPinned,n=e.rowIndex;return t==="top"?this.pinnedRowModel.getPinnedTopRowNodes().length-1<=n:t==="bottom"?this.pinnedRowModel.getPinnedBottomRowNodes().length-1<=n:this.pageBoundsService.getLastRow()<=n}getRowAbove(e){let t=e.rowIndex,n=e.rowPinned;if(n?t===0:t===this.pageBoundsService.getFirstRow())return n==="top"?null:n?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;let s=this.rowModel.getRow(e.rowIndex),r=this.getNextStickyPosition(s,!0);return r||{rowIndex:t-1,rowPinned:n}}getCellAbove(e){if(!e)return null;let t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.pageBoundsService.getLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowNodes().length-1,rowPinned:"top"}}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){let t=this.visibleColsService.getAllCols(),n=e.rowIndex,i=e.rowPinned,s=this.visibleColsService.getColAfter(e.column);if(!s){s=t[0];let r=this.getRowBelow(e);if(Pe(r)||!r.rowPinned&&!(this.paginationService?.isRowInPage(r)??!0))return null;n=r?r.rowIndex:null,i=r?r.rowPinned:null}return{rowIndex:n,column:s,rowPinned:i}}getNextTabbedCellBackwards(e){let t=this.visibleColsService.getAllCols(),n=e.rowIndex,i=e.rowPinned,s=this.visibleColsService.getColBefore(e.column);if(!s){s=xe(t);let r=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(Pe(r)||!r.rowPinned&&!(this.paginationService?.isRowInPage(r)??!0))return null;n=r?r.rowIndex:null,i=r?r.rowPinned:null}return{rowIndex:n,column:s,rowPinned:i}}};function yse(e,t){e.eventService.dispatchEvent(t)}var wse=class extends k{constructor(){super(...arguments),this.beanName="apiFunctionService",this.functions={dispatchEvent:yse},this.isDestroyed=!1}wireBeans(e){this.beans=e}postConstruct(){this.preDestroyLink=this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}callFunction(e,t){let n=this.functions[e];if(n)return n.apply(n,[this.beans,...t]);if(this.isDestroyed)return this.destroyedHandler(e);this.isFrameworkMethod(e)||this.beans.validationService?.warnMissingApiFunction(e)}addFunction(e,t){let{validationService:n}=this.beans;n&&(t=n.validateApiFunction(e,t)),this.functions[e]=t}destroy(){this.functions={},this.isDestroyed=!0,super.destroy()}destroyedHandler(e){if(e==="isDestroyed")return!0;e!=="destroy"&&G(`Grid API function ${e}() cannot be called as the grid has been destroyed.
Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${this.preDestroyLink}`)}isFrameworkMethod(e){return["preWireBeans","wireBeans","preConstruct","postConstruct"].includes(e)}};function Sse(e){let t=e.getBean("apiFunctionService");return new Proxy(t,{get(n,i){if(i!=="then")return(...s)=>n.callFunction(i,s)}})}function _se(e){return{beanName:"gridApi",bean:Sse(e)}}var bse=class extends k{constructor(){super(...arguments),this.beanName="columnDefFactory"}buildColumnDefs(e,t,n){let i=[],s={};return e.forEach(r=>{let o=this.createDefFromColumn(r,t,n),a=!0,l=o,c=r.getOriginalParent(),u=null;for(;c;){let h=null;if(c.isPadding()){c=c.getOriginalParent();continue}let f=s[c.getGroupId()];if(f){f.children.push(l),a=!1;break}if(h=this.createDefFromGroup(c),h&&(h.children=[l],s[h.groupId]=h,l=h,c=c.getOriginalParent()),c!=null&&u===c){a=!1;break}u=c}a&&i.push(l)}),i}createDefFromGroup(e){let t=ZD(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,n){let i=ZD(e.getColDef());return i.colId=e.getColId(),i.width=e.getActualWidth(),i.rowGroup=e.isRowGroupActive(),i.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,i.pivot=e.isPivotActive(),i.pivotIndex=e.isPivotActive()?n.indexOf(e):null,i.aggFunc=e.isValueActive()?e.getAggFunc():null,i.hide=e.isVisible()?void 0:!0,i.pinned=e.isPinned()?e.getPinned():null,i.sort=e.getSort()?e.getSort():null,i.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,i}},Ese=class extends k{constructor(){super(...arguments),this.beanName="columnEventDispatcher"}visibleCols(){let e={type:"displayedColumnsChanged"};this.eventService.dispatchEvent(e)}gridColumns(){let e={type:"gridColumnsChanged"};this.eventService.dispatchEvent(e)}headerHeight(e){let t={type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(t)}groupOpened(e){let t={type:"columnGroupOpened",columnGroup:e.length===1?e[0]:void 0,columnGroups:e};this.eventService.dispatchEvent(t)}rowGroupChanged(e,t){let n={type:"columnRowGroupChanged",columns:e,column:e.length===1?e[0]:null,source:t};this.eventService.dispatchEvent(n)}genericColumnEvent(e,t,n){let i={type:e,columns:t,column:t.length===1?t[0]:null,source:n};this.eventService.dispatchEvent(i)}pivotModeChanged(){let e={type:"columnPivotModeChanged"};this.eventService.dispatchEvent(e)}virtualColumnsChanged(e){let t={type:"virtualColumnsChanged",afterScroll:e};this.eventService.dispatchEvent(t)}newColumnsLoaded(e){let t={type:"newColumnsLoaded",source:e};this.eventService.dispatchEvent(t)}everythingChanged(e){let t={type:"columnEverythingChanged",source:e};this.eventService.dispatchEvent(t)}columnMoved(e){let{movedColumns:t,source:n,toIndex:i,finished:s}=e,r={type:"columnMoved",columns:t,column:t&&t.length===1?t[0]:null,toIndex:i,finished:s,source:n};this.eventService.dispatchEvent(r)}columnPinned(e,t){if(!e.length)return;let n=e.length===1?e[0]:null,i=this.getCommonValue(e,r=>r.getPinned()),s={type:"columnPinned",pinned:i??null,columns:e,column:n,source:t};this.eventService.dispatchEvent(s)}columnVisible(e,t){if(!e.length)return;let n=e.length===1?e[0]:null,s={type:"columnVisible",visible:this.getCommonValue(e,r=>r.isVisible()),columns:e,column:n,source:t};this.eventService.dispatchEvent(s)}getCommonValue(e,t){if(!e||e.length==0)return;let n=t(e[0]);for(let i=1;i<e.length;i++)if(n!==t(e[i]))return;return n}columnChanged(e,t,n){let i={type:e,columns:t,column:t&&t.length==1?t[0]:null,source:n};this.eventService.dispatchEvent(i)}columnResized(e,t,n,i=null){if(e&&e.length){let s={type:"columnResized",columns:e,column:e.length===1?e[0]:null,flexColumns:i,finished:t,source:n};this.eventService.dispatchEvent(s)}}},Dse=class extends k{constructor(){super(...arguments),this.beanName="columnGetStateService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService}getColumnState(){let e=this.columnModel.getColDefCols();if(Pe(e)||!this.columnModel.isAlive())return[];let n=this.columnModel.getAllCols().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(n),n}createStateItemFromColumn(e){let t=this.funcColsService.getRowGroupColumns(),n=this.funcColsService.getPivotColumns(),i=e.isRowGroupActive()?t.indexOf(e):null,s=e.isPivotActive()?n.indexOf(e):null,r=e.isValueActive()?e.getAggFunc():null,o=e.getSort()!=null?e.getSort():null,a=e.getSortIndex()!=null?e.getSortIndex():null,l=e.getFlex()!=null&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:o,sortIndex:a,aggFunc:r,rowGroup:e.isRowGroupActive(),rowGroupIndex:i,pivot:e.isPivotActive(),pivotIndex:s,flex:l}}orderColumnStateList(e){let t=this.columnModel.getCols(),n=new Map(t.map((i,s)=>[i.getColId(),s]));e.sort((i,s)=>{let r=n.has(i.colId)?n.get(i.colId):-1,o=n.has(s.colId)?n.get(s.colId):-1;return r-o})}},Rse=class extends k{constructor(){super(...arguments),this.beanName="columnGroupStateService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService}getColumnGroupState(){let e=[],t=this.columnModel.getColTree();return $r(null,t,n=>{Qn(n)&&e.push({groupId:n.getGroupId(),open:n.isExpanded()})}),e}resetColumnGroupState(e){let t=this.columnModel.getColDefColTree();if(!t)return;let n=[];$r(null,t,i=>{if(Qn(i)){let s=i.getColGroupDef(),r={groupId:i.getGroupId(),open:s?s.openByDefault:void 0};n.push(r)}}),this.setColumnGroupState(n,e)}setColumnGroupState(e,t){if(!this.columnModel.getColTree())return;this.columnAnimationService.start();let i=[];e.forEach(s=>{let r=s.groupId,o=s.open,a=this.columnModel.getProvidedColGroup(r);a&&a.isExpanded()!==o&&(a.setExpanded(o),i.push(a))}),this.visibleColsService.refresh(t,!0),i.length&&this.eventDispatcher.groupOpened(i),this.columnAnimationService.finish()}},Tse=class extends k{constructor(){super(...arguments),this.beanName="columnViewportService",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,n=!1){let i=this.visibleColsService.isBodyWidthDirty();if(!(e===this.scrollWidth&&t===this.scrollPosition&&!i)){if(this.scrollWidth=e,this.scrollPosition=t,this.visibleColsService.setBodyWidthDirty(),this.gos.get("enableRtl")){let r=this.visibleColsService.getBodyContainerWidth();this.viewportLeft=r-this.scrollPosition-this.scrollWidth,this.viewportRight=r-this.scrollPosition}else this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition;this.columnModel.isReady()&&this.checkViewportColumns(n)}}getHeadersToRender(e,t){let n;switch(e){case"left":n=this.rowsOfHeadersToRenderLeft[t];break;case"right":n=this.rowsOfHeadersToRenderRight[t];break;default:n=this.rowsOfHeadersToRenderCenter[t];break}return n||[]}extractViewportColumns(){let e=this.visibleColsService.getCenterCols();this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;let t=e.getLeft()||0,n=t+e.getActualWidth(),i=this.viewportLeft-200,s=this.viewportRight+200,r=t<i&&n<i,o=t>s&&n>s;return!r&&!o}getViewportColumns(){let e=this.visibleColsService.getLeftCols(),t=this.visibleColsService.getRightCols();return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.columnModel.isColSpanActive())return this.colsWithinViewport;let t=s=>{let r=s.getLeft();return j(r)&&r>this.viewportLeft},n=this.isColumnVirtualisationSuppressed()?null:this.isColumnInRowViewport.bind(this),i=this.visibleColsService.getColsCenter();return this.visibleColsService.getColsForRow(e,i,n,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventDispatcher.virtualColumnsChanged(e)}calculateHeaderRows(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={};let e={},t=this.visibleColsService.getLeftCols(),n=this.visibleColsService.getRightCols();this.headerColsWithinViewport.concat(t).concat(n).forEach(r=>e[r.getId()]=!0);let s=(r,o,a)=>{let l=!1;for(let c=0;c<r.length;c++){let u=r[c],h=!1;if(Qo(u))h=e[u.getId()]===!0;else{let g=u.getDisplayedChildren();g&&(h=s(g,o,a+1))}h&&(l=!0,o[a]||(o[a]=[]),o[a].push(u))}return l};s(this.visibleColsService.getTreeLeft(),this.rowsOfHeadersToRenderLeft,0),s(this.visibleColsService.getTreeRight(),this.rowsOfHeadersToRenderRight,0),s(this.visibleColsService.getTreeCenter(),this.rowsOfHeadersToRenderCenter,0)}extractViewport(){let e=i=>`${i.getId()}-${i.getPinned()||"normal"}`;this.extractViewportColumns();let t=this.getViewportColumns().map(e).join("#"),n=this.colsWithinViewportHash!==t;return n&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),n}},Ise=class extends k{constructor(){super(...arguments),this.beanName="agComponentUtils"}wireBeans(e){this.componentMetadataProvider=e.componentMetadataProvider}adaptFunction(e,t){let n=this.componentMetadataProvider.retrieve(e);return n&&n.functionAdapter?n.functionAdapter(t):null}adaptCellRendererFunction(e){class t{refresh(){return!1}getGui(){return this.eGui}init(i){let s=e(i),r=typeof s;if(r==="string"||r==="number"||r==="boolean"){this.eGui=Iu("<span>"+s+"</span>");return}if(s==null){this.eGui=Iu("<span></span>");return}this.eGui=s}}return t}doesImplementIComponent(e){return e?e.prototype&&"getGui"in e.prototype:!1}},Ase=class extends k{constructor(){super(...arguments),this.beanName="componentMetadataProvider"}wireBeans(e){this.agComponentUtils=e.agComponentUtils}postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(e){return this.componentMetaData[e]}},Mse=["rowPositionUtils","cellPositionUtils","headerPositionUtils","paginationAutoPageSizeService","apiFunctionService","gridApi","userComponentRegistry","agComponentUtils","componentMetadataProvider","resizeObserverService","userComponentFactory","rowContainerHeightService","horizontalResizeService","localeService","validationService","pinnedRowModel","dragService","visibleColsService","eventService","gos","popupService","selectionService","columnFilterService","quickFilterService","filterManager","columnModel","headerNavigationService","pageBoundsService","paginationService","pageBoundsListener","rowRenderer","expressionService","columnFactory","alignedGridsService","navigationService","valueCache","valueService","loggerFactory","autoWidthCalculator","filterMenuFactory","dragAndDropService","focusService","mouseEventService","environment","cellNavigationService","stylingService","scrollVisibleService","sortController","columnHoverService","columnAnimationService","selectableService","autoColService","changeDetectionService","animationFrameService","undoRedoService","columnDefFactory","rowCssClassCalculator","rowNodeBlockLoader","rowNodeSorter","ctrlsService","pinnedWidthService","rowNodeEventThrottle","ctrlsFactory","dataTypeService","syncService","overlayService","stateService","expansionService","apiEventService","ariaAnnouncementService","menuService","columnApplyStateService","columnEventDispatcher","columnMoveService","columnAutosizeService","columnGetStateService","columnGroupStateService","columnSizeService","funcColsService","columnNameService","columnViewportService","pivotResultColsService","showRowGroupColsService"],HV=Object.fromEntries(Mse.map((e,t)=>[e,t]));function Pse(e,t){let n=(e.beanName?HV[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,i=(t.beanName?HV[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return n-i}function Fse(e,t){return e?.beanName==="gridDestroyService"?-1:0}var xse=class extends k{constructor(){super(...arguments),this.beanName="ctrlsFactory",this.registry={}}register(e){this.registry[e.name]=e.classImp}getInstance(e,...t){let n=this.registry[e];if(n!=null)return new n(...t)}},Ose=class extends k{constructor(){super(...arguments),this.beanName="ctrlsService",this.params={},this.ready=!1,this.readyCallbacks=[]}checkReady(){let e=this.params;this.ready=e.gridCtrl!=null&&e.gridBodyCtrl!=null&&e.center!=null&&e.left!=null&&e.right!=null&&e.bottomCenter!=null&&e.bottomLeft!=null&&e.bottomRight!=null&&e.topCenter!=null&&e.topLeft!=null&&e.topRight!=null&&e.stickyTopCenter!=null&&e.stickyTopLeft!=null&&e.stickyTopRight!=null&&e.stickyBottomCenter!=null&&e.stickyBottomLeft!=null&&e.stickyBottomRight!=null&&e.centerHeader!=null&&e.leftHeader!=null&&e.rightHeader!=null&&e.fakeHScrollComp!=null&&e.fakeVScrollComp!=null&&e.gridHeaderCtrl!=null,this.ready&&(this.readyCallbacks.forEach(t=>t(e)),this.readyCallbacks.length=0)}whenReady(e){this.ready?e(this.params):this.readyCallbacks.push(e)}register(e,t){this.params[e]=t,this.checkReady()}registerHeaderContainer(e,t){let n=this.params;switch(t){case"left":n.leftHeader=e;break;case"right":n.rightHeader=e;break;default:n.centerHeader=e;break}this.checkReady()}get(e){return this.params[e]}getParams(){return this.params}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){let{leftHeader:e,centerHeader:t,rightHeader:n}=this.params;return[e,n,t]}getHeaderRowContainerCtrl(e){let t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}},Nse=class extends k{constructor(){super(...arguments),this.beanName="cellPositionUtils"}createId(e){let{rowIndex:t,rowPinned:n,column:i}=e;return this.createIdFromValues({rowIndex:t,column:i,rowPinned:n})}createIdFromValues(e){let{rowIndex:t,rowPinned:n,column:i}=e;return`${t}.${n??"null"}.${i.getId()}`}equals(e,t){let n=e.column===t.column,i=e.rowPinned===t.rowPinned,s=e.rowIndex===t.rowIndex;return n&&i&&s}},kse=class extends k{constructor(){super(...arguments),this.beanName="rowNodeEventThrottle",this.events=[]}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowModel=e.rowModel}postConstruct(){this.rowModel.getType()=="clientSide"&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e,t){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(e);return}this.events.push(e);let n=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(i=>this.eventService.dispatchEvent(i)),this.events=[]};t?n():(this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(n)),this.dispatchExpandedDebounced())}},Lse=class extends k{constructor(){super(...arguments),this.beanName="rowPositionUtils"}wireBeans(e){this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.pageBoundsService=e.pageBoundsService}getFirstRow(){let e=0,t;return this.pinnedRowModel.getPinnedTopRowCount()?t="top":this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(t="bottom"),t===void 0?null:{rowIndex:e,rowPinned:t}}getLastRow(){let e,t=null,n=this.pinnedRowModel.getPinnedBottomRowCount(),i=this.pinnedRowModel.getPinnedTopRowCount();return n?(t="bottom",e=n-1):this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getLastRow()):i&&(t="top",e=i-1),e===void 0?null:{rowIndex:e,rowPinned:t}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowNodes()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowNodes()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}before(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(j(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}},UV={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},WV={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},jV={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},Vse=class extends k{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.themeClasses=[],this.eThemeAncestor=null,this.eMeasurementContainer=null,this.sizesMeasured=!1}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.eGridDiv=e.eGridDiv}postConstruct(){this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.themeClasses=this.getAncestorThemeClasses(),this.setUpThemeClassObservers(),this.getSizeEl(UV),this.getSizeEl(WV),this.getSizeEl(jV)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(UV)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(WV)}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(jV)}hasMeasuredSizes(){return this.sizesMeasured}getThemeClasses(){return this.themeClasses}applyThemeClasses(e){for(let t of Array.from(e.classList))t.startsWith("ag-theme-")&&!this.themeClasses.includes(t)&&e.classList.remove(t);for(let t of this.themeClasses)e.classList.contains(t)||e.classList.add(t)}getThemeAncestorElement(){return this.eThemeAncestor}refreshRowHeightVariable(){let e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gos.get("rowHeight");if(t==null||isNaN(t)||!isFinite(t))return e!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;let n=`${t}px`;return e!=n?(this.eGridDiv.style.setProperty("--ag-line-height",n),t):e!=""?parseFloat(e):-1}getCSSVariablePixelValue(e){let t=this.lastKnownValues.get(e);if(t!=null)return t;let n=this.measureSizeEl(e);return n==="detached"||n==="no-styles"?e.defaultValue:(this.lastKnownValues.set(e,n),n)}measureSizeEl(e){let t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";let n=t.offsetWidth;return n===zV?"no-styles":(this.sizesMeasured=!0,n)}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;let n=this.eMeasurementContainer;n||(n=this.eMeasurementContainer=document.createElement("div"),n.className="ag-measurement-container",this.eGridDiv.appendChild(n)),t=document.createElement("div"),t.style.width=`var(${e.cssName}, ${zV}px)`,n.appendChild(t),this.sizeEls.set(e,t);let i=this.measureSizeEl(e);i==="no-styles"&&G(`no value for ${e.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e.defaultValue} will be used and updated when styles load.`);let s=this.resizeObserverService.observeResize(t,()=>{let r=this.measureSizeEl(e);r==="detached"||r==="no-styles"||(this.lastKnownValues.set(e,r),r!==i&&(i=r,this.fireGridStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>s()),t}fireGridStylesChangedEvent(e){let t={type:"gridStylesChanged",[e]:!0};this.eventService.dispatchEvent(t)}setUpThemeClassObservers(){let e=new MutationObserver(()=>{let n=this.getAncestorThemeClasses();Bse(n,this.themeClasses)||(this.themeClasses=n,this.fireGridStylesChangedEvent("themeChanged"))}),t=this.eGridDiv;for(;t;)e.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement}getAncestorThemeClasses(){let e=this.eGridDiv,t=[];for(this.eThemeAncestor=null;e;){let n=Array.from(e.classList).filter(i=>i.startsWith("ag-theme-"));for(let i of n)this.eThemeAncestor=e,t.includes(i)||t.unshift(i);e=e.parentElement}return Object.freeze(t)}},Bse=(e,t)=>e.length===t.length&&e.findIndex((n,i)=>e[i]!==t[i])===-1,zV=15538,Gse=class extends k{constructor(){super(...arguments),this.beanName="eventService",this.globalEventService=new Mu}wireBeans(e){this.globalEventListener=e.globalEventListener,this.globalSyncEventListener=e.globalSyncEventListener}postConstruct(){if(this.globalEventListener){let e=this.gos.useAsyncEvents();this.addGlobalListener(this.globalEventListener,e)}this.globalSyncEventListener&&this.addGlobalListener(this.globalSyncEventListener,!1)}addEventListener(e,t,n){this.globalEventService.addEventListener(e,t,n)}removeEventListener(e,t,n){this.globalEventService.removeEventListener(e,t,n)}addGlobalListener(e,t=!1){this.globalEventService.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalEventService.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalEventService.dispatchEvent(this.gos.addGridCommonParams(e))}dispatchEventOnce(e){this.globalEventService.dispatchEventOnce(this.gos.addGridCommonParams(e))}},UR=class Ti extends k{constructor(){super(...arguments),this.beanName="focusService"}wireBeans(t){this.eGridDiv=t.eGridDiv,this.columnModel=t.columnModel,this.visibleColsService=t.visibleColsService,this.headerNavigationService=t.headerNavigationService,this.headerPositionUtils=t.headerPositionUtils,this.rowRenderer=t.rowRenderer,this.rowPositionUtils=t.rowPositionUtils,this.cellPositionUtils=t.cellPositionUtils,this.navigationService=t.navigationService,this.ctrlsService=t.ctrlsService,this.filterManager=t.filterManager,this.rangeService=t.rangeService,this.advancedFilterService=t.advancedFilterService}static addKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",Ti.toggleKeyboardMode),t.addEventListener("mousedown",Ti.toggleKeyboardMode))}static removeKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",Ti.toggleKeyboardMode),t.addEventListener("mousedown",Ti.toggleKeyboardMode))}static toggleKeyboardMode(t){let n=Ti.keyboardModeActive,i=t.type==="keydown";i&&(t.ctrlKey||t.metaKey||t.altKey)||n!==i&&(Ti.keyboardModeActive=i)}static unregisterGridCompController(t){Ti.removeKeyboardModeEvents(t)}postConstruct(){let t=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:t,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:t,columnRowGroupChanged:t}),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(n=>{this.gridCtrl=n.gridCtrl})}registerKeyboardFocusEvents(){let t=this.gos.getDocument();Ti.addKeyboardModeEvents(t),Ti.instanceCount++,this.addDestroyFunc(()=>{Ti.instanceCount--,Ti.unregisterGridCompController(t)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;let t=this.focusedCellPosition.column,n=this.columnModel.getCol(t.getId());t!==n&&this.clearFocusedCell()}isKeyboardMode(){return Ti.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),ml.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),PC.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(t,n){let i=t;for(;i;){if(this.gos.getDomData(i,n))return!1;i=i.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(t){return this.isCellRestoreFocused(t)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}isCellRestoreFocused(t){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.restoredFocusedCellPosition)}setRestoreFocusedCell(t){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=t)}getFocusEventParams(){let{rowIndex:t,rowPinned:n,column:i}=this.focusedCellPosition,s={rowIndex:t,rowPinned:n,column:i,isFullWidthCell:!1},r=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:n});return r&&(s.isFullWidthCell=r.isFullWidth()),s}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;let t=B({type:"cellFocusCleared"},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(t)}setFocusedCell(t){let{column:n,rowIndex:i,rowPinned:s,forceBrowserFocus:r=!1,preventScrollOnBrowserFocus:o=!1}=t,a=this.columnModel.getCol(n);if(!a){this.focusedCellPosition=null;return}this.focusedCellPosition=a?{rowIndex:i,rowPinned:fl(s),column:a}:null;let l=se(B({type:"cellFocused"},this.getFocusEventParams()),{forceBrowserFocus:r,preventScrollOnBrowserFocus:o});this.eventService.dispatchEvent(l)}isCellFocused(t){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.focusedCellPosition)}isRowNodeFocused(t){return this.isRowFocused(t.rowIndex,t.rowPinned)}isHeaderWrapperFocused(t){if(this.focusedHeaderPosition==null)return!1;let n=t.getColumnGroupChild(),i=t.getRowIndex(),s=t.getPinned(),{column:r,headerRowIndex:o}=this.focusedHeaderPosition;return n===r&&i===o&&s==r.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(t,n){this.focusedHeaderPosition={headerRowIndex:t,column:n}}focusHeaderPosition(t){if(this.gos.get("suppressHeaderFocus"))return!1;let{direction:n,fromTab:i,allowUserOverride:s,event:r,fromCell:o,rowWithoutSpanValue:a}=t,{headerPosition:l}=t;if(o&&this.filterManager?.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(l);if(s){let c=this.getFocusedHeader(),u=this.headerNavigationService.getHeaderRowCount();if(i){let h=this.gos.getCallback("tabToNextHeader");h&&(l=this.getHeaderPositionFromUserFunc({userFunc:h,direction:n,currentPosition:c,headerPosition:l,headerRowCount:u}))}else{let h=this.gos.getCallback("navigateToNextHeader");if(h&&r){let f={key:r.key,previousHeaderPosition:c,nextHeaderPosition:l,headerRowCount:u,event:r};l=h(f)}}}return l?this.focusProvidedHeaderPosition({headerPosition:l,direction:n,event:r,fromCell:o,rowWithoutSpanValue:a}):!1}focusHeaderPositionFromUserFunc(t){if(this.gos.get("suppressHeaderFocus"))return!1;let{userFunc:n,headerPosition:i,direction:s,event:r}=t,o=this.getFocusedHeader(),a=this.headerNavigationService.getHeaderRowCount(),l=this.getHeaderPositionFromUserFunc({userFunc:n,direction:s,currentPosition:o,headerPosition:i,headerRowCount:a});return!!l&&this.focusProvidedHeaderPosition({headerPosition:l,direction:s,event:r})}getHeaderPositionFromUserFunc(t){let{userFunc:n,direction:i,currentPosition:s,headerPosition:r,headerRowCount:o}=t,l=n({backwards:i==="Before",previousHeaderPosition:s,nextHeaderPosition:r,headerRowCount:o});return l===!0||l===null?(l===null&&G("Since v31.3 Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),s):l===!1?null:l}focusProvidedHeaderPosition(t){let{headerPosition:n,direction:i,fromCell:s,rowWithoutSpanValue:r,event:o}=t,{column:a,headerRowIndex:l}=n;if(l===-1)return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(n):this.focusGridView(a);this.headerNavigationService.scrollToColumn(a,i);let u=this.ctrlsService.getHeaderRowContainerCtrl(a.getPinned()).focusHeader(n.headerRowIndex,a,o);return u&&(r!=null||s)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(r??-1),u}focusFirstHeader(){let t=this.visibleColsService.getAllCols()[0];if(!t)return!1;t.getParent()&&(t=this.visibleColsService.getColGroupAtLevel(t,0));let n=this.headerPositionUtils.getHeaderIndexToFocus(t,0);return this.focusHeaderPosition({headerPosition:n,rowWithoutSpanValue:0})}focusLastHeader(t){let n=this.headerNavigationService.getHeaderRowCount()-1,i=xe(this.visibleColsService.getAllCols());return this.focusHeaderPosition({headerPosition:{headerRowIndex:n,column:i},rowWithoutSpanValue:-1,event:t})}focusPreviousFromFirstCell(t){return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(t)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(t,n){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===t&&this.focusedCellPosition.rowPinned===fl(n)}findFocusableElements(t,n,i=!1){let s=_Z,r=bB;n&&(r+=", "+n),i&&(r+=', [tabindex="-1"]');let o=Array.prototype.slice.apply(t.querySelectorAll(s)).filter(c=>bs(c)),a=Array.prototype.slice.apply(t.querySelectorAll(r));return a.length?((c,u)=>c.filter(h=>u.indexOf(h)===-1))(o,a):o}focusInto(t,n=!1,i=!1){let s=this.findFocusableElements(t,null,i),r=n?xe(s):s[0];return r?(r.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(t,n){if(!n)return null;let i=this.findFocusableElements(t),s=i.indexOf(n);if(s===-1)return null;let r=-1;for(let o=s-1;o>=0;o--)if(i[o].classList.contains("ag-tab-guard-top")){r=o;break}return r<=0?null:i[r-1]}findNextFocusableElement(t=this.eGridDiv,n,i){let s=this.findFocusableElements(t,n?':not([tabindex="-1"])':null),r=this.gos.getActiveDomElement(),o;n?o=s.findIndex(l=>l.contains(r)):o=s.indexOf(r);let a=o+(i?-1:1);return a<0||a>=s.length?null:s[a]}isTargetUnderManagedComponent(t,n){if(!n)return!1;let i=t.querySelectorAll(`.${yl.FOCUS_MANAGED_CLASS}`);if(!i.length)return!1;for(let s=0;s<i.length;s++)if(i[s].contains(n))return!0;return!1}findTabbableParent(t,n=5){let i=0;for(;t&&sR(t)===null&&++i<=n;)t=t.parentElement;return sR(t)===null?null:t}focusGridView(t,n){if(this.gos.get("suppressCellFocus"))return n?this.gos.get("suppressHeaderFocus")?this.focusNextGridCoreContainer(!0,!0):this.focusLastHeader():this.focusNextGridCoreContainer(!1);let i=n?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!i)return!1;let{rowIndex:s,rowPinned:r}=i,o=this.getFocusedHeader();return!t&&o&&(t=o.column),s==null||!t?!1:(this.navigationService.ensureCellVisible({rowIndex:s,column:t,rowPinned:r}),this.setFocusedCell({rowIndex:s,column:t,rowPinned:fl(r),forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:s,rowPinned:r,column:t}),!0)}focusNextGridCoreContainer(t,n=!1){return!n&&this.gridCtrl.focusNextInnerContainer(t)?!0:((n||!t&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(t),!1)}focusAdvancedFilter(t){return this.advancedFilterFocusColumn=t?.column,this.advancedFilterService?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(t,n){let i=(n?void 0:this.advancedFilterFocusColumn)??this.visibleColsService.getAllCols()?.[0];return t?this.focusHeaderPosition({headerPosition:{column:i,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(i)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}addFocusableContainer(t){this.gridCtrl.addFocusableContainer(t)}removeFocusableContainer(t){this.gridCtrl.removeFocusableContainer(t)}focusGridInnerElement(t){return this.gridCtrl.focusInnerElement(t)}};UR.keyboardModeActive=!1;UR.instanceCount=0;var Hse=UR,Use=class extends k{constructor(){super(...arguments),this.beanName="pinnedWidthService"}wireBeans(e){this.visibleColsService=e.visibleColsService}postConstruct(){let e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){let e=this.gos.isDomLayout("print"),t=e?0:this.visibleColsService.getColsLeftWidth(),n=e?0:this.visibleColsService.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:"leftPinnedWidthChanged"})),n!=this.rightWidth&&(this.rightWidth=n,this.eventService.dispatchEvent({type:"rightPinnedWidthChanged"}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}},Wse=class extends k{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}wireBeans(e){this.beans=e,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}setComp(e,t,n){this.view=e,this.eGridHostDiv=t,this.eGui=n,this.eGui.setAttribute("grid-id",this.gridId);let{dragAndDropService:i,mouseEventService:s,ctrlsService:r,resizeObserverService:o}=this.beans;i.addDropTarget({getContainer:()=>this.eGui,isInterestedIn:l=>l===1||l===0,getIconName:()=>"notAllowed"}),s.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new GR(this.view)),this.addRtlSupport();let a=o.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>a()),r.register("gridCtrl",this)}isDetailGrid(){return this.focusService.findTabbableParent(this.getGui())?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){let e=this.beans;return{paginationSelector:e.paginationService?.getPaginationSelector(),gridHeaderDropZonesSelector:e.columnDropZonesService?.getDropZoneSelector(),sideBarSelector:e.sideBarService?.getSideBarSelector(),statusBarSelector:e.statusBarService?.getStatusPanelSelector(),watermarkSelector:e.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){let e={type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(e)}addRtlSupport(){let e=this.gos.get("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(e)}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){let t=this.getFocusableContainers(),n=this.gos.getActiveDomElement(),i=t.findIndex(r=>r.getGui().contains(n)),s=i+(e?-1:1);if(s<0||s>=t.length)return!1;if(s===0){if(i>0){let r=this.visibleColsService.getAllCols(),o=xe(r);if(this.focusService.focusGridView(o,!0))return!0}return!1}return this.focusContainer(t[s],e)}focusInnerElement(e){let t=this.getFocusableContainers(),n=this.visibleColsService.getAllCols(),i=this.gos.getCallback("focusGridInnerElement");if(i&&i({fromBottom:!!e}))return!0;if(e){if(t.length>1)return this.focusContainer(xe(t),!0);let s=xe(n);if(this.focusService.focusGridView(s,!0))return!0}if(this.gos.get("headerHeight")===0||this.gos.get("suppressHeaderFocus")){if(this.focusService.focusGridView(n[0]))return!0;for(let s=1;s<t.length;s++)if(this.focusService.focusInto(t[s].getGui()))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}focusContainer(e,t){e?.setAllowFocus?.(!0);let n=this.focusService.focusInto(e.getGui(),t);return e?.setAllowFocus?.(!1),n}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers.values()]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},jse=class extends MG{constructor(e){super(),this.gridBody=Z,this.sideBar=Z,this.pagination=Z,this.rootWrapperBody=Z,this.eGridDiv=e}postConstruct(){let e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:r=>this.addCssClass(r),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:r=>{this.getGui().style.userSelect=r??"",this.getGui().style.webkitUserSelect=r??""},setCursor:r=>{this.getGui().style.cursor=r??""}},t=this.createManagedBean(new Wse),n=t.getOptionalSelectors(),i=this.createTemplate(n),s=[lie,...Object.values(n).filter(r=>!!r)];this.setTemplate(i,s),t.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:r=>t.focusInnerElement(r),forceFocusOutWhenTabGuardsAreEmpty:!0})}insertGridIntoDom(){let e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(e),this.gos.get("debug")&&Ki("Grid removed from DOM")})}updateLayoutClasses(e,t){let n=this.rootWrapperBody.classList;n.toggle("ag-layout-auto-height",t.autoHeight),n.toggle("ag-layout-normal",t.normal),n.toggle("ag-layout-print",t.print),this.addOrRemoveCssClass("ag-layout-auto-height",t.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",t.normal),this.addOrRemoveCssClass("ag-layout-print",t.print)}createTemplate(e){let t=e.gridHeaderDropZonesSelector?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",n=e.sideBarSelector?'<ag-side-bar data-ref="sideBar"></ag-side-bar>':"",i=e.statusBarSelector?"<ag-status-bar></ag-status-bar>":"",s=e.watermarkSelector?"<ag-watermark></ag-watermark>":"",r=e.paginationSelector?'<ag-pagination data-ref="pagination"></ag-pagination>':"";return`<div class="ag-root-wrapper" role="presentation">
                ${t}
                <div class="ag-root-wrapper-body" data-ref="rootWrapperBody" role="presentation">
                    <ag-grid-body data-ref="gridBody"></ag-grid-body>
                    ${n}
                </div>
                ${i}
                ${r}
                ${s}
            </div>`}getFocusableElement(){return this.rootWrapperBody}forceFocusOutOfContainer(e=!1){if(!e&&this.pagination?.isDisplayed()){this.pagination.forceFocusOutOfContainer(e);return}super.forceFocusOutOfContainer(e)}getFocusableContainers(){let e=[this.gridBody];return[this.sideBar,this.pagination].forEach(t=>{t&&e.push(t)}),e.filter(t=>bs(t.getGui()))}},zse=class extends k{constructor(){super(...arguments),this.beanName="alignedGridsService",this.consuming=!1}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.ctrlsService=e.ctrlsService,this.columnApplyStateService=e.columnApplyStateService}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[],t=typeof e=="function";typeof e=="function"&&(e=e());let n=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return e.map(s=>{if(!s){ke("alignedGrids contains an undefined option."),t||ke(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),ke(n());return}if(this.isGridApi(s))return s;let r=s;return"current"in r?r.current?.api:(r.api||ke(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${n()}`),r.api)}).filter(s=>!!s&&!s.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){let e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach(t=>{t.isDestroyed()||t.dispatchEvent(e)})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){let t={type:"alignedGridColumn",event:e};this.fireEvent(t)}fireScrollEvent(e){if(e.direction!=="horizontal")return;let t={type:"alignedGridScroll",event:e};this.fireEvent(t)}onScrollEvent(e){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}getMasterColumns(e){let t=[];return e.columns?e.columns.forEach(n=>{t.push(n)}):e.column&&t.push(e.column),t}getColumnIds(e){let t=[];return e.columns?e.columns.forEach(n=>{t.push(n.getColId())}):e.column&&t.push(e.column.getColId()),t}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{let t=e;this.processColumnEvent(t);break}case"columnGroupOpened":{let t=e;this.processGroupOpenedEvent(t);break}case"columnPivotChanged":G("pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(e){e.columnGroups.forEach(t=>{let n=null;if(t){let i=t.getGroupId();n=this.columnModel.getProvidedColGroup(i)}t&&!n||this.columnModel.setColumnGroupOpened(n,t.isExpanded(),"alignedGridChanged")})}processColumnEvent(e){let t=e.column,n=null;if(t&&(n=this.columnModel.getColDefCol(t.getColId())),t&&!n)return;let i=this.getMasterColumns(e);switch(e.type){case"columnMoved":{let a=e.api.getColumnState().map(l=>({colId:l.colId}));this.columnApplyStateService.applyColumnState({state:a,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{let a=e.api.getColumnState().map(l=>({colId:l.colId,hide:l.hide}));this.columnApplyStateService.applyColumnState({state:a},"alignedGridChanged")}break;case"columnPinned":{let a=e.api.getColumnState().map(l=>({colId:l.colId,pinned:l.pinned}));this.columnApplyStateService.applyColumnState({state:a},"alignedGridChanged")}break;case"columnResized":{let o=e,a={};i.forEach(l=>{a[l.getId()]={key:l.getColId(),newWidth:l.getActualWidth()}}),o.flexColumns?.forEach(l=>{a[l.getId()]&&delete a[l.getId()]}),this.columnSizeService.setColumnWidths(Object.values(a),!1,o.finished,"alignedGridChanged");break}}let r=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(o=>{o.setGridOption("alwaysShowVerticalScroll",r)})}},$se={version:ve,moduleName:"@ag-grid-community/aligned-grid",beans:[zse]};function qse(e,t){let n=e.columnModel.getColDefCol(t);return n?n.getColDef():null}function Kse(e){return e.columnModel.getColumnDefs()}function Qse(e,t){typeof t=="number"?e.columnSizeService.sizeColumnsToFit(t,"api"):e.ctrlsService.getGridBodyCtrl().sizeColumnsToFit(t)}function Yse(e,t,n){e.columnModel.setColumnGroupOpened(t,n,"api")}function Jse(e,t,n){return e.visibleColsService.getColumnGroup(t,n)}function Xse(e,t){return e.columnModel.getProvidedColGroup(t)}function Zse(e,t,n){return e.columnNameService.getDisplayNameForColumn(t,n)||""}function ere(e,t,n){return e.columnNameService.getDisplayNameForColumnGroup(t,n)||""}function tre(e,t){return e.columnModel.getColDefCol(t)}function nre(e){return e.columnModel.getColDefCols()}function ire(e,t){return e.columnApplyStateService.applyColumnState(t,"api")}function sre(e){return e.columnGetStateService.getColumnState()}function rre(e){e.columnApplyStateService.resetColumnState("api")}function ore(e){return e.columnGroupStateService.getColumnGroupState()}function are(e,t){e.columnGroupStateService.setColumnGroupState(t,"api")}function lre(e){e.columnGroupStateService.resetColumnGroupState("api")}function cre(e){return e.visibleColsService.isPinningLeft()||e.visibleColsService.isPinningRight()}function ure(e){return e.visibleColsService.isPinningLeft()}function dre(e){return e.visibleColsService.isPinningRight()}function hre(e,t){return e.visibleColsService.getColAfter(t)}function fre(e,t){return e.visibleColsService.getColBefore(t)}function pre(e,t,n){e.columnModel.setColsVisible([t],n,"api")}function gre(e,t,n){e.columnModel.setColsVisible(t,n,"api")}function mre(e,t,n){e.columnModel.setColsPinned([t],n,"api")}function vre(e,t,n){e.columnModel.setColsPinned(t,n,"api")}function Cre(e){return e.columnModel.getCols()}function yre(e){return e.visibleColsService.getLeftCols()}function wre(e){return e.visibleColsService.getCenterCols()}function Sre(e){return e.visibleColsService.getRightCols()}function _re(e){return e.visibleColsService.getAllCols()}function bre(e){return e.columnViewportService.getViewportColumns()}function Ere(e,t,n){e.columnMoveService.moveColumns([t],n,"api")}function Dre(e,t,n){e.columnMoveService.moveColumnByIndex(t,n,"api")}function Rre(e,t,n){e.columnMoveService.moveColumns(t,n,"api")}function Tre(e,t,n,i=!0,s="api"){e.columnSizeService.setColumnWidths([{key:t,newWidth:n}],!1,i,s)}function Ire(e,t,n=!0,i="api"){e.columnSizeService.setColumnWidths(t,!1,n,i)}function Are(e){return e.visibleColsService.getTreeLeft()}function Mre(e){return e.visibleColsService.getTreeCenter()}function Pre(e){return e.visibleColsService.getTreeRight()}function Fre(e){return e.visibleColsService.getAllTrees()}function xre(e,t,n){return e.columnAutosizeService.autoSizeCols({colKeys:[t],skipHeader:n,source:"api"})}function Ore(e,t,n){e.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:n,source:"api"})}function Nre(e,t){e.columnAutosizeService.autoSizeAllColumns("api",t)}var $V={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},qV=["january","february","march","april","may","june","july","august","september","october","november","december"],kre=class extends k{constructor(){super(...arguments),this.beanName="dataTypeService",this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(e){this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.columnApplyStateService=e.columnApplyStateService}postConstruct(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(bu(e.source))})}processDataTypeDefinitions(){let e=this.getDefaultDataTypes();this.dataTypeDefinitions={},this.formatValueFuncs={};let t=i=>s=>{let{column:r,node:o,value:a}=s,l=r.getColDef().valueFormatter;return l===i.groupSafeValueFormatter&&(l=i.valueFormatter),this.valueService.formatValue(r,o,a,l)};Object.entries(e).forEach(([i,s])=>{let r=se(B({},s),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(s)});this.dataTypeDefinitions[i]=r,this.formatValueFuncs[i]=t(r)});let n=this.gos.get("dataTypeDefinitions")??{};this.dataTypeMatchers={},Object.entries(n).forEach(([i,s])=>{let r=this.processDataTypeDefinition(s,n,[i],e);r&&(this.dataTypeDefinitions[i]=r,s.dataTypeMatcher&&(this.dataTypeMatchers[i]=s.dataTypeMatcher),this.formatValueFuncs[i]=t(r))}),this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach(i=>{let s=this.dataTypeMatchers[i];s&&delete this.dataTypeMatchers[i],this.dataTypeMatchers[i]=s??e[i].dataTypeMatcher})}mergeDataTypeDefinitions(e,t){let n=B(B({},e),t);return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(n.columnTypes=[...vC(e.columnTypes),...vC(t.columnTypes)]),n}processDataTypeDefinition(e,t,n,i){let s,r=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let o=i[r],a=t[r];if(o&&a&&(o=a),!this.validateDataTypeDefinition(e,o,r))return;s=this.mergeDataTypeDefinitions(o,e)}else{if(n.includes(r)){G('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}let o=t[r];if(!this.validateDataTypeDefinition(e,o,r))return;let a=this.processDataTypeDefinition(o,t,[...n,r],i);if(!a)return;s=this.mergeDataTypeDefinitions(a,e)}return se(B({},s),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(s)})}validateDataTypeDefinition(e,t,n){return t?t.baseDataType!==e.baseDataType?(G('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(G(`The data type definition ${n} does not exist.`),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return t=>{if(t.node?.group){let n=t.column.getAggFunc();if(n){if(n==="first"||n==="last")return e.valueFormatter(t);if(e.baseDataType==="number"&&n!=="count"){if(typeof t.value=="number")return e.valueFormatter(t);if(typeof t.value=="object"){if(!t.value)return;if("toNumber"in t.value)return e.valueFormatter(se(B({},t),{value:t.value.toNumber()}));if("value"in t.value)return e.valueFormatter(se(B({},t),{value:t.value.value}))}}}if(!this.gos.get("suppressGroupMaintainValueType"))return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive()){if(typeof t.value!="string"||e.dataTypeMatcher?.(t.value))return e.valueFormatter(t);if(!this.gos.get("suppressGroupMaintainValueType"))return}return e.valueFormatter(t)}}updateColDefAndGetColumnType(e,t,n){let{cellDataType:i}=t,{field:s}=t;if(i===void 0&&(i=e.cellDataType),(i==null||i===!0)&&(i=this.canInferCellDataType(e,t)?this.inferCellDataType(s,n):!1),!i){e.cellDataType=!1;return}let r=this.dataTypeDefinitions[i];if(!r){G(`Missing data type definition - "${i}"`);return}return e.cellDataType=i,r.groupSafeValueFormatter&&(e.valueFormatter=r.groupSafeValueFormatter),r.valueParser&&(e.valueParser=r.valueParser),r.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,i,r,n),r.columnTypes}addColumnListeners(e){if(!this.isWaitingForRowData)return;let t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;let n=i=>{t.add(i.key)};e.addEventListener("columnStateUpdated",n),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.removeEventListener("columnStateUpdated",n))}canInferCellDataType(e,t){if(this.rowModel.getType()!=="clientSide")return!1;let n={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,n))return!1;let i=t.type===null?e.type:t.type;if(i){let s=this.gos.get("columnTypes")??{};if(vC(i).some(o=>{let a=s[o.trim()];return a&&this.doColDefPropsPreventInference(a,n)}))return!1}return!this.doColDefPropsPreventInference(e,n)}doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([n,i])=>this.doesColDefPropPreventInference(e,t,n,i))}doesColDefPropPreventInference(e,t,n,i){if(!t[n])return!1;let s=e[n];return s===null?(t[n]=!1,!1):i===void 0?!!s:s===i}inferCellDataType(e,t){if(!e)return;let n,i=this.getInitialData();if(i){let r=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");n=uf(i,e,r)}else this.initWaitForRowData(t);if(n==null)return;let[s]=Object.entries(this.dataTypeMatchers).find(([r,o])=>o(n))??["object"];return s}getInitialData(){let e=this.gos.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{let t=this.rowModel.getRootNode().allLeafChildren;if(t?.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;let t=this.isColumnTypeOverrideInDataTypeDefinitions;t&&this.columnModel.queueResizeOperations();let[n]=this.addManagedEventListeners({rowDataUpdateStarted:i=>{let{firstRowData:s}=i;if(!s)return;n?.(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(s,t),this.columnStateUpdatesPendingInference={},t&&this.columnModel.processResizeOperations();let r={type:"dataTypesInferred"};this.eventService.dispatchEvent(r)}})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,t){this.initialData=e;let n=[];this.destroyColumnStateUpdateListeners();let i={},s={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([r,o])=>{let a=this.columnModel.getCol(r);if(!a)return;let l=a.getColDef();if(!this.columnModel.resetColDefIntoCol(a,"cellDataTypeInferred"))return;let c=a.getColDef();if(t&&c.type&&c.type!==l.type){let u=this.getUpdatedColumnState(a,o);u.rowGroup&&u.rowGroupIndex==null&&(i[r]=u),u.pivot&&u.pivotIndex==null&&(s[r]=u),n.push(u)}}),t&&n.push(...this.funcColsService.generateColumnStateForRowGroupAndPivotIndexes(i,s)),n.length&&this.columnApplyStateService.applyColumnState({state:n},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,t){let n=this.columnApplyStateService.getColumnStateFromColDef(e);return t.forEach(i=>{delete n[i],i==="rowGroup"?delete n.rowGroupIndex:i==="pivot"&&delete n.pivotIndex}),n}checkObjectValueHandlers(e){let t=this.dataTypeDefinitions.object,n=e.object;this.hasObjectValueParser=t.valueParser!==n.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==n.valueFormatter}getDateStringTypeDefinition(e){return e?this.getDataTypeDefinition(e)??this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){let t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){return this.getDataTypeDefinition(e)?.baseDataType}checkType(e,t){if(t==null)return!0;let n=this.getDataTypeDefinition(e)?.dataTypeMatcher;return n?n(t):!0}validateColDef(e){e.cellDataType==="object"&&(e.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&G('Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"'),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&G('Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"'))}getFormatValue(e){return this.formatValueFuncs[e]}setColDefPropertiesForBaseDataType(e,t,n,i){let s=this.formatValueFuncs[t],r=Yn.__isRegistered("@ag-grid-enterprise/set-filter",this.gridId),o=this.localeService.getLocaleTextFunc(),a=l=>{let{filterParams:c}=e;e.filterParams=typeof c=="object"?B(B({},c),l):l};switch(n.baseDataType){case"number":{e.cellEditor="agNumberCellEditor",r&&a({comparator:(l,c)=>{let u=l==null?0:parseInt(l),h=c==null?0:parseInt(c);return u===h?0:u>h?1:-1}});break}case"boolean":{e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=l=>!!l.colDef.editable&&l.event.key===N.SPACE,a(r?{valueFormatter:l=>j(l.value)?o(String(l.value),l.value?"True":"False"):o("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(l,c)=>c,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(l,c)=>c===!1,numberOfInputs:0}]});break}case"date":{e.cellEditor="agDateCellEditor",e.keyCreator=s,r&&a({valueFormatter:l=>{let c=s(l);return j(c)?c:o("blanks","(Blanks)")},treeList:!0,treeListFormatter:(l,c)=>{if(c===1&&l!=null){let u=qV[Number(l)-1];return o(u,$V[u])}return l??o("blanks","(Blanks)")}});break}case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=s;let l=n.dateParser;a(r?{valueFormatter:c=>{let u=s(c);return j(u)?u:o("blanks","(Blanks)")},treeList:!0,treeListPathGetter:c=>{let u=l(c??void 0);return u?[String(u.getFullYear()),String(u.getMonth()+1),String(u.getDate())]:null},treeListFormatter:(c,u)=>{if(u===1&&c!=null){let h=qV[Number(c)-1];return o(h,$V[h])}return c??o("blanks","(Blanks)")}}:{comparator:(c,u)=>{let h=l(u);return u==null||h<c?-1:h>c?1:0}});break}case"object":{e.cellEditorParams={useFormatter:!0},e.comparator=(l,c)=>{let u=this.columnModel.getColDefCol(i),h=u?.getColDef();if(!u||!h)return 0;let f=l==null?"":s({column:u,node:null,value:l}),g=c==null?"":s({column:u,node:null,value:c});return f===g?0:f>g?1:-1},e.keyCreator=s,r?a({valueFormatter:l=>{let c=s(l);return j(c)?c:o("blanks","(Blanks)")}}):e.filterValueGetter=l=>s({column:l.column,node:l.node,value:this.valueService.getValue(l.column,l.node)});break}}}getDefaultDataTypes(){let e=n=>!!n.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:n=>n.newValue?.trim?.()===""?null:Number(n.newValue),valueFormatter:n=>n.value==null?"":typeof n.value!="number"||isNaN(n.value)?t("invalidNumber","Invalid Number"):String(n.value),dataTypeMatcher:n=>typeof n=="number"},text:{baseDataType:"text",valueParser:n=>n.newValue===""?null:YD(n.newValue),dataTypeMatcher:n=>typeof n=="string"},boolean:{baseDataType:"boolean",valueParser:n=>n.newValue==null?n.newValue:n.newValue?.trim?.()===""?null:String(n.newValue).toLowerCase()==="true",valueFormatter:n=>n.value==null?"":String(n.value),dataTypeMatcher:n=>typeof n=="boolean"},date:{baseDataType:"date",valueParser:n=>oi(n.newValue==null?null:String(n.newValue)),valueFormatter:n=>n.value==null?"":!(n.value instanceof Date)||isNaN(n.value.getTime())?t("invalidDate","Invalid Date"):Ji(n.value,!1)??"",dataTypeMatcher:n=>n instanceof Date},dateString:{baseDataType:"dateString",dateParser:n=>oi(n)??void 0,dateFormatter:n=>Ji(n??null,!1)??void 0,valueParser:n=>e(String(n.newValue))?n.newValue:null,valueFormatter:n=>e(String(n.value))?n.value:"",dataTypeMatcher:n=>typeof n=="string"&&e(n)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:n=>YD(n.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(e=>e()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}},Lre={version:ve,moduleName:"@ag-grid-community/data-type",beans:[kre]},Vre={version:ve,moduleName:"@ag-grid-community/column-api",apiFunctions:{getColumnDef:qse,getColumnDefs:Kse,sizeColumnsToFit:Qse,setColumnGroupOpened:Yse,getColumnGroup:Jse,getProvidedColumnGroup:Xse,getDisplayNameForColumn:Zse,getDisplayNameForColumnGroup:ere,getColumn:tre,getColumns:nre,applyColumnState:ire,getColumnState:sre,resetColumnState:rre,getColumnGroupState:ore,setColumnGroupState:are,resetColumnGroupState:lre,isPinning:cre,isPinningLeft:ure,isPinningRight:dre,getDisplayedColAfter:hre,getDisplayedColBefore:fre,setColumnVisible:pre,setColumnsVisible:gre,setColumnPinned:mre,setColumnsPinned:vre,getAllGridColumns:Cre,getDisplayedLeftColumns:yre,getDisplayedCenterColumns:wre,getDisplayedRightColumns:Sre,getAllDisplayedColumns:_re,getAllDisplayedVirtualColumns:bre,moveColumn:Ere,moveColumnByIndex:Dre,moveColumns:Rre,setColumnWidth:Tre,setColumnWidths:Ire,getLeftDisplayedColumnGroups:Are,getCenterDisplayedColumnGroups:Mre,getRightDisplayedColumnGroups:Pre,getAllDisplayedColumnGroups:Fre,autoSizeColumn:xre,autoSizeColumns:Ore,autoSizeAllColumns:Nre}};function Bre(e,t){e.ctrlsService.getGridBodyCtrl().getRowDragFeature().addRowDropZone(t)}function Gre(e,t){let n=e.dragAndDropService.findExternalZone(t);n&&e.dragAndDropService.removeDropTarget(n)}function Hre(e,t){return e.ctrlsService.getGridBodyCtrl().getRowDragFeature().getRowDropZone(t)}var Ure={version:ve,moduleName:"@ag-grid-community/drag-api",apiFunctions:{addRowDropZone:Bre,removeRowDropZone:Gre,getRowDropZoneParams:Hre}};function Wre(e){return e.pinnedRowModel.getPinnedTopRowCount()}function jre(e){return e.pinnedRowModel.getPinnedBottomRowCount()}function zre(e,t){return e.pinnedRowModel.getPinnedTopRow(t)}function $re(e,t){return e.pinnedRowModel.getPinnedBottomRow(t)}var qre={version:ve,moduleName:"@ag-grid-community/pinned-row-api",apiFunctions:{getPinnedTopRowCount:Wre,getPinnedBottomRowCount:jre,getPinnedTopRow:zre,getPinnedBottomRow:$re}};function Kre(e){e.overlayService.showLoadingOverlay()}function Qre(e){e.overlayService.showNoRowsOverlay()}function Yre(e){e.overlayService.hideOverlay()}var Jre={version:ve,moduleName:"@ag-grid-community/overlay-api",apiFunctions:{showLoadingOverlay:Kre,showNoRowsOverlay:Qre,hideOverlay:Yre}};function Xre(e,t,n){if(!t)return;let i=e.ctrlsService.getGridBodyCtrl().getGui(),s=`aria-${t}`;n===null?i.removeAttribute(s):i.setAttribute(s,n)}function Zre(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function eoe(e,t={}){let n=i=>G(`Since v31.1 api.flashCells parameter '${i}Delay' is deprecated. Please use '${i}Duration' instead.`);j(t.fadeDelay)&&n("fade"),j(t.flashDelay)&&n("flash"),e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.flashCells(t))}function toe(e){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getHeaderRowContainerCtrls().forEach(t=>t.refresh()))}function noe(e){return e.animationFrameService.isQueueEmpty()}function ioe(e){e.animationFrameService.flushAllFrames()}function soe(e){return{rowHeight:e.gos.getRowHeightAsNumber(),headerHeight:e.columnModel.getHeaderHeight()}}function roe(e,t={}){return e.rowRenderer.getCellRendererInstances(t).map(hf)}var ooe={version:ve,moduleName:"@ag-grid-community/render-api",apiFunctions:{setGridAriaProperty:Xre,refreshCells:Zre,flashCells:eoe,refreshHeader:toe,isAnimationFrameQueueEmpty:noe,flushAllAnimationFrames:ioe,getSizesForCurrentTheme:soe,getCellRendererInstances:roe}};function aoe(e){e.valueCache.expire()}function loe(e,t,n){return PG(e,{colKey:t,rowNode:n})}function PG(e,t){let{colKey:n,rowNode:i,useFormatter:s}=t,r=e.columnModel.getColDefCol(n)??e.columnModel.getCol(n);if(Pe(r))return null;let o=e.valueService.getValue(r,i);return s?e.valueService.formatValue(r,i,o)??rr(o,!0):o}function coe(e){return e.context.getGridId()}function uoe(e){e.gridDestroyService.destroy()}function doe(e){return e.gridDestroyService.isDestroyCalled()}function hoe(e,t){return e.gos.get(t)}function foe(e,t,n){FG(e,{[t]:n})}function FG(e,t){e.gos.updateGridOptions({options:t})}function poe(e,t,n){e.apiEventService.addEventListener(t,n)}function goe(e,t,n){e.apiEventService.removeEventListener(t,n)}function moe(e,t){e.apiEventService.addGlobalListener(t)}function voe(e,t){e.apiEventService.removeGlobalListener(t)}function Coe(e){return e.focusService.getFocusedCell()}function yoe(e){return e.focusService.clearFocusedCell()}function woe(e,t,n,i){e.focusService.setFocusedCell({rowIndex:t,column:n,rowPinned:i,forceBrowserFocus:!0})}function Soe(e,t){return e.navigationService.tabToNextCell(!1,t)}function _oe(e,t){return e.navigationService.tabToNextCell(!0,t)}function boe(e,t,n=!1){let i=e.headerNavigationService.getHeaderPositionForColumn(t,n);i&&e.focusService.focusHeaderPosition({headerPosition:i})}function Eoe(e,t,n){let i=e.columnModel.getCol(t);e.menuService.showColumnMenu({column:i,buttonElement:n,positionBy:"button"})}function Doe(e,t,n){let i=e.columnModel.getCol(t);if(i||(i=e.columnModel.getColDefCol(t)),!i){ke(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:i,mouseEvent:n,positionBy:"mouse"})}function Roe(e,t){let n=e.columnModel.getCol(t);if(!n){ke(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:n,positionBy:"auto"})}function Toe(e){e.menuService.hidePopupMenu()}function Ioe(e,t={}){let n=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(n))}function Aoe(e,t,n,i,s){e.expansionService.setRowNodeExpanded(t,n,i,s)}function Moe(e,t){return e.rowModel.getRowNode(t)}function Poe(e,t,n,i){e.rowRenderer.addRenderedRowListener(t,n,i)}function Foe(e){return e.rowRenderer.getRenderedNodes()}function xoe(e,t,n){e.rowModel.forEachNode(t,n)}function Ooe(e){return xG(e)}function xG(e){return e.rowRenderer.getFirstVirtualRenderedRow()}function Noe(e){return OG(e)}function OG(e){return e.rowRenderer.getLastVirtualRenderedRow()}function koe(e,t){return e.rowModel.getRow(t)}function Loe(e){return e.rowModel.getRowCount()}function Voe(e){return e.rowModel}function Boe(e,t){if(!t.nodes.every(a=>a.rowPinned?(G("cannot select pinned rows"),!1):a.id===void 0?(G("cannot select node until id for node is known"),!1):!0))return;let{nodes:i,source:s,newValue:r}=t,o=i;e.selectionService.setNodesSelected({nodes:o,source:s??"api",newValue:r})}function Goe(e,t="apiSelectAll"){e.selectionService.selectAllRowNodes({source:t})}function Hoe(e,t="apiSelectAll"){e.selectionService.deselectAllRowNodes({source:t})}function Uoe(e,t="apiSelectAllFiltered"){e.selectionService.selectAllRowNodes({source:t,justFiltered:!0})}function Woe(e,t="apiSelectAllFiltered"){e.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})}function joe(e,t="apiSelectAllCurrentPage"){e.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})}function zoe(e,t="apiSelectAllCurrentPage"){e.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})}function $oe(e){return e.selectionService.getSelectedNodes()}function qoe(e){return e.selectionService.getSelectedRows()}function Koe(e){e.sortController.onSortChanged("api")}var Qoe={version:ve,moduleName:"@ag-grid-community/core-api",apiFunctions:{getGridId:coe,destroy:uoe,isDestroyed:doe,getGridOption:hoe,setGridOption:foe,updateGridOptions:FG}},Yoe={version:ve,moduleName:"@ag-grid-community/row-selection-api",apiFunctions:{setNodesSelected:Boe,selectAll:Goe,deselectAll:Hoe,selectAllFiltered:Uoe,deselectAllFiltered:Woe,selectAllOnCurrentPage:joe,deselectAllOnCurrentPage:zoe,getSelectedNodes:$oe,getSelectedRows:qoe}},Joe={version:ve,moduleName:"@ag-grid-community/row-api",apiFunctions:{redrawRows:Ioe,setRowNodeExpanded:Aoe,getRowNode:Moe,addRenderedRowListener:Poe,getRenderedNodes:Foe,forEachNode:xoe,getFirstDisplayedRow:Ooe,getFirstDisplayedRowIndex:xG,getLastDisplayedRow:Noe,getLastDisplayedRowIndex:OG,getDisplayedRowAtIndex:koe,getDisplayedRowCount:Loe,getModel:Voe}},Xoe={version:ve,moduleName:"@ag-grid-community/scroll-api",apiFunctions:{getVerticalPixelRange:Nie,getHorizontalPixelRange:kie,ensureColumnVisible:TG,ensureIndexVisible:IG,ensureNodeVisible:Lie}},Zoe={version:ve,moduleName:"@ag-grid-community/keyboard-navigation-api",apiFunctions:{getFocusedCell:Coe,clearFocusedCell:yoe,setFocusedCell:woe,setFocusedHeader:boe,tabToNextCell:Soe,tabToPreviousCell:_oe}},eae={version:ve,moduleName:"@ag-grid-community/event-api",apiFunctions:{addEventListener:poe,addGlobalListener:moe,removeEventListener:goe,removeGlobalListener:voe}},tae={version:ve,moduleName:"@ag-grid-community/cell-api",apiFunctions:{expireValueCache:aoe,getValue:loe,getCellValue:PG}},nae={version:ve,moduleName:"@ag-grid-community/menu-api",apiFunctions:{showColumnMenuAfterButtonClick:Eoe,showColumnMenuAfterMouseClick:Doe,showColumnMenu:Roe,hidePopupMenu:Toe}},iae={version:ve,moduleName:"@ag-grid-community/sort-api",apiFunctions:{onSortChanged:Koe}},sae={version:ve,moduleName:"@ag-grid-community/api",dependantModules:[Qoe,qre,Yoe,Vre,Joe,Ure,Xoe,Jre,Zoe,eae,ooe,tae,nae,iae]};function rae(e){return e.stateService?.getState()??{}}var oae=class extends k{constructor(){super(...arguments),this.beanName="stateService",this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=Xn(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=Xn(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=Xn(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}wireBeans(e){this.filterManager=e.filterManager,this.ctrlsService=e.ctrlsService,this.pivotResultColsService=e.pivotResultColsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnGroupStateService=e.columnGroupStateService,this.columnGetStateService=e.columnGetStateService,this.paginationService=e.paginationService,this.rowModel=e.rowModel,this.selectionService=e.selectionService,this.expansionService=e.expansionService,this.columnAnimationService=e.columnAnimationService,this.columnApplyStateService=e.columnApplyStateService,this.sideBarService=e.sideBarService,this.rangeService=e.rangeService}postConstruct(){this.isClientSideRowModel=this.rowModel.getType()==="clientSide",this.cachedState=this.gos.get("initialState")??{},this.ctrlsService.whenReady(()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));let[e,t,n]=this.addManagedEventListeners({newColumnsLoaded:({source:i})=>{i==="gridInitializing"&&(e(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))},rowCountReady:()=>{t?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())},firstDataRendered:()=>{n?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())}})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState());let e=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:e,sideBarUpdated:e})}setupStateOnColumnsInitialised(){let e=this.gos.get("initialState")??{};this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState()),this.addManagedEventListeners({columnValueChanged:()=>this.updateColumnState(["aggregation"]),columnMoved:()=>this.updateColumnState(["columnOrder"]),columnPinned:()=>this.updateColumnState(["columnPinning"]),columnResized:()=>this.updateColumnState(["columnSizing"]),columnVisible:()=>this.updateColumnState(["columnVisibility"]),columnPivotChanged:()=>this.updateColumnState(["pivot"]),columnPivotModeChanged:()=>this.updateColumnState(["pivot"]),columnRowGroupChanged:()=>this.updateColumnState(["rowGroup"]),sortChanged:()=>this.updateColumnState(["sort"]),newColumnsLoaded:()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setupStateOnRowCountReady(){let{filter:e,rowGroupExpansion:t,rowSelection:n,pagination:i}=this.gos.get("initialState")??{},s=this.gos.get("advancedFilterModel");(e||s)&&this.setFilterState(e,s),t&&this.setRowGroupExpansionState(t),n&&this.setRowSelectionState(n),i&&this.setPaginationState(i),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState()),this.addManagedEventListeners({filterChanged:()=>this.updateCachedState("filter",this.getFilterState()),rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:r=>{(r.newPage||r.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())}})}setupStateOnFirstDataRendered(){let{scroll:e,rangeSelection:t,focusedCell:n,columnOrder:i}=this.gos.get("initialState")??{};n&&this.setFocusedCellState(n),t&&this.setRangeSelectionState(t),e&&this.setScrollState(e),this.setColumnPivotState(!!i?.orderedColIds),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState()),this.updateCachedState("rangeSelection",this.getRangeSelectionState()),this.updateCachedState("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:()=>this.updateCachedState("focusedCell",this.getFocusedCellState()),rangeSelectionChanged:s=>{s.finished&&this.updateCachedState("rangeSelection",this.getRangeSelectionState())},bodyScrollEnd:()=>this.updateCachedState("scroll",this.getScrollState())})}getColumnState(){let e=this.columnModel.isPivotMode(),t=[],n=[],i=[],s=[],r=[],o=[],a=[],l=[],c=[],u=this.columnGetStateService.getColumnState();for(let h=0;h<u.length;h++){let{colId:f,sort:g,sortIndex:v,rowGroup:y,rowGroupIndex:C,aggFunc:E,pivot:I,pivotIndex:T,pinned:x,hide:z,width:V,flex:b}=u[h];c.push(f),g&&(t[v??0]={colId:f,sort:g}),y&&(n[C??0]=f),typeof E=="string"&&i.push({colId:f,aggFunc:E}),I&&(s[T??0]=f),x&&(x==="right"?o:r).push(f),z&&a.push(f),(b||V)&&l.push({colId:f,flex:b??void 0,width:V})}return{sort:t.length?{sortModel:t}:void 0,rowGroup:n.length?{groupColIds:n}:void 0,aggregation:i.length?{aggregationModel:i}:void 0,pivot:s.length||e?{pivotMode:e,pivotColIds:s}:void 0,columnPinning:r.length||o.length?{leftColIds:r,rightColIds:o}:void 0,columnVisibility:a.length?{hiddenColIds:a}:void 0,columnSizing:l.length?{columnSizingModel:l}:void 0,columnOrder:c.length?{orderedColIds:c}:void 0}}setColumnState(e){let{sort:t,rowGroup:n,aggregation:i,pivot:s,columnPinning:r,columnVisibility:o,columnSizing:a,columnOrder:l}=e,c={},u=v=>{let y=c[v];return y||(y={colId:v},c[v]=y,y)};t&&t.sortModel.forEach(({colId:v,sort:y},C)=>{let E=u(v);E.sort=y,E.sortIndex=C}),n&&n.groupColIds.forEach((v,y)=>{let C=u(v);C.rowGroup=!0,C.rowGroupIndex=y}),i&&i.aggregationModel.forEach(({colId:v,aggFunc:y})=>{u(v).aggFunc=y}),s&&(s.pivotColIds.forEach((v,y)=>{let C=u(v);C.pivot=!0,C.pivotIndex=y}),this.gos.updateGridOptions({options:{pivotMode:s.pivotMode},source:"gridInitializing"})),r&&(r.leftColIds.forEach(v=>{u(v).pinned="left"}),r.rightColIds.forEach(v=>{u(v).pinned="right"})),o&&o.hiddenColIds.forEach(v=>{u(v).hide=!0}),a&&a.columnSizingModel.forEach(({colId:v,flex:y,width:C})=>{let E=u(v);E.flex=y??null,E.width=C});let h=l?.orderedColIds,f=!!h?.length,g=f?h.map(v=>u(v)):Object.values(c);if(g.length){this.columnStates=g;let v={sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};this.columnApplyStateService.applyColumnState({state:g,applyOrder:f,defaultState:v},"gridInitializing")}}setColumnPivotState(e){let t=this.columnStates;this.columnStates=void 0;let n=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.pivotResultColsService.isPivotResultColsPresent()){if(t){let i=[];for(let s of t)this.pivotResultColsService.getPivotResultCol(s.colId)&&i.push(s);this.columnApplyStateService.applyColumnState({state:i,applyOrder:e},"gridInitializing")}n&&this.columnGroupStateService.setColumnGroupState(n,"gridInitializing")}}getColumnGroupState(){let e=this.columnGroupStateService.getColumnGroupState(),t=[];return e.forEach(({groupId:n,open:i})=>{i&&t.push(n)}),t.length?{openColumnGroupIds:t}:void 0}setColumnGroupState(e){if(!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;let t=new Set(e.columnGroup?.openColumnGroupIds),i=this.columnGroupStateService.getColumnGroupState().map(({groupId:s})=>{let r=t.has(s);return r&&t.delete(s),{groupId:s,open:r}});t.forEach(s=>{i.push({groupId:s,open:!0})}),i.length&&(this.columnGroupStates=i),this.columnGroupStateService.setColumnGroupState(i,"gridInitializing")}getFilterState(){let e=this.filterManager?.getFilterModel();e&&Object.keys(e).length===0&&(e=void 0);let t=this.filterManager?.getAdvancedFilterModel()??void 0;return e||t?{filterModel:e,advancedFilterModel:t}:void 0}setFilterState(e,t){let{filterModel:n,advancedFilterModel:i}=e??{advancedFilterModel:t};n&&this.filterManager?.setFilterModel(n,"columnFilter"),i&&this.filterManager?.setAdvancedFilterModel(i)}getRangeSelectionState(){let e=this.rangeService?.getCellRanges().map(t=>{let{id:n,type:i,startRow:s,endRow:r,columns:o,startColumn:a}=t;return{id:n,type:i,startRow:s,endRow:r,colIds:o.map(l=>l.getColId()),startColId:a.getColId()}});return e?.length?{cellRanges:e}:void 0}setRangeSelectionState(e){if(!this.gos.get("enableRangeSelection")||!this.rangeService)return;let t=[];e.cellRanges.forEach(n=>{let i=[];if(n.colIds.forEach(r=>{let o=this.columnModel.getCol(r);o&&i.push(o)}),!i.length)return;let s=this.columnModel.getCol(n.startColId);if(!s){let r=this.visibleColsService.getAllCols(),o=new Set(i);s=r.find(a=>o.has(a))}t.push(se(B({},n),{columns:i,startColumn:s}))}),this.rangeService.setCellRanges(t)}getScrollState(){if(!this.isClientSideRowModel)return;let e=this.ctrlsService.getGridBodyCtrl()?.getScrollFeature(),{left:t}=e?.getHScrollPosition()??{left:0},{top:n}=e?.getVScrollPosition()??{top:0};return n||t?{top:n,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;let{top:t,left:n}=e;this.ctrlsService.getGridBodyCtrl()?.getScrollFeature().setScrollPosition(t,n)}getSideBarState(){return this.sideBarService?.getSideBarComp()?.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;let e=this.focusService.getFocusedCell();if(e){let{column:t,rowIndex:n,rowPinned:i}=e;return{colId:t.getColId(),rowIndex:n,rowPinned:i}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;let{colId:t,rowIndex:n,rowPinned:i}=e;this.focusService.setFocusedCell({column:this.columnModel.getCol(t),rowIndex:n,rowPinned:i,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){if(!this.paginationService)return;let e=this.paginationService.getCurrentPage(),t=this.gos.get("paginationAutoPageSize")?void 0:this.paginationService.getPageSize();if(!(!e&&!t))return{page:e,pageSize:t}}setPaginationState(e){this.paginationService&&(e.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationService.setPageSize(e.pageSize,"initialState"),typeof e.page=="number"&&this.paginationService.setPage(e.page))}getRowSelectionState(){let e=this.selectionService.getSelectionState();return!e||!Array.isArray(e)&&(e.selectAll===!1||e.selectAllChildren===!1)&&!e?.toggledNodes?.length?void 0:e}setRowSelectionState(e){this.selectionService.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){let e=this.expansionService.getExpandedRows();return e.length?{expandedRowGroupIds:e}:void 0}setRowGroupExpansionState(e){this.expansionService.expandRows(e.expandedRowGroupIds)}updateColumnState(e){let t=this.getColumnState(),n=!1;Object.entries(t).forEach(([i,s])=>{wC(s,this.cachedState[i])||(n=!0)}),this.cachedState=B(B({},this.cachedState),t),n&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){let n=this.cachedState[e];this.setCachedStateValue(e,t),wC(t,n)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState=se(B({},this.cachedState),{[e]:t})}refreshStaleState(){this.staleStateKeys.forEach(e=>{switch(e){case"rowSelection":this.setCachedStateValue(e,this.getRowSelectionState());break}}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach(t=>this.queuedUpdateSources.add(t)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){let e=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear();let t={type:"stateUpdated",sources:e,state:this.cachedState};this.eventService.dispatchEvent(t)}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),e(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}},NG={version:ve,moduleName:"@ag-grid-community/state-core",beans:[oae]},aae={version:ve,moduleName:"@ag-grid-community/state-api",apiFunctions:{getState:rae},dependantModules:[NG]},lae={version:ve,moduleName:"@ag-grid-community/state",dependantModules:[NG,aae]};function cae(e){return e.rowModel.isLastRowIndexKnown()}function uae(e){return e.paginationService?.getPageSize()??100}function dae(e){return e.paginationService?.getCurrentPage()??0}function hae(e){return e.paginationService?.getTotalPages()??1}function fae(e){return e.paginationService?e.paginationService.getMasterRowCount():e.rowModel.getRowCount()}function pae(e){e.paginationService?.goToNextPage()}function gae(e){e.paginationService?.goToPreviousPage()}function mae(e){e.paginationService?.goToFirstPage()}function vae(e){e.paginationService?.goToLastPage()}function Cae(e,t){e.paginationService?.goToPage(t)}var yae=class extends k{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}postConstruct(){this.ctrlsService.whenReady(e=>{this.centerRowsCtrl=e.center;let t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.paginationService.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;let e=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(e>0){let t=()=>{let n=Math.max(this.gos.getRowHeightAsNumber(),1),i=Math.floor(e/n);this.paginationService.setPageSize(i,"autoCalculated")};this.isBodyRendered?Xn(()=>t(),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};function wae(e,t,n){e.addManagedElementListeners(t,{keydown:i=>{if(!i.defaultPrevented&&i.key===N.TAB){let s=i.shiftKey;n.findNextFocusableElement(t,!1,s)||n.focusNextGridCoreContainer(s)&&i.preventDefault()}}})}var Sae=class extends Ve{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;let e=this.selectPageSizeComp.getValue();if(!e)return;let t=Number(e);isNaN(t)||t<1||t===this.paginationService.getPageSize()||(this.paginationService.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.paginationService=e.paginationService}postConstruct(){this.addManagedPropertyListener("paginationPageSizeSelector",()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!e?.newPageSize)return;let t=this.paginationService.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp&&this.appendChild(this.selectPageSizeComp))}reset(){xn(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get("paginationPageSizeSelector")!==!1}reloadPageSizesSelector(){let e=this.getPageSizeSelectorValues(),t=this.paginationService.getPageSize(),n=!t||!e.includes(t);n&&(e.unshift(""),G(`The paginationPageSize grid option is set to a value that is not in the list of page size options.
                Please make sure that the paginationPageSize grid option is set to one of the values in the 
                paginationPageSizeSelector array, or set the paginationPageSizeSelector to false to hide the page size selector.`)),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp));let i=this.localeService.getLocaleTextFunc(),s=i("pageSizeSelectorLabel","Page Size:"),r=e.map(a=>({value:String(a),text:String(a)})),o=i("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new AR).addOptions(r).setValue(String(n?"":t)).setAriaLabel(o).setLabel(s).onValueChange(()=>this.handlePageSizeItemSelected()),this.hasEmptyOption=n}getPageSizeSelectorValues(){let e=[20,50,100],t=this.gos.get("paginationPageSizeSelector");return!Array.isArray(t)||!this.validateValues(t)?e:[...t].sort((n,i)=>n-i)}validateValues(e){if(!e.length)return G(`The paginationPageSizeSelector grid option is an empty array. This is most likely a mistake.
                If you want to hide the page size selector, please set the paginationPageSizeSelector to false.`),!1;for(let t=0;t<e.length;t++){let n=e[t],i=typeof n=="number",s=n>0;if(!i)return G(`The paginationPageSizeSelector grid option contains a non-numeric value.
                    Please make sure that all values in the paginationPageSizeSelector array are numbers.`),!1;if(!s)return G(`The paginationPageSizeSelector grid option contains a negative number or zero.
                    Please make sure that all values in the paginationPageSizeSelector array are positive.`),!1}return!0}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},_ae={selector:"AG-PAGE-SIZE-SELECTOR",component:Sae},bae=class extends MG{constructor(){super(),this.btFirst=Z,this.btPrevious=Z,this.btNext=Z,this.btLast=Z,this.lbRecordCount=Z,this.lbFirstRowOnPage=Z,this.lbLastRowOnPage=Z,this.lbCurrent=Z,this.lbTotal=Z,this.pageSizeComp=Z,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1}wireBeans(e){this.rowNodeBlockLoader=e.rowNodeBlockLoader,this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.focusService=e.focusService}postConstruct(){let e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[_ae]);let{btFirst:t,btPrevious:n,btNext:i,btLast:s}=this;this.activateTabIndex([t,n,i,s]),t.insertAdjacentElement("afterbegin",Ai(e?"last":"first",this.gos)),n.insertAdjacentElement("afterbegin",Ai(e?"next":"previous",this.gos)),i.insertAdjacentElement("afterbegin",Ai(e?"previous":"next",this.gos)),s.insertAdjacentElement("afterbegin",Ai(e?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:r=>{this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(r):this.focusService.focusGridInnerElement(r)},forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){let t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{let{el:t,fn:n}=e;this.addManagedListeners(t,{click:n,keydown:i=>{(i.key===N.ENTER||i.key===N.SPACE)&&(i.preventDefault(),n())}})}),wae(this,this.getGui(),this.focusService),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationService.goToFirstPage()}setCurrentPageLabel(){let e=this.paginationService.getTotalPages()>0,t=this.paginationService.getCurrentPage(),n=e?t+1:0;this.lbCurrent.textContent=this.formatNumber(n)}formatNumber(e){let t=this.gos.getCallback("paginationNumberFormatter");if(t)return t({value:e});let n=this.localeService.getLocaleTextFunc(),i=n("thousandSeparator",","),s=n("decimalSeparator",".");return $ee(e,i,s)}getTemplate(){let e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),n=e("to","to"),i=e("of","of"),s=e("firstPage","First Page"),r=e("previousPage","Previous Page"),o=e("nextPage","Next Page"),a=e("lastPage","Last Page"),l=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${l}">
                <ag-page-size-selector data-ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel" role="status">
                    <span id="ag-${l}-first-row" data-ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-to">${n}</span>
                    <span id="ag-${l}-last-row" data-ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-of">${i}</span>
                    <span id="ag-${l}-row-count" data-ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div data-ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${s}"></div>
                    <div data-ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${r}"></div>
                    <span class="ag-paging-description" role="status">
                        <span id="ag-${l}-start-page">${t}</span>
                        <span id="ag-${l}-start-page-number" data-ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${l}-of-page">${i}</span>
                        <span id="ag-${l}-of-page-number" data-ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div data-ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>
                    <div data-ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationService.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationService.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationService.goToLastPage()}enableOrDisableButtons(){let e=this.paginationService.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),n=this.paginationService.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);let i=this.isZeroPagesToDisplay(),s=e===n-1;this.nextButtonDisabled=s||i,this.lastButtonDisabled=!t||i||e===n-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){lZ(e,t),e.classList.toggle("ag-disabled",t)}updateRowLabels(){let e=this.paginationService.getCurrentPage(),t=this.paginationService.getPageSize(),n=this.rowModel.isLastRowIndexKnown(),i=this.rowModel.isLastRowIndexKnown()?this.paginationService.getMasterRowCount():null,s,r;if(this.isZeroPagesToDisplay()?s=r=0:(s=t*e+1,r=s+t-1,n&&r>i&&(r=i)),this.lbFirstRowOnPage.textContent=this.formatNumber(s),this.rowNodeBlockLoader?.isLoading()){let o=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=o("pageLastRowUnknown","?")}else this.lbLastRowOnPage.textContent=this.formatNumber(r)}isZeroPagesToDisplay(){let e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages();return e&&t===0}setTotalLabels(){let e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages(),n=e?this.paginationService.getMasterRowCount():null;if(n===1){let i=this.rowModel.getRow(0);if(i&&i.group&&!(i.groupData||i.aggData)){this.setTotalLabelsToZero();return}}if(e)this.lbTotal.textContent=this.formatNumber(t),this.lbRecordCount.textContent=this.formatNumber(n);else{let i=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=i,this.lbRecordCount.innerHTML=i}}setTotalLabelsToZero(){this.lbFirstRowOnPage.textContent=this.formatNumber(0),this.lbCurrent.textContent=this.formatNumber(0),this.lbLastRowOnPage.textContent=this.formatNumber(0),this.lbTotal.textContent=this.formatNumber(0),this.lbRecordCount.textContent=this.formatNumber(0)}},Eae={selector:"AG-PAGINATION",component:bae},Dae=class extends k{constructor(){super(...arguments),this.beanName="paginationService",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return Eae}isPaginateChildRows(){return this.gos.get("groupRemoveSingleChildren")||this.gos.get("groupRemoveLowestSingleChildren")?!0:this.gos.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){!this.active||this.currentPage===e||typeof this.currentPage!="number"||(this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}isRowPresent(e){return e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;let t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){return this.active?this.getPageForIndex(e.rowIndex)===this.currentPage:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){let e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return j(this.pageSizeAutoCalculated)?this.pageSizeAutoCalculated:j(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:j(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:j(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.pageBoundsService.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;let e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){let n=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}n!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}let e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();let t=this.pageSize*this.currentPage,n=this.pageSize*(this.currentPage+1)-1;if(n>e&&(n=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),n===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{let i=this.rowModel.getTopLevelRowDisplayedIndex(n+1);this.bottomDisplayedRowIndex=i-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}let e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){let{keepRenderedRows:t=!1,newPage:n=!1,newPageSize:i=!1}=e,s={type:"paginationChanged",animate:!1,newData:!1,newPage:n,newPageSize:i,keepRenderedRows:t};this.eventService.dispatchEvent(s)}},kG={version:ve,moduleName:"@ag-grid-community/pagination-core",beans:[Dae,yae]},Rae={version:ve,moduleName:"@ag-grid-community/pagination-api",dependantModules:[kG],apiFunctions:{paginationIsLastPageFound:cae,paginationGetPageSize:uae,paginationGetCurrentPage:dae,paginationGetTotalPages:hae,paginationGetRowCount:fae,paginationGoToNextPage:pae,paginationGoToPreviousPage:gae,paginationGoToFirstPage:mae,paginationGoToLastPage:vae,paginationGoToPage:Cae}},Tae={version:ve,moduleName:"@ag-grid-community/pagination",dependantModules:[kG,Rae]},O="@ag-grid-community/core",ir="@ag-grid-community/client-side-row-model",KV="@ag-grid-community/csv-export",hC="@ag-grid-community/infinite-row-model",fC="@ag-grid-enterprise/advanced-filter",Ss="@ag-grid-enterprise/charts",yu="@ag-grid-enterprise/clipboard",af="@ag-grid-enterprise/excel-export",pC="@ag-grid-enterprise/master-detail",$D="@ag-grid-enterprise/menu",qD="@ag-grid-enterprise/range-selection",lt="@ag-grid-enterprise/row-grouping",Ur="@ag-grid-enterprise/server-side-row-model",sr="@ag-grid-enterprise/side-bar",Iae="@ag-grid-enterprise/status-bar",Aae={dispatchEvent:O,getState:O,getGridId:O,destroy:O,isDestroyed:O,getGridOption:O,setGridOption:O,updateGridOptions:O,setNodesSelected:O,selectAll:O,deselectAll:O,selectAllFiltered:O,deselectAllFiltered:O,selectAllOnCurrentPage:O,deselectAllOnCurrentPage:O,getSelectedNodes:O,getSelectedRows:O,redrawRows:O,setRowNodeExpanded:O,getRowNode:O,addRenderedRowListener:O,getRenderedNodes:O,forEachNode:O,getFirstDisplayedRow:O,getFirstDisplayedRowIndex:O,getLastDisplayedRow:O,getLastDisplayedRowIndex:O,getDisplayedRowAtIndex:O,getDisplayedRowCount:O,getModel:O,getVerticalPixelRange:O,getHorizontalPixelRange:O,ensureColumnVisible:O,ensureIndexVisible:O,ensureNodeVisible:O,getFocusedCell:O,clearFocusedCell:O,setFocusedCell:O,tabToNextCell:O,tabToPreviousCell:O,setFocusedHeader:O,addEventListener:O,addGlobalListener:O,removeEventListener:O,removeGlobalListener:O,expireValueCache:O,getValue:O,getCellValue:O,showColumnMenuAfterButtonClick:O,showColumnMenuAfterMouseClick:O,showColumnMenu:O,hidePopupMenu:O,onSortChanged:O,getPinnedTopRowCount:O,getPinnedBottomRowCount:O,getPinnedTopRow:O,getPinnedBottomRow:O,showLoadingOverlay:O,showNoRowsOverlay:O,hideOverlay:O,setGridAriaProperty:O,refreshCells:O,flashCells:O,refreshHeader:O,isAnimationFrameQueueEmpty:O,flushAllAnimationFrames:O,getSizesForCurrentTheme:O,getCellRendererInstances:O,addRowDropZone:O,removeRowDropZone:O,getRowDropZoneParams:O,getColumnDef:O,getColumnDefs:O,sizeColumnsToFit:O,setColumnGroupOpened:O,getColumnGroup:O,getProvidedColumnGroup:O,getDisplayNameForColumn:O,getDisplayNameForColumnGroup:O,getColumn:O,getColumns:O,applyColumnState:O,getColumnState:O,resetColumnState:O,getColumnGroupState:O,setColumnGroupState:O,resetColumnGroupState:O,isPinning:O,isPinningLeft:O,isPinningRight:O,getDisplayedColAfter:O,getDisplayedColBefore:O,setColumnVisible:O,setColumnsVisible:O,setColumnPinned:O,setColumnsPinned:O,getAllGridColumns:O,getDisplayedLeftColumns:O,getDisplayedCenterColumns:O,getDisplayedRightColumns:O,getAllDisplayedColumns:O,getAllDisplayedVirtualColumns:O,moveColumn:O,moveColumnByIndex:O,moveColumns:O,setColumnWidth:O,setColumnWidths:O,getLeftDisplayedColumnGroups:O,getCenterDisplayedColumnGroups:O,getRightDisplayedColumnGroups:O,getAllDisplayedColumnGroups:O,autoSizeColumn:O,autoSizeColumns:O,autoSizeAllColumns:O,undoCellEditing:O,redoCellEditing:O,getCellEditorInstances:O,getEditingCells:O,stopEditing:O,startEditingCell:O,getCurrentUndoSize:O,getCurrentRedoSize:O,isAnyFilterPresent:O,onFilterChanged:O,isColumnFilterPresent:O,getFilterInstance:O,getColumnFilterInstance:O,destroyFilter:O,setFilterModel:O,getFilterModel:O,getColumnFilterModel:O,setColumnFilterModel:O,showColumnFilter:O,isQuickFilterPresent:O,getQuickFilter:O,resetQuickFilter:O,paginationIsLastPageFound:O,paginationGetPageSize:O,paginationGetCurrentPage:O,paginationGetTotalPages:O,paginationGetRowCount:O,paginationGoToNextPage:O,paginationGoToPreviousPage:O,paginationGoToFirstPage:O,paginationGoToLastPage:O,paginationGoToPage:O,expandAll:O,collapseAll:O,onRowHeightChanged:O,setRowCount:O,getCacheBlockState:O,onGroupExpandedOrCollapsed:ir,refreshClientSideRowModel:ir,forEachLeafNode:ir,forEachNodeAfterFilter:ir,forEachNodeAfterFilterAndSort:ir,resetRowHeights:ir,applyTransaction:ir,applyTransactionAsync:ir,flushAsyncTransactions:ir,getBestCostNodeSelection:ir,getDataAsCsv:KV,exportDataAsCsv:KV,refreshInfiniteCache:hC,purgeInfiniteCache:hC,getInfiniteRowCount:hC,isLastRowIndexKnown:hC,getAdvancedFilterModel:fC,setAdvancedFilterModel:fC,showAdvancedFilterBuilder:fC,hideAdvancedFilterBuilder:fC,getChartModels:Ss,getChartRef:Ss,getChartImageDataURL:Ss,downloadChart:Ss,openChartToolPanel:Ss,closeChartToolPanel:Ss,createRangeChart:Ss,createPivotChart:Ss,createCrossFilterChart:Ss,updateChart:Ss,restoreChart:Ss,copyToClipboard:yu,cutToClipboard:yu,copySelectedRowsToClipboard:yu,copySelectedRangeToClipboard:yu,copySelectedRangeDown:yu,pasteFromClipboard:yu,getDataAsExcel:af,exportDataAsExcel:af,getSheetDataForExcel:af,getMultipleSheetsAsExcel:af,exportMultipleSheetsAsExcel:af,addDetailGridInfo:pC,removeDetailGridInfo:pC,getDetailGridInfo:pC,forEachDetailGridInfo:pC,showContextMenu:$D,showColumnChooser:$D,hideColumnChooser:$D,getCellRanges:qD,addCellRange:qD,clearRangeSelection:qD,addAggFunc:lt,addAggFuncs:lt,clearAggFuncs:lt,setColumnAggFunc:lt,isPivotMode:lt,getPivotResultColumn:lt,setValueColumns:lt,getValueColumns:lt,removeValueColumn:lt,removeValueColumns:lt,addValueColumn:lt,addValueColumns:lt,setRowGroupColumns:lt,removeRowGroupColumn:lt,removeRowGroupColumns:lt,addRowGroupColumn:lt,addRowGroupColumns:lt,getRowGroupColumns:lt,moveRowGroupColumn:lt,setPivotColumns:lt,removePivotColumn:lt,removePivotColumns:lt,addPivotColumn:lt,addPivotColumns:lt,getPivotColumns:lt,setPivotResultColumns:lt,getPivotResultColumns:lt,getServerSideSelectionState:Ur,setServerSideSelectionState:Ur,applyServerSideTransaction:Ur,applyServerSideTransactionAsync:Ur,applyServerSideRowData:Ur,retryServerSideLoads:Ur,flushServerSideAsyncTransactions:Ur,refreshServerSide:Ur,getServerSideGroupLevelState:Ur,isSideBarVisible:sr,setSideBarVisible:sr,setSideBarPosition:sr,openToolPanel:sr,closeToolPanel:sr,getOpenedToolPanel:sr,refreshToolPanel:sr,isToolPanelShowing:sr,getToolPanelInstance:sr,getSideBar:sr,getStatusPanel:Iae},Ri="clientSide",ri="serverSide",wu="infinite",Mae={onGroupExpandedOrCollapsed:[Ri],refreshClientSideRowModel:[Ri],forEachLeafNode:[Ri],forEachNodeAfterFilter:[Ri],forEachNodeAfterFilterAndSort:[Ri],resetRowHeights:[Ri],applyTransaction:[Ri],applyTransactionAsync:[Ri],flushAsyncTransactions:[Ri],getBestCostNodeSelection:[Ri],getServerSideSelectionState:[ri],setServerSideSelectionState:[ri],applyServerSideTransaction:[ri],applyServerSideTransactionAsync:[ri],applyServerSideRowData:[ri],retryServerSideLoads:[ri],flushServerSideAsyncTransactions:[ri],refreshServerSide:[ri],getServerSideGroupLevelState:[ri],refreshInfiniteCache:[wu],purgeInfiniteCache:[wu],getInfiniteRowCount:[wu],isLastRowIndexKnown:[wu],expandAll:[Ri,ri],collapseAll:[Ri,ri],onRowHeightChanged:[Ri,ri],setRowCount:[wu,ri],getCacheBlockState:[wu,ri]},Pae={getValue:{version:"v31.3",new:"getCellValue"},getFirstDisplayedRow:{version:"v31.1",new:"getFirstDisplayedRowIndex"},getLastDisplayedRow:{version:"v31.1",new:"getLastDisplayedRowIndex"},getModel:{version:"v31.1",message:"Please use the appropriate grid API methods instead."},setColumnVisible:{version:"v31.1",old:"setColumnVisible(key,visible)",new:"setColumnsVisible([key],visible)"},setColumnPinned:{version:"v31.1",old:"setColumnPinned(key,pinned)",new:"setColumnsPinned([key],pinned)"},moveColumn:{version:"v31.1",old:"moveColumn(key, toIndex)",new:"moveColumns([key], toIndex)"},setColumnWidth:{version:"v31.1",old:"setColumnWidth(col, width)",new:"setColumnWidths([{key: col, newWidth: width}])"},autoSizeColumn:{version:"v31.1",old:"autoSizeColumn(key, skipHeader)",new:"autoSizeColumns([key], skipHeader)"},addAggFunc:{version:"v31.1",old:"addAggFunc(key, func)",new:"addAggFuncs({ key: func })"},removeValueColumn:{version:"v31.1",old:"removeValueColumn(colKey)",new:"removeValueColumns([colKey])"},addValueColumn:{version:"v31.1",old:"addValueColumn(colKey)",new:"addValueColumns([colKey])"},removeRowGroupColumn:{version:"v31.1",old:"removeRowGroupColumn(colKey)",new:"removeRowGroupColumns([colKey])"},addRowGroupColumn:{version:"v31.1",old:"addRowGroupColumn(colKey)",new:"addRowGroupColumns([colKey])"},removePivotColumn:{version:"v31.1",old:"removePivotColumn(colKey)",new:"removePivotColumns([colKey])"},addPivotColumn:{version:"v31.1",old:"addPivotColumn(colKey)",new:"addPivotColumns([colKey])"},showColumnMenuAfterButtonClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere."},showColumnMenuAfterMouseClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere."},getFilterInstance:{version:"v31.1",message:"'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."},showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'}};function Fae(e,t){let n=Aae[e];n?Yn.__assertRegistered(n,`api.${e}`,t)&&G(`API function '${e}' not registered to module '${n}'`):ke(`Unknown API function: '${e}' on GridApi.`)}function xae(e,t,n){let i=Pae[e];if(i){let{version:r,new:o,old:a,message:l}=i,c=a??e;return(...u)=>{let h=o?`Please use ${o} instead. `:"";return G(`Since ${r} api.${c} is deprecated. ${h}${l??""}`),t.apply(t,u)}}let s=Mae[e];return s?(...r)=>{let o=n.rowModel.getType();if(!s.includes(o)){ke(`api.${e} can only be called when gridOptions.rowModelType is ${s.join(" or ")}`);return}return t.apply(t,r)}:t}var Oae={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"}},zo=(e,t)=>(t.rowModelType??"clientSide")==="clientSide"?{module:"@ag-grid-enterprise/row-grouping"}:null,Nae={enableRowGroup:zo,rowGroup:zo,rowGroupIndex:zo,enablePivot:zo,enableValue:zo,pivot:zo,pivotIndex:zo,aggFunc:zo,cellEditor:e=>e.cellEditor==="agRichSelect"||e.cellEditor==="agRichSelectCellEditor"?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:e=>{let t=["columnsMenuTab","generalMenuTab"];return e.menuTabs?.some(n=>t.includes(n))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],dependencies:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],dependencies:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],dependencies:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>Eu},kae={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0},Lae=Object.keys(kae),Eu={objectName:"colDef",allProperties:Lae,docsUrl:"column-properties/",deprecations:Oae,validations:Nae},Vae=()=>({advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."},suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."}}),Bae={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0},Gae=()=>({sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",dependencies:e=>{let t=e.rowModelType??"clientSide";switch(t){case"clientSide":{let n=`treeData requires 'getDataPath' in the ${t} row model.`;return e.getDataPath?null:n}case"serverSide":{let n=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${t} row model.`;return e.isServerSideGroup&&e.getServerSideGroupKey?null:n}}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],dependencies:e=>{switch(e.rowModelType??"clientSide"){case"clientSide":return null;case"serverSide":return e.suppressServerSideInfiniteScroll?"groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll":null}return null}},groupHideOpenParents:{supportedRowModels:["clientSide"],dependencies:{groupTotalRow:[void 0,"bottom"]}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},columnDefs:()=>Eu,defaultColDef:()=>Eu,defaultColGroupDef:()=>Eu,autoGroupColumnDef:()=>Eu}),Hae=()=>({objectName:"gridOptions",allProperties:[...gf.ALL_PROPERTIES,...mf.EVENT_CALLBACKS],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:Vae(),validations:Gae()}),Uae=class extends k{constructor(){super(...arguments),this.beanName="validationService"}wireBeans(e){this.beans=e,this.gridOptions=e.gridOptions}postConstruct(){this.processGridOptions(this.gridOptions)}processGridOptions(e){this.processOptions(e,Hae())}processColumnDefs(e){this.processOptions(e,Eu)}warnMissingApiFunction(e){Fae(e,this.gridId)}validateApiFunction(e,t){return xae(e,t,this.beans)}processOptions(e,t){let{validations:n,deprecations:i,allProperties:s,propertyExceptions:r,objectName:o,docsUrl:a}=t;s&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...r??[],...Object.keys(i)],s,o,a);let l=new Set;Object.keys(e).forEach(u=>{let h=i[u];if(h)if("renamed"in h){let{renamed:I,version:T}=h;l.add(`As of v${T}, ${String(u)} is deprecated. Please use ${String(I)} instead.`),e[I]=e[u]}else{let{message:I,version:T}=h;l.add(`As of v${T}, ${String(u)} is deprecated. ${I??""}`)}let f=e[u];if(f==null||f===!1)return;let g=n[u],v;if(g)if(typeof g=="function"){let I=g(e,this.gridOptions);if(!I)return;if("objectName"in I){let T=e[u];if(Array.isArray(T)){T.forEach(x=>{this.processOptions(x,I)});return}this.processOptions(e[u],I);return}v=I}else v=g;else return;let{module:y,dependencies:C,supportedRowModels:E}=v;if(E){let I=this.gridOptions.rowModelType??"clientSide";if(!E.includes(I)){l.add(`${String(u)} is not supported with the '${I}' row model.`);return}}if(y){let I=Array.isArray(y)?y:[y],T=!0;if(I.forEach(x=>{Yn.__assertRegistered(x,String(u),this.gridId)||(T=!1,l.add(`${String(u)} is only available when ${x} is loaded.`))}),!T)return}if(C){let I=this.checkForWarning(u,C,e);if(I){l.add(I);return}}}),l.size>0&&l.forEach(u=>{G(u)})}checkForWarning(e,t,n){if(typeof t=="function")return t(n,this.gridOptions);let s=Object.entries(t).find(([a,l])=>{let c=n[a];return!l.includes(c)});if(!s)return null;let[r,o]=s;return o.length>1?`'${String(e)}' requires '${r}' to be one of [${o.join(", ")}].`:`'${String(e)}' requires '${r}' to be ${o[0]}.`}checkProperties(e,t,n,i,s){let r=["__ob__","__v_skip","__metadata__"],o=QZ(Object.getOwnPropertyNames(e),[...r,...t,...n],n);if($i(o,(a,l)=>{let c=`invalid ${i} property '${a}' did you mean any of these: ${l.slice(0,8).join(", ")}.`;n.includes("context")&&(c+=`
If you are trying to annotate ${i} with application data, use the '${i}.context' property instead.`),G(c)}),Object.keys(o).length>0&&s){let a=this.getFrameworkOverrides().getDocLink(s);G(`to see all the valid ${i} properties please check: ${a}`)}}},Wae={version:ve,moduleName:"@ag-grid-community/core"},jae={version:ve,moduleName:"@ag-grid-community/core-validations",beans:[Uae]},LG={version:ve,moduleName:"@ag-grid-community/core-community-features",dependantModules:[Wae,jae,tse,Mte,lae,Lre,$se,Tae,sae]},zae=class extends k{constructor(){super(...arguments),this.beanName="gridDestroyService",this.destroyCalled=!1}wireBeans(e){this.beans=e}destroy(){if(this.destroyCalled)return;let e={type:"gridPreDestroyed",state:this.beans.stateService?.getState()??{}};this.eventService.dispatchEvent(e),this.destroyCalled=!0,this.beans.ctrlsService.get("gridCtrl")?.destroyGridUi(),this.beans.context.destroy(),super.destroy()}isDestroyCalled(){return this.destroyCalled}},CC=new Set(["gridPreDestroyed","fillStart","pasteStart"]),$ae=e=>e==="checkboxSelected"||e==="rowClicked"||e==="spaceKey"||e==="uiSelectAll"||e==="uiSelectAllCurrentPage"||e==="uiSelectAllFiltered",qae=new Map([...gf.BOOLEAN_PROPERTIES.map(e=>[e,XD]),...gf.NUMBER_PROPERTIES.map(e=>[e,tG]),["groupAggFiltering",e=>typeof e=="function"?e:XD(e)],["pageSize",nr(1)],["autoSizePadding",nr(0)],["keepDetailRowsCount",nr(1)],["rowBuffer",nr(0)],["infiniteInitialRowCount",nr(1)],["cacheOverflowSize",nr(1)],["cacheBlockSize",nr(1)],["serverSideInitialRowCount",nr(1)],["viewportRowModelPageSize",nr(1)],["viewportRowModelBufferSize",nr(0)]]);function VG(e,t){let n=qae.get(e);return n?n(t):t}function Kae(e){let t={};return Object.entries(e).forEach(([n,i])=>{let s=VG(n,i);t[n]=s}),t}var BG=class GG extends k{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new Mu,this.globalEventHandlerFactory=t=>(n,i)=>{if(!this.isAlive())return;let s=CC.has(n);if(s&&!t||!s&&t)return;let r=mf.getCallbackForEvent(n),o=this.gridOptions[r];typeof o=="function"&&this.frameworkOverrides.wrapOutgoing(()=>{o(i)})}}wireBeans(t){this.gridOptions=t.gridOptions,this.eGridDiv=t.eGridDiv,this.validationService=t.validationService,this.environment=t.environment,this.api=t.gridApi}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){let t=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),t),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.getScrollbarWidth(),this.addManagedEventListeners({gridOptionsChanged:({options:n})=>{this.updateGridOptions({options:n,force:!0,source:"gridOptionsUpdated"})}})}get(t){return this.gridOptions[t]??Bae[t]}getCallback(t){return this.mergeGridCommonParams(this.gridOptions[t])}exists(t){return j(this.gridOptions[t])}mergeGridCommonParams(t){return t&&(i=>{let s=i;return s.api=this.api,s.context=this.gridOptionsContext,t(s)})}updateGridOptions({options:t,force:n,source:i="api"}){let s={id:GG.changeSetId++,properties:[]},r=[];Object.entries(t).forEach(([o,a])=>{i==="api"&&nZ[o]&&G(`${o} is an initial property and cannot be updated.`);let l=VG(o,a),c=n||typeof l=="object"&&i==="api",u=this.gridOptions[o];if(c||u!==l){this.gridOptions[o]=l;let h={type:o,currentValue:l,previousValue:u,changeSet:s,source:i};r.push(h)}}),this.validationService?.processGridOptions(this.gridOptions),s.properties=r.map(o=>o.type),r.forEach(o=>{this.gridOptions.debug&&Ki(`Updated property ${o.type} from`,o.previousValue," to ",o.currentValue),this.propertyEventService.dispatchEvent(o)})}addPropertyEventListener(t,n){this.propertyEventService.addEventListener(t,n)}removePropertyEventListener(t,n){this.propertyEventService.removeEventListener(t,n)}getScrollbarWidth(){if(this.scrollbarWidth==null){let n=typeof this.gridOptions.scrollbarWidth=="number"&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:SZ();n!=null&&(this.scrollbarWidth=n,this.eventService.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}isRowModelType(t){return this.gridOptions.rowModelType===t||t==="clientSide"&&Pe(this.gridOptions.rowModelType)}isDomLayout(t){return(this.gridOptions.domLayout??"normal")===t}isRowSelection(){return this.gridOptions.rowSelection==="single"||this.gridOptions.rowSelection==="multiple"}useAsyncEvents(){return!this.get("suppressAsyncEvents")}isGetRowHeightFunction(){return typeof this.gridOptions.getRowHeight=="function"}getRowHeightForNode(t,n=!1,i){if(i==null&&(i=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(n)return{height:i,estimated:!0};let r={node:t,data:t.data},o=this.getCallback("getRowHeight")(r);if(this.isNumeric(o))return o===0&&G("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,o),estimated:!1}}return t.detail&&this.get("masterDetail")?this.getMasterDetailRowHeight():{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:i,estimated:!1}}getMasterDetailRowHeight(){return this.get("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}}getRowHeightAsNumber(){if(!this.gridOptions.rowHeight||Pe(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();let t=this.environment.refreshRowHeightVariable();return t!==-1?t:(G("row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())}isNumeric(t){return!isNaN(t)&&typeof t=="number"&&isFinite(t)}getDomDataKey(){return this.domDataKey}getDomData(t,n){let i=t[this.getDomDataKey()];return i?i[n]:void 0}setDomData(t,n,i){let s=this.getDomDataKey(),r=t[s];Pe(r)&&(r={},t[s]=r),r[n]=i}getDocument(){let t=null;return this.gridOptions.getDocument&&j(this.gridOptions.getDocument)?t=this.gridOptions.getDocument():this.eGridDiv&&(t=this.eGridDiv.ownerDocument),t&&j(t)?t:document}getWindow(){return this.getDocument().defaultView||window}getRootNode(){return this.eGridDiv.getRootNode()}getActiveDomElement(){return this.getRootNode().activeElement}getAsyncTransactionWaitMillis(){return j(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50}isAnimateRows(){return this.get("ensureDomOrder")?!1:this.get("animateRows")}isGroupRowsSticky(){return!(this.get("paginateChildRows")||this.get("groupHideOpenParents")||this.isDomLayout("print"))}isColumnsSortingCoupledToGroup(){return!this.gridOptions.autoGroupColumnDef?.comparator&&!this.get("treeData")}getGroupAggFiltering(){let t=this.gridOptions.groupAggFiltering;if(typeof t=="function")return this.getCallback("groupAggFiltering");if(t===!0)return()=>!0}getGrandTotalRow(){let t=this.gridOptions.grandTotalRow;if(t)return t;if(this.gridOptions.groupIncludeTotalFooter)return"bottom"}getGroupTotalRowCallback(){let t=this.get("groupTotalRow");if(typeof t=="function")return this.getCallback("groupTotalRow");if(t)return()=>t;let n=this.get("groupIncludeFooter");if(typeof n=="function"){let i=this.getCallback("groupIncludeFooter");return s=>i(s)?"bottom":void 0}return()=>n?"bottom":void 0}isGroupMultiAutoColumn(){return this.gridOptions.groupDisplayType?this.gridOptions.groupDisplayType==="multipleColumns":this.get("groupHideOpenParents")}isGroupUseEntireRow(t){return t?!1:this.gridOptions.groupDisplayType==="groupRows"}getGridCommonParams(){return{api:this.api,context:this.gridOptionsContext}}addGridCommonParams(t){let n=t;return n.api=this.api,n.context=this.gridOptionsContext,n}getRowIdCallback(){let t=this.getCallback("getRowId");return t===void 0?t:n=>{let i=t(n);return typeof i!="string"&&(G("The getRowId callback must return a string. The ID ",i," is being cast to a string."),i=String(i)),i}}};BG.changeSetId=0;var Qae=BG,Yae=class extends k{constructor(){super(...arguments),this.beanName="headerPositionUtils"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}findHeader(e,t){let n,i;if(Nt(e.column)?n=this.visibleColsService.getGroupAtDirection(e.column,t):(i=`getCol${t}`,n=this.visibleColsService[i](e.column)),!n)return;let{headerRowIndex:s}=e;if(this.getHeaderRowType(s)!=="filter"){let a=[n];for(;n.getParent();)n=n.getParent(),a.push(n);n=a[a.length-1-s]}let{column:r,headerRowIndex:o}=this.getHeaderIndexToFocus(n,s);return{column:r,headerRowIndex:o}}getHeaderIndexToFocus(e,t){let n;if(Nt(e)&&this.isAnyChildSpanningHeaderHeight(e)&&e.isPadding()){let i=e;n=i.getLeafColumns()[0];let s=n;for(;s!==i;)t++,s=s.getParent()}return{column:n||e,headerRowIndex:t}}isAnyChildSpanningHeaderHeight(e){return e?e.getLeafColumns().some(t=>t.isSpanHeaderHeight()):!1}getColumnVisibleParent(e,t){let n=this.getHeaderRowType(t),i=n==="filter",s=n==="column",r=i?e:e.getParent(),o=t-1,a=o;if(s&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;r&&r.isPadding();)r=r.getParent(),o--;a=o,o<0&&(r=e,o=t,a=void 0)}return{column:r,headerRowIndex:o,headerRowIndexWithoutSpan:a}}getColumnVisibleChild(e,t,n="After"){let i=this.getHeaderRowType(t),s=e,r=t+1,o=r;if(i==="group"){let a=e.getDisplayedLeafColumns(),l=n==="After"?a[0]:xe(a),c=[],u=l;for(;u.getParent()!==e;)u=u.getParent(),c.push(u);if(s=l,l.isSpanHeaderHeight())for(let h=c.length-1;h>=0;h--){let f=c[h];if(!f.isPadding()){s=f;break}r++}else s=xe(c),s||(s=l)}return{column:s,headerRowIndex:r,headerRowIndexWithoutSpan:o}}getHeaderRowType(e){let t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){let n=this.visibleColsService.getAllCols(),i=n[t==="start"?0:n.length-1];if(!i)return;let r=this.ctrlsService.getHeaderRowContainerCtrl(i.getPinned()).getRowType(e);if(r=="group"){let o=this.visibleColsService.getColGroupAtLevel(i,e);return{headerRowIndex:e,column:o}}return{headerRowIndex:r==null?-1:e,column:i}}},Jae=class extends k{constructor(){super(...arguments),this.beanName="localeService"}getLocaleTextFunc(){let e=this.gos.getCallback("getLocaleText");if(e)return(n,i,s)=>e({key:n,defaultValue:i,variableValues:s});let t=this.gos.get("localeText");return(n,i,s)=>{let r=t&&t[n];if(r&&s&&s.length){let o=0;for(;!(o>=s.length||r.indexOf("${variable}")===-1);)r=r.replace("${variable}",s[o++])}return r??i}}},Xae=class extends k{constructor(){super(...arguments),this.beanName="apiEventService",this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new hR(this.getFrameworkOverrides())}addEventListener(e,t){let n=this.frameworkEventWrappingService.wrap(t),i=this.gos.useAsyncEvents()&&!CC.has(e),s=i?this.asyncEventListeners:this.syncEventListeners;s.has(e)||s.set(e,new Set),s.get(e).add(n),this.eventService.addEventListener(e,n,i)}removeEventListener(e,t){let n=this.frameworkEventWrappingService.unwrap(t),s=!!this.asyncEventListeners.get(e)?.delete(n);s||this.syncEventListeners.get(e)?.delete(n),this.eventService.removeEventListener(e,n,s)}addGlobalListener(e){let t=this.frameworkEventWrappingService.wrapGlobal(e);if(this.gos.useAsyncEvents()){let i=(r,o)=>{CC.has(r)&&t(r,o)},s=(r,o)=>{CC.has(r)||t(r,o)};this.globalEventListenerPairs.set(e,{syncListener:i,asyncListener:s}),this.eventService.addGlobalListener(i,!1),this.eventService.addGlobalListener(s,!0)}else this.syncGlobalEventListeners.add(t),this.eventService.addGlobalListener(t,!1)}removeGlobalListener(e){let t=this.frameworkEventWrappingService.unwrapGlobal(e);if(this.globalEventListenerPairs.has(t)){let{syncListener:i,asyncListener:s}=this.globalEventListenerPairs.get(t);this.eventService.removeGlobalListener(i,!1),this.eventService.removeGlobalListener(s,!0),this.globalEventListenerPairs.delete(e)}else this.syncGlobalEventListeners.delete(t),this.eventService.removeGlobalListener(t,!1)}destroyEventListeners(e,t){e.forEach((n,i)=>{n.forEach(s=>this.eventService.removeEventListener(i,s,t)),n.clear()}),e.clear()}destroyGlobalListeners(e,t){e.forEach(n=>this.eventService.removeGlobalListener(n,t)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener:e,asyncListener:t})=>{this.eventService.removeGlobalListener(e,!1),this.eventService.removeGlobalListener(t,!0)}),this.globalEventListenerPairs.clear()}},Zae=class extends k{constructor(){super(...arguments),this.beanName="pageBoundsListener"}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages();let t={type:"paginationChanged",animate:e?e.animate:!1,newData:e?e.newData:!1,newPage:e?e.newPage:!1,newPageSize:e?e.newPageSize:!1,keepRenderedRows:e?e.keepRenderedRows:!1};this.eventService.dispatchEvent(t)}calculatePages(){this.paginationService?this.paginationService.calculatePages():this.pageBoundsService.calculateBounds(0,this.rowModel.getRowCount()-1)}},ele=class extends k{constructor(){super(...arguments),this.beanName="pageBoundsService",this.pixelOffset=0}wireBeans(e){this.rowModel=e.rowModel}getFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getCurrentPageHeight(){return Pe(this.topRowBounds)||Pe(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){let e=this.topRowBounds?this.topRowBounds.rowTop:0,t=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:e,pageLastPixel:t}}calculateBounds(e,t){this.topRowBounds=this.rowModel.getRowBounds(e),this.topRowBounds&&(this.topRowBounds.rowIndex=e),this.bottomRowBounds=this.rowModel.getRowBounds(t),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=t),this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){let e=j(this.topRowBounds)?this.topRowBounds.rowTop:0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},tle=class extends k{constructor(){super(),this.beanName="ariaAnnouncementService",this.descriptionContainer=null,this.announceValue=Xn(this.announceValue.bind(this),200)}wireBeans(e){this.eGridDiv=e.eGridDiv}postConstruct(){let e=this.gos.getDocument(),t=this.descriptionContainer=e.createElement("div");t.classList.add("ag-aria-description-container"),gB(t,"polite"),aZ(t,"additions text"),oZ(t,!0),this.eGridDiv.appendChild(t)}announceValue(e){this.descriptionContainer&&(this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=e)},50))}destroy(){super.destroy();let{descriptionContainer:e}=this;e&&(xn(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null}},nle=class extends k{constructor(){super(...arguments),this.beanName="columnAnimationService",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.suppressAnimation=!1,this.animationThreadCount=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)}finish(){this.active&&this.flush(()=>{this.active=!1})}executeNextVMTurn(e){this.active?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;let e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(e){if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){e();return}let t=n=>{for(;n.length;){let i=n.pop();i&&i()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>t(this.executeNextFuncs),0),window.setTimeout(()=>{e(),t(this.executeLaterFuncs)},200)})}},ile=class extends k{constructor(){super(...arguments),this.beanName="columnHoverService"}setMouseOver(e){this.selectedColumns=e;let t={type:"columnHoverChanged"};this.eventService.dispatchEvent(t)}clearMouseOver(){this.selectedColumns=null;let e={type:"columnHoverChanged"};this.eventService.dispatchEvent(e)}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}},sle=class extends k{constructor(){super(...arguments),this.beanName="overlayService",this.state=0,this.showInitialOverlay=!0}wireBeans(e){this.userComponentFactory=e.userComponentFactory,this.rowModel=e.rowModel,this.columnModel=e.columnModel}postConstruct(){let e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e}),this.addManagedPropertyListener("loading",e)}registerOverlayWrapperComp(e){this.overlayWrapperComp=e,this.updateOverlayVisibility()}showLoadingOverlay(){this.showInitialOverlay=!1;let e=this.gos.get("loading");!e&&(e!==void 0||this.gos.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1,!(this.gos.get("loading")||this.gos.get("suppressNoRowsOverlay"))&&this.doShowNoRowsOverlay()}hideOverlay(){this.showInitialOverlay=!1,!this.gos.get("loading")&&this.doHideOverlay()}updateOverlayVisibility(){let e=this.gos.get("loading");this.showInitialOverlay&&e===void 0&&!this.gos.get("suppressLoadingOverlay")&&(e=!this.gos.get("columnDefs")||!this.columnModel.isReady()||!this.gos.get("rowData")&&this.gos.isRowModelType("clientSide")),e?this.state!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,this.rowModel.isEmpty()&&!this.gos.get("suppressNoRowsOverlay")&&this.gos.isRowModelType("clientSide")?this.state!==2&&this.doShowNoRowsOverlay():this.state!==0&&this.doHideOverlay())}doShowLoadingOverlay(){this.state=1,this.showOverlay(this.userComponentFactory.getLoadingOverlayCompDetails({}),"ag-overlay-loading-wrapper","loadingOverlayComponentParams")}doShowNoRowsOverlay(){this.state=2,this.showOverlay(this.userComponentFactory.getNoRowsOverlayCompDetails({}),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams")}doHideOverlay(){this.state=0,this.overlayWrapperComp.hideOverlay()}showOverlay(e,t,n){let i=e.newAgStackInstance();this.overlayWrapperComp.showOverlay(i,t,n)}},rle=class extends k{constructor(){super(...arguments),this.beanName="rowCssClassCalculator"}wireBeans(e){this.stylingService=e.stylingService}getInitialRowClasses(e){let t=[];return j(e.extraCssClass)&&t.push(e.extraCssClass),t.push("ag-row"),t.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&t.push("ag-opacity-zero"),t.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&t.push("ag-row-pinned"),e.rowNode.isSelected()&&t.push("ag-row-selected"),e.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&t.push("ag-row-loading"),e.fullWidthRow&&t.push("ag-full-width-row"),e.expandable&&(t.push("ag-row-group"),t.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&t.push("ag-row-dragging"),TV(t,this.processClassesFromGridOptions(e.rowNode)),TV(t,this.preProcessRowClassRules(e.rowNode)),t.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&t.push("ag-row-first"),e.lastRowOnPage&&t.push("ag-row-last"),e.fullWidthRow&&(e.pinned==="left"&&t.push("ag-cell-last-left-pinned"),e.pinned==="right"&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(e){let t=[],n=r=>{typeof r=="string"?t.push(r):Array.isArray(r)&&r.forEach(o=>t.push(o))},i=this.gos.get("rowClass");if(i){if(typeof i=="function")return G("rowClass should not be a function, please use getRowClass instead"),[];n(i)}let s=this.gos.getCallback("getRowClass");if(s){let r={data:e.data,node:e,rowIndex:e.rowIndex},o=s(r);n(o)}return t}preProcessRowClassRules(e){let t=[];return this.processRowClassRules(e,n=>{t.push(n)},()=>{}),t}processRowClassRules(e,t,n){let i=this.gos.addGridCommonParams({data:e.data,node:e,rowIndex:e.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),i,t,n)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}},ole=class extends k{constructor(){super(...arguments),this.beanName="rowContainerHeightService",this.scrollY=0,this.uiBodyHeight=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=CZ(),this.gos.get("debug")&&Ki("RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;let t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,n=this.getUiBodyHeight();(t!==this.scrollY||n!==this.uiBodyHeight)&&(this.scrollY=t,this.uiBodyHeight=n,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;let e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.gos.get("debug")&&Ki(`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){let t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){let t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return t.bottom-t.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;let t=this.modelHeight-this.getUiBodyHeight(),n=e/t;return this.maxScrollY*n}},ale=class extends k{constructor(){super(...arguments),this.beanName="rowNodeSorter"}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.showRowGroupColsService=e.showRowGroupColsService}postConstruct(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup())}doFullSort(e,t){let n=(s,r)=>({currentPos:r,rowNode:s}),i=e.map(n);return i.sort(this.compareRowNodes.bind(this,t)),i.map(s=>s.rowNode)}compareRowNodes(e,t,n){let i=t.rowNode,s=n.rowNode;for(let r=0,o=e.length;r<o;r++){let a=e[r],l=a.sort==="desc",c=this.getValue(i,a.column),u=this.getValue(s,a.column),h,f=this.getComparator(a,i);if(f?h=f(c,u,i,s,l):h=IX(c,u,this.isAccentedSort),!isNaN(h)&&h!==0)return a.sort==="asc"?h:h*-1}return t.currentPos-n.currentPos}getComparator(e,t){let n=e.column,i=n.getColDef().comparator;if(i!=null)return i;if(!n.getColDef().showRowGroup)return;let s=!t.group&&n.getColDef().field;if(!s)return;let r=this.columnModel.getColDefCol(s);if(r)return r.getColDef().comparator}getValue(e,t){if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);if(e.rowGroupColumn===t){if(this.gos.isGroupUseEntireRow(this.columnModel.isPivotActive())){let r=e.allLeafChildren?.[0];return r?this.valueService.getValue(t,r,!1,!1):void 0}let s=this.showRowGroupColsService?.getShowRowGroupCol(t.getId());return s?e.groupData?.[s.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return this.valueService.getValue(t,e,!1,!1)}},xC=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,t){if(e.children)for(let n=0;n<e.children.length;n++)this.depthFirstSearchChangedPath(e.children[n],t);t(e.rowNode)}depthFirstSearchEverything(e,t,n){if(e.childrenAfterGroup)for(let i=0;i<e.childrenAfterGroup.length;i++){let s=e.childrenAfterGroup[i];s.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[i],t,n):n&&t(s)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,n=!1){this.active&&!n?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,n=0;for(;!this.mapToItems[t.id];){let i={rowNode:t,children:null};this.mapToItems[t.id]=i,n++,t=t.parent}return n}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let n=e;for(;n;)this.nodeIdsToColumns[n.id]||(this.nodeIdsToColumns[n.id]={}),t.forEach(i=>this.nodeIdsToColumns[n.id][i.getId()]=!0),n=n.parent}linkPathItems(e,t){let n=e;for(let i=0;i<t;i++){let s=this.mapToItems[n.id],r=this.mapToItems[n.parent.id];r.children||(r.children=[]),r.children.push(s),n=n.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;let n=this.createPathItems(e);this.linkPathItems(e,n),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;let n=this.nodeIdsToColumns[e.id];return t.filter(s=>n[s.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;let n=this.nodeIdsToColumns[e.id];return t.filter(s=>!n[s.getId()])}},HG=class extends k{constructor(){super(...arguments),this.beanName="selectionService",this.selectedNodes=new Map,this.selectionCtx=new use}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.selectionCtx.init(this.rowModel),this.rowSelection=this.gos.get("rowSelection"),this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.rowSelection=this.gos.get("rowSelection"),this.deselectAllRowNodes({source:"api"})}),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes(),this.selectionCtx.reset()}isMultiselect(){return this.rowSelection==="multiple"}overrideSelectionValue(e,t){if(!$ae(t))return e;let n=this.selectionCtx.getRoot();return n?n.isSelected()??!1:!0}setNodesSelected(e){let{newValue:t,clearSelection:n,suppressFinishActions:i,rangeSelect:s,nodes:r,event:o,source:a}=e;if(r.length===0)return 0;if(r.length>1&&!this.isMultiselect())return G("cannot multi select while rowSelection='single'"),0;let l=this.groupSelectsChildren&&e.groupSelectsFiltered===!0,c=r.map(h=>h.footer?h.sibling:h);if(s){if(c.length>1)return G("cannot range select while selecting multiple rows"),0;let h=c[0],f=this.overrideSelectionValue(t,a);if(this.isMultiselect()){if(this.selectionCtx.isInRange(h)){let g=this.selectionCtx.truncate(h);return f&&this.selectRange(g.discard,!1,a),this.selectRange(g.keep,f,a)}else if(this.selectionCtx.getRoot()!==h){let y=this.selectionCtx.extend(h,this.groupSelectsChildren);return f&&this.selectRange(y.discard,!1,a),this.selectRange(y.keep,f,a)}}}i||this.selectionCtx.setRoot(c[0]);let u=0;for(let h=0;h<c.length;h++){let f=c[h];l&&f.group||f.selectThisNode(t,o,a)&&u++,this.groupSelectsChildren&&f.childrenAfterGroup?.length&&(u+=this.selectChildren(f,t,l,a))}return i||(t&&(n||!this.isMultiselect())&&(u+=this.clearOtherNodes(c[0],a)),u>0&&(this.updateGroupsFromChildrenSelections(a),this.dispatchSelectionChanged(a))),u}selectRange(e,t,n){let i=0;return e.forEach(s=>{if(s.group&&this.groupSelectsChildren)return;s.selectThisNode(t,void 0,n)&&i++}),i>0&&(this.updateGroupsFromChildrenSelections(n),this.dispatchSelectionChanged(n)),i}selectChildren(e,t,n,i){let s=n?e.childrenAfterAggFilter:e.childrenAfterGroup;return Pe(s)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:n,source:i,nodes:s})}getSelectedNodes(){let e=[];return this.selectedNodes.forEach(t=>{t&&e.push(t)}),e}getSelectedRows(){let e=[];return this.selectedNodes.forEach(t=>{t&&t.data&&e.push(t.data)}),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){let t=new Map;this.selectedNodes.forEach((n,i)=>{n&&e(n)&&t.set(i,n)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsChildren||this.rowModel.getType()!=="clientSide")return!1;let i=this.rowModel.getRootNode();t||(t=new xC(!0,i),t.setInactive());let s=!1;return t.forEachChangedNodeDepthFirst(r=>{if(r!==i){let o=r.calculateSelectedFromChildren();s=r.selectThisNode(o===null?!1:o,void 0,e)||s}}),s}clearOtherNodes(e,t){let n=new Map,i=0;return this.selectedNodes.forEach(s=>{if(s&&s.id!==e.id){let r=this.selectedNodes.get(s.id);i+=r.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&s.parent&&n.set(s.parent.id,s.parent)}}),n.forEach(s=>{let r=s.calculateSelectedFromChildren();s.selectThisNode(r===null?!1:r,void 0,t)}),i}onRowSelected(e){let t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}syncInOldRowNode(e,t){if(j(t)&&e.id!==t.id&&t){let i=t.id;this.selectedNodes.get(i)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.setSelectedInitialValue(!0),this.selectedNodes.set(e.id,e)):e.setSelectedInitialValue(!1)}reset(e){let t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes?.clear()}getBestCostNodeSelection(){if(this.rowModel.getType()!=="clientSide")return;let t=this.rowModel.getTopLevelNodes();if(t===null)return;let n=[];function i(s){for(let r=0,o=s.length;r<o;r++){let a=s[r];if(a.isSelected())n.push(a);else{let l=a;l.group&&l.children&&i(l.children)}}}return i(t),n}isEmpty(){let e=0;return this.selectedNodes.forEach(t=>{t&&e++}),e===0}deselectAllRowNodes(e){let t=o=>o.selectThisNode(!1,void 0,i),n=this.rowModel.getType()==="clientSide",{source:i,justFiltered:s,justCurrentPage:r}=e;if(r||s){if(!n){ke("selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(s,r).forEach(t)}else this.selectedNodes.forEach(o=>{o&&t(o)}),this.reset(i);this.selectionCtx.reset(),n&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)}getSelectedCounts(e,t){let n=0,i=0,s=r=>{this.groupSelectsChildren&&r.group||(r.isSelected()?n++:r.selectable&&i++)};return this.getNodesToSelect(e,t).forEach(s),{selectedCount:n,notSelectedCount:i}}getSelectAllState(e,t){let{selectedCount:n,notSelectedCount:i}=this.getSelectedCounts(e,t);return n===0&&i===0?!1:n>0&&i>0?null:n>0}hasNodesToSelect(e=!1,t=!1){return this.getNodesToSelect(e,t).filter(n=>n.selectable).length>0}getNodesToSelect(e=!1,t=!1){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);let n=[];if(t)return this.forEachNodeOnPage(s=>{if(!s.group){n.push(s);return}if(!s.expanded){let r=o=>{n.push(o),o.childrenAfterFilter?.length&&o.childrenAfterFilter.forEach(r)};r(s);return}this.groupSelectsChildren||n.push(s)}),n;let i=this.rowModel;return e?(i.forEachNodeAfterFilter(s=>{n.push(s)}),n):(i.forEachNode(s=>{n.push(s)}),n)}forEachNodeOnPage(e){let t=this.pageBoundsService.getFirstRow(),n=this.pageBoundsService.getLastRow();for(let i=t;i<=n;i++){let s=this.rowModel.getRow(i);s&&e(s)}}selectAllRowNodes(e){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);let{source:t,justFiltered:n,justCurrentPage:i}=e,s=this.getNodesToSelect(n,i);s.forEach(r=>r.selectThisNode(!0,void 0,t)),this.selectionCtx.setRoot(s[0]??null),this.selectionCtx.setEndRange(xe(s)??null),this.rowModel.getType()==="clientSide"&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t),this.dispatchSelectionChanged(t)}getSelectionState(){let e=[];return this.selectedNodes.forEach(t=>{t?.id&&e.push(t.id)}),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return;let n=new Set(e),i=[];this.rowModel.forEachNode(s=>{n.has(s.id)&&i.push(s)}),this.setNodesSelected({newValue:!0,nodes:i,source:t})}dispatchSelectionChanged(e){let t={type:"selectionChanged",source:e};this.eventService.dispatchEvent(t)}},lle=class extends k{constructor(){super(...arguments),this.beanName="selectableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){this.addManagedPropertyListener("isRowSelectable",()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(e=!1){let t=!!this.gos.get("rowSelection"),n=this.gos.get("isRowSelectable");if(!t||!n)return;let i=this.gos.get("groupSelectsChildren"),s=this.rowModel.getType()==="clientSide"&&i,r=[],o=a=>{if(e&&!a.group)return;if(s&&a.group){let c=a.childrenAfterGroup.some(u=>u.selectable===!0);a.setRowSelectable(c,!0);return}let l=n?n(a):!0;a.setRowSelectable(l,!0),!l&&a.isSelected()&&r.push(a)};if(s){let a=this.rowModel;new xC(!1,a.getRootNode()).forEachChangedNodeDepthFirst(o,!0,!0)}else this.rowModel.forEachNode(o);r.length&&this.selectionService.setNodesSelected({nodes:r,newValue:!1,source:"selectableChanged"}),s&&this.selectionService instanceof HG&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}},QV=["asc","desc",null],cle=class extends k{constructor(){super(...arguments),this.beanName="sortController"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.showRowGroupColsService=e.showRowGroupColsService}progressSort(e,t,n){let i=this.getNextSortDirection(e);this.setSortForColumn(e,i,t,n)}setSortForColumn(e,t,n,i){t!=="asc"&&t!=="desc"&&(t=null);let s=this.gos.isColumnsSortingCoupledToGroup(),r=[e];if(s&&e.getColDef().showRowGroup){let c=this.funcColsService.getSourceColumnsForGroupColumn(e)?.filter(u=>u.isSortable());c&&(r=[e,...c])}r.forEach(l=>l.setSort(t,i));let o=(n||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"),a=[];if(!o){let l=this.clearSortBarTheseColumns(r,i);a.push(...l)}this.updateSortIndex(e),a.push(...r),this.dispatchSortChangedEvents(i,a)}updateSortIndex(e){let t=this.gos.isColumnsSortingCoupledToGroup(),n=this.showRowGroupColsService?.getShowRowGroupCol(e.getId()),i=t&&n||e,s=this.getColumnsWithSortingOrdered();this.columnModel.getAllCols().forEach(a=>a.setSortIndex(null));let r=s.filter(a=>t&&a.getColDef().showRowGroup?!1:a!==i);(i.getSort()?[...r,i]:r).forEach((a,l)=>{a.setSortIndex(l)})}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let t=this.columnModel.getAllCols().filter(n=>!!n.getSort());return t&&t.length>0}dispatchSortChangedEvents(e,t){let n={type:"sortChanged",source:e};t&&(n.columns=t),this.eventService.dispatchEvent(n)}clearSortBarTheseColumns(e,t){let n=[];return this.columnModel.getAllCols().forEach(i=>{e.includes(i)||(i.getSort()&&n.push(i),i.setSort(void 0,t))}),n}getNextSortDirection(e){let t;if(e.getColDef().sortingOrder?t=e.getColDef().sortingOrder:this.gos.get("sortingOrder")?t=this.gos.get("sortingOrder"):t=QV,!Array.isArray(t)||t.length<=0)return G(`sortingOrder must be an array with at least one element, currently it's ${t}`),null;let n=t.indexOf(e.getSort()),i=n<0,s=n==t.length-1,r;return i||s?r=t[0]:r=t[n+1],QV.indexOf(r)<0?(G("invalid sort type ",r),null):r}getIndexedSortMap(){let e=this.columnModel.getAllCols().filter(r=>!!r.getSort());if(this.columnModel.isPivotMode()){let r=this.gos.isColumnsSortingCoupledToGroup();e=e.filter(o=>{let a=!!o.getAggFunc(),l=!o.isPrimary(),c=r?this.showRowGroupColsService?.getShowRowGroupCol(o.getId()):o.getColDef().showRowGroup;return a||l||c})}let t=this.funcColsService.getRowGroupColumns().filter(r=>!!r.getSort()),n={};e.forEach((r,o)=>n[r.getId()]=o),e.sort((r,o)=>{let a=r.getSortIndex(),l=o.getSortIndex();if(a!=null&&l!=null)return a-l;if(a==null&&l==null){let c=n[r.getId()],u=n[o.getId()];return c>u?1:-1}else return l==null?-1:1});let i=this.gos.isColumnsSortingCoupledToGroup()&&!!t.length;i&&(e=[...new Set(e.map(r=>this.showRowGroupColsService?.getShowRowGroupCol(r.getId())??r))]);let s=new Map;return e.forEach((r,o)=>s.set(r,o)),i&&t.forEach(r=>{let o=this.showRowGroupColsService.getShowRowGroupCol(r.getId());s.set(r,s.get(o))}),s}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([e,t],[n,i])=>t-i).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){let t=this.gos.isColumnsSortingCoupledToGroup(),n=!!e.getColDef().showRowGroup;return t&&n}getDisplaySortForColumn(e){let t=this.funcColsService.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSort();let i=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,s=i[0].getSort();return i.every(o=>o.getSort()==s)?s:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}},ule=class extends k{constructor(){super(...arguments),this.beanName="syncService",this.waitingForColumns=!1}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.rowModel=e.rowModel}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.ctrlsService.whenReady(()=>{let e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){this.columnModel.setColumnDefs(e??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.dispatchGridReadyEvent();let e=Yn.__isRegistered("@ag-grid-enterprise/core",this.gridId);this.gos.get("debug")&&Ki(`initialised successfully, enterprise = ${e}`)}dispatchGridReadyEvent(){let e={type:"gridReady"};this.eventService.dispatchEvent(e)}setColumnDefs(e){let t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.columnModel.setColumnDefs(t,bu(e.source))}}},dle="paste",hle=class extends k{constructor(){super(...arguments),this.beanName="changeDetectionService"}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer}postConstruct(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){e.source!==dle&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,t){if(this.gos.get("suppressChangeDetection"))return;let n=[e];if(this.clientSideRowModel&&!e.isRowPinned()){let i=this.gos.get("aggregateOnlyChangedColumns"),s=new xC(i,this.clientSideRowModel.getRootNode());s.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(s),s.forEachChangedNodeDepthFirst(r=>{n.push(r)})}this.rowRenderer.refreshCells({rowNodes:n})}},fle=class extends k{constructor(){super(...arguments),this.beanName="expressionService",this.expressionToFunctionCache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);ke("value should be either a string or a function",e)}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(n){return Ki("Processing of the expression failed"),Ki("Expression = ",e),Ki("Params = ",t),Ki("Exception = ",n),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];let t=this.createFunctionBody(e),n=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=n,n}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}},ple=class extends k{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,n){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=n)}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},gle=class extends k{constructor(){super(...arguments),this.beanName="valueService",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionService=e.expressionService,this.columnModel=e.columnModel,this.valueCache=e.valueCache,this.dataTypeService=e.dataTypeService}postConstruct(){this.initialised||this.init()}init(){this.isSsrm=this.gos.isRowModelType("serverSide"),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;let e=n=>this.callColumnCellValueChangedHandler(n),t=this.gos.useAsyncEvents();this.eventService.addEventListener("cellValueChanged",e,t),this.addDestroyFunc(()=>this.eventService.removeEventListener("cellValueChanged",e,t)),this.addManagedPropertyListener("treeData",n=>this.isTreeData=n.currentValue)}getValue(e,t,n=!1,i=!1){if(this.initialised||this.init(),!t)return;let s=e.getColDef(),r=s.field,o=e.getColId(),a=t.data,l,c=t.groupData&&t.groupData[o]!==void 0,u=!i&&t.aggData&&t.aggData[o]!==void 0,h=this.isSsrm&&i&&!!e.getColDef().aggFunc,f=this.isSsrm&&t.footer&&t.field&&(e.getColDef().showRowGroup===!0||e.getColDef().showRowGroup===t.field);if(n&&s.filterValueGetter?l=this.executeFilterValueGetter(s.filterValueGetter,a,e,t):this.isTreeData&&u?l=t.aggData[o]:this.isTreeData&&s.valueGetter?l=this.executeValueGetter(s.valueGetter,a,e,t):this.isTreeData&&r&&a?l=uf(a,r,e.isFieldContainsDots()):c?l=t.groupData[o]:u?l=t.aggData[o]:s.valueGetter?l=this.executeValueGetter(s.valueGetter,a,e,t):f?l=uf(a,t.field,e.isFieldContainsDots()):r&&a&&!h&&(l=uf(a,r,e.isFieldContainsDots())),this.cellExpressions&&typeof l=="string"&&l.indexOf("=")===0){let g=l.substring(1);l=this.executeValueGetter(g,a,e,t)}if(l==null){let g=this.getOpenedGroup(t,e);if(g!=null)return g}return l}parseValue(e,t,n,i){let s=e.getColDef(),r=this.gos.addGridCommonParams({node:t,data:t?.data,oldValue:i,newValue:n,colDef:s,column:e}),o=s.valueParser;return j(o)?typeof o=="function"?o(r):this.expressionService.evaluate(o,r):n}formatValue(e,t,n,i,s=!0){let r=null,o,a=e.getColDef();if(i?o=i:s&&(o=a.valueFormatter),o){let l=this.gos.addGridCommonParams({value:n,node:t,data:t?t.data:null,colDef:a,column:e});typeof o=="function"?r=o(l):r=this.expressionService.evaluate(o,l)}else if(a.refData)return a.refData[n]||"";return r==null&&Array.isArray(n)&&(r=n.join(", ")),r}getOpenedGroup(e,t){if(!this.gos.get("showOpenedGroup")||!t.getColDef().showRowGroup)return;let i=t.getColDef().showRowGroup,s=e.parent;for(;s!=null;){if(s.rowGroupColumn&&(i===!0||i===s.rowGroupColumn.getColId()))return s.key;s=s.parent}}setValue(e,t,n,i){let s=this.columnModel.getColDefCol(t);if(!e||!s)return!1;Pe(e.data)&&(e.data={});let{field:r,valueSetter:o}=s.getColDef();if(Pe(r)&&Pe(o))return G("you need either field or valueSetter set on colDef for editing to work"),!1;if(this.dataTypeService&&!this.dataTypeService.checkType(s,n))return G("Data type of the new value does not match the cell data type of the column"),!1;let a=this.gos.addGridCommonParams({node:e,data:e.data,oldValue:this.getValue(s,e),newValue:n,colDef:s.getColDef(),column:s});a.newValue=n;let l;if(j(o)?typeof o=="function"?l=o(a):l=this.expressionService.evaluate(o,a):l=this.setValueUsingField(e.data,r,n,s.isFieldContainsDots()),l===void 0&&(l=!0),!l)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),a.newValue=this.getValue(s,e);let c={type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:a.column,api:a.api,colDef:a.colDef,context:a.context,data:e.data,node:e,oldValue:a.oldValue,newValue:a.newValue,value:a.newValue,source:i};return this.eventService.dispatchEvent(c),!0}callColumnCellValueChangedHandler(e){let t=e.colDef.onCellValueChanged;typeof t=="function"&&this.getFrameworkOverrides().wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,n,i){if(!t)return!1;let s=!1;if(!i)s=e[t]===n,s||(e[t]=n);else{let r=t.split("."),o=e;for(;r.length>0&&o;){let a=r.shift();r.length===0?(s=o[a]===n,s||(o[a]=n)):o=o[a]}}return!s}executeFilterValueGetter(e,t,n,i){let s=this.gos.addGridCommonParams({data:t,node:i,column:n,colDef:n.getColDef(),getValue:this.getValueCallback.bind(this,i)});return typeof e=="function"?e(s):this.expressionService.evaluate(e,s)}executeValueGetter(e,t,n,i){let s=n.getColId(),r=this.valueCache.getValue(i,s);if(r!==void 0)return r;let o=this.gos.addGridCommonParams({data:t,node:i,column:n,colDef:n.getColDef(),getValue:this.getValueCallback.bind(this,i)}),a;return typeof e=="function"?a=e(o):a=this.expressionService.evaluate(e,o),this.valueCache.setValue(i,s,a),a}getValueCallback(e,t){let n=this.columnModel.getColDefCol(t);return n?this.getValue(n,e):null}getKeyForNode(e,t){let n=this.getValue(e,t),i=e.getColDef().keyCreator,s=n;if(i){let r=this.gos.addGridCommonParams({value:n,colDef:e.getColDef(),column:e,node:t,data:t.data});s=i(r)}return typeof s=="string"||s==null||(s=String(s),s==="[object Object]"&&G("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),s}},dR=class{};dR.gridOptions=void 0;function UG(e,t,n){if(!t)return ke("No gridOptions provided to createGrid"),{};let i=new vle().create(e,t,s=>{let r=new jse(e);s.createBean(r)},void 0,n);if(!Object.isFrozen(t)&&!n?.frameworkOverrides){let s="https://ag-grid.com/javascript-data-grid/grid-interface/#grid-api";Object.defineProperty(t,"api",{get:()=>{ke(`gridOptions.api is no longer supported. See ${s}.`)},configurable:!0})}return i}var mle=1,vle=class{create(e,t,n,i,s){let r={};dR.gridOptions?(qi(r,dR.gridOptions,!0,!0),r=B(B({},r),t)):r=t;let o=Kae(r),a=o.gridId??String(mle++),l=this.getRegisteredModules(s,a),c=this.createBeansList(o.rowModelType,l,a),u=this.createProvidedBeans(e,o,s);if(!c){ke("Failed to create grid.");return}let h={providedBeanInstances:u,beanClasses:c,gridId:a,beanInitComparator:Pse,beanDestroyComparator:Fse,derivedBeans:[_se]},f=new mee(h);return this.registerModuleUserComponents(f,l),this.registerControllers(f,l),this.registerModuleApiFunctions(f,l),n(f),f.getBean("syncService").start(),i&&i(f),f.getBean("gridApi")}registerControllers(e,t){let n=e.getBean("ctrlsFactory");t.forEach(i=>{i.controllers&&i.controllers.forEach(s=>n.register(s))})}getRegisteredModules(e,t){let n=e?e.modules:null,i=Yn.__getRegisteredModules(t),s=[],r={},o=(a,l,c)=>{(h=>{r[h.moduleName]||(r[h.moduleName]=!0,s.push(h),Yn.__register(h,a,c))})(l),l.dependantModules&&l.dependantModules.forEach(h=>o(a,h,c))};return o(!!n?.length||!Yn.__isPackageBased(),LG,void 0),n&&n.forEach(a=>o(!0,a,t)),i&&i.forEach(a=>o(!Yn.__isPackageBased(),a,void 0)),s}registerModuleUserComponents(e,t){let n=this.extractModuleEntity(t,s=>s.userComponents?s.userComponents:[]),i=e.getBean("userComponentRegistry");n.forEach(s=>{i.registerDefaultComponent(s.name,s.classImp)})}registerModuleApiFunctions(e,t){let n=e.getBean("apiFunctionService");t.forEach(i=>{let s=i.apiFunctions??{};Object.keys(s).forEach(o=>{n?.addFunction(o,s[o])})})}createProvidedBeans(e,t,n){let i=n?n.frameworkOverrides:null;Pe(i)&&(i=new HR);let s={gridOptions:t,eGridDiv:e,globalEventListener:n?n.globalEventListener:null,globalSyncEventListener:n?n.globalSyncEventListener:null,frameworkOverrides:i};return n&&n.providedBeanInstances&&Object.assign(s,n.providedBeanInstances),s}createBeansList(e="clientSide",t,n){let i=t.filter(l=>!l.rowModel||l.rowModel===e),s={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!s[e]){ke("Could not find row model for rowModelType = ",e);return}if(!Yn.__assertRegistered(s[e],`rowModelType = '${e}'`,n))return;let r=[Lse,Nse,Yae,zae,wse,JZ,Ise,Ase,gie,VB,ole,hie,Jae,ose,See,ZX,Gse,Qae,mse,HG,VX,Nte,ele,Zae,sse,fle,LX,die,ple,gle,nse,fie,Cee,Hse,uie,Vse,Cse,dse,cie,cle,ile,nle,lle,hle,mie,bse,rle,ale,Ose,Use,kse,xse,ule,sle,vie,Xae,tle,Cie,WX,Ese,jX,HX,Dse,Rse,XX,UX,YX,Tse,JX],o=this.extractModuleEntity(i,l=>l.beans?l.beans:[]);r.push(...o);let a=[];return r.forEach(l=>{a.indexOf(l)<0&&a.push(l)}),a}extractModuleEntity(e,t){return[].concat(...e.map(t))}},WG=class extends k{constructor(){super(...arguments),this.beanName="rowModelHelperService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){let e=this.rowModel;switch(e.getType()){case"clientSide":this.clientSideRowModel=e;break;case"infinite":this.infiniteRowModel=e;break;case"serverSide":this.serverSideRowModel=e;break}}getClientSideRowModel(){return this.clientSideRowModel}getInfiniteRowModel(){return this.infiniteRowModel}getServerSideRowModel(){return this.serverSideRowModel}};function Cle(e){e.expansionService.expandAll(!0)}function yle(e){e.expansionService.expandAll(!1)}function wle(e){let t=e.rowModelHelperService?.getClientSideRowModel(),n=e.rowModelHelperService?.getServerSideRowModel();t?t.onRowHeightChanged():n&&n.onRowHeightChanged()}function Sle(e,t,n){let i=e.rowModelHelperService?.getServerSideRowModel();if(i){if(e.funcColsService.isRowGroupEmpty()){i.setRowCount(t,n);return}ke("setRowCount cannot be used while using row grouping.");return}let s=e.rowModelHelperService?.getInfiniteRowModel();if(s){s.setRowCount(t,n);return}}function _le(e){return e.rowNodeBlockLoader?.getBlockState()??{}}var ble={version:ve,moduleName:"@ag-grid-community/csrm-ssrm-shared-api",apiFunctions:{expandAll:Cle,collapseAll:yle,onRowHeightChanged:wle}},Ele={version:ve,moduleName:"@ag-grid-community/ssrm-infinite-shared-api",apiFunctions:{setRowCount:Sle,getCacheBlockState:_le}},jG=class{wrap(e,t,n=[],i){let s=this.createWrapper(e,i);return t.forEach(r=>{this.createMethod(s,r,!0)}),n.forEach(r=>{this.createMethod(s,r,!1)}),s}unwrap(e){return e}createMethod(e,t,n){e.addMethod(t,this.createMethodProxy(e,t,n))}createMethodProxy(e,t,n){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(n&&G("Framework component is missing the method "+t+"()"),null)}}};function Dle(e,t){if(!e)return!1;let n=(o,a)=>{let l=t[o.id],c=t[a.id],u=l!==void 0,h=c!==void 0,f=u&&h,g=!u&&!h;return f?l-c:g?o.__objectId-a.__objectId:u?1:-1},i,s,r=!1;for(let o=0;o<e.length-1;o++)if(i=e[o],s=e[o+1],n(i,s)>0){r=!0;break}return r?(e.sort(n),!0):!1}var WR=class{};WR.CHART_TYPE_TO_SERIES_TYPE={column:"bar",groupedColumn:"bar",stackedColumn:"bar",normalizedColumn:"bar",bar:"bar",groupedBar:"bar",stackedBar:"bar",normalizedBar:"bar",line:"line",scatter:"scatter",bubble:"bubble",pie:"pie",donut:"donut",doughnut:"donut",area:"area",stackedArea:"area",normalizedArea:"area",histogram:"histogram",radarLine:"radar-line",radarArea:"radar-area",nightingale:"nightingale",radialColumn:"radial-column",radialBar:"radial-bar",sunburst:"sunburst",rangeBar:"range-bar",rangeArea:"range-area",boxPlot:"box-plot",treemap:"treemap",heatmap:"heatmap",waterfall:"waterfall"};WR.COMBO_CHART_TYPES=["columnLineCombo","areaColumnCombo","customCombo"];WR.SERIES_GROUP_TYPES=["grouped","stacked","normalized"];var xu=typeof global>"u"?{}:global;xu.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;xu.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;xu.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;xu.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;xu.Node=typeof Node>"u"?{}:Node;xu.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var Rle="ROOT_NODE_ID",KD=0,Tle=class{constructor(e,t,n,i,s,r){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gos=t,this.eventService=n,this.funcColsService=i,this.beans=r,this.selectionService=s,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=Rle,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return iB(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if(typeof e=="string"){G("rowData must be an array.");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);let t=this.rootNode,n=this.rootNode.sibling;t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?t.allLeafChildren=e.map(i=>this.createNode(i,this.rootNode,KD)):(t.allLeafChildren=[],t.childrenAfterGroup=[]),n&&(n.childrenAfterFilter=t.childrenAfterFilter,n.childrenAfterGroup=t.childrenAfterGroup,n.childrenAfterAggFilter=t.childrenAfterAggFilter,n.childrenAfterSort=t.childrenAfterSort,n.childrenMapped=t.childrenMapped,n.allLeafChildren=t.allLeafChildren)}updateRowData(e,t){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);let n={remove:[],update:[],add:[]},i=[];return this.executeRemove(e,n,i),this.executeUpdate(e,n,i),this.executeAdd(e,n),this.updateSelection(i,"rowDataChanged"),t&&Dle(this.rootNode.allLeafChildren,t),n}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){let t={type:"rowDataUpdateStarted",firstRowData:e?.length?e[0]:null};this.eventService.dispatchEvent(t)}updateSelection(e,t){let n=e.length>0;if(n&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),this.selectionService.updateGroupsFromChildrenSelections(t),n){let i={type:"selectionChanged",source:t};this.eventService.dispatchEvent(i)}}executeAdd(e,t){let{add:n,addIndex:i}=e;if(pn(n))return;let s=n.map(o=>this.createNode(o,this.rootNode,KD)),r=this.rootNode.allLeafChildren;if(typeof i=="number"&&i>=0){let o=r.length,a=i;if(this.gos.get("treeData")&&i>0&&o>0){for(let h=0;h<o;h++)if(r[h]?.rowIndex==i-1){a=h+1;break}}let c=r.slice(0,a),u=r.slice(a,r.length);this.rootNode.allLeafChildren=[...c,...s,...u]}else this.rootNode.allLeafChildren=[...r,...s];this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=r),t.add=s}executeRemove(e,t,n){let{remove:i}=e;if(pn(i))return;let s={};i.forEach(r=>{let o=this.lookupRowNode(r);o&&(o.isSelected()&&n.push(o),o.clearRowTopAndRowIndex(),s[o.id]=!0,delete this.allNodesMap[o.id],t.remove.push(o))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren?.filter(r=>!s[r.id])??null,this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,t,n){let{update:i}=e;pn(i)||i.forEach(s=>{let r=this.lookupRowNode(s);r&&(r.updateData(s),!r.selectable&&r.isSelected()&&n.push(r),this.setMasterForRow(r,s,KD,!1),t.update.push(r))})}lookupRowNode(e){let t=this.gos.getRowIdCallback(),n;if(t){let i=t({data:e,level:0});if(n=this.allNodesMap[i],!n)return ke(`could not find row id=${i}, data item was not found for this id`),null}else if(n=this.rootNode.allLeafChildren?.find(i=>i.data===e),!n)return ke("could not find data item as object was not found",e),ke("Consider using getRowId to help the Grid find matching row data"),null;return n||null}createNode(e,t,n){let i=new zr(this.beans);return i.group=!1,this.setMasterForRow(i,e,n,!0),t&&(i.parent=t),i.level=n,i.setDataAndId(e,this.nextId.toString()),this.allNodesMap[i.id]&&G(`duplicate node id '${i.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[i.id]=i,this.nextId++,i}setMasterForRow(e,t,n,i){if(this.gos.get("treeData"))e.setMaster(!1),i&&(e.expanded=!1);else{if(this.gos.get("masterDetail")){let o=this.gos.get("isRowMaster");o?e.setMaster(o(t)):e.setMaster(!0)}else e.setMaster(!1);if(i){let o=this.funcColsService.getRowGroupColumns(),a=o?o.length:0,l=n+a;e.expanded=e.master?this.isExpanded(l):!1}}}isExpanded(e){let t=this.gos.get("groupDefaultExpanded");return t===-1?!0:e<t}},Ile=class extends k{constructor(){super(...arguments),this.beanName="rowModel",this.onRowHeightChanged_debounced=Xn(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}wireBeans(e){this.beans=e,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.selectionService=e.selectionService,this.valueCache=e.valueCache,this.environment=e.environment,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggregationStage=e.aggregationStage,this.pivotStage=e.pivotStage,this.filterAggregatesStage=e.filterAggregatesStage}postConstruct(){let e=this.refreshModel.bind(this,{step:"group"}),t=!this.gos.get("suppressAnimationFrame"),n=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedEventListeners({newColumnsLoaded:n,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new zr(this.beans),this.nodeManager=new Tle(this.rootNode,this.gos,this.eventService,this.funcColsService,this.selectionService,this.beans)}addPropertyListeners(){let e=new Set(["treeData","masterDetail"]),t=new Set(["groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),n=new Set(["excludeChildrenWhenTreeDataFiltering"]),i=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),s=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),r=new Set(["postSortRows","groupDisplayType","accentedSort"]),o=new Set([]),a=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),l=[...e,...t,...n,...i,...i,...s,...r,...o,...a];this.addManagedPropertyListeners(l,c=>{let u=c.changeSet?.properties;if(!u)return;let h=f=>u.some(g=>f.has(g));if(h(e)){this.setRowData(this.rootNode.allLeafChildren.map(f=>f.data));return}if(h(t)){this.refreshModel({step:"group"});return}if(h(n)){this.refreshModel({step:"filter"});return}if(h(i)){this.refreshModel({step:"pivot"});return}if(h(s)){this.refreshModel({step:"aggregate"});return}if(h(r)){this.refreshModel({step:"sort"});return}if(h(o)){this.refreshModel({step:"filter_aggregates"});return}h(a)&&this.refreshModel({step:"map"})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){let e=this.gos.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))}ensureRowHeightsValid(e,t,n,i){let s,r=!1;do{s=!1;let o=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(o,n),c=Math.min(a,i);for(let u=l;u<=c;u++){let h=this.getRow(u);if(h.rowHeightEstimated){let f=this.gos.getRowHeightForNode(h);h.setRowHeight(f.height),s=!0,r=!0}}s&&this.setRowTopAndRowIndex()}while(s);return r}setRowTopAndRowIndex(){let e=this.environment.getDefaultRowHeight(),t=0,n=new Set,i=this.gos.isDomLayout("normal");for(let s=0;s<this.rowsToDisplay.length;s++){let r=this.rowsToDisplay[s];if(r.id!=null&&n.add(r.id),r.rowHeight==null){let o=this.gos.getRowHeightForNode(r,i,e);r.setRowHeight(o.height,o.estimated)}r.setRowTop(t),r.setRowIndex(s),t+=r.rowHeight}return n}clearRowTopAndRowIndex(e,t){let n=e.isActive(),i=r=>{r&&r.id!=null&&!t.has(r.id)&&r.clearRowTopAndRowIndex()},s=r=>{if(i(r),i(r.detailNode),i(r.sibling),r.hasChildren()&&r.childrenAfterGroup){let o=r.level==-1;n&&!o&&!r.expanded||r.childrenAfterGroup.forEach(s)}};s(this.rootNode)}ensureRowsAtPixel(e,t,n=0){let i=this.getRowIndexAtPixel(t),s=this.getRow(i),r=!this.gos.get("suppressAnimationFrame");return s===e[0]?!1:(e.forEach(o=>{Jn(this.rootNode.allLeafChildren,o)}),e.forEach((o,a)=>{yC(this.rootNode.allLeafChildren,o,Math.max(i+n,0)+a)}),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:r}),!0)}highlightRowAtPixel(e,t){let n=t!=null?this.getRowIndexAtPixel(t):null,i=n!=null?this.getRow(n):null;if(!i||!e||i===e||t==null){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null);return}let s=this.getHighlightPosition(t,i);this.lastHighlightedRow&&this.lastHighlightedRow!==i&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),i.setHighlighted(s),this.lastHighlightedRow=i}getHighlightPosition(e,t){if(!t){let s=this.getRowIndexAtPixel(e);if(t=this.getRow(s||0),!t)return 1}let{rowTop:n,rowHeight:i}=t;return e-n<i/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;let t=this.rootNode.sibling?1:0,n=this.rootNode.childrenAfterAggFilter;return(n?n.length:0)+t}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let n=e;if(this.rowsToDisplay[0].footer){if(e===0)return 0;n-=1}let i=this.rootNode.childrenAfterSort[n];if(this.gos.get("groupHideOpenParents"))for(;i.expanded&&i.childrenAfterSort&&i.childrenAfterSort.length>0;)i=i.childrenAfterSort[0];return i.rowIndex}getRowBounds(e){if(Pe(this.rowsToDisplay))return null;let t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){let e=this.gos.isAnimateRows();this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;let t=this.gos.isAnimateRows(),i=e.columns.length===0||e.columns.some(s=>s.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:i,keepRenderedRows:!0,animate:t})}onSortChanged(){let e=this.gos.isAnimateRows();this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(e){let t=pn(e),n=new xC(!1,this.rootNode);return(t||this.gos.get("treeData"))&&n.setInactive(),n}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction")||e.rowNodeTransactions==null)return!1;let t=e.rowNodeTransactions.filter(i=>i.add!=null&&i.add.length>0||i.remove!=null&&i.remove.length>0);return t==null||t.length==0}buildRefreshModelParams(e){let t="group",n={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",sort:"sort",pivot:"pivot"};if(j(e)&&(t=n[e]),Pe(t)){ke(`invalid step ${e}, available steps are ${Object.keys(n).join(", ")}`);return}let i=!this.gos.get("suppressAnimationFrame");return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:i}}refreshModel(e){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.isChangeEventsDispatching())return;let t=typeof e=="object"&&"step"in e?e:this.buildRefreshModelParams(e);if(!t||this.isSuppressModelUpdateAfterUpdateTransaction(t))return;let n=this.createChangePath(t.rowNodeTransactions);switch(this.isRefreshingModel=!0,t.step){case"group":this.doRowGrouping(t.rowNodeTransactions,t.rowNodeOrder,n,!!t.afterColumnsChanged);case"filter":this.doFilter(n);case"pivot":this.doPivot(n);case"aggregate":this.doAggregate(n);case"filter_aggregates":this.doFilterAggregates(n);case"sort":this.doSort(t.rowNodeTransactions,n);case"map":this.doRowsToDisplay()}let i=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(n,i),this.isRefreshingModel=!1;let s={type:"modelUpdated",animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack};this.eventService.dispatchEvent(s)}isEmpty(){let e=Pe(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return Pe(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return j(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let n=!1,i=!1,s=[],r=this.gos.get("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(o=>{if(i)return;if(n&&(o===t||o===e)&&(i=!0,o.group&&r)){s.push(...o.allLeafChildren);return}if(!n){if(o!==t&&o!==e)return;n=!0}if(!o.group||!r){s.push(o);return}}),s}setDatasource(e){ke("should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let t=0,n=this.rowsToDisplay.length-1;if(e<=0)return 0;if(xe(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let s=-1,r=-1;for(;;){let o=Math.floor((t+n)/2),a=this.rowsToDisplay[o];if(this.isRowInPixel(a,e)||(a.rowTop<e?t=o+1:a.rowTop>e&&(n=o-1),s===t&&r===n))return o;s=t,r=n}}isRowInPixel(e,t){let n=e.rowTop,i=e.rowTop+e.rowHeight;return n<=t&&i>t}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((t,n)=>e(t,n))}forEachNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:0,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:1,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:2,index:0,includeFooterNodes:t})}forEachPivotNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:3,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){let{nodes:t,callback:n,recursionType:i,includeFooterNodes:s}=e,{index:r}=e,o=a=>{let l=t[0]?.parent;if(!l)return;let c=s&&this.gos.getGrandTotalRow(),u=this.gos.getGroupTotalRowCallback(),h=s&&u({node:l});if(l===this.rootNode){c===a&&(l.createFooter(),n(l.sibling,r++));return}h===a&&(l.createFooter(),n(l.sibling,r++))};o("top");for(let a=0;a<t.length;a++){let l=t[a];if(n(l,r++),l.hasChildren()&&!l.footer){let c=null;switch(i){case 0:c=l.childrenAfterGroup;break;case 1:c=l.childrenAfterAggFilter;break;case 2:c=l.childrenAfterSort;break;case 3:c=l.leafGroup?null:l.childrenAfterSort;break}c&&(r=this.recursivelyWalkNodesAndCallback({nodes:[...c],callback:n,recursionType:i,index:r,includeFooterNodes:s}))}}return o("bottom"),r}doAggregate(e){this.aggregationStage?.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){let t=this.gos.get("treeData"),n=this.columnModel.isPivotActive(),i=o=>{o&&o.forEach(a=>{let l=()=>{a.expanded=e,i(a.childrenAfterGroup)};if(t){j(a.childrenAfterGroup)&&l();return}if(n){!a.leafGroup&&l();return}a.group&&l()})};this.rootNode&&i(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"});let r={type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"};this.eventService.dispatchEvent(r)}doSort(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})}doRowGrouping(e,t,n,i){if(this.groupStage){if(e?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,rowNodeOrder:t,changedPath:n}):this.groupStage.execute({rowNode:this.rootNode,changedPath:n,afterColumnsChanged:i}),this.gos.get("groupSelectsChildren")&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",n)){let r={type:"selectionChanged",source:"rowGroupChanged"};this.eventService.dispatchEvent(r)}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren();this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){this.pivotStage?.execute({rowNode:this.rootNode,changedPath:e})}getCopyOfNodesMap(){return this.nodeManager.getCopyOfNodesMap()}getRowNode(e){if(typeof e=="string"&&e.indexOf(zr.ID_PREFIX_ROW_GROUP)==0){let n;return this.forEachNode(i=>{i.id===e&&(n=i)}),n}return this.nodeManager.getRowNode(e)}setRowData(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){let e={type:"rowDataUpdated"};this.eventService.dispatchEvent(e),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];let n=this.gos.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.executeBatchUpdateRowData()},n)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();let e=[],t=[],n=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(i=>{let s=this.nodeManager.updateRowData(i.rowDataTransaction,void 0);t.push(s),i.callback&&e.push(i.callback.bind(null,s)),typeof i.rowDataTransaction.addIndex=="number"&&(n=!0)}),this.commonUpdateRowData(t,void 0,n),e.length>0&&window.setTimeout(()=>{e.forEach(i=>i())},0),t.length>0){let i={type:"asyncTransactionsFlushed",results:t};this.eventService.dispatchEvent(i)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e,t){this.valueCache.onDataChanged();let n=this.nodeManager.updateRowData(e,t),i=typeof e.addIndex=="number";return this.commonUpdateRowData([n],t,i),n}createRowNodeOrder(){if(this.gos.get("suppressMaintainUnsortedOrder"))return;let t={};if(this.rootNode&&this.rootNode.allLeafChildren)for(let n=0;n<this.rootNode.allLeafChildren.length;n++){let i=this.rootNode.allLeafChildren[n];t[i.id]=n}return t}commonUpdateRowData(e,t,n){if(!this.hasStarted)return;let i=!this.gos.get("suppressAnimationFrame");n&&(t=this.createRowNodeOrder());let s={type:"rowDataUpdated"};this.eventService.dispatchEvent(s),this.refreshModel({step:"group",rowNodeTransactions:e,rowNodeOrder:t,keepRenderedRows:!0,keepEditingRows:!0,animate:i})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){let e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);let n=t.detailNode;n&&n.setRowHeight(n.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.columnModel.isAutoRowHeightActive())return;this.resetRowHeights()}}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}};function Ale(e){e.expansionService.onGroupExpandedOrCollapsed()}function Mle(e,t){e.rowModelHelperService?.getClientSideRowModel()?.refreshModel(t)}function Ple(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachLeafNode(t)}function Fle(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilter(t)}function xle(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilterAndSort(t)}function Ole(e){if(e.columnModel.isAutoRowHeightActive()){G("calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}e.rowModelHelperService?.getClientSideRowModel()?.resetRowHeights()}function Nle(e,t){return e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.updateRowData(t))}function kle(e,t,n){e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.batchUpdateRowData(t,n))}function Lle(e){e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.flushAsyncTransactions())}function Vle(e){return e.selectionService.getBestCostNodeSelection()}var Ble=class extends k{constructor(){super(...arguments),this.beanName="filterStage"}wireBeans(e){this.filterManager=e.filterManager}execute(e){let{changedPath:t}=e;this.filter(t)}filter(e){let t=!!this.filterManager?.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){let n=(i,s)=>{i.hasChildren()&&e&&!s?i.childrenAfterFilter=i.childrenAfterGroup.filter(r=>{let o=r.childrenAfterFilter&&r.childrenAfterFilter.length>0,a=r.data&&this.filterManager.doesRowPassFilter({rowNode:r});return o||a}):i.childrenAfterFilter=i.childrenAfterGroup,i.sibling&&(i.sibling.childrenAfterFilter=i.childrenAfterFilter)};if(this.doingTreeDataFiltering()){let i=(r,o)=>{if(r.childrenAfterGroup)for(let a=0;a<r.childrenAfterGroup.length;a++){let l=r.childrenAfterGroup[a],c=o||this.filterManager.doesRowPassFilter({rowNode:l});l.childrenAfterGroup?i(r.childrenAfterGroup[a],c):n(l,c)}n(r,o)},s=r=>i(r,!1);t.executeFromRootNode(s)}else{let i=s=>n(s,!1);t.forEachChangedNodeDepthFirst(i,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},Gle=class extends k{constructor(){super(...arguments),this.beanName="flattenStage"}wireBeans(e){this.beans=e,this.columnModel=e.columnModel}execute(e){let t=e.rowNode,n=[],i=this.columnModel.isPivotMode(),s=i&&t.leafGroup,r=s?[t]:t.childrenAfterSort,o=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(o,r,n,i,0);let a=n.length>0;if(!s&&a&&o.grandTotalRow){t.createFooter();let c=o.grandTotalRow==="top";this.addRowNodeToRowsToDisplay(o,t.sibling,n,0,c)}return n}getFlattenDetails(){let e=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:this.gos.isGroupMultiAutoColumn(),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:this.gos.getGrandTotalRow(),groupTotalRow:this.gos.getGroupTotalRowCallback()}}recursivelyAddToRowsToDisplay(e,t,n,i,s){if(!pn(t))for(let r=0;r<t.length;r++){let o=t[r],a=o.hasChildren(),l=i&&!a,c=e.groupRemoveSingleChildren&&a&&o.childrenAfterGroup.length===1,u=e.groupRemoveLowestSingleChildren&&a&&o.leafGroup&&o.childrenAfterGroup.length===1,h=i&&o.leafGroup,f=e.hideOpenParents&&o.expanded&&!o.master&&!h;if(!l&&!f&&!c&&!u&&this.addRowNodeToRowsToDisplay(e,o,n,s),!(i&&o.leafGroup)){if(a){let v=c||u;if(o.expanded||v){let y=e.groupTotalRow({node:o});y||o.destroyFooter();let C=v?s:s+1;y==="top"&&(o.createFooter(),this.addRowNodeToRowsToDisplay(e,o.sibling,n,C)),this.recursivelyAddToRowsToDisplay(e,o.childrenAfterSort,n,i,C),y==="bottom"&&(o.createFooter(),this.addRowNodeToRowsToDisplay(e,o.sibling,n,C))}}else if(o.master&&o.expanded){let v=this.createDetailNode(o);this.addRowNodeToRowsToDisplay(e,v,n,s)}}}}addRowNodeToRowsToDisplay(e,t,n,i,s){s?n.unshift(t):n.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:i)}createDetailNode(e){if(j(e.detailNode))return e.detailNode;let t=new zr(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,j(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t}},Hle=class extends k{constructor(){super(...arguments),this.beanName="immutableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){let e=this.gos.exists("getRowId");return this.gos.get("resetRowDataOnUpdate")?!1:e}setRowData(e){let t=this.createTransactionForRowData(e);if(!t)return;let[n,i]=t;this.clientSideRowModel.updateRowData(n,i)}createTransactionForRowData(e){if(Pe(this.clientSideRowModel)){ke("ImmutableService only works with ClientSideRowModel");return}let t=this.gos.getRowIdCallback();if(t==null){ke("ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");return}let n={remove:[],update:[],add:[]},i=this.clientSideRowModel.getCopyOfNodesMap(),r=this.gos.get("suppressMaintainUnsortedOrder")?void 0:{};return j(e)&&e.forEach((o,a)=>{let l=t({data:o,level:0}),c=i[l];r&&(r[l]=a),c?(c.data!==o&&n.update.push(o),i[l]=void 0):n.add.push(o)}),$i(i,(o,a)=>{a&&n.remove.push(a.data)}),[n,r]}onRowDataUpdated(){let e=this.gos.get("rowData");e&&(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))}},Ule=class extends k{constructor(){super(...arguments),this.beanName="sortService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.rowNodeSorter=e.rowNodeSorter,this.showRowGroupColsService=e.showRowGroupColsService}sort(e,t,n,i,s,r){let o=this.gos.get("groupMaintainOrder"),a=this.columnModel.getCols().some(f=>f.isRowGroupActive()),l={};n&&i&&(l=this.calculateDirtyNodes(i));let c=this.columnModel.isPivotMode(),u=this.gos.getCallback("postSortRows"),h=f=>{this.pullDownGroupDataForHideOpenParents(f.childrenAfterAggFilter,!0);let g=c&&f.leafGroup;if(o&&a&&!f.leafGroup&&!r){let C=this.funcColsService.getRowGroupColumns()?.[f.level+1]?.getSort()===null,E=f.childrenAfterAggFilter.slice(0);if(f.childrenAfterSort&&!C){let I={};f.childrenAfterSort.forEach((T,x)=>{I[T.id]=x}),E.sort((T,x)=>(I[T.id]??0)-(I[x.id]??0))}f.childrenAfterSort=E}else!t||g?f.childrenAfterSort=f.childrenAfterAggFilter.slice(0):n?f.childrenAfterSort=this.doDeltaSort(f,l,s,e):f.childrenAfterSort=this.rowNodeSorter.doFullSort(f.childrenAfterAggFilter,e);if(f.sibling&&(f.sibling.childrenAfterSort=f.childrenAfterSort),this.updateChildIndexes(f),u){let y={nodes:f.childrenAfterSort};u(y)}};s&&s.forEachChangedNodeDepthFirst(h),this.updateGroupDataForHideOpenParents(s)}calculateDirtyNodes(e){let t={},n=i=>{i&&i.forEach(s=>t[s.id]=!0)};return e&&e.forEach(i=>{n(i.add),n(i.update),n(i.remove)}),t}doDeltaSort(e,t,n,i){let s=e.childrenAfterAggFilter,r=e.childrenAfterSort;if(!r)return this.rowNodeSorter.doFullSort(s,i);let o={},a=[];s.forEach(h=>{t[h.id]||!n.canSkip(h)?a.push(h):o[h.id]=!0});let l=r.filter(h=>o[h.id]),c=(h,f)=>({currentPos:f,rowNode:h}),u=a.map(c).sort((h,f)=>this.rowNodeSorter.compareRowNodes(i,h,f));return this.mergeSortedArrays(i,u,l.map(c)).map(({rowNode:h})=>h)}mergeSortedArrays(e,t,n){let i=[],s=0,r=0;for(;s<t.length&&r<n.length;)this.rowNodeSorter.compareRowNodes(e,t[s],n[r])<0?i.push(t[s++]):i.push(n[r++]);for(;s<t.length;)i.push(t[s++]);for(;r<n.length;)i.push(n[r++]);return i}updateChildIndexes(e){if(Pe(e.childrenAfterSort))return;let t=e.childrenAfterSort;for(let n=0;n<t.length;n++){let i=t[n],s=n===0,r=n===e.childrenAfterSort.length-1;i.setFirstChild(s),i.setLastChild(r),i.setChildIndex(n)}}updateGroupDataForHideOpenParents(e){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return G("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;let t=n=>{this.pullDownGroupDataForHideOpenParents(n.childrenAfterSort,!1),n.childrenAfterSort.forEach(i=>{i.hasChildren()&&t(i)})};e&&e.executeFromRootNode(n=>t(n))}pullDownGroupDataForHideOpenParents(e,t){!this.gos.get("groupHideOpenParents")||Pe(e)||e.forEach(n=>{(this.showRowGroupColsService?.getShowRowGroupCols()??[]).forEach(s=>{let r=s.getColDef().showRowGroup;if(typeof r!="string"){ke("groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}let o=r,a=this.columnModel.getColDefCol(o);if(a!==n.rowGroupColumn)if(t)n.setGroupValue(s.getId(),void 0);else{let c=n.getFirstChildOfFirstChild(a);c&&n.setGroupValue(s.getId(),c.key)}})})}},Wle=class extends k{constructor(){super(...arguments),this.beanName="sortStage"}wireBeans(e){this.sortService=e.sortService,this.sortController=e.sortController}execute(e){let t=this.sortController.getSortOptions(),n=j(t)&&t.length>0,i=n&&j(e.rowNodeTransactions)&&this.gos.get("deltaSort"),s=t.some(r=>this.gos.isColumnsSortingCoupledToGroup()?r.column.isPrimary()&&r.column.isRowGroupActive():!!r.column.getColDef().showRowGroup);this.sortService.sort(t,n,i,e.rowNodeTransactions,e.changedPath,s)}},jR="32.0.2",zG={version:jR,moduleName:"@ag-grid-community/client-side-row-model-core",rowModel:"clientSide",beans:[Ile,Ble,Wle,Gle,Ule,Hle]},jle={version:jR,moduleName:"@ag-grid-community/client-side-row-model-api",beans:[WG],apiFunctions:{onGroupExpandedOrCollapsed:Ale,refreshClientSideRowModel:Mle,forEachLeafNode:Ple,forEachNodeAfterFilter:Fle,forEachNodeAfterFilterAndSort:xle,resetRowHeights:Ole,applyTransaction:Nle,applyTransactionAsync:kle,flushAsyncTransactions:Lle,getBestCostNodeSelection:Vle},dependantModules:[zG,ble]},zle={version:jR,moduleName:"@ag-grid-community/client-side-row-model",dependantModules:[zG,jle]},$le=class extends k{setBeans(e){this.beans=e}getFileName(e){let t=this.getDefaultFileExtension();return(e==null||!e.length)&&(e=this.getDefaultFileName()),e.indexOf(".")===-1?`${e}.${t}`:e}getData(e){let t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},qle=class{constructor(e){this.groupColumns=[];let{columnModel:t,funcColsService:n,columnNameService:i,valueService:s,gos:r,processCellCallback:o,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c}=e;this.columnModel=t,this.funcColsService=n,this.columnNameService=i,this.valueService=s,this.gos=r,this.processCellCallback=o,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=c}prepare(e){this.groupColumns=e.filter(t=>!!t.getColDef().showRowGroup)}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,n,i,s){let o=(!this.gos.get("groupHideOpenParents")||s.footer)&&this.shouldRenderGroupSummaryCell(s,e,t)?this.createValueForGroupNode(e,s):this.valueService.getValue(e,s);return this.processCell({accumulatedRowIndex:n,rowNode:s,column:e,value:o,processCellCallback:this.processCellCallback,type:i})}shouldRenderGroupSummaryCell(e,t,n){if(!(e&&e.group))return!1;if(this.groupColumns.indexOf(t)!==-1){if(e.groupData?.[t.getId()]!=null||this.gos.isRowModelType("serverSide")&&e.group)return!0;if(e.footer&&e.level===-1){let o=t.getColDef();return o==null||o.showRowGroup===!0||o.showRowGroup===this.funcColsService.getRowGroupColumns()[0].getId()}}let r=this.gos.isGroupUseEntireRow(this.columnModel.isPivotMode());return n===0&&r}getHeaderName(e,t){return e?e(this.gos.addGridCommonParams({column:t})):this.columnNameService.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:e,node:t}));let n=this.gos.get("treeData"),i=this.gos.get("suppressGroupMaintainValueType"),s=l=>{if(n||i)return l.key;let c=l.groupData?.[e.getId()];return!c||!l.rowGroupColumn||l.rowGroupColumn.getColDef().useValueFormatterForExport===!1?c:this.valueService.formatValue(l.rowGroupColumn,l,c)??c},r=t.footer,o=[s(t)];if(!this.gos.isGroupMultiAutoColumn())for(;t.parent;)t=t.parent,o.push(s(t));let a=o.reverse().join(" -> ");return r?`Total ${a}`:a}processCell(e){let{accumulatedRowIndex:t,rowNode:n,column:i,value:s,processCellCallback:r,type:o}=e;return r?{value:r(this.gos.addGridCommonParams({accumulatedRowIndex:t,column:i,node:n,value:s,type:o,parseValue:a=>this.valueService.parseValue(i,n,a,this.valueService.getValue(i,n)),formatValue:a=>this.valueService.formatValue(i,n,a)??a}))??""}:i.getColDef().useValueFormatterForExport!==!1?{value:s??"",valueFormatted:this.valueService.formatValue(i,n,s)}:{value:s??""}}},Kle=class{static download(e,t){let n=document.defaultView||window;if(!n){G("There is no `window` associated with the current `document`");return}let i=document.createElement("a"),s=n.URL.createObjectURL(t);i.setAttribute("href",s),i.setAttribute("download",e),i.style.display="none",document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:n})),document.body.removeChild(i),n.setTimeout(()=>{n.URL.revokeObjectURL(s)},0)}},YV=`\r
`,Qle=class extends qle{constructor(e){super(e),this.isFirstLine=!0,this.result="";let{suppressQuotes:t,columnSeparator:n}=e;this.suppressQuotes=t,this.columnSeparator=n}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,YV),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((n,i)=>{i!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(n.data.value||""),n.mergeAcross&&this.appendEmptyCells(n.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,n,i){n!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(i)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,n){t!=0&&(this.result+=this.columnSeparator);let i=this.extractRowCellValue(e,t,t,"csv",n);this.result+=this.putInQuotes(i.valueFormatted??i.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(G("unknown value type during csv conversion"),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=YV),this.isFirstLine=!1}},Yle=class extends $le{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.gridSerializer=e.gridSerializer}postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(e){let t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){G("Export cancelled. Export is not allowed as per your configuration.");return}let t=this.getMergedParams(e),n=this.getData(t),i=new Blob(["\uFEFF",n],{type:"text/plain"}),s=typeof t.fileName=="function"?t.fileName(this.gos.getGridCommonParams()):t.fileName;Kle.download(this.getFileName(s),i)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){let n=t?Object.assign({},e):this.getMergedParams(e);return this.getData(n)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){let{columnModel:t,columnNameService:n,funcColsService:i,valueService:s,gos:r}=this,{processCellCallback:o,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c,suppressQuotes:u,columnSeparator:h}=e;return new Qle({columnModel:t,columnNameService:n,funcColsService:i,valueService:s,gos:r,processCellCallback:o||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:c||void 0,suppressQuotes:u||!1,columnSeparator:h||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function Jle(e,t){return e.csvCreator?.getDataAsCsv(t)}function Xle(e,t){e.csvCreator?.exportDataAsCsv(t)}var Zle=class extends k{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.selectionService=e.selectionService,this.rowNodeSorter=e.rowNodeSorter,this.sortController=e.sortController}serialize(e,t={}){let{allColumns:n,columnKeys:i,skipRowGroups:s}=t,r=this.getColumnsToExport(n,s,i);return NX(this.prepareSession(r),this.prependContent(t),this.exportColumnGroups(t,r),this.exportHeaders(t,r),this.processPinnedTopRows(t,r),this.processRows(t,r),this.processPinnedBottomRows(t,r),this.appendContent(t))(e).parse()}processRow(e,t,n,i){let s=t.shouldRowBeSkipped||(()=>!1),r=this.gos.get("groupRemoveSingleChildren"),o=this.gos.get("groupRemoveLowestSingleChildren"),l=t.rowPositions!=null||!!t.onlySelected,c=this.gos.get("groupHideOpenParents")&&!l,u=this.columnModel.isPivotMode()?i.leafGroup:!i.group,h=!!i.footer,f=o&&i.leafGroup,g=i.allChildrenCount===1&&i.childrenAfterGroup?.length===1&&(r||f);if(!u&&!h&&(t.skipRowGroups||g||c)||t.onlySelected&&!i.isSelected()||t.skipPinnedTop&&i.rowPinned==="top"||t.skipPinnedBottom&&i.rowPinned==="bottom"||i.level===-1&&!u&&!h||s(this.gos.addGridCommonParams({node:i})))return;let C=e.onNewBodyRow(i);if(n.forEach((E,I)=>{C.onColumn(E,I,i)}),t.getCustomContentBelowRow){let E=t.getCustomContentBelowRow(this.gos.addGridCommonParams({node:i}));E&&e.addCustomContent(E)}}appendContent(e){return t=>{let n=e.appendContent;return n&&t.addCustomContent(n),t}}prependContent(e){return t=>{let n=e.prependContent;return n&&t.addCustomContent(n),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return n=>{if(!e.skipColumnGroupHeaders){let i=new cB,s=this.visibleColsService.createGroups({columns:t,idCreator:i,pinned:null,isStandaloneStructure:!0});this.recursivelyAddHeaderGroups(s,n,e.processGroupHeaderCallback)}return n}}exportHeaders(e,t){return n=>{if(!e.skipColumnHeaders){let i=n.onNewHeaderRow();t.forEach((s,r)=>{i.onColumn(s,r,void 0)})}return n}}processPinnedTopRows(e,t){return n=>{let i=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter(s=>s.rowPinned==="top").sort((s,r)=>s.rowIndex-r.rowIndex).map(s=>this.pinnedRowModel.getPinnedTopRow(s.rowIndex)).forEach(i):this.pinnedRowModel.forEachPinnedTopRow(i),n}}processRows(e,t){return n=>{let i=this.rowModel,s=i.getType(),r=s==="clientSide",o=s==="serverSide",a=!r&&e.onlySelected,l=this.processRow.bind(this,n,e,t),{exportedRows:c="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(u=>u.rowPinned==null).sort((u,h)=>u.rowIndex-h.rowIndex).map(u=>i.getRow(u.rowIndex)).forEach(l);else if(this.columnModel.isPivotMode())r?i.forEachPivotNode(l,!0):o?i.forEachNodeAfterFilterAndSort(l,!0):i.forEachNode(l);else if(e.onlySelectedAllPages||a){let u=this.selectionService.getSelectedNodes();this.replicateSortedOrder(u),u.forEach(l)}else c==="all"?i.forEachNode(l):r||o?i.forEachNodeAfterFilterAndSort(l,!0):i.forEachNode(l);return n}}replicateSortedOrder(e){let t=this.sortController.getSortOptions(),n=(i,s)=>i.rowIndex!=null&&s.rowIndex!=null?i.rowIndex-s.rowIndex:i.level===s.level?i.parent?.id===s.parent?.id?this.rowNodeSorter.compareRowNodes(t,{rowNode:i,currentPos:i.rowIndex??-1},{rowNode:s,currentPos:s.rowIndex??-1}):n(i.parent,s.parent):i.level>s.level?n(i.parent,s):n(i,s.parent);e.sort(n)}processPinnedBottomRows(e,t){return n=>{let i=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter(s=>s.rowPinned==="bottom").sort((s,r)=>s.rowIndex-r.rowIndex).map(s=>this.pinnedRowModel.getPinnedBottomRow(s.rowIndex)).forEach(i):this.pinnedRowModel.forEachPinnedBottomRow(i),n}}getColumnsToExport(e=!1,t=!1,n){let i=this.columnModel.isPivotMode();if(n&&n.length)return this.columnModel.getColsForKeys(n);let s=this.gos.get("treeData"),r=[];return e&&!i?r=this.columnModel.getCols():r=this.visibleColsService.getAllCols(),t&&!s&&(r=r.filter(o=>o.getColId()!==yf)),r}recursivelyAddHeaderGroups(e,t,n){let i=[];e.forEach(s=>{let r=s;r.getChildren&&r.getChildren().forEach(o=>i.push(o))}),e.length>0&&Nt(e[0])&&this.doAddHeaderHeader(t,e,n),i&&i.length>0&&this.recursivelyAddHeaderGroups(i,t,n)}doAddHeaderHeader(e,t,n){let i=e.onNewHeaderGroupingRow(),s=0;t.forEach(r=>{let o=r,a;n?a=n(this.gos.addGridCommonParams({columnGroup:o})):a=this.columnNameService.getDisplayNameForColumnGroup(o,"header");let l=o.getLeafColumns().reduce((c,u,h,f)=>{let g=xe(c);return u.getColumnGroupShow()==="open"?(!g||g[1]!=null)&&(g=[h],c.push(g)):g&&g[1]==null&&(g[1]=h-1),h===f.length-1&&g&&g[1]==null&&(g[1]=h),c},[]);i.onColumn(o,a||"",s++,o.getLeafColumns().length-1,l)})}},zR="32.0.2",$G={version:zR,moduleName:"@ag-grid-community/csv-export-core",beans:[Yle,Zle]},ece={version:zR,moduleName:"@ag-grid-community/csv-export-api",apiFunctions:{getDataAsCsv:Jle,exportDataAsCsv:Xle},dependantModules:[$G]},tce={version:zR,moduleName:"@ag-grid-community/csv-export",dependantModules:[$G,ece]};var nce=e=>F(void 0,null,function*(){let t=0,n=[],i=new WritableStream({write:o=>{n.push(o),t+=o.length}}),s=new ReadableStream({start:o=>{let a=new FileReader;a.onload=l=>{l.target?.result&&o.enqueue(l.target.result),o.close()},a.readAsArrayBuffer(e)}}),r=new window.CompressionStream("deflate-raw");return yield s.pipeThrough(r).pipeTo(i),{size:t,content:new Blob(n)}}),ice=e=>F(void 0,null,function*(){let t=new Blob([e]),{size:n,content:i}=yield nce(t),s=new Uint8Array(yield i.arrayBuffer());return{size:n,content:s}}),sce=e=>{let t=e.getHours();return t<<=6,t=t|e.getMinutes(),t<<=5,t=t|e.getSeconds()/2,t},rce=e=>{let t=e.getFullYear()-1980;return t<<=4,t=t|e.getMonth()+1,t<<=5,t=t|e.getDate(),t};function Pn(e,t){let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e&255),e>>>=8;return n}var JV=e=>{if(!e.length)return 0;let t=-1,n=0,i=0,s=0;for(let r=0;r<e.length;r++)n=e[r],i=(t^n)&255,s=oce[i],t=t>>>8^s;return t^-1},XV=e=>e.length?JV(typeof e=="string"?new TextEncoder().encode(e):e):0,oce=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),qG=(e,t,n,i,s,r)=>{let{content:o,path:a,created:l}=e,c=sce(l),u=rce(l),h=XV(s),f=r!==void 0?r:i,g=qX(a),v=g!==a,y="";if(v){let T=Pn(1,1)+Pn(XV(g),4)+g;y="up"+Pn(T.length,2)+T}let C="\0"+(v?"\0\b":"\0\0")+Pn(t?8:0,2)+Pn(c,2)+Pn(u,2)+Pn(f?h:0,4)+Pn(r??i,4)+Pn(i,4)+Pn(g.length,2)+Pn(y.length,2),E="PK"+C+g+y,I="PK\0"+C+"\0\0\0\0\0\0"+(o?"\0\0\0\0":"\0\0\0")+Pn(n,4)+g+y;return{localFileHeader:Uint8Array.from(E,T=>T.charCodeAt(0)),centralDirectoryHeader:Uint8Array.from(I,T=>T.charCodeAt(0))}},KG=e=>{let t;if(typeof e=="string"){let n=atob(e.split(";base64,")[1]);t=Uint8Array.from(n,i=>i.charCodeAt(0))}else t=e;return{size:t.length,content:t}},ace=(e,t)=>F(void 0,null,function*(){let{content:n}=e,{size:i,content:s}=n?KG(n):{size:0,content:Uint8Array.from([])},r,o,a=!1;if(e.type==="file"&&s&&i>0){let u=yield ice(s);r=u.content,o=u.size,a=!0}let c=qG(e,a,t,i,s,o);return se(B({},c),{content:r||s,isCompressed:a})}),lce=(e,t)=>{let{content:n}=e,{content:i}=n?KG(n):{content:Uint8Array.from([])},s=qG(e,!1,t,i.length,i,void 0);return se(B({},s),{content:i,isCompressed:!1})},cce=(e,t,n)=>{let i="PK\0\0\0\0"+Pn(e,2)+Pn(e,2)+Pn(t,4)+Pn(n,4)+"\0\0";return Uint8Array.from(i,s=>s.charCodeAt(0))},QG=class{static addFolders(e){e.forEach(this.addFolder.bind(this))}static addFolder(e){this.folders.push({path:e,created:new Date,isBase64:!1,type:"folder"})}static addFile(e,t,n=!1){this.files.push({path:e,created:new Date,content:n?t:new TextEncoder().encode(t),isBase64:n,type:"file"})}static getZipFile(e="application/zip"){return F(this,null,function*(){let t=yield this.buildCompressedFileStream();return this.clearStream(),new Blob([t],{type:e})})}static getUncompressedZipFile(e="application/zip"){let t=this.buildFileStream();return this.clearStream(),new Blob([t],{type:e})}static clearStream(){this.folders=[],this.files=[]}static packageFiles(e){let t=0,n=0;for(let c of e){let{localFileHeader:u,centralDirectoryHeader:h,content:f}=c;t+=u.length+f.length,n+=h.length}let i=new Uint8Array(t),s=new Uint8Array(n),r=0,o=0;for(let c of e){let{localFileHeader:u,centralDirectoryHeader:h,content:f}=c;i.set(u,r),r+=u.length,i.set(f,r),r+=f.length,s.set(h,o),o+=h.length}let a=cce(e.length,n,t),l=new Uint8Array(i.length+s.length+a.length);return l.set(i),l.set(s,i.length),l.set(a,i.length+s.length),l}static buildCompressedFileStream(){return F(this,null,function*(){let e=[...this.folders,...this.files],t=[],n=0;for(let i of e){let s=yield ace(i,n),{localFileHeader:r,content:o}=s;t.push(s),n+=r.length+o.length}return this.packageFiles(t)})}static buildFileStream(){let e=[...this.folders,...this.files],t=[],n=0;for(let i of e){let s=lce(i,n),{localFileHeader:r,content:o}=s;t.push(s),n+=r.length+o.length}return this.packageFiles(t)}};QG.folders=[];QG.files=[];var uce=class extends ase{wireBeans(e){this.beans=e}constructor(e,t,n){super(e),this.parentCache=t,this.params=n,this.startRow=e*n.blockSize,this.endRow=this.startRow+n.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(e,t,n){j(t)?e.setDataAndId(t,n.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){let e=this.createLoadParams();if(Pe(this.params.datasource.getRows)){G("datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(e,t,n){this.rowNodes.forEach((i,s)=>{this.startRow+s<n&&e(i,t.next())})}getLastAccessed(){return this.lastAccessed}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.next());let n=e-this.startRow;return this.rowNodes[n]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let e=0;e<this.params.blockSize;e++){let t=this.startRow+e,n=new zr(this.beans);n.setRowHeight(this.params.rowHeight),n.uiLevel=0,n.setRowIndex(t),n.setRowTop(this.params.rowHeight*t),this.rowNodes.push(n)}}processServerResult(e){this.rowNodes.forEach((n,i)=>{let s=e.rowData?e.rowData[i]:void 0;!n.id&&n.alreadyRendered&&s&&(this.rowNodes[i]=new zr(this.beans),this.rowNodes[i].setRowIndex(n.rowIndex),this.rowNodes[i].setRowTop(n.rowTop),this.rowNodes[i].setRowHeight(n.rowHeight),n.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[i],s,this.startRow+i)});let t=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,t)}destroy(){this.rowNodes.forEach(e=>{e.clearRowTopAndRowIndex()}),super.destroy()}},dce=2,hce=class extends k{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}wireBeans(e){this.rowRenderer=e.rowRenderer,this.focusService=e.focusService}getRow(e,t=!1){let n=Math.floor(e/this.params.blockSize),i=this.blocks[n];if(!i){if(t)return;i=this.createBlock(n)}return i.getRow(e)}createBlock(e){let t=this.createBean(new uce(e,this,this.params));return this.blocks[t.getId()]=t,this.blockCount++,this.purgeBlocksIfNeeded(t),this.params.rowNodeBlockLoader.addBlock(t),t}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(t=>t.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e)),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(this.gos.get("debug")&&Ki(`InfiniteCache - onPageLoaded: page = ${e.getId()}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){let t=this.getBlocksInOrder().filter(o=>o!=e),n=(o,a)=>a.getLastAccessed()-o.getLastAccessed();t.sort(n);let i=this.params.maxBlocksInCache>0,s=i?this.params.maxBlocksInCache-1:null,r=dce-1;t.forEach((o,a)=>{let l=o.getState()==="needsLoading"&&a>=r,c=i?a>=s:!1;if(l||c){if(this.isBlockCurrentlyDisplayed(o)||this.isBlockFocused(o))return;this.removeBlockFromCache(o)}})}isBlockFocused(e){let t=this.focusService.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;let n=e.getStartRow(),i=e.getEndRow();return t.rowIndex>=n&&t.rowIndex<i}isBlockCurrentlyDisplayed(e){let t=e.getStartRow(),n=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(t,n)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){let i=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<i&&(this.rowCount=i)}}setRowCount(e,t){this.rowCount=e,j(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){let t=new Au;this.getBlocksInOrder().forEach(n=>n.forEachNode(e,t,this.rowCount))}getBlocksInOrder(){let e=(n,i)=>n.getId()-i.getId();return Ko(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();let e={type:"storeUpdated"};this.eventService.dispatchEvent(e)}}destroyAllBlocksPastVirtualRowCount(){let e=[];this.getBlocksInOrder().forEach(t=>{t.getId()*this.params.blockSize>=this.rowCount&&e.push(t)}),e.length>0&&e.forEach(t=>this.destroyBlock(t))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){let n=[],i=-1,s=!1,r=new Au,o=!1;return this.getBlocksInOrder().forEach(l=>{if(!o){if(s&&i+1!==l.getId()){o=!0;return}i=l.getId(),l.forEachNode(c=>{let u=c===e||c===t;(s||u)&&n.push(c),u&&(s=!s)},r,this.rowCount)}}),o||s?[]:n}},fce=class extends k{constructor(){super(...arguments),this.beanName="rowModel"}wireBeans(e){this.filterManager=e.filterManager,this.sortController=e.sortController,this.selectionService=e.selectionService,this.rowRenderer=e.rowRenderer,this.rowNodeBlockLoader=e.rowNodeBlockLoader}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){this.gos.isRowModelType("infinite")&&(this.rowHeight=this.gos.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&G("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.onCacheUpdated.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=this.gos.getRowHeightAsNumber(),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let e;this.cacheParams?e=this.isSortModelDifferent():e=!0,e&&this.reset()}isSortModelDifferent(){return!wC(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,t):[]}reset(){if(!this.datasource)return;this.gos.getRowIdCallback()!=null||this.selectionService.reset("rowDataChanged"),this.resetCache()}createModelUpdatedEvent(){return{type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1}}resetCache(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager?.getFilterModel()??{},sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:this.gos.getRowHeightAsNumber(),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new Au},this.infiniteCache=this.createBean(new hce(this.cacheParams)),this.eventService.dispatchEventOnce({type:"rowCountReady"});let e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}updateRowHeights(){this.forEachNode(t=>{t.setRowHeight(this.rowHeight),t.setRowTop(this.rowHeight*t.rowIndex)});let e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){let e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}getRow(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)}getRowNode(e){let t;return this.forEachNode(n=>{n.id===e&&(t=n)}),t}forEachNode(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){let t=Math.floor(e/this.rowHeight),n=this.getRowCount()-1;return t>n?n:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(e,t){this.infiniteCache&&this.infiniteCache.setRowCount(e,t)}};function pce(e){e.rowModelHelperService?.getInfiniteRowModel()?.refreshCache()}function gce(e){e.rowModelHelperService?.getInfiniteRowModel()?.purgeCache()}function mce(e){return e.rowModelHelperService?.getInfiniteRowModel()?.getRowCount()}function vce(e){return e.rowModelHelperService?.getInfiniteRowModel()?.isLastRowIndexKnown()}var $R="32.0.2",YG={version:$R,moduleName:"@ag-grid-community/infinite-row-model-core",rowModel:"infinite",beans:[fce],dependantModules:[cse]},Cce={version:$R,moduleName:"@ag-grid-community/infinite-row-model-api",beans:[WG],apiFunctions:{refreshInfiniteCache:pce,purgeInfiniteCache:gce,getInfiniteRowCount:mce,isLastRowIndexKnown:vce},dependantModules:[YG,Ele]},yce={version:$R,moduleName:"@ag-grid-community/infinite-row-model",dependantModules:[YG,Cce]};Yn.__registerModules([LG,zle,yce,tce],!1,void 0);var JG=(()=>{let t=class t extends jG{setViewContainerRef(i,s){this.viewContainerRef=i,this.angularFrameworkOverrides=s}createWrapper(i){let s=this.angularFrameworkOverrides,r=this;class o extends qR{init(c){s.runInsideAngular(()=>{super.init(c),this._componentRef.changeDetectorRef.detectChanges()})}createComponent(){return s.runInsideAngular(()=>r.createComponent(i))}hasMethod(c){return a.getFrameworkComponentInstance()[c]!=null}callMethod(c,u){let h=this.getFrameworkComponentInstance();return s.runInsideAngular(()=>a.getFrameworkComponentInstance()[c].apply(h,u))}addMethod(c,u){a[c]=u}}let a=new o;return a}createComponent(i){return this.viewContainerRef.createComponent(i)}};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=_r(t)))(r||t)}})(),t.\u0275prov=te({token:t,factory:t.\u0275fac});let e=t;return e})(),qR=class{init(t){this._params=t,this._componentRef=this.createComponent(),this._agAwareComponent=this._componentRef.instance,this._frameworkComponentInstance=this._componentRef.instance,this._eGui=this._componentRef.location.nativeElement,Qi(this._eGui),this._agAwareComponent.agInit(this._params)}getGui(){return this._eGui}getRootElement(){return this._eGui.firstChild}destroy(){this._frameworkComponentInstance&&typeof this._frameworkComponentInstance.destroy=="function"&&this._frameworkComponentInstance.destroy(),this._componentRef&&this._componentRef.destroy()}getFrameworkComponentInstance(){return this._frameworkComponentInstance}},XG=(()=>{let t=class t extends HR{constructor(i){super("angular"),this._ngZone=i,this.isRunningWithinTestZone=!1,this.wrapIncoming=(s,r)=>this.runOutside(s,r),this.wrapOutgoing=s=>this.runInsideAngular(s),this.isRunningWithinTestZone=window?.AG_GRID_UNDER_TEST??!!window?.Zone?.AsyncTestZoneSpec,this._ngZone?this.isRunningWithinTestZone?this.runOutside=(s,r)=>r==="resize-observer"||r==="popupPositioning"?this._ngZone.runOutsideAngular(s):s():this.runOutside=s=>this._ngZone.runOutsideAngular(s):this.runOutside=s=>s()}get shouldWrapOutgoing(){return this._ngZone&&ue.isInAngularZone()}isFrameworkComponent(i){if(!i)return!1;let s=i.prototype;return s&&"agInit"in s}runInsideAngular(i){return this._ngZone?this._ngZone.run(i):i()}runOutsideAngular(i,s){return this.runOutside(i,s)}};t.\u0275fac=function(s){return new(s||t)(Y(ue))},t.\u0275prov=te({token:t,factory:t.\u0275fac});let e=t;return e})(),ZG=(()=>{let t=class t{constructor(i,s,r,o){this.viewContainerRef=s,this.angularFrameworkOverrides=r,this.frameworkComponentWrapper=o,this._initialised=!1,this._destroyed=!1,this._fullyReady=new Promise(a=>{this._resolveFullyReady=a}),this.statusBar=void 0,this.sideBar=void 0,this.suppressContextMenu=void 0,this.preventDefaultOnContextMenu=void 0,this.allowContextMenuWithControlKey=void 0,this.columnMenu=void 0,this.suppressMenuHide=void 0,this.enableBrowserTooltips=void 0,this.tooltipTrigger=void 0,this.tooltipShowDelay=void 0,this.tooltipHideDelay=void 0,this.tooltipMouseTrack=void 0,this.tooltipShowMode=void 0,this.tooltipInteraction=void 0,this.popupParent=void 0,this.copyHeadersToClipboard=void 0,this.copyGroupHeadersToClipboard=void 0,this.clipboardDelimiter=void 0,this.suppressCopyRowsToClipboard=void 0,this.suppressCopySingleCellRanges=void 0,this.suppressLastEmptyLineOnPaste=void 0,this.suppressClipboardPaste=void 0,this.suppressClipboardApi=void 0,this.suppressCutToClipboard=void 0,this.columnDefs=void 0,this.defaultColDef=void 0,this.defaultColGroupDef=void 0,this.columnTypes=void 0,this.dataTypeDefinitions=void 0,this.maintainColumnOrder=void 0,this.suppressFieldDotNotation=void 0,this.headerHeight=void 0,this.groupHeaderHeight=void 0,this.floatingFiltersHeight=void 0,this.pivotHeaderHeight=void 0,this.pivotGroupHeaderHeight=void 0,this.allowDragFromColumnsToolPanel=void 0,this.suppressMovableColumns=void 0,this.suppressColumnMoveAnimation=void 0,this.suppressDragLeaveHidesColumns=void 0,this.suppressRowGroupHidesColumns=void 0,this.colResizeDefault=void 0,this.suppressAutoSize=void 0,this.autoSizePadding=void 0,this.skipHeaderOnAutoSize=void 0,this.autoSizeStrategy=void 0,this.components=void 0,this.editType=void 0,this.singleClickEdit=void 0,this.suppressClickEdit=void 0,this.readOnlyEdit=void 0,this.stopEditingWhenCellsLoseFocus=void 0,this.enterNavigatesVertically=void 0,this.enterNavigatesVerticallyAfterEdit=void 0,this.enableCellEditingOnBackspace=void 0,this.undoRedoCellEditing=void 0,this.undoRedoCellEditingLimit=void 0,this.defaultCsvExportParams=void 0,this.suppressCsvExport=void 0,this.defaultExcelExportParams=void 0,this.suppressExcelExport=void 0,this.excelStyles=void 0,this.quickFilterText=void 0,this.cacheQuickFilter=void 0,this.includeHiddenColumnsInQuickFilter=void 0,this.quickFilterParser=void 0,this.quickFilterMatcher=void 0,this.applyQuickFilterBeforePivotOrAgg=void 0,this.excludeChildrenWhenTreeDataFiltering=void 0,this.enableAdvancedFilter=void 0,this.advancedFilterModel=void 0,this.includeHiddenColumnsInAdvancedFilter=void 0,this.advancedFilterParent=void 0,this.advancedFilterBuilderParams=void 0,this.suppressAdvancedFilterEval=void 0,this.enableCharts=void 0,this.chartThemes=void 0,this.customChartThemes=void 0,this.chartThemeOverrides=void 0,this.chartToolPanelsDef=void 0,this.chartMenuItems=void 0,this.loadingCellRenderer=void 0,this.loadingCellRendererParams=void 0,this.loadingCellRendererSelector=void 0,this.localeText=void 0,this.masterDetail=void 0,this.keepDetailRows=void 0,this.keepDetailRowsCount=void 0,this.detailCellRenderer=void 0,this.detailCellRendererParams=void 0,this.detailRowHeight=void 0,this.detailRowAutoHeight=void 0,this.context=void 0,this.alignedGrids=void 0,this.tabIndex=void 0,this.rowBuffer=void 0,this.valueCache=void 0,this.valueCacheNeverExpires=void 0,this.enableCellExpressions=void 0,this.suppressTouch=void 0,this.suppressFocusAfterRefresh=void 0,this.suppressAsyncEvents=void 0,this.suppressBrowserResizeObserver=void 0,this.suppressPropertyNamesCheck=void 0,this.suppressChangeDetection=void 0,this.debug=void 0,this.loading=void 0,this.overlayLoadingTemplate=void 0,this.loadingOverlayComponent=void 0,this.loadingOverlayComponentParams=void 0,this.suppressLoadingOverlay=void 0,this.overlayNoRowsTemplate=void 0,this.noRowsOverlayComponent=void 0,this.noRowsOverlayComponentParams=void 0,this.suppressNoRowsOverlay=void 0,this.pagination=void 0,this.paginationPageSize=void 0,this.paginationPageSizeSelector=void 0,this.paginationAutoPageSize=void 0,this.paginateChildRows=void 0,this.suppressPaginationPanel=void 0,this.pivotMode=void 0,this.pivotPanelShow=void 0,this.pivotMaxGeneratedColumns=void 0,this.pivotDefaultExpanded=void 0,this.pivotColumnGroupTotals=void 0,this.pivotRowTotals=void 0,this.pivotSuppressAutoColumn=void 0,this.suppressExpandablePivotGroups=void 0,this.functionsReadOnly=void 0,this.aggFuncs=void 0,this.suppressAggFuncInHeader=void 0,this.alwaysAggregateAtRootLevel=void 0,this.aggregateOnlyChangedColumns=void 0,this.suppressAggFilteredOnly=void 0,this.removePivotHeaderRowWhenSingleValueColumn=void 0,this.animateRows=void 0,this.enableCellChangeFlash=void 0,this.cellFlashDuration=void 0,this.cellFlashDelay=void 0,this.cellFadeDuration=void 0,this.cellFadeDelay=void 0,this.allowShowChangeAfterFilter=void 0,this.domLayout=void 0,this.ensureDomOrder=void 0,this.enableRtl=void 0,this.suppressColumnVirtualisation=void 0,this.suppressMaxRenderedRowRestriction=void 0,this.suppressRowVirtualisation=void 0,this.rowDragManaged=void 0,this.suppressRowDrag=void 0,this.suppressMoveWhenRowDragging=void 0,this.rowDragEntireRow=void 0,this.rowDragMultiRow=void 0,this.rowDragText=void 0,this.fullWidthCellRenderer=void 0,this.fullWidthCellRendererParams=void 0,this.embedFullWidthRows=void 0,this.suppressGroupMaintainValueType=void 0,this.groupDisplayType=void 0,this.groupDefaultExpanded=void 0,this.autoGroupColumnDef=void 0,this.groupMaintainOrder=void 0,this.groupSelectsChildren=void 0,this.groupLockGroupColumns=void 0,this.groupAggFiltering=void 0,this.groupIncludeFooter=void 0,this.groupIncludeTotalFooter=void 0,this.groupTotalRow=void 0,this.grandTotalRow=void 0,this.suppressStickyTotalRow=void 0,this.groupSuppressBlankHeader=void 0,this.groupSelectsFiltered=void 0,this.showOpenedGroup=void 0,this.groupRemoveSingleChildren=void 0,this.groupRemoveLowestSingleChildren=void 0,this.groupHideOpenParents=void 0,this.groupAllowUnbalanced=void 0,this.rowGroupPanelShow=void 0,this.groupRowRenderer=void 0,this.groupRowRendererParams=void 0,this.suppressMakeColumnVisibleAfterUnGroup=void 0,this.treeData=void 0,this.rowGroupPanelSuppressSort=void 0,this.suppressGroupRowsSticky=void 0,this.pinnedTopRowData=void 0,this.pinnedBottomRowData=void 0,this.rowModelType=void 0,this.rowData=void 0,this.asyncTransactionWaitMillis=void 0,this.suppressModelUpdateAfterUpdateTransaction=void 0,this.datasource=void 0,this.cacheOverflowSize=void 0,this.infiniteInitialRowCount=void 0,this.serverSideInitialRowCount=void 0,this.suppressServerSideInfiniteScroll=void 0,this.suppressServerSideFullWidthLoadingRow=void 0,this.cacheBlockSize=void 0,this.maxBlocksInCache=void 0,this.maxConcurrentDatasourceRequests=void 0,this.blockLoadDebounceMillis=void 0,this.purgeClosedRowNodes=void 0,this.serverSideDatasource=void 0,this.serverSideSortAllLevels=void 0,this.serverSideEnableClientSideSort=void 0,this.serverSideOnlyRefreshFilteredGroups=void 0,this.serverSideSortOnServer=void 0,this.serverSideFilterOnServer=void 0,this.serverSidePivotResultFieldSeparator=void 0,this.viewportDatasource=void 0,this.viewportRowModelPageSize=void 0,this.viewportRowModelBufferSize=void 0,this.alwaysShowHorizontalScroll=void 0,this.alwaysShowVerticalScroll=void 0,this.debounceVerticalScrollbar=void 0,this.suppressHorizontalScroll=void 0,this.suppressScrollOnNewData=void 0,this.suppressScrollWhenPopupsAreOpen=void 0,this.suppressAnimationFrame=void 0,this.suppressMiddleClickScrolls=void 0,this.suppressPreventDefaultOnMouseWheel=void 0,this.scrollbarWidth=void 0,this.rowSelection=void 0,this.rowMultiSelectWithClick=void 0,this.suppressRowDeselection=void 0,this.suppressRowClickSelection=void 0,this.suppressCellFocus=void 0,this.suppressHeaderFocus=void 0,this.suppressMultiRangeSelection=void 0,this.enableCellTextSelection=void 0,this.enableRangeSelection=void 0,this.enableRangeHandle=void 0,this.enableFillHandle=void 0,this.fillHandleDirection=void 0,this.suppressClearOnFillReduction=void 0,this.sortingOrder=void 0,this.accentedSort=void 0,this.unSortIcon=void 0,this.suppressMultiSort=void 0,this.alwaysMultiSort=void 0,this.multiSortKey=void 0,this.suppressMaintainUnsortedOrder=void 0,this.icons=void 0,this.rowHeight=void 0,this.rowStyle=void 0,this.rowClass=void 0,this.rowClassRules=void 0,this.suppressRowHoverHighlight=void 0,this.suppressRowTransform=void 0,this.columnHoverHighlight=void 0,this.gridId=void 0,this.deltaSort=void 0,this.treeDataDisplayType=void 0,this.enableGroupEdit=void 0,this.initialState=void 0,this.getContextMenuItems=void 0,this.getMainMenuItems=void 0,this.postProcessPopup=void 0,this.processUnpinnedColumns=void 0,this.processCellForClipboard=void 0,this.processHeaderForClipboard=void 0,this.processGroupHeaderForClipboard=void 0,this.processCellFromClipboard=void 0,this.sendToClipboard=void 0,this.processDataFromClipboard=void 0,this.isExternalFilterPresent=void 0,this.doesExternalFilterPass=void 0,this.getChartToolbarItems=void 0,this.createChartContainer=void 0,this.focusGridInnerElement=void 0,this.navigateToNextHeader=void 0,this.tabToNextHeader=void 0,this.navigateToNextCell=void 0,this.tabToNextCell=void 0,this.getLocaleText=void 0,this.getDocument=void 0,this.paginationNumberFormatter=void 0,this.getGroupRowAgg=void 0,this.isGroupOpenByDefault=void 0,this.initialGroupOrderComparator=void 0,this.processPivotResultColDef=void 0,this.processPivotResultColGroupDef=void 0,this.getDataPath=void 0,this.getChildCount=void 0,this.getServerSideGroupLevelParams=void 0,this.isServerSideGroupOpenByDefault=void 0,this.isApplyServerSideTransaction=void 0,this.isServerSideGroup=void 0,this.getServerSideGroupKey=void 0,this.getBusinessKeyForNode=void 0,this.getRowId=void 0,this.resetRowDataOnUpdate=void 0,this.processRowPostCreate=void 0,this.isRowSelectable=void 0,this.isRowMaster=void 0,this.fillOperation=void 0,this.postSortRows=void 0,this.getRowStyle=void 0,this.getRowClass=void 0,this.getRowHeight=void 0,this.isFullWidthRow=void 0,this.toolPanelVisibleChanged=new H,this.toolPanelSizeChanged=new H,this.columnMenuVisibleChanged=new H,this.contextMenuVisibleChanged=new H,this.cutStart=new H,this.cutEnd=new H,this.pasteStart=new H,this.pasteEnd=new H,this.columnVisible=new H,this.columnPinned=new H,this.columnResized=new H,this.columnMoved=new H,this.columnValueChanged=new H,this.columnPivotModeChanged=new H,this.columnPivotChanged=new H,this.columnGroupOpened=new H,this.newColumnsLoaded=new H,this.gridColumnsChanged=new H,this.displayedColumnsChanged=new H,this.virtualColumnsChanged=new H,this.columnEverythingChanged=new H,this.columnHeaderMouseOver=new H,this.columnHeaderMouseLeave=new H,this.columnHeaderClicked=new H,this.columnHeaderContextMenu=new H,this.componentStateChanged=new H,this.cellValueChanged=new H,this.cellEditRequest=new H,this.rowValueChanged=new H,this.cellEditingStarted=new H,this.cellEditingStopped=new H,this.rowEditingStarted=new H,this.rowEditingStopped=new H,this.undoStarted=new H,this.undoEnded=new H,this.redoStarted=new H,this.redoEnded=new H,this.rangeDeleteStart=new H,this.rangeDeleteEnd=new H,this.fillStart=new H,this.fillEnd=new H,this.filterOpened=new H,this.filterChanged=new H,this.filterModified=new H,this.advancedFilterBuilderVisibleChanged=new H,this.chartCreated=new H,this.chartRangeSelectionChanged=new H,this.chartOptionsChanged=new H,this.chartDestroyed=new H,this.cellKeyDown=new H,this.gridReady=new H,this.firstDataRendered=new H,this.gridSizeChanged=new H,this.modelUpdated=new H,this.virtualRowRemoved=new H,this.viewportChanged=new H,this.bodyScroll=new H,this.bodyScrollEnd=new H,this.dragStarted=new H,this.dragStopped=new H,this.stateUpdated=new H,this.paginationChanged=new H,this.rowDragEnter=new H,this.rowDragMove=new H,this.rowDragLeave=new H,this.rowDragEnd=new H,this.columnRowGroupChanged=new H,this.rowGroupOpened=new H,this.expandOrCollapseAll=new H,this.pivotMaxColumnsExceeded=new H,this.pinnedRowDataChanged=new H,this.rowDataUpdated=new H,this.asyncTransactionsFlushed=new H,this.storeRefreshed=new H,this.headerFocused=new H,this.cellClicked=new H,this.cellDoubleClicked=new H,this.cellFocused=new H,this.cellMouseOver=new H,this.cellMouseOut=new H,this.cellMouseDown=new H,this.rowClicked=new H,this.rowDoubleClicked=new H,this.rowSelected=new H,this.selectionChanged=new H,this.cellContextMenu=new H,this.rangeSelectionChanged=new H,this.tooltipShow=new H,this.tooltipHide=new H,this.sortChanged=new H,this._nativeElement=i.nativeElement}ngAfterViewInit(){this.angularFrameworkOverrides.runOutsideAngular(()=>{this.frameworkComponentWrapper.setViewContainerRef(this.viewContainerRef,this.angularFrameworkOverrides);let i=dB(this.gridOptions,this);this.gridParams={globalEventListener:this.globalEventListener.bind(this),frameworkOverrides:this.angularFrameworkOverrides,providedBeanInstances:{frameworkComponentWrapper:this.frameworkComponentWrapper},modules:this.modules||[]};let s=UG(this._nativeElement,i,this.gridParams);s&&(this.api=s),this._initialised=!0,this._resolveFullyReady()})}ngOnChanges(i){this._initialised&&this.angularFrameworkOverrides.runOutsideAngular(()=>{let s={};Object.entries(i).forEach(([r,o])=>{s[r]=o.currentValue}),hB(s,this.api)})}ngOnDestroy(){this._initialised&&(this._destroyed=!0,this.api?.destroy())}isEmitterUsed(i){let r=this[i],o=r?.observed??r?.observers?.length>0,a=`on${i.charAt(0).toUpperCase()}${i.substring(1)}`,l=!!this.gridOptions&&!!this.gridOptions[a];return o||l}globalEventListener(i,s){if(this._destroyed)return;let r=this[i];if(r&&this.isEmitterUsed(i)){let o=()=>this.angularFrameworkOverrides.runInsideAngular(()=>r.emit(s));i==="gridReady"?this._fullyReady.then(()=>o()):o()}}};t.\u0275fac=function(s){return new(s||t)(J(Kt),J(ki),J(XG),J(JG))},t.\u0275cmp=Ee({type:t,selectors:[["ag-grid-angular"]],inputs:{gridOptions:"gridOptions",modules:"modules",statusBar:"statusBar",sideBar:"sideBar",suppressContextMenu:"suppressContextMenu",preventDefaultOnContextMenu:"preventDefaultOnContextMenu",allowContextMenuWithControlKey:"allowContextMenuWithControlKey",columnMenu:"columnMenu",suppressMenuHide:"suppressMenuHide",enableBrowserTooltips:"enableBrowserTooltips",tooltipTrigger:"tooltipTrigger",tooltipShowDelay:"tooltipShowDelay",tooltipHideDelay:"tooltipHideDelay",tooltipMouseTrack:"tooltipMouseTrack",tooltipShowMode:"tooltipShowMode",tooltipInteraction:"tooltipInteraction",popupParent:"popupParent",copyHeadersToClipboard:"copyHeadersToClipboard",copyGroupHeadersToClipboard:"copyGroupHeadersToClipboard",clipboardDelimiter:"clipboardDelimiter",suppressCopyRowsToClipboard:"suppressCopyRowsToClipboard",suppressCopySingleCellRanges:"suppressCopySingleCellRanges",suppressLastEmptyLineOnPaste:"suppressLastEmptyLineOnPaste",suppressClipboardPaste:"suppressClipboardPaste",suppressClipboardApi:"suppressClipboardApi",suppressCutToClipboard:"suppressCutToClipboard",columnDefs:"columnDefs",defaultColDef:"defaultColDef",defaultColGroupDef:"defaultColGroupDef",columnTypes:"columnTypes",dataTypeDefinitions:"dataTypeDefinitions",maintainColumnOrder:"maintainColumnOrder",suppressFieldDotNotation:"suppressFieldDotNotation",headerHeight:"headerHeight",groupHeaderHeight:"groupHeaderHeight",floatingFiltersHeight:"floatingFiltersHeight",pivotHeaderHeight:"pivotHeaderHeight",pivotGroupHeaderHeight:"pivotGroupHeaderHeight",allowDragFromColumnsToolPanel:"allowDragFromColumnsToolPanel",suppressMovableColumns:"suppressMovableColumns",suppressColumnMoveAnimation:"suppressColumnMoveAnimation",suppressDragLeaveHidesColumns:"suppressDragLeaveHidesColumns",suppressRowGroupHidesColumns:"suppressRowGroupHidesColumns",colResizeDefault:"colResizeDefault",suppressAutoSize:"suppressAutoSize",autoSizePadding:"autoSizePadding",skipHeaderOnAutoSize:"skipHeaderOnAutoSize",autoSizeStrategy:"autoSizeStrategy",components:"components",editType:"editType",singleClickEdit:"singleClickEdit",suppressClickEdit:"suppressClickEdit",readOnlyEdit:"readOnlyEdit",stopEditingWhenCellsLoseFocus:"stopEditingWhenCellsLoseFocus",enterNavigatesVertically:"enterNavigatesVertically",enterNavigatesVerticallyAfterEdit:"enterNavigatesVerticallyAfterEdit",enableCellEditingOnBackspace:"enableCellEditingOnBackspace",undoRedoCellEditing:"undoRedoCellEditing",undoRedoCellEditingLimit:"undoRedoCellEditingLimit",defaultCsvExportParams:"defaultCsvExportParams",suppressCsvExport:"suppressCsvExport",defaultExcelExportParams:"defaultExcelExportParams",suppressExcelExport:"suppressExcelExport",excelStyles:"excelStyles",quickFilterText:"quickFilterText",cacheQuickFilter:"cacheQuickFilter",includeHiddenColumnsInQuickFilter:"includeHiddenColumnsInQuickFilter",quickFilterParser:"quickFilterParser",quickFilterMatcher:"quickFilterMatcher",applyQuickFilterBeforePivotOrAgg:"applyQuickFilterBeforePivotOrAgg",excludeChildrenWhenTreeDataFiltering:"excludeChildrenWhenTreeDataFiltering",enableAdvancedFilter:"enableAdvancedFilter",advancedFilterModel:"advancedFilterModel",includeHiddenColumnsInAdvancedFilter:"includeHiddenColumnsInAdvancedFilter",advancedFilterParent:"advancedFilterParent",advancedFilterBuilderParams:"advancedFilterBuilderParams",suppressAdvancedFilterEval:"suppressAdvancedFilterEval",enableCharts:"enableCharts",chartThemes:"chartThemes",customChartThemes:"customChartThemes",chartThemeOverrides:"chartThemeOverrides",chartToolPanelsDef:"chartToolPanelsDef",chartMenuItems:"chartMenuItems",loadingCellRenderer:"loadingCellRenderer",loadingCellRendererParams:"loadingCellRendererParams",loadingCellRendererSelector:"loadingCellRendererSelector",localeText:"localeText",masterDetail:"masterDetail",keepDetailRows:"keepDetailRows",keepDetailRowsCount:"keepDetailRowsCount",detailCellRenderer:"detailCellRenderer",detailCellRendererParams:"detailCellRendererParams",detailRowHeight:"detailRowHeight",detailRowAutoHeight:"detailRowAutoHeight",context:"context",alignedGrids:"alignedGrids",tabIndex:"tabIndex",rowBuffer:"rowBuffer",valueCache:"valueCache",valueCacheNeverExpires:"valueCacheNeverExpires",enableCellExpressions:"enableCellExpressions",suppressTouch:"suppressTouch",suppressFocusAfterRefresh:"suppressFocusAfterRefresh",suppressAsyncEvents:"suppressAsyncEvents",suppressBrowserResizeObserver:"suppressBrowserResizeObserver",suppressPropertyNamesCheck:"suppressPropertyNamesCheck",suppressChangeDetection:"suppressChangeDetection",debug:"debug",loading:"loading",overlayLoadingTemplate:"overlayLoadingTemplate",loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentParams:"loadingOverlayComponentParams",suppressLoadingOverlay:"suppressLoadingOverlay",overlayNoRowsTemplate:"overlayNoRowsTemplate",noRowsOverlayComponent:"noRowsOverlayComponent",noRowsOverlayComponentParams:"noRowsOverlayComponentParams",suppressNoRowsOverlay:"suppressNoRowsOverlay",pagination:"pagination",paginationPageSize:"paginationPageSize",paginationPageSizeSelector:"paginationPageSizeSelector",paginationAutoPageSize:"paginationAutoPageSize",paginateChildRows:"paginateChildRows",suppressPaginationPanel:"suppressPaginationPanel",pivotMode:"pivotMode",pivotPanelShow:"pivotPanelShow",pivotMaxGeneratedColumns:"pivotMaxGeneratedColumns",pivotDefaultExpanded:"pivotDefaultExpanded",pivotColumnGroupTotals:"pivotColumnGroupTotals",pivotRowTotals:"pivotRowTotals",pivotSuppressAutoColumn:"pivotSuppressAutoColumn",suppressExpandablePivotGroups:"suppressExpandablePivotGroups",functionsReadOnly:"functionsReadOnly",aggFuncs:"aggFuncs",suppressAggFuncInHeader:"suppressAggFuncInHeader",alwaysAggregateAtRootLevel:"alwaysAggregateAtRootLevel",aggregateOnlyChangedColumns:"aggregateOnlyChangedColumns",suppressAggFilteredOnly:"suppressAggFilteredOnly",removePivotHeaderRowWhenSingleValueColumn:"removePivotHeaderRowWhenSingleValueColumn",animateRows:"animateRows",enableCellChangeFlash:"enableCellChangeFlash",cellFlashDuration:"cellFlashDuration",cellFlashDelay:"cellFlashDelay",cellFadeDuration:"cellFadeDuration",cellFadeDelay:"cellFadeDelay",allowShowChangeAfterFilter:"allowShowChangeAfterFilter",domLayout:"domLayout",ensureDomOrder:"ensureDomOrder",enableRtl:"enableRtl",suppressColumnVirtualisation:"suppressColumnVirtualisation",suppressMaxRenderedRowRestriction:"suppressMaxRenderedRowRestriction",suppressRowVirtualisation:"suppressRowVirtualisation",rowDragManaged:"rowDragManaged",suppressRowDrag:"suppressRowDrag",suppressMoveWhenRowDragging:"suppressMoveWhenRowDragging",rowDragEntireRow:"rowDragEntireRow",rowDragMultiRow:"rowDragMultiRow",rowDragText:"rowDragText",fullWidthCellRenderer:"fullWidthCellRenderer",fullWidthCellRendererParams:"fullWidthCellRendererParams",embedFullWidthRows:"embedFullWidthRows",suppressGroupMaintainValueType:"suppressGroupMaintainValueType",groupDisplayType:"groupDisplayType",groupDefaultExpanded:"groupDefaultExpanded",autoGroupColumnDef:"autoGroupColumnDef",groupMaintainOrder:"groupMaintainOrder",groupSelectsChildren:"groupSelectsChildren",groupLockGroupColumns:"groupLockGroupColumns",groupAggFiltering:"groupAggFiltering",groupIncludeFooter:"groupIncludeFooter",groupIncludeTotalFooter:"groupIncludeTotalFooter",groupTotalRow:"groupTotalRow",grandTotalRow:"grandTotalRow",suppressStickyTotalRow:"suppressStickyTotalRow",groupSuppressBlankHeader:"groupSuppressBlankHeader",groupSelectsFiltered:"groupSelectsFiltered",showOpenedGroup:"showOpenedGroup",groupRemoveSingleChildren:"groupRemoveSingleChildren",groupRemoveLowestSingleChildren:"groupRemoveLowestSingleChildren",groupHideOpenParents:"groupHideOpenParents",groupAllowUnbalanced:"groupAllowUnbalanced",rowGroupPanelShow:"rowGroupPanelShow",groupRowRenderer:"groupRowRenderer",groupRowRendererParams:"groupRowRendererParams",suppressMakeColumnVisibleAfterUnGroup:"suppressMakeColumnVisibleAfterUnGroup",treeData:"treeData",rowGroupPanelSuppressSort:"rowGroupPanelSuppressSort",suppressGroupRowsSticky:"suppressGroupRowsSticky",pinnedTopRowData:"pinnedTopRowData",pinnedBottomRowData:"pinnedBottomRowData",rowModelType:"rowModelType",rowData:"rowData",asyncTransactionWaitMillis:"asyncTransactionWaitMillis",suppressModelUpdateAfterUpdateTransaction:"suppressModelUpdateAfterUpdateTransaction",datasource:"datasource",cacheOverflowSize:"cacheOverflowSize",infiniteInitialRowCount:"infiniteInitialRowCount",serverSideInitialRowCount:"serverSideInitialRowCount",suppressServerSideInfiniteScroll:"suppressServerSideInfiniteScroll",suppressServerSideFullWidthLoadingRow:"suppressServerSideFullWidthLoadingRow",cacheBlockSize:"cacheBlockSize",maxBlocksInCache:"maxBlocksInCache",maxConcurrentDatasourceRequests:"maxConcurrentDatasourceRequests",blockLoadDebounceMillis:"blockLoadDebounceMillis",purgeClosedRowNodes:"purgeClosedRowNodes",serverSideDatasource:"serverSideDatasource",serverSideSortAllLevels:"serverSideSortAllLevels",serverSideEnableClientSideSort:"serverSideEnableClientSideSort",serverSideOnlyRefreshFilteredGroups:"serverSideOnlyRefreshFilteredGroups",serverSideSortOnServer:"serverSideSortOnServer",serverSideFilterOnServer:"serverSideFilterOnServer",serverSidePivotResultFieldSeparator:"serverSidePivotResultFieldSeparator",viewportDatasource:"viewportDatasource",viewportRowModelPageSize:"viewportRowModelPageSize",viewportRowModelBufferSize:"viewportRowModelBufferSize",alwaysShowHorizontalScroll:"alwaysShowHorizontalScroll",alwaysShowVerticalScroll:"alwaysShowVerticalScroll",debounceVerticalScrollbar:"debounceVerticalScrollbar",suppressHorizontalScroll:"suppressHorizontalScroll",suppressScrollOnNewData:"suppressScrollOnNewData",suppressScrollWhenPopupsAreOpen:"suppressScrollWhenPopupsAreOpen",suppressAnimationFrame:"suppressAnimationFrame",suppressMiddleClickScrolls:"suppressMiddleClickScrolls",suppressPreventDefaultOnMouseWheel:"suppressPreventDefaultOnMouseWheel",scrollbarWidth:"scrollbarWidth",rowSelection:"rowSelection",rowMultiSelectWithClick:"rowMultiSelectWithClick",suppressRowDeselection:"suppressRowDeselection",suppressRowClickSelection:"suppressRowClickSelection",suppressCellFocus:"suppressCellFocus",suppressHeaderFocus:"suppressHeaderFocus",suppressMultiRangeSelection:"suppressMultiRangeSelection",enableCellTextSelection:"enableCellTextSelection",enableRangeSelection:"enableRangeSelection",enableRangeHandle:"enableRangeHandle",enableFillHandle:"enableFillHandle",fillHandleDirection:"fillHandleDirection",suppressClearOnFillReduction:"suppressClearOnFillReduction",sortingOrder:"sortingOrder",accentedSort:"accentedSort",unSortIcon:"unSortIcon",suppressMultiSort:"suppressMultiSort",alwaysMultiSort:"alwaysMultiSort",multiSortKey:"multiSortKey",suppressMaintainUnsortedOrder:"suppressMaintainUnsortedOrder",icons:"icons",rowHeight:"rowHeight",rowStyle:"rowStyle",rowClass:"rowClass",rowClassRules:"rowClassRules",suppressRowHoverHighlight:"suppressRowHoverHighlight",suppressRowTransform:"suppressRowTransform",columnHoverHighlight:"columnHoverHighlight",gridId:"gridId",deltaSort:"deltaSort",treeDataDisplayType:"treeDataDisplayType",enableGroupEdit:"enableGroupEdit",initialState:"initialState",getContextMenuItems:"getContextMenuItems",getMainMenuItems:"getMainMenuItems",postProcessPopup:"postProcessPopup",processUnpinnedColumns:"processUnpinnedColumns",processCellForClipboard:"processCellForClipboard",processHeaderForClipboard:"processHeaderForClipboard",processGroupHeaderForClipboard:"processGroupHeaderForClipboard",processCellFromClipboard:"processCellFromClipboard",sendToClipboard:"sendToClipboard",processDataFromClipboard:"processDataFromClipboard",isExternalFilterPresent:"isExternalFilterPresent",doesExternalFilterPass:"doesExternalFilterPass",getChartToolbarItems:"getChartToolbarItems",createChartContainer:"createChartContainer",focusGridInnerElement:"focusGridInnerElement",navigateToNextHeader:"navigateToNextHeader",tabToNextHeader:"tabToNextHeader",navigateToNextCell:"navigateToNextCell",tabToNextCell:"tabToNextCell",getLocaleText:"getLocaleText",getDocument:"getDocument",paginationNumberFormatter:"paginationNumberFormatter",getGroupRowAgg:"getGroupRowAgg",isGroupOpenByDefault:"isGroupOpenByDefault",initialGroupOrderComparator:"initialGroupOrderComparator",processPivotResultColDef:"processPivotResultColDef",processPivotResultColGroupDef:"processPivotResultColGroupDef",getDataPath:"getDataPath",getChildCount:"getChildCount",getServerSideGroupLevelParams:"getServerSideGroupLevelParams",isServerSideGroupOpenByDefault:"isServerSideGroupOpenByDefault",isApplyServerSideTransaction:"isApplyServerSideTransaction",isServerSideGroup:"isServerSideGroup",getServerSideGroupKey:"getServerSideGroupKey",getBusinessKeyForNode:"getBusinessKeyForNode",getRowId:"getRowId",resetRowDataOnUpdate:"resetRowDataOnUpdate",processRowPostCreate:"processRowPostCreate",isRowSelectable:"isRowSelectable",isRowMaster:"isRowMaster",fillOperation:"fillOperation",postSortRows:"postSortRows",getRowStyle:"getRowStyle",getRowClass:"getRowClass",getRowHeight:"getRowHeight",isFullWidthRow:"isFullWidthRow"},outputs:{toolPanelVisibleChanged:"toolPanelVisibleChanged",toolPanelSizeChanged:"toolPanelSizeChanged",columnMenuVisibleChanged:"columnMenuVisibleChanged",contextMenuVisibleChanged:"contextMenuVisibleChanged",cutStart:"cutStart",cutEnd:"cutEnd",pasteStart:"pasteStart",pasteEnd:"pasteEnd",columnVisible:"columnVisible",columnPinned:"columnPinned",columnResized:"columnResized",columnMoved:"columnMoved",columnValueChanged:"columnValueChanged",columnPivotModeChanged:"columnPivotModeChanged",columnPivotChanged:"columnPivotChanged",columnGroupOpened:"columnGroupOpened",newColumnsLoaded:"newColumnsLoaded",gridColumnsChanged:"gridColumnsChanged",displayedColumnsChanged:"displayedColumnsChanged",virtualColumnsChanged:"virtualColumnsChanged",columnEverythingChanged:"columnEverythingChanged",columnHeaderMouseOver:"columnHeaderMouseOver",columnHeaderMouseLeave:"columnHeaderMouseLeave",columnHeaderClicked:"columnHeaderClicked",columnHeaderContextMenu:"columnHeaderContextMenu",componentStateChanged:"componentStateChanged",cellValueChanged:"cellValueChanged",cellEditRequest:"cellEditRequest",rowValueChanged:"rowValueChanged",cellEditingStarted:"cellEditingStarted",cellEditingStopped:"cellEditingStopped",rowEditingStarted:"rowEditingStarted",rowEditingStopped:"rowEditingStopped",undoStarted:"undoStarted",undoEnded:"undoEnded",redoStarted:"redoStarted",redoEnded:"redoEnded",rangeDeleteStart:"rangeDeleteStart",rangeDeleteEnd:"rangeDeleteEnd",fillStart:"fillStart",fillEnd:"fillEnd",filterOpened:"filterOpened",filterChanged:"filterChanged",filterModified:"filterModified",advancedFilterBuilderVisibleChanged:"advancedFilterBuilderVisibleChanged",chartCreated:"chartCreated",chartRangeSelectionChanged:"chartRangeSelectionChanged",chartOptionsChanged:"chartOptionsChanged",chartDestroyed:"chartDestroyed",cellKeyDown:"cellKeyDown",gridReady:"gridReady",firstDataRendered:"firstDataRendered",gridSizeChanged:"gridSizeChanged",modelUpdated:"modelUpdated",virtualRowRemoved:"virtualRowRemoved",viewportChanged:"viewportChanged",bodyScroll:"bodyScroll",bodyScrollEnd:"bodyScrollEnd",dragStarted:"dragStarted",dragStopped:"dragStopped",stateUpdated:"stateUpdated",paginationChanged:"paginationChanged",rowDragEnter:"rowDragEnter",rowDragMove:"rowDragMove",rowDragLeave:"rowDragLeave",rowDragEnd:"rowDragEnd",columnRowGroupChanged:"columnRowGroupChanged",rowGroupOpened:"rowGroupOpened",expandOrCollapseAll:"expandOrCollapseAll",pivotMaxColumnsExceeded:"pivotMaxColumnsExceeded",pinnedRowDataChanged:"pinnedRowDataChanged",rowDataUpdated:"rowDataUpdated",asyncTransactionsFlushed:"asyncTransactionsFlushed",storeRefreshed:"storeRefreshed",headerFocused:"headerFocused",cellClicked:"cellClicked",cellDoubleClicked:"cellDoubleClicked",cellFocused:"cellFocused",cellMouseOver:"cellMouseOver",cellMouseOut:"cellMouseOut",cellMouseDown:"cellMouseDown",rowClicked:"rowClicked",rowDoubleClicked:"rowDoubleClicked",rowSelected:"rowSelected",selectionChanged:"selectionChanged",cellContextMenu:"cellContextMenu",rangeSelectionChanged:"rangeSelectionChanged",tooltipShow:"tooltipShow",tooltipHide:"tooltipHide",sortChanged:"sortChanged"},standalone:!0,features:[fs([XG,JG]),an,De],decls:0,vars:0,template:function(s,r){},encapsulation:2});let e=t;return e})();var eH=(()=>{let t=class t{constructor(i,s){this.utilService=i,this.tagService=s,this.transactions=[],this.rowData=[],this.colDefs=[{field:"description"},{field:"amount"},{field:"date"},{field:"type"},{field:"category"}],this.gridOptions={getRowStyle:r=>{let o=r.data.type==="income",a=(r.node.rowIndex??0)%2===0;return o?{backgroundColor:a?"#e6f3e6":"#f0f8f0"}:{backgroundColor:a?"#fce4e4":"#fdf0f0"}}}}ngOnChanges(){this.rowData=this.transactionToRowData(this.transactions)}transactionToRowData(i){return i.map(s=>({date:this.utilService.formatDateToDayMonthYearWeekday(s.date),description:s.description,category:s.tagIds[0],amount:s.amount,type:s.type}))}};t.\u0275fac=function(s){return new(s||t)(J(iC),J(Cu))},t.\u0275cmp=Ee({type:t,selectors:[["app-transaction-table"]],inputs:{transactions:"transactions"},standalone:!0,features:[an,De],decls:1,vars:3,consts:[[1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs","gridOptions"]],template:function(s,r){s&1&&ae(0,"ag-grid-angular",0),s&2&&me("rowData",r.rowData)("columnDefs",r.colDefs)("gridOptions",r.gridOptions)},dependencies:[ZG]});let e=t;return e})();function wce(e,t){e&1&&($(0,"div"),ae(1,"app-loader"),q())}function Sce(e,t){if(e&1&&($(0,"div",14),ae(1,"app-stat-card",15),q()),e&2){let n=t.$implicit;ce(),me("title",n.title)("value",n.value)("percentChange",n.percentChange)("isIncome",n.isIncome)}}function _ce(e,t){if(e&1&&($(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h1",6),_e(5,"Dashboard"),q(),ae(6,"app-transaction-form",7),q(),$(7,"div",8),tt(8,Sce,2,4,"div",9),q(),ae(9,"app-line-bar-chart",10),q(),$(10,"div",11),ae(11,"app-line-bar-chart",12)(12,"app-transaction-table",13),q()()()),e&2){let n=it();ce(8),me("ngForOf",n.statCards),ce(),me("data",n.expenseLineBarData)("isIncome",!1),ce(2),me("data",n.incomeLineBarData)("isIncome",!0),ce(),me("transactions",n.allTransactions)}}var tH=(()=>{let t=class t{constructor(i,s){this.authService=i,this.transactionService=s,this.userInfo={},this.statCards=[{title:"Income",value:0,percentChange:0,isIncome:!0},{title:"Expense",value:0,percentChange:0,isIncome:!1},{title:"Net",value:0,percentChange:0,isIncome:!0}],this.income=[],this.expenses=[],this.allTransactions=[],this.incomeLineBarData=[],this.expenseLineBarData=[],this.isLoading=!0;let r=this.authService.currentUserSig();r&&(this.userInfo=r)}ngOnInit(){this.allTransactions=[],fr([this.transactionService.expenseTransactions$,this.transactionService.incomeTransactions$]).pipe(nt(()=>{setTimeout(()=>{this.isLoading=!1},1e3)})).subscribe(([i,s])=>{this.handleExpenseTransactions(i),this.handleIncomeTransactions(s)},i=>{console.error("Error fetching transactions:",i)})}handleExpenseTransactions(i){i.length!==0&&(console.log("transactions:",i),this.expenses=i,this.expenseLineBarData=this.convertTransactionsToLineBarData(i),this.calculateStatcardData(i,1),this.allTransactions=this.combineAndSortTransactions(this.income,this.expenses))}handleIncomeTransactions(i){i.length!==0&&(console.log("transactions:",i),this.income=i,this.incomeLineBarData=this.convertTransactionsToLineBarData(i),this.calculateStatcardData(i,0),this.allTransactions=this.combineAndSortTransactions(this.income,this.expenses))}calculateStatcardData(i,s){this.statCards[s].value=this.aggregateTransactions(i),this.statCards[s].percentChange=this.calculatePercentChange(i.slice(-1)[0].amount,i[0].amount),this.calculateNetIncome()}combineAndSortTransactions(i,s){let r=[...i,...s];return r.sort((o,a)=>new Date(a.date).getTime()-new Date(o.date).getTime()),r}calculateNetIncome(){if(this.income.length===0||this.expenses.length===0)return;this.statCards[2].value=this.statCards[0].value-this.statCards[1].value;let i=this.income[0].amount,s=this.expenses[0].amount,r=this.income.slice(-1)[0].amount,o=this.expenses.slice(-1)[0].amount;this.statCards[2].percentChange=this.calculatePercentChange(r-o,i-s)}aggregateTransactions(i){return i.reduce((s,r)=>s+r.amount,0)}calculatePercentChange(i,s){return(i-s)/s*100}convertTransactionsToLineBarData(i){return i.map(s=>({tag:s.tagIds[0],value:[s.date.getTime(),s.amount],title:s.description}))}};t.\u0275fac=function(s){return new(s||t)(J(Hi),J(sC))},t.\u0275cmp=Ee({type:t,selectors:[["app-dashboard-page"]],standalone:!0,features:[De],decls:3,vars:2,consts:[["content",""],[4,"ngIf","ngIfElse"],[1,"container-fluid","d-flex","justify-content-center"],[1,"mt-2","row","d-flex","justify-content-center"],[1,"row","col-12","col-lg-6"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-start","fw-bold"],[1,"me-4"],[1,"row","mb-3"],["class","col-6 col-md-4 mb-2 mx-auto mx-md-0",4,"ngFor","ngForOf"],["title","Total Expenses","percentChangeMessage","Previous dip:",3,"data","isIncome"],[1,"row","col-12","col-lg-6","mt-3","mt-lg-0","mx-lg-2"],["title","Total Income","percentChangeMessage","Previous gains:",1,"mb-3",3,"data","isIncome"],[3,"transactions"],[1,"col-6","col-md-4","mb-2","mx-auto","mx-md-0"],[3,"title","value","percentChange","isIncome"]],template:function(s,r){if(s&1&&tt(0,wce,2,0,"div",1)(1,_ce,13,6,"ng-template",null,0,Ma),s&2){let o=eh(2);me("ngIf",r.isLoading)("ngIfElse",o)}},dependencies:[xt,js,Li,_V,bV,RV,Um,eH]});let e=t;return e})();var nH=(()=>{let t=class t{constructor(i){this.router=i,this.router.navigate(["/login"])}};t.\u0275fac=function(s){return new(s||t)(J(Qt))},t.\u0275cmp=Ee({type:t,selectors:[["app-landing-page"]],standalone:!0,features:[De],decls:2,vars:0,template:function(s,r){s&1&&($(0,"p"),_e(1,"landing-page works!"),q())}});let e=t;return e})();var bce=[{path:"",component:tH}],iH=[{path:"",component:nH,canActivate:[qm]},{path:"login",component:FN,canActivate:[qm]},{path:"register",component:xN,canActivate:[qm]},{path:"dashboard",component:lk,canActivate:[ON],children:bce}];var oH="@firebase/installations",JR="0.6.8";var aH=1e4,lH=`w:${JR}`,cH="FIS_v2",Ece="https://firebaseinstallations.googleapis.com/v1",Dce=60*60*1e3,Rce="installations",Tce="Installations";var Ice={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},bl=new Fs(Rce,Tce,Ice);function uH(e){return e instanceof ss&&e.code.includes("request-failed")}function dH({projectId:e}){return`${Ece}/projects/${e}/installations`}function hH(e){return{token:e.token,requestStatus:2,expiresIn:Mce(e.expiresIn),creationTime:Date.now()}}function fH(e,t){return F(this,null,function*(){let i=(yield t.json()).error;return bl.create("request-failed",{requestName:e,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})})}function pH({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Ace(e,{refreshToken:t}){let n=pH(e);return n.append("Authorization",Pce(t)),n}function gH(e){return F(this,null,function*(){let t=yield e();return t.status>=500&&t.status<600?e():t})}function Mce(e){return Number(e.replace("s","000"))}function Pce(e){return`${cH} ${e}`}function Fce(i,s){return F(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},{fid:n}){let r=dH(e),o=pH(e),a=t.getImmediate({optional:!0});if(a){let h=yield a.getHeartbeatsHeader();h&&o.append("x-firebase-client",h)}let l={fid:n,authVersion:cH,appId:e.appId,sdkVersion:lH},c={method:"POST",headers:o,body:JSON.stringify(l)},u=yield gH(()=>fetch(r,c));if(u.ok){let h=yield u.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:hH(h.authToken)}}else throw yield fH("Create Installation",u)})}function mH(e){return new Promise(t=>{setTimeout(t,e)})}function xce(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}var Oce=/^[cdef][\w-]{21}$/,YR="";function Nce(){try{let e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;let n=kce(e);return Oce.test(n)?n:YR}catch{return YR}}function kce(e){return xce(e).substr(0,22)}function NC(e){return`${e.appName}!${e.appId}`}var vH=new Map;function CH(e,t){let n=NC(e);yH(n,t),Lce(n,t)}function yH(e,t){let n=vH.get(e);if(n)for(let i of n)i(t)}function Lce(e,t){let n=Vce();n&&n.postMessage({key:e,fid:t}),Bce()}var _l=null;function Vce(){return!_l&&"BroadcastChannel"in self&&(_l=new BroadcastChannel("[Firebase] FID Change"),_l.onmessage=e=>{yH(e.data.key,e.data.fid)}),_l}function Bce(){vH.size===0&&_l&&(_l.close(),_l=null)}var Gce="firebase-installations-database",Hce=1,El="firebase-installations-store",KR=null;function XR(){return KR||(KR=_d(Gce,Hce,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(El)}}})),KR}function OC(e,t){return F(this,null,function*(){let n=NC(e),s=(yield XR()).transaction(El,"readwrite"),r=s.objectStore(El),o=yield r.get(n);return yield r.put(t,n),yield s.done,(!o||o.fid!==t.fid)&&CH(e,t.fid),t})}function wH(e){return F(this,null,function*(){let t=NC(e),i=(yield XR()).transaction(El,"readwrite");yield i.objectStore(El).delete(t),yield i.done})}function kC(e,t){return F(this,null,function*(){let n=NC(e),s=(yield XR()).transaction(El,"readwrite"),r=s.objectStore(El),o=yield r.get(n),a=t(o);return a===void 0?yield r.delete(n):yield r.put(a,n),yield s.done,a&&(!o||o.fid!==a.fid)&&CH(e,a.fid),a})}function ZR(e){return F(this,null,function*(){let t,n=yield kC(e.appConfig,i=>{let s=Uce(i),r=Wce(e,s);return t=r.registrationPromise,r.installationEntry});return n.fid===YR?{installationEntry:yield t}:{installationEntry:n,registrationPromise:t}})}function Uce(e){let t=e||{fid:Nce(),registrationStatus:0};return SH(t)}function Wce(e,t){if(t.registrationStatus===0){if(!navigator.onLine){let s=Promise.reject(bl.create("app-offline"));return{installationEntry:t,registrationPromise:s}}let n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=jce(e,n);return{installationEntry:n,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:zce(e)}:{installationEntry:t}}function jce(e,t){return F(this,null,function*(){try{let n=yield Fce(e,t);return OC(e.appConfig,n)}catch(n){throw uH(n)&&n.customData.serverCode===409?yield wH(e.appConfig):yield OC(e.appConfig,{fid:t.fid,registrationStatus:0}),n}})}function zce(e){return F(this,null,function*(){let t=yield sH(e.appConfig);for(;t.registrationStatus===1;)yield mH(100),t=yield sH(e.appConfig);if(t.registrationStatus===0){let{installationEntry:n,registrationPromise:i}=yield ZR(e);return i||n}return t})}function sH(e){return kC(e,t=>{if(!t)throw bl.create("installation-not-found");return SH(t)})}function SH(e){return $ce(e)?{fid:e.fid,registrationStatus:0}:e}function $ce(e){return e.registrationStatus===1&&e.registrationTime+aH<Date.now()}function qce(i,s){return F(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},n){let r=Kce(e,n),o=Ace(e,n),a=t.getImmediate({optional:!0});if(a){let h=yield a.getHeartbeatsHeader();h&&o.append("x-firebase-client",h)}let l={installation:{sdkVersion:lH,appId:e.appId}},c={method:"POST",headers:o,body:JSON.stringify(l)},u=yield gH(()=>fetch(r,c));if(u.ok){let h=yield u.json();return hH(h)}else throw yield fH("Generate Auth Token",u)})}function Kce(e,{fid:t}){return`${dH(e)}/${t}/authTokens:generate`}function eT(e,t=!1){return F(this,null,function*(){let n,i=yield kC(e.appConfig,r=>{if(!_H(r))throw bl.create("not-registered");let o=r.authToken;if(!t&&Jce(o))return r;if(o.requestStatus===1)return n=Qce(e,t),r;{if(!navigator.onLine)throw bl.create("app-offline");let a=Zce(r);return n=Yce(e,a),a}});return n?yield n:i.authToken})}function Qce(e,t){return F(this,null,function*(){let n=yield rH(e.appConfig);for(;n.authToken.requestStatus===1;)yield mH(100),n=yield rH(e.appConfig);let i=n.authToken;return i.requestStatus===0?eT(e,t):i})}function rH(e){return kC(e,t=>{if(!_H(t))throw bl.create("not-registered");let n=t.authToken;return eue(n)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}function Yce(e,t){return F(this,null,function*(){try{let n=yield qce(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return yield OC(e.appConfig,i),n}catch(n){if(uH(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield wH(e.appConfig);else{let i=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});yield OC(e.appConfig,i)}throw n}})}function _H(e){return e!==void 0&&e.registrationStatus===2}function Jce(e){return e.requestStatus===2&&!Xce(e)}function Xce(e){let t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Dce}function Zce(e){let t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function eue(e){return e.requestStatus===1&&e.requestTime+aH<Date.now()}function tue(e){return F(this,null,function*(){let t=e,{installationEntry:n,registrationPromise:i}=yield ZR(t);return i?i.catch(console.error):eT(t).catch(console.error),n.fid})}function nue(e,t=!1){return F(this,null,function*(){let n=e;return yield iue(n),(yield eT(n,t)).token})}function iue(e){return F(this,null,function*(){let{registrationPromise:t}=yield ZR(e);t&&(yield t)})}function sue(e){if(!e||!e.options)throw QR("App Configuration");if(!e.name)throw QR("App Name");let t=["projectId","apiKey","appId"];for(let n of t)if(!e.options[n])throw QR(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function QR(e){return bl.create("missing-app-config-values",{valueName:e})}var bH="installations",rue="installations-internal",oue=e=>{let t=e.getProvider("app").getImmediate(),n=sue(t),i=jt(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},aue=e=>{let t=e.getProvider("app").getImmediate(),n=jt(t,bH).getImmediate();return{getId:()=>tue(n),getToken:s=>nue(n,s)}};function lue(){Et(new bt(bH,oue,"PUBLIC")),Et(new bt(rue,aue,"PRIVATE"))}lue();ge(oH,JR);ge(oH,JR,"esm2017");var LC="analytics",cue="firebase_id",uue="origin",due=60*1e3,hue="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",aT="https://www.googletagmanager.com/gtag/js";var Zn=new Os("@firebase/analytics");var fue={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Mi=new Fs("analytics","Analytics",fue);function pue(e){if(!e.startsWith(aT)){let t=Mi.create("invalid-gtag-resource",{gtagURL:e});return Zn.warn(t.message),""}return e}function MH(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function gue(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function mue(e,t){let n=gue("firebase-js-sdk-policy",{createScriptURL:pue}),i=document.createElement("script"),s=`${aT}?l=${e}&id=${t}`;i.src=n?n?.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function vue(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}function Cue(e,t,n,i,s,r){return F(this,null,function*(){let o=i[s];try{if(o)yield t[o];else{let l=(yield MH(n)).find(c=>c.measurementId===s);l&&(yield t[l.appId])}}catch(a){Zn.error(a)}e("config",s,r)})}function yue(e,t,n,i,s){return F(this,null,function*(){try{let r=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);let a=yield MH(n);for(let l of o){let c=a.find(h=>h.measurementId===l),u=c&&t[c.appId];if(u)r.push(u);else{r=[];break}}}r.length===0&&(r=Object.values(t)),yield Promise.all(r),e("event",i,s||{})}catch(r){Zn.error(r)}})}function wue(e,t,n,i){function s(r,...o){return F(this,null,function*(){try{if(r==="event"){let[a,l]=o;yield yue(e,t,n,a,l)}else if(r==="config"){let[a,l]=o;yield Cue(e,t,n,i,a,l)}else if(r==="consent"){let[a,l]=o;e("consent",a,l)}else if(r==="get"){let[a,l,c]=o;e("get",a,l,c)}else if(r==="set"){let[a]=o;e("set",a)}else e(r,...o)}catch(a){Zn.error(a)}})}return s}function Sue(e,t,n,i,s){let r=function(...o){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(r=window[s]),window[s]=wue(r,e,t,n),{gtagCore:r,wrappedGtag:window[s]}}function _ue(e){let t=window.document.getElementsByTagName("script");for(let n of Object.values(t))if(n.src&&n.src.includes(aT)&&n.src.includes(e))return n;return null}var bue=30,Eue=1e3,nT=class{constructor(t={},n=Eue){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}},PH=new nT;function Due(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function Rue(e){return F(this,null,function*(){var t;let{appId:n,apiKey:i}=e,s={method:"GET",headers:Due(i)},r=hue.replace("{app-id}",n),o=yield fetch(r,s);if(o.status!==200&&o.status!==304){let a="";try{let l=yield o.json();!((t=l.error)===null||t===void 0)&&t.message&&(a=l.error.message)}catch{}throw Mi.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function Tue(i){return F(this,arguments,function*(e,t=PH,n){let{appId:s,apiKey:r,measurementId:o}=e.options;if(!s)throw Mi.create("no-app-id");if(!r){if(o)return{measurementId:o,appId:s};throw Mi.create("no-api-key")}let a=t.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new iT;return setTimeout(()=>F(this,null,function*(){l.abort()}),n!==void 0?n:due),FH({appId:s,apiKey:r,measurementId:o},a,l,t)})}function FH(r,o,a){return F(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:n},i,s=PH){var l;let{appId:c,measurementId:u}=e;try{yield Iue(i,t)}catch(h){if(u)return Zn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:c,measurementId:u};throw h}try{let h=yield Rue(e);return s.deleteThrottleMetadata(c),h}catch(h){let f=h;if(!Aue(f)){if(s.deleteThrottleMetadata(c),u)return Zn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:c,measurementId:u};throw h}let g=Number((l=f?.customData)===null||l===void 0?void 0:l.httpStatus)===503?zl(n,s.intervalMillis,bue):zl(n,s.intervalMillis),v={throttleEndTimeMillis:Date.now()+g,backoffCount:n+1};return s.setThrottleMetadata(c,v),Zn.debug(`Calling attemptFetch again in ${g} millis`),FH(e,v,i,s)}})}function Iue(e,t){return new Promise((n,i)=>{let s=Math.max(t-Date.now(),0),r=setTimeout(n,s);e.addEventListener(()=>{clearTimeout(r),i(Mi.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function Aue(e){if(!(e instanceof ss)||!e.customData)return!1;let t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var iT=class{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}};var sT;function Mue(e,t,n,i,s){return F(this,null,function*(){if(s&&s.global){e("event",n,i);return}else{let r=yield t,o=Object.assign(Object.assign({},i),{send_to:r});e("event",n,o)}})}function Pue(e,t,n,i){return F(this,null,function*(){if(i&&i.global)return e("set",{user_id:n}),Promise.resolve();{let s=yield t;e("config",s,{update:!0,user_id:n})}})}var rT;function Fue(e){rT=e}function xue(e){sT=e}function Oue(){return F(this,null,function*(){if(is())try{yield oa()}catch(e){return Zn.warn(Mi.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}else return Zn.warn(Mi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function Nue(e,t,n,i,s,r,o){return F(this,null,function*(){var a;let l=Tue(e);l.then(g=>{n[g.measurementId]=g.appId,e.options.measurementId&&g.measurementId!==e.options.measurementId&&Zn.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Zn.error(g)),t.push(l);let c=Oue().then(g=>{if(g)return i.getId()}),[u,h]=yield Promise.all([l,c]);_ue(r)||mue(r,u.measurementId),rT&&(s("consent","default",rT),Fue(void 0)),s("js",new Date);let f=(a=o?.config)!==null&&a!==void 0?a:{};return f[uue]="firebase",f.update=!0,h!=null&&(f[cue]=h),s("config",u.measurementId,f),sT&&(s("set",sT),xue(void 0)),u.measurementId})}var oT=class{constructor(t){this.app=t}_delete(){return delete Ou[this.app.options.appId],Promise.resolve()}},Ou={},EH=[],DH={},tT="dataLayer",kue="gtag",RH,lT,TH=!1;function Lue(){let e=[];if(Dy()&&e.push("This is a browser extension environment."),Cd()||e.push("Cookies are not available."),e.length>0){let t=e.map((i,s)=>`(${s+1}) ${i}`).join(" "),n=Mi.create("invalid-analytics-context",{errorInfo:t});Zn.warn(n.message)}}function Vue(e,t,n){Lue();let i=e.options.appId;if(!i)throw Mi.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)Zn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Mi.create("no-api-key");if(Ou[i]!=null)throw Mi.create("already-exists",{id:i});if(!TH){vue(tT);let{wrappedGtag:r,gtagCore:o}=Sue(Ou,EH,DH,tT,kue);lT=r,RH=o,TH=!0}return Ou[i]=Nue(e,EH,DH,t,RH,tT,n),new oT(e)}function xH(e=nn()){e=et(e);let t=jt(e,LC);return t.isInitialized()?t.getImmediate():OH(e)}function OH(e,t={}){let n=jt(e,LC);if(n.isInitialized()){let s=n.getImmediate();if(wd(t,n.getOptions()))return s;throw Mi.create("already-initialized")}return n.initialize({options:t})}function NH(){return F(this,null,function*(){if(Dy()||!Cd()||!is())return!1;try{return yield oa()}catch{return!1}})}function kH(e,t,n){e=et(e),Pue(lT,Ou[e.app.options.appId],t,n).catch(i=>Zn.error(i))}function cT(e,t,n,i){e=et(e),Mue(lT,Ou[e.app.options.appId],t,n,i).catch(s=>Zn.error(s))}var IH="@firebase/analytics",AH="0.10.5";function Bue(){Et(new bt(LC,(t,{options:n})=>{let i=t.getProvider("app").getImmediate(),s=t.getProvider("installations-internal").getImmediate();return Vue(i,s,n)},"PUBLIC")),Et(new bt("analytics-internal",e,"PRIVATE")),ge(IH,AH),ge(IH,AH,"esm2017");function e(t){try{let n=t.getProvider(LC).getImmediate();return{logEvent:(i,s,r)=>cT(n,i,s,r)}}catch(n){throw Mi.create("interop-component-reg-failed",{reason:n})}}}Bue();var Dl=class{constructor(t){return t}},BH="analytics",dT=class{constructor(){return bn(BH)}};var hT="__angularfire_symbol__analyticsIsSupportedValue",GH="__angularfire_symbol__analyticsIsSupported";globalThis[GH]||=NH().then(e=>globalThis[hT]=e).catch(()=>globalThis[hT]=!1);var VC={async:()=>globalThis[GH],sync:()=>{let e=globalThis[hT];if(e===void 0)throw new Error(Uc("Analytics"));return e}},HH=VC.async,UH=Oe(xH,!0);var Gue=Oe(cT,!0);var Hue=Oe(kH,!0);var pT=(()=>{class e{initialized;disposables=[];constructor(n,i,s){ge("angularfire",Tt.full,"user-tracking");let r;this.initialized=i.runOutsideAngular(()=>new Promise(o=>{r=o})),HH().then(()=>{let o=s.get(Dl);o?this.disposables=[Th(n).subscribe(a=>{Hue(o,a?.uid),r()})]:r()})}ngOnDestroy(){this.disposables.forEach(n=>n.unsubscribe())}static \u0275fac=function(i){return new(i||e)(Y(Gi),Y(ue),Y(Ue))};static \u0275prov=te({token:e,factory:e.\u0275fac})}return e})(),Uue="firebase_event_origin",Wue="firebase_previous_class",jue="firebase_previous_id",zue="firebase_previous_screen",$ue="firebase_screen_class",LH="firebase_screen_id",que="firebase_screen",fT="outlet",Kue="page_path",Que="page_title",_f="screen_class",VH="screen_name",Yue="screen_view",Jue="auto",Xue="#",Zue=Math.floor(Math.random()*(2**32-1))-2**31,uT={},ede=e=>{let t=[e[_f],e[fT]].join(Xue);if(uT.hasOwnProperty(t))return uT[t];{let n=Zue++;return uT[t]=n,n}},tde=(e,t,n)=>e.events.pipe(ft(s=>s instanceof gh)).pipe(Ge(s=>{let o=e.parseUrl(e.url.replace(/(?:\().+(?:\))/g,f=>f.replace("://",":///"))).root.children[s.snapshot.outlet]?.toString()||"",a=e.routerState.root.children.map(f=>f).find(f=>f.outlet===s.snapshot.outlet);if(!a)return ee(null);let l=a;for(;l.firstChild;)l=l.firstChild;let c=l.pathFromRoot.map(f=>f.routeConfig?.path).filter(f=>f).join("/")||"/",u={[VH]:c,[Kue]:`/${o}`,[Uue]:Jue,[que]:c,[fT]:s.snapshot.outlet};t&&(u[Que]=t.getTitle());let h=a.component;if(h){if(h===db){let f=s.snapshot;for(;f.firstChild;)f=f.firstChild;h=f.component}}else h=s.snapshot.component;if(typeof h=="string")return ee(se(B({},u),{[_f]:h}));if(h){let f=n.resolveComponentFactory(h);return ee(se(B({},u),{[_f]:f.selector}))}return ee(null)}),ft(s=>!!s),oe(s=>B({[$ue]:s[_f],[LH]:ede(s)},s)),Xy(s=>s[fT]),ot(s=>s.pipe(Md((r,o)=>JSON.stringify(r)===JSON.stringify(o)),fa(void 0),$p(),oe(([r,o])=>r?B({[Wue]:r[_f],[zue]:r[VH],[jue]:r[LH]},o):o)))),WH=(()=>{class e{disposable;constructor(n,i,s,r,o,a){ge("angularfire",Tt.full,"screen-tracking"),HH().then(()=>{let l=a.get(Dl);!n||!l||r.runOutsideAngular(()=>{this.disposable=tde(n,i,s).pipe(Ge(c=>F(this,null,function*(){return o&&(yield o.initialized),Gue(l,Yue,c)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(i){return new(i||e)(Y(Qt,8),Y(hm,8),Y(bc),Y(ue),Y(pT,8),Y(Ue))};static \u0275prov=te({token:e,factory:e.\u0275fac})}return e})(),gT=new X("angularfire2.analytics-instances");function nde(e,t){if(!VC.sync())return null;let n=In(BH,e,t);return n&&new Dl(n)}function ide(e){return(t,n)=>{if(!VC.sync())return null;let i=t.runOutsideAngular(()=>e(n));return new Dl(i)}}var sde={provide:dT,deps:[[new Me,gT]]},rde={provide:Dl,useFactory:nde,deps:[[new Me,gT],Ot]};function jH(e,...t){return ge("angularfire",Tt.full,"analytics"),pt([rde,sde,{provide:Do,useValue:VC.async,multi:!0},{provide:gT,useFactory:ide(e),multi:!0,deps:[ue,Ue,Vt,Yt,...t]}])}var zH="@firebase/database",$H="1.0.6";var fI="";function ode(e){fI=e}var bT=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),tn(n))}get(t){let n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:hp(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var ET=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return xs(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var E2=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new bT(t)}}catch{}return new ET},Tl=E2("localStorage"),DT=E2("sessionStorage");var Vu=new Os("@firebase/database"),ade=function(){let e=1;return function(){return e++}}(),D2=function(e){let t=vM(e),n=new gM;n.update(t);let i=n.digest();return dp.encodeByteArray(i)},Nf=function(...e){let t="";for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=Nf.apply(null,i):typeof i=="object"?t+=tn(i):t+=i,t+=" "}return t},Il=null,qH=!0,lde=function(e,t){ne(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(Vu.logLevel=hi.VERBOSE,Il=Vu.log.bind(Vu),t&&DT.set("logging_enabled",!0)):typeof e=="function"?Il=e:(Il=null,DT.remove("logging_enabled"))},On=function(...e){if(qH===!0&&(qH=!1,Il===null&&DT.get("logging_enabled")===!0&&lde(!0)),Il){let t=Nf.apply(null,e);Il(t)}},kf=function(e){return function(...t){On(e,...t)}},RT=function(...e){let t="FIREBASE INTERNAL ERROR: "+Nf(...e);Vu.error(t)},Yr=function(...e){let t=`FIREBASE FATAL ERROR: ${Nf(...e)}`;throw Vu.error(t),new Error(t)},Pi=function(...e){let t="FIREBASE WARNING: "+Nf(...e);Vu.warn(t)},cde=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Pi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},R2=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},ude=function(e){if(Ps()||document.readyState==="complete")e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Gu="[MIN_NAME]",Al="[MAX_NAME]",qu=function(e,t){if(e===t)return 0;if(e===Gu||t===Al)return-1;if(t===Gu||e===Al)return 1;{let n=KH(e),i=KH(t);return n!==null?i!==null?n-i===0?e.length-t.length:n-i:-1:i!==null?1:e<t?-1:1}},dde=function(e,t){return e===t?0:e<t?-1:1},bf=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+tn(t))},pI=function(e){if(typeof e!="object"||e===null)return tn(e);let t=[];for(let i in e)t.push(i);t.sort();let n="{";for(let i=0;i<t.length;i++)i!==0&&(n+=","),n+=tn(t[i]),n+=":",n+=pI(e[t[i]]);return n+="}",n},T2=function(e,t){let n=e.length;if(n<=t)return[e];let i=[];for(let s=0;s<n;s+=t)s+t>n?i.push(e.substring(s,n)):i.push(e.substring(s,s+t));return i};function es(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var I2=function(e){ne(!R2(e),"Invalid JSON number");let t=11,n=52,i=(1<<t-1)-1,s,r,o,a,l;e===0?(r=0,o=0,s=1/e===-1/0?1:0):(s=e<0,e=Math.abs(e),e>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),i),r=a+i,o=Math.round(e*Math.pow(2,n-a)-Math.pow(2,n))):(r=0,o=Math.round(e/Math.pow(2,1-i-n))));let c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=t;l;l-=1)c.push(r%2?1:0),r=Math.floor(r/2);c.push(s?1:0),c.reverse();let u=c.join(""),h="";for(l=0;l<64;l+=8){let f=parseInt(u.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},hde=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},fde=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var pde=new RegExp("^-?(0*)\\d{1,10}$"),gde=-2147483648,mde=2147483647,KH=function(e){if(pde.test(e)){let t=Number(e);if(t>=gde&&t<=mde)return t}return null},Lf=function(e){try{e()}catch(t){setTimeout(()=>{let n=t.stack||"";throw Pi("Exception was thrown by user callback.",n),t},Math.floor(0))}},vde=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},If=function(e,t){let n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var TT=class{constructor(t,n){this.appName_=t,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Pi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var IT=class{constructor(t,n,i){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(On("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Pi(t)}},Af=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),GC="5",A2="v",M2="s",P2="r",F2="f",x2=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,O2="ls",N2="p",AT="ac",k2="websocket",L2="long_polling";var HC=class{constructor(t,n,i,s,r=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Tl.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Tl.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}};function Cde(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function V2(e,t,n){ne(typeof t=="string","typeof type must == string"),ne(typeof n=="object","typeof params must == object");let i;if(t===k2)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===L2)i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);Cde(e)&&(n.ns=e.namespace);let s=[];return es(n,(r,o)=>{s.push(r+"="+o)}),i+s.join("&")}var MT=class{constructor(){this.counters_={}}incrementCounter(t,n=1){xs(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return lM(this.counters_)}};var mT={},vT={};function gI(e){let t=e.toString();return mT[t]||(mT[t]=new MT),mT[t]}function yde(e,t){let n=e.toString();return vT[n]||(vT[n]=t()),vT[n]}var PT=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&Lf(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var QH="start",wde="close",Sde="pLPCommand",_de="pRTLPCB",B2="id",G2="pw",H2="ser",bde="cb",Ede="seg",Dde="ts",Rde="d",Tde="dframe",U2=1870,W2=30,Ide=U2-W2,Ade=25e3,Mde=3e4,FT=class e{constructor(t,n,i,s,r,o,a){this.connId=t,this.repoInfo=n,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=kf(t),this.stats_=gI(n),this.urlFn=l=>(this.appCheckToken&&(l[AT]=this.appCheckToken),V2(n,L2,l))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new PT(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Mde)),ude(()=>{if(this.isClosed_)return;this.scriptTagHolder=new xT((...r)=>{let[o,a,l,c,u]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===QH)this.id=a,this.password=l;else if(o===wde)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...r)=>{let[o,a]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[QH]="t",i[H2]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[bde]=this.scriptTagHolder.uniqueCallbackIdentifier),i[A2]=GC,this.transportSessionId&&(i[M2]=this.transportSessionId),this.lastSessionId&&(i[O2]=this.lastSessionId),this.applicationId&&(i[N2]=this.applicationId),this.appCheckToken&&(i[AT]=this.appCheckToken),typeof location<"u"&&location.hostname&&x2.test(location.hostname)&&(i[P2]=F2);let s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return Ps()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!hde()&&!fde()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let n=tn(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let i=aM(n),s=T2(i,Ide);for(let r=0;r<s.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[r]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if(Ps())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[Tde]="t",i[B2]=t,i[G2]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let n=tn(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},xT=class e{constructor(t,n,i,s){if(this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Ps())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=ade(),window[Sde+this.uniqueCallbackIdentifier]=t,window[_de+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){On("frame writing exception"),a.stack&&On(a.stack),On(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||On("No IE domain setting required")}catch{let i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[B2]=this.myID,t[G2]=this.myPW,t[H2]=this.currentSerial;let n=this.urlFn(t),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+W2+i.length<=U2;){let o=this.pendingSegs.shift();i=i+"&"+Ede+s+"="+o.seg+"&"+Dde+s+"="+o.ts+"&"+Rde+s+"="+o.d,s++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,i){this.pendingSegs.push({seg:t,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);let i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(i,Math.floor(Ade)),r=()=>{clearTimeout(s),i()};this.addTag(t,r)}addTag(t,n){Ps()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){let s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{On("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var Pde=16384,Fde=45e3,UC=null;typeof MozWebSocket<"u"?UC=MozWebSocket:typeof WebSocket<"u"&&(UC=WebSocket);var Ef=(()=>{class e{constructor(n,i,s,r,o,a,l){this.connId=n,this.applicationId=s,this.appCheckToken=r,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=kf(this.connId),this.stats_=gI(i),this.connURL=e.connectionURL_(i,a,l,r,s),this.nodeAdmin=i.nodeAdmin}static connectionURL_(n,i,s,r,o){let a={};return a[A2]=GC,!Ps()&&typeof location<"u"&&location.hostname&&x2.test(location.hostname)&&(a[P2]=F2),i&&(a[M2]=i),s&&(a[O2]=s),r&&(a[AT]=r),o&&(a[N2]=o),V2(n,k2,a)}open(n,i){this.onDisconnect=i,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Tl.set("previous_websocket_failure",!0);try{let s;if(Ps()){let r=this.nodeAdmin?"AdminNode":"Node";s={headers:{"User-Agent":`Firebase/${GC}/${fI}/${process.platform}/${r}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(s.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(s.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(s.proxy={origin:a})}this.mySock=new UC(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");let r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");let r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(i);s&&s.length>1&&parseFloat(s[1])<4.4&&(n=!0)}return!n&&UC!==null&&!e.forceDisallow_}static previouslyFailed(){return Tl.isInMemoryStorage||Tl.get("previous_websocket_failure")===!0}markConnectionHealthy(){Tl.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let s=hp(i);this.onMessage(s)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(ne(this.frames===null,"We already have a frame buffer"),n.length<=6){let i=Number(n);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let i=n.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let s=this.extractFrameCount_(i);s!==null&&this.appendFrame_(s)}}send(n){this.resetKeepAlive();let i=tn(n);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let s=T2(i,Pde);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Fde))}sendString_(n){try{this.mySock.send(n)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),xde=(()=>{class e{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[FT,Ef]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let i=Ef&&Ef.isAvailable(),s=i&&!Ef.previouslyFailed();if(n.webSocketOnly&&(i||Pi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Ef];else{let r=this.transports_=[];for(let o of e.ALL_TRANSPORTS)o&&o.isAvailable()&&r.push(o);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),Ode=6e4,Nde=5e3,kde=10*1024,Lde=100*1024,CT="t",YH="d",Vde="s",JH="r",Bde="e",XH="o",ZH="a",e2="n",t2="p",Gde="h",OT=class{constructor(t,n,i,s,r,o,a,l,c,u){this.id=t,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=r,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=kf("c:"+this.id+":"),this.transportManager_=new xde(n),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));let s=t.healthyTimeout||0;s>0&&(this.healthyTimeout_=If(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Lde?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>kde?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){let n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(CT in t){let n=t[CT];n===ZH?this.upgradeIfSecondaryHealthy_():n===JH?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===XH&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let n=bf("t",t),i=bf("d",t);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:t2,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:ZH,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:e2,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let n=bf("t",t),i=bf("d",t);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let n=bf(CT,t);if(YH in t){let i=t[YH];if(n===Gde){let s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===e2){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Vde?this.onConnectionShutdown_(i):n===JH?this.onReset_(i):n===Bde?RT("Server Error: "+i):n===XH?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):RT("Unknown control packet command: "+n)}}onHandshake_(t){let n=t.ts,i=t.v,s=t.h;this.sessionId=t.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),GC!==i&&Pi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),If(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Ode))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):If(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Nde))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:t2,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Tl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var WC=class{put(t,n,i,s){}merge(t,n,i,s){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,i){}onDisconnectMerge(t,n,i){}onDisconnectCancel(t,n){}reportStats(t){}};var jC=class{constructor(t){this.allowedEvents_=t,this.listeners_={},ne(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){let i=[...this.listeners_[t]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,n)}}on(t,n,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:i});let s=this.getInitialEvent(t);s&&n.apply(i,s)}off(t,n,i){this.validateEventType_(t);let s=this.listeners_[t]||[];for(let r=0;r<s.length;r++)if(s[r].callback===n&&(!i||i===s[r].context)){s.splice(r,1);return}}validateEventType_(t){ne(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}};var zC=class e extends jC{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Ey()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new e}getInitialEvent(t){return ne(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var n2=32,i2=768,ct=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function st(){return new ct("")}function ze(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Xo(e){return e.pieces_.length-e.pieceNum_}function mt(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ct(e.pieces_,t)}function j2(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Hde(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function z2(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function $2(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ct(t,0)}function gn(e,t){let n=[];for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);if(t instanceof ct)for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{let i=t.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&n.push(i[s])}return new ct(n,0)}function Be(e){return e.pieceNum_>=e.pieces_.length}function Xi(e,t){let n=ze(e),i=ze(t);if(n===null)return t;if(n===i)return Xi(mt(e),mt(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function q2(e,t){if(Xo(e)!==Xo(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function Rs(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(Xo(e)>Xo(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}var NT=class{constructor(t,n){this.errorPrefix_=n,this.parts_=z2(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Sd(this.parts_[i]);K2(this)}};function Ude(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Sd(t),K2(e)}function Wde(e){let t=e.parts_.pop();e.byteLength_-=Sd(t),e.parts_.length>0&&(e.byteLength_-=1)}function K2(e){if(e.byteLength_>i2)throw new Error(e.errorPrefix_+"has a key path longer than "+i2+" bytes ("+e.byteLength_+").");if(e.parts_.length>n2)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+n2+") or object contains a cycle "+Rl(e))}function Rl(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var kT=class e extends jC{constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new e}getInitialEvent(t){return ne(t==="visible","Unknown event type: "+t),[this.visible_]}};var Df=1e3,jde=60*5*1e3,s2=30*1e3,zde=1.3,$de=3e4,qde="server_kill",r2=3,mI=(()=>{class e extends WC{constructor(n,i,s,r,o,a,l,c){if(super(),this.repoInfo_=n,this.applicationId_=i,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=e.nextPersistentConnectionId_++,this.log_=kf("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Df,this.maxReconnectDelay_=jde,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Ps())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");kT.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&zC.getInstance().on("online",this.onOnline_,this)}sendRequest(n,i,s){let r=++this.requestNumber_,o={r,a:n,b:i};this.log_(tn(o)),ne(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),s&&(this.requestCBHash_[r]=s)}get(n){this.initConnection_();let i=new Wl,r={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?i.resolve(l):i.reject(l)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),i.promise}listen(n,i,s,r){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),ne(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ne(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let l={onComplete:r,hashFn:i,query:n,tag:s};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(n){let i=this.outstandingGets_[n];this.sendRequest("g",i.request,s=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(s)})}sendListen_(n){let i=n.query,s=i._path.toString(),r=i._queryIdentifier;this.log_("Listen on "+s+" for "+r);let o={p:s},a="q";n.tag&&(o.q=i._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,l=>{let c=l.d,u=l.s;e.warnOnListenWarnings_(c,i),(this.listens.get(s)&&this.listens.get(s).get(r))===n&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(s,r),n.onComplete&&n.onComplete(u,c))})}static warnOnListenWarnings_(n,i){if(n&&typeof n=="object"&&xs(n,"w")){let s=aa(n,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){let r='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();Pi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||fM(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=s2)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,i=hM(n)?"auth":"gauth",s={cred:n};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(i,s,r=>{let o=r.s,a=r.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let i=n.s,s=n.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,s)})}unlisten(n,i){let s=n._path.toString(),r=n._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),ne(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,n._queryObject,i)}sendUnlisten_(n,i,s,r){this.log_("Unlisten on "+n+" for "+i);let o={p:n},a="n";r&&(o.q=s,o.t=r),this.sendRequest(a,o)}onDisconnectPut(n,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,i,s):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:i,onComplete:s})}onDisconnectMerge(n,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,i,s):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:i,onComplete:s})}onDisconnectCancel(n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(n,i,s,r){let o={p:i,d:s};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{r&&setTimeout(()=>{r(a.s,a.d)},Math.floor(0))})}put(n,i,s,r){this.putInternal("p",n,i,s,r)}merge(n,i,s,r){this.putInternal("m",n,i,s,r)}putInternal(n,i,s,r,o){this.initConnection_();let a={p:i,d:s};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:r}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+i)}sendPut_(n){let i=this.outstandingPuts_[n].action,s=this.outstandingPuts_[n].request,r=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,s,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(o.s,o.d)})}reportStats(n){if(this.connected_){let i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,s=>{if(s.s!=="ok"){let o=s.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+tn(n));let i=n.r,s=this.requestCBHash_[i];s&&(delete this.requestCBHash_[i],s(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,i){this.log_("handleServerMessage",n,i),n==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):n==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):n==="c"?this.onListenRevoked_(i.p,i.q):n==="ac"?this.onAuthRevoked_(i.s,i.d):n==="apc"?this.onAppCheckRevoked_(i.s,i.d):n==="sd"?this.onSecurityDebugPacket_(i):RT("Unrecognized action received from server: "+tn(n)+`
Are you using the latest client?`)}onReady_(n,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){ne(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Df,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Df,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>$de&&(this.reconnectDelay_=Df),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-n);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*zde)}this.onConnectStatus_(!1)}establishConnection_(){return F(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+e.nextConnectionId_++,o=this.lastSessionId,a=!1,l=null,c=function(){l?l.close():(a=!0,s())},u=function(f){ne(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(f)};this.realtime_={close:c,sendRequest:u};let h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,g]=yield Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);a?On("getToken() completed but was canceled"):(On("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=g&&g.token,l=new OT(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,i,s,v=>{Pi(v+" ("+this.repoInfo_.toString()+")"),this.interrupt(qde)},o))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&Pi(f),c())}}})}interrupt(n){On("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){On("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Ry(this.interruptReasons_)&&(this.reconnectDelay_=Df,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let i=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let i=this.outstandingPuts_[n];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,i){let s;i?s=i.map(o=>pI(o)).join("$"):s="default";let r=this.removeListen_(n,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(n,i){let s=new ct(n).toString(),r;if(this.listens.has(s)){let o=this.listens.get(s);r=o.get(i),o.delete(i),o.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(n,i){On("Auth token revoked: "+n+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=r2&&(this.reconnectDelay_=s2,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,i){On("App check token revoked: "+n+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=r2&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let i of n.values())this.sendListen_(i);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},i="js";Ps()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),n["sdk."+i+"."+fI.replace(/\./g,"-")]=1,Ey()?n["framework.cordova"]=1:uM()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=zC.getInstance().currentlyOnline();return Ry(this.interruptReasons_)&&n}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),$e=class e{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new e(t,n)}};var Hu=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){let i=new $e(Gu,t),s=new $e(Gu,n);return this.compare(i,s)!==0}minPost(){return $e.MIN}};var BC,$C=class extends Hu{static get __EMPTY_NODE(){return BC}static set __EMPTY_NODE(t){BC=t}compare(t,n){return qu(t.name,n.name)}isDefinedOn(t){throw Ul("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return $e.MIN}maxPost(){return new $e(Al,BC)}makePost(t,n){return ne(typeof t=="string","KeyIndex indexValue must always be a string."),new $e(t,BC)}toString(){return".key"}},Bu=new $C;var ku=class{constructor(t,n,i,s,r=null){this.isReverse_=s,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=n?i(t.key,n):1,s&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},Ds=(()=>{class e{constructor(n,i,s,r,o){this.key=n,this.value=i,this.color=s??e.RED,this.left=r??Zi.EMPTY_NODE,this.right=o??Zi.EMPTY_NODE}copy(n,i,s,r,o){return new e(n??this.key,i??this.value,s??this.color,r??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,i,s){let r=this,o=s(n,r.key);return o<0?r=r.copy(null,null,null,r.left.insert(n,i,s),null):o===0?r=r.copy(null,i,null,null,null):r=r.copy(null,null,null,null,r.right.insert(n,i,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Zi.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,i){let s,r;if(s=this,i(n,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(n,i),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),i(n,s.key)===0){if(s.right.isEmpty())return Zi.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(n,i))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,i)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),LT=class{copy(t,n,i,s,r){return this}insert(t,n,i){return new Ds(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Zi=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Ds.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Ds.BLACK,null,null))}get(t){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(t,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(t){let n,i=this.root_,s=null;for(;!i.isEmpty();)if(n=this.comparator_(t,i.key),n===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new ku(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new ku(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new ku(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new ku(this.root_,null,this.comparator_,!0,t)}};Zi.EMPTY_NODE=new LT;function Kde(e,t){return qu(e.name,t.name)}function vI(e,t){return qu(e,t)}var VT;function Qde(e){VT=e}var Q2=function(e){return typeof e=="number"?"number:"+I2(e):"string:"+e},Y2=function(e){if(e.isLeafNode()){let t=e.val();ne(typeof t=="string"||typeof t=="number"||typeof t=="object"&&xs(t,".sv"),"Priority must be a string or number.")}else ne(e===VT||e.isEmpty(),"priority of unexpected type.");ne(e===VT||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var o2,Uu=(()=>{class e{constructor(n,i=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=i,this.lazyHash_=null,ne(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Y2(this.priorityNode_)}static set __childrenNodeConstructor(n){o2=n}static get __childrenNodeConstructor(){return o2}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return Be(n)?this:ze(n)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,i){return null}updateImmediateChild(n,i){return n===".priority"?this.updatePriority(i):i.isEmpty()&&n!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,i).updatePriority(this.priorityNode_)}updateChild(n,i){let s=ze(n);return s===null?i:i.isEmpty()&&s!==".priority"?this:(ne(s!==".priority"||Xo(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(mt(n),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,i){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+Q2(this.priorityNode_.val())+":");let i=typeof this.value_;n+=i+":",i==="number"?n+=I2(this.value_):n+=this.value_,this.lazyHash_=D2(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(ne(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let i=typeof n.value_,s=typeof this.value_,r=e.VALUE_TYPE_ORDER.indexOf(i),o=e.VALUE_TYPE_ORDER.indexOf(s);return ne(r>=0,"Unknown leaf type: "+i),ne(o>=0,"Unknown leaf type: "+s),r===o?s==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-r}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let i=n;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),J2,X2;function Yde(e){J2=e}function Jde(e){X2=e}var BT=class extends Hu{compare(t,n){let i=t.node.getPriority(),s=n.node.getPriority(),r=i.compareTo(s);return r===0?qu(t.name,n.name):r}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return $e.MIN}maxPost(){return new $e(Al,new Uu("[PRIORITY-POST]",X2))}makePost(t,n){let i=J2(t);return new $e(n,new Uu("[PRIORITY-POST]",i))}toString(){return".priority"}},kn=new BT;var Xde=Math.log(2),GT=class{constructor(t){let n=r=>parseInt(Math.log(r)/Xde,10),i=r=>parseInt(Array(r+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;let s=i(this.count);this.bits_=t+1&s}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},qC=function(e,t,n,i){e.sort(t);let s=function(l,c){let u=c-l,h,f;if(u===0)return null;if(u===1)return h=e[l],f=n?n(h):h,new Ds(f,h.node,Ds.BLACK,null,null);{let g=parseInt(u/2,10)+l,v=s(l,g),y=s(g+1,c);return h=e[g],f=n?n(h):h,new Ds(f,h.node,Ds.BLACK,v,y)}},r=function(l){let c=null,u=null,h=e.length,f=function(v,y){let C=h-v,E=h;h-=v;let I=s(C+1,E),T=e[C],x=n?n(T):T;g(new Ds(x,T.node,y,null,I))},g=function(v){c?(c.left=v,c=v):(u=v,c=v)};for(let v=0;v<l.count;++v){let y=l.nextBitIsOne(),C=Math.pow(2,l.count-(v+1));y?f(C,Ds.BLACK):(f(C,Ds.BLACK),f(C,Ds.RED))}return u},o=new GT(e.length),a=r(o);return new Zi(i||t,a)};var yT,Nu={},Wu=class e{constructor(t,n){this.indexes_=t,this.indexSet_=n}static get Default(){return ne(Nu&&kn,"ChildrenNode.ts has not been loaded"),yT=yT||new e({".priority":Nu},{".priority":kn}),yT}get(t){let n=aa(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof Zi?n:null}hasIndex(t){return xs(this.indexSet_,t.toString())}addIndex(t,n){ne(t!==Bu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],s=!1,r=n.getIterator($e.Wrap),o=r.getNext();for(;o;)s=s||t.isDefinedOn(o.node),i.push(o),o=r.getNext();let a;s?a=qC(i,t.getCompare()):a=Nu;let l=t.toString(),c=Object.assign({},this.indexSet_);c[l]=t;let u=Object.assign({},this.indexes_);return u[l]=a,new e(u,c)}addToIndexes(t,n){let i=yd(this.indexes_,(s,r)=>{let o=aa(this.indexSet_,r);if(ne(o,"Missing index implementation for "+r),s===Nu)if(o.isDefinedOn(t.node)){let a=[],l=n.getIterator($e.Wrap),c=l.getNext();for(;c;)c.name!==t.name&&a.push(c),c=l.getNext();return a.push(t),qC(a,o.getCompare())}else return Nu;else{let a=n.get(t.name),l=s;return a&&(l=l.remove(new $e(t.name,a))),l.insert(t,t.node)}});return new e(i,this.indexSet_)}removeFromIndexes(t,n){let i=yd(this.indexes_,s=>{if(s===Nu)return s;{let r=n.get(t.name);return r?s.remove(new $e(t.name,r)):s}});return new e(i,this.indexSet_)}};var Rf,St=(()=>{class e{constructor(n,i,s){this.children_=n,this.priorityNode_=i,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&Y2(this.priorityNode_),this.children_.isEmpty()&&ne(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Rf||(Rf=new e(new Zi(vI),null,Wu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Rf}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let i=this.children_.get(n);return i===null?Rf:i}}getChild(n){let i=ze(n);return i===null?this:this.getImmediateChild(i).getChild(mt(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,i){if(ne(i,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(i);{let s=new $e(n,i),r,o;i.isEmpty()?(r=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(n,i),o=this.indexMap_.addToIndexes(s,this.children_));let a=r.isEmpty()?Rf:this.priorityNode_;return new e(r,a,o)}}updateChild(n,i){let s=ze(n);if(s===null)return i;{ne(ze(n)!==".priority"||Xo(n)===1,".priority must be the last token in a path");let r=this.getImmediateChild(s).updateChild(mt(n),i);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let i={},s=0,r=0,o=!0;if(this.forEachChild(kn,(a,l)=>{i[a]=l.val(n),s++,o&&e.INTEGER_REGEXP_.test(a)?r=Math.max(r,Number(a)):o=!1}),!n&&o&&r<2*s){let a=[];for(let l in i)a[l]=i[l];return a}else return n&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+Q2(this.getPriority().val())+":"),this.forEachChild(kn,(i,s)=>{let r=s.hash();r!==""&&(n+=":"+i+":"+r)}),this.lazyHash_=n===""?"":D2(n)}return this.lazyHash_}getPredecessorChildName(n,i,s){let r=this.resolveIndex_(s);if(r){let o=r.getPredecessorKey(new $e(n,i));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let i=this.resolveIndex_(n);if(i){let s=i.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(n){let i=this.getFirstChildName(n);return i?new $e(i,this.children_.get(i)):null}getLastChildName(n){let i=this.resolveIndex_(n);if(i){let s=i.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(n){let i=this.getLastChildName(n);return i?new $e(i,this.children_.get(i)):null}forEachChild(n,i){let s=this.resolveIndex_(n);return s?s.inorderTraversal(r=>i(r.name,r.node)):this.children_.inorderTraversal(i)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,i){let s=this.resolveIndex_(i);if(s)return s.getIteratorFrom(n,r=>r);{let r=this.children_.getIteratorFrom(n.name,$e.Wrap),o=r.peek();for(;o!=null&&i.compare(o,n)<0;)r.getNext(),o=r.peek();return r}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,i){let s=this.resolveIndex_(i);if(s)return s.getReverseIteratorFrom(n,r=>r);{let r=this.children_.getReverseIteratorFrom(n.name,$e.Wrap),o=r.peek();for(;o!=null&&i.compare(o,n)>0;)r.getNext(),o=r.peek();return r}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Vf?-1:0}withIndex(n){if(n===Bu||this.indexMap_.hasIndex(n))return this;{let i=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,i)}}isIndexed(n){return n===Bu||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let i=n;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let s=this.getIterator(kn),r=i.getIterator(kn),o=s.getNext(),a=r.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=s.getNext(),a=r.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Bu?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),HT=class extends St{constructor(){super(new Zi(vI),St.EMPTY_NODE,Wu.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return St.EMPTY_NODE}isEmpty(){return!1}},Vf=new HT;Object.defineProperties($e,{MIN:{value:new $e(Gu,St.EMPTY_NODE)},MAX:{value:new $e(Al,Vf)}});$C.__EMPTY_NODE=St.EMPTY_NODE;Uu.__childrenNodeConstructor=St;Qde(Vf);Jde(Vf);var Zde=!0;function Nn(e,t=null){if(e===null)return St.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),ne(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let n=e;return new Uu(n,Nn(t))}if(!(e instanceof Array)&&Zde){let n=[],i=!1;if(es(e,(o,a)=>{if(o.substring(0,1)!=="."){let l=Nn(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),n.push(new $e(o,l)))}}),n.length===0)return St.EMPTY_NODE;let r=qC(n,Kde,o=>o.name,vI);if(i){let o=qC(n,kn.getCompare());return new St(r,Nn(t),new Wu({".priority":o},{".priority":kn}))}else return new St(r,Nn(t),Wu.Default)}else{let n=St.EMPTY_NODE;return es(e,(i,s)=>{if(xs(e,i)&&i.substring(0,1)!=="."){let r=Nn(s);(r.isLeafNode()||!r.isEmpty())&&(n=n.updateImmediateChild(i,r))}}),n.updatePriority(Nn(t))}}Yde(Nn);var UT=class extends Hu{constructor(t){super(),this.indexPath_=t,ne(!Be(t)&&ze(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){let i=this.extractChild(t.node),s=this.extractChild(n.node),r=i.compareTo(s);return r===0?qu(t.name,n.name):r}makePost(t,n){let i=Nn(t),s=St.EMPTY_NODE.updateChild(this.indexPath_,i);return new $e(n,s)}maxPost(){let t=St.EMPTY_NODE.updateChild(this.indexPath_,Vf);return new $e(Al,t)}toString(){return z2(this.indexPath_,0).join("/")}};var WT=class extends Hu{compare(t,n){let i=t.node.compareTo(n.node);return i===0?qu(t.name,n.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return $e.MIN}maxPost(){return $e.MAX}makePost(t,n){let i=Nn(t);return new $e(n,i)}toString(){return".value"}},ehe=new WT;function the(e){return{type:"value",snapshotNode:e}}function nhe(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function ihe(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function a2(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function she(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var jT=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=kn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ne(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ne(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Gu}hasEnd(){return this.endSet_}getIndexEndValue(){return ne(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ne(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Al}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ne(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===kn}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function l2(e){let t={};if(e.isDefault())return t;let n;if(e.index_===kn?n="$priority":e.index_===ehe?n="$value":e.index_===Bu?n="$key":(ne(e.index_ instanceof UT,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=tn(n),e.startSet_){let i=e.startAfterSet_?"startAfter":"startAt";t[i]=tn(e.indexStartValue_),e.startNameSet_&&(t[i]+=","+tn(e.indexStartName_))}if(e.endSet_){let i=e.endBeforeSet_?"endBefore":"endAt";t[i]=tn(e.indexEndValue_),e.endNameSet_&&(t[i]+=","+tn(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function c2(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==kn&&(t.i=e.index_.toString()),t}var zT=class e extends WC{constructor(t,n,i,s){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=kf("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(ne(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,n,i,s){let r=t._path.toString();this.log_("Listen called for "+r+" "+t._queryIdentifier);let o=e.getListenId_(t,i),a={};this.listens_[o]=a;let l=l2(t._queryParams);this.restRequest_(r+".json",l,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(r,h,!1,i),aa(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",s(f,null)}})}unlisten(t,n){let i=e.getListenId_(t,n);delete this.listens_[i]}get(t){let n=l2(t._queryParams),i=t._path.toString(),s=new Wl;return this.restRequest_(i+".json",n,(r,o)=>{let a=o;r===404&&(a=null,r=null),r===null?(this.onDataUpdate_(i,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(t){}restRequest_(t,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,r])=>{s&&s.accessToken&&(n.auth=s.accessToken),r&&r.token&&(n.ac=r.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+pM(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=hp(a.responseText)}catch{Pi("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&Pi("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}};var $T=class{constructor(){this.rootNode_=St.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}};function KC(){return{value:null,children:new Map}}function Z2(e,t,n){if(Be(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let i=ze(t);e.children.has(i)||e.children.set(i,KC());let s=e.children.get(i);t=mt(t),Z2(s,t,n)}}function qT(e,t,n){e.value!==null?n(t,e.value):rhe(e,(i,s)=>{let r=new ct(t.toString()+"/"+i);qT(s,r,n)})}function rhe(e,t){e.children.forEach((n,i)=>{t(i,n)})}var KT=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),n=Object.assign({},t);return this.last_&&es(this.last_,(i,s)=>{n[i]=n[i]-s}),this.last_=t,n}};var u2=10*1e3,ohe=30*1e3,ahe=5*60*1e3,QT=class{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new KT(t);let i=u2+(ohe-u2)*Math.random();If(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let t=this.statsListener_.get(),n={},i=!1;es(t,(s,r)=>{r>0&&xs(this.statsToReport_,s)&&(n[s]=r,i=!0)}),i&&this.server_.reportStats(n),If(this.reportStats_.bind(this),Math.floor(Math.random()*2*ahe))}};var Qr=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(Qr||{});function eU(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function tU(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function nU(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var YT=class e{constructor(t,n,i){this.path=t,this.affectedTree=n,this.revert=i,this.type=Qr.ACK_USER_WRITE,this.source=eU()}operationForChild(t){if(Be(this.path)){if(this.affectedTree.value!=null)return ne(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new ct(t));return new e(st(),n,this.revert)}}else return ne(ze(this.path)===t,"operationForChild called for unrelated child."),new e(mt(this.path),this.affectedTree,this.revert)}};var ju=class e{constructor(t,n,i){this.source=t,this.path=n,this.snap=i,this.type=Qr.OVERWRITE}operationForChild(t){return Be(this.path)?new e(this.source,st(),this.snap.getImmediateChild(t)):new e(this.source,mt(this.path),this.snap)}};var QC=class e{constructor(t,n,i){this.source=t,this.path=n,this.children=i,this.type=Qr.MERGE}operationForChild(t){if(Be(this.path)){let n=this.children.subtree(new ct(t));return n.isEmpty()?null:n.value?new ju(this.source,st(),n.value):new e(this.source,st(),n)}else return ne(ze(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,mt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Ff=class{constructor(t,n,i){this.node_=t,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Be(t))return this.isFullyInitialized()&&!this.filtered_;let n=ze(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};function lhe(e,t,n,i){let s=[],r=[];return t.forEach(o=>{o.type==="child_changed"&&e.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&r.push(she(o.childName,o.snapshotNode))}),Tf(e,s,"child_removed",t,i,n),Tf(e,s,"child_added",t,i,n),Tf(e,s,"child_moved",r,i,n),Tf(e,s,"child_changed",t,i,n),Tf(e,s,"value",t,i,n),s}function Tf(e,t,n,i,s,r){let o=i.filter(a=>a.type===n);o.sort((a,l)=>uhe(e,a,l)),o.forEach(a=>{let l=che(e,a,r);s.forEach(c=>{c.respondsTo(a.type)&&t.push(c.createEvent(l,e.query_))})})}function che(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function uhe(e,t,n){if(t.childName==null||n.childName==null)throw Ul("Should only compare child_ events.");let i=new $e(t.childName,t.snapshotNode),s=new $e(n.childName,n.snapshotNode);return e.index_.compare(i,s)}function iU(e,t){return{eventCache:e,serverCache:t}}function Mf(e,t,n,i){return iU(new Ff(t,n,i),e.serverCache)}function sU(e,t,n,i){return iU(e.eventCache,new Ff(t,n,i))}function JT(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Ml(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var wT,dhe=()=>(wT||(wT=new Zi(dde)),wT),li=class e{constructor(t,n=dhe()){this.value=t,this.children=n}static fromObject(t){let n=new e(null);return es(t,(i,s)=>{n=n.set(new ct(i),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:st(),value:this.value};if(Be(t))return null;{let i=ze(t),s=this.children.get(i);if(s!==null){let r=s.findRootMostMatchingPathAndValue(mt(t),n);return r!=null?{path:gn(new ct(i),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Be(t))return this;{let n=ze(t),i=this.children.get(n);return i!==null?i.subtree(mt(t)):new e(null)}}set(t,n){if(Be(t))return new e(n,this.children);{let i=ze(t),r=(this.children.get(i)||new e(null)).set(mt(t),n),o=this.children.insert(i,r);return new e(this.value,o)}}remove(t){if(Be(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=ze(t),i=this.children.get(n);if(i){let s=i.remove(mt(t)),r;return s.isEmpty()?r=this.children.remove(n):r=this.children.insert(n,s),this.value===null&&r.isEmpty()?new e(null):new e(this.value,r)}else return this}}get(t){if(Be(t))return this.value;{let n=ze(t),i=this.children.get(n);return i?i.get(mt(t)):null}}setTree(t,n){if(Be(t))return n;{let i=ze(t),r=(this.children.get(i)||new e(null)).setTree(mt(t),n),o;return r.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,r),new e(this.value,o)}}fold(t){return this.fold_(st(),t)}fold_(t,n){let i={};return this.children.inorderTraversal((s,r)=>{i[s]=r.fold_(gn(t,s),n)}),n(t,this.value,i)}findOnPath(t,n){return this.findOnPath_(t,st(),n)}findOnPath_(t,n,i){let s=this.value?i(n,this.value):!1;if(s)return s;if(Be(t))return null;{let r=ze(t),o=this.children.get(r);return o?o.findOnPath_(mt(t),gn(n,r),i):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,st(),n)}foreachOnPath_(t,n,i){if(Be(t))return this;{this.value&&i(n,this.value);let s=ze(t),r=this.children.get(s);return r?r.foreachOnPath_(mt(t),gn(n,s),i):new e(null)}}foreach(t){this.foreach_(st(),t)}foreach_(t,n){this.children.inorderTraversal((i,s)=>{s.foreach_(gn(t,i),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,i)=>{i.value&&t(n,i.value)})}};var Ts=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new li(null))}};function Pf(e,t,n){if(Be(t))return new Ts(new li(n));{let i=e.writeTree_.findRootMostValueAndPath(t);if(i!=null){let s=i.path,r=i.value,o=Xi(s,t);return r=r.updateChild(o,n),new Ts(e.writeTree_.set(s,r))}else{let s=new li(n),r=e.writeTree_.setTree(t,s);return new Ts(r)}}}function d2(e,t,n){let i=e;return es(n,(s,r)=>{i=Pf(i,gn(t,s),r)}),i}function h2(e,t){if(Be(t))return Ts.empty();{let n=e.writeTree_.setTree(t,new li(null));return new Ts(n)}}function XT(e,t){return Pl(e,t)!=null}function Pl(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(Xi(n.path,t)):null}function f2(e){let t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(kn,(i,s)=>{t.push(new $e(i,s))}):e.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&t.push(new $e(i,s.value))}),t}function Jo(e,t){if(Be(t))return e;{let n=Pl(e,t);return n!=null?new Ts(new li(n)):new Ts(e.writeTree_.subtree(t))}}function ZT(e){return e.writeTree_.isEmpty()}function zu(e,t){return rU(st(),e.writeTree_,t)}function rU(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal((s,r)=>{s===".priority"?(ne(r.value!==null,"Priority writes must always be leaf nodes"),i=r.value):n=rU(gn(e,s),r,n)}),!n.getChild(e).isEmpty()&&i!==null&&(n=n.updateChild(gn(e,".priority"),i)),n}}function oU(e,t){return dU(t,e)}function hhe(e,t,n,i,s){ne(i>e.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:s}),s&&(e.visibleWrites=Pf(e.visibleWrites,t,n)),e.lastWriteId=i}function fhe(e,t){for(let n=0;n<e.allWrites.length;n++){let i=e.allWrites[n];if(i.writeId===t)return i}return null}function phe(e,t){let n=e.allWrites.findIndex(a=>a.writeId===t);ne(n>=0,"removeWrite called with nonexistent writeId.");let i=e.allWrites[n];e.allWrites.splice(n,1);let s=i.visible,r=!1,o=e.allWrites.length-1;for(;s&&o>=0;){let a=e.allWrites[o];a.visible&&(o>=n&&ghe(a,i.path)?s=!1:Rs(i.path,a.path)&&(r=!0)),o--}if(s){if(r)return mhe(e),!0;if(i.snap)e.visibleWrites=h2(e.visibleWrites,i.path);else{let a=i.children;es(a,l=>{e.visibleWrites=h2(e.visibleWrites,gn(i.path,l))})}return!0}else return!1}function ghe(e,t){if(e.snap)return Rs(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&Rs(gn(e.path,n),t))return!0;return!1}function mhe(e){e.visibleWrites=aU(e.allWrites,vhe,st()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function vhe(e){return e.visible}function aU(e,t,n){let i=Ts.empty();for(let s=0;s<e.length;++s){let r=e[s];if(t(r)){let o=r.path,a;if(r.snap)Rs(n,o)?(a=Xi(n,o),i=Pf(i,a,r.snap)):Rs(o,n)&&(a=Xi(o,n),i=Pf(i,st(),r.snap.getChild(a)));else if(r.children){if(Rs(n,o))a=Xi(n,o),i=d2(i,a,r.children);else if(Rs(o,n))if(a=Xi(o,n),Be(a))i=d2(i,st(),r.children);else{let l=aa(r.children,ze(a));if(l){let c=l.getChild(mt(a));i=Pf(i,st(),c)}}}else throw Ul("WriteRecord should have .snap or .children")}}return i}function lU(e,t,n,i,s){if(!i&&!s){let r=Pl(e.visibleWrites,t);if(r!=null)return r;{let o=Jo(e.visibleWrites,t);if(ZT(o))return n;if(n==null&&!XT(o,st()))return null;{let a=n||St.EMPTY_NODE;return zu(o,a)}}}else{let r=Jo(e.visibleWrites,t);if(!s&&ZT(r))return n;if(!s&&n==null&&!XT(r,st()))return null;{let o=function(c){return(c.visible||s)&&(!i||!~i.indexOf(c.writeId))&&(Rs(c.path,t)||Rs(t,c.path))},a=aU(e.allWrites,o,t),l=n||St.EMPTY_NODE;return zu(a,l)}}}function Che(e,t,n){let i=St.EMPTY_NODE,s=Pl(e.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild(kn,(r,o)=>{i=i.updateImmediateChild(r,o)}),i;if(n){let r=Jo(e.visibleWrites,t);return n.forEachChild(kn,(o,a)=>{let l=zu(Jo(r,new ct(o)),a);i=i.updateImmediateChild(o,l)}),f2(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{let r=Jo(e.visibleWrites,t);return f2(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function yhe(e,t,n,i,s){ne(i||s,"Either existingEventSnap or existingServerSnap must exist");let r=gn(t,n);if(XT(e.visibleWrites,r))return null;{let o=Jo(e.visibleWrites,r);return ZT(o)?s.getChild(n):zu(o,s.getChild(n))}}function whe(e,t,n,i){let s=gn(t,n),r=Pl(e.visibleWrites,s);if(r!=null)return r;if(i.isCompleteForChild(n)){let o=Jo(e.visibleWrites,s);return zu(o,i.getNode().getImmediateChild(n))}else return null}function She(e,t){return Pl(e.visibleWrites,t)}function _he(e,t,n,i,s,r,o){let a,l=Jo(e.visibleWrites,t),c=Pl(l,st());if(c!=null)a=c;else if(n!=null)a=zu(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],h=o.getCompare(),f=r?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o),g=f.getNext();for(;g&&u.length<s;)h(g,i)!==0&&u.push(g),g=f.getNext();return u}else return[]}function bhe(){return{visibleWrites:Ts.empty(),allWrites:[],lastWriteId:-1}}function eI(e,t,n,i){return lU(e.writeTree,e.treePath,t,n,i)}function cU(e,t){return Che(e.writeTree,e.treePath,t)}function p2(e,t,n,i){return yhe(e.writeTree,e.treePath,t,n,i)}function YC(e,t){return She(e.writeTree,gn(e.treePath,t))}function Ehe(e,t,n,i,s,r){return _he(e.writeTree,e.treePath,t,n,i,s,r)}function CI(e,t,n){return whe(e.writeTree,e.treePath,t,n)}function uU(e,t){return dU(gn(e.treePath,t),e.writeTree)}function dU(e,t){return{treePath:e,writeTree:t}}var tI=class{constructor(){this.changeMap=new Map}trackChildChange(t){let n=t.type,i=t.childName;ne(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ne(i!==".priority","Only non-priority child changes can be tracked.");let s=this.changeMap.get(i);if(s){let r=s.type;if(n==="child_added"&&r==="child_removed")this.changeMap.set(i,a2(i,t.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&r==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&r==="child_changed")this.changeMap.set(i,ihe(i,s.oldSnap));else if(n==="child_changed"&&r==="child_added")this.changeMap.set(i,nhe(i,t.snapshotNode));else if(n==="child_changed"&&r==="child_changed")this.changeMap.set(i,a2(i,t.snapshotNode,s.oldSnap));else throw Ul("Illegal combination of changes: "+t+" occurred after "+s)}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}};var nI=class{getCompleteChild(t){return null}getChildAfterChild(t,n,i){return null}},hU=new nI,xf=class{constructor(t,n,i=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(t){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{let i=this.optCompleteServerCache_!=null?new Ff(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return CI(this.writes_,t,i)}}getChildAfterChild(t,n,i){let s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ml(this.viewCache_),r=Ehe(this.writes_,s,n,1,i,t);return r.length===0?null:r[0]}};function Dhe(e,t){ne(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),ne(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function Rhe(e,t,n,i,s){let r=new tI,o,a;if(n.type===Qr.OVERWRITE){let c=n;c.source.fromUser?o=iI(e,t,c.path,c.snap,i,s,r):(ne(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered()&&!Be(c.path),o=JC(e,t,c.path,c.snap,i,s,a,r))}else if(n.type===Qr.MERGE){let c=n;c.source.fromUser?o=Ihe(e,t,c.path,c.children,i,s,r):(ne(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered(),o=sI(e,t,c.path,c.children,i,s,a,r))}else if(n.type===Qr.ACK_USER_WRITE){let c=n;c.revert?o=Phe(e,t,c.path,i,s,r):o=Ahe(e,t,c.path,c.affectedTree,i,s,r)}else if(n.type===Qr.LISTEN_COMPLETE)o=Mhe(e,t,n.path,i,r);else throw Ul("Unknown operation type: "+n.type);let l=r.getChanges();return The(t,o,l),{viewCache:o,changes:l}}function The(e,t,n){let i=t.eventCache;if(i.isFullyInitialized()){let s=i.getNode().isLeafNode()||i.getNode().isEmpty(),r=JT(e);(n.length>0||!e.eventCache.isFullyInitialized()||s&&!i.getNode().equals(r)||!i.getNode().getPriority().equals(r.getPriority()))&&n.push(the(JT(t)))}}function fU(e,t,n,i,s,r){let o=t.eventCache;if(YC(i,n)!=null)return t;{let a,l;if(Be(n))if(ne(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let c=Ml(t),u=c instanceof St?c:St.EMPTY_NODE,h=cU(i,u);a=e.filter.updateFullNode(t.eventCache.getNode(),h,r)}else{let c=eI(i,Ml(t));a=e.filter.updateFullNode(t.eventCache.getNode(),c,r)}else{let c=ze(n);if(c===".priority"){ne(Xo(n)===1,"Can't have a priority with additional path components");let u=o.getNode();l=t.serverCache.getNode();let h=p2(i,n,u,l);h!=null?a=e.filter.updatePriority(u,h):a=o.getNode()}else{let u=mt(n),h;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();let f=p2(i,n,o.getNode(),l);f!=null?h=o.getNode().getImmediateChild(c).updateChild(u,f):h=o.getNode().getImmediateChild(c)}else h=CI(i,c,t.serverCache);h!=null?a=e.filter.updateChild(o.getNode(),c,h,u,s,r):a=o.getNode()}}return Mf(t,a,o.isFullyInitialized()||Be(n),e.filter.filtersNodes())}}function JC(e,t,n,i,s,r,o,a){let l=t.serverCache,c,u=o?e.filter:e.filter.getIndexedFilter();if(Be(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){let g=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),g,null)}else{let g=ze(n);if(!l.isCompleteForPath(n)&&Xo(n)>1)return t;let v=mt(n),C=l.getNode().getImmediateChild(g).updateChild(v,i);g===".priority"?c=u.updatePriority(l.getNode(),C):c=u.updateChild(l.getNode(),g,C,v,hU,null)}let h=sU(t,c,l.isFullyInitialized()||Be(n),u.filtersNodes()),f=new xf(s,h,r);return fU(e,h,n,s,f,a)}function iI(e,t,n,i,s,r,o){let a=t.eventCache,l,c,u=new xf(s,t,r);if(Be(n))c=e.filter.updateFullNode(t.eventCache.getNode(),i,o),l=Mf(t,c,!0,e.filter.filtersNodes());else{let h=ze(n);if(h===".priority")c=e.filter.updatePriority(t.eventCache.getNode(),i),l=Mf(t,c,a.isFullyInitialized(),a.isFiltered());else{let f=mt(n),g=a.getNode().getImmediateChild(h),v;if(Be(f))v=i;else{let y=u.getCompleteChild(h);y!=null?j2(f)===".priority"&&y.getChild($2(f)).isEmpty()?v=y:v=y.updateChild(f,i):v=St.EMPTY_NODE}if(g.equals(v))l=t;else{let y=e.filter.updateChild(a.getNode(),h,v,f,u,o);l=Mf(t,y,a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function g2(e,t){return e.eventCache.isCompleteForChild(t)}function Ihe(e,t,n,i,s,r,o){let a=t;return i.foreach((l,c)=>{let u=gn(n,l);g2(t,ze(u))&&(a=iI(e,a,u,c,s,r,o))}),i.foreach((l,c)=>{let u=gn(n,l);g2(t,ze(u))||(a=iI(e,a,u,c,s,r,o))}),a}function m2(e,t,n){return n.foreach((i,s)=>{t=t.updateChild(i,s)}),t}function sI(e,t,n,i,s,r,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l=t,c;Be(n)?c=i:c=new li(null).setTree(n,i);let u=t.serverCache.getNode();return c.children.inorderTraversal((h,f)=>{if(u.hasChild(h)){let g=t.serverCache.getNode().getImmediateChild(h),v=m2(e,g,f);l=JC(e,l,new ct(h),v,s,r,o,a)}}),c.children.inorderTraversal((h,f)=>{let g=!t.serverCache.isCompleteForChild(h)&&f.value===null;if(!u.hasChild(h)&&!g){let v=t.serverCache.getNode().getImmediateChild(h),y=m2(e,v,f);l=JC(e,l,new ct(h),y,s,r,o,a)}}),l}function Ahe(e,t,n,i,s,r,o){if(YC(s,n)!=null)return t;let a=t.serverCache.isFiltered(),l=t.serverCache;if(i.value!=null){if(Be(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return JC(e,t,n,l.getNode().getChild(n),s,r,a,o);if(Be(n)){let c=new li(null);return l.getNode().forEachChild(Bu,(u,h)=>{c=c.set(new ct(u),h)}),sI(e,t,n,c,s,r,a,o)}else return t}else{let c=new li(null);return i.foreach((u,h)=>{let f=gn(n,u);l.isCompleteForPath(f)&&(c=c.set(u,l.getNode().getChild(f)))}),sI(e,t,n,c,s,r,a,o)}}function Mhe(e,t,n,i,s){let r=t.serverCache,o=sU(t,r.getNode(),r.isFullyInitialized()||Be(n),r.isFiltered());return fU(e,o,n,i,hU,s)}function Phe(e,t,n,i,s,r){let o;if(YC(i,n)!=null)return t;{let a=new xf(i,t,s),l=t.eventCache.getNode(),c;if(Be(n)||ze(n)===".priority"){let u;if(t.serverCache.isFullyInitialized())u=eI(i,Ml(t));else{let h=t.serverCache.getNode();ne(h instanceof St,"serverChildren would be complete if leaf node"),u=cU(i,h)}u=u,c=e.filter.updateFullNode(l,u,r)}else{let u=ze(n),h=CI(i,u,t.serverCache);h==null&&t.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),h!=null?c=e.filter.updateChild(l,u,h,mt(n),a,r):t.eventCache.getNode().hasChild(u)?c=e.filter.updateChild(l,u,St.EMPTY_NODE,mt(n),a,r):c=l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=eI(i,Ml(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,r)))}return o=t.serverCache.isFullyInitialized()||YC(i,st())!=null,Mf(t,c,o,e.filter.filtersNodes())}}function Fhe(e,t){let n=Ml(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Be(t)&&!n.getImmediateChild(ze(t)).isEmpty())?n.getChild(t):null}function v2(e,t,n,i){t.type===Qr.MERGE&&t.source.queryId!==null&&(ne(Ml(e.viewCache_),"We should always have a full cache before handling merges"),ne(JT(e.viewCache_),"Missing event cache, even though we have a server cache"));let s=e.viewCache_,r=Rhe(e.processor_,s,t,n,i);return Dhe(e.processor_,r.viewCache),ne(r.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=r.viewCache,xhe(e,r.changes,r.viewCache.eventCache.getNode(),null)}function xhe(e,t,n,i){let s=i?[i]:e.eventRegistrations_;return lhe(e.eventGenerator_,t,n,s)}var C2;function Ohe(e){ne(!C2,"__referenceConstructor has already been defined"),C2=e}function yI(e,t,n,i){let s=t.source.queryId;if(s!==null){let r=e.views.get(s);return ne(r!=null,"SyncTree gave us an op for an invalid query."),v2(r,t,n,i)}else{let r=[];for(let o of e.views.values())r=r.concat(v2(o,t,n,i));return r}}function wI(e,t){let n=null;for(let i of e.views.values())n=n||Fhe(i,t);return n}var y2;function Nhe(e){ne(!y2,"__referenceConstructor has already been defined"),y2=e}var XC=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new li(null),this.pendingWriteTree_=bhe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function khe(e,t,n,i,s){return hhe(e.pendingWriteTree_,t,n,i,s),s?ey(e,new ju(eU(),t,n)):[]}function Lu(e,t,n=!1){let i=fhe(e.pendingWriteTree_,t);if(phe(e.pendingWriteTree_,t)){let r=new li(null);return i.snap!=null?r=r.set(st(),!0):es(i.children,o=>{r=r.set(new ct(o),!0)}),ey(e,new YT(i.path,r,n))}else return[]}function ZC(e,t,n){return ey(e,new ju(tU(),t,n))}function Lhe(e,t,n){let i=li.fromObject(n);return ey(e,new QC(tU(),t,i))}function Vhe(e,t,n,i){let s=vU(e,i);if(s!=null){let r=CU(s),o=r.path,a=r.queryId,l=Xi(o,t),c=new ju(nU(a),l,n);return yU(e,o,c)}else return[]}function Bhe(e,t,n,i){let s=vU(e,i);if(s){let r=CU(s),o=r.path,a=r.queryId,l=Xi(o,t),c=li.fromObject(n),u=new QC(nU(a),l,c);return yU(e,o,u)}else return[]}function pU(e,t,n){let s=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,(o,a)=>{let l=Xi(o,t),c=wI(a,l);if(c)return c});return lU(s,t,r,n,!0)}function ey(e,t){return gU(t,e.syncPointTree_,null,oU(e.pendingWriteTree_,st()))}function gU(e,t,n,i){if(Be(e.path))return mU(e,t,n,i);{let s=t.get(st());n==null&&s!=null&&(n=wI(s,st()));let r=[],o=ze(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){let c=n?n.getImmediateChild(o):null,u=uU(i,o);r=r.concat(gU(a,l,c,u))}return s&&(r=r.concat(yI(s,e,i,n))),r}}function mU(e,t,n,i){let s=t.get(st());n==null&&s!=null&&(n=wI(s,st()));let r=[];return t.children.inorderTraversal((o,a)=>{let l=n?n.getImmediateChild(o):null,c=uU(i,o),u=e.operationForChild(o);u&&(r=r.concat(mU(u,a,l,c)))}),s&&(r=r.concat(yI(s,e,i,n))),r}function vU(e,t){return e.tagToQueryMap.get(t)}function CU(e){let t=e.indexOf("$");return ne(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ct(e.substr(0,t))}}function yU(e,t,n){let i=e.syncPointTree_.get(t);ne(i,"Missing sync point for query tag that we're tracking");let s=oU(e.pendingWriteTree_,t);return yI(i,n,s,null)}var rI=class e{constructor(t){this.node_=t}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},oI=class e{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){let n=gn(this.path_,t);return new e(this.syncTree_,n)}node(){return pU(this.syncTree_,this.path_)}},Ghe=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},w2=function(e,t,n){if(!e||typeof e!="object")return e;if(ne(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return Hhe(e[".sv"],t,n);if(typeof e[".sv"]=="object")return Uhe(e[".sv"],t);ne(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},Hhe=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:ne(!1,"Unexpected server value: "+e)}},Uhe=function(e,t,n){e.hasOwnProperty("increment")||ne(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let i=e.increment;typeof i!="number"&&ne(!1,"Unexpected increment value: "+i);let s=t.node();if(ne(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;let o=s.getValue();return typeof o!="number"?i:o+i},Whe=function(e,t,n,i){return SI(t,new oI(n,e),i)},jhe=function(e,t,n){return SI(e,new rI(t),n)};function SI(e,t,n){let i=e.getPriority().val(),s=w2(i,t.getImmediateChild(".priority"),n),r;if(e.isLeafNode()){let o=e,a=w2(o.getValue(),t,n);return a!==o.getValue()||s!==o.getPriority().val()?new Uu(a,Nn(s)):e}else{let o=e;return r=o,s!==o.getPriority().val()&&(r=r.updatePriority(new Uu(s))),o.forEachChild(kn,(a,l)=>{let c=SI(l,t.getImmediateChild(a),n);c!==l&&(r=r.updateImmediateChild(a,c))}),r}}var Of=class{constructor(t="",n=null,i={children:{},childCount:0}){this.name=t,this.parent=n,this.node=i}};function _I(e,t){let n=t instanceof ct?t:new ct(t),i=e,s=ze(n);for(;s!==null;){let r=aa(i.node.children,s)||{children:{},childCount:0};i=new Of(s,i,r),n=mt(n),s=ze(n)}return i}function Ku(e){return e.node.value}function wU(e,t){e.node.value=t,aI(e)}function SU(e){return e.node.childCount>0}function zhe(e){return Ku(e)===void 0&&!SU(e)}function ty(e,t){es(e.node.children,(n,i)=>{t(new Of(n,e,i))})}function _U(e,t,n,i){n&&!i&&t(e),ty(e,s=>{_U(s,t,!0,i)}),n&&i&&t(e)}function $he(e,t,n){let i=n?e:e.parent;for(;i!==null;){if(t(i))return!0;i=i.parent}return!1}function Bf(e){return new ct(e.parent===null?e.name:Bf(e.parent)+"/"+e.name)}function aI(e){e.parent!==null&&qhe(e.parent,e.name,e)}function qhe(e,t,n){let i=zhe(n),s=xs(e.node.children,t);i&&s?(delete e.node.children[t],e.node.childCount--,aI(e)):!i&&!s&&(e.node.children[t]=n.node,e.node.childCount++,aI(e))}var Khe=/[\[\].#$\/\u0000-\u001F\u007F]/,Qhe=/[\[\].#$\u0000-\u001F\u007F]/,ST=10*1024*1024,bU=function(e){return typeof e=="string"&&e.length!==0&&!Khe.test(e)},Yhe=function(e){return typeof e=="string"&&e.length!==0&&!Qhe.test(e)},Jhe=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Yhe(e)};var EU=function(e,t,n){let i=n instanceof ct?new NT(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+Rl(i));if(typeof t=="function")throw new Error(e+"contains a function "+Rl(i)+" with contents = "+t.toString());if(R2(t))throw new Error(e+"contains "+t.toString()+" "+Rl(i));if(typeof t=="string"&&t.length>ST/3&&Sd(t)>ST)throw new Error(e+"contains a string greater than "+ST+" utf8 bytes "+Rl(i)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let s=!1,r=!1;if(es(t,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(r=!0,!bU(o)))throw new Error(e+" contains an invalid key ("+o+") "+Rl(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Ude(i,o),EU(e,a,i),Wde(i)}),s&&r)throw new Error(e+' contains ".value" child '+Rl(i)+" in addition to actual children.")}};var Xhe=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!bU(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Jhe(n))throw new Error(mM(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var lI=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Zhe(e,t){let n=null;for(let i=0;i<t.length;i++){let s=t[i],r=s.getPath();n!==null&&!q2(r,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:r}),n.events.push(s)}n&&e.eventLists_.push(n)}function Fl(e,t,n){Zhe(e,n),efe(e,i=>Rs(i,t)||Rs(t,i))}function efe(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){let s=e.eventLists_[i];if(s){let r=s.path;t(r)?(tfe(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function tfe(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let i=n.getEventRunner();Il&&On("event: "+n.toString()),Lf(i)}}}var nfe="repo_interrupt",ife=25,cI=class{constructor(t,n,i,s){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new lI,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=KC(),this.transactionQueueTree_=new Of,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function sfe(e,t,n){if(e.stats_=gI(e.repoInfo_),e.forceRestClient_||vde())e.server_=new zT(e.repoInfo_,(i,s,r,o)=>{S2(e,i,s,r,o)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>_2(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{tn(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}e.persistentConnection_=new mI(e.repoInfo_,t,(i,s,r,o)=>{S2(e,i,s,r,o)},i=>{_2(e,i)},i=>{ofe(e,i)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(i=>{e.server_.refreshAuthToken(i)}),e.appCheckProvider_.addTokenChangeListener(i=>{e.server_.refreshAppCheckToken(i.token)}),e.statsReporter_=yde(e.repoInfo_,()=>new QT(e.stats_,e.server_)),e.infoData_=new $T,e.infoSyncTree_=new XC({startListening:(i,s,r,o)=>{let a=[],l=e.infoData_.getNode(i._path);return l.isEmpty()||(a=ZC(e.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),bI(e,"connected",!1),e.serverSyncTree_=new XC({startListening:(i,s,r,o)=>(e.server_.listen(i,r,s,(a,l)=>{let c=o(a,l);Fl(e.eventQueue_,i._path,c)}),[]),stopListening:(i,s)=>{e.server_.unlisten(i,s)}})}function rfe(e){let n=e.infoData_.getNode(new ct(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function DU(e){return Ghe({timestamp:rfe(e)})}function S2(e,t,n,i,s){e.dataUpdateCount++;let r=new ct(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(s)if(i){let l=yd(n,c=>Nn(c));o=Bhe(e.serverSyncTree_,r,l,s)}else{let l=Nn(n);o=Vhe(e.serverSyncTree_,r,l,s)}else if(i){let l=yd(n,c=>Nn(c));o=Lhe(e.serverSyncTree_,r,l)}else{let l=Nn(n);o=ZC(e.serverSyncTree_,r,l)}let a=r;o.length>0&&(a=DI(e,r)),Fl(e.eventQueue_,a,o)}function _2(e,t){bI(e,"connected",t),t===!1&&lfe(e)}function ofe(e,t){es(t,(n,i)=>{bI(e,n,i)})}function bI(e,t,n){let i=new ct("/.info/"+t),s=Nn(n);e.infoData_.updateSnapshot(i,s);let r=ZC(e.infoSyncTree_,i,s);Fl(e.eventQueue_,i,r)}function afe(e){return e.nextWriteId_++}function lfe(e){RU(e,"onDisconnectEvents");let t=DU(e),n=KC();qT(e.onDisconnect_,st(),(s,r)=>{let o=Whe(s,r,e.serverSyncTree_,t);Z2(n,s,o)});let i=[];qT(n,st(),(s,r)=>{i=i.concat(ZC(e.serverSyncTree_,s,r));let o=hfe(e,s);DI(e,o)}),e.onDisconnect_=KC(),Fl(e.eventQueue_,st(),i)}function cfe(e){e.persistentConnection_&&e.persistentConnection_.interrupt(nfe)}function RU(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),On(n,...t)}function TU(e,t,n){return pU(e.serverSyncTree_,t,n)||St.EMPTY_NODE}function EI(e,t=e.transactionQueueTree_){if(t||ny(e,t),Ku(t)){let n=AU(e,t);ne(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&ufe(e,Bf(t),n)}else SU(t)&&ty(t,n=>{EI(e,n)})}function ufe(e,t,n){let i=n.map(c=>c.currentWriteId),s=TU(e,t,i),r=s,o=s.hash();for(let c=0;c<n.length;c++){let u=n[c];ne(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let h=Xi(t,u.path);r=r.updateChild(h,u.currentOutputSnapshotRaw)}let a=r.val(!0),l=t;e.server_.put(l.toString(),a,c=>{RU(e,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){let h=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(Lu(e.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&h.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();ny(e,_I(e.transactionQueueTree_,t)),EI(e,e.transactionQueueTree_),Fl(e.eventQueue_,t,u);for(let f=0;f<h.length;f++)Lf(h[f])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{Pi("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}DI(e,t)}},o)}function DI(e,t){let n=IU(e,t),i=Bf(n),s=AU(e,n);return dfe(e,s,i),i}function dfe(e,t,n){if(t.length===0)return;let i=[],s=[],o=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let l=t[a],c=Xi(n,l.path),u=!1,h;if(ne(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,h=l.abortReason,s=s.concat(Lu(e.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=ife)u=!0,h="maxretry",s=s.concat(Lu(e.serverSyncTree_,l.currentWriteId,!0));else{let f=TU(e,l.path,o);l.currentInputSnapshot=f;let g=t[a].update(f.val());if(g!==void 0){EU("transaction failed: Data returned ",g,l.path);let v=Nn(g);typeof g=="object"&&g!=null&&xs(g,".priority")||(v=v.updatePriority(f.getPriority()));let C=l.currentWriteId,E=DU(e),I=jhe(v,f,E);l.currentOutputSnapshotRaw=v,l.currentOutputSnapshotResolved=I,l.currentWriteId=afe(e),o.splice(o.indexOf(C),1),s=s.concat(khe(e.serverSyncTree_,l.path,I,l.currentWriteId,l.applyLocally)),s=s.concat(Lu(e.serverSyncTree_,C,!0))}else u=!0,h="nodata",s=s.concat(Lu(e.serverSyncTree_,l.currentWriteId,!0))}Fl(e.eventQueue_,n,s),s=[],u&&(t[a].status=2,function(f){setTimeout(f,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(h==="nodata"?i.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):i.push(()=>t[a].onComplete(new Error(h),!1,null))))}ny(e,e.transactionQueueTree_);for(let a=0;a<i.length;a++)Lf(i[a]);EI(e,e.transactionQueueTree_)}function IU(e,t){let n,i=e.transactionQueueTree_;for(n=ze(t);n!==null&&Ku(i)===void 0;)i=_I(i,n),t=mt(t),n=ze(t);return i}function AU(e,t){let n=[];return MU(e,t,n),n.sort((i,s)=>i.order-s.order),n}function MU(e,t,n){let i=Ku(t);if(i)for(let s=0;s<i.length;s++)n.push(i[s]);ty(t,s=>{MU(e,s,n)})}function ny(e,t){let n=Ku(t);if(n){let i=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[i]=n[s],i++);n.length=i,wU(t,n.length>0?n:void 0)}ty(t,i=>{ny(e,i)})}function hfe(e,t){let n=Bf(IU(e,t)),i=_I(e.transactionQueueTree_,t);return $he(i,s=>{_T(e,s)}),_T(e,i),_U(i,s=>{_T(e,s)}),n}function _T(e,t){let n=Ku(t);if(n){let i=[],s=[],r=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(ne(r===o-1,"All SENT items should be at beginning of queue."),r=o,n[o].status=3,n[o].abortReason="set"):(ne(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Lu(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));r===-1?wU(t,void 0):n.length=r+1,Fl(e.eventQueue_,Bf(t),s);for(let o=0;o<i.length;o++)Lf(i[o])}}function ffe(e){let t="",n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let s=n[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}t+="/"+s}return t}function pfe(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let n of e.split("&")){if(n.length===0)continue;let i=n.split("=");i.length===2?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Pi(`Invalid query segment '${n}' in query '${e}'`)}return t}var b2=function(e,t){let n=gfe(e),i=n.namespace;n.domain==="firebase.com"&&Yr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&Yr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||cde();let s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new HC(n.host,n.secure,i,s,t,"",i!==n.subdomain),path:new ct(n.pathString)}},gfe=function(e){let t="",n="",i="",s="",r="",o=!0,a="https",l=443;if(typeof e=="string"){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");u===-1&&(u=e.length);let h=e.indexOf("?");h===-1&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(s=ffe(e.substring(u,h)));let f=pfe(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(t.substring(c+1),10)):c=t.length;let g=t.slice(0,c);if(g.toLowerCase()==="localhost")n="localhost";else if(g.split(".").length<=2)n=g;else{let v=t.indexOf(".");i=t.substring(0,v).toLowerCase(),n=t.substring(v+1),r=i}"ns"in f&&(r=f.ns)}return{host:t,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:s,namespace:r}};var uI=class e{constructor(t,n,i,s){this._repo=t,this._path=n,this._queryParams=i,this._orderByCalled=s}get key(){return Be(this._path)?null:j2(this._path)}get ref(){return new $u(this._repo,this._path)}get _queryIdentifier(){let t=c2(this._queryParams),n=pI(t);return n==="{}"?"default":n}get _queryObject(){return c2(this._queryParams)}isEqual(t){if(t=et(t),!(t instanceof e))return!1;let n=this._repo===t._repo,i=q2(this._path,t._path),s=this._queryIdentifier===t._queryIdentifier;return n&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Hde(this._path)}};var $u=class e extends uI{constructor(t,n){super(t,n,new jT,!1)}get parent(){let t=$2(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}};Ohe($u);Nhe($u);var mfe="FIREBASE_DATABASE_EMULATOR_HOST",dI={},vfe=!1;function Cfe(e,t,n,i){e.repoInfo_=new HC(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),i&&(e.authTokenProvider_=i)}function yfe(e,t,n,i,s){let r=i||e.options.databaseURL;r===void 0&&(e.options.projectId||Yr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),On("Using default host for project ",e.options.projectId),r=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o=b2(r,s),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[mfe]),c?(l=!0,r=`http://${c}?ns=${a.namespace}`,o=b2(r,s),a=o.repoInfo):l=!o.repoInfo.secure;let u=s&&l?new Af(Af.OWNER):new IT(e.name,e.options,t);Xhe("Invalid Firebase Database URL",o),Be(o.path)||Yr("Database URL must point to the root of a Firebase Database (not including a child path).");let h=Sfe(a,e,u,new TT(e.name,n));return new hI(h,e)}function wfe(e,t){let n=dI[t];(!n||n[e.key]!==e)&&Yr(`Database ${t}(${e.repoInfo_}) has already been deleted.`),cfe(e),delete n[e.key]}function Sfe(e,t,n,i){let s=dI[t.name];s||(s={},dI[t.name]=s);let r=s[e.toURLString()];return r&&Yr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new cI(e,vfe,n,i),s[e.toURLString()]=r,r}var hI=class{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(sfe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new $u(this._repo,st())),this._rootInternal}_delete(){return this._rootInternal!==null&&(wfe(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Yr("Cannot call "+t+" on a deleted database.")}};function PU(e=nn(),t){let n=jt(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){let i=oo("database");i&&FU(n,...i)}return n}function FU(e,t,n,i={}){e=et(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Yr("Cannot call useEmulator() after instance has already been initialized.");let s=e._repoInternal,r;if(s.repoInfo_.nodeAdmin)i.mockUserToken&&Yr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),r=new Af(Af.OWNER);else if(i.mockUserToken){let o=typeof i.mockUserToken=="string"?i.mockUserToken:jl(i.mockUserToken,e.app.options.projectId);r=new Af(o)}Cfe(s,t,n,r)}function _fe(e){ode(ao),Et(new bt("database",(t,{instanceIdentifier:n})=>{let i=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return yfe(i,s,r,n)},"PUBLIC").setMultipleInstances(!0)),ge(zH,$H,e),ge(zH,$H,"esm2017")}mI.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};mI.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};_fe();var Gf=class{constructor(t){return t}},xU="database",RI=class{constructor(){return bn(xU)}};var TI=new X("angularfire2.database-instances");function bfe(e,t){let n=In(xU,e,t);return n&&new Gf(n)}function Efe(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new Gf(i)}}var Dfe={provide:RI,deps:[[new Me,TI]]},Rfe={provide:Gf,useFactory:bfe,deps:[[new Me,TI],Ot]};function OU(e,...t){return ge("angularfire",Tt.full,"rtdb"),pt([Rfe,Dfe,{provide:TI,useFactory:Efe(e),multi:!0,deps:[ue,Ue,Vt,Yt,[new Me,gs],[new Me,zn],...t]}])}var NU=Oe(PU,!0);var VU="functions";var II=class{constructor(t,n,i){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||i.get().then(s=>this.appCheck=s,()=>{})}getAuthToken(){return F(this,null,function*(){if(this.auth)try{let t=yield this.auth.getToken();return t?.accessToken}catch{return}})}getMessagingToken(){return F(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(t){return F(this,null,function*(){if(this.appCheck){let n=t?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return n.error?null:n.token}return null})}getContext(t){return F(this,null,function*(){let n=yield this.getAuthToken(),i=yield this.getMessagingToken(),s=yield this.getAppCheckToken(t);return{authToken:n,messagingToken:i,appCheckToken:s}})}};var AI="us-central1";var MI=class{constructor(t,n,i,s,r=AI,o){this.app=t,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new II(n,i,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(r);this.customDomain=a.origin,this.region=AI}catch{this.customDomain=null,this.region=r}}_delete(){return this.deleteService()}_url(t){let n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${n}.cloudfunctions.net/${t}`}};function Tfe(e,t,n){e.emulatorOrigin=`http://${t}:${n}`}var kU="@firebase/functions",LU="0.11.6";var Ife="auth-internal",Afe="app-check-internal",Mfe="messaging-internal";function Pfe(e,t){let n=(i,{instanceIdentifier:s})=>{let r=i.getProvider("app").getImmediate(),o=i.getProvider(Ife),a=i.getProvider(Mfe),l=i.getProvider(Afe);return new MI(r,o,a,l,s,e)};Et(new bt(VU,n,"PUBLIC").setMultipleInstances(!0)),ge(kU,LU,t),ge(kU,LU,"esm2017")}function BU(e=nn(),t=AI){let i=jt(et(e),VU).getImmediate({identifier:t}),s=oo("functions");return s&&GU(i,...s),i}function GU(e,t,n){Tfe(et(e),t,n)}Pfe(fetch.bind(self));var Hf=class{constructor(t){return t}},HU="functions",PI=class{constructor(){return bn(HU)}};var FI=new X("angularfire2.functions-instances");function Ffe(e,t){let n=In(HU,e,t);return n&&new Hf(n)}function xfe(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new Hf(i)}}var Ofe={provide:PI,deps:[[new Me,FI]]},Nfe={provide:Hf,useFactory:Ffe,deps:[[new Me,FI],Ot]};function UU(e,...t){return ge("angularfire",Tt.full,"fn"),pt([Nfe,Ofe,{provide:FI,useFactory:xfe(e),multi:!0,deps:[ue,Ue,Vt,Yt,[new Me,gs],[new Me,zn],...t]}])}var WU=Oe(BU,!0);var kfe="/firebase-messaging-sw.js",Lfe="/firebase-cloud-messaging-push-scope",QU="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Vfe="https://fcmregistrations.googleapis.com/v1",YU="google.c.a.c_id",Bfe="google.c.a.c_l",Gfe="google.c.a.ts",Hfe="google.c.a.e";var iy=function(e){return e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked",e}(iy||{});function Jr(e){let t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ufe(e){let t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(n),s=new Uint8Array(i.length);for(let r=0;r<i.length;++r)s[r]=i.charCodeAt(r);return s}var xI="fcm_token_details_db",Wfe=5,jU="fcm_token_object_Store";function jfe(e){return F(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(r=>r.name).includes(xI))return null;let t=null;return(yield _d(xI,Wfe,{upgrade:(i,s,r,o)=>F(this,null,function*(){var a;if(s<2||!i.objectStoreNames.contains(jU))return;let l=o.objectStore(jU),c=yield l.index("fcmSenderId").get(e);if(yield l.clear(),!!c){if(s===2){let u=c;if(!u.auth||!u.p256dh||!u.endpoint)return;t={token:u.fcmToken,createTime:(a=u.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:typeof u.vapidKey=="string"?u.vapidKey:Jr(u.vapidKey)}}}else if(s===3){let u=c;t={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Jr(u.auth),p256dh:Jr(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Jr(u.vapidKey)}}}else if(s===4){let u=c;t={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Jr(u.auth),p256dh:Jr(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Jr(u.vapidKey)}}}}})})).close(),yield fp(xI),yield fp("fcm_vapid_details_db"),yield fp("undefined"),zfe(t)?t:null})}function zfe(e){if(!e||!e.subscriptionOptions)return!1;let{subscriptionOptions:t}=e;return typeof e.createTime=="number"&&e.createTime>0&&typeof e.token=="string"&&e.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}var $fe="firebase-messaging-database",qfe=1,Uf="firebase-messaging-store",OI=null;function JU(){return OI||(OI=_d($fe,qfe,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Uf)}}})),OI}function Kfe(e){return F(this,null,function*(){let t=XU(e),i=yield(yield JU()).transaction(Uf).objectStore(Uf).get(t);if(i)return i;{let s=yield jfe(e.appConfig.senderId);if(s)return yield LI(e,s),s}})}function LI(e,t){return F(this,null,function*(){let n=XU(e),s=(yield JU()).transaction(Uf,"readwrite");return yield s.objectStore(Uf).put(t,n),yield s.done,t})}function XU({appConfig:e}){return e.appId}var Qfe={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ei=new Fs("messaging","Messaging",Qfe);function Yfe(e,t){return F(this,null,function*(){let n=yield BI(e),i=ZU(t),s={method:"POST",headers:n,body:JSON.stringify(i)},r;try{r=yield(yield fetch(VI(e.appConfig),s)).json()}catch(o){throw ei.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(r.error){let o=r.error.message;throw ei.create("token-subscribe-failed",{errorInfo:o})}if(!r.token)throw ei.create("token-subscribe-no-token");return r.token})}function Jfe(e,t){return F(this,null,function*(){let n=yield BI(e),i=ZU(t.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(i)},r;try{r=yield(yield fetch(`${VI(e.appConfig)}/${t.token}`,s)).json()}catch(o){throw ei.create("token-update-failed",{errorInfo:o?.toString()})}if(r.error){let o=r.error.message;throw ei.create("token-update-failed",{errorInfo:o})}if(!r.token)throw ei.create("token-update-no-token");return r.token})}function Xfe(e,t){return F(this,null,function*(){let i={method:"DELETE",headers:yield BI(e)};try{let r=yield(yield fetch(`${VI(e.appConfig)}/${t}`,i)).json();if(r.error){let o=r.error.message;throw ei.create("token-unsubscribe-failed",{errorInfo:o})}}catch(s){throw ei.create("token-unsubscribe-failed",{errorInfo:s?.toString()})}})}function VI({projectId:e}){return`${Vfe}/projects/${e}/registrations`}function BI(n){return F(this,arguments,function*({appConfig:e,installations:t}){let i=yield t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${i}`})})}function ZU({p256dh:e,auth:t,endpoint:n,vapidKey:i}){let s={web:{endpoint:n,auth:t,p256dh:e}};return i!==QU&&(s.web.applicationPubKey=i),s}var Zfe=7*24*60*60*1e3;function epe(e){return F(this,null,function*(){let t=yield npe(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:Jr(t.getKey("auth")),p256dh:Jr(t.getKey("p256dh"))},i=yield Kfe(e.firebaseDependencies);if(i){if(ipe(i.subscriptionOptions,n))return Date.now()>=i.createTime+Zfe?tpe(e,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{yield Xfe(e.firebaseDependencies,i.token)}catch(s){console.warn(s)}return zU(e.firebaseDependencies,n)}else return zU(e.firebaseDependencies,n)})}function tpe(e,t){return F(this,null,function*(){try{let n=yield Jfe(e.firebaseDependencies,t),i=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return yield LI(e.firebaseDependencies,i),n}catch(n){throw n}})}function zU(e,t){return F(this,null,function*(){let i={token:yield Yfe(e,t),createTime:Date.now(),subscriptionOptions:t};return yield LI(e,i),i.token})}function npe(e,t){return F(this,null,function*(){let n=yield e.pushManager.getSubscription();return n||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ufe(t)})})}function ipe(e,t){let n=t.vapidKey===e.vapidKey,i=t.endpoint===e.endpoint,s=t.auth===e.auth,r=t.p256dh===e.p256dh;return n&&i&&s&&r}function $U(e){let t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return spe(t,e),rpe(t,e),ope(t,e),t}function spe(e,t){if(!t.notification)return;e.notification={};let n=t.notification.title;n&&(e.notification.title=n);let i=t.notification.body;i&&(e.notification.body=i);let s=t.notification.image;s&&(e.notification.image=s);let r=t.notification.icon;r&&(e.notification.icon=r)}function rpe(e,t){t.data&&(e.data=t.data)}function ope(e,t){var n,i,s,r,o;if(!t.fcmOptions&&!(!((n=t.notification)===null||n===void 0)&&n.click_action))return;e.fcmOptions={};let a=(s=(i=t.fcmOptions)===null||i===void 0?void 0:i.link)!==null&&s!==void 0?s:(r=t.notification)===null||r===void 0?void 0:r.click_action;a&&(e.fcmOptions.link=a);let l=(o=t.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(e.fcmOptions.analyticsLabel=l)}function ape(e){return typeof e=="object"&&!!e&&YU in e}eW("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");eW("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function eW(e,t){let n=[];for(let i=0;i<e.length;i++)n.push(e.charAt(i)),i<t.length&&n.push(t.charAt(i));return n.join("")}function lpe(e){if(!e||!e.options)throw NI("App Configuration Object");if(!e.name)throw NI("App Name");let t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(let i of t)if(!n[i])throw NI(i);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function NI(e){return ei.create("missing-app-config-values",{valueName:e})}var kI=class{constructor(t,n,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let s=lpe(t);this.firebaseDependencies={app:t,appConfig:s,installations:n,analyticsProvider:i}}_delete(){return Promise.resolve()}};function cpe(e){return F(this,null,function*(){try{e.swRegistration=yield navigator.serviceWorker.register(kfe,{scope:Lfe}),e.swRegistration.update().catch(()=>{})}catch(t){throw ei.create("failed-service-worker-registration",{browserErrorMessage:t?.message})}})}function upe(e,t){return F(this,null,function*(){if(!t&&!e.swRegistration&&(yield cpe(e)),!(!t&&e.swRegistration)){if(!(t instanceof ServiceWorkerRegistration))throw ei.create("invalid-sw-registration");e.swRegistration=t}})}function dpe(e,t){return F(this,null,function*(){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=QU)})}function hpe(e,t){return F(this,null,function*(){if(!navigator)throw ei.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw ei.create("permission-blocked");return yield dpe(e,t?.vapidKey),yield upe(e,t?.serviceWorkerRegistration),epe(e)})}function fpe(e,t,n){return F(this,null,function*(){let i=ppe(t);(yield e.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:n[YU],message_name:n[Bfe],message_time:n[Gfe],message_device_time:Math.floor(Date.now()/1e3)})})}function ppe(e){switch(e){case iy.NOTIFICATION_CLICKED:return"notification_open";case iy.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function gpe(e,t){return F(this,null,function*(){let n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===iy.PUSH_RECEIVED&&(typeof e.onMessageHandler=="function"?e.onMessageHandler($U(n)):e.onMessageHandler.next($U(n)));let i=n.data;ape(i)&&i[Hfe]==="1"&&(yield fpe(e,n.messageType,i))})}var qU="@firebase/messaging",KU="0.12.10";var mpe=e=>{let t=new kI(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>gpe(t,n)),t},vpe=e=>{let t=e.getProvider("messaging").getImmediate();return{getToken:i=>hpe(t,i)}};function Cpe(){Et(new bt("messaging",mpe,"PUBLIC")),Et(new bt("messaging-internal",vpe,"PRIVATE")),ge(qU,KU),ge(qU,KU,"esm2017")}function GI(){return F(this,null,function*(){try{yield oa()}catch{return!1}return typeof window<"u"&&is()&&Cd()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function tW(e=nn()){return GI().then(t=>{if(!t)throw ei.create("unsupported-browser")},t=>{throw ei.create("indexed-db-unsupported")}),jt(et(e),"messaging").getImmediate()}Cpe();var Wf=class{constructor(t){return t}},nW="messaging",HI=class{constructor(){return bn(nW)}};var iW="__angularfire_symbol__messagingIsSupported",UI="__angularfire_symbol__messagingIsSupportedValue";globalThis[iW]||=GI().then(e=>globalThis[UI]=e).catch(()=>globalThis[UI]=!1);var sy={async:()=>globalThis[iW],sync:()=>{let e=globalThis[UI];if(e===void 0)throw new Error(Uc("Messaging"));return e}},WI=new X("angularfire2.messaging-instances");function ype(e,t){if(!sy.sync())return null;let n=In(nW,e,t);return n&&new Wf(n)}function wpe(e){return(t,n)=>{if(!sy.sync())return null;let i=t.runOutsideAngular(()=>e(n));return new Wf(i)}}var Spe={provide:HI,deps:[[new Me,WI]]},_pe={provide:Wf,useFactory:ype,deps:[[new Me,WI],Ot]};function sW(e,...t){return ge("angularfire",Tt.full,"fcm"),pt([_pe,Spe,{provide:Do,useValue:sy.async,multi:!0},{provide:WI,useFactory:wpe(e),multi:!0,deps:[ue,Ue,Vt,Yt,...t]}])}var JGe=sy.async;var rW=Oe(tW,!0);var dW="firebasestorage.googleapis.com",bpe="storageBucket",Epe=2*60*1e3,Dpe=10*60*1e3;var or=class e extends ss{constructor(t,n,i=0){super(jI(t),`Firebase Storage: ${n} (${jI(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,e.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return jI(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Zr=function(e){return e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment",e}(Zr||{});function jI(e){return"storage/"+e}function Rpe(){let e="An unknown error occurred, please check the error payload for server response.";return new or(Zr.UNKNOWN,e)}function Tpe(){return new or(Zr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Ipe(){return new or(Zr.CANCELED,"User canceled the upload/download.")}function Ape(e){return new or(Zr.INVALID_URL,"Invalid URL '"+e+"'.")}function Mpe(e){return new or(Zr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function oW(e){return new or(Zr.INVALID_ARGUMENT,e)}function hW(){return new or(Zr.APP_DELETED,"The Firebase app was deleted.")}function Ppe(e){return new or(Zr.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var Xr=class e{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let i;try{i=e.makeFromUrl(t,n)}catch{return new e(t,"")}if(i.path==="")return i;throw Mpe(t)}static makeFromUrl(t,n){let i=null,s="([A-Za-z0-9.\\-_]+)";function r(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(x){x.path_=decodeURIComponent(x.path)}let u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",g=new RegExp(`^https?://${h}/${u}/b/${s}/o${f}`,"i"),v={bucket:1,path:3},y=n===dW?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",E=new RegExp(`^https?://${y}/${s}/${C}`,"i"),T=[{regex:a,indices:l,postModify:r},{regex:g,indices:v,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let x=0;x<T.length;x++){let z=T[x],V=z.regex.exec(t);if(V){let b=V[z.indices.bucket],S=V[z.indices.path];S||(S=""),i=new e(b,S),z.postModify(i);break}}if(i==null)throw Ape(t);return i}},zI=class{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}};function Fpe(e,t,n){let i=1,s=null,r=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...C){c||(c=!0,t.apply(null,C))}function h(C){s=setTimeout(()=>{s=null,e(g,l())},C)}function f(){r&&clearTimeout(r)}function g(C,...E){if(c){f();return}if(C){f(),u.call(null,C,...E);return}if(l()||o){f(),u.call(null,C,...E);return}i<64&&(i*=2);let T;a===1?(a=2,T=0):T=(i+Math.random())*1e3,h(T)}let v=!1;function y(C){v||(v=!0,f(),!c&&(s!==null?(C||(a=2),clearTimeout(s),h(0)):C||(a=1)))}return h(0),r=setTimeout(()=>{o=!0,y(!0)},n),y}function xpe(e){e(!1)}function Ope(e){return e!==void 0}function aW(e,t,n,i){if(i<t)throw oW(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw oW(`Invalid value for '${e}'. Expected ${n} or less.`)}function Npe(e){let t=encodeURIComponent,n="?";for(let i in e)if(e.hasOwnProperty(i)){let s=t(i)+"="+t(e[i]);n=n+s+"&"}return n=n.slice(0,-1),n}var $I=function(e){return e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT",e}($I||{});function kpe(e,t){let n=e>=500&&e<600,s=[408,429].indexOf(e)!==-1,r=t.indexOf(e)!==-1;return n||s||r}var qI=class{constructor(t,n,i,s,r,o,a,l,c,u,h,f=!0){this.url_=t,this.method_=n,this.headers_=i,this.body_=s,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,v)=>{this.resolve_=g,this.reject_=v,this.start_()})}start_(){let t=(i,s)=>{if(s){i(!1,new Qu(!1,null,!0));return}let r=this.connectionFactory_();this.pendingConnection_=r;let o=a=>{let l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&r.addUploadProgressListener(o),r.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(o),this.pendingConnection_=null;let a=r.getErrorCode()===$I.NO_ERROR,l=r.getStatus();if(!a||kpe(l,this.additionalRetryCodes_)&&this.retry){let u=r.getErrorCode()===$I.ABORT;i(!1,new Qu(!1,null,u));return}let c=this.successCodes_.indexOf(l)!==-1;i(!0,new Qu(c,r))})},n=(i,s)=>{let r=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{let l=this.callback_(a,a.getResponse());Ope(l)?r(l):r()}catch(l){o(l)}else if(a!==null){let l=Rpe();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){let l=this.appDelete_?hW():Ipe();o(l)}else{let l=Tpe();o(l)}};this.canceled_?n(!1,new Qu(!1,null,!0)):this.backoffId_=Fpe(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&xpe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Qu=class{constructor(t,n,i){this.wasSuccessCode=t,this.connection=n,this.canceled=!!i}};function Lpe(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function Vpe(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Bpe(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Gpe(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function Hpe(e,t,n,i,s,r,o=!0){let a=Npe(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return Bpe(c,t),Lpe(c,n),Vpe(c,r),Gpe(c,i),new qI(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,o)}function Upe(e){if(e.length===0)return null;let t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function Wpe(e){let t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}var iHe=256*1024;var KI=class e{constructor(t,n){this._service=t,n instanceof Xr?this._location=n:this._location=Xr.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new e(t,n)}get root(){let t=new Xr(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Wpe(this._location.path)}get storage(){return this._service}get parent(){let t=Upe(this._location.path);if(t===null)return null;let n=new Xr(this._location.bucket,t);return new e(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw Ppe(t)}};function lW(e,t){let n=t?.[bpe];return n==null?null:Xr.makeFromBucketSpec(n,e)}function jpe(e,t,n,i={}){e.host=`${t}:${n}`,e._protocol="http";let{mockUserToken:s}=i;s&&(e._overrideAuthToken=typeof s=="string"?s:jl(s,e.app.options.projectId))}var QI=class{constructor(t,n,i,s,r){this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=s,this._firebaseVersion=r,this._bucket=null,this._host=dW,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Epe,this._maxUploadRetryTime=Dpe,this._requests=new Set,s!=null?this._bucket=Xr.makeFromBucketSpec(s,this._host):this._bucket=lW(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Xr.makeFromBucketSpec(this._url,t):this._bucket=lW(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){aW("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){aW("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){return F(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let t=this._authProvider.getImmediate({optional:!0});if(t){let n=yield t.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return F(this,null,function*(){let t=this._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new KI(this,t)}_makeRequest(t,n,i,s,r=!0){if(this._deleted)return new zI(hW());{let o=Hpe(t,this._appId,i,s,n,this._firebaseVersion,r);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(t,n){return F(this,null,function*(){let[i,s]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,i,s).getPromise()})}},cW="@firebase/storage",uW="0.12.6";var fW="storage";function pW(e=nn(),t){e=et(e);let i=jt(e,fW).getImmediate({identifier:t}),s=oo("storage");return s&&gW(i,...s),i}function gW(e,t,n,i={}){jpe(e,t,n,i)}function zpe(e,{instanceIdentifier:t}){let n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new QI(n,i,s,t,ao)}function $pe(){Et(new bt(fW,zpe,"PUBLIC").setMultipleInstances(!0)),ge(cW,uW,""),ge(cW,uW,"esm2017")}$pe();var jf=class{constructor(t){return t}},mW="storage",YI=class{constructor(){return bn(mW)}};var JI=new X("angularfire2.storage-instances");function qpe(e,t){let n=In(mW,e,t);return n&&new jf(n)}function Kpe(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new jf(i)}}var Qpe={provide:YI,deps:[[new Me,JI]]},Ype={provide:jf,useFactory:qpe,deps:[[new Me,JI],Ot]};function vW(e,...t){return ge("angularfire",Tt.full,"gcs"),pt([Ype,Qpe,{provide:JI,useFactory:Kpe(e),multi:!0,deps:[ue,Ue,Vt,Yt,[new Me,gs],[new Me,zn],...t]}])}var CW=Oe(pW,!0);var XI="@firebase/remote-config",yW="0.4.8";var wW="remote-config";var Jpe={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},ci=new Fs("remoteconfig","Remote Config",Jpe);function SW(e=nn()){return e=et(e),jt(e,wW).getImmediate()}function _W(e){let t=et(e);return t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(()=>{t._isInitializationComplete=!0})),t._initializePromise}var ZI=class{constructor(t,n,i,s){this.client=t,this.storage=n,this.storageCache=i,this.logger=s}isCachedDataFresh(t,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let i=Date.now()-n,s=i<=t;return this.logger.debug(`Config fetch cache check. Cache age millis: ${i}. Cache max age millis (minimumFetchIntervalMillis setting): ${t}. Is cache hit: ${s}.`),s}fetch(t){return F(this,null,function*(){let[n,i]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(i&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n))return i;t.eTag=i&&i.eTag;let s=yield this.client.fetch(t),r=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return s.status===200&&r.push(this.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(r),s})}};function Xpe(e=navigator){return e.languages&&e.languages[0]||e.language}var eA=class{constructor(t,n,i,s,r,o){this.firebaseInstallations=t,this.sdkVersion=n,this.namespace=i,this.projectId=s,this.apiKey=r,this.appId=o}fetch(t){return F(this,null,function*(){let[n,i]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),r=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,o={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:i,app_id:this.appId,language_code:Xpe()},l={method:"POST",headers:o,body:JSON.stringify(a)},c=fetch(r,l),u=new Promise((C,E)=>{t.signal.addEventListener(()=>{let I=new Error("The operation was aborted.");I.name="AbortError",E(I)})}),h;try{yield Promise.race([c,u]),h=yield c}catch(C){let E="fetch-client-network";throw C?.name==="AbortError"&&(E="fetch-timeout"),ci.create(E,{originalErrorMessage:C?.message})}let f=h.status,g=h.headers.get("ETag")||void 0,v,y;if(h.status===200){let C;try{C=yield h.json()}catch(E){throw ci.create("fetch-client-parse",{originalErrorMessage:E?.message})}v=C.entries,y=C.state}if(y==="INSTANCE_STATE_UNSPECIFIED"?f=500:y==="NO_CHANGE"?f=304:(y==="NO_TEMPLATE"||y==="EMPTY_CONFIG")&&(v={}),f!==304&&f!==200)throw ci.create("fetch-status",{httpStatus:f});return{status:f,eTag:g,config:v}})}};function Zpe(e,t){return new Promise((n,i)=>{let s=Math.max(t-Date.now(),0),r=setTimeout(n,s);e.addEventListener(()=>{clearTimeout(r),i(ci.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function ege(e){if(!(e instanceof ss)||!e.customData)return!1;let t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var tA=class{constructor(t,n){this.client=t,this.storage=n}fetch(t){return F(this,null,function*(){let n=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(t,n)})}attemptFetch(s,r){return F(this,arguments,function*(t,{throttleEndTimeMillis:n,backoffCount:i}){yield Zpe(t.signal,n);try{let o=yield this.client.fetch(t);return yield this.storage.deleteThrottleMetadata(),o}catch(o){if(!ege(o))throw o;let a={throttleEndTimeMillis:Date.now()+zl(i),backoffCount:i+1};return yield this.storage.setThrottleMetadata(a),this.attemptFetch(t,a)}})}};var tge=60*1e3,nge=12*60*60*1e3,nA=class{constructor(t,n,i,s,r){this.app=t,this._client=n,this._storageCache=i,this._storage=s,this._logger=r,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:tge,minimumFetchIntervalMillis:nge},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}};function ry(e,t){let n=e.target.error||void 0;return ci.create(t,{originalErrorMessage:n&&n?.message})}var xl="app_namespace_store",ige="firebase_remote_config",sge=1;function rge(){return new Promise((e,t)=>{try{let n=indexedDB.open(ige,sge);n.onerror=i=>{t(ry(i,"storage-open"))},n.onsuccess=i=>{e(i.target.result)},n.onupgradeneeded=i=>{let s=i.target.result;switch(i.oldVersion){case 0:s.createObjectStore(xl,{keyPath:"compositeKey"})}}}catch(n){t(ci.create("storage-open",{originalErrorMessage:n?.message}))}})}var iA=class{constructor(t,n,i,s=rge()){this.appId=t,this.appName=n,this.namespace=i,this.openDbPromise=s}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(t){return this.set("last_fetch_status",t)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(t){return this.set("last_successful_fetch_timestamp_millis",t)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(t){return this.set("last_successful_fetch_response",t)}getActiveConfig(){return this.get("active_config")}setActiveConfig(t){return this.set("active_config",t)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(t){return this.set("active_config_etag",t)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(t){return this.set("throttle_metadata",t)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(t){return F(this,null,function*(){let n=yield this.openDbPromise;return new Promise((i,s)=>{let o=n.transaction([xl],"readonly").objectStore(xl),a=this.createCompositeKey(t);try{let l=o.get(a);l.onerror=c=>{s(ry(c,"storage-get"))},l.onsuccess=c=>{let u=c.target.result;i(u?u.value:void 0)}}catch(l){s(ci.create("storage-get",{originalErrorMessage:l?.message}))}})})}set(t,n){return F(this,null,function*(){let i=yield this.openDbPromise;return new Promise((s,r)=>{let a=i.transaction([xl],"readwrite").objectStore(xl),l=this.createCompositeKey(t);try{let c=a.put({compositeKey:l,value:n});c.onerror=u=>{r(ry(u,"storage-set"))},c.onsuccess=()=>{s()}}catch(c){r(ci.create("storage-set",{originalErrorMessage:c?.message}))}})})}delete(t){return F(this,null,function*(){let n=yield this.openDbPromise;return new Promise((i,s)=>{let o=n.transaction([xl],"readwrite").objectStore(xl),a=this.createCompositeKey(t);try{let l=o.delete(a);l.onerror=c=>{s(ry(c,"storage-delete"))},l.onsuccess=()=>{i()}}catch(l){s(ci.create("storage-delete",{originalErrorMessage:l?.message}))}})})}createCompositeKey(t){return[this.appId,this.appName,this.namespace,t].join()}};var sA=class{constructor(t){this.storage=t}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){return F(this,null,function*(){let t=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),i=this.storage.getActiveConfig(),s=yield t;s&&(this.lastFetchStatus=s);let r=yield n;r&&(this.lastSuccessfulFetchTimestampMillis=r);let o=yield i;o&&(this.activeConfig=o)})}setLastFetchStatus(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)}setLastSuccessfulFetchTimestampMillis(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)}setActiveConfig(t){return this.activeConfig=t,this.storage.setActiveConfig(t)}};function oge(){Et(new bt(wW,e,"PUBLIC").setMultipleInstances(!0)),ge(XI,yW),ge(XI,yW,"esm2017");function e(t,{instanceIdentifier:n}){let i=t.getProvider("app").getImmediate(),s=t.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ci.create("registration-window");if(!is())throw ci.create("indexed-db-unavailable");let{projectId:r,apiKey:o,appId:a}=i.options;if(!r)throw ci.create("registration-project-id");if(!o)throw ci.create("registration-api-key");if(!a)throw ci.create("registration-app-id");n=n||"firebase";let l=new iA(a,i.name,n),c=new sA(l),u=new Os(XI);u.logLevel=hi.ERROR;let h=new eA(s,ao,n,r,o,a),f=new tA(h,l),g=new ZI(f,l,c,u),v=new nA(i,g,c,l,u);return _W(v),v}}function bW(){return F(this,null,function*(){if(!is())return!1;try{return yield oa()}catch{return!1}})}oge();var zf=class{constructor(t){return t}},EW="remote-config",rA=class{constructor(){return bn(EW)}};var oA="__angularfire_symbol__remoteConfigIsSupportedValue",DW="__angularfire_symbol__remoteConfigIsSupported";globalThis[DW]||=bW().then(e=>globalThis[oA]=e).catch(()=>globalThis[oA]=!1);var oy={async:()=>globalThis[DW],sync:()=>{let e=globalThis[oA];if(e===void 0)throw new Error(Uc("RemoteConfig"));return e}},aA=new X("angularfire2.remote-config-instances");function age(e,t){if(!oy.sync())return null;let n=In(EW,e,t);return n&&new zf(n)}function lge(e){return(t,n)=>{if(!oy.sync())return null;let i=t.runOutsideAngular(()=>e(n));return new zf(i)}}var cge={provide:rA,deps:[[new Me,aA]]},uge={provide:zf,useFactory:age,deps:[[new Me,aA],Ot]};function RW(e,...t){return ge("angularfire",Tt.full,"rc"),pt([uge,cge,{provide:Do,useValue:oy.async,multi:!0},{provide:aA,useFactory:lge(e),multi:!0,deps:[ue,Ue,Vt,Yt,...t]}])}var e2e=oy.async;var TW=Oe(SW,!0);var lA={firebaseConfig:{projectId:"expense-tracker-app-ee455",appId:"1:652658231358:web:16ee9e447afa0f2385696f",storageBucket:"expense-tracker-app-ee455.appspot.com",apiKey:"AIzaSyDOMgJPMGTfIHUNZDV8k4z4jXNGEaXMZBo",authDomain:"expense-tracker-app-ee455.firebaseapp.com",messagingSenderId:"652658231358",measurementId:"G-8E6SEFV1FX"}};var IW={providers:[{provide:$m,useValue:lA.firebaseConfig},AO(iH),K1(),nN(()=>iN(lA.firebaseConfig)),lN(()=>dN()),jH(()=>UH()),WH,pT,hV(()=>vV()),OU(()=>NU()),UU(()=>WU()),sW(()=>rW()),vW(()=>CW()),RW(()=>TW())]};var AW=(()=>{let t=class t{constructor(i){this.auth=i}ngOnInit(){this.auth.user$.subscribe(i=>{i?this.auth.currentUserSig.set({email:i.email,username:i.displayName}):this.auth.currentUserSig.set(null),console.log(this.auth.currentUserSig())})}};t.\u0275fac=function(s){return new(s||t)(J(Hi))},t.\u0275cmp=Ee({type:t,selectors:[["app-root"]],standalone:!0,features:[fs([dk()]),De],decls:1,vars:0,template:function(s,r){s&1&&ae(0,"router-outlet")},dependencies:[xt,_h]});let e=t;return e})();q1(AW,IW).catch(e=>console.error(e));
