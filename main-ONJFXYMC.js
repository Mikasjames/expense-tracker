import{$ as Ey,A as aM,B as As,C as ia,D as Sy,E as md,F as vd,G as lM,H as cM,I as uM,J as dM,K as Cd,L as Wl,M as Ze,N as bt,O as di,P as Ms,Q as yd,R as up,S as Et,T as Ht,U as no,V as hM,W as Xt,X as dp,Y as pe,Z as _y,_ as by,a as XA,aa as hp,b as ap,ba as fp,c as ZA,ca as Dy,d as eM,da as sa,e as te,f as Gl,g as lp,h as tM,i as nM,j as to,k as Hl,l as Ul,m as iM,n as yy,o as wy,p as sM,q as Ts,r as rM,s as ts,t as na,u as gd,v as ns,w as Is,x as cp,y as Jt,z as oM}from"./chunk-MWGNQXGZ.js";import{a as B,b as se,c as op,f as F}from"./chunk-FO65GQC2.js";function XW(e,t){return Object.is(e,t)}var Zt=null,pp=!1,gp=1,zl=Symbol("SIGNAL");function $e(e){let t=Zt;return Zt=e,t}var Ry={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function fM(e){if(pp)throw new Error("");if(Zt===null)return;Zt.consumerOnSignalRead(e);let t=Zt.nextProducerIndex++;if(jl(Zt),t<Zt.producerNode.length&&Zt.producerNode[t]!==e&&wd(Zt)){let n=Zt.producerNode[t];mp(n,Zt.producerIndexOfThis[t])}Zt.producerNode[t]!==e&&(Zt.producerNode[t]=e,Zt.producerIndexOfThis[t]=wd(Zt)?yM(e,Zt,t):0),Zt.producerLastReadVersion[t]=e.version}function ZW(){gp++}function ej(e){if(!(wd(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===gp)){if(!e.producerMustRecompute(e)&&!Ty(e)){e.dirty=!1,e.lastCleanEpoch=gp;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=gp}}function pM(e){if(e.liveConsumerNode===void 0)return;let t=pp;pp=!0;try{for(let n of e.liveConsumerNode)n.dirty||tj(n)}finally{pp=t}}function gM(){return Zt?.consumerAllowSignalWrites!==!1}function tj(e){e.dirty=!0,pM(e),e.consumerMarkedDirty?.(e)}function mM(e){return e&&(e.nextProducerIndex=0),$e(e)}function vM(e,t){if($e(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(wd(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)mp(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Ty(e){jl(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],i=e.producerLastReadVersion[t];if(i!==n.version||(ej(n),i!==n.version))return!0}return!1}function CM(e){if(jl(e),wd(e))for(let t=0;t<e.producerNode.length;t++)mp(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function yM(e,t,n){if(wM(e),jl(e),e.liveConsumerNode.length===0)for(let i=0;i<e.producerNode.length;i++)e.producerIndexOfThis[i]=yM(e.producerNode[i],e,i);return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function mp(e,t){if(wM(e),jl(e),e.liveConsumerNode.length===1)for(let i=0;i<e.producerNode.length;i++)mp(e.producerNode[i],e.producerIndexOfThis[i]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let i=e.liveConsumerIndexOfThis[t],s=e.liveConsumerNode[t];jl(s),s.producerIndexOfThis[i]=t}}function wd(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function jl(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function wM(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function nj(){throw new Error}var SM=nj;function _M(){SM()}function bM(e){SM=e}var ij=null;function EM(e){let t=Object.create(RM);t.value=e;let n=()=>(fM(t),t.value);return n[zl]=t,n}function Iy(e,t){gM()||_M(),e.equal(e.value,t)||(e.value=t,sj(e))}function DM(e,t){gM()||_M(),Iy(e,t(e.value))}var RM=se(B({},Ry),{equal:XW,value:void 0});function sj(e){e.version++,ZW(),pM(e),ij?.()}function he(e){return typeof e=="function"}function $l(e){let n=e(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var vp=$l(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,s)=>`${s+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ra(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var vt=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let r of n)r.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(he(i))try{i()}catch(r){t=r instanceof vp?r.errors:[r]}let{_finalizers:s}=this;if(s){this._finalizers=null;for(let r of s)try{TM(r)}catch(o){t=t??[],o instanceof vp?t=[...t,...o.errors]:t.push(o)}}if(t)throw new vp(t)}}add(t){var n;if(t&&t!==this)if(this.closed)TM(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&ra(n,t)}remove(t){let{_finalizers:n}=this;n&&ra(n,t),t instanceof e&&t._removeParent(this)}};vt.EMPTY=(()=>{let e=new vt;return e.closed=!0,e})();var Ay=vt.EMPTY;function Cp(e){return e instanceof vt||e&&"closed"in e&&he(e.remove)&&he(e.add)&&he(e.unsubscribe)}function TM(e){he(e)?e():e.unsubscribe()}var is={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ql={setTimeout(e,t,...n){let{delegate:i}=ql;return i?.setTimeout?i.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=ql;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function yp(e){ql.setTimeout(()=>{let{onUnhandledError:t}=is;if(t)t(e);else throw e})}function or(){}var IM=My("C",void 0,void 0);function AM(e){return My("E",void 0,e)}function MM(e){return My("N",e,void 0)}function My(e,t,n){return{kind:e,value:t,error:n}}var oa=null;function Kl(e){if(is.useDeprecatedSynchronousErrorHandling){let t=!oa;if(t&&(oa={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:i}=oa;if(oa=null,n)throw i}}else e()}function PM(e){is.useDeprecatedSynchronousErrorHandling&&oa&&(oa.errorThrown=!0,oa.error=e)}var aa=class extends vt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Cp(t)&&t.add(this)):this.destination=aj}static create(t,n,i){return new ar(t,n,i)}next(t){this.isStopped?Fy(MM(t),this):this._next(t)}error(t){this.isStopped?Fy(AM(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Fy(IM,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},rj=Function.prototype.bind;function Py(e,t){return rj.call(e,t)}var xy=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(i){wp(i)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(i){wp(i)}else wp(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){wp(n)}}},ar=class extends aa{constructor(t,n,i){super();let s;if(he(t)||!t)s={next:t??void 0,error:n??void 0,complete:i??void 0};else{let r;this&&is.useDeprecatedNextContext?(r=Object.create(t),r.unsubscribe=()=>this.unsubscribe(),s={next:t.next&&Py(t.next,r),error:t.error&&Py(t.error,r),complete:t.complete&&Py(t.complete,r)}):s=t}this.destination=new xy(s)}};function wp(e){is.useDeprecatedSynchronousErrorHandling?PM(e):yp(e)}function oj(e){throw e}function Fy(e,t){let{onStoppedNotification:n}=is;n&&ql.setTimeout(()=>n(e,t))}var aj={closed:!0,next:or,error:oj,complete:or};var Ql=typeof Symbol=="function"&&Symbol.observable||"@@observable";function mn(e){return e}function Sp(...e){return Oy(e)}function Oy(e){return e.length===0?mn:e.length===1?e[0]:function(n){return e.reduce((i,s)=>s(i),n)}}var re=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new e;return i.source=this,i.operator=n,i}subscribe(n,i,s){let r=cj(n)?n:new ar(n,i,s);return Kl(()=>{let{operator:o,source:a}=this;r.add(o?o.call(r,a):a?this._subscribe(r):this._trySubscribe(r))}),r}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=FM(i),new i((s,r)=>{let o=new ar({next:a=>{try{n(a)}catch(l){r(l),o.unsubscribe()}},error:r,complete:s});this.subscribe(o)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[Ql](){return this}pipe(...n){return Oy(n)(this)}toPromise(n){return n=FM(n),new n((i,s)=>{let r;this.subscribe(o=>r=o,o=>s(o),()=>i(r))})}}return e.create=t=>new e(t),e})();function FM(e){var t;return(t=e??is.Promise)!==null&&t!==void 0?t:Promise}function lj(e){return e&&he(e.next)&&he(e.error)&&he(e.complete)}function cj(e){return e&&e instanceof aa||lj(e)&&Cp(e)}function Ny(e){return he(e?.lift)}function me(e){return t=>{if(Ny(t))return t.lift(function(n){try{return e(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ce(e,t,n,i,s){return new Sd(e,t,n,i,s)}var Sd=class extends aa{constructor(t,n,i,s,r,o){super(t),this.onFinalize=r,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){t.error(l)}}:super._next,this._error=s?function(a){try{s(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Yl(){return me((e,t)=>{let n=null;e._refCount++;let i=ce(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let s=e._connection,r=n;n=null,s&&(!r||s===r)&&s.unsubscribe(),t.unsubscribe()});e.subscribe(i),i.closed||(n=e.connect())})}var Jl=class extends re{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Ny(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new vt;let n=this.getSubject();t.add(this.source.subscribe(ce(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=vt.EMPTY)}return t}refCount(){return Yl()(this)}};var xM=$l(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Le=(()=>{class e extends re{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new _p(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new xM}next(n){Kl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){Kl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Kl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:s,observers:r}=this;return i||s?Ay:(this.currentObservers=null,r.push(n),new vt(()=>{this.currentObservers=null,ra(r,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:s,isStopped:r}=this;i?n.error(s):r&&n.complete()}asObservable(){let n=new re;return n.source=this,n}}return e.create=(t,n)=>new _p(t,n),e})(),_p=class extends Le{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,t)}error(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&i!==void 0?i:Ay}};var gt=class extends Le{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:i}=this;if(t)throw n;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var _d={now(){return(_d.delegate||Date).now()},delegate:void 0};var io=class extends Le{constructor(t=1/0,n=1/0,i=_d){super(),this._bufferSize=t,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,n)}next(t){let{isStopped:n,_buffer:i,_infiniteTimeWindow:s,_timestampProvider:r,_windowTime:o}=this;n||(i.push(t),!s&&i.push(r.now()+o)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:s}=this,r=s.slice();for(let o=0;o<r.length&&!t.closed;o+=i?1:2)t.next(r[o]);return this._checkFinalizedStatuses(t),n}_trimBuffer(){let{_bufferSize:t,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:s}=this,r=(s?1:2)*t;if(t<1/0&&r<i.length&&i.splice(0,i.length-r),!s){let o=n.now(),a=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)a=l;a&&i.splice(0,a+1)}}};var bp=class extends vt{constructor(t,n){super()}schedule(t,n=0){return this}};var bd={setInterval(e,t,...n){let{delegate:i}=bd;return i?.setInterval?i.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=bd;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var Xl=class extends bp{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var i;if(this.closed)return this;this.state=t;let s=this.id,r=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(r,s,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(r,this.id,n),this}requestAsyncId(t,n,i=0){return bd.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&bd.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let i=!1,s;try{this.work(t)}catch(r){i=!0,s=r||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ra(i,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var Zl=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,i){return new this.schedulerActionCtor(this,t).schedule(i,n)}};Zl.now=_d.now;var ec=class extends Zl{constructor(t,n=Zl.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,i){for(;t=n.shift();)t.unsubscribe();throw i}}};var Pi=new ec(Xl),ky=Pi;var Ep=class extends Xl{constructor(t,n){super(t,n),this.scheduler=t,this.work=n}schedule(t,n=0){return n>0?super.schedule(t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)}execute(t,n){return n>0||this.closed?super.execute(t,n):this._execute(t,n)}requestAsyncId(t,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(t,n,i):(t.flush(this),0)}};var Dp=class extends ec{};var Ly=new Dp(Ep);var Ut=new re(e=>e.complete());function Rp(e){return e&&he(e.schedule)}function Vy(e){return e[e.length-1]}function so(e){return he(Vy(e))?e.pop():void 0}function Ps(e){return Rp(Vy(e))?e.pop():void 0}function OM(e,t){return typeof Vy(e)=="number"?e.pop():t}var tc=e=>e&&typeof e.length=="number"&&typeof e!="function";function Tp(e){return he(e?.then)}function Ip(e){return he(e[Ql])}function Ap(e){return Symbol.asyncIterator&&he(e?.[Symbol.asyncIterator])}function Mp(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function uj(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Pp=uj();function Fp(e){return he(e?.[Pp])}function xp(e){return ZA(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:i,done:s}=yield ap(n.read());if(s)return yield ap(void 0);yield yield ap(i)}}finally{n.releaseLock()}})}function Op(e){return he(e?.getReader)}function Re(e){if(e instanceof re)return e;if(e!=null){if(Ip(e))return dj(e);if(tc(e))return hj(e);if(Tp(e))return fj(e);if(Ap(e))return NM(e);if(Fp(e))return pj(e);if(Op(e))return gj(e)}throw Mp(e)}function dj(e){return new re(t=>{let n=e[Ql]();if(he(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function hj(e){return new re(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function fj(e){return new re(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,yp)})}function pj(e){return new re(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function NM(e){return new re(t=>{mj(e,t).catch(n=>t.error(n))})}function gj(e){return NM(xp(e))}function mj(e,t){var n,i,s,r;return XA(this,void 0,void 0,function*(){try{for(n=eM(e);i=yield n.next(),!i.done;){let o=i.value;if(t.next(o),t.closed)return}}catch(o){s={error:o}}finally{try{i&&!i.done&&(r=n.return)&&(yield r.call(n))}finally{if(s)throw s.error}}t.complete()})}function ti(e,t,n,i=0,s=!1){let r=t.schedule(function(){n(),s?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(r),!s)return r}function hi(e,t=0){return me((n,i)=>{n.subscribe(ce(i,s=>ti(i,e,()=>i.next(s),t),()=>ti(i,e,()=>i.complete(),t),s=>ti(i,e,()=>i.error(s),t)))})}function Fi(e,t=0){return me((n,i)=>{i.add(e.schedule(()=>n.subscribe(i),t))})}function kM(e,t){return Re(e).pipe(Fi(t),hi(t))}function LM(e,t){return Re(e).pipe(Fi(t),hi(t))}function VM(e,t){return new re(n=>{let i=0;return t.schedule(function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||this.schedule())})})}function BM(e,t){return new re(n=>{let i;return ti(n,t,()=>{i=e[Pp](),ti(n,t,()=>{let s,r;try{({value:s,done:r}=i.next())}catch(o){n.error(o);return}r?n.complete():n.next(s)},0,!0)}),()=>he(i?.return)&&i.return()})}function Np(e,t){if(!e)throw new Error("Iterable cannot be null");return new re(n=>{ti(n,t,()=>{let i=e[Symbol.asyncIterator]();ti(n,t,()=>{i.next().then(s=>{s.done?n.complete():n.next(s.value)})},0,!0)})})}function GM(e,t){return Np(xp(e),t)}function HM(e,t){if(e!=null){if(Ip(e))return kM(e,t);if(tc(e))return VM(e,t);if(Tp(e))return LM(e,t);if(Ap(e))return Np(e,t);if(Fp(e))return BM(e,t);if(Op(e))return GM(e,t)}throw Mp(e)}function qe(e,t){return t?HM(e,t):Re(e)}function Z(...e){let t=Ps(e);return qe(e,t)}function nc(e,t){let n=he(e)?e:()=>e,i=s=>s.error(n());return new re(t?s=>t.schedule(i,0,s):i)}function By(e){return!!e&&(e instanceof re||he(e.lift)&&he(e.subscribe))}var lr=$l(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function UM(e){return e instanceof Date&&!isNaN(e)}function oe(e,t){return me((n,i)=>{let s=0;n.subscribe(ce(i,r=>{i.next(e.call(t,r,s++))}))})}var{isArray:vj}=Array;function Cj(e,t){return vj(t)?e(...t):e(t)}function ic(e){return oe(t=>Cj(e,t))}var{isArray:yj}=Array,{getPrototypeOf:wj,prototype:Sj,keys:_j}=Object;function kp(e){if(e.length===1){let t=e[0];if(yj(t))return{args:t,keys:null};if(bj(t)){let n=_j(t);return{args:n.map(i=>t[i]),keys:n}}}return{args:e,keys:null}}function bj(e){return e&&typeof e=="object"&&wj(e)===Sj}function Lp(e,t){return e.reduce((n,i,s)=>(n[i]=t[s],n),{})}function la(...e){let t=Ps(e),n=so(e),{args:i,keys:s}=kp(e);if(i.length===0)return qe([],t);let r=new re(Ej(i,t,s?o=>Lp(s,o):mn));return n?r.pipe(ic(n)):r}function Ej(e,t,n=mn){return i=>{WM(t,()=>{let{length:s}=e,r=new Array(s),o=s,a=s;for(let l=0;l<s;l++)WM(t,()=>{let c=qe(e[l],t),u=!1;c.subscribe(ce(i,h=>{r[l]=h,u||(u=!0,a--),a||i.next(n(r.slice()))},()=>{--o||i.complete()}))},i)},i)}}function WM(e,t,n){e?ti(n,e,t):t()}function jM(e,t,n,i,s,r,o,a){let l=[],c=0,u=0,h=!1,f=()=>{h&&!l.length&&!c&&t.complete()},g=y=>c<i?v(y):l.push(y),v=y=>{r&&t.next(y),c++;let C=!1;Re(n(y,u++)).subscribe(ce(t,E=>{s?.(E),r?g(E):t.next(E)},()=>{C=!0},void 0,()=>{if(C)try{for(c--;l.length&&c<i;){let E=l.shift();o?ti(t,o,()=>v(E)):v(E)}f()}catch(E){t.error(E)}}))};return e.subscribe(ce(t,g,()=>{h=!0,f()})),()=>{a?.()}}function nt(e,t,n=1/0){return he(t)?nt((i,s)=>oe((r,o)=>t(i,r,s,o))(Re(e(i,s))),n):(typeof t=="number"&&(n=t),me((i,s)=>jM(i,s,e,n)))}function Ed(e=1/0){return nt(mn,e)}function zM(){return Ed(1)}function Fs(...e){return zM()(qe(e,Ps(e)))}function Vp(e){return new re(t=>{Re(e()).subscribe(t)})}function Gy(...e){let t=so(e),{args:n,keys:i}=kp(e),s=new re(r=>{let{length:o}=n;if(!o){r.complete();return}let a=new Array(o),l=o,c=o;for(let u=0;u<o;u++){let h=!1;Re(n[u]).subscribe(ce(r,f=>{h||(h=!0,c--),a[u]=f},()=>l--,void 0,()=>{(!l||!h)&&(c||r.next(i?Lp(i,a):a),r.complete())}))}});return t?s.pipe(ic(t)):s}var Dj=["addListener","removeListener"],Rj=["addEventListener","removeEventListener"],Tj=["on","off"];function Nn(e,t,n,i){if(he(n)&&(i=n,n=void 0),i)return Nn(e,t,n).pipe(ic(i));let[s,r]=Mj(e)?Rj.map(o=>a=>e[o](t,a,n)):Ij(e)?Dj.map($M(e,t)):Aj(e)?Tj.map($M(e,t)):[];if(!s&&tc(e))return nt(o=>Nn(o,t,n))(Re(e));if(!s)throw new TypeError("Invalid event target");return new re(o=>{let a=(...l)=>o.next(1<l.length?l:l[0]);return s(a),()=>r(a)})}function $M(e,t){return n=>i=>e[n](t,i)}function Ij(e){return he(e.addListener)&&he(e.removeListener)}function Aj(e){return he(e.on)&&he(e.off)}function Mj(e){return he(e.addEventListener)&&he(e.removeEventListener)}function ro(e=0,t,n=ky){let i=-1;return t!=null&&(Rp(t)?n=t:i=t),new re(s=>{let r=UM(e)?+e-n.now():e;r<0&&(r=0);let o=0;return n.schedule(function(){s.closed||(s.next(o++),0<=i?this.schedule(void 0,i):s.complete())},r)})}function Bp(...e){let t=Ps(e),n=OM(e,1/0),i=e;return i.length?i.length===1?Re(i[0]):Ed(n)(qe(i,t)):Ut}var{isArray:Pj}=Array;function Gp(e){return e.length===1&&Pj(e[0])?e[0]:e}function ut(e,t){return me((n,i)=>{let s=0;n.subscribe(ce(i,r=>e.call(t,r,s++)&&i.next(r)))})}function Hp(...e){return e=Gp(e),e.length===1?Re(e[0]):new re(Fj(e))}function Fj(e){return t=>{let n=[];for(let i=0;n&&!t.closed&&i<e.length;i++)n.push(Re(e[i]).subscribe(ce(t,s=>{if(n){for(let r=0;r<n.length;r++)r!==i&&n[r].unsubscribe();n=null}t.next(s)})))}}function Dd(...e){let t=so(e),n=Gp(e);return n.length?new re(i=>{let s=n.map(()=>[]),r=n.map(()=>!1);i.add(()=>{s=r=null});for(let o=0;!i.closed&&o<n.length;o++)Re(n[o]).subscribe(ce(i,a=>{if(s[o].push(a),s.every(l=>l.length)){let l=s.map(c=>c.shift());i.next(t?t(...l):l),s.some((c,u)=>!c.length&&r[u])&&i.complete()}},()=>{r[o]=!0,!s[o].length&&i.complete()}));return()=>{s=r=null}}):Ut}function oo(e){return me((t,n)=>{let i=null,s=!1,r;i=t.subscribe(ce(n,void 0,void 0,o=>{r=Re(e(o,oo(e)(t))),i?(i.unsubscribe(),i=null,r.subscribe(n)):s=!0})),s&&(i.unsubscribe(),i=null,r.subscribe(n))})}function qM(e,t,n,i,s){return(r,o)=>{let a=n,l=t,c=0;r.subscribe(ce(o,u=>{let h=c++;l=a?e(l,u,h):(a=!0,u),i&&o.next(l)},s&&(()=>{a&&o.next(l),o.complete()})))}}function ao(e,t){return he(t)?nt(e,t,1):nt(e,1)}function Hy(e,t=Pi){return me((n,i)=>{let s=null,r=null,o=null,a=()=>{if(s){s.unsubscribe(),s=null;let c=r;r=null,i.next(c)}};function l(){let c=o+e,u=t.now();if(u<c){s=this.schedule(void 0,c-u),i.add(s);return}a()}n.subscribe(ce(i,c=>{r=c,o=t.now(),s||(s=t.schedule(l,e),i.add(s))},()=>{a(),i.complete()},void 0,()=>{r=s=null}))})}function lo(e){return me((t,n)=>{let i=!1;t.subscribe(ce(n,s=>{i=!0,n.next(s)},()=>{i||n.next(e),n.complete()}))})}function At(e){return e<=0?()=>Ut:me((t,n)=>{let i=0;t.subscribe(ce(n,s=>{++i<=e&&(n.next(s),e<=i&&n.complete())}))})}function KM(){return me((e,t)=>{e.subscribe(ce(t,or))})}function Rd(e){return oe(()=>e)}function Uy(e,t){return t?n=>Fs(t.pipe(At(1),KM()),n.pipe(Uy(e))):nt((n,i)=>Re(e(n,i)).pipe(At(1),Rd(n)))}function Wy(e,t=Pi){let n=ro(e,t);return Uy(()=>n)}function Td(e,t=mn){return e=e??xj,me((n,i)=>{let s,r=!0;n.subscribe(ce(i,o=>{let a=t(o);(r||!e(s,a))&&(r=!1,s=a,i.next(o))}))})}function xj(e,t){return e===t}function Up(e=Oj){return me((t,n)=>{let i=!1;t.subscribe(ce(n,s=>{i=!0,n.next(s)},()=>i?n.complete():n.error(e())))})}function Oj(){return new lr}function jy(...e){return t=>Fs(t,Z(...e))}function ca(e){return me((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function fi(e,t){let n=arguments.length>=2;return i=>i.pipe(e?ut((s,r)=>e(s,r,i)):mn,At(1),n?lo(t):Up(()=>new lr))}function zy(e,t,n,i){return me((s,r)=>{let o;!t||typeof t=="function"?o=t:{duration:n,element:o,connector:i}=t;let a=new Map,l=v=>{a.forEach(v),v(r)},c=v=>l(y=>y.error(v)),u=0,h=!1,f=new Sd(r,v=>{try{let y=e(v),C=a.get(y);if(!C){a.set(y,C=i?i():new Le);let E=g(y,C);if(r.next(E),n){let I=ce(C,()=>{C.complete(),I?.unsubscribe()},void 0,void 0,()=>a.delete(y));f.add(Re(n(E)).subscribe(I))}}C.next(o?o(v):v)}catch(y){c(y)}},()=>l(v=>v.complete()),c,()=>a.clear(),()=>(h=!0,u===0));s.subscribe(f);function g(v,y){let C=new re(E=>{u++;let I=y.subscribe(E);return()=>{I.unsubscribe(),--u===0&&h&&f.unsubscribe()}});return C.key=v,C}})}function sc(e){return e<=0?()=>Ut:me((t,n)=>{let i=[];t.subscribe(ce(n,s=>{i.push(s),e<i.length&&i.shift()},()=>{for(let s of i)n.next(s);n.complete()},void 0,()=>{i=null}))})}function $y(e,t){let n=arguments.length>=2;return i=>i.pipe(e?ut((s,r)=>e(s,r,i)):mn,sc(1),n?lo(t):Up(()=>new lr))}function Wp(){return me((e,t)=>{let n,i=!1;e.subscribe(ce(t,s=>{let r=n;n=s,i&&t.next([r,s]),i=!0}))})}function jp(e,t){return me(qM(e,t,arguments.length>=2,!0))}function QM(e={}){let{connector:t=()=>new Le,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:s=!0}=e;return r=>{let o,a,l,c=0,u=!1,h=!1,f=()=>{a?.unsubscribe(),a=void 0},g=()=>{f(),o=l=void 0,u=h=!1},v=()=>{let y=o;g(),y?.unsubscribe()};return me((y,C)=>{c++,!h&&!u&&f();let E=l=l??t();C.add(()=>{c--,c===0&&!h&&!u&&(a=qy(v,s))}),E.subscribe(C),!o&&c>0&&(o=new ar({next:I=>E.next(I),error:I=>{h=!0,f(),a=qy(g,n,I),E.error(I)},complete:()=>{u=!0,f(),a=qy(g,i),E.complete()}}),Re(y).subscribe(o))})(r)}}function qy(e,t,...n){if(t===!0){e();return}if(t===!1)return;let i=new ar({next:()=>{i.unsubscribe(),e()}});return Re(t(...n)).subscribe(i)}function zp(e,t,n){let i,s=!1;return e&&typeof e=="object"?{bufferSize:i=1/0,windowTime:t=1/0,refCount:s=!1,scheduler:n}=e:i=e??1/0,QM({connector:()=>new io(i,t,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function ua(...e){let t=Ps(e);return me((n,i)=>{(t?Fs(e,n,t):Fs(e,n)).subscribe(i)})}function Ge(e,t){return me((n,i)=>{let s=null,r=0,o=!1,a=()=>o&&!s&&i.complete();n.subscribe(ce(i,l=>{s?.unsubscribe();let c=0,u=r++;Re(e(l,u)).subscribe(s=ce(i,h=>i.next(t?t(l,h,u,c++):h),()=>{s=null,a()}))},()=>{o=!0,a()}))})}function $p(e,t){return he(t)?Ge(()=>e,t):Ge(()=>e)}function Wt(e){return me((t,n)=>{Re(e).subscribe(ce(n,()=>n.complete(),or)),!n.closed&&t.subscribe(n)})}function dt(e,t,n){let i=he(e)||t||n?{next:e,error:t,complete:n}:e;return i?me((s,r)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;s.subscribe(ce(r,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),r.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),r.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),r.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):mn}function YM(e,t){return me((n,i)=>{let{leading:s=!0,trailing:r=!1}=t??{},o=!1,a=null,l=null,c=!1,u=()=>{l?.unsubscribe(),l=null,r&&(g(),c&&i.complete())},h=()=>{l=null,c&&i.complete()},f=v=>l=Re(e(v)).subscribe(ce(i,u,h)),g=()=>{if(o){o=!1;let v=a;a=null,i.next(v),!c&&f(v)}};n.subscribe(ce(i,v=>{o=!0,a=v,!(l&&!l.closed)&&(s?g():f(v))},()=>{c=!0,!(r&&o&&l&&!l.closed)&&i.complete()}))})}function Ky(e,t=Pi,n){let i=ro(e,t);return YM(()=>i,n)}function Id(...e){let t=so(e);return me((n,i)=>{let s=e.length,r=new Array(s),o=e.map(()=>!1),a=!1;for(let l=0;l<s;l++)Re(e[l]).subscribe(ce(i,c=>{r[l]=c,!a&&!o[l]&&(o[l]=!0,(a=o.every(mn))&&(o=null))},or));n.subscribe(ce(i,l=>{if(a){let c=[l,...r];i.next(t?t(...c):c)}}))})}var Nj="https://g.co/ng/security#xss",ue=class extends Error{constructor(t,n){super(Tg(t,n)),this.code=t}};function Tg(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function Ud(e){return{toString:e}.toString()}var qp="__parameters__";function kj(e){return function(...n){if(e){let i=e(...n);for(let s in i)this[s]=i[s]}}}function MP(e,t,n){return Ud(()=>{let i=kj(t);function s(...r){if(this instanceof s)return i.apply(this,r),this;let o=new s(...r);return a.annotation=o,a;function a(l,c,u){let h=l.hasOwnProperty(qp)?l[qp]:Object.defineProperty(l,qp,{value:[]})[qp];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(o),l}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=e,s.annotationCls=s,s})}var Ad=globalThis;function it(e){for(let t in e)if(e[t]===it)return t;throw Error("Could not find renamed property on target object.")}function Lj(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Vn(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(Vn).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function hw(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var Vj=it({__forward_ref__:it});function gr(e){return e.__forward_ref__=gr,e.toString=function(){return Vn(this())},e}function kn(e){return PP(e)?e():e}function PP(e){return typeof e=="function"&&e.hasOwnProperty(Vj)&&e.__forward_ref__===gr}function ee(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function mi(e){return{providers:e.providers||[],imports:e.imports||[]}}function Ig(e){return JM(e,xP)||JM(e,OP)}function FP(e){return Ig(e)!==null}function JM(e,t){return e.hasOwnProperty(t)?e[t]:null}function Bj(e){let t=e&&(e[xP]||e[OP]);return t||null}function XM(e){return e&&(e.hasOwnProperty(ZM)||e.hasOwnProperty(Gj))?e[ZM]:null}var xP=it({\u0275prov:it}),ZM=it({\u0275inj:it}),OP=it({ngInjectableDef:it}),Gj=it({ngInjectorDef:it}),Q=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ee({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function NP(e){return e&&!!e.\u0275providers}var Hj=it({\u0275cmp:it}),Uj=it({\u0275dir:it}),Wj=it({\u0275pipe:it}),jj=it({\u0275mod:it}),rg=it({\u0275fac:it}),Md=it({__NG_ELEMENT_ID__:it}),eP=it({__NG_ENV_ID__:it});function uS(e){return typeof e=="string"?e:e==null?"":String(e)}function zj(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():uS(e)}function $j(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new ue(-200,e)}function dS(e,t){throw new ue(-201,!1)}var Me=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(Me||{}),fw;function kP(){return fw}function ni(e){let t=fw;return fw=e,t}function LP(e,t,n){let i=Ig(e);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&Me.Optional)return null;if(t!==void 0)return t;dS(e,"Injector")}var qj={},Pd=qj,pw="__NG_DI_FLAG__",og="ngTempTokenPath",Kj="ngTokenPath",Qj=/\n/gm,Yj="\u0275",tP="__source",lc;function Jj(){return lc}function co(e){let t=lc;return lc=e,t}function Xj(e,t=Me.Default){if(lc===void 0)throw new ue(-203,!1);return lc===null?LP(e,void 0,t):lc.get(e,t&Me.Optional?null:void 0,t)}function K(e,t=Me.Default){return(kP()||Xj)(kn(e),t)}function U(e,t=Me.Default){return K(e,Ag(t))}function Ag(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function gw(e){let t=[];for(let n=0;n<e.length;n++){let i=kn(e[n]);if(Array.isArray(i)){if(i.length===0)throw new ue(900,!1);let s,r=Me.Default;for(let o=0;o<i.length;o++){let a=i[o],l=Zj(a);typeof l=="number"?l===-1?s=a.token:r|=l:s=a}t.push(K(s,r))}else t.push(K(i))}return t}function VP(e,t){return e[pw]=t,e.prototype[pw]=t,e}function Zj(e){return e[pw]}function ez(e,t,n,i){let s=e[og];throw t[tP]&&s.unshift(t[tP]),e.message=tz(`
`+e.message,s,n,i),e[Kj]=s,e[og]=null,e}function tz(e,t,n,i=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==Yj?e.slice(2):e;let s=Vn(t);if(Array.isArray(t))s=t.map(Vn).join(" -> ");else if(typeof t=="object"){let r=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];r.push(o+":"+(typeof a=="string"?JSON.stringify(a):Vn(a)))}s=`{${r.join(", ")}}`}return`${n}${i?"("+i+")":""}[${s}]: ${e.replace(Qj,`
  `)}`}var Te=VP(MP("Optional"),8);var BP=VP(MP("SkipSelf"),4);function ha(e,t){let n=e.hasOwnProperty(rg);return n?e[rg]:null}function nz(e,t,n){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){let s=e[i],r=t[i];if(n&&(s=n(s),r=n(r)),r!==s)return!1}return!0}function iz(e){return e.flat(Number.POSITIVE_INFINITY)}function hS(e,t){e.forEach(n=>Array.isArray(n)?hS(n,t):t(n))}function GP(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function ag(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function sz(e,t){let n=[];for(let i=0;i<e;i++)n.push(t);return n}function rz(e,t,n,i){let s=e.length;if(s==t)e.push(n,i);else if(s===1)e.push(i,e[0]),e[0]=n;else{for(s--,e.push(e[s-1],e[s]);s>t;){let r=s-2;e[s]=e[r],s--}e[t]=n,e[t+1]=i}}function fS(e,t,n){let i=Wd(e,t);return i>=0?e[i|1]=n:(i=~i,rz(e,i,t,n)),i}function Qy(e,t){let n=Wd(e,t);if(n>=0)return e[n|1]}function Wd(e,t){return oz(e,t,1)}function oz(e,t,n){let i=0,s=e.length>>n;for(;s!==i;){let r=i+(s-i>>1),o=e[r<<n];if(t===o)return r<<n;o>t?s=r:i=r+1}return~(s<<n)}var uc={},Ln=[],fa=new Q(""),HP=new Q("",-1),UP=new Q(""),lg=class{get(t,n=Pd){if(n===Pd){let i=new Error(`NullInjectorError: No provider for ${Vn(t)}!`);throw i.name="NullInjectorError",i}return n}},WP=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(WP||{}),Ns=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Ns||{}),en=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(en||{});function az(e,t,n){let i=e.length;for(;;){let s=e.indexOf(t,n);if(s===-1)return s;if(s===0||e.charCodeAt(s-1)<=32){let r=t.length;if(s+r===i||e.charCodeAt(s+r)<=32)return s}n=s+1}}function mw(e,t,n){let i=0;for(;i<n.length;){let s=n[i];if(typeof s=="number"){if(s!==0)break;i++;let r=n[i++],o=n[i++],a=n[i++];e.setAttribute(t,o,a,r)}else{let r=s,o=n[++i];cz(r)?e.setProperty(t,r,o):e.setAttribute(t,r,o),i++}}return i}function lz(e){return e===3||e===4||e===6}function cz(e){return e.charCodeAt(0)===64}function Fd(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){let s=t[i];typeof s=="number"?n=s:n===0||(n===-1||n===2?nP(e,n,s,null,t[++i]):nP(e,n,s,null,null))}}return e}function nP(e,t,n,i,s){let r=0,o=e.length;if(t===-1)o=-1;else for(;r<e.length;){let a=e[r++];if(typeof a=="number"){if(a===t){o=-1;break}else if(a>t){o=r-1;break}}}for(;r<e.length;){let a=e[r];if(typeof a=="number")break;if(a===n){if(i===null){s!==null&&(e[r+1]=s);return}else if(i===e[r+1]){e[r+2]=s;return}}r++,i!==null&&r++,s!==null&&r++}o!==-1&&(e.splice(o,0,t),r=o+1),e.splice(r++,0,n),i!==null&&e.splice(r++,0,i),s!==null&&e.splice(r++,0,s)}var jP="ng-template";function uz(e,t,n,i){let s=0;if(i){for(;s<t.length&&typeof t[s]=="string";s+=2)if(t[s]==="class"&&az(t[s+1].toLowerCase(),n,0)!==-1)return!0}else if(pS(e))return!1;if(s=t.indexOf(1,s),s>-1){let r;for(;++s<t.length&&typeof(r=t[s])=="string";)if(r.toLowerCase()===n)return!0}return!1}function pS(e){return e.type===4&&e.value!==jP}function dz(e,t,n){let i=e.type===4&&!n?jP:e.value;return t===i}function hz(e,t,n){let i=4,s=e.attrs,r=s!==null?gz(s):0,o=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!o&&!ss(i)&&!ss(l))return!1;if(o&&ss(l))continue;o=!1,i=l|i&1;continue}if(!o)if(i&4){if(i=2|i&1,l!==""&&!dz(e,l,n)||l===""&&t.length===1){if(ss(i))return!1;o=!0}}else if(i&8){if(s===null||!uz(e,s,l,n)){if(ss(i))return!1;o=!0}}else{let c=t[++a],u=fz(l,s,pS(e),n);if(u===-1){if(ss(i))return!1;o=!0;continue}if(c!==""){let h;if(u>r?h="":h=s[u+1].toLowerCase(),i&2&&c!==h){if(ss(i))return!1;o=!0}}}}return ss(i)||o}function ss(e){return(e&1)===0}function fz(e,t,n,i){if(t===null)return-1;let s=0;if(i||!n){let r=!1;for(;s<t.length;){let o=t[s];if(o===e)return s;if(o===3||o===6)r=!0;else if(o===1||o===2){let a=t[++s];for(;typeof a=="string";)a=t[++s];continue}else{if(o===4)break;if(o===0){s+=4;continue}}s+=r?1:2}return-1}else return mz(t,e)}function zP(e,t,n=!1){for(let i=0;i<t.length;i++)if(hz(e,t[i],n))return!0;return!1}function pz(e){let t=e.attrs;if(t!=null){let n=t.indexOf(5);if(!(n&1))return t[n+1]}return null}function gz(e){for(let t=0;t<e.length;t++){let n=e[t];if(lz(n))return t}return e.length}function mz(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let i=e[n];if(typeof i=="number")return-1;if(i===t)return n;n++}return-1}function vz(e,t){e:for(let n=0;n<t.length;n++){let i=t[n];if(e.length===i.length){for(let s=0;s<e.length;s++)if(e[s]!==i[s])continue e;return!0}}return!1}function iP(e,t){return e?":not("+t.trim()+")":t}function Cz(e){let t=e[0],n=1,i=2,s="",r=!1;for(;n<e.length;){let o=e[n];if(typeof o=="string")if(i&2){let a=e[++n];s+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?s+="."+o:i&4&&(s+=" "+o);else s!==""&&!ss(o)&&(t+=iP(r,s),s=""),i=o,r=r||!ss(i);n++}return s!==""&&(t+=iP(r,s)),t}function yz(e){return e.map(Cz).join(",")}function wz(e){let t=[],n=[],i=1,s=2;for(;i<e.length;){let r=e[i];if(typeof r=="string")s===2?r!==""&&t.push(r,e[++i]):s===8&&n.push(r);else{if(!ss(s))break;s=r}i++}return{attrs:t,classes:n}}function Pe(e){return Ud(()=>{let t=JP(e),n=se(B({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===WP.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Ns.Emulated,styles:e.styles||Ln,_:null,schemas:e.schemas||null,tView:null,id:""});XP(n);let i=e.dependencies;return n.directiveDefs=rP(i,!1),n.pipeDefs=rP(i,!0),n.id=bz(n),n})}function Sz(e){return ho(e)||qP(e)}function _z(e){return e!==null}function vi(e){return Ud(()=>({type:e.type,bootstrap:e.bootstrap||Ln,declarations:e.declarations||Ln,imports:e.imports||Ln,exports:e.exports||Ln,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function sP(e,t){if(e==null)return uc;let n={};for(let i in e)if(e.hasOwnProperty(i)){let s=e[i],r,o,a=en.None;Array.isArray(s)?(a=s[0],r=s[1],o=s[2]??r):(r=s,o=s),t?(n[r]=a!==en.None?[i,a]:i,t[r]=o):n[r]=i}return n}function Mt(e){return Ud(()=>{let t=JP(e);return XP(t),t})}function $P(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone===!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function ho(e){return e[Hj]||null}function qP(e){return e[Uj]||null}function KP(e){return e[Wj]||null}function QP(e){let t=ho(e)||qP(e)||KP(e);return t!==null?t.standalone:!1}function YP(e,t){let n=e[jj]||null;if(!n&&t===!0)throw new Error(`Type ${Vn(e)} does not have '\u0275mod' property.`);return n}function JP(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||uc,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Ln,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:sP(e.inputs,t),outputs:sP(e.outputs),debugInfo:null}}function XP(e){e.features?.forEach(t=>t(e))}function rP(e,t){if(!e)return null;let n=t?KP:Sz;return()=>(typeof e=="function"?e():e).map(i=>n(i)).filter(_z)}function bz(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let s of n)t=Math.imul(31,t)+s.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function ht(e){return{\u0275providers:e}}function Ez(...e){return{\u0275providers:ZP(!0,e),\u0275fromNgModule:!0}}function ZP(e,...t){let n=[],i=new Set,s,r=o=>{n.push(o)};return hS(t,o=>{let a=o;vw(a,r,[],i)&&(s||=[],s.push(a))}),s!==void 0&&eF(s,r),n}function eF(e,t){for(let n=0;n<e.length;n++){let{ngModule:i,providers:s}=e[n];gS(s,r=>{t(r,i)})}}function vw(e,t,n,i){if(e=kn(e),!e)return!1;let s=null,r=XM(e),o=!r&&ho(e);if(!r&&!o){let l=e.ngModule;if(r=XM(l),r)s=l;else return!1}else{if(o&&!o.standalone)return!1;s=e}let a=i.has(s);if(o){if(a)return!1;if(i.add(s),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)vw(c,t,n,i)}}else if(r){if(r.imports!=null&&!a){i.add(s);let c;try{hS(r.imports,u=>{vw(u,t,n,i)&&(c||=[],c.push(u))})}finally{}c!==void 0&&eF(c,t)}if(!a){let c=ha(s)||(()=>new s);t({provide:s,useFactory:c,deps:Ln},s),t({provide:UP,useValue:s,multi:!0},s),t({provide:fa,useValue:()=>K(s),multi:!0},s)}let l=r.providers;if(l!=null&&!a){let c=e;gS(l,u=>{t(u,c)})}}else return!1;return s!==e&&e.providers!==void 0}function gS(e,t){for(let n of e)NP(n)&&(n=n.\u0275providers),Array.isArray(n)?gS(n,t):t(n)}var Dz=it({provide:String,useValue:it});function tF(e){return e!==null&&typeof e=="object"&&Dz in e}function Rz(e){return!!(e&&e.useExisting)}function Tz(e){return!!(e&&e.useFactory)}function dc(e){return typeof e=="function"}function Iz(e){return!!e.useClass}var Mg=new Q(""),Zp={},Az={},Yy;function Pg(){return Yy===void 0&&(Yy=new lg),Yy}var Gn=class{},xd=class extends Gn{get destroyed(){return this._destroyed}constructor(t,n,i,s){super(),this.parent=n,this.source=i,this.scopes=s,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,yw(t,o=>this.processProvider(o)),this.records.set(HP,rc(void 0,this)),s.has("environment")&&this.records.set(Gn,rc(void 0,this));let r=this.records.get(Mg);r!=null&&typeof r.value=="string"&&this.scopes.add(r.value),this.injectorDefTypes=new Set(this.get(UP,Ln,Me.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=$e(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),$e(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=co(this),i=ni(void 0),s;try{return t()}finally{co(n),ni(i)}}get(t,n=Pd,i=Me.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(eP))return t[eP](this);i=Ag(i);let s,r=co(this),o=ni(void 0);try{if(!(i&Me.SkipSelf)){let l=this.records.get(t);if(l===void 0){let c=Oz(t)&&Ig(t);c&&this.injectableDefInScope(c)?l=rc(Cw(t),Zp):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let a=i&Me.Self?Pg():this.parent;return n=i&Me.Optional&&n===Pd?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[og]=a[og]||[]).unshift(Vn(t)),r)throw a;return ez(a,t,"R3InjectorError",this.source)}else throw a}finally{ni(o),co(r)}}resolveInjectorInitializers(){let t=$e(null),n=co(this),i=ni(void 0),s;try{let r=this.get(fa,Ln,Me.Self);for(let o of r)o()}finally{co(n),ni(i),$e(t)}}toString(){let t=[],n=this.records;for(let i of n.keys())t.push(Vn(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ue(205,!1)}processProvider(t){t=kn(t);let n=dc(t)?t:kn(t&&t.provide),i=Pz(t);if(!dc(t)&&t.multi===!0){let s=this.records.get(n);s||(s=rc(void 0,Zp,!0),s.factory=()=>gw(s.multi),this.records.set(n,s)),n=t,s.multi.push(t)}this.records.set(n,i)}hydrate(t,n){let i=$e(null);try{return n.value===Zp&&(n.value=Az,n.value=n.factory()),typeof n.value=="object"&&n.value&&xz(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{$e(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=kn(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Cw(e){let t=Ig(e),n=t!==null?t.factory:ha(e);if(n!==null)return n;if(e instanceof Q)throw new ue(204,!1);if(e instanceof Function)return Mz(e);throw new ue(204,!1)}function Mz(e){if(e.length>0)throw new ue(204,!1);let n=Bj(e);return n!==null?()=>n.factory(e):()=>new e}function Pz(e){if(tF(e))return rc(void 0,e.useValue);{let t=nF(e);return rc(t,Zp)}}function nF(e,t,n){let i;if(dc(e)){let s=kn(e);return ha(s)||Cw(s)}else if(tF(e))i=()=>kn(e.useValue);else if(Tz(e))i=()=>e.useFactory(...gw(e.deps||[]));else if(Rz(e))i=()=>K(kn(e.useExisting));else{let s=kn(e&&(e.useClass||e.provide));if(Fz(e))i=()=>new s(...gw(e.deps));else return ha(s)||Cw(s)}return i}function rc(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Fz(e){return!!e.deps}function xz(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function Oz(e){return typeof e=="function"||typeof e=="object"&&e instanceof Q}function yw(e,t){for(let n of e)Array.isArray(n)?yw(n,t):n&&NP(n)?yw(n.\u0275providers,t):t(n)}function mo(e,t){e instanceof xd&&e.assertNotDestroyed();let n,i=co(e),s=ni(void 0);try{return t()}finally{co(i),ni(s)}}function Nz(){return kP()!==void 0||Jj()!=null}function kz(e){return typeof e=="function"}var pi=0,we=1,Ce=2,tn=3,os=4,Ci=5,xi=6,Od=7,Oi=8,hc=9,ks=10,at=11,Nd=12,oP=13,vc=14,gi=15,jd=16,oc=17,ur=18,Fg=19,iF=20,uo=21,Jy=22,pa=23,xt=25,sF=1,kd=6,dr=7,cg=8,fc=9,Bn=10,mS=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(mS||{});function cr(e){return Array.isArray(e)&&typeof e[sF]=="object"}function Vs(e){return Array.isArray(e)&&e[sF]===!0}function vS(e){return(e.flags&4)!==0}function zd(e){return e.componentOffset>-1}function xg(e){return(e.flags&1)===1}function fo(e){return!!e.template}function rF(e){return(e[Ce]&512)!==0}var ww=class{constructor(t,n,i){this.previousValue=t,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function oF(e,t,n,i){t!==null?t.applyValueToInputSignal(t,i):e[n]=i}function nn(){return aF}function aF(e){return e.type.prototype.ngOnChanges&&(e.setInput=Vz),Lz}nn.ngInherit=!0;function Lz(){let e=cF(this),t=e?.current;if(t){let n=e.previous;if(n===uc)e.previous=t;else for(let i in t)n[i]=t[i];e.current=null,this.ngOnChanges(t)}}function Vz(e,t,n,i,s){let r=this.declaredInputs[i],o=cF(e)||Bz(e,{previous:uc,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[r];a[r]=new ww(c&&c.currentValue,n,l===uc),oF(e,t,s,n)}var lF="__ngSimpleChanges__";function cF(e){return e[lF]||null}function Bz(e,t){return e[lF]=t}var aP=null;var xs=function(e,t,n){aP?.(e,t,n)},uF="svg",Gz="math",Hz=!1;function Uz(){return Hz}function as(e){for(;Array.isArray(e);)e=e[pi];return e}function dF(e,t){return as(t[e])}function yi(e,t){return as(t[e.index])}function CS(e,t){return e.data[t]}function hF(e,t){return e[t]}function vo(e,t){let n=t[e];return cr(n)?n:n[pi]}function Wz(e){return(e[Ce]&4)===4}function yS(e){return(e[Ce]&128)===128}function jz(e){return Vs(e[tn])}function pc(e,t){return t==null?null:e[t]}function fF(e){e[oc]=0}function zz(e){e[Ce]&1024||(e[Ce]|=1024,yS(e)&&Ld(e))}function $z(e,t){for(;e>0;)t=t[vc],e--;return t}function wS(e){return!!(e[Ce]&9216||e[pa]?.dirty)}function Sw(e){e[ks].changeDetectionScheduler?.notify(1),wS(e)?Ld(e):e[Ce]&64&&(Uz()?(e[Ce]|=1024,Ld(e)):e[ks].changeDetectionScheduler?.notify())}function Ld(e){e[ks].changeDetectionScheduler?.notify();let t=Vd(e);for(;t!==null&&!(t[Ce]&8192||(t[Ce]|=8192,!yS(t)));)t=Vd(t)}function pF(e,t){if((e[Ce]&256)===256)throw new ue(911,!1);e[uo]===null&&(e[uo]=[]),e[uo].push(t)}function qz(e,t){if(e[uo]===null)return;let n=e[uo].indexOf(t);n!==-1&&e[uo].splice(n,1)}function Vd(e){let t=e[tn];return Vs(t)?t[tn]:t}var Ee={lFrame:_F(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Kz(){return Ee.lFrame.elementDepthCount}function Qz(){Ee.lFrame.elementDepthCount++}function Yz(){Ee.lFrame.elementDepthCount--}function gF(){return Ee.bindingsEnabled}function Cc(){return Ee.skipHydrationRootTNode!==null}function Jz(e){return Ee.skipHydrationRootTNode===e}function Xz(e){Ee.skipHydrationRootTNode=e}function Zz(){Ee.skipHydrationRootTNode=null}function He(){return Ee.lFrame.lView}function jt(){return Ee.lFrame.tView}function sn(e){return Ee.lFrame.contextLView=e,e[Oi]}function rn(e){return Ee.lFrame.contextLView=null,e}function wi(){let e=mF();for(;e!==null&&e.type===64;)e=e.parent;return e}function mF(){return Ee.lFrame.currentTNode}function e$(){let e=Ee.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function wa(e,t){let n=Ee.lFrame;n.currentTNode=e,n.isParent=t}function SS(){return Ee.lFrame.isParent}function _S(){Ee.lFrame.isParent=!1}function t$(){return Ee.lFrame.contextLView}function vF(){let e=Ee.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function n$(e){return Ee.lFrame.bindingIndex=e}function $d(){return Ee.lFrame.bindingIndex++}function CF(e){let t=Ee.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function i$(){return Ee.lFrame.inI18n}function s$(e,t){let n=Ee.lFrame;n.bindingIndex=n.bindingRootIndex=e,_w(t)}function r$(){return Ee.lFrame.currentDirectiveIndex}function _w(e){Ee.lFrame.currentDirectiveIndex=e}function o$(e){let t=Ee.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function yF(){return Ee.lFrame.currentQueryIndex}function bS(e){Ee.lFrame.currentQueryIndex=e}function a$(e){let t=e[we];return t.type===2?t.declTNode:t.type===1?e[Ci]:null}function wF(e,t,n){if(n&Me.SkipSelf){let s=t,r=e;for(;s=s.parent,s===null&&!(n&Me.Host);)if(s=a$(r),s===null||(r=r[vc],s.type&10))break;if(s===null)return!1;t=s,e=r}let i=Ee.lFrame=SF();return i.currentTNode=t,i.lView=e,!0}function ES(e){let t=SF(),n=e[we];Ee.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function SF(){let e=Ee.lFrame,t=e===null?null:e.child;return t===null?_F(e):t}function _F(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function bF(){let e=Ee.lFrame;return Ee.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var EF=bF;function DS(){let e=bF();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function l$(e){return(Ee.lFrame.contextLView=$z(e,Ee.lFrame.contextLView))[Oi]}function Sa(){return Ee.lFrame.selectedIndex}function ga(e){Ee.lFrame.selectedIndex=e}function RS(){let e=Ee.lFrame;return CS(e.tView,e.selectedIndex)}function mr(){Ee.lFrame.currentNamespace=uF}function DF(){return Ee.lFrame.currentNamespace}var RF=!0;function Og(){return RF}function Bs(e){RF=e}function c$(e,t,n){let{ngOnChanges:i,ngOnInit:s,ngDoCheck:r}=t.type.prototype;if(i){let o=aF(t);(n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o)}s&&(n.preOrderHooks??=[]).push(0-e,s),r&&((n.preOrderHooks??=[]).push(e,r),(n.preOrderCheckHooks??=[]).push(e,r))}function Ng(e,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){let r=e.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=r;o&&(e.contentHooks??=[]).push(-n,o),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),l&&(e.viewHooks??=[]).push(-n,l),c&&((e.viewHooks??=[]).push(n,c),(e.viewCheckHooks??=[]).push(n,c)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function eg(e,t,n){TF(e,t,3,n)}function tg(e,t,n,i){(e[Ce]&3)===n&&TF(e,t,n,i)}function Xy(e,t){let n=e[Ce];(n&3)===t&&(n&=16383,n+=1,e[Ce]=n)}function TF(e,t,n,i){let s=i!==void 0?e[oc]&65535:0,r=i??-1,o=t.length-1,a=0;for(let l=s;l<o;l++)if(typeof t[l+1]=="number"){if(a=t[l],i!=null&&a>=i)break}else t[l]<0&&(e[oc]+=65536),(a<r||r==-1)&&(u$(e,n,t,l),e[oc]=(e[oc]&4294901760)+l+2),l++}function lP(e,t){xs(4,e,t);let n=$e(null);try{t.call(e)}finally{$e(n),xs(5,e,t)}}function u$(e,t,n,i){let s=n[i]<0,r=n[i+1],o=s?-n[i]:n[i],a=e[o];s?e[Ce]>>14<e[oc]>>16&&(e[Ce]&3)===t&&(e[Ce]+=16384,lP(a,r)):lP(a,r)}var cc=-1,ma=class{constructor(t,n,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function d$(e){return e instanceof ma}function h$(e){return(e.flags&8)!==0}function f$(e){return(e.flags&16)!==0}function IF(e){return e!==cc}function ug(e){return e&32767}function p$(e){return e>>16}function dg(e,t){let n=p$(e),i=t;for(;n>0;)i=i[vc],n--;return i}var bw=!0;function hg(e){let t=bw;return bw=e,t}var g$=256,AF=g$-1,MF=5,m$=0,Os={};function v$(e,t,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Md)&&(i=n[Md]),i==null&&(i=n[Md]=m$++);let s=i&AF,r=1<<s;t.data[e+(s>>MF)]|=r}function fg(e,t){let n=PF(e,t);if(n!==-1)return n;let i=t[we];i.firstCreatePass&&(e.injectorIndex=t.length,Zy(i.data,e),Zy(t,null),Zy(i.blueprint,null));let s=TS(e,t),r=e.injectorIndex;if(IF(s)){let o=ug(s),a=dg(s,t),l=a[we].data;for(let c=0;c<8;c++)t[r+c]=a[o+c]|l[o+c]}return t[r+8]=s,r}function Zy(e,t){e.push(0,0,0,0,0,0,0,0,t)}function PF(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function TS(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,i=null,s=t;for(;s!==null;){if(i=kF(s),i===null)return cc;if(n++,s=s[vc],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return cc}function Ew(e,t,n){v$(e,t,n)}function FF(e,t,n){if(n&Me.Optional||e!==void 0)return e;dS(t,"NodeInjector")}function xF(e,t,n,i){if(n&Me.Optional&&i===void 0&&(i=null),!(n&(Me.Self|Me.Host))){let s=e[hc],r=ni(void 0);try{return s?s.get(t,i,n&Me.Optional):LP(t,i,n&Me.Optional)}finally{ni(r)}}return FF(i,t,n)}function OF(e,t,n,i=Me.Default,s){if(e!==null){if(t[Ce]&2048&&!(i&Me.Self)){let o=S$(e,t,n,i,Os);if(o!==Os)return o}let r=NF(e,t,n,i,Os);if(r!==Os)return r}return xF(t,n,i,s)}function NF(e,t,n,i,s){let r=y$(n);if(typeof r=="function"){if(!wF(t,e,i))return i&Me.Host?FF(s,n,i):xF(t,n,i,s);try{let o;if(o=r(i),o==null&&!(i&Me.Optional))dS(n);else return o}finally{EF()}}else if(typeof r=="number"){let o=null,a=PF(e,t),l=cc,c=i&Me.Host?t[gi][Ci]:null;for((a===-1||i&Me.SkipSelf)&&(l=a===-1?TS(e,t):t[a+8],l===cc||!uP(i,!1)?a=-1:(o=t[we],a=ug(l),t=dg(l,t)));a!==-1;){let u=t[we];if(cP(r,a,u.data)){let h=C$(a,t,n,o,i,c);if(h!==Os)return h}l=t[a+8],l!==cc&&uP(i,t[we].data[a+8]===c)&&cP(r,a,t)?(o=u,a=ug(l),t=dg(l,t)):a=-1}}return s}function C$(e,t,n,i,s,r){let o=t[we],a=o.data[e+8],l=i==null?zd(a)&&bw:i!=o&&(a.type&3)!==0,c=s&Me.Host&&r===a,u=ng(a,o,n,l,c);return u!==null?va(t,o,u,a):Os}function ng(e,t,n,i,s){let r=e.providerIndexes,o=t.data,a=r&1048575,l=e.directiveStart,c=e.directiveEnd,u=r>>20,h=i?a:a+u,f=s?a+u:c;for(let g=h;g<f;g++){let v=o[g];if(g<l&&n===v||g>=l&&v.type===n)return g}if(s){let g=o[l];if(g&&fo(g)&&g.type===n)return l}return null}function va(e,t,n,i){let s=e[n],r=t.data;if(d$(s)){let o=s;o.resolving&&$j(zj(r[n]));let a=hg(o.canSeeViewProviders);o.resolving=!0;let l,c=o.injectImpl?ni(o.injectImpl):null,u=wF(e,i,Me.Default);try{s=e[n]=o.factory(void 0,r,e,i),t.firstCreatePass&&n>=i.directiveStart&&c$(n,r[n],t)}finally{c!==null&&ni(c),hg(a),o.resolving=!1,EF()}}return s}function y$(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Md)?e[Md]:void 0;return typeof t=="number"?t>=0?t&AF:w$:t}function cP(e,t,n){let i=1<<e;return!!(n[t+(e>>MF)]&i)}function uP(e,t){return!(e&Me.Self)&&!(e&Me.Host&&t)}var da=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,i){return OF(this._tNode,this._lView,t,Ag(i),n)}};function w$(){return new da(wi(),He())}function vr(e){return Ud(()=>{let t=e.prototype.constructor,n=t[rg]||Dw(t),i=Object.prototype,s=Object.getPrototypeOf(e.prototype).constructor;for(;s&&s!==i;){let r=s[rg]||Dw(s);if(r&&r!==n)return r;s=Object.getPrototypeOf(s)}return r=>new r})}function Dw(e){return PP(e)?()=>{let t=Dw(kn(e));return t&&t()}:ha(e)}function S$(e,t,n,i,s){let r=e,o=t;for(;r!==null&&o!==null&&o[Ce]&2048&&!(o[Ce]&512);){let a=NF(r,o,n,i|Me.Self,Os);if(a!==Os)return a;let l=r.parent;if(!l){let c=o[iF];if(c){let u=c.get(n,Os,i);if(u!==Os)return u}l=kF(o),o=o[vc]}r=l}return s}function kF(e){let t=e[we],n=t.type;return n===2?t.declTNode:n===1?e[Ci]:null}function dP(e,t=null,n=null,i){let s=LF(e,t,n,i);return s.resolveInjectorInitializers(),s}function LF(e,t=null,n=null,i,s=new Set){let r=[n||Ln,Ez(e)];return i=i||(typeof e=="object"?void 0:Vn(e)),new xd(r,t||Pg(),i||null,s)}var Ue=(()=>{let t=class t{static create(i,s){if(Array.isArray(i))return dP({name:""},s,i,"");{let r=i.name??"";return dP({name:r},i.parent,i.providers,r)}}};t.THROW_IF_NOT_FOUND=Pd,t.NULL=new lg,t.\u0275prov=ee({token:t,providedIn:"any",factory:()=>K(HP)}),t.__NG_ELEMENT_ID__=-1;let e=t;return e})();var _$="ngOriginalError";function ew(e){return e[_$]}var hr=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&ew(t);for(;n&&ew(n);)n=ew(n);return n||null}},VF=new Q("",{providedIn:"root",factory:()=>U(hr).handleError.bind(void 0)}),IS=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=b$,t.__NG_ENV_ID__=i=>i;let e=t;return e})(),Rw=class extends IS{constructor(t){super(),this._lView=t}onDestroy(t){return pF(this._lView,t),()=>qz(this._lView,t)}};function b$(){return new Rw(He())}function E$(){return yc(wi(),He())}function yc(e,t){return new zt(yi(e,t))}var zt=(()=>{let t=class t{constructor(i){this.nativeElement=i}};t.__NG_ELEMENT_ID__=E$;let e=t;return e})();function D$(e){return e instanceof zt?e.nativeElement:e}var Tw=class extends Le{constructor(t=!1){super(),this.destroyRef=void 0,this.__isAsync=t,Nz()&&(this.destroyRef=U(IS,{optional:!0})??void 0)}emit(t){let n=$e(null);try{super.next(t)}finally{$e(n)}}subscribe(t,n,i){let s=t,r=n||(()=>null),o=i;if(t&&typeof t=="object"){let l=t;s=l.next?.bind(l),r=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(r=tw(r),s&&(s=tw(s)),o&&(o=tw(o)));let a=super.subscribe({next:s,error:r,complete:o});return t instanceof vt&&t.add(a),a}};function tw(e){return t=>{setTimeout(e,void 0,t)}}var H=Tw;function R$(){return this._results[Symbol.iterator]()}var Iw=class e{get changes(){return this._changes??=new H}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=R$)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let i=iz(t);(this._changesDetected=!nz(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},T$="ngSkipHydration",I$="ngskiphydration";function BF(e){let t=e.mergedAttrs;if(t===null)return!1;for(let n=0;n<t.length;n+=2){let i=t[n];if(typeof i=="number")return!1;if(typeof i=="string"&&i.toLowerCase()===I$)return!0}return!1}function GF(e){return e.hasAttribute(T$)}function pg(e){return(e.flags&128)===128}function A$(e){if(pg(e))return!0;let t=e.parent;for(;t;){if(pg(e)||BF(t))return!0;t=t.parent}return!1}var HF=new Map,M$=0;function P$(){return M$++}function F$(e){HF.set(e[Fg],e)}function x$(e){HF.delete(e[Fg])}var hP="__ngContext__";function po(e,t){cr(t)?(e[hP]=t[Fg],F$(t)):e[hP]=t}function UF(e){return jF(e[Nd])}function WF(e){return jF(e[os])}function jF(e){for(;e!==null&&!Vs(e);)e=e[os];return e}var Aw;function zF(e){Aw=e}function kg(){if(Aw!==void 0)return Aw;if(typeof document<"u")return document;throw new ue(210,!1)}var Lg=new Q("",{providedIn:"root",factory:()=>O$}),O$="ng",AS=new Q(""),on=new Q("",{providedIn:"platform",factory:()=>"unknown"});var MS=new Q("",{providedIn:"root",factory:()=>kg().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function N$(){let e=new _a;return U(on)==="browser"&&(e.store=k$(kg(),U(Lg))),e}var _a=(()=>{let t=class t{constructor(){this.store={},this.onSerializeCallbacks={}}get(i,s){return this.store[i]!==void 0?this.store[i]:s}set(i,s){this.store[i]=s}remove(i){delete this.store[i]}hasKey(i){return this.store.hasOwnProperty(i)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(i,s){this.onSerializeCallbacks[i]=s}toJson(){for(let i in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(i))try{this.store[i]=this.onSerializeCallbacks[i]()}catch(s){console.warn("Exception in onSerialize callback: ",s)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}};t.\u0275prov=ee({token:t,providedIn:"root",factory:N$});let e=t;return e})();function k$(e,t){let n=e.getElementById(t+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(i){console.warn("Exception while restoring TransferState for app "+t,i)}return{}}var $F="h",qF="b",Mw=function(e){return e.FirstChild="f",e.NextSibling="n",e}(Mw||{}),L$="e",V$="t",PS="c",KF="x",gg="r",B$="i",G$="n",H$="d",U$="__nghData__",QF=U$,nw="ngh",W$="nghm",YF=()=>null;function j$(e,t,n=!1){let i=e.getAttribute(nw);if(i==null)return null;let[s,r]=i.split("|");if(i=n?r:s,!i)return null;let o=r?`|${r}`:"",a=n?s:o,l={};if(i!==""){let u=t.get(_a,null,{optional:!0});u!==null&&(l=u.get(QF,[])[Number(i)])}let c={data:l,firstChild:e.firstChild??null};return n&&(c.firstChild=e,Vg(c,0,e.nextSibling)),a?e.setAttribute(nw,a):e.removeAttribute(nw),c}function z$(){YF=j$}function FS(e,t,n=!1){return YF(e,t,n)}function $$(e){let t=e._lView;return t[we].type===2?null:(rF(t)&&(t=t[xt]),t)}function q$(e){return e.textContent?.replace(/\s/gm,"")}function K$(e){let t=kg(),n=t.createNodeIterator(e,NodeFilter.SHOW_COMMENT,{acceptNode(r){let o=q$(r);return o==="ngetn"||o==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),i,s=[];for(;i=n.nextNode();)s.push(i);for(let r of s)r.textContent==="ngetn"?r.replaceWith(t.createTextNode("")):r.remove()}function Vg(e,t,n){e.segmentHeads??={},e.segmentHeads[t]=n}function Pw(e,t){return e.segmentHeads?.[t]??null}function Q$(e,t){let n=e.data,i=n[L$]?.[t]??null;return i===null&&n[PS]?.[t]&&(i=xS(e,t)),i}function JF(e,t){return e.data[PS]?.[t]??null}function xS(e,t){let n=JF(e,t)??[],i=0;for(let s of n)i+=s[gg]*(s[KF]??1);return i}function Bg(e,t){if(typeof e.disconnectedNodes>"u"){let n=e.data[H$];e.disconnectedNodes=n?new Set(n):null}return!!e.disconnectedNodes?.has(t)}var Kp=new Q(""),XF=!1,ZF=new Q("",{providedIn:"root",factory:()=>XF}),Y$=new Q("");var Fw=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Nj})`}};function Gg(e){return e instanceof Fw?e.changingThisBreaksApplicationSecurity:e}var J$=/^>|^->|<!--|-->|--!>|<!-$/g,X$=/(<|>)/g,Z$="\u200B$1\u200B";function e3(e){return e.replace(J$,t=>t.replace(X$,Z$))}function t3(e){return e.ownerDocument.body}function ex(e){return e instanceof Function?e():e}function Qp(e){return(e??U(Ue)).get(on)==="browser"}var fr=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(fr||{}),n3;function OS(e,t){return n3(e,t)}function ac(e,t,n,i,s){if(i!=null){let r,o=!1;Vs(i)?r=i:cr(i)&&(o=!0,i=i[pi]);let a=as(i);e===0&&n!==null?s==null?sx(t,n,a):vg(t,n,a,s||null,!0):e===1&&n!==null?vg(t,n,a,s||null,!0):e===2?BS(t,a,o):e===3&&t.destroyNode(a),r!=null&&v3(t,e,r,n,s)}}function NS(e,t){return e.createText(t)}function i3(e,t,n){e.setValue(t,n)}function kS(e,t){return e.createComment(e3(t))}function Hg(e,t,n){return e.createElement(t,n)}function s3(e,t){tx(e,t),t[pi]=null,t[Ci]=null}function r3(e,t,n,i,s,r){i[pi]=s,i[Ci]=t,Wg(e,i,n,1,s,r)}function tx(e,t){t[ks].changeDetectionScheduler?.notify(1),Wg(e,t,t[at],2,null,null)}function o3(e){let t=e[Nd];if(!t)return iw(e[we],e);for(;t;){let n=null;if(cr(t))n=t[Nd];else{let i=t[Bn];i&&(n=i)}if(!n){for(;t&&!t[os]&&t!==e;)cr(t)&&iw(t[we],t),t=t[tn];t===null&&(t=e),cr(t)&&iw(t[we],t),n=t&&t[os]}t=n}}function a3(e,t,n,i){let s=Bn+i,r=n.length;i>0&&(n[s-1][os]=t),i<r-Bn?(t[os]=n[s],GP(n,Bn+i,t)):(n.push(t),t[os]=null),t[tn]=n;let o=t[jd];o!==null&&n!==o&&l3(o,t);let a=t[ur];a!==null&&a.insertView(e),Sw(t),t[Ce]|=128}function l3(e,t){let n=e[fc],s=t[tn][tn][gi];t[gi]!==s&&(e[Ce]|=mS.HasTransplantedViews),n===null?e[fc]=[t]:n.push(t)}function nx(e,t){let n=e[fc],i=n.indexOf(t);n.splice(i,1)}function mg(e,t){if(e.length<=Bn)return;let n=Bn+t,i=e[n];if(i){let s=i[jd];s!==null&&s!==e&&nx(s,i),t>0&&(e[n-1][os]=i[os]);let r=ag(e,Bn+t);s3(i[we],i);let o=r[ur];o!==null&&o.detachView(r[we]),i[tn]=null,i[os]=null,i[Ce]&=-129}return i}function LS(e,t){if(!(t[Ce]&256)){let n=t[at];n.destroyNode&&Wg(e,t,n,3,null,null),o3(t)}}function iw(e,t){if(t[Ce]&256)return;let n=$e(null);try{t[Ce]&=-129,t[Ce]|=256,t[pa]&&CM(t[pa]),u3(e,t),c3(e,t),t[we].type===1&&t[at].destroy();let i=t[jd];if(i!==null&&Vs(t[tn])){i!==t[tn]&&nx(i,t);let s=t[ur];s!==null&&s.detachView(e)}x$(t)}finally{$e(n)}}function c3(e,t){let n=e.cleanup,i=t[Od];if(n!==null)for(let r=0;r<n.length-1;r+=2)if(typeof n[r]=="string"){let o=n[r+3];o>=0?i[o]():i[-o].unsubscribe(),r+=2}else{let o=i[n[r+1]];n[r].call(o)}i!==null&&(t[Od]=null);let s=t[uo];if(s!==null){t[uo]=null;for(let r=0;r<s.length;r++){let o=s[r];o()}}}function u3(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let s=t[n[i]];if(!(s instanceof ma)){let r=n[i+1];if(Array.isArray(r))for(let o=0;o<r.length;o+=2){let a=s[r[o]],l=r[o+1];xs(4,a,l);try{l.call(a)}finally{xs(5,a,l)}}else{xs(4,s,r);try{r.call(s)}finally{xs(5,s,r)}}}}}function ix(e,t,n){return d3(e,t.parent,n)}function d3(e,t,n){let i=t;for(;i!==null&&i.type&40;)t=i,i=t.parent;if(i===null)return n[pi];{let{componentOffset:s}=i;if(s>-1){let{encapsulation:r}=e.data[i.directiveStart+s];if(r===Ns.None||r===Ns.Emulated)return null}return yi(i,n)}}function vg(e,t,n,i,s){e.insertBefore(t,n,i,s)}function sx(e,t,n){e.appendChild(t,n)}function fP(e,t,n,i,s){i!==null?vg(e,t,n,i,s):sx(e,t,n)}function h3(e,t,n,i){e.removeChild(t,n,i)}function VS(e,t){return e.parentNode(t)}function f3(e,t){return e.nextSibling(t)}function rx(e,t,n){return g3(e,t,n)}function p3(e,t,n){return e.type&40?yi(e,n):null}var g3=p3,pP;function Ug(e,t,n,i){let s=ix(e,i,t),r=t[at],o=i.parent||t[Ci],a=rx(o,i,t);if(s!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)fP(r,s,n[l],a,!1);else fP(r,s,n,a,!1);pP!==void 0&&pP(r,i,t,n,s)}function ig(e,t){if(t!==null){let n=t.type;if(n&3)return yi(t,e);if(n&4)return xw(-1,e[t.index]);if(n&8){let i=t.child;if(i!==null)return ig(e,i);{let s=e[t.index];return Vs(s)?xw(-1,s):as(s)}}else{if(n&32)return OS(t,e)()||as(e[t.index]);{let i=ox(e,t);if(i!==null){if(Array.isArray(i))return i[0];let s=Vd(e[gi]);return ig(s,i)}else return ig(e,t.next)}}}return null}function ox(e,t){if(t!==null){let i=e[gi][Ci],s=t.projection;return i.projection[s]}return null}function xw(e,t){let n=Bn+e+1;if(n<t.length){let i=t[n],s=i[we].firstChild;if(s!==null)return ig(i,s)}return t[dr]}function BS(e,t,n){let i=VS(e,t);i&&h3(e,i,t,n)}function ax(e){e.textContent=""}function GS(e,t,n,i,s,r,o){for(;n!=null;){let a=i[n.index],l=n.type;if(o&&t===0&&(a&&po(as(a),i),n.flags|=2),(n.flags&32)!==32)if(l&8)GS(e,t,n.child,i,s,r,!1),ac(t,e,s,a,r);else if(l&32){let c=OS(n,i),u;for(;u=c();)ac(t,e,s,u,r);ac(t,e,s,a,r)}else l&16?lx(e,t,i,n,s,r):ac(t,e,s,a,r);n=o?n.projectionNext:n.next}}function Wg(e,t,n,i,s,r){GS(n,i,e.firstChild,t,s,r,!1)}function m3(e,t,n){let i=t[at],s=ix(e,n,t),r=n.parent||t[Ci],o=rx(r,n,t);lx(i,0,t,n,s,o)}function lx(e,t,n,i,s,r){let o=n[gi],l=o[Ci].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];ac(t,e,s,u,r)}else{let c=l,u=o[tn];pg(i)&&(c.flags|=128),GS(e,t,c,u,s,r,!0)}}function v3(e,t,n,i,s){let r=n[dr],o=as(n);r!==o&&ac(t,e,i,r,s);for(let a=Bn;a<n.length;a++){let l=n[a];Wg(l[we],l,e,t,i,r)}}function C3(e,t,n,i,s){if(t)s?e.addClass(n,i):e.removeClass(n,i);else{let r=i.indexOf("-")===-1?void 0:fr.DashCase;s==null?e.removeStyle(n,i,r):(typeof s=="string"&&s.endsWith("!important")&&(s=s.slice(0,-10),r|=fr.Important),e.setStyle(n,i,s,r))}}function y3(e,t,n){e.setAttribute(t,"style",n)}function cx(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function ux(e,t,n){let{mergedAttrs:i,classes:s,styles:r}=n;i!==null&&mw(e,t,i),s!==null&&cx(e,t,s),r!==null&&y3(e,t,r)}var Cr={};function ve(e=1){dx(jt(),He(),Sa()+e,!1)}function dx(e,t,n,i){if(!i)if((t[Ce]&3)===3){let r=e.preOrderCheckHooks;r!==null&&eg(t,r,n)}else{let r=e.preOrderHooks;r!==null&&tg(t,r,0,n)}ga(n)}function ne(e,t=Me.Default){let n=He();if(n===null)return K(e,t);let i=wi();return OF(i,n,kn(e),t)}function hx(e,t,n,i,s,r){let o=$e(null);try{let a=null;s&en.SignalBased&&(a=t[i][zl]),a!==null&&a.transformFn!==void 0&&(r=a.transformFn(r)),s&en.HasDecoratorInputTransform&&(r=e.inputTransforms[i].call(t,r)),e.setInput!==null?e.setInput(t,a,r,n,i):oF(t,a,i,r)}finally{$e(o)}}function w3(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let s=n[i];if(s<0)ga(~s);else{let r=s,o=n[++i],a=n[++i];s$(o,r);let l=t[r];a(2,l)}}}finally{ga(-1)}}function jg(e,t,n,i,s,r,o,a,l,c,u){let h=t.blueprint.slice();return h[pi]=s,h[Ce]=i|4|128|8|64,(c!==null||e&&e[Ce]&2048)&&(h[Ce]|=2048),fF(h),h[tn]=h[vc]=e,h[Oi]=n,h[ks]=o||e&&e[ks],h[at]=a||e&&e[at],h[hc]=l||e&&e[hc]||null,h[Ci]=r,h[Fg]=P$(),h[xi]=u,h[iF]=c,h[gi]=t.type==2?e[gi]:h,h}function wc(e,t,n,i,s){let r=e.data[t];if(r===null)r=S3(e,t,n,i,s),i$()&&(r.flags|=32);else if(r.type&64){r.type=n,r.value=i,r.attrs=s;let o=e$();r.injectorIndex=o===null?-1:o.injectorIndex}return wa(r,!0),r}function S3(e,t,n,i,s){let r=mF(),o=SS(),a=o?r:r&&r.parent,l=e.data[t]=I3(e,a,n,t,i,s);return e.firstChild===null&&(e.firstChild=l),r!==null&&(o?r.child==null&&l.parent!==null&&(r.child=l):r.next===null&&(r.next=l,l.prev=r)),l}function fx(e,t,n,i){if(n===0)return-1;let s=t.length;for(let r=0;r<n;r++)t.push(i),e.blueprint.push(i),e.data.push(null);return s}function px(e,t,n,i,s){let r=Sa(),o=i&2;try{ga(-1),o&&t.length>xt&&dx(e,t,xt,!1),xs(o?2:0,s),n(i,s)}finally{ga(r),xs(o?3:1,s)}}function HS(e,t,n){if(vS(t)){let i=$e(null);try{let s=t.directiveStart,r=t.directiveEnd;for(let o=s;o<r;o++){let a=e.data[o];if(a.contentQueries){let l=n[o];a.contentQueries(1,l,o)}}}finally{$e(i)}}}function US(e,t,n){gF()&&(O3(e,t,n,yi(n,t)),(n.flags&64)===64&&yx(e,t,n))}function WS(e,t,n=yi){let i=t.localNames;if(i!==null){let s=t.index+1;for(let r=0;r<i.length;r+=2){let o=i[r+1],a=o===-1?n(t,e):e[o];e[s++]=a}}}function gx(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=jS(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function jS(e,t,n,i,s,r,o,a,l,c,u){let h=xt+i,f=h+s,g=_3(h,f),v=typeof c=="function"?c():c;return g[we]={type:e,blueprint:g,template:n,queries:null,viewQuery:a,declTNode:t,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof r=="function"?r():r,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:v,incompleteFirstPass:!1,ssrId:u}}function _3(e,t){let n=[];for(let i=0;i<t;i++)n.push(i<e?null:Cr);return n}function b3(e,t,n,i){let r=i.get(ZF,XF)||n===Ns.ShadowDom,o=e.selectRootElement(t,r);return E3(o),o}function E3(e){mx(e)}var mx=()=>null;function D3(e){GF(e)?ax(e):K$(e)}function R3(){mx=D3}function T3(e,t,n,i){let s=_x(t);s.push(n),e.firstCreatePass&&bx(e).push(i,s.length-1)}function I3(e,t,n,i,s,r){let o=t?t.injectorIndex:-1,a=0;return Cc()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:s,attrs:r,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function gP(e,t,n,i,s){for(let r in t){if(!t.hasOwnProperty(r))continue;let o=t[r];if(o===void 0)continue;i??={};let a,l=en.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=r;if(s!==null){if(!s.hasOwnProperty(r))continue;c=s[r]}e===0?mP(i,n,c,a,l):mP(i,n,c,a)}return i}function mP(e,t,n,i,s){let r;e.hasOwnProperty(n)?(r=e[n]).push(t,i):r=e[n]=[t,i],s!==void 0&&r.push(s)}function A3(e,t,n){let i=t.directiveStart,s=t.directiveEnd,r=e.data,o=t.attrs,a=[],l=null,c=null;for(let u=i;u<s;u++){let h=r[u],f=n?n.get(h):null,g=f?f.inputs:null,v=f?f.outputs:null;l=gP(0,h.inputs,u,l,g),c=gP(1,h.outputs,u,c,v);let y=l!==null&&o!==null&&!pS(t)?z3(l,u,o):null;a.push(y)}l!==null&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}function M3(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function vx(e,t,n,i,s,r,o,a){let l=yi(t,n),c=t.inputs,u;!a&&c!=null&&(u=c[i])?($S(e,n,u,i,s),zd(t)&&P3(n,t.index)):t.type&3?(i=M3(i),s=o!=null?o(s,t.value||"",i):s,r.setProperty(l,i,s)):t.type&12}function P3(e,t){let n=vo(t,e);n[Ce]&16||(n[Ce]|=64)}function zS(e,t,n,i){if(gF()){let s=i===null?null:{"":-1},r=k3(e,n),o,a;r===null?o=a=null:[o,a]=r,o!==null&&Cx(e,t,n,o,s,a),s&&L3(n,i,s)}n.mergedAttrs=Fd(n.mergedAttrs,n.attrs)}function Cx(e,t,n,i,s,r){for(let c=0;c<i.length;c++)Ew(fg(n,t),e,i[c].type);B3(n,e.data.length,i.length);for(let c=0;c<i.length;c++){let u=i[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=fx(e,t,i.length,null);for(let c=0;c<i.length;c++){let u=i[c];n.mergedAttrs=Fd(n.mergedAttrs,u.hostAttrs),G3(e,n,t,l,u),V3(l,u,s),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let h=u.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}A3(e,n,r)}function F3(e,t,n,i,s){let r=s.hostBindings;if(r){let o=e.hostBindingOpCodes;o===null&&(o=e.hostBindingOpCodes=[]);let a=~t.index;x3(o)!=a&&o.push(a),o.push(n,i,r)}}function x3(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function O3(e,t,n,i){let s=n.directiveStart,r=n.directiveEnd;zd(n)&&H3(t,n,e.data[s+n.componentOffset]),e.firstCreatePass||fg(n,t),po(i,t);let o=n.initialInputs;for(let a=s;a<r;a++){let l=e.data[a],c=va(t,e,a,n);if(po(c,t),o!==null&&j3(t,a-s,c,l,n,o),fo(l)){let u=vo(n.index,t);u[Oi]=va(t,e,a,n)}}}function yx(e,t,n){let i=n.directiveStart,s=n.directiveEnd,r=n.index,o=r$();try{ga(r);for(let a=i;a<s;a++){let l=e.data[a],c=t[a];_w(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&N3(l,c)}}finally{ga(-1),_w(o)}}function N3(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function k3(e,t){let n=e.directiveRegistry,i=null,s=null;if(n)for(let r=0;r<n.length;r++){let o=n[r];if(zP(t,o.selectors,!1))if(i||(i=[]),fo(o))if(o.findHostDirectiveDefs!==null){let a=[];s=s||new Map,o.findHostDirectiveDefs(o,a,s),i.unshift(...a,o);let l=a.length;Ow(e,t,l)}else i.unshift(o),Ow(e,t,0);else s=s||new Map,o.findHostDirectiveDefs?.(o,i,s),i.push(o)}return i===null?null:[i,s]}function Ow(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function L3(e,t,n){if(t){let i=e.localNames=[];for(let s=0;s<t.length;s+=2){let r=n[t[s+1]];if(r==null)throw new ue(-301,!1);i.push(t[s],r)}}}function V3(e,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;fo(t)&&(n[""]=e)}}function B3(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function G3(e,t,n,i,s){e.data[i]=s;let r=s.factory||(s.factory=ha(s.type,!0)),o=new ma(r,fo(s),ne);e.blueprint[i]=o,n[i]=o,F3(e,t,i,fx(e,n,s.hostVars,Cr),s)}function H3(e,t,n){let i=yi(t,e),s=gx(n),r=e[ks].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=zg(e,jg(e,s,null,o,i,t,null,r.createRenderer(i,n),null,null,null));e[t.index]=a}function U3(e,t,n,i,s,r){let o=yi(e,t);W3(t[at],o,r,e.value,n,i,s)}function W3(e,t,n,i,s,r,o){if(r==null)e.removeAttribute(t,s,n);else{let a=o==null?uS(r):o(r,i||"",s);e.setAttribute(t,s,a,n)}}function j3(e,t,n,i,s,r){let o=r[t];if(o!==null)for(let a=0;a<o.length;){let l=o[a++],c=o[a++],u=o[a++],h=o[a++];hx(i,n,l,c,u,h)}}function z3(e,t,n){let i=null,s=0;for(;s<n.length;){let r=n[s];if(r===0){s+=4;continue}else if(r===5){s+=2;continue}if(typeof r=="number")break;if(e.hasOwnProperty(r)){i===null&&(i=[]);let o=e[r];for(let a=0;a<o.length;a+=3)if(o[a]===t){i.push(r,o[a+1],o[a+2],n[s+1]);break}}s+=2}return i}function wx(e,t,n,i){return[e,!0,0,t,null,i,null,n,null,null]}function Sx(e,t){let n=e.contentQueries;if(n!==null){let i=$e(null);try{for(let s=0;s<n.length;s+=2){let r=n[s],o=n[s+1];if(o!==-1){let a=e.data[o];bS(r),a.contentQueries(2,t[o],o)}}}finally{$e(i)}}}function zg(e,t){return e[Nd]?e[oP][os]=t:e[Nd]=t,e[oP]=t,t}function Nw(e,t,n){bS(0);let i=$e(null);try{t(e,n)}finally{$e(i)}}function _x(e){return e[Od]||(e[Od]=[])}function bx(e){return e.cleanup||(e.cleanup=[])}function Ex(e,t){let n=e[hc],i=n?n.get(hr,null):null;i&&i.handleError(t)}function $S(e,t,n,i,s){for(let r=0;r<n.length;){let o=n[r++],a=n[r++],l=n[r++],c=t[o],u=e.data[o];hx(u,c,i,a,l,s)}}function $3(e,t,n){let i=dF(t,e);i3(e[at],i,n)}function q3(e,t){let n=vo(t,e),i=n[we];K3(i,n);let s=n[pi];s!==null&&n[xi]===null&&(n[xi]=FS(s,n[hc])),qS(i,n,n[Oi])}function K3(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function qS(e,t,n){ES(t);try{let i=e.viewQuery;i!==null&&Nw(1,i,n);let s=e.template;s!==null&&px(e,t,s,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[ur]?.finishViewCreation(e),e.staticContentQueries&&Sx(e,t),e.staticViewQueries&&Nw(2,e.viewQuery,n);let r=e.components;r!==null&&Q3(t,r)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{t[Ce]&=-5,DS()}}function Q3(e,t){for(let n=0;n<t.length;n++)q3(e,t[n])}function Dx(e,t,n,i){let s=$e(null);try{let r=t.tView,a=e[Ce]&4096?4096:16,l=jg(e,r,n,a,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=e[t.index];l[jd]=c;let u=e[ur];return u!==null&&(l[ur]=u.createEmbeddedView(r)),qS(r,l,n),l}finally{$e(s)}}function Y3(e,t){let n=Bn+t;if(n<e.length)return e[n]}function kw(e,t){return!t||t.firstChild===null||pg(e)}function Rx(e,t,n,i=!0){let s=t[we];if(a3(s,t,e,n),i){let o=xw(n,e),a=t[at],l=VS(a,e[dr]);l!==null&&r3(s,e[Ci],a,t,l,o)}let r=t[xi];r!==null&&r.firstChild!==null&&(r.firstChild=null)}function J3(e,t){let n=mg(e,t);return n!==void 0&&LS(n[we],n),n}function Cg(e,t,n,i,s=!1){for(;n!==null;){let r=t[n.index];r!==null&&i.push(as(r)),Vs(r)&&X3(r,i);let o=n.type;if(o&8)Cg(e,t,n.child,i);else if(o&32){let a=OS(n,t),l;for(;l=a();)i.push(l)}else if(o&16){let a=ox(t,n);if(Array.isArray(a))i.push(...a);else{let l=Vd(t[gi]);Cg(l[we],l,a,i,!0)}}n=s?n.projectionNext:n.next}return i}function X3(e,t){for(let n=Bn;n<e.length;n++){let i=e[n],s=i[we].firstChild;s!==null&&Cg(i[we],i,s,t)}e[dr]!==e[pi]&&t.push(e[dr])}var Tx=[];function Z3(e){return e[pa]??e4(e)}function e4(e){let t=Tx.pop()??Object.create(n4);return t.lView=e,t}function t4(e){e.lView[pa]!==e&&(e.lView=null,Tx.push(e))}var n4=se(B({},Ry),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Ld(e.lView)},consumerOnSignalRead(){this.lView[pa]=this}}),Ix=100;function Ax(e,t=!0,n=0){let i=e[ks],s=i.rendererFactory,r=!1;r||s.begin?.();try{i4(e,n)}catch(o){throw t&&Ex(e,o),o}finally{r||(s.end?.(),i.inlineEffectRunner?.flush())}}function i4(e,t){Lw(e,t);let n=0;for(;wS(e);){if(n===Ix)throw new ue(103,!1);n++,Lw(e,1)}}function s4(e,t,n,i){let s=t[Ce];if((s&256)===256)return;let r=!1;!r&&t[ks].inlineEffectRunner?.flush(),ES(t);let o=null,a=null;!r&&r4(e)&&(a=Z3(t),o=mM(a));try{fF(t),n$(e.bindingStartIndex),n!==null&&px(e,t,n,2,i);let l=(s&3)===3;if(!r)if(l){let h=e.preOrderCheckHooks;h!==null&&eg(t,h,null)}else{let h=e.preOrderHooks;h!==null&&tg(t,h,0,null),Xy(t,0)}if(o4(t),Mx(t,0),e.contentQueries!==null&&Sx(e,t),!r)if(l){let h=e.contentCheckHooks;h!==null&&eg(t,h)}else{let h=e.contentHooks;h!==null&&tg(t,h,1),Xy(t,1)}w3(e,t);let c=e.components;c!==null&&Fx(t,c,0);let u=e.viewQuery;if(u!==null&&Nw(2,u,i),!r)if(l){let h=e.viewCheckHooks;h!==null&&eg(t,h)}else{let h=e.viewHooks;h!==null&&tg(t,h,2),Xy(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Jy]){for(let h of t[Jy])h();t[Jy]=null}r||(t[Ce]&=-73)}catch(l){throw Ld(t),l}finally{a!==null&&(vM(a,o),t4(a)),DS()}}function r4(e){return e.type!==2}function Mx(e,t){for(let n=UF(e);n!==null;n=WF(n))for(let i=Bn;i<n.length;i++){let s=n[i];Px(s,t)}}function o4(e){for(let t=UF(e);t!==null;t=WF(t)){if(!(t[Ce]&mS.HasTransplantedViews))continue;let n=t[fc];for(let i=0;i<n.length;i++){let s=n[i],r=s[tn];zz(s)}}}function a4(e,t,n){let i=vo(t,e);Px(i,n)}function Px(e,t){yS(e)&&Lw(e,t)}function Lw(e,t){let i=e[we],s=e[Ce],r=e[pa],o=!!(t===0&&s&16);if(o||=!!(s&64&&t===0),o||=!!(s&1024),o||=!!(r?.dirty&&Ty(r)),r&&(r.dirty=!1),e[Ce]&=-9217,o)s4(i,e,i.template,e[Oi]);else if(s&8192){Mx(e,1);let a=i.components;a!==null&&Fx(e,a,1)}}function Fx(e,t,n){for(let i=0;i<t.length;i++)a4(e,t[i],n)}function KS(e){for(e[ks].changeDetectionScheduler?.notify();e;){e[Ce]|=64;let t=Vd(e);if(rF(e)&&!t)return e;e=t}return null}var Ca=class{get rootNodes(){let t=this._lView,n=t[we];return Cg(n,t,n.firstChild,[])}constructor(t,n,i=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Oi]}set context(t){this._lView[Oi]=t}get destroyed(){return(this._lView[Ce]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[tn];if(Vs(t)){let n=t[cg],i=n?n.indexOf(this):-1;i>-1&&(mg(t,i),ag(n,i))}this._attachedToViewContainer=!1}LS(this._lView[we],this._lView)}onDestroy(t){pF(this._lView,t)}markForCheck(){KS(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ce]&=-129}reattach(){Sw(this._lView),this._lView[Ce]|=128}detectChanges(){this._lView[Ce]|=1024,Ax(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ue(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,tx(this._lView[we],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new ue(902,!1);this._appRef=t,Sw(this._lView)}},Ls=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=u4;let e=t;return e})(),l4=Ls,c4=class extends l4{constructor(t,n,i){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,i){let s=Dx(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:i});return new Ca(s)}};function u4(){return $g(wi(),He())}function $g(e,t){return e.type&4?new c4(t,e,yc(e,t)):null}function xx(e){let t=e[kd]??[],i=e[tn][at];for(let s of t)d4(s,i);e[kd]=Ln}function d4(e,t){let n=0,i=e.firstChild;if(i){let s=e.data[gg];for(;n<s;){let r=i.nextSibling;BS(t,i,!1),i=r,n++}}}function Ox(e){xx(e);for(let t=Bn;t<e.length;t++)yg(e[t])}function h4(e){let t=e[xi]?.i18nNodes;if(t){let n=e[at];for(let i of t.values())BS(n,i,!1);e[xi].i18nNodes=void 0}}function yg(e){h4(e);let t=e[we];for(let n=xt;n<t.bindingStartIndex;n++)if(Vs(e[n])){let i=e[n];Ox(i)}else cr(e[n])&&yg(e[n])}function f4(e){let t=e._views;for(let n of t){let i=$$(n);if(i!==null&&i[pi]!==null)if(cr(i))yg(i);else{let s=i[pi];yg(s),Ox(i)}}}var p4=new RegExp(`^(\\d+)*(${qF}|${$F})*(.*)`);function g4(e){let t=e.match(p4),[n,i,s,r]=t,o=i?parseInt(i,10):s,a=[];for(let[l,c,u]of r.matchAll(/(f|n)(\d*)/g)){let h=parseInt(u,10)||1;a.push(c,h)}return[o,...a]}function m4(e){return!e.prev&&e.parent?.type===8}function sw(e){return e.index-xt}function v4(e,t){let n=e.i18nNodes;if(n){let i=n.get(t);return i&&n.delete(t),i}return null}function qg(e,t,n,i){let s=sw(i),r=v4(e,s);if(!r){let o=e.data[G$];if(o?.[s])r=y4(o[s],n);else if(t.firstChild===i)r=e.firstChild;else{let a=i.prev===null,l=i.prev??i.parent;if(m4(i)){let c=sw(i.parent);r=Pw(e,c)}else{let c=yi(l,n);if(a)r=c.firstChild;else{let u=sw(l),h=Pw(e,u);if(l.type===2&&h){let g=xS(e,u)+1;r=Kg(g,h)}else r=c.nextSibling}}}}return r}function Kg(e,t){let n=t;for(let i=0;i<e;i++)n=n.nextSibling;return n}function C4(e,t){let n=e;for(let i=0;i<t.length;i+=2){let s=t[i],r=t[i+1];for(let o=0;o<r;o++)switch(s){case Mw.FirstChild:n=n.firstChild;break;case Mw.NextSibling:n=n.nextSibling;break}}return n}function y4(e,t){let[n,...i]=g4(e),s;if(n===$F)s=t[gi][pi];else if(n===qF)s=t3(t[gi][pi]);else{let r=Number(n);s=as(t[r+xt])}return C4(s,i)}function w4(e,t){let n=[];for(let i of t)for(let s=0;s<(i[KF]??1);s++){let r={data:i,firstChild:null};i[gg]>0&&(r.firstChild=e,e=Kg(i[gg],e)),n.push(r)}return[e,n]}var Nx=()=>null;function S4(e,t){let n=e[kd];return!t||n===null||n.length===0?null:n[0].data[B$]===t?n.shift():(xx(e),null)}function _4(){Nx=S4}function Vw(e,t){return Nx(e,t)}var Bw=class{},Gw=class{},wg=class{};function b4(e){let t=Error(`No component factory found for ${Vn(e)}.`);return t[E4]=e,t}var E4="ngComponent";var Hw=class{resolveComponentFactory(t){throw b4(t)}},Sc=(()=>{let t=class t{};t.NULL=new Hw;let e=t;return e})(),Bd=class{},ba=(()=>{let t=class t{constructor(){this.destroyNode=null}};t.__NG_ELEMENT_ID__=()=>D4();let e=t;return e})();function D4(){let e=He(),t=wi(),n=vo(t.index,e);return(cr(n)?n:e)[at]}var R4=(()=>{let t=class t{};t.\u0275prov=ee({token:t,providedIn:"root",factory:()=>null});let e=t;return e})(),rw={};var vP=new Set;function Ea(e){vP.has(e)||(vP.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function CP(...e){}function T4(){let e=typeof Ad.requestAnimationFrame=="function",t=Ad[e?"requestAnimationFrame":"setTimeout"],n=Ad[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i);let s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}var le=class e{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new H(!1),this.onMicrotaskEmpty=new H(!1),this.onStable=new H(!1),this.onError=new H(!1),typeof Zone>"u")throw new ue(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&n,s.shouldCoalesceRunChangeDetection=i,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=T4().nativeRequestAnimationFrame,M4(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new ue(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new ue(909,!1)}run(t,n,i){return this._inner.run(t,n,i)}runTask(t,n,i,s){let r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+s,t,I4,CP,CP);try{return r.runTask(o,n,i)}finally{r.cancelTask(o)}}runGuarded(t,n,i){return this._inner.runGuarded(t,n,i)}runOutsideAngular(t){return this._outer.run(t)}},I4={};function QS(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function A4(e){e.isCheckStableRunning||e.lastRequestAnimationFrameId!==-1||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Ad,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Uw(e),e.isCheckStableRunning=!0,QS(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Uw(e))}function M4(e){let t=()=>{A4(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,s,r,o,a)=>{if(P4(a))return n.invokeTask(s,r,o,a);try{return yP(e),n.invokeTask(s,r,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&r.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),wP(e)}},onInvoke:(n,i,s,r,o,a,l)=>{try{return yP(e),n.invoke(s,r,o,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),wP(e)}},onHasTask:(n,i,s,r)=>{n.hasTask(s,r),i===s&&(r.change=="microTask"?(e._hasPendingMicrotasks=r.microTask,Uw(e),QS(e)):r.change=="macroTask"&&(e.hasPendingMacrotasks=r.macroTask))},onHandleError:(n,i,s,r)=>(n.handleError(s,r),e.runOutsideAngular(()=>e.onError.emit(r)),!1)})}function Uw(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.lastRequestAnimationFrameId!==-1?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function yP(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function wP(e){e._nesting--,QS(e)}function P4(e){return!Array.isArray(e)||e.length!==1?!1:e[0].data?.__ignore_ng_zone__===!0}var kx=(()=>{let t=class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let s of i)s()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};t.\u0275prov=ee({token:t,providedIn:"root",factory:()=>new t});let e=t;return e})();function Sg(e,t,n){let i=n?e.styles:null,s=n?e.classes:null,r=0;if(t!==null)for(let o=0;o<t.length;o++){let a=t[o];if(typeof a=="number")r=a;else if(r==1)s=hw(s,a);else if(r==2){let l=a,c=t[++o];i=hw(i,l+": "+c+";")}}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=s:e.classesWithoutHost=s}var _g=class extends Sc{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=ho(t);return new gc(n,this.ngModule)}};function SP(e){let t=[];for(let n in e){if(!e.hasOwnProperty(n))continue;let i=e[n];i!==void 0&&t.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return t}function F4(e){let t=e.toLowerCase();return t==="svg"?uF:t==="math"?Gz:null}var Ww=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,i){i=Ag(i);let s=this.injector.get(t,rw,i);return s!==rw||n===rw?s:this.parentInjector.get(t,n,i)}},gc=class extends wg{get inputs(){let t=this.componentDef,n=t.inputTransforms,i=SP(t.inputs);if(n!==null)for(let s of i)n.hasOwnProperty(s.propName)&&(s.transform=n[s.propName]);return i}get outputs(){return SP(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=yz(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,i,s){let r=$e(null);try{s=s||this.ngModule;let o=s instanceof Gn?s:s?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Ww(t,o):t,l=a.get(Bd,null);if(l===null)throw new ue(407,!1);let c=a.get(R4,null),u=a.get(kx,null),h=a.get(Bw,null),f={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:h},g=l.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",y=i?b3(g,i,this.componentDef.encapsulation,a):Hg(g,v,F4(v)),C=512;this.componentDef.signals?C|=4096:this.componentDef.onPush||(C|=16);let E=null;y!==null&&(E=FS(y,a,!0));let I=jS(0,null,null,1,0,null,null,null,null,null,null),T=jg(null,I,null,C,null,null,f,g,a,null,E);ES(T);let x,z;try{let V=this.componentDef,b,S=null;V.findHostDirectiveDefs?(b=[],S=new Map,V.findHostDirectiveDefs(V,b,S),b.push(V)):b=[V];let _=x4(T,y),R=O4(_,y,V,b,T,f,g);z=CS(I,xt),y&&L4(g,V,y,i),n!==void 0&&V4(z,this.ngContentSelectors,n),x=k4(R,V,b,S,T,[B4]),qS(I,T,null)}finally{DS()}return new jw(this.componentType,x,yc(z,T),T,z)}finally{$e(r)}}},jw=class extends Gw{constructor(t,n,i,s,r){super(),this.location=i,this._rootLView=s,this._tNode=r,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Ca(s,void 0,!1),this.componentType=t}setInput(t,n){let i=this._tNode.inputs,s;if(i!==null&&(s=i[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let r=this._rootLView;$S(r[we],r,s,t,n),this.previousInputValues.set(t,n);let o=vo(this._tNode.index,r);KS(o)}}get injector(){return new da(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function x4(e,t){let n=e[we],i=xt;return e[i]=t,wc(n,i,2,"#host",null)}function O4(e,t,n,i,s,r,o){let a=s[we];N4(i,e,t,o);let l=null;t!==null&&(l=FS(t,s[hc]));let c=r.rendererFactory.createRenderer(t,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let h=jg(s,gx(n),null,u,s[e.index],e,r,c,null,null,l);return a.firstCreatePass&&Ow(a,e,i.length-1),zg(s,h),s[e.index]=h}function N4(e,t,n,i){for(let s of e)t.mergedAttrs=Fd(t.mergedAttrs,s.hostAttrs);t.mergedAttrs!==null&&(Sg(t,t.mergedAttrs,!0),n!==null&&ux(i,n,t))}function k4(e,t,n,i,s,r){let o=wi(),a=s[we],l=yi(o,s);Cx(a,s,o,n,null,i);for(let u=0;u<n.length;u++){let h=o.directiveStart+u,f=va(s,a,h,o);po(f,s)}yx(a,s,o),l&&po(l,s);let c=va(s,a,o.directiveStart+o.componentOffset,o);if(e[Oi]=s[Oi]=c,r!==null)for(let u of r)u(c,t);return HS(a,o,s),c}function L4(e,t,n,i){if(i)mw(e,n,["ng-version","17.3.11"]);else{let{attrs:s,classes:r}=wz(t.selectors[0]);s&&mw(e,n,s),r&&r.length>0&&cx(e,n,r.join(" "))}}function V4(e,t,n){let i=e.projection=[];for(let s=0;s<t.length;s++){let r=n[s];i.push(r!=null?Array.from(r):null)}}function B4(){let e=wi();Ng(He()[we],e)}var Ni=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=G4;let e=t;return e})();function G4(){let e=wi();return Vx(e,He())}var H4=Ni,Lx=class extends H4{constructor(t,n,i){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=i}get element(){return yc(this._hostTNode,this._hostLView)}get injector(){return new da(this._hostTNode,this._hostLView)}get parentInjector(){let t=TS(this._hostTNode,this._hostLView);if(IF(t)){let n=dg(t,this._hostLView),i=ug(t),s=n[we].data[i+8];return new da(s,n)}else return new da(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=_P(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-Bn}createEmbeddedView(t,n,i){let s,r;typeof i=="number"?s=i:i!=null&&(s=i.index,r=i.injector);let o=Vw(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},r,o);return this.insertImpl(a,s,kw(this._hostTNode,o)),a}createComponent(t,n,i,s,r){let o=t&&!kz(t),a;if(o)a=n;else{let v=n||{};a=v.index,i=v.injector,s=v.projectableNodes,r=v.environmentInjector||v.ngModuleRef}let l=o?t:new gc(ho(t)),c=i||this.parentInjector;if(!r&&l.ngModule==null){let y=(o?c:this.parentInjector).get(Gn,null);y&&(r=y)}let u=ho(l.componentType??{}),h=Vw(this._lContainer,u?.id??null),f=h?.firstChild??null,g=l.create(c,s,f,r);return this.insertImpl(g.hostView,a,kw(this._hostTNode,h)),g}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,i){let s=t._lView;if(jz(s)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=s[tn],c=new Lx(l,l[Ci],l[tn]);c.detach(c.indexOf(t))}}let r=this._adjustIndex(n),o=this._lContainer;return Rx(o,s,r,i),t.attachToViewContainerRef(),GP(ow(o),r,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=_P(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),i=mg(this._lContainer,n);i&&(ag(ow(this._lContainer),n),LS(i[we],i))}detach(t){let n=this._adjustIndex(t,-1),i=mg(this._lContainer,n);return i&&ag(ow(this._lContainer),n)!=null?new Ca(i):null}_adjustIndex(t,n=0){return t??this.length+n}};function _P(e){return e[cg]}function ow(e){return e[cg]||(e[cg]=[])}function Vx(e,t){let n,i=t[e.index];return Vs(i)?n=i:(n=wx(i,t,null,e),t[e.index]=n,zg(t,n)),Bx(n,t,e,i),new Lx(n,e,t)}function U4(e,t){let n=e[at],i=n.createComment(""),s=yi(t,e),r=VS(n,s);return vg(n,r,i,f3(n,s),!1),i}var Bx=Gx,YS=()=>!1;function W4(e,t,n){return YS(e,t,n)}function Gx(e,t,n,i){if(e[dr])return;let s;n.type&8?s=as(i):s=U4(t,n),e[dr]=s}function j4(e,t,n){if(e[dr]&&e[kd])return!0;let i=n[xi],s=t.index-xt;if(!i||A$(t)||Bg(i,s))return!1;let o=Pw(i,s),a=i.data[PS]?.[s],[l,c]=w4(o,a);return e[dr]=l,e[kd]=c,!0}function z4(e,t,n,i){YS(e,n,t)||Gx(e,t,n,i)}function $4(){Bx=z4,YS=j4}var zw=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},$w=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let i=t.contentQueries!==null?t.contentQueries[0]:n.length,s=[];for(let r=0;r<i;r++){let o=n.getByIndex(r),a=this.queries[o.indexInDeclarationView];s.push(a.clone())}return new e(s)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)JS(t,n).matches!==null&&this.queries[n].setDirty()}},qw=class{constructor(t,n,i=null){this.flags=n,this.read=i,typeof t=="string"?this.predicate=eq(t):this.predicate=t}},Kw=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let i=0;i<this.length;i++){let s=n!==null?n.length:0,r=this.getByIndex(i).embeddedTView(t,s);r&&(r.indexInDeclarationView=i,n!==null?n.push(r):n=[r])}return n!==null?new e(n):null}template(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},Qw=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let s=0;s<i.length;s++){let r=i[s];this.matchTNodeWithReadOption(t,n,q4(n,r)),this.matchTNodeWithReadOption(t,n,ng(n,t,r,!1,!1))}else i===Ls?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,ng(n,t,i,!1,!1))}matchTNodeWithReadOption(t,n,i){if(i!==null){let s=this.metadata.read;if(s!==null)if(s===zt||s===Ni||s===Ls&&n.type&4)this.addMatch(n.index,-2);else{let r=ng(n,t,s,!1,!1);r!==null&&this.addMatch(n.index,r)}else this.addMatch(n.index,i)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function q4(e,t){let n=e.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1]}return null}function K4(e,t){return e.type&11?yc(e,t):e.type&4?$g(e,t):null}function Q4(e,t,n,i){return n===-1?K4(t,e):n===-2?Y4(e,t,i):va(e,e[we],n,t)}function Y4(e,t,n){if(n===zt)return yc(t,e);if(n===Ls)return $g(t,e);if(n===Ni)return Vx(t,e)}function Hx(e,t,n,i){let s=t[ur].queries[i];if(s.matches===null){let r=e.data,o=n.matches,a=[];for(let l=0;o!==null&&l<o.length;l+=2){let c=o[l];if(c<0)a.push(null);else{let u=r[c];a.push(Q4(t,u,o[l+1],n.metadata.read))}}s.matches=a}return s.matches}function Yw(e,t,n,i){let s=e.queries.getByIndex(n),r=s.matches;if(r!==null){let o=Hx(e,t,s,n);for(let a=0;a<r.length;a+=2){let l=r[a];if(l>0)i.push(o[a/2]);else{let c=r[a+1],u=t[-l];for(let h=Bn;h<u.length;h++){let f=u[h];f[jd]===f[tn]&&Yw(f[we],f,c,i)}if(u[fc]!==null){let h=u[fc];for(let f=0;f<h.length;f++){let g=h[f];Yw(g[we],g,c,i)}}}}}return i}function J4(e,t){return e[ur].queries[t].queryList}function X4(e,t,n){let i=new Iw((n&4)===4);return T3(e,t,i,i.destroy),(t[ur]??=new $w).queries.push(new zw(i))-1}function Z4(e,t,n){let i=jt();return i.firstCreatePass&&(tq(i,new qw(e,t,n),-1),(t&2)===2&&(i.staticViewQueries=!0)),X4(i,He(),t)}function eq(e){return e.split(",").map(t=>t.trim())}function tq(e,t,n){e.queries===null&&(e.queries=new Kw),e.queries.track(new Qw(t,n))}function JS(e,t){return e.queries.getByIndex(t)}function nq(e,t){let n=e[we],i=JS(n,t);return i.crossesNgTemplate?Yw(n,e,t,[]):Hx(n,e,i,t)}function Ux(e,t){Ea("NgSignals");let n=EM(e),i=n[zl];return t?.equal&&(i.equal=t.equal),n.set=s=>Iy(i,s),n.update=s=>DM(i,s),n.asReadonly=iq.bind(n),n}function iq(){let e=this[zl];if(e.readonlyFn===void 0){let t=()=>this();t[zl]=e,e.readonlyFn=t}return e.readonlyFn}function sq(e){return Object.getPrototypeOf(e.prototype).constructor}function ls(e){let t=sq(e.type),n=!0,i=[e];for(;t;){let s;if(fo(e))s=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new ue(903,!1);s=t.\u0275dir}if(s){if(n){i.push(s);let o=e;o.inputs=Yp(e.inputs),o.inputTransforms=Yp(e.inputTransforms),o.declaredInputs=Yp(e.declaredInputs),o.outputs=Yp(e.outputs);let a=s.hostBindings;a&&cq(e,a);let l=s.viewQuery,c=s.contentQueries;if(l&&aq(e,l),c&&lq(e,c),rq(e,s),Lj(e.outputs,s.outputs),fo(s)&&s.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(s.data.animation)}}let r=s.features;if(r)for(let o=0;o<r.length;o++){let a=r[o];a&&a.ngInherit&&a(e),a===ls&&(n=!1)}}t=Object.getPrototypeOf(t)}oq(i)}function rq(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let i=t.inputs[n];if(i!==void 0&&(e.inputs[n]=i,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let s=Array.isArray(i)?i[0]:i;if(!t.inputTransforms.hasOwnProperty(s))continue;e.inputTransforms??={},e.inputTransforms[s]=t.inputTransforms[s]}}}function oq(e){let t=0,n=null;for(let i=e.length-1;i>=0;i--){let s=e[i];s.hostVars=t+=s.hostVars,s.hostAttrs=Fd(s.hostAttrs,n=Fd(n,s.hostAttrs))}}function Yp(e){return e===uc?{}:e===Ln?[]:e}function aq(e,t){let n=e.viewQuery;n?e.viewQuery=(i,s)=>{t(i,s),n(i,s)}:e.viewQuery=t}function lq(e,t){let n=e.contentQueries;n?e.contentQueries=(i,s,r)=>{t(i,s,r),n(i,s,r)}:e.contentQueries=t}function cq(e,t){let n=e.hostBindings;n?e.hostBindings=(i,s)=>{t(i,s),n(i,s)}:e.hostBindings=t}var go=class{},Gd=class{};var Jw=class extends go{constructor(t,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new _g(this);let s=YP(t);this._bootstrapComponents=ex(s.bootstrap),this._r3Injector=LF(t,n,[{provide:go,useValue:this},{provide:Sc,useValue:this.componentFactoryResolver},...i],Vn(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Xw=class extends Gd{constructor(t){super(),this.moduleType=t}create(t){return new Jw(this.moduleType,t,[])}};var bg=class extends go{constructor(t){super(),this.componentFactoryResolver=new _g(this),this.instance=null;let n=new xd([...t.providers,{provide:go,useValue:this},{provide:Sc,useValue:this.componentFactoryResolver}],t.parent||Pg(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function XS(e,t,n=null){return new bg({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var qd=(()=>{let t=class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new gt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Wx(e){return dq(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function uq(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),i;for(;!(i=n.next()).done;)t(i.value)}}function dq(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function hq(e,t,n){return e[t]=n}function Co(e,t,n){let i=e[t];return Object.is(i,n)?!1:(e[t]=n,!0)}function Kd(e){return(e.flags&32)===32}function fq(e,t,n,i,s,r,o,a,l){let c=t.consts,u=wc(t,e,4,o||null,pc(c,a));zS(t,n,u,pc(c,l)),Ng(t,u);let h=u.tView=jS(2,u,i,s,r,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return t.queries!==null&&(t.queries.template(t,u),h.queries=t.queries.embeddedTView(u)),u}function Ct(e,t,n,i,s,r,o,a){let l=He(),c=jt(),u=e+xt,h=c.firstCreatePass?fq(u,c,l,t,n,i,s,r,o):c.data[u];wa(h,!1);let f=jx(c,l,h,e);Og()&&Ug(c,l,f,h),po(f,l);let g=wx(f,l,f,h);return l[u]=g,zg(l,g),W4(g,h,l),xg(h)&&US(c,l,h),o!=null&&WS(l,h,a),Ct}var jx=zx;function zx(e,t,n,i){return Bs(!0),t[at].createComment("")}function pq(e,t,n,i){let s=t[xi],r=!s||Cc()||Kd(n)||Bg(s,i);if(Bs(r),r)return zx(e,t,n,i);let o=s.data[V$]?.[i]??null;o!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=o);let a=qg(s,e,t,n);Vg(s,i,a);let l=xS(s,i);return Kg(l,a)}function gq(){jx=pq}function Da(e,t,n,i){let s=He(),r=$d();if(Co(s,r,t)){let o=jt(),a=RS();U3(a,s,e,t,n,i)}return Da}function mq(e,t,n,i){return Co(e,$d(),n)?t+uS(n)+i:Cr}function Jp(e,t){return e<<17|t<<2}function ya(e){return e>>17&32767}function vq(e){return(e&2)==2}function Cq(e,t){return e&131071|t<<17}function Zw(e){return e|2}function mc(e){return(e&131068)>>2}function aw(e,t){return e&-131069|t<<2}function yq(e){return(e&1)===1}function eS(e){return e|1}function wq(e,t,n,i,s,r){let o=r?t.classBindings:t.styleBindings,a=ya(o),l=mc(o);e[i]=n;let c=!1,u;if(Array.isArray(n)){let h=n;u=h[1],(u===null||Wd(h,u)>0)&&(c=!0)}else u=n;if(s)if(l!==0){let f=ya(e[a+1]);e[i+1]=Jp(f,a),f!==0&&(e[f+1]=aw(e[f+1],i)),e[a+1]=Cq(e[a+1],i)}else e[i+1]=Jp(a,0),a!==0&&(e[a+1]=aw(e[a+1],i)),a=i;else e[i+1]=Jp(l,0),a===0?a=i:e[l+1]=aw(e[l+1],i),l=i;c&&(e[i+1]=Zw(e[i+1])),bP(e,u,i,!0),bP(e,u,i,!1),Sq(t,u,e,i,r),o=Jp(a,l),r?t.classBindings=o:t.styleBindings=o}function Sq(e,t,n,i,s){let r=s?e.residualClasses:e.residualStyles;r!=null&&typeof t=="string"&&Wd(r,t)>=0&&(n[i+1]=eS(n[i+1]))}function bP(e,t,n,i){let s=e[n+1],r=t===null,o=i?ya(s):mc(s),a=!1;for(;o!==0&&(a===!1||r);){let l=e[o],c=e[o+1];_q(l,t)&&(a=!0,e[o+1]=i?eS(c):Zw(c)),o=i?ya(c):mc(c)}a&&(e[n+1]=i?Zw(s):eS(s))}function _q(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Wd(e,t)>=0:!1}var rs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function bq(e){return e.substring(rs.key,rs.keyEnd)}function Eq(e){return Dq(e),$x(e,qx(e,0,rs.textEnd))}function $x(e,t){let n=rs.textEnd;return n===t?-1:(t=rs.keyEnd=Rq(e,rs.key=t,n),qx(e,t,n))}function Dq(e){rs.key=0,rs.keyEnd=0,rs.value=0,rs.valueEnd=0,rs.textEnd=e.length}function qx(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function Rq(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}function _e(e,t,n){let i=He(),s=$d();if(Co(i,s,t)){let r=jt(),o=RS();vx(r,o,i,e,t,i[at],n,!1)}return _e}function tS(e,t,n,i,s){let r=t.inputs,o=s?"class":"style";$S(e,n,r[o],o,i)}function Ra(e,t,n){return Kx(e,t,n,!1),Ra}function yo(e,t){return Kx(e,t,null,!0),yo}function ki(e){Iq(Oq,Tq,e,!0)}function Tq(e,t){for(let n=Eq(t);n>=0;n=$x(t,n))fS(e,bq(t),!0)}function Kx(e,t,n,i){let s=He(),r=jt(),o=CF(2);if(r.firstUpdatePass&&Yx(r,e,o,i),t!==Cr&&Co(s,o,t)){let a=r.data[Sa()];Jx(r,a,s,s[at],e,s[o+1]=kq(t,n),i,o)}}function Iq(e,t,n,i){let s=jt(),r=CF(2);s.firstUpdatePass&&Yx(s,null,r,i);let o=He();if(n!==Cr&&Co(o,r,n)){let a=s.data[Sa()];if(Xx(a,i)&&!Qx(s,r)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(n=hw(l,n||"")),tS(s,a,o,n,i)}else Nq(s,a,o,o[at],o[r+1],o[r+1]=xq(e,t,n),i,r)}}function Qx(e,t){return t>=e.expandoStartIndex}function Yx(e,t,n,i){let s=e.data;if(s[n+1]===null){let r=s[Sa()],o=Qx(e,n);Xx(r,i)&&t===null&&!o&&(t=!1),t=Aq(s,r,t,i),wq(s,r,t,n,o,i)}}function Aq(e,t,n,i){let s=o$(e),r=i?t.residualClasses:t.residualStyles;if(s===null)(i?t.classBindings:t.styleBindings)===0&&(n=lw(null,e,t,n,i),n=Hd(n,t.attrs,i),r=null);else{let o=t.directiveStylingLast;if(o===-1||e[o]!==s)if(n=lw(s,e,t,n,i),r===null){let l=Mq(e,t,i);l!==void 0&&Array.isArray(l)&&(l=lw(null,e,t,l[1],i),l=Hd(l,t.attrs,i),Pq(e,t,i,l))}else r=Fq(e,t,i)}return r!==void 0&&(i?t.residualClasses=r:t.residualStyles=r),n}function Mq(e,t,n){let i=n?t.classBindings:t.styleBindings;if(mc(i)!==0)return e[ya(i)]}function Pq(e,t,n,i){let s=n?t.classBindings:t.styleBindings;e[ya(s)]=i}function Fq(e,t,n){let i,s=t.directiveEnd;for(let r=1+t.directiveStylingLast;r<s;r++){let o=e[r].hostAttrs;i=Hd(i,o,n)}return Hd(i,t.attrs,n)}function lw(e,t,n,i,s){let r=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(r=t[a],i=Hd(i,r.hostAttrs,s),r!==e);)a++;return e!==null&&(n.directiveStylingLast=a),i}function Hd(e,t,n){let i=n?1:2,s=-1;if(t!==null)for(let r=0;r<t.length;r++){let o=t[r];typeof o=="number"?s=o:s===i&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),fS(e,o,n?!0:t[++r]))}return e===void 0?null:e}function xq(e,t,n){if(n==null||n==="")return Ln;let i=[],s=Gg(n);if(Array.isArray(s))for(let r=0;r<s.length;r++)e(i,s[r],!0);else if(typeof s=="object")for(let r in s)s.hasOwnProperty(r)&&e(i,r,s[r]);else typeof s=="string"&&t(i,s);return i}function Oq(e,t,n){let i=String(t);i!==""&&!i.includes(" ")&&fS(e,i,n)}function Nq(e,t,n,i,s,r,o,a){s===Cr&&(s=Ln);let l=0,c=0,u=0<s.length?s[0]:null,h=0<r.length?r[0]:null;for(;u!==null||h!==null;){let f=l<s.length?s[l+1]:void 0,g=c<r.length?r[c+1]:void 0,v=null,y;u===h?(l+=2,c+=2,f!==g&&(v=h,y=g)):h===null||u!==null&&u<h?(l+=2,v=u):(c+=2,v=h,y=g),v!==null&&Jx(e,t,n,i,v,y,o,a),u=l<s.length?s[l]:null,h=c<r.length?r[c]:null}}function Jx(e,t,n,i,s,r,o,a){if(!(t.type&3))return;let l=e.data,c=l[a+1],u=yq(c)?EP(l,t,n,s,mc(c),o):void 0;if(!Eg(u)){Eg(r)||vq(c)&&(r=EP(l,null,n,s,a,o));let h=dF(Sa(),n);C3(i,o,h,s,r)}}function EP(e,t,n,i,s,r){let o=t===null,a;for(;s>0;){let l=e[s],c=Array.isArray(l),u=c?l[1]:l,h=u===null,f=n[s+1];f===Cr&&(f=h?Ln:void 0);let g=h?Qy(f,i):u===i?f:void 0;if(c&&!Eg(g)&&(g=Qy(l,i)),Eg(g)&&(a=g,o))return a;let v=e[s+1];s=o?ya(v):mc(v)}if(t!==null){let l=r?t.residualClasses:t.residualStyles;l!=null&&(a=Qy(l,i))}return a}function Eg(e){return e!==void 0}function kq(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Vn(Gg(e)))),e}function Xx(e,t){return(e.flags&(t?8:16))!==0}function Qg(e,t,n){Ea("NgControlFlow");let i=He(),s=$d(),r=Lq(i,xt+e),o=0;if(Co(i,s,t)){let a=$e(null);try{if(J3(r,o),t!==-1){let l=Vq(i[we],xt+t),c=Vw(r,l.tView.ssrId),u=Dx(i,l,n,{dehydratedView:c});Rx(r,u,o,kw(l,c))}}finally{$e(a)}}else{let a=Y3(r,o);a!==void 0&&(a[Oi]=n)}}function Lq(e,t){return e[t]}function Vq(e,t){return CS(e,t)}function Bq(e,t,n,i,s,r){let o=t.consts,a=pc(o,s),l=wc(t,e,2,i,a);return zS(t,n,l,pc(o,r)),l.attrs!==null&&Sg(l,l.attrs,!1),l.mergedAttrs!==null&&Sg(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function Y(e,t,n,i){let s=He(),r=jt(),o=xt+e,a=s[at],l=r.firstCreatePass?Bq(o,r,s,t,n,i):r.data[o],c=Zx(r,s,l,a,t,e);s[o]=c;let u=xg(l);return wa(l,!0),ux(a,c,l),!Kd(l)&&Og()&&Ug(r,s,c,l),Kz()===0&&po(c,s),Qz(),u&&(US(r,s,l),HS(r,l,s)),i!==null&&WS(s,l),Y}function J(){let e=wi();SS()?_S():(e=e.parent,wa(e,!1));let t=e;Jz(t)&&Zz(),Yz();let n=jt();return n.firstCreatePass&&(Ng(n,e),vS(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&h$(t)&&tS(n,t,He(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&f$(t)&&tS(n,t,He(),t.stylesWithoutHost,!1),J}function de(e,t,n,i){return Y(e,t,n,i),J(),de}var Zx=(e,t,n,i,s,r)=>(Bs(!0),Hg(i,s,DF()));function Gq(e,t,n,i,s,r){let o=t[xi],a=!o||Cc()||Kd(n)||Bg(o,r);if(Bs(a),a)return Hg(i,s,DF());let l=qg(o,e,t,n);return JF(o,r)&&Vg(o,r,l.nextSibling),o&&(BF(n)||GF(l))&&zd(n)&&(Xz(n),ax(l)),l}function Hq(){Zx=Gq}function Uq(e,t,n,i,s){let r=t.consts,o=pc(r,i),a=wc(t,e,8,"ng-container",o);o!==null&&Sg(a,o,!0);let l=pc(r,s);return zS(t,n,a,l),t.queries!==null&&t.queries.elementStart(t,a),a}function yr(e,t,n){let i=He(),s=jt(),r=e+xt,o=s.firstCreatePass?Uq(r,s,i,t,n):s.data[r];wa(o,!0);let a=e1(s,i,o,e);return i[r]=a,Og()&&Ug(s,i,a,o),po(a,i),xg(o)&&(US(s,i,o),HS(s,o,i)),n!=null&&WS(i,o),yr}function wr(){let e=wi(),t=jt();return SS()?_S():(e=e.parent,wa(e,!1)),t.firstCreatePass&&(Ng(t,e),vS(e)&&t.queries.elementEnd(e)),wr}var e1=(e,t,n,i)=>(Bs(!0),kS(t[at],""));function Wq(e,t,n,i){let s,r=t[xi],o=!r||Cc()||Kd(n);if(Bs(o),o)return kS(t[at],"");let a=qg(r,e,t,n),l=Q$(r,i);return Vg(r,i,a),s=Kg(l,a),s}function jq(){e1=Wq}function ii(){return He()}function ZS(e,t,n){let i=He(),s=$d();if(Co(i,s,t)){let r=jt(),o=RS();vx(r,o,i,e,t,i[at],n,!0)}return ZS}var Dg="en-US";var zq=Dg;function $q(e){typeof e=="string"&&(zq=e.toLowerCase().replace(/_/g,"-"))}function t1(e,t,n){let i=e[at];switch(n){case Node.COMMENT_NODE:return kS(i,t);case Node.TEXT_NODE:return NS(i,t);case Node.ELEMENT_NODE:return Hg(i,t,null)}}var qq=(e,t,n,i)=>(Bs(!0),t1(e,n,i));function Kq(e,t,n,i){return Bs(!0),t1(e,n,i)}function Qq(){qq=Kq}function st(e,t,n,i){let s=He(),r=jt(),o=wi();return Jq(r,s,s[at],o,e,t,i),st}function Yq(e,t,n,i){let s=e.cleanup;if(s!=null)for(let r=0;r<s.length-1;r+=2){let o=s[r];if(o===n&&s[r+1]===i){let a=t[Od],l=s[r+2];return a.length>l?a[l]:null}typeof o=="string"&&(r+=2)}return null}function Jq(e,t,n,i,s,r,o){let a=xg(i),c=e.firstCreatePass&&bx(e),u=t[Oi],h=_x(t),f=!0;if(i.type&3||o){let y=yi(i,t),C=o?o(y):y,E=h.length,I=o?x=>o(as(x[i.index])):i.index,T=null;if(!o&&a&&(T=Yq(e,t,s,i.index)),T!==null){let x=T.__ngLastListenerFn__||T;x.__ngNextListenerFn__=r,T.__ngLastListenerFn__=r,f=!1}else{r=RP(i,t,u,r,!1);let x=n.listen(C,s,r);h.push(r,x),c&&c.push(s,I,E,E+1)}}else r=RP(i,t,u,r,!1);let g=i.outputs,v;if(f&&g!==null&&(v=g[s])){let y=v.length;if(y)for(let C=0;C<y;C+=2){let E=v[C],I=v[C+1],z=t[E][I].subscribe(r),V=h.length;h.push(r,z),c&&c.push(s,i.index,V,-(V+1))}}}function DP(e,t,n,i){let s=$e(null);try{return xs(6,t,n),n(i)!==!1}catch(r){return Ex(e,r),!1}finally{xs(7,t,n),$e(s)}}function RP(e,t,n,i,s){return function r(o){if(o===Function)return i;let a=e.componentOffset>-1?vo(e.index,t):t;KS(a);let l=DP(t,n,i,o),c=r.__ngNextListenerFn__;for(;c;)l=DP(t,n,c,o)&&l,c=c.__ngNextListenerFn__;return s&&l===!1&&o.preventDefault(),l}}function yt(e=1){return l$(e)}function Xq(e,t){let n=null,i=pz(e);for(let s=0;s<t.length;s++){let r=t[s];if(r==="*"){n=s;continue}if(i===null?zP(e,r,!0):vz(i,r))return s}return n}function e_(e){let t=He()[gi][Ci];if(!t.projection){let n=e?e.length:1,i=t.projection=sz(n,null),s=i.slice(),r=t.child;for(;r!==null;){let o=e?Xq(r,e):0;o!==null&&(s[o]?s[o].projectionNext=r:i[o]=r,s[o]=r),r=r.next}}}function t_(e,t=0,n){let i=He(),s=jt(),r=wc(s,xt+e,16,null,n||null);r.projection===null&&(r.projection=t),_S(),(!i[xi]||Cc())&&(r.flags&32)!==32&&m3(s,i,r)}function Yg(e,t,n){Z4(e,t,n)}function Qd(e){let t=He(),n=jt(),i=yF();bS(i+1);let s=JS(n,i);if(e.dirty&&Wz(t)===((s.metadata.flags&2)===2)){if(s.matches===null)e.reset([]);else{let r=nq(t,i);e.reset(r,D$),e.notifyOnChanges()}return!0}return!1}function Yd(){return J4(He(),yF())}function Zq(e,t,n,i){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=i}function n_(e){let t=t$();return hF(t,xt+e)}function Ae(e,t=""){let n=He(),i=jt(),s=e+xt,r=i.firstCreatePass?wc(i,s,1,t,null):i.data[s],o=n1(i,n,r,t,e);n[s]=o,Og()&&Ug(i,n,o,r),wa(r,!1)}var n1=(e,t,n,i,s)=>(Bs(!0),NS(t[at],i));function e5(e,t,n,i,s){let r=t[xi],o=!r||Cc()||Kd(n)||Bg(r,s);return Bs(o),o?NS(t[at],i):qg(r,e,t,n)}function t5(){n1=e5}function Ta(e){return Hn("",e,""),Ta}function Hn(e,t,n){let i=He(),s=mq(i,e,t,n);return s!==Cr&&$3(i,Sa(),s),Hn}function n5(e,t,n){let i=jt();if(i.firstCreatePass){let s=fo(e);nS(n,i.data,i.blueprint,s,!0),nS(t,i.data,i.blueprint,s,!1)}}function nS(e,t,n,i,s){if(e=kn(e),Array.isArray(e))for(let r=0;r<e.length;r++)nS(e[r],t,n,i,s);else{let r=jt(),o=He(),a=wi(),l=dc(e)?e:kn(e.provide),c=nF(e),u=a.providerIndexes&1048575,h=a.directiveStart,f=a.providerIndexes>>20;if(dc(e)||!e.multi){let g=new ma(c,s,ne),v=uw(l,t,s?u:u+f,h);v===-1?(Ew(fg(a,o),r,l),cw(r,e,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),n.push(g),o.push(g)):(n[v]=g,o[v]=g)}else{let g=uw(l,t,u+f,h),v=uw(l,t,u,u+f),y=g>=0&&n[g],C=v>=0&&n[v];if(s&&!C||!s&&!y){Ew(fg(a,o),r,l);let E=r5(s?s5:i5,n.length,s,i,c);!s&&C&&(n[v].providerFactory=E),cw(r,e,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),n.push(E),o.push(E)}else{let E=i1(n[s?v:g],c,!s&&i);cw(r,e,g>-1?g:v,E)}!s&&i&&C&&n[v].componentProviders++}}}function cw(e,t,n,i){let s=dc(t),r=Iz(t);if(s||r){let l=(r?kn(t.useClass):t).prototype.ngOnDestroy;if(l){let c=e.destroyHooks||(e.destroyHooks=[]);if(!s&&t.multi){let u=c.indexOf(n);u===-1?c.push(n,[i,l]):c[u+1].push(i,l)}else c.push(n,l)}}}function i1(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function uw(e,t,n,i){for(let s=n;s<i;s++)if(t[s]===e)return s;return-1}function i5(e,t,n,i){return iS(this.multi,[])}function s5(e,t,n,i){let s=this.multi,r;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=va(n,n[we],this.providerFactory.index,i);r=a.slice(0,o),iS(s,r);for(let l=o;l<a.length;l++)r.push(a[l])}else r=[],iS(s,r);return r}function iS(e,t){for(let n=0;n<e.length;n++){let i=e[n];t.push(i())}return t}function r5(e,t,n,i,s){let r=new ma(e,n,ne);return r.multi=[],r.index=t,r.componentProviders=0,i1(r,s,i&&!n),r}function cs(e,t=[]){return n=>{n.providersResolver=(i,s)=>n5(i,s?s(e):e,t)}}var o5=(()=>{let t=class t{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let s=ZP(!1,i.type),r=s.length>0?XS([s],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,r)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};t.\u0275prov=ee({token:t,providedIn:"environment",factory:()=>new t(K(Gn))});let e=t;return e})();function Fe(e){Ea("NgStandalone"),e.getStandaloneInjector=t=>t.get(o5).getOrCreateStandaloneInjector(e)}function i_(e,t,n,i){return s1(He(),vF(),e,t,n,i)}function a5(e,t){let n=e[t];return n===Cr?void 0:n}function s1(e,t,n,i,s,r){let o=t+n;return Co(e,o,s)?hq(e,o+1,r?i.call(r,s):i(s)):a5(e,o+1)}function s_(e,t){let n=jt(),i,s=e+xt;n.firstCreatePass?(i=l5(t,n.pipeRegistry),n.data[s]=i,i.onDestroy&&(n.destroyHooks??=[]).push(s,i.onDestroy)):i=n.data[s];let r=i.factory||(i.factory=ha(i.type,!0)),o,a=ni(ne);try{let l=hg(!1),c=r();return hg(l),Zq(n,He(),s,c),c}finally{ni(a)}}function l5(e,t){if(t)for(let n=t.length-1;n>=0;n--){let i=t[n];if(e===i.name)return i}}function r_(e,t,n){let i=e+xt,s=He(),r=hF(s,i);return c5(s,i)?s1(s,vF(),t,r.transform,n,r):r.transform(n)}function c5(e,t){return e[we].data[t].pure}function Jd(e,t){return $g(e,t)}var pr=class{constructor(t){this.full=t;let n=t.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},o_=new pr("17.3.11"),Jg=(()=>{let t=class t{log(i){console.log(i)}warn(i){console.warn(i)}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"platform"});let e=t;return e})();var r1=new Q("");function Ia(e){return!!e&&typeof e.then=="function"}function o1(e){return!!e&&typeof e.subscribe=="function"}var wo=new Q(""),a1=(()=>{let t=class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,s)=>{this.resolve=i,this.reject=s}),this.appInits=U(wo,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let r of this.appInits){let o=r();if(Ia(o))i.push(o);else if(o1(o)){let a=new Promise((l,c)=>{o.subscribe({complete:l,error:c})});i.push(a)}}let s=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{s()}).catch(r=>{this.reject(r)}),i.length===0&&s(),this.initialized=!0}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),_c=new Q("");function u5(){bM(()=>{throw new ue(600,!1)})}function d5(e){return e.isBoundToModule}function h5(e,t,n){try{let i=n();return Ia(i)?i.catch(s=>{throw t.runOutsideAngular(()=>e.handleError(s)),s}):i}catch(i){throw t.runOutsideAngular(()=>e.handleError(i)),i}}var us=(()=>{let t=class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=U(VF),this.afterRenderEffectManager=U(kx),this.externalTestViews=new Set,this.beforeRender=new Le,this.afterTick=new Le,this.componentTypes=[],this.components=[],this.isStable=U(qd).hasPendingTasks.pipe(oe(i=>!i)),this._injector=U(Gn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,s){let r=i instanceof wg;if(!this._injector.get(a1).done){let g=!r&&QP(i),v=!1;throw new ue(405,v)}let a;r?a=i:a=this._injector.get(Sc).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let l=d5(a)?void 0:this._injector.get(go),c=s||a.selector,u=a.create(Ue.NULL,[],c,l),h=u.location.nativeElement,f=u.injector.get(r1,null);return f?.registerApplication(h),u.onDestroy(()=>{this.detachView(u.hostView),dw(this.components,u),f?.unregisterApplication(h)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new ue(101,!1);let s=$e(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(r){this.internalErrorHandler(r)}finally{this.afterTick.next(),this._runningTick=!1,$e(s)}}detectChangesInAttachedViews(i){let s=0,r=this.afterRenderEffectManager;for(;;){if(s===Ix)throw new ue(103,!1);if(i){let o=s===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:l}of this._views)f5(a,o,l)}if(s++,r.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>sS(o))&&(r.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>sS(o))))break}}attachView(i){let s=i;this._views.push(s),s.attachToAppRef(this)}detachView(i){let s=i;dw(this._views,s),s.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let s=this._injector.get(_c,[]);[...this._bootstrapListeners,...s].forEach(r=>r(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>dw(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new ue(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function dw(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}var Xp;function a_(e){Xp??=new WeakMap;let t=Xp.get(e);if(t)return t;let n=e.isStable.pipe(fi(i=>i)).toPromise().then(()=>{});return Xp.set(e,n),e.onDestroy(()=>Xp?.delete(e)),n}function f5(e,t,n){!t&&!sS(e)||p5(e,n,t)}function sS(e){return wS(e)}function p5(e,t,n){let i;n?(i=0,e[Ce]|=1024):e[Ce]&64?i=0:i=1,Ax(e,t,i)}var rS=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},l_=(()=>{let t=class t{compileModuleSync(i){return new Xw(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let s=this.compileModuleSync(i),r=YP(i),o=ex(r.declarations).reduce((a,l)=>{let c=ho(l);return c&&a.push(new gc(c)),a},[]);return new rS(s,o)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var g5=(()=>{let t=class t{constructor(){this.zone=U(le),this.applicationRef=U(us)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function m5(e){return[{provide:le,useFactory:e},{provide:fa,multi:!0,useFactory:()=>{let t=U(g5,{optional:!0});return()=>t.initialize()}},{provide:fa,multi:!0,useFactory:()=>{let t=U(w5);return()=>{t.initialize()}}},{provide:VF,useFactory:v5}]}function v5(){let e=U(le),t=U(hr);return n=>e.runOutsideAngular(()=>t.handleError(n))}function C5(e){let t=m5(()=>new le(y5(e)));return ht([[],t])}function y5(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var w5=(()=>{let t=class t{constructor(){this.subscription=new vt,this.initialized=!1,this.zone=U(le),this.pendingTasks=U(qd)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{le.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{le.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function S5(){return typeof $localize<"u"&&$localize.locale||Dg}var Xg=new Q("",{providedIn:"root",factory:()=>U(Xg,Me.Optional|Me.SkipSelf)||S5()});var l1=new Q("");var sg=null;function _5(e=[],t){return Ue.create({name:t,providers:[{provide:Mg,useValue:"platform"},{provide:l1,useValue:new Set([()=>sg=null])},...e]})}function b5(e=[]){if(sg)return sg;let t=_5(e);return sg=t,u5(),E5(t),t}function E5(e){e.get(AS,null)?.forEach(n=>n())}function c_(){return!1}var Sr=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=D5;let e=t;return e})();function D5(e){return R5(wi(),He(),(e&16)===16)}function R5(e,t,n){if(zd(e)&&!n){let i=vo(e.index,t);return new Ca(i,i)}else if(e.type&47){let i=t[gi];return new Ca(i,t)}return null}var oS=class{constructor(){}supports(t){return Wx(t)}create(t){return new aS(t)}},T5=(e,t)=>t,aS=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||T5}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,i=this._removalsHead,s=0,r=null;for(;n||i;){let o=!i||n&&n.currentIndex<TP(i,s,r)?n:i,a=TP(o,s,r),l=o.currentIndex;if(o===i)s--,i=i._nextRemoved;else if(n=n._next,o.previousIndex==null)s++;else{r||(r=[]);let c=a-s,u=l-s;if(c!=u){for(let f=0;f<c;f++){let g=f<r.length?r[f]:r[f]=0,v=g+f;u<=v&&v<c&&(r[f]=g+1)}let h=o.previousIndex;r[h]=u-c}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!Wx(t))throw new ue(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,i=!1,s,r,o;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)r=t[a],o=this._trackByFn(a,r),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,r,o,a),i=!0):(i&&(n=this._verifyReinsertion(n,r,o,a)),Object.is(n.item,r)||this._addIdentityChange(n,r)),n=n._next}else s=0,uq(t,a=>{o=this._trackByFn(s,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,s),i=!0):(i&&(n=this._verifyReinsertion(n,a,o,s)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,s++}),this.length=s;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,i,s){let r;return t===null?r=this._itTail:(r=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,r,s)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,s),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,r,s)):t=this._addAfter(new lS(n,i),r,s)),t}_verifyReinsertion(t,n,i,s){let r=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return r!==null?t=this._reinsertAfter(r,t._prev,s):t.currentIndex!=s&&(t.currentIndex=s,this._addToMoves(t,s)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let s=t._prevRemoved,r=t._nextRemoved;return s===null?this._removalsHead=r:s._nextRemoved=r,r===null?this._removalsTail=s:r._prevRemoved=s,this._insertAfter(t,n,i),this._addToMoves(t,i),t}_moveAfter(t,n,i){return this._unlink(t),this._insertAfter(t,n,i),this._addToMoves(t,i),t}_addAfter(t,n,i){return this._insertAfter(t,n,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,i){let s=n===null?this._itHead:n._next;return t._next=s,t._prev=n,s===null?this._itTail=t:s._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new Rg),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,i=t._next;return n===null?this._itHead=i:n._next=i,i===null?this._itTail=n:i._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Rg),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},lS=class{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},cS=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let i;for(i=this._head;i!==null;i=i._nextDup)if((n===null||n<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let n=t._prevDup,i=t._nextDup;return n===null?this._head=i:n._nextDup=i,i===null?this._tail=n:i._prevDup=n,this._head===null}},Rg=class{constructor(){this.map=new Map}put(t){let n=t.trackById,i=this.map.get(n);i||(i=new cS,this.map.set(n,i)),i.add(t)}get(t,n){let i=t,s=this.map.get(i);return s?s.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function TP(e,t,n){let i=e.previousIndex;if(i===null)return i;let s=0;return n&&i<n.length&&(s=n[i]),i+t+s}function IP(){return new u_([new oS])}var u_=(()=>{let t=class t{constructor(i){this.factories=i}static create(i,s){if(s!=null){let r=s.factories.slice();i=i.concat(r)}return new t(i)}static extend(i){return{provide:t,useFactory:s=>t.create(i,s||IP()),deps:[[t,new BP,new Te]]}}find(i){let s=this.factories.find(r=>r.supports(i));if(s!=null)return s;throw new ue(901,!1)}};t.\u0275prov=ee({token:t,providedIn:"root",factory:IP});let e=t;return e})();function c1(e){try{let{rootComponent:t,appProviders:n,platformProviders:i}=e,s=b5(i),r=[C5(),...n||[]],a=new bg({providers:r,parent:s,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(le);return l.run(()=>{a.resolveInjectorInitializers();let c=a.get(hr,null),u;l.runOutsideAngular(()=>{u=l.onError.subscribe({next:g=>{c.handleError(g)}})});let h=()=>a.destroy(),f=s.get(l1);return f.add(h),a.onDestroy(()=>{u.unsubscribe(),f.delete(h)}),h5(c,l,()=>{let g=a.get(a1);return g.runInitializers(),g.donePromise.then(()=>{let v=a.get(Xg,Dg);$q(v||Dg);let y=a.get(us);return t!==void 0&&y.bootstrap(t),y})})})}catch(t){return Promise.reject(t)}}var AP=!1,I5=!1;function A5(){AP||(AP=!0,z$(),Hq(),t5(),jq(),gq(),$4(),_4(),R3(),Qq())}function M5(e,t){return a_(e)}function u1(){return ht([{provide:Kp,useFactory:()=>{let e=!0;return Qp()&&(e=!!U(_a,{optional:!0})?.get(QF,null)),e&&Ea("NgHydration"),e}},{provide:fa,useValue:()=>{I5=!!U(Y$,{optional:!0}),Qp()&&U(Kp)&&(P5(),A5())},multi:!0},{provide:ZF,useFactory:()=>Qp()&&U(Kp)},{provide:_c,useFactory:()=>{if(Qp()&&U(Kp)){let e=U(us),t=U(Ue);return()=>{M5(e,t).then(()=>{f4(e)})}}return()=>{}},multi:!0}])}function P5(){let e=kg(),t;for(let n of e.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===W$){t=n;break}if(!t)throw new ue(-507,!1)}function Zg(e,t){let n=ho(e),i=t.elementInjector||Pg();return new gc(n).create(i,t.projectableNodes,t.hostElement,t.environmentInjector)}var C1=null;function _r(){return C1}function y1(e){C1??=e}var em=class{};var Ot=new Q(""),w1=(()=>{let t=class t{historyGo(i){throw new Error("")}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:()=>U(x5),providedIn:"platform"});let e=t;return e})();var x5=(()=>{let t=class t extends w1{constructor(){super(),this._doc=U(Ot),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return _r().getBaseHref(this._doc)}onPopState(i){let s=_r().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",i,!1),()=>s.removeEventListener("popstate",i)}onHashChange(i){let s=_r().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",i,!1),()=>s.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,s,r){this._history.pushState(i,s,r)}replaceState(i,s,r){this._history.replaceState(i,s,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:()=>new t,providedIn:"platform"});let e=t;return e})();function S1(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function d1(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,i=n-(e[n-1]==="/"?1:0);return e.slice(0,i)+e.slice(n)}function Aa(e){return e&&e[0]!=="?"?"?"+e:e}var nm=(()=>{let t=class t{historyGo(i){throw new Error("")}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:()=>U(_1),providedIn:"root"});let e=t;return e})(),O5=new Q(""),_1=(()=>{let t=class t extends nm{constructor(i,s){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=s??this._platformLocation.getBaseHrefFromDOM()??U(Ot).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return S1(this._baseHref,i)}path(i=!1){let s=this._platformLocation.pathname+Aa(this._platformLocation.search),r=this._platformLocation.hash;return r&&i?`${s}${r}`:s}pushState(i,s,r,o){let a=this.prepareExternalUrl(r+Aa(o));this._platformLocation.pushState(i,s,a)}replaceState(i,s,r,o){let a=this.prepareExternalUrl(r+Aa(o));this._platformLocation.replaceState(i,s,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};t.\u0275fac=function(s){return new(s||t)(K(w1),K(O5,8))},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Xd=(()=>{let t=class t{constructor(i){this._subject=new H,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let s=this._locationStrategy.getBaseHref();this._basePath=L5(d1(h1(s))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,s=""){return this.path()==this.normalize(i+Aa(s))}normalize(i){return t.stripTrailingSlash(k5(this._basePath,h1(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,s="",r=null){this._locationStrategy.pushState(r,"",i,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Aa(s)),r)}replaceState(i,s="",r=null){this._locationStrategy.replaceState(r,"",i,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Aa(s)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)}),()=>{let s=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(s,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",s){this._urlChangeListeners.forEach(r=>r(i,s))}subscribe(i,s,r){return this._subject.subscribe({next:i,error:s,complete:r})}};t.normalizeQueryParams=Aa,t.joinWithSlash=S1,t.stripTrailingSlash=d1,t.\u0275fac=function(s){return new(s||t)(K(nm))},t.\u0275prov=ee({token:t,factory:()=>N5(),providedIn:"root"});let e=t;return e})();function N5(){return new Xd(K(nm))}function k5(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function h1(e){return e.replace(/\/index.html$/,"")}function L5(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}function p_(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let i=n.indexOf("="),[s,r]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(s.trim()===t)return decodeURIComponent(r)}return null}var d_=/\s+/,f1=[],b1=(()=>{let t=class t{constructor(i,s){this._ngEl=i,this._renderer=s,this.initialClasses=f1,this.stateMap=new Map}set klass(i){this.initialClasses=i!=null?i.trim().split(d_):f1}set ngClass(i){this.rawClass=typeof i=="string"?i.trim().split(d_):i}ngDoCheck(){for(let s of this.initialClasses)this._updateState(s,!0);let i=this.rawClass;if(Array.isArray(i)||i instanceof Set)for(let s of i)this._updateState(s,!0);else if(i!=null)for(let s of Object.keys(i))this._updateState(s,!!i[s]);this._applyStateDiff()}_updateState(i,s){let r=this.stateMap.get(i);r!==void 0?(r.enabled!==s&&(r.changed=!0,r.enabled=s),r.touched=!0):this.stateMap.set(i,{enabled:s,changed:!0,touched:!0})}_applyStateDiff(){for(let i of this.stateMap){let s=i[0],r=i[1];r.changed?(this._toggleClass(s,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(s,!1),this.stateMap.delete(s)),r.touched=!1}}_toggleClass(i,s){i=i.trim(),i.length>0&&i.split(d_).forEach(r=>{s?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}};t.\u0275fac=function(s){return new(s||t)(ne(zt),ne(ba))},t.\u0275dir=Mt({type:t,selectors:[["","ngClass",""]],inputs:{klass:[en.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let e=t;return e})();var h_=class{constructor(t,n,i,s){this.$implicit=t,this.ngForOf=n,this.index=i,this.count=s}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},So=(()=>{let t=class t{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,s,r){this._viewContainer=i,this._template=s,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let i=this._ngForOf;if(!this._differ&&i)if(0)try{}catch{}else this._differ=this._differs.find(i).create(this.ngForTrackBy)}if(this._differ){let i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){let s=this._viewContainer;i.forEachOperation((r,o,a)=>{if(r.previousIndex==null)s.createEmbeddedView(this._template,new h_(r.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)s.remove(o===null?void 0:o);else if(o!==null){let l=s.get(o);s.move(l,a),p1(l,r)}});for(let r=0,o=s.length;r<o;r++){let l=s.get(r).context;l.index=r,l.count=o,l.ngForOf=this._ngForOf}i.forEachIdentityChange(r=>{let o=s.get(r.currentIndex);p1(o,r)})}static ngTemplateContextGuard(i,s){return!0}};t.\u0275fac=function(s){return new(s||t)(ne(Ni),ne(Ls),ne(u_))},t.\u0275dir=Mt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let e=t;return e})();function p1(e,t){e.context.$implicit=t.item}var _o=(()=>{let t=class t{constructor(i,s){this._viewContainer=i,this._context=new f_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=s}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){g1("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){g1("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,s){return!0}};t.\u0275fac=function(s){return new(s||t)(ne(Ni),ne(Ls))},t.\u0275dir=Mt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let e=t;return e})(),f_=class{constructor(){this.$implicit=null,this.ngIf=null}};function g1(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${Vn(t)}'.`)}function V5(e,t){return new ue(2100,!1)}var B5=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,E1=(()=>{let t=class t{transform(i){if(i==null)return null;if(typeof i!="string")throw V5(t,i);return i.replace(B5,s=>s[0].toUpperCase()+s.slice(1).toLowerCase())}};t.\u0275fac=function(s){return new(s||t)},t.\u0275pipe=$P({name:"titlecase",type:t,pure:!0,standalone:!0});let e=t;return e})();var vn=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=vi({type:t}),t.\u0275inj=mi({});let e=t;return e})(),g_="browser",G5="server";function m_(e){return e===g_}function br(e){return e===G5}var tm=class{};var sm=class e{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let i=n.indexOf(":");if(i>0){let s=n.slice(0,i),r=s.toLowerCase(),o=n.slice(i+1).trim();this.maybeSetNormalizedName(s,r),this.headers.has(r)?this.headers.get(r).push(o):this.headers.set(r,[o])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,n);let s=(t.op==="a"?this.headers.get(n):void 0)||[];s.push(...i),this.headers.set(n,s);break;case"d":let r=t.value;if(!r)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>r.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(t,n){let i=(Array.isArray(n)?n:[n]).map(r=>r.toString()),s=t.toLowerCase();this.headers.set(s,i),this.maybeSetNormalizedName(t,s)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var F1=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(F1||{}),v_=class{constructor(t,n=x1.Ok,i="OK"){this.headers=t.headers||new sm,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}};var rm=class e extends v_{constructor(t={}){super(t),this.type=F1.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}};var x1=function(e){return e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Processing=102]="Processing",e[e.EarlyHints=103]="EarlyHints",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultiStatus=207]="MultiStatus",e[e.AlreadyReported=208]="AlreadyReported",e[e.ImUsed=226]="ImUsed",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.MisdirectedRequest=421]="MisdirectedRequest",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.TooEarly=425]="TooEarly",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",e}(x1||{});var U5=new Q("");var D1="b",R1="h",T1="s",I1="st",A1="u",M1="rt",im=new Q(""),W5=["GET","HEAD"];function j5(e,t){let h=U(im),{isCacheActive:n}=h,i=op(h,["isCacheActive"]),{transferCache:s,method:r}=e;if(!n||r==="POST"&&!i.includePostRequests&&!s||r!=="POST"&&!W5.includes(r)||s===!1||i.filter?.(e)===!1)return t(e);let o=U(_a),a=$5(e),l=o.get(a,null),c=i.includeHeaders;if(typeof s=="object"&&s.includeHeaders&&(c=s.includeHeaders),l){let{[D1]:f,[M1]:g,[R1]:v,[T1]:y,[I1]:C,[A1]:E}=l,I=f;switch(g){case"arraybuffer":I=new TextEncoder().encode(f).buffer;break;case"blob":I=new Blob([f]);break}let T=new sm(v);return Z(new rm({body:I,headers:T,status:y,statusText:C,url:E}))}let u=br(U(on));return t(e).pipe(dt(f=>{f instanceof rm&&u&&o.set(a,{[D1]:f.body,[R1]:z5(f.headers,c),[T1]:f.status,[I1]:f.statusText,[A1]:f.url||"",[M1]:e.responseType})}))}function z5(e,t){if(!t)return{};let n={};for(let i of t){let s=e.getAll(i);s!==null&&(n[i]=s)}return n}function P1(e){return[...e.keys()].sort().map(t=>`${t}=${e.getAll(t)}`).join("&")}function $5(e){let{params:t,method:n,responseType:i,url:s}=e,r=P1(t),o=e.serializeBody();o instanceof URLSearchParams?o=P1(o):typeof o!="string"&&(o="");let a=[n,i,s,o,r].join("|"),l=q5(a);return l}function q5(e){let t=0;for(let n of e)t=Math.imul(31,t)+n.charCodeAt(0)<<0;return t+=2147483648,t.toString()}function O1(e){return[{provide:im,useFactory:()=>(Ea("NgHttpTransferCache"),B({isCacheActive:!0},e))},{provide:U5,useValue:j5,multi:!0,deps:[_a,im]},{provide:_c,multi:!0,useFactory:()=>{let t=U(us),n=U(im);return()=>{a_(t).then(()=>{n.isCacheActive=!1})}}}]}var w_=class extends em{constructor(){super(...arguments),this.supportsDOMEvents=!0}},S_=class e extends w_{static makeCurrent(){y1(new e)}onAndCancel(t,n,i){return t.addEventListener(n,i),()=>{t.removeEventListener(n,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=K5();return n==null?null:Q5(n)}resetBaseElement(){Zd=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return p_(document.cookie,t)}},Zd=null;function K5(){return Zd=Zd||document.querySelector("base"),Zd?Zd.getAttribute("href"):null}function Q5(e){return new URL(e,document.baseURI).pathname}var Y5=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:t.\u0275fac});let e=t;return e})(),__=new Q(""),V1=(()=>{let t=class t{constructor(i,s){this._zone=s,this._eventNameToPlugin=new Map,i.forEach(r=>{r.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,s,r){return this._findPluginFor(s).addEventListener(i,s,r)}getZone(){return this._zone}_findPluginFor(i){let s=this._eventNameToPlugin.get(i);if(s)return s;if(s=this._plugins.find(o=>o.supports(i)),!s)throw new ue(5101,!1);return this._eventNameToPlugin.set(i,s),s}};t.\u0275fac=function(s){return new(s||t)(K(__),K(le))},t.\u0275prov=ee({token:t,factory:t.\u0275fac});let e=t;return e})(),om=class{constructor(t){this._doc=t}},C_="ng-app-id",B1=(()=>{let t=class t{constructor(i,s,r,o={}){this.doc=i,this.appId=s,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=br(o),this.resetHostNodes()}addStyles(i){for(let s of i)this.changeUsageCount(s,1)===1&&this.onStyleAdded(s)}removeStyles(i){for(let s of i)this.changeUsageCount(s,-1)<=0&&this.onStyleRemoved(s)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(s=>s.remove()),i.clear());for(let s of this.getAllStyles())this.onStyleRemoved(s);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let s of this.getAllStyles())this.addStyleToHost(i,s)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let s of this.hostNodes)this.addStyleToHost(s,i)}onStyleRemoved(i){let s=this.styleRef;s.get(i)?.elements?.forEach(r=>r.remove()),s.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${C_}="${this.appId}"]`);if(i?.length){let s=new Map;return i.forEach(r=>{r.textContent!=null&&s.set(r.textContent,r)}),s}return null}changeUsageCount(i,s){let r=this.styleRef;if(r.has(i)){let o=r.get(i);return o.usage+=s,o.usage}return r.set(i,{usage:s,elements:[]}),s}getStyleElement(i,s){let r=this.styleNodesInDOM,o=r?.get(s);if(o?.parentNode===i)return r.delete(s),o.removeAttribute(C_),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=s,this.platformIsServer&&a.setAttribute(C_,this.appId),i.appendChild(a),a}}addStyleToHost(i,s){let r=this.getStyleElement(i,s),o=this.styleRef,a=o.get(s)?.elements;a?a.push(r):o.set(s,{elements:[r],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};t.\u0275fac=function(s){return new(s||t)(K(Ot),K(Lg),K(MS,8),K(on))},t.\u0275prov=ee({token:t,factory:t.\u0275fac});let e=t;return e})(),y_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},D_=/%COMP%/g,G1="%COMP%",J5=`_nghost-${G1}`,X5=`_ngcontent-${G1}`,Z5=!0,e6=new Q("",{providedIn:"root",factory:()=>Z5});function t6(e){return X5.replace(D_,e)}function n6(e){return J5.replace(D_,e)}function H1(e,t){return t.map(n=>n.replace(D_,e))}var N1=(()=>{let t=class t{constructor(i,s,r,o,a,l,c,u=null){this.eventManager=i,this.sharedStylesHost=s,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=br(l),this.defaultRenderer=new eh(i,a,c,this.platformIsServer)}createRenderer(i,s){if(!i||!s)return this.defaultRenderer;this.platformIsServer&&s.encapsulation===Ns.ShadowDom&&(s=se(B({},s),{encapsulation:Ns.Emulated}));let r=this.getOrCreateRenderer(i,s);return r instanceof am?r.applyToHost(i):r instanceof th&&r.applyStyles(),r}getOrCreateRenderer(i,s){let r=this.rendererByCompId,o=r.get(s.id);if(!o){let a=this.doc,l=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(s.encapsulation){case Ns.Emulated:o=new am(c,u,s,this.appId,h,a,l,f);break;case Ns.ShadowDom:return new b_(c,u,i,s,a,l,this.nonce,f);default:o=new th(c,u,s,h,a,l,f);break}r.set(s.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(s){return new(s||t)(K(V1),K(B1),K(Lg),K(e6),K(Ot),K(on),K(le),K(MS))},t.\u0275prov=ee({token:t,factory:t.\u0275fac});let e=t;return e})(),eh=class{constructor(t,n,i,s){this.eventManager=t,this.doc=n,this.ngZone=i,this.platformIsServer=s,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(y_[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(k1(t)?t.content:t).appendChild(n)}insertBefore(t,n,i){t&&(k1(t)?t.content:t).insertBefore(n,i)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new ue(-5104,!1);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,s){if(s){n=s+":"+n;let r=y_[s];r?t.setAttributeNS(r,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){let s=y_[i];s?t.removeAttributeNS(s,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,s){s&(fr.DashCase|fr.Important)?t.style.setProperty(n,i,s&fr.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&fr.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t!=null&&(t[n]=i)}setValue(t,n){t.nodeValue=n}listen(t,n,i){if(typeof t=="string"&&(t=_r().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(i))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function k1(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var b_=class extends eh{constructor(t,n,i,s,r,o,a,l){super(t,r,o,l),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=H1(s.id,s.styles);for(let u of c){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},th=class extends eh{constructor(t,n,i,s,r,o,a,l){super(t,r,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=s,this.styles=l?H1(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},am=class extends th{constructor(t,n,i,s,r,o,a,l){let c=s+"-"+i.id;super(t,n,i,r,o,a,l,c),this.contentAttr=t6(c),this.hostAttr=n6(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}},i6=(()=>{let t=class t extends om{constructor(i){super(i)}supports(i){return!0}addEventListener(i,s,r){return i.addEventListener(s,r,!1),()=>this.removeEventListener(i,s,r)}removeEventListener(i,s,r){return i.removeEventListener(s,r)}};t.\u0275fac=function(s){return new(s||t)(K(Ot))},t.\u0275prov=ee({token:t,factory:t.\u0275fac});let e=t;return e})(),L1=["alt","control","meta","shift"],s6={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},r6={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},o6=(()=>{let t=class t extends om{constructor(i){super(i)}supports(i){return t.parseEventName(i)!=null}addEventListener(i,s,r){let o=t.parseEventName(s),a=t.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>_r().onAndCancel(i,o.domEventName,a))}static parseEventName(i){let s=i.toLowerCase().split("."),r=s.shift();if(s.length===0||!(r==="keydown"||r==="keyup"))return null;let o=t._normalizeKey(s.pop()),a="",l=s.indexOf("code");if(l>-1&&(s.splice(l,1),a="code."),L1.forEach(u=>{let h=s.indexOf(u);h>-1&&(s.splice(h,1),a+=u+".")}),a+=o,s.length!=0||o.length===0)return null;let c={};return c.domEventName=r,c.fullKey=a,c}static matchEventFullKeyCode(i,s){let r=s6[i.key]||i.key,o="";return s.indexOf("code.")>-1&&(r=i.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),L1.forEach(a=>{if(a!==r){let l=r6[a];l(i)&&(o+=a+".")}}),o+=r,o===s)}static eventCallback(i,s,r){return o=>{t.matchEventFullKeyCode(o,i)&&r.runGuarded(()=>s(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};t.\u0275fac=function(s){return new(s||t)(K(Ot))},t.\u0275prov=ee({token:t,factory:t.\u0275fac});let e=t;return e})();function U1(e,t){return c1(B({rootComponent:e},a6(t)))}function a6(e){return{appProviders:[...h6,...e?.providers??[]],platformProviders:d6}}function l6(){S_.makeCurrent()}function c6(){return new hr}function u6(){return zF(document),document}var d6=[{provide:on,useValue:g_},{provide:AS,useValue:l6,multi:!0},{provide:Ot,useFactory:u6,deps:[]}];var h6=[{provide:Mg,useValue:"root"},{provide:hr,useFactory:c6,deps:[]},{provide:__,useClass:i6,multi:!0,deps:[Ot,le,on]},{provide:__,useClass:o6,multi:!0,deps:[Ot]},N1,B1,V1,{provide:Bd,useExisting:N1},{provide:tm,useClass:Y5,deps:[]},[]];var lm=(()=>{let t=class t{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};t.\u0275fac=function(s){return new(s||t)(K(Ot))},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var E_=function(e){return e[e.NoHttpTransferCache=0]="NoHttpTransferCache",e[e.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",e}(E_||{});function W1(...e){let t=[],n=new Set,i=n.has(E_.HttpTransferCacheOptions);for(let{\u0275providers:s,\u0275kind:r}of e)n.add(r),s.length&&t.push(s);return ht([[],u1(),n.has(E_.NoHttpTransferCache)||i?[]:O1({}),t])}var De="primary",vh=Symbol("RouteTitle"),M_=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Tc(e){return new M_(e)}function p6(e,t,n){let i=n.path.split("/");if(i.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||i.length<e.length))return null;let s={};for(let r=0;r<i.length;r++){let o=i[r],a=e[r];if(o.startsWith(":"))s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:e.slice(0,i.length),posParams:s}}function g6(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Gs(e[n],t[n]))return!1;return!0}function Gs(e,t){let n=e?P_(e):void 0,i=t?P_(t):void 0;if(!n||!i||n.length!=i.length)return!1;let s;for(let r=0;r<n.length;r++)if(s=n[r],!Y1(e[s],t[s]))return!1;return!0}function P_(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function Y1(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),i=[...t].sort();return n.every((s,r)=>i[r]===s)}else return e===t}function J1(e){return e.length>0?e[e.length-1]:null}function Do(e){return By(e)?e:Ia(e)?qe(Promise.resolve(e)):Z(e)}var m6={exact:Z1,subset:eO},X1={exact:v6,subset:C6,ignored:()=>!0};function z1(e,t,n){return m6[n.paths](e.root,t.root,n.matrixParams)&&X1[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function v6(e,t){return Gs(e,t)}function Z1(e,t,n){if(!Fa(e.segments,t.segments)||!dm(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!e.children[i]||!Z1(e.children[i],t.children[i],n))return!1;return!0}function C6(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Y1(e[n],t[n]))}function eO(e,t,n){return tO(e,t,t.segments,n)}function tO(e,t,n,i){if(e.segments.length>n.length){let s=e.segments.slice(0,n.length);return!(!Fa(s,n)||t.hasChildren()||!dm(s,n,i))}else if(e.segments.length===n.length){if(!Fa(e.segments,n)||!dm(e.segments,n,i))return!1;for(let s in t.children)if(!e.children[s]||!eO(e.children[s],t.children[s],i))return!1;return!0}else{let s=n.slice(0,e.segments.length),r=n.slice(e.segments.length);return!Fa(e.segments,s)||!dm(e.segments,s,i)||!e.children[De]?!1:tO(e.children[De],t,r,i)}}function dm(e,t,n){return t.every((i,s)=>X1[n](e[s].parameters,i.parameters))}var bo=class{constructor(t=new Xe([],{}),n={},i=null){this.root=t,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Tc(this.queryParams),this._queryParamMap}toString(){return S6.serialize(this)}},Xe=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hm(this)}},Pa=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=Tc(this.parameters),this._parameterMap}toString(){return iO(this)}};function y6(e,t){return Fa(e,t)&&e.every((n,i)=>Gs(n.parameters,t[i].parameters))}function Fa(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.path===t[i].path)}function w6(e,t){let n=[];return Object.entries(e.children).forEach(([i,s])=>{i===De&&(n=n.concat(t(s,i)))}),Object.entries(e.children).forEach(([i,s])=>{i!==De&&(n=n.concat(t(s,i)))}),n}var nb=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:()=>new pm,providedIn:"root"});let e=t;return e})(),pm=class{parse(t){let n=new x_(t);return new bo(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${nh(t.root,!0)}`,i=E6(t.queryParams),s=typeof t.fragment=="string"?`#${_6(t.fragment)}`:"";return`${n}${i}${s}`}},S6=new pm;function hm(e){return e.segments.map(t=>iO(t)).join("/")}function nh(e,t){if(!e.hasChildren())return hm(e);if(t){let n=e.children[De]?nh(e.children[De],!1):"",i=[];return Object.entries(e.children).forEach(([s,r])=>{s!==De&&i.push(`${s}:${nh(r,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=w6(e,(i,s)=>s===De?[nh(e.children[De],!1)]:[`${s}:${nh(i,!1)}`]);return Object.keys(e.children).length===1&&e.children[De]!=null?`${hm(e)}/${n[0]}`:`${hm(e)}/(${n.join("//")})`}}function nO(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function cm(e){return nO(e).replace(/%3B/gi,";")}function _6(e){return encodeURI(e)}function F_(e){return nO(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fm(e){return decodeURIComponent(e)}function $1(e){return fm(e.replace(/\+/g,"%20"))}function iO(e){return`${F_(e.path)}${b6(e.parameters)}`}function b6(e){return Object.entries(e).map(([t,n])=>`;${F_(t)}=${F_(n)}`).join("")}function E6(e){let t=Object.entries(e).map(([n,i])=>Array.isArray(i)?i.map(s=>`${cm(n)}=${cm(s)}`).join("&"):`${cm(n)}=${cm(i)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var D6=/^[^\/()?;#]+/;function R_(e){let t=e.match(D6);return t?t[0]:""}var R6=/^[^\/()?;=#]+/;function T6(e){let t=e.match(R6);return t?t[0]:""}var I6=/^[^=?&#]+/;function A6(e){let t=e.match(I6);return t?t[0]:""}var M6=/^[^&#]+/;function P6(e){let t=e.match(M6);return t?t[0]:""}var x_=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xe([],{}):new Xe([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(i[De]=new Xe(t,n)),i}parseSegment(){let t=R_(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new ue(4009,!1);return this.capture(t),new Pa(fm(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=T6(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let s=R_(this.remaining);s&&(i=s,this.capture(i))}t[fm(n)]=fm(i)}parseQueryParam(t){let n=A6(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let o=P6(this.remaining);o&&(i=o,this.capture(i))}let s=$1(n),r=$1(i);if(t.hasOwnProperty(s)){let o=t[s];Array.isArray(o)||(o=[o],t[s]=o),o.push(r)}else t[s]=r}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=R_(this.remaining),s=this.remaining[i.length];if(s!=="/"&&s!==")"&&s!==";")throw new ue(4010,!1);let r;i.indexOf(":")>-1?(r=i.slice(0,i.indexOf(":")),this.capture(r),this.capture(":")):t&&(r=De);let o=this.parseChildren();n[r]=Object.keys(o).length===1?o[De]:new Xe([],o),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new ue(4011,!1)}};function sO(e){return e.segments.length>0?new Xe([],{[De]:e}):e}function rO(e){let t={};for(let[i,s]of Object.entries(e.children)){let r=rO(s);if(i===De&&r.segments.length===0&&r.hasChildren())for(let[o,a]of Object.entries(r.children))t[o]=a;else(r.segments.length>0||r.hasChildren())&&(t[i]=r)}let n=new Xe(e.segments,t);return F6(n)}function F6(e){if(e.numberOfChildren===1&&e.children[De]){let t=e.children[De];return new Xe(e.segments.concat(t.segments),t.children)}return e}function Ic(e){return e instanceof bo}function x6(e,t,n=null,i=null){let s=oO(e);return aO(s,t,n,i)}function oO(e){let t;function n(r){let o={};for(let l of r.children){let c=n(l);o[l.outlet]=c}let a=new Xe(r.url,o);return r===e&&(t=a),a}let i=n(e.root),s=sO(i);return t??s}function aO(e,t,n,i){let s=e;for(;s.parent;)s=s.parent;if(t.length===0)return T_(s,s,s,n,i);let r=O6(t);if(r.toRoot())return T_(s,s,new Xe([],{}),n,i);let o=N6(r,s,e),a=o.processChildren?rh(o.segmentGroup,o.index,r.commands):cO(o.segmentGroup,o.index,r.commands);return T_(s,o.segmentGroup,a,n,i)}function gm(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function lh(e){return typeof e=="object"&&e!=null&&e.outlets}function T_(e,t,n,i,s){let r={};i&&Object.entries(i).forEach(([l,c])=>{r[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let o;e===t?o=n:o=lO(e,t,n);let a=sO(rO(o));return new bo(a,r,s)}function lO(e,t,n){let i={};return Object.entries(e.children).forEach(([s,r])=>{r===t?i[s]=n:i[s]=lO(r,t,n)}),new Xe(e.segments,i)}var mm=class{constructor(t,n,i){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=i,t&&i.length>0&&gm(i[0]))throw new ue(4003,!1);let s=i.find(lh);if(s&&s!==J1(i))throw new ue(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function O6(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new mm(!0,0,e);let t=0,n=!1,i=e.reduce((s,r,o)=>{if(typeof r=="object"&&r!=null){if(r.outlets){let a={};return Object.entries(r.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...s,{outlets:a}]}if(r.segmentPath)return[...s,r.segmentPath]}return typeof r!="string"?[...s,r]:o===0?(r.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?t++:a!=""&&s.push(a))}),s):[...s,r]},[]);return new mm(n,t,i)}var Dc=class{constructor(t,n,i){this.segmentGroup=t,this.processChildren=n,this.index=i}};function N6(e,t,n){if(e.isAbsolute)return new Dc(t,!0,0);if(!n)return new Dc(t,!1,NaN);if(n.parent===null)return new Dc(n,!0,0);let i=gm(e.commands[0])?0:1,s=n.segments.length-1+i;return k6(n,s,e.numberOfDoubleDots)}function k6(e,t,n){let i=e,s=t,r=n;for(;r>s;){if(r-=s,i=i.parent,!i)throw new ue(4005,!1);s=i.segments.length}return new Dc(i,!1,s-r)}function L6(e){return lh(e[0])?e[0].outlets:{[De]:e}}function cO(e,t,n){if(e??=new Xe([],{}),e.segments.length===0&&e.hasChildren())return rh(e,t,n);let i=V6(e,t,n),s=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){let r=new Xe(e.segments.slice(0,i.pathIndex),{});return r.children[De]=new Xe(e.segments.slice(i.pathIndex),e.children),rh(r,0,s)}else return i.match&&s.length===0?new Xe(e.segments,{}):i.match&&!e.hasChildren()?O_(e,t,n):i.match?rh(e,0,s):O_(e,t,n)}function rh(e,t,n){if(n.length===0)return new Xe(e.segments,{});{let i=L6(n),s={};if(Object.keys(i).some(r=>r!==De)&&e.children[De]&&e.numberOfChildren===1&&e.children[De].segments.length===0){let r=rh(e.children[De],t,n);return new Xe(e.segments,r.children)}return Object.entries(i).forEach(([r,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(s[r]=cO(e.children[r],t,o))}),Object.entries(e.children).forEach(([r,o])=>{i[r]===void 0&&(s[r]=o)}),new Xe(e.segments,s)}}function V6(e,t,n){let i=0,s=t,r={match:!1,pathIndex:0,commandIndex:0};for(;s<e.segments.length;){if(i>=n.length)return r;let o=e.segments[s],a=n[i];if(lh(a))break;let l=`${a}`,c=i<n.length-1?n[i+1]:null;if(s>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!K1(l,c,o))return r;i+=2}else{if(!K1(l,{},o))return r;i++}s++}return{match:!0,pathIndex:s,commandIndex:i}}function O_(e,t,n){let i=e.segments.slice(0,t),s=0;for(;s<n.length;){let r=n[s];if(lh(r)){let l=B6(r.outlets);return new Xe(i,l)}if(s===0&&gm(n[0])){let l=e.segments[t];i.push(new Pa(l.path,q1(n[0]))),s++;continue}let o=lh(r)?r.outlets[De]:`${r}`,a=s<n.length-1?n[s+1]:null;o&&a&&gm(a)?(i.push(new Pa(o,q1(a))),s+=2):(i.push(new Pa(o,{})),s++)}return new Xe(i,{})}function B6(e){let t={};return Object.entries(e).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[n]=O_(new Xe([],{}),0,i))}),t}function q1(e){let t={};return Object.entries(e).forEach(([n,i])=>t[n]=`${i}`),t}function K1(e,t,n){return e==n.path&&Gs(t,n.parameters)}var oh="imperative",Cn=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Cn||{}),Li=class{constructor(t,n){this.id=t,this.url=n}},ch=class extends Li{constructor(t,n,i="imperative",s=null){super(t,n),this.type=Cn.NavigationStart,this.navigationTrigger=i,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},xa=class extends Li{constructor(t,n,i){super(t,n),this.urlAfterRedirects=i,this.type=Cn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},_i=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(_i||{}),N_=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(N_||{}),Eo=class extends Li{constructor(t,n,i,s){super(t,n),this.reason=i,this.code=s,this.type=Cn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Oa=class extends Li{constructor(t,n,i,s){super(t,n),this.reason=i,this.code=s,this.type=Cn.NavigationSkipped}},uh=class extends Li{constructor(t,n,i,s){super(t,n),this.error=i,this.target=s,this.type=Cn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},vm=class extends Li{constructor(t,n,i,s){super(t,n),this.urlAfterRedirects=i,this.state=s,this.type=Cn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},k_=class extends Li{constructor(t,n,i,s){super(t,n),this.urlAfterRedirects=i,this.state=s,this.type=Cn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},L_=class extends Li{constructor(t,n,i,s,r){super(t,n),this.urlAfterRedirects=i,this.state=s,this.shouldActivate=r,this.type=Cn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},V_=class extends Li{constructor(t,n,i,s){super(t,n),this.urlAfterRedirects=i,this.state=s,this.type=Cn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},B_=class extends Li{constructor(t,n,i,s){super(t,n),this.urlAfterRedirects=i,this.state=s,this.type=Cn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},G_=class{constructor(t){this.route=t,this.type=Cn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},H_=class{constructor(t){this.route=t,this.type=Cn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},U_=class{constructor(t){this.snapshot=t,this.type=Cn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},W_=class{constructor(t){this.snapshot=t,this.type=Cn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},j_=class{constructor(t){this.snapshot=t,this.type=Cn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dh=class{constructor(t){this.snapshot=t,this.type=Cn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var hh=class{},fh=class{constructor(t){this.url=t}};var z_=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new bm,this.attachRef=null}},bm=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(i,s){let r=this.getOrCreateContext(i);r.outlet=s,this.contexts.set(i,r)}onChildOutletDestroyed(i){let s=this.getContext(i);s&&(s.outlet=null,s.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let s=this.getContext(i);return s||(s=new z_,this.contexts.set(i,s)),s}getContext(i){return this.contexts.get(i)||null}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Cm=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=$_(t,this._root);return n?n.children.map(i=>i.value):[]}firstChild(t){let n=$_(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=q_(t,this._root);return n.length<2?[]:n[n.length-2].children.map(s=>s.value).filter(s=>s!==t)}pathFromRoot(t){return q_(t,this._root).map(n=>n.value)}};function $_(e,t){if(e===t.value)return t;for(let n of t.children){let i=$_(e,n);if(i)return i}return null}function q_(e,t){if(e===t.value)return[t];for(let n of t.children){let i=q_(e,n);if(i.length)return i.unshift(t),i}return[]}var Si=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ec(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var ym=class extends Cm{constructor(t,n){super(t),this.snapshot=n,sb(this,t)}toString(){return this.snapshot.toString()}};function uO(e){let t=G6(e),n=new gt([new Pa("",{})]),i=new gt({}),s=new gt({}),r=new gt({}),o=new gt(""),a=new Ac(n,i,r,o,s,De,e,t.root);return a.snapshot=t.root,new ym(new Si(a,[]),t)}function G6(e){let t={},n={},i={},s="",r=new ph([],t,i,s,n,De,e,null,{});return new wm("",new Si(r,[]))}var Ac=class{constructor(t,n,i,s,r,o,a,l){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=s,this.dataSubject=r,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(oe(c=>c[vh]))??Z(void 0),this.url=t,this.params=n,this.queryParams=i,this.fragment=s,this.data=r}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(oe(t=>Tc(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(oe(t=>Tc(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ib(e,t,n="emptyOnly"){let i,{routeConfig:s}=e;return t!==null&&(n==="always"||s?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:B(B({},t.params),e.params),data:B(B({},t.data),e.data),resolve:B(B(B(B({},e.data),t.data),s?.data),e._resolvedData)}:i={params:B({},e.params),data:B({},e.data),resolve:B(B({},e.data),e._resolvedData??{})},s&&hO(s)&&(i.resolve[vh]=s.title),i}var ph=class{get title(){return this.data?.[vh]}constructor(t,n,i,s,r,o,a,l,c){this.url=t,this.params=n,this.queryParams=i,this.fragment=s,this.data=r,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Tc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Tc(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},wm=class extends Cm{constructor(t,n){super(n),this.url=t,sb(this,n)}toString(){return dO(this._root)}};function sb(e,t){t.value._routerState=e,t.children.forEach(n=>sb(e,n))}function dO(e){let t=e.children.length>0?` { ${e.children.map(dO).join(", ")} } `:"";return`${e.value}${t}`}function I_(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Gs(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Gs(t.params,n.params)||e.paramsSubject.next(n.params),g6(t.url,n.url)||e.urlSubject.next(n.url),Gs(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function K_(e,t){let n=Gs(e.params,t.params)&&y6(e.url,t.url),i=!e.parent!=!t.parent;return n&&!i&&(!e.parent||K_(e.parent,t.parent))}function hO(e){return typeof e.title=="string"||e.title===null}var Ch=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=De,this.activateEvents=new H,this.deactivateEvents=new H,this.attachEvents=new H,this.detachEvents=new H,this.parentContexts=U(bm),this.location=U(Ni),this.changeDetector=U(Sr),this.environmentInjector=U(Gn),this.inputBinder=U(rb,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:s,previousValue:r}=i.name;if(s)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ue(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ue(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ue(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,s){this.activated=i,this._activatedRoute=s,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,s){if(this.isActivated)throw new ue(4013,!1);this._activatedRoute=i;let r=this.location,a=i.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new Q_(i,l,r.injector);this.activated=r.createComponent(a,{index:r.length,injector:c,environmentInjector:s??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(s){return new(s||t)},t.\u0275dir=Mt({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[nn]});let e=t;return e})(),Q_=class e{__ngOutletInjector(t){return new e(this.route,this.childContexts,t)}constructor(t,n,i){this.route=t,this.childContexts=n,this.parent=i}get(t,n){return t===Ac?this.route:t===bm?this.childContexts:this.parent.get(t,n)}},rb=new Q("");function H6(e,t,n){let i=gh(e,t._root,n?n._root:void 0);return new ym(i,t)}function gh(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=t.value;let s=U6(e,t,n);return new Si(i,s)}else{if(e.shouldAttach(t.value)){let r=e.retrieve(t.value);if(r!==null){let o=r.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>gh(e,a)),o}}let i=W6(t.value),s=t.children.map(r=>gh(e,r));return new Si(i,s)}}function U6(e,t,n){return t.children.map(i=>{for(let s of n.children)if(e.shouldReuseRoute(i.value,s.value.snapshot))return gh(e,i,s);return gh(e,i)})}function W6(e){return new Ac(new gt(e.url),new gt(e.params),new gt(e.queryParams),new gt(e.fragment),new gt(e.data),e.outlet,e.component,e)}var fO="ngNavigationCancelingError";function pO(e,t){let{redirectTo:n,navigationBehaviorOptions:i}=Ic(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,s=gO(!1,_i.Redirect);return s.url=n,s.navigationBehaviorOptions=i,s}function gO(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[fO]=!0,n.cancellationCode=t,n}function j6(e){return mO(e)&&Ic(e.url)}function mO(e){return!!e&&e[fO]}var ob=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Pe({type:t,selectors:[["ng-component"]],standalone:!0,features:[Fe],decls:1,vars:0,template:function(s,r){s&1&&de(0,"router-outlet")},dependencies:[Ch],encapsulation:2});let e=t;return e})();function z6(e,t){return e.providers&&!e._injector&&(e._injector=XS(e.providers,t,`Route: ${e.path}`)),e._injector??t}function ab(e){let t=e.children&&e.children.map(ab),n=t?se(B({},e),{children:t}):B({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==De&&(n.component=ob),n}function Hs(e){return e.outlet||De}function $6(e,t){let n=e.filter(i=>Hs(i)===t);return n.push(...e.filter(i=>Hs(i)!==t)),n}function yh(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var q6=(e,t,n,i)=>oe(s=>(new Y_(t,s.targetRouterState,s.currentRouterState,n,i).activate(e),s)),Y_=class{constructor(t,n,i,s,r){this.routeReuseStrategy=t,this.futureState=n,this.currState=i,this.forwardEvent=s,this.inputBindingEnabled=r}activate(t){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,t),I_(this.futureState.root),this.activateChildRoutes(n,i,t)}deactivateChildRoutes(t,n,i){let s=Ec(n);t.children.forEach(r=>{let o=r.value.outlet;this.deactivateRoutes(r,s[o],i),delete s[o]}),Object.values(s).forEach(r=>{this.deactivateRouteAndItsChildren(r,i)})}deactivateRoutes(t,n,i){let s=t.value,r=n?n.value:null;if(s===r)if(s.component){let o=i.getContext(s.outlet);o&&this.deactivateChildRoutes(t,n,o.children)}else this.deactivateChildRoutes(t,n,i);else r&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let i=n.getContext(t.value.outlet),s=i&&t.value.component?i.children:n,r=Ec(t);for(let o of Object.values(r))this.deactivateRouteAndItsChildren(o,s);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let i=n.getContext(t.value.outlet),s=i&&t.value.component?i.children:n,r=Ec(t);for(let o of Object.values(r))this.deactivateRouteAndItsChildren(o,s);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,n,i){let s=Ec(n);t.children.forEach(r=>{this.activateRoutes(r,s[r.value.outlet],i),this.forwardEvent(new dh(r.value.snapshot))}),t.children.length&&this.forwardEvent(new W_(t.value.snapshot))}activateRoutes(t,n,i){let s=t.value,r=n?n.value:null;if(I_(s),s===r)if(s.component){let o=i.getOrCreateContext(s.outlet);this.activateChildRoutes(t,n,o.children)}else this.activateChildRoutes(t,n,i);else if(s.component){let o=i.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){let a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),I_(a.route.value),this.activateChildRoutes(t,null,o.children)}else{let a=yh(s.snapshot);o.attachRef=null,o.route=s,o.injector=a,o.outlet&&o.outlet.activateWith(s,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,i)}},Sm=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Rc=class{constructor(t,n){this.component=t,this.route=n}};function K6(e,t,n){let i=e._root,s=t?t._root:null;return ih(i,s,n,[i.value])}function Q6(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Pc(e,t){let n=Symbol(),i=t.get(e,n);return i===n?typeof e=="function"&&!FP(e)?e:t.get(e):i}function ih(e,t,n,i,s={canDeactivateChecks:[],canActivateChecks:[]}){let r=Ec(t);return e.children.forEach(o=>{Y6(o,r[o.value.outlet],n,i.concat([o.value]),s),delete r[o.value.outlet]}),Object.entries(r).forEach(([o,a])=>ah(a,n.getContext(o),s)),s}function Y6(e,t,n,i,s={canDeactivateChecks:[],canActivateChecks:[]}){let r=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&r.routeConfig===o.routeConfig){let l=J6(o,r,r.routeConfig.runGuardsAndResolvers);l?s.canActivateChecks.push(new Sm(i)):(r.data=o.data,r._resolvedData=o._resolvedData),r.component?ih(e,t,a?a.children:null,i,s):ih(e,t,n,i,s),l&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new Rc(a.outlet.component,o))}else o&&ah(t,a,s),s.canActivateChecks.push(new Sm(i)),r.component?ih(e,null,a?a.children:null,i,s):ih(e,null,n,i,s);return s}function J6(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Fa(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Fa(e.url,t.url)||!Gs(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!K_(e,t)||!Gs(e.queryParams,t.queryParams);case"paramsChange":default:return!K_(e,t)}}function ah(e,t,n){let i=Ec(e),s=e.value;Object.entries(i).forEach(([r,o])=>{s.component?t?ah(o,t.children.getContext(r),n):ah(o,null,n):ah(o,t,n)}),s.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Rc(t.outlet.component,s)):n.canDeactivateChecks.push(new Rc(null,s)):n.canDeactivateChecks.push(new Rc(null,s))}function wh(e){return typeof e=="function"}function X6(e){return typeof e=="boolean"}function Z6(e){return e&&wh(e.canLoad)}function eK(e){return e&&wh(e.canActivate)}function tK(e){return e&&wh(e.canActivateChild)}function nK(e){return e&&wh(e.canDeactivate)}function iK(e){return e&&wh(e.canMatch)}function vO(e){return e instanceof lr||e?.name==="EmptyError"}var um=Symbol("INITIAL_VALUE");function Mc(){return Ge(e=>la(e.map(t=>t.pipe(At(1),ua(um)))).pipe(oe(t=>{for(let n of t)if(n!==!0){if(n===um)return um;if(n===!1||n instanceof bo)return n}return!0}),ut(t=>t!==um),At(1)))}function sK(e,t){return nt(n=>{let{targetSnapshot:i,currentSnapshot:s,guards:{canActivateChecks:r,canDeactivateChecks:o}}=n;return o.length===0&&r.length===0?Z(se(B({},n),{guardsResult:!0})):rK(o,i,s,e).pipe(nt(a=>a&&X6(a)?oK(i,r,e,t):Z(a)),oe(a=>se(B({},n),{guardsResult:a})))})}function rK(e,t,n,i){return qe(e).pipe(nt(s=>dK(s.component,s.route,n,t,i)),fi(s=>s!==!0,!0))}function oK(e,t,n,i){return qe(t).pipe(ao(s=>Fs(lK(s.route.parent,i),aK(s.route,i),uK(e,s.path,n),cK(e,s.route,n))),fi(s=>s!==!0,!0))}function aK(e,t){return e!==null&&t&&t(new j_(e)),Z(!0)}function lK(e,t){return e!==null&&t&&t(new U_(e)),Z(!0)}function cK(e,t,n){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return Z(!0);let s=i.map(r=>Vp(()=>{let o=yh(t)??n,a=Pc(r,o),l=eK(a)?a.canActivate(t,e):mo(o,()=>a(t,e));return Do(l).pipe(fi())}));return Z(s).pipe(Mc())}function uK(e,t,n){let i=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(o=>Q6(o)).filter(o=>o!==null).map(o=>Vp(()=>{let a=o.guards.map(l=>{let c=yh(o.node)??n,u=Pc(l,c),h=tK(u)?u.canActivateChild(i,e):mo(c,()=>u(i,e));return Do(h).pipe(fi())});return Z(a).pipe(Mc())}));return Z(r).pipe(Mc())}function dK(e,t,n,i,s){let r=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!r||r.length===0)return Z(!0);let o=r.map(a=>{let l=yh(t)??s,c=Pc(a,l),u=nK(c)?c.canDeactivate(e,t,n,i):mo(l,()=>c(e,t,n,i));return Do(u).pipe(fi())});return Z(o).pipe(Mc())}function hK(e,t,n,i){let s=t.canLoad;if(s===void 0||s.length===0)return Z(!0);let r=s.map(o=>{let a=Pc(o,e),l=Z6(a)?a.canLoad(t,n):mo(e,()=>a(t,n));return Do(l)});return Z(r).pipe(Mc(),CO(i))}function CO(e){return Sp(dt(t=>{if(Ic(t))throw pO(e,t)}),oe(t=>t===!0))}function fK(e,t,n,i){let s=t.canMatch;if(!s||s.length===0)return Z(!0);let r=s.map(o=>{let a=Pc(o,e),l=iK(a)?a.canMatch(t,n):mo(e,()=>a(t,n));return Do(l)});return Z(r).pipe(Mc(),CO(i))}var mh=class{constructor(t){this.segmentGroup=t||null}},_m=class extends Error{constructor(t){super(),this.urlTree=t}};function bc(e){return nc(new mh(e))}function pK(e){return nc(new ue(4e3,!1))}function gK(e){return nc(gO(!1,_i.GuardRejected))}var J_=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let i=[],s=n.root;for(;;){if(i=i.concat(s.segments),s.numberOfChildren===0)return Z(i);if(s.numberOfChildren>1||!s.children[De])return pK(t.redirectTo);s=s.children[De]}}applyRedirectCommands(t,n,i){let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,i);if(n.startsWith("/"))throw new _m(s);return s}applyRedirectCreateUrlTree(t,n,i,s){let r=this.createSegmentGroup(t,n.root,i,s);return new bo(r,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let i={};return Object.entries(t).forEach(([s,r])=>{if(typeof r=="string"&&r.startsWith(":")){let a=r.substring(1);i[s]=n[a]}else i[s]=r}),i}createSegmentGroup(t,n,i,s){let r=this.createSegments(t,n.segments,i,s),o={};return Object.entries(n.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(t,l,i,s)}),new Xe(r,o)}createSegments(t,n,i,s){return n.map(r=>r.path.startsWith(":")?this.findPosParam(t,r,s):this.findOrReturn(r,i))}findPosParam(t,n,i){let s=i[n.path.substring(1)];if(!s)throw new ue(4001,!1);return s}findOrReturn(t,n){let i=0;for(let s of n){if(s.path===t.path)return n.splice(i),s;i++}return t}},X_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function mK(e,t,n,i,s){let r=lb(e,t,n);return r.matched?(i=z6(t,i),fK(i,t,n,s).pipe(oe(o=>o===!0?r:B({},X_)))):Z(r)}function lb(e,t,n){if(t.path==="**")return vK(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?B({},X_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let s=(t.matcher||p6)(n,e,t);if(!s)return B({},X_);let r={};Object.entries(s.posParams??{}).forEach(([a,l])=>{r[a]=l.path});let o=s.consumed.length>0?B(B({},r),s.consumed[s.consumed.length-1].parameters):r;return{matched:!0,consumedSegments:s.consumed,remainingSegments:n.slice(s.consumed.length),parameters:o,positionalParamSegments:s.posParams??{}}}function vK(e){return{matched:!0,parameters:e.length>0?J1(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function Q1(e,t,n,i){return n.length>0&&wK(e,n,i)?{segmentGroup:new Xe(t,yK(i,new Xe(n,e.children))),slicedSegments:[]}:n.length===0&&SK(e,n,i)?{segmentGroup:new Xe(e.segments,CK(e,n,i,e.children)),slicedSegments:n}:{segmentGroup:new Xe(e.segments,e.children),slicedSegments:n}}function CK(e,t,n,i){let s={};for(let r of n)if(Em(e,t,r)&&!i[Hs(r)]){let o=new Xe([],{});s[Hs(r)]=o}return B(B({},i),s)}function yK(e,t){let n={};n[De]=t;for(let i of e)if(i.path===""&&Hs(i)!==De){let s=new Xe([],{});n[Hs(i)]=s}return n}function wK(e,t,n){return n.some(i=>Em(e,t,i)&&Hs(i)!==De)}function SK(e,t,n){return n.some(i=>Em(e,t,i))}function Em(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function _K(e,t,n,i){return Hs(e)!==i&&(i===De||!Em(t,n,e))?!1:lb(t,e,n).matched}function bK(e,t,n){return t.length===0&&!e.children[n]}var Z_=class{};function EK(e,t,n,i,s,r,o="emptyOnly"){return new eb(e,t,n,i,s,o,r).recognize()}var DK=31,eb=class{constructor(t,n,i,s,r,o,a){this.injector=t,this.configLoader=n,this.rootComponentType=i,this.config=s,this.urlTree=r,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new J_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new ue(4002,`'${t.segmentGroup}'`)}recognize(){let t=Q1(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(oe(n=>{let i=new ph([],Object.freeze({}),Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,{},De,this.rootComponentType,null,{}),s=new Si(i,n),r=new wm("",s),o=x6(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,r.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(r._root,null),{state:r,tree:o}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,De).pipe(oo(i=>{if(i instanceof _m)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof mh?this.noMatchError(i):i}))}inheritParamsAndData(t,n){let i=t.value,s=ib(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(s.params),i.data=Object.freeze(s.data),t.children.forEach(r=>this.inheritParamsAndData(r,i))}processSegmentGroup(t,n,i,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,n,i):this.processSegment(t,n,i,i.segments,s,!0).pipe(oe(r=>r instanceof Si?[r]:[]))}processChildren(t,n,i){let s=[];for(let r of Object.keys(i.children))r==="primary"?s.unshift(r):s.push(r);return qe(s).pipe(ao(r=>{let o=i.children[r],a=$6(n,r);return this.processSegmentGroup(t,a,o,r)}),jp((r,o)=>(r.push(...o),r)),lo(null),$y(),nt(r=>{if(r===null)return bc(i);let o=yO(r);return RK(o),Z(o)}))}processSegment(t,n,i,s,r,o){return qe(n).pipe(ao(a=>this.processSegmentAgainstRoute(a._injector??t,n,a,i,s,r,o).pipe(oo(l=>{if(l instanceof mh)return Z(null);throw l}))),fi(a=>!!a),oo(a=>{if(vO(a))return bK(i,s,r)?Z(new Z_):bc(i);throw a}))}processSegmentAgainstRoute(t,n,i,s,r,o,a){return _K(i,s,r,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,s,i,r,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,s,n,i,r,o):bc(s):bc(s)}expandSegmentAgainstRouteUsingRedirect(t,n,i,s,r,o){let{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:u}=lb(n,s,r);if(!a)return bc(n);s.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>DK&&(this.allowRedirects=!1));let h=this.applyRedirects.applyRedirectCommands(l,s.redirectTo,c);return this.applyRedirects.lineralizeSegments(s,h).pipe(nt(f=>this.processSegment(t,i,n,f.concat(u),o,!1)))}matchSegmentAgainstRoute(t,n,i,s,r){let o=mK(n,i,s,t,this.urlSerializer);return i.path==="**"&&(n.children={}),o.pipe(Ge(a=>a.matched?(t=i._injector??t,this.getChildConfig(t,i,s).pipe(Ge(({routes:l})=>{let c=i._loadedInjector??t,{consumedSegments:u,remainingSegments:h,parameters:f}=a,g=new ph(u,f,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,IK(i),Hs(i),i.component??i._loadedComponent??null,i,AK(i)),{segmentGroup:v,slicedSegments:y}=Q1(n,u,h,l);if(y.length===0&&v.hasChildren())return this.processChildren(c,l,v).pipe(oe(E=>E===null?null:new Si(g,E)));if(l.length===0&&y.length===0)return Z(new Si(g,[]));let C=Hs(i)===r;return this.processSegment(c,l,v,y,C?De:r,!0).pipe(oe(E=>new Si(g,E instanceof Si?[E]:[])))}))):bc(n)))}getChildConfig(t,n,i){return n.children?Z({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?Z({routes:n._loadedRoutes,injector:n._loadedInjector}):hK(t,n,i,this.urlSerializer).pipe(nt(s=>s?this.configLoader.loadChildren(t,n).pipe(dt(r=>{n._loadedRoutes=r.routes,n._loadedInjector=r.injector})):gK(n))):Z({routes:[],injector:t})}};function RK(e){e.sort((t,n)=>t.value.outlet===De?-1:n.value.outlet===De?1:t.value.outlet.localeCompare(n.value.outlet))}function TK(e){let t=e.value.routeConfig;return t&&t.path===""}function yO(e){let t=[],n=new Set;for(let i of e){if(!TK(i)){t.push(i);continue}let s=t.find(r=>i.value.routeConfig===r.value.routeConfig);s!==void 0?(s.children.push(...i.children),n.add(s)):t.push(i)}for(let i of n){let s=yO(i.children);t.push(new Si(i.value,s))}return t.filter(i=>!n.has(i))}function IK(e){return e.data||{}}function AK(e){return e.resolve||{}}function MK(e,t,n,i,s,r){return nt(o=>EK(e,t,n,i,o.extractedUrl,s,r).pipe(oe(({state:a,tree:l})=>se(B({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function PK(e,t){return nt(n=>{let{targetSnapshot:i,guards:{canActivateChecks:s}}=n;if(!s.length)return Z(n);let r=new Set(s.map(l=>l.route)),o=new Set;for(let l of r)if(!o.has(l))for(let c of wO(l))o.add(c);let a=0;return qe(o).pipe(ao(l=>r.has(l)?FK(l,i,e,t):(l.data=ib(l,l.parent,e).resolve,Z(void 0))),dt(()=>a++),sc(1),nt(l=>a===o.size?Z(n):Ut))})}function wO(e){let t=e.children.map(n=>wO(n)).flat();return[e,...t]}function FK(e,t,n,i){let s=e.routeConfig,r=e._resolve;return s?.title!==void 0&&!hO(s)&&(r[vh]=s.title),xK(r,e,t,i).pipe(oe(o=>(e._resolvedData=o,e.data=ib(e,e.parent,n).resolve,null)))}function xK(e,t,n,i){let s=P_(e);if(s.length===0)return Z({});let r={};return qe(s).pipe(nt(o=>OK(e[o],t,n,i).pipe(fi(),dt(a=>{r[o]=a}))),sc(1),Rd(r),oo(o=>vO(o)?Ut:nc(o)))}function OK(e,t,n,i){let s=yh(t)??i,r=Pc(e,s),o=r.resolve?r.resolve(t,n):mo(s,()=>r(t,n));return Do(o)}function A_(e){return Ge(t=>{let n=e(t);return n?qe(n).pipe(oe(()=>t)):Z(t)})}var SO=(()=>{let t=class t{buildTitle(i){let s,r=i.root;for(;r!==void 0;)s=this.getResolvedTitleForRoute(r)??s,r=r.children.find(o=>o.outlet===De);return s}getResolvedTitleForRoute(i){return i.data[vh]}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:()=>U(NK),providedIn:"root"});let e=t;return e})(),NK=(()=>{let t=class t extends SO{constructor(i){super(),this.title=i}updateTitle(i){let s=this.buildTitle(i);s!==void 0&&this.title.setTitle(s)}};t.\u0275fac=function(s){return new(s||t)(K(lm))},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),cb=new Q("",{providedIn:"root",factory:()=>({})}),ub=new Q(""),kK=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=U(l_)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Z(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let s=Do(i.loadComponent()).pipe(oe(_O),dt(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),ca(()=>{this.componentLoaders.delete(i)})),r=new Jl(s,()=>new Le).pipe(Yl());return this.componentLoaders.set(i,r),r}loadChildren(i,s){if(this.childrenLoaders.get(s))return this.childrenLoaders.get(s);if(s._loadedRoutes)return Z({routes:s._loadedRoutes,injector:s._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(s);let o=LK(s,this.compiler,i,this.onLoadEndListener).pipe(ca(()=>{this.childrenLoaders.delete(s)})),a=new Jl(o,()=>new Le).pipe(Yl());return this.childrenLoaders.set(s,a),a}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function LK(e,t,n,i){return Do(e.loadChildren()).pipe(oe(_O),nt(s=>s instanceof Gd||Array.isArray(s)?Z(s):qe(t.compileModuleAsync(s))),oe(s=>{i&&i(e);let r,o,a=!1;return Array.isArray(s)?(o=s,a=!0):(r=s.create(n).injector,o=r.get(ub,[],{optional:!0,self:!0}).flat()),{routes:o.map(ab),injector:r}}))}function VK(e){return e&&typeof e=="object"&&"default"in e}function _O(e){return VK(e)?e.default:e}var db=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:()=>U(BK),providedIn:"root"});let e=t;return e})(),BK=(()=>{let t=class t{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,s){return i}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),GK=new Q("");var HK=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Le,this.transitionAbortSubject=new Le,this.configLoader=U(kK),this.environmentInjector=U(Gn),this.urlSerializer=U(nb),this.rootContexts=U(bm),this.location=U(Xd),this.inputBindingEnabled=U(rb,{optional:!0})!==null,this.titleStrategy=U(SO),this.options=U(cb,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=U(db),this.createViewTransition=U(GK,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let i=r=>this.events.next(new G_(r)),s=r=>this.events.next(new H_(r));this.configLoader.onLoadEndListener=s,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let s=++this.navigationId;this.transitions?.next(se(B(B({},this.transitions.value),i),{id:s}))}setupNavigations(i,s,r){return this.transitions=new gt({id:0,currentUrlTree:s,currentRawUrl:s,extractedUrl:this.urlHandlingStrategy.extract(s),urlAfterRedirects:this.urlHandlingStrategy.extract(s),rawUrl:s,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:oh,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ut(o=>o.id!==0),oe(o=>se(B({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ge(o=>{let a=!1,l=!1;return Z(o).pipe(Ge(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",_i.SupersededByNewNavigation),Ut;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?se(B({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!u&&h!=="reload"){let f="";return this.events.next(new Oa(c.id,this.urlSerializer.serialize(c.rawUrl),f,N_.IgnoredSameUrlNavigation)),c.resolve(null),Ut}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Z(c).pipe(Ge(f=>{let g=this.transitions?.getValue();return this.events.next(new ch(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?Ut:Promise.resolve(f)}),MK(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),dt(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=se(B({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new vm(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:g,source:v,restoredState:y,extras:C}=c,E=new ch(f,this.urlSerializer.serialize(g),v,y);this.events.next(E);let I=uO(this.rootComponentType).snapshot;return this.currentTransition=o=se(B({},c),{targetSnapshot:I,urlAfterRedirects:g,extras:se(B({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,Z(o)}else{let f="";return this.events.next(new Oa(c.id,this.urlSerializer.serialize(c.extractedUrl),f,N_.IgnoredByUrlHandlingStrategy)),c.resolve(null),Ut}}),dt(c=>{let u=new k_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),oe(c=>(this.currentTransition=o=se(B({},c),{guards:K6(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),sK(this.environmentInjector,c=>this.events.next(c)),dt(c=>{if(o.guardsResult=c.guardsResult,Ic(c.guardsResult))throw pO(this.urlSerializer,c.guardsResult);let u=new L_(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),ut(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",_i.GuardRejected),!1)),A_(c=>{if(c.guards.canActivateChecks.length)return Z(c).pipe(dt(u=>{let h=new V_(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),Ge(u=>{let h=!1;return Z(u).pipe(PK(this.paramsInheritanceStrategy,this.environmentInjector),dt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(u,"",_i.NoDataFromResolver)}}))}),dt(u=>{let h=new B_(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}))}),A_(c=>{let u=h=>{let f=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(h.routeConfig).pipe(dt(g=>{h.component=g}),oe(()=>{})));for(let g of h.children)f.push(...u(g));return f};return la(u(c.targetSnapshot.root)).pipe(lo(null),At(1))}),A_(()=>this.afterPreactivation()),Ge(()=>{let{currentSnapshot:c,targetSnapshot:u}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return h?qe(h).pipe(oe(()=>o)):Z(o)}),oe(c=>{let u=H6(i.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=se(B({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),dt(()=>{this.events.next(new hh)}),q6(this.rootContexts,i.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),At(1),dt({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new xa(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),Wt(this.transitionAbortSubject.pipe(dt(c=>{throw c}))),ca(()=>{!a&&!l&&this.cancelNavigationTransition(o,"",_i.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),oo(c=>{if(l=!0,mO(c))this.events.next(new Eo(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),j6(c)?this.events.next(new fh(c.url)):o.resolve(!1);else{this.events.next(new uh(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(i.errorHandler(c))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return Ut}))}))}cancelNavigationTransition(i,s,r){let o=new Eo(i.id,this.urlSerializer.serialize(i.extractedUrl),s,r);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function UK(e){return e!==oh}var WK=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:()=>U(jK),providedIn:"root"});let e=t;return e})(),tb=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},jK=(()=>{let t=class t extends tb{};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=vr(t)))(r||t)}})(),t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),bO=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:()=>U(zK),providedIn:"root"});let e=t;return e})(),zK=(()=>{let t=class t extends bO{constructor(){super(...arguments),this.location=U(Xd),this.urlSerializer=U(nb),this.options=U(cb,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=U(db),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new bo,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=uO(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(s=>{s.type==="popstate"&&i(s.url,s.state)})}handleRouterEvent(i,s){if(i instanceof ch)this.stateMemento=this.createStateMemento();else if(i instanceof Oa)this.rawUrlTree=s.initialUrl;else if(i instanceof vm){if(this.urlUpdateStrategy==="eager"&&!s.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(s.finalUrl,s.initialUrl);this.setBrowserUrl(r,s)}}else i instanceof hh?(this.currentUrlTree=s.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(s.finalUrl,s.initialUrl),this.routerState=s.targetRouterState,this.urlUpdateStrategy==="deferred"&&(s.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,s))):i instanceof Eo&&(i.code===_i.GuardRejected||i.code===_i.NoDataFromResolver)?this.restoreHistory(s):i instanceof uh?this.restoreHistory(s,!0):i instanceof xa&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,s){let r=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(r)||s.extras.replaceUrl){let o=this.browserPageId,a=B(B({},s.extras.state),this.generateNgRouterState(s.id,o));this.location.replaceState(r,"",a)}else{let o=B(B({},s.extras.state),this.generateNgRouterState(s.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(i,s=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(s&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,s){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:s}:{navigationId:i}}};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=vr(t)))(r||t)}})(),t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),sh=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(sh||{});function $K(e,t){e.events.pipe(ut(n=>n instanceof xa||n instanceof Eo||n instanceof uh||n instanceof Oa),oe(n=>n instanceof xa||n instanceof Oa?sh.COMPLETE:(n instanceof Eo?n.code===_i.Redirect||n.code===_i.SupersededByNewNavigation:!1)?sh.REDIRECTING:sh.FAILED),ut(n=>n!==sh.REDIRECTING),At(1)).subscribe(()=>{t()})}function qK(e){throw e}var KK={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},QK={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Un=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=U(Jg),this.stateManager=U(bO),this.options=U(cb,{optional:!0})||{},this.pendingTasks=U(qd),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=U(HK),this.urlSerializer=U(nb),this.location=U(Xd),this.urlHandlingStrategy=U(db),this._events=new Le,this.errorHandler=this.options.errorHandler||qK,this.navigated=!1,this.routeReuseStrategy=U(WK),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=U(ub,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!U(rb,{optional:!0}),this.eventsSubscription=new vt,this.isNgZoneEnabled=U(le)instanceof le&&le.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(s=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(s,o),s instanceof Eo&&s.code!==_i.Redirect&&s.code!==_i.SupersededByNewNavigation)this.navigated=!0;else if(s instanceof xa)this.navigated=!0;else if(s instanceof fh){let a=this.urlHandlingStrategy.merge(s.url,r.currentRawUrl),l={info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||UK(r.source)};this.scheduleNavigation(a,oh,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}JK(s)&&this._events.next(s)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),oh,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,s)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",s)},0)})}navigateToSyncWithBrowser(i,s,r){let o={replaceUrl:!0},a=r?.navigationId?r:null;if(r){let c=B({},r);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let l=this.parseUrl(i);this.scheduleNavigation(l,s,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(ab),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,s={}){let{relativeTo:r,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:c}=s,u=c?this.currentUrlTree.fragment:a,h=null;switch(l){case"merge":h=B(B({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let f;try{let g=r?r.snapshot:this.routerState.snapshot.root;f=oO(g)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),f=this.currentUrlTree.root}return aO(f,i,h,u??null)}navigateByUrl(i,s={skipLocationChange:!1}){let r=Ic(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,oh,null,s)}navigate(i,s={skipLocationChange:!1}){return YK(i),this.navigateByUrl(this.createUrlTree(i,s),s)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,s){let r;if(s===!0?r=B({},KK):s===!1?r=B({},QK):r=s,Ic(i))return z1(this.currentUrlTree,i,r);let o=this.parseUrl(i);return z1(this.currentUrlTree,o,r)}removeEmptyProps(i){return Object.entries(i).reduce((s,[r,o])=>(o!=null&&(s[r]=o),s),{})}scheduleNavigation(i,s,r,o,a){if(this.disposed)return Promise.resolve(!1);let l,c,u;a?(l=a.resolve,c=a.reject,u=a.promise):u=new Promise((f,g)=>{l=f,c=g});let h=this.pendingTasks.add();return $K(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:s,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function YK(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new ue(4008,!1)}function JK(e){return!(e instanceof hh)&&!(e instanceof fh)}var XK=new Q("");function EO(e,...t){return ht([{provide:ub,multi:!0,useValue:e},[],{provide:Ac,useFactory:ZK,deps:[Un]},{provide:_c,multi:!0,useFactory:e8},t.map(n=>n.\u0275providers)])}function ZK(e){return e.routerState.root}function e8(){let e=U(Ue);return t=>{let n=e.get(us);if(t!==n.components[0])return;let i=e.get(Un),s=e.get(t8);e.get(n8)===1&&i.initialNavigation(),e.get(i8,null,Me.Optional)?.setUpPreloading(),e.get(XK,null,Me.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}var t8=new Q("",{factory:()=>new Le}),n8=new Q("",{providedIn:"root",factory:()=>1});var i8=new Q("");var PO=(()=>{let t=class t{constructor(i,s){this._renderer=i,this._elementRef=s,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(i,s){this._renderer.setProperty(this._elementRef.nativeElement,i,s)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};t.\u0275fac=function(s){return new(s||t)(ne(ba),ne(zt))},t.\u0275dir=Mt({type:t});let e=t;return e})(),FO=(()=>{let t=class t extends PO{};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=vr(t)))(r||t)}})(),t.\u0275dir=Mt({type:t,features:[ls]});let e=t;return e})(),xm=new Q("");var s8={provide:xm,useExisting:gr(()=>Us),multi:!0};function r8(){let e=_r()?_r().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var o8=new Q(""),Us=(()=>{let t=class t extends PO{constructor(i,s,r){super(i,s),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!r8())}writeValue(i){let s=i??"";this.setProperty("value",s)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};t.\u0275fac=function(s){return new(s||t)(ne(ba),ne(zt),ne(o8,8))},t.\u0275dir=Mt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(s,r){s&1&&st("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[cs([s8]),ls]});let e=t;return e})();function Ro(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}function xO(e){return e!=null&&typeof e.length=="number"}var mb=new Q(""),vb=new Q(""),a8=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Vi=class{static min(t){return l8(t)}static max(t){return c8(t)}static required(t){return u8(t)}static requiredTrue(t){return d8(t)}static email(t){return h8(t)}static minLength(t){return f8(t)}static maxLength(t){return p8(t)}static pattern(t){return g8(t)}static nullValidator(t){return OO(t)}static compose(t){return GO(t)}static composeAsync(t){return UO(t)}};function l8(e){return t=>{if(Ro(t.value)||Ro(e))return null;let n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}function c8(e){return t=>{if(Ro(t.value)||Ro(e))return null;let n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}function u8(e){return Ro(e.value)?{required:!0}:null}function d8(e){return e.value===!0?null:{required:!0}}function h8(e){return Ro(e.value)||a8.test(e.value)?null:{email:!0}}function f8(e){return t=>Ro(t.value)||!xO(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}function p8(e){return t=>xO(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}function g8(e){if(!e)return OO;let t,n;return typeof e=="string"?(n="",e.charAt(0)!=="^"&&(n+="^"),n+=e,e.charAt(e.length-1)!=="$"&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),i=>{if(Ro(i.value))return null;let s=i.value;return t.test(s)?null:{pattern:{requiredPattern:n,actualValue:s}}}}function OO(e){return null}function NO(e){return e!=null}function kO(e){return Ia(e)?qe(e):e}function LO(e){let t={};return e.forEach(n=>{t=n!=null?B(B({},t),n):t}),Object.keys(t).length===0?null:t}function VO(e,t){return t.map(n=>n(e))}function m8(e){return!e.validate}function BO(e){return e.map(t=>m8(t)?t:n=>t.validate(n))}function GO(e){if(!e)return null;let t=e.filter(NO);return t.length==0?null:function(n){return LO(VO(n,t))}}function HO(e){return e!=null?GO(BO(e)):null}function UO(e){if(!e)return null;let t=e.filter(NO);return t.length==0?null:function(n){let i=VO(n,t).map(kO);return Gy(i).pipe(oe(LO))}}function WO(e){return e!=null?UO(BO(e)):null}function DO(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function jO(e){return e._rawValidators}function zO(e){return e._rawAsyncValidators}function hb(e){return e?Array.isArray(e)?e:[e]:[]}function Rm(e,t){return Array.isArray(e)?e.includes(t):e===t}function RO(e,t){let n=hb(t);return hb(e).forEach(s=>{Rm(n,s)||n.push(s)}),n}function TO(e,t){return hb(t).filter(n=>!Rm(e,n))}var Tm=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=HO(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=WO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},Nc=class extends Tm{get formDirective(){return null}get path(){return null}},Na=class extends Tm{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Im=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},v8={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},pEe=se(B({},v8),{"[class.ng-submitted]":"isSubmitted"}),To=(()=>{let t=class t extends Im{constructor(i){super(i)}};t.\u0275fac=function(s){return new(s||t)(ne(Na,2))},t.\u0275dir=Mt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(s,r){s&2&&yo("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[ls]});let e=t;return e})(),Lc=(()=>{let t=class t extends Im{constructor(i){super(i)}};t.\u0275fac=function(s){return new(s||t)(ne(Nc,10))},t.\u0275dir=Mt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(s,r){s&2&&yo("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[ls]});let e=t;return e})();var Sh="VALID",Dm="INVALID",xc="PENDING",_h="DISABLED";function Cb(e){return(Om(e)?e.validators:e)||null}function C8(e){return Array.isArray(e)?HO(e):e||null}function yb(e,t){return(Om(t)?t.asyncValidators:e)||null}function y8(e){return Array.isArray(e)?WO(e):e||null}function Om(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function $O(e,t,n){let i=e.controls;if(!(t?Object.keys(i):i).length)throw new ue(1e3,"");if(!i[n])throw new ue(1001,"")}function qO(e,t,n){e._forEachChild((i,s)=>{if(n[s]===void 0)throw new ue(1002,"")})}var kc=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Sh}get invalid(){return this.status===Dm}get pending(){return this.status==xc}get disabled(){return this.status===_h}get enabled(){return this.status!==_h}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(RO(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(RO(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(TO(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(TO(t,this._rawAsyncValidators))}hasValidator(t){return Rm(this._rawValidators,t)}hasAsyncValidator(t){return Rm(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=xc,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=_h,this.errors=null,this._forEachChild(i=>{i.disable(se(B({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(se(B({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Sh,this._forEachChild(i=>{i.enable(se(B({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(se(B({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Sh||this.status===xc)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?_h:Sh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=xc,this._hasOwnPendingAsyncValidator=!0;let n=kO(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,s)=>i&&i._find(s),this)}getError(t,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new H,this.statusChanges=new H}_calculateStatus(){return this._allControlsDisabled()?_h:this.errors?Dm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(xc)?xc:this._anyControlsHaveStatus(Dm)?Dm:Sh}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Om(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=C8(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=y8(this._rawAsyncValidators)}},Am=class extends kc{constructor(t,n,i){super(Cb(n),yb(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,i={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){qO(this,!0,t),Object.keys(t).forEach(i=>{$O(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(i=>{let s=this.controls[i];s&&s.patchValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((i,s)=>{i.reset(t?t[s]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,i)=>(t[i]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&t(i,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,i,s)=>((i.enabled||this.disabled)&&(n[s]=i.value),n))}_reduceChildren(t,n){let i=t;return this._forEachChild((s,r)=>{i=n(i,s,r)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var fb=class extends Am{};var wb=new Q("CallSetDisabledState",{providedIn:"root",factory:()=>Sb}),Sb="always";function w8(e,t){return[...t.path,e]}function pb(e,t,n=Sb){_b(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),_8(e,t),E8(e,t),b8(e,t),S8(e,t)}function Mm(e,t,n=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),Fm(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function Pm(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function S8(e,t){if(t.valueAccessor.setDisabledState){let n=i=>{t.valueAccessor.setDisabledState(i)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function _b(e,t){let n=jO(e);t.validator!==null?e.setValidators(DO(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let i=zO(e);t.asyncValidator!==null?e.setAsyncValidators(DO(i,t.asyncValidator)):typeof i=="function"&&e.setAsyncValidators([i]);let s=()=>e.updateValueAndValidity();Pm(t._rawValidators,s),Pm(t._rawAsyncValidators,s)}function Fm(e,t){let n=!1;if(e!==null){if(t.validator!==null){let s=jO(e);if(Array.isArray(s)&&s.length>0){let r=s.filter(o=>o!==t.validator);r.length!==s.length&&(n=!0,e.setValidators(r))}}if(t.asyncValidator!==null){let s=zO(e);if(Array.isArray(s)&&s.length>0){let r=s.filter(o=>o!==t.asyncValidator);r.length!==s.length&&(n=!0,e.setAsyncValidators(r))}}}let i=()=>{};return Pm(t._rawValidators,i),Pm(t._rawAsyncValidators,i),n}function _8(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&KO(e,t)})}function b8(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&KO(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function KO(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function E8(e,t){let n=(i,s)=>{t.valueAccessor.writeValue(i),s&&t.viewToModelUpdate(i)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function D8(e,t){e==null,_b(e,t)}function R8(e,t){return Fm(e,t)}function QO(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function T8(e){return Object.getPrototypeOf(e.constructor)===FO}function I8(e,t){e._syncPendingControls(),t.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function YO(e,t){if(!t)return null;Array.isArray(t);let n,i,s;return t.forEach(r=>{r.constructor===Us?n=r:T8(r)?i=r:s=r}),s||i||n||null}function A8(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function IO(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function AO(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var Oc=class extends kc{constructor(t=null,n,i){super(Cb(n),yb(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Om(n)&&(n.nonNullable||n.initialValueIsDefault)&&(AO(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){IO(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){IO(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){AO(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var M8=e=>e instanceof Oc;var Vc=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275dir=Mt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let e=t;return e})(),P8={provide:xm,useExisting:gr(()=>bb),multi:!0},bb=(()=>{let t=class t extends FO{writeValue(i){let s=i??"";this.setProperty("value",s)}registerOnChange(i){this.onChange=s=>{i(s==""?null:parseFloat(s))}}};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=vr(t)))(r||t)}})(),t.\u0275dir=Mt({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(s,r){s&1&&st("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[cs([P8]),ls]});let e=t;return e})();var Eb=new Q(""),F8={provide:Na,useExisting:gr(()=>Db)},Db=(()=>{let t=class t extends Na{set isDisabled(i){}constructor(i,s,r,o,a){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=a,this.update=new H,this._ngModelWarningSent=!1,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=YO(this,r)}ngOnChanges(i){if(this._isControlChanged(i)){let s=i.form.previousValue;s&&Mm(s,this,!1),pb(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}QO(i,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Mm(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_isControlChanged(i){return i.hasOwnProperty("form")}};t._ngModelWarningSentOnce=!1,t.\u0275fac=function(s){return new(s||t)(ne(mb,10),ne(vb,10),ne(xm,10),ne(Eb,8),ne(wb,8))},t.\u0275dir=Mt({type:t,selectors:[["","formControl",""]],inputs:{form:[en.None,"formControl","form"],isDisabled:[en.None,"disabled","isDisabled"],model:[en.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[cs([F8]),ls,nn]});let e=t;return e})(),x8={provide:Nc,useExisting:gr(()=>ka)},ka=(()=>{let t=class t extends Nc{constructor(i,s,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new H,this._setValidators(i),this._setAsyncValidators(s)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Fm(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let s=this.form.get(i.path);return pb(s,i,this.callSetDisabledState),s.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),s}getControl(i){return this.form.get(i.path)}removeControl(i){Mm(i.control||null,i,!1),A8(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,s){this.form.get(i.path).setValue(s)}onSubmit(i){return this.submitted=!0,I8(this.form,this.directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_updateDomValue(){this.directives.forEach(i=>{let s=i.control,r=this.form.get(i.path);s!==r&&(Mm(s||null,i),M8(r)&&(pb(r,i,this.callSetDisabledState),i.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let s=this.form.get(i.path);D8(s,i),s.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let s=this.form.get(i.path);s&&R8(s,i)&&s.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){_b(this.form,this),this._oldForm&&Fm(this._oldForm,this)}_checkFormPresent(){this.form}};t.\u0275fac=function(s){return new(s||t)(ne(mb,10),ne(vb,10),ne(wb,8))},t.\u0275dir=Mt({type:t,selectors:[["","formGroup",""]],hostBindings:function(s,r){s&1&&st("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:[en.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[cs([x8]),ls,nn]});let e=t;return e})();var O8={provide:Na,useExisting:gr(()=>La)},La=(()=>{let t=class t extends Na{set isDisabled(i){}constructor(i,s,r,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new H,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(s),this._setAsyncValidators(r),this.valueAccessor=YO(this,o)}ngOnChanges(i){this._added||this._setUpControl(),QO(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return w8(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};t._ngModelWarningSentOnce=!1,t.\u0275fac=function(s){return new(s||t)(ne(Nc,13),ne(mb,10),ne(vb,10),ne(xm,10),ne(Eb,8))},t.\u0275dir=Mt({type:t,selectors:[["","formControlName",""]],inputs:{name:[en.None,"formControlName","name"],isDisabled:[en.None,"disabled","isDisabled"],model:[en.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[cs([O8]),ls,nn]});let e=t;return e})();var N8=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=vi({type:t}),t.\u0275inj=mi({});let e=t;return e})(),gb=class extends kc{constructor(t,n,i){super(Cb(n),yb(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,n={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(t,n,i={}){this.controls.splice(t,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,n={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(t,n,i={}){let s=this._adjustIndex(t);s<0&&(s=0),this.controls[s]&&this.controls[s]._registerOnCollectionChange(()=>{}),this.controls.splice(s,1),n&&(this.controls.splice(s,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,n={}){qO(this,!1,t),t.forEach((i,s)=>{$O(this,!1,s),this.at(s).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(t.forEach((i,s)=>{this.at(s)&&this.at(s).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t=[],n={}){this._forEachChild((i,s)=>{i.reset(t[s],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((n,i)=>i._syncPendingControls()?!0:n,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((n,i)=>{t(n,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(n=>n.enabled&&t(n))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function MO(e){return!!e&&(e.asyncValidators!==void 0||e.validators!==void 0||e.updateOn!==void 0)}var Bc=(()=>{let t=class t{constructor(){this.useNonNullable=!1}get nonNullable(){let i=new t;return i.useNonNullable=!0,i}group(i,s=null){let r=this._reduceControls(i),o={};return MO(s)?o=s:s!==null&&(o.validators=s.validator,o.asyncValidators=s.asyncValidator),new Am(r,o)}record(i,s=null){let r=this._reduceControls(i);return new fb(r,s)}control(i,s,r){let o={};return this.useNonNullable?(MO(s)?o=s:(o.validators=s,o.asyncValidators=r),new Oc(i,se(B({},o),{nonNullable:!0}))):new Oc(i,s,r)}array(i,s,r){let o=i.map(a=>this._createControl(a));return new gb(o,s,r)}_reduceControls(i){let s={};return Object.keys(i).forEach(r=>{s[r]=this._createControl(i[r])}),s}_createControl(i){if(i instanceof Oc)return i;if(i instanceof kc)return i;if(Array.isArray(i)){let s=i[0],r=i.length>1?i[1]:null,o=i.length>2?i[2]:null;return this.control(s,r,o)}else return this.control(i)}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Io=(()=>{let t=class t{static withConfig(i){return{ngModule:t,providers:[{provide:Eb,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:wb,useValue:i.callSetDisabledState??Sb}]}}};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=vi({type:t}),t.\u0275inj=mi({imports:[N8]});let e=t;return e})();function k8(e,t){if(e&1&&(yr(0),mr(),Y(1,"svg",1),de(2,"path",2),J(),wr()),e&2){let n=t.$implicit;ve(),Ra("top",n.top)("left",n.left)("width",n.size)("height",n.size)("opacity",n.opacity)}}var km=(()=>{let t=class t{constructor(){this.dollarSigns=5,this.minSize=50,this.maxSize=80,this.minOpacity=.05,this.maxOpacity=.15,this.random=!1,this.dollarSignArray=[{top:"70%",left:"25%",size:"200px",opacity:.1},{top:"20%",left:"75%",size:"150px",opacity:.05},{top:"25%",left:"50%",size:"70px",opacity:.15},{top:"60%",left:"40%",size:"80px",opacity:.1}]}ngOnInit(){this.random&&this.generateDollarSigns()}generateDollarSigns(){this.dollarSignArray=Array(this.dollarSigns).fill(null).map(()=>({top:`${this.getRandomNumber(10,90)}%`,left:`${this.getRandomNumber(10,90)}%`,size:`${this.getRandomNumber(this.minSize,this.maxSize)}px`,opacity:this.getRandomNumber(this.minOpacity,this.maxOpacity)}))}getRandomNumber(i,s){return Math.random()*(s-i)+i}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Pe({type:t,selectors:[["app-dollar-sign-svgs"]],inputs:{dollarSigns:"dollarSigns",minSize:"minSize",maxSize:"maxSize",minOpacity:"minOpacity",maxOpacity:"maxOpacity",random:"random"},standalone:!0,features:[Fe],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["viewBox","0 0 24 24",1,"position-absolute","dollar-sign","z-0"],["fill","#fd7e14","d","M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M11,17H13V16H14A1,1 0 0,0 15,15V12A1,1 0 0,0 14,11H11V10H15V8H13V7H11V8H10A1,1 0 0,0 9,9V12A1,1 0 0,0 10,13H13V14H9V16H11V17Z"]],template:function(s,r){s&1&&Ct(0,k8,3,10,"ng-container",0),s&2&&_e("ngForOf",r.dollarSignArray)},dependencies:[vn,So],styles:[".dollar-sign[_ngcontent-%COMP%]{pointer-events:none}"]});let e=t;return e})();function L8(e,t){e&1&&(yr(0),mr(),Y(1,"svg",1),de(2,"path",2),J(),wr())}function V8(e,t){e&1&&(yr(0),mr(),Y(1,"svg",3),de(2,"path",4),J(),wr())}var Lm=(()=>{let t=class t{constructor(){this.wave="top"}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Pe({type:t,selectors:[["app-wave"]],inputs:{wave:"wave"},standalone:!0,features:[Fe],decls:2,vars:2,consts:[[4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320",1,"wave-top","z-0"],["fill","#ff9d00","fill-opacity","0.2","d","M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,165.3C1248,171,1344,149,1392,138.7L1440,128L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320",1,"wave-bottom"],["fill","#ff9d00","fill-opacity","0.2","d","M0,224L48,213.3C96,203,192,181,288,181.3C384,181,480,203,576,224C672,245,768,267,864,250.7C960,235,1056,181,1152,165.3C1248,149,1344,171,1392,181.3L1440,192L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"]],template:function(s,r){s&1&&Ct(0,L8,3,0,"ng-container",0)(1,V8,3,0,"ng-container",0),s&2&&(_e("ngIf",r.wave==="top"),ve(),_e("ngIf",r.wave==="bottom"))},dependencies:[vn,_o],styles:[".wave-top[_ngcontent-%COMP%], .wave-bottom[_ngcontent-%COMP%]{position:absolute;width:100%}.wave-top[_ngcontent-%COMP%]{top:0}.wave-bottom[_ngcontent-%COMP%]{bottom:0}"]});let e=t;return e})();var JO=(()=>{let t=class t{constructor(){this.size=250}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Pe({type:t,selectors:[["app-loader"]],inputs:{size:"size"},standalone:!0,features:[Fe],decls:4,vars:2,consts:[["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24"],["d","M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M11,17H13V16H14A1,1 0 0,0 15,15V12A1,1 0 0,0 14,11H11V10H15V8H13V7H11V8H10A1,1 0 0,0 9,9V12A1,1 0 0,0 10,13H13V14H9V16H11V17Z",1,"loader"]],template:function(s,r){s&1&&(mr(),Y(0,"svg",0)(1,"style"),Ae(2," @keyframes spin { 0% { transform: rotate(0deg) scale(1); } 25% { transform: rotate(90deg) scale(1.1); } 50% { transform: rotate(180deg) scale(1); } 75% { transform: rotate(270deg) scale(1.1); } 100% { transform: rotate(360deg) scale(1); } } .loader { animation: spin 2s linear infinite; transform-origin: center; fill: #fd7e14; stroke: #000000; stroke-width: 0.5; } "),J(),de(3,"path",1),J()),s&2&&Da("width",r.size)("height",r.size)},styles:["svg[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}"]});let e=t;return e})();var B8="firebase",G8="10.12.3";pe(B8,G8,"app");var Dt=new pr("ANGULARFIRE2_VERSION"),Hc=e=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${e} in the constructor, first ensure that ${e} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${e})\`.`;function En(e,t,n){if(t){if(t.length===1)return t[0];let r=t.filter(o=>o.app===n);if(r.length===1)return r[0]}return n.container.getProvider(e).getImmediate({optional:!0})}var yn=(e,t)=>{let n=t?[t]:dp(),i=[];return n.forEach(s=>{s.container.getProvider(e).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},Wn=class{constructor(){return yn(H8)}},H8="app-check";function Gc(){}var Vm=class{zone;delegate;constructor(t,n=Ly){this.zone=t,this.delegate=n}now(){return this.delegate.now()}schedule(t,n,i){let s=this.zone,r=function(o){s.runGuarded(()=>{t.apply(this,[o])})};return this.delegate.schedule(r,n,i)}},Rb=class{zone;task=null;constructor(t){this.zone=t}call(t,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Gc,{},Gc,Gc)),n.pipe(dt({next:i,complete:i,error:i})).subscribe(t).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Nt=(()=>{class e{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Vm(Zone.current)),this.insideAngular=n.run(()=>new Vm(Zone.current,Pi)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||e)(K(le))};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Bm(){let e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return e}function U8(e){return Bm().ngZone.runOutsideAngular(()=>e())}function Va(e){return Bm().ngZone.run(()=>e())}function Tb(e){return W8(Bm())(e)}function W8(e){return function(n){return n=n.lift(new Rb(e.ngZone)),n.pipe(Fi(e.outsideAngular),hi(e.insideAngular))}}var j8=(e,t)=>function(){let i=arguments;return t&&setTimeout(()=>{t.state==="scheduled"&&t.invoke()},10),Va(()=>e.apply(void 0,i))},Oe=(e,t)=>function(){let n,i=arguments;for(let r=0;r<arguments.length;r++)typeof i[r]=="function"&&(t&&(n||=Va(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Gc,{},Gc,Gc))),i[r]=j8(i[r],n));let s=U8(()=>e.apply(this,i));if(!t)if(s instanceof re){let r=Bm();return s.pipe(Fi(r.outsideAngular),hi(r.insideAngular))}else return Va(()=>s);return s instanceof re?s.pipe(Tb):s instanceof Promise?Va(()=>new Promise((r,o)=>s.then(a=>Va(()=>r(a)),a=>Va(()=>o(a))))):typeof s=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),s.apply(this,arguments)}:Va(()=>s)};var Pt=class{constructor(t){return t}},$t=class{constructor(){return dp()}};function $8(e){return e&&e.length===1?e[0]:new Pt(Xt())}var Ib=new Q("angularfire2._apps"),q8={provide:Pt,useFactory:$8,deps:[[new Te,Ib]]},K8={provide:$t,deps:[[new Te,Ib]]};function Q8(e){return(t,n)=>{let i=n.get(on);pe("angularfire",Dt.full,"core"),pe("angularfire",Dt.full,"app"),pe("angular",o_.full,i.toString());let s=t.runOutsideAngular(()=>e(n));return new Pt(s)}}function XO(e,...t){return ht([q8,K8,{provide:Ib,useFactory:Q8(e),multi:!0,deps:[le,Ue,Nt,...t]}])}var ZO=Oe(hM,!0);function tN(e){return new re(function(t){var n=fp(e,t.next.bind(t),t.error.bind(t),t.complete.bind(t));return{unsubscribe:n}})}function nN(e){return new re(function(t){var n=hp(e,t.next.bind(t),t.error.bind(t),t.complete.bind(t));return{unsubscribe:n}})}var iN="auth",Bi=class{constructor(t){return t}},ds=class{constructor(){return yn(iN)}};var Ab=new Q("angularfire2.auth-instances");function W9(e,t){let n=En(iN,e,t);return n&&new Bi(n)}function j9(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new Bi(i)}}var z9={provide:ds,deps:[[new Te,Ab]]},$9={provide:Bi,useFactory:W9,deps:[[new Te,Ab],Pt]};function sN(e,...t){return pe("angularfire",Dt.full,"auth"),ht([$9,z9,{provide:Ab,useFactory:j9(e),multi:!0,deps:[le,Ue,Nt,$t,[new Te,Wn],...t]}])}var bh=Oe(tN,!0),rN=Oe(nN,!0);var oN=Oe(_y,!0);var aN=Oe(Dy,!0);var lN=Oe(by,!0);var cN=Oe(Ey,!0);var Ws=(()=>{let t=class t{constructor(i,s){this.firebaseAuth=i,this.router=s,this.user$=rN(this.firebaseAuth),this.currentUserSig=Ux(void 0)}register(i,s,r){let o=oN(this.firebaseAuth,i,s).then(a=>cN(a.user,{displayName:r}));return qe(o)}login(i,s){let r=lN(this.firebaseAuth,i,s).then(()=>{});return qe(r)}logout(){this.firebaseAuth.signOut().then(()=>{this.currentUserSig.set(null),this.router.navigateByUrl("/login")})}};t.\u0275fac=function(s){return new(s||t)(K(Bi),K(Un))},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var uN=(()=>{let t=class t{constructor(i){this.platformId=i}isBrowser(){return m_(this.platformId)}isServer(){return br(this.platformId)}};t.\u0275fac=function(s){return new(s||t)(K(on))},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function K9(e,t){e&1&&(Y(0,"div"),de(1,"app-loader"),J())}function Q9(e,t){if(e&1){let n=ii();de(0,"app-wave",2),Y(1,"div",3),de(2,"app-dollar-sign-svgs",2),Y(3,"form",4),st("ngSubmit",function(){sn(n);let s=yt();return rn(s.login())}),Y(4,"div",5)(5,"div",6)(6,"h1",7),Ae(7,"Login"),J(),Y(8,"h5",8),Ae(9,"Please sign in to continue"),J(),Y(10,"div",9),de(11,"input",10),J(),Y(12,"div",11),de(13,"input",12),J(),Y(14,"button",13),Ae(15," Login "),de(16,"i",14),J(),Y(17,"div",15)(18,"a",16),st("click",function(){sn(n);let s=yt();return rn(s.navigateToRegister())}),Ae(19,"Sign Up"),J()()()()()(),de(20,"app-wave",17)}if(e&2){let n=yt();ve(3),_e("formGroup",n.loginForm),ve(17),_e("wave","bottom")}}var dN=(()=>{let t=class t{constructor(i,s,r,o){this.fb=i,this.auth=s,this.router=r,this.platformService=o,this.isLoading=!0,this.loginForm=this.fb.nonNullable.group({email:[""],password:[""]}),this.error=null,this.platformService.isBrowser()&&(this.isLoading=!1)}login(){this.isLoading=!0;let i=this.loginForm.getRawValue();this.auth.login(i.email,i.password).subscribe({next:()=>this.router.navigateByUrl("/dashboard"),error:s=>{this.error=s.code},complete:()=>{this.isLoading=!1}})}navigateToRegister(){this.router.navigateByUrl("/register")}};t.\u0275fac=function(s){return new(s||t)(ne(Bc),ne(Ws),ne(Un),ne(uN))},t.\u0275cmp=Pe({type:t,selectors:[["app-login"]],standalone:!0,features:[Fe],decls:3,vars:2,consts:[["loginFormTemplate",""],[4,"ngIf","ngIfElse"],[1,"z-0"],[1,"container-fluid","vh-100","d-flex","flex-column","align-items-center","justify-content-center","bg-light","z-n1"],[1,"z-3",3,"ngSubmit","formGroup"],[1,"d-flex","justify-content-center","align-items-center"],[1,"row","col-11","col-md-9","col-lg-7","col-xl-5"],[1,"fs-1","fw-bolder","text-start"],[1,"fs-6","text-muted","mb-4"],[1,"mb-0"],["id","email","type","email","formControlName","email","placeholder","Email",1,"email","w-100","shadow-none"],[1,"mb-4","position-relative"],["id","password","type","password","formControlName","password","placeholder","Password",1,"password","w-100"],["type","submit",1,"col-4","offset-8","btn","btn-warning","text-white","mb-3"],[1,"bi","bi-arrow-right"],[1,"text-end"],["role","button",1,"text-decoration-none","hyperlink",3,"click"],[1,"z-0",3,"wave"]],template:function(s,r){if(s&1&&Ct(0,K9,2,0,"div",1)(1,Q9,21,2,"ng-template",null,0,Jd),s&2){let o=n_(2);_e("ngIf",r.isLoading)("ngIfElse",o)}},dependencies:[vn,_o,Io,Vc,Us,To,Lc,ka,La,km,Lm,JO],styles:["svg[_ngcontent-%COMP%]{pointer-events:none}.email[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px;border-bottom:none}.password[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px}"]});let e=t;return e})();var hN=(()=>{let t=class t{constructor(i,s,r){this.fb=i,this.authService=s,this.router=r,this.registerForm=this.fb.nonNullable.group({email:["",Vi.required],username:["",Vi.required],password:["",Vi.required]}),this.error=null}register(){console.log(this.registerForm.value);let i=this.registerForm.getRawValue();this.authService.register(i.email,i.password,i.username).subscribe({next:()=>this.router.navigate(["/login"]),error:s=>{this.error=s.code}})}navigateToLogin(){this.router.navigateByUrl("/login")}};t.\u0275fac=function(s){return new(s||t)(ne(Bc),ne(Ws),ne(Un))},t.\u0275cmp=Pe({type:t,selectors:[["app-register"]],standalone:!0,features:[Fe],decls:23,vars:2,consts:[[1,"z-0"],[1,"container-fluid","vh-100","d-flex","flex-column","align-items-center","justify-content-center","bg-light","z-n1"],[1,"z-3",3,"ngSubmit","formGroup"],[1,"d-flex","justify-content-center","align-items-center"],[1,"row","col-11","col-md-9","col-lg-7","col-xl-5"],[1,"fs-1","fw-bolder","text-start"],[1,"fs-6","text-muted","mb-4"],[1,"mb-0"],["id","email","type","email","formControlName","email","placeholder","Email",1,"email","w-100","shadow-none"],[1,"mb-0","position-relative"],["id","username","type","text","formControlName","username","placeholder","Username",1,"username","w-100"],[1,"mb-4","position-relative"],["id","password","type","password","formControlName","password","placeholder","Password",1,"password","w-100"],["type","submit",1,"col-4","offset-8","btn","btn-warning","text-white","mb-3"],[1,"bi","bi-arrow-right"],[1,"text-end"],["role","button",1,"text-decoration-none",2,"color","#fd7e14",3,"click"],[1,"z-0",3,"wave"]],template:function(s,r){s&1&&(de(0,"app-wave",0),Y(1,"div",1),de(2,"app-dollar-sign-svgs",0),Y(3,"form",2),st("ngSubmit",function(){return r.register()}),Y(4,"div",3)(5,"div",4)(6,"h1",5),Ae(7,"Register"),J(),Y(8,"h5",6),Ae(9,"Please sign up to continue"),J(),Y(10,"div",7),de(11,"input",8),J(),Y(12,"div",9),de(13,"input",10),J(),Y(14,"div",11),de(15,"input",12),J(),Y(16,"button",13),Ae(17," Register "),de(18,"i",14),J(),Y(19,"div",15)(20,"a",16),st("click",function(){return r.navigateToLogin()}),Ae(21,"Login"),J()()()()()(),de(22,"app-wave",17)),s&2&&(ve(3),_e("formGroup",r.registerForm),ve(19),_e("wave","bottom"))},dependencies:[Io,Vc,Us,To,Lc,ka,La,Lm,km],styles:[".email[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px;border-bottom:none}.password[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px;border-top:none}"]});let e=t;return e})();var Y9=(()=>{let t=class t{constructor(i,s){this.auth=i,this.router=s}canActivate(){return bh(this.auth).pipe(At(1),oe(i=>i?!0:(this.router.navigate(["/login"]),!1)))}};t.\u0275fac=function(s){return new(s||t)(K(Bi),K(Un))},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),J9=(()=>{let t=class t{constructor(i,s){this.auth=i,this.router=s}canActivate(){return bh(this.auth).pipe(At(1),oe(i=>i?(this.router.navigate(["/dashboard"]),!1):!0))}};t.\u0275fac=function(s){return new(s||t)(K(Bi),K(Un))},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),fN=(e,t)=>U(Y9).canActivate(),Gm=(e,t)=>U(J9).canActivate();var kt="top",wn="bottom",an="right",qt="left",Hm="auto",Ao=[kt,wn,an,qt],Er="start",Ba="end",pN="clippingParents",Um="viewport",Uc="popper",gN="reference",Pb=Ao.reduce(function(e,t){return e.concat([t+"-"+Er,t+"-"+Ba])},[]),Wm=[].concat(Ao,[Hm]).reduce(function(e,t){return e.concat([t,t+"-"+Er,t+"-"+Ba])},[]),X9="beforeRead",Z9="read",e7="afterRead",t7="beforeMain",n7="main",i7="afterMain",s7="beforeWrite",r7="write",o7="afterWrite",mN=[X9,Z9,e7,t7,n7,i7,s7,r7,o7];function ln(e){return e?(e.nodeName||"").toLowerCase():null}function mt(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Gi(e){var t=mt(e).Element;return e instanceof t||e instanceof Element}function Kt(e){var t=mt(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Wc(e){if(typeof ShadowRoot>"u")return!1;var t=mt(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function a7(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var i=t.styles[n]||{},s=t.attributes[n]||{},r=t.elements[n];!Kt(r)||!ln(r)||(Object.assign(r.style,i),Object.keys(s).forEach(function(o){var a=s[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function l7(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(i){var s=t.elements[i],r=t.attributes[i]||{},o=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:n[i]),a=o.reduce(function(l,c){return l[c]="",l},{});!Kt(s)||!ln(s)||(Object.assign(s.style,a),Object.keys(r).forEach(function(l){s.removeAttribute(l)}))})}}var vN={name:"applyStyles",enabled:!0,phase:"write",fn:a7,effect:l7,requires:["computeStyles"]};function cn(e){return e.split("-")[0]}var hs=Math.max,Ga=Math.min,Dr=Math.round;function jc(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Dh(){return!/^((?!chrome|android).)*safari/i.test(jc())}function Hi(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=e.getBoundingClientRect(),s=1,r=1;t&&Kt(e)&&(s=e.offsetWidth>0&&Dr(i.width)/e.offsetWidth||1,r=e.offsetHeight>0&&Dr(i.height)/e.offsetHeight||1);var o=Gi(e)?mt(e):window,a=o.visualViewport,l=!Dh()&&n,c=(i.left+(l&&a?a.offsetLeft:0))/s,u=(i.top+(l&&a?a.offsetTop:0))/r,h=i.width/s,f=i.height/r;return{width:h,height:f,top:u,right:c+h,bottom:u+f,left:c,x:c,y:u}}function Ha(e){var t=Hi(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function Rh(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Wc(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function jn(e){return mt(e).getComputedStyle(e)}function Fb(e){return["table","td","th"].indexOf(ln(e))>=0}function Sn(e){return((Gi(e)?e.ownerDocument:e.document)||window.document).documentElement}function Rr(e){return ln(e)==="html"?e:e.assignedSlot||e.parentNode||(Wc(e)?e.host:null)||Sn(e)}function CN(e){return!Kt(e)||jn(e).position==="fixed"?null:e.offsetParent}function c7(e){var t=/firefox/i.test(jc()),n=/Trident/i.test(jc());if(n&&Kt(e)){var i=jn(e);if(i.position==="fixed")return null}var s=Rr(e);for(Wc(s)&&(s=s.host);Kt(s)&&["html","body"].indexOf(ln(s))<0;){var r=jn(s);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||t&&r.willChange==="filter"||t&&r.filter&&r.filter!=="none")return s;s=s.parentNode}return null}function fs(e){for(var t=mt(e),n=CN(e);n&&Fb(n)&&jn(n).position==="static";)n=CN(n);return n&&(ln(n)==="html"||ln(n)==="body"&&jn(n).position==="static")?t:n||c7(e)||t}function Ua(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Wa(e,t,n){return hs(e,Ga(t,n))}function yN(e,t,n){var i=Wa(e,t,n);return i>n?n:i}function Th(){return{top:0,right:0,bottom:0,left:0}}function Ih(e){return Object.assign({},Th(),e)}function Ah(e,t){return t.reduce(function(n,i){return n[i]=e,n},{})}var u7=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,Ih(typeof t!="number"?t:Ah(t,Ao))};function d7(e){var t,n=e.state,i=e.name,s=e.options,r=n.elements.arrow,o=n.modifiersData.popperOffsets,a=cn(n.placement),l=Ua(a),c=[qt,an].indexOf(a)>=0,u=c?"height":"width";if(!(!r||!o)){var h=u7(s.padding,n),f=Ha(r),g=l==="y"?kt:qt,v=l==="y"?wn:an,y=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],C=o[l]-n.rects.reference[l],E=fs(r),I=E?l==="y"?E.clientHeight||0:E.clientWidth||0:0,T=y/2-C/2,x=h[g],z=I-f[u]-h[v],V=I/2-f[u]/2+T,b=Wa(x,V,z),S=l;n.modifiersData[i]=(t={},t[S]=b,t.centerOffset=b-V,t)}}function h7(e){var t=e.state,n=e.options,i=n.element,s=i===void 0?"[data-popper-arrow]":i;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||Rh(t.elements.popper,s)&&(t.elements.arrow=s))}var xb={name:"arrow",enabled:!0,phase:"main",fn:d7,effect:h7,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ui(e){return e.split("-")[1]}var f7={top:"auto",right:"auto",bottom:"auto",left:"auto"};function p7(e,t){var n=e.x,i=e.y,s=t.devicePixelRatio||1;return{x:Dr(n*s)/s||0,y:Dr(i*s)/s||0}}function wN(e){var t,n=e.popper,i=e.popperRect,s=e.placement,r=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,h=e.isFixed,f=o.x,g=f===void 0?0:f,v=o.y,y=v===void 0?0:v,C=typeof u=="function"?u({x:g,y}):{x:g,y};g=C.x,y=C.y;var E=o.hasOwnProperty("x"),I=o.hasOwnProperty("y"),T=qt,x=kt,z=window;if(c){var V=fs(n),b="clientHeight",S="clientWidth";if(V===mt(n)&&(V=Sn(n),jn(V).position!=="static"&&a==="absolute"&&(b="scrollHeight",S="scrollWidth")),V=V,s===kt||(s===qt||s===an)&&r===Ba){x=wn;var _=h&&V===z&&z.visualViewport?z.visualViewport.height:V[b];y-=_-i.height,y*=l?1:-1}if(s===qt||(s===kt||s===wn)&&r===Ba){T=an;var R=h&&V===z&&z.visualViewport?z.visualViewport.width:V[S];g-=R-i.width,g*=l?1:-1}}var A=Object.assign({position:a},c&&f7),M=u===!0?p7({x:g,y},mt(n)):{x:g,y};if(g=M.x,y=M.y,l){var D;return Object.assign({},A,(D={},D[x]=I?"0":"",D[T]=E?"0":"",D.transform=(z.devicePixelRatio||1)<=1?"translate("+g+"px, "+y+"px)":"translate3d("+g+"px, "+y+"px, 0)",D))}return Object.assign({},A,(t={},t[x]=I?y+"px":"",t[T]=E?g+"px":"",t.transform="",t))}function g7(e){var t=e.state,n=e.options,i=n.gpuAcceleration,s=i===void 0?!0:i,r=n.adaptive,o=r===void 0?!0:r,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:cn(t.placement),variation:Ui(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,wN(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,wN(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var SN={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:g7,data:{}};var jm={passive:!0};function m7(e){var t=e.state,n=e.instance,i=e.options,s=i.scroll,r=s===void 0?!0:s,o=i.resize,a=o===void 0?!0:o,l=mt(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&c.forEach(function(u){u.addEventListener("scroll",n.update,jm)}),a&&l.addEventListener("resize",n.update,jm),function(){r&&c.forEach(function(u){u.removeEventListener("scroll",n.update,jm)}),a&&l.removeEventListener("resize",n.update,jm)}}var _N={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:m7,data:{}};var v7={left:"right",right:"left",bottom:"top",top:"bottom"};function zc(e){return e.replace(/left|right|bottom|top/g,function(t){return v7[t]})}var C7={start:"end",end:"start"};function zm(e){return e.replace(/start|end/g,function(t){return C7[t]})}function ja(e){var t=mt(e),n=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:n,scrollTop:i}}function za(e){return Hi(Sn(e)).left+ja(e).scrollLeft}function Ob(e,t){var n=mt(e),i=Sn(e),s=n.visualViewport,r=i.clientWidth,o=i.clientHeight,a=0,l=0;if(s){r=s.width,o=s.height;var c=Dh();(c||!c&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:a+za(e),y:l}}function Nb(e){var t,n=Sn(e),i=ja(e),s=(t=e.ownerDocument)==null?void 0:t.body,r=hs(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=hs(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-i.scrollLeft+za(e),l=-i.scrollTop;return jn(s||n).direction==="rtl"&&(a+=hs(n.clientWidth,s?s.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function $a(e){var t=jn(e),n=t.overflow,i=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+i)}function $m(e){return["html","body","#document"].indexOf(ln(e))>=0?e.ownerDocument.body:Kt(e)&&$a(e)?e:$m(Rr(e))}function Mo(e,t){var n;t===void 0&&(t=[]);var i=$m(e),s=i===((n=e.ownerDocument)==null?void 0:n.body),r=mt(i),o=s?[r].concat(r.visualViewport||[],$a(i)?i:[]):i,a=t.concat(o);return s?a:a.concat(Mo(Rr(o)))}function $c(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function y7(e,t){var n=Hi(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function bN(e,t,n){return t===Um?$c(Ob(e,n)):Gi(t)?y7(t,n):$c(Nb(Sn(e)))}function w7(e){var t=Mo(Rr(e)),n=["absolute","fixed"].indexOf(jn(e).position)>=0,i=n&&Kt(e)?fs(e):e;return Gi(i)?t.filter(function(s){return Gi(s)&&Rh(s,i)&&ln(s)!=="body"}):[]}function kb(e,t,n,i){var s=t==="clippingParents"?w7(e):[].concat(t),r=[].concat(s,[n]),o=r[0],a=r.reduce(function(l,c){var u=bN(e,c,i);return l.top=hs(u.top,l.top),l.right=Ga(u.right,l.right),l.bottom=Ga(u.bottom,l.bottom),l.left=hs(u.left,l.left),l},bN(e,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Mh(e){var t=e.reference,n=e.element,i=e.placement,s=i?cn(i):null,r=i?Ui(i):null,o=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,l;switch(s){case kt:l={x:o,y:t.y-n.height};break;case wn:l={x:o,y:t.y+t.height};break;case an:l={x:t.x+t.width,y:a};break;case qt:l={x:t.x-n.width,y:a};break;default:l={x:t.x,y:t.y}}var c=s?Ua(s):null;if(c!=null){var u=c==="y"?"height":"width";switch(r){case Er:l[c]=l[c]-(t[u]/2-n[u]/2);break;case Ba:l[c]=l[c]+(t[u]/2-n[u]/2);break;default:}}return l}function Po(e,t){t===void 0&&(t={});var n=t,i=n.placement,s=i===void 0?e.placement:i,r=n.strategy,o=r===void 0?e.strategy:r,a=n.boundary,l=a===void 0?pN:a,c=n.rootBoundary,u=c===void 0?Um:c,h=n.elementContext,f=h===void 0?Uc:h,g=n.altBoundary,v=g===void 0?!1:g,y=n.padding,C=y===void 0?0:y,E=Ih(typeof C!="number"?C:Ah(C,Ao)),I=f===Uc?gN:Uc,T=e.rects.popper,x=e.elements[v?I:f],z=kb(Gi(x)?x:x.contextElement||Sn(e.elements.popper),l,u,o),V=Hi(e.elements.reference),b=Mh({reference:V,element:T,strategy:"absolute",placement:s}),S=$c(Object.assign({},T,b)),_=f===Uc?S:V,R={top:z.top-_.top+E.top,bottom:_.bottom-z.bottom+E.bottom,left:z.left-_.left+E.left,right:_.right-z.right+E.right},A=e.modifiersData.offset;if(f===Uc&&A){var M=A[s];Object.keys(R).forEach(function(D){var fn=[an,wn].indexOf(D)>=0?1:-1,ci=[kt,wn].indexOf(D)>=0?"y":"x";R[D]+=M[ci]*fn})}return R}function Lb(e,t){t===void 0&&(t={});var n=t,i=n.placement,s=n.boundary,r=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?Wm:l,u=Ui(i),h=u?a?Pb:Pb.filter(function(v){return Ui(v)===u}):Ao,f=h.filter(function(v){return c.indexOf(v)>=0});f.length===0&&(f=h);var g=f.reduce(function(v,y){return v[y]=Po(e,{placement:y,boundary:s,rootBoundary:r,padding:o})[cn(y)],v},{});return Object.keys(g).sort(function(v,y){return g[v]-g[y]})}function S7(e){if(cn(e)===Hm)return[];var t=zc(e);return[zm(e),t,zm(t)]}function _7(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var s=n.mainAxis,r=s===void 0?!0:s,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,f=n.altBoundary,g=n.flipVariations,v=g===void 0?!0:g,y=n.allowedAutoPlacements,C=t.options.placement,E=cn(C),I=E===C,T=l||(I||!v?[zc(C)]:S7(C)),x=[C].concat(T).reduce(function(Qr,ei){return Qr.concat(cn(ei)===Hm?Lb(t,{placement:ei,boundary:u,rootBoundary:h,padding:c,flipVariations:v,allowedAutoPlacements:y}):ei)},[]),z=t.rects.reference,V=t.rects.popper,b=new Map,S=!0,_=x[0],R=0;R<x.length;R++){var A=x[R],M=cn(A),D=Ui(A)===Er,fn=[kt,wn].indexOf(M)>=0,ci=fn?"width":"height",xn=Po(t,{placement:A,boundary:u,rootBoundary:h,altBoundary:f,padding:c}),pn=fn?D?an:qt:D?wn:kt;z[ci]>V[ci]&&(pn=zc(pn));var Es=zc(pn),Zi=[];if(r&&Zi.push(xn[M]<=0),a&&Zi.push(xn[pn]<=0,xn[Es]<=0),Zi.every(function(Qr){return Qr})){_=A,S=!1;break}b.set(A,Zi)}if(S)for(var Qo=v?3:1,qu=function(ei){var Yo=x.find(function(Ds){var ir=b.get(Ds);if(ir)return ir.slice(0,ei).every(function(Ku){return Ku})});if(Yo)return _=Yo,"break"},Zn=Qo;Zn>0;Zn--){var It=qu(Zn);if(It==="break")break}t.placement!==_&&(t.modifiersData[i]._skip=!0,t.placement=_,t.reset=!0)}}var Vb={name:"flip",enabled:!0,phase:"main",fn:_7,requiresIfExists:["offset"],data:{_skip:!1}};function b7(e,t,n){var i=cn(e),s=[qt,kt].indexOf(i)>=0?-1:1,r=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,o=r[0],a=r[1];return o=o||0,a=(a||0)*s,[qt,an].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function E7(e){var t=e.state,n=e.options,i=e.name,s=n.offset,r=s===void 0?[0,0]:s,o=Wm.reduce(function(u,h){return u[h]=b7(h,t.rects,r),u},{}),a=o[t.placement],l=a.x,c=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[i]=o}var Bb={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:E7};function D7(e){var t=e.state,n=e.name;t.modifiersData[n]=Mh({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var EN={name:"popperOffsets",enabled:!0,phase:"read",fn:D7,data:{}};function Gb(e){return e==="x"?"y":"x"}function R7(e){var t=e.state,n=e.options,i=e.name,s=n.mainAxis,r=s===void 0?!0:s,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,f=n.tether,g=f===void 0?!0:f,v=n.tetherOffset,y=v===void 0?0:v,C=Po(t,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),E=cn(t.placement),I=Ui(t.placement),T=!I,x=Ua(E),z=Gb(x),V=t.modifiersData.popperOffsets,b=t.rects.reference,S=t.rects.popper,_=typeof y=="function"?y(Object.assign({},t.rects,{placement:t.placement})):y,R=typeof _=="number"?{mainAxis:_,altAxis:_}:Object.assign({mainAxis:0,altAxis:0},_),A=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,M={x:0,y:0};if(V){if(r){var D,fn=x==="y"?kt:qt,ci=x==="y"?wn:an,xn=x==="y"?"height":"width",pn=V[x],Es=pn+C[fn],Zi=pn-C[ci],Qo=g?-S[xn]/2:0,qu=I===Er?b[xn]:S[xn],Zn=I===Er?-S[xn]:-b[xn],It=t.elements.arrow,Qr=g&&It?Ha(It):{width:0,height:0},ei=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Th(),Yo=ei[fn],Ds=ei[ci],ir=Wa(0,b[xn],Qr[xn]),Ku=T?b[xn]/2-Qo-ir-Yo-R.mainAxis:qu-ir-Yo-R.mainAxis,Fl=T?-b[xn]/2+Qo+ir+Ds+R.mainAxis:Zn+ir+Ds+R.mainAxis,Yr=t.elements.arrow&&fs(t.elements.arrow),Qu=Yr?x==="y"?Yr.clientTop||0:Yr.clientLeft||0:0,xl=(D=A?.[x])!=null?D:0,Yu=pn+Ku-xl-Qu,Ju=pn+Fl-xl,Xu=Wa(g?Ga(Es,Yu):Es,pn,g?hs(Zi,Ju):Zi);V[x]=Xu,M[x]=Xu-pn}if(a){var Zu,ny=x==="x"?kt:qt,Wf=x==="x"?wn:an,Rs=V[z],Jr=z==="y"?"height":"width",ed=Rs+C[ny],jf=Rs-C[Wf],Jo=[kt,qt].indexOf(E)!==-1,Ol=(Zu=A?.[z])!=null?Zu:0,Nl=Jo?ed:Rs-b[Jr]-S[Jr]-Ol+R.altAxis,Gt=Jo?Rs+b[Jr]+S[Jr]-Ol-R.altAxis:jf,Yt=g&&Jo?yN(Nl,Rs,Gt):Wa(g?Nl:ed,Rs,g?Gt:jf);V[z]=Yt,M[z]=Yt-Rs}t.modifiersData[i]=M}}var Hb={name:"preventOverflow",enabled:!0,phase:"main",fn:R7,requiresIfExists:["offset"]};function Ub(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Wb(e){return e===mt(e)||!Kt(e)?ja(e):Ub(e)}function T7(e){var t=e.getBoundingClientRect(),n=Dr(t.width)/e.offsetWidth||1,i=Dr(t.height)/e.offsetHeight||1;return n!==1||i!==1}function jb(e,t,n){n===void 0&&(n=!1);var i=Kt(t),s=Kt(t)&&T7(t),r=Sn(t),o=Hi(e,s,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&((ln(t)!=="body"||$a(r))&&(a=Wb(t)),Kt(t)?(l=Hi(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):r&&(l.x=za(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function I7(e){var t=new Map,n=new Set,i=[];e.forEach(function(r){t.set(r.name,r)});function s(r){n.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=t.get(a);l&&s(l)}}),i.push(r)}return e.forEach(function(r){n.has(r.name)||s(r)}),i}function zb(e){var t=I7(e);return mN.reduce(function(n,i){return n.concat(t.filter(function(s){return s.phase===i}))},[])}function $b(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function qb(e){var t=e.reduce(function(n,i){var s=n[i.name];return n[i.name]=s?Object.assign({},s,i,{options:Object.assign({},s.options,i.options),data:Object.assign({},s.data,i.data)}):i,n},{});return Object.keys(t).map(function(n){return t[n]})}var DN={placement:"bottom",modifiers:[],strategy:"absolute"};function RN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function TN(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,i=n===void 0?[]:n,s=t.defaultOptions,r=s===void 0?DN:s;return function(a,l,c){c===void 0&&(c=r);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},DN,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},h=[],f=!1,g={state:u,setOptions:function(E){var I=typeof E=="function"?E(u.options):E;y(),u.options=Object.assign({},r,u.options,I),u.scrollParents={reference:Gi(a)?Mo(a):a.contextElement?Mo(a.contextElement):[],popper:Mo(l)};var T=zb(qb([].concat(i,u.options.modifiers)));return u.orderedModifiers=T.filter(function(x){return x.enabled}),v(),g.update()},forceUpdate:function(){if(!f){var E=u.elements,I=E.reference,T=E.popper;if(RN(I,T)){u.rects={reference:jb(I,fs(T),u.options.strategy==="fixed"),popper:Ha(T)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(R){return u.modifiersData[R.name]=Object.assign({},R.data)});for(var x=0;x<u.orderedModifiers.length;x++){if(u.reset===!0){u.reset=!1,x=-1;continue}var z=u.orderedModifiers[x],V=z.fn,b=z.options,S=b===void 0?{}:b,_=z.name;typeof V=="function"&&(u=V({state:u,options:S,name:_,instance:g})||u)}}}},update:$b(function(){return new Promise(function(C){g.forceUpdate(),C(u)})}),destroy:function(){y(),f=!0}};if(!RN(a,l))return g;g.setOptions(c).then(function(C){!f&&c.onFirstUpdate&&c.onFirstUpdate(C)});function v(){u.orderedModifiers.forEach(function(C){var E=C.name,I=C.options,T=I===void 0?{}:I,x=C.effect;if(typeof x=="function"){var z=x({state:u,name:E,instance:g,options:T}),V=function(){};h.push(z||V)}})}function y(){h.forEach(function(C){return C()}),h=[]}return g}}var A7=[_N,EN,SN,vN],Kb=TN({defaultModifiers:A7});var PN=["*"];var M7=["dialog"];var FN={animation:!0,transitionTimerDelayMs:5},xN=(()=>{let t=class t{constructor(){this.animation=FN.animation}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function P7(e){let{transitionDelay:t,transitionDuration:n}=window.getComputedStyle(e),i=parseFloat(t),s=parseFloat(n);return(i+s)*1e3}function Zb(e){return typeof e=="string"}function Qb(e){return e!=null}function F7(e){return e&&e.then}function x7(e,t){return!t||typeof e.closest>"u"?null:e.closest(t)}function ON(e){return(e||document.body).getBoundingClientRect()}function O7(e){return t=>new re(n=>{let i=o=>e.run(()=>n.next(o)),s=o=>e.run(()=>n.error(o)),r=()=>e.run(()=>n.complete());return t.subscribe({next:i,error:s,complete:r})})}var N7=()=>{},{transitionTimerDelayMs:k7}=FN,qm=new Map,Tr=(e,t,n,i)=>{let s=i.context||{},r=qm.get(t);if(r)switch(i.runningTransition){case"continue":return Ut;case"stop":e.run(()=>r.transition$.complete()),s=Object.assign(r.context,s),qm.delete(t)}let o=n(t,i.animation,s)||N7;if(!i.animation||window.getComputedStyle(t).transitionProperty==="none")return e.run(()=>o()),Z(void 0).pipe(O7(e));let a=new Le,l=new Le,c=a.pipe(jy(!0));qm.set(t,{transition$:a,complete:()=>{l.next(),l.complete()},context:s});let u=P7(t);return e.runOutsideAngular(()=>{let h=Nn(t,"transitionend").pipe(Wt(c),ut(({target:g})=>g===t)),f=ro(u+k7).pipe(Wt(c));Hp(f,h,l).pipe(Wt(c)).subscribe(()=>{qm.delete(t),e.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};var Ym=function(e){return e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.ArrowLeft=37]="ArrowLeft",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowRight=39]="ArrowRight",e[e.ArrowDown=40]="ArrowDown",e}(Ym||{});var Km=(e,t)=>t?t.some(n=>n.contains(e)):!1,IN=(e,t)=>!t||x7(e,t)!=null,L7=(()=>{let e=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,t=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(e()||t()):!1})(),V7=e=>L7?()=>setTimeout(()=>e(),100):e;function B7(e,t,n,i,s,r,o,a){n&&e.runOutsideAngular(V7(()=>{let l=f=>{let g=f.target;return f.button===2||Km(g,o)?!1:n==="inside"?Km(g,r)&&IN(g,a):n==="outside"?!Km(g,r):IN(g,a)||!Km(g,r)},c=Nn(t,"keydown").pipe(Wt(s),ut(f=>f.which===Ym.Escape),dt(f=>f.preventDefault())),u=Nn(t,"mousedown").pipe(oe(l),Wt(s)),h=Nn(t,"mouseup").pipe(Id(u),ut(([f,g])=>g),Wy(0),Wt(s));Hp([c.pipe(oe(f=>0)),h.pipe(oe(f=>1))]).subscribe(f=>e.run(()=>i(f)))}))}var G7=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function NN(e){let t=Array.from(e.querySelectorAll(G7)).filter(n=>n.tabIndex!==-1);return[t[0],t[t.length-1]]}var H7=(e,t,n,i=!1)=>{e.runOutsideAngular(()=>{let s=Nn(t,"focusin").pipe(Wt(n),oe(r=>r.target));Nn(t,"keydown").pipe(Wt(n),ut(r=>r.which===Ym.Tab),Id(s)).subscribe(([r,o])=>{let[a,l]=NN(t);(o===a||o===t)&&r.shiftKey&&(l.focus(),r.preventDefault()),o===l&&!r.shiftKey&&(a.focus(),r.preventDefault())}),i&&Nn(t,"click").pipe(Wt(n),Id(s),oe(r=>r[1])).subscribe(r=>r.focus())})},U7=(()=>{let t=class t{constructor(){this._element=U(Ot).documentElement}isRTL(){return(this._element.getAttribute("dir")||"").toLowerCase()==="rtl"}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),W7=/\s+/,j7=/  +/gi,z7={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]};function $7(e,t){let[n,i]=z7[e];return t&&i||n}var q7=/^left/,K7=/^right/,Q7=/^start/,Y7=/^end/;function J7(e,t){let[n,i]=t.split("-"),s=n.replace(q7,"start").replace(K7,"end"),r=[s];if(i){let o=i;(n==="left"||n==="right")&&(o=o.replace(Q7,"top").replace(Y7,"bottom")),r.push(`${s}-${o}`)}return e&&(r=r.map(o=>`${e}-${o}`)),r.join(" ")}function AN({placement:e,baseClass:t},n){let i=Array.isArray(e)?e:e.split(W7),s=["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"],r=i.findIndex(c=>c==="auto");r>=0&&s.forEach(function(c){i.find(u=>u.search("^"+c)!==-1)==null&&i.splice(r++,1,c)});let o=i.map(c=>$7(c,n.isRTL()));return{placement:o.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!t,phase:"write",fn({state:c}){let u=new RegExp(t+"(-[a-z]+)*","gi"),h=c.elements.popper,f=c.placement,g=h.className;g=g.replace(u,""),g+=` ${J7(t,f)}`,g=g.trim().replace(j7," "),h.className=g}},Vb,Hb,xb,{enabled:!0,name:"flip",options:{fallbackPlacements:o}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function MN(e){return e}function X7(){let e=U(U7),t=null;return{createPopper(n){if(!t){let s=(n.updatePopperOptions||MN)(AN(n,e));t=Kb(n.hostElement,n.targetElement,s)}},update(){t&&t.update()},setOptions(n){if(t){let s=(n.updatePopperOptions||MN)(AN(n,e));t.setOptions(s)}},destroy(){t&&(t.destroy(),t=null)}}}function Z7(e){return t=>(t.modifiers.push(Bb,{name:"offset",options:{offset:()=>e}}),t)}var OMe=new Date(1882,10,12),NMe=new Date(2174,10,25);var kMe=1e3*60*60*24;var e0=1080,eQ=24*e0,tQ=12*e0+793,LMe=29*eQ+tQ,VMe=11*e0+204;var nQ=(()=>{let t=class t{constructor(){this._ngbConfig=U(xN),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(i){this._animation=i}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Ir=class{constructor(t,n,i){this.nodes=t,this.viewRef=n,this.componentRef=i}},Yb=class{constructor(t){this._componentType=t,this._windowRef=null,this._contentRef=null,this._document=U(Ot),this._applicationRef=U(us),this._injector=U(Ue),this._viewContainerRef=U(Ni),this._ngZone=U(le)}open(t,n,i=!1){this._windowRef||(this._contentRef=this._getContentRef(t,n),this._windowRef=this._viewContainerRef.createComponent(this._componentType,{injector:this._injector,projectableNodes:this._contentRef.nodes}));let{nativeElement:s}=this._windowRef.location,r=this._ngZone.onStable.pipe(At(1),nt(()=>Tr(this._ngZone,s,({classList:o})=>o.add("show"),{animation:i,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:r}}close(t=!1){return this._windowRef?Tr(this._ngZone,this._windowRef.location.nativeElement,({classList:n})=>n.remove("show"),{animation:t,runningTransition:"stop"}).pipe(dt(()=>{this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),this._contentRef?.viewRef&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):Z(void 0)}_getContentRef(t,n){if(t)if(t instanceof Ls){let i=t.createEmbeddedView(n);return this._applicationRef.attachView(i),new Ir([i.rootNodes],i)}else return new Ir([[this._document.createTextNode(`${t}`)]]);else return new Ir([])}},iQ=(()=>{let t=class t{constructor(){this._document=U(Ot)}hide(){let i=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),s=this._document.body,r=s.style,{overflow:o,paddingRight:a}=r;if(i>0){let l=parseFloat(window.getComputedStyle(s).paddingRight);r.paddingRight=`${l+i}px`}return r.overflow="hidden",()=>{i>0&&(r.paddingRight=a),r.overflow=o}}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),sQ=(()=>{let t=class t{constructor(){this._nativeElement=U(zt).nativeElement,this._zone=U(le)}ngOnInit(){this._zone.onStable.asObservable().pipe(At(1)).subscribe(()=>{Tr(this._zone,this._nativeElement,(i,s)=>{s&&ON(i),i.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Tr(this._zone,this._nativeElement,({classList:i})=>i.remove("show"),{animation:this.animation,runningTransition:"stop"})}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Pe({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(s,r){s&2&&(ki("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),yo("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[Fe],decls:0,vars:0,template:function(s,r){},encapsulation:2});let e=t;return e})(),Qm=class{update(t){}close(t){}dismiss(t){}},rQ=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],oQ=["animation","backdropClass"],Jb=class{_applyWindowOptions(t,n){rQ.forEach(i=>{Qb(n[i])&&(t[i]=n[i])})}_applyBackdropOptions(t,n){oQ.forEach(i=>{Qb(n[i])&&(t[i]=n[i])})}update(t){this._applyWindowOptions(this._windowCmptRef.instance,t),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,t)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Wt(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Wt(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(t,n,i,s){this._windowCmptRef=t,this._contentRef=n,this._backdropCmptRef=i,this._beforeDismiss=s,this._closed=new Le,this._dismissed=new Le,this._hidden=new Le,t.instance.dismissEvent.subscribe(r=>{this.dismiss(r)}),this.result=new Promise((r,o)=>{this._resolve=r,this._reject=o}),this.result.then(null,()=>{})}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(t);else{let n=this._beforeDismiss();F7(n)?n.then(i=>{i!==!1&&this._dismiss(t)},()=>{}):n!==!1&&this._dismiss(t)}}_removeModalElements(){let t=this._windowCmptRef.instance.hide(),n=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Z(void 0);t.subscribe(()=>{let{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),n.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Dd(t,n).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},Xb=function(e){return e[e.BACKDROP_CLICK=0]="BACKDROP_CLICK",e[e.ESC=1]="ESC",e}(Xb||{}),aQ=(()=>{let t=class t{constructor(){this._document=U(Ot),this._elRef=U(zt),this._zone=U(le),this._closed$=new Le,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new H,this.shown=new Le,this.hidden=new Le}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":Zb(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(i){this.dismissEvent.emit(i)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(At(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:i}=this._elRef,s={animation:this.animation,runningTransition:"stop"},r=Tr(this._zone,i,()=>i.classList.remove("show"),s),o=Tr(this._zone,this._dialogEl.nativeElement,()=>{},s),a=Dd(r,o);return a.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),a}_show(){let i={animation:this.animation,runningTransition:"continue"},s=Tr(this._zone,this._elRef.nativeElement,(o,a)=>{a&&ON(o),o.classList.add("show")},i),r=Tr(this._zone,this._dialogEl.nativeElement,()=>{},i);Dd(s,r).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:i}=this._elRef;this._zone.runOutsideAngular(()=>{Nn(i,"keydown").pipe(Wt(this._closed$),ut(r=>r.which===Ym.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(Xb.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let s=!1;Nn(this._dialogEl.nativeElement,"mousedown").pipe(Wt(this._closed$),dt(()=>s=!1),Ge(()=>Nn(i,"mouseup").pipe(Wt(this._closed$),At(1))),ut(({target:r})=>i===r)).subscribe(()=>{s=!0}),Nn(i,"click").pipe(Wt(this._closed$)).subscribe(({target:r})=>{i===r&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!s&&this._zone.run(()=>this.dismiss(Xb.BACKDROP_CLICK))),s=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:i}=this._elRef;if(!i.contains(document.activeElement)){let s=i.querySelector("[ngbAutofocus]"),r=NN(i)[0];(s||r||i).focus()}}_restoreFocus(){let i=this._document.body,s=this._elWithFocus,r;s&&s.focus&&i.contains(s)?r=s:r=i,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&Tr(this._zone,this._elRef.nativeElement,({classList:i})=>(i.add("modal-static"),()=>i.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Pe({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(s,r){if(s&1&&Yg(M7,7),s&2){let o;Qd(o=Yd())&&(r._dialogEl=o.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(s,r){s&2&&(Da("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),ki("modal d-block"+(r.windowClass?" "+r.windowClass:"")),yo("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[Fe],ngContentSelectors:PN,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(s,r){s&1&&(e_(),Y(0,"div",1,0)(2,"div",2),t_(3),J()()),s&2&&ki("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2});let e=t;return e})(),lQ=(()=>{let t=class t{constructor(){this._applicationRef=U(us),this._injector=U(Ue),this._environmentInjector=U(Gn),this._document=U(Ot),this._scrollBar=U(iQ),this._activeWindowCmptHasChanged=new Le,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new H;let i=U(le);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let s=this._windowCmpts[this._windowCmpts.length-1];H7(i,s.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(s.location.nativeElement)}})}_restoreScrollBar(){let i=this._scrollBarRestoreFn;i&&(this._scrollBarRestoreFn=null,i())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(i,s,r){let o=r.container instanceof HTMLElement?r.container:Qb(r.container)?this._document.querySelector(r.container):this._document.body;if(!o)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let a=new Qm;i=r.injector||i;let l=i.get(Gn,null)||this._environmentInjector,c=this._getContentRef(i,l,s,a,r),u=r.backdrop!==!1?this._attachBackdrop(o):void 0,h=this._attachWindowComponent(o,c.nodes),f=new Jb(h,c,u,r.beforeDismiss);return this._registerModalRef(f),this._registerWindowCmpt(h),f.hidden.pipe(At(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=g=>{f.close(g)},a.dismiss=g=>{f.dismiss(g)},a.update=g=>{f.update(g)},f.update(r),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),u&&u.instance&&u.changeDetectorRef.detectChanges(),h.changeDetectorRef.detectChanges(),f}get activeInstances(){return this._activeInstances}dismissAll(i){this._modalRefs.forEach(s=>s.dismiss(i))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(i){let s=Zg(sQ,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(s.hostView),i.appendChild(s.location.nativeElement),s}_attachWindowComponent(i,s){let r=Zg(aQ,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:s});return this._applicationRef.attachView(r.hostView),i.appendChild(r.location.nativeElement),r}_getContentRef(i,s,r,o,a){return r?r instanceof Ls?this._createFromTemplateRef(r,o):Zb(r)?this._createFromString(r):this._createFromComponent(i,s,r,o,a):new Ir([])}_createFromTemplateRef(i,s){let r={$implicit:s,close(a){s.close(a)},dismiss(a){s.dismiss(a)}},o=i.createEmbeddedView(r);return this._applicationRef.attachView(o),new Ir([o.rootNodes],o)}_createFromString(i){let s=this._document.createTextNode(`${i}`);return new Ir([[s]])}_createFromComponent(i,s,r,o,a){let l=Ue.create({providers:[{provide:Qm,useValue:o}],parent:i}),c=Zg(r,{environmentInjector:s,elementInjector:l}),u=c.location.nativeElement;return a.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new Ir([[u]],c.hostView,c)}_setAriaHidden(i){let s=i.parentElement;s&&i!==this._document.body&&(Array.from(s.children).forEach(r=>{r!==i&&r.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(s))}_revertAriaHidden(){this._ariaHiddenValues.forEach((i,s)=>{i?s.setAttribute("aria-hidden",i):s.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(i){let s=()=>{let r=this._modalRefs.indexOf(i);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(i),this._activeInstances.emit(this._modalRefs),i.result.then(s,s)}_registerWindowCmpt(i){this._windowCmpts.push(i),this._activeWindowCmptHasChanged.next(),i.onDestroy(()=>{let s=this._windowCmpts.indexOf(i);s>-1&&(this._windowCmpts.splice(s,1),this._activeWindowCmptHasChanged.next())})}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),kN=(()=>{let t=class t{constructor(){this._injector=U(Ue),this._modalStack=U(lQ),this._config=U(nQ)}open(i,s={}){let r=B(se(B({},this._config),{animation:this._config.animation}),s);return this._modalStack.open(this._injector,i,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(i){this._modalStack.dismissAll(i)}hasOpenModals(){return this._modalStack.hasOpenModals()}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var cQ={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]};function uQ(e){let t=(e||"").trim();if(t.length===0)return[];let n=t.split(/\s+/).map(s=>s.split(":")).map(s=>cQ[s[0]]||s),i=n.filter(s=>s.includes("manual"));if(i.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(i.length===1&&n.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return i.length?[]:n}function dQ(e,t,n,i,s,r=0,o=0){let a=uQ(t);if(a.length===0)return()=>{};let l=new Set,c=[],u;function h(g,v){e.addEventListener(g,v),c.push(()=>e.removeEventListener(g,v))}function f(g,v){clearTimeout(u),v>0?u=setTimeout(g,v):g()}for(let[g,v]of a)v?(h(g,()=>{l.add(g),f(()=>l.size>0&&i(),r)}),h(v,()=>{l.delete(g),f(()=>l.size===0&&s(),o)})):h(g,()=>n()?f(s,o):f(i,r));return()=>c.forEach(g=>g())}var hQ=(()=>{let t=class t{constructor(){this._ngbConfig=U(xN),this.autoClose=!0,this.placement="auto",this.popperOptions=i=>i,this.triggers="hover focus",this.disableTooltip=!1,this.openDelay=0,this.closeDelay=0}get animation(){return this._animation??this._ngbConfig.animation}set animation(i){this._animation=i}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),fQ=0,pQ=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Pe({type:t,selectors:[["ngb-tooltip-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(s,r){s&2&&(ZS("id",r.id),ki("tooltip"+(r.tooltipClass?" "+r.tooltipClass:"")),yo("fade",r.animation))},inputs:{animation:"animation",id:"id",tooltipClass:"tooltipClass"},standalone:!0,features:[Fe],ngContentSelectors:PN,decls:3,vars:0,consts:[["data-popper-arrow","",1,"tooltip-arrow"],[1,"tooltip-inner"]],template:function(s,r){s&1&&(e_(),de(0,"div",0),Y(1,"div",1),t_(2),J())},styles:[`ngb-tooltip-window{pointer-events:none;position:absolute}ngb-tooltip-window .tooltip-inner{pointer-events:auto}ngb-tooltip-window.bs-tooltip-top,ngb-tooltip-window.bs-tooltip-bottom{padding-left:0;padding-right:0}ngb-tooltip-window.bs-tooltip-start,ngb-tooltip-window.bs-tooltip-end{padding-top:0;padding-bottom:0}
`],encapsulation:2,changeDetection:0});let e=t;return e})(),LN=(()=>{let t=class t{constructor(){this._config=U(hQ),this.animation=this._config.animation,this.autoClose=this._config.autoClose,this.placement=this._config.placement,this.popperOptions=this._config.popperOptions,this.triggers=this._config.triggers,this.container=this._config.container,this.disableTooltip=this._config.disableTooltip,this.tooltipClass=this._config.tooltipClass,this.openDelay=this._config.openDelay,this.closeDelay=this._config.closeDelay,this.shown=new H,this.hidden=new H,this._nativeElement=U(zt).nativeElement,this._ngZone=U(le),this._document=U(Ot),this._changeDetector=U(Sr),this._ngbTooltipWindowId=`ngb-tooltip-${fQ++}`,this._popupService=new Yb(pQ),this._windowRef=null,this._positioning=X7()}set ngbTooltip(i){this._ngbTooltip=i,!i&&this._windowRef&&this.close()}get ngbTooltip(){return this._ngbTooltip}open(i){if(!this._windowRef&&this._ngbTooltip&&!this.disableTooltip){let{windowRef:s,transition$:r}=this._popupService.open(this._ngbTooltip,i??this.tooltipContext,this.animation);this._windowRef=s,this._windowRef.setInput("animation",this.animation),this._windowRef.setInput("tooltipClass",this.tooltipClass),this._windowRef.setInput("id",this._ngbTooltipWindowId),this._getPositionTargetElement().setAttribute("aria-describedby",this._ngbTooltipWindowId),this.container==="body"&&this._document.body.appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._getPositionTargetElement(),targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:this.container==="body",baseClass:"bs-tooltip",updatePopperOptions:o=>this.popperOptions(Z7([0,6])(o))}),Promise.resolve().then(()=>{this._positioning.update(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positioning.update())})}),B7(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement],[this._nativeElement]),r.subscribe(()=>this.shown.emit())}}close(i=this.animation){this._windowRef!=null&&(this._getPositionTargetElement().removeAttribute("aria-describedby"),this._popupService.close(i).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return this._windowRef!=null}ngOnInit(){this._unregisterListenersFn=dQ(this._nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({tooltipClass:i}){i&&this.isOpen()&&this._windowRef.setInput("tooltipClass",i.currentValue)}ngOnDestroy(){this.close(!1),this._unregisterListenersFn?.()}_getPositionTargetElement(){return(Zb(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget)||this._nativeElement}};t.\u0275fac=function(s){return new(s||t)},t.\u0275dir=Mt({type:t,selectors:[["","ngbTooltip",""]],inputs:{animation:"animation",autoClose:"autoClose",placement:"placement",popperOptions:"popperOptions",triggers:"triggers",positionTarget:"positionTarget",container:"container",disableTooltip:"disableTooltip",tooltipClass:"tooltipClass",tooltipContext:"tooltipContext",openDelay:"openDelay",closeDelay:"closeDelay",ngbTooltip:"ngbTooltip"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbTooltip"],standalone:!0,features:[nn]});let e=t;return e})(),VN=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=vi({type:t}),t.\u0275inj=mi({});let e=t;return e})();var BMe=new Q("live announcer delay",{providedIn:"root",factory:()=>100});function gQ(e,t){if(e&1){let n=ii();yr(0),Y(1,"div",2),st("click",function(){let s=sn(n).$implicit;return rn(s.action())}),de(2,"i"),J(),wr()}if(e&2){let n=t.$implicit;ve(),ki(n.icon==="flex-grow-spacer"?"flex-grow-spacer":"sidebar-item"),_e("ngbTooltip",n.label),ve(),ki(n.icon)}}var GN=(()=>{let t=class t{constructor(i,s){this.authService=i,this.router=s,this.sidebarItems=[{label:"Dashboard",icon:"bi bi-house",action:()=>{this.router.navigateByUrl("/dashboard")}},{label:"Profile",icon:"bi bi-person",action:()=>{this.router.navigateByUrl("/profile")}},{label:"Settings",icon:"bi bi-gear",action:()=>{this.router.navigateByUrl("/settings")}},{label:"",icon:"flex-grow-spacer",action:()=>{}},{label:"Logout",icon:"bi bi-box-arrow-right",action:()=>{this.logout()}}]}logout(){this.authService.logout()}};t.\u0275fac=function(s){return new(s||t)(ne(Ws),ne(Un))},t.\u0275cmp=Pe({type:t,selectors:[["app-sidebar"]],inputs:{sidebarItems:"sidebarItems"},standalone:!0,features:[Fe],decls:2,vars:1,consts:[[1,"sidebar"],[4,"ngFor","ngForOf"],["placement","right",3,"click","ngbTooltip"]],template:function(s,r){s&1&&(Y(0,"div",0),Ct(1,gQ,3,5,"ng-container",1),J()),s&2&&(ve(),_e("ngForOf",r.sidebarItems))},dependencies:[vn,So,VN,LN],styles:[".sidebar[_ngcontent-%COMP%]{width:60px;height:100vh;background-color:#1f1f1f;display:flex;flex-direction:column;align-items:center;padding:10px 0;position:fixed;left:0;top:0}.sidebar-item[_ngcontent-%COMP%]{width:100%;padding:15px 0;display:flex;justify-content:center;align-items:center;cursor:pointer;color:#ccc}.sidebar-item[_ngcontent-%COMP%]:hover{background-color:#333}.flex-grow-spacer[_ngcontent-%COMP%]{flex-grow:1}.icon[_ngcontent-%COMP%]{font-size:24px;color:#ccc}.icon[_ngcontent-%COMP%]:hover{color:#fff}"]});let e=t;return e})();var HN=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Pe({type:t,selectors:[["app-dashboard"]],standalone:!0,features:[Fe],decls:5,vars:0,consts:[[1,"app-container"],[1,"d-none","d-md-block"],[1,"main-content","ms-md-5","ps-md-4","ps-xl-5"]],template:function(s,r){s&1&&(Y(0,"div",0)(1,"aside",1),de(2,"app-sidebar"),J(),Y(3,"main",2),de(4,"router-outlet"),J()())},dependencies:[Ch,GN],styles:[".app-container[_ngcontent-%COMP%]{display:flex;height:100vh}.main-content[_ngcontent-%COMP%]{flex-grow:1;padding:20px;overflow-y:auto}"]});let e=t;return e})();var t0=class{constructor(){this.subject=new io(1),this.subscriptions=new vt}doFilter(t){this.subject.next(t)}dispose(){this.subscriptions.unsubscribe()}notEmpty(t,n){this.subscriptions.add(this.subject.subscribe(i=>{if(i[t]){let s=i[t].currentValue;s!=null&&n(s)}}))}has(t,n){this.subscriptions.add(this.subject.subscribe(i=>{if(i[t]){let s=i[t].currentValue;n(s)}}))}notFirst(t,n){this.subscriptions.add(this.subject.subscribe(i=>{if(i[t]&&!i[t].isFirstChange()){let s=i[t].currentValue;n(s)}}))}notFirstAndEmpty(t,n){this.subscriptions.add(this.subject.subscribe(i=>{if(i[t]&&!i[t].isFirstChange()){let s=i[t].currentValue;s!=null&&n(s)}}))}},UN=new Q("NGX_ECHARTS_CONFIG"),WN=(()=>{let t=class t{constructor(i,s,r){this.el=s,this.ngZone=r,this.options=null,this.theme=null,this.initOpts=null,this.merge=null,this.autoResize=!0,this.loading=!1,this.loadingType="default",this.loadingOpts=null,this.chartInit=new H,this.optionsError=new H,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartHighlight=this.createLazyEvent("highlight"),this.chartDownplay=this.createLazyEvent("downplay"),this.chartSelectChanged=this.createLazyEvent("selectchanged"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendLegendSelectAll=this.createLazyEvent("legendselectall"),this.chartLegendLegendInverseSelect=this.createLazyEvent("legendinverseselect"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartGraphRoam=this.createLazyEvent("graphroam"),this.chartGeoRoam=this.createLazyEvent("georoam"),this.chartTreeRoam=this.createLazyEvent("treeroam"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartGeoSelectChanged=this.createLazyEvent("geoselectchanged"),this.chartGeoSelected=this.createLazyEvent("geoselected"),this.chartGeoUnselected=this.createLazyEvent("geounselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartGlobalCursorTaken=this.createLazyEvent("globalcursortaken"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.chart$=new io(1),this.resize$=new Le,this.changeFilter=new t0,this.resizeObFired=!1,this.echarts=i.echarts,this.theme=i.theme||null}ngOnChanges(i){this.changeFilter.doFilter(i)}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe(Ky(100,Pi,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(i=>{for(let s of i)s.target===this.el.nativeElement&&(this.resizeObFired?this.animationFrameID=window.requestAnimationFrame(()=>{this.resize$.next()}):this.resizeObFired=!0)})),this.resizeOb.observe(this.el.nativeElement)),this.changeFilter.notFirstAndEmpty("options",i=>this.onOptionsChange(i)),this.changeFilter.notFirstAndEmpty("merge",i=>this.setOption(i)),this.changeFilter.has("loading",i=>this.toggleLoading(!!i)),this.changeFilter.notFirst("theme",()=>this.refreshChart())}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.loadingSub&&this.loadingSub.unsubscribe(),this.changeFilter.dispose(),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(i){this.chart?i?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading():this.loadingSub=this.chart$.subscribe(s=>i?s.showLoading(this.loadingType,this.loadingOpts):s.hideLoading())}setOption(i,s){if(this.chart)try{this.chart.setOption(i,s)}catch(r){console.error(r),this.optionsError.emit(r)}}refreshChart(){return F(this,null,function*(){this.dispose(),yield this.initChart()})}createChart(){let i=this.el.nativeElement;if(window&&window.getComputedStyle){let s=window.getComputedStyle(i,null).getPropertyValue("height");(!s||s==="0px")&&(!i.style.height||i.style.height==="0px")&&(i.style.height="400px")}return this.ngZone.runOutsideAngular(()=>(typeof this.echarts=="function"?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:r})=>r(i,this.theme,this.initOpts)))}initChart(){return F(this,null,function*(){yield this.onOptionsChange(this.options),this.merge&&this.chart&&this.setOption(this.merge)})}onOptionsChange(i){return F(this,null,function*(){i&&(this.chart?this.setOption(this.options,!0):(this.chart=yield this.createChart(),this.chart$.next(this.chart),this.chartInit.emit(this.chart),this.setOption(this.options,!0)))})}createLazyEvent(i){return this.chartInit.pipe(Ge(s=>new re(r=>(s.on(i,o=>this.ngZone.run(()=>r.next(o))),()=>{this.chart&&(this.chart.isDisposed()||s.off(i))}))))}};t.\u0275fac=function(s){return new(s||t)(ne(UN),ne(zt),ne(le))},t.\u0275dir=Mt({type:t,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loading:"loading",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartHighlight:"chartHighlight",chartDownplay:"chartDownplay",chartSelectChanged:"chartSelectChanged",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendLegendSelectAll:"chartLegendLegendSelectAll",chartLegendLegendInverseSelect:"chartLegendLegendInverseSelect",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartGraphRoam:"chartGraphRoam",chartGeoRoam:"chartGeoRoam",chartTreeRoam:"chartTreeRoam",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartGeoSelectChanged:"chartGeoSelectChanged",chartGeoSelected:"chartGeoSelected",chartGeoUnselected:"chartGeoUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartGlobalCursorTaken:"chartGlobalCursorTaken",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],standalone:!0,features:[nn]});let e=t;return e})(),jN=(e={})=>({provide:UN,useFactory:()=>se(B({},e),{echarts:()=>import("./chunk-CC4FQ6XH.js")})});var zN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$N={};var Fo,n0;(function(){var e;function t(b,S){function _(){}_.prototype=S.prototype,b.D=S.prototype,b.prototype=new _,b.prototype.constructor=b,b.C=function(R,A,M){for(var D=Array(arguments.length-2),fn=2;fn<arguments.length;fn++)D[fn-2]=arguments[fn];return S.prototype[A].apply(R,D)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,S,_){_||(_=0);var R=Array(16);if(typeof S=="string")for(var A=0;16>A;++A)R[A]=S.charCodeAt(_++)|S.charCodeAt(_++)<<8|S.charCodeAt(_++)<<16|S.charCodeAt(_++)<<24;else for(A=0;16>A;++A)R[A]=S[_++]|S[_++]<<8|S[_++]<<16|S[_++]<<24;S=b.g[0],_=b.g[1],A=b.g[2];var M=b.g[3],D=S+(M^_&(A^M))+R[0]+3614090360&4294967295;S=_+(D<<7&4294967295|D>>>25),D=M+(A^S&(_^A))+R[1]+3905402710&4294967295,M=S+(D<<12&4294967295|D>>>20),D=A+(_^M&(S^_))+R[2]+606105819&4294967295,A=M+(D<<17&4294967295|D>>>15),D=_+(S^A&(M^S))+R[3]+3250441966&4294967295,_=A+(D<<22&4294967295|D>>>10),D=S+(M^_&(A^M))+R[4]+4118548399&4294967295,S=_+(D<<7&4294967295|D>>>25),D=M+(A^S&(_^A))+R[5]+1200080426&4294967295,M=S+(D<<12&4294967295|D>>>20),D=A+(_^M&(S^_))+R[6]+2821735955&4294967295,A=M+(D<<17&4294967295|D>>>15),D=_+(S^A&(M^S))+R[7]+4249261313&4294967295,_=A+(D<<22&4294967295|D>>>10),D=S+(M^_&(A^M))+R[8]+1770035416&4294967295,S=_+(D<<7&4294967295|D>>>25),D=M+(A^S&(_^A))+R[9]+2336552879&4294967295,M=S+(D<<12&4294967295|D>>>20),D=A+(_^M&(S^_))+R[10]+4294925233&4294967295,A=M+(D<<17&4294967295|D>>>15),D=_+(S^A&(M^S))+R[11]+2304563134&4294967295,_=A+(D<<22&4294967295|D>>>10),D=S+(M^_&(A^M))+R[12]+1804603682&4294967295,S=_+(D<<7&4294967295|D>>>25),D=M+(A^S&(_^A))+R[13]+4254626195&4294967295,M=S+(D<<12&4294967295|D>>>20),D=A+(_^M&(S^_))+R[14]+2792965006&4294967295,A=M+(D<<17&4294967295|D>>>15),D=_+(S^A&(M^S))+R[15]+1236535329&4294967295,_=A+(D<<22&4294967295|D>>>10),D=S+(A^M&(_^A))+R[1]+4129170786&4294967295,S=_+(D<<5&4294967295|D>>>27),D=M+(_^A&(S^_))+R[6]+3225465664&4294967295,M=S+(D<<9&4294967295|D>>>23),D=A+(S^_&(M^S))+R[11]+643717713&4294967295,A=M+(D<<14&4294967295|D>>>18),D=_+(M^S&(A^M))+R[0]+3921069994&4294967295,_=A+(D<<20&4294967295|D>>>12),D=S+(A^M&(_^A))+R[5]+3593408605&4294967295,S=_+(D<<5&4294967295|D>>>27),D=M+(_^A&(S^_))+R[10]+38016083&4294967295,M=S+(D<<9&4294967295|D>>>23),D=A+(S^_&(M^S))+R[15]+3634488961&4294967295,A=M+(D<<14&4294967295|D>>>18),D=_+(M^S&(A^M))+R[4]+3889429448&4294967295,_=A+(D<<20&4294967295|D>>>12),D=S+(A^M&(_^A))+R[9]+568446438&4294967295,S=_+(D<<5&4294967295|D>>>27),D=M+(_^A&(S^_))+R[14]+3275163606&4294967295,M=S+(D<<9&4294967295|D>>>23),D=A+(S^_&(M^S))+R[3]+4107603335&4294967295,A=M+(D<<14&4294967295|D>>>18),D=_+(M^S&(A^M))+R[8]+1163531501&4294967295,_=A+(D<<20&4294967295|D>>>12),D=S+(A^M&(_^A))+R[13]+2850285829&4294967295,S=_+(D<<5&4294967295|D>>>27),D=M+(_^A&(S^_))+R[2]+4243563512&4294967295,M=S+(D<<9&4294967295|D>>>23),D=A+(S^_&(M^S))+R[7]+1735328473&4294967295,A=M+(D<<14&4294967295|D>>>18),D=_+(M^S&(A^M))+R[12]+2368359562&4294967295,_=A+(D<<20&4294967295|D>>>12),D=S+(_^A^M)+R[5]+4294588738&4294967295,S=_+(D<<4&4294967295|D>>>28),D=M+(S^_^A)+R[8]+2272392833&4294967295,M=S+(D<<11&4294967295|D>>>21),D=A+(M^S^_)+R[11]+1839030562&4294967295,A=M+(D<<16&4294967295|D>>>16),D=_+(A^M^S)+R[14]+4259657740&4294967295,_=A+(D<<23&4294967295|D>>>9),D=S+(_^A^M)+R[1]+2763975236&4294967295,S=_+(D<<4&4294967295|D>>>28),D=M+(S^_^A)+R[4]+1272893353&4294967295,M=S+(D<<11&4294967295|D>>>21),D=A+(M^S^_)+R[7]+4139469664&4294967295,A=M+(D<<16&4294967295|D>>>16),D=_+(A^M^S)+R[10]+3200236656&4294967295,_=A+(D<<23&4294967295|D>>>9),D=S+(_^A^M)+R[13]+681279174&4294967295,S=_+(D<<4&4294967295|D>>>28),D=M+(S^_^A)+R[0]+3936430074&4294967295,M=S+(D<<11&4294967295|D>>>21),D=A+(M^S^_)+R[3]+3572445317&4294967295,A=M+(D<<16&4294967295|D>>>16),D=_+(A^M^S)+R[6]+76029189&4294967295,_=A+(D<<23&4294967295|D>>>9),D=S+(_^A^M)+R[9]+3654602809&4294967295,S=_+(D<<4&4294967295|D>>>28),D=M+(S^_^A)+R[12]+3873151461&4294967295,M=S+(D<<11&4294967295|D>>>21),D=A+(M^S^_)+R[15]+530742520&4294967295,A=M+(D<<16&4294967295|D>>>16),D=_+(A^M^S)+R[2]+3299628645&4294967295,_=A+(D<<23&4294967295|D>>>9),D=S+(A^(_|~M))+R[0]+4096336452&4294967295,S=_+(D<<6&4294967295|D>>>26),D=M+(_^(S|~A))+R[7]+1126891415&4294967295,M=S+(D<<10&4294967295|D>>>22),D=A+(S^(M|~_))+R[14]+2878612391&4294967295,A=M+(D<<15&4294967295|D>>>17),D=_+(M^(A|~S))+R[5]+4237533241&4294967295,_=A+(D<<21&4294967295|D>>>11),D=S+(A^(_|~M))+R[12]+1700485571&4294967295,S=_+(D<<6&4294967295|D>>>26),D=M+(_^(S|~A))+R[3]+2399980690&4294967295,M=S+(D<<10&4294967295|D>>>22),D=A+(S^(M|~_))+R[10]+4293915773&4294967295,A=M+(D<<15&4294967295|D>>>17),D=_+(M^(A|~S))+R[1]+2240044497&4294967295,_=A+(D<<21&4294967295|D>>>11),D=S+(A^(_|~M))+R[8]+1873313359&4294967295,S=_+(D<<6&4294967295|D>>>26),D=M+(_^(S|~A))+R[15]+4264355552&4294967295,M=S+(D<<10&4294967295|D>>>22),D=A+(S^(M|~_))+R[6]+2734768916&4294967295,A=M+(D<<15&4294967295|D>>>17),D=_+(M^(A|~S))+R[13]+1309151649&4294967295,_=A+(D<<21&4294967295|D>>>11),D=S+(A^(_|~M))+R[4]+4149444226&4294967295,S=_+(D<<6&4294967295|D>>>26),D=M+(_^(S|~A))+R[11]+3174756917&4294967295,M=S+(D<<10&4294967295|D>>>22),D=A+(S^(M|~_))+R[2]+718787259&4294967295,A=M+(D<<15&4294967295|D>>>17),D=_+(M^(A|~S))+R[9]+3951481745&4294967295,b.g[0]=b.g[0]+S&4294967295,b.g[1]=b.g[1]+(A+(D<<21&4294967295|D>>>11))&4294967295,b.g[2]=b.g[2]+A&4294967295,b.g[3]=b.g[3]+M&4294967295}i.prototype.u=function(b,S){S===void 0&&(S=b.length);for(var _=S-this.blockSize,R=this.B,A=this.h,M=0;M<S;){if(A==0)for(;M<=_;)s(this,b,M),M+=this.blockSize;if(typeof b=="string"){for(;M<S;)if(R[A++]=b.charCodeAt(M++),A==this.blockSize){s(this,R),A=0;break}}else for(;M<S;)if(R[A++]=b[M++],A==this.blockSize){s(this,R),A=0;break}}this.h=A,this.o+=S},i.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var S=1;S<b.length-8;++S)b[S]=0;var _=8*this.o;for(S=b.length-8;S<b.length;++S)b[S]=_&255,_/=256;for(this.u(b),b=Array(16),S=_=0;4>S;++S)for(var R=0;32>R;R+=8)b[_++]=this.g[S]>>>R&255;return b};function r(b,S){var _=a;return Object.prototype.hasOwnProperty.call(_,b)?_[b]:_[b]=S(b)}function o(b,S){this.h=S;for(var _=[],R=!0,A=b.length-1;0<=A;A--){var M=b[A]|0;R&&M==S||(_[A]=M,R=!1)}this.g=_}var a={};function l(b){return-128<=b&&128>b?r(b,function(S){return new o([S|0],0>S?-1:0)}):new o([b|0],0>b?-1:0)}function c(b){if(isNaN(b)||!isFinite(b))return h;if(0>b)return C(c(-b));for(var S=[],_=1,R=0;b>=_;R++)S[R]=b/_|0,_*=4294967296;return new o(S,0)}function u(b,S){if(b.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(b.charAt(0)=="-")return C(u(b.substring(1),S));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=c(Math.pow(S,8)),R=h,A=0;A<b.length;A+=8){var M=Math.min(8,b.length-A),D=parseInt(b.substring(A,A+M),S);8>M?(M=c(Math.pow(S,M)),R=R.j(M).add(c(D))):(R=R.j(_),R=R.add(c(D)))}return R}var h=l(0),f=l(1),g=l(16777216);e=o.prototype,e.m=function(){if(y(this))return-C(this).m();for(var b=0,S=1,_=0;_<this.g.length;_++){var R=this.i(_);b+=(0<=R?R:4294967296+R)*S,S*=4294967296}return b},e.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(v(this))return"0";if(y(this))return"-"+C(this).toString(b);for(var S=c(Math.pow(b,6)),_=this,R="";;){var A=x(_,S).g;_=E(_,A.j(S));var M=((0<_.g.length?_.g[0]:_.h)>>>0).toString(b);if(_=A,v(_))return M+R;for(;6>M.length;)M="0"+M;R=M+R}},e.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function v(b){if(b.h!=0)return!1;for(var S=0;S<b.g.length;S++)if(b.g[S]!=0)return!1;return!0}function y(b){return b.h==-1}e.l=function(b){return b=E(this,b),y(b)?-1:v(b)?0:1};function C(b){for(var S=b.g.length,_=[],R=0;R<S;R++)_[R]=~b.g[R];return new o(_,~b.h).add(f)}e.abs=function(){return y(this)?C(this):this},e.add=function(b){for(var S=Math.max(this.g.length,b.g.length),_=[],R=0,A=0;A<=S;A++){var M=R+(this.i(A)&65535)+(b.i(A)&65535),D=(M>>>16)+(this.i(A)>>>16)+(b.i(A)>>>16);R=D>>>16,M&=65535,D&=65535,_[A]=D<<16|M}return new o(_,_[_.length-1]&-2147483648?-1:0)};function E(b,S){return b.add(C(S))}e.j=function(b){if(v(this)||v(b))return h;if(y(this))return y(b)?C(this).j(C(b)):C(C(this).j(b));if(y(b))return C(this.j(C(b)));if(0>this.l(g)&&0>b.l(g))return c(this.m()*b.m());for(var S=this.g.length+b.g.length,_=[],R=0;R<2*S;R++)_[R]=0;for(R=0;R<this.g.length;R++)for(var A=0;A<b.g.length;A++){var M=this.i(R)>>>16,D=this.i(R)&65535,fn=b.i(A)>>>16,ci=b.i(A)&65535;_[2*R+2*A]+=D*ci,I(_,2*R+2*A),_[2*R+2*A+1]+=M*ci,I(_,2*R+2*A+1),_[2*R+2*A+1]+=D*fn,I(_,2*R+2*A+1),_[2*R+2*A+2]+=M*fn,I(_,2*R+2*A+2)}for(R=0;R<S;R++)_[R]=_[2*R+1]<<16|_[2*R];for(R=S;R<2*S;R++)_[R]=0;return new o(_,0)};function I(b,S){for(;(b[S]&65535)!=b[S];)b[S+1]+=b[S]>>>16,b[S]&=65535,S++}function T(b,S){this.g=b,this.h=S}function x(b,S){if(v(S))throw Error("division by zero");if(v(b))return new T(h,h);if(y(b))return S=x(C(b),S),new T(C(S.g),C(S.h));if(y(S))return S=x(b,C(S)),new T(C(S.g),S.h);if(30<b.g.length){if(y(b)||y(S))throw Error("slowDivide_ only works with positive integers.");for(var _=f,R=S;0>=R.l(b);)_=z(_),R=z(R);var A=V(_,1),M=V(R,1);for(R=V(R,2),_=V(_,2);!v(R);){var D=M.add(R);0>=D.l(b)&&(A=A.add(_),M=D),R=V(R,1),_=V(_,1)}return S=E(b,A.j(S)),new T(A,S)}for(A=h;0<=b.l(S);){for(_=Math.max(1,Math.floor(b.m()/S.m())),R=Math.ceil(Math.log(_)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),M=c(_),D=M.j(S);y(D)||0<D.l(b);)_-=R,M=c(_),D=M.j(S);v(M)&&(M=f),A=A.add(M),b=E(b,D)}return new T(A,b)}e.A=function(b){return x(this,b).h},e.and=function(b){for(var S=Math.max(this.g.length,b.g.length),_=[],R=0;R<S;R++)_[R]=this.i(R)&b.i(R);return new o(_,this.h&b.h)},e.or=function(b){for(var S=Math.max(this.g.length,b.g.length),_=[],R=0;R<S;R++)_[R]=this.i(R)|b.i(R);return new o(_,this.h|b.h)},e.xor=function(b){for(var S=Math.max(this.g.length,b.g.length),_=[],R=0;R<S;R++)_[R]=this.i(R)^b.i(R);return new o(_,this.h^b.h)};function z(b){for(var S=b.g.length+1,_=[],R=0;R<S;R++)_[R]=b.i(R)<<1|b.i(R-1)>>>31;return new o(_,b.h)}function V(b,S){var _=S>>5;S%=32;for(var R=b.g.length-_,A=[],M=0;M<R;M++)A[M]=0<S?b.i(M+_)>>>S|b.i(M+_+1)<<32-S:b.i(M+_);return new o(A,b.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,n0=$N.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Fo=$N.Integer=o}).apply(typeof zN<"u"?zN:typeof self<"u"?self:typeof window<"u"?window:{});var Jm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ar={};var i0,s0,qc,r0,Ph,Xm,o0,a0,l0;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,p,m){return d==Array.prototype||d==Object.prototype||(d[p]=m.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jm=="object"&&Jm];for(var p=0;p<d.length;++p){var m=d[p];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var i=n(this);function s(d,p){if(p)e:{var m=i;d=d.split(".");for(var w=0;w<d.length-1;w++){var P=d[w];if(!(P in m))break e;m=m[P]}d=d[d.length-1],w=m[d],p=p(w),p!=w&&p!=null&&t(m,d,{configurable:!0,writable:!0,value:p})}}function r(d,p){d instanceof String&&(d+="");var m=0,w=!1,P={next:function(){if(!w&&m<d.length){var L=m++;return{value:p(L,d[L]),done:!1}}return w=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}s("Array.prototype.values",function(d){return d||function(){return r(this,function(p,m){return m})}});var o=o||{},a=this||self;function l(d){var p=typeof d;return p=p!="object"?p:d?Array.isArray(d)?"array":p:"null",p=="array"||p=="object"&&typeof d.length=="number"}function c(d){var p=typeof d;return p=="object"&&d!=null||p=="function"}function u(d,p,m){return d.call.apply(d.bind,arguments)}function h(d,p,m){if(!d)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,w),d.apply(p,P)}}return function(){return d.apply(p,arguments)}}function f(d,p,m){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,f.apply(null,arguments)}function g(d,p){var m=Array.prototype.slice.call(arguments,1);return function(){var w=m.slice();return w.push.apply(w,arguments),d.apply(this,w)}}function v(d,p){function m(){}m.prototype=p.prototype,d.aa=p.prototype,d.prototype=new m,d.prototype.constructor=d,d.Qb=function(w,P,L){for(var q=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)q[tt-2]=arguments[tt];return p.prototype[P].apply(w,q)}}function y(d){let p=d.length;if(0<p){let m=Array(p);for(let w=0;w<p;w++)m[w]=d[w];return m}return[]}function C(d,p){for(let m=1;m<arguments.length;m++){let w=arguments[m];if(l(w)){let P=d.length||0,L=w.length||0;d.length=P+L;for(let q=0;q<L;q++)d[P+q]=w[q]}else d.push(w)}}class E{constructor(p,m){this.i=p,this.j=m,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function I(d){return/^[\s\xa0]*$/.test(d)}function T(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function x(d){return x[" "](d),d}x[" "]=function(){};var z=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function V(d,p,m){for(let w in d)p.call(m,d[w],w,d)}function b(d,p){for(let m in d)p.call(void 0,d[m],m,d)}function S(d){let p={};for(let m in d)p[m]=d[m];return p}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(d,p){let m,w;for(let P=1;P<arguments.length;P++){w=arguments[P];for(m in w)d[m]=w[m];for(let L=0;L<_.length;L++)m=_[L],Object.prototype.hasOwnProperty.call(w,m)&&(d[m]=w[m])}}function A(d){var p=1;d=d.split(":");let m=[];for(;0<p&&d.length;)m.push(d.shift()),p--;return d.length&&m.push(d.join(":")),m}function M(d){a.setTimeout(()=>{throw d},0)}function D(){var d=Zi;let p=null;return d.g&&(p=d.g,d.g=d.g.next,d.g||(d.h=null),p.next=null),p}class fn{constructor(){this.h=this.g=null}add(p,m){let w=ci.get();w.set(p,m),this.h?this.h.next=w:this.g=w,this.h=w}}var ci=new E(()=>new xn,d=>d.reset());class xn{constructor(){this.next=this.g=this.h=null}set(p,m){this.h=p,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let pn,Es=!1,Zi=new fn,Qo=()=>{let d=a.Promise.resolve(void 0);pn=()=>{d.then(qu)}};var qu=()=>{for(var d;d=D();){try{d.h.call(d.g)}catch(m){M(m)}var p=ci;p.j(d),100>p.h&&(p.h++,d.next=p.g,p.g=d)}Es=!1};function Zn(){this.s=this.s,this.C=this.C}Zn.prototype.s=!1,Zn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Zn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function It(d,p){this.type=d,this.g=this.target=p,this.defaultPrevented=!1}It.prototype.h=function(){this.defaultPrevented=!0};var Qr=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,p=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let m=()=>{};a.addEventListener("test",m,p),a.removeEventListener("test",m,p)}catch{}return d}();function ei(d,p){if(It.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var m=this.type=d.type,w=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=p,p=d.relatedTarget){if(z){e:{try{x(p.nodeName);var P=!0;break e}catch{}P=!1}P||(p=null)}}else m=="mouseover"?p=d.fromElement:m=="mouseout"&&(p=d.toElement);this.relatedTarget=p,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Yo[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&ei.aa.h.call(this)}}v(ei,It);var Yo={2:"touch",3:"pen",4:"mouse"};ei.prototype.h=function(){ei.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ds="closure_listenable_"+(1e6*Math.random()|0),ir=0;function Ku(d,p,m,w,P){this.listener=d,this.proxy=null,this.src=p,this.type=m,this.capture=!!w,this.ha=P,this.key=++ir,this.da=this.fa=!1}function Fl(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Yr(d){this.src=d,this.g={},this.h=0}Yr.prototype.add=function(d,p,m,w,P){var L=d.toString();d=this.g[L],d||(d=this.g[L]=[],this.h++);var q=xl(d,p,w,P);return-1<q?(p=d[q],m||(p.fa=!1)):(p=new Ku(p,this.src,L,!!w,P),p.fa=m,d.push(p)),p};function Qu(d,p){var m=p.type;if(m in d.g){var w=d.g[m],P=Array.prototype.indexOf.call(w,p,void 0),L;(L=0<=P)&&Array.prototype.splice.call(w,P,1),L&&(Fl(p),d.g[m].length==0&&(delete d.g[m],d.h--))}}function xl(d,p,m,w){for(var P=0;P<d.length;++P){var L=d[P];if(!L.da&&L.listener==p&&L.capture==!!m&&L.ha==w)return P}return-1}var Yu="closure_lm_"+(1e6*Math.random()|0),Ju={};function Xu(d,p,m,w,P){if(w&&w.once)return Wf(d,p,m,w,P);if(Array.isArray(p)){for(var L=0;L<p.length;L++)Xu(d,p[L],m,w,P);return null}return m=Nl(m),d&&d[Ds]?d.K(p,m,c(w)?!!w.capture:!!w,P):Zu(d,p,m,!1,w,P)}function Zu(d,p,m,w,P,L){if(!p)throw Error("Invalid event type");var q=c(P)?!!P.capture:!!P,tt=Jo(d);if(tt||(d[Yu]=tt=new Yr(d)),m=tt.add(p,m,w,q,L),m.proxy)return m;if(w=ny(),m.proxy=w,w.src=d,w.listener=m,d.addEventListener)Qr||(P=q),P===void 0&&(P=!1),d.addEventListener(p.toString(),w,P);else if(d.attachEvent)d.attachEvent(ed(p.toString()),w);else if(d.addListener&&d.removeListener)d.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return m}function ny(){function d(m){return p.call(d.src,d.listener,m)}let p=jf;return d}function Wf(d,p,m,w,P){if(Array.isArray(p)){for(var L=0;L<p.length;L++)Wf(d,p[L],m,w,P);return null}return m=Nl(m),d&&d[Ds]?d.L(p,m,c(w)?!!w.capture:!!w,P):Zu(d,p,m,!0,w,P)}function Rs(d,p,m,w,P){if(Array.isArray(p))for(var L=0;L<p.length;L++)Rs(d,p[L],m,w,P);else w=c(w)?!!w.capture:!!w,m=Nl(m),d&&d[Ds]?(d=d.i,p=String(p).toString(),p in d.g&&(L=d.g[p],m=xl(L,m,w,P),-1<m&&(Fl(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete d.g[p],d.h--)))):d&&(d=Jo(d))&&(p=d.g[p.toString()],d=-1,p&&(d=xl(p,m,w,P)),(m=-1<d?p[d]:null)&&Jr(m))}function Jr(d){if(typeof d!="number"&&d&&!d.da){var p=d.src;if(p&&p[Ds])Qu(p.i,d);else{var m=d.type,w=d.proxy;p.removeEventListener?p.removeEventListener(m,w,d.capture):p.detachEvent?p.detachEvent(ed(m),w):p.addListener&&p.removeListener&&p.removeListener(w),(m=Jo(p))?(Qu(m,d),m.h==0&&(m.src=null,p[Yu]=null)):Fl(d)}}}function ed(d){return d in Ju?Ju[d]:Ju[d]="on"+d}function jf(d,p){if(d.da)d=!0;else{p=new ei(p,this);var m=d.listener,w=d.ha||d.src;d.fa&&Jr(d),d=m.call(w,p)}return d}function Jo(d){return d=d[Yu],d instanceof Yr?d:null}var Ol="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nl(d){return typeof d=="function"?d:(d[Ol]||(d[Ol]=function(p){return d.handleEvent(p)}),d[Ol])}function Gt(){Zn.call(this),this.i=new Yr(this),this.M=this,this.F=null}v(Gt,Zn),Gt.prototype[Ds]=!0,Gt.prototype.removeEventListener=function(d,p,m,w){Rs(this,d,p,m,w)};function Yt(d,p){var m,w=d.F;if(w)for(m=[];w;w=w.F)m.push(w);if(d=d.M,w=p.type||p,typeof p=="string")p=new It(p,d);else if(p instanceof It)p.target=p.target||d;else{var P=p;p=new It(w,d),R(p,P)}if(P=!0,m)for(var L=m.length-1;0<=L;L--){var q=p.g=m[L];P=zf(q,w,!0,p)&&P}if(q=p.g=d,P=zf(q,w,!0,p)&&P,P=zf(q,w,!1,p)&&P,m)for(L=0;L<m.length;L++)q=p.g=m[L],P=zf(q,w,!1,p)&&P}Gt.prototype.N=function(){if(Gt.aa.N.call(this),this.i){var d=this.i,p;for(p in d.g){for(var m=d.g[p],w=0;w<m.length;w++)Fl(m[w]);delete d.g[p],d.h--}}this.F=null},Gt.prototype.K=function(d,p,m,w){return this.i.add(String(d),p,!1,m,w)},Gt.prototype.L=function(d,p,m,w){return this.i.add(String(d),p,!0,m,w)};function zf(d,p,m,w){if(p=d.i.g[String(p)],!p)return!0;p=p.concat();for(var P=!0,L=0;L<p.length;++L){var q=p[L];if(q&&!q.da&&q.capture==m){var tt=q.listener,gn=q.ha||q.src;q.fa&&Qu(d.i,q),P=tt.call(gn,w)!==!1&&P}}return P&&!w.defaultPrevented}function iA(d,p,m){if(typeof d=="function")m&&(d=f(d,m));else if(d&&typeof d.handleEvent=="function")d=f(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(d,p||0)}function sA(d){d.g=iA(()=>{d.g=null,d.i&&(d.i=!1,sA(d))},d.l);let p=d.h;d.h=null,d.m.apply(null,p)}class RW extends Zn{constructor(p,m){super(),this.m=p,this.l=m,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:sA(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function td(d){Zn.call(this),this.h=d,this.g={}}v(td,Zn);var rA=[];function oA(d){V(d.g,function(p,m){this.g.hasOwnProperty(m)&&Jr(p)},d),d.g={}}td.prototype.N=function(){td.aa.N.call(this),oA(this)},td.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var iy=a.JSON.stringify,TW=a.JSON.parse,IW=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function sy(){}sy.prototype.h=null;function aA(d){return d.h||(d.h=d.i())}function lA(){}var nd={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ry(){It.call(this,"d")}v(ry,It);function oy(){It.call(this,"c")}v(oy,It);var Xo={},cA=null;function $f(){return cA=cA||new Gt}Xo.La="serverreachability";function uA(d){It.call(this,Xo.La,d)}v(uA,It);function id(d){let p=$f();Yt(p,new uA(p))}Xo.STAT_EVENT="statevent";function dA(d,p){It.call(this,Xo.STAT_EVENT,d),this.stat=p}v(dA,It);function On(d){let p=$f();Yt(p,new dA(p,d))}Xo.Ma="timingevent";function hA(d,p){It.call(this,Xo.Ma,d),this.size=p}v(hA,It);function sd(d,p){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},p)}function rd(){this.g=!0}rd.prototype.xa=function(){this.g=!1};function AW(d,p,m,w,P,L){d.info(function(){if(d.g)if(L)for(var q="",tt=L.split("&"),gn=0;gn<tt.length;gn++){var Ke=tt[gn].split("=");if(1<Ke.length){var _n=Ke[0];Ke=Ke[1];var bn=_n.split("_");q=2<=bn.length&&bn[1]=="type"?q+(_n+"="+Ke+"&"):q+(_n+"=redacted&")}}else q=null;else q=L;return"XMLHTTP REQ ("+w+") [attempt "+P+"]: "+p+`
`+m+`
`+q})}function MW(d,p,m,w,P,L,q){d.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+P+"]: "+p+`
`+m+`
`+L+" "+q})}function kl(d,p,m,w){d.info(function(){return"XMLHTTP TEXT ("+p+"): "+FW(d,m)+(w?" "+w:"")})}function PW(d,p){d.info(function(){return"TIMEOUT: "+p})}rd.prototype.info=function(){};function FW(d,p){if(!d.g)return p;if(!p)return null;try{var m=JSON.parse(p);if(m){for(d=0;d<m.length;d++)if(Array.isArray(m[d])){var w=m[d];if(!(2>w.length)){var P=w[1];if(Array.isArray(P)&&!(1>P.length)){var L=P[0];if(L!="noop"&&L!="stop"&&L!="close")for(var q=1;q<P.length;q++)P[q]=""}}}}return iy(m)}catch{return p}}var qf={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fA={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ay;function Kf(){}v(Kf,sy),Kf.prototype.g=function(){return new XMLHttpRequest},Kf.prototype.i=function(){return{}},ay=new Kf;function Xr(d,p,m,w){this.j=d,this.i=p,this.l=m,this.R=w||1,this.U=new td(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pA}function pA(){this.i=null,this.g="",this.h=!1}var gA={},ly={};function cy(d,p,m){d.L=1,d.v=Xf(sr(p)),d.m=m,d.P=!0,mA(d,null)}function mA(d,p){d.F=Date.now(),Qf(d),d.A=sr(d.v);var m=d.A,w=d.R;Array.isArray(w)||(w=[String(w)]),MA(m.i,"t",w),d.C=0,m=d.j.J,d.h=new pA,d.g=KA(d.j,m?p:null,!d.m),0<d.O&&(d.M=new RW(f(d.Y,d,d.g),d.O)),p=d.U,m=d.g,w=d.ca;var P="readystatechange";Array.isArray(P)||(P&&(rA[0]=P.toString()),P=rA);for(var L=0;L<P.length;L++){var q=Xu(m,P[L],w||p.handleEvent,!1,p.h||p);if(!q)break;p.g[q.key]=q}p=d.H?S(d.H):{},d.m?(d.u||(d.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,p)):(d.u="GET",d.g.ea(d.A,d.u,null,p)),id(),AW(d.i,d.u,d.A,d.l,d.R,d.m)}Xr.prototype.ca=function(d){d=d.target;let p=this.M;p&&rr(d)==3?p.j():this.Y(d)},Xr.prototype.Y=function(d){try{if(d==this.g)e:{let bn=rr(this.g);var p=this.g.Ba();let Bl=this.g.Z();if(!(3>bn)&&(bn!=3||this.g&&(this.h.h||this.g.oa()||LA(this.g)))){this.J||bn!=4||p==7||(p==8||0>=Bl?id(3):id(2)),uy(this);var m=this.g.Z();this.X=m;t:if(vA(this)){var w=LA(this.g);d="";var P=w.length,L=rr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zo(this),od(this);var q="";break t}this.h.i=new a.TextDecoder}for(p=0;p<P;p++)this.h.h=!0,d+=this.h.i.decode(w[p],{stream:!(L&&p==P-1)});w.length=0,this.h.g+=d,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=m==200,MW(this.i,this.u,this.A,this.l,this.R,bn,m),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,gn=this.g;if((tt=gn.g?gn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(tt)){var Ke=tt;break t}}Ke=null}if(m=Ke)kl(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,dy(this,m);else{this.o=!1,this.s=3,On(12),Zo(this),od(this);break e}}if(this.P){m=!0;let es;for(;!this.J&&this.C<q.length;)if(es=xW(this,q),es==ly){bn==4&&(this.s=4,On(14),m=!1),kl(this.i,this.l,null,"[Incomplete Response]");break}else if(es==gA){this.s=4,On(15),kl(this.i,this.l,q,"[Invalid Chunk]"),m=!1;break}else kl(this.i,this.l,es,null),dy(this,es);if(vA(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),bn!=4||q.length!=0||this.h.h||(this.s=1,On(16),m=!1),this.o=this.o&&m,!m)kl(this.i,this.l,q,"[Invalid Chunked Response]"),Zo(this),od(this);else if(0<q.length&&!this.W){this.W=!0;var _n=this.j;_n.g==this&&_n.ba&&!_n.M&&(_n.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),vy(_n),_n.M=!0,On(11))}}else kl(this.i,this.l,q,null),dy(this,q);bn==4&&Zo(this),this.o&&!this.J&&(bn==4?jA(this.j,this):(this.o=!1,Qf(this)))}else YW(this.g),m==400&&0<q.indexOf("Unknown SID")?(this.s=3,On(12)):(this.s=0,On(13)),Zo(this),od(this)}}}catch{}finally{}};function vA(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function xW(d,p){var m=d.C,w=p.indexOf(`
`,m);return w==-1?ly:(m=Number(p.substring(m,w)),isNaN(m)?gA:(w+=1,w+m>p.length?ly:(p=p.slice(w,w+m),d.C=w+m,p)))}Xr.prototype.cancel=function(){this.J=!0,Zo(this)};function Qf(d){d.S=Date.now()+d.I,CA(d,d.I)}function CA(d,p){if(d.B!=null)throw Error("WatchDog timer not null");d.B=sd(f(d.ba,d),p)}function uy(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Xr.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(PW(this.i,this.A),this.L!=2&&(id(),On(17)),Zo(this),this.s=2,od(this)):CA(this,this.S-d)};function od(d){d.j.G==0||d.J||jA(d.j,d)}function Zo(d){uy(d);var p=d.M;p&&typeof p.ma=="function"&&p.ma(),d.M=null,oA(d.U),d.g&&(p=d.g,d.g=null,p.abort(),p.ma())}function dy(d,p){try{var m=d.j;if(m.G!=0&&(m.g==d||hy(m.h,d))){if(!d.K&&hy(m.h,d)&&m.G==3){try{var w=m.Da.g.parse(p)}catch{w=null}if(Array.isArray(w)&&w.length==3){var P=w;if(P[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<d.F)ip(m),tp(m);else break e;my(m),On(18)}}else m.za=P[1],0<m.za-m.T&&37500>P[2]&&m.F&&m.v==0&&!m.C&&(m.C=sd(f(m.Za,m),6e3));if(1>=SA(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ta(m,11)}else if((d.K||m.g==d)&&ip(m),!I(p))for(P=m.Da.g.parse(p),p=0;p<P.length;p++){let Ke=P[p];if(m.T=Ke[0],Ke=Ke[1],m.G==2)if(Ke[0]=="c"){m.K=Ke[1],m.ia=Ke[2];let _n=Ke[3];_n!=null&&(m.la=_n,m.j.info("VER="+m.la));let bn=Ke[4];bn!=null&&(m.Aa=bn,m.j.info("SVER="+m.Aa));let Bl=Ke[5];Bl!=null&&typeof Bl=="number"&&0<Bl&&(w=1.5*Bl,m.L=w,m.j.info("backChannelRequestTimeoutMs_="+w)),w=m;let es=d.g;if(es){let rp=es.g?es.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rp){var L=w.h;L.g||rp.indexOf("spdy")==-1&&rp.indexOf("quic")==-1&&rp.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(fy(L,L.h),L.h=null))}if(w.D){let Cy=es.g?es.g.getResponseHeader("X-HTTP-Session-Id"):null;Cy&&(w.ya=Cy,ct(w.I,w.D,Cy))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-d.F,m.j.info("Handshake RTT: "+m.R+"ms")),w=m;var q=d;if(w.qa=qA(w,w.J?w.ia:null,w.W),q.K){_A(w.h,q);var tt=q,gn=w.L;gn&&(tt.I=gn),tt.B&&(uy(tt),Qf(tt)),w.g=q}else UA(w);0<m.i.length&&np(m)}else Ke[0]!="stop"&&Ke[0]!="close"||ta(m,7);else m.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?ta(m,7):gy(m):Ke[0]!="noop"&&m.l&&m.l.ta(Ke),m.v=0)}}id(4)}catch{}}var OW=class{constructor(d,p){this.g=d,this.map=p}};function yA(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wA(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function SA(d){return d.h?1:d.g?d.g.size:0}function hy(d,p){return d.h?d.h==p:d.g?d.g.has(p):!1}function fy(d,p){d.g?d.g.add(p):d.h=p}function _A(d,p){d.h&&d.h==p?d.h=null:d.g&&d.g.has(p)&&d.g.delete(p)}yA.prototype.cancel=function(){if(this.i=bA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function bA(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let p=d.i;for(let m of d.g.values())p=p.concat(m.D);return p}return y(d.i)}function NW(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var p=[],m=d.length,w=0;w<m;w++)p.push(d[w]);return p}p=[],m=0;for(w in d)p[m++]=d[w];return p}function kW(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var p=[];d=d.length;for(var m=0;m<d;m++)p.push(m);return p}p=[],m=0;for(let w in d)p[m++]=w;return p}}}function EA(d,p){if(d.forEach&&typeof d.forEach=="function")d.forEach(p,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,p,void 0);else for(var m=kW(d),w=NW(d),P=w.length,L=0;L<P;L++)p.call(void 0,w[L],m&&m[L],d)}var DA=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function LW(d,p){if(d){d=d.split("&");for(var m=0;m<d.length;m++){var w=d[m].indexOf("="),P=null;if(0<=w){var L=d[m].substring(0,w);P=d[m].substring(w+1)}else L=d[m];p(L,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function ea(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof ea){this.h=d.h,Yf(this,d.j),this.o=d.o,this.g=d.g,Jf(this,d.s),this.l=d.l;var p=d.i,m=new cd;m.i=p.i,p.g&&(m.g=new Map(p.g),m.h=p.h),RA(this,m),this.m=d.m}else d&&(p=String(d).match(DA))?(this.h=!1,Yf(this,p[1]||"",!0),this.o=ad(p[2]||""),this.g=ad(p[3]||"",!0),Jf(this,p[4]),this.l=ad(p[5]||"",!0),RA(this,p[6]||"",!0),this.m=ad(p[7]||"")):(this.h=!1,this.i=new cd(null,this.h))}ea.prototype.toString=function(){var d=[],p=this.j;p&&d.push(ld(p,TA,!0),":");var m=this.g;return(m||p=="file")&&(d.push("//"),(p=this.o)&&d.push(ld(p,TA,!0),"@"),d.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&d.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&d.push("/"),d.push(ld(m,m.charAt(0)=="/"?GW:BW,!0))),(m=this.i.toString())&&d.push("?",m),(m=this.m)&&d.push("#",ld(m,UW)),d.join("")};function sr(d){return new ea(d)}function Yf(d,p,m){d.j=m?ad(p,!0):p,d.j&&(d.j=d.j.replace(/:$/,""))}function Jf(d,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);d.s=p}else d.s=null}function RA(d,p,m){p instanceof cd?(d.i=p,WW(d.i,d.h)):(m||(p=ld(p,HW)),d.i=new cd(p,d.h))}function ct(d,p,m){d.i.set(p,m)}function Xf(d){return ct(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function ad(d,p){return d?p?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ld(d,p,m){return typeof d=="string"?(d=encodeURI(d).replace(p,VW),m&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function VW(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var TA=/[#\/\?@]/g,BW=/[#\?:]/g,GW=/[#\?]/g,HW=/[#\?@]/g,UW=/#/g;function cd(d,p){this.h=this.g=null,this.i=d||null,this.j=!!p}function Zr(d){d.g||(d.g=new Map,d.h=0,d.i&&LW(d.i,function(p,m){d.add(decodeURIComponent(p.replace(/\+/g," ")),m)}))}e=cd.prototype,e.add=function(d,p){Zr(this),this.i=null,d=Ll(this,d);var m=this.g.get(d);return m||this.g.set(d,m=[]),m.push(p),this.h+=1,this};function IA(d,p){Zr(d),p=Ll(d,p),d.g.has(p)&&(d.i=null,d.h-=d.g.get(p).length,d.g.delete(p))}function AA(d,p){return Zr(d),p=Ll(d,p),d.g.has(p)}e.forEach=function(d,p){Zr(this),this.g.forEach(function(m,w){m.forEach(function(P){d.call(p,P,w,this)},this)},this)},e.na=function(){Zr(this);let d=Array.from(this.g.values()),p=Array.from(this.g.keys()),m=[];for(let w=0;w<p.length;w++){let P=d[w];for(let L=0;L<P.length;L++)m.push(p[w])}return m},e.V=function(d){Zr(this);let p=[];if(typeof d=="string")AA(this,d)&&(p=p.concat(this.g.get(Ll(this,d))));else{d=Array.from(this.g.values());for(let m=0;m<d.length;m++)p=p.concat(d[m])}return p},e.set=function(d,p){return Zr(this),this.i=null,d=Ll(this,d),AA(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[p]),this.h+=1,this},e.get=function(d,p){return d?(d=this.V(d),0<d.length?String(d[0]):p):p};function MA(d,p,m){IA(d,p),0<m.length&&(d.i=null,d.g.set(Ll(d,p),y(m)),d.h+=m.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],p=Array.from(this.g.keys());for(var m=0;m<p.length;m++){var w=p[m];let L=encodeURIComponent(String(w)),q=this.V(w);for(w=0;w<q.length;w++){var P=L;q[w]!==""&&(P+="="+encodeURIComponent(String(q[w]))),d.push(P)}}return this.i=d.join("&")};function Ll(d,p){return p=String(p),d.j&&(p=p.toLowerCase()),p}function WW(d,p){p&&!d.j&&(Zr(d),d.i=null,d.g.forEach(function(m,w){var P=w.toLowerCase();w!=P&&(IA(this,w),MA(this,P,m))},d)),d.j=p}function jW(d,p){let m=new rd;if(a.Image){let w=new Image;w.onload=g(eo,m,"TestLoadImage: loaded",!0,p,w),w.onerror=g(eo,m,"TestLoadImage: error",!1,p,w),w.onabort=g(eo,m,"TestLoadImage: abort",!1,p,w),w.ontimeout=g(eo,m,"TestLoadImage: timeout",!1,p,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=d}else p(!1)}function zW(d,p){let m=new rd,w=new AbortController,P=setTimeout(()=>{w.abort(),eo(m,"TestPingServer: timeout",!1,p)},1e4);fetch(d,{signal:w.signal}).then(L=>{clearTimeout(P),L.ok?eo(m,"TestPingServer: ok",!0,p):eo(m,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(P),eo(m,"TestPingServer: error",!1,p)})}function eo(d,p,m,w,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),w(m)}catch{}}function $W(){this.g=new IW}function qW(d,p,m){let w=m||"";try{EA(d,function(P,L){let q=P;c(P)&&(q=iy(P)),p.push(w+L+"="+encodeURIComponent(q))})}catch(P){throw p.push(w+"type="+encodeURIComponent("_badmap")),P}}function ud(d){this.l=d.Ub||null,this.j=d.eb||!1}v(ud,sy),ud.prototype.g=function(){return new Zf(this.l,this.j)},ud.prototype.i=function(d){return function(){return d}}({});function Zf(d,p){Gt.call(this),this.D=d,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Zf,Gt),e=Zf.prototype,e.open=function(d,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=p,this.readyState=1,hd(this)},e.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(p.body=d),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,dd(this)),this.readyState=0},e.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,hd(this)),this.g&&(this.readyState=3,hd(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;PA(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function PA(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}e.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var p=d.value?d.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!d.done}))&&(this.response=this.responseText+=p)}d.done?dd(this):hd(this),this.readyState==3&&PA(this)}},e.Ra=function(d){this.g&&(this.response=this.responseText=d,dd(this))},e.Qa=function(d){this.g&&(this.response=d,dd(this))},e.ga=function(){this.g&&dd(this)};function dd(d){d.readyState=4,d.l=null,d.j=null,d.v=null,hd(d)}e.setRequestHeader=function(d,p){this.u.append(d,p)},e.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],p=this.h.entries();for(var m=p.next();!m.done;)m=m.value,d.push(m[0]+": "+m[1]),m=p.next();return d.join(`\r
`)};function hd(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Zf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function FA(d){let p="";return V(d,function(m,w){p+=w,p+=":",p+=m,p+=`\r
`}),p}function py(d,p,m){e:{for(w in m){var w=!1;break e}w=!0}w||(m=FA(m),typeof d=="string"?m!=null&&encodeURIComponent(String(m)):ct(d,p,m))}function _t(d){Gt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(_t,Gt);var KW=/^https?$/i,QW=["POST","PUT"];e=_t.prototype,e.Ha=function(d){this.J=d},e.ea=function(d,p,m,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);p=p?p.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ay.g(),this.v=this.o?aA(this.o):aA(ay),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(d),!0),this.B=!1}catch(L){xA(this,L);return}if(d=m||"",m=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var P in w)m.set(P,w[P]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(let L of w.keys())m.set(L,w.get(L));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),P=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(QW,p,void 0))||w||P||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[L,q]of m)this.g.setRequestHeader(L,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{kA(this),this.u=!0,this.g.send(d),this.u=!1}catch(L){xA(this,L)}};function xA(d,p){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=p,d.m=5,OA(d),ep(d)}function OA(d){d.A||(d.A=!0,Yt(d,"complete"),Yt(d,"error"))}e.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Yt(this,"complete"),Yt(this,"abort"),ep(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ep(this,!0)),_t.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?NA(this):this.bb())},e.bb=function(){NA(this)};function NA(d){if(d.h&&typeof o<"u"&&(!d.v[1]||rr(d)!=4||d.Z()!=2)){if(d.u&&rr(d)==4)iA(d.Ea,0,d);else if(Yt(d,"readystatechange"),rr(d)==4){d.h=!1;try{let q=d.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var m;if(!(m=p)){var w;if(w=q===0){var P=String(d.D).match(DA)[1]||null;!P&&a.self&&a.self.location&&(P=a.self.location.protocol.slice(0,-1)),w=!KW.test(P?P.toLowerCase():"")}m=w}if(m)Yt(d,"complete"),Yt(d,"success");else{d.m=6;try{var L=2<rr(d)?d.g.statusText:""}catch{L=""}d.l=L+" ["+d.Z()+"]",OA(d)}}finally{ep(d)}}}}function ep(d,p){if(d.g){kA(d);let m=d.g,w=d.v[0]?()=>{}:null;d.g=null,d.v=null,p||Yt(d,"ready");try{m.onreadystatechange=w}catch{}}}function kA(d){d.I&&(a.clearTimeout(d.I),d.I=null)}e.isActive=function(){return!!this.g};function rr(d){return d.g?d.g.readyState:0}e.Z=function(){try{return 2<rr(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(d){if(this.g){var p=this.g.responseText;return d&&p.indexOf(d)==0&&(p=p.substring(d.length)),TW(p)}};function LA(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function YW(d){let p={};d=(d.g&&2<=rr(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<d.length;w++){if(I(d[w]))continue;var m=A(d[w]);let P=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let L=p[P]||[];p[P]=L,L.push(m)}b(p,function(w){return w.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fd(d,p,m){return m&&m.internalChannelParams&&m.internalChannelParams[d]||p}function VA(d){this.Aa=0,this.i=[],this.j=new rd,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fd("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fd("baseRetryDelayMs",5e3,d),this.cb=fd("retryDelaySeedMs",1e4,d),this.Wa=fd("forwardChannelMaxRetries",2,d),this.wa=fd("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new yA(d&&d.concurrentRequestLimit),this.Da=new $W,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=VA.prototype,e.la=8,e.G=1,e.connect=function(d,p,m,w){On(0),this.W=d,this.H=p||{},m&&w!==void 0&&(this.H.OSID=m,this.H.OAID=w),this.F=this.X,this.I=qA(this,null,this.W),np(this)};function gy(d){if(BA(d),d.G==3){var p=d.U++,m=sr(d.I);if(ct(m,"SID",d.K),ct(m,"RID",p),ct(m,"TYPE","terminate"),pd(d,m),p=new Xr(d,d.j,p),p.L=2,p.v=Xf(sr(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=p.v,m=!0),m||(p.g=KA(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Qf(p)}$A(d)}function tp(d){d.g&&(vy(d),d.g.cancel(),d.g=null)}function BA(d){tp(d),d.u&&(a.clearTimeout(d.u),d.u=null),ip(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function np(d){if(!wA(d.h)&&!d.s){d.s=!0;var p=d.Ga;pn||Qo(),Es||(pn(),Es=!0),Zi.add(p,d),d.B=0}}function JW(d,p){return SA(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=p.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=sd(f(d.Ga,d,p),zA(d,d.B)),d.B++,!0)}e.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let P=new Xr(this,this.j,d),L=this.o;if(this.S&&(L?(L=S(L),R(L,this.S)):L=this.S),this.m!==null||this.O||(P.H=L,L=null),this.P)e:{for(var p=0,m=0;m<this.i.length;m++){t:{var w=this.i[m];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(p+=w,4096<p){p=m;break e}if(p===4096||m===this.i.length-1){p=m+1;break e}}p=1e3}else p=1e3;p=HA(this,P,p),m=sr(this.I),ct(m,"RID",d),ct(m,"CVER",22),this.D&&ct(m,"X-HTTP-Session-Id",this.D),pd(this,m),L&&(this.O?p="headers="+encodeURIComponent(String(FA(L)))+"&"+p:this.m&&py(m,this.m,L)),fy(this.h,P),this.Ua&&ct(m,"TYPE","init"),this.P?(ct(m,"$req",p),ct(m,"SID","null"),P.T=!0,cy(P,m,null)):cy(P,m,p),this.G=2}}else this.G==3&&(d?GA(this,d):this.i.length==0||wA(this.h)||GA(this))};function GA(d,p){var m;p?m=p.l:m=d.U++;let w=sr(d.I);ct(w,"SID",d.K),ct(w,"RID",m),ct(w,"AID",d.T),pd(d,w),d.m&&d.o&&py(w,d.m,d.o),m=new Xr(d,d.j,m,d.B+1),d.m===null&&(m.H=d.o),p&&(d.i=p.D.concat(d.i)),p=HA(d,m,1e3),m.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),fy(d.h,m),cy(m,w,p)}function pd(d,p){d.H&&V(d.H,function(m,w){ct(p,w,m)}),d.l&&EA({},function(m,w){ct(p,w,m)})}function HA(d,p,m){m=Math.min(d.i.length,m);var w=d.l?f(d.l.Na,d.l,d):null;e:{var P=d.i;let L=-1;for(;;){let q=["count="+m];L==-1?0<m?(L=P[0].g,q.push("ofs="+L)):L=0:q.push("ofs="+L);let tt=!0;for(let gn=0;gn<m;gn++){let Ke=P[gn].g,_n=P[gn].map;if(Ke-=L,0>Ke)L=Math.max(0,P[gn].g-100),tt=!1;else try{qW(_n,q,"req"+Ke+"_")}catch{w&&w(_n)}}if(tt){w=q.join("&");break e}}}return d=d.i.splice(0,m),p.D=d,w}function UA(d){if(!d.g&&!d.u){d.Y=1;var p=d.Fa;pn||Qo(),Es||(pn(),Es=!0),Zi.add(p,d),d.v=0}}function my(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=sd(f(d.Fa,d),zA(d,d.v)),d.v++,!0)}e.Fa=function(){if(this.u=null,WA(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=sd(f(this.ab,this),d)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,On(10),tp(this),WA(this))};function vy(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function WA(d){d.g=new Xr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var p=sr(d.qa);ct(p,"RID","rpc"),ct(p,"SID",d.K),ct(p,"AID",d.T),ct(p,"CI",d.F?"0":"1"),!d.F&&d.ja&&ct(p,"TO",d.ja),ct(p,"TYPE","xmlhttp"),pd(d,p),d.m&&d.o&&py(p,d.m,d.o),d.L&&(d.g.I=d.L);var m=d.g;d=d.ia,m.L=1,m.v=Xf(sr(p)),m.m=null,m.P=!0,mA(m,d)}e.Za=function(){this.C!=null&&(this.C=null,tp(this),my(this),On(19))};function ip(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function jA(d,p){var m=null;if(d.g==p){ip(d),vy(d),d.g=null;var w=2}else if(hy(d.h,p))m=p.D,_A(d.h,p),w=1;else return;if(d.G!=0){if(p.o)if(w==1){m=p.m?p.m.length:0,p=Date.now()-p.F;var P=d.B;w=$f(),Yt(w,new hA(w,m)),np(d)}else UA(d);else if(P=p.s,P==3||P==0&&0<p.X||!(w==1&&JW(d,p)||w==2&&my(d)))switch(m&&0<m.length&&(p=d.h,p.i=p.i.concat(m)),P){case 1:ta(d,5);break;case 4:ta(d,10);break;case 3:ta(d,6);break;default:ta(d,2)}}}function zA(d,p){let m=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(m*=2),m*p}function ta(d,p){if(d.j.info("Error code "+p),p==2){var m=f(d.fb,d),w=d.Xa;let P=!w;w=new ea(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Yf(w,"https"),Xf(w),P?jW(w.toString(),m):zW(w.toString(),m)}else On(2);d.G=0,d.l&&d.l.sa(p),$A(d),BA(d)}e.fb=function(d){d?(this.j.info("Successfully pinged google.com"),On(2)):(this.j.info("Failed to ping google.com"),On(1))};function $A(d){if(d.G=0,d.ka=[],d.l){let p=bA(d.h);(p.length!=0||d.i.length!=0)&&(C(d.ka,p),C(d.ka,d.i),d.h.i.length=0,y(d.i),d.i.length=0),d.l.ra()}}function qA(d,p,m){var w=m instanceof ea?sr(m):new ea(m);if(w.g!="")p&&(w.g=p+"."+w.g),Jf(w,w.s);else{var P=a.location;w=P.protocol,p=p?p+"."+P.hostname:P.hostname,P=+P.port;var L=new ea(null);w&&Yf(L,w),p&&(L.g=p),P&&Jf(L,P),m&&(L.l=m),w=L}return m=d.D,p=d.ya,m&&p&&ct(w,m,p),ct(w,"VER",d.la),pd(d,w),w}function KA(d,p,m){if(p&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=d.Ca&&!d.pa?new _t(new ud({eb:m})):new _t(d.pa),p.Ha(d.J),p}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function QA(){}e=QA.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function sp(){}sp.prototype.g=function(d,p){return new ui(d,p)};function ui(d,p){Gt.call(this),this.g=new VA(p),this.l=d,this.h=p&&p.messageUrlParams||null,d=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(d?d["X-WebChannel-Content-Type"]=p.messageContentType:d={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(d?d["X-WebChannel-Client-Profile"]=p.va:d={"X-WebChannel-Client-Profile":p.va}),this.g.S=d,(d=p&&p.Sb)&&!I(d)&&(this.g.m=d),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!I(p)&&(this.g.D=p,d=this.h,d!==null&&p in d&&(d=this.h,p in d&&delete d[p])),this.j=new Vl(this)}v(ui,Gt),ui.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ui.prototype.close=function(){gy(this.g)},ui.prototype.o=function(d){var p=this.g;if(typeof d=="string"){var m={};m.__data__=d,d=m}else this.u&&(m={},m.__data__=iy(d),d=m);p.i.push(new OW(p.Ya++,d)),p.G==3&&np(p)},ui.prototype.N=function(){this.g.l=null,delete this.j,gy(this.g),delete this.g,ui.aa.N.call(this)};function YA(d){ry.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var p=d.__sm__;if(p){e:{for(let m in p){d=m;break e}d=void 0}(this.i=d)&&(d=this.i,p=p!==null&&d in p?p[d]:void 0),this.data=p}else this.data=d}v(YA,ry);function JA(){oy.call(this),this.status=1}v(JA,oy);function Vl(d){this.g=d}v(Vl,QA),Vl.prototype.ua=function(){Yt(this.g,"a")},Vl.prototype.ta=function(d){Yt(this.g,new YA(d))},Vl.prototype.sa=function(d){Yt(this.g,new JA)},Vl.prototype.ra=function(){Yt(this.g,"b")},sp.prototype.createWebChannel=sp.prototype.g,ui.prototype.send=ui.prototype.o,ui.prototype.open=ui.prototype.m,ui.prototype.close=ui.prototype.close,l0=Ar.createWebChannelTransport=function(){return new sp},a0=Ar.getStatEventTarget=function(){return $f()},o0=Ar.Event=Xo,Xm=Ar.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qf.NO_ERROR=0,qf.TIMEOUT=8,qf.HTTP_ERROR=6,Ph=Ar.ErrorCode=qf,fA.COMPLETE="complete",r0=Ar.EventType=fA,lA.EventType=nd,nd.OPEN="a",nd.CLOSE="b",nd.ERROR="c",nd.MESSAGE="d",Gt.prototype.listen=Gt.prototype.K,qc=Ar.WebChannel=lA,s0=Ar.FetchXmlHttpFactory=ud,_t.prototype.listenOnce=_t.prototype.L,_t.prototype.getLastError=_t.prototype.Ka,_t.prototype.getLastErrorCode=_t.prototype.Ba,_t.prototype.getStatus=_t.prototype.Z,_t.prototype.getResponseJson=_t.prototype.Oa,_t.prototype.getResponseText=_t.prototype.oa,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Ha,i0=Ar.XhrIo=_t}).apply(typeof Jm<"u"?Jm:typeof self<"u"?self:typeof window<"u"?window:{});var qN="@firebase/firestore";var un=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");var hu="10.12.3";var Ya=new Ms("@firebase/firestore");function Fh(){return Ya.logLevel}function ae(e,...t){if(Ya.logLevel<=di.DEBUG){let n=t.map(QE);Ya.debug(`Firestore (${hu}): ${e}`,...n)}}function Pr(e,...t){if(Ya.logLevel<=di.ERROR){let n=t.map(QE);Ya.error(`Firestore (${hu}): ${e}`,...n)}}function eu(e,...t){if(Ya.logLevel<=di.WARN){let n=t.map(QE);Ya.warn(`Firestore (${hu}): ${e}`,...n)}}function QE(e){if(typeof e=="string")return e;try{return function(n){return JSON.stringify(n)}(e)}catch{return e}}function ye(e="Unexpected state"){let t=`FIRESTORE (${hu}) INTERNAL ASSERTION FAILED: `+e;throw Pr(t),new Error(t)}function lt(e,t){e||ye()}function Se(e,t){return e}var W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ie=class extends ns{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var zs=class{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}};var iv=class{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},f0=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(un.UNAUTHENTICATED))}shutdown(){}},p0=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},g0=class{constructor(t){this.t=t,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let i=this.i,s=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve(),r=new zs;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new zs,t.enqueueRetryable(()=>s(this.currentUser))};let o=()=>{let l=r;t.enqueueRetryable(()=>F(this,null,function*(){yield l.promise,yield s(this.currentUser)}))},a=l=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new zs)}},0),o()}getToken(){let t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(lt(typeof i.accessToken=="string"),new iv(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return lt(t===null||typeof t=="string"),new un(t)}},m0=class{constructor(t,n,i){this.l=t,this.h=n,this.P=i,this.type="FirstParty",this.user=un.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},v0=class{constructor(t,n,i){this.l=t,this.h=n,this.P=i}getToken(){return Promise.resolve(new m0(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(un.FIRST_PARTY))}shutdown(){}invalidateToken(){}},C0=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},y0=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){let i=r=>{r.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);let o=r.token!==this.R;return this.R=r.token,ae("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>i(r))};let s=r=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){let r=this.A.getImmediate({optional:!0});r?s(r):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(lt(typeof n.token=="string"),this.R=n.token,new C0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function mQ(e){let t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}var sv=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length,i="";for(;i.length<20;){let s=mQ(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=t.charAt(s[r]%t.length))}return i}};function Je(e,t){return e<t?-1:e>t?1:0}function tu(e,t,n){return e.length===t.length&&e.every((i,s)=>n(i,t[s]))}var Qt=class e{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new ie(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new ie(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ie(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*n));return new e(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Je(this.nanoseconds,t.nanoseconds):Je(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var be=class e{constructor(t){this.timestamp=t}static fromTimestamp(t){return new e(t)}static min(){return new e(new Qt(0,0))}static max(){return new e(new Qt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var rv=class e{constructor(t,n,i){n===void 0?n=0:n>t.length&&ye(),i===void 0?i=t.length-n:i>t.length-n&&ye(),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let i=Math.min(t.length,n.length);for(let s=0;s<i;s++){let r=t.get(s),o=n.get(s);if(r<o)return-1;if(r>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}},wt=class e extends rv{construct(t,n,i){return new e(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let n=[];for(let i of t){if(i.indexOf("//")>=0)throw new ie(W.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new e(n)}static emptyPath(){return new e([])}},vQ=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ei=class e extends rv{construct(t,n,i){return new e(t,n,i)}static isValidIdentifier(t){return vQ.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new e(["__name__"])}static fromServerFormat(t){let n=[],i="",s=0,r=()=>{if(i.length===0)throw new ie(W.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},o=!1;for(;s<t.length;){let a=t[s];if(a==="\\"){if(s+1===t.length)throw new ie(W.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let l=t[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ie(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(i+=a,s++):(r(),s++)}if(r(),o)throw new ie(W.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}};var fe=class e{constructor(t){this.path=t}static fromPath(t){return new e(wt.fromString(t))}static fromName(t){return new e(wt.fromString(t).popFirst(5))}static empty(){return new e(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&wt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return wt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new e(new wt(t.slice()))}};var w0=class{constructor(t,n,i,s){this.indexId=t,this.collectionGroup=n,this.fields=i,this.indexState=s}};w0.UNKNOWN_ID=-1;function CQ(e,t){let n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,s=be.fromTimestamp(i===1e9?new Qt(n+1,0):new Qt(n,i));return new Ja(s,fe.empty(),t)}function yQ(e){return new Ja(e.readTime,e.key,-1)}var Ja=class e{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new e(be.min(),fe.empty(),-1)}static max(){return new e(be.max(),fe.empty(),-1)}};function wQ(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=fe.comparator(e.documentKey,t.documentKey),n!==0?n:Je(e.largestBatchId,t.largestBatchId))}var SQ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",S0=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function Qh(e){return F(this,null,function*(){if(e.code!==W.FAILED_PRECONDITION||e.message!==SQ)throw e;ae("LocalStore","Unexpectedly lost primary lease")})}var $=class e{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&ye(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(n){return e.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):e.reject(n)}static resolve(t){return new e((n,i)=>{n(t)})}static reject(t){return new e((n,i)=>{i(t)})}static waitFor(t){return new e((n,i)=>{let s=0,r=0,o=!1;t.forEach(a=>{++s,a.next(()=>{++r,o&&r===s&&n()},l=>i(l))}),o=!0,r===s&&n()})}static or(t){let n=e.resolve(!1);for(let i of t)n=n.next(s=>s?e.resolve(s):i());return n}static forEach(t,n){let i=[];return t.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(t,n){return new e((i,s)=>{let r=t.length,o=new Array(r),a=0;for(let l=0;l<r;l++){let c=l;n(t[c]).next(u=>{o[c]=u,++a,a===r&&i(o)},u=>s(u))}})}static doWhile(t,n){return new e((i,s)=>{let r=()=>{t()===!0?n().next(()=>{r()},s):i()};r()})}};function _Q(e){let t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Yh(e){return e.name==="IndexedDbTransactionError"}var Dk=(()=>{class e{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=s=>this.ie(s),this.se=s=>i.writeSequenceNumber(s))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return e.oe=-1,e})();function Vv(e){return e==null}function Vh(e){return e===0&&1/e==-1/0}function bQ(e){return typeof e=="number"&&Number.isInteger(e)&&!Vh(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var EQ=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],gPe=[...EQ,"documentOverlays"],DQ=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],RQ=DQ,mPe=[...RQ,"indexConfiguration","indexState","indexEntries"];function KN(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function il(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Rk(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Tt=class e{constructor(t,n){this.comparator=t,this.root=n||$s.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,$s.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,$s.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){let s=this.comparator(t,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){let t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Jc(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Jc(this.root,t,this.comparator,!1)}getReverseIterator(){return new Jc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Jc(this.root,t,this.comparator,!0)}},Jc=class{constructor(t,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?i(t.key,n):1,n&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},$s=class e{constructor(t,n,i,s,r){this.key=t,this.value=n,this.color=i??e.RED,this.left=s??e.EMPTY,this.right=r??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,s,r){return new e(t??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this,r=i(t,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(t,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return e.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ye();let t=this.left.check();if(t!==this.right.check())throw ye();return t+(this.isRed()?0:1)}};$s.EMPTY=null,$s.RED=!0,$s.BLACK=!1;$s.EMPTY=new class{constructor(){this.size=0}get key(){throw ye()}get value(){throw ye()}get color(){throw ye()}get left(){throw ye()}get right(){throw ye()}copy(t,n,i,s,r){return this}insert(t,n,i){return new $s(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Rn=class e{constructor(t){this.comparator=t,this.data=new Tt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){let i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){let s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){let n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new ov(this.data.getIterator())}getIteratorFrom(t){return new ov(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){let s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(n=>{t.push(n)}),t}toString(){let t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){let n=new e(this.comparator);return n.data=t,n}},ov=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Wi=class e{constructor(t){this.fields=t,t.sort(Ei.comparator)}static empty(){return new e([])}unionWith(t){let n=new Rn(Ei.comparator);for(let i of this.fields)n=n.add(i);for(let i of t)n=n.add(i);return new e(n.toArray())}covers(t){for(let n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return tu(this.fields,t.fields,(n,i)=>n.isEqual(i))}};var av=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var $n=class e{constructor(t){this.binaryString=t}static fromBase64String(t){let n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new av("Invalid base64 string: "+r):r}}(t);return new e(n)}static fromUint8Array(t){let n=function(s){let r="";for(let o=0;o<s.length;++o)r+=String.fromCharCode(s[o]);return r}(t);return new e(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Je(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};$n.EMPTY_BYTE_STRING=new $n("");var TQ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fr(e){if(lt(!!e),typeof e=="string"){let t=0,n=TQ.exec(e);if(lt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}let i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Rt(e.seconds),nanos:Rt(e.nanos)}}function Rt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Oo(e){return typeof e=="string"?$n.fromBase64String(e):$n.fromUint8Array(e)}function YE(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function JE(e){let t=e.mapValue.fields.__previous_value__;return YE(t)?JE(t):t}function Bh(e){let t=Fr(e.mapValue.fields.__local_write_time__.timestampValue);return new Qt(t.seconds,t.nanos)}var _0=class{constructor(t,n,i,s,r,o,a,l,c){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}},lv=class e{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new e("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}};var Zm={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Xa(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?YE(e)?4:Tk(e)?9007199254740991:10:ye()}function Ys(e,t){if(e===t)return!0;let n=Xa(e);if(n!==Xa(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Bh(e).isEqual(Bh(t));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;let o=Fr(s.timestampValue),a=Fr(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,r){return Oo(s.bytesValue).isEqual(Oo(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,r){return Rt(s.geoPointValue.latitude)===Rt(r.geoPointValue.latitude)&&Rt(s.geoPointValue.longitude)===Rt(r.geoPointValue.longitude)}(e,t);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Rt(s.integerValue)===Rt(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){let o=Rt(s.doubleValue),a=Rt(r.doubleValue);return o===a?Vh(o)===Vh(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return tu(e.arrayValue.values||[],t.arrayValue.values||[],Ys);case 10:return function(s,r){let o=s.mapValue.fields||{},a=r.mapValue.fields||{};if(KN(o)!==KN(a))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ys(o[l],a[l])))return!1;return!0}(e,t);default:return ye()}}function Gh(e,t){return(e.values||[]).find(n=>Ys(n,t))!==void 0}function nu(e,t){if(e===t)return 0;let n=Xa(e),i=Xa(t);if(n!==i)return Je(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Je(e.booleanValue,t.booleanValue);case 2:return function(r,o){let a=Rt(r.integerValue||r.doubleValue),l=Rt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return QN(e.timestampValue,t.timestampValue);case 4:return QN(Bh(e),Bh(t));case 5:return Je(e.stringValue,t.stringValue);case 6:return function(r,o){let a=Oo(r),l=Oo(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(r,o){let a=r.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){let u=Je(a[c],l[c]);if(u!==0)return u}return Je(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,o){let a=Je(Rt(r.latitude),Rt(o.latitude));return a!==0?a:Je(Rt(r.longitude),Rt(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(r,o){let a=r.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){let u=nu(a[c],l[c]);if(u)return u}return Je(a.length,l.length)}(e.arrayValue,t.arrayValue);case 10:return function(r,o){if(r===Zm.mapValue&&o===Zm.mapValue)return 0;if(r===Zm.mapValue)return 1;if(o===Zm.mapValue)return-1;let a=r.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){let f=Je(l[h],u[h]);if(f!==0)return f;let g=nu(a[l[h]],c[u[h]]);if(g!==0)return g}return Je(l.length,u.length)}(e.mapValue,t.mapValue);default:throw ye()}}function QN(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Je(e,t);let n=Fr(e),i=Fr(t),s=Je(n.seconds,i.seconds);return s!==0?s:Je(n.nanos,i.nanos)}function iu(e){return b0(e)}function b0(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){let i=Fr(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return Oo(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return fe.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",s=!0;for(let r of n.values||[])s?s=!1:i+=",",i+=b0(r);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){let i=Object.keys(n.fields||{}).sort(),s="{",r=!0;for(let o of i)r?r=!1:s+=",",s+=`${o}:${b0(n.fields[o])}`;return s+"}"}(e.mapValue):ye()}function YN(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function E0(e){return!!e&&"integerValue"in e}function XE(e){return!!e&&"arrayValue"in e}function JN(e){return!!e&&"nullValue"in e}function XN(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function tv(e){return!!e&&"mapValue"in e}function Oh(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return il(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=Oh(i)),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Oh(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Tk(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var bi=class e{constructor(t){this.value=t}static empty(){return new e({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!tv(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Oh(n)}setAll(t){let n=Ei.emptyPath(),i={},s=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let l=this.getFieldsMap(n);this.applyChanges(l,i,s),i={},s=[],n=a.popLast()}o?i[a.lastSegment()]=Oh(o):s.push(a.lastSegment())});let r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(t){let n=this.field(t.popLast());tv(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ys(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=n.mapValue.fields[t.get(i)];tv(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,i){il(n,(s,r)=>t[s]=r);for(let s of i)delete t[s]}clone(){return new e(Oh(this.value))}};function Ik(e){let t=[];return il(e.fields,(n,i)=>{let s=new Ei([n]);if(tv(i)){let r=Ik(i.mapValue).fields;if(r.length===0)t.push(s);else for(let o of r)t.push(s.child(o))}else t.push(s)}),new Wi(t)}var ps=class e{constructor(t,n,i,s,r,o,a){this.key=t,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(t){return new e(t,0,be.min(),be.min(),be.min(),bi.empty(),0)}static newFoundDocument(t,n,i,s){return new e(t,1,n,be.min(),i,s,0)}static newNoDocument(t,n){return new e(t,2,n,be.min(),be.min(),bi.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,be.min(),be.min(),bi.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=bi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=bi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var su=class{constructor(t,n){this.position=t,this.inclusive=n}};function ZN(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){let r=t[s],o=e.position[s];if(r.field.isKeyField()?i=fe.comparator(fe.fromName(o.referenceValue),n.key):i=nu(o,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function ek(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ys(e.position[n],t.position[n]))return!1;return!0}var Za=class{constructor(t,n="asc"){this.field=t,this.dir=n}};function IQ(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var cv=class{},Bt=class e extends cv{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new R0(t,n,i):n==="array-contains"?new A0(t,i):n==="in"?new M0(t,i):n==="not-in"?new P0(t,i):n==="array-contains-any"?new F0(t,i):new e(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new T0(t,i):new I0(t,i)}matches(t){let n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(nu(n,this.value)):n!==null&&Xa(this.value)===Xa(n)&&this.matchesComparison(nu(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ye()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},gs=class e extends cv{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new e(t,n)}matches(t){return Ak(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Ak(e){return e.op==="and"}function Mk(e){return AQ(e)&&Ak(e)}function AQ(e){for(let t of e.filters)if(t instanceof gs)return!1;return!0}function D0(e){if(e instanceof Bt)return e.field.canonicalString()+e.op.toString()+iu(e.value);if(Mk(e))return e.filters.map(t=>D0(t)).join(",");{let t=e.filters.map(n=>D0(n)).join(",");return`${e.op}(${t})`}}function Pk(e,t){return e instanceof Bt?function(i,s){return s instanceof Bt&&i.op===s.op&&i.field.isEqual(s.field)&&Ys(i.value,s.value)}(e,t):e instanceof gs?function(i,s){return s instanceof gs&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,o,a)=>r&&Pk(o,s.filters[a]),!0):!1}(e,t):void ye()}function Fk(e){return e instanceof Bt?function(n){return`${n.field.canonicalString()} ${n.op} ${iu(n.value)}`}(e):e instanceof gs?function(n){return n.op.toString()+" {"+n.getFilters().map(Fk).join(" ,")+"}"}(e):"Filter"}var R0=class extends Bt{constructor(t,n,i){super(t,n,i),this.key=fe.fromName(i.referenceValue)}matches(t){let n=fe.comparator(t.key,this.key);return this.matchesComparison(n)}},T0=class extends Bt{constructor(t,n){super(t,"in",n),this.keys=xk("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}},I0=class extends Bt{constructor(t,n){super(t,"not-in",n),this.keys=xk("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}};function xk(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>fe.fromName(i.referenceValue))}var A0=class extends Bt{constructor(t,n){super(t,"array-contains",n)}matches(t){let n=t.data.field(this.field);return XE(n)&&Gh(n.arrayValue,this.value)}},M0=class extends Bt{constructor(t,n){super(t,"in",n)}matches(t){let n=t.data.field(this.field);return n!==null&&Gh(this.value.arrayValue,n)}},P0=class extends Bt{constructor(t,n){super(t,"not-in",n)}matches(t){if(Gh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=t.data.field(this.field);return n!==null&&!Gh(this.value.arrayValue,n)}},F0=class extends Bt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){let n=t.data.field(this.field);return!(!XE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Gh(this.value.arrayValue,i))}};var x0=class{constructor(t,n=null,i=[],s=[],r=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=o,this.endAt=a,this.ue=null}};function tk(e,t=null,n=[],i=[],s=null,r=null,o=null){return new x0(e,t,n,i,s,r,o)}function ZE(e){let t=Se(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>D0(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),Vv(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>iu(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>iu(i)).join(",")),t.ue=n}return t.ue}function eD(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!IQ(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Pk(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ek(e.startAt,t.startAt)&&ek(e.endAt,t.endAt)}function O0(e){return fe.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}var No=class{constructor(t,n=null,i=[],s=[],r=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function MQ(e,t,n,i,s,r,o,a){return new No(e,t,n,i,s,r,o,a)}function Bv(e){return new No(e)}function nk(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Ok(e){return e.collectionGroup!==null}function Nh(e){let t=Se(e);if(t.ce===null){t.ce=[];let n=new Set;for(let r of t.explicitOrderBy)t.ce.push(r),n.add(r.field.canonicalString());let i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Rn(Ei.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||t.ce.push(new Za(r,i))}),n.has(Ei.keyField().canonicalString())||t.ce.push(new Za(Ei.keyField(),i))}return t.ce}function qs(e){let t=Se(e);return t.le||(t.le=PQ(t,Nh(e))),t.le}function PQ(e,t){if(e.limitType==="F")return tk(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{let r=s.dir==="desc"?"asc":"desc";return new Za(s.field,r)});let n=e.endAt?new su(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new su(e.startAt.position,e.startAt.inclusive):null;return tk(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function N0(e,t){let n=e.filters.concat([t]);return new No(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function k0(e,t,n){return new No(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Gv(e,t){return eD(qs(e),qs(t))&&e.limitType===t.limitType}function Nk(e){return`${ZE(qs(e))}|lt:${e.limitType}`}function Kc(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>Fk(s)).join(", ")}]`),Vv(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>iu(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>iu(s)).join(",")),`Target(${i})`}(qs(e))}; limitType=${e.limitType})`}function Hv(e,t){return t.isFoundDocument()&&function(i,s){let r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):fe.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(e,t)&&function(i,s){for(let r of Nh(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(e,t)&&function(i,s){for(let r of i.filters)if(!r.matches(s))return!1;return!0}(e,t)&&function(i,s){return!(i.startAt&&!function(o,a,l){let c=ZN(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,Nh(i),s)||i.endAt&&!function(o,a,l){let c=ZN(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,Nh(i),s))}(e,t)}function FQ(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function kk(e){return(t,n)=>{let i=!1;for(let s of Nh(e)){let r=xQ(s,t,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function xQ(e,t,n){let i=e.field.isKeyField()?fe.comparator(t.key,n.key):function(r,o,a){let l=o.data.field(r),c=a.data.field(r);return l!==null&&c!==null?nu(l,c):ye()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return ye()}}var ko=class{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){let n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(let[s,r]of i)if(this.equalsFn(s,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){let i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return void(s[r]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){let n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){il(this.inner,(n,i)=>{for(let[s,r]of i)t(s,r)})}isEmpty(){return Rk(this.inner)}size(){return this.innerSize}};var OQ=new Tt(fe.comparator);function xr(){return OQ}var Lk=new Tt(fe.comparator);function xh(...e){let t=Lk;for(let n of e)t=t.insert(n.key,n);return t}function Vk(e){let t=Lk;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function qa(){return kh()}function Bk(){return kh()}function kh(){return new ko(e=>e.toString(),(e,t)=>e.isEqual(t))}var NQ=new Tt(fe.comparator),kQ=new Rn(fe.comparator);function Ne(...e){let t=kQ;for(let n of e)t=t.add(n);return t}var LQ=new Rn(Je);function VQ(){return LQ}function Gk(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vh(t)?"-0":t}}function Hk(e){return{integerValue:""+e}}function BQ(e,t){return bQ(t)?Hk(t):Gk(e,t)}var ru=class{constructor(){this._=void 0}};function GQ(e,t,n){return e instanceof ou?function(s,r){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&YE(r)&&(r=JE(r)),r&&(o.fields.__previous_value__=r),{mapValue:o}}(n,t):e instanceof Lo?Wk(e,t):e instanceof Vo?jk(e,t):function(s,r){let o=Uk(s,r),a=ik(o)+ik(s.Pe);return E0(o)&&E0(s.Pe)?Hk(a):Gk(s.serializer,a)}(e,t)}function HQ(e,t,n){return e instanceof Lo?Wk(e,t):e instanceof Vo?jk(e,t):n}function Uk(e,t){return e instanceof au?function(i){return E0(i)||function(r){return!!r&&"doubleValue"in r}(i)}(t)?t:{integerValue:0}:null}var ou=class extends ru{},Lo=class extends ru{constructor(t){super(),this.elements=t}};function Wk(e,t){let n=zk(t);for(let i of e.elements)n.some(s=>Ys(s,i))||n.push(i);return{arrayValue:{values:n}}}var Vo=class extends ru{constructor(t){super(),this.elements=t}};function jk(e,t){let n=zk(t);for(let i of e.elements)n=n.filter(s=>!Ys(s,i));return{arrayValue:{values:n}}}var au=class extends ru{constructor(t,n){super(),this.serializer=t,this.Pe=n}};function ik(e){return Rt(e.integerValue||e.doubleValue)}function zk(e){return XE(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var uv=class{constructor(t,n){this.field=t,this.transform=n}};function UQ(e,t){return e.field.isEqual(t.field)&&function(i,s){return i instanceof Lo&&s instanceof Lo||i instanceof Vo&&s instanceof Vo?tu(i.elements,s.elements,Ys):i instanceof au&&s instanceof au?Ys(i.Pe,s.Pe):i instanceof ou&&s instanceof ou}(e.transform,t.transform)}var L0=class{constructor(t,n){this.version=t,this.transformResults=n}},Mr=class e{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function nv(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}var lu=class{};function $k(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Hh(e.key,Mr.none()):new el(e.key,e.data,Mr.none());{let n=e.data,i=bi.empty(),s=new Rn(Ei.comparator);for(let r of t.fields)if(!s.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?i.delete(r):i.set(r,o),s=s.add(r)}return new Js(e.key,i,new Wi(s.toArray()),Mr.none())}}function WQ(e,t,n){e instanceof el?function(s,r,o){let a=s.value.clone(),l=rk(s.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Js?function(s,r,o){if(!nv(s.precondition,r))return void r.convertToUnknownDocument(o.version);let a=rk(s.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(qk(s)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(s,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function Lh(e,t,n,i){return e instanceof el?function(r,o,a,l){if(!nv(r.precondition,o))return a;let c=r.value.clone(),u=ok(r.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,i):e instanceof Js?function(r,o,a,l){if(!nv(r.precondition,o))return a;let c=ok(r.fieldTransforms,l,o),u=o.data;return u.setAll(qk(r)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(h=>h.field))}(e,t,n,i):function(r,o,a){return nv(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function jQ(e,t){let n=null;for(let i of e.fieldTransforms){let s=t.data.field(i.field),r=Uk(i.transform,s||null);r!=null&&(n===null&&(n=bi.empty()),n.set(i.field,r))}return n||null}function sk(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&tu(i,s,(r,o)=>UQ(r,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var el=class extends lu{constructor(t,n,i,s=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}},Js=class extends lu{constructor(t,n,i,s,r=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}};function qk(e){let t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=e.data.field(n);t.set(n,i)}}),t}function rk(e,t,n){let i=new Map;lt(e.length===n.length);for(let s=0;s<n.length;s++){let r=e[s],o=r.transform,a=t.data.field(r.field);i.set(r.field,HQ(o,a,n[s]))}return i}function ok(e,t,n){let i=new Map;for(let s of e){let r=s.transform,o=n.data.field(s.field);i.set(s.field,GQ(r,o,t))}return i}var Hh=class extends lu{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},V0=class extends lu{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var B0=class{constructor(t,n,i,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,n){let i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){let r=this.mutations[s];r.key.isEqual(t.key)&&WQ(r,t,i[s])}}applyToLocalView(t,n){for(let i of this.baseMutations)i.key.isEqual(t.key)&&(n=Lh(i,t,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(t.key)&&(n=Lh(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){let i=Bk();return this.mutations.forEach(s=>{let r=t.get(s.key),o=r.overlayedDocument,a=this.applyToLocalView(o,r.mutatedFields);a=n.has(s.key)?null:a;let l=$k(o,a);l!==null&&i.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(be.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Ne())}isEqual(t){return this.batchId===t.batchId&&tu(this.mutations,t.mutations,(n,i)=>sk(n,i))&&tu(this.baseMutations,t.baseMutations,(n,i)=>sk(n,i))}},G0=class e{constructor(t,n,i,s){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(t,n,i){lt(t.mutations.length===i.length);let s=function(){return NQ}(),r=t.mutations;for(let o=0;o<r.length;o++)s=s.insert(r[o].key,i[o].version);return new e(t,n,i,s)}};var H0=class{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var U0=class{constructor(t,n){this.count=t,this.unchangedNames=n}};var Lt,We;function zQ(e){switch(e){default:return ye();case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0}}function Kk(e){if(e===void 0)return Pr("GRPC error has no .code"),W.UNKNOWN;switch(e){case Lt.OK:return W.OK;case Lt.CANCELLED:return W.CANCELLED;case Lt.UNKNOWN:return W.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return W.INTERNAL;case Lt.UNAVAILABLE:return W.UNAVAILABLE;case Lt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Lt.NOT_FOUND:return W.NOT_FOUND;case Lt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Lt.ABORTED:return W.ABORTED;case Lt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Lt.DATA_LOSS:return W.DATA_LOSS;default:return ye()}}(We=Lt||(Lt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";var ak=null;function $Q(){return new TextEncoder}var qQ=new Fo([4294967295,4294967295],0);function lk(e){let t=$Q().encode(e),n=new n0;return n.update(t),new Uint8Array(n.digest())}function ck(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new Fo([n,i],0),new Fo([s,r],0)]}var W0=class e{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Ka(`Invalid padding: ${n}`);if(i<0)throw new Ka(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Ka(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Ka(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=Fo.fromNumber(this.Ie)}Ee(t,n,i){let s=t.add(n.multiply(Fo.fromNumber(i)));return s.compare(qQ)===1&&(s=new Fo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;let n=lk(t),[i,s]=ck(n);for(let r=0;r<this.hashCount;r++){let o=this.Ee(i,s,r);if(!this.de(o))return!1}return!0}static create(t,n,i){let s=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),o=new e(r,s,n);return i.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;let n=lk(t),[i,s]=ck(n);for(let r=0;r<this.hashCount;r++){let o=this.Ee(i,s,r);this.Ae(o)}}Ae(t){let n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}},Ka=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var dv=class e{constructor(t,n,i,s,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,i){let s=new Map;return s.set(t,Uh.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new e(be.min(),s,new Tt(Je),xr(),Ne())}},Uh=class e{constructor(t,n,i,s,r){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new e(i,n,Ne(),Ne(),Ne())}};var Xc=class{constructor(t,n,i,s){this.Re=t,this.removedTargetIds=n,this.key=i,this.Ve=s}},hv=class{constructor(t,n){this.targetId=t,this.me=n}},fv=class{constructor(t,n,i=$n.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=s}},pv=class{constructor(){this.fe=0,this.ge=dk(),this.pe=$n.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=Ne(),n=Ne(),i=Ne();return this.ge.forEach((s,r)=>{switch(r){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:ye()}}),new Uh(this.pe,this.ye,t,n,i)}ve(){this.we=!1,this.ge=dk()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,lt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},j0=class{constructor(t){this.Le=t,this.Be=new Map,this.ke=xr(),this.qe=uk(),this.Qe=new Tt(Je)}Ke(t){for(let n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(let n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{let i=this.Ge(n);switch(t.state){case 0:this.ze(n)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(t.resumeToken));break;default:ye()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((i,s)=>{this.ze(s)&&n(s)})}He(t){let n=t.targetId,i=t.me.count,s=this.Je(n);if(s){let r=s.target;if(O0(r))if(i===0){let o=new fe(r.path);this.Ue(n,o,ps.newNoDocument(o,be.min()))}else lt(i===1);else{let o=this.Ye(n);if(o!==i){let a=this.Ze(t),l=a?this.Xe(a,t,o):1;if(l!==0){this.je(n);let c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}ak?.et(function(u,h,f,g,v){var y,C,E,I,T,x;let z={localCacheCount:u,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},V=h.unchangedNames;return V&&(z.bloomFilter={applied:v===0,hashCount:(y=V?.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(I=(E=(C=V?.bits)===null||C===void 0?void 0:C.bitmap)===null||E===void 0?void 0:E.length)!==null&&I!==void 0?I:0,padding:(x=(T=V?.bits)===null||T===void 0?void 0:T.padding)!==null&&x!==void 0?x:0,mightContain:b=>{var S;return(S=g?.mightContain(b))!==null&&S!==void 0&&S}}),z}(o,t.me,this.Le.tt(),a,l))}}}}Ze(t){let n=t.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n,o,a;try{o=Oo(i).toUint8Array()}catch(l){if(l instanceof av)return eu("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new W0(o,s,r)}catch(l){return eu(l instanceof Ka?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(t,n,i){return n.me.count===i-this.nt(t,n.targetId)?0:2}nt(t,n){let i=this.Le.getRemoteKeysForTarget(n),s=0;return i.forEach(r=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,r,null),s++)}),s}rt(t){let n=new Map;this.Be.forEach((r,o)=>{let a=this.Je(o);if(a){if(r.current&&O0(a.target)){let l=new fe(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,ps.newNoDocument(l,t))}r.be&&(n.set(o,r.Ce()),r.ve())}});let i=Ne();this.qe.forEach((r,o)=>{let a=!0;o.forEachWhile(l=>{let c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(r))}),this.ke.forEach((r,o)=>o.setReadTime(t));let s=new dv(t,n,this.Qe,this.ke,i);return this.ke=xr(),this.qe=uk(),this.Qe=new Tt(Je),s}$e(t,n){if(!this.ze(t))return;let i=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,i){if(!this.ze(t))return;let s=this.Ge(t);this.it(t,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(t){this.Be.delete(t)}Ye(t){let n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new pv,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Rn(Je),this.qe=this.qe.insert(t,n)),n}ze(t){let n=this.Je(t)!==null;return n||ae("WatchChangeAggregator","Detected inactive target",t),n}Je(t){let n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new pv),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}};function uk(){return new Tt(fe.comparator)}function dk(){return new Tt(fe.comparator)}var KQ={asc:"ASCENDING",desc:"DESCENDING"},QQ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YQ={and:"AND",or:"OR"},z0=class{constructor(t,n){this.databaseId=t,this.useProto3Json=n}};function $0(e,t){return e.useProto3Json||Vv(t)?t:{value:t}}function gv(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Qk(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function JQ(e,t){return gv(e,t.toTimestamp())}function Ks(e){return lt(!!e),be.fromTimestamp(function(n){let i=Fr(n);return new Qt(i.seconds,i.nanos)}(e))}function tD(e,t){return q0(e,t).canonicalString()}function q0(e,t){let n=function(s){return new wt(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function Yk(e){let t=wt.fromString(e);return lt(tL(t)),t}function K0(e,t){return tD(e.databaseId,t.path)}function c0(e,t){let n=Yk(t);if(n.get(1)!==e.databaseId.projectId)throw new ie(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ie(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new fe(Xk(n))}function Jk(e,t){return tD(e.databaseId,t)}function XQ(e){let t=Yk(e);return t.length===4?wt.emptyPath():Xk(t)}function Q0(e){return new wt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Xk(e){return lt(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function hk(e,t,n){return{name:K0(e,t),fields:n.value.mapValue.fields}}function ZQ(e,t){let n;if("targetChange"in t){t.targetChange;let i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ye()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=function(c,u){return c.useProto3Json?(lt(u===void 0||typeof u=="string"),$n.fromBase64String(u||"")):(lt(u===void 0||u instanceof Buffer||u instanceof Uint8Array),$n.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){let u=c.code===void 0?W.UNKNOWN:Kk(c.code);return new ie(u,c.message||"")}(o);n=new fv(i,s,r,a||null)}else if("documentChange"in t){t.documentChange;let i=t.documentChange;i.document,i.document.name,i.document.updateTime;let s=c0(e,i.document.name),r=Ks(i.document.updateTime),o=i.document.createTime?Ks(i.document.createTime):be.min(),a=new bi({mapValue:{fields:i.document.fields}}),l=ps.newFoundDocument(s,r,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new Xc(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;let i=t.documentDelete;i.document;let s=c0(e,i.document),r=i.readTime?Ks(i.readTime):be.min(),o=ps.newNoDocument(s,r),a=i.removedTargetIds||[];n=new Xc([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;let i=t.documentRemove;i.document;let s=c0(e,i.document),r=i.removedTargetIds||[];n=new Xc([],r,s,null)}else{if(!("filter"in t))return ye();{t.filter;let i=t.filter;i.targetId;let{count:s=0,unchangedNames:r}=i,o=new U0(s,r),a=i.targetId;n=new hv(a,o)}}return n}function eY(e,t){let n;if(t instanceof el)n={update:hk(e,t.key,t.value)};else if(t instanceof Hh)n={delete:K0(e,t.key)};else if(t instanceof Js)n={update:hk(e,t.key,t.data),updateMask:cY(t.fieldMask)};else{if(!(t instanceof V0))return ye();n={verify:K0(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(r,o){let a=o.transform;if(a instanceof ou)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Lo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Vo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof au)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ye()}(0,i))),t.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:JQ(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:ye()}(e,t.precondition)),n}function tY(e,t){return e&&e.length>0?(lt(t!==void 0),e.map(n=>function(s,r){let o=s.updateTime?Ks(s.updateTime):Ks(r);return o.isEqual(be.min())&&(o=Ks(r)),new L0(o,s.transformResults||[])}(n,t))):[]}function nY(e,t){return{documents:[Jk(e,t.path)]}}function iY(e,t){let n={structuredQuery:{}},i=t.path,s;t.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Jk(e,s);let r=function(c){if(c.length!==0)return eL(gs.create(c,"and"))}(t.filters);r&&(n.structuredQuery.where=r);let o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:Qc(f.field),direction:oY(f.dir)}}(u))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);let a=$0(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{_t:n,parent:s}}function sY(e){let t=XQ(e.parent),n=e.structuredQuery,i=n.from?n.from.length:0,s=null;if(i>0){lt(i===1);let u=n.from[0];u.allDescendants?s=u.collectionId:t=t.child(u.collectionId)}let r=[];n.where&&(r=function(h){let f=Zk(h);return f instanceof gs&&Mk(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(v){return new Za(Yc(v.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Vv(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){let f=!!h.before,g=h.values||[];return new su(g,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){let f=!h.before,g=h.values||[];return new su(g,f)}(n.endAt)),MQ(t,s,o,r,a,"F",l,c)}function rY(e,t){let n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Zk(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=Yc(n.unaryFilter.field);return Bt.create(i,"==",{doubleValue:NaN});case"IS_NULL":let s=Yc(n.unaryFilter.field);return Bt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let r=Yc(n.unaryFilter.field);return Bt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Yc(n.unaryFilter.field);return Bt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ye()}}(e):e.fieldFilter!==void 0?function(n){return Bt.create(Yc(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ye()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return gs.create(n.compositeFilter.filters.map(i=>Zk(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ye()}}(n.compositeFilter.op))}(e):ye()}function oY(e){return KQ[e]}function aY(e){return QQ[e]}function lY(e){return YQ[e]}function Qc(e){return{fieldPath:e.canonicalString()}}function Yc(e){return Ei.fromServerFormat(e.fieldPath)}function eL(e){return e instanceof Bt?function(n){if(n.op==="=="){if(XN(n.value))return{unaryFilter:{field:Qc(n.field),op:"IS_NAN"}};if(JN(n.value))return{unaryFilter:{field:Qc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(XN(n.value))return{unaryFilter:{field:Qc(n.field),op:"IS_NOT_NAN"}};if(JN(n.value))return{unaryFilter:{field:Qc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qc(n.field),op:aY(n.op),value:n.value}}}(e):e instanceof gs?function(n){let i=n.getFilters().map(s=>eL(s));return i.length===1?i[0]:{compositeFilter:{op:lY(n.op),filters:i}}}(e):ye()}function cY(e){let t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function tL(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}var Wh=class e{constructor(t,n,i,s,r=be.min(),o=be.min(),a=$n.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var Y0=class{constructor(t){this.ct=t}};function uY(e){let t=sY({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?k0(t,t.limit,"L"):t}var mv=class{constructor(){}Pt(t,n){this.It(t,n),n.Tt()}It(t,n){if("nullValue"in t)this.Et(n,5);else if("booleanValue"in t)this.Et(n,10),n.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(n,15),n.dt(Rt(t.integerValue));else if("doubleValue"in t){let i=Rt(t.doubleValue);isNaN(i)?this.Et(n,13):(this.Et(n,15),Vh(i)?n.dt(0):n.dt(i))}else if("timestampValue"in t){let i=t.timestampValue;this.Et(n,20),typeof i=="string"&&(i=Fr(i)),n.At(`${i.seconds||""}`),n.dt(i.nanos||0)}else if("stringValue"in t)this.Rt(t.stringValue,n),this.Vt(n);else if("bytesValue"in t)this.Et(n,30),n.ft(Oo(t.bytesValue)),this.Vt(n);else if("referenceValue"in t)this.gt(t.referenceValue,n);else if("geoPointValue"in t){let i=t.geoPointValue;this.Et(n,45),n.dt(i.latitude||0),n.dt(i.longitude||0)}else"mapValue"in t?Tk(t)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,n),this.Vt(n)):"arrayValue"in t?(this.wt(t.arrayValue,n),this.Vt(n)):ye()}Rt(t,n){this.Et(n,25),this.St(t,n)}St(t,n){n.At(t)}yt(t,n){let i=t.fields||{};this.Et(n,55);for(let s of Object.keys(i))this.Rt(s,n),this.It(i[s],n)}wt(t,n){let i=t.values||[];this.Et(n,50);for(let s of i)this.It(s,n)}gt(t,n){this.Et(n,37),fe.fromName(t).path.forEach(i=>{this.Et(n,60),this.St(i,n)})}Et(t,n){t.dt(n)}Vt(t){t.dt(2)}};mv.bt=new mv;var J0=class{constructor(){this._n=new X0}addToCollectionParentIndex(t,n){return this._n.add(n),$.resolve()}getCollectionParents(t,n){return $.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return $.resolve()}deleteFieldIndex(t,n){return $.resolve()}deleteAllFieldIndexes(t){return $.resolve()}createTargetIndexes(t,n){return $.resolve()}getDocumentsMatchingTarget(t,n){return $.resolve(null)}getIndexType(t,n){return $.resolve(0)}getFieldIndexes(t,n){return $.resolve([])}getNextCollectionGroupToUpdate(t){return $.resolve(null)}getMinOffset(t,n){return $.resolve(Ja.min())}getMinOffsetFromCollectionGroup(t,n){return $.resolve(Ja.min())}updateCollectionGroup(t,n,i){return $.resolve()}updateIndexEntries(t,n){return $.resolve()}},X0=class{constructor(){this.index={}}add(t){let n=t.lastSegment(),i=t.popLast(),s=this.index[n]||new Rn(wt.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(t){let n=t.lastSegment(),i=t.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(t){return(this.index[t]||new Rn(wt.comparator)).toArray()}};var CPe=new Uint8Array(0);var js=class e{constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};js.DEFAULT_COLLECTION_PERCENTILE=10,js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,js.DEFAULT=new js(41943040,js.DEFAULT_COLLECTION_PERCENTILE,js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),js.DISABLED=new js(-1,0,0);var jh=class e{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new e(0)}static Ln(){return new e(-1)}};var Z0=class{constructor(){this.changes=new ko(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ps.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?$.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var eE=class{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}};var tE=class{constructor(t,n,i,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(i!==null&&Lh(i.mutation,s,Wi.empty(),Qt.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,Ne()).next(()=>i))}getLocalViewOfDocuments(t,n,i=Ne()){let s=qa();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,i).next(r=>{let o=xh();return r.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){let i=qa();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,Ne()))}populateOverlays(t,n,i){let s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(t,s).next(r=>{r.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,i,s){let r=xr(),o=kh(),a=function(){return kh()}();return n.forEach((l,c)=>{let u=i.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof Js)?r=r.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Lh(u.mutation,c,u.mutation.getFieldMask(),Qt.now())):o.set(c.key,Wi.empty())}),this.recalculateAndSaveOverlays(t,r).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new eE(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(t,n){let i=kh(),s=new Tt((o,a)=>o-a),r=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(let a of o)a.keys().forEach(l=>{let c=n.get(l);if(c===null)return;let u=i.get(l)||Wi.empty();u=a.applyToLocalView(c,u),i.set(l,u);let h=(s.get(a.batchId)||Ne()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{let o=[],a=s.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),c=l.key,u=l.value,h=Bk();u.forEach(f=>{if(!r.has(f)){let g=$k(n.get(f),i.get(f));g!==null&&h.set(f,g),r=r.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,h))}return $.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,s){return function(o){return fe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Ok(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,s):this.getDocumentsMatchingCollectionQuery(t,n,i,s)}getNextDocuments(t,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,s).next(r=>{let o=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,s-r.size):$.resolve(qa()),a=-1,l=r;return o.next(c=>$.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),r.get(u)?$.resolve():this.remoteDocumentCache.getEntry(t,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(t,c,r)).next(()=>this.computeViews(t,l,c,Ne())).next(u=>({batchId:a,changes:Vk(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new fe(n)).next(i=>{let s=xh();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,i,s){let r=n.collectionGroup,o=xh();return this.indexManager.getCollectionParents(t,r).next(a=>$.forEach(a,l=>{let c=function(h,f){return new No(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(r));return this.getDocumentsMatchingCollectionQuery(t,c,i,s).next(u=>{u.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,r,s))).next(o=>{r.forEach((l,c)=>{let u=c.getKey();o.get(u)===null&&(o=o.insert(u,ps.newInvalidDocument(u)))});let a=xh();return o.forEach((l,c)=>{let u=r.get(l);u!==void 0&&Lh(u.mutation,c,Wi.empty(),Qt.now()),Hv(n,c)&&(a=a.insert(l,c))}),a})}};var nE=class{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return $.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ks(s.createTime)}}(n)),$.resolve()}getNamedQuery(t,n){return $.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(s){return{name:s.name,query:uY(s.bundledQuery),readTime:Ks(s.readTime)}}(n)),$.resolve()}};var iE=class{constructor(){this.overlays=new Tt(fe.comparator),this.hr=new Map}getOverlay(t,n){return $.resolve(this.overlays.get(n))}getOverlays(t,n){let i=qa();return $.forEach(n,s=>this.getOverlay(t,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((s,r)=>{this.ht(t,n,r)}),$.resolve()}removeOverlaysForBatchId(t,n,i){let s=this.hr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.hr.delete(i)),$.resolve()}getOverlaysForCollection(t,n,i){let s=qa(),r=n.length+1,o=new fe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===r&&l.largestBatchId>i&&s.set(l.getKey(),l)}return $.resolve(s)}getOverlaysForCollectionGroup(t,n,i,s){let r=new Tt((c,u)=>c-u),o=this.overlays.getIterator();for(;o.hasNext();){let c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let u=r.get(c.largestBatchId);u===null&&(u=qa(),r=r.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}let a=qa(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return $.resolve(a)}ht(t,n,i){let s=this.overlays.get(i.key);if(s!==null){let o=this.hr.get(s.largestBatchId).delete(i.key);this.hr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new H0(n,i));let r=this.hr.get(n);r===void 0&&(r=Ne(),this.hr.set(n,r)),this.hr.set(n,r.add(i.key))}};var zh=class{constructor(){this.Pr=new Rn(Vt.Ir),this.Tr=new Rn(Vt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){let i=new Vt(t,n);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Ar(new Vt(t,n))}Rr(t,n){t.forEach(i=>this.removeReference(i,n))}Vr(t){let n=new fe(new wt([])),i=new Vt(n,t),s=new Vt(n,t+1),r=[];return this.Tr.forEachInRange([i,s],o=>{this.Ar(o),r.push(o.key)}),r}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){let n=new fe(new wt([])),i=new Vt(n,t),s=new Vt(n,t+1),r=Ne();return this.Tr.forEachInRange([i,s],o=>{r=r.add(o.key)}),r}containsKey(t){let n=new Vt(t,0),i=this.Pr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}},Vt=class{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return fe.comparator(t.key,n.key)||Je(t.pr,n.pr)}static Er(t,n){return Je(t.pr,n.pr)||fe.comparator(t.key,n.key)}};var sE=class{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Rn(Vt.Ir)}checkEmpty(t){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,s){let r=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new B0(r,n,i,s);this.mutationQueue.push(o);for(let a of s)this.wr=this.wr.add(new Vt(a.key,r)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return $.resolve(o)}lookupMutationBatch(t,n){return $.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){let i=n+1,s=this.br(i),r=s<0?0:s;return $.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){let i=new Vt(n,0),s=new Vt(n,Number.POSITIVE_INFINITY),r=[];return this.wr.forEachInRange([i,s],o=>{let a=this.Sr(o.pr);r.push(a)}),$.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new Rn(Je);return n.forEach(s=>{let r=new Vt(s,0),o=new Vt(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([r,o],a=>{i=i.add(a.pr)})}),$.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(t,n){let i=n.path,s=i.length+1,r=i;fe.isDocumentKey(r)||(r=r.child(""));let o=new Vt(new fe(r),0),a=new Rn(Je);return this.wr.forEachWhile(l=>{let c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.pr)),!0)},o),$.resolve(this.Dr(a))}Dr(t){let n=[];return t.forEach(i=>{let s=this.Sr(i);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){lt(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return $.forEach(n.mutations,s=>{let r=new Vt(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.wr=i})}Mn(t){}containsKey(t,n){let i=new Vt(n,0),s=this.wr.firstAfterOrEqual(i);return $.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,$.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){let n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var rE=class{constructor(t){this.vr=t,this.docs=function(){return new Tt(fe.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){let i=n.key,s=this.docs.get(i),r=s?s.size:0,o=this.vr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){let n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){let i=this.docs.get(n);return $.resolve(i?i.document.mutableCopy():ps.newInvalidDocument(n))}getEntries(t,n){let i=xr();return n.forEach(s=>{let r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():ps.newInvalidDocument(s))}),$.resolve(i)}getDocumentsMatchingQuery(t,n,i,s){let r=xr(),o=n.path,a=new fe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||wQ(yQ(u),i)<=0||(s.has(u.key)||Hv(n,u))&&(r=r.insert(u.key,u.mutableCopy()))}return $.resolve(r)}getAllFromCollectionGroup(t,n,i,s){ye()}Fr(t,n){return $.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new oE(this)}getSize(t){return $.resolve(this.size)}},oE=class extends Z0{constructor(t){super(),this.ar=t}applyChanges(t){let n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.ar.addEntry(t,s)):this.ar.removeEntry(i)}),$.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}};var aE=class{constructor(t){this.persistence=t,this.Mr=new ko(n=>ZE(n),eD),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.Or=0,this.Nr=new zh,this.targetCount=0,this.Lr=jh.Nn()}forEachTarget(t,n){return this.Mr.forEach((i,s)=>n(s)),$.resolve()}getLastRemoteSnapshotVersion(t){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return $.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Or&&(this.Or=n),$.resolve()}qn(t){this.Mr.set(t.target,t);let n=t.targetId;n>this.highestTargetId&&(this.Lr=new jh(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,$.resolve()}updateTargetData(t,n){return this.qn(n),$.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(t,n,i){let s=0,r=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Mr.delete(o),r.push(this.removeMatchingKeysForTargetId(t,a.targetId)),s++)}),$.waitFor(r).next(()=>s)}getTargetCount(t){return $.resolve(this.targetCount)}getTargetData(t,n){let i=this.Mr.get(n)||null;return $.resolve(i)}addMatchingKeys(t,n,i){return this.Nr.dr(n,i),$.resolve()}removeMatchingKeys(t,n,i){this.Nr.Rr(n,i);let s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(o=>{r.push(s.markPotentiallyOrphaned(t,o))}),$.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),$.resolve()}getMatchingKeysForTargetId(t,n){let i=this.Nr.gr(n);return $.resolve(i)}containsKey(t,n){return $.resolve(this.Nr.containsKey(n))}};var lE=class{constructor(t,n){this.Br={},this.overlays={},this.kr=new Dk(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new aE(this),this.indexManager=new J0,this.remoteDocumentCache=function(s){return new rE(s)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new Y0(n),this.$r=new nE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new iE,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.Br[t.toKey()];return i||(i=new sE(n,this.referenceDelegate),this.Br[t.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,i){ae("MemoryPersistence","Starting transaction:",t);let s=new cE(this.kr.next());return this.referenceDelegate.Ur(),i(s).next(r=>this.referenceDelegate.Wr(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Gr(t,n){return $.or(Object.values(this.Br).map(i=>()=>i.containsKey(t,n)))}},cE=class extends S0{constructor(t){super(),this.currentSequenceNumber=t}},uE=class e{constructor(t){this.persistence=t,this.zr=new zh,this.jr=null}static Hr(t){return new e(t)}get Jr(){if(this.jr)return this.jr;throw ye()}addReference(t,n,i){return this.zr.addReference(i,n),this.Jr.delete(i.toString()),$.resolve()}removeReference(t,n,i){return this.zr.removeReference(i,n),this.Jr.add(i.toString()),$.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),$.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(s=>this.Jr.add(s.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(r=>this.Jr.add(r.toString()))}).next(()=>i.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Jr,i=>{let s=fe.fromPath(i);return this.Yr(t,s).next(r=>{r||n.removeEntry(s,be.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(i=>{i?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return $.or([()=>$.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}};var dE=class e{constructor(t,n,i,s){this.targetId=t,this.fromCache=n,this.qi=i,this.Qi=s}static Ki(t,n){let i=Ne(),s=Ne();for(let r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new e(t,n.fromCache,i,s)}};var hE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var fE=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return rM()?8:_Q(iM())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,i,s){let r={result:null};return this.ji(t,n).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.Hi(t,n,s,i).next(o=>{r.result=o})}).next(()=>{if(r.result)return;let o=new hE;return this.Ji(t,n,o).next(a=>{if(r.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>r.result)}Yi(t,n,i,s){return i.documentReadCount<this.Wi?(Fh()<=di.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",Kc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),$.resolve()):(Fh()<=di.DEBUG&&ae("QueryEngine","Query:",Kc(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.Gi*s?(Fh()<=di.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",Kc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,qs(n))):$.resolve())}ji(t,n){if(nk(n))return $.resolve(null);let i=qs(n);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=k0(n,null,"F"),i=qs(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(r=>{let o=Ne(...r);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{let c=this.Zi(n,a);return this.Xi(n,c,o,l.readTime)?this.ji(t,k0(n,null,"F")):this.es(t,c,n,l)}))})))}Hi(t,n,i,s){return nk(n)||s.isEqual(be.min())?$.resolve(null):this.zi.getDocuments(t,i).next(r=>{let o=this.Zi(n,r);return this.Xi(n,o,i,s)?$.resolve(null):(Fh()<=di.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Kc(n)),this.es(t,o,n,CQ(s,-1)).next(a=>a))})}Zi(t,n){let i=new Rn(kk(t));return n.forEach((s,r)=>{Hv(t,r)&&(i=i.add(r))}),i}Xi(t,n,i,s){if(t.limit===null)return!1;if(i.size!==n.size)return!0;let r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ji(t,n,i){return Fh()<=di.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",Kc(n)),this.zi.getDocumentsMatchingQuery(t,n,Ja.min(),i)}es(t,n,i,s){return this.zi.getDocumentsMatchingQuery(t,i,s).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}};var pE=class{constructor(t,n,i,s){this.persistence=t,this.ts=n,this.serializer=s,this.ns=new Tt(Je),this.rs=new ko(r=>ZE(r),eD),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(i)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new tE(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}};function dY(e,t,n,i){return new pE(e,t,n,i)}function nL(e,t){return F(this,null,function*(){let n=Se(e);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n._s(t),n.mutationQueue.getAllMutationBatches(i))).next(r=>{let o=[],a=[],l=Ne();for(let c of s){o.push(c.batchId);for(let u of c.mutations)l=l.add(u.key)}for(let c of r){a.push(c.batchId);for(let u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(i,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})})}function hY(e,t){let n=Se(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let s=t.batch.keys(),r=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){let h=c.batch,f=h.keys(),g=$.resolve();return f.forEach(v=>{g=g.next(()=>u.getEntry(l,v)).next(y=>{let C=c.docVersions.get(v);lt(C!==null),y.version.compareTo(C)<0&&(h.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,i,t,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=Ne();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(t))).next(()=>n.localDocuments.getDocuments(i,s))})}function iL(e){let t=Se(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function fY(e,t){let n=Se(e),i=t.snapshotVersion,s=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{let o=n.os.newChangeBuffer({trackRemovals:!0});s=n.ns;let a=[];t.targetChanges.forEach((u,h)=>{let f=s.get(h);if(!f)return;a.push(n.Qr.removeMatchingKeys(r,u.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(r,u.addedDocuments,h)));let g=f.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(h)!==null?g=g.withResumeToken($n.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,i)),s=s.insert(h,g),function(y,C,E){return y.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,g,u)&&a.push(n.Qr.updateTargetData(r,g))});let l=xr(),c=Ne();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,u))}),a.push(pY(r,o,t.documentUpdates).next(u=>{l=u.cs,c=u.ls})),!i.isEqual(be.min())){let u=n.Qr.getLastRemoteSnapshotVersion(r).next(h=>n.Qr.setTargetsMetadata(r,r.currentSequenceNumber,i));a.push(u)}return $.waitFor(a).next(()=>o.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,l,c)).next(()=>l)}).then(r=>(n.ns=s,r))}function pY(e,t,n){let i=Ne(),s=Ne();return n.forEach(r=>i=i.add(r)),t.getEntries(e,i).next(r=>{let o=xr();return n.forEach((a,l)=>{let c=r.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(be.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):ae("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:s}})}function gY(e,t){let n=Se(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function mY(e,t){let n=Se(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Qr.getTargetData(i,t).next(r=>r?(s=r,$.resolve(s)):n.Qr.allocateTargetId(i).next(o=>(s=new Wh(t,o,"TargetPurposeListen",i.currentSequenceNumber),n.Qr.addTargetData(i,s).next(()=>s))))}).then(i=>{let s=n.ns.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ns=n.ns.insert(i.targetId,i),n.rs.set(t,i.targetId)),i})}function gE(e,t,n){return F(this,null,function*(){let i=Se(e),s=i.ns.get(t),r=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",r,o=>i.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!Yh(o))throw o;ae("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}i.ns=i.ns.remove(t),i.rs.delete(s.target)})}function fk(e,t,n){let i=Se(e),s=be.min(),r=Ne();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){let h=Se(l),f=h.rs.get(u);return f!==void 0?$.resolve(h.ns.get(f)):h.Qr.getTargetData(c,u)}(i,o,qs(t)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{r=l})}).next(()=>i.ts.getDocumentsMatchingQuery(o,t,n?s:be.min(),n?r:Ne())).next(a=>(vY(i,FQ(t),a),{documents:a,hs:r})))}function vY(e,t,n){let i=e.ss.get(t)||be.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),e.ss.set(t,i)}var vv=class{constructor(){this.activeTargetIds=VQ()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}};var mE=class{constructor(){this.no=new vv,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,i){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new vv,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var vE=class{io(t){}shutdown(){}};var Cv=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.uo)t(0)}ao(){ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ev=null;function u0(){return ev===null?ev=function(){return 268435456+Math.round(2147483648*Math.random())}():ev++,"0x"+ev.toString(16)}var CY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var CE=class{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}};var Dn="WebChannelConnection",yE=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+n.host,this.So=`projects/${s}/databases/${r}`,this.bo=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${r}`}get Do(){return!1}Co(n,i,s,r,o){let a=u0(),l=this.vo(n,i.toUriEncodedString());ae("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);let c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,r,o),this.Mo(n,l,c,s).then(u=>(ae("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw eu("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}xo(n,i,s,r,o,a){return this.Co(n,i,s,r,o)}Fo(n,i,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hu}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((r,o)=>n[o]=r),s&&s.headers.forEach((r,o)=>n[o]=r)}vo(n,i){let s=CY[n];return`${this.wo}/v1/${i}:${s}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,i,s){let r=u0();return new Promise((o,a)=>{let l=new i0;l.setWithCredentials(!0),l.listenOnce(r0.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ph.NO_ERROR:let u=l.getResponseJson();ae(Dn,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(u)),o(u);break;case Ph.TIMEOUT:ae(Dn,`RPC '${t}' ${r} timed out`),a(new ie(W.DEADLINE_EXCEEDED,"Request time out"));break;case Ph.HTTP_ERROR:let h=l.getStatus();if(ae(Dn,`RPC '${t}' ${r} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);let g=f?.error;if(g&&g.status&&g.message){let v=function(C){let E=C.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(E)>=0?E:W.UNKNOWN}(g.status);a(new ie(v,g.message))}else a(new ie(W.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ie(W.UNAVAILABLE,"Connection failed."));break;default:ye()}}finally{ae(Dn,`RPC '${t}' ${r} completed.`)}});let c=JSON.stringify(s);ae(Dn,`RPC '${t}' ${r} sending request:`,s),l.send(n,"POST",c,i,15)})}Oo(t,n,i){let s=u0(),r=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=l0(),a=a0(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new s0({})),this.Fo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;let u=r.join("");ae(Dn,`Creating RPC '${t}' stream ${s}: ${u}`,l);let h=o.createWebChannel(u,l),f=!1,g=!1,v=new CE({lo:C=>{g?ae(Dn,`Not sending because RPC '${t}' stream ${s} is closed:`,C):(f||(ae(Dn,`Opening RPC '${t}' stream ${s} transport.`),h.open(),f=!0),ae(Dn,`RPC '${t}' stream ${s} sending:`,C),h.send(C))},ho:()=>h.close()}),y=(C,E,I)=>{C.listen(E,T=>{try{I(T)}catch(x){setTimeout(()=>{throw x},0)}})};return y(h,qc.EventType.OPEN,()=>{g||(ae(Dn,`RPC '${t}' stream ${s} transport opened.`),v.mo())}),y(h,qc.EventType.CLOSE,()=>{g||(g=!0,ae(Dn,`RPC '${t}' stream ${s} transport closed`),v.po())}),y(h,qc.EventType.ERROR,C=>{g||(g=!0,eu(Dn,`RPC '${t}' stream ${s} transport errored:`,C),v.po(new ie(W.UNAVAILABLE,"The operation could not be completed")))}),y(h,qc.EventType.MESSAGE,C=>{var E;if(!g){let I=C.data[0];lt(!!I);let T=I,x=T.error||((E=T[0])===null||E===void 0?void 0:E.error);if(x){ae(Dn,`RPC '${t}' stream ${s} received error:`,x);let z=x.status,V=function(_){let R=Lt[_];if(R!==void 0)return Kk(R)}(z),b=x.message;V===void 0&&(V=W.INTERNAL,b="Unknown error status: "+z+" with message "+x.message),g=!0,v.po(new ie(V,b)),h.close()}else ae(Dn,`RPC '${t}' stream ${s} received:`,I),v.yo(I)}}),y(a,o0.STAT_EVENT,C=>{C.stat===Xm.PROXY?ae(Dn,`RPC '${t}' stream ${s} detected buffering proxy`):C.stat===Xm.NOPROXY&&ae(Dn,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.fo()},0),v}};function d0(){return typeof document<"u"?document:null}function Uv(e){return new z0(e,!0)}var yv=class{constructor(t,n,i=1e3,s=1.5,r=6e4){this.oi=t,this.timerId=n,this.No=i,this.Lo=s,this.Bo=r,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();let n=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),s=Math.max(0,n-i);s>0&&ae("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var wv=class{constructor(t,n,i,s,r,o,a,l){this.oi=t,this.Go=i,this.zo=s,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new yv(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return F(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}r_(){return F(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(t,n){return F(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(Pr(n.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.jo===n&&this.u_(i,s)},i=>{t(()=>{let s=new ie(W.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(s)})})}u_(t,n){let i=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(s=>{i(()=>this.c_(s))}),this.stream.onMessage(s=>{i(()=>this.onMessage(s))})}e_(){this.state=5,this.Yo.$o(()=>F(this,null,function*(){this.state=0,this.start()}))}c_(t){return ae("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},wE=class extends wv{constructor(t,n,i,s,r,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,o),this.serializer=r}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();let n=ZQ(this.serializer,t),i=function(r){if(!("targetChange"in r))return be.min();let o=r.targetChange;return o.targetIds&&o.targetIds.length?be.min():o.readTime?Ks(o.readTime):be.min()}(t);return this.listener.h_(n,i)}P_(t){let n={};n.database=Q0(this.serializer),n.addTarget=function(r,o){let a,l=o.target;if(a=O0(l)?{documents:nY(r,l)}:{query:iY(r,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Qk(r,o.resumeToken);let c=$0(r,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(be.min())>0){a.readTime=gv(r,o.snapshotVersion.toTimestamp());let c=$0(r,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);let i=rY(this.serializer,t);i&&(n.labels=i),this.i_(n)}I_(t){let n={};n.database=Q0(this.serializer),n.removeTarget=t,this.i_(n)}},SE=class extends wv{constructor(t,n,i,s,r,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,o),this.serializer=r,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(lt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();let n=tY(t.writeResults,t.commitTime),i=Ks(t.commitTime);return this.listener.A_(i,n)}return lt(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let t={};t.database=Q0(this.serializer),this.i_(t)}d_(t){let n={streamToken:this.lastStreamToken,writes:t.map(i=>eY(this.serializer,i))};this.i_(n)}};var _E=class extends class{}{constructor(t,n,i,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.m_=!1}f_(){if(this.m_)throw new ie(W.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.Co(t,q0(n,i),s,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new ie(W.UNKNOWN,r.toString())})}xo(t,n,i,s,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,q0(n,i),s,o,a,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(W.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},bE=class{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){let n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Pr(n),this.y_=!1):ae("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var EE=class{constructor(t,n,i,s,r){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=r,this.O_.io(o=>{i.enqueueAndForget(()=>F(this,null,function*(){sl(this)&&(ae("RemoteStore","Restarting streams for network reachability change."),yield function(l){return F(this,null,function*(){let c=Se(l);c.M_.add(4),yield Jh(c),c.N_.set("Unknown"),c.M_.delete(4),yield Wv(c)})}(this))}))}),this.N_=new bE(i,s)}};function Wv(e){return F(this,null,function*(){if(sl(e))for(let t of e.x_)yield t(!0)})}function Jh(e){return F(this,null,function*(){for(let t of e.x_)yield t(!1)})}function sL(e,t){let n=Se(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),rD(n)?sD(n):fu(n).Xo()&&iD(n,t))}function nD(e,t){let n=Se(e),i=fu(n);n.F_.delete(t),i.Xo()&&rL(n,t),n.F_.size===0&&(i.Xo()?i.n_():sl(n)&&n.N_.set("Unknown"))}function iD(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(be.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}fu(e).P_(t)}function rL(e,t){e.L_.xe(t),fu(e).I_(t)}function sD(e){e.L_=new j0({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),fu(e).start(),e.N_.w_()}function rD(e){return sl(e)&&!fu(e).Zo()&&e.F_.size>0}function sl(e){return Se(e).M_.size===0}function oL(e){e.L_=void 0}function yY(e){return F(this,null,function*(){e.N_.set("Online")})}function wY(e){return F(this,null,function*(){e.F_.forEach((t,n)=>{iD(e,t)})})}function SY(e,t){return F(this,null,function*(){oL(e),rD(e)?(e.N_.D_(t),sD(e)):e.N_.set("Unknown")})}function _Y(e,t,n){return F(this,null,function*(){if(e.N_.set("Online"),t instanceof fv&&t.state===2&&t.cause)try{yield function(s,r){return F(this,null,function*(){let o=r.cause;for(let a of r.targetIds)s.F_.has(a)&&(yield s.remoteSyncer.rejectListen(a,o),s.F_.delete(a),s.L_.removeTarget(a))})}(e,t)}catch(i){ae("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield Sv(e,i)}else if(t instanceof Xc?e.L_.Ke(t):t instanceof hv?e.L_.He(t):e.L_.We(t),!n.isEqual(be.min()))try{let i=yield iL(e.localStore);n.compareTo(i)>=0&&(yield function(r,o){let a=r.L_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){let u=r.F_.get(c);u&&r.F_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{let u=r.F_.get(l);if(!u)return;r.F_.set(l,u.withResumeToken($n.EMPTY_BYTE_STRING,u.snapshotVersion)),rL(r,l);let h=new Wh(u.target,l,c,u.sequenceNumber);iD(r,h)}),r.remoteSyncer.applyRemoteEvent(a)}(e,n))}catch(i){ae("RemoteStore","Failed to raise snapshot:",i),yield Sv(e,i)}})}function Sv(e,t,n){return F(this,null,function*(){if(!Yh(t))throw t;e.M_.add(1),yield Jh(e),e.N_.set("Offline"),n||(n=()=>iL(e.localStore)),e.asyncQueue.enqueueRetryable(()=>F(this,null,function*(){ae("RemoteStore","Retrying IndexedDB access"),yield n(),e.M_.delete(1),yield Wv(e)}))})}function aL(e,t){return t().catch(n=>Sv(e,n,t))}function jv(e){return F(this,null,function*(){let t=Se(e),n=Bo(t),i=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;bY(t);)try{let s=yield gY(t.localStore,i);if(s===null){t.v_.length===0&&n.n_();break}i=s.batchId,EY(t,s)}catch(s){yield Sv(t,s)}lL(t)&&cL(t)})}function bY(e){return sl(e)&&e.v_.length<10}function EY(e,t){e.v_.push(t);let n=Bo(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function lL(e){return sl(e)&&!Bo(e).Zo()&&e.v_.length>0}function cL(e){Bo(e).start()}function DY(e){return F(this,null,function*(){Bo(e).V_()})}function RY(e){return F(this,null,function*(){let t=Bo(e);for(let n of e.v_)t.d_(n.mutations)})}function TY(e,t,n){return F(this,null,function*(){let i=e.v_.shift(),s=G0.from(i,t,n);yield aL(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),yield jv(e)})}function IY(e,t){return F(this,null,function*(){t&&Bo(e).E_&&(yield function(i,s){return F(this,null,function*(){if(function(o){return zQ(o)&&o!==W.ABORTED}(s.code)){let r=i.v_.shift();Bo(i).t_(),yield aL(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),yield jv(i)}})}(e,t)),lL(e)&&cL(e)})}function pk(e,t){return F(this,null,function*(){let n=Se(e);n.asyncQueue.verifyOperationInProgress(),ae("RemoteStore","RemoteStore received new credentials");let i=sl(n);n.M_.add(3),yield Jh(n),i&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),yield Wv(n)})}function AY(e,t){return F(this,null,function*(){let n=Se(e);t?(n.M_.delete(2),yield Wv(n)):t||(n.M_.add(2),yield Jh(n),n.N_.set("Unknown"))})}function fu(e){return e.B_||(e.B_=function(n,i,s){let r=Se(n);return r.f_(),new wE(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Po:yY.bind(null,e),To:wY.bind(null,e),Ao:SY.bind(null,e),h_:_Y.bind(null,e)}),e.x_.push(t=>F(this,null,function*(){t?(e.B_.t_(),rD(e)?sD(e):e.N_.set("Unknown")):(yield e.B_.stop(),oL(e))}))),e.B_}function Bo(e){return e.k_||(e.k_=function(n,i,s){let r=Se(n);return r.f_(),new SE(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:DY.bind(null,e),Ao:IY.bind(null,e),R_:RY.bind(null,e),A_:TY.bind(null,e)}),e.x_.push(t=>F(this,null,function*(){t?(e.k_.t_(),yield jv(e)):(yield e.k_.stop(),e.v_.length>0&&(ae("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))}))),e.k_}var DE=class e{constructor(t,n,i,s,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new zs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,s,r){let o=Date.now()+i,a=new e(t,n,o,s,r);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(W.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function oD(e,t){if(Pr("AsyncQueue",`${t}: ${e}`),Yh(e))return new ie(W.UNAVAILABLE,`${t}: ${e}`);throw e}var _v=class e{constructor(t){this.comparator=t?(n,i)=>t(n,i)||fe.comparator(n.key,i.key):(n,i)=>fe.comparator(n.key,i.key),this.keyedMap=xh(),this.sortedSet=new Tt(this.comparator)}static emptySet(t){return new e(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){let n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){let n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){let s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){let t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){let i=new e;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}};var bv=class{constructor(){this.q_=new Tt(fe.comparator)}track(t){let n=t.doc.key,i=this.q_.get(n);i?t.type!==0&&i.type===3?this.q_=this.q_.insert(n,t):t.type===3&&i.type!==1?this.q_=this.q_.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.q_=this.q_.remove(n):t.type===1&&i.type===2?this.q_=this.q_.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):ye():this.q_=this.q_.insert(n,t)}Q_(){let t=[];return this.q_.inorderTraversal((n,i)=>{t.push(i)}),t}},cu=class e{constructor(t,n,i,s,r,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,i,s,r){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new e(t,n,_v.emptySet(n),o,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Gv(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}};var RE=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}},TE=class{constructor(){this.queries=new ko(t=>Nk(t),Gv),this.onlineState="Unknown",this.z_=new Set}};function uL(e,t){return F(this,null,function*(){let n=Se(e),i=3,s=t.query,r=n.queries.get(s);r?!r.W_()&&t.G_()&&(i=2):(r=new RE,i=t.G_()?0:1);try{switch(i){case 0:r.K_=yield n.onListen(s,!0);break;case 1:r.K_=yield n.onListen(s,!1);break;case 2:yield n.onFirstRemoteStoreListen(s)}}catch(o){let a=oD(o,`Initialization of query '${Kc(t.query)}' failed`);return void t.onError(a)}n.queries.set(s,r),r.U_.push(t),t.j_(n.onlineState),r.K_&&t.H_(r.K_)&&aD(n)})}function dL(e,t){return F(this,null,function*(){let n=Se(e),i=t.query,s=3,r=n.queries.get(i);if(r){let o=r.U_.indexOf(t);o>=0&&(r.U_.splice(o,1),r.U_.length===0?s=t.G_()?0:1:!r.W_()&&t.G_()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function MY(e,t){let n=Se(e),i=!1;for(let s of t){let r=s.query,o=n.queries.get(r);if(o){for(let a of o.U_)a.H_(s)&&(i=!0);o.K_=s}}i&&aD(n)}function PY(e,t,n){let i=Se(e),s=i.queries.get(t);if(s)for(let r of s.U_)r.onError(n);i.queries.delete(t)}function aD(e){e.z_.forEach(t=>{t.next()})}var IE,gk;(gk=IE||(IE={})).J_="default",gk.Cache="cache";var Ev=class{constructor(t,n,i){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(t){if(!this.options.includeMetadataChanges){let i=[];for(let s of t.docChanges)s.type!==3&&i.push(s);t=new cu(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;let i=n!=="Offline";return(!this.options.ra||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=cu.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==IE.Cache}};var Dv=class{constructor(t){this.key=t}},Rv=class{constructor(t){this.key=t}},AE=class{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Ne(),this.mutatedKeys=Ne(),this.Ia=kk(t),this.Ta=new _v(this.Ia)}get Ea(){return this.la}da(t,n){let i=n?n.Aa:new bv,s=n?n.Ta:this.Ta,r=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1,l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((u,h)=>{let f=s.get(u),g=Hv(this.query,h)?h:null,v=!!f&&this.mutatedKeys.has(f.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations),C=!1;f&&g?f.data.isEqual(g.data)?v!==y&&(i.track({type:3,doc:g}),C=!0):this.Ra(f,g)||(i.track({type:2,doc:g}),C=!0,(l&&this.Ia(g,l)>0||c&&this.Ia(g,c)<0)&&(a=!0)):!f&&g?(i.track({type:0,doc:g}),C=!0):f&&!g&&(i.track({type:1,doc:f}),C=!0,(l||c)&&(a=!0)),C&&(g?(o=o.add(g),r=y?r.add(u):r.delete(u)):(o=o.delete(u),r=r.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),r=r.delete(u.key),i.track({type:1,doc:u})}return{Ta:o,Aa:i,Xi:a,mutatedKeys:r}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,s){let r=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;let o=t.Aa.Q_();o.sort((u,h)=>function(g,v){let y=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye()}};return y(g)-y(v)}(u.type,h.type)||this.Ia(u.doc,h.doc)),this.Va(i),s=s!=null&&s;let a=n&&!s?this.ma():[],l=this.Pa.size===0&&this.current&&!s?1:0,c=l!==this.ha;return this.ha=l,o.length!==0||c?{snapshot:new cu(this.query,t.Ta,r,o,t.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new bv,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];let t=this.Pa;this.Pa=Ne(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});let n=[];return t.forEach(i=>{this.Pa.has(i)||n.push(new Rv(i))}),this.Pa.forEach(i=>{t.has(i)||n.push(new Dv(i))}),n}pa(t){this.la=t.hs,this.Pa=Ne();let n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return cu.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},ME=class{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}},PE=class{constructor(t){this.key=t,this.wa=!1}},FE=class{constructor(t,n,i,s,r,o){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new ko(a=>Nk(a),Gv),this.Da=new Map,this.Ca=new Set,this.va=new Tt(fe.comparator),this.Fa=new Map,this.Ma=new zh,this.xa={},this.Oa=new Map,this.Na=jh.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function FY(e,t,n=!0){return F(this,null,function*(){let i=vL(e),s,r=i.ba.get(t);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.ya()):s=yield hL(i,t,n,!0),s})}function xY(e,t){return F(this,null,function*(){let n=vL(e);yield hL(n,t,!0,!1)})}function hL(e,t,n,i){return F(this,null,function*(){let s=yield mY(e.localStore,qs(t)),r=s.targetId,o=n?e.sharedClientState.addLocalQueryTarget(r):"not-current",a;return i&&(a=yield OY(e,t,r,o==="current",s.resumeToken)),e.isPrimaryClient&&n&&sL(e.remoteStore,s),a})}function OY(e,t,n,i,s){return F(this,null,function*(){e.Ba=(h,f,g)=>function(y,C,E,I){return F(this,null,function*(){let T=C.view.da(E);T.Xi&&(T=yield fk(y.localStore,C.query,!1).then(({documents:b})=>C.view.da(b,T)));let x=I&&I.targetChanges.get(C.targetId),z=I&&I.targetMismatches.get(C.targetId)!=null,V=C.view.applyChanges(T,y.isPrimaryClient,x,z);return vk(y,C.targetId,V.fa),V.snapshot})}(e,h,f,g);let r=yield fk(e.localStore,t,!0),o=new AE(t,r.hs),a=o.da(r.documents),l=Uh.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",s),c=o.applyChanges(a,e.isPrimaryClient,l);vk(e,n,c.fa);let u=new ME(t,n,o);return e.ba.set(t,u),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),c.snapshot})}function NY(e,t,n){return F(this,null,function*(){let i=Se(e),s=i.ba.get(t),r=i.Da.get(s.targetId);if(r.length>1)return i.Da.set(s.targetId,r.filter(o=>!Gv(o,t))),void i.ba.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||(yield gE(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&nD(i.remoteStore,s.targetId),xE(i,s.targetId)}).catch(Qh))):(xE(i,s.targetId),yield gE(i.localStore,s.targetId,!0))})}function kY(e,t){return F(this,null,function*(){let n=Se(e),i=n.ba.get(t),s=n.Da.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),nD(n.remoteStore,i.targetId))})}function LY(e,t,n){return F(this,null,function*(){let i=jY(e);try{let s=yield function(o,a){let l=Se(o),c=Qt.now(),u=a.reduce((g,v)=>g.add(v.key),Ne()),h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=xr(),y=Ne();return l.os.getEntries(g,u).next(C=>{v=C,v.forEach((E,I)=>{I.isValidDocument()||(y=y.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,v)).next(C=>{h=C;let E=[];for(let I of a){let T=jQ(I,h.get(I.key).overlayedDocument);T!=null&&E.push(new Js(I.key,T,Ik(T.value.mapValue),Mr.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,E,a)}).next(C=>{f=C;let E=C.applyToLocalDocumentSet(h,y);return l.documentOverlayCache.saveOverlays(g,C.batchId,E)})}).then(()=>({batchId:f.batchId,changes:Vk(h)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.xa[o.currentUser.toKey()];c||(c=new Tt(Je)),c=c.insert(a,l),o.xa[o.currentUser.toKey()]=c}(i,s.batchId,n),yield Xh(i,s.changes),yield jv(i.remoteStore)}catch(s){let r=oD(s,"Failed to persist write");n.reject(r)}})}function fL(e,t){return F(this,null,function*(){let n=Se(e);try{let i=yield fY(n.localStore,t);t.targetChanges.forEach((s,r)=>{let o=n.Fa.get(r);o&&(lt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.wa=!0:s.modifiedDocuments.size>0?lt(o.wa):s.removedDocuments.size>0&&(lt(o.wa),o.wa=!1))}),yield Xh(n,i,t)}catch(i){yield Qh(i)}})}function mk(e,t,n){let i=Se(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let s=[];i.ba.forEach((r,o)=>{let a=o.view.j_(t);a.snapshot&&s.push(a.snapshot)}),function(o,a){let l=Se(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(let f of h.U_)f.j_(a)&&(c=!0)}),c&&aD(l)}(i.eventManager,t),s.length&&i.Sa.h_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function VY(e,t,n){return F(this,null,function*(){let i=Se(e);i.sharedClientState.updateQueryState(t,"rejected",n);let s=i.Fa.get(t),r=s&&s.key;if(r){let o=new Tt(fe.comparator);o=o.insert(r,ps.newNoDocument(r,be.min()));let a=Ne().add(r),l=new dv(be.min(),new Map,new Tt(Je),o,a);yield fL(i,l),i.va=i.va.remove(r),i.Fa.delete(t),lD(i)}else yield gE(i.localStore,t,!1).then(()=>xE(i,t,n)).catch(Qh)})}function BY(e,t){return F(this,null,function*(){let n=Se(e),i=t.batch.batchId;try{let s=yield hY(n.localStore,t);gL(n,i,null),pL(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield Xh(n,s)}catch(s){yield Qh(s)}})}function GY(e,t,n){return F(this,null,function*(){let i=Se(e);try{let s=yield function(o,a){let l=Se(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(lt(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(i.localStore,t);gL(i,t,n),pL(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),yield Xh(i,s)}catch(s){yield Qh(s)}})}function pL(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function gL(e,t,n){let i=Se(e),s=i.xa[i.currentUser.toKey()];if(s){let r=s.get(t);r&&(n?r.reject(n):r.resolve(),s=s.remove(t)),i.xa[i.currentUser.toKey()]=s}}function xE(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(let i of e.Da.get(t))e.ba.delete(i),n&&e.Sa.ka(i,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(i=>{e.Ma.containsKey(i)||mL(e,i)})}function mL(e,t){e.Ca.delete(t.path.canonicalString());let n=e.va.get(t);n!==null&&(nD(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),lD(e))}function vk(e,t,n){for(let i of n)i instanceof Dv?(e.Ma.addReference(i.key,t),HY(e,i)):i instanceof Rv?(ae("SyncEngine","Document no longer in limbo: "+i.key),e.Ma.removeReference(i.key,t),e.Ma.containsKey(i.key)||mL(e,i.key)):ye()}function HY(e,t){let n=t.key,i=n.path.canonicalString();e.va.get(n)||e.Ca.has(i)||(ae("SyncEngine","New document in limbo: "+n),e.Ca.add(i),lD(e))}function lD(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){let t=e.Ca.values().next().value;e.Ca.delete(t);let n=new fe(wt.fromString(t)),i=e.Na.next();e.Fa.set(i,new PE(n)),e.va=e.va.insert(n,i),sL(e.remoteStore,new Wh(qs(Bv(n.path)),i,"TargetPurposeLimboResolution",Dk.oe))}}function Xh(e,t,n){return F(this,null,function*(){let i=Se(e),s=[],r=[],o=[];i.ba.isEmpty()||(i.ba.forEach((a,l)=>{o.push(i.Ba(l,t,n).then(c=>{var u;if((c||n)&&i.isPrimaryClient){let h=c?!c.fromCache:(u=n?.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;i.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);let h=dE.Ki(l.targetId,c);r.push(h)}}))}),yield Promise.all(o),i.Sa.h_(s),yield function(l,c){return F(this,null,function*(){let u=Se(l);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>$.forEach(c,f=>$.forEach(f.qi,g=>u.persistence.referenceDelegate.addReference(h,f.targetId,g)).next(()=>$.forEach(f.Qi,g=>u.persistence.referenceDelegate.removeReference(h,f.targetId,g)))))}catch(h){if(!Yh(h))throw h;ae("LocalStore","Failed to update sequence numbers: "+h)}for(let h of c){let f=h.targetId;if(!h.fromCache){let g=u.ns.get(f),v=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(v);u.ns=u.ns.insert(f,y)}}})}(i.localStore,r))})}function UY(e,t){return F(this,null,function*(){let n=Se(e);if(!n.currentUser.isEqual(t)){ae("SyncEngine","User change. New user:",t.toKey());let i=yield nL(n.localStore,t);n.currentUser=t,function(r,o){r.Oa.forEach(a=>{a.forEach(l=>{l.reject(new ie(W.CANCELLED,o))})}),r.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield Xh(n,i.us)}})}function WY(e,t){let n=Se(e),i=n.Fa.get(t);if(i&&i.wa)return Ne().add(i.key);{let s=Ne(),r=n.Da.get(t);if(!r)return s;for(let o of r){let a=n.ba.get(o);s=s.unionWith(a.view.Ea)}return s}}function vL(e){let t=Se(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=fL.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=WY.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=VY.bind(null,t),t.Sa.h_=MY.bind(null,t.eventManager),t.Sa.ka=PY.bind(null,t.eventManager),t}function jY(e){let t=Se(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=BY.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=GY.bind(null,t),t}var Tv=class{constructor(){this.synchronizeTabs=!1}initialize(t){return F(this,null,function*(){this.serializer=Uv(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return dY(this.persistence,new fE,t.initialUser,this.serializer)}createPersistence(t){return new lE(uE.Hr,this.serializer)}createSharedClientState(t){return new mE}terminate(){return F(this,null,function*(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var OE=class{initialize(t,n){return F(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>mk(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=UY.bind(null,this.syncEngine),yield AY(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new TE}()}createDatastore(t){let n=Uv(t.databaseInfo.databaseId),i=function(r){return new yE(r)}(t.databaseInfo);return function(r,o,a,l){return new _E(r,o,a,l)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,s,r,o,a){return new EE(i,s,r,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>mk(this.syncEngine,n,0),function(){return Cv.D()?new Cv:new vE}())}createSyncEngine(t,n){return function(s,r,o,a,l,c,u){let h=new FE(s,r,o,a,l,c);return u&&(h.La=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return F(this,null,function*(){var t;yield function(i){return F(this,null,function*(){let s=Se(i);ae("RemoteStore","RemoteStore shutting down."),s.M_.add(5),yield Jh(s),s.O_.shutdown(),s.N_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()})}};var Iv=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Pr("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}};var NE=class{constructor(t,n,i,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=un.UNAUTHENTICATED,this.clientId=sv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,r=>F(this,null,function*(){ae("FirestoreClient","Received user=",r.uid),yield this.authCredentialListener(r),this.user=r})),this.appCheckCredentials.start(i,r=>(ae("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ie(W.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new zs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>F(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){let i=oD(n,"Failed to shutdown persistence");t.reject(i)}})),t.promise}};function h0(e,t){return F(this,null,function*(){e.asyncQueue.verifyOperationInProgress(),ae("FirestoreClient","Initializing OfflineComponentProvider");let n=e.configuration;yield t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(s=>F(this,null,function*(){i.isEqual(s)||(yield nL(t.localStore,s),i=s)})),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t})}function Ck(e,t){return F(this,null,function*(){e.asyncQueue.verifyOperationInProgress();let n=yield $Y(e);ae("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>pk(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>pk(t.remoteStore,s)),e._onlineComponents=t})}function zY(e){return e.name==="FirebaseError"?e.code===W.FAILED_PRECONDITION||e.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}function $Y(e){return F(this,null,function*(){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ae("FirestoreClient","Using user provided OfflineComponentProvider");try{yield h0(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!zY(n))throw n;eu("Error using user provided cache. Falling back to memory cache: "+n),yield h0(e,new Tv)}}else ae("FirestoreClient","Using default OfflineComponentProvider"),yield h0(e,new Tv);return e._offlineComponents})}function CL(e){return F(this,null,function*(){return e._onlineComponents||(e._uninitializedComponentsProvider?(ae("FirestoreClient","Using user provided OnlineComponentProvider"),yield Ck(e,e._uninitializedComponentsProvider._online)):(ae("FirestoreClient","Using default OnlineComponentProvider"),yield Ck(e,new OE))),e._onlineComponents})}function qY(e){return CL(e).then(t=>t.syncEngine)}function kE(e){return F(this,null,function*(){let t=yield CL(e),n=t.eventManager;return n.onListen=FY.bind(null,t.syncEngine),n.onUnlisten=NY.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=xY.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=kY.bind(null,t.syncEngine),n})}function KY(e,t,n={}){let i=new zs;return e.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return function(r,o,a,l,c){let u=new Iv({next:f=>{o.enqueueAndForget(()=>dL(r,h));let g=f.docs.has(a);!g&&f.fromCache?c.reject(new ie(W.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&l&&l.source==="server"?c.reject(new ie(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new Ev(Bv(a.path),u,{includeMetadataChanges:!0,ra:!0});return uL(r,h)}(yield kE(e),e.asyncQueue,t,n,i)})),i.promise}function yL(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}var yk=new Map;function wL(e,t,n){if(!n)throw new ie(W.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function QY(e,t,n,i){if(t===!0&&i===!0)throw new ie(W.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function wk(e){if(!fe.isDocumentKey(e))throw new ie(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Sk(e){if(fe.isDocumentKey(e))throw new ie(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function zv(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{let t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":ye()}function Qs(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ie(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=zv(e);throw new ie(W.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}var Av=class{constructor(t){var n,i;if(t.host===void 0){if(t.ssl!==void 0)throw new ie(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new ie(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}QY("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yL((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ie(W.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},uu=class{constructor(t,n,i,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Av({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ie(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new ie(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Av(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new f0;switch(i.type){case"firstParty":return new v0(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ie(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=yk.get(n);i&&(ae("ComponentProvider","Removing Datastore"),yk.delete(n),i.terminate())}(this),Promise.resolve()}};function SL(e,t,n,i={}){var s;let r=(e=Qs(e,uu))._getSettings(),o=`${t}:${n}`;if(r.host!=="firestore.googleapis.com"&&r.host!==o&&eu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},r),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=un.MOCK_USER;else{a=Ul(i.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);let c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new ie(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new un(c)}e._authCredentials=new p0(new iv(a,l))}}var tl=class e{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new e(this.firestore,t,this._query)}},zn=class e{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xo(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}},xo=class e extends tl{constructor(t,n,i){super(t,n,Bv(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new zn(this.firestore,null,new fe(t))}withConverter(t){return new e(this.firestore,t,this._path)}};function _L(e,t,...n){if(e=Ze(e),wL("collection","path",t),e instanceof uu){let i=wt.fromString(t,...n);return Sk(i),new xo(e,null,i)}{if(!(e instanceof zn||e instanceof xo))throw new ie(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=e._path.child(wt.fromString(t,...n));return Sk(i),new xo(e.firestore,null,i)}}function cD(e,t,...n){if(e=Ze(e),arguments.length===1&&(t=sv.newId()),wL("doc","path",t),e instanceof uu){let i=wt.fromString(t,...n);return wk(i),new zn(e,null,new fe(i))}{if(!(e instanceof zn||e instanceof xo))throw new ie(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=e._path.child(wt.fromString(t,...n));return wk(i),new zn(e.firestore,e instanceof xo?e.converter:null,new fe(i))}}var LE=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new yv(this,"async_queue_retry"),this.hu=()=>{let n=d0();n&&ae("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let t=d0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;let n=d0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new zs;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}Tu(){return F(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!Yh(t))throw t;ae("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(t){let n=this.iu.then(()=>(this.uu=!0,t().catch(i=>{this.au=i,this.uu=!1;let s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Pr("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.uu=!1,i))));return this.iu=n,n}enqueueAfterDelay(t,n,i){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);let s=DE.createAndSchedule(this,t,n,i,r=>this.Eu(r));return this._u.push(s),s}Pu(){this.au&&ye()}verifyOperationInProgress(){}du(){return F(this,null,function*(){let t;do t=this.iu,yield t;while(t!==this.iu)})}Au(t){for(let n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){let n=this._u.indexOf(t);this._u.splice(n,1)}};function _k(e){return function(n,i){if(typeof n!="object"||n===null)return!1;let s=n;for(let r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(e,["next","error","complete"])}var Or=class extends uu{constructor(t,n,i,s){super(t,n,i,s),this.type="firestore",this._queue=function(){return new LE}(),this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||EL(this),this._firestoreClient.terminate()}};function bL(e,t){let n=typeof e=="object"?e:Xt(),i=typeof e=="string"?e:t||"(default)",s=Ht(n,"firestore").getImmediate({identifier:i});if(!s._initialized){let r=to("firestore");r&&SL(s,...r)}return s}function uD(e){return e._firestoreClient||EL(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function EL(e){var t,n,i;let s=e._freezeSettings(),r=function(a,l,c,u){return new _0(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,yL(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._firestoreClient=new NE(e._authCredentials,e._appCheckCredentials,e._queue,r),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}var $h=class e{constructor(t){this._byteString=t}static fromBase64String(t){try{return new e($n.fromBase64String(t))}catch(n){throw new ie(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new e($n.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var du=class{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new ie(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ei(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var nl=class{constructor(t){this._methodName=t}};var qh=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new ie(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ie(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Je(this._lat,t._lat)||Je(this._long,t._long)}};var YY=/^__.*__$/,VE=class{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Js(t,this.data,this.fieldMask,n,this.fieldTransforms):new el(t,this.data,n,this.fieldTransforms)}},Mv=class{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new Js(t,this.data,this.fieldMask,n,this.fieldTransforms)}};function DL(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye()}}var Pv=class e{constructor(t,n,i,s,r,o){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.mu(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.gu({path:i,yu:!1});return s.wu(t),s}Su(t){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.gu({path:i,yu:!1});return s.mu(),s}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return xv(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(DL(this.fu)&&YY.test(t))throw this.Du('Document fields cannot begin and end with "__"')}},BE=class{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Uv(t)}Fu(t,n,i,s=!1){return new Pv({fu:t,methodName:n,vu:i,path:Ei.emptyPath(),yu:!1,Cu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function dD(e){let t=e._freezeSettings(),n=Uv(e._databaseId);return new BE(e._databaseId,!!t.ignoreUndefinedProperties,n)}function JY(e,t,n,i,s,r={}){let o=e.Fu(r.merge||r.mergeFields?2:0,t,n,s);hD("Data must be an object, but it was:",o,i);let a=TL(i,o),l,c;if(r.merge)l=new Wi(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){let u=[];for(let h of r.mergeFields){let f=UE(t,h,n);if(!o.contains(f))throw new ie(W.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);AL(u,f)||u.push(f)}l=new Wi(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new VE(new bi(a),l,c)}var Fv=class e extends nl{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof e}};function RL(e,t,n){return new Pv({fu:3,vu:t.settings.vu,methodName:e._methodName,yu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var GE=class e extends nl{constructor(t,n){super(t),this.Mu=n}_toFieldTransform(t){let n=RL(this,t,!0),i=this.Mu.map(r=>rl(r,n)),s=new Lo(i);return new uv(t.path,s)}isEqual(t){return t instanceof e&&vd(this.Mu,t.Mu)}},HE=class e extends nl{constructor(t,n){super(t),this.Mu=n}_toFieldTransform(t){let n=RL(this,t,!0),i=this.Mu.map(r=>rl(r,n)),s=new Vo(i);return new uv(t.path,s)}isEqual(t){return t instanceof e&&vd(this.Mu,t.Mu)}};function XY(e,t,n,i){let s=e.Fu(1,t,n);hD("Data must be an object, but it was:",s,i);let r=[],o=bi.empty();il(i,(l,c)=>{let u=fD(t,l,n);c=Ze(c);let h=s.Su(u);if(c instanceof Fv)r.push(u);else{let f=rl(c,h);f!=null&&(r.push(u),o.set(u,f))}});let a=new Wi(r);return new Mv(o,a,s.fieldTransforms)}function ZY(e,t,n,i,s,r){let o=e.Fu(1,t,n),a=[UE(t,i,n)],l=[s];if(r.length%2!=0)throw new ie(W.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<r.length;f+=2)a.push(UE(t,r[f])),l.push(r[f+1]);let c=[],u=bi.empty();for(let f=a.length-1;f>=0;--f)if(!AL(c,a[f])){let g=a[f],v=l[f];v=Ze(v);let y=o.Su(g);if(v instanceof Fv)c.push(g);else{let C=rl(v,y);C!=null&&(c.push(g),u.set(g,C))}}let h=new Wi(c);return new Mv(u,h,o.fieldTransforms)}function eJ(e,t,n,i=!1){return rl(n,e.Fu(i?4:3,t))}function rl(e,t){if(IL(e=Ze(e)))return hD("Unsupported field value:",t,e),TL(e,t);if(e instanceof nl)return function(i,s){if(!DL(s.fu))throw s.Du(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Du(`${i._methodName}() is not currently supported inside arrays`);let r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(i,s){let r=[],o=0;for(let a of i){let l=rl(a,s.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}}(e,t)}return function(i,s){if((i=Ze(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return BQ(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let r=Qt.fromDate(i);return{timestampValue:gv(s.serializer,r)}}if(i instanceof Qt){let r=new Qt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:gv(s.serializer,r)}}if(i instanceof qh)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof $h)return{bytesValue:Qk(s.serializer,i._byteString)};if(i instanceof zn){let r=s.databaseId,o=i.firestore._databaseId;if(!o.isEqual(r))throw s.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:tD(i.firestore._databaseId||s.databaseId,i._key.path)}}throw s.Du(`Unsupported field value: ${zv(i)}`)}(e,t)}function TL(e,t){let n={};return Rk(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):il(e,(i,s)=>{let r=rl(s,t.pu(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function IL(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Qt||e instanceof qh||e instanceof $h||e instanceof zn||e instanceof nl)}function hD(e,t,n){if(!IL(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){let i=zv(n);throw i==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+i)}}function UE(e,t,n){if((t=Ze(t))instanceof du)return t._internalPath;if(typeof t=="string")return fD(e,t);throw xv("Field path arguments must be of type string or ",e,!1,void 0,n)}var tJ=new RegExp("[~\\*/\\[\\]]");function fD(e,t,n){if(t.search(tJ)>=0)throw xv(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new du(...t.split("."))._internalPath}catch{throw xv(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function xv(e,t,n,i,s){let r=i&&!i.isEmpty(),o=s!==void 0,a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${i}`),o&&(l+=` in document ${s}`),l+=")"),new ie(W.INVALID_ARGUMENT,a+e+l)}function AL(e,t){return e.some(n=>n.isEqual(t))}var Ov=class{constructor(t,n,i,s,r){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new WE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let n=this._document.data.field(pD("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}},WE=class extends Ov{data(){return super.data()}};function pD(e,t){return typeof t=="string"?fD(e,t):t instanceof du?t._internalPath:t._delegate._internalPath}function nJ(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new ie(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Kh=class{},Nv=class extends Kh{};function ML(e,t,...n){let i=[];t instanceof Kh&&i.push(t),i=i.concat(n),function(r){let o=r.filter(l=>l instanceof zE).length,a=r.filter(l=>l instanceof jE).length;if(o>1||o>0&&a>0)throw new ie(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let s of i)e=s._apply(e);return e}var jE=class e extends Nv{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new e(t,n,i)}_apply(t){let n=this._parse(t);return FL(t._query,n),new tl(t.firestore,t.converter,N0(t._query,n))}_parse(t){let n=dD(t.firestore);return function(r,o,a,l,c,u,h){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ie(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){Ek(h,u);let g=[];for(let v of h)g.push(bk(l,r,v));f={arrayValue:{values:g}}}else f=bk(l,r,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||Ek(h,u),f=eJ(a,o,h,u==="in"||u==="not-in");return Bt.create(c,u,f)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}};var zE=class e extends Kh{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new e(t,n)}_parse(t){let n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:gs.create(n,this._getOperator())}_apply(t){let n=this._parse(t);return n.getFilters().length===0?t:(function(s,r){let o=s,a=r.getFlattenedFilters();for(let l of a)FL(o,l),o=N0(o,l)}(t._query,n),new tl(t.firestore,t.converter,N0(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var $E=class e extends Nv{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new e(t,n)}_apply(t){let n=function(s,r,o){if(s.startAt!==null)throw new ie(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ie(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Za(r,o)}(t._query,this._field,this._direction);return new tl(t.firestore,t.converter,function(s,r){let o=s.explicitOrderBy.concat([r]);return new No(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,n))}};function PL(e,t="asc"){let n=t,i=pD("orderBy",e);return $E._create(i,n)}function bk(e,t,n){if(typeof(n=Ze(n))=="string"){if(n==="")throw new ie(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ok(t)&&n.indexOf("/")!==-1)throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=t.path.child(wt.fromString(n));if(!fe.isDocumentKey(i))throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return YN(e,new fe(i))}if(n instanceof zn)return YN(e,n._key);throw new ie(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zv(n)}.`)}function Ek(e,t){if(!Array.isArray(e)||e.length===0)throw new ie(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function FL(e,t){let n=function(s,r){for(let o of s)for(let a of o.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new ie(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ie(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}var qE=class{convertValue(t,n="none"){switch(Xa(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Rt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Oo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw ye()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){let i={};return il(t,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertGeoPoint(t){return new qh(Rt(t.latitude),Rt(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":let i=JE(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Bh(t));default:return null}}convertTimestamp(t){let n=Fr(t);return new Qt(n.seconds,n.nanos)}convertDocumentKey(t,n){let i=wt.fromString(t);lt(tL(i));let s=new lv(i.get(1),i.get(3)),r=new fe(i.popFirst(5));return s.isEqual(n)||Pr(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}};function iJ(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}var Qa=class{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},kv=class extends Ov{constructor(t,n,i,s,r,o){super(t,n,i,s,o),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let n=new Zc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){let i=this._document.data.field(pD("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},Zc=class extends kv{data(t={}){return super.data(t)}},KE=class{constructor(t,n,i,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new Qa(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){let t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new Zc(this._firestore,this._userDataWriter,i.key,i,new Qa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{let l=new Zc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Qa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{let l=new Zc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Qa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter),c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:sJ(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function sJ(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye()}}function xL(e){e=Qs(e,zn);let t=Qs(e.firestore,Or);return KY(uD(t),e._key).then(n=>LL(t,e,n))}var Lv=class extends qE{constructor(t){super(),this.firestore=t}convertBytes(t){return new $h(t)}convertReference(t){let n=this.convertDocumentKey(t,this.firestore._databaseId);return new zn(this.firestore,null,n)}};function OL(e,t,n,...i){e=Qs(e,zn);let s=Qs(e.firestore,Or),r=dD(s),o;return o=typeof(t=Ze(t))=="string"||t instanceof du?ZY(r,"updateDoc",e._key,t,n,i):XY(r,"updateDoc",e._key,t),mD(s,[o.toMutation(e._key,Mr.exists(!0))])}function NL(e){return mD(Qs(e.firestore,Or),[new Hh(e._key,Mr.none())])}function kL(e,t){let n=Qs(e.firestore,Or),i=cD(e),s=iJ(e.converter,t);return mD(n,[JY(dD(e.firestore),"addDoc",i._key,s,e.converter!==null,{}).toMutation(i._key,Mr.exists(!1))]).then(()=>i)}function gD(e,...t){var n,i,s;e=Ze(e);let r={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||_k(t[o])||(r=t[o],o++);let a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(_k(t[o])){let h=t[o];t[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),t[o+1]=(i=h.error)===null||i===void 0?void 0:i.bind(h),t[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,c,u;if(e instanceof zn)c=Qs(e.firestore,Or),u=Bv(e._key.path),l={next:h=>{t[o]&&t[o](LL(c,e,h))},error:t[o+1],complete:t[o+2]};else{let h=Qs(e,tl);c=Qs(h.firestore,Or),u=h._query;let f=new Lv(c);l={next:g=>{t[o]&&t[o](new KE(c,f,h,g))},error:t[o+1],complete:t[o+2]},nJ(e._query)}return function(f,g,v,y){let C=new Iv(y),E=new Ev(g,C,v);return f.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return uL(yield kE(f),E)})),()=>{C.$a(),f.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return dL(yield kE(f),E)}))}}(uD(c),u,a,l)}function mD(e,t){return function(i,s){let r=new zs;return i.asyncQueue.enqueueAndForget(()=>F(this,null,function*(){return LY(yield qY(i),s,r)})),r.promise}(uD(e),t)}function LL(e,t,n){let i=n.docs.get(t._key),s=new Lv(e);return new kv(e,s,t._key,i,new Qa(n.hasPendingWrites,n.fromCache),t.converter)}function VL(...e){return new GE("arrayUnion",e)}function BL(...e){return new HE("arrayRemove",e)}(function(t,n=!0){(function(s){hu=s})(no),Et(new bt("firestore",(i,{instanceIdentifier:s,options:r})=>{let o=i.getProvider("app").getImmediate(),a=new Or(new g0(i.getProvider("auth-internal")),new y0(i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ie(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lv(c.options.projectId,u)}(o,s),o);return r=Object.assign({useFetchStreams:n},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),pe(qN,"4.6.4",t),pe(qN,"4.6.4","esm2017")})();var $v=function(){return $v=Object.assign||function(t){for(var n,i=1,s=arguments.length;i<s;i++){n=arguments[i];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$v.apply(this,arguments)};var aJ={includeMetadataChanges:!1};function GL(e,t){return t===void 0&&(t=aJ),new re(function(n){var i=gD(e,t,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:i}})}function HL(e,t){var n;t===void 0&&(t={});var i=e.data(t);return!e.exists()||typeof i!="object"||i===null||!t.idField?i:$v($v({},i),(n={},n[t.idField]=e.id,n))}function UL(e){return GL(e,{includeMetadataChanges:!0}).pipe(oe(function(t){return t.docs}))}function WL(e,t){return t===void 0&&(t={}),UL(e).pipe(oe(function(n){return n.map(function(i){return HL(i,t)})}))}var Nr=class{constructor(t){return t}},jL="firestore",vD=class{constructor(){return yn(jL)}};var CD=new Q("angularfire2.firestore-instances");function lJ(e,t){let n=En(jL,e,t);return n&&new Nr(n)}function cJ(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new Nr(i)}}var uJ={provide:vD,deps:[[new Te,CD]]},dJ={provide:Nr,useFactory:lJ,deps:[[new Te,CD],Pt]};function zL(e,...t){return pe("angularfire",Dt.full,"fst"),ht([dJ,uJ,{provide:CD,useFactory:cJ(e),multi:!0,deps:[le,Ue,Nt,$t,[new Te,ds],[new Te,Wn],...t]}])}var Zh=Oe(WL,!0);var qv=Oe(kL,!0);var $L=Oe(BL,!0),qL=Oe(VL,!0);var ol=Oe(_L,!0);var KL=Oe(NL,!0);var pu=Oe(cD,!0);var QL=Oe(xL,!0);var YL=Oe(bL,!0);var JL=Oe(PL,!0);var XL=Oe(ML,!0);var Kv=Oe(OL,!0);var hJ=new Map,fJ={activated:!1,tokenObservers:[]},pJ={initialized:!1,enabled:!1};function ms(e){return hJ.get(e)||Object.assign({},fJ)}function sV(){return pJ}var gJ="https://content-firebaseappcheck.googleapis.com/v1";var mJ="exchangeDebugToken",eV={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},JFe=24*60*60*1e3;var wD=class{constructor(t,n,i,s,r){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=s,this.upperBound=r,this.pending=null,this.nextErrorWaitInterval=s,s>r)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return F(this,null,function*(){this.stop();try{this.pending=new Hl,this.pending.promise.catch(n=>{}),yield vJ(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new Hl,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function vJ(e){return new Promise(t=>{setTimeout(t,e)})}var CJ={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Go=new Is("appCheck","AppCheck",CJ);function rV(e){if(!ms(e).activated)throw Go.create("use-before-activation",{appName:e.name})}function oV(i,s){return F(this,arguments,function*({url:e,body:t},n){let r={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){let g=yield o.getHeartbeatsHeader();g&&(r["X-Firebase-Client"]=g)}let a={method:"POST",body:JSON.stringify(t),headers:r},l;try{l=yield fetch(e,a)}catch(g){throw Go.create("fetch-network-error",{originalErrorMessage:g?.message})}if(l.status!==200)throw Go.create("fetch-status-error",{httpStatus:l.status});let c;try{c=yield l.json()}catch(g){throw Go.create("fetch-parse-error",{originalErrorMessage:g?.message})}let u=c.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Go.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let h=Number(u[1])*1e3,f=Date.now();return{token:c.token,expireTimeMillis:f+h,issuedAtTimeMillis:f}})}function aV(e,t){let{projectId:n,appId:i,apiKey:s}=e.options;return{url:`${gJ}/projects/${n}/apps/${i}:${mJ}?key=${s}`,body:{debug_token:t}}}var yJ="firebase-app-check-database",wJ=1,SD="firebase-app-check-store";var Qv=null;function SJ(){return Qv||(Qv=new Promise((e,t)=>{try{let n=indexedDB.open(yJ,wJ);n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{var s;t(Go.create("storage-open",{originalErrorMessage:(s=i.target.error)===null||s===void 0?void 0:s.message}))},n.onupgradeneeded=i=>{let s=i.target.result;switch(i.oldVersion){case 0:s.createObjectStore(SD,{keyPath:"compositeKey"})}}}catch(n){t(Go.create("storage-open",{originalErrorMessage:n?.message}))}}),Qv)}function _J(e,t){return bJ(EJ(e),t)}function bJ(e,t){return F(this,null,function*(){let i=(yield SJ()).transaction(SD,"readwrite"),r=i.objectStore(SD).put({compositeKey:e,value:t});return new Promise((o,a)=>{r.onsuccess=l=>{o()},i.onerror=l=>{var c;a(Go.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})})}function EJ(e){return`${e.options.appId}-${e.name}`}var _D=new Ms("@firebase/app-check");function yD(e,t){return ts()?_J(e,t).catch(n=>{_D.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function lV(){return sV().enabled}function cV(){return F(this,null,function*(){let e=sV();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var DJ={error:"UNKNOWN_ERROR"};function RJ(e){return lp.encodeString(JSON.stringify(e),!1)}function bD(e,t=!1){return F(this,null,function*(){let n=e.app;rV(n);let i=ms(n),s=i.token,r;if(s&&!ef(s)&&(i.token=void 0,s=void 0),!s){let l=yield i.cachedTokenPromise;l&&(ef(l)?s=l:yield yD(n,void 0))}if(!t&&s&&ef(s))return{token:s.token};let o=!1;if(lV()){i.exchangeTokenPromise||(i.exchangeTokenPromise=oV(aV(n,yield cV()),e.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);let l=yield i.exchangeTokenPromise;return yield yD(n,l),i.token=l,{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),s=yield ms(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?_D.warn(l.message):_D.error(l),r=l}let a;return s?r?ef(s)?a={token:s.token,internalError:r}:a=nV(r):(a={token:s.token},i.token=s,yield yD(n,s)):a=nV(r),o&&MJ(n,a),a})}function TJ(e){return F(this,null,function*(){let t=e.app;rV(t);let{provider:n}=ms(t);if(lV()){let i=yield cV(),{token:s}=yield oV(aV(t,i),e.heartbeatServiceProvider);return{token:s}}else{let{token:i}=yield n.getToken();return{token:i}}})}function IJ(e,t,n,i){let{app:s}=e,r=ms(s),o={next:n,error:i,type:t};if(r.tokenObservers=[...r.tokenObservers,o],r.token&&ef(r.token)){let a=r.token;Promise.resolve().then(()=>{n({token:a.token}),tV(e)}).catch(()=>{})}r.cachedTokenPromise.then(()=>tV(e))}function uV(e,t){let n=ms(e),i=n.tokenObservers.filter(s=>s.next!==t);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function tV(e){let{app:t}=e,n=ms(t),i=n.tokenRefresher;i||(i=AJ(e),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function AJ(e){let{app:t}=e;return new wD(()=>F(this,null,function*(){let n=ms(t),i;if(n.token?i=yield bD(e,!0):i=yield bD(e),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=ms(t);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,s=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,s),Math.max(0,i-Date.now())}else return 0},eV.RETRIAL_MIN_WAIT,eV.RETRIAL_MAX_WAIT)}function MJ(e,t){let n=ms(e).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&t.error!=null?i.error(t.error):i.next(t)}catch{}}function ef(e){return e.expireTimeMillis-Date.now()>0}function nV(e){return{token:RJ(DJ),error:e}}var ED=class{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:t}=ms(this.app);for(let n of t)uV(this.app,n.next);return Promise.resolve()}};function PJ(e,t){return new ED(e,t)}function FJ(e){return{getToken:t=>bD(e,t),getLimitedUseToken:()=>TJ(e),addTokenListener:t=>IJ(e,"INTERNAL",t),removeTokenListener:t=>uV(e.app,t)}}var xJ="@firebase/app-check",OJ="0.8.5";var NJ="app-check",iV="app-check-internal";function kJ(){Et(new bt(NJ,e=>{let t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return PJ(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(iV).initialize()})),Et(new bt(iV,e=>{let t=e.getProvider("app-check").getImmediate();return FJ(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),pe(xJ,OJ)}kJ();var LJ=["localhost","0.0.0.0","127.0.0.1"],cxe=typeof window<"u"&&LJ.includes(window.location.hostname);var BJ="firebase",GJ="10.12.3";sa.registerVersion(BJ,GJ,"app-compat");var HJ=["ngOnDestroy"],hV=(e,t,n,i={})=>new Proxy(e,{get:(s,r)=>n.runOutsideAngular(()=>{if(e[r])return i?.spy?.get&&i.spy.get(r,e[r]),e[r];if(HJ.indexOf(r)>-1)return()=>{};let o=t.toPromise().then(a=>{let l=a?.[r];return typeof l=="function"?l.bind(a):l?.then?l.then(c=>n.run(()=>c)):n.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(u=>{let h=u?.(...c);return i?.spy?.apply&&i.spy.apply(r,c,h),h})})})});var DD=class{constructor(t){return t}},Yv=new Q("angularfire2.app.options"),fV=new Q("angularfire2.app.name");function pV(e,t,n){let i=typeof n=="string"&&n||"[DEFAULT]",s=typeof n=="object"&&n||{};s.name=s.name||i;let o=sa.apps.filter(a=>a&&a.name===s.name)[0]||t.runOutsideAngular(()=>sa.initializeApp(e,s));try{if(JSON.stringify(e)!==JSON.stringify(o.options)){let a=!!module.hot;UJ("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new DD(o)}var UJ=(e,...t)=>{c_()&&typeof console<"u"&&console[e](...t)};function gV(e,t,n,i,s){let[,r,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===e)||[];if(r)return WJ(s,o)||(dV("error",`${t} was already initialized on the ${n} Firebase App with different settings.${jJ?" You may need to reload as Firebase is not HMR aware.":""}`),dV("warn",{is:s,was:o})),r;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([e,a,s]),a}}function WJ(e,t){try{return e.toString()===t.toString()}catch{return e===t}}var jJ=typeof module<"u"&&!!module.hot,dV=(e,...t)=>{c_()&&typeof console<"u"&&console[e](...t)};globalThis.\u0275AngularfireInstanceCache||=[];var zJ=new Q("angularfire2.auth.use-emulator"),$J=new Q("angularfire2.auth.settings"),qJ=new Q("angularfire2.auth.tenant-id"),KJ=new Q("angularfire2.auth.langugage-code"),QJ=new Q("angularfire2.auth.use-device-language"),YJ=new Q("angularfire.auth.persistence"),JJ=(e,t,n,i,s,r,o,a)=>gV(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{let l=t.runOutsideAngular(()=>e.auth());if(n&&l.useEmulator(...n),i&&(l.tenantId=i),l.languageCode=s,r&&l.useDeviceLanguage(),o)for(let[c,u]of Object.entries(o))l.settings[c]=u;return a&&l.setPersistence(a),l},[n,i,s,r,o,a]),Jv=(()=>{class e{authState;idToken;user;idTokenResult;credential;constructor(n,i,s,r,o,a,l,c,u,h,f,g){let v=new Le,y=Z(void 0).pipe(hi(o.outsideAngular),Ge(()=>r.runOutsideAngular(()=>import("./chunk-GKFLWC6F.js"))),oe(()=>pV(n,r,i)),oe(C=>JJ(C,r,a,c,u,h,l,f)),zp({bufferSize:1,refCount:!1}));if(br(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Z(null);else{y.pipe(fi()).subscribe();let C=y.pipe(Ge(T=>T.getRedirectResult().then(x=>x,()=>null)),Tb,zp({bufferSize:1,refCount:!1})),E=y.pipe(Ge(T=>new re(x=>({unsubscribe:r.runOutsideAngular(()=>T.onAuthStateChanged(z=>x.next(z),z=>x.error(z),()=>x.complete()))})))),I=y.pipe(Ge(T=>new re(x=>({unsubscribe:r.runOutsideAngular(()=>T.onIdTokenChanged(z=>x.next(z),z=>x.error(z),()=>x.complete()))}))));this.authState=C.pipe($p(E),Fi(o.outsideAngular),hi(o.insideAngular)),this.user=C.pipe($p(I),Fi(o.outsideAngular),hi(o.insideAngular)),this.idToken=this.user.pipe(Ge(T=>T?qe(T.getIdToken()):Z(null))),this.idTokenResult=this.user.pipe(Ge(T=>T?qe(T.getIdTokenResult()):Z(null))),this.credential=Bp(C,v,this.authState.pipe(ut(T=>!T))).pipe(oe(T=>T?.user?T:null),Fi(o.outsideAngular),hi(o.insideAngular))}return hV(this,y,r,{spy:{apply:(C,E,I)=>{(C.startsWith("signIn")||C.startsWith("createUser"))&&I.then(T=>v.next(T))}}})}static \u0275fac=function(i){return new(i||e)(K(Yv),K(fV,8),K(on),K(le),K(Nt),K(zJ,8),K($J,8),K(qJ,8),K(KJ,8),K(QJ,8),K(YJ,8),K(Wn,8))};static \u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})();var gu=(()=>{let t=class t{constructor(i,s){this.afAuth=i,this.fs=s,this.userId=null,this.incomeTags=new gt([]),this.incomeTags$=this.incomeTags.asObservable(),this.expenseTags=new gt([]),this.expenseTags$=this.expenseTags.asObservable(),this.afAuth.authState.pipe(Ge(r=>r?(this.userId=r.uid,this.getTags()):(this.userId=null,Z([])))).subscribe(r=>{this.separateTagsByType(r)})}getTagFromId(i,s){return(s==="income"?this.incomeTags.value:this.expenseTags.value).find(a=>a.id===i)||{id:"",name:"",type:s}}separateTagsByType(i){this.incomeTags.next(i.filter(s=>s.type==="income")),this.expenseTags.next(i.filter(s=>s.type==="expense"))}getTags(){if(!this.userId)return Z([]);let i=ol(this.fs,`tags/${this.userId}/userTags`);return Zh(i,{idField:"id"})}addTag(i,s){if(!this.userId)return Z("");let r={name:i,type:s};return new re(o=>{qv(ol(this.fs,`tags/${this.userId}/userTags`),r).then(a=>{o.next(a.id),o.complete()}).catch(a=>o.error(a))})}updateTag(i,s){if(!this.userId)return Z();let r=pu(this.fs,`tags/${this.userId}/userTags/${i}`);return new re(o=>{Kv(r,s).then(()=>{o.next(),o.complete()}).catch(a=>o.error(a))})}deleteTag(i){if(!this.userId)return Z();let s=pu(this.fs,`tags/${this.userId}/userTags/${i}`);return new re(r=>{KL(s).then(()=>{r.next(),r.complete()}).catch(o=>r.error(o))})}addTagToTransaction(i,s,r){if(!this.userId)return Z();let o=pu(this.fs,`transactions/${this.userId}/${r}/${i}`);return new re(a=>{Kv(o,{tagIds:qL(s)}).then(()=>{a.next(),a.complete()}).catch(l=>a.error(l))})}removeTagFromTransaction(i,s,r){if(!this.userId)return Z();let o=pu(this.fs,`transactions/${this.userId}/${r}/${i}`);return new re(a=>{Kv(o,{tagIds:$L(s)}).then(()=>{a.next(),a.complete()}).catch(l=>a.error(l))})}getTagsForTransaction(i,s){if(!this.userId)return Z([]);let r=pu(this.fs,`transactions/${this.userId}/${s}/${i}`);return new re(o=>{QL(r).then(a=>{if(a.exists()){let l=B({id:a.id},a.data());this.getTags().pipe(oe(c=>c.filter(u=>l.tagIds.includes(u.id)))).subscribe(c=>{o.next(c),o.complete()},c=>o.error(c))}else o.next([]),o.complete()}).catch(a=>o.error(a))})}getTransactionsByTag(i,s){if(!this.userId)return Z([]);let r=ol(this.fs,`transactions/${this.userId}/${s}`);return Zh(r,{idField:"id"}).pipe(oe(o=>o.filter(a=>{let l=a.tagIds||[];return Array.isArray(l)&&l.includes(i)})))}};t.\u0275fac=function(s){return new(s||t)(K(Jv),K(Nr))},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Xv=(()=>{let t=class t{constructor(i){this.tagService=i}formatDateToDayMonthYearWeekday(i){let s={day:"2-digit",month:"short",year:"numeric",weekday:"short"},r=i.toLocaleDateString("en-GB",s),[o,a,l,c]=r.replace(",","").split(" ");return`${l} ${a} ${c} (${o})`}moneyToLineBarData(i){return i.map(s=>({tag:s.tags[0],value:[s.date,s.amount],title:s.title??""}))}dateToMilli(i){return new Date(i).getTime()}milliToDate(i){return new Date(i).toLocaleDateString("en-CA",{month:"short",day:"2-digit"}).split("T")[0]}dateToMonthDateYearDay(i,s=!0){let r={weekday:"short",year:"numeric",month:"long",day:s?"numeric":void 0};return new Date(i).toLocaleDateString("en-US",r)}groupLineBarDataByDay(i){let s={};return i.forEach(r=>{let o=new Date(r.value[0]),a=`${o.getFullYear()}-${(o.getMonth()+1).toString().padStart(2,"0")}-${o.getDate().toString().padStart(2,"0")}`;s[a]||(s[a]=[]),s[a].push({tag:r.tag,value:r.value[1],title:r.title})}),Object.entries(s).map(([r,o])=>{let a=o,[l,c,u]=r.split("-");return{value:[new Date(parseInt(l),parseInt(c)-1,parseInt(u)).getTime(),a.reduce((f,g)=>f+Number(g.value),0)],points:a}})}groupBarDataByMonth(i){let s=[];return i.forEach(r=>{let o=new Date(r[0]),a=`${o.getFullYear()}-${(o.getMonth()+1).toString().padStart(2,"0")}`;s[a]||(s[a]=0),s[a]+=r[1]}),Object.entries(s).map(([r,o])=>{let[a,l]=r.split("-");return[new Date(parseInt(a),parseInt(l)-1).getTime(),o]})}groupPointsByTags(i){return i.reduce((s,r)=>(s[r.tag]||(s[r.tag]={tag:r.tag,points:[]}),s[r.tag].points.push({title:r.title,value:r.value}),s),{})}formatTooltipBySortedPoints(i,s=!1){return Object.values(i).map(r=>{let o=this.tagService.getTagFromId(r.tag,s?"income":"expense").name,a=r.points.map(l=>`${l.title}: \u20B1${l.value}`).join("<br/>");return`<small><pr><code>${o}</code></pr></small><br/>${a}`}).join("<br/>")}};t.\u0275fac=function(s){return new(s||t)(K(gu))},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function XJ(e,t){if(e&1&&(mr(),Y(0,"svg",10),de(1,"path",11),J()),e&2){let n=yt(2);ki(n.arrowIconClass)}}function ZJ(e,t){if(e&1){let n=ii();Y(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),Ae(4),J(),Y(5,"p",4),Ae(6),Y(7,"span",5),Ae(8),Ct(9,XJ,2,2,":svg:svg",6),J()()(),Y(10,"div",7)(11,"button",8),st("click",function(){sn(n);let s=yt();return rn(s.toggleChartType())}),de(12,"i"),J()()(),Y(13,"div"),de(14,"div",9),J()()}if(e&2){let n=yt();ve(4),Ta(n.title),ve(2),Hn(" ",n.percentChangeMessage," "),ve(),ki(n.percentChangeClass),ve(),Hn(" ",n.percentChange.toFixed(0),"% "),ve(),Qg(9,n.percentChange!==0?9:-1),ve(3),ki(n.toggleChartTypeSymbol),ve(2),Ra("height",n.height),_e("options",n.options)}}var CV=(()=>{let t=class t{constructor(i){this.utilService=i,this.data=[],this.title="",this.percentChangeMessage="Recent change:",this.isIncome=!1,this.type="line",this.height="150px",this.percentChange=0,this.isLoading=!1,this.options={tooltip:{trigger:"axis",formatter:s=>{s=s[0];let r=this.utilService.groupPointsByTags(s.data.points),o=this.utilService.dateToMonthDateYearDay(s.value[0]),a=this.utilService.formatTooltipBySortedPoints(r,this.isIncome);return`<small>${o}</small><br/>${a}<br/>${s.data.points.length>1?`<small>Total: \u20B1${s.value[1]}</small>`:""}`},axisPointer:{animation:!1}},xAxis:{type:"category",splitLine:{show:!1},axisLabel:{formatter:s=>this.utilService.milliToDate(Number(s))},show:!1},grid:{bottom:"5%",top:"5%",left:0,right:0},yAxis:{type:"value",splitLine:{show:!1},show:!1},series:[{name:"Mock Data",type:this.type,showSymbol:!0,data:[],itemStyle:{color:"#c23531"}}]}}ngOnInit(){this.loadData()}ngOnChanges(){this.loadData()}toggleChartType(){this.type==="line"?this.type="bar":this.type="line",this.loadData()}loadData(){this.isLoading=!0;let i=this.utilService.groupLineBarDataByDay(this.data);this.percentChange=this.calculatePercentChange(this.data),this.options=se(B({},this.options),{series:[{data:i,type:this.type,itemStyle:{color:"#c23531"}}]}),this.isLoading=!1}get toggleChartTypeSymbol(){return this.type==="bar"?"bi bi-bar-chart-fill":"bi bi-graph-up"}calculatePercentChange(i){if(i.length<2)return 0;let s=i[0].value[1];return(i[i.length-1].value[1]-s)/s*100}get arrowIconClass(){return this.percentChange>0?"w-3 h-3 ms-1":"w-3 h-3 ms-1 rotate-180"}get percentChangeClass(){let i="";if(this.percentChange!==0){let s=this.percentChange>0;this.isIncome?i=s?"text-success":"text-danger":i=s?"text-danger":"text-success"}return`${i}`}};t.\u0275fac=function(s){return new(s||t)(ne(Xv))},t.\u0275cmp=Pe({type:t,selectors:[["app-line-bar-chart"]],inputs:{data:"data",title:"title",percentChangeMessage:"percentChangeMessage",isIncome:"isIncome",type:"type",height:"height"},standalone:!0,features:[nn,Fe],decls:1,vars:1,consts:[[1,"bg-light","rounded-3","p-3"],[1,"d-flex","m-3"],[1,"col-6","d-flex","flex-column","justify-content-start"],[1,"fw-bold"],[1,"text-muted"],[1,"fw-semibold","text-start","ms-2"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 10 14",3,"class"],[1,"col-3","offset-2","d-flex","justify-content-end"],["type","button",1,"btn","btn-warning","p-1","col-6","offset-6",3,"click"],["echarts","",1,"demo-chart",3,"options"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 10 14"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13V1m0 0L1 5m4-4 4 4"]],template:function(s,r){s&1&&Ct(0,ZJ,15,11,"div",0),s&2&&Qg(0,r.isLoading?-1:0)},dependencies:[WN],styles:["svg[_ngcontent-%COMP%]{width:20px;height:20px}.btn[_ngcontent-%COMP%]{width:50px;height:50px}"]});let e=t;return e})();var yV=(()=>{let t=class t{constructor(){this.title="Title",this.value=0,this.percentChange=0}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Pe({type:t,selectors:[["app-stat-card"]],inputs:{title:"title",value:"value",percentChange:"percentChange"},standalone:!0,features:[Fe],decls:7,vars:3,consts:[[1,"bg-light","border","border-primary","rounded-4","p-4"],[1,"text-muted","small"],[1,"h2","fw-bold"],[1,"text-success","small","mb-0"]],template:function(s,r){s&1&&(Y(0,"div",0)(1,"h3",1),Ae(2),J(),Y(3,"p",2),Ae(4),J(),Y(5,"p",3),Ae(6),J()()),s&2&&(ve(2),Ta(r.title),ve(2),Ta(r.value),ve(2),Hn("+",r.percentChange,"%"))}});let e=t;return e})();var eX=e=>({"add-tag":e});function tX(e,t){if(e&1){let n=ii();Y(0,"div",3),Ae(1),Y(2,"i",4),st("click",function(){sn(n);let s=yt();return rn(s.removeExistingTag())}),J()()}if(e&2){let n=yt();ve(),Hn(" ",n.selectedTag.name," ")}}function nX(e,t){if(e&1){let n=ii();Y(0,"textarea",5),st("keydown.enter",function(s){sn(n);let r=yt();return rn(r.onEnterKey(s))}),J()}if(e&2){let n=yt();_e("formControl",n.tagForm)}}function iX(e,t){if(e&1&&(Y(0,"li",10),Ae(1),J()),e&2){let n=yt(2);ve(),Hn(' Add tag "',n.tagForm.value,'" ')}}function sX(e,t){if(e&1){let n=ii();Y(0,"li",11),st("click",function(){let s=sn(n).$implicit,r=yt(2);return rn(r.addExistingTag(s))}),Ae(1),de(2,"i",12),J()}if(e&2){let n=t.$implicit,i=yt(2);_e("ngClass",i_(2,eX,i.isOptionHighlighted(n.name))),ve(),Hn(" ",n.name," ")}}function rX(e,t){if(e&1&&(Y(0,"div",6)(1,"ul",7),Ct(2,iX,2,1,"li",8)(3,sX,3,4,"li",9),J()()),e&2){let n=yt();ve(2),_e("ngIf",n.showAddTagOption()),ve(),_e("ngForOf",n.suggestions)}}var wV=(()=>{let t=class t{constructor(i){this.tagService=i,this.type="income",this.tagId=null,this.tagAdded=new H,this.incomeTags=[],this.expenseTags=[],this.tagForm=new Oc(""),this.selectedTag=null,this.suggestions=[],this.searchDelay=0,this.tagService.incomeTags$.subscribe(s=>{this.incomeTags=s}),this.tagService.expenseTags$.subscribe(s=>{this.expenseTags=s}),this.tagForm.valueChanges.pipe(Hy(this.searchDelay)).subscribe(s=>{this.filterSuggestions(s)})}ngOnInit(){this.suggestions=this.type==="income"?this.incomeTags:this.expenseTags,this.tagId!==null&&(this.removeTagFromSuggestions(this.tagId),this.selectedTag=this.tagService.getTagFromId(this.tagId,this.type))}filterSuggestions(i){if(!i)this.suggestions=this.type==="income"?this.incomeTags:this.expenseTags;else{let s=i.toLowerCase();this.suggestions=(this.type==="income"?this.incomeTags:this.expenseTags).filter(r=>r.name.toLowerCase().includes(s)).sort((r,o)=>r.name.length-o.name.length)}this.selectedTag&&this.removeTagFromSuggestions(this.selectedTag.id)}addTag(i){console.log("Adding tag:",i),this.tagService.addTag(i,this.type).subscribe(s=>{console.log("Tag added successfully"),this.tagAdded.emit(s),this.tagForm.setValue(""),this.removeTagFromSuggestions(s)},s=>{console.error("Error adding tag:",s)})}addExistingTag(i){console.log("Adding existing tag:",i.name),this.tagAdded.emit(i.id),this.tagForm.setValue(""),this.selectedTag=i,this.removeTagFromSuggestions(i.id)}removeExistingTag(){this.selectedTag&&(this.tagAdded.emit(null),this.suggestions=this.type==="income"?this.incomeTags:this.expenseTags,this.selectedTag=null)}removeTagFromSuggestions(i){this.suggestions=this.suggestions.filter(s=>s.id.toLowerCase()!==i.toLowerCase())}showAddTagOption(){return!this.suggestions.some(i=>i.name.toLowerCase()===this.tagForm.value.toLowerCase())}onEnterKey(i){if(!this.tagForm.value)return;if(i.preventDefault(),this.suggestions.find(r=>r.name.toLowerCase()===this.tagForm.value.toLowerCase())){this.addExistingTag(this.suggestions[0]);return}this.addTag(this.tagForm.value)}isOptionHighlighted(i){return i.toLowerCase()===this.tagForm.value.toLowerCase()}};t.\u0275fac=function(s){return new(s||t)(ne(gu))},t.\u0275cmp=Pe({type:t,selectors:[["app-tag-input"]],inputs:{type:"type",tagId:"tagId"},outputs:{tagAdded:"tagAdded"},standalone:!0,features:[Fe],decls:3,vars:3,consts:[["class","badge bg-primary text-wrap",4,"ngIf"],["class","form-control border-0 shadow-none","id","tagIds","placeholder","Add a tag","style","height: 40px; resize: none; overflow: hidden","rows","3",3,"formControl","keydown.enter",4,"ngIf"],["class","position-relative col-6",4,"ngIf"],[1,"badge","bg-primary","text-wrap"],[1,"bi","bi-x-circle-fill","ms-1",3,"click"],["id","tagIds","placeholder","Add a tag","rows","3",1,"form-control","border-0","shadow-none",2,"height","40px","resize","none","overflow","hidden",3,"keydown.enter","formControl"],[1,"position-relative","col-6"],[1,"list-group","position-absolute","shadow","rounded","border","border-1","border-secondary","bg-white","w-100","mt-1","p-0",2,"max-height","125px","overflow-y","auto"],["class","add-tag list-group-item d-flex justify-content-between align-items-center p-2",4,"ngIf"],["class","list-group-item d-flex justify-content-between align-items-center p-2 icon-link-hover",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"add-tag","list-group-item","d-flex","justify-content-between","align-items-center","p-2"],[1,"list-group-item","d-flex","justify-content-between","align-items-center","p-2","icon-link-hover",3,"click","ngClass"],[1,"bi","bi-plus-lg","mx-1"]],template:function(s,r){s&1&&Ct(0,tX,3,1,"div",0)(1,nX,1,1,"textarea",1)(2,rX,4,2,"div",2),s&2&&(_e("ngIf",r.selectedTag),ve(),_e("ngIf",r.selectedTag===null),ve(),_e("ngIf",r.tagForm.value))},dependencies:[Io,Us,To,Db,vn,b1,So,_o],styles:[".add-tag[_ngcontent-%COMP%]{background-color:#fd7e14;color:#fff}li[_ngcontent-%COMP%]{cursor:pointer}"]});let e=t;return e})();var Zv=(()=>{let t=class t{constructor(i,s){this.afAuth=i,this.fs=s,this.userId=null,this.incomeTransactionsSubject=new gt([]),this.incomeTransactions$=this.incomeTransactionsSubject.asObservable(),this.expenseTransactionsSubject=new gt([]),this.expenseTransactions$=this.expenseTransactionsSubject.asObservable(),this.afAuth.authState.pipe(Ge(r=>r?(this.userId=r.uid,this.getAllTransactions()):(this.userId=null,Z({incomeTransactions:[],expenseTransactions:[]})))).subscribe({next:({incomeTransactions:r,expenseTransactions:o})=>{this.incomeTransactionsSubject.next(r),this.expenseTransactionsSubject.next(o)},error:r=>{console.error("Error fetching transactions:",r)}})}getAllTransactions(){if(!this.userId)return Z({incomeTransactions:[],expenseTransactions:[]});let i=this.getIncomeTransactions(),s=this.getExpenseTransactions();return la([i,s]).pipe(oe(([r,o])=>({incomeTransactions:r,expenseTransactions:o})))}getTransactions(i){if(!this.userId)return Z([]);let s=ol(this.fs,`transactions/${this.userId}/${i}`),r=XL(s,JL("date"));return Zh(r,{idField:"id"}).pipe(oe(o=>o.map(a=>se(B({},a),{date:a.date instanceof Qt?a.date.toDate():a.date}))))}getIncomeTransactions(){return this.getTransactions("income")}getExpenseTransactions(){return this.getTransactions("expense")}addTransaction(i){let s=qv(ol(this.fs,`transactions/${this.userId}/${i.type}`),i);return Z(s)}};t.\u0275fac=function(s){return new(s||t)(K(Jv),K(Nr))},t.\u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var oX=["transactionModal"];function aX(e,t){e&1&&(Y(0,"div",23),Ae(1," Amount is required and must be greater than 0. "),J())}function lX(e,t){e&1&&(Y(0,"div",23),Ae(1," Description is required. "),J())}function cX(e,t){e&1&&(Y(0,"div",23),Ae(1," Date is required. "),J())}function uX(e,t){if(e&1){let n=ii();Y(0,"div",6)(1,"div",7)(2,"i",8),st("click",function(){sn(n);let s=yt();return rn(s.closeModal())}),J(),Y(3,"h4",9),Ae(4),s_(5,"titlecase"),J(),Y(6,"p",10),Ae(7),J(),Y(8,"form",11),st("ngSubmit",function(){sn(n);let s=yt();return rn(s.onSubmit())}),Y(9,"div",12)(10,"label",13),Ae(11,"Amount"),J(),de(12,"input",14),Ct(13,aX,2,0,"div",15),J(),Y(14,"div",12)(15,"label",16),Ae(16,"Description"),J(),de(17,"textarea",17),Ct(18,lX,2,0,"div",15),J(),Y(19,"div",12)(20,"label",18),Ae(21,"Date"),J(),de(22,"input",19),Ct(23,cX,2,0,"div",15),J(),Y(24,"div",12)(25,"app-tag-input",20),st("tagAdded",function(s){sn(n);let r=yt();return rn(r.updateTransactionTag(s))}),J()(),Y(26,"div",21)(27,"button",22),Ae(28," Submit "),J()()()()()}if(e&2){let n=yt();ve(4),Hn(" ",r_(5,8,n.transactionType)," "),ve(3),Hn("Enter your ",n.transactionType," details below."),ve(),_e("formGroup",n.transactionForm),ve(5),_e("ngIf",n.transactionForm.controls.amount.invalid&&n.transactionForm.controls.amount.touched),ve(5),_e("ngIf",n.transactionForm.controls.description.invalid&&n.transactionForm.controls.description.touched),ve(5),_e("ngIf",n.transactionForm.controls.date.invalid&&n.transactionForm.controls.date.touched),ve(2),_e("type",n.transactionType),ve(2),_e("disabled",n.transactionForm.invalid)}}var _V=(()=>{let t=class t{constructor(i,s,r){this.ngbModal=i,this.fb=s,this.transactionService=r,this.transactionForm=this.fb.group({amount:[null,[Vi.required,Vi.min(.01)]],type:["income",Vi.required],description:["",Vi.required],date:[new Date,Vi.required],tagIds:[[]]}),this.transactionType="income"}openModal(i){this.ngbModal.open(this.transactionModal,{centered:!0,fullscreen:"sm"}),this.transactionForm.get("type").setValue(i),this.transactionType=i}closeModal(){this.ngbModal.dismissAll(),this.transactionForm.reset()}updateTransactionTag(i){if(console.log("Tag ID:",i),!i){this.transactionForm.get("tagIds")?.setValue([]);return}let s=this.transactionForm.get("tagIds")?.value;if(!s)return;let r=s.includes(i)?s.filter(o=>o!==i):[...s,i];this.transactionForm.get("tagIds")?.setValue(r)}onSubmit(){if(this.transactionForm.valid){let i=this.transactionForm.value,s={amount:i.amount??0,type:i.type,description:i.description??"",date:new Date(i.date??new Date),tagIds:i.tagIds??[]};this.transactionService.addTransaction(s).subscribe({next:()=>{console.log("Transaction added successfully")},error:r=>{console.error("Error adding transaction",r)}}),this.closeModal()}else console.error("Form is invalid")}};t.\u0275fac=function(s){return new(s||t)(ne(kN),ne(Bc),ne(Zv))},t.\u0275cmp=Pe({type:t,selectors:[["app-transaction-form"]],viewQuery:function(s,r){if(s&1&&Yg(oX,7),s&2){let o;Qd(o=Yd())&&(r.transactionModal=o.first)}},standalone:!0,features:[Fe],decls:7,vars:0,consts:[["transactionModal",""],[1,"btn-group"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"bi","bi-plus-circle-fill"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"bi","bi-dash-circle-fill"],[1,"modal-content","d-flex","align-items-center","justify-content-center","p-4"],[1,"user-select-none","w-100"],["role","button",1,"bi","bi-x-lg","float-end",3,"click"],["id","modal-title",1,"modal-title","fw-bold"],[1,"text-muted"],[1,"p-3",3,"ngSubmit","formGroup"],[1,"form-row","mb-3"],["for","amount",1,"form-label"],["type","number","id","amount","formControlName","amount","placeholder","Enter amount",1,"form-control"],["class","text-danger",4,"ngIf"],["for","description",1,"form-label"],["id","description","formControlName","description","placeholder","Enter description","rows","3",1,"form-control"],["for","date",1,"form-label"],["type","date","id","date","formControlName","date",1,"form-control"],[3,"tagAdded","type"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-warning",3,"disabled"],[1,"text-danger"]],template:function(s,r){if(s&1){let o=ii();Y(0,"div",1)(1,"button",2),st("click",function(){return sn(o),rn(r.openModal("income"))}),de(2,"i",3),J(),Y(3,"button",4),st("click",function(){return sn(o),rn(r.openModal("expense"))}),de(4,"i",5),J()(),Ct(5,uX,29,10,"ng-template",null,0,Jd)}},dependencies:[Io,Vc,Us,bb,To,Lc,ka,La,vn,_o,E1,wV]});let e=t;return e})();var Tu=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,n){let i=t?this.allAsyncListeners:this.allSyncListeners,s=i.get(e);return!s&&n&&(s=new Set,i.set(e,s)),s}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,n=!1){this.getListeners(e,n,!0).add(t)}removeEventListener(e,t,n=!1){let i=this.getListeners(e,n,!1);i&&(i.delete(t),i.size===0&&(n?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){let t=e;this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){let n=e.type;if(t&&"event"in e){let a=e.event;a instanceof Event&&(e.eventPath=a.composedPath())}let i=(a,l)=>a.forEach(c=>{if(!l.has(c))return;let u=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>c(e)):()=>c(e);t?this.dispatchAsync(u):u()}),s=this.getListeners(n,t,!1)??new Set,r=new Set(s);r.size>0&&i(r,s),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(a=>{let l=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>a(n,e)):()=>a(n,e);t?this.dispatchAsync(l):l()})}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){let t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;let e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}};function xe(e){if(!(!e||!e.length))return e[e.length-1]}function gl(e,t,n){return e==null&&t==null?!0:e!=null&&t!=null&&e.length===t.length&&e.every((i,s)=>n?n(i,t[s]):t[s]===i)}function dX(e){return e.sort((t,n)=>t-n)}function QV(e,t){let n=e.indexOf(t);n>=0&&(e[n]=e[e.length-1],e.pop())}function Qn(e,t){let n=e.indexOf(t);n>=0&&e.splice(n,1)}function hX(e,t){for(let n=0;n<t.length;n++)QV(e,t[n])}function fX(e,t){for(let n=0;n<t.length;n++)Qn(e,t[n])}function pC(e,t,n){e.splice(n,0,t)}function YV(e,t,n){fX(e,t),t.slice().reverse().forEach(i=>pC(e,i,n))}function ul(e,t){return e.indexOf(t)>-1}function pX(e){return[].concat.apply([],e)}function bV(e,t){t==null||e==null||t.forEach(n=>e.push(n))}var JV="__ag_Grid_Stop_Propagation",gX=["touchstart","touchend","touchmove","touchcancel","scroll"],TD={};function bu(e){e[JV]=!0}function Uo(e){return e[JV]===!0}var XV=(()=>{let e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return n=>{if(typeof TD[n]=="boolean")return TD[n];let i=document.createElement(e[n]||"div");return n="on"+n,TD[n]=n in i}})();function WD(e,t,n){let i=t;for(;i;){let s=e.getDomData(i,n);if(s)return s;i=i.parentElement}return null}function mX(e,t){return!t||!e?!1:CX(t).indexOf(e)>=0}function vX(e){let t=[],n=e.target;for(;n;)t.push(n),n=n.parentElement;return t}function CX(e){let t=e;return t.path?t.path:t.composedPath?t.composedPath():vX(t)}function yX(e,t,n,i){let r=ul(gX,n)?{passive:!0}:void 0;e&&e.addEventListener&&e.addEventListener(t,n,i,r)}var k=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.gridId=e.context.getGridId(),this.frameworkOverrides=e.frameworkOverrides,this.stubContext=e.context,this.eventService=e.eventService,this.gos=e.gos,this.localeService=e.localeService}getFrameworkOverrides(){return this.frameworkOverrides}destroy(){for(let e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t){this.localEventService||(this.localEventService=new Tu),this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService&&this.localEventService.removeEventListener(e,t)}dispatchLocalEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventService,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){let n=[];for(let i in t){let s=t[i];s&&n.push(this._setupListener(e,i,s))}return n}_setupListener(e,t,n){if(this.destroyed)return()=>null;e instanceof HTMLElement?yX(this.getFrameworkOverrides(),e,t,n):e.addEventListener(t,n);let i=()=>(e.removeEventListener(t,n),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(s=>s!==i),null)}setupGridOptionListener(e,t){this.gos.addPropertyEventListener(e,t);let n=()=>(this.gos.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter(i=>i!==n),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;let n=e.join("-")+this.propertyListenerId++,i=s=>{if(s.changeSet){if(s.changeSet&&s.changeSet.id===this.lastChangeSetIdLookup[n])return;this.lastChangeSetIdLookup[n]=s.changeSet.id}let r={type:"gridPropertyChanged",changeSet:s.changeSet,source:s.source};t(r)};e.forEach(s=>this.setupGridOptionListener(s,i))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,t){let n=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),n}createBean(e,t,n){return(t||this.stubContext).createBean(e,n)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}},oR=class{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=n=>{this.frameworkOverrides.wrapOutgoing(()=>e(n))},this.wrappedListeners.set(e,t)),t}wrapGlobal(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=(n,i)=>{this.frameworkOverrides.wrapOutgoing(()=>e(n,i))},this.wrappedGlobalListeners.set(e,t)),t}unwrap(e){return this.wrappedListeners.get(e)??e}unwrapGlobal(e){return this.wrappedGlobalListeners.get(e)??e}};function dl(e){return e==null||e===""?null:e}function j(e,t=!1){return e!=null&&(e!==""||t)}function Ie(e){return!j(e)}function dn(e){return e==null||e.length===0}function jD(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function hl(e){if(e===void 0)return;if(e===null||e==="")return null;if(typeof e=="number")return isNaN(e)?void 0:e;let t=parseInt(e,10);return isNaN(t)?void 0:t}function zD(e){if(e!==void 0)return e===null||e===""?!1:$D(e)}function $D(e){return typeof e=="boolean"?e:typeof e=="string"?e.toUpperCase()==="TRUE"||e=="":!1}function gC(e,t){let n=e?JSON.stringify(e):null,i=t?JSON.stringify(t):null;return n===i}function wX(e,t,n=!1){let i=e==null,s=t==null;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),i&&s)return 0;if(i)return-1;if(s)return 1;function r(o,a){return o>a?1:o<a?-1:0}if(typeof e!="string"||!n)return r(e,t);try{return e.localeCompare(t)}catch{return r(e,t)}}function uC(e){if(e instanceof Set||e instanceof Map){let t=[];return e.forEach(n=>t.push(n)),t}return Object.values(e)}var aR=new Set(["__proto__","constructor","prototype"]);function ji(e,t){if(e!=null){if(Array.isArray(e)){for(let n=0;n<e.length;n++)t(n.toString(),e[n]);return}for(let[n,i]of Object.entries(e))t(n,i)}}function ZV(e){let t={},n=Object.keys(e);for(let i=0;i<n.length;i++){if(aR.has(n[i]))continue;let s=n[i],r=e[s];t[s]=r}return t}function qD(e,t){if(!e)return;let n=e,i={};return Object.keys(n).forEach(s=>{if(t&&t.indexOf(s)>=0||aR.has(s))return;let r=n[s];KD(r)&&r.constructor===Object?i[s]=qD(r):i[s]=r}),i}function jo(e){if(!e)return[];let t=Object;if(typeof t.values=="function")return t.values(e);let n=[];for(let i in e)e.hasOwnProperty(i)&&e.propertyIsEnumerable(i)&&n.push(e[i]);return n}function zi(e,t,n=!0,i=!1){j(t)&&ji(t,(s,r)=>{if(aR.has(s))return;let o=e[s];o!==r&&(i&&o==null&&r!=null&&typeof r=="object"&&r.constructor===Object&&(o={},e[s]=o),KD(r)&&KD(o)&&!Array.isArray(o)?zi(o,r,n,i):(n||r!==void 0)&&(e[s]=r))})}function af(e,t,n){if(!t||!e)return;if(!n)return e[t];let i=t.split("."),s=e;for(let r=0;r<i.length;r++){if(s==null)return;s=s[i[r]]}return s}function KD(e){return typeof e=="object"&&e!==null}var SX={resizable:!0,sortable:!0},_X=0;function eB(){return _X++}function zo(e){return e instanceof nB}var tB=20,nB=class extends k{constructor(e,t,n,i){super(),this.isColumn=!0,this.instanceId=eB(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.columnEventService=new Tu,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=t,this.colId=n,this.primary=i,this.setState(e)}wireBeans(e){this.columnHoverService=e.columnHoverService}getInstanceId(){return this.instanceId}setState(e){e.sort!==void 0?(e.sort==="asc"||e.sort==="desc")&&(this.sort=e.sort):(e.initialSort==="asc"||e.initialSort==="desc")&&(this.sort=e.initialSort);let t=e.sortIndex,n=e.initialSortIndex;t!==void 0?t!==null&&(this.sortIndex=t):n!==null&&(this.sortIndex=n);let i=e.hide,s=e.initialHide;i!==void 0?this.visible=!i:this.visible=!s,e.pinned!==void 0?this.setPinned(e.pinned):this.setPinned(e.initialPinned);let r=e.flex,o=e.initialFlex;r!==void 0?this.flex=r:o!==void 0&&(this.flex=o)}setColDef(e,t,n){this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.columnEventService.dispatchEvent(this.createColumnEvent("colDefChanged",n))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}postConstruct(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){let e=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=j(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=j(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){let e=this.colDef;this.minWidth=e.minWidth??tB,this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=j(this.colDef.tooltipField)||j(this.colDef.tooltipValueGetter)||j(this.colDef.tooltipComponent)}resetActualWidth(e){let t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t,n=hl(e.width),i=hl(e.initialWidth);return n!=null?t=n:i!=null?t=i:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(Ie(this.colDef)||Ie(this.colDef.showRowGroup))return!1;let t=this.colDef.showRowGroup===!0,n=this.colDef.showRowGroup===e;return t||n}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}addEventListener(e,t){this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.columnEventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new oR(this.frameworkOverrides));let n=this.frameworkEventListenerService?.wrap(t)??t;this.columnEventService.addEventListener(e,n)}removeEventListener(e,t){let n=this.frameworkEventListenerService?.unwrap(t)??t;this.columnEventService.removeEventListener(e,n)}createColumnFunctionCallbackParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){let t=this.createColumnFunctionCallbackParams(e),n=this.colDef.suppressNavigable;return n(t)}return!1}isCellEditable(e){return e.group&&!this.gos.get("enableGroupEdit")?!1:this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??SX[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){let n=this.createColumnFunctionCallbackParams(e);return t(n)}return!1}setMoving(e,t){this.moving=e,this.columnEventService.dispatchEvent(this.createColumnEvent("movingChanged",t))}createColumnEvent(e,t){return this.gos.addGridCommonParams({type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,t){this.sort!==e&&(this.sort=e,this.columnEventService.dispatchEvent(this.createColumnEvent("sortChanged",t))),this.dispatchStateUpdatedEvent("sort")}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return Ie(this.sort)}isSorting(){return j(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setMenuVisible(e,t){this.menuVisible!==e&&(this.menuVisible=e,this.columnEventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",t)))}isMenuVisible(){return this.menuVisible}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.columnEventService.dispatchEvent(this.createColumnEvent("leftChanged",t)))}isFilterActive(){return this.filterActive}setFilterActive(e,t,n){this.filterActive!==e&&(this.filterActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",t)));let i=this.createColumnEvent("filterChanged",t);n&&zi(i,n),this.columnEventService.dispatchEvent(i)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){e===!0||e==="left"?this.pinned="left":e==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",t)))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",t)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){let n=e===!0;this.visible!==n&&(this.visible=n,this.columnEventService.dispatchEvent(this.createColumnEvent("visibleChanged",t))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){let e=this.getColDef();return!e.suppressSpanHeaderHeight&&!e.autoHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};let t=e.getPaddingLevel()+1,n=!0;for(;e;){if(!e.isPadding()){n=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:n}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){let t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(Ie(this.colDef.colSpan))return 1;let t=this.createBaseColDefParams(e),n=this.colDef.colSpan(t);return Math.max(n,1)}getRowSpan(e){if(Ie(this.colDef.rowSpan))return 1;let t=this.createBaseColDefParams(e),n=this.colDef.rowSpan(t);return Math.max(n,1)}setActualWidth(e,t,n=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),n||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.columnEventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,t){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",t))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,t){this.pivotActive!==e&&(this.pivotActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",t))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,t){this.aggregationActive!==e&&(this.aggregationActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnValueChanged",t)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchStateUpdatedEvent(e){this.columnEventService.dispatchEvent({type:"columnStateUpdated",key:e})}};function qn(e){return e instanceof dC}var dC=class extends k{constructor(e,t,n,i){super(),this.isColumn=!1,this.expandable=!1,this.instanceId=eB(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=t,this.expanded=!!e&&!!e.openByDefault,this.padding=n,this.level=i}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(t=>{zo(t)?e.push(t):qn(t)&&t.addLeafColumns(e)})}getColumnGroupShow(){let e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();let e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,n=!1,i=this.findChildrenRemovingPadding();for(let r=0,o=i.length;r<o;r++){let a=i[r];if(!a.isVisible())continue;let l=a.getColumnGroupShow();l==="open"?(e=!0,n=!0):l==="closed"?(t=!0,n=!0):(e=!0,t=!0)}let s=e&&t&&n;this.expandable!==s&&(this.expandable=s,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){let e=[],t=n=>{n.forEach(i=>{qn(i)&&i.isPadding()?t(i.children):e.push(i)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},bX={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},EV={};function lR(e,t){EV[t]||(e(),EV[t]=!0)}function $i(e,...t){console.log("AG Grid: "+e,...t)}function G(e,...t){lR(()=>console.warn("AG Grid: "+e,...t),e+t?.join(""))}function ke(e,...t){lR(()=>console.error("AG Grid: "+e,...t),e+t?.join(""))}function cR(e){return!!(e&&e.constructor&&e.call&&e.apply)}function EX(e){DX(e,400)}var ID=[],AD=!1;function DV(e){ID.push(e),!AD&&(AD=!0,window.setTimeout(()=>{let t=ID.slice();ID.length=0,AD=!1,t.forEach(n=>n())},0))}function DX(e,t=0){e.length>0&&window.setTimeout(()=>e.forEach(n=>n()),t)}function Yn(e,t){let n;return function(...i){let s=this;window.clearTimeout(n),n=window.setTimeout(function(){e.apply(s,i)},t)}}function RV(e,t){let n=0;return function(...i){let s=this,r=new Date().getTime();r-n<t||(n=r,e.apply(s,i))}}function RX(e,t,n=100,i){let s=new Date().getTime(),r=null,o=!1,a=()=>{let l=new Date().getTime()-s>n;(e()||l)&&(t(),o=!0,r!=null&&(window.clearInterval(r),r=null),l&&i&&G(i))};a(),o||(r=window.setInterval(a,10))}function TX(...e){return t=>e.reduce((n,i)=>i(n),t)}var IX=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=jD(e);let n=0;for(;;){let i;if(e?(i=e,n!==0&&(i+="_"+n)):t?(i=t,n!==0&&(i+="_"+n)):i=n,!this.existingKeys[i])return this.existingKeys[i]=!0,String(i);n++}}},mf="ag-Grid-AutoColumn";function uR(e){let t=[],n=i=>{for(let s=0;s<i.length;s++){let r=i[s];zo(r)?t.push(r):qn(r)&&n(r.getChildren())}};return n(e),t}function Vr(e){return e.reduce((t,n)=>t+n.getActualWidth(),0)}function yu(e,t,n){let i={};if(!t)return;Hr(null,t,r=>{i[r.getInstanceId()]=r}),n&&Hr(null,n,r=>{i[r.getInstanceId()]=null});let s=Object.values(i).filter(r=>r!=null);e.destroyBeans(s)}function TV(e){return e.getId().startsWith(mf)}function hC(e){let t=[];return e instanceof Array?e.some(i=>typeof i!="string")?G("if colDef.type is supplied an array it should be of type 'string[]'"):t=e:typeof e=="string"?t=e.split(","):G("colDef.type should be of type 'string' | 'string[]'"),t}var AX=class extends k{constructor(){super(...arguments),this.beanName="columnFactory"}wireBeans(e){this.dataTypeService=e.dataTypeService}createColumnTree(e,t,n,i){let s=new IX,{existingCols:r,existingGroups:o,existingColKeys:a}=this.extractExistingTreeData(n);s.addExistingKeys(a);let l=this.recursivelyCreateColumns(e,0,t,r,s,o,i),c=this.findMaxDept(l,0),u=this.balanceColumnTree(l,0,c,s);return Hr(null,u,(f,g)=>{qn(f)&&f.setupExpandable(),f.setOriginalParent(g)}),{columnTree:u,treeDept:c}}extractExistingTreeData(e){let t=[],n=[],i=[];return e&&Hr(null,e,s=>{if(qn(s)){let r=s;n.push(r)}else{let r=s;i.push(r.getId()),t.push(r)}}),{existingCols:t,existingGroups:n,existingColKeys:i}}createForAutoGroups(e,t){let n=[],i=this.findDepth(t);return e.forEach(s=>{let r=s;for(let o=i-1;o>=0;o--){let a=new dC(null,`FAKE_PATH_${s.getId()}}_${o}`,!0,o);this.createBean(a),a.setChildren([r]),r.setOriginalParent(a),r=a}i===0&&s.setOriginalParent(null),n.push(r)}),[n,i]}findDepth(e){let t=0,n=e;for(;n&&n[0]&&qn(n[0]);)t++,n=n[0].getChildren();return t}balanceColumnTree(e,t,n,i){let s=[];for(let r=0;r<e.length;r++){let o=e[r];if(qn(o)){let a=o,l=this.balanceColumnTree(a.getChildren(),t+1,n,i);a.setChildren(l),s.push(a)}else{let a,l;for(let c=n-1;c>=t;c--){let u=i.getUniqueKey(null,null),h=this.createMergedColGroupDef(null),f=new dC(h,u,!0,t);this.createBean(f),l&&l.setChildren([f]),l=f,a||(a=l)}if(a&&l)if(s.push(a),e.some(u=>qn(u))){l.setChildren([o]);continue}else{l.setChildren(e);break}s.push(o)}}return s}findMaxDept(e,t){let n=t;for(let i=0;i<e.length;i++){let s=e[i];if(qn(s)){let r=s,o=this.findMaxDept(r.getChildren(),t+1);n<o&&(n=o)}}return n}recursivelyCreateColumns(e,t,n,i,s,r,o){if(!e)return[];let a=new Array(e.length);for(let l=0;l<a.length;l++){let c=e[l];this.isColumnGroup(c)?a[l]=this.createColumnGroup(n,c,t,i,s,r,o):a[l]=this.createColumn(n,c,i,s,o)}return a}createColumnGroup(e,t,n,i,s,r,o){let a=this.createMergedColGroupDef(t),l=s.getUniqueKey(a.groupId||null,null),c=new dC(a,l,!1,n);this.createBean(c);let u=this.findExistingGroup(t,r);u&&r.splice(u.idx,1);let h=u?.group;h&&c.setExpanded(h.isExpanded());let f=this.recursivelyCreateColumns(a.children,n+1,e,i,s,r,o);return c.setChildren(f),c}createMergedColGroupDef(e){let t={};return Object.assign(t,this.gos.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,n,i,s){let r=this.findExistingColumn(t,n);r&&n?.splice(r.idx,1);let o=r?.column;if(o){let a=this.addColumnDefaultAndTypes(t,o.getColId());o.setColDef(a,t,s),this.applyColumnState(o,a,s)}else{let a=i.getUniqueKey(t.colId,t.field),l=this.addColumnDefaultAndTypes(t,a);o=new nB(l,t,a,e),this.createBean(o)}return this.dataTypeService?.addColumnListeners(o),o}applyColumnState(e,t,n){let i=hl(t.flex);if(i!==void 0&&e.setFlex(i),e.getFlex()<=0){let a=hl(t.width);if(a!=null)e.setActualWidth(a,n);else{let l=e.getActualWidth();e.setActualWidth(l,n)}}t.sort!==void 0&&(t.sort=="asc"||t.sort=="desc"?e.setSort(t.sort,n):e.setSort(void 0,n));let r=hl(t.sortIndex);r!==void 0&&e.setSortIndex(r);let o=zD(t.hide);o!==void 0&&e.setVisible(!o,n),t.pinned!==void 0&&e.setPinned(t.pinned)}findExistingColumn(e,t){if(t)for(let n=0;n<t.length;n++){let i=t[n].getUserProvidedColDef();if(!i)continue;if(e.colId!=null){if(t[n].getId()===e.colId)return{idx:n,column:t[n]};continue}if(e.field!=null){if(i.field===e.field)return{idx:n,column:t[n]};continue}if(i===e)return{idx:n,column:t[n]}}}findExistingGroup(e,t){if(e.groupId!=null)for(let i=0;i<t.length;i++){let s=t[i];if(s.getColGroupDef()&&s.getId()===e.groupId)return{idx:i,group:s}}}addColumnDefaultAndTypes(e,t){let n={},i=this.gos.get("defaultColDef");zi(n,i,!1,!0);let s=this.updateColDefAndGetColumnType(n,e,t);s&&this.assignColumnTypes(s,n),zi(n,e,!1,!0);let r=this.gos.get("autoGroupColumnDef"),o=this.gos.isColumnsSortingCoupledToGroup();return e.rowGroup&&r&&o&&zi(n,{sort:r.sort,initialSort:r.initialSort},!1,!0),this.dataTypeService?.validateColDef(n),n}updateColDefAndGetColumnType(e,t,n){let i=this.dataTypeService?.updateColDefAndGetColumnType(e,t,n),s=t.type??i??e.type;return e.type=s,s?hC(s):void 0}assignColumnTypes(e,t){if(!e.length)return;let n=Object.assign({},bX),i=this.gos.get("columnTypes")||{};ji(i,(s,r)=>{s in n?G(`the column type '${s}' is a default column type and cannot be overridden.`):(r.type&&G("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),n[s]=r)}),e.forEach(s=>{let r=n[s.trim()];r?zi(t,r,!1,!0):G("colDef.type '"+s+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(e){return e.children!==void 0}};function Hr(e,t,n){if(t)for(let i=0;i<t.length;i++){let s=t[i];qn(s)&&Hr(s,s.getChildren(),n),n(s,e)}}var MX=class extends k{constructor(){super(...arguments),this.beanName="columnModel",this.pivotMode=!1,this.autoHeightActiveAtLeastOnce=!1,this.ready=!1,this.changeEventsDispatching=!1,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}wireBeans(e){this.context=e.context,this.columnFactory=e.columnFactory,this.columnSizeService=e.columnSizeService,this.visibleColsService=e.visibleColsService,this.columnViewportService=e.columnViewportService,this.pivotResultColsService=e.pivotResultColsService,this.columnAnimationService=e.columnAnimationService,this.autoColService=e.autoColService,this.valueCache=e.valueCache,this.columnDefFactory=e.columnDefFactory,this.columnApplyStateService=e.columnApplyStateService,this.columnGroupStateService=e.columnGroupStateService,this.eventDispatcher=e.columnEventDispatcher,this.columnMoveService=e.columnMoveService,this.columnAutosizeService=e.columnAutosizeService,this.funcColsService=e.funcColsService,this.quickFilterService=e.quickFilterService,this.showRowGroupColsService=e.showRowGroupColsService,this.environment=e.environment}postConstruct(){let e=this.gos.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],t=>this.refreshAll(wu(t.source))),this.addManagedPropertyListener("autoGroupColumnDef",t=>this.onAutoGroupColumnDefChanged(wu(t.source))),this.addManagedPropertyListeners(["defaultColDef","columnTypes","suppressFieldDotNotation"],t=>this.recreateColumnDefs(wu(t.source))),this.addManagedPropertyListener("pivotMode",t=>this.setPivotMode(this.gos.get("pivotMode"),wu(t.source))),this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}createColsFromColDefs(e,t){let n=e?this.columnApplyStateService.compareColumnStatesAndDispatchEvents(t):void 0;this.valueCache.expire();let i=this.colDefCols&&this.colDefCols.list,s=this.colDefCols&&this.colDefCols.tree,r=this.columnFactory.createColumnTree(this.colDefs,!0,s,t);yu(this.context,this.colDefCols?.tree,r.columnTree);let o=r.columnTree,a=r.treeDept,l=uR(o),c={};l.forEach(h=>c[h.getId()]=h),this.colDefCols={tree:o,treeDepth:a,list:l,map:c},this.funcColsService.extractCols(t,i),this.ready=!0,this.refreshCols(),e&&!this.showingPivotResult&&!this.gos.get("maintainColumnOrder")&&this.orderColsLikeColDefCols(),this.visibleColsService.refresh(t),this.columnViewportService.checkViewportColumns(),this.eventDispatcher.everythingChanged(t),n&&(this.changeEventsDispatching=!0,n(),this.changeEventsDispatching=!1),this.eventDispatcher.newColumnsLoaded(t),t==="gridInitializing"&&this.columnSizeService.applyAutosizeStrategy()}refreshCols(){if(!this.colDefCols)return;let e=this.cols?.tree;this.saveColOrder(),this.selectCols(),this.createAutoCols(),this.addAutoCols(),this.restoreColOrder(),this.positionLockedCols(),this.showRowGroupColsService?.refresh(),this.quickFilterService?.refreshQuickFilterCols(),this.setColSpanActive(),this.setAutoHeightActive(),this.visibleColsService.clear(),this.columnViewportService.clear(),!gl(e,this.cols.tree)&&this.eventDispatcher.gridColumns()}selectCols(){let e=this.pivotResultColsService.getPivotResultCols();if(this.showingPivotResult=e!=null,e){let{map:t,list:n,tree:i,treeDepth:s}=e;this.cols={list:n.slice(),map:B({},t),tree:i.slice(),treeDepth:s},e.list.some(o=>this.cols?.map[o.getColId()]!==void 0)||(this.lastPivotOrder=null)}else{let{map:t,list:n,tree:i,treeDepth:s}=this.colDefCols;this.cols={list:n.slice(),map:B({},t),tree:i.slice(),treeDepth:s}}}getColsToShow(){let e=this.isPivotMode()&&!this.isShowingPivotResult(),t=this.funcColsService.getValueColumns();return this.cols.list.filter(i=>{let s=TV(i);if(e){let r=t&&ul(t,i);return s||r}else return s||i.isVisible()})}addAutoCols(){this.autoCols!=null&&(this.cols.list=this.autoCols.list.concat(this.cols.list),this.cols.tree=this.autoCols.tree.concat(this.cols.tree),PX(this.cols))}createAutoCols(){let e=this.gos.isGroupUseEntireRow(this.pivotMode),t=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),n=this.funcColsService.getRowGroupColumns(),s=!(n.length>0||this.gos.get("treeData"))||t||e,r=()=>{this.autoCols&&(yu(this.context,this.autoCols.tree),this.autoCols=null)};if(s||!this.autoColService){r();return}let o=this.autoColService.createAutoCols(n)??[],a=FX(o,this.autoCols?.list||null),l=this.cols.treeDepth,u=(this.autoCols?this.autoCols.treeDepth:-1)==l;if(a&&u)return;r();let[h,f]=this.columnFactory.createForAutoGroups(o,this.cols?.tree);this.autoCols={list:o,tree:h,treeDepth:f,map:{}};let g=v=>{if(!v)return null;let y=v.filter(C=>!TV(C));return[...o,...y]};this.lastOrder=g(this.lastOrder),this.lastPivotOrder=g(this.lastPivotOrder)}refreshAll(e){this.isReady()&&(this.refreshCols(),this.visibleColsService.refresh(e))}setColsVisible(e,t=!1,n){this.columnApplyStateService.applyColumnState({state:e.map(i=>({colId:typeof i=="string"?i:i.getColId(),hide:!t}))},n)}setColsPinned(e,t,n){if(!this.cols||dn(e))return;if(this.gos.isDomLayout("print")){G("Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let i;t===!0||t==="left"?i="left":t==="right"?i="right":i=null;let s=[];e.forEach(r=>{if(!r)return;let o=this.getCol(r);o&&o.getPinned()!==i&&(o.setPinned(i),s.push(o))}),s.length&&(this.visibleColsService.refresh(n),this.eventDispatcher.columnPinned(s,n)),this.columnAnimationService.finish()}setColumnGroupOpened(e,t,n){let i;qn(e)?i=e.getId():i=e||"",this.columnGroupStateService.setColumnGroupState([{groupId:i,open:t}],n)}getProvidedColGroup(e){let t=null;return Hr(null,this.cols?.tree,n=>{qn(n)&&n.getId()===e&&(t=n)}),t}isColGroupLocked(e){let t=this.gos.get("groupLockGroupColumns");if(!e.isRowGroupActive()||t===0)return!1;if(t===-1)return!0;let i=this.funcColsService.getRowGroupColumns().findIndex(s=>s.getColId()===e.getColId());return t>i}isSuppressAutoCol(){return this.gos.get("groupDisplayType")==="custom"?!0:this.gos.get("treeDataDisplayType")==="custom"}setAutoHeightActive(){this.autoHeightActive=this.cols.list.some(e=>e.isAutoHeight()),this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,this.gos.isRowModelType("clientSide")||this.gos.isRowModelType("serverSide")||G("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}restoreColOrder(){let e=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!e)return;let t=new Map(e.map((l,c)=>[l,c]));if(!this.cols.list.some(l=>t.has(l)))return;let i=new Map(this.cols.list.map(l=>[l,!0])),s=e.filter(l=>i.has(l)),r=new Map(s.map(l=>[l,!0])),o=this.cols.list.filter(l=>!r.has(l)),a=s.slice();o.forEach(l=>{let c=l.getOriginalParent();if(!c){a.push(l);return}let u=[];for(;!u.length&&c;)c.getLeafColumns().forEach(v=>{let y=a.indexOf(v)>=0,C=u.indexOf(v)<0;y&&C&&u.push(v)}),c=c.getOriginalParent();if(!u.length){a.push(l);return}let h=u.map(g=>a.indexOf(g)),f=Math.max(...h);pC(a,l,f+1)}),this.cols.list=a}orderColsLikeColDefCols(){if(!this.colDefCols||!this.cols)return;let e=this.colDefCols.list.filter(n=>this.cols.list.indexOf(n)>=0),t=this.cols.list.filter(n=>e.indexOf(n)<0);this.cols.list=[...t,...e],this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}sortColsLikeKeys(e){if(this.cols==null)return;let t=[],n={};e.forEach(s=>{if(n[s])return;let r=this.cols.map[s];r&&(t.push(r),n[s]=!0)});let i=0;if(this.cols.list.forEach(s=>{let r=s.getColId();if(n[r]!=null)return;r.startsWith(mf)?pC(t,s,i++):t.push(s)}),t=this.columnMoveService.placeLockedColumns(t),!this.columnMoveService.doesMovePassMarryChildren(t)){G("Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.cols.list=t}sortColsLikeCols(e){!e||e.length<=1||e.filter(n=>this.cols.list.indexOf(n)<0).length>0||e.sort((n,i)=>{let s=this.cols.list.indexOf(n),r=this.cols.list.indexOf(i);return s-r})}resetColDefIntoCol(e,t){let n=e.getUserProvidedColDef();if(!n)return!1;let i=this.columnFactory.addColumnDefaultAndTypes(n,e.getColId());return e.setColDef(i,n,t),!0}queueResizeOperations(){this.shouldQueueResizeOperations=!0}isShouldQueueResizeOperations(){return this.shouldQueueResizeOperations}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}moveInCols(e,t,n){YV(this.cols?.list,e,t),this.visibleColsService.refresh(n)}positionLockedCols(){this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list:this.lastOrder=this.cols?.list}getColumnDefs(){if(!this.colDefCols)return;let e=this.colDefCols.list.slice();this.showingPivotResult?e.sort((i,s)=>this.lastOrder.indexOf(i)-this.lastOrder.indexOf(s)):this.lastOrder&&e.sort((i,s)=>this.cols.list.indexOf(i)-this.cols.list.indexOf(s));let t=this.funcColsService.getRowGroupColumns(),n=this.funcColsService.getPivotColumns();return this.columnDefFactory.buildColumnDefs(e,t,n)}isShowingPivotResult(){return this.showingPivotResult}isChangeEventsDispatching(){return this.changeEventsDispatching}isColSpanActive(){return this.colSpanActive}isProvidedColGroupsPresent(){return this.colDefCols?.treeDepth>0}setColSpanActive(){this.colSpanActive=this.cols.list.some(e=>e.getColDef().colSpan!=null)}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}getHeaderRowCount(){return this.cols?this.cols.treeDepth+1:-1}isReady(){return this.ready}isPivotMode(){return this.pivotMode}setPivotMode(e,t){e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=e,this.ready&&(this.refreshCols(),this.visibleColsService.refresh(t),this.eventDispatcher.pivotModeChanged()))}isPivotSettingAllowed(e){return e&&this.gos.get("treeData")?(G("Pivot mode not available with treeData."),!1):!0}isPivotActive(){let e=this.funcColsService.getPivotColumns();return this.pivotMode&&!dn(e)}recreateColumnDefs(e){this.cols&&(this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e),this.createColsFromColDefs(!0,e))}setColumnDefs(e,t){let n=!!this.colDefs;this.colDefs=e,this.createColsFromColDefs(n,t)}destroy(){yu(this.context,this.colDefCols?.tree),yu(this.context,this.autoCols?.tree),super.destroy()}getColTree(){return this.cols.tree}getColDefColTree(){return this.colDefCols.tree}getColDefCols(){return this.colDefCols?.list?this.colDefCols.list:null}getCols(){return this.cols?.list??[]}getAllCols(){let t=this.pivotResultColsService.getPivotResultCols()?.list;return[].concat(this.colDefCols?.list||[],this.autoCols?.list||[],t||[])}getColsForKeys(e){return e?e.map(n=>this.getCol(n)).filter(n=>n!=null):[]}getColDefCol(e){return this.colDefCols?.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColFromCollection(e,t){if(t==null)return null;let{map:n,list:i}=t;if(typeof e=="string"&&n[e])return n[e];for(let s=0;s<i.length;s++)if(IV(i[s],e))return i[s];return this.getAutoCol(e)}getAutoCol(e){return this.autoCols==null?null:this.autoCols.list.find(t=>IV(t,e))||null}getAutoCols(){return this.autoCols?.list||null}setColHeaderHeight(e,t){e.setAutoHeaderHeight(t)&&this.eventDispatcher.headerHeight(e)}getColumnGroupHeaderRowHeight(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()}getColumnHeaderRowHeight(){let e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),n=this.visibleColsService.getAllCols().filter(i=>i.isAutoHeaderHeight()).map(i=>i.getAutoHeaderHeight()||0);return Math.max(e,...n)}getHeaderHeight(){return this.gos.get("headerHeight")??this.environment.getDefaultHeaderHeight()}getFloatingFiltersHeight(){return this.gos.get("floatingFiltersHeight")??this.getHeaderHeight()}getGroupHeaderHeight(){return this.gos.get("groupHeaderHeight")??this.getHeaderHeight()}getPivotHeaderHeight(){return this.gos.get("pivotHeaderHeight")??this.getHeaderHeight()}getPivotGroupHeaderHeight(){return this.gos.get("pivotGroupHeaderHeight")??this.getGroupHeaderHeight()}onFirstDataRendered(){let e=this.gos.get("autoSizeStrategy");if(e?.type!=="fitCellContents")return;let{colIds:t,skipHeader:n}=e;setTimeout(()=>{t?this.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:n,source:"autosizeColumns"}):this.columnAutosizeService.autoSizeAllColumns("autosizeColumns",n)})}onAutoGroupColumnDefChanged(e){this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e)}};function wu(e){return e==="gridOptionsUpdated"?"gridOptionsChanged":e}function PX(e){e.map={},e.list.forEach(t=>e.map[t.getId()]=t)}function IV(e,t){let n=e===t,i=e.getColDef()===t,s=e.getColId()==t;return n||i||s}function FX(e,t){return gl(e,t,(n,i)=>n.getColId()===i.getColId())}var xX=class extends k{constructor(){super(...arguments),this.beanName="columnAutosizeService",this.timesDelayed=0}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.animationFrameService=e.animationFrameService,this.autoWidthCalculator=e.autoWidthCalculator,this.eventDispatcher=e.columnEventDispatcher,this.ctrlsService=e.ctrlsService,this.renderStatusService=e.renderStatusService}autoSizeCols(e){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeCols(e));return}let{colKeys:t,skipHeader:n,skipHeaderGroups:i,stopAtGroup:s,source:r="api"}=e;if(this.animationFrameService.flushAllFrames(),this.timesDelayed<5&&this.renderStatusService&&!this.renderStatusService.areHeaderCellsRendered()){this.timesDelayed++,setTimeout(()=>this.autoSizeCols(e));return}this.timesDelayed=0;let o=[],a=-1,l=n??this.gos.get("skipHeaderOnAutoSize"),c=i??l;for(;a!==0;){a=0;let u=[];t.forEach(h=>{if(!h)return;let f=this.columnModel.getCol(h);if(!f||o.indexOf(f)>=0)return;let g=this.autoWidthCalculator.getPreferredWidthForColumn(f,l);if(g>0){let v=this.normaliseColumnWidth(f,g);f.setActualWidth(v,r),o.push(f),a++}u.push(f)}),u.length&&this.visibleColsService.refresh(r)}c||this.autoSizeColumnGroupsByColumns(t,r,s),this.eventDispatcher.columnResized(o,!0,"autosizeColumns")}autoSizeColumn(e,t,n){e&&this.autoSizeCols({colKeys:[e],skipHeader:n,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,n){let i=new Set;this.columnModel.getColsForKeys(e).forEach(a=>{let l=a.getParent();for(;l&&l!=n;)l.isPadding()||i.add(l),l=l.getParent()});let r,o=[];for(let a of i){for(let l of this.ctrlsService.getHeaderRowContainerCtrls())if(r=l.getHeaderCtrlForColumn(a),r)break;r&&r.resizeLeafColumnsToFit(t)}return o}autoSizeAllColumns(e,t){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeAllColumns(e,t));return}let n=this.visibleColsService.getAllCols();this.autoSizeCols({colKeys:n,skipHeader:t,source:e})}normaliseColumnWidth(e,t){let n=e.getMinWidth();t<n&&(t=n);let i=e.getMaxWidth();return e.isGreaterThanMax(t)&&(t=i),t}},OX=class extends k{constructor(){super(...arguments),this.beanName="funcColsService",this.rowGroupCols=[],this.valueCols=[],this.pivotCols=[]}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.aggFuncService=e.aggFuncService,this.visibleColsService=e.visibleColsService}getModifyColumnsNoEventsCallbacks(){return{addGroupCol:e=>this.rowGroupCols.push(e),removeGroupCol:e=>Qn(this.rowGroupCols,e),addPivotCol:e=>this.pivotCols.push(e),removePivotCol:e=>Qn(this.pivotCols,e),addValueCol:e=>this.valueCols.push(e),removeValueCol:e=>Qn(this.valueCols,e)}}getSourceColumnsForGroupColumn(e){let t=e.getColDef().showRowGroup;if(!t)return null;if(t===!0)return this.rowGroupCols.slice(0);let n=this.columnModel.getColDefCol(t);return n?[n]:null}sortRowGroupColumns(e){this.rowGroupCols.sort(e)}sortPivotColumns(e){this.pivotCols.sort(e)}getValueColumns(){return this.valueCols?this.valueCols:[]}getPivotColumns(){return this.pivotCols?this.pivotCols:[]}getRowGroupColumns(){return this.rowGroupCols?this.rowGroupCols:[]}isRowGroupEmpty(){return dn(this.rowGroupCols)}setColumnAggFunc(e,t,n){if(!e)return;let i=this.columnModel.getColDefCol(e);i&&(i.setAggFunc(t),this.eventDispatcher.columnChanged("columnValueChanged",[i],n))}setRowGroupColumns(e,t){this.setColList(e,this.rowGroupCols,"columnRowGroupChanged",!0,!0,(n,i)=>this.setRowGroupActive(n,i,t),t)}setRowGroupActive(e,t,n){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,n),e&&!this.gos.get("suppressRowGroupHidesColumns")&&this.columnModel.setColsVisible([t],!1,n),!e&&!this.gos.get("suppressMakeColumnVisibleAfterUnGroup")&&this.columnModel.setColsVisible([t],!0,n))}addRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!0,!0,n=>this.setRowGroupActive(!0,n,t),"columnRowGroupChanged",t)}removeRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!1,!0,n=>this.setRowGroupActive(!1,n,t),"columnRowGroupChanged",t)}addPivotColumns(e,t){this.updateColList(e,this.pivotCols,!0,!1,n=>n.setPivotActive(!0,t),"columnPivotChanged",t)}setPivotColumns(e,t){this.setColList(e,this.pivotCols,"columnPivotChanged",!0,!1,(n,i)=>{i.setPivotActive(n,t)},t)}removePivotColumns(e,t){this.updateColList(e,this.pivotCols,!1,!1,n=>n.setPivotActive(!1,t),"columnPivotChanged",t)}setValueColumns(e,t){this.setColList(e,this.valueCols,"columnValueChanged",!1,!1,(n,i)=>this.setValueActive(n,i,t),t)}setValueActive(e,t,n){if(e!==t.isValueActive()&&(t.setValueActive(e,n),e&&!t.getAggFunc()&&this.aggFuncService)){let i=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(i)}}addValueColumns(e,t){this.updateColList(e,this.valueCols,!0,!1,n=>this.setValueActive(!0,n,t),"columnValueChanged",t)}removeValueColumns(e,t){this.updateColList(e,this.valueCols,!1,!1,n=>this.setValueActive(!1,n,t),"columnValueChanged",t)}moveRowGroupColumn(e,t,n){if(this.isRowGroupEmpty())return;let i=this.rowGroupCols[e],s=this.rowGroupCols.slice(e,t);this.rowGroupCols.splice(e,1),this.rowGroupCols.splice(t,0,i),this.eventDispatcher.rowGroupChanged(s,n)}setColList(e,t,n,i,s,r,o){let a=this.columnModel.getCols();if(dn(a))return;let l=new Map;t.forEach((u,h)=>l.set(u,h)),t.length=0,j(e)&&e.forEach(u=>{let h=this.columnModel.getColDefCol(u);h&&t.push(h)}),t.forEach((u,h)=>{let f=l.get(u);if(f===void 0){l.set(u,0);return}i&&f!==h||l.delete(u)}),(this.columnModel.getColDefCols()||[]).forEach(u=>{let h=t.indexOf(u)>=0;r(h,u)}),s&&this.columnModel.refreshCols(),this.visibleColsService.refresh(o),this.eventDispatcher.columnChanged(n,[...l.keys()],o)}updateColList(e,t,n,i,s,r,o){if(!e||dn(e))return;let a=!1;e.forEach(l=>{if(!l)return;let c=this.columnModel.getColDefCol(l);if(c){if(n){if(t.indexOf(c)>=0)return;t.push(c)}else{if(t.indexOf(c)<0)return;Qn(t,c)}s(c),a=!0}}),a&&(i&&this.columnModel.refreshCols(),this.visibleColsService.refresh(o),this.eventDispatcher.genericColumnEvent(r,t,o))}extractCols(e,t){this.extractRowGroupCols(e,t),this.extractPivotCols(e,t),this.extractValueCols(e,t)}extractValueCols(e,t){this.valueCols=this.extractColsCommon(t,this.valueCols,(n,i)=>n.setValueActive(i,e),()=>{},()=>{},n=>{let i=n.aggFunc;if(i===null||i==="")return null;if(i!==void 0)return!!i},n=>n.initialAggFunc!=null&&n.initialAggFunc!=""),this.valueCols.forEach(n=>{let i=n.getColDef();i.aggFunc!=null&&i.aggFunc!=""?n.setAggFunc(i.aggFunc):n.getAggFunc()||n.setAggFunc(i.initialAggFunc)})}extractRowGroupCols(e,t){this.rowGroupCols=this.extractColsCommon(t,this.rowGroupCols,(n,i)=>n.setRowGroupActive(i,e),n=>n.rowGroupIndex,n=>n.initialRowGroupIndex,n=>n.rowGroup,n=>n.initialRowGroup)}extractPivotCols(e,t){this.pivotCols=this.extractColsCommon(t,this.pivotCols,(n,i)=>n.setPivotActive(i,e),n=>n.pivotIndex,n=>n.initialPivotIndex,n=>n.pivot,n=>n.initialPivot)}extractColsCommon(e=[],t=[],n,i,s,r,o){let a=[],l=[];(this.columnModel.getColDefCols()||[]).forEach(f=>{let g=e.indexOf(f)<0,v=f.getColDef(),y=zD(r(v)),C=zD(o(v)),E=hl(i(v)),I=hl(s(v)),T;y!==void 0?T=y:E!==void 0?E===null?T=!1:T=E>=0:g?C!==void 0?T=C:I!==void 0?T=I!=null&&I>=0:T=!1:T=t.indexOf(f)>=0,T&&((g?E!=null||I!=null:E!=null)?a.push(f):l.push(f))});let u=f=>{let g=i(f.getColDef()),v=s(f.getColDef());return g??v};a.sort((f,g)=>{let v=u(f),y=u(g);return v===y?0:v<y?-1:1});let h=[].concat(a);return t.forEach(f=>{l.indexOf(f)>=0&&h.push(f)}),l.forEach(f=>{h.indexOf(f)<0&&h.push(f)}),t.forEach(f=>{h.indexOf(f)<0&&n(f,!1)}),h.forEach(f=>{t.indexOf(f)<0&&n(f,!0)}),h}generateColumnStateForRowGroupAndPivotIndexes(e,t){let n={},i=(s,r,o,a,l,c)=>{let u=this.columnModel.getColDefCols();if(!r.length||!u)return[];let h=Object.keys(s),f=new Set(h),g=new Set(h),v=new Set(r.map(V=>{let b=V.getColId();return g.delete(b),b}).concat(h)),y=[],C={},E=0;for(let V=0;V<u.length;V++){let b=u[V].getColId();v.has(b)&&(y.push(b),C[b]=E++)}let I=1e3,T=!1,x=0,z=V=>{let b=C[V];for(let S=x;S<b;S++){let _=y[S];g.has(_)&&(s[_][l]=I++,g.delete(_))}x=b};r.forEach(V=>{let b=V.getColId();if(f.has(b))z(b),s[b][l]=I++;else{let S=V.getColDef();(S[l]===null||S[l]===void 0&&S[c]==null)&&(T||(S[o]||S[o]===void 0&&S[a]?z(b):(g.forEach(A=>{s[A][l]=I+C[A]}),I+=y.length,T=!0)),n[b]||(n[b]={colId:b}),n[b][l]=I++)}})};return i(e,this.rowGroupCols,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),i(t,this.pivotCols,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(n)}},NX=class extends k{constructor(){super(...arguments),this.beanName="columnApplyStateService"}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.sortController=e.sortController,this.columnGetStateService=e.columnGetStateService,this.funcColsService=e.funcColsService,this.visibleColsService=e.visibleColsService,this.columnAnimationService=e.columnAnimationService,this.pivotResultColsService=e.pivotResultColsService}applyColumnState(e,t){let n=this.columnModel.getColDefCols()||[];if(dn(n))return!1;if(e&&e.state&&!e.state.forEach)return G("applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;let i=this.funcColsService.getModifyColumnsNoEventsCallbacks(),s=(a,l,c)=>{let u=this.compareColumnStatesAndDispatchEvents(t),h=l.slice(),f={},g={},v=[],y=[],C=0,E=this.funcColsService.getRowGroupColumns().slice(),I=this.funcColsService.getPivotColumns().slice();a.forEach(V=>{let b=V.colId||"";if(b.startsWith(mf)){v.push(V),y.push(V);return}let _=c(b);_?(this.syncColumnWithStateItem(_,V,e.defaultState,f,g,!1,t,i),Qn(h,_)):(y.push(V),C+=1)});let T=V=>this.syncColumnWithStateItem(V,null,e.defaultState,f,g,!1,t,i);h.forEach(T),this.funcColsService.sortRowGroupColumns(AV.bind(this,f,E)),this.funcColsService.sortPivotColumns(AV.bind(this,g,I)),this.columnModel.refreshCols();let z=(this.columnModel.getAutoCols()||[]).slice();return v.forEach(V=>{let b=this.columnModel.getAutoCol(V.colId);Qn(z,b),this.syncColumnWithStateItem(b,V,e.defaultState,null,null,!0,t,i)}),z.forEach(T),this.orderLiveColsLikeState(e),this.visibleColsService.refresh(t),this.eventDispatcher.everythingChanged(t),u(),{unmatchedAndAutoStates:y,unmatchedCount:C}};this.columnAnimationService.start();let{unmatchedAndAutoStates:r,unmatchedCount:o}=s(e.state||[],n,a=>this.columnModel.getColDefCol(a));if(r.length>0||j(e.defaultState)){let l=this.pivotResultColsService.getPivotResultCols()?.list;o=s(r,l||[],c=>this.pivotResultColsService.getPivotResultCol(c)).unmatchedCount}return this.columnAnimationService.finish(),o===0}resetColumnState(e){let t=this.columnModel.getColDefCols();if(dn(t))return;let n=this.columnModel.getColDefColTree(),i=uR(n),s=[],r=1e3,o=1e3,a=[],l=this.columnModel.getAutoCols();l&&(a=a.concat(l)),i&&(a=a.concat(i)),a.forEach(c=>{let u=this.getColumnStateFromColDef(c);Ie(u.rowGroupIndex)&&u.rowGroup&&(u.rowGroupIndex=r++),Ie(u.pivotIndex)&&u.pivot&&(u.pivotIndex=o++),s.push(u)}),this.applyColumnState({state:s,applyOrder:!0},e)}getColumnStateFromColDef(e){let t=(v,y)=>v??y??null,n=e.getColDef(),i=t(n.sort,n.initialSort),s=t(n.sortIndex,n.initialSortIndex),r=t(n.hide,n.initialHide),o=t(n.pinned,n.initialPinned),a=t(n.width,n.initialWidth),l=t(n.flex,n.initialFlex),c=t(n.rowGroupIndex,n.initialRowGroupIndex),u=t(n.rowGroup,n.initialRowGroup);c==null&&(u==null||u==!1)&&(c=null,u=null);let h=t(n.pivotIndex,n.initialPivotIndex),f=t(n.pivot,n.initialPivot);h==null&&(f==null||f==!1)&&(h=null,f=null);let g=t(n.aggFunc,n.initialAggFunc);return{colId:e.getColId(),sort:i,sortIndex:s,hide:r,pinned:o,width:a,flex:l,rowGroup:u,rowGroupIndex:c,pivot:f,pivotIndex:h,aggFunc:g}}syncColumnWithStateItem(e,t,n,i,s,r,o,a){if(!e)return;let l=(x,z)=>{let V={value1:void 0,value2:void 0},b=!1;return t&&(t[x]!==void 0&&(V.value1=t[x],b=!0),j(z)&&t[z]!==void 0&&(V.value2=t[z],b=!0)),!b&&n&&(n[x]!==void 0&&(V.value1=n[x]),j(z)&&n[z]!==void 0&&(V.value2=n[z])),V},c=l("hide").value1;c!==void 0&&e.setVisible(!c,o);let u=l("pinned").value1;u!==void 0&&e.setPinned(u);let h=e.getColDef().minWidth??tB,f=l("flex").value1;if(f!==void 0&&e.setFlex(f),f==null){let x=l("width").value1;x!=null&&h!=null&&x>=h&&e.setActualWidth(x,o)}let g=l("sort").value1;g!==void 0&&(g==="desc"||g==="asc"?e.setSort(g,o):e.setSort(void 0,o));let v=l("sortIndex").value1;if(v!==void 0&&e.setSortIndex(v),r||!e.isPrimary())return;let y=l("aggFunc").value1;y!==void 0&&(typeof y=="string"?(e.setAggFunc(y),e.isValueActive()||(e.setValueActive(!0,o),a.addValueCol(e))):(j(y)&&G("stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,o),a.removeValueCol(e))));let{value1:C,value2:E}=l("rowGroup","rowGroupIndex");(C!==void 0||E!==void 0)&&(typeof E=="number"||C?(e.isRowGroupActive()||(e.setRowGroupActive(!0,o),a.addGroupCol(e)),i&&typeof E=="number"&&(i[e.getId()]=E)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,o),a.removeGroupCol(e)));let{value1:I,value2:T}=l("pivot","pivotIndex");(I!==void 0||T!==void 0)&&(typeof T=="number"||I?(e.isPivotActive()||(e.setPivotActive(!0,o),a.addPivotCol(e)),s&&typeof T=="number"&&(s[e.getId()]=T)):e.isPivotActive()&&(e.setPivotActive(!1,o),a.removePivotCol(e)))}orderLiveColsLikeState(e){if(!e.applyOrder||!e.state)return;let t=[];e.state.forEach(n=>{n.colId!=null&&t.push(n.colId)}),this.columnModel.sortColsLikeKeys(t)}compareColumnStatesAndDispatchEvents(e){let t={rowGroupColumns:this.funcColsService.getRowGroupColumns().slice(),pivotColumns:this.funcColsService.getPivotColumns().slice(),valueColumns:this.funcColsService.getValueColumns().slice()},n=this.columnGetStateService.getColumnState(),i={};return n.forEach(s=>{i[s.colId]=s}),()=>{let s=this.columnModel.getAllCols(),r=(y,C,E,I)=>{let T=C.map(I),x=E.map(I);if(gl(T,x))return;let V=new Set(C);E.forEach(_=>{V.delete(_)||V.add(_)});let b=[...V],S={type:y,columns:b,column:b.length===1?b[0]:null,source:e};this.eventService.dispatchEvent(S)},o=y=>{let C=[];return s.forEach(E=>{let I=i[E.getColId()];I&&y(I,E)&&C.push(E)}),C},a=y=>y.getColId();r("columnRowGroupChanged",t.rowGroupColumns,this.funcColsService.getRowGroupColumns(),a),r("columnPivotChanged",t.pivotColumns,this.funcColsService.getPivotColumns(),a);let c=o((y,C)=>{let E=y.aggFunc!=null,I=E!=C.isValueActive(),T=E&&y.aggFunc!=C.getAggFunc();return I||T});c.length>0&&this.eventDispatcher.columnChanged("columnValueChanged",c,e);let u=(y,C)=>y.width!=C.getActualWidth();this.eventDispatcher.columnResized(o(u),!0,e);let h=(y,C)=>y.pinned!=C.getPinned();this.eventDispatcher.columnPinned(o(h),e);let f=(y,C)=>y.hide==C.isVisible();this.eventDispatcher.columnVisible(o(f),e);let v=o((y,C)=>y.sort!=C.getSort()||y.sortIndex!=C.getSortIndex());v.length>0&&this.sortController.dispatchSortChangedEvents(e,v),this.normaliseColumnMovedEventForColumnState(n,e)}}normaliseColumnMovedEventForColumnState(e,t){let n=this.columnGetStateService.getColumnState(),i={};n.forEach(l=>i[l.colId]=l);let s={};e.forEach(l=>{i[l.colId]&&(s[l.colId]=!0)});let r=e.filter(l=>s[l.colId]),o=n.filter(l=>s[l.colId]),a=[];o.forEach((l,c)=>{let u=r&&r[c];if(u&&u.colId!==l.colId){let h=this.columnModel.getCol(u.colId);h&&a.push(h)}}),a.length&&this.eventDispatcher.columnMoved({movedColumns:a,source:t,finished:!0})}},AV=(e,t,n,i)=>{let s=e[n.getId()],r=e[i.getId()],o=s!=null,a=r!=null;if(o&&a)return s-r;if(o)return-1;if(a)return 1;let l=t.indexOf(n),c=t.indexOf(i),u=l>=0,h=c>=0;return u&&h?l-c:u?-1:1},kX=class extends k{constructor(){super(...arguments),this.beanName="columnMoveService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher}moveColumnByIndex(e,t,n){let i=this.columnModel.getCols();if(!i)return;let s=i[e];this.moveColumns([s],t,n)}moveColumns(e,t,n,i=!0){let s=this.columnModel.getCols();if(!s)return;if(this.columnAnimationService.start(),t>s.length-e.length){G("tried to insert columns in invalid location, toIndex = ",t),G("remember that you should not count the moving columns when calculating the new index");return}let r=this.columnModel.getColsForKeys(e);this.doesMovePassRules(r,t)&&(this.columnModel.moveInCols(r,t,n),this.eventDispatcher.columnMoved({movedColumns:r,source:n,toIndex:t,finished:i}),this.columnAnimationService.finish())}doesMovePassRules(e,t){let n=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(n)}doesOrderPassRules(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))}getProposedColumnOrder(e,t){let i=this.columnModel.getCols().slice();return YV(i,e,t),i}doesMovePassLockedPositions(e){let t=r=>r?r==="left"||r===!0?-1:1:0,n=this.gos.get("enableRtl"),i=n?1:-1,s=!0;return e.forEach(r=>{let o=t(r.getColDef().lockPosition);n?o>i&&(s=!1):o<i&&(s=!1),i=o}),s}doesMovePassMarryChildren(e){let t=!0,n=this.columnModel.getColTree();return Hr(null,n,i=>{if(!qn(i))return;let s=i,r=s.getColGroupDef();if(!(r&&r.marryChildren))return;let a=[];s.getLeafColumns().forEach(f=>{let g=e.indexOf(f);a.push(g)});let l=Math.max.apply(Math,a),c=Math.min.apply(Math,a),u=l-c,h=s.getLeafColumns().length-1;u>h&&(t=!1)}),t}placeLockedColumns(e){let t=[],n=[],i=[];return e.forEach(r=>{let o=r.getColDef().lockPosition;o==="right"?i.push(r):o==="left"||o===!0?t.push(r):n.push(r)}),this.gos.get("enableRtl")?[...i,...n,...t]:[...t,...n,...i]}},LX=/[&<>"']/g,VX={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function BX(e){let t=String.fromCharCode;function n(h){let f=[];if(!h)return[];let g=h.length,v=0,y,C;for(;v<g;)y=h.charCodeAt(v++),y>=55296&&y<=56319&&v<g?(C=h.charCodeAt(v++),(C&64512)==56320?f.push(((y&1023)<<10)+(C&1023)+65536):(f.push(y),v--)):f.push(y);return f}function i(h){if(h>=55296&&h<=57343)throw Error("Lone surrogate U+"+h.toString(16).toUpperCase()+" is not a scalar value")}function s(h,f){return t(h>>f&63|128)}function r(h){if(!(h&4294967168))return t(h);let f="";return h&4294965248?h&4294901760?h&4292870144||(f=t(h>>18&7|240),f+=s(h,12),f+=s(h,6)):(i(h),f=t(h>>12&15|224),f+=s(h,6)):f=t(h>>6&31|192),f+=t(h&63|128),f}let o=n(e),a=o.length,l=-1,c,u="";for(;++l<a;)c=o[l],u+=r(c);return u}function tr(e,t){if(e==null)return null;let n=e.toString().toString();return t?n:n.replace(LX,i=>VX[i])}function GX(e){if(!e||e==null)return null;let t=/([a-z])([A-Z])/g,n=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(n,"$1 $2$3").replace(/\./g," ").split(" ").map(s=>s.substring(0,1).toUpperCase()+(s.length>1?s.substring(1,s.length):"")).join(" ")}function HX(e){return e.replace(/[A-Z]/g,t=>`-${t.toLocaleLowerCase()}`)}var UX=class extends k{constructor(){super(...arguments),this.beanName="columnNameService"}wireBeans(e){this.expressionService=e.expressionService,this.funcColsService=e.funcColsService,this.columnModel=e.columnModel}getDisplayNameForColumn(e,t,n=!1){if(!e)return null;let i=this.getHeaderName(e.getColDef(),e,null,null,t);return n?this.wrapHeaderNameWithAggFunc(e,i):i}getDisplayNameForProvidedColumnGroup(e,t,n){let i=t?t.getColGroupDef():null;return i?this.getHeaderName(i,null,e,t,n):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,n,i,s){let r=e.headerValueGetter;if(r){let o=this.gos.addGridCommonParams({colDef:e,column:t,columnGroup:n,providedColumnGroup:i,location:s});return typeof r=="function"?r(o):typeof r=="string"?this.expressionService.evaluate(r,o):(G("headerValueGetter must be a function or a string"),"")}else{if(e.headerName!=null)return e.headerName;if(e.field)return GX(e.field)}return""}wrapHeaderNameWithAggFunc(e,t){if(this.gos.get("suppressAggFuncInHeader"))return t;let n=e.getColDef().pivotValueColumn,i=j(n),s=null,r;if(i){let o=this.funcColsService.getValueColumns(),a=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&o.length===1,l=e.getColDef().pivotTotalColumnIds!==void 0;if(a&&!l)return t;s=n?n.getAggFunc():null,r=!0}else{let o=e.isValueActive(),a=this.columnModel.isPivotMode()||!this.funcColsService.isRowGroupEmpty();o&&a?(s=e.getAggFunc(),r=!0):r=!1}if(r){let o=typeof s=="string"?s:"func";return`${this.localeService.getLocaleTextFunc()(o,o)}(${t})`}return t}},WX=class extends k{constructor(){super(...arguments),this.beanName="pivotResultColsService"}wireBeans(e){this.context=e.context,this.columnModel=e.columnModel,this.columnFactory=e.columnFactory,this.visibleColsService=e.visibleColsService}destroy(){yu(this.context,this.pivotResultCols?.tree),super.destroy()}isPivotResultColsPresent(){return this.pivotResultCols!=null}lookupPivotResultCol(e,t){if(this.pivotResultCols==null)return null;let n=this.columnModel.getColDefCol(t),i=null;return this.pivotResultCols.list.forEach(s=>{let r=s.getColDef().pivotKeys,o=s.getColDef().pivotValueColumn;gl(r,e)&&o===n&&(i=s)}),i}getPivotResultCols(){return this.pivotResultCols}getPivotResultCol(e){return this.pivotResultCols?this.columnModel.getColFromCollection(e,this.pivotResultCols):null}setPivotResultCols(e,t){if(this.columnModel.isReady()&&!(e==null&&this.pivotResultCols==null)){if(e){this.processPivotResultColDef(e);let n=this.columnFactory.createColumnTree(e,!1,this.pivotResultCols?.tree||this.previousPivotResultCols||void 0,t);yu(this.context,this.pivotResultCols?.tree,n.columnTree);let i=n.columnTree,s=n.treeDept,r=uR(i),o={};this.pivotResultCols={tree:i,treeDepth:s,list:r,map:o},this.pivotResultCols.list.forEach(a=>this.pivotResultCols.map[a.getId()]=a),this.previousPivotResultCols=null}else this.previousPivotResultCols=this.pivotResultCols?this.pivotResultCols.tree:null,this.pivotResultCols=null;this.columnModel.refreshCols(),this.visibleColsService.refresh(t)}}processPivotResultColDef(e){let t=this.gos.get("processPivotResultColDef"),n=this.gos.get("processPivotResultColGroupDef");if(!t&&!n)return;let i=s=>{s.forEach(r=>{if(j(r.children)){let a=r;n&&n(a),i(a.children)}else t&&t(r)})};e&&i(e)}},jX=class extends k{constructor(){super(...arguments),this.beanName="columnSizeService"}wireBeans(e){this.columnModel=e.columnModel,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}setColumnWidths(e,t,n,i){let s=[];e.forEach(r=>{let o=this.columnModel.getColDefCol(r.key)||this.columnModel.getCol(r.key);if(!o)return;if(s.push({width:r.newWidth,ratios:[1],columns:[o]}),this.gos.get("colResizeDefault")==="shift"&&(t=!t),t){let l=this.visibleColsService.getColAfter(o);if(!l)return;let c=o.getActualWidth()-r.newWidth,u=l.getActualWidth()+c;s.push({width:u,ratios:[1],columns:[l]})}}),s.length!==0&&this.resizeColumnSets({resizeSets:s,finished:n,source:i})}resizeColumnSets(e){let{resizeSets:t,finished:n,source:i}=e;if(!(!t||t.every(u=>this.checkMinAndMaxWidthsForSet(u)))){if(n){let u=t&&t.length>0?t[0].columns:null;this.eventDispatcher.columnResized(u,n,i)}return}let r=[],o=[];t.forEach(u=>{let{width:h,columns:f,ratios:g}=u,v={},y={};f.forEach(I=>o.push(I));let C=!0,E=0;for(;C;){if(E++,E>1e3){ke("infinite loop in resizeColumnSets");break}C=!1;let I=[],T=0,x=h;f.forEach((V,b)=>{if(y[V.getId()])x-=v[V.getId()];else{I.push(V);let _=g[b];T+=_}});let z=1/T;I.forEach((V,b)=>{let S=b===I.length-1,_;S?_=x:(_=Math.round(g[b]*h*z),x-=_);let R=V.getMinWidth(),A=V.getMaxWidth();_<R?(_=R,y[V.getId()]=!0,C=!0):A>0&&_>A&&(_=A,y[V.getId()]=!0,C=!0),v[V.getId()]=_})}f.forEach(I=>{let T=v[I.getId()];I.getActualWidth()!==T&&(I.setActualWidth(T,i),r.push(I))})});let a=r.length>0,l=[];a&&(l=this.refreshFlexedColumns({resizingCols:o,skipSetLeft:!0}),this.visibleColsService.setLeftValues(i),this.visibleColsService.updateBodyWidths(),this.columnViewportService.checkViewportColumns());let c=o.concat(l);(a||n)&&this.eventDispatcher.columnResized(c,n,i,l)}checkMinAndMaxWidthsForSet(e){let{columns:t,width:n}=e,i=0,s=0,r=!0;t.forEach(l=>{let c=l.getMinWidth();i+=c||0;let u=l.getMaxWidth();u>0?s+=u:r=!1});let o=n>=i,a=!r||n<=s;return o&&a}refreshFlexedColumns(e={}){let t=e.source?e.source:"flex";if(e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];let n=this.visibleColsService.getCenterCols(),i=-1;if(e.resizingCols){let f=new Set(e.resizingCols);for(let g=n.length-1;g>=0;g--)if(f.has(n[g])){i=g;break}}let s=0,r=[],o=0,a=0;for(let f=0;f<n.length;f++)n[f].getFlex()&&f>i?(r.push(n[f]),a+=n[f].getFlex(),o+=n[f].getMinWidth()):s+=n[f].getActualWidth();if(!r.length)return[];let l=[];s+o>this.flexViewportWidth&&(r.forEach(f=>f.setActualWidth(f.getMinWidth(),t)),l=r,r=[]);let c=[],u;e:for(;;){u=this.flexViewportWidth-s;let f=u/a;for(let g=0;g<r.length;g++){let v=r[g],y=f*v.getFlex(),C=0,E=v.getMinWidth(),I=v.getMaxWidth();if(y<E?C=E:y>I&&(C=I),C){v.setActualWidth(C,t),QV(r,v),a-=v.getFlex(),l.push(v),s+=v.getActualWidth();continue e}c[g]=Math.round(y)}break}let h=u;return r.forEach((f,g)=>{f.setActualWidth(Math.min(c[g],h),t),l.push(f),h-=c[g]}),e.skipSetLeft||this.visibleColsService.setLeftValues(t),e.updateBodyWidths&&this.visibleColsService.updateBodyWidths(),e.fireResizedEvent&&this.eventDispatcher.columnResized(l,!0,t,r),r}sizeColumnsToFit(e,t="sizeColumnsToFit",n,i){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,n,i));return}let s={};i&&i?.columnLimits?.forEach(v=>{var y=v,{key:f}=y,g=op(y,["key"]);s[typeof f=="string"?f:f.getColId()]=g});let r=this.visibleColsService.getAllCols(),o=e===Vr(r);if(e<=0||!r.length||o)return;let a=[],l=[];r.forEach(f=>{f.getColDef().suppressSizeToFit===!0?l.push(f):a.push(f)});let c=a.slice(0),u=!1,h=f=>{Qn(a,f),l.push(f)};for(a.forEach(f=>{f.resetActualWidth(t);let g=s?.[f.getId()],v=g?.minWidth??i?.defaultMinWidth,y=g?.maxWidth??i?.defaultMaxWidth,C=f.getActualWidth();typeof v=="number"&&C<v?f.setActualWidth(v,t,!0):typeof y=="number"&&C>y&&f.setActualWidth(y,t,!0)});!u;){u=!0;let f=e-Vr(l);if(f<=0)a.forEach(g=>{let v=s?.[g.getId()]?.minWidth??i?.defaultMinWidth;if(typeof v=="number"){g.setActualWidth(v,t,!0);return}g.setMinimum(t)});else{let g=f/Vr(a),v=f;for(let y=a.length-1;y>=0;y--){let C=a[y],E=s?.[C.getId()],I=E?.minWidth??i?.defaultMinWidth,T=E?.maxWidth??i?.defaultMaxWidth,x=C.getMinWidth(),z=C.getMaxWidth(),V=typeof I=="number"&&I>x?I:x,b=typeof T=="number"&&T<z?T:z,S=Math.round(C.getActualWidth()*g);S<V?(S=V,h(C),u=!1):S>b?(S=b,h(C),u=!1):y===0&&(S=v),C.setActualWidth(S,t,!0),v-=S}}}c.forEach(f=>{f.fireColumnWidthChangedEvent(t)}),this.visibleColsService.setLeftValues(t),this.visibleColsService.updateBodyWidths(),!n&&this.eventDispatcher.columnResized(c,!0,t)}applyAutosizeStrategy(){let e=this.gos.get("autoSizeStrategy");if(!e)return;let{type:t}=e;setTimeout(()=>{if(t==="fitGridWidth"){let{columnLimits:n,defaultMinWidth:i,defaultMaxWidth:s}=e,r=n?.map(({colId:o,minWidth:a,maxWidth:l})=>({key:o,minWidth:a,maxWidth:l}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:i,defaultMaxWidth:s,columnLimits:r})}else t==="fitProvidedWidth"&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}};function iB(e,t){return e+"_"+t}function Ft(e){return e instanceof sB}var sB=class extends k{constructor(e,t,n,i){super(),this.isColumn=!1,this.displayedChildren=[],this.parent=null,this.groupId=t,this.partId=n,this.providedColumnGroup=e,this.pinned=i}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return iB(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){let e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{Ft(e)&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){let t=xe(this.displayedChildren).getLeft();this.setLeft(t)}else{let e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach(t=>{e+=t.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){let e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{zo(t)?e.push(t):Ft(t)&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{zo(t)?e.push(t):Ft(t)&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){let e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}this.children.forEach(n=>{if(Ft(n)&&(!n.displayedChildren||!n.displayedChildren.length))return;switch(n.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(n);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(n);break;default:this.displayedChildren.push(n);break}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},rB=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){let t=this.existingIds[e],n;return typeof t!="number"?n=0:n=t+1,this.existingIds[e]=n,n}},zX=class extends k{constructor(){super(...arguments),this.beanName="visibleColsService",this.colsAndGroupsMap={},this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher}refresh(e,t=!1){t||this.buildTrees(),this.updateOpenClosedVisibilityInColumnGroups(),this.columnsLeft=MD(this.treeLeft),this.columnsCenter=MD(this.treeCenter),this.columnsRight=MD(this.treeRight),this.joinColsAriaOrder(),this.joinCols(),this.setLeftValues(e),this.autoHeightCols=this.columns.filter(n=>n.isAutoHeight()),this.columnSizeService.refreshFlexedColumns(),this.updateBodyWidths(),this.columnViewportService.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(e),this.eventDispatcher.visibleCols()}updateBodyWidths(){let e=Vr(this.columnsCenter),t=Vr(this.columnsLeft),n=Vr(this.columnsRight);if(this.bodyWidthDirty=this.bodyWidth!==e,this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==n){this.bodyWidth=e,this.leftWidth=t,this.rightWidth=n;let s={type:"columnContainerWidthChanged"};this.eventService.dispatchEvent(s);let r={type:"displayedColumnsWidthChanged"};this.eventService.dispatchEvent(r)}}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e){let t,n;this.gos.get("enableRtl")?(t=this.columnsLeft?this.columnsLeft[0]:null,n=this.columnsRight?xe(this.columnsRight):null):(t=this.columnsLeft?xe(this.columnsLeft):null,n=this.columnsRight?this.columnsRight[0]:null),this.columnModel.getCols().forEach(i=>{i.setLastLeftPinned(i===t,e),i.setFirstRightPinned(i===n,e)})}buildTrees(){let e=this.columnModel.getColsToShow(),t=e.filter(r=>r.getPinned()=="left"),n=e.filter(r=>r.getPinned()=="right"),i=e.filter(r=>r.getPinned()!="left"&&r.getPinned()!="right"),s=new rB;this.treeLeft=this.createGroups({columns:t,idCreator:s,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=this.createGroups({columns:n,idCreator:s,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=this.createGroups({columns:i,idCreator:s,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.ariaOrderColumns=[]}joinColsAriaOrder(){let e=this.columnModel.getCols(),t=[],n=[],i=[];for(let s of e){let r=s.getPinned();r?r===!0||r==="left"?t.push(s):i.push(s):n.push(s)}this.ariaOrderColumns=t.concat(n).concat(i)}getAriaColIndex(e){let t;return Ft(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}getAllAutoHeightCols(){return this.autoHeightCols}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(e=>{e.forEach(t=>{Ft(t)&&t.checkLeft()})})}setLeftValuesOfCols(e){if(!this.columnModel.getColDefCols())return;let n=this.columnModel.getCols().slice(0),i=this.gos.get("enableRtl");[this.columnsLeft,this.columnsRight,this.columnsCenter].forEach(s=>{if(i){let r=Vr(s);s.forEach(o=>{r-=o.getActualWidth(),o.setLeft(r,e)})}else{let r=0;s.forEach(o=>{o.setLeft(r,e),r+=o.getActualWidth()})}hX(n,s)}),n.forEach(s=>{s.setLeft(null,e)})}joinCols(){this.gos.get("enableRtl")?this.columns=this.columnsRight.concat(this.columnsCenter).concat(this.columnsLeft):this.columns=this.columnsLeft.concat(this.columnsCenter).concat(this.columnsRight)}getColsCenter(){return this.columnsCenter}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}getTreeLeft(){return this.treeLeft}getTreeRight(){return this.treeRight}getTreeCenter(){return this.treeCenter}getAllCols(){return this.columns}isColDisplayed(e){return this.getAllCols().indexOf(e)>=0}getLeftColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsLeft):this.columnsLeft}getRightColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsRight):this.columnsRight}getColsForRow(e,t,n,i){let s=[],r=null;for(let o=0;o<t.length;o++){let a=t[o],l=t.length-o,c=Math.min(a.getColSpan(e),l),u=[a];if(c>1){let f=c-1;for(let g=1;g<=f;g++)u.push(t[o+g]);o+=f}let h;n?(h=!1,u.forEach(f=>{n(f)&&(h=!0)})):h=!0,h&&(s.length===0&&r&&(i&&i(a))&&s.push(r),s.push(a)),r=a}return s}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getCenterCols(){return this.columnsCenter}getLeftCols(){return this.columnsLeft}getRightCols(){return this.columnsRight}getColBefore(e){let t=this.getAllCols(),n=t.indexOf(e);return n>0?t[n-1]:null}getGroupAtDirection(e,t){let n=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),i=e.getDisplayedLeafColumns(),s=t==="After"?xe(i):i[0],r=`getCol${t}`;for(;;){let o=this[r](s);if(!o)return null;let a=this.getColGroupAtLevel(o,n);if(a!==e)return a}}getColGroupAtLevel(e,t){let n=e.getParent(),i,s;for(;i=n.getProvidedColumnGroup().getLevel(),s=n.getPaddingLevel(),!(i+s<=t);)n=n.getParent();return n}isPinningLeft(){return this.columnsLeft.length>0}isPinningRight(){return this.columnsRight.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};let e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};ll(this.treeCenter,!1,e),ll(this.treeLeft,!1,e),ll(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){let e=this.getAllTrees();ll(e,!1,t=>{Ft(t)&&t.calculateDisplayedColumns()})}getFirstColumn(){let e=this.gos.get("enableRtl"),t=["getLeftCols","getCenterCols","getRightCols"];e&&t.reverse();for(let n=0;n<t.length;n++){let i=this[t[n]]();if(i.length)return e?xe(i):i[0]}return null}getColumnGroup(e,t){if(!e)return null;if(Ft(e))return e;let n=this.getAllTrees(),i=typeof t=="number",s=null;return ll(n,!1,r=>{if(Ft(r)){let o=r,a;i?a=e===o.getGroupId()&&t===o.getPartId():a=e===o.getGroupId(),a&&(s=o)}}),s}getColAfter(e){let t=this.getAllCols(),n=t.indexOf(e);return n<t.length-1?t[n+1]:null}isBodyWidthDirty(){return this.bodyWidthDirty}setBodyWidthDirty(){this.bodyWidthDirty=!0}getColsLeftWidth(){return Vr(this.columnsLeft)}getDisplayedColumnsRightWidth(){return Vr(this.columnsRight)}isColAtEdge(e,t){let n=this.getAllCols();if(!n.length)return!1;let i=t==="first",s;if(Ft(e)){let r=e.getDisplayedLeafColumns();if(!r.length)return!1;s=i?r[0]:xe(r)}else s=e;return(i?n[0]:xe(n))===s}createGroups(e){let{columns:t,idCreator:n,pinned:i,oldDisplayedGroups:s,isStandaloneStructure:r}=e,o=this.mapOldGroupsById(s),a=[],l=t;for(;l.length;){let c=l;l=[];let u=0,h=f=>{let g=u;u=f;let v=c[g],C=(Ft(v)?v.getProvidedColumnGroup():v).getOriginalParent();if(C==null){for(let I=g;I<f;I++)a.push(c[I]);return}let E=this.createColGroup(C,n,o,i,r);for(let I=g;I<f;I++)E.addChild(c[I]);l.push(E)};for(let f=1;f<c.length;f++){let g=c[f],y=(Ft(g)?g.getProvidedColumnGroup():g).getOriginalParent(),C=c[u],I=(Ft(C)?C.getProvidedColumnGroup():C).getOriginalParent();y!==I&&h(f)}u<c.length&&h(c.length)}return r||this.setupParentsIntoCols(a,null),a}createColGroup(e,t,n,i,s){let r=e.getGroupId(),o=t.getInstanceIdForKey(r),a=iB(r,o),l=n[a];return l&&l.getProvidedColumnGroup()!==e&&(l=null),j(l)?l.reset():(l=new sB(e,r,o,i),s||this.createBean(l)),l}mapOldGroupsById(e){let t={},n=i=>{i.forEach(s=>{if(Ft(s)){let r=s;t[s.getUniqueId()]=r,n(r.getChildren())}})};return e&&n(e),t}setupParentsIntoCols(e,t){e.forEach(n=>{if(n.setParent(t),Ft(n)){let i=n;this.setupParentsIntoCols(i.getChildren(),i)}})}};function ll(e,t,n){if(e)for(let i=0;i<e.length;i++){let s=e[i];if(Ft(s)){let r=t?s.getDisplayedChildren():s.getChildren();ll(r,t,n)}n(s)}}function MD(e){let t=[];return ll(e,!0,n=>{zo(n)&&t.push(n)}),t}var oB=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd"],$X=["scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged"],qX=[...oB,...$X],KX={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,removePivotHeaderRowWhenSingleValueColumn:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0},In=class{};In.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"];In.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy"];In.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"];In.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"];In.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading"];In.OTHER_PROPERTIES=["suppressStickyTotalRow"];In.FUNCTION_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"];In.ALL_PROPERTIES=[...In.ARRAY_PROPERTIES,...In.OBJECT_PROPERTIES,...In.STRING_PROPERTIES,...In.NUMBER_PROPERTIES,...In.FUNCTION_PROPERTIES,...In.BOOLEAN_PROPERTIES,...In.OTHER_PROPERTIES];var hf=In,Ki=class{static getCallbackForEvent(t){return!t||t.length<2?t:"on"+t[0].toUpperCase()+t.substring(1)}};Ki.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY";Ki.PUBLIC_EVENTS=oB;Ki.EVENT_CALLBACKS=qX.map(e=>Ki.getCallbackForEvent(e));Ki.BOOLEAN_PROPERTIES=hf.BOOLEAN_PROPERTIES;Ki.ALL_PROPERTIES=hf.ALL_PROPERTIES;Ki.ALL_PROPERTIES_AND_CALLBACKS=[...Ki.ALL_PROPERTIES,...Ki.EVENT_CALLBACKS];Ki.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(Ki.ALL_PROPERTIES_AND_CALLBACKS);var ff=Ki;function aB(e,t){typeof e!="object"&&(e={});let n=B({},e);return ff.ALL_PROPERTIES_AND_CALLBACKS.forEach(s=>{let r=t[s];typeof r<"u"&&r!==ff.VUE_OMITTED_PROPERTY&&(n[s]=r)}),n}function lB(e,t){if(!e)return;let n={},i=!1;if(Object.keys(e).filter(o=>ff.ALL_PROPERTIES_AND_CALLBACKS_SET.has(o)).forEach(o=>{n[o]=e[o],i=!0}),!i)return;let s={type:"gridOptionsChanged",options:n};t.dispatchEvent(s);let r={type:"componentStateChanged"};ji(n,(o,a)=>{r[o]=a}),t.dispatchEvent(r)}var QX=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){let t=(e||"").split(" ");if(t.length>1){t.forEach(i=>this.addCssClass(i));return}if(this.cssClassStates[e]!==!0&&e.length){let i=this.getGui();i&&i.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){let t=(e||"").split(" ");if(t.length>1){t.forEach(i=>this.removeCssClass(i));return}if(this.cssClassStates[e]!==!1&&e.length){let i=this.getGui();i&&i.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){let t=this.getGui();return t?t.classList.contains(e):!1}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){let i=(e||"").split(" ");if(i.length>1){i.forEach(s=>this.addOrRemoveCssClass(s,t));return}}if(this.cssClassStates[e]!==t&&e.length){let i=this.getGui();i&&i.classList.toggle(e,t),this.cssClassStates[e]=t}}};function Wr(e,t,n){n==null||typeof n=="string"&&n==""?cB(e,t):ws(e,t,n)}function ws(e,t,n){e.setAttribute(uB(t),n.toString())}function cB(e,t){e.removeAttribute(uB(t))}function uB(e){return`aria-${e}`}function oi(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function YX(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function JX(e){return e.getAttribute("aria-label")}function Eu(e,t){Wr(e,"label",t)}function pf(e,t){Wr(e,"labelledby",t)}function dB(e,t){Wr(e,"live",t)}function XX(e,t){Wr(e,"atomic",t)}function ZX(e,t){Wr(e,"relevant",t)}function eZ(e,t){Wr(e,"disabled",t)}function dR(e,t){Wr(e,"hidden",t)}function mC(e,t){ws(e,"expanded",t)}function tZ(e,t){ws(e,"setsize",t)}function nZ(e,t){ws(e,"posinset",t)}function iZ(e,t){ws(e,"multiselectable",t)}function sZ(e,t){ws(e,"rowcount",t)}function hB(e,t){ws(e,"rowindex",t)}function rZ(e,t){ws(e,"colcount",t)}function fB(e,t){ws(e,"colindex",t)}function oZ(e,t){ws(e,"colspan",t)}function aZ(e,t){ws(e,"sort",t)}function lZ(e){cB(e,"sort")}function vC(e,t){Wr(e,"selected",t)}function cZ(e,t){Wr(e,"controls",t.id),pf(t,e.id)}function hR(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var PD,eC,FD,xD,OD,ND,QD,YD;function Ur(){return PD===void 0&&(PD=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),PD}function pB(){if(eC===void 0)if(Ur()){let e=navigator.userAgent.match(/version\/(\d+)/i);e&&(eC=e[1]!=null?parseFloat(e[1]):0)}else eC=0;return eC}function fR(){if(FD===void 0){let e=window;FD=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return FD}function gB(){return xD===void 0&&(xD=/(firefox)/i.test(navigator.userAgent)),xD}function mB(){return OD===void 0&&(OD=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),OD}function $o(){return ND===void 0&&(ND=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),ND}function JD(){return!Ur()||pB()>=15}function XD(e){if(!e)return null;let t=e.tabIndex,n=e.getAttribute("tabIndex");return t===-1&&(n===null||n===""&&!gB())?null:t.toString()}function uZ(){if(!document.body)return-1;let e=1e6,t=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,n=document.createElement("div");for(document.body.appendChild(n);;){let i=e*2;if(n.style.height=i+"px",i>t||n.clientHeight!==i)break;e=i}return document.body.removeChild(n),e}function dZ(){return document.body?.clientWidth??(window.innerHeight||document.documentElement?.clientWidth||-1)}function hZ(){return document.body?.clientHeight??(window.innerHeight||document.documentElement?.clientHeight||-1)}function fZ(){return YD==null&&vB(),YD}function vB(){let e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let n=t.offsetWidth-t.clientWidth;n===0&&t.clientWidth===0&&(n=null),t.parentNode&&t.parentNode.removeChild(t),n!=null&&(YD=n,QD=n===0)}function CB(){return QD==null&&vB(),QD}var tC;var pZ="[tabindex], input, select, button, textarea, [href]",yB="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function pR(e){let t=Element.prototype.matches||Element.prototype.msMatchesSelector,i=t.call(e,"input, select, button, textarea"),s=t.call(e,yB),r=ys(e);return i&&!s&&r}function ft(e,t,n={}){let{skipAriaHidden:i}=n;e.classList.toggle("ag-hidden",!t),i||dR(e,!t)}function gZ(e,t,n={}){let{skipAriaHidden:i}=n;e.classList.toggle("ag-invisible",!t),i||dR(e,!t)}function gf(e,t){let n="disabled",i=t?s=>s.setAttribute(n,""):s=>s.removeAttribute(n);i(e),RB(e.querySelectorAll("input"),s=>i(s))}function _u(e,t,n){let i=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof n=="number"){if(++i>n)break}else if(e===n)break}return!1}function ml(e){let{height:t,width:n,borderTopWidth:i,borderRightWidth:s,borderBottomWidth:r,borderLeftWidth:o,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:u,marginTop:h,marginRight:f,marginBottom:g,marginLeft:v,boxSizing:y}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(n||"0"),borderTopWidth:parseFloat(i||"0"),borderRightWidth:parseFloat(s||"0"),borderBottomWidth:parseFloat(r||"0"),borderLeftWidth:parseFloat(o||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(c||"0"),paddingLeft:parseFloat(u||"0"),marginTop:parseFloat(h||"0"),marginRight:parseFloat(f||"0"),marginBottom:parseFloat(g||"0"),marginLeft:parseFloat(v||"0"),boxSizing:y}}function gR(e){let t=ml(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function vf(e){let t=ml(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function wB(e){let{height:t,marginBottom:n,marginTop:i}=ml(e);return Math.floor(t+n+i)}function CC(e){let{width:t,marginLeft:n,marginRight:i}=ml(e);return Math.floor(t+n+i)}function SB(e){let t=e.getBoundingClientRect(),{borderTopWidth:n,borderLeftWidth:i,borderRightWidth:s,borderBottomWidth:r}=ml(e);return{top:t.top+(n||0),left:t.left+(i||0),right:t.right+(s||0),bottom:t.bottom+(r||0)}}function yC(){if(typeof tC=="boolean")return tC;let e=document.createElement("div");return e.style.direction="rtl",e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="0px",e.style.overflow="hidden",e.dir="rtl",e.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(e),e.scrollLeft=1,tC=Math.floor(e.scrollLeft)===0,document.body.removeChild(e),tC}function wC(e,t){let n=e.scrollLeft;return t&&(n=Math.abs(n),fR()&&!yC()&&(n=e.scrollWidth-e.clientWidth-n)),n}function SC(e,t,n){n&&(yC()?t*=-1:(Ur()||fR())&&(t=e.scrollWidth-e.clientWidth-t)),e.scrollLeft=t}function An(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function qi(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function _B(e){return!!e.offsetParent}function ys(e){let t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!_B(e)||window.getComputedStyle(e).visibility!=="visible")}function Du(e){let t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function bB(e,t,n){n&&n.nextSibling===t||(n?n.nextSibling?e.insertBefore(t,n.nextSibling):e.appendChild(t):e.firstChild&&e.firstChild!==t&&e.insertAdjacentElement("afterbegin",t))}function EB(e,t){for(let n=0;n<t.length;n++){let i=t[n],s=e.children[n];s!==i&&e.insertBefore(i,s)}}function mZ(e,t,n){n?n.insertAdjacentElement("afterend",t):e.firstChild?e.insertAdjacentElement("afterbegin",t):e.appendChild(t)}function DB(e,t){if(t)for(let[n,i]of Object.entries(t)){if(!n||!n.length||i==null)continue;let s=HX(n),r=i.toString(),o=r.replace(/\s*!important/g,""),a=o.length!=r.length?"important":void 0;e.style.setProperty(s,o,a)}}function vZ(e){return e.clientWidth<e.scrollWidth}function CZ(e){return e.clientHeight<e.scrollHeight}function _C(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):Cs(e,t)}function Cs(e,t){t=mR(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function lf(e,t){t=mR(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function mR(e){return typeof e=="number"?`${e}px`:e}function vR(e){return e instanceof Node||e instanceof HTMLElement}function yZ(e){if(e==null)return[];let t=[];return RB(e,n=>t.push(n)),t}function wZ(e,t){if(e)for(let n=0;n<e.length;n++){let i=e[n];t(i.name,i.value)}}function Br(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n.toString())}function RB(e,t){if(e!=null)for(let n=0;n<e.length;n++)t(e[n])}var Ru=class{constructor(e=0,t=1){this.nextValue=e,this.step=t}next(){let e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}},SZ=1e3,_Z=1e3,MV=100,TB=class al extends k{constructor(t,n,i,s){super(),this.parentComp=t,this.tooltipShowDelayOverride=n,this.tooltipHideDelayOverride=i,this.shouldDisplayTooltip=s,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(t){this.popupService=t.popupService,this.userComponentFactory=t.userComponentFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");let t=this.parentComp.getGui();this.tooltipTrigger===0&&this.addManagedListeners(t,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(t,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(t,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(t,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(t){let n=this.gos.get(t);return n<0&&G(`${t} should not be lower than 0`),Math.max(200,n)}getTooltipDelay(t){return t==="show"?this.tooltipShowDelayOverride??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipHideDelayOverride??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){let t=this.gos.get("tooltipTrigger");return!t||t==="hover"?0:1}onMouseEnter(t){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!$o()&&(al.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(t)},MV):this.prepareToShowTooltip(t))}onMouseMove(t){this.lastMouseEvent&&(this.lastMouseEvent=t),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(t){let n=t.relatedTarget,i=this.parentComp.getGui(),s=this.tooltipComp?.getGui();this.isInteractingWithTooltip||i.contains(n)||this.interactionEnabled&&s?.contains(n)||this.setToDoNothing()}onKeyDown(){this.setToDoNothing()}prepareToShowTooltip(t){if(this.state!=0||al.isLocked)return;let n=0;t&&(n=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=t||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),n),this.state=1}isLastTooltipHiddenRecently(){let t=new Date().getTime(),n=al.lastTooltipHideTime;return t-n<SZ}setToDoNothing(){this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){let t=B({},this.parentComp.getTooltipParams());if(!j(t.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;let n=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(t).newAgStackInstance().then(n)}hideTooltip(t){if(!t&&this.isInteractingWithTooltip)return;this.tooltipComp&&(this.destroyTooltipComp(),al.lastTooltipHideTime=new Date().getTime());let n={type:"tooltipHide",parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(n),t&&(this.isInteractingWithTooltip=!1),this.state=0}newTooltipComponentCallback(t,n){if(this.state!==2||this.tooltipInstanceCount!==t){this.destroyBean(n);return}let s=n.getGui();this.tooltipComp=n,s.classList.contains("ag-tooltip")||s.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&s.classList.add("ag-tooltip-animate"),this.interactionEnabled&&s.classList.add("ag-tooltip-interactive");let r=this.localeService.getLocaleTextFunc(),o=this.popupService.addPopup({eChild:s,ariaLabel:r("ariaLabelTooltip","Tooltip")});if(o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){let l=this.setToDoNothing.bind(this);[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:l,columnMoved:l})}this.interactionEnabled&&(this.tooltipTrigger===0?[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(s,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}):[this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(s,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}));let a={type:"tooltipShow",tooltipGui:s,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(a),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isInteractingWithTooltip=!1,this.lockService()}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}onTooltipFocusOut(t){let n=this.parentComp.getGui(),i=this.tooltipComp?.getGui(),s=t.relatedTarget;i?.contains(s)||(this.isInteractingWithTooltip=!1,n.contains(s)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){let t={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(se(B({},t),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(se(B({},t),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");let t=this.tooltipPopupDestroyFunc,n=this.tooltipComp,i=this.tooltipTrigger===0?_Z:0;window.setTimeout(()=>{t(),this.destroyBean(n)},i),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(t=>{t&&t()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){al.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},MV)}unlockService(){al.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};TB.isLocked=!1;var bZ=TB,Iu=class extends k{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}wireBeans(e){this.beans=e}postConstruct(){this.refreshToolTip()}setBrowserTooltip(e){let t="title",n=this.ctrl.getGui();n&&(e!=null&&e!=""?n.setAttribute(t,e):n.removeAttribute(t))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){if(this.tooltipManager!=null)return;let e={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new bZ(e,this.ctrl.getTooltipShowDelayOverride?.(),this.ctrl.getTooltipHideDelayOverride?.(),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){let e=this.ctrl,t=e.getColumn?e.getColumn():void 0,n=e.getColDef?e.getColDef():void 0,i=e.getRowNode?e.getRowNode():void 0;return{location:e.getLocation(),colDef:n,column:t,rowIndex:e.getRowIndex?e.getRowIndex():void 0,node:i,data:i?i.data:void 0,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?e.getValueFormatted():void 0,hideTooltipCallback:()=>this.tooltipManager?.hideTooltip(!0)}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}},EZ=new Ru,X=null,Ve=class IB extends k{constructor(t,n){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=EZ.next(),this.cssClassManager=new QX(()=>this.eGui),this.componentSelectors=new Map((n??[]).map(i=>[i.selector,i])),t&&this.setTemplate(t)}preWireBeans(t){super.preWireBeans(t)}preConstruct(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips"),this.wireTemplate(this.getGui())}wireTemplate(t,n){t&&this.gos&&(this.applyElementsToComponent(t),this.createChildComponentsFromTags(t,n))}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(t){let{newTooltipText:n,showDelayOverride:i,hideDelayOverride:s,location:r,shouldDisplayTooltip:o}=t||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==n&&(this.tooltipText=n);let a=()=>this.tooltipText;n!=null&&(this.tooltipFeature=this.createBean(new Iu({getTooltipValue:a,getGui:()=>this.getGui(),getLocation:()=>r??"UNKNOWN",getColDef:t?.getColDef,getColumn:t?.getColumn,getTooltipShowDelayOverride:i!=null?()=>i:void 0,getTooltipHideDelayOverride:s!=null?()=>s:void 0,shouldDisplayTooltip:o})))}getDataRefAttribute(t){return t.getAttribute?t.getAttribute("data-ref"):null}applyElementsToComponent(t,n,i,s=null){if(n===void 0&&(n=this.getDataRefAttribute(t)),n){let r=this[n];if(r===X)this[n]=s??t;else{let o=i&&i[n];!this.suppressDataRefValidation&&!o&&G(`Issue with data-ref: ${n} on ${this.constructor.name} with ${r}`)}}}createChildComponentsFromTags(t,n){yZ(t.childNodes).forEach(s=>{if(!(s instanceof HTMLElement))return;let r=this.createComponentFromElement(s,o=>{o.getGui()&&this.copyAttributesFromNode(s,o.getGui())},n);if(r){if(r.addItems&&s.children.length){this.createChildComponentsFromTags(s,n);let o=Array.prototype.slice.call(s.children);r.addItems(o)}this.swapComponentForNode(r,t,s)}else s.childNodes&&this.createChildComponentsFromTags(s,n)})}createComponentFromElement(t,n,i){let s=t.nodeName,r=this.getDataRefAttribute(t),o=s.indexOf("AG-")===0,a=o?this.componentSelectors.get(s):null,l=null;if(a){IB.elementGettingCreated=t;let c=i&&r?i[r]:void 0;l=new a.component(c),l.setParentComponent(this),this.createBean(l,null,n)}else o&&G(`Missing selector: ${s}`);return this.applyElementsToComponent(t,r,i,l),l}copyAttributesFromNode(t,n){wZ(t.attributes,(i,s)=>n.setAttribute(i,s))}swapComponentForNode(t,n,i){let s=t.getGui();n.replaceChild(s,i),n.insertBefore(document.createComment(i.nodeName),s),this.addDestroyFunc(this.destroyBean.bind(this,t))}activateTabIndex(t){let n=this.gos.get("tabIndex");t||(t=[]),t.length||t.push(this.getGui()),t.forEach(i=>i.setAttribute("tabindex",n.toString()))}setTemplate(t,n,i){let s=Du(t);this.setTemplateFromElement(s,n,i)}setTemplateFromElement(t,n,i,s=!1){if(this.eGui=t,this.suppressDataRefValidation=s,n)for(let r=0;r<n.length;r++){let o=n[r];this.componentSelectors.set(o.selector,o)}this.wireTemplate(t,i)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(t){this.parentComponent=t}getParentComponent(){return this.parentComponent}setGui(t){this.eGui=t}queryForHtmlElement(t){return this.eGui.querySelector(t)}getContainerAndElement(t,n){let i=n;return t==null?null:(i||(i=this.eGui),vR(t)?{element:t,parent:i}:{element:t.getGui(),parent:i})}prependChild(t,n){let{element:i,parent:s}=this.getContainerAndElement(t,n)||{};!i||!s||s.insertAdjacentElement("afterbegin",i)}appendChild(t,n){let{element:i,parent:s}=this.getContainerAndElement(t,n)||{};!i||!s||s.appendChild(i)}isDisplayed(){return this.displayed}setVisible(t,n={}){if(t!==this.visible){this.visible=t;let{skipAriaHidden:i}=n;gZ(this.eGui,t,{skipAriaHidden:i})}}setDisplayed(t,n={}){if(t!==this.displayed){this.displayed=t;let{skipAriaHidden:i}=n;ft(this.eGui,t,{skipAriaHidden:i});let s={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(s)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}addGuiEventListener(t,n,i){this.eGui.addEventListener(t,n,i),this.addDestroyFunc(()=>this.eGui.removeEventListener(t,n))}addCssClass(t){this.cssClassManager.addCssClass(t)}removeCssClass(t){this.cssClassManager.removeCssClass(t)}containsCssClass(t){return this.cssClassManager.containsCssClass(t)}addOrRemoveCssClass(t,n){this.cssClassManager.addOrRemoveCssClass(t,n)}},DZ={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus",checkboxChecked:"checkbox-checked",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off"};function kr(e,t,n){let i=Ii(e,t,n);if(i){let{className:r}=i;if(typeof r=="string"&&r.indexOf("ag-icon")>-1||typeof r=="object"&&r["ag-icon"])return i}let s=document.createElement("span");return s.appendChild(i),s}function Ii(e,t,n,i){let s=null,r=n&&n.getColDef().icons;if(r&&(s=r[e]),t&&!s){let o=t.get("icons");o&&(s=o[e])}if(s){let o;if(typeof s=="function")o=s();else if(typeof s=="string")o=s;else throw new Error("icon from grid options needs to be a string or a function");if(typeof o=="string")return Du(o);if(vR(o))return o;G("iconRenderer should return back a string or a dom object")}else{let o=document.createElement("span"),a=DZ[e];return a||(i?a=e:(G(`Did not find icon ${e}`),a="")),o.setAttribute("class",`ag-icon ag-icon-${a}`),o.setAttribute("unselectable","on"),oi(o,"presentation"),o}}function AB(e,t,n){if(n===0)return!1;let i=Math.abs(e.clientX-t.clientX),s=Math.abs(e.clientY-t.clientY);return Math.max(i,s)<=n}var Wo=class{constructor(e,t=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new Tu,this.eElement=e,this.preventMouseClick=t;let n=this.onTouchStart.bind(this),i=this.onTouchMove.bind(this),s=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",n,{passive:!0}),this.eElement.addEventListener("touchmove",i,{passive:!0}),this.eElement.addEventListener("touchend",s,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",n,{passive:!0}),this.eElement.removeEventListener("touchmove",i,{passive:!0}),this.eElement.removeEventListener("touchend",s,{passive:!1})})}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;let t=this.touchStart;window.setTimeout(()=>{let n=this.touchStart===t;if(this.touching&&n&&!this.moved){this.moved=!0;let i={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(i)}},500)}onTouchMove(e){if(!this.touching)return;let t=this.getActiveTouch(e.touches);if(!t)return;!AB(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){let t={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(t),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){let e=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){let n={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(n),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}},RZ=`<span class="ag-sort-indicator-container">
        <span data-ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>
        <span data-ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>
        <span data-ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>
        <span data-ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>
        <span data-ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>
    </span>`,CR=class extends Ve{constructor(e){super(),this.eSortOrder=X,this.eSortAsc=X,this.eSortDesc=X,this.eSortMixed=X,this.eSortNone=X,e||this.setTemplate(RZ)}wireBeans(e){this.sortController=e.sortController}attachCustomElements(e,t,n,i,s){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=n,this.eSortMixed=i,this.eSortNone=s}setupSort(e,t=!1){this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!(!this.column.isSortable()&&!this.column.getColDef().showRowGroup)&&(this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addManagedPropertyListener("unSortIcon",()=>this.updateIcons()),this.addManagedEventListeners({newColumnsLoaded:this.updateIcons.bind(this),sortChanged:this.onSortChanged.bind(this),columnRowGroupChanged:this.onSortChanged.bind(this)}),this.onSortChanged())}addInIcon(e,t,n){if(t==null)return;let i=Ii(e,this.gos,n);i&&t.appendChild(i)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){let e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){let t=e==="asc";ft(this.eSortAsc,t,{skipAriaHidden:!0})}if(this.eSortDesc){let t=e==="desc";ft(this.eSortDesc,t,{skipAriaHidden:!0})}if(this.eSortNone){let t=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),n=e==null;ft(this.eSortNone,!t&&n,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);let e=this.column.getColDef().showRowGroup;this.gos.isColumnsSortingCoupledToGroup()&&e&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){let e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";ft(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){if(!this.eSortOrder)return;let e=this.sortController.getColumnsWithSortingOrdered(),t=this.sortController.getDisplaySortIndexForColumn(this.column)??-1,n=e.some(s=>this.sortController.getDisplaySortIndexForColumn(s)??!1),i=t>=0&&n;ft(this.eSortOrder,i,{skipAriaHidden:!0}),t>=0?this.eSortOrder.textContent=(t+1).toString():An(this.eSortOrder)}},TZ={selector:"AG-SORT-INDICATOR",component:CR},IZ=`<div class="ag-cell-label-container" role="presentation">
        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">
            <span data-ref="eText" class="ag-header-cell-text"></span>
            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
            <ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>
        </div>
    </div>`,ZD=class extends Ve{constructor(){super(...arguments),this.eFilter=X,this.eFilterButton=X,this.eSortIndicator=X,this.eMenu=X,this.eLabel=X,this.eText=X,this.eSortOrder=X,this.eSortAsc=X,this.eSortDesc=X,this.eSortMixed=X,this.eSortNone=X,this.lastMovingChanged=0}wireBeans(e){this.sortController=e.sortController,this.menuService=e.menuService,this.funcColsService=e.funcColsService}destroy(){super.destroy()}refresh(e){let t=this.params;return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon?!1:(this.setDisplayName(e),!0)}workOutTemplate(){let e=this.params.template??IZ;return e=e&&e.trim?e.trim():e,e}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,[TZ]),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;let t=tr(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=t)}}addInIcon(e,t,n){if(t==null)return;let i=Ii(e,this.gos,n);i&&t.appendChild(i)}setupTap(){let{gos:e}=this;if(e.get("suppressTouch"))return;let t=new Wo(this.getGui(),!0),n=this.shouldSuppressMenuHide(),i=n&&j(this.eMenu),s=i?new Wo(this.eMenu,!0):t;if(this.params.enableMenu){let r=i?"tap":"longTap",o=a=>this.params.showColumnMenuAfterMouseClick(a.touchStart);this.addManagedListeners(s,{[r]:o})}if(this.params.enableSorting){let r=o=>{let a=o.touchStart.target;n&&(this.eMenu?.contains(a)||this.eFilterButton?.contains(a))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListeners(t,{tap:r})}if(this.params.enableFilterButton){let r=new Wo(this.eFilterButton,!0);this.addManagedListeners(r,{tap:()=>this.params.showFilter(this.eFilterButton)}),this.addDestroyFunc(()=>r.destroy())}this.addDestroyFunc(()=>t.destroy()),i&&this.addDestroyFunc(()=>s.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){qi(this.eMenu),this.eMenu=void 0;return}let e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedElementListeners(this.eMenu,{click:()=>this.params.showColumnMenu(this.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){let t=this.params.column,n=this.menuService.isLegacyMenuEnabled();if(e&&!n){if(this.menuService.isFilterMenuInHeaderEnabled(t))return this.params.showFilter(this.eFilterButton??this.eMenu??this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu(this.eMenu??this.eFilterButton??this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.createBean(new CR(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListeners(this.params.column,{movingChanged:()=>{this.lastMovingChanged=new Date().getTime()}}),this.eLabel&&this.addManagedElementListeners(this.eLabel,{click:t=>{let n=this.params.column.isMoving(),s=new Date().getTime()-this.lastMovingChanged<50;if(!(n||s)){let a=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.params.progressSort(a)}}});let e=()=>{let t=this.params.column.getSort();if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",t==="asc"),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",t==="desc"),this.addOrRemoveCssClass("ag-header-cell-sorted-none",!t),this.params.column.getColDef().showRowGroup){let s=!this.funcColsService.getSourceColumnsForGroupColumn(this.params.column)?.every(r=>this.params.column.getSort()==r.getSort());this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",s)}};this.addManagedEventListeners({sortChanged:e,columnRowGroupChanged:e})}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedElementListeners(this.eFilterButton,{click:()=>this.params.showFilter(this.eFilterButton)}):this.eFilterButton=void 0}configureFilter(e,t,n){if(!e)return qi(t),!1;let i=this.params.column;return this.addInIcon("filter",t,i),this.addManagedListeners(i,{filterChanged:n}),n(),!0}onFilterChangedIcon(){let e=this.params.column.isFilterActive();ft(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){let e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){return e?this.eFilterButton??this.eMenu??this.getGui():this.eMenu??this.eFilterButton??this.getGui()}},AZ=class extends Ve{constructor(){super(`<div class="ag-header-group-cell-label" role="presentation">
            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`),this.agOpened=X,this.agClosed=X,this.agLabel=X}wireBeans(e){this.columnModel=e.columnModel}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&G("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened",this.agOpened),this.addInIcon("columnGroupClosed",this.agClosed);let e=s=>{if(Uo(s))return;let r=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),r,"uiColumnExpanded")};this.addTouchAndClickListeners(this.agClosed,e),this.addTouchAndClickListeners(this.agOpened,e);let t=s=>{bu(s)};this.addManagedElementListeners(this.agClosed,{dblclick:t}),this.addManagedElementListeners(this.agOpened,{dblclick:t}),this.addManagedElementListeners(this.getGui(),{dblclick:e}),this.updateIconVisibility();let n=this.params.columnGroup.getProvidedColumnGroup(),i=this.updateIconVisibility.bind(this);this.addManagedListeners(n,{expandedChanged:i,expandableChanged:i})}addTouchAndClickListeners(e,t){let n=new Wo(e,!0);this.addManagedListeners(n,{tap:t}),this.addDestroyFunc(()=>n.destroy()),this.addManagedElementListeners(e,{click:t})}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){let t=this.params.columnGroup.isExpanded();ft(this.agOpened,t),ft(this.agClosed,!t)}else ft(this.agOpened,!1),ft(this.agClosed,!1)}addInIcon(e,t){let n=Ii(e,this.gos,null);n&&t.appendChild(n)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){ft(this.agOpened,!1),ft(this.agClosed,!1);return}}setupLabel(){let{displayName:e,columnGroup:t}=this.params;if(j(e)){let n=tr(e,!0);this.agLabel.textContent=n}this.addOrRemoveCssClass("ag-sticky-label",!t.getColGroupDef()?.suppressStickyLabel)}},MB=(e=>(e.CommunityCoreModule="@ag-grid-community/core",e.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",e.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",e.CsvExportModule="@ag-grid-community/csv-export",e.EnterpriseCoreModule="@ag-grid-enterprise/core",e.RowGroupingModule="@ag-grid-enterprise/row-grouping",e.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",e.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",e.MenuModule="@ag-grid-enterprise/menu",e.SetFilterModule="@ag-grid-enterprise/set-filter",e.MultiFilterModule="@ag-grid-enterprise/multi-filter",e.StatusBarModule="@ag-grid-enterprise/status-bar",e.SideBarModule="@ag-grid-enterprise/side-bar",e.RangeSelectionModule="@ag-grid-enterprise/range-selection",e.MasterDetailModule="@ag-grid-enterprise/master-detail",e.RichSelectModule="@ag-grid-enterprise/rich-select",e.GridChartsModule="@ag-grid-enterprise/charts",e.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",e.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",e.ExcelExportModule="@ag-grid-enterprise/excel-export",e.ClipboardModule="@ag-grid-enterprise/clipboard",e.SparklinesModule="@ag-grid-enterprise/sparklines",e.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",e.AngularModule="@ag-grid-community/angular",e.ReactModule="@ag-grid-community/react",e.VueModule="@ag-grid-community/vue",e))(MB||{}),EC=class Qe{static register(t){Qe.__register(t,!0,void 0)}static registerModules(t){Qe.__registerModules(t,!0,void 0)}static __register(t,n,i){Qe.runVersionChecks(t),i!==void 0?(Qe.areGridScopedModules=!0,Qe.gridModulesMap[i]===void 0&&(Qe.gridModulesMap[i]={}),Qe.gridModulesMap[i][t.moduleName]=t):Qe.globalModulesMap[t.moduleName]=t,Qe.setModuleBased(n)}static __unRegisterGridModules(t){delete Qe.gridModulesMap[t]}static __registerModules(t,n,i){Qe.setModuleBased(n),t&&t.forEach(s=>Qe.__register(s,n,i))}static isValidModuleVersion(t){let[n,i]=t.version.split(".")||[],[s,r]=Qe.currentModuleVersion.split(".")||[];return n===s&&i===r}static runVersionChecks(t){Qe.currentModuleVersion||(Qe.currentModuleVersion=t.version);let n=i=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${i} Please update all modules to the same version.`;if(t.version?Qe.isValidModuleVersion(t)||ke(n(`'${t.moduleName}' is version ${t.version} but the other modules are version ${Qe.currentModuleVersion}.`)):ke(n(`'${t.moduleName}' is incompatible.`)),t.validate){let i=t.validate();i.isValid||ke(`${i.message}`)}}static setModuleBased(t){Qe.moduleBased===void 0?Qe.moduleBased=t:Qe.moduleBased!==t&&(ke("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),ke("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information."))}static __setIsBundled(){Qe.isBundled=!0}static __assertRegistered(t,n,i){if(this.__isRegistered(t,i))return!0;let s;if(Qe.isBundled)s=`AG Grid: unable to use ${n} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(Qe.moduleBased||Qe.moduleBased===void 0){let r=Object.entries(MB).find(([o,a])=>a===t)?.[0];s=`AG Grid: unable to use ${n} as the ${r} is not registered${Qe.areGridScopedModules?` for gridId: ${i}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${r} } from '${t}';
    
    ModuleRegistry.registerModules([ ${r} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else s=`AG Grid: unable to use ${n} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';`;return ke(s),!1}static __isRegistered(t,n){return!!Qe.globalModulesMap[t]||!!Qe.gridModulesMap[n]?.[t]}static __getRegisteredModules(t){return[...uC(Qe.globalModulesMap),...uC(Qe.gridModulesMap[t]||{})]}static __getGridRegisteredModules(t){return uC(Qe.gridModulesMap[t]??{})||[]}static __isPackageBased(){return!Qe.moduleBased}};EC.globalModulesMap={};EC.gridModulesMap={};EC.areGridScopedModules=!1;var Kn=EC,MZ="\u2191",PZ="\u2193",FZ=class extends Ve{constructor(){super(),this.refreshCount=0;let e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");let n=document.createElement("span");n.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(n),this.setTemplateFromElement(e)}wireBeans(e){this.filterManager=e.filterManager}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){let n=Math.abs(t),i=e.formatValue(n),s=j(i)?i:n,r=t>=0;r?this.eDelta.textContent=MZ+s:this.eDelta.textContent=PZ+s,this.eDelta.classList.toggle("ag-value-change-delta-up",r),this.eDelta.classList.toggle("ag-value-change-delta-down",!r)}setTimerToRemoveDelta(){this.refreshCount++;let e=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),An(this.eDelta)}refresh(e,t=!1){let n=e.value;if(n===this.lastValue||(j(e.valueFormatted)?this.eValue.textContent=e.valueFormatted:j(e.value)?this.eValue.textContent=n:An(this.eValue),this.filterManager?.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof n=="number"&&typeof this.lastValue=="number"){let i=n-this.lastValue;this.showDelta(e,i)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=n,!0}},xZ=class extends Ve{constructor(){super(),this.refreshCount=0;let e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}wireBeans(e){this.filterManager=e.filterManager}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;let e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);let t=document.createElement("span");t.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=t,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(e,t=!1){let n=e.value;return Ie(n)&&(n=""),n===this.lastValue||this.filterManager?.isSuppressFlashingCellsBecauseFiltering()?!1:(t||this.addSlideAnimation(),this.lastValue=n,j(e.valueFormatted)?this.eCurrent.textContent=e.valueFormatted:j(e.value)?this.eCurrent.textContent=n:An(this.eCurrent),!0)}},N=class{};N.BACKSPACE="Backspace";N.TAB="Tab";N.ENTER="Enter";N.ESCAPE="Escape";N.SPACE=" ";N.LEFT="ArrowLeft";N.UP="ArrowUp";N.RIGHT="ArrowRight";N.DOWN="ArrowDown";N.DELETE="Delete";N.F2="F2";N.PAGE_UP="PageUp";N.PAGE_DOWN="PageDown";N.PAGE_HOME="Home";N.PAGE_END="End";N.A="KeyA";N.C="KeyC";N.D="KeyD";N.V="KeyV";N.X="KeyX";N.Y="KeyY";N.Z="KeyZ";var OZ=class extends Ve{constructor(e,t,n){super(t,n),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");let{labelSeparator:e,label:t,labelWidth:n,labelAlignment:i,disabled:s}=this.config;s!=null&&this.setDisabled(s),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),n!=null&&this.setLabelWidth(n),this.setLabelAlignment(i||this.labelAlignment),this.refreshLabel()}refreshLabel(){An(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(ft(this.eLabel,!1),oi(this.eLabel,"presentation")):(ft(this.eLabel,!0),oi(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){let n=this.getGui().classList;return n.toggle("ag-label-align-left",e==="left"),n.toggle("ag-label-align-right",e==="right"),n.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(_C(this.eLabel,e),this)}setDisabled(e){e=!!e;let t=this.getGui();return gf(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},PB=class extends OZ{constructor(e,t,n,i){super(e,t,n),this.className=i}postConstruct(){super.postConstruct();let{width:e,value:t,onValueChange:n}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),n!=null&&this.onValueChange(n),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){let e=this.getAriaElement(),t=this.getLabelId(),n=this.getLabel();n==null||n==""||JX(e)!==null?pf(e,""):pf(e,t??"")}setAriaLabel(e){return Eu(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return Cs(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}},cl=class extends PB{constructor(e,t,n="text",i="input"){super(e,e?.template??`
            <div role="presentation">
                <div data-ref="eLabel" class="ag-input-field-label"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${i} data-ref="eInput" class="ag-input-field-input"></${i}>
                </div>
            </div>`,[],t),this.inputType=n,this.displayFieldTag=i,this.eLabel=X,this.eWrapper=X,this.eInput=X}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;let{inputName:e,inputWidth:t}=this.config;e!=null&&this.setInputName(e),t!=null&&this.setInputWidth(t),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return _C(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){let t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return Br(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return Eu(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return gf(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)Br(this.eInput,"autocomplete",null);else{let t=typeof e=="string"?e:"off";Br(this.eInput,"autocomplete",t)}return this}},yR=class extends cl{constructor(e,t="ag-checkbox",n="checkbox"){super(e,t,n),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();let{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;let e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){let t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,t,n){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:n});let i=this.getInputElement(),s={type:"checkboxChanged",id:i.id,name:i.name,selected:e,previousValue:t};this.eventService.dispatchEvent(s)}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;let t=this.isSelected(),n=this.selected=e.target.checked;this.refreshSelectedClass(n),this.dispatchChange(n,t,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",e===!0),this.eWrapper.classList.toggle("ag-indeterminate",e==null)}},wR={selector:"AG-CHECKBOX",component:yR},NZ=class extends Ve{constructor(){super(`
            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[wR]),this.eCheckbox=X}init(e){this.params=e,this.updateCheckbox(e);let t=this.eCheckbox.getInputElement();t.setAttribute("tabindex","-1"),dB(t,"polite"),this.addManagedListeners(t,{click:n=>{if(bu(n),this.eCheckbox.isDisabled())return;let i=this.eCheckbox.getValue();this.onCheckboxChanged(i)},dblclick:n=>{bu(n)}}),this.addManagedElementListeners(this.params.eGridCell,{keydown:n=>{if(n.key===N.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===this.gos.getActiveDomElement()&&this.eCheckbox.toggle();let i=this.eCheckbox.getValue();this.onCheckboxChanged(i),n.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,n=!0;if(e.node.group&&e.column){let a=e.column.getColId();a.startsWith(mf)?t=e.value==null||e.value===""?void 0:e.value==="true":e.node.aggData&&e.node.aggData[a]!==void 0?t=e.value??void 0:n=!1}else t=e.value??void 0;if(!n){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(t);let i=e.disabled!=null?e.disabled:!e.column?.isCellEditable(e.node);this.eCheckbox.setDisabled(i);let s=this.localeService.getLocaleTextFunc(),r=hR(s,t),o=i?r:`${s("ariaToggleCellValue","Press SPACE to toggle cell value")} (${r})`;this.eCheckbox.setInputAriaLabel(o)}onCheckboxChanged(e){let{column:t,node:n,value:i}=this.params,s={type:"cellEditingStarted",column:t,colDef:t?.getColDef(),data:n.data,node:n,rowIndex:n.rowIndex,rowPinned:n.rowPinned,value:i};this.eventService.dispatchEvent(s);let r=this.params.node.setDataValue(this.params.column,e,"edit"),o={type:"cellEditingStopped",column:t,colDef:t?.getColDef(),data:n.data,node:n,rowIndex:n.rowIndex,rowPinned:n.rowPinned,value:i,oldValue:i,newValue:e,valueChanged:r};this.eventService.dispatchEvent(o)}},kZ=class extends Ve{constructor(){super(`<div class="ag-loading">
            <span class="ag-loading-icon" data-ref="eLoadingIcon"></span>
            <span class="ag-loading-text" data-ref="eLoadingText"></span>
        </div>`),this.eLoadingIcon=X,this.eLoadingText=X}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){let e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){let e=Ii("groupLoading",this.gos,null);e&&this.eLoadingIcon.appendChild(e);let t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}},LZ=class extends Ve{constructor(){super('<div class="ag-skeleton-container"></div>')}init(e){let t=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",t),this.addDestroyFunc(()=>pf(e.eParentOfValue)),pf(e.eParentOfValue,t),e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){let e=this.localeService.getLocaleTextFunc();this.getGui().innerText=e("loadingError","ERR");let t=e("ariaSkeletonCellLoadingFailed","Row failed to load");Eu(this.getGui(),t)}setupLoading(e){let n=this.gos.getDocument().createElement("div");n.classList.add("ag-skeleton-effect");let i=e.node.rowIndex;if(i!=null){let o=75+25*(i%2===0?Math.sin(i):Math.cos(i));n.style.width=`${o}%`}this.getGui().appendChild(n);let r=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");Eu(this.getGui(),r)}refresh(e){return!1}destroy(){super.destroy()}},FB=class extends Ve{constructor(){super()}destroy(){super.destroy()}},VZ=class extends FB{init(){let e=this.gos.get("overlayLoadingTemplate");if(this.setTemplate(e??'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!e){let t=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=t("loadingOoo","Loading...")})}}},BZ=class extends FB{init(){let e=this.gos.get("overlayNoRowsTemplate");if(this.setTemplate(e??'<span class="ag-overlay-no-rows-center"></span>'),!e){let t=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=t("noRowsToShow","No Rows To Show")})}}},Au=class extends Ve{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){let e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},GZ=class extends Au{constructor(){super('<div class="ag-tooltip"></div>')}init(e){let{value:t}=e;this.getGui().textContent=tr(t,!0)}};function HZ(e,t,n){let i={},s=e.filter(r=>!t.some(o=>o===r));return s.length>0&&s.forEach(r=>i[r]=xB(r,n).values),i}function xB(e,t,n,i){let s=t.map((a,l)=>({value:a,relevance:UZ(e.toLowerCase(),a.toLocaleLowerCase()),idx:l}));if(s.sort((a,l)=>l.relevance-a.relevance),n&&(s=s.filter(a=>a.relevance!==0)),s.length>0&&i&&i>0){let l=s[0].relevance*i;s=s.filter(c=>l-c.relevance<0)}let r=[],o=[];for(let a of s)r.push(a.value),o.push(a.idx);return{values:r,indices:o}}function UZ(e,t){let n=e.replace(/\s/g,""),i=t.replace(/\s/g,""),s=0,r=-1;for(let o=0;o<n.length;o++){let a=i.indexOf(n[o],r+1);a!==-1&&(r=a,s+=100-r*100/1e4*100)}return s}var WZ=class extends k{constructor(){super(...arguments),this.beanName="userComponentRegistry",this.agGridDefaults={agColumnHeader:ZD,agColumnGroupHeader:AZ,agSortIndicator:CR,agAnimateShowChangeCellRenderer:FZ,agAnimateSlideCellRenderer:xZ,agLoadingCellRenderer:kZ,agSkeletonCellRenderer:LZ,agCheckboxCellRenderer:NZ,agLoadingOverlay:VZ,agNoRowsOverlay:BZ,agTooltipComponent:GZ},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agGroupCellRenderer:"@ag-grid-enterprise/row-grouping",agGroupRowRenderer:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}postConstruct(){let e=this.gos.get("components");e!=null&&ji(e,(t,n)=>this.registerJsComponent(t,n))}registerDefaultComponent(e,t){this.agGridDefaults[e]=t}registerJsComponent(e,t){this.jsComps[e]=t}retrieve(e,t){let n=(a,l)=>({componentFromFramework:l,component:a}),i=this.getFrameworkOverrides().frameworkComponent(t,this.gos.get("components"));if(i!=null)return n(i,!0);let s=this.jsComps[t];if(s){let a=this.getFrameworkOverrides().isFrameworkComponent(s);return n(s,a)}let r=this.agGridDefaults[t];if(r)return n(r,!1);let o=this.enterpriseAgDefaultCompsModule[t];return o?Kn.__assertRegistered(o,`AG Grid '${e}' component: ${t}`,this.gridId):lR(()=>{this.warnAboutMissingComponent(e,t)},"MissingComp"+t),null}warnAboutMissingComponent(e,t){let n=[...Object.keys(this.agGridDefaults).filter(s=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(s)),...Object.keys(this.jsComps)],i=xB(t,n,!0,.8).values;G(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.`),i.length>0&&G(`         Did you mean: [${i.slice(0,3)}]?`),G(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}},Ti=class rf{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(n=>this.onDone(n),n=>this.onReject(n))}static all(t){return t.length?new rf(n=>{let i=t.length,s=new Array(i);t.forEach((r,o)=>{r.then(a=>{s[o]=a,i--,i===0&&n(s)})})}):rf.resolve()}static resolve(t=null){return new rf(n=>n(t))}then(t){return new rf(n=>{this.status===1?n(t(this.resolution)):this.waiters.push(i=>n(t(i)))})}onDone(t){this.status=1,this.resolution=t,this.waiters.forEach(n=>n(t))}onReject(t){}},jZ={propertyName:"dateComponent",cellRenderer:!1},zZ={propertyName:"headerComponent",cellRenderer:!1},$Z={propertyName:"headerGroupComponent",cellRenderer:!1},PV={propertyName:"cellRenderer",cellRenderer:!0},qZ={propertyName:"cellRenderer",cellRenderer:!1},KZ={propertyName:"loadingCellRenderer",cellRenderer:!0},QZ={propertyName:"cellEditor",cellRenderer:!1},FV={propertyName:"innerRenderer",cellRenderer:!0},YZ={propertyName:"loadingOverlayComponent",cellRenderer:!1},JZ={propertyName:"noRowsOverlayComponent",cellRenderer:!1},XZ={propertyName:"tooltipComponent",cellRenderer:!1},SR={propertyName:"filter",cellRenderer:!1},ZZ={propertyName:"floatingFilterComponent",cellRenderer:!1},eee={propertyName:"toolPanel",cellRenderer:!1},tee={propertyName:"statusPanel",cellRenderer:!1},nee={propertyName:"fullWidthCellRenderer",cellRenderer:!0},iee={propertyName:"loadingCellRenderer",cellRenderer:!0},see={propertyName:"groupRowRenderer",cellRenderer:!0},ree={propertyName:"detailCellRenderer",cellRenderer:!0},oee={propertyName:"menuItem",cellRenderer:!1},OB=class NB extends k{constructor(){super(...arguments),this.beanName="userComponentFactory"}wireBeans(t){this.agComponentUtils=t.agComponentUtils,this.componentMetadataProvider=t.componentMetadataProvider,this.userComponentRegistry=t.userComponentRegistry,this.frameworkComponentWrapper=t.frameworkComponentWrapper,this.gridOptions=t.gridOptions}getHeaderCompDetails(t,n){return this.getCompDetails(t,zZ,"agColumnHeader",n)}getHeaderGroupCompDetails(t){let n=t.columnGroup.getColGroupDef();return this.getCompDetails(n,$Z,"agColumnGroupHeader",t)}getFullWidthCellRendererDetails(t){return this.getCompDetails(this.gridOptions,nee,null,t,!0)}getFullWidthLoadingCellRendererDetails(t){return this.getCompDetails(this.gridOptions,iee,"agLoadingCellRenderer",t,!0)}getFullWidthGroupCellRendererDetails(t){return this.getCompDetails(this.gridOptions,see,"agGroupRowRenderer",t,!0)}getFullWidthDetailCellRendererDetails(t){return this.getCompDetails(this.gridOptions,ree,"agDetailCellRenderer",t,!0)}getInnerRendererDetails(t,n){return this.getCompDetails(t,FV,null,n)}getFullWidthGroupRowInnerCellRenderer(t,n){return this.getCompDetails(t,FV,null,n)}getCellRendererDetails(t,n){return this.getCompDetails(t,PV,null,n)}getEditorRendererDetails(t,n){return this.getCompDetails(t,qZ,null,n)}getLoadingCellRendererDetails(t,n){return this.getCompDetails(t,KZ,"agSkeletonCellRenderer",n,!0)}getCellEditorDetails(t,n){return this.getCompDetails(t,QZ,"agCellEditor",n,!0)}getFilterDetails(t,n,i){return this.getCompDetails(t,SR,i,n,!0)}getDateCompDetails(t){return this.getCompDetails(this.gridOptions,jZ,"agDateInput",t,!0)}getLoadingOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,YZ,"agLoadingOverlay",t,!0)}getNoRowsOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,JZ,"agNoRowsOverlay",t,!0)}getTooltipCompDetails(t){return this.getCompDetails(t.colDef,XZ,"agTooltipComponent",t,!0)}getSetFilterCellRendererDetails(t,n){return this.getCompDetails(t,PV,null,n)}getFloatingFilterCompDetails(t,n,i){return this.getCompDetails(t,ZZ,i,n)}getToolPanelCompDetails(t,n){return this.getCompDetails(t,eee,null,n,!0)}getStatusPanelCompDetails(t,n){return this.getCompDetails(t,tee,null,n,!0)}getMenuItemCompDetails(t,n){return this.getCompDetails(t,oee,"agMenuItem",n,!0)}getCompDetails(t,n,i,s,r=!1){let{propertyName:o,cellRenderer:a}=n,{compName:l,jsComp:c,fwComp:u,paramsFromSelector:h,popupFromSelector:f,popupPositionFromSelector:g}=NB.getCompKeys(this.frameworkOverrides,t,n,s),v=I=>{let T=this.userComponentRegistry.retrieve(o,I);T&&(c=T.componentFromFramework?void 0:T.component,u=T.componentFromFramework?T.component:void 0)};if(l!=null&&v(l),c==null&&u==null&&i!=null&&v(i),c&&a&&!this.agComponentUtils.doesImplementIComponent(c)&&(c=this.agComponentUtils.adaptFunction(o,c)),!c&&!u){r&&ke(`Could not find component ${l}, did you forget to configure this component?`);return}let y=this.mergeParamsWithApplicationProvidedParams(t,n,s,h),C=c==null,E=c||u;return{componentFromFramework:C,componentClass:E,params:y,type:n,popupFromSelector:f,popupPositionFromSelector:g,newAgStackInstance:()=>this.newAgStackInstance(E,C,y,n)}}static getCompKeys(t,n,i,s){let{propertyName:r}=i,o,a,l,c,u,h;if(n){let f=n,g=f[r+"Selector"],v=g?g(s):null,y=C=>{typeof C=="string"?o=C:C!=null&&C!==!0&&(t.isFrameworkComponent(C)?l=C:a=C)};v?(y(v.component),c=v.params,u=v.popup,h=v.popupPosition):y(f[r])}return{compName:o,jsComp:a,fwComp:l,paramsFromSelector:c,popupFromSelector:u,popupPositionFromSelector:h}}newAgStackInstance(t,n,i,s){let r=s.propertyName,o=!n,a;if(o)a=new t;else{let c=this.componentMetadataProvider.retrieve(r);a=this.frameworkComponentWrapper.wrap(t,c.mandatoryMethodList,c.optionalMethodList,s)}let l=this.initComponent(a,i);return l==null?Ti.resolve(a):l.then(()=>a)}mergeParamsWithApplicationProvidedParams(t,n,i,s=null){let r=this.gos.getGridCommonParams();zi(r,i);let o=t,a=o&&o[n.propertyName+"Params"];if(typeof a=="function"){let l=a(i);zi(r,l)}else typeof a=="object"&&zi(r,a);return zi(r,s),r}initComponent(t,n){if(this.createBean(t),t.init!=null)return t.init(n)}};function cf(e){let t=e;return t!=null&&t.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}var aee=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,!(!e||!e.beanClasses)&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){Object.entries(e.providedBeanInstances).forEach(([t,n])=>{this.beans[t]=n}),e.beanClasses.forEach(t=>{let n=new t;n.beanName?this.beans[n.beanName]=n:console.error(`Bean ${t.name} is missing beanName`),this.createdBeans.push(n)}),e.derivedBeans?.forEach(t=>{let{beanName:n,bean:i}=t(this);this.beans[n]=i,this.createdBeans.push(i)}),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){if(!e)throw Error("Can't wire to bean since it is null");return this.initBeans([e],t),e}initBeans(e,t){e.forEach(n=>{n.preWireBeans?.(this.beans),n.wireBeans?.(this.beans)}),e.forEach(n=>n.preConstruct?.()),t&&e.forEach(t),e.forEach(n=>n.postConstruct?.())}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;let e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){e?.destroy?.()}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},lee=class extends aee{init(e){this.gridId=e.gridId,this.beans.context=this,super.init(e)}destroy(){super.destroy(),Kn.__unRegisterGridModules(this.gridId)}getGridId(){return this.gridId}};var kB=(e=>(e[e.Left=0]="Left",e[e.Right=1]="Right",e))(kB||{});var cee=`<div class="ag-dnd-ghost ag-unselectable">
<span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
<div class="ag-dnd-ghost-label"></div>
</div>`,uee=class extends k{constructor(){super(...arguments),this.beanName="dragAndDropService",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.dragService=e.dragService,this.mouseEventService=e.mouseEventService,this.environment=e.environment}postConstruct(){this.dropIconMap={pinned:kr("columnMovePin",this.gos,null),hide:kr("columnMoveHide",this.gos,null),move:kr("columnMoveMove",this.gos,null),left:kr("columnMoveLeft",this.gos,null),right:kr("columnMoveRight",this.gos,null),group:kr("columnMoveGroup",this.gos,null),aggregate:kr("columnMoveValue",this.gos,null),pivot:kr("columnMovePivot",this.gos,null),notAllowed:kr("dropNotAllowed",this.gos,null)}}addDragSource(e,t=!1){let n={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:n,dragSource:e}),this.dragService.addDragSource(n)}removeDragSource(e){let t=this.dragSourceAndParamsList.find(n=>n.dragSource===e);t&&(this.dragService.removeDragSource(t.params),Qn(this.dragSourceAndParamsList,t))}destroy(){this.dragSourceAndParamsList.forEach(e=>this.dragService.removeDragSource(e.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0,super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()}onDragStop(e){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){let t=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(t)}this.lastDropTarget=void 0,this.dragItem=null,this.removeGhost()}onDragging(e,t){let n=this.getHorizontalDirection(e),i=this.getVerticalDirection(e);this.eventLastTime=e,this.positionGhost(e);let s=this.dropTargets.filter(o=>this.isMouseOnDropTarget(e,o)),r=this.findCurrentDropTarget(e,s);if(r!==this.lastDropTarget)this.leaveLastTargetIfExists(e,n,i,t),this.lastDropTarget!==null&&r===null&&this.dragSource.onGridExit?.(this.dragItem),this.lastDropTarget===null&&r!==null&&this.dragSource.onGridEnter?.(this.dragItem),this.enterDragTargetIfExists(r,e,n,i,t),this.lastDropTarget=r;else if(r&&r.onDragging){let o=this.createDropTargetEvent(r,e,n,i,t);r.onDragging(o)}}getAllContainersFromDropTarget(e){let t=e.getSecondaryContainers?e.getSecondaryContainers():null,n=[[e.getContainer()]];return t?n.concat(t):n}allContainersIntersect(e,t){for(let n of t){let i=n.getBoundingClientRect();if(i.width===0||i.height===0)return!1;let s=e.clientX>=i.left&&e.clientX<i.right,r=e.clientY>=i.top&&e.clientY<i.bottom;if(!s||!r)return!1}return!0}isMouseOnDropTarget(e,t){let n=this.getAllContainersFromDropTarget(t),i=!1;for(let s of n)if(this.allContainersIntersect(e,s)){i=!0;break}return t.targetContainsSource&&!t.getContainer().contains(this.dragSource.eElement)?!1:i&&t.isInterestedIn(this.dragSource.type,this.dragSource.eElement)}findCurrentDropTarget(e,t){let n=t.length;if(n===0)return null;if(n===1)return t[0];let s=this.gos.getRootNode().elementsFromPoint(e.clientX,e.clientY);for(let r of s)for(let o of t)if(pX(this.getAllContainersFromDropTarget(o)).indexOf(r)!==-1)return o;return null}enterDragTargetIfExists(e,t,n,i,s){if(e){if(e.onDragEnter){let r=this.createDropTargetEvent(e,t,n,i,s);e.onDragEnter(r)}this.setGhostIcon(e.getIconName?e.getIconName():null)}}leaveLastTargetIfExists(e,t,n,i){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){let s=this.createDropTargetEvent(this.lastDropTarget,e,t,n,i);this.lastDropTarget.onDragLeave(s)}this.setGhostIcon(null)}}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(n=>n.external).find(n=>n.getContainer()===e.getContainer())||null}getHorizontalDirection(e){let t=this.eventLastTime&&this.eventLastTime.clientX,n=e.clientX;return t===n?null:t>n?0:1}getVerticalDirection(e){let t=this.eventLastTime&&this.eventLastTime.clientY,n=e.clientY;return t===n?null:t>n?0:1}createDropTargetEvent(e,t,n,i,s){let r=e.getContainer(),o=r.getBoundingClientRect(),{dragItem:a,dragSource:l}=this,c=t.clientX-o.left,u=t.clientY-o.top;return this.gos.addGridCommonParams({event:t,x:c,y:u,vDirection:i,hDirection:n,dragSource:l,fromNudge:s,dragItem:a,dropZoneTarget:r})}positionGhost(e){let t=this.eGhost;if(!t)return;let i=t.getBoundingClientRect().height,s=dZ()-2,r=hZ()-2,o=SB(t.offsetParent),{clientY:a,clientX:l}=e,c=a-o.top-i/2,u=l-o.left-10,h=this.gos.getDocument(),f=h.defaultView||window,g=f.pageYOffset||h.documentElement.scrollTop,v=f.pageXOffset||h.documentElement.scrollLeft;s>0&&u+t.clientWidth>s+v&&(u=s+v-t.clientWidth),u<0&&(u=0),r>0&&c+t.clientHeight>r+g&&(c=r+g-t.clientHeight),c<0&&(c=0),t.style.left=`${u}px`,t.style.top=`${c}px`}removeGhost(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null}createGhost(){this.eGhost=Du(cee),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost),this.environment.applyThemeClasses(this.eGhost),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);let e=this.eGhost.querySelector(".ag-dnd-ghost-label"),t=this.dragSource.dragItemName;cR(t)&&(t=t()),e.innerHTML=tr(t)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";let n=this.gos.getDocument(),i=null,s=null;try{i=n.fullscreenElement}catch{}finally{i||(i=this.gos.getRootNode());let r=i.querySelector("body");r?s=r:i instanceof ShadowRoot?s=i:i instanceof Document?s=i?.documentElement:s=i}this.eGhostParent=s,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):G("Could not find document body, it is needed for dragging columns")}setGhostIcon(e,t=!1){An(this.eGhostIcon);let n=null;e||(e=this.dragSource.getDefaultIconName?this.dragSource.getDefaultIconName():"notAllowed"),n=this.dropIconMap[e],this.eGhostIcon.classList.toggle("ag-shake-left-to-right",t),!(n===this.dropIconMap.hide&&this.gos.get("suppressDragLeaveHidesColumns"))&&n&&this.eGhostIcon.appendChild(n)}},dee=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){let n=t||this.shouldSkipVerticalScroll();if(n&&this.shouldSkipHorizontalScroll())return;let i=this.scrollContainer.getBoundingClientRect(),s=this.scrollByTick;this.tickLeft=e.clientX<i.left+s,this.tickRight=e.clientX>i.right-s,this.tickUp=e.clientY<i.top+s&&!n,this.tickDown=e.clientY>i.bottom-s&&!n,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;let e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){let t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){let t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}};var hee=class extends k{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.sortController=e.sortController,this.filterManager=e.filterManager,this.selectionService=e.selectionService,this.mouseEventService=e.mouseEventService,this.ctrlsService=e.ctrlsService,this.funcColsService=e.funcColsService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){this.gos.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(e=>{let t=e.gridBodyCtrl;this.autoScrollService=new dee({scrollContainer:t.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>t.getScrollFeature().getVScrollPosition().top,setVerticalPosition:n=>t.getScrollFeature().setVerticalScrollPosition(n),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){return!!(this.funcColsService.getRowGroupColumns().length||this.filterManager?.isAnyFilterPresent()||this.sortController.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];let t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){let i=[...this.selectionService.getSelectedNodes()].sort((s,r)=>s.rowIndex==null||r.rowIndex==null?0:this.getRowIndexNumber(s)-this.getRowIndexNumber(r));if(i.indexOf(t)!==-1)return i}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach(t=>{t.setDragging(!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){let{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}isDropZoneWithinThisGrid(e){let n=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:i}=e;return!n.contains(i)}onEnterOrDragging(e){this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e;let t=this.mouseEventService.getNormalisedPosition(e).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){let n=this.isFromThisGrid(e),i=this.gos.get("rowDragManaged"),s=e.dragItem.rowNodes;i&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!n?this.isDropZoneWithinThisGrid(e)||this.clientSideRowModel.highlightRowAtPixel(s[0],t):this.moveRows(s,t))}getRowIndexNumber(e){let t=e.getRowIndexString();return parseInt(xe(t.split("-")),10)}moveRowAndClearHighlight(e){let t=this.clientSideRowModel.getLastHighlightedRowNode(),n=t&&t.highlighted===1,i=this.mouseEventService.getNormalisedPosition(e).y,s=e.dragItem.rowNodes,r=n?1:0;if(this.isFromThisGrid(e))s.forEach(o=>{o.rowTop<i&&(r-=1)}),this.moveRows(s,i,r);else{let o=this.gos.getRowIdCallback(),a=this.clientSideRowModel.getRowIndexAtPixel(i)+1;this.clientSideRowModel.getHighlightPosition(i)===0&&a--,this.clientSideRowModel.updateRowData({add:s.filter(l=>!this.clientSideRowModel.getRowNode(o?.({data:l.data,level:0,rowPinned:l.rowPinned})??l.data.id)).map(l=>l.data),addIndex:a})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t,n=0){this.clientSideRowModel.ensureRowsAtPixel(e,t,n)&&(this.focusService.clearFocusedCell(),this.rangeService?.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer()){G("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(e)){G("addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let t={getContainer:e.getContainer};e.fromGrid?t=e:(e.onDragEnter&&(t.onDragEnter=n=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",n))}),e.onDragLeave&&(t.onDragLeave=n=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",n))}),e.onDragging&&(t.onDragging=n=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",n))}),e.onDragStop&&(t.onDragStop=n=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",n))})),this.dragAndDropService.addDropTarget(B({isInterestedIn:n=>n===2,getIconName:()=>"move",external:!0},t))}getRowDropZone(e){let t=this.getContainer.bind(this),n=this.onDragEnter.bind(this),i=this.onDragLeave.bind(this),s=this.onDragging.bind(this),r=this.onDragStop.bind(this);return e?{getContainer:t,onDragEnter:e.onDragEnter?o=>{n(o),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",o))}:n,onDragLeave:e.onDragLeave?o=>{i(o),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",o))}:i,onDragging:e.onDragging?o=>{s(o),e.onDragging(this.draggingToRowDragEvent("rowDragMove",o))}:s,onDragStop:e.onDragStop?o=>{r(o),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",o))}:r,fromGrid:!0}:{getContainer:t,onDragEnter:n,onDragLeave:i,onDragging:s,onDragStop:r,fromGrid:!0}}draggingToRowDragEvent(e,t){let n=this.mouseEventService.getNormalisedPosition(t).y,i=n>this.pageBoundsService.getCurrentPageHeight(),s=-1,r;i||(s=this.rowModel.getRowIndexAtPixel(n),r=this.rowModel.getRow(s));let o;switch(t.vDirection){case 1:o="down";break;case 0:o="up";break;default:o=null;break}return this.gos.addGridCommonParams({type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:s,overNode:r,y:n,vDirection:o})}dispatchGridEvent(e,t){let n=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(n)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&!this.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(t=>{t.setDragging(!1)})}},fee=class extends k{constructor(){super(...arguments),this.beanName="dragService",this.dragEndFunctions=[],this.dragSources=[]}wireBeans(e){this.mouseEventService=e.mouseEventService}destroy(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0,super.destroy()}removeListener(e){let t=e.dragSource.eElement,n=e.mouseDownListener;if(t.removeEventListener("mousedown",n),e.touchEnabled){let i=e.touchStartListener;t.removeEventListener("touchstart",i,{passive:!0})}}removeDragSource(e){let t=this.dragSources.find(n=>n.dragSource===e);t&&(this.removeListener(t),Qn(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(e){let t=this.onMouseDown.bind(this,e),{eElement:n,includeTouch:i,stopPropagationForTouch:s}=e;n.addEventListener("mousedown",t);let r=null,o=this.gos.get("suppressTouch");i&&!o&&(r=a=>{pR(a.target)||(a.cancelable&&(a.preventDefault(),s&&a.stopPropagation()),this.onTouchStart(e,a))},n.addEventListener("touchstart",r,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:r,touchEnabled:!!i})}getStartTarget(){return this.startTarget}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;let n=t.touches[0];this.touchLastTime=n,this.touchStart=n;let i=l=>this.onTouchMove(l,e.eElement),s=l=>this.onTouchUp(l,e.eElement),r=l=>{l.cancelable&&l.preventDefault()},o=t.target,a=[{target:this.gos.getRootNode(),type:"touchmove",listener:r,options:{passive:!1}},{target:o,type:"touchmove",listener:i,options:{passive:!0}},{target:o,type:"touchend",listener:s,options:{passive:!0}},{target:o,type:"touchcancel",listener:s,options:{passive:!0}}];this.addTemporaryEvents(a),e.dragStartPixels===0&&this.onCommonMove(n,this.touchStart,e.eElement)}onMouseDown(e,t){let n=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||n._alreadyProcessedByDragService||(n._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;let i=l=>this.onMouseMove(l,e.eElement),s=l=>this.onMouseUp(l,e.eElement),r=l=>l.preventDefault(),o=this.gos.getRootNode(),a=[{target:o,type:"mousemove",listener:i},{target:o,type:"mouseup",listener:s},{target:o,type:"contextmenu",listener:r}];this.addTemporaryEvents(a),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{let{target:n,type:i,listener:s,options:r}=t;n.addEventListener(i,s,r)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{let{target:n,type:i,listener:s,options:r}=t;n.removeEventListener(i,s,r)})})}isEventNearStartEvent(e,t){let{dragStartPixels:n}=this.currentDragParams,i=j(n)?n:4;return AB(e,t,i)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,n){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(e,t))return;this.dragging=!0;let i={type:"dragStarted",target:n};this.eventService.dispatchEvent(i),this.currentDragParams.onDragStart(t),this.currentDragParams.onDragging(t)}this.currentDragParams.onDragging(e)}onTouchMove(e,t){let n=this.getFirstActiveTouch(e.touches);n&&this.onCommonMove(n,this.touchStart,t)}onMouseMove(e,t){Ur()&&this.gos.getDocument().getSelection()?.removeAllRanges(),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){let t=this.gos.get("enableCellTextSelection"),n=e.type==="mousemove";return t&&n&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){return!!e.target?.tagName.toLocaleLowerCase()?.match("^a$|textarea|input|select|button")}onTouchUp(e,t){let n=this.getFirstActiveTouch(e.changedTouches);n||(n=this.touchLastTime),this.onUpCommon(n,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(e);let n={type:"dragStopped",target:t};this.eventService.dispatchEvent(n)}this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(n=>n()),this.dragEndFunctions.length=0}},eR=class extends Ve{constructor(e,t,n,i,s,r){super(),this.cellValueFn=e,this.rowNode=t,this.column=n,this.customGui=i,this.dragStartPixels=s,this.suppressVisibilityChange=r,this.dragSource=null}wireBeans(e){this.beans=e}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(Ii("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){let e=this.gos.get("rowDragManaged")?new gee(this,this.beans,this.rowNode,this.column):new pee(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e),this.addDragSource(t)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];let t=this.beans.selectionService.getSelectedNodes();return t.indexOf(this.rowNode)!==-1?t:[this.rowNode]}checkCompatibility(){let e=this.gos.get("rowDragManaged");this.gos.get("treeData")&&e&&G("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){let t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();let t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:i=>{i?.preventDefault()}})[0]);let n=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:()=>{let i=this.getDragItem(),s=i.rowNodes?.length||1,r=this.getRowDragText(this.column);return r?r(i,s):s===1?this.cellValueFn():`${s} ${n("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},LB=class extends k{constructor(e,t,n){super(),this.parent=e,this.rowNode=t,this.column=n}setDisplayedOrVisible(e){let t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let n=!0,i=!1;this.column&&(n=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),i=cR(this.column.getColDef().rowDrag)),i?(this.parent.setDisplayed(!0,t),this.parent.setVisible(n,t)):(this.parent.setDisplayed(n,t),this.parent.setVisible(!0,t))}}},pee=class extends LB{constructor(e,t,n,i){super(e,n,i),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));let e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}},gee=class extends LB{constructor(e,t,n,i){super(e,n,i),this.beans=t}postConstruct(){let e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventService,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let t=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),n=t&&t.shouldPreventRowMove(),i=this.gos.get("suppressRowDrag"),s=this.beans.dragAndDropService.hasExternalDropZones(),r=n&&!s||i;this.setDisplayedOrVisible(r)}},Cf=class Cu{constructor(t){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=Cu.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=t}setData(t){this.setDataCommon(t,!1)}updateData(t){this.setDataCommon(t,!0)}setDataCommon(t,n){let i=this.data;this.data=t,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();let s=this.createDataChangedEvent(t,i,n);this.localEventService?.dispatchEvent(s)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(t,n,i){return{type:"dataChanged",node:this,oldData:n,newData:t,update:i}}getRowIndexString(){return this.rowIndex==null?(ke("Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid."),null):this.rowPinned==="top"?"t-"+this.rowIndex:this.rowPinned==="bottom"?"b-"+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){let t=new Cu(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t}setDataAndId(t,n){let i=j(this.id)?this.createDaemonNode():null,s=this.data;this.data=t,this.updateDataOnDetailNode(),this.setId(n),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,i);let r=this.createDataChangedEvent(t,s,!1);this.localEventService?.dispatchEvent(r)}checkRowSelectable(){let t=this.beans.gos.get("isRowSelectable");this.setRowSelectable(t?t(this):!0)}setRowSelectable(t,n){if(this.selectable!==t){if(this.selectable=t,this.dispatchRowEvent("selectableChanged"),n)return;if(this.beans.gos.get("groupSelectsChildren")){let s=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:s??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(t){let n=this.beans.gos.getRowIdCallback();if(n)if(this.data){let i=this.getGroupKeys(!0);this.id=n({data:this.data,parentKeys:i.length>0?i:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(Cu.ID_PREFIX_ROW_GROUP)&&ke(`Row IDs cannot start with ${Cu.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`)}else this.id=void 0;else this.id=t}getGroupKeys(t=!1){let n=[],i=this;for(t&&(i=i.parent);i&&i.level>=0;)n.push(i.key),i=i.parent;return n.reverse(),n}isPixelInRange(t){return!j(this.rowTop)||!j(this.rowHeight)?!1:t>=this.rowTop&&t<this.rowTop+this.rowHeight}updateIfDifferent(t,n,i){this[t]!==n&&(this[t]=n,this.dispatchRowEvent(i))}setFirstChild(t){this.updateIfDifferent("firstChild",t,"firstChildChanged")}setLastChild(t){this.updateIfDifferent("lastChild",t,"lastChildChanged")}setChildIndex(t){this.updateIfDifferent("childIndex",t,"childIndexChanged")}setRowTop(t){this.oldRowTop=this.rowTop,this.rowTop!==t&&(this.rowTop=t,this.dispatchRowEvent("topChanged"),this.setDisplayed(t!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setDisplayed(t){this.updateIfDifferent("displayed",t,"displayedChanged")}setDragging(t){this.updateIfDifferent("dragging",t,"draggingChanged")}setHighlighted(t){this.updateIfDifferent("highlighted",t,"rowHighlightChanged")}setHovered(t){this.hovered!==t&&(this.hovered=t)}isHovered(){return this.hovered}setAllChildrenCount(t){this.updateIfDifferent("allChildrenCount",t,"allChildrenCountChanged")}setMaster(t){this.master!==t&&(this.master&&!t&&(this.expanded=!1),this.master=t,this.dispatchRowEvent("masterChanged"))}setGroup(t){this.group!==t&&(this.group&&!t&&(this.expanded=!1),this.group=t,this.updateHasChildren(),this.checkRowSelectable(),this.dispatchRowEvent("groupChanged"))}setRowHeight(t,n=!1){this.rowHeight=t,this.rowHeightEstimated=n,this.dispatchRowEvent("heightChanged")}setRowAutoHeight(t,n){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[n.getId()]=t,t!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=Yn(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let t=!1,n=!0,i=0,s=this.__autoHeights;if(s==null||(this.beans.visibleColsService.getAllAutoHeightCols().forEach(a=>{let l=s[a.getId()];if(l==null)if(this.beans.columnModel.isColSpanActive()){let c=[];switch(a.getPinned()){case"left":c=this.beans.visibleColsService.getLeftColsForRow(this);break;case"right":c=this.beans.visibleColsService.getRightColsForRow(this);break;case null:c=this.beans.columnViewportService.getColsWithinViewport(this);break}if(c.includes(a)){t=!0;return}l=-1}else{t=!0;return}else n=!1;l>i&&(i=l)}),t)||((n||i<10)&&(i=this.beans.gos.getRowHeightForNode(this).height),i==this.rowHeight))return;this.setRowHeight(i);let o=this.beans.rowModel;o.onRowHeightChangedDebounced&&o.onRowHeightChangedDebounced()}setRowIndex(t){this.updateIfDifferent("rowIndex",t,"rowIndexChanged")}setUiLevel(t){this.updateIfDifferent("uiLevel",t,"uiLevelChanged")}setExpanded(t,n,i){if(this.expanded===t)return;this.expanded=t,this.dispatchRowEvent("expandedChanged");let s=se(B({},this.createGlobalRowEvent("rowGroupOpened")),{expanded:t,event:n||null});this.beans.rowNodeEventThrottle.dispatchExpanded(s,i),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(t){return this.beans.gos.addGridCommonParams({type:t,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}setDataValue(t,n,i){let r=typeof t!="string"?t:this.beans.columnModel.getCol(t)??this.beans.columnModel.getColDefCol(t),o=this.getValueFromValueService(r);if(this.beans.gos.get("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(r,o,n,i),!1;let a=this.beans.valueService.setValue(this,r,n,i);return this.dispatchCellChangedEvent(r,n,o),this.checkRowSelectable(),a}getValueFromValueService(t){let n=this.leafGroup&&this.beans.columnModel.isPivotMode(),i=this.group&&this.expanded&&!this.footer&&!n,s=!1,r=this.beans.gos.get("groupTotalRow")??this.beans.gos.get("groupIncludeFooter");typeof r!="function"?s=!!r:s=!!(this.beans.gos.getCallback("groupTotalRow")??this.beans.gos.getCallback("groupIncludeFooter"))({node:this});let o=this.beans.gos.get("groupSuppressBlankHeader"),a=i&&s&&!o;return this.beans.valueService.getValue(t,this,!1,a)}dispatchEventForSaveValueReadOnly(t,n,i,s){let r=this.beans.gos.addGridCommonParams({type:"cellEditRequest",event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:t,colDef:t.getColDef(),data:this.data,node:this,oldValue:n,newValue:i,value:i,source:s});this.beans.eventService.dispatchEvent(r)}setGroupValue(t,n){let i=this.beans.columnModel.getCol(t);Ie(this.groupData)&&(this.groupData={});let s=i.getColId(),r=this.groupData[s];r!==n&&(this.groupData[s]=n,this.dispatchCellChangedEvent(i,n,r))}setAggData(t){let n=this.aggData;if(this.aggData=t,this.localEventService){let i=s=>{let r=this.aggData?this.aggData[s]:void 0,o=n?n[s]:void 0;if(r===o)return;let a=this.beans.columnModel.getCol(s);a&&this.dispatchCellChangedEvent(a,r,o)};for(let s in this.aggData)i(s);for(let s in t)s in this.aggData||i(s)}}updateHasChildren(){let t=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(this.beans.gos.isRowModelType("serverSide")){let i=this.beans.gos.get("treeData"),s=this.beans.gos.get("isServerSideGroup");t=!this.stub&&!this.footer&&(i?!!s&&s(this.data):!!this.group)}t!==this.__hasChildren&&(this.__hasChildren=!!t,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}isEmptyRowGroupNode(){return(this.group&&dn(this.childrenAfterGroup))??!1}dispatchCellChangedEvent(t,n,i){let s={type:"cellChanged",node:this,column:t,newValue:n,oldValue:i};this.localEventService?.dispatchEvent(s)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(t){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(n=>n.depthFirstSearch(t)),t(this)}calculateSelectedFromChildren(){let t=!1,n=!1,i=!1;if(!this.childrenAfterGroup?.length)return this.selectable?this.selected:null;for(let s=0;s<this.childrenAfterGroup.length;s++){let r=this.childrenAfterGroup[s],o=r.isSelected();if(!r.selectable){let a=r.calculateSelectedFromChildren();if(a===null)continue;o=a}switch(o){case!0:t=!0;break;case!1:n=!0;break;default:i=!0;break}}if(!(i||t&&n))return t?!0:n?!1:this.selectable?this.selected:null}setSelectedInitialValue(t){this.selected=t}dispatchRowEvent(t){let n={type:t,node:this};this.localEventService?.dispatchEvent(n)}selectThisNode(t,n,i="api"){let s=!this.selectable&&t,r=this.selected===t;if(s||r)return!1;this.selected=t,this.dispatchRowEvent("rowSelected");let o=this.sibling;o&&o.footer&&o.localEventService&&o.dispatchRowEvent("rowSelected");let a=se(B({},this.createGlobalRowEvent("rowSelected")),{event:n||null,source:i});return this.beans.eventService.dispatchEvent(a),!0}setSelected(t,n=!1,i="api"){if(typeof i=="boolean"){G("since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:t,clearSelection:n,rangeSelect:!1,source:i})}setSelectedParams(t){return this.rowPinned?(G("cannot select pinned rows"),0):this.id===void 0?(G("cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(se(B({},t),{nodes:[this.footer?this.sibling:this]}))}isRowPinned(){return this.rowPinned==="top"||this.rowPinned==="bottom"}isParentOfNode(t){let n=this.parent;for(;n;){if(n===t)return!0;n=n.parent}return!1}addEventListener(t,n){this.localEventService||(this.localEventService=new Tu),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.localEventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new oR(this.beans.frameworkOverrides));let i=this.frameworkEventListenerService?.wrap(n)??n;this.localEventService.addEventListener(t,i)}removeEventListener(t,n){if(!this.localEventService)return;let i=this.frameworkEventListenerService?.unwrap(n)??n;this.localEventService.removeEventListener(t,i),this.localEventService.noRegisteredListenersExist()&&(this.localEventService=null)}onMouseEnter(){this.dispatchRowEvent("mouseEnter")}onMouseLeave(){this.dispatchRowEvent("mouseLeave")}getFirstChildOfFirstChild(t){let n=this,i=!0,s=!1,r=null;for(;i&&!s;){let o=n.parent;j(o)&&n.firstChild?o.rowGroupColumn===t&&(s=!0,r=o):i=!1,n=o}return s?r:null}isFullWidthCell(){if(this.detail)return!0;let t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this}):!1}getRoute(){if(this.key==null)return;let t=[],n=this;for(;n&&n.key!=null;)t.push(n.key),n=n.parent;return t.reverse()}createFooter(){if(this.sibling)return;let t=new Set(["eventService","__objectId","sticky"]),n=new Cu(this.beans);Object.keys(this).forEach(i=>{t.has(i)||(n[i]=this[i])}),n.footer=!0,n.setRowTop(null),n.setRowIndex(null),n.oldRowTop=null,n.id="rowGroupFooter_"+this.id,n.sibling=this,this.sibling=n}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}};Cf.ID_PREFIX_ROW_GROUP="row-group-";Cf.ID_PREFIX_TOP_PINNED="t-";Cf.ID_PREFIX_BOTTOM_PINNED="b-";Cf.OBJECT_ID_SEQUENCE=0;var Gr=Cf,mee=class extends k{constructor(){super(...arguments),this.beanName="filterManager",this.advancedFilterModelUpdateQueue=[]}wireBeans(e){this.columnModel=e.columnModel,this.dataTypeService=e.dataTypeService,this.quickFilterService=e.quickFilterService,this.advancedFilterService=e.advancedFilterService,this.columnFilterService=e.columnFilterService}postConstruct(){this.addManagedEventListeners({columnValueChanged:this.refreshFiltersForAggregations.bind(this),columnPivotChanged:this.refreshFiltersForAggregations.bind(this),columnPivotModeChanged:this.refreshFiltersForAggregations.bind(this),newColumnsLoaded:this.updateAdvancedFilterColumns.bind(this),columnVisible:this.updateAdvancedFilterColumns.bind(this),advancedFilterEnabledChanged:({enabled:e})=>this.onAdvancedFilterEnabledChanged(e),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",e=>this.setAdvancedFilterModel(e.currentValue)),this.quickFilterService&&this.addManagedListeners(this.quickFilterService,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})})}isExternalFilterPresentCallback(){let e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"?e({}):!1}doesExternalFilterPass(e){let t=this.gos.get("doesExternalFilterPass");return typeof t=="function"?t(e):!1}setFilterModel(e,t="api"){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}this.columnFilterService?.setFilterModel(e,t)}getFilterModel(){return this.columnFilterService?.getFilterModel()??{}}isColumnFilterPresent(){return!!this.columnFilterService?.isColumnFilterPresent()}isAggregateFilterPresent(){return!!this.columnFilterService?.isAggregateFilterPresent()}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){e?this.columnFilterService?.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):this.advancedFilterService?.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){return!!this.advancedFilterService?.isEnabled()}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}resetQuickFilterCache(){this.quickFilterService?.resetQuickFilterCache()}refreshFiltersForAggregations(){this.gos.getGroupAggFiltering()&&this.onFilterChanged()}onFilterChanged(e={}){let{source:t,additionalEventAttributes:n,columns:i=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.columnFilterService?this.columnFilterService.updateBeforeFilterChanged(e):Ti.resolve()).then(()=>{let s={source:t,type:"filterChanged",columns:i};n&&zi(s,n),this.eventService.dispatchEvent(s),this.columnFilterService?.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){return!!this.columnFilterService?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilterService?.isQuickFilterPresent()}updateAggFiltering(){this.aggFiltering=!!this.gos.getGroupAggFiltering()}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.columnFilterService.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.columnFilterService.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))}isFilterActive(e){return!!this.columnFilterService?.isFilterActive(e)}getOrCreateFilterWrapper(e){return this.columnFilterService?.getOrCreateFilterWrapper(e)??null}getDefaultFloatingFilter(e){return this.columnFilterService.getDefaultFloatingFilter(e)}createFilterParams(e,t){return this.columnFilterService.createFilterParams(e,t)}isFilterAllowed(e){return this.isAdvancedFilterEnabled()?!1:!!this.columnFilterService?.isFilterAllowed(e)}getFloatingFilterCompDetails(e,t){return this.columnFilterService?.getFloatingFilterCompDetails(e,t)}getCurrentFloatingFilterParentModel(e){return this.columnFilterService?.getCurrentFloatingFilterParentModel(e)}destroyFilter(e,t="api"){this.columnFilterService?.destroyFilter(e,t)}areFilterCompsDifferent(e,t){return!!this.columnFilterService?.areFilterCompsDifferent(e,t)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){if(this.isAdvancedFilterEnabled()){if(this.dataTypeService?.isPendingInference()){this.advancedFilterModelUpdateQueue.push(e);return}this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"})}}toggleAdvancedFilterBuilder(e,t){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder(t,e)}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvancedFilterEnabled()?!1:!!this.columnFilterService?.hasFloatingFilters()}getFilterInstance(e,t){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}return this.columnFilterService?.getFilterInstance(e,t)}getColumnFilterInstance(e){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve(void 0)):this.columnFilterService?.getColumnFilterInstance(e)??Promise.resolve(void 0)}warnAdvancedFilters(){G("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(e){this.advancedFilterService?.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advancedFilterModelUpdateQueue.forEach(e=>this.setAdvancedFilterModel(e)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(e){return this.columnFilterService?.getColumnFilterModel(e)}setColumnFilterModel(e,t){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve()):this.columnFilterService?.setColumnFilterModel(e,t)??Promise.resolve()}},vee=class extends Ve{constructor(e,t){super('<div class="ag-filter"></div>'),this.column=e,this.source=t,this.filterWrapper=null}wireBeans(e){this.filterManager=e.filterManager,this.columnModel=e.columnModel}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){return this.filterWrapper?.filterPromise??null}afterInit(){return this.filterWrapper?.filterPromise?.then(()=>{})??Ti.resolve()}afterGuiAttached(e){this.filterWrapper?.filterPromise?.then(t=>{t?.afterGuiAttached?.(e)})}afterGuiDetached(){this.filterWrapper?.filterPromise?.then(e=>{e?.afterGuiDetached?.()})}createFilter(e){let{column:t,source:n}=this;this.filterWrapper=this.filterManager?.getOrCreateFilterWrapper(t)??null,this.filterWrapper?.filterPromise&&this.filterWrapper.filterPromise.then(i=>{let s=i.getGui();if(j(s)||G(`getGui method from filter returned ${s}; it should be a DOM element.`),this.appendChild(s),e){let r={type:"filterOpened",column:t,source:n,eGui:this.getGui()};this.eventService.dispatchEvent(r)}})}onFilterDestroyed(e){(e.source==="api"||e.source==="paramsUpdated")&&e.column.getId()===this.column.getId()&&this.columnModel.getColDefCol(this.column)&&(An(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},VB="ag-resizer-wrapper",Cee=`<div class="${VB}">
        <div data-ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>
        <div data-ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>
        <div data-ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>
        <div data-ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>
        <div data-ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>
        <div data-ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>
        <div data-ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>
        <div data-ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>
    </div>`,yee=class extends k{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupService=e.popupService,this.resizeObserverService=e.resizeObserverService,this.dragService=e.dragService}center(){let{clientHeight:e,clientWidth:t}=this.offsetParent,n=t/2-this.getWidth()/2,i=e/2-this.getHeight()/2;this.offsetElement(n,i)}initialisePosition(){if(this.positioned)return;let{centered:e,forcePopupParentAsOffsetParent:t,minWidth:n,width:i,minHeight:s,height:r,x:o,y:a}=this.config;this.offsetParent||this.setOffsetParent();let l=0,c=0,u=ys(this.element);if(u){let h=this.findBoundaryElement(),f=window.getComputedStyle(h);if(f.minWidth!=null){let g=h.offsetWidth-this.element.offsetWidth;c=parseInt(f.minWidth,10)-g}if(f.minHeight!=null){let g=h.offsetHeight-this.element.offsetHeight;l=parseInt(f.minHeight,10)-g}}if(this.minHeight=s||l,this.minWidth=n||c,i&&this.setWidth(i),r&&this.setHeight(r),(!i||!r)&&this.refreshSize(),e)this.center();else if(o||a)this.offsetElement(o,a);else if(u&&t){let h=this.boundaryEl,f=!0;if(h||(h=this.findBoundaryElement(),f=!1),h){let g=parseFloat(h.style.top),v=parseFloat(h.style.left);f?this.offsetElement(isNaN(v)?0:v,isNaN(g)?0:g):this.setPosition(v,g)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;let n=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(n),this.moveElementDragListener=n):(this.dragService.removeDragSource(n),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{let i=!!e[t],s=this.getResizerElement(t),r={dragStartPixels:0,eElement:s,onDragStart:o=>this.onResizeStart(o,t),onDragging:this.onResize.bind(this),onDragStop:o=>this.onResizeEnd(o,t)};(i||!this.isAlive()&&!i)&&(i?(this.dragService.addDragSource(r),this.resizeListeners.push(r),s.style.pointerEvents="all"):s.style.pointerEvents="none",this.resizable[t]=i)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";let{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){let{popup:t}=this.config,n=this.element,i=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)lf(n,e),e=wB(n),i=!0;else if(e=Math.max(this.minHeight,e),this.positioned){let s=this.getAvailableHeight();s&&e>s&&(e=s)}this.getHeight()!==e&&(i?(n.style.maxHeight="unset",n.style.minHeight="unset"):t?lf(n,e):(n.style.height=`${e}px`,n.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){let{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();let{clientHeight:n}=this.offsetParent;if(!n)return null;let i=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),r=e?this.position.y:i.top,o=e?0:s.top,a=0;if(t){let c=this.element.parentElement;if(c){let{bottom:u}=c.getBoundingClientRect();a=u-i.bottom}}return n+o-r-a}getWidth(){return this.element.offsetWidth}setWidth(e){let t=this.element,{popup:n}=this.config,i=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Cs(t,e),e=CC(t),i=!0;else if(this.positioned){e=Math.max(this.minWidth,e);let{clientWidth:s}=this.offsetParent,r=n?this.position.x:this.element.getBoundingClientRect().left;s&&e+r>s&&(e=s-r)}this.getWidth()!==e&&(i?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?Cs(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,t=0){let{forcePopupParentAsOffsetParent:n}=this.config,i=n?this.boundaryEl:this.element;i&&(this.popupService.positionPopup({ePopup:i,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(i.style.left),parseFloat(i.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;let t=()=>{let n=this.getAvailableHeight();this.element.style.setProperty("max-height",`${n}px`)};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){let{e:t,isLeft:n,isTop:i,anywhereWithin:s,topBuffer:r}=e,o=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y,l=this.shouldSkipX(t,!!n,!!s,o)?0:o,c=this.shouldSkipY(t,!!i,r,a)?0:a;return{movementX:l,movementY:c}}shouldSkipX(e,t,n,i){let s=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:s.left,l=a<=0&&r.left>=e.clientX||r.right<=e.clientX&&r.right<=o.right;return l?!0:(t?l=i<0&&e.clientX>a+r.left||i>0&&e.clientX<a+r.left:n?l=i<0&&e.clientX>o.right||i>0&&e.clientX<a+r.left:l=i<0&&e.clientX>o.right||i>0&&e.clientX<o.right,l)}shouldSkipY(e,t,n=0,i){let s=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:s.top,l=a<=0&&r.top>=e.clientY||r.bottom<=e.clientY&&r.bottom<=o.bottom;return l?!0:(t?l=i<0&&e.clientY>a+r.top+n||i>0&&e.clientY<a+r.top:l=i<0&&e.clientY>o.bottom||i>0&&e.clientY<o.bottom,l)}createResizeMap(){let e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[data-ref=eTopLeftResizer]")},top:{element:e.querySelector("[data-ref=eTopResizer]")},topRight:{element:e.querySelector("[data-ref=eTopRightResizer]")},right:{element:e.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:e.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:e.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;let e=this.element;if(!e)return;let n=new DOMParser().parseFromString(Cee,"text/html").body;e.appendChild(n.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;let e=this.element.querySelector(`.${VB}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");let{popup:n,forcePopupParentAsOffsetParent:i}=this.config;!n&&!i&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){let t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(n=>!n.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){let e=this.getSiblings()||[],t=0,n=0;for(let i=0;i<e.length;i++){let s=e[i],r=!!s.style.flex&&s.style.flex!=="0 0 auto";if(s===this.element)continue;let o=this.minHeight||0,a=this.minWidth||0;if(r){let l=window.getComputedStyle(s);l.minHeight&&(o=parseInt(l.minHeight,10)),l.minWidth&&(a=parseInt(l.minWidth,10))}else o=s.offsetHeight,a=s.offsetWidth;t+=o,n+=a}return{height:t,width:n}}applySizeToSiblings(e){let t=null,n=this.getSiblings();if(n){for(let i=0;i<n.length;i++){let s=n[i];s!==t&&(e?s.style.height=`${s.offsetHeight}px`:s.style.width=`${s.offsetWidth}px`,s.style.flex="0 0 auto",s===this.element&&(t=n[i+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;let{popup:t,forcePopupParentAsOffsetParent:n}=this.config,{isTop:i,isRight:s,isBottom:r,isLeft:o}=this.currentResizer,a=s||o,l=r||i,{movementX:c,movementY:u}=this.calculateMouseMovement({e,isLeft:o,isTop:i}),h=this.position.x,f=this.position.y,g=0,v=0;if(a&&c){let y=o?-1:1,C=this.getWidth(),E=C+c*y,I=!1;o&&(g=C-E,(h+g<=0||E<=this.minWidth)&&(I=!0,g=0)),I||this.setWidth(E)}if(l&&u){let y=i?-1:1,C=this.getHeight(),E=C+u*y,I=!1;i?(v=C-E,(f+v<=0||E<=this.minHeight)&&(I=!0,v=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&C<E&&this.getMinSizeOfSiblings().height+E>this.element.parentElement.offsetHeight&&(I=!0),I||this.setHeight(E)}this.updateDragStartPosition(e.clientX,e.clientY),((t||n)&&g||v)&&this.offsetElement(h+g,f+v)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){let e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;let{x:t,y:n}=this.position,i;this.config.calculateTopBuffer&&(i=this.config.calculateTopBuffer());let{movementX:s,movementY:r}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:i});this.offsetElement(t+s,n+r),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){let e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},BB=class GB extends k{constructor(t,n={}){super(),this.eFocusableElement=t,this.callbacks=n,this.callbacks=B({shouldStopEventPropagation:()=>!1,onTabKeyDown:i=>{if(i.defaultPrevented)return;let s=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,i.shiftKey);s&&(s.focus(),i.preventDefault())}},n)}wireBeans(t){this.focusService=t.focusService}postConstruct(){this.eFocusableElement.classList.add(GB.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedElementListeners(this.eFocusableElement,{focusin:this.callbacks.onFocusIn}),this.callbacks.onFocusOut&&this.addManagedElementListeners(this.eFocusableElement,{focusout:this.callbacks.onFocusOut})}addKeyDownListeners(t){this.addManagedElementListeners(t,{keydown:n=>{if(!(n.defaultPrevented||Uo(n))){if(this.callbacks.shouldStopEventPropagation(n)){bu(n);return}n.key===N.TAB?this.callbacks.onTabKeyDown(n):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(n)}}})}};BB.FOCUS_MANAGED_CLASS="ag-focus-managed";var vl=BB,HB={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function _R(e,t){return bC(e)?(e.debounceMs!=null&&G("debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:t}function bC(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}var wee=class extends Ve{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=X,this.buttonListeners=[]}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.resetTemplate(),this.createManagedBean(new vl(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new yee(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);let n=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" data-ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(n,this.getAgComponents(),e),t=this.getGui(),t&&t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.providedFilterParams=e,this.applyActive=bC(e),this.resetButtonsPanel()}updateParams(e){this.providedFilterParams=e,this.applyActive=bC(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(){let{buttons:e}=this.providedFilterParams,t=e&&e.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(An(this.eButtonsPanel),this.buttonListeners.forEach(s=>s()),this.buttonListeners=[]):t&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!t){this.eButtonsPanel&&qi(this.eButtonsPanel);return}let n=document.createDocumentFragment(),i=s=>{let r,o;switch(s){case"apply":r=this.translate("applyFilter"),o=c=>this.onBtApply(!1,!1,c);break;case"clear":r=this.translate("clearFilter"),o=()=>this.onBtClear();break;case"reset":r=this.translate("resetFilter"),o=()=>this.onBtReset();break;case"cancel":r=this.translate("cancelFilter"),o=c=>{this.onBtCancel(c)};break;default:G("Unknown button type specified");return}let l=Du(`<button
                    type="${s==="apply"?"submit":"button"}"
                    data-ref="${s}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${r}
                </button>`);this.buttonListeners.push(...this.addManagedElementListeners(l,{click:o})),n.append(l)};e.forEach(s=>i(s)),this.eButtonsPanel.append(n),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){let e=_R(this.providedFilterParams,this.getDefaultDebounceMs()),t=Yn(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){let n=()=>{this.onUiChanged(!1,"prevent"),t?.()};e!=null?this.setModelIntoUi(e).then(n):this.resetUiToDefaults().then(n)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){let t=this.getModelFromUi();if(!this.isModelValid(t))return!1;let n=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(n,t)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,t=!1,n){n&&n.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:"columnFilter"});let{closeOnApply:i}=this.providedFilterParams;i&&this.applyActive&&!e&&!t&&this.close(n)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;let t=e,n=t&&t.key,i;(n==="Enter"||n==="Space")&&(i={keyboardEvent:t}),this.hidePopup(i),this.hidePopup=null}onUiChanged(e=!1,t){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){let n=this.isModelValid(this.getModelFromUi()),i=this.queryForHtmlElement('[data-ref="applyFilterButton"]');i&&gf(i,!n)}e&&!t||t==="immediately"?this.onBtApply(e):(!this.applyActive&&!t||t==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){if(!this.positionableFeature||e==="toolPanel")return;let t=e==="floatingFilter"||e==="columnFilter",{positionableFeature:n,gos:i}=this;t?(n.restoreLastSize(),n.setResizable(i.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}refresh(e){return this.providedFilterParams=e,!0}destroy(){let e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,HB[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}},See=class extends yR{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}},_ee=class extends Ve{constructor(e="default",t=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){let e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),!this.unFocusable&&this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){let t=e.key;switch(t){case N.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{let n=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(n)}break;case N.DOWN:case N.UP:e.preventDefault(),this.navigate(t);break;case N.PAGE_DOWN:case N.PAGE_UP:case N.PAGE_HOME:case N.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}navigate(e){let t=e===N.DOWN,n;if(!this.highlightedEl)n=this.itemEls[t?0:this.itemEls.length-1];else{let s=this.itemEls.indexOf(this.highlightedEl)+(t?1:-1);s=Math.min(Math.max(s,0),this.itemEls.length-1),n=this.itemEls[s]}this.highlightItem(n)}navigateToPage(e){if(!this.highlightedEl||this.itemEls.length===0)return;let t=this.itemEls.indexOf(this.highlightedEl),n=this.options.length-1,i=this.itemEls[0].clientHeight,s=Math.floor(this.getGui().clientHeight/i),r=-1;e===N.PAGE_HOME?r=0:e===N.PAGE_END?r=n:e===N.PAGE_DOWN?r=Math.min(t+s,n):e===N.PAGE_UP&&(r=Math.max(t-s,0)),r!==-1&&this.highlightItem(this.itemEls[r])}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){let{value:t,text:n}=e,i=n||t;return this.options.push({value:t,text:i}),this.renderOption(t,i),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{qi(e)}),this.itemEls=[]}updateIndices(){let e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((t,n)=>{nZ(t,n+1),tZ(t,e.length)})}renderOption(e,t){let n=this.gos.getDocument(),i=n.createElement("div");oi(i,"option"),i.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);let s=n.createElement("span");i.appendChild(s),s.textContent=t,this.unFocusable||(i.tabIndex=-1),this.itemEls.push(i),this.addManagedListeners(i,{mouseover:()=>this.highlightItem(i),mousedown:r=>{r.preventDefault(),r.stopPropagation(),this.setValue(e)}}),this.createManagedBean(new Iu({getTooltipValue:()=>t,getGui:()=>i,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>s.scrollWidth>s.clientWidth})),this.getGui().appendChild(i)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;let n=this.options.findIndex(i=>i.value===e);if(n!==-1){let i=this.options[n];this.value=i.value,this.displayValue=i.text,this.highlightItem(this.itemEls[n]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();let e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!ys(e))return;this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(this.activeClass),vC(this.highlightedEl,!0);let t=this.getGui(),{scrollTop:n,clientHeight:i}=t,{offsetTop:s,offsetHeight:r}=e;(s+r>n+i||s<n)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!ys(this.highlightedEl)||(this.highlightedEl.classList.remove(this.activeClass),vC(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},bee=class extends PB{constructor(e){if(super(e,e?.template||`
            <div class="ag-picker-field" role="presentation">
                <div data-ref="eLabel"></div>
                    <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>
                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
                </div>
            </div>`,e?.agComponents||[],e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=X,this.eWrapper=X,this.eDisplayField=X,this.eIcon=X,this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;let{pickerGap:t,maxPickerHeight:n,variableWidth:i,minPickerWidth:s,maxPickerWidth:r}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!i,n!=null&&this.setPickerMaxHeight(n),s!=null&&this.setPickerMinWidth(s),r!=null&&this.setPickerMaxWidth(r)}wireBeans(e){this.popupService=e.popupService}postConstruct(){super.postConstruct(),this.setupAria();let e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);let t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});let{pickerIcon:n,inputWidth:i}=this.config;if(n){let s=Ii(n,this.gos);s&&this.eIcon.appendChild(s)}i!=null&&this.setInputWidth(i)}setupAria(){let e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),mC(e,!1),this.ariaRole&&oi(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){let t=this.getFocusableElement();if(t!==this.eWrapper&&e?.target===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case N.UP:case N.DOWN:case N.ENTER:case N.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case N.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());let e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){let e=this.gos.getDocument(),t=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));let n=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:i,pickerAriaLabelValue:s,modalPicker:r=!0}=this.config,o={modal:r,eChild:t,closeOnEsc:!0,closedCallback:()=>{let g=this.gos.getActiveDomElement(),v=!g||g===e.body;this.beforeHidePicker(),v&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:n(i,s)},a=this.popupService.addPopup(o),{maxPickerHeight:l,minPickerWidth:c,maxPickerWidth:u,variableWidth:h}=this;h?(c&&(t.style.minWidth=c),t.style.width=mR(CC(this.eWrapper)),u&&(t.style.maxWidth=u)):_C(t,u??CC(this.eWrapper));let f=l??`${gR(this.popupService.getPopupParent())}px`;return t.style.setProperty("max-height",f),t.style.position="absolute",this.alignPickerToComponent(),a.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;let{pickerType:e}=this.config,{pickerGap:t}=this,n=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:e,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:n,keepWithinBounds:!0,nudgeY:t})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);let e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;let t=this.getAriaElement();mC(t,e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){this.pickerComponent?.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(e){return _C(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},bR=class extends bee{constructor(e){super(B({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox"},e))}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");let{options:e,value:t,placeholder:n}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),n&&t==null&&(this.eDisplayField.textContent=n),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new _ee("select",!0)),this.listComponent.setParentComponent(this);let e=this.listComponent.getAriaElement(),t=`ag-select-list-${this.listComponent.getCompId()}`;e.setAttribute("id",t),cZ(this.getAriaElement(),e),this.listComponent.addManagedListeners(this.listComponent,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})}}),this.listComponent.addManagedListeners(this.listComponent,{fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){let{key:t}=e;switch(t===N.TAB&&this.hidePicker(),t){case N.ENTER:case N.UP:case N.DOWN:case N.PAGE_UP:case N.PAGE_DOWN:case N.PAGE_HOME:case N.PAGE_END:e.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(e):super.onKeyDown(e);break;case N.ESCAPE:super.onKeyDown(e);break}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){return this.listComponent?.clearOptions(),this}setValue(e,t,n){if(this.value===e||!this.listComponent)return this;if(n||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue())return this;let s=this.listComponent.getDisplayValue();return s==null&&this.config.placeholder&&(s=this.config.placeholder),this.eDisplayField.textContent=s,this.setTooltip({newTooltipText:s??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,t)}destroy(){this.listComponent&&(this.listComponent=this.destroyBean(this.listComponent)),super.destroy()}},Eee={selector:"AG-SELECT",component:bR},UB=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(e=>{if(typeof e=="string")return;let t=[["displayKey"],["displayName"],["predicate","test"]],n=i=>i.some(s=>e[s]!=null)?!0:(G(`ignoring FilterOptionDef as it doesn't contain one of '${i}'`),!1);if(!t.every(n)){this.filterOptions=this.filterOptions.filter(i=>i===e)||[];return}this.customFilterOptions[e.displayKey]=e})}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){let t=this.filterOptions[0];typeof t=="string"?this.defaultOption=t:t.displayKey?this.defaultOption=t.displayKey:G("invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else G("no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}},WB=class extends wee{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){let t=this.optionsFactory.getCustomOption(e);if(t){let{numberOfInputs:i}=t;return i??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,n)=>{n===0?t.setValue(e,!0):t.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){let e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;let n=!e.operator,i=!t.operator;if(!n&&i||n&&!i)return!1;let r;if(n){let o=e,a=t;r=this.areSimpleModelsEqual(o,a)}else{let o=e,a=t;r=o.operator===a.operator&&gl(o.conditions,a.conditions,(l,c)=>this.areSimpleModelsEqual(l,c))}return r}shouldRefresh(e){let t=this.getModel(),n=t?t.conditions??[t]:null,i=e.filterOptions?.map(r=>typeof r=="string"?r:r.displayKey)??this.getDefaultFilterOptions();return!(!(!n||n.every(r=>i.find(o=>o===r.type)!==void 0))||typeof e.maxNumConditions=="number"&&n&&n.length>e.maxNumConditions)}refresh(e){return!this.shouldRefresh(e)||!super.refresh(e)?!1:(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){let n=e,i=n.conditions;i==null&&(i=[],G("Filter model is missing 'conditions'"));let s=this.validateAndUpdateConditions(i),r=this.getNumConditions();if(s<r)this.removeConditionsAndOperators(s);else if(s>r)for(let a=r;a<s;a++)this.createJoinOperatorPanel(),this.createOption();let o=n.operator==="OR";this.eJoinOperatorsAnd.forEach(a=>a.setValue(!o,!0)),this.eJoinOperatorsOr.forEach(a=>a.setValue(o,!0)),i.forEach((a,l)=>{this.eTypes[l].setValue(a.type,!0),this.setConditionIntoUi(a,l)})}else{let n=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(n.type,!0),this.setConditionIntoUi(n,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),Ti.resolve()}validateAndUpdateConditions(e){let t=e.length;return t>this.maxNumConditions&&(e.splice(this.maxNumConditions),G('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),t=this.maxNumConditions),t}doesFilterPass(e){let t=this.getModel();if(t==null)return!0;let{operator:n}=t,i=[];if(n){let r=t;i.push(...r.conditions??[])}else i.push(t);return i[n&&n==="OR"?"some":"every"](r=>this.individualConditionPasses(e,r))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new UB,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){this.maxNumConditions=e.maxNumConditions??2,this.maxNumConditions<1&&(G('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=e.numAlwaysVisibleConditions??1,this.numAlwaysVisibleConditions<1&&(G('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(G('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){let e=this.createManagedBean(new bR);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());let t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);let n=this.getNumConditions()-1;this.forEachPositionInput(n,i=>this.resetInput(i)),this.addChangedListeners(e,n)}createJoinOperatorPanel(){let e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");let t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),n=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);let i=this.eJoinOperatorPanels.length-1,s=this.joinOperatorId++;this.resetJoinOperatorAnd(t,i,s),this.resetJoinOperatorOr(n,i,s),this.isReadOnly()||(t.onValueChange(this.listener),n.onValueChange(this.listener))}createJoinOperator(e,t,n){let i=this.createManagedBean(new See);return e.push(i),i.addCssClass("ag-filter-condition-operator"),i.addCssClass(`ag-filter-condition-operator-${n}`),t.appendChild(i.getGui()),i}getDefaultJoinOperator(e){return e==="AND"||e==="OR"?e:"AND"}createFilterListOptions(){let e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map(t=>typeof t=="string"?this.createBoilerplateListOption(t):this.createCustomListOption(t))}putOptionsIntoDropdown(e){this.filterListOptions.forEach(t=>{e.addOption(t)}),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){let{displayKey:t}=e,n=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:n?this.localeService.getLocaleTextFunc()(n.displayKey,n.displayName):this.translate(t)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){let e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let n=0;n<this.getNumConditions();n++)this.isConditionUiComplete(n)?e=n:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{let n=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<n){this.removeConditionsAndOperators(n+1);let i=e+1,s=n-i;s>0&&this.removeConditionsAndOperators(i,s),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((i,s)=>{let r=this.isConditionDisabled(s,e);i.setDisabled(r||this.filterListOptions.length<=1),s===1&&(gf(this.eJoinOperatorPanels[0],r),this.eJoinOperatorsAnd[0].setDisabled(r),this.eJoinOperatorsOr[0].setDisabled(r))}),this.eConditionBodies.forEach((i,s)=>{ft(i,this.isConditionBodyVisible(s))});let n=(t??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach(i=>{i.setValue(!n,!0)}),this.eJoinOperatorsOr.forEach(i=>{i.setValue(n,!0)}),this.forEachInput((i,s,r,o)=>{this.setElementDisplayed(i,s<o),this.setElementDisabled(i,this.isConditionDisabled(r,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,t),this.removeElements(this.eConditionBodies,e,t),this.removeValueElements(e,t);let n=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,n,t),this.removeComponents(this.eJoinOperatorsAnd,n,t),this.removeComponents(this.eJoinOperatorsOr,n,t)}removeElements(e,t,n){this.removeItems(e,t,n).forEach(s=>qi(s))}removeComponents(e,t,n){this.removeItems(e,t,n).forEach(s=>{qi(s.getGui()),this.destroyBean(s)})}removeItems(e,t,n){return n==null?e.splice(t):e.splice(t,n)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus)if(this.isReadOnly())this.eFilterBody.focus();else{let t=this.getInputs(0)[0];if(!t)return;t instanceof cl&&t.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();let e=this.getModel();this.resetUiToActiveModel(e);let t=-1,n=-1,i=!1,s=this.getJoinOperator();for(let o=this.getNumConditions()-1;o>=0;o--)if(this.isConditionUiComplete(o))t===-1&&(t=o,n=o);else{let a=o>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(o-1),l=o<t;(a||l)&&(this.removeConditionsAndOperators(o,1),i=!0,l&&n--)}let r=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),r=!0),this.shouldAddNewConditionAtEnd(n===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),r=!0),r&&this.updateConditionStatusesAndValues(n,s),i&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=n}getPlaceholderText(e,t){let n=this.translate(e);if(cR(this.filterPlaceholder)){let i=this.filterPlaceholder,s=this.eTypes[t].getValue(),r=this.translate(s);n=i({filterOptionKey:s,filterOption:r,placeholder:n})}else typeof this.filterPlaceholder=="string"&&(n=this.filterPlaceholder);return n}resetPlaceholder(){let e=this.localeService.getLocaleTextFunc();this.forEachInput((t,n,i,s)=>{if(!(t instanceof cl))return;let r=n===0&&s>1?"inRangeStart":n===0?"filterOoo":"inRangeEnd",o=n===0&&s>1?e("ariaFilterFromValue","Filter from value"):n===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(r,i)),t.setInputAriaLabel(o)})}setElementValue(e,t,n){e instanceof cl&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){e instanceof Ve&&ft(e.getGui(),t)}setElementDisabled(e,t){e instanceof Ve&&gf(e.getGui(),t)}attachElementOnChange(e,t){e instanceof cl&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,n)=>{this.forEachPositionTypeInput(n,t,e)})}forEachPositionInput(e,t){let n=this.getConditionType(e);this.forEachPositionTypeInput(e,n,t)}forEachPositionTypeInput(e,t,n){let i=this.getNumberOfInputs(t),s=this.getInputs(e);for(let r=0;r<s.length;r++){let o=s[r];o!=null&&n(o,r,e,i)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){let t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(n=>n==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){let e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinOperatorsAnd.forEach((t,n)=>this.resetJoinOperatorAnd(t,n,this.joinOperatorId+n)),this.eJoinOperatorsOr.forEach((t,n)=>this.resetJoinOperatorOr(t,n,this.joinOperatorId+n)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),Ti.resolve()}resetType(e){let n=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(n).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,n){this.resetJoinOperator(e,t,this.isDefaultOperator("AND"),this.translate("andCondition"),n)}resetJoinOperatorOr(e,t,n){this.resetJoinOperator(e,t,this.isDefaultOperator("OR"),this.translate("orCondition"),n)}resetJoinOperator(e,t,n,i,s){this.updateJoinOperatorDisabled(e.setValue(n,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${s}`).setLabel(i),t)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t)),this.eJoinOperatorsOr.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t))}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){let n=this.mapValuesFromModel(e);this.forEachInput((i,s,r)=>{r===t&&this.setElementValue(i,n[s]!=null?n[s]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,n,i)=>{this.setElementValue(t,n===0&&i===0?e:null,!0)})}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,n=>{this.attachElementOnChange(n,this.listener)}))}individualConditionPasses(e,t){let n=this.getCellValue(e.node),i=this.mapValuesFromModel(t),s=this.optionsFactory.getCustomOption(t.type),r=this.evaluateCustomFilter(s,i,n);return r??(n==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(i,n,t,e))}evaluateCustomFilter(e,t,n){if(e==null)return;let{predicate:i}=e;if(i!=null&&!t.some(s=>s==null))return i(t,n)}isBlank(e){return e==null||typeof e=="string"&&e.trim().length===0}hasInvalidInputs(){return!1}},jB=class extends WB{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case"equals":case"notEqual":if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case"lessThan":case"lessThanOrEqual":if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case"inRange":if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,n){let i=this.comparator(),s=e[0]!=null?i(e[0],t):0;switch(n.type){case"equals":return s===0;case"notEqual":return s!==0;case"greaterThan":return s>0;case"greaterThanOrEqual":return s>=0;case"lessThan":return s<0;case"lessThanOrEqual":return s<=0;case"inRange":{let r=i(e[1],t);return this.scalarFilterParams.inRangeInclusive?s>=0&&r<=0:s>0&&r<0}case"blank":return this.isBlank(t);case"notBlank":return!this.isBlank(t);default:return G('Unexpected type of filter "'+n.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},Dee=65,Ree=67,Tee=86,Iee=68,Aee=90,Mee=89;function zB(e){return e.altKey||e.ctrlKey||e.metaKey?!1:e.key.length===1}function tR(e,t,n,i,s){let r=i?i.getColDef().suppressKeyboardEvent:void 0;if(!r)return!1;let o=e.addGridCommonParams({event:t,editing:s,column:i,node:n,data:n.data,colDef:i.getColDef()});return!!(r&&r(o))}function Pee(e,t,n,i){let s=i.getDefinition(),r=s&&s.suppressHeaderKeyboardEvent;if(!j(r))return!1;let o=e.addGridCommonParams({colDef:s,column:i,headerRowIndex:n,event:t});return!!r(o)}function Fee(e){let{keyCode:t}=e,n;switch(t){case Dee:n=N.A;break;case Ree:n=N.C;break;case Tee:n=N.V;break;case Iee:n=N.D;break;case Aee:n=N.Z;break;case Mee:n=N.Y;break;default:n=e.code}return n}function xee(e,t=!1){return e===N.DELETE?!0:!t&&e===N.BACKSPACE?mB():!1}var Cl=class extends cl{constructor(e,t="ag-text-field",n="text"){super(e,t,n)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){return this.eInput.value!==e&&(this.eInput.value=j(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){let e=new RegExp(`[${this.config.allowedCharPattern}]`),t=n=>{zB(n)&&n.key&&!e.test(n.key)&&n.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:n=>{let i=n.clipboardData?.getData("text");i&&i.split("").some(s=>!e.test(s))&&n.preventDefault()}})}},DC={selector:"AG-INPUT-TEXT-FIELD",component:Cl},ER=class extends Cl{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListeners(this.eInput,{blur:()=>{let s=parseFloat(this.eInput.value),r=isNaN(s)?"":this.normalizeValue(s.toString());this.value!==r&&this.setValue(r)},wheel:this.onWheel.bind(this)}),this.eInput.step="any";let{precision:e,min:t,max:n,step:i}=this.config;typeof e=="number"&&this.setPrecision(e),typeof t=="number"&&this.setMin(t),typeof n=="number"&&this.setMax(n),typeof i=="number"&&this.setStep(i)}onWheel(e){this.gos.getActiveDomElement()===this.eInput&&e.preventDefault()}normalizeValue(e){if(e==="")return"";this.precision!=null&&(e=this.adjustPrecision(e));let t=parseFloat(e);return this.min!=null&&t<this.min?e=this.min.toString():this.max!=null&&t>this.max&&(e=this.max.toString()),e}adjustPrecision(e,t){if(this.precision==null)return e;if(t){let i=parseFloat(e).toFixed(this.precision);return parseFloat(i).toString()}let n=String(e).split(".");if(n.length>1){if(n[1].length<=this.precision)return e;if(this.precision>0)return`${n[0]}.${n[1].slice(0,this.precision)}`}return n[0]}setMin(e){return this.min===e?this:(this.min=e,Br(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,Br(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,Br(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(n=>super.setValue(n,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,n){if(j(n)){let i=this.isScientificNotation(n);if(i&&this.eInput.validity.valid)return e(n);if(!i){n=this.adjustPrecision(n);let s=this.normalizeValue(n);i=n!=s}if(i)return t(n)}return e(n)}getValue(){if(!this.eInput.validity.valid)return;let e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},Oee={selector:"AG-INPUT-NUMBER-FIELD",component:ER},$B=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],DR=class{constructor(e,t,n){this.localeService=e,this.optionsFactory=t,this.valueFormatter=n}getModelAsString(e){if(!e)return null;let t=e.operator!=null,n=this.localeService.getLocaleTextFunc();if(t){let i=e,r=(i.conditions??[]).map(a=>this.getModelAsString(a)),o=i.operator==="AND"?"andCondition":"orCondition";return r.join(` ${n(o,HB[o])} `)}else{if(e.type==="blank"||e.type==="notBlank")return n(e.type,e.type);{let i=e,s=this.optionsFactory.getCustomOption(i.type),{displayKey:r,displayName:o,numberOfInputs:a}=s||{};return r&&o&&a===0?(n(r,o),o):this.conditionToString(i,s)}}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){return this.valueFormatter?this.valueFormatter(e??null)??"":String(e)}},qB=class extends DR{conditionToString(e,t){let{numberOfInputs:n}=t||{};return e.type=="inRange"||n===2?`${this.formatValue(e.filter)}-${this.formatValue(e.filterTo)}`:e.filter!=null?this.formatValue(e.filter):`${e.type}`}};function nR(e){let{allowedCharPattern:t}=e??{};return t??null}var Nee=class extends jB{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern!==e.allowedCharPattern?!1:super.refresh(e)}mapValuesFromModel(e){let{filter:t,filterTo:n,type:i}=e||{};return[this.processValue(t),this.processValue(n)].slice(0,this.getNumberOfInputs(i))}getDefaultDebounceMs(){return 500}comparator(){return(e,t)=>e===t?0:e<t?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new qB(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return $B}setElementValue(e,t,n){let i=!n&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(t??null):t;super.setElementValue(e,i)}createValueElement(){let e=nR(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),oi(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,n,i){let s=this.createManagedBean(i?new Cl({allowedCharPattern:i}):new ER);s.addCssClass(`ag-filter-${n}`),s.addCssClass("ag-filter-filter"),t.push(s),e.appendChild(s.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}getValues(e){let t=[];return this.forEachPositionInput(e,(n,i,s,r)=>{i<r&&t.push(this.processValue(this.stringToFloat(n.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getFilterType(){return"number"}processValue(e){return e==null||isNaN(e)?null:e}stringToFloat(e){if(typeof e=="number")return e;let t=dl(e);return t!=null&&t.trim()===""&&(t=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(t):t==null||t.trim()==="-"?null:parseFloat(t)}createCondition(e){let t=this.getConditionType(e),n={filterType:this.getFilterType(),type:t},i=this.getValues(e);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{if(!t.getInputElement().validity.valid){e=!0;return}}),e}},KB=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],QB=class extends DR{conditionToString(e,t){let{numberOfInputs:n}=t||{};return e.type=="inRange"||n===2?`${e.filter}-${e.filterTo}`:e.filter!=null?`${e.filter}`:`${e.type}`}};function YB(e){let t=e&&e.trim();return t===""?e:t}var kee=class extends WB{constructor(){super("textFilter"),this.defaultFormatter=e=>e,this.defaultLowercaseFormatter=e=>e==null?null:e.toString().toLowerCase(),this.defaultMatcher=({filterOption:e,value:t,filterText:n})=>{if(n==null)return!1;switch(e){case"contains":return t.indexOf(n)>=0;case"notContains":return t.indexOf(n)<0;case"equals":return t===n;case"notEqual":return t!=n;case"startsWith":return t.indexOf(n)===0;case"endsWith":{let i=t.lastIndexOf(n);return i>=0&&i===t.length-n.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[]}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new QB(this.localeService,this.optionsFactory)}getTextMatcher(){let e=this.textFilterParams.textCustomComparator;return e?(G("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:t,value:n,filterText:i})=>e(t,n,i)):this.textFilterParams.textMatcher||this.defaultMatcher}createCondition(e){let t=this.getConditionType(e),n={filterType:this.getFilterType(),type:t},i=this.getValuesWithSideEffects(e,!0);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}getFilterType(){return"text"}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){let n=[];return this.forEachPositionInput(e,(i,s,r,o)=>{if(s<o){let a=dl(i.getValue());t&&this.textFilterParams.trimInput&&(a=YB(a)??null,i.setValue(a,!0)),n.push(a)}}),n}getDefaultFilterOptions(){return KB}createValueElement(){let e=document.createElement("div");return e.classList.add("ag-filter-body"),oi(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,n){let i=this.createManagedBean(new Cl);i.addCssClass(`ag-filter-${n}`),i.addCssClass("ag-filter-filter"),t.push(i),e.appendChild(i.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}mapValuesFromModel(e){let{filter:t,filterTo:n,type:i}=e||{};return[t||null,n||null].slice(0,this.getNumberOfInputs(i))}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,n,i){let s=e.map(f=>this.formatter(f))||[],r=this.formatter(t),{api:o,colDef:a,column:l,context:c,textFormatter:u}=this.textFilterParams;if(n.type==="blank")return this.isBlank(t);if(n.type==="notBlank")return!this.isBlank(t);let h={api:o,colDef:a,column:l,context:c,node:i.node,data:i.data,filterOption:n.type,value:r,textFormatter:u};return s.some(f=>this.matcher(se(B({},h),{filterText:f})))}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}};function JB(e){if(typeof e=="number")return e;if(typeof e=="string"){let t=parseInt(e);return isNaN(t)?void 0:t}}function Xs(e,t=Number.MAX_VALUE){return n=>{let i=JB(n);if(!(i==null||i<e||i>t))return i}}function uf(e,t){return e.toString().padStart(t,"0")}function Lee(e,t){let n=[];for(let i=e;i<=t;i++)n.push(i);return n}function Vee(e,t,n){return typeof e!="number"?"":e.toString().replace(".",n).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${t}`)}function Qi(e,t=!0,n="-"){if(!e)return null;let i=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(s=>uf(s,2)).join(n);return t&&(i+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map(s=>uf(s,2)).join(":")),i}var kD=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function df(e,t="YYYY-MM-DD"){let n=uf(e.getFullYear(),4),i=["January","February","March","April","May","June","July","August","September","October","November","December"],s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r={YYYY:()=>n.slice(n.length-4,n.length),YY:()=>n.slice(n.length-2,n.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>i[e.getMonth()],MMM:()=>i[e.getMonth()].slice(0,3),MM:()=>uf(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${kD(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${kD(e.getDate())}`,DD:()=>uf(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>s[e.getDay()],ddd:()=>s[e.getDay()].slice(0,3),dd:()=>s[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${kD(e.getDay())}`,d:()=>`${e.getDay()}`},o=new RegExp(Object.keys(r).join("|"),"g");return t.replace(o,a=>a in r?r[a]():a)}function ri(e){if(!e)return null;let[t,n]=e.split(" ");if(!t)return null;let i=t.split("-").map(h=>parseInt(h,10));if(i.filter(h=>!isNaN(h)).length!==3)return null;let[s,r,o]=i,a=new Date(s,r-1,o);if(a.getFullYear()!==s||a.getMonth()!==r-1||a.getDate()!==o)return null;if(!n||n==="00:00:00")return a;let[l,c,u]=n.split(":").map(h=>parseInt(h,10));return l>=0&&l<24&&a.setHours(l),c>=0&&c<60&&a.setMinutes(c),u>=0&&u<60&&a.setSeconds(u),a}var XB=class{constructor(e,t,n,i,s){this.alive=!0,this.context=e,this.eParent=i,t.getDateCompDetails(n).newAgStackInstance().then(a=>{if(!this.alive){e.destroyBean(a);return}this.dateComp=a,a&&(i.appendChild(a.getGui()),a.afterGuiAttached&&a.afterGuiAttached(),this.tempValue&&a.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled),s?.(this))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){ft(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(e)}updateParams(e){let t=!1;this.dateComp?.refresh&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(e)!==null&&(t=!0),!t&&this.dateComp?.onParamsUpdated&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(e)!==null&&G("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(e){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(e)}},ZB=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],eG=class extends DR{constructor(e,t,n){super(t,n),this.dateFilterParams=e}conditionToString(e,t){let{type:n}=e,{numberOfInputs:i}=t||{},s=n=="inRange"||i===2,r=ri(e.dateFrom),o=ri(e.dateTo),a=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(s){let l=r!==null?df(r,a):"null",c=o!==null?df(o,a):"null";return`${l}-${c}`}return r!=null?df(r,a):`${n}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},xV=1e3,OV=1/0,Bee=class extends jB{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=xV,this.maxValidYear=OV,this.minValidDate=null,this.maxValidDate=null}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){let{dateFrom:t,dateTo:n,type:i}=e||{};return[t&&ri(t)||null,n&&ri(n)||null].slice(0,this.getNumberOfInputs(i))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,t){let n=t;return t==null||n<e?-1:n>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);let t=(n,i)=>{if(e[n]!=null)if(isNaN(e[n]))G(`DateFilter ${n} is not a number`);else return e[n]==null?i:Number(e[n]);return i};this.minValidYear=t("minValidYear",xV),this.maxValidYear=t("maxValidYear",OV),this.minValidYear>this.maxValidYear&&G("DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:ri(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:ri(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&G("DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new eG(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){let t=new XB(this.context,this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc(()=>t.destroy()),t}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return ZB}createValueElement(){let t=this.gos.getDocument().createElement("div");return t.classList.add("ag-filter-body"),this.createFromToElement(t,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(t,this.eConditionPanelsTo,this.dateConditionToComps,"to"),t}createFromToElement(e,t,n,i){let r=this.gos.getDocument().createElement("div");r.classList.add(`ag-filter-${i}`),r.classList.add(`ag-filter-date-${i}`),t.push(r),e.appendChild(r),n.push(this.createDateCompWrapper(r))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),this.removeItems(this.eConditionPanelsFrom,e,t),this.removeItems(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,n){this.removeItems(e,t,n).forEach(s=>s.destroy())}isValidDateValue(e){if(e===null)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((n,i,s,r)=>{s!==e||!t||i>=r||(t=t&&this.isValidDateValue(n.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}getFilterType(){return"date"}createCondition(e){let t=this.getConditionType(e),n={},i=this.getValues(e);return i.length>0&&(n.dateFrom=Qi(i[0])),i.length>1&&(n.dateTo=Qi(i[1])),B({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:t},n)}resetPlaceholder(){let e=this.localeService.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),n=e("ariaFilterValue","Filter Value");this.forEachInput(i=>{i.setInputPlaceholder(t),i.setInputAriaLabel(n)})}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){let t=[];return this.forEachPositionInput(e,(n,i,s,r)=>{i<r&&t.push(n.getDate())}),t}translate(e){return e==="lessThan"?super.translate("before"):e==="greaterThan"?super.translate("after"):super.translate(e)}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}},RR=class extends k{constructor(e,t,n,i){super(),this.columnOrGroup=e,this.columnOrGroup=e,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=i,this.beans=n}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?xe(this.colsSpanning):this.columnOrGroup}postConstruct(){let e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){let e=this.beans.gos.get("suppressColumnMoveAnimation"),t=j(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){let e=this.getColumnOrGroup(),t=e.getLeft(),n=e.getOldLeft(),i=this.modifyLeftForPrintLayout(e,n),s=this.modifyLeftForPrintLayout(e,t);this.setLeft(i),this.actualLeft=s,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===s&&this.setLeft(s)})}onLeftChanged(){let e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){if(!this.beans.gos.isDomLayout("print")||e.getPinned()==="left")return t;let i=this.beans.visibleColsService.getColsLeftWidth();if(e.getPinned()==="right"){let s=this.beans.visibleColsService.getBodyContainerWidth();return i+s+t}return i+t}setLeft(e){if(j(e)&&(this.eCell.style.left=`${e}px`),Ft(this.columnOrGroup)){let t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&oZ(this.ariaEl,t.length)}}},Gee="ag-column-first",Hee="ag-column-last";function tG(e,t,n,i){return Ie(e)?[]:Wee(e.headerClass,e,t,n,i)}function nG(e,t,n){e.addOrRemoveCssClass(Gee,n.isColAtEdge(t,"first")),e.addOrRemoveCssClass(Hee,n.isColAtEdge(t,"last"))}function Uee(e,t,n,i){return t.addGridCommonParams({colDef:e,column:n,columnGroup:i})}function Wee(e,t,n,i,s){if(Ie(e))return[];let r;if(typeof e=="function"){let o=Uee(t,n,i,s);r=e(o)}else r=e;return typeof r=="string"?[r]:Array.isArray(r)?[...r]:[]}var jee=0,iG=class sG extends k{constructor(t,n,i){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=t,this.parentRowCtrl=i,this.beans=n,this.instanceId=t.getUniqueId()+"-"+jee++}wireBeans(t){this.pinnedWidthService=t.pinnedWidthService,this.focusService=t.focusService,this.userComponentFactory=t.userComponentFactory,this.ctrlsService=t.ctrlsService,this.dragAndDropService=t.dragAndDropService,this.menuService=t.menuService}postConstruct(){this.addManagedPropertyListeners(["suppressHeaderFocus"],()=>this.refreshTabIndex())}shouldStopEventPropagation(t){let{headerRowIndex:n,column:i}=this.focusService.getFocusedHeader();return Pee(this.gos,t,n,i)}getWrapperHasFocus(){return this.gos.getActiveDomElement()===this.eGui}setGui(t){this.eGui=t,this.addDomData(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onGuiFocus(){let t={type:"headerFocused",column:this.column};this.eventService.dispatchEvent(t)}onDisplayedColumnsChanged(){!this.comp||!this.column||(this.refreshFirstAndLastStyles(),this.refreshAriaColIndex())}refreshFirstAndLastStyles(){let{comp:t,column:n,beans:i}=this;nG(t,n,i.visibleColsService)}refreshAriaColIndex(){let{beans:t,column:n}=this,i=t.visibleColsService.getAriaColIndex(n);fB(this.eGui,i)}addResizeAndMoveKeyboardListeners(){this.resizeFeature&&this.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){this.gos.get("suppressHeaderFocus")?this.eGui.removeAttribute("tabindex"):this.eGui.setAttribute("tabindex","-1")}onGuiKeyDown(t){let n=this.gos.getActiveDomElement(),i=t.key===N.LEFT||t.key===N.RIGHT;if(this.isResizing&&(t.preventDefault(),t.stopImmediatePropagation()),n!==this.eGui||!t.shiftKey&&!t.altKey||((this.isResizing||i)&&(t.preventDefault(),t.stopImmediatePropagation()),!i))return;let s=t.key===N.LEFT!==this.gos.get("enableRtl"),r=kB[s?"Left":"Right"];if(t.altKey){this.isResizing=!0,this.resizeMultiplier+=1;let o=this.getViewportAdjustedResizeDiff(t);this.resizeHeader(o,t.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(r)}getViewportAdjustedResizeDiff(t){let n=this.getResizeDiff(t);if(this.column.getPinned()){let s=this.pinnedWidthService.getPinnedLeftWidth(),r=this.pinnedWidthService.getPinnedRightWidth(),o=vf(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(s+r+n>o)if(o>s+r)n=o-s-r;else return 0}return n}getResizeDiff(t){let n=t.key===N.LEFT!==this.gos.get("enableRtl"),i=this.column.getPinned(),s=this.gos.get("enableRtl");return i&&s!==(i==="right")&&(n=!n),(n?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{this.resizeFeature?.toggleColumnResizing(!1)},150))}handleKeyDown(t){let n=this.getWrapperHasFocus();switch(t.key){case N.PAGE_DOWN:case N.PAGE_UP:case N.PAGE_HOME:case N.PAGE_END:n&&t.preventDefault()}}addDomData(){let t=sG.DOM_DATA_KEY_HEADER_CTRL;this.gos.setDomData(this.eGui,t,this),this.addDestroyFunc(()=>this.gos.setDomData(this.eGui,t,null))}getGui(){return this.eGui}focus(t){return this.eGui?(this.lastFocusEvent=t||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getInstanceId(){return this.instanceId}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(t,n,i){let s=t??n;this.gos.get("preventDefaultOnContextMenu")&&s.preventDefault();let r=zo(i)?i:void 0;this.menuService.isHeaderContextMenuEnabled(r)&&this.menuService.showHeaderContextMenu(r,t,n),this.dispatchColumnMouseEvent("columnHeaderContextMenu",i)}dispatchColumnMouseEvent(t,n){let i={type:t,column:n};this.eventService.dispatchEvent(i)}destroy(){super.destroy(),this.removeDragSource(),this.comp=null,this.column=null,this.resizeFeature=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null,this.eGui=null}};iG.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";var RC=iG,TR=class extends k{wireBeans(e){this.columnHoverService=e.columnHoverService}constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListeners(this.element,{mouseout:this.onMouseOut.bind(this),mouseover:this.onMouseOver.bind(this)})}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}},zee=class extends RC{constructor(e,t,n){super(e,t,n),this.iconCreated=!1,this.column=e}setComp(e,t,n,i){this.comp=e,this.eButtonShowMainFilter=n,this.eFloatingFilterBody=i,this.setGui(t),this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(),this.addManagedListeners(this.column,{colDefChanged:this.onColDefChanged.bind(this)})}resizeHeader(){}moveHeader(){}setupActive(){let e=this.column.getColDef(),t=!!e.filter,n=!!e.floatingFilter;this.active=t&&n}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;let e=Ii("filter",this.gos,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(){this.createManagedBean(new vl(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){let e=this.localeService.getLocaleTextFunc();Eu(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(this.gos.getActiveDomElement()===this.eGui)return;let i=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(i){this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),i.focus();return}let s=this.findNextColumnWithFloatingFilter(e.shiftKey);s&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:s},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){let t=this.beans.visibleColsService,n=this.column;do if(n=e?t.getColBefore(n):t.getColAfter(n),!n)break;while(!n.getColDef().filter||!n.getColDef().floatingFilter);return n}handleKeyDown(e){super.handleKeyDown(e);let t=this.getWrapperHasFocus();switch(e.key){case N.UP:case N.DOWN:t||e.preventDefault();case N.LEFT:case N.RIGHT:if(t)return;e.stopPropagation();case N.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case N.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;let n=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),i=!!e.relatedTarget&&_u(e.relatedTarget,"ag-floating-filter");if(n&&i&&e.target===this.eGui){let r=this.lastFocusEvent,o=!!(r&&r.key===N.TAB);if(r&&o){let a=r.shiftKey;this.focusService.focusInto(this.eGui,a)}}let s=this.getRowIndex();this.beans.focusService.setFocusedHeader(s,this.column)}setupHover(){this.createManagedBean(new TR([this.column],this.eGui));let e=()=>{if(!this.gos.get("columnHoverHighlight"))return;let t=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",t)};this.addManagedEventListeners({columnHoverChanged:e}),e()}setupLeft(){let e=new RR(this.column,this.eGui,this.beans);this.createManagedBean(e)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){if(!this.active)return;let e=this.beans.filterManager?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){let e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(){if(!this.active)return;let{filterManager:e}=this.beans,t=n=>{if(n?.source==="filterDestroyed"&&!this.isAlive())return;let i=this.comp.getFloatingFilterComp();i&&i.then(s=>{if(s){let r=e?.getCurrentFloatingFilterParentModel(this.column),o=n?se(B({},n),{columns:n.columns??[],source:n.source==="api"?"api":"columnFilter"}):null;s.onParentModelChanged(r,o)}})};[this.destroySyncListener]=this.addManagedListeners(this.column,{filterChanged:t}),e?.isFilterActive(this.column)&&t(null)}setupWidth(){let e=()=>{let t=`${this.column.getActualWidth()}px`;this.comp.setWidth(t)};this.addManagedListeners(this.column,{widthChanged:e}),e()}setupFilterChangedListener(){this.active&&([this.destroyFilterChangedListener]=this.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){let e=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(){let e=this.active;this.setupActive();let t=!e&&this.active;e&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());let n=this.active?this.beans.filterManager?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,i=this.comp.getFloatingFilterComp();!i||!n?this.updateCompDetails(n,t):i.then(s=>{!s||this.beans.filterManager?.areFilterCompsDifferent(this.userCompDetails??null,n)?this.updateCompDetails(n,t):this.updateFloatingFilterParams(n)})}updateCompDetails(e,t){this.isAlive()&&(this.setCompDetails(e),this.setupFilterButton(),this.setupUi(),t&&(this.setupSyncWithFilter(),this.setupFilterChangedListener()))}updateFloatingFilterParams(e){if(!e)return;let t=e.params;this.comp.getFloatingFilterComp()?.then(n=>{let i=!1;n?.refresh&&typeof n.refresh=="function"&&n.refresh(t)!==null&&(i=!0),!i&&n?.onParamsUpdated&&typeof n.onParamsUpdated=="function"&&n.onParamsUpdated(t)!==null&&G("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.destroySyncListener=null,this.destroyFilterChangedListener=null}},ge="32.0.2";function $ee(e){return!!e.filterManager?.isColumnFilterPresent()||!!e.filterManager?.isAggregateFilterPresent()}function qee(e,t,n){return e.filterManager?.getFilterInstance(t,n)}function Kee(e,t){return e.filterManager?.getColumnFilterInstance(t)??Promise.resolve(void 0)}function Qee(e,t){let n=e.columnModel.getColDefCol(t);if(n)return e.filterManager?.destroyFilter(n,"api")}function Yee(e,t){e.frameworkOverrides.wrapIncoming(()=>e.filterManager?.setFilterModel(t))}function Jee(e){return e.filterManager?.getFilterModel()??{}}function Xee(e,t){return e.filterManager?.getColumnFilterModel(t)??null}function Zee(e,t,n){return e.filterManager?.setColumnFilterModel(t,n)??Promise.resolve()}function ete(e,t){let n=e.columnModel.getCol(t);if(!n){ke(`column '${t}' not found`);return}e.menuService.showFilterMenu({column:n,containerType:"columnFilter",positionBy:"auto"})}function tte(e,t,n){if(t==null)return null;let i=null,{compName:s,jsComp:r,fwComp:o}=OB.getCompKeys(e,t,SR);return s?i={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[s]:r==null&&o==null&&t.filter===!0&&(i=n()),i}var nte=class extends k{constructor(){super(...arguments),this.beanName="columnFilterService",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.userComponentFactory=e.userComponentFactory,this.rowRenderer=e.rowRenderer,this.dataTypeService=e.dataTypeService,this.filterManager=e.filterManager}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),rowDataUpdated:()=>this.onNewRowsLoaded("rowDataUpdated"),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel=B({},this.gos.get("initialState")?.filter?.filterModel??{})}setFilterModel(e,t="api"){if(this.dataTypeService?.isPendingInference()){this.filterModelUpdateQueue.push({model:e,source:t});return}let n=[],i=this.getFilterModel();if(e){let s=new Set(Object.keys(e));this.allColumnFilters.forEach((r,o)=>{let a=e[o];n.push(this.setModelOnFilterWrapper(r.filterPromise,a)),s.delete(o)}),s.forEach(r=>{let o=this.columnModel.getColDefCol(r)||this.columnModel.getCol(r);if(!o){G("setFilterModel() - no column found for colId: "+r);return}if(!o.isFilterAllowed()){G("setFilterModel() - unable to fully apply model, filtering disabled for colId: "+r);return}let a=this.getOrCreateFilterWrapper(o);if(!a){G("setFilterModel() - unable to fully apply model, unable to create filter for colId: "+r);return}n.push(this.setModelOnFilterWrapper(a.filterPromise,e[r]))})}else this.allColumnFilters.forEach(s=>{n.push(this.setModelOnFilterWrapper(s.filterPromise,null))});Ti.all(n).then(()=>{let s=this.getFilterModel(),r=[];this.allColumnFilters.forEach((o,a)=>{let l=i?i[a]:null,c=s?s[a]:null;gC(l,c)||r.push(o.column)}),r.length>0&&this.filterManager?.onFilterChanged({columns:r,source:t})})}setModelOnFilterWrapper(e,t){return new Ti(n=>{e.then(i=>{typeof i.setModel!="function"&&(G("filter missing setModel method, which is needed for setFilterModel"),n()),(i.setModel(t)||Ti.resolve()).then(()=>n())})})}getFilterModel(){let e={};return this.allColumnFilters.forEach((t,n)=>{let i=this.getModelFromFilterWrapper(t);j(i)&&(e[n]=i)}),e}getModelFromFilterWrapper(e){let{filter:t}=e;return t?typeof t.getModel!="function"?(G("filter API missing getModel method, which is needed for getFilterModel"),null):t.getModel():this.getModelFromInitialState(e.column)}getModelFromInitialState(e){return this.initialFilterModel[e.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){return this.allColumnFilters.size?(this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"advancedFilterEnabled")),!0):!1}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){let e=r=>r?r.isFilterActive?r.isFilterActive():(G("Filter is missing isFilterActive() method"),!1):!1,t=!!this.gos.getGroupAggFiltering(),n=r=>{if(!r.isPrimary())return!0;let a=!this.columnModel.isPivotActive();return!r.isValueActive()||!a?!1:this.columnModel.isPivotMode()?!0:t},i=[],s=[];return this.forEachColumnFilter((r,o)=>{e(r)&&(n(o.column)?i.push(r):s.push(r))}).then(()=>{this.activeAggregateFilters=i,this.activeColumnFilters=s})}updateFilterFlagInColumns(e,t){return this.forEachColumnFilter((n,i)=>i.column.setFilterActive(n.isFilterActive(),e,t))}forEachColumnFilter(e){return Ti.all(Array.from(this.allColumnFilters.values()).map(t=>t.filterPromise.then(n=>e(n,t))))}doColumnFiltersPass(e,t,n){let{data:i,aggData:s}=e,r=n?this.activeAggregateFilters:this.activeColumnFilters,o=n?s:i;for(let a=0;a<r.length;a++){let l=r[a];if(!(l==null||l===t)){if(typeof l.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!l.doesFilterPass({node:e,data:o}))return!1}}return!0}callOnFilterChangedOutsideRenderCycle(e){let t=()=>this.filterManager?.onFilterChanged(e);this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}updateBeforeFilterChanged(e={}){let{filterInstance:t,additionalEventAttributes:n}=e;return this.updateDependentFilters(),this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",n).then(()=>{this.allColumnFilters.forEach(i=>{i.filterPromise&&i.filterPromise.then(s=>{s&&s!==t&&s.onAnyFilterChanged&&s.onAnyFilterChanged()})}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){this.forEachColumnFilter(t=>{t.onNewRowsLoaded&&t.onNewRowsLoaded()}).then(()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createValueGetter(e){return({node:t})=>this.valueService.getValue(e,t,!0)}createGetValue(e){return(t,n)=>{let i=n?this.columnModel.getCol(n):e;return i?this.valueService.getValue(i,t,!0):void 0}}isFilterActive(e){let{filter:t}=this.cachedFilter(e)??{};return t?t.isFilterActive():this.getModelFromInitialState(e)!=null}getOrCreateFilterWrapper(e){if(!e.isFilterAllowed())return null;let t=this.cachedFilter(e);return t||(t=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,t)),t}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t;if(Kn.__isRegistered("@ag-grid-enterprise/set-filter",this.gridId))t="agSetColumnFilter";else{let n=this.dataTypeService?.getBaseDataType(e);n==="number"?t="agNumberColumnFilter":n==="date"||n==="dateString"?t="agDateColumnFilter":t="agTextColumnFilter"}return t}getDefaultFloatingFilter(e){let t;if(Kn.__isRegistered("@ag-grid-enterprise/set-filter",this.gridId))t="agSetColumnFloatingFilter";else{let n=this.dataTypeService?.getBaseDataType(e);n==="number"?t="agNumberColumnFloatingFilter":n==="date"||n==="dateString"?t="agDateColumnFloatingFilter":t="agTextColumnFloatingFilter"}return t}createFilterInstance(e,t){let n=this.getDefaultFilter(e),i=e.getColDef(),s,r=se(B({},this.createFilterParams(e,i)),{filterModifiedCallback:()=>this.filterModifiedCallbackFactory(s,e)(),filterChangedCallback:a=>this.filterChangedCallbackFactory(s,e)(a),doesRowPassOtherFilter:a=>this.filterManager?this.filterManager.doesRowPassOtherFilters(s,a):!0}),o=this.userComponentFactory.getFilterDetails(i,r,n);return o?{filterPromise:()=>{let a=o.newAgStackInstance();return a?.then(l=>{s=l,t&&(t.filter=l)}),a},compDetails:o}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return this.gos.addGridCommonParams({column:e,colDef:ZV(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e){let t={column:e,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:n,compDetails:i}=this.createFilterInstance(e,t);return t.filterPromise=n?.()??null,t.compDetails=i,t}onColumnsChanged(){let e=[];this.allColumnFilters.forEach((t,n)=>{let i;t.column.isPrimary()?i=this.columnModel.getColDefCol(n):i=this.columnModel.getCol(n),!(i&&i===t.column)&&(e.push(t.column),this.disposeFilterWrapper(t,"columnChanged"),this.disposeColumnListener(n))}),e.length>0?this.filterManager?.onFilterChanged({columns:e,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){this.columnModel.getAutoCols()?.forEach(t=>{t.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(t)})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;let{filter:n}=this.allColumnFilters.get(e.getColId())??{};return n&&typeof n?.isFilterAllowed=="function"?n.isFilterAllowed():!0}getFloatingFilterCompDetails(e,t){let n=l=>{let c=this.getOrCreateFilterWrapper(e)?.filterPromise;c?.then(u=>{l(cf(u))})},i=e.getColDef(),s=se(B({},this.createFilterParams(e,i)),{filterChangedCallback:()=>n(l=>this.filterChangedCallbackFactory(l,e)())}),r=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(i,SR,s),o=tte(this.frameworkOverrides,i,()=>this.getDefaultFloatingFilter(e));o==null&&(o="agReadOnlyFloatingFilter");let a={column:e,filterParams:r,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:n,showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(i,a,o)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilter(e,t="api"){let n=e.getColId(),i=this.allColumnFilters.get(n);this.disposeColumnListener(n),delete this.initialFilterModel[n],i&&(this.disposeFilterWrapper(i,t),this.filterManager?.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){let t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){e.filterPromise.then(n=>{this.destroyBean(n),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId());let i={type:"filterDestroyed",source:t,column:e.column};this.eventService.dispatchEvent(i)})}filterModifiedCallbackFactory(e,t){return()=>{let n={type:"filterModified",column:t,filterInstance:e};this.eventService.dispatchEvent(n)}}filterChangedCallbackFactory(e,t){return n=>{let i=n?.source??"columnFilter",s={filter:e,additionalEventAttributes:n,columns:[t],source:i};this.callOnFilterChangedOutsideRenderCycle(s)}}checkDestroyFilter(e){let t=this.allColumnFilters.get(e);if(!t)return;let n=t.column,{compDetails:i}=n.isFilterAllowed()?this.createFilterInstance(n):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,i)){this.destroyFilter(n,"paramsUpdated");return}let s=n.getColDef().filterParams;if(!t.filterPromise){this.destroyFilter(n,"paramsUpdated");return}t.filterPromise.then(r=>{(r?.refresh?r.refresh(B(se(B({},this.createFilterParams(n,n.getColDef())),{filterModifiedCallback:this.filterModifiedCallbackFactory(r,n),filterChangedCallback:this.filterChangedCallbackFactory(r,n),doesRowPassOtherFilter:a=>this.filterManager?this.filterManager.doesRowPassOtherFilters(r,a):!0}),s)):!0)===!1&&this.destroyFilter(n,"paramsUpdated")})}setColumnFilterWrapper(e,t){let n=e.getColId();this.allColumnFilters.set(n,t),this.allColumnListeners.set(n,this.addManagedListeners(e,{colDefChanged:()=>this.checkDestroyFilter(n)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;let{componentClass:n}=e,{componentClass:i}=t;return!(n===i||n?.render&&i?.render&&n.render===i.render)}hasFloatingFilters(){return this.columnModel.getCols().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e,t){t&&this.getFilterInstanceImpl(e).then(n=>{let i=cf(n);t(i)})}getColumnFilterInstance(e){return new Promise(t=>{this.getFilterInstanceImpl(e).then(n=>{t(cf(n))})})}getFilterInstanceImpl(e){let t=this.columnModel.getColDefCol(e);return t?this.getOrCreateFilterWrapper(t)?.filterPromise??Ti.resolve(null):Ti.resolve(void 0)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:e,source:t})=>this.setFilterModel(e,t)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:e,model:t,resolve:n})=>{this.setColumnFilterModel(e,t).then(()=>n())}),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(e){let t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){if(this.dataTypeService?.isPendingInference()){let r=()=>{},o=new Promise(a=>{r=a});return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:r}),o}let n=this.columnModel.getColDefCol(e),i=n?this.getOrCreateFilterWrapper(n):null;return i?(r=>new Promise(o=>{r.then(a=>o(a))}))(this.setModelOnFilterWrapper(i.filterPromise,t)):Promise.resolve()}getFilterWrapper(e){let t=this.columnModel.getColDefCol(e);return t?this.cachedFilter(t)??null:null}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}};function ite(e){return!!e.filterManager?.isAnyFilterPresent()}function ste(e,t="api"){e.filterManager?.onFilterChanged({source:t})}var rte=class extends Ve{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>
            </div>`,[DC]),this.eFloatingFilterText=X}wireBeans(e){this.columnNameService=e.columnNameService}destroy(){super.destroy()}init(e){this.params=e;let t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),n=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${n("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){let n=t.getModelAsString(e);this.eFloatingFilterText.setValue(n)}})}onParamsUpdated(e){this.refresh(e)}refresh(e){this.init(e)}},rG=class extends Ve{wireBeans(e){this.columnNameService=e.columnNameService}getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return e?.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.getDefaultOption();return}let t=e.operator,n;t?n=e.conditions[0]:n=e,this.lastType=n.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;let n=e;return this.isTypeEditable(n.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){this.optionsFactory=new UB,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),t||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!e.filterParams.readOnly;let n=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(n)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){let t=this.optionsFactory.getCustomOption(e),{numberOfInputs:n}=t||{};return n==null||n==1}isTypeEditable(e){let t=["inRange","empty","blank","notBlank"];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){let t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),n=this.localeService.getLocaleTextFunc();return`${t} ${n("ariaFilterInput","Filter Input")}`}},ote=class extends rG{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eReadOnlyText"></ag-input-text-field>
                <div data-ref="eDateWrapper" style="display: flex;"></div>
            </div>`,[DC]),this.eReadOnlyText=X,this.eDateWrapper=X}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}getDefaultFilterOptions(){return ZB}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new eG(this.filterParams,this.localeService,this.optionsFactory);let t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){let t=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){if(e){let n=e;this.dateComp.setDate(ri(n.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){ft(this.eDateWrapper,e),ft(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){let e=this.dateComp.getDate(),t=Qi(e);this.params.parentFilterInstance(n=>{if(n){let i=ri(t);n.onFloatingFilterChanged(this.getLastType()||null,i)}})}getDateComponentParams(){let e=_R(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:Yn(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new XB(this.context,this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,e=>{e.setInputAriaLabel(this.getAriaLabel(this.params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){let e=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}},ate=class extends Ve{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" data-ref="eDateInput"></ag-input-text-field>
            </div>`,[DC]),this.eDateInput=X}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);let t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus()},input:n=>{n.target===this.gos.getActiveDomElement()&&(this.eDateInput.isDisabled()||this.params.onDateChanged())}})}setParams(e){let t=this.eDateInput.getInputElement(),n=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=n&&Ur(),t.type=n?"date":"text";let{minValidYear:i,maxValidYear:s,minValidDate:r,maxValidDate:o}=e.filterParams||{};if(r&&i&&G("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),o&&s&&G("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),r&&o){let[a,l]=[r,o].map(c=>c instanceof Date?c:ri(c));a&&l&&a.getTime()>l.getTime()&&G("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}r?r instanceof Date?t.min=df(r):t.min=r:i&&(t.min=`${i}-01-01`),o?o instanceof Date?t.max=df(o):t.max=o:s&&(t.max=`${s}-12-31`)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams(e)}getDate(){return ri(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(Qi(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&e.filterParams.browserDatePicker!=null?e.filterParams.browserDatePicker:fR()||gB()||Ur()&&pB()>=14.1}},oG=class extends k{constructor(e){super(),this.params=e,this.eFloatingFilterTextInput=X,this.valueChangedListener=()=>{}}setupGui(e){this.eFloatingFilterTextInput=this.createManagedBean(new Cl(this.params?.config));let t=this.eFloatingFilterTextInput.getGui();e.appendChild(t);let n=i=>this.valueChangedListener(i);this.addManagedListeners(t,{input:n,keydown:n})}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,t){this.eFloatingFilterTextInput.setValue(e,t)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}},aG=class extends rG{constructor(){super(...arguments),this.eFloatingFilterInputContainer=X}postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){this.params=e;let t=e.browserAutoComplete??!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=bC(this.params.filterParams),!this.isReadOnly()){let n=_R(this.params.filterParams,this.getDefaultDebounceMs()),i=Yn(this.syncUpWithParentFilter.bind(this),n);this.floatingFilterInputService.setValueChangedListener(i)}}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){let t=this.floatingFilterInputService.getValue();An(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(t,!0)}syncUpWithParentFilter(e){let t=e.key===N.ENTER;if(this.applyActive&&!t)return;let n=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(n=YB(n),this.floatingFilterInputService.setValue(n,!0)),this.params.parentFilterInstance(i=>{i&&i.onFloatingFilterChanged(this.getLastType()||null,n||null)})}setEditable(e){this.floatingFilterInputService.setEditable(e)}},lte=class extends k{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new ER),this.eFloatingFilterTextInput=this.createManagedBean(new Cl),this.eFloatingFilterTextInput.setDisabled(!0);let t=this.eFloatingFilterNumberInput.getGui(),n=this.eFloatingFilterTextInput.getGui();e.appendChild(t),e.appendChild(n),this.setupListeners(t,i=>this.valueChangedListener(i)),this.setupListeners(n,i=>this.valueChangedListener(i))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}},cte=class extends aG{init(e){super.init(e),this.filterModelFormatter=new qB(this.localeService,this.optionsFactory,e.filterParams?.numberFormatter)}onParamsUpdated(e){this.refresh(e)}refresh(e){nR(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return $B}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=nR(e.filterParams),this.allowedCharPattern?this.createManagedBean(new oG({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new lte)}},ute=class extends aG{init(e){super.init(e),this.filterModelFormatter=new QB(this.localeService,this.optionsFactory)}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return KB}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new oG)}};function dte(e){return!!e.filterManager?.isQuickFilterPresent()}function hte(e){return e.gos.get("quickFilterText")}function fte(e){e.filterManager?.resetQuickFilterCache()}var pte=class extends k{constructor(){super(...arguments),this.beanName="quickFilterService",this.quickFilter=null,this.quickFilterParts=null}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.pivotResultColsService=e.pivotResultColsService}postConstruct(){let e=this.resetQuickFilterCache.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}}),this.addManagedPropertyListener("quickFilterText",t=>this.setQuickFilter(t.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onQuickFilterColumnConfigChanged()),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}refreshQuickFilterCols(){let e=this.columnModel.isPivotMode(),t=this.columnModel.getAutoCols(),n=this.columnModel.getColDefCols(),i=(e&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?this.pivotResultColsService.getPivotResultCols()?.list:n)??[];t&&(i=i.concat(t)),this.colsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?i:i.filter(s=>s.isVisible()||s.isRowGroupActive())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(e){let t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(t,e):this.quickFilterParts.every(n=>t?this.doesRowPassQuickFilterCache(e,n):this.doesRowPassQuickFilterNoCache(e,n))}resetQuickFilterCache(){this.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}setQuickFilterParts(){let{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseQuickFilter(e){return j(e)?this.gos.isRowModelType("clientSide")?e.toUpperCase():(G("Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(e!=null&&typeof e!="string"){G(`Grid option quickFilterText only supports string inputs, received: ${typeof e}`);return}let t=this.parseQuickFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setQuickFilterParserAndMatcher(){let e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),n=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,n&&(this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onQuickFilterColumnConfigChanged(){this.refreshQuickFilterCols(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassQuickFilterNoCache(e,t){return this.colsForQuickFilter.some(n=>{let i=this.getQuickFilterTextForColumn(n,e);return j(i)&&i.indexOf(t)>=0})}doesRowPassQuickFilterCache(e,t){return this.checkGenerateQuickFilterAggregateText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilterMatcher(e,t){let n;e?(this.checkGenerateQuickFilterAggregateText(t),n=t.quickFilterAggregateText):n=this.getQuickFilterAggregateText(t);let{quickFilterParts:i,matcher:s}=this;return s(i,n)}checkGenerateQuickFilterAggregateText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getQuickFilterAggregateText(e))}getQuickFilterTextForColumn(e,t){let n=this.valueService.getValue(e,t,!0),i=e.getColDef();if(i.getQuickFilterText){let s=this.gos.addGridCommonParams({value:n,node:t,data:t.data,column:e,colDef:i});n=i.getQuickFilterText(s)}return j(n)?n.toString().toUpperCase():null}getQuickFilterAggregateText(e){let t=[];return this.colsForQuickFilter.forEach(n=>{let i=this.getQuickFilterTextForColumn(n,e);j(i)&&t.push(i)}),t.join(`
`)}},IR={version:ge,moduleName:"@ag-grid-community/filter-core",beans:[mee]},gte={version:ge,moduleName:"@ag-grid-community/filter-api",apiFunctions:{isAnyFilterPresent:ite,onFilterChanged:ste},dependantModules:[IR]},AR={version:ge,moduleName:"@ag-grid-community/column-filter",beans:[nte],dependantModules:[IR]},mte={version:ge,moduleName:"@ag-grid-community/column-filter-api",apiFunctions:{isColumnFilterPresent:$ee,getFilterInstance:qee,getColumnFilterInstance:Kee,destroyFilter:Qee,setFilterModel:Yee,getFilterModel:Jee,getColumnFilterModel:Xee,setColumnFilterModel:Zee,showColumnFilter:ete},dependantModules:[AR,gte]},lG={version:ge,moduleName:"@ag-grid-community/floating-filter-core",controllers:[{name:"headerFilterCell",classImp:zee}],dependantModules:[AR]};var vte={version:ge,moduleName:"@ag-grid-community/read-only-floating-filter",userComponents:[{name:"agReadOnlyFloatingFilter",classImp:rte}],dependantModules:[lG]},Cte={version:ge,moduleName:"@ag-grid-community/simple-filter",dependantModules:[AR],userComponents:[{name:"agTextColumnFilter",classImp:kee},{name:"agNumberColumnFilter",classImp:Nee},{name:"agDateColumnFilter",classImp:Bee},{name:"agDateInput",classImp:ate}]},yte={version:ge,moduleName:"@ag-grid-community/simple-floating-filter",dependantModules:[Cte,lG],userComponents:[{name:"agTextColumnFloatingFilter",classImp:ute},{name:"agNumberColumnFloatingFilter",classImp:cte},{name:"agDateColumnFloatingFilter",classImp:ote}]},cG={version:ge,moduleName:"@ag-grid-community/quick-filter-core",beans:[pte],dependantModules:[IR]},wte={version:ge,moduleName:"@ag-grid-community/quick-filter-api",apiFunctions:{isQuickFilterPresent:dte,getQuickFilter:hte,resetQuickFilter:fte},dependantModules:[cG]},Ste={version:ge,moduleName:"@ag-grid-community/quick-filter",dependantModules:[cG,wte]},_te={version:ge,moduleName:"@ag-grid-community/filter",dependantModules:[yte,vte,Ste,mte]},MR=class extends Ve{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}},bte=class extends MR{constructor(e){super(`<div class="ag-header-cell ag-floating-filter" role="gridcell">
            <div data-ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" data-ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" data-ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`,e),this.eFloatingFilterBody=X,this.eButtonWrapper=X,this.eButtonShowMainFilter=X}postConstruct(){let e=this.getGui(),t={addOrRemoveCssClass:(n,i)=>this.addOrRemoveCssClass(n,i),addOrRemoveBodyCssClass:(n,i)=>this.eFloatingFilterBody.classList.toggle(n,i),setButtonWrapperDisplayed:n=>ft(this.eButtonWrapper,n),setCompDetails:n=>this.setCompDetails(n),getFloatingFilterComp:()=>this.compPromise,setWidth:n=>e.style.width=n,setMenuIcon:n=>this.eButtonShowMainFilter.appendChild(n)};this.ctrl.setComp(t,e,this.eButtonShowMainFilter,this.eFloatingFilterBody)}setCompDetails(e){if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(t=>this.afterCompCreated(t))}destroy(){this.destroyFloatingFilterComp(),super.destroy()}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}},Ete=class extends MR{constructor(e){super(`<div class="ag-header-cell" role="columnheader">
            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`,e),this.eResize=X,this.eHeaderCompWrapper=X,this.headerCompVersion=0,this.column=e.getColumnGroupChild(),this.pinned=e.getPinned()}postConstruct(){let e=this.getGui();((s,r)=>{r!=null&&r!=""?e.setAttribute(s,r):e.removeAttribute(s)})("col-id",this.column.getColId());let n={setWidth:s=>e.style.width=s,addOrRemoveCssClass:(s,r)=>this.addOrRemoveCssClass(s,r),setAriaSort:s=>s?aZ(e,s):lZ(e),setUserCompDetails:s=>this.setUserCompDetails(s),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(n,this.getGui(),this.eResize,this.eHeaderCompWrapper);let i=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",i)}destroy(){this.destroyHeaderComp(),super.destroy()}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;let t=this.headerCompVersion;e.newAgStackInstance().then(n=>this.afterCompCreated(t,n))}afterCompCreated(e,t){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(t);return}this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}},Dte=class extends MR{constructor(e){super(`<div class="ag-header-group-cell" role="columnheader">
            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`,e),this.eResize=X}postConstruct(){let e=this.getGui(),t=(i,s)=>s!=null?e.setAttribute(i,s):e.removeAttribute(i);e.setAttribute("col-id",this.ctrl.getColId());let n={addOrRemoveCssClass:(i,s)=>this.addOrRemoveCssClass(i,s),setResizableDisplayed:i=>ft(this.eResize,i),setWidth:i=>e.style.width=i,setAriaExpanded:i=>t("aria-expanded",i),setUserCompDetails:i=>this.setUserCompDetails(i),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(n,e,this.eResize)}setUserCompDetails(e){e.newAgStackInstance().then(t=>this.afterHeaderCompCreated(t))}afterHeaderCompCreated(e){let t=()=>this.destroyBean(e);if(!this.isAlive()){t();return}let n=this.getGui(),i=e.getGui();n.appendChild(i),this.addDestroyFunc(t),this.headerGroupComp=e,this.ctrl.setDragSource(n)}};var Rte=class extends Ve{constructor(e){super(),this.headerComps={},this.ctrl=e,this.setTemplate(`<div class="${this.ctrl.getHeaderRowClass()}" role="row"></div>`)}postConstruct(){hB(this.getGui(),this.ctrl.getAriaRowIndex());let e={setHeight:t=>this.getGui().style.height=t,setTop:t=>this.getGui().style.top=t,setHeaderCtrls:(t,n)=>this.setHeaderCtrls(t,n),setWidth:t=>this.getGui().style.width=t};this.ctrl.setComp(e)}destroy(){this.setHeaderCtrls([],!1),super.destroy()}setHeaderCtrls(e,t){if(!this.isAlive())return;let n=this.headerComps;if(this.headerComps={},e.forEach(i=>{let s=i.getInstanceId(),r=n[s];delete n[s],r==null&&(r=this.createHeaderComp(i),this.getGui().appendChild(r.getGui())),this.headerComps[s]=r}),ji(n,(i,s)=>{this.getGui().removeChild(s.getGui()),this.destroyBean(s)}),t){let i=jo(this.headerComps);i.sort((r,o)=>{let a=r.getCtrl().getColumnGroupChild().getLeft(),l=o.getCtrl().getColumnGroupChild().getLeft();return a-l});let s=i.map(r=>r.getGui());EB(this.getGui(),s)}}createHeaderComp(e){let t;switch(this.ctrl.getType()){case"group":t=new Dte(e);break;case"filter":t=new bte(e);break;default:t=new Ete(e);break}return this.createBean(t),t.setParentComponent(this),t}};var Tte=class extends k{constructor(){super(...arguments),this.beanName="headerNavigationService",this.currentHeaderRowWithoutSpan=-1}wireBeans(e){this.focusService=e.focusService,this.headerPositionUtils=e.headerPositionUtils,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.visibleColService=e.visibleColsService}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridBodyCon=t.gridBodyCtrl});let e=this.gos.getDocument();this.addManagedElementListeners(e,{mousedown:()=>this.setCurrentHeaderRowWithoutSpan(-1)})}getHeaderRowCount(){let e=this.ctrlsService.getHeaderRowContainerCtrl();return e?e.getRowCount():0}getHeaderPositionForColumn(e,t){let n;if(typeof e=="string"?(n=this.columnModel.getCol(e),n||(n=this.visibleColService.getColumnGroup(e))):n=e,!n)return null;let s=this.ctrlsService.getHeaderRowContainerCtrl().getAllCtrls(),r=xe(s).getType()==="filter",o=this.getHeaderRowCount()-1,a=-1,l=n;for(;l;)a++,l=l.getParent();let c=a;return t&&r&&c===o-1&&c++,c===-1?null:{headerRowIndex:c,column:n}}navigateVertically(e,t,n){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;let{headerRowIndex:i}=t,s=t.column,r=this.getHeaderRowCount(),o=e===0,{headerRowIndex:a,column:l,headerRowIndexWithoutSpan:c}=o?this.headerPositionUtils.getColumnVisibleParent(s,i):this.headerPositionUtils.getColumnVisibleChild(s,i),u=!1;return a<0&&(a=0,l=s,u=!0),a>=r?(a=-1,this.setCurrentHeaderRowWithoutSpan(-1)):c!==void 0&&(this.currentHeaderRowWithoutSpan=c),!u&&!l?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a,column:l},allowUserOverride:!0,event:n})}setCurrentHeaderRowWithoutSpan(e){this.currentHeaderRowWithoutSpan=e}navigateHorizontally(e,t=!1,n){let i=this.focusService.getFocusedHeader(),s=e===2,r=this.gos.get("enableRtl"),o,a;if(this.currentHeaderRowWithoutSpan!==-1?i.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=i.headerRowIndex,s!==r?(a="Before",o=this.headerPositionUtils.findHeader(i,a)):(a="After",o=this.headerPositionUtils.findHeader(i,a)),o||!t)return this.focusService.focusHeaderPosition({headerPosition:o,direction:a,fromTab:t,allowUserOverride:!0,event:n});if(t){let l=this.gos.getCallback("tabToNextHeader");if(l)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:o,direction:a})}return this.focusNextHeaderRow(i,a,n)}focusNextHeaderRow(e,t,n){let i=e.headerRowIndex,s=null,r;if(t==="Before"?i>0&&(r=i-1,this.currentHeaderRowWithoutSpan-=1,s=this.headerPositionUtils.findColAtEdgeForHeaderRow(r,"end")):(r=i+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),s=this.headerPositionUtils.findColAtEdgeForHeaderRow(r,"start")),!s)return!1;let{column:o,headerRowIndex:a}=this.headerPositionUtils.getHeaderIndexToFocus(s.column,s?.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:o,headerRowIndex:a},direction:t,fromTab:!0,allowUserOverride:!0,event:n})}scrollToColumn(e,t="After"){if(e.getPinned())return;let n;if(Ft(e)){let i=e.getDisplayedLeafColumns();n=t==="Before"?xe(i):i[0]}else n=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(n)}},Ite=class extends k{wireBeans(e){this.headerNavigationService=e.headerNavigationService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService,this.filterManager=e.filterManager,this.menuService=e.menuService}setComp(e,t,n){this.comp=e,this.eGui=t,this.createManagedBean(new vl(n,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.onPivotModeChanged(),this.setupHeaderHeight();let i=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:i}),this.mockContextMenuForIPad(i),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){let e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListener("headerHeight",e),this.addManagedPropertyListener("pivotHeaderHeight",e),this.addManagedPropertyListener("groupHeaderHeight",e),this.addManagedPropertyListener("pivotGroupHeaderHeight",e),this.addManagedPropertyListener("floatingFiltersHeight",e),this.addManagedEventListeners({displayedColumnsChanged:e,columnHeaderHeightChanged:e,gridStylesChanged:e,advancedFilterEnabledChanged:e})}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){let{columnModel:e}=this,t=0,n=e.getHeaderRowCount(),i;this.filterManager?.hasFloatingFilters()&&(n++,t=1);let r=this.columnModel.getColumnGroupHeaderRowHeight(),o=this.columnModel.getColumnHeaderRowHeight(),a=1+t,l=n-a;if(i=t*e.getFloatingFiltersHeight(),i+=l*r,i+=o,this.headerHeight===i)return;this.headerHeight=i;let c=`${i+1}px`;this.comp.setHeightAndMinHeight(c),this.eventService.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(){let e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){let t=this.visibleColsService.getAllCols().some(n=>n.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)}onTabKeyDown(e){let t=this.gos.get("enableRtl"),n=e.shiftKey!==t?2:3;(this.headerNavigationService.navigateHorizontally(n,!0,e)||this.focusService.focusNextGridCoreContainer(e.shiftKey))&&e.preventDefault()}handleKeyDown(e){let t=null;switch(e.key){case N.LEFT:t=2;case N.RIGHT:{j(t)||(t=3),this.headerNavigationService.navigateHorizontally(t,!1,e);break}case N.UP:t=0;case N.DOWN:{j(t)||(t=1),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break}default:return}}onFocusOut(e){let{relatedTarget:t}=e;!t&&this.eGui.contains(this.gos.getActiveDomElement())||this.eGui.contains(t)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(e,t,n){if(!e&&!n||!this.menuService.isHeaderContextMenuEnabled())return;let{target:i}=e??t;(i===this.eGui||i===this.ctrlsService.getHeaderRowContainerCtrl().getViewport())&&this.menuService.showHeaderContextMenu(void 0,e,n)}mockContextMenuForIPad(e){if(!$o())return;let t=new Wo(this.eGui),n=i=>{e(void 0,i.touchStart,i.touchEvent)};this.addManagedListeners(t,{longTap:n}),this.addDestroyFunc(()=>t.destroy())}},PR=class extends k{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}wireBeans(e){this.visibleColsService=e.visibleColsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){let e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){let e=this.gos.isDomLayout("print"),t=this.visibleColsService.getBodyContainerWidth(),n=this.visibleColsService.getColsLeftWidth(),i=this.visibleColsService.getDisplayedColumnsRightWidth(),s;e?s=t+n+i:(s=t,this.addSpacer&&(this.gos.get("enableRtl")?n:i)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(s+=this.gos.getScrollbarWidth())),this.callback(s)}},Ate=class extends k{constructor(e){super(),this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}wireBeans(e){this.funcColsService=e.funcColsService}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;let t=e.dragItem.columns;t&&t.forEach(n=>{n.isPrimary()&&(n.isAnyFunctionActive()||(n.isAllowValue()?this.columnsToAggregate.push(n):n.isAllowRowGroup()?this.columnsToGroup.push(n):n.isAllowPivot()&&this.columnsToPivot.push(n)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.funcColsService.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.funcColsService.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.funcColsService.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}};function FR(e){let{isFromHeader:t,hDirection:n,xPosition:i,fromEnter:s,fakeEvent:r,pinned:o,gos:a,columnModel:l,columnMoveService:c,presentedColsService:u}=e,h=n===0,f=n===1,{allMovingColumns:g}=e;if(t){let V=[];g.forEach(b=>{let S=null,_=b.getParent();for(;_!=null&&_.getDisplayedLeafColumns().length===1;)S=_,_=_.getParent();S!=null?(!!S.getColGroupDef()?.marryChildren?S.getProvidedColumnGroup().getLeafColumns():S.getLeafColumns()).forEach(M=>{V.includes(M)||V.push(M)}):V.includes(b)||V.push(b)}),g=V}let v=g.slice();l.sortColsLikeCols(v);let y=xte({movingCols:v,draggingRight:f,xPosition:i,pinned:o,gos:a,columnModel:l,presentedColsService:u}),C=Mte(v,l);if(y.length===0)return;let E=y[0],I=C!==null&&!s;if(t&&(I=C!==null),I&&!r&&(h&&E>=C||f&&E<=C))return;let T=u.getAllCols(),x=[],z=null;for(let V=0;V<y.length;V++){let b=y[V],S=c.getProposedColumnOrder(v,b);if(!c.doesOrderPassRules(S))continue;let _=S.filter(A=>T.includes(A));if(z===null)z=_;else if(!gl(_,z))break;let R=Pte(S);x.push({move:b,fragCount:R})}if(x.length!==0)return x.sort((V,b)=>V.fragCount-b.fragCount),uG(g,x[0].move,"uiColumnMoved",!1,c)}function uG(e,t,n,i,s){return s.moveColumns(e,t,n,i),i?null:{columns:e,toIndex:t}}function Mte(e,t){let n=t.getCols(),i=dX(e.map(l=>n.indexOf(l))),s=i[0];return xe(i)-s!==i.length-1?null:s}function Pte(e){function t(i){let s=[],r=i.getOriginalParent();for(;r!=null;)s.push(r),r=r.getOriginalParent();return s}let n=0;for(let i=0;i<e.length-1;i++){let s=t(e[i]),r=t(e[i+1]);[s,r]=s.length>r.length?[s,r]:[r,s],s.forEach(o=>{r.indexOf(o)===-1&&n++})}return n}function Fte(e,t){switch(t){case"left":return e.getLeftCols();case"right":return e.getRightCols();default:return e.getCenterCols()}}function xte(e){let{movingCols:t,draggingRight:n,xPosition:i,pinned:s,gos:r,columnModel:o,presentedColsService:a}=e;if(r.get("suppressMovableColumns")||t.some(T=>T.getColDef().suppressMovable))return[];let c=Fte(a,s),u=o.getCols(),h=c.filter(T=>ul(t,T)),f=c.filter(T=>!ul(t,T)),g=u.filter(T=>!ul(t,T)),v=0,y=i;if(n){let T=0;h.forEach(x=>T+=x.getActualWidth()),y-=T}if(y>0){for(let T=0;T<f.length;T++){let x=f[T];if(y-=x.getActualWidth(),y<0)break;v++}n&&v++}let C;if(v>0){let T=f[v-1];C=g.indexOf(T)+1}else C=g.indexOf(f[0]),C===-1&&(C=0);let E=[C],I=(T,x)=>T-x;if(n){let T=C+1,x=u.length-1;for(;T<=x;)E.push(T),T++;E.sort(I)}else{let T=C,x=u.length-1,z=u[T];for(;T<=x&&c.indexOf(z)<0;)T++,E.push(T),z=u[T];T=C-1;let V=0;for(;T>=V;)E.push(T),T--;E.sort(I).reverse()}return E}function xR(e,t,n,i,s){let r=s.getHeaderRowContainerCtrl(t).getViewport();return n&&(e-=r.getBoundingClientRect().left),i.get("enableRtl")&&(e=r.clientWidth-e),t==null&&(e+=s.get("center").getCenterViewportScrollLeft()),e}var Ote=class extends k{constructor(e){super(),this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.isCenterContainer=!j(e)}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnMoveService=e.columnMoveService,this.dragAndDropService=e.dragAndDropService,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){return this.pinned?"pinned":"move"}onDragEnter(e){let t=e.dragItem.columns;if(e.dragSource.type===0)this.setColumnsVisible(t,!0,"uiColumnDragged");else{let i=e.dragItem.visibleState,s=(t||[]).filter(r=>i[r.getId()]);this.setColumnsVisible(s,!0,"uiColumnDragged")}this.setColumnsPinned(t,this.pinned,"uiColumnDragged"),this.onDragging(e,!0,!0)}onDragLeave(){this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,n){if(e){let i=e.filter(s=>!s.getColDef().lockVisible);this.columnModel.setColsVisible(i,t,n)}}setColumnsPinned(e,t,n){if(e){let i=e.filter(s=>!s.getColDef().lockPinned);this.columnModel.setColsPinned(i,t,n)}}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}checkCenterForScrolling(e){if(this.isCenterContainer){let t=this.ctrlsService.get("center"),n=t.getCenterViewportScrollLeft(),i=n+t.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=e<n+50,this.needToMoveLeft=e>i-50):(this.needToMoveLeft=e<n+50,this.needToMoveRight=e>i-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}}onDragging(e=this.lastDraggingEvent,t=!1,n=!1,i=!1){if(i){if(this.lastMovedInfo){let{columns:c,toIndex:u}=this.lastMovedInfo;uG(c,u,"uiColumnMoved",!0,this.columnMoveService)}return}if(this.lastDraggingEvent=e,Ie(e.hDirection))return;let s=xR(e.x,this.pinned,!1,this.gos,this.ctrlsService);t||this.checkCenterForScrolling(s);let r=this.normaliseDirection(e.hDirection),o=e.dragSource.type,a=e.dragSource.getDragItem().columns?.filter(c=>c.getColDef().lockPinned?c.getPinned()==this.pinned:!0)||[],l=FR({allMovingColumns:a,isFromHeader:o===1,hDirection:r,xPosition:s,pinned:this.pinned,fromEnter:t,fakeEvent:n,gos:this.gos,columnModel:this.columnModel,columnMoveService:this.columnMoveService,presentedColsService:this.visibleColsService});l&&(this.lastMovedInfo=l)}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case 0:return 1;case 1:return 0;default:ke(`Unknown direction ${e}`)}else return e}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.dragAndDropService.setGhostIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon("move"))}moveInterval(){let e;this.intervalCount++,e=10+this.intervalCount*5,e>100&&(e=100);let t=null,n=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=n.scrollHorizontally(-e):this.needToMoveRight&&(t=n.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;let s=this.lastDraggingEvent.dragItem.columns.filter(r=>!r.getColDef().lockPinned);if(s.length>0&&(this.dragAndDropService.setGhostIcon("pinned"),this.failedMoveAttempts>7)){let r=this.needToMoveLeft?"left":"right";this.setColumnsPinned(s,r,"uiColumnDragged"),this.dragAndDropService.nudge()}}}},Nte=class extends k{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady(e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.left.getContainerElement()],[e.bottomLeft.getContainerElement()],[e.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.right.getContainerElement()],[e.bottomRight.getContainerElement()],[e.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.center.getViewportElement()],[e.bottomCenter.getViewportElement()],[e.topCenter.getViewportElement()]];break}}),this.moveColumnFeature=this.createManagedBean(new Ote(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new Ate(this.pinned)),this.dragAndDropService.addDropTarget(this)}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}},kte=class extends k{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.pinnedWidthService=e.pinnedWidthService,this.ctrlsService=e.ctrlsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,n,i,s){super(),this.pinned=e,this.column=t,this.eResize=n,this.comp=i,this.ctrl=s}postConstruct(){let e=[],t,n,i=()=>{if(ft(this.eResize,t),!t)return;let o=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(e.push(o),n){let a=this.gos.get("skipHeaderOnAutoSize"),l=()=>{this.columnAutosizeService.autoSizeColumn(this.column,"uiColumnResized",a)};this.eResize.addEventListener("dblclick",l);let c=new Wo(this.eResize);c.addEventListener("doubleTap",l),e.push(()=>{this.eResize.removeEventListener("dblclick",l),c.removeEventListener("doubleTap",l),c.destroy()})}},s=()=>{e.forEach(o=>o()),e.length=0},r=()=>{let o=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(o!==t||a!==n)&&(t=o,n=a,s(),i())};r(),this.addDestroyFunc(s),this.ctrl.addRefreshFunction(r)}onResizing(e,t){let{column:n,lastResizeAmount:i,resizeStartWidth:s}=this,r=this.normaliseResizeAmount(t),o=s+r,a=[{key:n,newWidth:o}];if(this.column.getPinned()){let l=this.pinnedWidthService.getPinnedLeftWidth(),c=this.pinnedWidthService.getPinnedRightWidth(),u=vf(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(l+c+(r-i)>u)return}this.lastResizeAmount=r,this.columnSizeService.setColumnWidths(a,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e,n=this.pinned!=="left",i=this.pinned==="right";return this.gos.get("enableRtl")?n&&(t*=-1):i&&(t*=-1),t}},Lte=class extends k{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}onSpaceKeyDown(e){let t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(this.gos.getActiveDomElement())&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new yR),this.cbSelectAll.addCssClass("ag-header-select-all"),oi(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:this.onNewColumnsLoaded.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedListeners(this.cbSelectAll,{fieldValueChanged:this.onCbSelectAll.bind(this)}),dR(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;let e=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(e);let t=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!t),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){let e=this.localeService.getLocaleTextFunc(),n=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),i=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${i} (${n})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(`${i} (${n})`),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(e){return this.gos.get("rowSelection")==="multiple"?!0:(G(`${e} is only available if using 'multiple' rowSelection.`),!1)}checkRightRowModelType(e){let t=this.rowModel.getType();return t==="clientSide"||t==="serverSide"?!0:(G(`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;let e=this.cbSelectAll.getValue(),t=this.isFilteredOnly(),n=this.isCurrentPageOnly(),i="uiSelectAll";n?i="uiSelectAllCurrentPage":t&&(i="uiSelectAllFiltered");let s={source:i,justFiltered:t,justCurrentPage:n};e?this.selectionService.selectAllRowNodes(s):this.selectionService.deselectAllRowNodes(s)}isCheckboxSelection(){let e=this.column.getColDef().headerCheckboxSelection;if(typeof e=="function"){let t=e,n=this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()});e=t(n)}return e?this.checkRightRowModelType("headerCheckboxSelection")&&this.checkSelectionType("headerCheckboxSelection"):!1}isFilteredOnly(){return!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){return!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}},Vte=class extends RC{constructor(e,t,n){super(e,t,n),this.refreshFunctions=[],this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,t,n,i){this.comp=e,this.setGui(t),this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(i),this.addColumnHoverListener(),this.setupFilterClass(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.resizeFeature=this.createManagedBean(new kte(this.getPinned(),this.column,n,e,this)),this.createManagedBean(new TR([this.column],t)),this.createManagedBean(new RR(this.column,t,this.beans)),this.createManagedBean(new vl(t,{shouldStopEventPropagation:s=>this.shouldStopEventPropagation(s),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(),this.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],this.refresh.bind(this)),this.addManagedListeners(this.column,{colDefChanged:this.refresh.bind(this)}),this.addManagedEventListeners({columnValueChanged:this.onColumnValueChanged.bind(this),columnRowGroupChanged:this.onColumnRowGroupChanged.bind(this),columnPivotChanged:this.onColumnPivotChanged.bind(this),headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}resizeHeader(e,t){if(!this.column.isResizable())return;let n=this.column.getActualWidth(),i=this.column.getMinWidth(),s=this.column.getMaxWidth(),r=Math.min(Math.max(n+e,i),s);this.beans.columnSizeService.setColumnWidths([{key:this.column,newWidth:r}],t,!0,"uiColumnResized")}moveHeader(e){let{eGui:t,column:n,gos:i,ctrlsService:s}=this,r=this.getPinned(),o=t.getBoundingClientRect().left,a=n.getActualWidth(),l=i.get("enableRtl"),u=xR(e===0!==l?o-20:o+a+20,r,!0,i,s);FR({allMovingColumns:[n],isFromHeader:!0,hDirection:e,xPosition:u,pinned:r,fromEnter:!1,fakeEvent:!1,gos:i,columnModel:this.beans.columnModel,columnMoveService:this.beans.columnMoveService,presentedColsService:this.beans.visibleColsService}),s.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(n,"auto")}setupUserComp(){let e=this.lookupUserCompDetails();this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){let e=this.createParams(),t=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(t,e)}createParams(){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:t=>{this.menuService.showColumnMenu({column:this.column,buttonElement:t,positionBy:"button"})},showColumnMenuAfterMouseClick:t=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:t,positionBy:"mouse"})},showFilter:t=>{this.menuService.showFilterMenu({column:this.column,buttonElement:t,containerType:"columnFilter",positionBy:"button"})},progressSort:t=>{this.beans.sortController.progressSort(this.column,!!t,"uiColumnSorted")},setSort:(t,n)=>{this.beans.sortController.setSortForColumn(this.column,t,!!n,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(t,n)=>{this.setupTooltip(t,n)}})}setupSelectAll(){this.selectAllFeature=this.createManagedBean(new Lte(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===N.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===N.ENTER&&this.onEnterKeyDown(e),e.key===N.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){let t=e.shiftKey;this.beans.sortController.progressSort(this.column,t,"uiColumnSorted")}}showMenuOnKeyPress(e,t){let n=this.comp.getUserCompInstance();!n||!(n instanceof ZD)||n.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){let t=this.getRowIndex();this.focusService.setFocusedHeader(t,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));let n=this.gos.get("tooltipShowMode")==="whenTruncated",i=this.eGui,s=this.column.getColDef();!t&&n&&!s.headerComponent&&(t=()=>{let a=i.querySelector(".ag-header-cell-text");return a?a.scrollWidth>a.clientWidth:!0});let r={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>i,getLocation:()=>"header",getTooltipValue:()=>e??this.column.getColDef().headerTooltip,shouldDisplayTooltip:t},o=this.createManagedBean(new Iu(r));this.refreshFunctions.push(()=>o.refreshToolTip())}setupClassesFromColDef(){let e=()=>{let t=this.column.getColDef(),n=tG(t,this.gos,this.column,null),i=this.userHeaderClasses;this.userHeaderClasses=new Set(n),n.forEach(s=>{i.has(s)?i.delete(s):this.comp.addOrRemoveCssClass(s,!0)}),i.forEach(s=>this.comp.addOrRemoveCssClass(s,!1))};this.refreshFunctions.push(e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;let{column:t,beans:n,displayName:i,dragAndDropService:s,gos:r}=this,{columnModel:o}=n,a=!this.gos.get("suppressDragLeaveHidesColumns"),l=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:()=>this.createDragItem(t),dragItemName:i,onDragStarted:()=>{a=!r.get("suppressDragLeaveHidesColumns"),t.setMoving(!0,"uiColumnMoved")},onDragStopped:()=>t.setMoving(!1,"uiColumnMoved"),onGridEnter:c=>{if(a){let u=c?.columns?.filter(h=>!h.getColDef().lockVisible)||[];o.setColsVisible(u,!0,"uiColumnMoved")}},onGridExit:c=>{if(a){let u=c?.columns?.filter(h=>!h.getColDef().lockVisible)||[];o.setColsVisible(u,!1,"uiColumnMoved")}}};s.addDragSource(l,!0)}createDragItem(e){let t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}addRefreshFunction(e){this.refreshFunctions.push(e)}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(e=>e())}refreshHeaderComp(){let e=this.lookupUserCompDetails();(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass?this.attemptHeaderCompRefresh(e.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){let t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.columnNameService.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){let e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}onColumnRowGroupChanged(){this.checkDisplayName()}onColumnPivotChanged(){this.checkDisplayName()}onColumnValueChanged(){this.checkDisplayName()}setupWidth(){let e=()=>{let t=this.column.getActualWidth();this.comp.setWidth(`${t}px`)};this.addManagedListeners(this.column,{widthChanged:e}),e()}setupMovingCss(){let e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};this.addManagedListeners(this.column,{movingChanged:e}),e()}setupMenuClass(){let e=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};this.addManagedListeners(this.column,{menuVisibleChanged:e}),e()}setupSortableClass(){let e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};e(),this.addRefreshFunction(e),this.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(){let e=()=>{let t=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",t),this.refreshAria()};this.addManagedListeners(this.column,{filterActiveChanged:e}),e()}setupWrapTextClass(){let e=()=>{let t=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",t)};e(),this.addRefreshFunction(e)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){let{eGui:e,column:t,comp:n,beans:i}=this;if(!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),n.addOrRemoveCssClass("ag-header-span-height",!1),n.addOrRemoveCssClass("ag-header-span-total",!1);return}let{numberOfParents:s,isSpanningTotal:r}=this.column.getColumnGroupPaddingInfo();n.addOrRemoveCssClass("ag-header-span-height",s>0);let{columnModel:o}=i,a=o.getColumnHeaderRowHeight();if(s===0){n.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${a}px`);return}n.addOrRemoveCssClass("ag-header-span-total",r);let c=o.isPivotMode()?o.getPivotGroupHeaderHeight():o.getGroupHeaderHeight(),u=s*c;e.style.setProperty("top",`${-u}px`),e.style.setProperty("height",`${a+u}px`)}setupAutoHeight(e){let{columnModel:t,resizeObserverService:n}=this.beans,i=c=>{if(!this.isAlive())return;let{paddingTop:u,paddingBottom:h,borderBottomWidth:f,borderTopWidth:g}=ml(this.getGui()),v=u+h+f+g,C=e.offsetHeight+v;if(c<5){let E=this.beans.gos.getDocument(),I=!E||!E.contains(e),T=C==0;if(I||T){window.setTimeout(()=>i(c+1),0);return}}t.setColHeaderHeight(this.column,C)},s=!1,r,o=()=>{let c=this.column.isAutoHeaderHeight();c&&!s&&a(),!c&&s&&l()},a=()=>{s=!0,i(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),r=n.observeResize(e,()=>i(0))},l=()=>{s=!1,r&&r(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),r=void 0};o(),this.addDestroyFunc(()=>l()),this.addManagedListeners(this.column,{widthChanged:()=>s&&i(0)}),this.addManagedEventListeners({sortChanged:()=>{s&&window.setTimeout(()=>i(0))}}),this.addRefreshFunction(o)}refreshAriaSort(){if(this.sortable){let e=this.localeService.getLocaleTextFunc(),t=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(YX(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){let e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){let e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){let e=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains(this.beans.gos.getActiveDomElement()))return;let e=Array.from(this.ariaDescriptionProperties.keys()).sort((t,n)=>t==="filter"?-1:n.charCodeAt(0)-t.charCodeAt(0)).map(t=>this.ariaDescriptionProperties.get(t)).join(". ");this.beans.ariaAnnouncementService.announceValue(e)}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(){let e=()=>{if(!this.gos.get("columnHoverHighlight"))return;let t=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",t)};this.addManagedEventListeners({columnHoverChanged:e}),e()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(){let e=i=>this.handleMouseOverChange(i.type==="mouseenter"),t=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column),n=i=>this.handleContextMenuMouseEvent(i,void 0,this.column);this.addManagedListeners(this.getGui(),{mouseenter:e,mouseleave:e,click:t,contextmenu:n})}handleMouseOverChange(e){this.setActiveHeader(e);let n={type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column};this.eventService.dispatchEvent(n)}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){let t=this.comp.getUserCompInstance();return t instanceof ZD?t.getAnchorElementForMenu(e):this.getGui()}destroy(){super.destroy(),this.refreshFunctions=null,this.selectAllFeature=null,this.dragSourceElement=null,this.userCompDetails=null,this.userHeaderClasses=null,this.ariaDescriptionProperties=null}},Bte=class extends k{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.autoWidthCalculator=e.autoWidthCalculator,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,n,i){super(),this.eResize=t,this.comp=e,this.pinned=n,this.columnGroup=i}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}let e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gos.get("suppressAutoSize")){let t=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{let n=[];this.columnGroup.getDisplayedLeafColumns().forEach(s=>{s.getColDef().suppressAutoSize||n.push(s.getColId())}),n.length>0&&this.columnAutosizeService.autoSizeCols({colKeys:n,skipHeader:t,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(e){let t=this.getInitialValues(e);this.storeLocalValues(t),this.toggleColumnResizing(!0)}onResizing(e,t,n="uiColumnResized"){let i=this.normaliseDragChange(t),s=this.resizeStartWidth+i;this.resizeColumnsFromLocalValues(s,n,e)}getInitialValues(e){let t=this.getColumnsToResize(),n=this.getInitialSizeOfColumns(t),i=this.getSizeRatiosOfColumns(t,n),s={columnsToResize:t,resizeStartWidth:n,resizeRatios:i},r=null;if(e&&(r=this.visibleColsService.getGroupAtDirection(this.columnGroup,"After")),r){let o=r.getDisplayedLeafColumns(),a=s.groupAfterColumns=o.filter(c=>c.isResizable()),l=s.groupAfterStartWidth=this.getInitialSizeOfColumns(a);s.groupAfterRatios=this.getSizeRatiosOfColumns(a,l)}else s.groupAfterColumns=void 0,s.groupAfterStartWidth=void 0,s.groupAfterRatios=void 0;return s}storeLocalValues(e){let{columnsToResize:t,resizeStartWidth:n,resizeRatios:i,groupAfterColumns:s,groupAfterStartWidth:r,groupAfterRatios:o}=e;this.resizeCols=t,this.resizeStartWidth=n,this.resizeRatios=i,this.resizeTakeFromCols=s,this.resizeTakeFromStartWidth=r,this.resizeTakeFromRatios=o}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(e){let t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),n=this.getInitialValues();t>n.resizeStartWidth&&this.resizeColumns(n,t,e,!0)}resizeColumnsFromLocalValues(e,t,n=!0){if(!this.resizeCols||!this.resizeRatios)return;let i={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols??void 0,groupAfterStartWidth:this.resizeTakeFromStartWidth??void 0,groupAfterRatios:this.resizeTakeFromRatios??void 0};this.resizeColumns(i,e,t,n)}resizeColumns(e,t,n,i=!0){let{columnsToResize:s,resizeStartWidth:r,resizeRatios:o,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:c}=e,u=[];if(u.push({columns:s,ratios:o,width:t}),a){let h=t-r;u.push({columns:a,ratios:c,width:l-h})}this.columnSizeService.resizeColumnSets({resizeSets:u,finished:i,source:n}),i&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}getInitialSizeOfColumns(e){return e.reduce((t,n)=>t+n.getActualWidth(),0)}getSizeRatiosOfColumns(e,t){return e.map(n=>n.getActualWidth()/t)}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.clearLocalValues()}},Gte=class extends k{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();let e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){let e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",e===0)}},Hte=class extends RC{constructor(e,t,n){super(e,t,n),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){let i=this.getGui();this.setDragSource(i)}},this.column=e}setComp(e,t,n){this.comp=e,this.setGui(t),this.displayName=this.beans.columnNameService.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.addDestroyFunc(()=>{this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature))}),this.setupUserComp(),this.addHeaderMouseListeners();let i=this.getParentRowCtrl().getPinned(),s=this.column.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new TR(s,t)),this.createManagedBean(new RR(this.column,t,this.beans)),this.createManagedBean(new Gte(e,this.column)),this.resizeFeature=this.createManagedBean(new Bte(e,n,i,this.column)),this.createManagedBean(new vl(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners()}resizeHeader(e,t){if(!this.resizeFeature)return;let n=this.resizeFeature.getInitialValues(t);this.resizeFeature.resizeColumns(n,n.resizeStartWidth+e,"uiColumnResized",!0)}moveHeader(e){let{beans:t,eGui:n,column:i,gos:s,ctrlsService:r}=this,o=s.get("enableRtl"),a=e===0,l=this.getPinned(),c=n.getBoundingClientRect(),u=c.left,h=c.width,f=xR(a!==o?u-20:u+h+20,l,!0,s,r),g=i.getGroupId(),v=this.focusService.getFocusedHeader();FR({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,hDirection:e,xPosition:f,pinned:l,fromEnter:!1,fakeEvent:!1,gos:s,columnModel:t.columnModel,columnMoveService:t.columnMoveService,presentedColsService:t.visibleColsService});let y=i.getDisplayedLeafColumns(),C=a?y[0]:xe(y);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(C,"auto"),!this.isAlive()&&v&&this.restoreFocus(g,i,v)}restoreFocus(e,t,n){let i=t.getLeafColumns();if(!i.length)return;let s=i[0].getParent();if(!s)return;let r=this.findGroupWidthId(s,e);r&&this.focusService.focusHeaderPosition({headerPosition:se(B({},n),{column:r})})}findGroupWidthId(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return null}resizeLeafColumnsToFit(e){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(){let e=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:n=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),n,"gridInitializing")},setTooltip:(n,i)=>{this.setupTooltip(n,i)}}),t=this.userComponentFactory.getHeaderGroupCompDetails(e);this.comp.setUserCompDetails(t)}addHeaderMouseListeners(){let e=i=>this.handleMouseOverChange(i.type==="mouseenter"),t=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),n=i=>this.handleContextMenuMouseEvent(i,void 0,this.column.getProvidedColumnGroup());this.addManagedListeners(this.getGui(),{mouseenter:e,mouseleave:e,click:t,contextmenu:n})}handleMouseOverChange(e){let n={type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()};this.eventService.dispatchEvent(n)}setupTooltip(e,t){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));let n=this.column.getColGroupDef(),i=this.gos.get("tooltipShowMode")==="whenTruncated",s=this.eGui;!t&&i&&!n?.headerGroupComponent&&(t=()=>{let o=s.querySelector(".ag-header-group-text");return o?o.scrollWidth>o.clientWidth:!0});let r={getColumn:()=>this.column,getGui:()=>s,getLocation:()=>"headerGroup",getTooltipValue:()=>e??(n&&n.headerTooltip),shouldDisplayTooltip:t};n&&(r.getColDef=()=>n),this.createManagedBean(new Iu(r))}setupExpandable(){let e=this.column.getProvidedColumnGroup();this.refreshExpanded();let t=this.refreshExpanded.bind(this);this.addManagedListeners(e,{expandedChanged:t,expandableChanged:t})}refreshExpanded(){let{column:e}=this;this.expandable=e.isExpandable();let t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){let e=this.column.getColGroupDef(),t=tG(e,this.gos,null,this.column);this.column.isPadding()?(t.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(i=>i.isSpanHeaderHeight())&&t.push("ag-header-span-height")):t.push("ag-header-group-cell-with-group"),t.forEach(n=>this.comp.addOrRemoveCssClass(n,!0))}setupMovingCss(){let t=this.column.getProvidedColumnGroup().getLeafColumns(),n=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());t.forEach(i=>{this.addManagedListeners(i,{movingChanged:n})}),n()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){let t=this.getRowIndex();this.beans.focusService.setFocusedHeader(t,this.column)}}handleKeyDown(e){super.handleKeyDown(e);let t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===N.ENTER){let n=this.column,i=!n.isExpanded();this.beans.columnModel.setColumnGroupOpened(n.getProvidedColumnGroup(),i,"uiColumnExpanded")}}setDragSource(e){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!e))return;let{beans:t,column:n,displayName:i,gos:s,dragAndDropService:r}=this,{columnModel:o}=t,a=n.getProvidedColumnGroup().getLeafColumns(),l=!s.get("suppressDragLeaveHidesColumns"),c=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>l?"hide":"notAllowed",dragItemName:i,getDragItem:()=>this.getDragItemForGroup(n),onDragStarted:()=>{l=!s.get("suppressDragLeaveHidesColumns"),a.forEach(u=>u.setMoving(!0,"uiColumnDragged"))},onDragStopped:()=>a.forEach(u=>u.setMoving(!1,"uiColumnDragged")),onGridEnter:u=>{if(l){let h=u?.columns?.filter(f=>!f.getColDef().lockVisible)||[];o.setColsVisible(h,!0,"uiColumnMoved")}},onGridExit:u=>{if(l){let h=u?.columns?.filter(f=>!f.getColDef().lockVisible)||[];o.setColsVisible(h,!1,"uiColumnMoved")}}};r.addDragSource(c,!0)}getDragItemForGroup(e){let t=e.getProvidedColumnGroup().getLeafColumns(),n={};t.forEach(s=>n[s.getId()]=s.isVisible());let i=[];return this.beans.visibleColsService.getAllCols().forEach(s=>{t.indexOf(s)>=0&&(i.push(s),Qn(t,s))}),t.forEach(s=>i.push(s)),{columns:i,visibleState:n}}isSuppressMoving(){let e=!1;return this.column.getLeafColumns().forEach(n=>{(n.getColDef().suppressMovable||n.getColDef().lockPosition)&&(e=!0)}),e||this.gos.get("suppressMovableColumns")}},Ute=0,LD=class extends k{constructor(e,t,n){super(),this.instanceId=Ute++,this.rowIndex=e,this.pinned=t,this.type=n;let i=n=="group"?"ag-header-row-column-group":n=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${i}`}wireBeans(e){this.beans=e}postConstruct(){this.isPrintLayout=this.gos.isDomLayout("print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}getInstanceId(){return this.instanceId}areCellsRendered(){return this.comp?this.getHeaderCellCtrls().every(e=>e.getGui()!=null):!1}setComp(e,t=!0){this.comp=e,t&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(){let e=this.onRowHeightChanged.bind(this);this.addManagedEventListeners({columnResized:this.onColumnResized.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:t=>this.onVirtualColumnsChanged(t.afterScroll),columnHeaderHeightChanged:e,gridStylesChanged:e,advancedFilterEnabledChanged:e}),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",t=>this.isEnsureDomOrder=t.currentValue),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e)}getHeaderCellCtrl(e){if(this.headerCellCtrls)return uC(this.headerCellCtrls).find(t=>t.getColumnGroupChild()===e)}onDisplayedColumnsChanged(){this.isPrintLayout=this.gos.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){let e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){let{visibleColsService:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){let{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let{columnModel:e,filterManager:t}=this.beans,n=e.getHeaderRowCount(),i=[],s=0;t?.hasFloatingFilters()&&(n++,s=1);let r=e.getColumnGroupHeaderRowHeight(),o=e.getColumnHeaderRowHeight(),a=1+s,l=n-a;for(let h=0;h<l;h++)i.push(r);i.push(o);for(let h=0;h<s;h++)i.push(e.getFloatingFiltersHeight());let c=0;for(let h=0;h<this.rowIndex;h++)c+=i[h];let u=i[this.rowIndex];return{topOffset:c,rowHeight:u}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(e=!1){let t=this.getHeaderCtrls(),n=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,n,e)}getHeaderCtrls(){let e=this.headerCellCtrls;this.headerCellCtrls=new Map;let t=this.getColumnsInViewport();for(let i of t)this.recycleAndCreateHeaderCtrls(i,e);let n=i=>{let{focusService:s,visibleColsService:r}=this.beans;return s.isHeaderWrapperFocused(i)?r.isVisible(i.getColumnGroupChild()):!1};if(e)for(let[i,s]of e)n(s)?this.headerCellCtrls.set(i,s):this.destroyBean(s);return this.getHeaderCellCtrls()}getHeaderCellCtrls(){return Array.from(this.headerCellCtrls?.values()??[])}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls||e.isEmptyGroup())return;let n=e.getUniqueId(),i;if(t&&(i=t.get(n),t.delete(n)),i&&i.getColumnGroupChild()!=e&&(this.destroyBean(i),i=void 0),i==null)switch(this.type){case"filter":{i=this.createBean(this.beans.ctrlsFactory.getInstance("headerFilterCell",e,this.beans,this));break}case"group":i=this.createBean(new Hte(e,this.beans,this));break;default:i=this.createBean(new Vte(e,this.beans,this));break}this.headerCellCtrls.set(n,i)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let e=[],t=this.getActualDepth(),{columnViewportService:n}=this.beans;return["left",null,"right"].forEach(i=>{let s=n.getHeadersToRender(i,t);e=e.concat(s)}),e}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnViewportService.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(e){return this.headerCellCtrls?this.getHeaderCellCtrls().find(i=>i.getColumnGroupChild()==e):void 0}focusHeader(e,t){let n=this.findHeaderCellCtrl(e);return n?n.focus(t):!1}destroy(){this.headerCellCtrls&&this.headerCellCtrls.forEach(e=>{this.destroyBean(e)}),this.headerCellCtrls=void 0,super.destroy()}},Wte=class extends k{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}wireBeans(e){this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.focusService=e.focusService,this.filterManager=e.filterManager}setComp(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport);let n=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:n,advancedFilterEnabledChanged:n}),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()}getAllCtrls(){let e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){let t=new Ru,n=this.focusService.getFocusHeaderToUseAfterRefresh(),i=()=>{let a=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let l=0;l<a;l++){let c=this.createBean(new LD(t.next(),this.pinned,"group"));this.groupsRowCtrls.push(c)}},s=()=>{let a=t.next(),l=!this.hidden&&(this.columnsRowCtrl==null||!e||this.columnsRowCtrl.getRowIndex()!==a);(l||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),l&&(this.columnsRowCtrl=this.createBean(new LD(a,this.pinned,"column")))},r=()=>{this.includeFloatingFilter=!!this.filterManager?.hasFloatingFilters()&&!this.hidden;let a=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){a();return}let l=t.next();if(this.filtersRowCtrl){let c=this.filtersRowCtrl.getRowIndex()!==l;(!e||c)&&a()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new LD(l,this.pinned,"filter")))};i(),s(),r();let o=this.getAllCtrls();this.comp.setCtrls(o),this.restoreFocusOnHeader(n)}getHeaderCtrlForColumn(e){if(zo(e))return this.columnsRowCtrl?this.columnsRowCtrl.getHeaderCellCtrl(e):void 0;if(this.groupsRowCtrls.length!==0)for(let t=0;t<this.groupsRowCtrls.length;t++){let n=this.groupsRowCtrls[t].getHeaderCellCtrl(e);if(n)return n}}getHtmlElementForColumnHeader(e){let t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null}getRowType(e){let n=this.getAllCtrls()[e];return n?n.getType():void 0}focusHeader(e,t,n){let s=this.getAllCtrls()[e];return s?s.focusHeader(t,n):!1}getViewport(){return this.eViewport}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}setupDragAndDrop(e){let t=new Nte(this.pinned,e);this.createManagedBean(t)}restoreFocusOnHeader(e){if(!e)return;let{column:t}=e;t.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:e})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){let e=this.filterManager?.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new PR(e=>this.comp.setCenterWidth(`${e}px`),!0))}setupPinnedWidth(){if(this.pinned==null)return;let e=this.pinned==="left",t=this.pinned==="right";this.hidden=!0;let n=()=>{let i=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(i==null)return;let s=i==0,r=this.hidden!==s,o=this.gos.get("enableRtl"),a=this.gos.getScrollbarWidth(),c=this.scrollVisibleService.isVerticalScrollShowing()&&(o&&e||!o&&t)?i+a:i;this.comp.setPinnedContainerWidth(`${c}px`),this.comp.setDisplayed(!s),r&&(this.hidden=s,this.refresh())};this.addManagedEventListeners({leftPinnedWidthChanged:n,rightPinnedWidthChanged:n,scrollVisibilityChanged:n,scrollbarWidthChanged:n})}},jte='<div class="ag-pinned-left-header" role="rowgroup"></div>',zte='<div class="ag-pinned-right-header" role="rowgroup"></div>',$te=`<div class="ag-header-viewport" role="presentation">
        <div class="ag-header-container" data-ref="eCenterContainer" role="rowgroup"></div>
    </div>`,VD=class extends Ve{constructor(e){super(),this.eCenterContainer=X,this.headerRowComps={},this.rowCompsList=[],this.pinned=e}postConstruct(){this.selectAndSetTemplate();let e={setDisplayed:n=>this.setDisplayed(n),setCtrls:n=>this.setCtrls(n),setCenterWidth:n=>this.eCenterContainer.style.width=n,setViewportScrollLeft:n=>this.getGui().scrollLeft=n,setPinnedContainerWidth:n=>{let i=this.getGui();i.style.width=n,i.style.maxWidth=n,i.style.minWidth=n}};this.createManagedBean(new Wte(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){let e=this.pinned=="left",t=this.pinned=="right",n=e?jte:t?zte:$te;this.setTemplate(n),this.eRowContainer=this.eCenterContainer!==X?this.eCenterContainer:this.getGui()}destroy(){this.setCtrls([]),super.destroy()}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){let t=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let n,i=s=>{let r=s.getGui();r.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(r),n&&bB(this.eRowContainer,r,n),n=r};e.forEach(s=>{let r=s.getInstanceId(),o=t[r];delete t[r];let a=o||this.createBean(new Rte(s));this.headerRowComps[r]=a,this.rowCompsList.push(a),i(a)}),jo(t).forEach(s=>this.destroyRowComp(s))}},qte=class extends Ve{constructor(){super('<div class="ag-header" role="presentation"/>')}postConstruct(){let e={addOrRemoveCssClass:(i,s)=>this.addOrRemoveCssClass(i,s),setHeightAndMinHeight:i=>{this.getGui().style.height=i,this.getGui().style.minHeight=i}};this.createManagedBean(new Ite).setComp(e,this.getGui(),this.getFocusableElement());let n=i=>{this.createManagedBean(i),this.appendChild(i)};n(new VD("left")),n(new VD(null)),n(new VD("right"))}},Kte={selector:"AG-HEADER-ROOT",component:qte};var OR=class extends k{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){let e=this.getDomLayout(),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},n=t.autoHeight?"ag-layout-auto-height":t.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(n,t)}getDomLayout(){let e=this.gos.get("domLayout")??"normal";return["normal","print","autoHeight"].indexOf(e)===-1?(G(`${e} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):e}},Qte=class extends Ve{constructor(){super(`
            <div class="ag-overlay" role="presentation">
                <div class="ag-overlay-panel" role="presentation">
                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>
                </div>
            </div>`),this.eOverlayWrapper=X,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeOverlayWrapperCssClass=null}wireBeans(e){this.overlayService=e.overlayService}updateLayoutClasses(e,t){let n=this.eOverlayWrapper.classList;n.toggle("ag-layout-auto-height",t.autoHeight),n.toggle("ag-layout-normal",t.normal),n.toggle("ag-layout-print",t.print)}postConstruct(){this.createManagedBean(new OR(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.registerOverlayWrapperComp(this)}setWrapperTypeClass(e){let t=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&t.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,t.toggle(e,!0)}showOverlay(e,t,n){this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.activePromise=e,e?.then(i=>{if(this.activePromise!==e){this.activeOverlay!==i&&(this.destroyBean(i),i=null);return}if(this.activePromise=null,!!i&&this.activeOverlay!=i&&(this.eOverlayWrapper.appendChild(i.getGui()),this.activeOverlay=i,n)){let s=i;this.updateListenerDestroyFunc=this.addManagedPropertyListener(n,({currentValue:r})=>{s.refresh?.(this.gos.addGridCommonParams(B({},r??{})))})}}),this.setDisplayed(!0,{skipAriaHidden:!0})}destroyActiveOverlay(){this.activePromise=null;let e=this.activeOverlay;if(!e)return;this.activeOverlay=null;let t=this.updateListenerDestroyFunc;t&&(t(),this.updateListenerDestroyFunc=null),this.destroyBean(e),An(this.eOverlayWrapper)}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.destroyActiveOverlay(),super.destroy()}},Yte={selector:"AG-OVERLAY-WRAPPER",component:Qte},dG=class extends Ve{constructor(e,t){super(),this.direction=t,this.eViewport=X,this.eContainer=X,this.hideTimeout=null,this.setTemplate(e)}wireBeans(e){this.animationFrameService=e.animationFrameService}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",mB()||$o())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=CB(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){let e=this.getGui(),t=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),n=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:n,touchend:n})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)}})}attemptSettingScrollPosition(e){let t=this.getViewport();RX(()=>ys(t),()=>this.setScrollPosition(e),100)}getViewport(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedElementListeners(this.getViewport(),{scroll:e})}},Jte=class extends dG{constructor(){super(`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>
        </div>`,"horizontal"),this.eLeftSpacer=X,this.eRightSpacer=X}wireBeans(e){super.wireBeans(e),this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){super.postConstruct();let e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new PR(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;let e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){let e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.visibleColsService.getDisplayedColumnsRightWidth(),n=!this.enableRtl&&e,i=this.gos.getScrollbarWidth();n&&(t+=i),Cs(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=i);let s=this.visibleColsService.getColsLeftWidth();this.enableRtl&&e&&(s+=i),Cs(this.eLeftSpacer,s),this.eLeftSpacer.classList.toggle("ag-scroller-corner",s<=i)}setScrollVisible(){let e=this.scrollVisibleService.isHorizontalScrollShowing(),t=this.invisibleScrollbar,n=this.gos.get("suppressHorizontalScroll"),i=e&&this.gos.getScrollbarWidth()||0,r=n?0:i===0&&t?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),lf(this.getGui(),r),lf(this.eViewport,r),lf(this.eContainer,r),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return wC(this.getViewport(),this.enableRtl)}setScrollPosition(e){ys(this.getViewport())||this.attemptSettingScrollPosition(e),SC(this.getViewport(),e,this.enableRtl)}},Xte={selector:"AG-FAKE-HORIZONTAL-SCROLL",component:Jte},hG=class extends k{wireBeans(e){this.maxDivHeightScaler=e.rowContainerHeightService}constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this)})}onHeightChanged(){let e=this.maxDivHeightScaler.getUiContainerHeight(),t=e!=null?`${e}px`:"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)}},Zte=class extends dG{wireBeans(e){super.wireBeans(e),this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}constructor(){super(`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>
            </div>
        </div>`,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new hG(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this)})}setScrollVisible(){let e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.invisibleScrollbar,n=e&&this.gos.getScrollbarWidth()||0,i=n===0&&t?16:n;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),Cs(this.getGui(),i),Cs(this.eViewport,i),Cs(this.eContainer,i),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){let{ctrlsService:e}=this,n=e.getGridBodyCtrl().getBodyViewportElement(),i=this.getScrollPosition(),s=n.scrollTop;i!=s&&this.setScrollPosition(s,!0)}getScrollPosition(){return this.getViewport().scrollTop}setScrollPosition(e,t){!t&&!ys(this.getViewport())&&this.attemptSettingScrollPosition(e),this.getViewport().scrollTop=e}},ene={selector:"AG-FAKE-VERTICAL-SCROLL",component:Zte},tne=class extends k{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=Yn(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=Yn(()=>this.lastScrollSource[0]=null,500)}wireBeans(e){this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.rowModel=e.rowModel,this.heightScaler=e.rowContainerHeightService,this.rowRenderer=e.rowRenderer,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)}),this.ctrlsService.whenReady(e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){let{fakeHScrollComp:e,fakeVScrollComp:t}=this.ctrlsService.getParams();this.addManagedElementListeners(this.centerRowsCtrl.getViewportElement(),{scroll:this.onHScroll.bind(this)}),e.onScrollCallback(this.onFakeHScroll.bind(this));let n=this.gos.get("debounceVerticalScrollbar"),i=n?Yn(this.onVScroll.bind(this),100):this.onVScroll.bind(this),s=n?Yn(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedElementListeners(this.eBodyViewport,{scroll:i}),t.onScrollCallback(s)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){if(this.centerRowsCtrl==null)return;e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft());let n=this.enableRtl?e:-e,{topCenter:i,stickyTopCenter:s,stickyBottomCenter:r,centerHeader:o,bottomCenter:a,fakeHScrollComp:l}=this.ctrlsService.getParams();o.setHorizontalScroll(-n),a.setContainerTranslateX(n),i.setContainerTranslateX(n),s.setContainerTranslateX(n),r.setContainerTranslateX(n);let c=this.centerRowsCtrl.getViewportElement(),u=this.lastScrollSource[1]===0;e=Math.abs(e),u?l.setScrollPosition(e):SC(c,e,this.enableRtl)}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(this.lastScrollSource[t]=e,!0):this.lastScrollSource[t]===e}onFakeHScroll(){this.isControllingScroll(1,1)&&this.onHScrollCommon(1)}onHScroll(){this.isControllingScroll(0,1)&&this.onHScrollCommon(0)}onHScrollCommon(e){let t=this.centerRowsCtrl.getViewportElement(),{scrollLeft:n}=t;if(this.shouldBlockScrollUpdate(1,n,!0))return;let i;e===0?i=wC(t,this.enableRtl):i=this.ctrlsService.get("fakeHScrollComp").getScrollPosition(),this.doHorizontalScroll(Math.round(i)),this.resetLastHScrollDebounced()}onFakeVScroll(){this.isControllingScroll(1,0)&&this.onVScrollCommon(1)}onVScroll(){this.isControllingScroll(0,0)&&this.onVScrollCommon(0)}onVScrollCommon(e){let t;e===0?t=this.eBodyViewport.scrollTop:t=this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),!this.shouldBlockScrollUpdate(0,t,!0)&&(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,e===0?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){let t=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){let t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{let n=se(B({},t),{type:"bodyScrollEnd"});this.eventService.dispatchEvent(n)},100)}shouldBlockScrollUpdate(e,t,n=!1){return n&&!$o()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){let t=gR(this.eBodyViewport),{scrollHeight:n}=this.eBodyViewport;return e<0||e+t>n}shouldBlockHorizontalScroll(e){let t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:n}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl&&yC()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>n}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(0)}scrollGridIfNeeded(){let e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e,t=!1){let i=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl&&yC()?e=e>0?0:i:e=Math.min(Math.max(e,0),i)),SC(this.centerRowsCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){let t=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){let n=this.rowModel.getRowCount(),i=-1;for(let s=0;s<n;s++){let r=this.rowModel.getRow(s);if(typeof e=="function"){if(r&&e(r)){i=s;break}}else if(e===r||e===r.data){i=s;break}}i>=0&&this.ensureIndexVisible(i,t)}ensureIndexVisible(e,t){if(this.gos.isDomLayout("print"))return;let n=this.rowModel.getRowCount();if(typeof e!="number"||e<0||e>=n){G("Invalid row index for ensureIndexVisible: "+e);return}let s=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{s||this.paginationService?.goToPageWithIndex(e);let r=this.ctrlsService.getGridBodyCtrl(),o=r.getStickyTopHeight(),a=r.getStickyBottomHeight(),l=this.rowModel.getRow(e),c;do{let u=l.rowTop,h=l.rowHeight,f=this.pageBoundsService.getPixelOffset(),g=l.rowTop-f,v=g+l.rowHeight,y=this.getVScrollPosition(),C=this.heightScaler.getDivStretchOffset(),E=y.top+C,I=y.bottom+C,T=I-E,x=this.heightScaler.getScrollPositionForPixel(g),z=this.heightScaler.getScrollPositionForPixel(v-T),V=Math.min((x+z)/2,g),b=E+o>g,S=I-a<v,_=null;t==="top"?_=x:t==="bottom"?_=z:t==="middle"?_=V:b?_=x-o:S&&(_=z+a),_!==null&&(this.setVerticalScrollPosition(_),this.rowRenderer.redraw({afterScroll:!0})),c=u!==l.rowTop||h!==l.rowHeight}while(c);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(e,t="auto"){let n=this.columnModel.getCol(e);if(!n||n.isPinned()||!this.visibleColsService.isColDisplayed(n))return;let i=this.getPositionedHorizontalScroll(n,t);this.getFrameworkOverrides().wrapIncoming(()=>{i!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(i),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(e,t){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(t),this.setVerticalScrollPosition(e),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(e,t){let{columnBeforeStart:n,columnAfterEnd:i}=this.isColumnOutsideViewport(e),s=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),r=this.centerRowsCtrl.getCenterWidth(),o=this.enableRtl,a=(o?n:i)||s,l=o?i:n;t!=="auto"&&(a=t==="start",l=t==="end");let c=t==="middle";if(a||l||c){let{colLeft:u,colMiddle:h,colRight:f}=this.getColumnBounds(e);return c?h-r/2:a?o?f:u:o?u-r:f-r}return null}isColumnOutsideViewport(e){let{start:t,end:n}=this.getViewportBounds(),{colLeft:i,colRight:s}=this.getColumnBounds(e),r=this.enableRtl,o=r?t>s:n<s,a=r?n<i:t>i;return{columnBeforeStart:o,columnAfterEnd:a}}getColumnBounds(e){let t=this.enableRtl,n=this.visibleColsService.getBodyContainerWidth(),i=e.getActualWidth(),s=e.getLeft(),r=t?-1:1,o=t?n-s:s,a=o+i*r,l=o+i/2*r;return{colLeft:o,colMiddle:l,colRight:a}}getViewportBounds(){let e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),n=t,i=e+t;return{start:n,end:i,width:e}}},fG="ag-force-vertical-scroll",nne="ag-selectable",ine="ag-column-moving",sne=class extends k{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.menuService=e.menuService,this.headerNavigationService=e.headerNavigationService,this.dragAndDropService=e.dragAndDropService,this.pinnedRowModel=e.pinnedRowModel,this.rowRenderer=e.rowRenderer,this.popupService=e.popupService,this.mouseEventService=e.mouseEventService,this.rowModel=e.rowModel,this.filterManager=e.filterManager,this.environment=e.environment}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,t,n,i,s,r,o){this.comp=e,this.eGridBody=t,this.eBodyViewport=n,this.eTop=i,this.eBottom=s,this.eStickyTop=r,this.eStickyBottom=o,this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",a=>this.setCellTextSelection(a.currentValue)),this.createManagedBean(new OR(this.comp)),this.bodyScrollFeature=this.createManagedBean(new tne(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([i,n,s,r,o]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.filterManager?.setupAdvancedFilterHeaderComp(i),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),pinnedRowDataChanged:this.setFloatingHeights.bind(this),pinnedHeightChanged:this.setFloatingHeights.bind(this),headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}addFocusListeners(e){e.forEach(t=>{this.addManagedElementListeners(t,{focusin:n=>{let{target:i}=n,s=_u(i,"ag-root",t);t.classList.toggle("ag-has-focus",!s)},focusout:n=>{let{target:i,relatedTarget:s}=n,r=t.contains(s),o=_u(s,"ag-root",t);_u(i,"ag-root",t)||(!r||o)&&t.classList.remove("ag-has-focus")}})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(ine,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(nne,e)}onScrollVisibilityChanged(){let e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyWidth(e),this.setStickyBottomOffsetBottom();let t=e&&this.gos.getScrollbarWidth()||0,n=CB()?16:0,i=`calc(100% + ${t+n}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(i))}onGridColumnsChanged(){let e=this.columnModel.getCols();this.comp.setColumnCount(e.length)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;let e=n=>{let i=n.relatedTarget;if(XD(i)===null){this.rowRenderer.stopEditing();return}let s=t.some(r=>r.contains(i))&&this.mouseEventService.isElementInThisGrid(i);if(!s){let r=this.popupService;s=r.getActivePopups().some(o=>o.contains(i))||r.isElementWithinCustomPopup(i)}s||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];t.forEach(n=>this.addManagedElementListeners(n,{focusout:e}))}updateRowCount(){let e=this.headerNavigationService.getHeaderRowCount()+(this.filterManager?.getHeaderRowCount()??0),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,n=t===-1?-1:e+t;this.comp.setRowCount(n)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){let t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){let e=this.gos.get("alwaysShowVerticalScroll"),t=e?fG:null,n=this.gos.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||n&&CZ(this.eBodyViewport)}setupRowAnimationCssClass(){let e=this.environment.hasMeasuredSizes(),t=()=>{let n=e&&this.gos.isAnimateRows()&&!this.rowContainerHeightService.isStretching(),i=n?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(i,n)};t(),this.addManagedEventListeners({heightScaleChanged:t}),this.addManagedPropertyListener("animateRows",t),this.addManagedEventListeners({gridStylesChanged:()=>{!e&&this.environment.hasMeasuredSizes()&&(e=!0,t())}})}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){let e=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:e}),this.mockContextMenuForIPad(e),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){let e=this.eBodyViewport.querySelector(".ag-full-width-container"),t=this.eBodyViewport.querySelector(".ag-center-cols-viewport");e&&t&&this.addManagedElementListeners(e,{wheel:n=>this.onFullWidthContainerWheel(n,t)})}onFullWidthContainerWheel(e,t){!e.deltaX||Math.abs(e.deltaY)>Math.abs(e.deltaX)||!this.mouseEventService.isEventFromThisGrid(e)||(e.preventDefault(),t.scrollBy({left:e.deltaX}))}onBodyViewportContextMenu(e,t,n){if(!e&&!n)return;this.gos.get("preventDefaultOnContextMenu")&&(e||n).preventDefault();let{target:i}=e||t;(i===this.eBodyViewport||i===this.ctrlsService.get("center").getViewportElement())&&this.menuService.showContextMenu({mouseEvent:e,touchEvent:n,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(e){if(!$o())return;let t=new Wo(this.eBodyViewport),n=i=>{e(void 0,i.touchStart,i.touchEvent)};this.addManagedListeners(t,{longTap:n}),this.addDestroyFunc(()=>t.destroy())}onBodyViewportWheel(e){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}onStickyWheel(e){e.preventDefault(),e.offsetY&&this.scrollVertically(e.deltaY)}getGui(){return this.eGridBody}scrollVertically(e){let t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new hee(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)}getRowDragFeature(){return this.rowDragFeature}setFloatingHeights(){let{pinnedRowModel:e}=this,t=e.getPinnedTopTotalHeight(),n=e.getPinnedBottomTotalHeight();this.comp.setTopHeight(t),this.comp.setBottomHeight(n),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(n?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{let t=this.gos.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){let t=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+(this.filterManager?.getHeaderHeight()??0),n=this.pinnedRowModel.getPinnedTopTotalHeight(),i=0;t>0&&(i+=t),n>0&&(i+=n),i>0&&(i+=1),this.comp.setStickyTopTop(`${i}px`)}setStickyBottomOffsetBottom(){let e=this.pinnedRowModel.getPinnedBottomTotalHeight(),n=this.scrollVisibleService.isHorizontalScrollShowing()&&this.gos.getScrollbarWidth()||0,i=e+n;this.comp.setStickyBottomBottom(`${i}px`)}sizeColumnsToFit(e,t){let i=this.isVerticalScrollShowing()?this.gos.getScrollbarWidth():0,r=vf(this.eGridBody)-i;if(r>0){this.columnSizeService.sizeColumnsToFit(r,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFit(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFit(e,-1)},500):G("tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}},rne=class extends Ve{constructor(e,t,n,i,s){super(),this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.column=t.getColumn(),this.rowNode=t.getRowNode(),this.rowCtrl=t.getRowCtrl(),this.eRow=i,this.cellCtrl=t;let r=document.createElement("div");r.setAttribute("comp-id",`${this.getCompId()}`),this.setTemplateFromElement(r);let o=this.getGui();this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1);let a=(u,h)=>{h!=null&&h!=""?o.setAttribute(u,h):o.removeAttribute(u)};oi(o,t.getCellAriaRole()),a("col-id",t.getColumnIdSanitised());let l=t.getTabIndex();l!==void 0&&a("tabindex",l.toString());let c={addOrRemoveCssClass:(u,h)=>this.addOrRemoveCssClass(u,h),setUserStyles:u=>DB(o,u),getFocusableElement:()=>this.getFocusableElement(),setIncludeSelection:u=>this.includeSelection=u,setIncludeRowDrag:u=>this.includeRowDrag=u,setIncludeDndSource:u=>this.includeDndSource=u,setRenderDetails:(u,h,f)=>this.setRenderDetails(u,h,f),setEditDetails:(u,h,f)=>this.setEditDetails(u,h,f),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};t.setComp(c,this.getGui(),this.eCellWrapper,n,s)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(e,t,n){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;let s=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!(n||s)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(t))}setEditDetails(e,t,n){e?this.createCellEditorInstance(e,t,n):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(e){let t=this.includeRowDrag||this.includeDndSource||this.includeSelection,n=t||this.forceWrapper,i=n&&this.eCellWrapper==null;if(i){let c=document.createElement("div");c.setAttribute("role","presentation"),c.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=c,this.getGui().appendChild(this.eCellWrapper)}let s=!n&&this.eCellWrapper!=null;s&&(qi(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!n);let r=!e&&n,o=r&&this.eCellValue==null;if(o){let c=document.createElement("span");c.setAttribute("role","presentation"),c.setAttribute("class","ag-cell-value"),this.eCellValue=c,this.eCellWrapper.appendChild(this.eCellValue)}let a=!r&&this.eCellValue!=null;a&&(qi(this.eCellValue),this.eCellValue=void 0);let l=i||s||o||a;return l&&this.removeControls(),e||t&&this.addControls(),l}addControls(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(e,t,n){let i=this.editorVersion,s=e.newAgStackInstance();if(s==null)return;let{params:r}=e;s.then(a=>this.afterCellEditorCreated(i,a,r,t,n)),Ie(this.cellEditor)&&r.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){let t=this.getParentOfValue();An(t);let n=e!=null?tr(e,!0):null;n!=null&&(t.textContent=n)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){let{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),qi(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){let{context:e}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),qi(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==e.componentClass)return!1;let t=this.cellRenderer.refresh(e.params);return t===!0||t===void 0}createCellRendererInstance(e){let n=!this.beans.gos.get("suppressAnimationFrame"),i=this.rendererVersion,{componentClass:s}=e,r=()=>{if(this.rendererVersion!==i||!this.isAlive())return;let a=e.newAgStackInstance(),l=this.afterCellRendererCreated.bind(this,i,s);a&&a.then(l)};n&&this.firstRender?this.beans.animationFrameService.createTask(r,this.rowNode.rowIndex,"createTasksP2"):r()}getCtrl(){return this.cellCtrl}getRowCtrl(){return this.rowCtrl}getCellRenderer(){return this.cellRenderer}getCellEditor(){return this.cellEditor}afterCellRendererCreated(e,t,n){if(!this.isAlive()||e!==this.rendererVersion){this.beans.context.destroyBean(n);return}if(this.cellRenderer=n,this.cellRendererClass=t,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){let s=this.getParentOfValue();An(s),s.appendChild(this.cellRendererGui)}}afterCellEditorCreated(e,t,n,i,s){if(e!==this.editorVersion){this.beans.context.destroyBean(t);return}if(t.isCancelBeforeStart&&t.isCancelBeforeStart()){this.beans.context.destroyBean(t),this.cellCtrl.stopEditing(!0);return}if(!t.getGui){G(`cellEditor for column ${this.column.getId()} is missing getGui() method`),this.beans.context.destroyBean(t);return}this.cellEditor=t,this.cellEditorGui=t.getGui();let a=i||t.isPopup!==void 0&&t.isPopup();a?this.addPopupCellEditor(n,s):this.addInCellEditor(),this.refreshEditStyles(!0,a),t.afterGuiAttached&&t.afterGuiAttached()}refreshEditStyles(e,t){this.addOrRemoveCssClass("ag-cell-inline-editing",e&&!t),this.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!t),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!t),this.rowCtrl?.setInlineEditingCss(e)}addInCellEditor(){let e=this.getGui();e.contains(this.beans.gos.getActiveDomElement())&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(e,t){this.beans.gos.get("editType")==="fullRow"&&G("popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");let n=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(this.beans.editService.createPopupEditorWrapper(e));let i=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&i.appendChild(this.cellEditorGui);let s=this.beans.popupService,r=this.beans.gos.get("stopEditingWhenCellsLoseFocus"),o=t??(n.getPopupPosition?n.getPopupPosition():"over"),a=this.beans.gos.get("enableRtl"),l={ePopup:i,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:o,alignSide:a?"right":"left",keepWithinBounds:!0},c=s.positionPopupByComponent.bind(s,l),u=this.beans.localeService.getLocaleTextFunc(),h=s.addPopup({modal:r,eChild:i,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:c,ariaLabel:u("ariaLabelCellEditor","Cell Editor")});h&&(this.hideEditorPopup=h.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){let e=this.getGui();e.contains(this.beans.gos.getActiveDomElement())&&JD()&&e.focus({preventScroll:!0}),An(this.getParentOfValue())}},one=class extends Ve{constructor(e,t,n){super(),this.cellComps={},this.beans=t,this.rowCtrl=e;let i=document.createElement("div");i.setAttribute("comp-id",`${this.getCompId()}`),i.setAttribute("style",this.getInitialStyle(n)),this.setTemplateFromElement(i);let s=this.getGui(),r=s.style;this.domOrder=this.rowCtrl.getDomOrder(),oi(s,"row");let o=this.rowCtrl.getTabIndex();o!=null&&s.setAttribute("tabindex",o.toString());let a={setDomOrder:l=>this.domOrder=l,setCellCtrls:l=>this.setCellCtrls(l),showFullWidth:l=>this.showFullWidth(l),getFullWidthCellRenderer:()=>this.getFullWidthCellRenderer(),addOrRemoveCssClass:(l,c)=>this.addOrRemoveCssClass(l,c),setUserStyles:l=>DB(s,l),setTop:l=>r.top=l,setTransform:l=>r.transform=l,setRowIndex:l=>s.setAttribute("row-index",l),setRowId:l=>s.setAttribute("row-id",l),setRowBusinessKey:l=>s.setAttribute("row-business-key",l),refreshFullWidth:l=>this.refreshFullWidth(l)};e.setComp(a,this.getGui(),n),this.addDestroyFunc(()=>{e.unsetComp(n)})}getInitialStyle(e){let t=this.rowCtrl.getInitialTransform(e);return t?`transform: ${t}`:`top: ${this.rowCtrl.getInitialRowTop(e)}`}showFullWidth(e){let t=i=>{if(this.isAlive()){let s=i.getGui();this.getGui().appendChild(s),this.rowCtrl.setupDetailRowAutoHeight(s),this.setFullWidthRowComp(i)}else this.beans.context.destroyBean(i)},n=e.newAgStackInstance();n&&n.then(t)}setCellCtrls(e){let t=Object.assign({},this.cellComps);e.forEach(i=>{let s=i.getInstanceId();this.cellComps[s]==null?this.newCellComp(i):t[s]=null});let n=jo(t).filter(i=>i!=null);this.destroyCells(n),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;let t=[];e.forEach(n=>{let i=this.cellComps[n.getInstanceId()];i&&t.push(i.getGui())}),EB(this.getGui(),t)}newCellComp(e){let t=new rne(this.beans,e,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[e.getInstanceId()]=t,this.getGui().appendChild(t.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){let e=jo(this.cellComps).filter(t=>t!=null);this.destroyCells(e)}setFullWidthRowComp(e){this.fullWidthCellRenderer&&ke("should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=e,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}getFullWidthCellRenderer(){return this.fullWidthCellRenderer}destroyCells(e){e.forEach(t=>{if(!t)return;let n=t.getCtrl().getInstanceId();this.cellComps[n]===t&&(t.detach(),t.destroy(),this.cellComps[n]=null)})}refreshFullWidth(e){let{fullWidthCellRenderer:t}=this;if(!t||!t.refresh)return!1;let n=e();return t.refresh(n)}},ane=class extends k{wireBeans(e){this.ctrlsService=e.ctrlsService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.columnViewportService=e.columnViewportService}constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){let e=()=>this.onCenterViewportResized();this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();let e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnSizeService.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){let e=this.gridBodyCtrl.getBodyViewportElement(),t=vf(e);if(t<=50)return;let n=this.getPinnedColumnsOverflowingViewport(t-50),i=this.gos.getCallback("processUnpinnedColumns");n.length&&(i&&(n=i({columns:n,viewportWidth:t})),this.columnModel.setColsPinned(n,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(e){let t=this.pinnedWidthService.getPinnedRightWidth(),n=this.pinnedWidthService.getPinnedLeftWidth(),i=t+n;if(i<e)return[];let s=[...this.visibleColsService.getLeftCols()],r=[...this.visibleColsService.getRightCols()],o=0,a=0,l=0,c=[],u=i-l-e;for(;(a<s.length||o<r.length)&&u>0;){if(o<r.length){let h=r[o++];u-=h.getActualWidth(),c.push(h)}if(a<s.length&&u>0){let h=s[a++];u-=h.getActualWidth(),c.push(h)}}return c}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){let e=this.gridBodyCtrl.getBodyViewportElement(),t=gR(e);if(this.bodyHeight!==t){this.bodyHeight=t;let n={type:"bodyHeightChanged"};this.eventService.dispatchEvent(n)}}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){let e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){let e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnViewportService.setScrollPosition(e,t)}},lne=class extends k{wireBeans(e){this.dragService=e.dragService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListener("enableRangeSelection",t=>{if(t.currentValue){this.enableFeature();return}this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),this.gos.get("enableRangeSelection")&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}},cne=class extends Ve{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[wR]),this.eCheckbox=X}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){let e=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),n=hR(e,t),[i,s]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],r=e(i,s);this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel(`${r} (${n})`)}onClicked(e,t,n){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:n.shiftKey,groupSelectsFiltered:t,event:n,source:"checkboxSelected"})}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:i=>bu(i),click:i=>{bu(i);let s=this.gos.get("groupSelectsFiltered"),r=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(r,s)?this.onClicked(!0,s,i||{})===0&&this.onClicked(!1,s,i):r?this.onClicked(!1,s,i):this.onClicked(!0,s,i||{})}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.gos.get("isRowSelectable")||typeof this.getIsVisible()=="function"){let i=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:i}),this.addManagedListeners(this.rowNode,{dataChanged:i,cellChanged:i}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,t){return t&&(this.eCheckbox.getPreviousValue()===void 0||e===void 0)&&this.gos.isRowModelType("clientSide")}showOrHideSelect(){let e=this.rowNode.selectable,t=this.getIsVisible();if(e)if(typeof t=="function"){let i=this.overrides?.callbackParams;if(!this.column)e=t(se(B({},i),{node:this.rowNode,data:this.rowNode.data}));else{let s=this.column.createColumnFunctionCallbackParams(this.rowNode);e=t(B(B({},i),s))}}else e=t??!1;if(this.column?.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!e),this.setVisible(!0),this.setDisplayed(!0);return}if(this.overrides?.removeHidden){this.setDisplayed(e);return}this.setVisible(e)}getIsVisible(){return this.overrides?this.overrides.isVisible:this.column?.getColDef()?.checkboxSelection}},une=class extends Ve{constructor(e,t,n){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=n}postConstruct(){this.getGui().appendChild(Ii("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){let t=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);let n=()=>{try{let i=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",i),e.dataTransfer.setData("text/plain",i)}catch{}};if(t){let i=this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:e});t(i)}else n()}checkVisibility(){let e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}},dne=class extends k{constructor(e,t){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){let e=this.column.getColDef(),{cellClassRules:t}=e,n=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(t===this.cellClassRules?void 0:this.cellClassRules,t,n,i=>this.cellComp.addOrRemoveCssClass(i,!0),i=>this.cellComp.addOrRemoveCssClass(i,!1)),this.cellClassRules=t}applyUserStyles(){let e=this.column.getColDef();if(!e.cellStyle)return;let t;if(typeof e.cellStyle=="function"){let n=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),i=e.cellStyle;t=i(n)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){let e=this.column.getColDef(),t=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(n=>this.cellComp.addOrRemoveCssClass(n,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,t),this.staticClasses.length&&this.staticClasses.forEach(n=>this.cellComp.addOrRemoveCssClass(n,!0))}destroy(){super.destroy()}},hne=class extends k{constructor(e,t,n,i,s){super(),this.cellCtrl=e,this.beans=t,this.rowNode=i,this.rowCtrl=s}setComp(e){this.eGui=e}onKeyDown(e){let t=e.key;switch(t){case N.ENTER:this.onEnterKeyDown(e);break;case N.F2:this.onF2KeyDown(e);break;case N.ESCAPE:this.onEscapeKeyDown(e);break;case N.TAB:this.onTabKeyDown(e);break;case N.BACKSPACE:case N.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case N.DOWN:case N.UP:case N.RIGHT:case N.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;let t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){let{cellCtrl:n,beans:i,rowNode:s}=this,{gos:r,rangeService:o,eventService:a}=i;if(!n.isEditing()){if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),xee(e,r.get("enableCellEditingOnBackspace"))){if(o&&r.get("enableRangeSelection"))o.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(n.isCellEditable()){let l=n.getColumn(),c=this.beans.valueService.parseValue(l,s,"",s.getValueFromValueService(l))??null;s.setDataValue(l,c,"cellClear")}}else n.startRowOrCellEdit(e,t);a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){let t=e.shiftKey?N.UP:N.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(N.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(N.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;let i=e.key;i===" "?this.onSpaceKeyDown(e):(this.cellCtrl.startRowOrCellEdit(i,e),e.preventDefault())}onSpaceKeyDown(e){let{gos:t}=this.beans;if(!this.cellCtrl.isEditing()&&t.isRowSelection()){let n=this.rowNode.isSelected(),i=!n;if(i||!t.get("suppressRowDeselection")){let s=this.beans.gos.get("groupSelectsFiltered"),r=this.rowNode.setSelectedParams({newValue:i,rangeSelect:e.shiftKey,groupSelectsFiltered:s,event:e,source:"spaceKey"});n===void 0&&r===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:s,event:e,source:"spaceKey"})}}e.preventDefault()}destroy(){super.destroy()}},fne=class extends k{constructor(e,t,n){super(),this.cellCtrl=e,this.beans=t,this.column=n}onMouseEvent(e,t){if(!Uo(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(e),e.preventDefault();return}let{eventService:t,rangeService:n,gos:i}=this.beans,s=e.ctrlKey||e.metaKey;n&&s&&n.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&n.intersectLastRange(!0);let r=this.cellCtrl.createEvent(e,"cellClicked");t.dispatchEvent(r);let o=this.column.getColDef();o.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{o.onCellClicked(r)})},0),(i.get("singleClickEdit")||o.singleClickEdit)&&!i.get("suppressClickEdit")&&!(e.shiftKey&&n?.getCellRanges().length!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!$o()||XV("dblclick"))return!1;let e=new Date().getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t}onCellDoubleClicked(e){let{column:t,beans:n,cellCtrl:i}=this,{eventService:s,frameworkOverrides:r,gos:o}=n,a=t.getColDef(),l=i.createEvent(e,"cellDoubleClicked");s.dispatchEvent(l),typeof a.onCellDoubleClicked=="function"&&window.setTimeout(()=>{r.wrapOutgoing(()=>{a.onCellDoubleClicked(l)})},0),!o.get("singleClickEdit")&&!o.get("suppressClickEdit")&&i.startRowOrCellEdit(null,e)}onMouseDown(e){let{ctrlKey:t,metaKey:n,shiftKey:i}=e,s=e.target,{cellCtrl:r,beans:o}=this,{eventService:a,rangeService:l,focusService:c,gos:u}=o;if(this.isRightClickInExistingRange(e))return;let h=l&&l.getCellRanges().length!=0;if(!i||!h){let g=u.get("enableCellTextSelection")&&e.defaultPrevented,v=(Ur()||g)&&!r.isEditing()&&!pR(s);r.focusCell(v)}if(i&&h&&!c.isCellFocused(r.getCellPosition())){e.preventDefault();let f=c.getFocusedCell();if(f){let{column:g,rowIndex:v,rowPinned:y}=f,E=o.rowRenderer.getRowByPosition({rowIndex:v,rowPinned:y})?.getCellCtrl(g);E?.isEditing()&&E.stopEditing(),c.setFocusedCell({column:g,rowIndex:v,rowPinned:y,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(s)){if(l){let f=this.cellCtrl.getCellPosition();if(i)l.extendLatestRangeToCell(f);else{let g=t||n;l.setRangeToCell(f,g)}}a.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){let{rangeService:t}=this.beans;if(t){let n=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),i=e.button===2||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(n&&i)return!0}return!1}containsWidget(e){return _u(e,"ag-selection-checkbox",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;let t=this.cellCtrl.createEvent(e,"cellMouseOut");this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;let t=this.cellCtrl.createEvent(e,"cellMouseOver");this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;let t=this.cellCtrl.getGui(),n=t.contains(e.target),i=t.contains(e.relatedTarget);return n&&i}destroy(){super.destroy()}},pne=class extends k{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}setComp(e){this.eGui=e,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){let e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))}onDisplayColumnsChanged(){let e=this.getColSpanningList();gl(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eGui)return;let e=this.getCellWidth();this.eGui.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){let e=this.column.getColSpan(this.rowNode),t=[];if(e===1)t.push(this.column);else{let n=this.column,i=this.column.getPinned();for(let s=0;n&&s<e&&(t.push(n),n=this.beans.visibleColsService.getColAfter(n),!(!n||Ie(n)||i!==n.getPinned()));s++);}return t}onLeftChanged(){if(!this.eGui)return;let e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=xe(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return e;let t=this.beans.visibleColsService.getColsLeftWidth();if(this.column.getPinned()==="right"){let n=this.beans.visibleColsService.getBodyContainerWidth();return t+n+(e||0)}return t+(e||0)}applyRowSpan(e){if(this.rowSpan===1&&!e)return;let n=this.beans.gos.getRowHeightAsNumber()*this.rowSpan;this.eGui.style.height=`${n}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}};var tf="ag-cell-range-selected",gne="ag-cell-range-chart",mne="ag-cell-range-single-cell",vne="ag-cell-range-chart-category",Cne="ag-cell-range-handle",yne="ag-cell-range-top",wne="ag-cell-range-right",Sne="ag-cell-range-bottom",_ne="ag-cell-range-left",bne=class{constructor(e,t){this.beans=e,this.rangeService=e.rangeService,this.selectionHandleFactory=e.selectionHandleFactory,this.cellCtrl=t}setComp(e,t){this.cellComp=e,this.eGui=t,this.onRangeSelectionChanged()}onRangeSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(tf,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${tf}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${tf}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${tf}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${tf}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(gne,this.hasChartRange),vC(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(mne,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){let e=this.getRangeBorders(),t=this.isSingleCell(),n=!t&&e.top,i=!t&&e.right,s=!t&&e.bottom,r=!t&&e.left;this.cellComp.addOrRemoveCssClass(yne,n),this.cellComp.addOrRemoveCssClass(wne,i),this.cellComp.addOrRemoveCssClass(Sne,s),this.cellComp.addOrRemoveCssClass(_ne,r)}isSingleCell(){let{rangeService:e}=this.beans;return this.rangeCount===1&&!!e&&!e.isMoreThanOneCell()}getHasChartRange(){let{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;let t=e.getCellRanges();return t.length>0&&t.every(n=>ul([1,0],n.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){let e=this.beans.gos.get("enableRtl"),t=!1,n=!1,i=!1,s=!1,r=this.cellCtrl.getCellPosition().column,o=this.beans.visibleColsService,a,l;e?(a=o.getColAfter(r),l=o.getColBefore(r)):(a=o.getColBefore(r),l=o.getColAfter(r));let c=this.rangeService.getCellRanges().filter(u=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),u));a||(s=!0),l||(n=!0);for(let u=0;u<c.length&&!(t&&n&&i&&s);u++){let h=c[u],f=this.rangeService.getRangeStartRow(h),g=this.rangeService.getRangeEndRow(h);!t&&this.beans.rowPositionUtils.sameRow(f,this.cellCtrl.getCellPosition())&&(t=!0),!i&&this.beans.rowPositionUtils.sameRow(g,this.cellCtrl.getCellPosition())&&(i=!0),!s&&a&&h.columns.indexOf(a)<0&&(s=!0),!n&&l&&h.columns.indexOf(l)<0&&(n=!0)}return{top:t,right:n,bottom:i,left:s}}refreshHandle(){if(this.beans.context.isDestroyed())return;let e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(Cne,!!this.selectionHandle)}shouldHaveSelectionHandle(){let e=this.beans.gos,t=this.rangeService.getCellRanges(),n=t.length;if(this.rangeCount<1||n<1)return!1;let i=xe(t),s=this.cellCtrl.getCellPosition(),r=e.get("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),o=e.get("enableRangeHandle"),a=n===1&&!this.cellCtrl.isEditing()&&(r||o);if(this.hasChartRange){let c=t[0].type===1&&this.rangeService.isCellInSpecificRange(s,t[0]);this.cellComp.addOrRemoveCssClass(vne,c),a=i.type===0}return a&&i.endRow!=null&&this.rangeService.isContiguousRange(i)&&this.rangeService.isBottomRightCell(i,s)}addSelectionHandle(){let e=this.beans.gos,t=xe(this.rangeService.getCellRanges()).type,i=e.get("enableFillHandle")&&Ie(t)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==i&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(i)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},Ene="ag-cell",Dne="ag-cell-auto-height",Rne="ag-cell-normal-height",Tne="ag-cell-focus",Ine="ag-cell-first-right-pinned",Ane="ag-cell-last-left-pinned",Mne="ag-cell-not-inline-editing",Pne="ag-column-hover",Fne="ag-cell-wrap-text",xne=0,pG=class iR extends k{constructor(t,n,i,s){super(),this.column=t,this.rowNode=n,this.beans=i,this.rowCtrl=s,this.cellRangeFeature=null,this.cellPositionFeature=null,this.cellCustomStyleFeature=null,this.tooltipFeature=null,this.cellMouseListenerFeature=null,this.cellKeyboardListenerFeature=null,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.instanceId=t.getId()+"-"+xne++,this.colIdSanitised=tr(this.column.getId()),i.gos.get("suppressCellFocus")||(this.tabIndex=-1),this.createCellPosition(),this.addFeatures(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}addFeatures(){this.cellPositionFeature=new pne(this,this.beans),this.addDestroyFunc(()=>{this.cellPositionFeature?.destroy(),this.cellPositionFeature=null}),this.cellCustomStyleFeature=new dne(this,this.beans),this.addDestroyFunc(()=>{this.cellCustomStyleFeature?.destroy(),this.cellCustomStyleFeature=null}),this.cellMouseListenerFeature=new fne(this,this.beans,this.column),this.addDestroyFunc(()=>{this.cellMouseListenerFeature?.destroy(),this.cellMouseListenerFeature=null}),this.cellKeyboardListenerFeature=new hne(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(()=>{this.cellKeyboardListenerFeature?.destroy(),this.cellKeyboardListenerFeature=null}),this.column.isTooltipEnabled()&&(this.enableTooltipFeature(),this.addDestroyFunc(()=>{this.disableTooltipFeature()})),this.beans.rangeService&&this.beans.gos.get("enableRangeSelection")&&(this.cellRangeFeature=new bne(this.beans,this),this.addDestroyFunc(()=>{this.cellRangeFeature?.destroy(),this.cellRangeFeature=null}))}enableTooltipFeature(t,n){let i=()=>{let o=this.column.getColDef(),a=this.rowNode.data;if(o.tooltipField&&j(a))return af(a,o.tooltipField,this.column.isTooltipFieldContainsDots());let l=o.tooltipValueGetter;return l?l(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},s=this.beans.gos.get("tooltipShowMode")==="whenTruncated";!n&&s&&!this.isCellRenderer()&&(n=()=>{let o=this.getGui(),a=o.children.length===0?o:o.querySelector(".ag-cell-value");return a?a.scrollWidth>a.clientWidth:!0});let r={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:t!=null?()=>t:i,getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:n};this.tooltipFeature=new Iu(r,this.beans)}disableTooltipFeature(){this.tooltipFeature&&(this.tooltipFeature.destroy(),this.tooltipFeature=null)}setComp(t,n,i,s,r){this.cellComp=t,this.eGui=n,this.printLayout=s,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(i),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),this.cellPositionFeature?.setComp(n),this.cellCustomStyleFeature?.setComp(t),this.tooltipFeature?.refreshToolTip(),this.cellKeyboardListenerFeature?.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(t,n),r&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(o=>o()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(t){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!t)return;let n=t.parentElement,i=this.beans.gos.getRowHeightForNode(this.rowNode).height,s=a=>{if(this.editing||!this.isAlive())return;let{paddingTop:l,paddingBottom:c,borderBottomWidth:u,borderTopWidth:h}=ml(n),f=l+c+u+h,v=t.offsetHeight+f;if(a<5){let C=this.beans.gos.getDocument(),E=!C||!C.contains(t),I=v==0;if(E||I){window.setTimeout(()=>s(a+1),0);return}}let y=Math.max(v,i);this.rowNode.setRowAutoHeight(y,this.column)},r=()=>s(0);r();let o=this.beans.resizeObserverService.observeResize(t,r);this.addDestroyFunc(()=>{o(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}getInstanceId(){return this.instanceId}getColumnIdSanitised(){return this.colIdSanitised}getTabIndex(){return this.tabIndex}isCellRenderer(){let t=this.column.getColDef();return t.cellRenderer!=null||t.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}showValue(t=!1){let n=this.getValueToDisplay(),i;if(this.rowNode.stub){let s=this.createCellRendererParams();i=this.beans.userComponentFactory.getLoadingCellRendererDetails(this.column.getColDef(),s)}else if(this.isCellRenderer()){let s=this.createCellRendererParams();i=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),s)}this.cellComp.setRenderDetails(i,n,t),this.cellRangeFeature?.refreshHandle()}setupControlComps(){let t=this.column.getColDef();this.includeSelection=this.isIncludeControl(t.checkboxSelection),this.includeRowDrag=this.isIncludeControl(t.rowDrag),this.includeDndSource=this.isIncludeControl(t.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(t){return this.rowNode.rowPinned!=null?!1:typeof t=="function"||t===!0}refreshShouldDestroy(){let t=this.column.getColDef(),n=this.includeSelection!=this.isIncludeControl(t.checkboxSelection),i=this.includeRowDrag!=this.isIncludeControl(t.rowDrag),s=this.includeDndSource!=this.isIncludeControl(t.dndSource),r=this.isAutoHeight!=this.column.isAutoHeight();return n||i||s||r}startEditing(t=null,n=!1,i=null){let{editService:s}=this.beans;if(!(!this.isCellEditable()||this.editing||!s)){if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startEditing(t,n,i)});return}s.startEditing(this,t,n,i)}}setEditing(t,n){this.editCompDetails=n,this.editing!==t&&(this.editing=t,this.cellRangeFeature?.refreshHandle())}stopRowOrCellEdit(t=!1){this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.stopEditing(t):this.stopEditing(t)}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(t=!1){let{editService:n}=this.beans;return!this.editing||!n?!1:n.stopEditing(this,t)}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.rowNode.getValueFromValueService(this.column),setValue:n=>this.beans.valueService.setValue(this.rowNode,this.column,n),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(n,i,s,r)=>this.registerRowDragger(n,i,r),setTooltip:(n,i)=>{this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(n,i),this.tooltipFeature?.refreshToolTip()}})}setFocusOutOnEditor(){this.editing&&this.beans.editService?.setFocusOutOnEditor(this)}setFocusInOnEditor(){this.editing&&this.beans.editService?.setFocusInOnEditor(this)}onCellChanged(t){t.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(t){this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(t)}refreshCell(t){if(this.suppressRefreshCell||this.editing)return;let n=this.column.getColDef(),i=t!=null&&!!t.newData,s=t!=null&&!!t.suppressFlash||!!n.suppressCellFlash,r=n.field==null&&n.valueGetter==null&&n.showRowGroup==null,o=t&&t.forceRefresh||r||i,a=!!this.cellComp,l=this.updateAndFormatValue(a),c=o||l;if(a){if(c){this.showValue(i);let u=this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering();!s&&!u&&(this.beans.gos.get("enableCellChangeFlash")||n.enableCellChangeFlash)&&this.flashCell(),this.cellCustomStyleFeature?.applyUserStyles(),this.cellCustomStyleFeature?.applyClassesFromColDef()}this.tooltipFeature?.refreshToolTip(),this.cellCustomStyleFeature?.applyCellClassRules()}}stopEditingAndFocus(t=!1,n=!1){this.beans.editService?.stopEditingAndFocus(this,t,n)}flashCell(t){let n=t?.flashDuration??t?.flashDelay,i=t?.fadeDuration??t?.fadeDelay;this.animateCell("data-changed",n,i)}animateCell(t,n,i){if(!this.cellComp)return;let s=`ag-cell-${t}`,r=`ag-cell-${t}-animation`,{gos:o}=this.beans;n||(n=o.get("cellFlashDuration")),j(i)||(i=o.get("cellFadeDuration")),this.cellComp.addOrRemoveCssClass(s,!0),this.cellComp.addOrRemoveCssClass(r,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(s,!1),this.cellComp.addOrRemoveCssClass(r,!0),this.eGui.style.transition=`background-color ${i}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(r,!1),this.eGui.style.transition="")},i))},n)})}onFlashCells(t){if(!this.cellComp)return;let n=this.beans.cellPositionUtils.createId(this.getCellPosition());t.cells[n]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(t){return this.callValueFormatter(t)??t}callValueFormatter(t){return this.beans.valueService.formatValue(this.column,this.rowNode,t)}updateAndFormatValue(t){let n=this.value,i=this.valueFormatted;return this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value),t?!this.valuesAreEqual(n,this.value)||this.valueFormatted!=i:!0}valuesAreEqual(t,n){let i=this.column.getColDef();return i.equals?i.equals(t,n):t===n}getComp(){return this.cellComp}getValue(){return this.value}addDomData(){let t=this.getGui();this.beans.gos.setDomData(t,iR.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(()=>this.beans.gos.setDomData(t,iR.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(t,n){return this.beans.gos.addGridCommonParams({type:n,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:t,rowIndex:this.rowNode.rowIndex})}processCharacter(t){this.cellKeyboardListenerFeature?.processCharacter(t)}onKeyDown(t){this.cellKeyboardListenerFeature?.onKeyDown(t)}onMouseEvent(t,n){this.cellMouseListenerFeature?.onMouseEvent(t,n)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){this.cellComp&&this.cellPositionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){let{cellComp:t,column:n,beans:i}=this;nG(t,n,i.visibleColsService)}refreshAriaColIndex(){let t=this.beans.visibleColsService.getAriaColIndex(this.column);fB(this.getGui(),t)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){return this.cellPositionFeature?.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(t,n=null){if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(t,n)});return}this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(t,this):this.startEditing(t,!0,n)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onRangeSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(t=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:t})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}onFirstRightPinnedChanged(){if(!this.cellComp)return;let t=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(Ine,t)}onLastLeftPinnedChanged(){if(!this.cellComp)return;let t=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(Ane,t)}onCellFocused(t){if(this.beans.gos.get("suppressCellFocus"))return;let n=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){n&&t?.forceBrowserFocus&&(this.focusEventToRestore=t);return}if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(Tne,n),n&&t&&t.forceBrowserFocus){let s=this.cellComp.getFocusableElement();if(this.editing){let r=this.beans.focusService.findFocusableElements(s,null,!0);r.length&&(s=r[0])}s.focus({preventScroll:!!t.preventScrollOnBrowserFocus})}let i=this.beans.gos.get("editType")==="fullRow";!n&&!i&&this.editing&&this.stopRowOrCellEdit(),n&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:dl(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(Ene,!0),this.cellComp.addOrRemoveCssClass(Mne,!0);let t=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(Dne,t),this.cellComp.addOrRemoveCssClass(Rne,!t)}onColumnHover(){if(!this.cellComp||!this.beans.gos.get("columnHoverHighlight"))return;let t=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(Pne,t)}onColDefChanged(){if(!this.cellComp)return;this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?this.beans.editService?.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0})}setWrapText(){let t=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(Fne,t)}dispatchCellContextMenuEvent(t){let n=this.column.getColDef(),i=this.createEvent(t,"cellContextMenu");this.beans.eventService.dispatchEvent(i),n.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{n.onCellContextMenu(i)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){let t=new cne;return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t}createDndSource(){let t=new une(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(t),t}registerRowDragger(t,n,i){if(this.customRowDragComp){this.customRowDragComp.setDragElement(t,n);return}let s=this.createRowDragComp(t,n,i);s&&(this.customRowDragComp=s,this.addDestroyFunc(()=>{this.beans.context.destroyBean(s),this.customRowDragComp=null}))}createRowDragComp(t,n,i){let s=this.beans.gos.get("pagination"),r=this.beans.gos.get("rowDragManaged"),o=this.beans.gos.isRowModelType("clientSide");if(r){if(!o){G("managed row dragging is only allowed in the Client Side Row Model");return}if(s){G("managed row dragging is not possible when doing pagination");return}}let a=new eR(()=>this.value,this.rowNode,this.column,t,n,i);return this.beans.context.createBean(a),a}setSuppressRefreshCell(t){this.suppressRefreshCell=t}getEditCompDetails(){return this.editCompDetails}};pG.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var fl=pG,One=0,gG=class sR extends k{constructor(t,n,i,s,r){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=n,this.gos=n.gos,this.rowNode=t,this.paginationPage=n.paginationService?.getCurrentPage()??0,this.useAnimationFrameForCreate=s,this.printLayout=r,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=t.id+"-"+One++,this.rowId=tr(t.id),this.initRowBusinessKey(),this.rowFocused=n.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=n.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(i),this.rowStyles=this.processStylesFromGridOptions(),this.isFullWidth()&&!this.gos.get("suppressCellFocus")&&(this.tabIndex=-1),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;let t=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=tr(t)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}getTabIndex(){return this.tabIndex}isSticky(){return this.rowNode.sticky}getInstanceId(){return this.instanceId}updateGui(t,n){t==="left"?this.leftGui=n:t==="right"?this.rightGui=n:t==="fullWidth"?this.fullWidthGui=n:this.centerGui=n}setComp(t,n,i){let s={rowComp:t,element:n,containerType:i};this.allRowGuis.push(s),this.updateGui(i,s),this.initialiseRowComp(s),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(t){this.allRowGuis=this.allRowGuis.filter(n=>n.containerType!==t),this.updateGui(t,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(t){let n=t?"none":"";this.allRowGuis.forEach(i=>i.element.style.display=n)}initialiseRowComp(t){let n=this.gos;this.listenOnDomOrder(t),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),n.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);let i=t.rowComp;this.getInitialRowClasses(t.containerType).forEach(r=>i.addOrRemoveCssClass(r,!0)),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&mC(t.element,this.rowNode.expanded==!0),this.setRowCompRowId(i),this.setRowCompRowBusinessKey(i),n.setDomData(t.element,sR.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc(()=>n.setDomData(t.element,sR.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,t.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(t.element),this.isFullWidth()&&this.setupFullWidth(t),n.get("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&t.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(t){this.businessKeySanitised!=null&&t.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(t){this.rowId=tr(this.rowNode.id),this.rowId!=null&&t.setRowId(this.rowId)}executeSlideAndFadeAnimations(t){let{containerType:n}=t;this.slideInAnimation[n]&&(DV(()=>{this.onTopChanged()}),this.slideInAnimation[n]=!1),this.fadeInAnimation[n]&&(DV(()=>{t.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[n]=!1)}addRowDraggerToRow(t){if(this.gos.get("enableRangeSelection")){G("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`");return}let n=this.beans.localeService.getLocaleTextFunc(),i=new eR(()=>`1 ${n("rowDragRow","row")}`,this.rowNode,void 0,t.element,void 0,!0),s=this.createBean(i,this.beans.context);this.rowDragComps.push(s)}setupFullWidth(t){let n=this.getPinnedForContainer(t.containerType);if(this.rowType=="FullWidthDetail"&&!Kn.__assertRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId()))return;let i=this.createFullWidthCompDetails(t.element,n);t.rowComp.showFullWidth(i)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(t=>t?.rowComp?.getFullWidthCellRenderer()):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}getCellElement(t){let n=this.getCellCtrl(t);return n?n.getGui():null}executeProcessRowPostCreateFunc(){let t=this.gos.getCallback("processRowPostCreate");if(!t||!this.areAllContainersReady())return;let n={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};t(n)}areAllContainersReady(){let t=!!this.leftGui||!this.beans.visibleColsService.isPinningLeft(),n=!!this.centerGui,i=!!this.rightGui||!this.beans.visibleColsService.isPinningRight();return t&&n&&i}setRowType(){let t=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow"),n=this.rowNode.isFullWidthCell(),i=this.gos.get("masterDetail")&&this.rowNode.detail,s=this.beans.columnModel.isPivotMode(),o=!!this.rowNode.group&&!this.rowNode.footer&&this.gos.isGroupUseEntireRow(s);t?this.rowType="FullWidthLoading":i?this.rowType="FullWidthDetail":n?this.rowType="FullWidth":o?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(t=!1,n=!1){if(this.isFullWidth())return;if(t||this.gos.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(n);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(t,n,i=null){let s={list:[],map:{}},r=(o,a)=>{s.list.push(a),s.map[o]=a};return n.forEach(o=>{let a=o.getInstanceId(),l=t.map[a];l||(l=new fl(o,this.rowNode,this.beans,this)),r(a,l)}),t.list.forEach(o=>{if(s.map[o.getColumn().getInstanceId()]!=null)return;if(!this.isCellEligibleToBeRemoved(o,i)){r(o.getColumn().getInstanceId(),o);return}o.destroy()}),s}updateColumnListsImpl(t){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(t)}setCellCtrls(t){this.allRowGuis.forEach(n=>{let i=this.getCellCtrlsForContainer(n.containerType);n.rowComp.setCellCtrls(i,t)})}getCellCtrlsForContainer(t){switch(t){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){let t=this.beans.columnViewportService,n=this.beans.visibleColsService;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,n.getAllCols()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{let i=t.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);let s=n.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,s,"left");let r=n.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,r,"right")}}isCellEligibleToBeRemoved(t,n){if(t.getColumn().getPinned()!=n)return!0;let o=t.isEditing(),a=this.beans.focusService.isCellFocused(t.getCellPosition());if(o||a){let c=t.getColumn();return!(this.beans.visibleColsService.getAllCols().indexOf(c)>=0)}return!0}getDomOrder(){return this.gos.get("ensureDomOrder")||this.gos.isDomLayout("print")}listenOnDomOrder(t){let n=()=>{t.rowComp.setDomOrder(this.getDomOrder())};this.addManagedPropertyListener("domLayout",n),this.addManagedPropertyListener("ensureDomOrder",n)}setAnimateFlags(t){if(this.isSticky()||!t)return;let n=j(this.rowNode.oldRowTop),i=this.beans.visibleColsService.isPinningLeft(),s=this.beans.visibleColsService.isPinningRight();if(n){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=i,this.slideInAnimation.right=s}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=i,this.fadeInAnimation.right=s}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){let t=(a,l)=>a?a.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(a.element,l).params):!0,n=t(this.fullWidthGui,null),i=t(this.centerGui,null),s=t(this.leftGui,"left"),r=t(this.rightGui,"right");return n&&i&&s&&r}addListeners(){this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),expandedChanged:this.updateExpandedCss.bind(this),hasChildrenChanged:this.updateExpandedCss.bind(this)}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventService,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.addDestroyFunc(()=>{this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowDragEntireRow"],()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(n=>{this.addRowDraggerToRow(n)});return}this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach(t=>t.onRowIndexChanged())},cellChanged:t=>{this.getAllCellCtrls().forEach(n=>n.onCellChanged(t))}})}onRowNodeDataChanged(t){if(this.isFullWidth()!==!!this.rowNode.isFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(i=>i.refreshCell({suppressFlash:!t.update,newData:!t.update})),this.allRowGuis.forEach(i=>{this.setRowCompRowId(i.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(i.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){let t=this.rowNode.highlighted;this.allRowGuis.forEach(n=>{let i=t===0,s=t===1;n.rowComp.addOrRemoveCssClass("ag-row-highlight-above",i),n.rowComp.addOrRemoveCssClass("ag-row-highlight-below",s)})}postProcessRowDragging(){let t=this.rowNode.dragging;this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-row-dragging",t))}updateExpandedCss(){let t=this.rowNode.isExpandable(),n=this.rowNode.expanded==!0;this.allRowGuis.forEach(i=>{i.rowComp.addOrRemoveCssClass("ag-row-group",t),i.rowComp.addOrRemoveCssClass("ag-row-group-expanded",t&&n),i.rowComp.addOrRemoveCssClass("ag-row-group-contracted",t&&!n),mC(i.element,t&&n)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:dl(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(t){let n=this.allRowGuis.find(l=>l.element.contains(t.target));if(!((n?n.element:null)===t.target))return;let r=this.rowNode,o=this.beans.focusService.getFocusedCell(),a={rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:o&&o.column};this.beans.navigationService.navigateToNextCell(t,t.key,a,!0),t.preventDefault()}onTabKeyDown(t){if(t.defaultPrevented||Uo(t))return;let n=this.allRowGuis.find(o=>o.element.contains(t.target)),i=n?n.element:null,s=i===t.target,r=null;s||(r=this.beans.focusService.findNextFocusableElement(i,!1,t.shiftKey)),(this.isFullWidth()&&s||!r)&&this.beans.navigationService.onTabKeyDown(this,t)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){let t=this.allRowGuis.find(n=>ys(n.element))?.element;return t?t.getBoundingClientRect().top:0}onFullWidthRowFocused(t){let n=this.rowNode,i=t?this.isFullWidth()&&t.rowIndex===n.rowIndex&&t.rowPinned==n.rowPinned:!1,s=this.fullWidthGui?this.fullWidthGui.element:this.centerGui?.element;s&&(s.classList.toggle("ag-full-width-focus",i),i&&t?.forceBrowserFocus&&s.focus({preventScroll:!0}))}recreateCell(t){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,t),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,t),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,t),t.destroy(),this.updateColumnLists()}removeCellCtrl(t,n){let i={list:[],map:{}};return t.list.forEach(s=>{s!==n&&(i.list.push(s),i.map[s.getColumn().getInstanceId()]=s)}),i}onMouseEvent(t,n){switch(t){case"dblclick":this.onRowDblClick(n);break;case"click":this.onRowClick(n);break;case"touchstart":case"mousedown":this.onRowMouseDown(n);break}}createRowEvent(t,n){return this.gos.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:n})}createRowEventWithSource(t,n){let i=this.createRowEvent(t,n);return i.source=this,i}onRowDblClick(t){if(Uo(t))return;let n=this.createRowEventWithSource("rowDoubleClicked",t);this.beans.eventService.dispatchEvent(n)}onRowMouseDown(t){if(this.lastMouseDownOnDragger=_u(t.target,"ag-row-drag",3),!this.isFullWidth())return;let n=this.rowNode,i=this.beans.visibleColsService;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges();let s=this.getFullWidthElement(),r=t.target,o=!0;s&&s.contains(r)&&pR(r)&&(o=!1),this.beans.focusService.setFocusedCell({rowIndex:n.rowIndex,column:i.getAllCols()[0],rowPinned:n.rowPinned,forceBrowserFocus:o})}onRowClick(t){if(Uo(t)||this.lastMouseDownOnDragger)return;let i=this.createRowEventWithSource("rowClicked",t);this.beans.eventService.dispatchEvent(i);let s=t.ctrlKey||t.metaKey,r=t.shiftKey;if(this.gos.get("groupSelectsChildren")&&this.rowNode.group||this.isRowSelectionBlocked()||this.gos.get("suppressRowClickSelection"))return;let a=this.gos.get("rowMultiSelectWithClick"),l=!this.gos.get("suppressRowDeselection"),c="rowClicked";if(this.rowNode.isSelected())a?this.rowNode.setSelectedParams({newValue:!1,event:t,source:c}):s?l&&this.rowNode.setSelectedParams({newValue:!1,event:t,source:c}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!r,rangeSelect:r,event:t,source:c});else{let u=a?!1:!s;this.rowNode.setSelectedParams({newValue:!0,clearSelection:u,rangeSelect:r,event:t,source:c})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!this.gos.isRowSelection()}setupDetailRowAutoHeight(t){if(this.rowType!=="FullWidthDetail"||!this.gos.get("detailRowAutoHeight"))return;let n=()=>{let s=t.clientHeight;if(s!=null&&s>0){let r=()=>{this.rowNode.setRowHeight(s),this.beans.rowModel.getType()==="clientSide"?this.beans.rowModel.onRowHeightChanged():this.beans.rowModel.getType()==="serverSide"&&this.beans.rowModel.onRowHeightChanged()};window.setTimeout(r,0)}},i=this.beans.resizeObserverService.observeResize(t,n);this.addDestroyFunc(i),n()}createFullWidthCompDetails(t,n){let{gos:i,rowNode:s}=this,r=i.addGridCommonParams({fullWidth:!0,data:s.data,node:s,value:s.key,valueFormatted:s.key,eGridCell:t,eParentOfValue:t,pinned:n,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(a,l,c,u)=>this.addFullWidthRowDragging(a,l,c,u),setTooltip:(a,l)=>this.refreshRowTooltip(a,l)}),o=this.beans.userComponentFactory;switch(this.rowType){case"FullWidthDetail":return o.getFullWidthDetailCellRendererDetails(r);case"FullWidthGroup":return o.getFullWidthGroupCellRendererDetails(r);case"FullWidthLoading":return o.getFullWidthLoadingCellRendererDetails(r);default:return o.getFullWidthCellRendererDetails(r)}}refreshRowTooltip(t,n){if(!this.fullWidthGui)return;let i={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>t,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:n};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new Iu(i,this.beans))}addFullWidthRowDragging(t,n,i="",s){if(!this.isFullWidth())return;let r=new eR(()=>i,this.rowNode,void 0,t,n,s);this.createBean(r,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(r,this.beans.context)})}onUiLevelChanged(){let t=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=t){let n="ag-row-level-"+t,i="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(s=>{s.rowComp.addOrRemoveCssClass(n,!0),s.rowComp.addOrRemoveCssClass(i,!1)})}this.rowLevel=t}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getLastRow()}refreshFirstAndLastRowStyles(){let t=this.isFirstRowOnPage(),n=this.isLastRowOnPage();this.firstRowOnPage!==t&&(this.firstRowOnPage=t,this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-first",t))),this.lastRowOnPage!==n&&(this.lastRowOnPage=n,this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-last",n)))}stopEditing(t=!1){this.stoppingRowEdit||this.beans.rowEditService?.stopEditing(this,t)}setInlineEditingCss(t){this.allRowGuis.forEach(n=>{n.rowComp.addOrRemoveCssClass("ag-row-inline-editing",t),n.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!t)})}setEditingRow(t){this.editingRow=t}startRowEditing(t=null,n=null,i=null){this.editingRow||this.beans.rowEditService?.startEditing(this,t,n,i)}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){let t=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!t||!t.length||t.forEach(n=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(n,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,t=>{this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass(t,!0))},t=>{this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass(t,!1))})}setStylesFromGridOptions(t,n){t&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(n,i=>i.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(t){return t==="left"||t==="right"?t:null}getInitialRowClasses(t){let n=this.getPinnedForContainer(t),i={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[t],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:n};return this.beans.rowCssClassCalculator.getInitialRowClasses(i)}processStylesFromGridOptions(){let t=this.gos.get("rowStyle");if(t&&typeof t=="function"){G("rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}let n=this.gos.getCallback("getRowStyle"),i;if(n){let s={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};i=n(s)}return i||t?Object.assign({},t,i):this.emptyStyle}onRowSelected(t){let n=!!this.rowNode.isSelected();this.forEachGui(t,i=>{i.rowComp.addOrRemoveCssClass("ag-row-selected",n),vC(i.element,n),i.element.contains(this.gos.getActiveDomElement())&&(i===this.centerGui||i===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;let t=this.rowNode.isSelected();if(t&&this.gos.get("suppressRowDeselection"))return;let i=this.beans.localeService.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(i)}addHoverFunctionality(t){if(!this.active)return;let{rowNode:n,beans:i,gos:s}=this;this.addManagedListeners(t,{mouseenter:()=>n.onMouseEnter(),mouseleave:()=>n.onMouseLeave()}),this.addManagedListeners(n,{mouseEnter:()=>{!i.dragService.isDragging()&&!s.get("suppressRowHoverHighlight")&&(t.classList.add("ag-row-hover"),n.setHovered(!0))},mouseLeave:()=>{t.classList.remove("ag-row-hover"),n.setHovered(!1)}})}roundRowTopToBounds(t){let n=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),i=this.applyPaginationOffset(n.top,!0)-100,s=this.applyPaginationOffset(n.bottom,!0)+100;return Math.min(Math.max(i,t),s)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(t,n){t?n(t):this.allRowGuis.forEach(n)}onRowHeightChanged(t){if(this.rowNode.rowHeight==null)return;let n=this.rowNode.rowHeight,i=this.beans.environment.getDefaultRowHeight(),r=this.gos.isGetRowHeightFunction()?this.gos.getRowHeightForNode(this.rowNode).height:void 0,o=r?`${Math.min(i,r)-2}px`:void 0;this.forEachGui(t,a=>{a.element.style.height=`${n}px`,o&&a.element.style.setProperty("--ag-line-height",o)})}addEventListener(t,n){super.addEventListener(t,n)}removeEventListener(t,n){super.removeEventListener(t,n)}destroyFirstPass(t=!1){if(this.active=!1,!t&&this.gos.isAnimateRows()&&!this.isSticky())if(this.rowNode.rowTop!=null){let s=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(s)}else this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);let n=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(n),this.beans.eventService.dispatchEvent(n),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();let t=n=>(n.list.forEach(i=>i.destroy()),{list:[],map:{}});this.centerCellCtrls=t(this.centerCellCtrls),this.leftCellCtrls=t(this.leftCellCtrls),this.rightCellCtrls=t(this.rightCellCtrls)}setFocusedClasses(t){this.forEachGui(t,n=>{n.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),n.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){let t=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses()),!t&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){let t=this.beans.paginationService?.getCurrentPage()??0;this.paginationPage!==t&&(this.paginationPage=t,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(t,n=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return t;let i=this.beans.pageBoundsService.getPixelOffset();return t+i*(n?1:-1)}setRowTop(t){if(!this.printLayout&&j(t)){let n=this.applyPaginationOffset(t),r=`${this.rowNode.isRowPinned()||this.rowNode.sticky?n:this.beans.rowContainerHeightService.getRealPixelPosition(n)}px`;this.setRowTopStyle(r)}}getInitialRowTop(t){return this.suppressRowTransform?this.getInitialRowTopShared(t):void 0}getInitialTransform(t){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(t)})`}getInitialRowTopShared(t){if(this.printLayout)return"";let n=this.rowNode,i;if(this.isSticky())i=n.stickyRowTop;else{let s=this.slideInAnimation[t]?this.roundRowTopToBounds(n.oldRowTop):n.rowTop,r=this.applyPaginationOffset(s);i=n.isRowPinned()?r:this.beans.rowContainerHeightService.getRealPixelPosition(r)}return i+"px"}setRowTopStyle(t){this.allRowGuis.forEach(n=>this.suppressRowTransform?n.rowComp.setTop(t):n.rowComp.setTransform(`translateY(${t})`))}getRowNode(){return this.rowNode}getCellCtrl(t){let n=null;return this.getAllCellCtrls().forEach(i=>{i.getColumn()==t&&(n=i)}),n!=null||this.getAllCellCtrls().forEach(i=>{i.getColSpanningList().indexOf(t)>=0&&(n=i)}),n}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(t){let n=this.rowNode.getRowIndexString();if(n===null)return;let i=this.beans.headerNavigationService.getHeaderRowCount()+(this.beans.filterManager?.getHeaderRowCount()??0),s=this.rowNode.rowIndex%2===0,r=i+this.rowNode.rowIndex+1;this.forEachGui(t,o=>{o.rowComp.setRowIndex(n),o.rowComp.addOrRemoveCssClass("ag-row-even",s),o.rowComp.addOrRemoveCssClass("ag-row-odd",!s),hB(o.element,r)})}setStoppingRowEdit(t){this.stoppingRowEdit=t}};gG.DOM_DATA_KEY_ROW_CTRL="renderedRow";var pl=gG,Nne=class extends k{wireBeans(e){this.mouseEventService=e.mouseEventService,this.valueService=e.valueService,this.menuService=e.menuService,this.ctrlsService=e.ctrlsService,this.navigationService=e.navigationService,this.focusService=e.focusService,this.undoRedoService=e.undoRedoService,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.rangeService=e.rangeService,this.clipboardService=e.clipboardService}constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){let e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",XV("touchstart")?"touchstart":"mousedown"].forEach(n=>{let i=this.processMouseEvent.bind(this,n);this.addManagedElementListeners(this.element,{[n]:i})})}processMouseEvent(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)||Uo(t))return;let n=this.getRowForEvent(t),i=this.mouseEventService.getRenderedCellForEvent(t);e==="contextmenu"?this.handleContextMenuMouseEvent(t,void 0,n,i):(i&&i.onMouseEvent(e,t),n&&n.onMouseEvent(e,t))}mockContextMenuForIPad(){if(!$o())return;let e=new Wo(this.element),t=n=>{let i=this.getRowForEvent(n.touchEvent),s=this.mouseEventService.getRenderedCellForEvent(n.touchEvent);this.handleContextMenuMouseEvent(void 0,n.touchEvent,i,s)};this.addManagedListeners(e,{longTap:t}),this.addDestroyFunc(()=>e.destroy())}getRowForEvent(e){let t=e.target;for(;t;){let n=this.gos.getDomData(t,pl.DOM_DATA_KEY_ROW_CTRL);if(n)return n;t=t.parentElement}return null}handleContextMenuMouseEvent(e,t,n,i){let s=n?n.getRowNode():null,r=i?i.getColumn():null,o=null;if(r){let c=e||t;i.dispatchCellContextMenuEvent(c??null),o=this.valueService.getValue(r,s)}let a=this.ctrlsService.getGridBodyCtrl(),l=i?i.getGui():a.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:s,column:r,value:o,anchorToElement:l})}getControlsForEventTarget(e){return{cellCtrl:WD(this.gos,e,fl.DOM_DATA_KEY_CELL_CTRL),rowCtrl:WD(this.gos,e,pl.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){let{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(n?this.processCellKeyboardEvent(n,e,t):i&&i.isFullWidth()&&this.processFullWidthRowKeyboardEvent(i,e,t))}processCellKeyboardEvent(e,t,n){let i=e.getRowNode(),s=e.getColumn(),r=e.isEditing();if(!tR(this.gos,n,i,s,r)&&t==="keydown"&&(!r&&this.navigationService.handlePageScrollingKey(n)||e.onKeyDown(n),this.doGridOperations(n,e.isEditing()),zB(n)&&e.processCharacter(n)),t==="keydown"){let a=e.createEvent(n,"cellKeyDown");this.eventService.dispatchEvent(a)}}processFullWidthRowKeyboardEvent(e,t,n){let i=e.getRowNode(),s=this.focusService.getFocusedCell(),r=s&&s.column;if(!tR(this.gos,n,i,r,!1)){let a=n.key;if(t==="keydown")switch(a){case N.PAGE_HOME:case N.PAGE_END:case N.PAGE_UP:case N.PAGE_DOWN:this.navigationService.handlePageScrollingKey(n,!0);break;case N.UP:case N.DOWN:e.onKeyboardNavigate(n);break;case N.TAB:e.onTabKeyDown(n);break;default:}}if(t==="keydown"){let a=e.createRowEvent("cellKeyDown",n);this.eventService.dispatchEvent(a)}}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!this.mouseEventService.isEventFromThisGrid(e))return;let n=Fee(e);if(n===N.A)return this.onCtrlAndA(e);if(n===N.C)return this.onCtrlAndC(e);if(n===N.D)return this.onCtrlAndD(e);if(n===N.V)return this.onCtrlAndV(e);if(n===N.X)return this.onCtrlAndX(e);if(n===N.Y)return this.onCtrlAndY();if(n===N.Z)return this.onCtrlAndZ(e)}onCtrlAndA(e){let{pinnedRowModel:t,rowModel:n,rangeService:i}=this;if(i&&n.isRowsToRender()){let[s,r]=[t.isEmpty("top"),t.isEmpty("bottom")],o=s?null:"top",a,l;r?(a=null,l=n.getRowCount()-1):(a="bottom",l=t.getPinnedBottomRowNodes().length-1);let c=this.visibleColsService.getAllCols();if(dn(c))return;i.setCellRange({rowStartIndex:0,rowStartPinned:o,rowEndIndex:l,rowEndPinned:a,columnStart:c[0],columnEnd:xe(c)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;let{cellCtrl:t,rowCtrl:n}=this.getControlsForEventTarget(e.target);t?.isEditing()||n?.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;let{cellCtrl:t,rowCtrl:n}=this.getControlsForEventTarget(e.target);t?.isEditing()||n?.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){let{cellCtrl:t,rowCtrl:n}=this.getControlsForEventTarget(e.target);t?.isEditing()||n?.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){!this.gos.get("undoRedoCellEditing")||!this.undoRedoService||(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService?.redo("ui")}},kne=class extends k{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({leftPinnedWidthChanged:this.onPinnedLeftWidthChanged.bind(this)})}onPinnedLeftWidthChanged(){let e=this.pinnedWidthService.getPinnedLeftWidth(),t=e>0;ft(this.element,t),Cs(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}},Lne=class extends k{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({rightPinnedWidthChanged:this.onPinnedRightWidthChanged.bind(this)})}onPinnedRightWidthChanged(){let e=this.pinnedWidthService.getPinnedRightWidth(),t=e>0;ft(this.element,t),Cs(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}},nC=e=>e.getTopRowCtrls(),iC=e=>e.getStickyTopRowCtrls(),sC=e=>e.getStickyBottomRowCtrls(),rC=e=>e.getBottomRowCtrls(),oC=e=>e.getCentreRowCtrls(),Vne={center:{type:"center",container:"ag-center-cols-container",viewport:"ag-center-cols-viewport",getRowCtrls:oC},left:{type:"left",container:"ag-pinned-left-cols-container",pinnedType:"left",getRowCtrls:oC},right:{type:"right",container:"ag-pinned-right-cols-container",pinnedType:"right",getRowCtrls:oC},fullWidth:{type:"fullWidth",container:"ag-full-width-container",fullWidth:!0,getRowCtrls:oC},topCenter:{type:"center",container:"ag-floating-top-container",viewport:"ag-floating-top-viewport",getRowCtrls:nC},topLeft:{type:"left",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:nC},topRight:{type:"right",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:nC},topFullWidth:{type:"fullWidth",container:"ag-floating-top-full-width-container",fullWidth:!0,getRowCtrls:nC},stickyTopCenter:{type:"center",container:"ag-sticky-top-container",viewport:"ag-sticky-top-viewport",getRowCtrls:iC},stickyTopLeft:{type:"left",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:iC},stickyTopRight:{type:"right",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:iC},stickyTopFullWidth:{type:"fullWidth",container:"ag-sticky-top-full-width-container",fullWidth:!0,getRowCtrls:iC},stickyBottomCenter:{type:"center",container:"ag-sticky-bottom-container",viewport:"ag-sticky-bottom-viewport",getRowCtrls:sC},stickyBottomLeft:{type:"left",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:sC},stickyBottomRight:{type:"right",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:sC},stickyBottomFullWidth:{type:"fullWidth",container:"ag-sticky-bottom-full-width-container",fullWidth:!0,getRowCtrls:sC},bottomCenter:{type:"center",container:"ag-floating-bottom-container",viewport:"ag-floating-bottom-viewport",getRowCtrls:rC},bottomLeft:{type:"left",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:rC},bottomRight:{type:"right",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:rC},bottomFullWidth:{type:"fullWidth",container:"ag-floating-bottom-full-width-container",fullWidth:!0,getRowCtrls:rC}};function mG(e){return Vne[e]}var Bne=["topCenter","topLeft","topRight"],Gne=["bottomCenter","bottomLeft","bottomRight"],Hne=["center","left","right"],Une=["center","left","right","fullWidth"],Wne=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],jne=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],zne=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],vG=["stickyTopCenter","stickyTopLeft","stickyTopRight"],CG=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],$ne=[...vG,"stickyTopFullWidth",...CG,"stickyBottomFullWidth"],qne=[...Bne,...Gne,...Hne,...vG,...CG],Kne=class extends k{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.options=mG(e)}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService,this.columnViewportService=e.columnViewportService,this.resizeObserverService=e.resizeObserverService,this.rowRenderer=e.rowRenderer}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new ane(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.ctrlsService.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,t,n){this.comp=e,this.eContainer=t,this.eViewport=n,this.createManagedBean(new Nne(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows(),this.forContainers(jne,()=>{this.pinnedWidthFeature=this.createManagedBean(new kne(this.eContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:()=>this.onPinnedWidthChanged()})}),this.forContainers(zne,()=>{this.pinnedWidthFeature=this.createManagedBean(new Lne(this.eContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:()=>this.onPinnedWidthChanged()})}),this.forContainers(Une,()=>this.createManagedBean(new hG(this.eContainer,this.name==="center"?n:void 0))),this.forContainers(qne,()=>this.createManagedBean(new lne(this.eContainer))),this.forContainers(Wne,()=>this.createManagedBean(new PR(i=>this.comp.setContainerWidth(`${i}px`)))),this.addListeners(),this.registerWithCtrlsService()}addListeners(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if($ne.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}let t=()=>{let n=this.gos.get("ensureDomOrder"),i=this.gos.isDomLayout("print");this.comp.setDomOrder(n||i)};this.addManagedPropertyListener("domLayout",t),t()}stopHScrollOnPinnedRows(){this.forContainers(["topCenter","stickyTopCenter","bottomCenter","stickyBottomCenter"],()=>{let e=()=>this.eViewport.scrollLeft=0;this.addManagedElementListeners(this.eViewport,{scroll:e})})}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){let e=t=>{this.dragService.isDragging()&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(e=!1){let t=this.getCenterWidth(),n=this.getCenterViewportScrollLeft();this.columnViewportService.setScrollPosition(t,n,e)}getCenterWidth(){return vf(this.eViewport)}getCenterViewportScrollLeft(){return wC(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){let t=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return _B(this.eViewport)}getViewportScrollLeft(){return wC(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||vZ(this.eViewport)}getViewportElement(){return this.eViewport}setContainerTranslateX(e){this.eContainer.style.transform=`translateX(${e}px)`}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){SC(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){let e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){let t=this.options.getRowCtrls(this.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}let n=this.gos.isDomLayout("print"),s=this.gos.get("embedFullWidthRows")||n,r=t.filter(o=>{let a=o.isFullWidth();return this.options.fullWidth?!s&&a:s||!a});this.comp.setRowCtrls({rowCtrls:r,useFlushSync:e})}};function Qne(e){let t;return e.type==="center"?t=`<div class="${e.viewport}" data-ref="eViewport" role="presentation">
                <div class="${e.container}" data-ref="eContainer"></div>
            </div>`:t=`<div class="${e.container}" data-ref="eContainer"></div>`,t}var Yne=class extends Ve{constructor(){super(),this.eViewport=X,this.eContainer=X,this.rowComps={},this.name=Ve.elementGettingCreated.getAttribute("name"),this.options=mG(this.name),this.setTemplate(Qne(this.options))}wireBeans(e){this.beans=e}postConstruct(){let e={setViewportHeight:n=>this.eViewport.style.height=n,setRowCtrls:({rowCtrls:n})=>this.setRowCtrls(n),setDomOrder:n=>{this.domOrder=n},setContainerWidth:n=>this.eContainer.style.width=n,setOffsetTop:n=>this.eContainer.style.transform=`translateY(${n})`};this.createManagedBean(new Kne(this.name)).setComp(e,this.eContainer,this.eViewport)}destroy(){this.setRowCtrls([]),super.destroy()}setRowCtrls(e){let t=B({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;let n=i=>{let s=i.getInstanceId(),r=t[s];if(r)this.rowComps[s]=r,delete t[s],this.ensureDomOrder(r.getGui());else{if(!i.getRowNode().displayed)return;let o=new one(i,this.beans,this.options.type);this.rowComps[s]=o,this.appendRow(o.getGui())}};e.forEach(n),jo(t).forEach(i=>{this.eContainer.removeChild(i.getGui()),i.destroy()}),oi(this.eContainer,"rowgroup")}appendRow(e){this.domOrder?mZ(this.eContainer,e,this.lastPlacedElement):this.eContainer.appendChild(e),this.lastPlacedElement=e}ensureDomOrder(e){this.domOrder&&(bB(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)}},Jne={selector:"AG-ROW-CONTAINER",component:Yne};function nf(e){return e.map(t=>`<ag-row-container name="${t}"></ag-row-container>`).join("")}var Xne=`<div class="ag-root ag-unselectable" role="treegrid">
        <ag-header-root></ag-header-root>
        <div class="ag-floating-top" data-ref="eTop" role="presentation">
            ${nf(["topLeft","topCenter","topRight","topFullWidth"])}
        </div>
        <div class="ag-body" data-ref="eBody" role="presentation">
            <div class="ag-body-viewport" data-ref="eBodyViewport" role="presentation">
            ${nf(["left","center","right","fullWidth"])}
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" data-ref="eStickyTop" role="presentation">
            ${nf(["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])}
        </div>
        <div class="ag-sticky-bottom" data-ref="eStickyBottom" role="presentation">
            ${nf(["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])}
        </div>
        <div class="ag-floating-bottom" data-ref="eBottom" role="presentation">
            ${nf(["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])}
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`,Zne=class extends Ve{constructor(){super(Xne,[Yte,Xte,ene,Kte,Jne]),this.eBodyViewport=X,this.eStickyTop=X,this.eStickyBottom=X,this.eTop=X,this.eBottom=X,this.eBody=X}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.rangeService=e.rangeService}postConstruct(){let e=(n,i)=>{let s=`${n}px`;i.style.minHeight=s,i.style.height=s},t={setRowAnimationCssOnBodyViewport:(n,i)=>this.setRowAnimationCssOnBodyViewport(n,i),setColumnCount:n=>rZ(this.getGui(),n),setRowCount:n=>sZ(this.getGui(),n),setTopHeight:n=>e(n,this.eTop),setBottomHeight:n=>e(n,this.eBottom),setTopDisplay:n=>this.eTop.style.display=n,setBottomDisplay:n=>this.eBottom.style.display=n,setStickyTopHeight:n=>this.eStickyTop.style.height=n,setStickyTopTop:n=>this.eStickyTop.style.top=n,setStickyTopWidth:n=>this.eStickyTop.style.width=n,setStickyBottomHeight:n=>this.eStickyBottom.style.height=n,setStickyBottomBottom:n=>this.eStickyBottom.style.bottom=n,setStickyBottomWidth:n=>this.eStickyBottom.style.width=n,setColumnMovingCss:(n,i)=>this.addOrRemoveCssClass(n,i),updateLayoutClasses:(n,i)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach(r=>{r.toggle("ag-layout-auto-height",i.autoHeight),r.toggle("ag-layout-normal",i.normal),r.toggle("ag-layout-print",i.print)}),this.addOrRemoveCssClass("ag-layout-auto-height",i.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",i.normal),this.addOrRemoveCssClass("ag-layout-print",i.print)},setAlwaysVerticalScrollClass:(n,i)=>this.eBodyViewport.classList.toggle(fG,i),registerBodyViewportResizeListener:n=>{let i=this.resizeObserverService.observeResize(this.eBodyViewport,n);this.addDestroyFunc(()=>i())},setPinnedTopBottomOverflowY:n=>this.eTop.style.overflowY=this.eBottom.style.overflowY=n,setCellSelectableCss:(n,i)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(s=>s.classList.toggle(n,i))},setBodyViewportWidth:n=>this.eBodyViewport.style.width=n};this.ctrl=this.createManagedBean(new sne),this.ctrl.setComp(t,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(this.rangeService&&this.gos.get("enableRangeSelection")||this.gos.get("rowSelection")==="multiple")&&iZ(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,t){let n=this.eBodyViewport.classList;n.toggle("ag-row-animation",t),n.toggle("ag-row-no-animation",!t)}getFloatingTopBottom(){return[this.eTop,this.eBottom]}},eie={selector:"AG-GRID-BODY",component:Zne},tie=class extends k{constructor(){super(...arguments),this.beanName="scrollVisibleService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnAnimationService=e.columnAnimationService}postConstruct(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)})}onDisplayedColumnsChanged(){this.update()}onDisplayedColumnsWidthChanged(){this.update()}update(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateImpl())}):this.updateImpl()}updateImpl(){let e=this.ctrlsService.get("center");if(!e||this.columnAnimationService.isActive())return;let t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t)}setScrollsVisible(e){if(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing){this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing;let n={type:"scrollVisibilityChanged"};this.eventService.dispatchEvent(n)}}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}},NV="__ag_grid_instance",yG=class wG extends k{constructor(){super(...arguments),this.beanName="mouseEventService",this.gridInstanceId=wG.gridInstanceSequence.next()}wireBeans(t){this.ctrlsService=t.ctrlsService}stampTopLevelGridCompWithGridInstance(t){t[NV]=this.gridInstanceId}getRenderedCellForEvent(t){return WD(this.gos,t.target,fl.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(t){return this.isElementInThisGrid(t.target)}isElementInThisGrid(t){let n=t;for(;n;){let i=n[NV];if(j(i))return i===this.gridInstanceId;n=n.parentElement}return!1}getCellPositionForEvent(t){let n=this.getRenderedCellForEvent(t);return n?n.getCellPosition():null}getNormalisedPosition(t){let n=this.gos.isDomLayout("normal"),i=t,s,r;if(i.clientX!=null||i.clientY!=null?(s=i.clientX,r=i.clientY):(s=i.x,r=i.y),n){let o=this.ctrlsService.getGridBodyCtrl(),a=o.getScrollFeature().getVScrollPosition(),l=o.getScrollFeature().getHScrollPosition();s+=l.left,r+=a.top}return{x:s,y:r}}};yG.gridInstanceSequence=new Ru;var nie=yG,iie=class extends k{constructor(){super(),this.beanName="navigationService",this.onPageDown=RV(this.onPageDown,100),this.onPageUp=RV(this.onPageUp,100)}wireBeans(e){this.mouseEventService=e.mouseEventService,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.ctrlsService=e.ctrlsService,this.rowRenderer=e.rowRenderer,this.headerNavigationService=e.headerNavigationService,this.rowPositionUtils=e.rowPositionUtils,this.cellNavigationService=e.cellNavigationService,this.pinnedRowModel=e.pinnedRowModel,this.rangeService=e.rangeService}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){let n=e.key,i=e.altKey,s=e.ctrlKey||e.metaKey,r=!!this.rangeService&&e.shiftKey,o=this.mouseEventService.getCellPositionForEvent(e),a=!1;switch(n){case N.PAGE_HOME:case N.PAGE_END:!s&&!i&&(this.onHomeOrEndKey(n),a=!0);break;case N.LEFT:case N.RIGHT:case N.UP:case N.DOWN:if(!o)return!1;s&&!i&&!r&&(this.onCtrlUpDownLeftRight(n,o),a=!0);break;case N.PAGE_DOWN:case N.PAGE_UP:!s&&!i&&(a=this.handlePageUpDown(n,o,t));break}return a&&e.preventDefault(),a}handlePageUpDown(e,t,n){return n&&(t=this.focusService.getFocusedCell()),t?(e===N.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo(e){let{scrollIndex:t,scrollType:n,scrollColumn:i,focusIndex:s,focusColumn:r}=e;j(i)&&!i.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(i),j(t)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t,n),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(s),this.focusService.setFocusedCell({rowIndex:s,column:r,rowPinned:null,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:s,rowPinned:null,column:r})}onPageDown(e){let n=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.getViewportHeight(),s=this.pageBoundsService.getPixelOffset(),r=n.top+i,o=this.rowModel.getRowIndexAtPixel(r+s);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,o):this.navigateToNextPage(e,o)}onPageUp(e){let n=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.pageBoundsService.getPixelOffset(),s=n.top,r=this.rowModel.getRowIndexAtPixel(s+i);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,r,!0):this.navigateToNextPage(e,r,!0)}navigateToNextPage(e,t,n=!1){let i=this.getViewportHeight(),s=this.pageBoundsService.getFirstRow(),r=this.pageBoundsService.getLastRow(),o=this.pageBoundsService.getPixelOffset(),a=this.rowModel.getRow(e.rowIndex),l=n?a?.rowHeight-i-o:i-o,c=a?.rowTop+l,u=this.rowModel.getRowIndexAtPixel(c+o);if(u===e.rowIndex){let f=n?-1:1;t=u=e.rowIndex+f}let h;n?(h="bottom",u<s&&(u=s),t<s&&(t=s)):(h="top",u>r&&(u=r),t>r&&(t=r)),this.isRowTallerThanView(u)&&(t=u,h="top"),this.navigateTo({scrollIndex:t,scrollType:h,scrollColumn:null,focusIndex:u,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,n=!1){this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{let i=this.getNextFocusIndexForAutoHeight(e,n);this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:i,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){let n=t?-1:1,i=this.getViewportHeight(),s=this.pageBoundsService.getLastRow(),r=0,o=e.rowIndex;for(;o>=0&&o<=s;){let a=this.rowModel.getRow(o);if(a){let l=a.rowHeight??0;if(r+l>i)break;r+=l}o+=n}return Math.max(0,Math.min(o,s))}getViewportHeight(){let{gridBodyCtrl:e,center:t}=this.ctrlsService.getParams(),n=e.getScrollFeature().getVScrollPosition(),i=this.gos.getScrollbarWidth(),s=n.bottom-n.top;return t.isHorizontalScrollShowing()&&(s-=i),s}isRowTallerThanView(e){let t=this.rowModel.getRow(e);if(!t)return!1;let n=t.rowHeight;return typeof n!="number"?!1:n>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){let n=this.cellNavigationService.getNextCellToFocus(e,t,!0),{rowIndex:i}=n,s=n.column;this.navigateTo({scrollIndex:i,scrollType:null,scrollColumn:s,focusIndex:i,focusColumn:s})}onHomeOrEndKey(e){let t=e===N.PAGE_HOME,n=this.visibleColsService.getAllCols(),i=t?n[0]:xe(n),s=t?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow();this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:i,focusIndex:s,focusColumn:i})}onTabKeyDown(e,t){let n=t.shiftKey,i=this.tabToNextCellCommon(e,n,t);if(i!==!1){i&&t.preventDefault();return}if(n){let{rowIndex:s,rowPinned:r}=e.getRowPosition();(r?s===0:s===this.pageBoundsService.getFirstRow())&&(this.gos.get("headerHeight")===0||this.gos.get("suppressHeaderFocus")?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else e instanceof fl&&e.focusCell(!0),this.focusService.focusNextGridCoreContainer(n)&&t.preventDefault()}tabToNextCell(e,t){let n=this.focusService.getFocusedCell();if(!n)return!1;let i=this.getCellByPosition(n);return!i&&(i=this.rowRenderer.getRowByPosition(n),!i||!i.isFullWidth())?!1:!!this.tabToNextCellCommon(i,e,t)}tabToNextCellCommon(e,t,n){let i=e.isEditing();if(!i&&e instanceof fl){let o=e.getRowCtrl();o&&(i=o.isEditing())}let s;return i?this.gos.get("editType")==="fullRow"?s=this.moveToNextEditingRow(e,t,n):s=this.moveToNextEditingCell(e,t,n):s=this.moveToNextCellNotEditing(e,t),s===null?s:s||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,t,n=null){let i=e.getCellPosition();e.getGui().focus(),e.stopEditing();let s=this.findNextCellToFocusOn(i,t,!0);return s===!1?null:s==null?!1:(s.startEditing(null,!0,n),s.focusCell(!1),!0)}moveToNextEditingRow(e,t,n=null){let i=e.getCellPosition(),s=this.findNextCellToFocusOn(i,t,!0);if(s===!1)return null;if(s==null)return!1;let r=s.getCellPosition(),o=this.isCellEditable(i),a=this.isCellEditable(r),l=r&&i.rowIndex===r.rowIndex&&i.rowPinned===r.rowPinned;return o&&e.setFocusOutOnEditor(),l||(e.getRowCtrl().stopEditing(),s.getRowCtrl().startRowEditing(void 0,void 0,n)),a?(s.setFocusInOnEditor(),s.focusCell()):s.focusCell(!0),!0}moveToNextCellNotEditing(e,t){let n=this.visibleColsService.getAllCols(),i;e instanceof pl?i=se(B({},e.getRowPosition()),{column:t?n[0]:xe(n)}):i=e.getCellPosition();let s=this.findNextCellToFocusOn(i,t,!1);if(s===!1)return null;if(s instanceof fl)s.focusCell(!0);else if(s)return this.tryToFocusFullWidthRow(s.getRowPosition(),t);return j(s)}findNextCellToFocusOn(e,t,n){let i=e;for(;;){e!==i&&(e=i),t||(i=this.getLastCellOfColSpan(i)),i=this.cellNavigationService.getNextTabbedCell(i,t);let s=this.gos.getCallback("tabToNextCell");if(j(s)){let l=s({backwards:t,editing:n,previousCellPosition:e,nextCellPosition:i||null});if(l===!0||l===null)l===null&&G("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),i=e;else{if(l===!1)return!1;i={rowIndex:l.rowIndex,column:l.column,rowPinned:l.rowPinned}}}if(!i)return null;if(i.rowIndex<0){let a=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a+i.rowIndex,column:i.column},fromCell:!0}),null}let r=this.gos.get("editType")==="fullRow";if(n&&!r&&!this.isCellEditable(i))continue;this.ensureCellVisible(i);let o=this.getCellByPosition(i);if(!o){let a=this.rowRenderer.getRowByPosition(i);if(!a||!a.isFullWidth()||n)continue;return a}if(!o.isSuppressNavigable())return this.rangeService?.setRangeToCell(i),o}}isCellEditable(e){let t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}getCellByPosition(e){let t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return e.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):e.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.rowModel.getRow(e.rowIndex)}navigateToNextCell(e,t,n,i){let s=n,r=!1;for(;s&&(s===n||!this.isValidNavigateCell(s));)this.gos.get("enableRtl")?t===N.LEFT&&(s=this.getLastCellOfColSpan(s)):t===N.RIGHT&&(s=this.getLastCellOfColSpan(s)),s=this.cellNavigationService.getNextCellToFocus(t,s),r=Ie(s);if(r&&e&&e.key===N.UP&&(s={rowIndex:-1,rowPinned:null,column:n.column}),i){let a=this.gos.getCallback("navigateToNextCell");if(j(a)){let c=a({key:t,previousCellPosition:n,nextCellPosition:s||null,event:e});j(c)?s={rowPinned:c.rowPinned,rowIndex:c.rowIndex,column:c.column}:s=null}}if(!s)return;if(s.rowIndex<0){let a=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a+s.rowIndex,column:n.column},event:e||void 0,fromCell:!0});return}let o=this.getNormalisedPosition(s);o?this.focusPosition(o):this.tryToFocusFullWidthRow(s)}getNormalisedPosition(e){this.ensureCellVisible(e);let t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t=!1){let n=this.visibleColsService.getAllCols(),i=this.rowRenderer.getRowByPosition(e);if(!i||!i.isFullWidth())return!1;let s=this.focusService.getFocusedCell(),r={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?xe(n):n[0])};this.focusPosition(r);let o=s!=null?this.rowPositionUtils.before(r,s):!1,a={type:"fullWidthRowFocused",rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:r.column,isFullWidthCell:!0,fromBelow:o};return this.eventService.dispatchEvent(a),!0}focusPosition(e){this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){let t=this.getCellByPosition(e);if(!t)return e;let n=t.getColSpanningList();return n.length===1?e:{rowIndex:e.rowIndex,column:xe(n),rowPinned:e.rowPinned}}ensureCellVisible(e){let t=this.gos.isGroupRowsSticky(),n=this.rowModel.getRow(e.rowIndex);!(t&&n?.sticky)&&Ie(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}},sie=class extends k{constructor(){super(...arguments),this.beanName="horizontalResizeService"}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService}addResizeBar(e){let t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(t),()=>this.dragService.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();let n=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(n)}setResizeIcons(){let e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e,t){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){let e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},rie=class extends k{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupService=e.popupService,this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.menuService=e.menuService}hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,t,n){this.showPopup(e,i=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:n,mouseEvent:t,ePopup:i})},n,t.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(e,t,n){let i=-1,s="left",r=this.menuService.isLegacyMenuEnabled();!r&&this.gos.get("enableRtl")&&(i=1,s="right");let o=r?void 0:4*i,a=r?void 0:4;this.showPopup(e,l=>{this.popupService.positionPopupByComponent({type:n,eventSource:t,ePopup:l,nudgeX:o,nudgeY:a,alignSide:s,keepWithinBounds:!0,position:"under",column:e})},n,t,r)}showPopup(e,t,n,i,s){let r=e?this.createBean(new vee(e,"COLUMN_MENU")):void 0;if(this.activeMenu=r,!r?.hasFilter()||!e)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");let o=document.createElement("div");oi(o,"presentation"),o.classList.add("ag-menu"),s||o.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(o,{keydown:v=>this.trapFocusWithin(v,o)}),o.appendChild(r?.getGui());let a,l=()=>r?.afterGuiDetached(),c=this.menuService.isColumnMenuAnchoringEnabled()?i??this.ctrlsService.getGridBodyCtrl().getGui():void 0,u=v=>{e.setMenuVisible(!1,"contextMenu");let y=v instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),y&&i&&ys(i)){let C=this.focusService.findTabbableParent(i);C&&C.focus()}l(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,n,e)},h=this.localeService.getLocaleTextFunc(),f=s&&n!=="columnFilter"?h("ariaLabelColumnMenu","Column Menu"):h("ariaLabelColumnFilter","Column Filter"),g=this.popupService.addPopup({modal:!0,eChild:o,closeOnEsc:!0,closedCallback:u,positionCallback:()=>t(o),anchorToElement:c,ariaLabel:f});g&&(this.hidePopup=a=g.hideFunc),r.afterInit().then(()=>{t(o),r.afterGuiAttached({container:n,hidePopup:a})}),e.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,n,e)}trapFocusWithin(e,t){e.key!==N.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,n){let i={type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:n??null};this.eventService.dispatchEvent(i)}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},oie=50,aie=class extends k{constructor(){super(...arguments),this.beanName="resizeObserverService",this.polyfillFunctions=[]}observeResize(e,t){let n=this.gos.getWindow(),i=()=>{let a=new n.ResizeObserver(t);return a.observe(e),()=>a.disconnect()},s=()=>{let a=e?.clientWidth??0,l=e?.clientHeight??0,c=!0,u=()=>{if(c){let h=e?.clientWidth??0,f=e?.clientHeight??0;(h!==a||f!==l)&&(a=h,l=f,t()),this.doNextPolyfillTurn(u)}};return u(),()=>c=!1},r=this.gos.get("suppressBrowserResizeObserver");return!!n.ResizeObserver&&!r?i():this.getFrameworkOverrides().wrapIncoming(()=>s(),"resize-observer")}doNextPolyfillTurn(e){this.polyfillFunctions.push(e),this.schedulePolyfill()}schedulePolyfill(){if(this.polyfillScheduled)return;let e=()=>{let t=this.polyfillFunctions;this.polyfillScheduled=!1,this.polyfillFunctions=[],t.forEach(n=>n())};this.polyfillScheduled=!0,window.setTimeout(e,oie)}},lie=class extends k{constructor(){super(...arguments),this.beanName="animationFrameService",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}setScrollTop(e){let t=this.gos.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&e===0){let n=this.paginationService?.getCurrentPage()??0;n!==this.lastPage&&(this.lastPage=n,this.scrollGoingDown=!0)}this.lastScrollTop=e}postConstruct(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){this.useAnimationFrame===!1&&G(`AnimationFrameService.${e} called but animation frames are off`)}createTask(e,t,n){this.verifyAnimationFrameOn(n);let i={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[n],i),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;let t=this.scrollGoingDown?1:-1;e.list.sort((n,i)=>n.index!==i.index?t*(i.index-n.index):i.createOrder-n.createOrder),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");let t=this.createTasksP1,n=t.list,i=this.createTasksP2,s=i.list,r=this.destroyTasks,o=new Date().getTime(),a=new Date().getTime()-o,l=e<=0,c=this.ctrlsService.getGridBodyCtrl();for(;l||a<e;){if(!c.getScrollFeature().scrollGridIfNeeded()){let h;if(n.length)this.sortTaskList(t),h=n.pop().task;else if(s.length)this.sortTaskList(i),h=s.pop().task;else if(r.length)h=r.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(h)||h()}a=new Date().getTime()-o}n.length||s.length||r.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){let e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){let t=this.gos.getWindow();t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let t=!1;return()=>{if(!this.isOn()){window.setTimeout(e,0);return}t||(t=!0,this.addDestroyTask(()=>{t=!1,e()}))}}};var cie=class extends k{constructor(){super(...arguments),this.beanName="expansionService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.isClientSideRowModel=this.rowModel.getType()==="clientSide"}expandRows(e){if(!this.isClientSideRowModel)return;let t=new Set(e);this.rowModel.forEachNode(n=>{n.id&&t.has(n.id)&&(n.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){let e=[];return this.rowModel.forEachNode(({expanded:t,id:n})=>{t&&n&&e.push(n)}),e}expandAll(e){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(e)}setRowNodeExpanded(e,t,n,i){e&&(n&&e.parent&&e.parent.level!==-1&&this.setRowNodeExpanded(e.parent,t,n,i),e.setExpanded(t,void 0,i))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}},uie=class extends k{constructor(){super(...arguments),this.beanName="menuService"}wireBeans(e){this.filterMenuFactory=e.filterMenuFactory,this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.filterManager=e.filterManager,this.rowRenderer=e.rowRenderer,this.columnChooserFactory=e.columnChooserFactory,this.contextMenuFactory=e.contextMenuFactory,this.enterpriseMenuFactory=e.enterpriseMenuFactory}postConstruct(){this.activeMenuFactory=this.enterpriseMenuFactory??this.filterMenuFactory}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){let t=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(t,e,e.containerType,!0)}showHeaderContextMenu(e,t,n){this.activeMenuFactory.showMenuAfterContextMenuEvent(e,t,n)}getContextMenuPosition(e,t){let n=this.getRowCtrl(e),i=this.getCellGui(n,t);if(!i)return n?{x:0,y:n.getRowYPosition()}:{x:0,y:0};let s=i.getBoundingClientRect();return{x:s.x+s.width/2,y:s.y+s.height/2}}showContextMenu(e){let{rowNode:t}=e,n=e.column,{anchorToElement:i,value:s}=e;t&&n&&s==null&&(s=t.getValueFromValueService(n)),i==null&&(i=this.getContextMenuAnchorElement(t,n)),this.contextMenuFactory?.onContextMenu(e.mouseEvent??null,e.touchEvent??null,t??null,n??null,s,i)}showColumnChooser(e){this.columnChooserFactory?.showColumnChooser(e)}hidePopupMenu(){this.contextMenuFactory?.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){this.columnChooserFactory?.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(e){let{suppressMenu:t,suppressHeaderMenuButton:n}=e.getColDef();return!(n??t)&&this.activeMenuFactory.isMenuEnabled(e)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&!!this.filterManager?.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){return!e?.getColDef().suppressHeaderContextMenu&&this.getColumnMenuType()==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){let e=!this.isSuppressMenuHide();return!($o()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return!!this.filterManager?.isFilterAllowed(e)&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return this.getColumnMenuType()==="new"}isLegacyMenuEnabled(){return this.getColumnMenuType()==="legacy"}isFloatingFilterButtonEnabled(e){let t=e.getColDef(),n=t.floatingFilterComponentParams?.suppressFilterButton;return n!=null&&G("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),t.suppressFloatingFilterButton==null?!n:!t.suppressFloatingFilterButton}getColumnMenuType(){return this.gos.get("columnMenu")}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){let e=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()?this.gos.exists("suppressMenuHide")?e:!1:e}showColumnMenuCommon(e,t,n,i){let{positionBy:s}=t,r=t.column;if(s==="button"){let{buttonElement:o}=t;e.showMenuAfterButtonClick(r,o,n,i)}else if(s==="mouse"){let{mouseEvent:o}=t;e.showMenuAfterMouseEvent(r,o,n,i)}else r&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(r,"auto"),this.animationFrameService.requestAnimationFrame(()=>{let o=this.ctrlsService.getHeaderRowContainerCtrl(r.getPinned()).getHeaderCtrlForColumn(r);e.showMenuAfterButtonClick(r,o.getAnchorElementForMenu(i),n,!0)}))}getRowCtrl(e){let{rowIndex:t,rowPinned:n}=e||{};if(t!=null)return this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:n})||void 0}getCellGui(e,t){return!e||!t?void 0:e.getCellCtrl(t)?.getGui()||void 0}getContextMenuAnchorElement(e,t){let n=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),i=this.getRowCtrl(e);if(!i)return n;let s=this.getCellGui(i,t);return s||(i.isFullWidth()?i.getFullWidthElement():n)}},die=class extends cl{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){let n=super.setValue(e,t);return this.eInput.value=e,n}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},hie={selector:"AG-INPUT-TEXT-AREA",component:die},fie=class extends Au{constructor(){super(`<div class="ag-large-text">
        <ag-input-text-area data-ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`,[hie]),this.eTextArea=X}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),j(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){let t=e.key;(t===N.LEFT||t===N.UP||t===N.RIGHT||t===N.DOWN||e.shiftKey&&t===N.ENTER)&&e.stopPropagation()}afterGuiAttached(){let e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){let e=this.eTextArea.getValue();return!j(e)&&!j(this.params.value)?this.params.value:this.params.parseValue(e)}},pie=class extends Au{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){this.gos.setDomData(this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){let e=this.getGui(),t=this.params,n=i=>{tR(this.gos,i,t.node,t.column,!0)||t.onKeyDown(i)};this.addManagedElementListeners(e,{keydown:n})}},gie=class extends Au{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" data-ref="eSelect"></ag-select>
            </div>`,[Eee]),this.eSelect=X,this.startedByEnter=!1}wireBeans(e){this.valueService=e.valueService}init(e){this.focusAfterAttached=e.cellStartedEdit;let{eSelect:t,valueService:n,gos:i}=this,{values:s,value:r,eventKey:o}=e;if(Ie(s)){G("no values found for select cellEditor");return}this.startedByEnter=o!=null?o===N.ENTER:!1;let a=!1;s.forEach(h=>{let f={value:h},g=n.formatValue(e.column,null,h),v=g!=null;f.text=v?g:h,t.addOption(f),a=a||r===h}),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);let{valueListGap:l,valueListMaxWidth:c,valueListMaxHeight:u}=e;l!=null&&t.setPickerGap(l),u!=null&&t.setPickerMaxHeight(u),c!=null&&t.setPickerMaxWidth(c),i.get("editType")!=="fullRow"&&this.addManagedListeners(this.eSelect,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}},TC=class extends Au{constructor(e){super(`
            <div class="ag-cell-edit-wrapper">
                ${e.getTemplate()}
            </div>`,e.getAgComponents()),this.cellEditorInput=e,this.eInput=X}init(e){this.params=e;let t=this.eInput;this.cellEditorInput.init(t,e);let n;if(e.cellStartedEdit){this.focusAfterAttached=!0;let i=e.eventKey;i===N.BACKSPACE||e.eventKey===N.DELETE?n="":i&&i.length===1?n=i:(n=this.cellEditorInput.getStartValue(),i!==N.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,n=this.cellEditorInput.getStartValue();n!=null&&t.setStartValue(n),this.addManagedElementListeners(t.getGui(),{keydown:i=>{let{key:s}=i;(s===N.PAGE_UP||s===N.PAGE_DOWN)&&i.preventDefault()}})}afterGuiAttached(){let e=this.localeService.getLocaleTextFunc(),t=this.eInput;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;Ur()||t.getFocusableElement().focus();let n=t.getInputElement();this.highlightAllOnFocus?n.select():this.cellEditorInput.setCaret?.()}focusIn(){let e=this.eInput,t=e.getFocusableElement(),n=e.getInputElement();t.focus(),n.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}},mie=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" data-ref="eInput"></ag-input-text-field>'}getAgComponents(){return[DC]}init(e,t){this.eInput=e,this.params=t,t.maxLength!=null&&e.setMaxLength(t.maxLength)}getValue(){let e=this.eInput.getValue();return!j(e)&&!j(this.params.value)?this.params.value:this.params.parseValue(e)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){let e=this.eInput.getValue(),t=j(e)&&e.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}},SG=class extends TC{constructor(){super(new mie)}},vie=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" data-ref="eInput"></ag-input-number-field>'}getAgComponents(){return[Oee]}init(e,t){this.eInput=e,this.params=t,t.max!=null&&e.setMax(t.max),t.min!=null&&e.setMin(t.min),t.precision!=null&&e.setPrecision(t.precision),t.step!=null&&e.setStep(t.step);let n=e.getInputElement();t.preventStepping?e.addManagedElementListeners(n,{keydown:this.preventStepping}):t.showStepperButtons&&n.classList.add("ag-number-field-input-stepper")}preventStepping(e){(e.key===N.UP||e.key===N.DOWN)&&e.preventDefault()}getValue(){let e=this.eInput.getValue();if(!j(e)&&!j(this.params.value))return this.params.value;let t=this.params.parseValue(e);if(t==null)return t;if(typeof t=="string"){if(t==="")return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}},Cie=class extends TC{constructor(){super(new vie)}},yie=class extends Cl{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();let e=Ur();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){this.gos.getActiveDomElement()===this.eInput&&e.preventDefault()}setMin(e){let t=e instanceof Date?Qi(e??null,!1)??void 0:e;return this.min===t?this:(this.min=t,Br(this.eInput,"min",t),this)}setMax(e){let t=e instanceof Date?Qi(e??null,!1)??void 0:e;return this.max===t?this:(this.max=t,Br(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,Br(this.eInput,"step",e),this)}getDate(){if(this.eInput.validity.valid)return ri(this.getValue())??void 0}setDate(e,t){this.setValue(Qi(e??null,!1),t)}},_G={selector:"AG-INPUT-DATE-FIELD",component:yie},wie=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[_G]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){let e=this.eInput.getDate();return!j(e)&&!j(this.params.value)?this.params.value:e??null}getStartValue(){let{value:e}=this.params;if(e instanceof Date)return Qi(e,!1)}},Sie=class extends TC{constructor(){super(new wie)}},_ie=class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[_G]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){let e=this.formatDate(this.eInput.getDate());return!j(e)&&!j(this.params.value)?this.params.value:this.params.parseValue(e??"")}getStartValue(){return Qi(this.parseDate(this.params.value??void 0)??null,!1)}parseDate(e){let t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):ri(e)??void 0}formatDate(e){let t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):Qi(e??null,!1)??void 0}},bie=class extends TC{wireBeans(e){this.dataTypeService=e.dataTypeService}constructor(){super(new _ie(()=>this.dataTypeService))}},Eie=class extends Au{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[wR]),this.eCheckbox=X}init(e){this.params=e;let t=e.value??void 0;this.eCheckbox.setValue(t),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(this.eCheckbox,{fieldValueChanged:i=>this.setAriaLabel(i.selected)})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){let t=this.localeService.getLocaleTextFunc(),n=hR(t,e),i=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${i} (${n})`)}},of=class{constructor(e){this.cellValueChanges=e}},BD=class extends of{constructor(e,t,n,i){super(e),this.initialRange=t,this.finalRange=n,this.ranges=i}},Die=10,kV=class{constructor(e){this.actionStack=[],this.maxStackSize=e||Die,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},Rie=class extends k{constructor(){super(...arguments),this.beanName="undoRedoService",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{let t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},n=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,t),i=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(n||i||this.isPasting||this.isRangeInAction))return;let{rowPinned:r,rowIndex:o,column:a,oldValue:l,value:c}=e,u={rowPinned:r,rowIndex:o,columnId:a.getColId(),newValue:c,oldValue:l};this.cellValueChanges.push(u)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}wireBeans(e){this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.cellPositionUtils=e.cellPositionUtils,this.rowPositionUtils=e.rowPositionUtils,this.columnModel=e.columnModel,this.rangeService=e.rangeService}postConstruct(){if(!this.gos.get("undoRedoCellEditing"))return;let e=this.gos.get("undoRedoCellEditingLimit");if(e<=0)return;this.undoStack=new kV(e),this.redoStack=new kV(e),this.addListeners();let t=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:n=>{n.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:t,newColumnsLoaded:t,columnGroupOpened:t,columnRowGroupChanged:t,columnMoved:t,columnPinned:t,columnVisible:t,rowDragEnd:t}),this.ctrlsService.whenReady(n=>{this.gridBodyCtrl=n.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){let t={type:"undoStarted",source:e};this.eventService.dispatchEvent(t);let n=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo"),i={type:"undoEnded",source:e,operationPerformed:n};this.eventService.dispatchEvent(i)}redo(e){let t={type:"redoStarted",source:e};this.eventService.dispatchEvent(t);let n=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo"),i={type:"redoEnded",source:e,operationPerformed:n};this.eventService.dispatchEvent(i)}undoRedo(e,t,n,i,s){if(!e)return!1;let r=e.pop();return!r||!r.cellValueChanges?!1:(this.processAction(r,o=>o[i],s),r instanceof BD?this.processRange(this.rangeService,r.ranges||[r[n]]):this.processCell(r.cellValueChanges),t.push(r),!0)}processAction(e,t,n){e.cellValueChanges.forEach(i=>{let{rowIndex:s,rowPinned:r,columnId:o}=i,a={rowIndex:s,rowPinned:r},l=this.rowPositionUtils.getRowNode(a);l.displayed&&l.setDataValue(o,t(i),n)})}processRange(e,t){let n;e.removeAllCellRanges(!0),t.forEach((i,s)=>{if(!i)return;let r=i.startRow,o=i.endRow;s===t.length-1&&(n={rowPinned:r.rowPinned,rowIndex:r.rowIndex,columnId:i.startColumn.getColId()},this.setLastFocusedCell(n));let a={rowStartIndex:r.rowIndex,rowStartPinned:r.rowPinned,rowEndIndex:o.rowIndex,rowEndPinned:o.rowPinned,columnStart:i.startColumn,columns:i.columns};e.addCellRange(a)})}processCell(e){let t=e[0],{rowIndex:n,rowPinned:i}=t,s={rowIndex:n,rowPinned:i},r=this.rowPositionUtils.getRowNode(s),o={rowPinned:t.rowPinned,rowIndex:r.rowIndex,columnId:t.columnId};this.setLastFocusedCell(o,this.rangeService)}setLastFocusedCell(e,t){let{rowIndex:n,columnId:i,rowPinned:s}=e,r=this.gridBodyCtrl.getScrollFeature(),o=this.columnModel.getCol(i);if(!o)return;r.ensureIndexVisible(n),r.ensureColumnVisible(o);let a={rowIndex:n,column:o,rowPinned:s};this.focusService.setFocusedCell(se(B({},a),{forceBrowserFocus:!0})),t?.setRangeToCell(a)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{let e=new of(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){let n=new of(this.cellValueChanges);this.pushActionsToUndoStack(n)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{let e=new of(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{let t=new BD(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;this.rangeService&&this.gos.get("enableRangeSelection")?e=new BD(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):e=new of(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1}})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}};function Tie(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition()}function Iie(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getHScrollPosition()}function bG(e,t,n="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(t,n),"ensureVisible")}function EG(e,t,n){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureIndexVisible(t,n),"ensureVisible")}function Aie(e,t,n=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureNodeVisible(t,n),"ensureVisible")}function Mie(e){e.undoRedoService?.undo("api")}function Pie(e){e.undoRedoService?.redo("api")}function Fie(e,t={}){return e.rowRenderer.getCellEditorInstances(t).map(cf)}function xie(e){return e.rowRenderer.getEditingCells()}function Oie(e,t=!1){e.rowRenderer.stopEditing(t)}function Nie(e,t){let n=e.columnModel.getCol(t.colKey);if(!n){G(`no column found for ${t.colKey}`);return}let i={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:n};t.rowPinned==null&&EG(e,t.rowIndex),bG(e,t.colKey);let r=e.navigationService.getCellByPosition(i);r&&(e.focusService.isCellFocused(i)||e.focusService.setFocusedCell(i),r.startRowOrCellEdit(t.key))}function kie(e){return e.undoRedoService?.getCurrentUndoStackSize()??0}function Lie(e){return e.undoRedoService?.getCurrentRedoStackSize()??0}var Vie=class extends k{constructor(){super(...arguments),this.beanName="editService"}wireBeans(e){this.navigationService=e.navigationService,this.userComponentFactory=e.userComponentFactory,this.valueService=e.valueService}startEditing(e,t=null,n=!1,i=null){let s=this.createCellEditorParams(e,t,n),r=e.getColumn().getColDef(),o=this.userComponentFactory.getCellEditorDetails(r,s),a=o?.popupFromSelector!=null?o.popupFromSelector:!!r.cellEditorPopup,l=o?.popupPositionFromSelector!=null?o.popupPositionFromSelector:r.cellEditorPopupPosition;e.setEditing(!0,o),e.getComp().setEditDetails(o,a,l,this.gos.get("reactiveCustomComponents"));let c=e.createEvent(i,"cellEditingStarted");this.eventService.dispatchEvent(c)}stopEditing(e,t){let n=e.getComp(),{newValue:i,newValueExists:s}=this.takeValueFromCellEditor(t,n),r=e.getRowNode(),o=e.getColumn(),a=r.getValueFromValueService(o),l=!1;s&&(l=this.saveNewValue(e,a,i,r,o)),e.setEditing(!1,void 0),n.setEditDetails(),e.updateAndFormatValue(!1),e.refreshCell({forceRefresh:!0,suppressFlash:!0});let c=se(B({},e.createEvent(null,"cellEditingStopped")),{oldValue:a,newValue:i,valueChanged:l});return this.eventService.dispatchEvent(c),l}handleColDefChanged(e){let t=e.getCellEditor();if(t?.refresh){let{eventKey:n,cellStartedEdit:i}=e.getEditCompDetails().params,s=this.createCellEditorParams(e,n,i),r=e.getColumn().getColDef(),o=this.userComponentFactory.getCellEditorDetails(r,s);t.refresh(o.params)}}setFocusOutOnEditor(e){let t=e.getComp().getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(e){let t=e.getComp().getCellEditor();t&&t.focusIn?t.focusIn():e.focusCell(!0)}stopEditingAndFocus(e,t=!1,n=!1){e.stopRowOrCellEdit(),e.focusCell(!0),t||this.navigateAfterEdit(n,e.getCellPosition())}createPopupEditorWrapper(e){return new pie(e)}takeValueFromCellEditor(e,t){let n={newValueExists:!1};if(e)return n;let i=t.getCellEditor();return!i||i.isCancelAfterEnd&&i.isCancelAfterEnd()?n:{newValue:i.getValue(),newValueExists:!0}}saveNewValue(e,t,n,i,s){if(n===t)return!1;e.setSuppressRefreshCell(!0);let r=i.setDataValue(s,n,"edit");return e.setSuppressRefreshCell(!1),r}createCellEditorParams(e,t,n){let i=e.getColumn(),s=e.getRowNode();return this.gos.addGridCommonParams({value:s.getValueFromValueService(i),eventKey:t,column:i,colDef:i.getColDef(),rowIndex:e.getCellPosition().rowIndex,node:s,data:s.data,cellStartedEdit:n,onKeyDown:e.onKeyDown.bind(e),stopEditing:e.stopEditingAndFocus.bind(e),eGridCell:e.getGui(),parseValue:r=>this.valueService.parseValue(i,s,r,e.getValue()),formatValue:e.formatValue.bind(e)})}navigateAfterEdit(e,t){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){let i=e?N.UP:N.DOWN;this.navigationService.navigateToNextCell(null,i,t,!1)}}},Bie=class extends k{constructor(){super(...arguments),this.beanName="rowEditService"}startEditing(e,t=null,n=null,i=null){e.getAllCellCtrls().reduce((r,o)=>{let a=o===n;return a?o.startEditing(t,a,i):o.startEditing(null,a,i),r?!0:o.isEditing()},!1)&&this.setEditing(e,!0)}stopEditing(e,t=!1){let n=e.getAllCellCtrls(),i=e.isEditing();e.setStoppingRowEdit(!0);let s=!1;for(let r of n){let o=r.stopEditing(t);i&&!t&&!s&&o&&(s=!0)}if(s){let r=e.createRowEvent("rowValueChanged");this.eventService.dispatchEvent(r)}i&&this.setEditing(e,!1),e.setStoppingRowEdit(!1)}setEditing(e,t){e.setEditingRow(t),e.forEachGui(void 0,i=>i.rowComp.addOrRemoveCssClass("ag-row-editing",t));let n=t?e.createRowEvent("rowEditingStarted"):e.createRowEvent("rowEditingStopped");this.eventService.dispatchEvent(n)}},yl={version:ge,moduleName:"@ag-grid-community/edit-core",beans:[Vie]},Gie={version:ge,moduleName:"@ag-grid-community/edit-api",apiFunctions:{undoCellEditing:Mie,redoCellEditing:Pie,getCellEditorInstances:Fie,getEditingCells:xie,stopEditing:Oie,startEditingCell:Nie,getCurrentUndoSize:kie,getCurrentRedoSize:Lie},dependantModules:[yl]},Hie={version:ge,moduleName:"@ag-grid-community/undo-redo-edit",beans:[Rie],dependantModules:[yl]},Uie={version:ge,moduleName:"@ag-grid-community/full-row-edit",beans:[Bie],dependantModules:[yl]},DG={version:ge,moduleName:"@ag-grid-community/default-editor",userComponents:[{name:"agCellEditor",classImp:SG}],dependantModules:[yl]},Wie={version:ge,moduleName:"@ag-grid-community/data-type-editors",userComponents:[{name:"agTextCellEditor",classImp:SG},{name:"agNumberCellEditor",classImp:Cie},{name:"agDateCellEditor",classImp:Sie},{name:"agDateStringCellEditor",classImp:bie},{name:"agCheckboxCellEditor",classImp:Eie}],dependantModules:[DG]},jie={version:ge,moduleName:"@ag-grid-community/select-editor",userComponents:[{name:"agSelectCellEditor",classImp:gie}],dependantModules:[yl]},zie={version:ge,moduleName:"@ag-grid-community/large-text-editor",userComponents:[{name:"agLargeTextCellEditor",classImp:fie}],dependantModules:[yl]},$ie={version:ge,moduleName:"@ag-grid-community/all-editors",dependantModules:[DG,Wie,jie,zie]},qie={version:ge,moduleName:"@ag-grid-community/editing",dependantModules:[yl,Hie,Uie,$ie,Gie]},Kie=class extends k{constructor(){super(...arguments),this.beanName="autoWidthCalculator"}wireBeans(e){this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){let n=this.getHeaderCellForColumn(e);if(!n)return-1;let i=this.rowRenderer.getAllCellsForColumn(e);return t||i.push(n),this.addElementsToContainerAndGetWidth(i)}getPreferredWidthForColumnGroup(e){let t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){let t=document.createElement("form");t.style.position="fixed";let n=this.centerRowContainerCtrl.getContainerElement();e.forEach(r=>this.cloneItemIntoDummy(r,t)),n.appendChild(t);let i=t.offsetWidth;n.removeChild(t);let s=this.getAutoSizePadding();return i+s}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(e){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(n=>{let i=n.getHtmlElementForColumnHeader(e);i!=null&&(t=i)}),t}cloneItemIntoDummy(e,t){let n=e.cloneNode(!0);n.style.width="",n.style.position="static",n.style.left="";let i=document.createElement("div"),s=i.classList;["ag-header-cell","ag-header-group-cell"].some(a=>n.classList.contains(a))?(s.add("ag-header","ag-header-row"),i.style.position="static"):s.add("ag-row");let o=e.parentElement;for(;o;){if(["ag-header-row","ag-row"].some(l=>o.classList.contains(l))){for(let l=0;l<o.classList.length;l++){let c=o.classList[l];c!="ag-row-position-absolute"&&s.add(c)}break}o=o.parentElement}i.appendChild(n),t.appendChild(i)}},Qie=class extends k{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.topContainerHeight=0,this.bottomContainerHeight=0,this.extraTopHeight=0,this.extraBottomHeight=0}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.isClientSide=this.rowModel.getType()==="clientSide",this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl})}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}setOffsetTop(e){if(this.extraTopHeight===e)return;this.extraTopHeight=e;let t={type:"stickyTopOffsetChanged",offset:e};this.eventService.dispatchEvent(t)}setOffsetBottom(e){this.extraBottomHeight!==e&&(this.extraBottomHeight=e)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getExtraTopHeight(){return this.extraTopHeight}getExtraBottomHeight(){return this.extraBottomHeight}getLastPixelOfGroup(e){return this.isClientSide?this.getClientSideLastPixelOfGroup(e):this.getServerSideLastPixelOfGroup(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}getServerSideLastPixelOfGroup(e){if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(e.isExpandable()||e.footer){if(e.master)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let n=e.childStore?.getStoreBounds();return e.footer&&(n=e.sibling.childStore?.getStoreBounds()),(n?.heightPx??0)+(n?.topPx??0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(e){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(e.isExpandable()||e.footer){if(e.footer&&e.rowIndex===0)return Number.MAX_SAFE_INTEGER;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let i=e.footer?e.sibling:e;for(;i.isExpandable()&&i.expanded;)if(i.master)i=i.detailNode;else if(i.childrenAfterSort){if(i.childrenAfterSort.length===0)break;i=xe(i.childrenAfterSort)}return i.rowTop+i.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(e){let t=e==="top",n=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,n);let i=t?this.rowRenderer.getFirstVisibleVerticalPixel()-this.extraTopHeight:this.rowRenderer.getLastVisibleVerticalPixel()-this.extraTopHeight,s=new Set,r=c=>{if(s.add(c),t){let u=this.getLastPixelOfGroup(c),h=i+n+c.rowHeight;u<h?c.stickyRowTop=n+(u-h):c.stickyRowTop=n}else{let u=this.getFirstPixelOfGroup(c),h=i-(n+c.rowHeight);u>h?c.stickyRowTop=n-(u-h):c.stickyRowTop=n}n=0,s.forEach(u=>{let h=u.stickyRowTop+u.rowHeight;n<h&&(n=h)})},o=this.areFooterRowsStickySuppressed(),a=this.gos.get("suppressGroupRowsSticky"),l=c=>c.displayed?c.footer?o===!0||o==="grand"&&c.level===-1||o==="group"&&c.level>-1?!1:!s.has(c):c.isExpandable()?a===!0?!1:!s.has(c)&&c.expanded:!1:!1;for(let c=0;c<100;c++){let u=i+n;t||(u=i-n);let h=this.rowModel.getRowIndexAtPixel(u),f=this.rowModel.getRow(h);if(f==null)break;let v=this.getStickyAncestors(f).find(C=>(t?C.rowIndex<h:C.rowIndex>h)&&l(C));if(v){r(v);continue}if((t?f.rowTop<u:f.rowTop+f.rowHeight>u)&&l(f)){r(f);continue}break}return t||s.forEach(c=>{c.stickyRowTop=n-(c.stickyRowTop+c.rowHeight)}),this.refreshNodesAndContainerHeight(e,s,n)}areFooterRowsStickySuppressed(){let e=this.gos.get("suppressStickyTotalRow");if(e===!0)return!0;let t=!!this.gos.get("groupIncludeFooter")||e==="group",n=!!this.gos.get("groupIncludeTotalFooter")||e==="grand";return t&&n?!0:n?"grand":t?"group":!1}canRowsBeSticky(){let e=this.gos.isGroupRowsSticky(),t=this.areFooterRowsStickySuppressed(),n=this.gos.get("suppressGroupRowsSticky");return e&&(!t||!n)}getStickyAncestors(e){let t=[],n=e.footer?e.sibling:e.parent;for(;n;)n.sibling&&t.push(n.sibling),t.push(n),n=n.parent;return t.reverse()}checkStickyRows(){let e=this.updateStickyRows("top"),t=this.updateStickyRows("bottom");return e||t}destroyStickyCtrls(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){let t=new Set;if(this.stickyTopRowCtrls.some(n=>n.getRowNode()===e)){for(let n=0;n<this.stickyTopRowCtrls.length;n++){let i=this.stickyTopRowCtrls[n].getRowNode();i!==e&&t.add(i)}this.refreshNodesAndContainerHeight("top",t,this.topContainerHeight)&&this.checkStickyRows();return}for(let n=0;n<this.stickyBottomRowCtrls.length;n++){let i=this.stickyBottomRowCtrls[n].getRowNode();i!==e&&t.add(i)}this.refreshNodesAndContainerHeight("bottom",t,this.bottomContainerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(e,t,n){let i=e==="top",s=i?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,r={},o=[];for(let f=0;f<s.length;f++){let g=s[f].getRowNode();if(!t.has(g)){r[g.id]=s[f],g.sticky=!1;continue}o.push(s[f])}let a=new Set;for(let f=0;f<o.length;f++)a.add(o[f].getRowNode());let l=[];t.forEach(f=>{a.has(f)||(f.sticky=!0,l.push(this.createRowCon(f,!1,!1)))});let c=!!l.length||o.length!==s.length;i?this.topContainerHeight!==n&&(this.topContainerHeight=n,this.gridBodyCtrl.setStickyTopHeight(n),c=!0):this.bottomContainerHeight!==n&&(this.bottomContainerHeight=n,this.gridBodyCtrl.setStickyBottomHeight(n),c=!0),this.destroyRowCtrls(r,!1);let u=[...o,...l];u.sort((f,g)=>g.getRowNode().rowIndex-f.getRowNode().rowIndex),i||u.reverse(),u.forEach(f=>f.setRowTop(f.getRowNode().stickyRowTop));let h=0;return i?(t.forEach(f=>{f.rowIndex<this.pageBoundsService.getFirstRow()&&(h+=f.rowHeight)}),h>this.topContainerHeight&&(h=this.topContainerHeight),this.setOffsetTop(h)):(t.forEach(f=>{f.rowIndex>this.pageBoundsService.getLastRow()&&(h+=f.rowHeight)}),h>this.bottomContainerHeight&&(h=this.bottomContainerHeight),this.setOffsetBottom(h)),c?(i?this.stickyTopRowCtrls=u:this.stickyBottomRowCtrls=u,!0):!1}ensureRowHeightsValid(){let e=!1,t=n=>{let i=n.getRowNode();if(i.rowHeightEstimated){let s=this.gos.getRowHeightForNode(i);i.setRowHeight(s.height),e=!0}};return this.stickyTopRowCtrls.forEach(t),this.stickyBottomRowCtrls.forEach(t),e}},Yie=class extends k{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{let e=()=>{this.getAllCellCtrls().forEach(r=>r.onRangeSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(r=>r.updateRangeBordersIfRangeCount())},n=()=>{this.eventService.addEventListener("rangeSelectionChanged",e),this.eventService.addEventListener("columnMoved",t),this.eventService.addEventListener("columnPinned",t),this.eventService.addEventListener("columnVisible",t)},i=()=>{this.eventService.removeEventListener("rangeSelectionChanged",e),this.eventService.removeEventListener("columnMoved",t),this.eventService.removeEventListener("columnPinned",t),this.eventService.removeEventListener("columnVisible",t)};this.addDestroyFunc(()=>i()),this.addManagedPropertyListener("enableRangeSelection",r=>{r.currentValue?n():i()}),this.gos.get("enableRangeSelection")&&n()}}wireBeans(e){this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusService=e.focusService,this.beans=e,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){if(this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this)}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListeners(["suppressCellFocus","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.gos.isGroupRowsSticky()){let e=this.rowModel.getType();(e==="clientSide"||e==="serverSide")&&(this.stickyRowFeature=this.createManagedBean(new Qie(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gos.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){let e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new Jie(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){let e=jo(this.rowCtrlsByRowIndex),t=jo(this.zombieRowCtrls),n=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];t.length>0||n.length>0?this.allRowCtrls=[...e,...t,...n]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>{this.onCellFocusChanged(e)},cellFocusCleared:()=>this.onCellFocusChanged(),flashCells:e=>{this.getAllCellCtrls().forEach(t=>t.onFlashCells(e))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getCols().forEach(t=>{let n=l=>{this.getAllCellCtrls().forEach(c=>{c.getColumn()===t&&l(c)})},i=()=>{n(l=>l.onLeftChanged())},s=()=>{n(l=>l.onWidthChanged())},r=()=>{n(l=>l.onFirstRightPinnedChanged())},o=()=>{n(l=>l.onLastLeftPinnedChanged())},a=()=>{n(l=>l.onColDefChanged())};t.addEventListener("leftChanged",i),t.addEventListener("widthChanged",s),t.addEventListener("firstRightPinnedChanged",r),t.addEventListener("lastLeftPinnedChanged",o),t.addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{t.removeEventListener("leftChanged",i),t.removeEventListener("widthChanged",s),t.removeEventListener("firstRightPinnedChanged",r),t.removeEventListener("lastLeftPinnedChanged",o),t.removeEventListener("colDefChanged",a)})})}onDomLayoutChanged(){let e=this.gos.isDomLayout("print"),t=e||this.gos.get("embedFullWidthRows"),n=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,n&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;let e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){let t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsForColumn(e){let t=[];return this.getAllRowCtrls().forEach(n=>{let i=n.getCellElement(e);i&&t.push(i)}),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowNodes()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowNodes())}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,t){let n=Object.fromEntries(t.map(s=>[s.id,s])),i=Object.fromEntries(e.map(s=>[s.getRowNode().id,s]));for(let s=0;s<t.length;s++){let r=t[s],o=e[s];o&&n[o.getRowNode().id]===void 0&&(o.destroyFirstPass(),o.destroySecondPass()),r.id in i?(e[s]=i[r.id],delete i[r.id]):e[s]=new pl(r,this.beans,!1,!1,this.printLayout)}e.length=t.length}onPinnedRowDataChanged(){let e={recycleRows:!0};this.redrawAfterModelUpdate(e)}redrawRow(e,t=!1){if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else if(this.cachedRowCtrls?.has(e)){this.cachedRowCtrls.removeRow(e);return}else{let n=i=>{let s=i[e.rowIndex];s&&s.getRowNode()===e&&(s.destroyFirstPass(),s.destroySecondPass(),i[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":n(this.topRowCtrls);break;case"bottom":n(this.bottomRowCtrls);break;default:n(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(e!=null){e?.forEach(n=>this.redrawRow(n,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){let t=e?.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(t==null)return null;let n=this.gos.getActiveDomElement(),i=this.gos.getDomData(n,fl.DOM_DATA_KEY_CELL_CTRL),s=this.gos.getDomData(n,pl.DOM_DATA_KEY_ROW_CTRL);return i||s?t:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();let t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);let n=!e.domLayoutChanged&&!!e.recycleRows,i=e.animate&&this.gos.isAnimateRows(),s=n?this.getRowsToRecycle():null;if(n||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature){this.stickyRowFeature.checkStickyRows();let r=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();r&&this.updateContainerHeights(r)}this.recycleRows(s,i),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){let t=e.newData||e.newPage,n=this.gos.get("suppressScrollOnNewData");t&&!n&&(this.gridBodyCtrl.getScrollFeature().scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(e=0){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let t=this.pageBoundsService.getCurrentPageHeight();t===0&&(t=1),this.rowContainerHeightService.setModelHeight(t+e)}getLockOnRefresh(){if(this.refreshInProgress){let e=this.frameworkOverrides.getLockOnRefreshError?.()??"";throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace."+e)}this.refreshInProgress=!0,this.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&setTimeout(()=>{this.focusService.setRestoreFocusedCell(e),this.onCellFocusChanged(this.gos.addGridCommonParams({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))})}stopEditing(e=!1){this.getAllRowCtrls().forEach(t=>{t.stopEditing(e)})}getAllCellCtrls(){let e=[],t=this.getAllRowCtrls(),n=t.length;for(let i=0;i<n;i++){let s=t[i].getAllCellCtrls(),r=s.length;for(let o=0;o<r;o++)e.push(s[o])}return e}getAllRowCtrls(){let e=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],t=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],n=[...this.topRowCtrls,...this.bottomRowCtrls,...e,...t];for(let i in this.rowCtrlsByRowIndex)n.push(this.rowCtrlsByRowIndex[i]);return n}addRenderedRowListener(e,t,n){let i=this.rowCtrlsByRowIndex[t];i&&i.addEventListener(e,n)}flashCells(e={}){this.getCellCtrls(e.rowNodes,e.columns).forEach(t=>t.flashCell(e))}refreshCells(e={}){let t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};for(let n of this.getCellCtrls(e.rowNodes,e.columns))n.refreshOrDestroyCell(t);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=null;this.stickyRowFeature&&JD()&&(t=this.getCellToRestoreFocusToAfterRefresh()||null);for(let n of this.getRowCtrls(e)){if(!n.isFullWidth())continue;n.refreshFullWidth()||this.redrawRow(n.getRowNode(),!0)}this.dispatchDisplayedRowsChanged(!1),t&&this.restoreFocusedCell(t)}getCellRendererInstances(e){let t=this.getCellCtrls(e.rowNodes,e.columns).map(s=>s.getCellRenderer()).filter(s=>s!=null);if(e.columns?.length)return t;let n=[],i=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(s=>{if(i&&!this.isRowInMap(s.getRowNode(),i)||!s.isFullWidth())return;let r=s.getFullWidthCellRenderers();for(let o=0;o<r.length;o++){let a=r[o];a!=null&&n.push(a)}}),[...n,...t]}getCellEditorInstances(e){let t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(n=>{let i=n.getCellEditor();i&&t.push(i)}),t}getEditingCells(){let e=[];return this.getAllCellCtrls().forEach(t=>{if(t.isEditing()){let n=t.getCellPosition();e.push(n)}}),e}mapRowNodes(e){if(!e)return;let t={top:{},bottom:{},normal:{}};return e.forEach(n=>{let i=n.id;switch(n.rowPinned){case"top":t.top[i]=n;break;case"bottom":t.bottom[i]=n;break;default:t.normal[i]=n;break}}),t}isRowInMap(e,t){let n=e.id;switch(e.rowPinned){case"top":return t.top[n]!=null;case"bottom":return t.bottom[n]!=null;default:return t.normal[n]!=null}}getRowCtrls(e){let t=this.mapRowNodes(e),n=this.getAllRowCtrls();return!e||!t?n:n.filter(i=>{let s=i.getRowNode();return this.isRowInMap(s,t)})}getCellCtrls(e,t){let n;j(t)&&(n={},t.forEach(s=>{let r=this.columnModel.getCol(s);j(r)&&(n[r.getId()]=!0)}));let i=[];return this.getRowCtrls(e).forEach(s=>{s.getAllCellCtrls().forEach(r=>{let o=r.getColumn().getId();n&&!n[o]||i.push(r)})}),i}destroy(){this.removeAllRowComps(),super.destroy()}removeAllRowComps(){let e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){let e=[];ji(this.rowCtrlsByRowIndex,(n,i)=>{i.getRowNode().id==null&&e.push(n)}),this.removeRowCtrls(e);let t={};return ji(this.rowCtrlsByRowIndex,(n,i)=>{let s=i.getRowNode();t[s.id]=i}),this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(n=>{let i=this.rowCtrlsByRowIndex[n];i&&(i.destroyFirstPass(t),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[n]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){let{afterScroll:t}=e,n;this.stickyRowFeature&&JD()&&(n=this.getCellToRestoreFocusToAfterRefresh()||void 0);let i=this.firstRenderedRow,s=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let r=!1;if(this.stickyRowFeature){r=this.stickyRowFeature.checkStickyRows();let a=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();a&&this.updateContainerHeights(a)}let o=this.firstRenderedRow!==i||this.lastRenderedRow!==s;if(!(t&&!r&&!o)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!r),n!=null)){let a=this.getCellToRestoreFocusToAfterRefresh();n!=null&&a==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(n))}}removeRowCompsNotToDraw(e,t){let n={};e.forEach(r=>n[r]=!0);let s=Object.keys(this.rowCtrlsByRowIndex).filter(r=>!n[r]);this.removeRowCtrls(s,t)}calculateIndexesToDraw(e){let t=Lee(this.firstRenderedRow,this.lastRenderedRow),n=(s,r)=>{let o=r.getRowNode().rowIndex;o!=null&&(o<this.firstRenderedRow||o>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(r)&&t.push(o)};ji(this.rowCtrlsByRowIndex,n),ji(e,n),t.sort((s,r)=>s-r);let i=[];for(let s=0;s<t.length;s++){let r=t[s],o=this.rowModel.getRow(r);o&&!o.sticky&&i.push(r)}return i}recycleRows(e,t=!1,n=!1){let i=this.calculateIndexesToDraw(e);(this.printLayout||n)&&(t=!1),this.removeRowCompsNotToDraw(i,!t);let s=[];i.forEach(r=>{let o=this.createOrUpdateRowCtrl(r,e,t,n);j(o)&&s.push(o)}),e&&(n&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){let t={type:"displayedRowsChanged",afterScroll:e};this.eventService.dispatchEvent(t)}onDisplayedColumnsChanged(){let e=this.visibleColsService.isPinningLeft(),t=this.visibleColsService.isPinningRight();(this.pinningLeft!==e||t!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){let e=[];this.getFullWidthRowCtrls().forEach(t=>{let n=t.getRowNode().rowIndex;e.push(n.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){let t=this.mapRowNodes(e);return this.getAllRowCtrls().filter(n=>{if(!n.isFullWidth())return!1;let i=n.getRowNode();return!(t!=null&&!this.isRowInMap(i,t))})}createOrUpdateRowCtrl(e,t,n,i){let s,r=this.rowCtrlsByRowIndex[e];if(r||(s=this.rowModel.getRow(e),j(s)&&j(t)&&t[s.id]&&s.alreadyRendered&&(r=t[s.id],t[s.id]=null)),!r)if(s||(s=this.rowModel.getRow(e)),j(s))r=this.createRowCon(s,n,i);else return;return s&&(s.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=r,r}destroyRowCtrls(e,t){let n=[];ji(e,(i,s)=>{if(s){if(this.cachedRowCtrls&&s.isCacheable()){this.cachedRowCtrls.addRow(s);return}s.destroyFirstPass(!t),t?(this.zombieRowCtrls[s.getInstanceId()]=s,n.push(()=>{s.destroySecondPass(),delete this.zombieRowCtrls[s.getInstanceId()]})):s.destroySecondPass()}}),t&&(n.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),EX(n))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){let e=this.getRowBuffer(),t=this.gos.getRowHeightAsNumber();return e*t}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let e,t;if(!this.rowModel.isRowsToRender())e=0,t=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.pageBoundsService.getFirstRow(),t=this.pageBoundsService.getLastRow();else{let a=this.getRowBufferInPixels(),l=this.ctrlsService.getGridBodyCtrl(),c=this.gos.get("suppressRowVirtualisation"),u=!1,h,f;do{let E=this.pageBoundsService.getPixelOffset(),{pageFirstPixel:I,pageLastPixel:T}=this.pageBoundsService.getCurrentPagePixelRange(),x=this.rowContainerHeightService.getDivStretchOffset(),z=l.getScrollFeature().getVScrollPosition(),V=z.top,b=z.bottom;c?(h=I+x,f=T+x):(h=Math.max(V+E-a,I)+x,f=Math.min(b+E+a,T)+x),this.firstVisibleVPixel=Math.max(V+E,I)+x,this.lastVisibleVPixel=Math.min(b+E,T)+x,u=this.ensureAllRowsInRangeHaveHeightsCalculated(h,f)}while(u);let g=this.rowModel.getRowIndexAtPixel(h),v=this.rowModel.getRowIndexAtPixel(f),y=this.pageBoundsService.getFirstRow(),C=this.pageBoundsService.getLastRow();g<y&&(g=y),v>C&&(v=C),e=g,t=v}let n=this.gos.isDomLayout("normal"),i=this.gos.get("suppressMaxRenderedRowRestriction"),s=Math.max(this.getRowBuffer(),500);n&&!i&&t-e>s&&(t=e+s);let r=e!==this.firstRenderedRow,o=t!==this.lastRenderedRow;if(r||o){this.firstRenderedRow=e,this.lastRenderedRow=t;let a={type:"viewportChanged",firstRow:e,lastRow:t};this.eventService.dispatchEvent(a)}}dispatchFirstDataRenderedEvent(){if(this.dataFirstRenderedFired)return;this.dataFirstRenderedFired=!0;let e={type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent(e)})}ensureAllRowsInRangeHaveHeightsCalculated(e,t){let n=this.pinnedRowModel?.ensureRowHeightsValid(),i=this.stickyRowFeature?.ensureRowHeightsValid(),s=this.rowModel.ensureRowHeightsValid(e,t,this.pageBoundsService.getFirstRow(),this.pageBoundsService.getLastRow());return(s||i)&&this.eventService.dispatchEvent({type:"recalculateRowBounds"}),i||s||n?(this.updateContainerHeights(),!0):!1}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){let i=e.getRowNode(),s=this.focusService.isRowNodeFocused(i),r=e.isEditing(),o=i.detail;return s||r||o?!!this.isRowPresent(i):!1}isRowPresent(e){return this.rowModel.isRowPresent(e)?this.paginationService?this.paginationService.isRowPresent(e):!0:!1}createRowCon(e,t,n){let i=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(i)return i;let s=this.gos.get("suppressAnimationFrame"),r=n&&!s&&!this.printLayout;return new pl(e,this.beans,t,r,this.printLayout)}getRenderedNodes(){let e=this.rowCtrlsByRowIndex;return Object.values(e).map(t=>t.getRowNode())}getRowByPosition(e){let t,{rowIndex:n}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[n];break;case"bottom":t=this.bottomRowCtrls[n];break;default:t=this.rowCtrlsByRowIndex[n],t||(t=this.getStickyTopRowCtrls().find(i=>i.getRowNode().rowIndex===n)||null,t||(t=this.getStickyBottomRowCtrls().find(i=>i.getRowNode().rowIndex===n)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;let i=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!i}},Jie=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){let t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e==null||e.id==null)return null;let t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.getRowNode()!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){let t=e.id,n=this.entriesMap[t];delete this.entriesMap[t],Qn(this.entriesList,n)}removeFromCache(e){let t=e.getRowNode().id;delete this.entriesMap[t],Qn(this.entriesList,e)}getEntries(){return this.entriesList}},Xie=class extends k{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0}wireBeans(e){this.beans=e}postConstruct(){this.setPinnedTopRowData(),this.setPinnedBottomRowData(),this.addManagedPropertyListener("pinnedTopRowData",()=>this.setPinnedTopRowData()),this.addManagedPropertyListener("pinnedBottomRowData",()=>this.setPinnedBottomRowData()),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(e){let t=e==="top"?this.pinnedTopRows:this.pinnedBottomRows;return dn(t)}isRowsToRender(e){return!this.isEmpty(e)}getRowAtPixel(e,t){let n=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(dn(n))return 0;for(let i=0;i<n.length;i++){let s=n[i];if(s.rowTop+s.rowHeight-1>=e)return i}return n.length-1}onGridStylesChanges(e){if(e.rowHeightChanged){let t=n=>{n.setRowHeight(n.rowHeight,!0)};this.pinnedBottomRows.forEach(t),this.pinnedTopRows.forEach(t)}}ensureRowHeightsValid(){let e=!1,t=0,n=s=>{if(s.rowHeightEstimated){let r=this.gos.getRowHeightForNode(s);s.setRowTop(t),s.setRowHeight(r.height),t+=r.height,e=!0}};this.pinnedBottomRows?.forEach(n),t=0,this.pinnedTopRows?.forEach(n);let i={type:"pinnedHeightChanged"};return this.eventService.dispatchEvent(i),e}setPinnedTopRowData(){let e=this.gos.get("pinnedTopRowData");this.pinnedTopRows=this.createNodesFromData(e,!0);let t={type:"pinnedRowDataChanged"};this.eventService.dispatchEvent(t)}setPinnedBottomRowData(){let e=this.gos.get("pinnedBottomRowData");this.pinnedBottomRows=this.createNodesFromData(e,!1);let t={type:"pinnedRowDataChanged"};this.eventService.dispatchEvent(t)}createNodesFromData(e,t){let n=[];if(e){let i=this.gos.getRowIdCallback(),s=t?Gr.ID_PREFIX_TOP_PINNED:Gr.ID_PREFIX_BOTTOM_PINNED,r=0,o=t?"top":"bottom";e.forEach((a,l)=>{let c=new Gr(this.beans);c.data=a,c.id=i?.({data:a,level:0,rowPinned:o})??s+this.nextId++,c.rowPinned=o,c.setRowTop(r),c.setRowHeight(this.gos.getRowHeightForNode(c).height),c.setRowIndex(l),r+=c.rowHeight,n.push(c)})}return n}getPinnedTopRowNodes(){return this.pinnedTopRows}getPinnedBottomRowNodes(){return this.pinnedBottomRows}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedTopRowCount(){return this.pinnedTopRows?this.pinnedTopRows.length:0}getPinnedBottomRowCount(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0}getPinnedTopRow(e){return this.pinnedTopRows[e]}getPinnedBottomRow(e){return this.pinnedBottomRows[e]}forEachPinnedTopRow(e){dn(this.pinnedTopRows)||this.pinnedTopRows.forEach(e)}forEachPinnedBottomRow(e){dn(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(e)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getTotalHeight(e){if(!e||e.length===0)return 0;let t=xe(e);return t.rowTop+t.rowHeight}};var Zie=class extends k{constructor(e){super(),this.state="needsLoading",this.version=0,this.id=e}getId(){return this.id}load(){this.state="loading",this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed",this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,t){this.successCommon(e,t)}pageLoaded(e,t,n){this.successCommon(e,{rowData:t,rowCount:n})}isRequestMostRecentAndLive(e){let t=e===this.version,n=this.isAlive();return t&&n}successCommon(e,t){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}dispatchLoadCompleted(e=!0){let t={type:"loadComplete",success:e,block:this};this.dispatchLocalEvent(t)}},ese=class extends k{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();let e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=Yn(this.performCheckBlocksToLoad.bind(this),e))}getMaxConcurrentDatasourceRequests(){let e=this.gos.get("maxConcurrentDatasourceRequests");if(e==null)return 2;if(!(e<=0))return e}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){Qn(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchLocalEvent({type:"blockLoaded"}),this.activeBlockLoadsCount==0&&this.dispatchLocalEvent({type:"blockLoaderFinished"})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.gos.get("debug")&&$i("RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}let e=this.getAvailableLoadingCount(),t=this.blocks.filter(n=>n.getState()==="needsLoading").slice(0,e);this.registerLoads(t.length),t.forEach(n=>n.load()),this.printCacheStatus()}getBlockState(){if(this.gos.isRowModelType("serverSide"))return this.rowModel.getBlockStates();let e={};return this.blocks.forEach(t=>{let{id:n,state:i}=t.getBlockStateJson();e[n]=i}),e}printCacheStatus(){this.gos.get("debug")&&$i(`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}},tse={version:ge,moduleName:"@ag-grid-community/row-node-block",beans:[ese]},nse=class{constructor(){this.root=null,this.end=null,this.cachedRange=[]}init(e){this.rowModel=e}reset(){this.root=null,this.end=null,this.cachedRange.length=0}setRoot(e){this.root=e,this.end=null,this.cachedRange.length=0}setEndRange(e){this.end=e,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){let e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(e,t)}return this.cachedRange}isInRange(e){return this.root===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(){return this.root&&this.root?.key===null&&(this.root=this.rowModel.getRowNode(this.root.id)??null),this.root}getEnd(){return this.end&&this.end?.key===null&&(this.end=this.rowModel.getRowNode(this.end.id)??null),this.end}truncate(e){let t=this.getRange();if(t.length===0)return{keep:[],discard:[]};let n=t[0].id===this.root.id,i=t.findIndex(s=>s.id===e.id);if(i>-1){let s=t.slice(0,i),r=t.slice(i+1);return this.setEndRange(e),n?{keep:s,discard:r}:{keep:r,discard:s}}else return{keep:t,discard:[]}}extend(e,t=!1){let n=this.getRoot();if(n==null){let s=this.getRange().slice();return t&&e.depthFirstSearch(r=>!r.group&&s.push(r)),s.push(e),this.setRoot(e),{keep:s,discard:[]}}if(this.rowModel.getNodesInRangeForSelection(n,e).find(s=>s.id===this.end?.id))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{let s=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:s}}}},ise=class extends k{constructor(){super(...arguments),this.beanName="stylingService"}wireBeans(e){this.expressionService=e.expressionService}processAllCellClasses(e,t,n,i){this.processClassRules(void 0,e.cellClassRules,t,n,i),this.processStaticCellClasses(e,t,n)}processClassRules(e,t,n,i,s){if(t==null&&e==null)return;let r={},o={},a=(l,c)=>{l.split(" ").forEach(u=>{u.trim()!=""&&c(u)})};if(t){let l=Object.keys(t);for(let c=0;c<l.length;c++){let u=l[c],h=t[u],f;typeof h=="string"?f=this.expressionService.evaluate(h,n):typeof h=="function"&&(f=h(n)),a(u,g=>{f?r[g]=!0:o[g]=!0})}}e&&s&&Object.keys(e).forEach(l=>a(l,c=>{r[c]||(o[c]=!0)})),s&&Object.keys(o).forEach(s),Object.keys(r).forEach(i)}getStaticCellClasses(e,t){let{cellClass:n}=e;if(!n)return[];let i;return typeof n=="function"?i=n(t):i=n,typeof i=="string"&&(i=[i]),i||[]}processStaticCellClasses(e,t,n){this.getStaticCellClasses(e,t).forEach(s=>{n(s)})}};var sse=class extends k{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;let{comp:t,eTopGuard:n,eBottomGuard:i,focusTrapActive:s,forceFocusOutWhenTabGuardsAreEmpty:r,isFocusableContainer:o,focusInnerElement:a,onFocusIn:l,onFocusOut:c,shouldStopEventPropagation:u,onTabKeyDown:h,handleKeyDown:f,eFocusableElement:g}=e;this.comp=t,this.eTopGuard=n,this.eBottomGuard=i,this.providedFocusInnerElement=a,this.eFocusableElement=g,this.focusTrapActive=!!s,this.forceFocusOutWhenTabGuardsAreEmpty=!!r,this.isFocusableContainer=!!o,this.providedFocusIn=l,this.providedFocusOut=c,this.providedShouldStopEventPropagation=u,this.providedOnTabKeyDown=h,this.providedHandleKeyDown=f}wireBeans(e){this.focusService=e.focusService}postConstruct(){this.createManagedBean(new vl(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)}))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;let e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;let t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}findNextElementOutsideAndFocus(e){let t=this.gos.getDocument(),n=this.focusService.findFocusableElements(t.body,null,!0),i=n.indexOf(e?this.eTopGuard:this.eBottomGuard);if(i===-1)return;let s,r;e?(s=0,r=i):(s=i+1,r=n.length);let o=n.slice(s,r),a=this.gos.get("tabIndex");o.sort((l,c)=>{let u=parseInt(l.getAttribute("tabindex")||"0"),h=parseInt(c.getAttribute("tabindex")||"0");return h===a?1:u===a?-1:u===0?1:h===0?-1:u-h}),o[e?o.length-1:0].focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;let t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();let n=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),n&&(n.focus(),e.preventDefault())}focusInnerElement(e=!1){let t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;let t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},rse=class extends k{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();let{eTopGuard:t,eBottomGuard:n,eFocusableElement:i}=this,s=[t,n],r={setTabIndex:y=>{s.forEach(C=>y!=null?C.setAttribute("tabindex",y):C.removeAttribute("tabindex"))}};this.addTabGuards(t,n);let{focusTrapActive:o=!1,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:h,shouldStopEventPropagation:f,forceFocusOutWhenTabGuardsAreEmpty:g,isFocusableContainer:v}=e;this.tabGuardCtrl=this.createManagedBean(new sse({comp:r,focusTrapActive:o,eTopGuard:t,eBottomGuard:n,eFocusableElement:i,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:h,shouldStopEventPropagation:f,forceFocusOutWhenTabGuardsAreEmpty:g,isFocusableContainer:v}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){let t=this.gos.getDocument().createElement("div"),n=e==="top"?"ag-tab-guard-top":"ag-tab-guard-bottom";return t.classList.add("ag-tab-guard",n),oi(t,"presentation"),t}addTabGuards(e,t){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){let e=[this.eTopGuard,this.eBottomGuard];An(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,n){vR(t)||(t=t.getGui());let{eBottomGuard:i}=this;i?i.insertAdjacentElement("beforebegin",t):e(t,n)}},RG=class extends Ve{initialiseTabGuard(e){this.tabGuardFeature=this.createManagedBean(new rse(this)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(e=!1){this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},ose=0,ase=200,lse=class extends k{constructor(){super(...arguments),this.beanName="popupService",this.popupList=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.resizeObserverService=e.resizeObserverService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){let e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){let{eventSource:t,ePopup:n}=e,i=this.getPopupIndex(n);if(i!==-1){let g=this.popupList[i];g.alignedToElement=t}let s=t.getBoundingClientRect(),r=this.getParentRect(),o=this.keepXYWithinBounds(n,s.top-r.top,0),a=n.clientWidth>0?n.clientWidth:200;n.style.minWidth=`${a}px`;let c=r.right-r.left-a,u;this.gos.get("enableRtl")?(u=f(),u<0&&(u=h(),this.setAlignedStyles(n,"left")),u>c&&(u=0,this.setAlignedStyles(n,"right"))):(u=h(),u>c&&(u=f(),this.setAlignedStyles(n,"right")),u<0&&(u=0,this.setAlignedStyles(n,"left"))),n.style.left=`${u}px`,n.style.top=`${o}px`;function h(){return s.right-r.left-2}function f(){return s.left-r.left-a}}positionPopupUnderMouseEvent(e){let{ePopup:t,nudgeX:n,nudgeY:i,skipObserver:s}=e;this.positionPopup({ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:!0,skipObserver:s,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){let t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){let{ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:s,eventSource:r,alignSide:o="left",position:a="over",column:l,rowNode:c,type:u}=e,h=r.getBoundingClientRect(),f=this.getParentRect(),g=this.getPopupIndex(t);if(g!==-1){let y=this.popupList[g];y.alignedToElement=r}let v=()=>{let y=h.left-f.left;o==="right"&&(y-=t.offsetWidth-h.width);let C;return a==="over"?(C=h.top-f.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,h,f,e.nudgeY||0)==="under"?C=h.top-f.top+h.height:C=h.top-t.offsetHeight-(i||0)*2-f.top),{x:y,y:C}};this.positionPopup({ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:s,updatePosition:v,postProcessCallback:()=>this.callPostProcessPopup(u,t,r,null,l,c)})}shouldRenderUnderOrAbove(e,t,n,i){let s=n.bottom-t.bottom,r=t.top-n.top,o=e.offsetHeight+i;return s>o?"under":r>o||r>s?"above":"under"}setAlignedStyles(e,t){let n=this.getPopupIndex(e);if(n===-1)return;let i=this.popupList[n],{alignedToElement:s}=i;!s||(["right","left","over","above","under"].forEach(o=>{s.classList.remove(`ag-has-popup-positioned-${o}`),e.classList.remove(`ag-popup-positioned-${o}`)}),!t)||(s.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}callPostProcessPopup(e,t,n,i,s,r){let o=this.gos.getCallback("postProcessPopup");o&&o({column:s,rowNode:r,ePopup:t,type:e,eventSource:n,mouseEvent:i})}positionPopup(e){let{ePopup:t,keepWithinBounds:n,nudgeX:i,nudgeY:s,skipObserver:r,updatePosition:o}=e,a={width:0,height:0},l=(c=!1)=>{let{x:u,y:h}=o();c&&t.clientWidth===a.width&&t.clientHeight===a.height||(a.width=t.clientWidth,a.height=t.clientHeight,i&&(u+=i),s&&(h+=s),n&&(u=this.keepXYWithinBounds(t,u,1),h=this.keepXYWithinBounds(t,h,0)),t.style.left=`${u}px`,t.style.top=`${h}px`,e.postProcessCallback&&e.postProcessCallback())};if(l(),!r){let c=this.resizeObserverService.observeResize(t,()=>l(!0));setTimeout(()=>c(),ase)}}getActivePopups(){return this.popupList.map(e=>e.element)}getPopupList(){return this.popupList}getParentRect(){let e=this.gos.getDocument(),t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),SB(t)}keepXYWithinBounds(e,t,n){let i=n===0,s=i?"clientHeight":"clientWidth",r=i?"top":"left",o=i?"height":"width",a=i?"scrollTop":"scrollLeft",l=this.gos.getDocument(),c=l.documentElement,u=this.getPopupParent(),h=e.getBoundingClientRect(),f=u.getBoundingClientRect(),g=l.documentElement.getBoundingClientRect(),v=u===l.body,y=Math.ceil(h[o]),E=v?(i?wB:CC)(c)+c[a]:u[s];v&&(E-=Math.abs(g[r]-f[r]));let I=E-y;return Math.min(Math.max(t,0),Math.abs(I))}addPopup(e){let t=this.gos.getDocument(),{eChild:n,ariaLabel:i,alwaysOnTop:s,positionCallback:r,anchorToElement:o}=e;if(!t)return G("could not find the document, document is empty"),{hideFunc:()=>{}};let a=this.getPopupIndex(n);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(n);let l=this.createPopupWrapper(n,i,!!s),c=this.addEventListenersToPopup(se(B({},e),{wrapperEl:l}));return r&&r(),this.addPopupToPopupList(n,l,c,o),{hideFunc:c}}initialisePopupPosition(e){let n=this.getPopupParent().getBoundingClientRect();j(e.style.top)||(e.style.top=`${n.top*-1}px`),j(e.style.left)||(e.style.left=`${n.left*-1}px`)}createPopupWrapper(e,t,n){let i=this.getPopupParent(),s=document.createElement("div");return this.environment.applyThemeClasses(s),s.classList.add("ag-popup"),e.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||oi(e,"dialog"),Eu(e,t),s.appendChild(e),i.appendChild(s),n?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),s}handleThemeChange(e){if(e.themeChanged)for(let t of this.popupList)this.environment.applyThemeClasses(t.wrapper)}addEventListenersToPopup(e){let t=this.gos.getDocument(),n=this.getPopupParent(),{wrapperEl:i,eChild:s,closedCallback:r,afterGuiAttached:o,closeOnEsc:a,modal:l}=e,c=!1,u=v=>{if(!i.contains(this.gos.getActiveDomElement()))return;v.key===N.ESCAPE&&!Uo(v)&&g({keyboardEvent:v})},h=v=>g({mouseEvent:v}),f=v=>g({touchEvent:v}),g=(v={})=>{let{mouseEvent:y,touchEvent:C,keyboardEvent:E,forceHide:I}=v;!I&&(this.isEventFromCurrentPopup({mouseEvent:y,touchEvent:C},s)||c)||(c=!0,n.removeChild(i),t.removeEventListener("keydown",u),t.removeEventListener("mousedown",h),t.removeEventListener("touchstart",f),t.removeEventListener("contextmenu",h),this.eventService.removeEventListener("dragStarted",h),r&&r(y||C||E),this.removePopupFromPopupList(s))};return o&&o({hidePopup:g}),window.setTimeout(()=>{a&&t.addEventListener("keydown",u),l&&(t.addEventListener("mousedown",h),this.eventService.addEventListener("dragStarted",h),t.addEventListener("touchstart",f),t.addEventListener("contextmenu",h))},0),g}addPopupToPopupList(e,t,n,i){this.popupList.push({element:e,wrapper:t,hideFunc:n,instanceId:ose++,isAnchored:!!i}),i&&this.setPopupPositionRelatedToElement(e,i)}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){let n=this.getPopupIndex(e);if(n===-1)return;let i=this.popupList[n];if(i.stopAnchoringPromise&&i.stopAnchoringPromise.then(r=>r&&r()),i.stopAnchoringPromise=void 0,i.isAnchored=!1,!t)return;let s=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:i.hideFunc});return i.stopAnchoringPromise=s,i.isAnchored=!0,s}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){let t=this.getPopupParent(),n=t.getBoundingClientRect(),{element:i,ePopup:s}=e,r=i.getBoundingClientRect(),o=n.top-r.top,a=n.left-r.left,l=o,c=a,u=s.style.top,h=parseInt(u.substring(0,u.length-1),10),f=s.style.left,g=parseInt(f.substring(0,f.length-1),10),v=this.getFrameworkOverrides();return new Ti(y=>{v.wrapIncoming(()=>{v.setInterval(()=>{let C=t.getBoundingClientRect(),E=i.getBoundingClientRect();if(E.top==0&&E.left==0&&E.height==0&&E.width==0){e.hidePopup();return}let T=C.top-E.top;if(T!=l){let z=this.keepXYWithinBounds(s,h+o-T,0);s.style.top=`${z}px`}l=T;let x=C.left-E.left;if(x!=c){let z=this.keepXYWithinBounds(s,g+a-x,1);s.style.left=`${z}px`}c=x},200).then(C=>{y(()=>{C!=null&&window.clearInterval(C)})})},"popupPositioning")})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){let{mouseEvent:n,touchEvent:i}=e,s=n||i;if(!s)return!1;let r=this.getPopupIndex(t);if(r===-1)return!1;for(let o=r;o<this.popupList.length;o++){let a=this.popupList[o];if(mX(a.element,s))return!0}return this.isElementWithinCustomPopup(s.target)}isElementWithinCustomPopup(e){let t=this.gos.getDocument();for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){let n=this.getWrapper(e);n&&(n.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(n))}bringPopupToFront(e){let t=this.getPopupParent(),n=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),i=n.length,s=Array.prototype.slice.call(t.querySelectorAll(".ag-popup.ag-always-on-top")),r=s.length,o=this.getWrapper(e);if(!o||i<=1||!t.contains(e))return!1;let a=n.indexOf(o),l=o.querySelectorAll("div"),c=[];l.forEach(h=>{h.scrollTop!==0&&c.push([h,h.scrollTop])});let u=!1;for(r?o.classList.contains("ag-always-on-top")?a!==i-1&&(xe(s).insertAdjacentElement("afterend",o),u=!0):a!==i-r-1&&(s[0].insertAdjacentElement("beforebegin",o),u=!0):a!==i-1&&(xe(n).insertAdjacentElement("afterend",o),u=!0);c.length;){let h=c.pop();h[0].scrollTop=h[1]}return u}},cse=["touchstart","touchend","touchmove","touchcancel"],NR=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t()}setInterval(e,t){return new Ti(n=>{n(window.setInterval(e,t))})}addEventListener(e,t,n,i){let s=ul(cse,t);e.addEventListener(t,n,{capture:!!i,passive:s})}get shouldWrapOutgoing(){return!1}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`https://www.ag-grid.com/${this.frameworkName==="solid"?"react":this.frameworkName}-data-grid${e?`/${e}`:""}`}},use=class extends k{constructor(){super(...arguments),this.beanName="cellNavigationService"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.pinnedRowModel=e.pinnedRowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}getNextCellToFocus(e,t,n=!1){return n?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){let n=e===N.UP,i=e===N.DOWN,s=e===N.LEFT,r,o;if(n||i)o=n?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow(),r=t.column;else{let a=this.visibleColsService.getAllCols(),l=this.gos.get("enableRtl");o=t.rowIndex,r=s!==l?a[0]:xe(a)}return{rowIndex:o,rowPinned:null,column:r}}getNextCellToFocusWithoutCtrlPressed(e,t){let n=t,i=!1;for(;!i;){switch(e){case N.UP:n=this.getCellAbove(n);break;case N.DOWN:n=this.getCellBelow(n);break;case N.RIGHT:this.gos.get("enableRtl")?n=this.getCellToLeft(n):n=this.getCellToRight(n);break;case N.LEFT:this.gos.get("enableRtl")?n=this.getCellToRight(n):n=this.getCellToLeft(n);break;default:n=null,G("unknown key for navigation ",e);break}n?i=this.isCellGoodToFocusOn(n):i=!0}return n}isCellGoodToFocusOn(e){let t=e.column,n;switch(e.rowPinned){case"top":n=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":n=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:n=this.rowModel.getRow(e.rowIndex);break}return n?!t.isSuppressNavigable(n):!1}getCellToLeft(e){if(!e)return null;let t=this.visibleColsService.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;let t=this.visibleColsService.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){let t=e.rowIndex,n=e.rowPinned;if(this.isLastRowInContainer(e))switch(n){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.pageBoundsService.getFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}let i=this.rowModel.getRow(e.rowIndex),s=this.getNextStickyPosition(i);return s||{rowIndex:t+1,rowPinned:n}}getNextStickyPosition(e,t){if(!this.gos.isGroupRowsSticky()||!e||!e.sticky)return;let n=this.rowRenderer.getStickyTopRowCtrls().some(a=>a.getRowNode().rowIndex===e.rowIndex),i=[];n?i=[...this.rowRenderer.getStickyTopRowCtrls()].sort((a,l)=>a.getRowNode().rowIndex-l.getRowNode().rowIndex):i=[...this.rowRenderer.getStickyBottomRowCtrls()].sort((a,l)=>l.getRowNode().rowIndex-a.getRowNode().rowIndex);let s=t?-1:1,r=i.findIndex(a=>a.getRowNode().rowIndex===e.rowIndex),o=i[r+s];if(o)return{rowIndex:o.getRowNode().rowIndex,rowPinned:null}}getCellBelow(e){if(!e)return null;let t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){let t=e.rowPinned,n=e.rowIndex;return t==="top"?this.pinnedRowModel.getPinnedTopRowNodes().length-1<=n:t==="bottom"?this.pinnedRowModel.getPinnedBottomRowNodes().length-1<=n:this.pageBoundsService.getLastRow()<=n}getRowAbove(e){let t=e.rowIndex,n=e.rowPinned;if(n?t===0:t===this.pageBoundsService.getFirstRow())return n==="top"?null:n?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;let s=this.rowModel.getRow(e.rowIndex),r=this.getNextStickyPosition(s,!0);return r||{rowIndex:t-1,rowPinned:n}}getCellAbove(e){if(!e)return null;let t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.pageBoundsService.getLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowNodes().length-1,rowPinned:"top"}}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){let t=this.visibleColsService.getAllCols(),n=e.rowIndex,i=e.rowPinned,s=this.visibleColsService.getColAfter(e.column);if(!s){s=t[0];let r=this.getRowBelow(e);if(Ie(r)||!r.rowPinned&&!(this.paginationService?.isRowInPage(r)??!0))return null;n=r?r.rowIndex:null,i=r?r.rowPinned:null}return{rowIndex:n,column:s,rowPinned:i}}getNextTabbedCellBackwards(e){let t=this.visibleColsService.getAllCols(),n=e.rowIndex,i=e.rowPinned,s=this.visibleColsService.getColBefore(e.column);if(!s){s=xe(t);let r=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(Ie(r)||!r.rowPinned&&!(this.paginationService?.isRowInPage(r)??!0))return null;n=r?r.rowIndex:null,i=r?r.rowPinned:null}return{rowIndex:n,column:s,rowPinned:i}}};function dse(e,t){e.eventService.dispatchEvent(t)}var hse=class extends k{constructor(){super(...arguments),this.beanName="apiFunctionService",this.functions={dispatchEvent:dse},this.isDestroyed=!1}wireBeans(e){this.beans=e}postConstruct(){this.preDestroyLink=this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}callFunction(e,t){let n=this.functions[e];if(n)return n.apply(n,[this.beans,...t]);if(this.isDestroyed)return this.destroyedHandler(e);this.isFrameworkMethod(e)||this.beans.validationService?.warnMissingApiFunction(e)}addFunction(e,t){let{validationService:n}=this.beans;n&&(t=n.validateApiFunction(e,t)),this.functions[e]=t}destroy(){this.functions={},this.isDestroyed=!0,super.destroy()}destroyedHandler(e){if(e==="isDestroyed")return!0;e!=="destroy"&&G(`Grid API function ${e}() cannot be called as the grid has been destroyed.
Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${this.preDestroyLink}`)}isFrameworkMethod(e){return["preWireBeans","wireBeans","preConstruct","postConstruct"].includes(e)}};function fse(e){let t=e.getBean("apiFunctionService");return new Proxy(t,{get(n,i){if(i!=="then")return(...s)=>n.callFunction(i,s)}})}function pse(e){return{beanName:"gridApi",bean:fse(e)}}var gse=class extends k{constructor(){super(...arguments),this.beanName="columnDefFactory"}buildColumnDefs(e,t,n){let i=[],s={};return e.forEach(r=>{let o=this.createDefFromColumn(r,t,n),a=!0,l=o,c=r.getOriginalParent(),u=null;for(;c;){let h=null;if(c.isPadding()){c=c.getOriginalParent();continue}let f=s[c.getGroupId()];if(f){f.children.push(l),a=!1;break}if(h=this.createDefFromGroup(c),h&&(h.children=[l],s[h.groupId]=h,l=h,c=c.getOriginalParent()),c!=null&&u===c){a=!1;break}u=c}a&&i.push(l)}),i}createDefFromGroup(e){let t=qD(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,n){let i=qD(e.getColDef());return i.colId=e.getColId(),i.width=e.getActualWidth(),i.rowGroup=e.isRowGroupActive(),i.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,i.pivot=e.isPivotActive(),i.pivotIndex=e.isPivotActive()?n.indexOf(e):null,i.aggFunc=e.isValueActive()?e.getAggFunc():null,i.hide=e.isVisible()?void 0:!0,i.pinned=e.isPinned()?e.getPinned():null,i.sort=e.getSort()?e.getSort():null,i.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,i}},mse=class extends k{constructor(){super(...arguments),this.beanName="columnEventDispatcher"}visibleCols(){let e={type:"displayedColumnsChanged"};this.eventService.dispatchEvent(e)}gridColumns(){let e={type:"gridColumnsChanged"};this.eventService.dispatchEvent(e)}headerHeight(e){let t={type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(t)}groupOpened(e){let t={type:"columnGroupOpened",columnGroup:e.length===1?e[0]:void 0,columnGroups:e};this.eventService.dispatchEvent(t)}rowGroupChanged(e,t){let n={type:"columnRowGroupChanged",columns:e,column:e.length===1?e[0]:null,source:t};this.eventService.dispatchEvent(n)}genericColumnEvent(e,t,n){let i={type:e,columns:t,column:t.length===1?t[0]:null,source:n};this.eventService.dispatchEvent(i)}pivotModeChanged(){let e={type:"columnPivotModeChanged"};this.eventService.dispatchEvent(e)}virtualColumnsChanged(e){let t={type:"virtualColumnsChanged",afterScroll:e};this.eventService.dispatchEvent(t)}newColumnsLoaded(e){let t={type:"newColumnsLoaded",source:e};this.eventService.dispatchEvent(t)}everythingChanged(e){let t={type:"columnEverythingChanged",source:e};this.eventService.dispatchEvent(t)}columnMoved(e){let{movedColumns:t,source:n,toIndex:i,finished:s}=e,r={type:"columnMoved",columns:t,column:t&&t.length===1?t[0]:null,toIndex:i,finished:s,source:n};this.eventService.dispatchEvent(r)}columnPinned(e,t){if(!e.length)return;let n=e.length===1?e[0]:null,i=this.getCommonValue(e,r=>r.getPinned()),s={type:"columnPinned",pinned:i??null,columns:e,column:n,source:t};this.eventService.dispatchEvent(s)}columnVisible(e,t){if(!e.length)return;let n=e.length===1?e[0]:null,s={type:"columnVisible",visible:this.getCommonValue(e,r=>r.isVisible()),columns:e,column:n,source:t};this.eventService.dispatchEvent(s)}getCommonValue(e,t){if(!e||e.length==0)return;let n=t(e[0]);for(let i=1;i<e.length;i++)if(n!==t(e[i]))return;return n}columnChanged(e,t,n){let i={type:e,columns:t,column:t&&t.length==1?t[0]:null,source:n};this.eventService.dispatchEvent(i)}columnResized(e,t,n,i=null){if(e&&e.length){let s={type:"columnResized",columns:e,column:e.length===1?e[0]:null,flexColumns:i,finished:t,source:n};this.eventService.dispatchEvent(s)}}},vse=class extends k{constructor(){super(...arguments),this.beanName="columnGetStateService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService}getColumnState(){let e=this.columnModel.getColDefCols();if(Ie(e)||!this.columnModel.isAlive())return[];let n=this.columnModel.getAllCols().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(n),n}createStateItemFromColumn(e){let t=this.funcColsService.getRowGroupColumns(),n=this.funcColsService.getPivotColumns(),i=e.isRowGroupActive()?t.indexOf(e):null,s=e.isPivotActive()?n.indexOf(e):null,r=e.isValueActive()?e.getAggFunc():null,o=e.getSort()!=null?e.getSort():null,a=e.getSortIndex()!=null?e.getSortIndex():null,l=e.getFlex()!=null&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:o,sortIndex:a,aggFunc:r,rowGroup:e.isRowGroupActive(),rowGroupIndex:i,pivot:e.isPivotActive(),pivotIndex:s,flex:l}}orderColumnStateList(e){let t=this.columnModel.getCols(),n=new Map(t.map((i,s)=>[i.getColId(),s]));e.sort((i,s)=>{let r=n.has(i.colId)?n.get(i.colId):-1,o=n.has(s.colId)?n.get(s.colId):-1;return r-o})}},Cse=class extends k{constructor(){super(...arguments),this.beanName="columnGroupStateService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService}getColumnGroupState(){let e=[],t=this.columnModel.getColTree();return Hr(null,t,n=>{qn(n)&&e.push({groupId:n.getGroupId(),open:n.isExpanded()})}),e}resetColumnGroupState(e){let t=this.columnModel.getColDefColTree();if(!t)return;let n=[];Hr(null,t,i=>{if(qn(i)){let s=i.getColGroupDef(),r={groupId:i.getGroupId(),open:s?s.openByDefault:void 0};n.push(r)}}),this.setColumnGroupState(n,e)}setColumnGroupState(e,t){if(!this.columnModel.getColTree())return;this.columnAnimationService.start();let i=[];e.forEach(s=>{let r=s.groupId,o=s.open,a=this.columnModel.getProvidedColGroup(r);a&&a.isExpanded()!==o&&(a.setExpanded(o),i.push(a))}),this.visibleColsService.refresh(t,!0),i.length&&this.eventDispatcher.groupOpened(i),this.columnAnimationService.finish()}},yse=class extends k{constructor(){super(...arguments),this.beanName="columnViewportService",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,n=!1){let i=this.visibleColsService.isBodyWidthDirty();if(!(e===this.scrollWidth&&t===this.scrollPosition&&!i)){if(this.scrollWidth=e,this.scrollPosition=t,this.visibleColsService.setBodyWidthDirty(),this.gos.get("enableRtl")){let r=this.visibleColsService.getBodyContainerWidth();this.viewportLeft=r-this.scrollPosition-this.scrollWidth,this.viewportRight=r-this.scrollPosition}else this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition;this.columnModel.isReady()&&this.checkViewportColumns(n)}}getHeadersToRender(e,t){let n;switch(e){case"left":n=this.rowsOfHeadersToRenderLeft[t];break;case"right":n=this.rowsOfHeadersToRenderRight[t];break;default:n=this.rowsOfHeadersToRenderCenter[t];break}return n||[]}extractViewportColumns(){let e=this.visibleColsService.getCenterCols();this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;let t=e.getLeft()||0,n=t+e.getActualWidth(),i=this.viewportLeft-200,s=this.viewportRight+200,r=t<i&&n<i,o=t>s&&n>s;return!r&&!o}getViewportColumns(){let e=this.visibleColsService.getLeftCols(),t=this.visibleColsService.getRightCols();return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.columnModel.isColSpanActive())return this.colsWithinViewport;let t=s=>{let r=s.getLeft();return j(r)&&r>this.viewportLeft},n=this.isColumnVirtualisationSuppressed()?null:this.isColumnInRowViewport.bind(this),i=this.visibleColsService.getColsCenter();return this.visibleColsService.getColsForRow(e,i,n,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventDispatcher.virtualColumnsChanged(e)}calculateHeaderRows(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={};let e={},t=this.visibleColsService.getLeftCols(),n=this.visibleColsService.getRightCols();this.headerColsWithinViewport.concat(t).concat(n).forEach(r=>e[r.getId()]=!0);let s=(r,o,a)=>{let l=!1;for(let c=0;c<r.length;c++){let u=r[c],h=!1;if(zo(u))h=e[u.getId()]===!0;else{let g=u.getDisplayedChildren();g&&(h=s(g,o,a+1))}h&&(l=!0,o[a]||(o[a]=[]),o[a].push(u))}return l};s(this.visibleColsService.getTreeLeft(),this.rowsOfHeadersToRenderLeft,0),s(this.visibleColsService.getTreeRight(),this.rowsOfHeadersToRenderRight,0),s(this.visibleColsService.getTreeCenter(),this.rowsOfHeadersToRenderCenter,0)}extractViewport(){let e=i=>`${i.getId()}-${i.getPinned()||"normal"}`;this.extractViewportColumns();let t=this.getViewportColumns().map(e).join("#"),n=this.colsWithinViewportHash!==t;return n&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),n}},wse=class extends k{constructor(){super(...arguments),this.beanName="agComponentUtils"}wireBeans(e){this.componentMetadataProvider=e.componentMetadataProvider}adaptFunction(e,t){let n=this.componentMetadataProvider.retrieve(e);return n&&n.functionAdapter?n.functionAdapter(t):null}adaptCellRendererFunction(e){class t{refresh(){return!1}getGui(){return this.eGui}init(i){let s=e(i),r=typeof s;if(r==="string"||r==="number"||r==="boolean"){this.eGui=Du("<span>"+s+"</span>");return}if(s==null){this.eGui=Du("<span></span>");return}this.eGui=s}}return t}doesImplementIComponent(e){return e?e.prototype&&"getGui"in e.prototype:!1}},Sse=class extends k{constructor(){super(...arguments),this.beanName="componentMetadataProvider"}wireBeans(e){this.agComponentUtils=e.agComponentUtils}postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(e){return this.componentMetaData[e]}},_se=["rowPositionUtils","cellPositionUtils","headerPositionUtils","paginationAutoPageSizeService","apiFunctionService","gridApi","userComponentRegistry","agComponentUtils","componentMetadataProvider","resizeObserverService","userComponentFactory","rowContainerHeightService","horizontalResizeService","localeService","validationService","pinnedRowModel","dragService","visibleColsService","eventService","gos","popupService","selectionService","columnFilterService","quickFilterService","filterManager","columnModel","headerNavigationService","pageBoundsService","paginationService","pageBoundsListener","rowRenderer","expressionService","columnFactory","alignedGridsService","navigationService","valueCache","valueService","loggerFactory","autoWidthCalculator","filterMenuFactory","dragAndDropService","focusService","mouseEventService","environment","cellNavigationService","stylingService","scrollVisibleService","sortController","columnHoverService","columnAnimationService","selectableService","autoColService","changeDetectionService","animationFrameService","undoRedoService","columnDefFactory","rowCssClassCalculator","rowNodeBlockLoader","rowNodeSorter","ctrlsService","pinnedWidthService","rowNodeEventThrottle","ctrlsFactory","dataTypeService","syncService","overlayService","stateService","expansionService","apiEventService","ariaAnnouncementService","menuService","columnApplyStateService","columnEventDispatcher","columnMoveService","columnAutosizeService","columnGetStateService","columnGroupStateService","columnSizeService","funcColsService","columnNameService","columnViewportService","pivotResultColsService","showRowGroupColsService"],LV=Object.fromEntries(_se.map((e,t)=>[e,t]));function bse(e,t){let n=(e.beanName?LV[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,i=(t.beanName?LV[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return n-i}function Ese(e,t){return e?.beanName==="gridDestroyService"?-1:0}var Dse=class extends k{constructor(){super(...arguments),this.beanName="ctrlsFactory",this.registry={}}register(e){this.registry[e.name]=e.classImp}getInstance(e,...t){let n=this.registry[e];if(n!=null)return new n(...t)}},Rse=class extends k{constructor(){super(...arguments),this.beanName="ctrlsService",this.params={},this.ready=!1,this.readyCallbacks=[]}checkReady(){let e=this.params;this.ready=e.gridCtrl!=null&&e.gridBodyCtrl!=null&&e.center!=null&&e.left!=null&&e.right!=null&&e.bottomCenter!=null&&e.bottomLeft!=null&&e.bottomRight!=null&&e.topCenter!=null&&e.topLeft!=null&&e.topRight!=null&&e.stickyTopCenter!=null&&e.stickyTopLeft!=null&&e.stickyTopRight!=null&&e.stickyBottomCenter!=null&&e.stickyBottomLeft!=null&&e.stickyBottomRight!=null&&e.centerHeader!=null&&e.leftHeader!=null&&e.rightHeader!=null&&e.fakeHScrollComp!=null&&e.fakeVScrollComp!=null&&e.gridHeaderCtrl!=null,this.ready&&(this.readyCallbacks.forEach(t=>t(e)),this.readyCallbacks.length=0)}whenReady(e){this.ready?e(this.params):this.readyCallbacks.push(e)}register(e,t){this.params[e]=t,this.checkReady()}registerHeaderContainer(e,t){let n=this.params;switch(t){case"left":n.leftHeader=e;break;case"right":n.rightHeader=e;break;default:n.centerHeader=e;break}this.checkReady()}get(e){return this.params[e]}getParams(){return this.params}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){let{leftHeader:e,centerHeader:t,rightHeader:n}=this.params;return[e,n,t]}getHeaderRowContainerCtrl(e){let t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}},Tse=class extends k{constructor(){super(...arguments),this.beanName="cellPositionUtils"}createId(e){let{rowIndex:t,rowPinned:n,column:i}=e;return this.createIdFromValues({rowIndex:t,column:i,rowPinned:n})}createIdFromValues(e){let{rowIndex:t,rowPinned:n,column:i}=e;return`${t}.${n??"null"}.${i.getId()}`}equals(e,t){let n=e.column===t.column,i=e.rowPinned===t.rowPinned,s=e.rowIndex===t.rowIndex;return n&&i&&s}},Ise=class extends k{constructor(){super(...arguments),this.beanName="rowNodeEventThrottle",this.events=[]}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowModel=e.rowModel}postConstruct(){this.rowModel.getType()=="clientSide"&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e,t){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(e);return}this.events.push(e);let n=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(i=>this.eventService.dispatchEvent(i)),this.events=[]};t?n():(this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(n)),this.dispatchExpandedDebounced())}},Ase=class extends k{constructor(){super(...arguments),this.beanName="rowPositionUtils"}wireBeans(e){this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.pageBoundsService=e.pageBoundsService}getFirstRow(){let e=0,t;return this.pinnedRowModel.getPinnedTopRowCount()?t="top":this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(t="bottom"),t===void 0?null:{rowIndex:e,rowPinned:t}}getLastRow(){let e,t=null,n=this.pinnedRowModel.getPinnedBottomRowCount(),i=this.pinnedRowModel.getPinnedTopRowCount();return n?(t="bottom",e=n-1):this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getLastRow()):i&&(t="top",e=i-1),e===void 0?null:{rowIndex:e,rowPinned:t}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowNodes()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowNodes()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}before(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(j(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}},VV={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},BV={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},GV={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},Mse=class extends k{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.themeClasses=[],this.eThemeAncestor=null,this.eMeasurementContainer=null,this.sizesMeasured=!1}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.eGridDiv=e.eGridDiv}postConstruct(){this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.themeClasses=this.getAncestorThemeClasses(),this.setUpThemeClassObservers(),this.getSizeEl(VV),this.getSizeEl(BV),this.getSizeEl(GV)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(VV)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(BV)}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(GV)}hasMeasuredSizes(){return this.sizesMeasured}getThemeClasses(){return this.themeClasses}applyThemeClasses(e){for(let t of Array.from(e.classList))t.startsWith("ag-theme-")&&!this.themeClasses.includes(t)&&e.classList.remove(t);for(let t of this.themeClasses)e.classList.contains(t)||e.classList.add(t)}getThemeAncestorElement(){return this.eThemeAncestor}refreshRowHeightVariable(){let e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gos.get("rowHeight");if(t==null||isNaN(t)||!isFinite(t))return e!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;let n=`${t}px`;return e!=n?(this.eGridDiv.style.setProperty("--ag-line-height",n),t):e!=""?parseFloat(e):-1}getCSSVariablePixelValue(e){let t=this.lastKnownValues.get(e);if(t!=null)return t;let n=this.measureSizeEl(e);return n==="detached"||n==="no-styles"?e.defaultValue:(this.lastKnownValues.set(e,n),n)}measureSizeEl(e){let t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";let n=t.offsetWidth;return n===HV?"no-styles":(this.sizesMeasured=!0,n)}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;let n=this.eMeasurementContainer;n||(n=this.eMeasurementContainer=document.createElement("div"),n.className="ag-measurement-container",this.eGridDiv.appendChild(n)),t=document.createElement("div"),t.style.width=`var(${e.cssName}, ${HV}px)`,n.appendChild(t),this.sizeEls.set(e,t);let i=this.measureSizeEl(e);i==="no-styles"&&G(`no value for ${e.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e.defaultValue} will be used and updated when styles load.`);let s=this.resizeObserverService.observeResize(t,()=>{let r=this.measureSizeEl(e);r==="detached"||r==="no-styles"||(this.lastKnownValues.set(e,r),r!==i&&(i=r,this.fireGridStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>s()),t}fireGridStylesChangedEvent(e){let t={type:"gridStylesChanged",[e]:!0};this.eventService.dispatchEvent(t)}setUpThemeClassObservers(){let e=new MutationObserver(()=>{let n=this.getAncestorThemeClasses();Pse(n,this.themeClasses)||(this.themeClasses=n,this.fireGridStylesChangedEvent("themeChanged"))}),t=this.eGridDiv;for(;t;)e.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement}getAncestorThemeClasses(){let e=this.eGridDiv,t=[];for(this.eThemeAncestor=null;e;){let n=Array.from(e.classList).filter(i=>i.startsWith("ag-theme-"));for(let i of n)this.eThemeAncestor=e,t.includes(i)||t.unshift(i);e=e.parentElement}return Object.freeze(t)}},Pse=(e,t)=>e.length===t.length&&e.findIndex((n,i)=>e[i]!==t[i])===-1,HV=15538,Fse=class extends k{constructor(){super(...arguments),this.beanName="eventService",this.globalEventService=new Tu}wireBeans(e){this.globalEventListener=e.globalEventListener,this.globalSyncEventListener=e.globalSyncEventListener}postConstruct(){if(this.globalEventListener){let e=this.gos.useAsyncEvents();this.addGlobalListener(this.globalEventListener,e)}this.globalSyncEventListener&&this.addGlobalListener(this.globalSyncEventListener,!1)}addEventListener(e,t,n){this.globalEventService.addEventListener(e,t,n)}removeEventListener(e,t,n){this.globalEventService.removeEventListener(e,t,n)}addGlobalListener(e,t=!1){this.globalEventService.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalEventService.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalEventService.dispatchEvent(this.gos.addGridCommonParams(e))}dispatchEventOnce(e){this.globalEventService.dispatchEventOnce(this.gos.addGridCommonParams(e))}},kR=class Ri extends k{constructor(){super(...arguments),this.beanName="focusService"}wireBeans(t){this.eGridDiv=t.eGridDiv,this.columnModel=t.columnModel,this.visibleColsService=t.visibleColsService,this.headerNavigationService=t.headerNavigationService,this.headerPositionUtils=t.headerPositionUtils,this.rowRenderer=t.rowRenderer,this.rowPositionUtils=t.rowPositionUtils,this.cellPositionUtils=t.cellPositionUtils,this.navigationService=t.navigationService,this.ctrlsService=t.ctrlsService,this.filterManager=t.filterManager,this.rangeService=t.rangeService,this.advancedFilterService=t.advancedFilterService}static addKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",Ri.toggleKeyboardMode),t.addEventListener("mousedown",Ri.toggleKeyboardMode))}static removeKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",Ri.toggleKeyboardMode),t.addEventListener("mousedown",Ri.toggleKeyboardMode))}static toggleKeyboardMode(t){let n=Ri.keyboardModeActive,i=t.type==="keydown";i&&(t.ctrlKey||t.metaKey||t.altKey)||n!==i&&(Ri.keyboardModeActive=i)}static unregisterGridCompController(t){Ri.removeKeyboardModeEvents(t)}postConstruct(){let t=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:t,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:t,columnRowGroupChanged:t}),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(n=>{this.gridCtrl=n.gridCtrl})}registerKeyboardFocusEvents(){let t=this.gos.getDocument();Ri.addKeyboardModeEvents(t),Ri.instanceCount++,this.addDestroyFunc(()=>{Ri.instanceCount--,Ri.unregisterGridCompController(t)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;let t=this.focusedCellPosition.column,n=this.columnModel.getCol(t.getId());t!==n&&this.clearFocusedCell()}isKeyboardMode(){return Ri.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),pl.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),RC.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(t,n){let i=t;for(;i;){if(this.gos.getDomData(i,n))return!1;i=i.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(t){return this.isCellRestoreFocused(t)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}isCellRestoreFocused(t){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.restoredFocusedCellPosition)}setRestoreFocusedCell(t){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=t)}getFocusEventParams(){let{rowIndex:t,rowPinned:n,column:i}=this.focusedCellPosition,s={rowIndex:t,rowPinned:n,column:i,isFullWidthCell:!1},r=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:n});return r&&(s.isFullWidthCell=r.isFullWidth()),s}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;let t=B({type:"cellFocusCleared"},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(t)}setFocusedCell(t){let{column:n,rowIndex:i,rowPinned:s,forceBrowserFocus:r=!1,preventScrollOnBrowserFocus:o=!1}=t,a=this.columnModel.getCol(n);if(!a){this.focusedCellPosition=null;return}this.focusedCellPosition=a?{rowIndex:i,rowPinned:dl(s),column:a}:null;let l=se(B({type:"cellFocused"},this.getFocusEventParams()),{forceBrowserFocus:r,preventScrollOnBrowserFocus:o});this.eventService.dispatchEvent(l)}isCellFocused(t){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.focusedCellPosition)}isRowNodeFocused(t){return this.isRowFocused(t.rowIndex,t.rowPinned)}isHeaderWrapperFocused(t){if(this.focusedHeaderPosition==null)return!1;let n=t.getColumnGroupChild(),i=t.getRowIndex(),s=t.getPinned(),{column:r,headerRowIndex:o}=this.focusedHeaderPosition;return n===r&&i===o&&s==r.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(t,n){this.focusedHeaderPosition={headerRowIndex:t,column:n}}focusHeaderPosition(t){if(this.gos.get("suppressHeaderFocus"))return!1;let{direction:n,fromTab:i,allowUserOverride:s,event:r,fromCell:o,rowWithoutSpanValue:a}=t,{headerPosition:l}=t;if(o&&this.filterManager?.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(l);if(s){let c=this.getFocusedHeader(),u=this.headerNavigationService.getHeaderRowCount();if(i){let h=this.gos.getCallback("tabToNextHeader");h&&(l=this.getHeaderPositionFromUserFunc({userFunc:h,direction:n,currentPosition:c,headerPosition:l,headerRowCount:u}))}else{let h=this.gos.getCallback("navigateToNextHeader");if(h&&r){let f={key:r.key,previousHeaderPosition:c,nextHeaderPosition:l,headerRowCount:u,event:r};l=h(f)}}}return l?this.focusProvidedHeaderPosition({headerPosition:l,direction:n,event:r,fromCell:o,rowWithoutSpanValue:a}):!1}focusHeaderPositionFromUserFunc(t){if(this.gos.get("suppressHeaderFocus"))return!1;let{userFunc:n,headerPosition:i,direction:s,event:r}=t,o=this.getFocusedHeader(),a=this.headerNavigationService.getHeaderRowCount(),l=this.getHeaderPositionFromUserFunc({userFunc:n,direction:s,currentPosition:o,headerPosition:i,headerRowCount:a});return!!l&&this.focusProvidedHeaderPosition({headerPosition:l,direction:s,event:r})}getHeaderPositionFromUserFunc(t){let{userFunc:n,direction:i,currentPosition:s,headerPosition:r,headerRowCount:o}=t,l=n({backwards:i==="Before",previousHeaderPosition:s,nextHeaderPosition:r,headerRowCount:o});return l===!0||l===null?(l===null&&G("Since v31.3 Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),s):l===!1?null:l}focusProvidedHeaderPosition(t){let{headerPosition:n,direction:i,fromCell:s,rowWithoutSpanValue:r,event:o}=t,{column:a,headerRowIndex:l}=n;if(l===-1)return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(n):this.focusGridView(a);this.headerNavigationService.scrollToColumn(a,i);let u=this.ctrlsService.getHeaderRowContainerCtrl(a.getPinned()).focusHeader(n.headerRowIndex,a,o);return u&&(r!=null||s)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(r??-1),u}focusFirstHeader(){let t=this.visibleColsService.getAllCols()[0];if(!t)return!1;t.getParent()&&(t=this.visibleColsService.getColGroupAtLevel(t,0));let n=this.headerPositionUtils.getHeaderIndexToFocus(t,0);return this.focusHeaderPosition({headerPosition:n,rowWithoutSpanValue:0})}focusLastHeader(t){let n=this.headerNavigationService.getHeaderRowCount()-1,i=xe(this.visibleColsService.getAllCols());return this.focusHeaderPosition({headerPosition:{headerRowIndex:n,column:i},rowWithoutSpanValue:-1,event:t})}focusPreviousFromFirstCell(t){return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(t)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(t,n){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===t&&this.focusedCellPosition.rowPinned===dl(n)}findFocusableElements(t,n,i=!1){let s=pZ,r=yB;n&&(r+=", "+n),i&&(r+=', [tabindex="-1"]');let o=Array.prototype.slice.apply(t.querySelectorAll(s)).filter(c=>ys(c)),a=Array.prototype.slice.apply(t.querySelectorAll(r));return a.length?((c,u)=>c.filter(h=>u.indexOf(h)===-1))(o,a):o}focusInto(t,n=!1,i=!1){let s=this.findFocusableElements(t,null,i),r=n?xe(s):s[0];return r?(r.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(t,n){if(!n)return null;let i=this.findFocusableElements(t),s=i.indexOf(n);if(s===-1)return null;let r=-1;for(let o=s-1;o>=0;o--)if(i[o].classList.contains("ag-tab-guard-top")){r=o;break}return r<=0?null:i[r-1]}findNextFocusableElement(t=this.eGridDiv,n,i){let s=this.findFocusableElements(t,n?':not([tabindex="-1"])':null),r=this.gos.getActiveDomElement(),o;n?o=s.findIndex(l=>l.contains(r)):o=s.indexOf(r);let a=o+(i?-1:1);return a<0||a>=s.length?null:s[a]}isTargetUnderManagedComponent(t,n){if(!n)return!1;let i=t.querySelectorAll(`.${vl.FOCUS_MANAGED_CLASS}`);if(!i.length)return!1;for(let s=0;s<i.length;s++)if(i[s].contains(n))return!0;return!1}findTabbableParent(t,n=5){let i=0;for(;t&&XD(t)===null&&++i<=n;)t=t.parentElement;return XD(t)===null?null:t}focusGridView(t,n){if(this.gos.get("suppressCellFocus"))return n?this.gos.get("suppressHeaderFocus")?this.focusNextGridCoreContainer(!0,!0):this.focusLastHeader():this.focusNextGridCoreContainer(!1);let i=n?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!i)return!1;let{rowIndex:s,rowPinned:r}=i,o=this.getFocusedHeader();return!t&&o&&(t=o.column),s==null||!t?!1:(this.navigationService.ensureCellVisible({rowIndex:s,column:t,rowPinned:r}),this.setFocusedCell({rowIndex:s,column:t,rowPinned:dl(r),forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:s,rowPinned:r,column:t}),!0)}focusNextGridCoreContainer(t,n=!1){return!n&&this.gridCtrl.focusNextInnerContainer(t)?!0:((n||!t&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(t),!1)}focusAdvancedFilter(t){return this.advancedFilterFocusColumn=t?.column,this.advancedFilterService?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(t,n){let i=(n?void 0:this.advancedFilterFocusColumn)??this.visibleColsService.getAllCols()?.[0];return t?this.focusHeaderPosition({headerPosition:{column:i,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(i)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}addFocusableContainer(t){this.gridCtrl.addFocusableContainer(t)}removeFocusableContainer(t){this.gridCtrl.removeFocusableContainer(t)}focusGridInnerElement(t){return this.gridCtrl.focusInnerElement(t)}};kR.keyboardModeActive=!1;kR.instanceCount=0;var xse=kR,Ose=class extends k{constructor(){super(...arguments),this.beanName="pinnedWidthService"}wireBeans(e){this.visibleColsService=e.visibleColsService}postConstruct(){let e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){let e=this.gos.isDomLayout("print"),t=e?0:this.visibleColsService.getColsLeftWidth(),n=e?0:this.visibleColsService.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:"leftPinnedWidthChanged"})),n!=this.rightWidth&&(this.rightWidth=n,this.eventService.dispatchEvent({type:"rightPinnedWidthChanged"}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}},Nse=class extends k{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}wireBeans(e){this.beans=e,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}setComp(e,t,n){this.view=e,this.eGridHostDiv=t,this.eGui=n,this.eGui.setAttribute("grid-id",this.gridId);let{dragAndDropService:i,mouseEventService:s,ctrlsService:r,resizeObserverService:o}=this.beans;i.addDropTarget({getContainer:()=>this.eGui,isInterestedIn:l=>l===1||l===0,getIconName:()=>"notAllowed"}),s.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new OR(this.view)),this.addRtlSupport();let a=o.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>a()),r.register("gridCtrl",this)}isDetailGrid(){return this.focusService.findTabbableParent(this.getGui())?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){let e=this.beans;return{paginationSelector:e.paginationService?.getPaginationSelector(),gridHeaderDropZonesSelector:e.columnDropZonesService?.getDropZoneSelector(),sideBarSelector:e.sideBarService?.getSideBarSelector(),statusBarSelector:e.statusBarService?.getStatusPanelSelector(),watermarkSelector:e.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){let e={type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(e)}addRtlSupport(){let e=this.gos.get("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(e)}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){let t=this.getFocusableContainers(),n=this.gos.getActiveDomElement(),i=t.findIndex(r=>r.getGui().contains(n)),s=i+(e?-1:1);if(s<0||s>=t.length)return!1;if(s===0){if(i>0){let r=this.visibleColsService.getAllCols(),o=xe(r);if(this.focusService.focusGridView(o,!0))return!0}return!1}return this.focusContainer(t[s],e)}focusInnerElement(e){let t=this.getFocusableContainers(),n=this.visibleColsService.getAllCols(),i=this.gos.getCallback("focusGridInnerElement");if(i&&i({fromBottom:!!e}))return!0;if(e){if(t.length>1)return this.focusContainer(xe(t),!0);let s=xe(n);if(this.focusService.focusGridView(s,!0))return!0}if(this.gos.get("headerHeight")===0||this.gos.get("suppressHeaderFocus")){if(this.focusService.focusGridView(n[0]))return!0;for(let s=1;s<t.length;s++)if(this.focusService.focusInto(t[s].getGui()))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}focusContainer(e,t){e?.setAllowFocus?.(!0);let n=this.focusService.focusInto(e.getGui(),t);return e?.setAllowFocus?.(!1),n}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers.values()]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},kse=class extends RG{constructor(e){super(),this.gridBody=X,this.sideBar=X,this.pagination=X,this.rootWrapperBody=X,this.eGridDiv=e}postConstruct(){let e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:r=>this.addCssClass(r),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:r=>{this.getGui().style.userSelect=r??"",this.getGui().style.webkitUserSelect=r??""},setCursor:r=>{this.getGui().style.cursor=r??""}},t=this.createManagedBean(new Nse),n=t.getOptionalSelectors(),i=this.createTemplate(n),s=[eie,...Object.values(n).filter(r=>!!r)];this.setTemplate(i,s),t.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:r=>t.focusInnerElement(r),forceFocusOutWhenTabGuardsAreEmpty:!0})}insertGridIntoDom(){let e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(e),this.gos.get("debug")&&$i("Grid removed from DOM")})}updateLayoutClasses(e,t){let n=this.rootWrapperBody.classList;n.toggle("ag-layout-auto-height",t.autoHeight),n.toggle("ag-layout-normal",t.normal),n.toggle("ag-layout-print",t.print),this.addOrRemoveCssClass("ag-layout-auto-height",t.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",t.normal),this.addOrRemoveCssClass("ag-layout-print",t.print)}createTemplate(e){let t=e.gridHeaderDropZonesSelector?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",n=e.sideBarSelector?'<ag-side-bar data-ref="sideBar"></ag-side-bar>':"",i=e.statusBarSelector?"<ag-status-bar></ag-status-bar>":"",s=e.watermarkSelector?"<ag-watermark></ag-watermark>":"",r=e.paginationSelector?'<ag-pagination data-ref="pagination"></ag-pagination>':"";return`<div class="ag-root-wrapper" role="presentation">
                ${t}
                <div class="ag-root-wrapper-body" data-ref="rootWrapperBody" role="presentation">
                    <ag-grid-body data-ref="gridBody"></ag-grid-body>
                    ${n}
                </div>
                ${i}
                ${r}
                ${s}
            </div>`}getFocusableElement(){return this.rootWrapperBody}forceFocusOutOfContainer(e=!1){if(!e&&this.pagination?.isDisplayed()){this.pagination.forceFocusOutOfContainer(e);return}super.forceFocusOutOfContainer(e)}getFocusableContainers(){let e=[this.gridBody];return[this.sideBar,this.pagination].forEach(t=>{t&&e.push(t)}),e.filter(t=>ys(t.getGui()))}},Lse=class extends k{constructor(){super(...arguments),this.beanName="alignedGridsService",this.consuming=!1}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.ctrlsService=e.ctrlsService,this.columnApplyStateService=e.columnApplyStateService}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[],t=typeof e=="function";typeof e=="function"&&(e=e());let n=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return e.map(s=>{if(!s){ke("alignedGrids contains an undefined option."),t||ke(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),ke(n());return}if(this.isGridApi(s))return s;let r=s;return"current"in r?r.current?.api:(r.api||ke(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${n()}`),r.api)}).filter(s=>!!s&&!s.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){let e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach(t=>{t.isDestroyed()||t.dispatchEvent(e)})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){let t={type:"alignedGridColumn",event:e};this.fireEvent(t)}fireScrollEvent(e){if(e.direction!=="horizontal")return;let t={type:"alignedGridScroll",event:e};this.fireEvent(t)}onScrollEvent(e){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}getMasterColumns(e){let t=[];return e.columns?e.columns.forEach(n=>{t.push(n)}):e.column&&t.push(e.column),t}getColumnIds(e){let t=[];return e.columns?e.columns.forEach(n=>{t.push(n.getColId())}):e.column&&t.push(e.column.getColId()),t}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{let t=e;this.processColumnEvent(t);break}case"columnGroupOpened":{let t=e;this.processGroupOpenedEvent(t);break}case"columnPivotChanged":G("pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(e){e.columnGroups.forEach(t=>{let n=null;if(t){let i=t.getGroupId();n=this.columnModel.getProvidedColGroup(i)}t&&!n||this.columnModel.setColumnGroupOpened(n,t.isExpanded(),"alignedGridChanged")})}processColumnEvent(e){let t=e.column,n=null;if(t&&(n=this.columnModel.getColDefCol(t.getColId())),t&&!n)return;let i=this.getMasterColumns(e);switch(e.type){case"columnMoved":{let a=e.api.getColumnState().map(l=>({colId:l.colId}));this.columnApplyStateService.applyColumnState({state:a,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{let a=e.api.getColumnState().map(l=>({colId:l.colId,hide:l.hide}));this.columnApplyStateService.applyColumnState({state:a},"alignedGridChanged")}break;case"columnPinned":{let a=e.api.getColumnState().map(l=>({colId:l.colId,pinned:l.pinned}));this.columnApplyStateService.applyColumnState({state:a},"alignedGridChanged")}break;case"columnResized":{let o=e,a={};i.forEach(l=>{a[l.getId()]={key:l.getColId(),newWidth:l.getActualWidth()}}),o.flexColumns?.forEach(l=>{a[l.getId()]&&delete a[l.getId()]}),this.columnSizeService.setColumnWidths(Object.values(a),!1,o.finished,"alignedGridChanged");break}}let r=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(o=>{o.setGridOption("alwaysShowVerticalScroll",r)})}},Vse={version:ge,moduleName:"@ag-grid-community/aligned-grid",beans:[Lse]};function Bse(e,t){let n=e.columnModel.getColDefCol(t);return n?n.getColDef():null}function Gse(e){return e.columnModel.getColumnDefs()}function Hse(e,t){typeof t=="number"?e.columnSizeService.sizeColumnsToFit(t,"api"):e.ctrlsService.getGridBodyCtrl().sizeColumnsToFit(t)}function Use(e,t,n){e.columnModel.setColumnGroupOpened(t,n,"api")}function Wse(e,t,n){return e.visibleColsService.getColumnGroup(t,n)}function jse(e,t){return e.columnModel.getProvidedColGroup(t)}function zse(e,t,n){return e.columnNameService.getDisplayNameForColumn(t,n)||""}function $se(e,t,n){return e.columnNameService.getDisplayNameForColumnGroup(t,n)||""}function qse(e,t){return e.columnModel.getColDefCol(t)}function Kse(e){return e.columnModel.getColDefCols()}function Qse(e,t){return e.columnApplyStateService.applyColumnState(t,"api")}function Yse(e){return e.columnGetStateService.getColumnState()}function Jse(e){e.columnApplyStateService.resetColumnState("api")}function Xse(e){return e.columnGroupStateService.getColumnGroupState()}function Zse(e,t){e.columnGroupStateService.setColumnGroupState(t,"api")}function ere(e){e.columnGroupStateService.resetColumnGroupState("api")}function tre(e){return e.visibleColsService.isPinningLeft()||e.visibleColsService.isPinningRight()}function nre(e){return e.visibleColsService.isPinningLeft()}function ire(e){return e.visibleColsService.isPinningRight()}function sre(e,t){return e.visibleColsService.getColAfter(t)}function rre(e,t){return e.visibleColsService.getColBefore(t)}function ore(e,t,n){e.columnModel.setColsVisible([t],n,"api")}function are(e,t,n){e.columnModel.setColsVisible(t,n,"api")}function lre(e,t,n){e.columnModel.setColsPinned([t],n,"api")}function cre(e,t,n){e.columnModel.setColsPinned(t,n,"api")}function ure(e){return e.columnModel.getCols()}function dre(e){return e.visibleColsService.getLeftCols()}function hre(e){return e.visibleColsService.getCenterCols()}function fre(e){return e.visibleColsService.getRightCols()}function pre(e){return e.visibleColsService.getAllCols()}function gre(e){return e.columnViewportService.getViewportColumns()}function mre(e,t,n){e.columnMoveService.moveColumns([t],n,"api")}function vre(e,t,n){e.columnMoveService.moveColumnByIndex(t,n,"api")}function Cre(e,t,n){e.columnMoveService.moveColumns(t,n,"api")}function yre(e,t,n,i=!0,s="api"){e.columnSizeService.setColumnWidths([{key:t,newWidth:n}],!1,i,s)}function wre(e,t,n=!0,i="api"){e.columnSizeService.setColumnWidths(t,!1,n,i)}function Sre(e){return e.visibleColsService.getTreeLeft()}function _re(e){return e.visibleColsService.getTreeCenter()}function bre(e){return e.visibleColsService.getTreeRight()}function Ere(e){return e.visibleColsService.getAllTrees()}function Dre(e,t,n){return e.columnAutosizeService.autoSizeCols({colKeys:[t],skipHeader:n,source:"api"})}function Rre(e,t,n){e.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:n,source:"api"})}function Tre(e,t){e.columnAutosizeService.autoSizeAllColumns("api",t)}var UV={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},WV=["january","february","march","april","may","june","july","august","september","october","november","december"],Ire=class extends k{constructor(){super(...arguments),this.beanName="dataTypeService",this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(e){this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.columnApplyStateService=e.columnApplyStateService}postConstruct(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(wu(e.source))})}processDataTypeDefinitions(){let e=this.getDefaultDataTypes();this.dataTypeDefinitions={},this.formatValueFuncs={};let t=i=>s=>{let{column:r,node:o,value:a}=s,l=r.getColDef().valueFormatter;return l===i.groupSafeValueFormatter&&(l=i.valueFormatter),this.valueService.formatValue(r,o,a,l)};Object.entries(e).forEach(([i,s])=>{let r=se(B({},s),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(s)});this.dataTypeDefinitions[i]=r,this.formatValueFuncs[i]=t(r)});let n=this.gos.get("dataTypeDefinitions")??{};this.dataTypeMatchers={},Object.entries(n).forEach(([i,s])=>{let r=this.processDataTypeDefinition(s,n,[i],e);r&&(this.dataTypeDefinitions[i]=r,s.dataTypeMatcher&&(this.dataTypeMatchers[i]=s.dataTypeMatcher),this.formatValueFuncs[i]=t(r))}),this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach(i=>{let s=this.dataTypeMatchers[i];s&&delete this.dataTypeMatchers[i],this.dataTypeMatchers[i]=s??e[i].dataTypeMatcher})}mergeDataTypeDefinitions(e,t){let n=B(B({},e),t);return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(n.columnTypes=[...hC(e.columnTypes),...hC(t.columnTypes)]),n}processDataTypeDefinition(e,t,n,i){let s,r=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let o=i[r],a=t[r];if(o&&a&&(o=a),!this.validateDataTypeDefinition(e,o,r))return;s=this.mergeDataTypeDefinitions(o,e)}else{if(n.includes(r)){G('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}let o=t[r];if(!this.validateDataTypeDefinition(e,o,r))return;let a=this.processDataTypeDefinition(o,t,[...n,r],i);if(!a)return;s=this.mergeDataTypeDefinitions(a,e)}return se(B({},s),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(s)})}validateDataTypeDefinition(e,t,n){return t?t.baseDataType!==e.baseDataType?(G('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(G(`The data type definition ${n} does not exist.`),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return t=>{if(t.node?.group){let n=t.column.getAggFunc();if(n){if(n==="first"||n==="last")return e.valueFormatter(t);if(e.baseDataType==="number"&&n!=="count"){if(typeof t.value=="number")return e.valueFormatter(t);if(typeof t.value=="object"){if(!t.value)return;if("toNumber"in t.value)return e.valueFormatter(se(B({},t),{value:t.value.toNumber()}));if("value"in t.value)return e.valueFormatter(se(B({},t),{value:t.value.value}))}}}if(!this.gos.get("suppressGroupMaintainValueType"))return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive()){if(typeof t.value!="string"||e.dataTypeMatcher?.(t.value))return e.valueFormatter(t);if(!this.gos.get("suppressGroupMaintainValueType"))return}return e.valueFormatter(t)}}updateColDefAndGetColumnType(e,t,n){let{cellDataType:i}=t,{field:s}=t;if(i===void 0&&(i=e.cellDataType),(i==null||i===!0)&&(i=this.canInferCellDataType(e,t)?this.inferCellDataType(s,n):!1),!i){e.cellDataType=!1;return}let r=this.dataTypeDefinitions[i];if(!r){G(`Missing data type definition - "${i}"`);return}return e.cellDataType=i,r.groupSafeValueFormatter&&(e.valueFormatter=r.groupSafeValueFormatter),r.valueParser&&(e.valueParser=r.valueParser),r.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,i,r,n),r.columnTypes}addColumnListeners(e){if(!this.isWaitingForRowData)return;let t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;let n=i=>{t.add(i.key)};e.addEventListener("columnStateUpdated",n),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.removeEventListener("columnStateUpdated",n))}canInferCellDataType(e,t){if(this.rowModel.getType()!=="clientSide")return!1;let n={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,n))return!1;let i=t.type===null?e.type:t.type;if(i){let s=this.gos.get("columnTypes")??{};if(hC(i).some(o=>{let a=s[o.trim()];return a&&this.doColDefPropsPreventInference(a,n)}))return!1}return!this.doColDefPropsPreventInference(e,n)}doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([n,i])=>this.doesColDefPropPreventInference(e,t,n,i))}doesColDefPropPreventInference(e,t,n,i){if(!t[n])return!1;let s=e[n];return s===null?(t[n]=!1,!1):i===void 0?!!s:s===i}inferCellDataType(e,t){if(!e)return;let n,i=this.getInitialData();if(i){let r=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");n=af(i,e,r)}else this.initWaitForRowData(t);if(n==null)return;let[s]=Object.entries(this.dataTypeMatchers).find(([r,o])=>o(n))??["object"];return s}getInitialData(){let e=this.gos.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{let t=this.rowModel.getRootNode().allLeafChildren;if(t?.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;let t=this.isColumnTypeOverrideInDataTypeDefinitions;t&&this.columnModel.queueResizeOperations();let[n]=this.addManagedEventListeners({rowDataUpdateStarted:i=>{let{firstRowData:s}=i;if(!s)return;n?.(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(s,t),this.columnStateUpdatesPendingInference={},t&&this.columnModel.processResizeOperations();let r={type:"dataTypesInferred"};this.eventService.dispatchEvent(r)}})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,t){this.initialData=e;let n=[];this.destroyColumnStateUpdateListeners();let i={},s={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([r,o])=>{let a=this.columnModel.getCol(r);if(!a)return;let l=a.getColDef();if(!this.columnModel.resetColDefIntoCol(a,"cellDataTypeInferred"))return;let c=a.getColDef();if(t&&c.type&&c.type!==l.type){let u=this.getUpdatedColumnState(a,o);u.rowGroup&&u.rowGroupIndex==null&&(i[r]=u),u.pivot&&u.pivotIndex==null&&(s[r]=u),n.push(u)}}),t&&n.push(...this.funcColsService.generateColumnStateForRowGroupAndPivotIndexes(i,s)),n.length&&this.columnApplyStateService.applyColumnState({state:n},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,t){let n=this.columnApplyStateService.getColumnStateFromColDef(e);return t.forEach(i=>{delete n[i],i==="rowGroup"?delete n.rowGroupIndex:i==="pivot"&&delete n.pivotIndex}),n}checkObjectValueHandlers(e){let t=this.dataTypeDefinitions.object,n=e.object;this.hasObjectValueParser=t.valueParser!==n.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==n.valueFormatter}getDateStringTypeDefinition(e){return e?this.getDataTypeDefinition(e)??this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){let t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){return this.getDataTypeDefinition(e)?.baseDataType}checkType(e,t){if(t==null)return!0;let n=this.getDataTypeDefinition(e)?.dataTypeMatcher;return n?n(t):!0}validateColDef(e){e.cellDataType==="object"&&(e.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&G('Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"'),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&G('Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"'))}getFormatValue(e){return this.formatValueFuncs[e]}setColDefPropertiesForBaseDataType(e,t,n,i){let s=this.formatValueFuncs[t],r=Kn.__isRegistered("@ag-grid-enterprise/set-filter",this.gridId),o=this.localeService.getLocaleTextFunc(),a=l=>{let{filterParams:c}=e;e.filterParams=typeof c=="object"?B(B({},c),l):l};switch(n.baseDataType){case"number":{e.cellEditor="agNumberCellEditor",r&&a({comparator:(l,c)=>{let u=l==null?0:parseInt(l),h=c==null?0:parseInt(c);return u===h?0:u>h?1:-1}});break}case"boolean":{e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=l=>!!l.colDef.editable&&l.event.key===N.SPACE,a(r?{valueFormatter:l=>j(l.value)?o(String(l.value),l.value?"True":"False"):o("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(l,c)=>c,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(l,c)=>c===!1,numberOfInputs:0}]});break}case"date":{e.cellEditor="agDateCellEditor",e.keyCreator=s,r&&a({valueFormatter:l=>{let c=s(l);return j(c)?c:o("blanks","(Blanks)")},treeList:!0,treeListFormatter:(l,c)=>{if(c===1&&l!=null){let u=WV[Number(l)-1];return o(u,UV[u])}return l??o("blanks","(Blanks)")}});break}case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=s;let l=n.dateParser;a(r?{valueFormatter:c=>{let u=s(c);return j(u)?u:o("blanks","(Blanks)")},treeList:!0,treeListPathGetter:c=>{let u=l(c??void 0);return u?[String(u.getFullYear()),String(u.getMonth()+1),String(u.getDate())]:null},treeListFormatter:(c,u)=>{if(u===1&&c!=null){let h=WV[Number(c)-1];return o(h,UV[h])}return c??o("blanks","(Blanks)")}}:{comparator:(c,u)=>{let h=l(u);return u==null||h<c?-1:h>c?1:0}});break}case"object":{e.cellEditorParams={useFormatter:!0},e.comparator=(l,c)=>{let u=this.columnModel.getColDefCol(i),h=u?.getColDef();if(!u||!h)return 0;let f=l==null?"":s({column:u,node:null,value:l}),g=c==null?"":s({column:u,node:null,value:c});return f===g?0:f>g?1:-1},e.keyCreator=s,r?a({valueFormatter:l=>{let c=s(l);return j(c)?c:o("blanks","(Blanks)")}}):e.filterValueGetter=l=>s({column:l.column,node:l.node,value:this.valueService.getValue(l.column,l.node)});break}}}getDefaultDataTypes(){let e=n=>!!n.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:n=>n.newValue?.trim?.()===""?null:Number(n.newValue),valueFormatter:n=>n.value==null?"":typeof n.value!="number"||isNaN(n.value)?t("invalidNumber","Invalid Number"):String(n.value),dataTypeMatcher:n=>typeof n=="number"},text:{baseDataType:"text",valueParser:n=>n.newValue===""?null:jD(n.newValue),dataTypeMatcher:n=>typeof n=="string"},boolean:{baseDataType:"boolean",valueParser:n=>n.newValue==null?n.newValue:n.newValue?.trim?.()===""?null:String(n.newValue).toLowerCase()==="true",valueFormatter:n=>n.value==null?"":String(n.value),dataTypeMatcher:n=>typeof n=="boolean"},date:{baseDataType:"date",valueParser:n=>ri(n.newValue==null?null:String(n.newValue)),valueFormatter:n=>n.value==null?"":!(n.value instanceof Date)||isNaN(n.value.getTime())?t("invalidDate","Invalid Date"):Qi(n.value,!1)??"",dataTypeMatcher:n=>n instanceof Date},dateString:{baseDataType:"dateString",dateParser:n=>ri(n)??void 0,dateFormatter:n=>Qi(n??null,!1)??void 0,valueParser:n=>e(String(n.newValue))?n.newValue:null,valueFormatter:n=>e(String(n.value))?n.value:"",dataTypeMatcher:n=>typeof n=="string"&&e(n)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:n=>jD(n.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(e=>e()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}},Are={version:ge,moduleName:"@ag-grid-community/data-type",beans:[Ire]},Mre={version:ge,moduleName:"@ag-grid-community/column-api",apiFunctions:{getColumnDef:Bse,getColumnDefs:Gse,sizeColumnsToFit:Hse,setColumnGroupOpened:Use,getColumnGroup:Wse,getProvidedColumnGroup:jse,getDisplayNameForColumn:zse,getDisplayNameForColumnGroup:$se,getColumn:qse,getColumns:Kse,applyColumnState:Qse,getColumnState:Yse,resetColumnState:Jse,getColumnGroupState:Xse,setColumnGroupState:Zse,resetColumnGroupState:ere,isPinning:tre,isPinningLeft:nre,isPinningRight:ire,getDisplayedColAfter:sre,getDisplayedColBefore:rre,setColumnVisible:ore,setColumnsVisible:are,setColumnPinned:lre,setColumnsPinned:cre,getAllGridColumns:ure,getDisplayedLeftColumns:dre,getDisplayedCenterColumns:hre,getDisplayedRightColumns:fre,getAllDisplayedColumns:pre,getAllDisplayedVirtualColumns:gre,moveColumn:mre,moveColumnByIndex:vre,moveColumns:Cre,setColumnWidth:yre,setColumnWidths:wre,getLeftDisplayedColumnGroups:Sre,getCenterDisplayedColumnGroups:_re,getRightDisplayedColumnGroups:bre,getAllDisplayedColumnGroups:Ere,autoSizeColumn:Dre,autoSizeColumns:Rre,autoSizeAllColumns:Tre}};function Pre(e,t){e.ctrlsService.getGridBodyCtrl().getRowDragFeature().addRowDropZone(t)}function Fre(e,t){let n=e.dragAndDropService.findExternalZone(t);n&&e.dragAndDropService.removeDropTarget(n)}function xre(e,t){return e.ctrlsService.getGridBodyCtrl().getRowDragFeature().getRowDropZone(t)}var Ore={version:ge,moduleName:"@ag-grid-community/drag-api",apiFunctions:{addRowDropZone:Pre,removeRowDropZone:Fre,getRowDropZoneParams:xre}};function Nre(e){return e.pinnedRowModel.getPinnedTopRowCount()}function kre(e){return e.pinnedRowModel.getPinnedBottomRowCount()}function Lre(e,t){return e.pinnedRowModel.getPinnedTopRow(t)}function Vre(e,t){return e.pinnedRowModel.getPinnedBottomRow(t)}var Bre={version:ge,moduleName:"@ag-grid-community/pinned-row-api",apiFunctions:{getPinnedTopRowCount:Nre,getPinnedBottomRowCount:kre,getPinnedTopRow:Lre,getPinnedBottomRow:Vre}};function Gre(e){e.overlayService.showLoadingOverlay()}function Hre(e){e.overlayService.showNoRowsOverlay()}function Ure(e){e.overlayService.hideOverlay()}var Wre={version:ge,moduleName:"@ag-grid-community/overlay-api",apiFunctions:{showLoadingOverlay:Gre,showNoRowsOverlay:Hre,hideOverlay:Ure}};function jre(e,t,n){if(!t)return;let i=e.ctrlsService.getGridBodyCtrl().getGui(),s=`aria-${t}`;n===null?i.removeAttribute(s):i.setAttribute(s,n)}function zre(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function $re(e,t={}){let n=i=>G(`Since v31.1 api.flashCells parameter '${i}Delay' is deprecated. Please use '${i}Duration' instead.`);j(t.fadeDelay)&&n("fade"),j(t.flashDelay)&&n("flash"),e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.flashCells(t))}function qre(e){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getHeaderRowContainerCtrls().forEach(t=>t.refresh()))}function Kre(e){return e.animationFrameService.isQueueEmpty()}function Qre(e){e.animationFrameService.flushAllFrames()}function Yre(e){return{rowHeight:e.gos.getRowHeightAsNumber(),headerHeight:e.columnModel.getHeaderHeight()}}function Jre(e,t={}){return e.rowRenderer.getCellRendererInstances(t).map(cf)}var Xre={version:ge,moduleName:"@ag-grid-community/render-api",apiFunctions:{setGridAriaProperty:jre,refreshCells:zre,flashCells:$re,refreshHeader:qre,isAnimationFrameQueueEmpty:Kre,flushAllAnimationFrames:Qre,getSizesForCurrentTheme:Yre,getCellRendererInstances:Jre}};function Zre(e){e.valueCache.expire()}function eoe(e,t,n){return TG(e,{colKey:t,rowNode:n})}function TG(e,t){let{colKey:n,rowNode:i,useFormatter:s}=t,r=e.columnModel.getColDefCol(n)??e.columnModel.getCol(n);if(Ie(r))return null;let o=e.valueService.getValue(r,i);return s?e.valueService.formatValue(r,i,o)??tr(o,!0):o}function toe(e){return e.context.getGridId()}function noe(e){e.gridDestroyService.destroy()}function ioe(e){return e.gridDestroyService.isDestroyCalled()}function soe(e,t){return e.gos.get(t)}function roe(e,t,n){IG(e,{[t]:n})}function IG(e,t){e.gos.updateGridOptions({options:t})}function ooe(e,t,n){e.apiEventService.addEventListener(t,n)}function aoe(e,t,n){e.apiEventService.removeEventListener(t,n)}function loe(e,t){e.apiEventService.addGlobalListener(t)}function coe(e,t){e.apiEventService.removeGlobalListener(t)}function uoe(e){return e.focusService.getFocusedCell()}function doe(e){return e.focusService.clearFocusedCell()}function hoe(e,t,n,i){e.focusService.setFocusedCell({rowIndex:t,column:n,rowPinned:i,forceBrowserFocus:!0})}function foe(e,t){return e.navigationService.tabToNextCell(!1,t)}function poe(e,t){return e.navigationService.tabToNextCell(!0,t)}function goe(e,t,n=!1){let i=e.headerNavigationService.getHeaderPositionForColumn(t,n);i&&e.focusService.focusHeaderPosition({headerPosition:i})}function moe(e,t,n){let i=e.columnModel.getCol(t);e.menuService.showColumnMenu({column:i,buttonElement:n,positionBy:"button"})}function voe(e,t,n){let i=e.columnModel.getCol(t);if(i||(i=e.columnModel.getColDefCol(t)),!i){ke(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:i,mouseEvent:n,positionBy:"mouse"})}function Coe(e,t){let n=e.columnModel.getCol(t);if(!n){ke(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:n,positionBy:"auto"})}function yoe(e){e.menuService.hidePopupMenu()}function woe(e,t={}){let n=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(n))}function Soe(e,t,n,i,s){e.expansionService.setRowNodeExpanded(t,n,i,s)}function _oe(e,t){return e.rowModel.getRowNode(t)}function boe(e,t,n,i){e.rowRenderer.addRenderedRowListener(t,n,i)}function Eoe(e){return e.rowRenderer.getRenderedNodes()}function Doe(e,t,n){e.rowModel.forEachNode(t,n)}function Roe(e){return AG(e)}function AG(e){return e.rowRenderer.getFirstVirtualRenderedRow()}function Toe(e){return MG(e)}function MG(e){return e.rowRenderer.getLastVirtualRenderedRow()}function Ioe(e,t){return e.rowModel.getRow(t)}function Aoe(e){return e.rowModel.getRowCount()}function Moe(e){return e.rowModel}function Poe(e,t){if(!t.nodes.every(a=>a.rowPinned?(G("cannot select pinned rows"),!1):a.id===void 0?(G("cannot select node until id for node is known"),!1):!0))return;let{nodes:i,source:s,newValue:r}=t,o=i;e.selectionService.setNodesSelected({nodes:o,source:s??"api",newValue:r})}function Foe(e,t="apiSelectAll"){e.selectionService.selectAllRowNodes({source:t})}function xoe(e,t="apiSelectAll"){e.selectionService.deselectAllRowNodes({source:t})}function Ooe(e,t="apiSelectAllFiltered"){e.selectionService.selectAllRowNodes({source:t,justFiltered:!0})}function Noe(e,t="apiSelectAllFiltered"){e.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})}function koe(e,t="apiSelectAllCurrentPage"){e.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})}function Loe(e,t="apiSelectAllCurrentPage"){e.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})}function Voe(e){return e.selectionService.getSelectedNodes()}function Boe(e){return e.selectionService.getSelectedRows()}function Goe(e){e.sortController.onSortChanged("api")}var Hoe={version:ge,moduleName:"@ag-grid-community/core-api",apiFunctions:{getGridId:toe,destroy:noe,isDestroyed:ioe,getGridOption:soe,setGridOption:roe,updateGridOptions:IG}},Uoe={version:ge,moduleName:"@ag-grid-community/row-selection-api",apiFunctions:{setNodesSelected:Poe,selectAll:Foe,deselectAll:xoe,selectAllFiltered:Ooe,deselectAllFiltered:Noe,selectAllOnCurrentPage:koe,deselectAllOnCurrentPage:Loe,getSelectedNodes:Voe,getSelectedRows:Boe}},Woe={version:ge,moduleName:"@ag-grid-community/row-api",apiFunctions:{redrawRows:woe,setRowNodeExpanded:Soe,getRowNode:_oe,addRenderedRowListener:boe,getRenderedNodes:Eoe,forEachNode:Doe,getFirstDisplayedRow:Roe,getFirstDisplayedRowIndex:AG,getLastDisplayedRow:Toe,getLastDisplayedRowIndex:MG,getDisplayedRowAtIndex:Ioe,getDisplayedRowCount:Aoe,getModel:Moe}},joe={version:ge,moduleName:"@ag-grid-community/scroll-api",apiFunctions:{getVerticalPixelRange:Tie,getHorizontalPixelRange:Iie,ensureColumnVisible:bG,ensureIndexVisible:EG,ensureNodeVisible:Aie}},zoe={version:ge,moduleName:"@ag-grid-community/keyboard-navigation-api",apiFunctions:{getFocusedCell:uoe,clearFocusedCell:doe,setFocusedCell:hoe,setFocusedHeader:goe,tabToNextCell:foe,tabToPreviousCell:poe}},$oe={version:ge,moduleName:"@ag-grid-community/event-api",apiFunctions:{addEventListener:ooe,addGlobalListener:loe,removeEventListener:aoe,removeGlobalListener:coe}},qoe={version:ge,moduleName:"@ag-grid-community/cell-api",apiFunctions:{expireValueCache:Zre,getValue:eoe,getCellValue:TG}},Koe={version:ge,moduleName:"@ag-grid-community/menu-api",apiFunctions:{showColumnMenuAfterButtonClick:moe,showColumnMenuAfterMouseClick:voe,showColumnMenu:Coe,hidePopupMenu:yoe}},Qoe={version:ge,moduleName:"@ag-grid-community/sort-api",apiFunctions:{onSortChanged:Goe}},Yoe={version:ge,moduleName:"@ag-grid-community/api",dependantModules:[Hoe,Bre,Uoe,Mre,Woe,Ore,joe,Wre,zoe,$oe,Xre,qoe,Koe,Qoe]};function Joe(e){return e.stateService?.getState()??{}}var Xoe=class extends k{constructor(){super(...arguments),this.beanName="stateService",this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=Yn(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=Yn(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=Yn(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}wireBeans(e){this.filterManager=e.filterManager,this.ctrlsService=e.ctrlsService,this.pivotResultColsService=e.pivotResultColsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnGroupStateService=e.columnGroupStateService,this.columnGetStateService=e.columnGetStateService,this.paginationService=e.paginationService,this.rowModel=e.rowModel,this.selectionService=e.selectionService,this.expansionService=e.expansionService,this.columnAnimationService=e.columnAnimationService,this.columnApplyStateService=e.columnApplyStateService,this.sideBarService=e.sideBarService,this.rangeService=e.rangeService}postConstruct(){this.isClientSideRowModel=this.rowModel.getType()==="clientSide",this.cachedState=this.gos.get("initialState")??{},this.ctrlsService.whenReady(()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));let[e,t,n]=this.addManagedEventListeners({newColumnsLoaded:({source:i})=>{i==="gridInitializing"&&(e(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))},rowCountReady:()=>{t?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())},firstDataRendered:()=>{n?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())}})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState());let e=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:e,sideBarUpdated:e})}setupStateOnColumnsInitialised(){let e=this.gos.get("initialState")??{};this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState()),this.addManagedEventListeners({columnValueChanged:()=>this.updateColumnState(["aggregation"]),columnMoved:()=>this.updateColumnState(["columnOrder"]),columnPinned:()=>this.updateColumnState(["columnPinning"]),columnResized:()=>this.updateColumnState(["columnSizing"]),columnVisible:()=>this.updateColumnState(["columnVisibility"]),columnPivotChanged:()=>this.updateColumnState(["pivot"]),columnPivotModeChanged:()=>this.updateColumnState(["pivot"]),columnRowGroupChanged:()=>this.updateColumnState(["rowGroup"]),sortChanged:()=>this.updateColumnState(["sort"]),newColumnsLoaded:()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setupStateOnRowCountReady(){let{filter:e,rowGroupExpansion:t,rowSelection:n,pagination:i}=this.gos.get("initialState")??{},s=this.gos.get("advancedFilterModel");(e||s)&&this.setFilterState(e,s),t&&this.setRowGroupExpansionState(t),n&&this.setRowSelectionState(n),i&&this.setPaginationState(i),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState()),this.addManagedEventListeners({filterChanged:()=>this.updateCachedState("filter",this.getFilterState()),rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:r=>{(r.newPage||r.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())}})}setupStateOnFirstDataRendered(){let{scroll:e,rangeSelection:t,focusedCell:n,columnOrder:i}=this.gos.get("initialState")??{};n&&this.setFocusedCellState(n),t&&this.setRangeSelectionState(t),e&&this.setScrollState(e),this.setColumnPivotState(!!i?.orderedColIds),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState()),this.updateCachedState("rangeSelection",this.getRangeSelectionState()),this.updateCachedState("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:()=>this.updateCachedState("focusedCell",this.getFocusedCellState()),rangeSelectionChanged:s=>{s.finished&&this.updateCachedState("rangeSelection",this.getRangeSelectionState())},bodyScrollEnd:()=>this.updateCachedState("scroll",this.getScrollState())})}getColumnState(){let e=this.columnModel.isPivotMode(),t=[],n=[],i=[],s=[],r=[],o=[],a=[],l=[],c=[],u=this.columnGetStateService.getColumnState();for(let h=0;h<u.length;h++){let{colId:f,sort:g,sortIndex:v,rowGroup:y,rowGroupIndex:C,aggFunc:E,pivot:I,pivotIndex:T,pinned:x,hide:z,width:V,flex:b}=u[h];c.push(f),g&&(t[v??0]={colId:f,sort:g}),y&&(n[C??0]=f),typeof E=="string"&&i.push({colId:f,aggFunc:E}),I&&(s[T??0]=f),x&&(x==="right"?o:r).push(f),z&&a.push(f),(b||V)&&l.push({colId:f,flex:b??void 0,width:V})}return{sort:t.length?{sortModel:t}:void 0,rowGroup:n.length?{groupColIds:n}:void 0,aggregation:i.length?{aggregationModel:i}:void 0,pivot:s.length||e?{pivotMode:e,pivotColIds:s}:void 0,columnPinning:r.length||o.length?{leftColIds:r,rightColIds:o}:void 0,columnVisibility:a.length?{hiddenColIds:a}:void 0,columnSizing:l.length?{columnSizingModel:l}:void 0,columnOrder:c.length?{orderedColIds:c}:void 0}}setColumnState(e){let{sort:t,rowGroup:n,aggregation:i,pivot:s,columnPinning:r,columnVisibility:o,columnSizing:a,columnOrder:l}=e,c={},u=v=>{let y=c[v];return y||(y={colId:v},c[v]=y,y)};t&&t.sortModel.forEach(({colId:v,sort:y},C)=>{let E=u(v);E.sort=y,E.sortIndex=C}),n&&n.groupColIds.forEach((v,y)=>{let C=u(v);C.rowGroup=!0,C.rowGroupIndex=y}),i&&i.aggregationModel.forEach(({colId:v,aggFunc:y})=>{u(v).aggFunc=y}),s&&(s.pivotColIds.forEach((v,y)=>{let C=u(v);C.pivot=!0,C.pivotIndex=y}),this.gos.updateGridOptions({options:{pivotMode:s.pivotMode},source:"gridInitializing"})),r&&(r.leftColIds.forEach(v=>{u(v).pinned="left"}),r.rightColIds.forEach(v=>{u(v).pinned="right"})),o&&o.hiddenColIds.forEach(v=>{u(v).hide=!0}),a&&a.columnSizingModel.forEach(({colId:v,flex:y,width:C})=>{let E=u(v);E.flex=y??null,E.width=C});let h=l?.orderedColIds,f=!!h?.length,g=f?h.map(v=>u(v)):Object.values(c);if(g.length){this.columnStates=g;let v={sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};this.columnApplyStateService.applyColumnState({state:g,applyOrder:f,defaultState:v},"gridInitializing")}}setColumnPivotState(e){let t=this.columnStates;this.columnStates=void 0;let n=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.pivotResultColsService.isPivotResultColsPresent()){if(t){let i=[];for(let s of t)this.pivotResultColsService.getPivotResultCol(s.colId)&&i.push(s);this.columnApplyStateService.applyColumnState({state:i,applyOrder:e},"gridInitializing")}n&&this.columnGroupStateService.setColumnGroupState(n,"gridInitializing")}}getColumnGroupState(){let e=this.columnGroupStateService.getColumnGroupState(),t=[];return e.forEach(({groupId:n,open:i})=>{i&&t.push(n)}),t.length?{openColumnGroupIds:t}:void 0}setColumnGroupState(e){if(!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;let t=new Set(e.columnGroup?.openColumnGroupIds),i=this.columnGroupStateService.getColumnGroupState().map(({groupId:s})=>{let r=t.has(s);return r&&t.delete(s),{groupId:s,open:r}});t.forEach(s=>{i.push({groupId:s,open:!0})}),i.length&&(this.columnGroupStates=i),this.columnGroupStateService.setColumnGroupState(i,"gridInitializing")}getFilterState(){let e=this.filterManager?.getFilterModel();e&&Object.keys(e).length===0&&(e=void 0);let t=this.filterManager?.getAdvancedFilterModel()??void 0;return e||t?{filterModel:e,advancedFilterModel:t}:void 0}setFilterState(e,t){let{filterModel:n,advancedFilterModel:i}=e??{advancedFilterModel:t};n&&this.filterManager?.setFilterModel(n,"columnFilter"),i&&this.filterManager?.setAdvancedFilterModel(i)}getRangeSelectionState(){let e=this.rangeService?.getCellRanges().map(t=>{let{id:n,type:i,startRow:s,endRow:r,columns:o,startColumn:a}=t;return{id:n,type:i,startRow:s,endRow:r,colIds:o.map(l=>l.getColId()),startColId:a.getColId()}});return e?.length?{cellRanges:e}:void 0}setRangeSelectionState(e){if(!this.gos.get("enableRangeSelection")||!this.rangeService)return;let t=[];e.cellRanges.forEach(n=>{let i=[];if(n.colIds.forEach(r=>{let o=this.columnModel.getCol(r);o&&i.push(o)}),!i.length)return;let s=this.columnModel.getCol(n.startColId);if(!s){let r=this.visibleColsService.getAllCols(),o=new Set(i);s=r.find(a=>o.has(a))}t.push(se(B({},n),{columns:i,startColumn:s}))}),this.rangeService.setCellRanges(t)}getScrollState(){if(!this.isClientSideRowModel)return;let e=this.ctrlsService.getGridBodyCtrl()?.getScrollFeature(),{left:t}=e?.getHScrollPosition()??{left:0},{top:n}=e?.getVScrollPosition()??{top:0};return n||t?{top:n,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;let{top:t,left:n}=e;this.ctrlsService.getGridBodyCtrl()?.getScrollFeature().setScrollPosition(t,n)}getSideBarState(){return this.sideBarService?.getSideBarComp()?.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;let e=this.focusService.getFocusedCell();if(e){let{column:t,rowIndex:n,rowPinned:i}=e;return{colId:t.getColId(),rowIndex:n,rowPinned:i}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;let{colId:t,rowIndex:n,rowPinned:i}=e;this.focusService.setFocusedCell({column:this.columnModel.getCol(t),rowIndex:n,rowPinned:i,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){if(!this.paginationService)return;let e=this.paginationService.getCurrentPage(),t=this.gos.get("paginationAutoPageSize")?void 0:this.paginationService.getPageSize();if(!(!e&&!t))return{page:e,pageSize:t}}setPaginationState(e){this.paginationService&&(e.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationService.setPageSize(e.pageSize,"initialState"),typeof e.page=="number"&&this.paginationService.setPage(e.page))}getRowSelectionState(){let e=this.selectionService.getSelectionState();return!e||!Array.isArray(e)&&(e.selectAll===!1||e.selectAllChildren===!1)&&!e?.toggledNodes?.length?void 0:e}setRowSelectionState(e){this.selectionService.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){let e=this.expansionService.getExpandedRows();return e.length?{expandedRowGroupIds:e}:void 0}setRowGroupExpansionState(e){this.expansionService.expandRows(e.expandedRowGroupIds)}updateColumnState(e){let t=this.getColumnState(),n=!1;Object.entries(t).forEach(([i,s])=>{gC(s,this.cachedState[i])||(n=!0)}),this.cachedState=B(B({},this.cachedState),t),n&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){let n=this.cachedState[e];this.setCachedStateValue(e,t),gC(t,n)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState=se(B({},this.cachedState),{[e]:t})}refreshStaleState(){this.staleStateKeys.forEach(e=>{switch(e){case"rowSelection":this.setCachedStateValue(e,this.getRowSelectionState());break}}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach(t=>this.queuedUpdateSources.add(t)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){let e=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear();let t={type:"stateUpdated",sources:e,state:this.cachedState};this.eventService.dispatchEvent(t)}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),e(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}},PG={version:ge,moduleName:"@ag-grid-community/state-core",beans:[Xoe]},Zoe={version:ge,moduleName:"@ag-grid-community/state-api",apiFunctions:{getState:Joe},dependantModules:[PG]},eae={version:ge,moduleName:"@ag-grid-community/state",dependantModules:[PG,Zoe]};function tae(e){return e.rowModel.isLastRowIndexKnown()}function nae(e){return e.paginationService?.getPageSize()??100}function iae(e){return e.paginationService?.getCurrentPage()??0}function sae(e){return e.paginationService?.getTotalPages()??1}function rae(e){return e.paginationService?e.paginationService.getMasterRowCount():e.rowModel.getRowCount()}function oae(e){e.paginationService?.goToNextPage()}function aae(e){e.paginationService?.goToPreviousPage()}function lae(e){e.paginationService?.goToFirstPage()}function cae(e){e.paginationService?.goToLastPage()}function uae(e,t){e.paginationService?.goToPage(t)}var dae=class extends k{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}postConstruct(){this.ctrlsService.whenReady(e=>{this.centerRowsCtrl=e.center;let t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.paginationService.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;let e=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(e>0){let t=()=>{let n=Math.max(this.gos.getRowHeightAsNumber(),1),i=Math.floor(e/n);this.paginationService.setPageSize(i,"autoCalculated")};this.isBodyRendered?Yn(()=>t(),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};function hae(e,t,n){e.addManagedElementListeners(t,{keydown:i=>{if(!i.defaultPrevented&&i.key===N.TAB){let s=i.shiftKey;n.findNextFocusableElement(t,!1,s)||n.focusNextGridCoreContainer(s)&&i.preventDefault()}}})}var fae=class extends Ve{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;let e=this.selectPageSizeComp.getValue();if(!e)return;let t=Number(e);isNaN(t)||t<1||t===this.paginationService.getPageSize()||(this.paginationService.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.paginationService=e.paginationService}postConstruct(){this.addManagedPropertyListener("paginationPageSizeSelector",()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!e?.newPageSize)return;let t=this.paginationService.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp&&this.appendChild(this.selectPageSizeComp))}reset(){An(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get("paginationPageSizeSelector")!==!1}reloadPageSizesSelector(){let e=this.getPageSizeSelectorValues(),t=this.paginationService.getPageSize(),n=!t||!e.includes(t);n&&(e.unshift(""),G(`The paginationPageSize grid option is set to a value that is not in the list of page size options.
                Please make sure that the paginationPageSize grid option is set to one of the values in the 
                paginationPageSizeSelector array, or set the paginationPageSizeSelector to false to hide the page size selector.`)),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp));let i=this.localeService.getLocaleTextFunc(),s=i("pageSizeSelectorLabel","Page Size:"),r=e.map(a=>({value:String(a),text:String(a)})),o=i("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new bR).addOptions(r).setValue(String(n?"":t)).setAriaLabel(o).setLabel(s).onValueChange(()=>this.handlePageSizeItemSelected()),this.hasEmptyOption=n}getPageSizeSelectorValues(){let e=[20,50,100],t=this.gos.get("paginationPageSizeSelector");return!Array.isArray(t)||!this.validateValues(t)?e:[...t].sort((n,i)=>n-i)}validateValues(e){if(!e.length)return G(`The paginationPageSizeSelector grid option is an empty array. This is most likely a mistake.
                If you want to hide the page size selector, please set the paginationPageSizeSelector to false.`),!1;for(let t=0;t<e.length;t++){let n=e[t],i=typeof n=="number",s=n>0;if(!i)return G(`The paginationPageSizeSelector grid option contains a non-numeric value.
                    Please make sure that all values in the paginationPageSizeSelector array are numbers.`),!1;if(!s)return G(`The paginationPageSizeSelector grid option contains a negative number or zero.
                    Please make sure that all values in the paginationPageSizeSelector array are positive.`),!1}return!0}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},pae={selector:"AG-PAGE-SIZE-SELECTOR",component:fae},gae=class extends RG{constructor(){super(),this.btFirst=X,this.btPrevious=X,this.btNext=X,this.btLast=X,this.lbRecordCount=X,this.lbFirstRowOnPage=X,this.lbLastRowOnPage=X,this.lbCurrent=X,this.lbTotal=X,this.pageSizeComp=X,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1}wireBeans(e){this.rowNodeBlockLoader=e.rowNodeBlockLoader,this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.focusService=e.focusService}postConstruct(){let e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[pae]);let{btFirst:t,btPrevious:n,btNext:i,btLast:s}=this;this.activateTabIndex([t,n,i,s]),t.insertAdjacentElement("afterbegin",Ii(e?"last":"first",this.gos)),n.insertAdjacentElement("afterbegin",Ii(e?"next":"previous",this.gos)),i.insertAdjacentElement("afterbegin",Ii(e?"previous":"next",this.gos)),s.insertAdjacentElement("afterbegin",Ii(e?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:r=>{this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(r):this.focusService.focusGridInnerElement(r)},forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){let t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{let{el:t,fn:n}=e;this.addManagedListeners(t,{click:n,keydown:i=>{(i.key===N.ENTER||i.key===N.SPACE)&&(i.preventDefault(),n())}})}),hae(this,this.getGui(),this.focusService),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationService.goToFirstPage()}setCurrentPageLabel(){let e=this.paginationService.getTotalPages()>0,t=this.paginationService.getCurrentPage(),n=e?t+1:0;this.lbCurrent.textContent=this.formatNumber(n)}formatNumber(e){let t=this.gos.getCallback("paginationNumberFormatter");if(t)return t({value:e});let n=this.localeService.getLocaleTextFunc(),i=n("thousandSeparator",","),s=n("decimalSeparator",".");return Vee(e,i,s)}getTemplate(){let e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),n=e("to","to"),i=e("of","of"),s=e("firstPage","First Page"),r=e("previousPage","Previous Page"),o=e("nextPage","Next Page"),a=e("lastPage","Last Page"),l=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${l}">
                <ag-page-size-selector data-ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel" role="status">
                    <span id="ag-${l}-first-row" data-ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-to">${n}</span>
                    <span id="ag-${l}-last-row" data-ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-of">${i}</span>
                    <span id="ag-${l}-row-count" data-ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div data-ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${s}"></div>
                    <div data-ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${r}"></div>
                    <span class="ag-paging-description" role="status">
                        <span id="ag-${l}-start-page">${t}</span>
                        <span id="ag-${l}-start-page-number" data-ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${l}-of-page">${i}</span>
                        <span id="ag-${l}-of-page-number" data-ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div data-ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>
                    <div data-ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationService.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationService.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationService.goToLastPage()}enableOrDisableButtons(){let e=this.paginationService.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),n=this.paginationService.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);let i=this.isZeroPagesToDisplay(),s=e===n-1;this.nextButtonDisabled=s||i,this.lastButtonDisabled=!t||i||e===n-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){eZ(e,t),e.classList.toggle("ag-disabled",t)}updateRowLabels(){let e=this.paginationService.getCurrentPage(),t=this.paginationService.getPageSize(),n=this.rowModel.isLastRowIndexKnown(),i=this.rowModel.isLastRowIndexKnown()?this.paginationService.getMasterRowCount():null,s,r;if(this.isZeroPagesToDisplay()?s=r=0:(s=t*e+1,r=s+t-1,n&&r>i&&(r=i)),this.lbFirstRowOnPage.textContent=this.formatNumber(s),this.rowNodeBlockLoader?.isLoading()){let o=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=o("pageLastRowUnknown","?")}else this.lbLastRowOnPage.textContent=this.formatNumber(r)}isZeroPagesToDisplay(){let e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages();return e&&t===0}setTotalLabels(){let e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages(),n=e?this.paginationService.getMasterRowCount():null;if(n===1){let i=this.rowModel.getRow(0);if(i&&i.group&&!(i.groupData||i.aggData)){this.setTotalLabelsToZero();return}}if(e)this.lbTotal.textContent=this.formatNumber(t),this.lbRecordCount.textContent=this.formatNumber(n);else{let i=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=i,this.lbRecordCount.innerHTML=i}}setTotalLabelsToZero(){this.lbFirstRowOnPage.textContent=this.formatNumber(0),this.lbCurrent.textContent=this.formatNumber(0),this.lbLastRowOnPage.textContent=this.formatNumber(0),this.lbTotal.textContent=this.formatNumber(0),this.lbRecordCount.textContent=this.formatNumber(0)}},mae={selector:"AG-PAGINATION",component:gae},vae=class extends k{constructor(){super(...arguments),this.beanName="paginationService",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return mae}isPaginateChildRows(){return this.gos.get("groupRemoveSingleChildren")||this.gos.get("groupRemoveLowestSingleChildren")?!0:this.gos.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){!this.active||this.currentPage===e||typeof this.currentPage!="number"||(this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}isRowPresent(e){return e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;let t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){return this.active?this.getPageForIndex(e.rowIndex)===this.currentPage:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){let e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return j(this.pageSizeAutoCalculated)?this.pageSizeAutoCalculated:j(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:j(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:j(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.pageBoundsService.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;let e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){let n=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}n!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}let e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();let t=this.pageSize*this.currentPage,n=this.pageSize*(this.currentPage+1)-1;if(n>e&&(n=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),n===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{let i=this.rowModel.getTopLevelRowDisplayedIndex(n+1);this.bottomDisplayedRowIndex=i-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}let e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){let{keepRenderedRows:t=!1,newPage:n=!1,newPageSize:i=!1}=e,s={type:"paginationChanged",animate:!1,newData:!1,newPage:n,newPageSize:i,keepRenderedRows:t};this.eventService.dispatchEvent(s)}},FG={version:ge,moduleName:"@ag-grid-community/pagination-core",beans:[vae,dae]},Cae={version:ge,moduleName:"@ag-grid-community/pagination-api",dependantModules:[FG],apiFunctions:{paginationIsLastPageFound:tae,paginationGetPageSize:nae,paginationGetCurrentPage:iae,paginationGetTotalPages:sae,paginationGetRowCount:rae,paginationGoToNextPage:oae,paginationGoToPreviousPage:aae,paginationGoToFirstPage:lae,paginationGoToLastPage:cae,paginationGoToPage:uae}},yae={version:ge,moduleName:"@ag-grid-community/pagination",dependantModules:[FG,Cae]},O="@ag-grid-community/core",Zs="@ag-grid-community/client-side-row-model",jV="@ag-grid-community/csv-export",aC="@ag-grid-community/infinite-row-model",lC="@ag-grid-enterprise/advanced-filter",vs="@ag-grid-enterprise/charts",mu="@ag-grid-enterprise/clipboard",sf="@ag-grid-enterprise/excel-export",cC="@ag-grid-enterprise/master-detail",GD="@ag-grid-enterprise/menu",HD="@ag-grid-enterprise/range-selection",rt="@ag-grid-enterprise/row-grouping",Lr="@ag-grid-enterprise/server-side-row-model",er="@ag-grid-enterprise/side-bar",wae="@ag-grid-enterprise/status-bar",Sae={dispatchEvent:O,getState:O,getGridId:O,destroy:O,isDestroyed:O,getGridOption:O,setGridOption:O,updateGridOptions:O,setNodesSelected:O,selectAll:O,deselectAll:O,selectAllFiltered:O,deselectAllFiltered:O,selectAllOnCurrentPage:O,deselectAllOnCurrentPage:O,getSelectedNodes:O,getSelectedRows:O,redrawRows:O,setRowNodeExpanded:O,getRowNode:O,addRenderedRowListener:O,getRenderedNodes:O,forEachNode:O,getFirstDisplayedRow:O,getFirstDisplayedRowIndex:O,getLastDisplayedRow:O,getLastDisplayedRowIndex:O,getDisplayedRowAtIndex:O,getDisplayedRowCount:O,getModel:O,getVerticalPixelRange:O,getHorizontalPixelRange:O,ensureColumnVisible:O,ensureIndexVisible:O,ensureNodeVisible:O,getFocusedCell:O,clearFocusedCell:O,setFocusedCell:O,tabToNextCell:O,tabToPreviousCell:O,setFocusedHeader:O,addEventListener:O,addGlobalListener:O,removeEventListener:O,removeGlobalListener:O,expireValueCache:O,getValue:O,getCellValue:O,showColumnMenuAfterButtonClick:O,showColumnMenuAfterMouseClick:O,showColumnMenu:O,hidePopupMenu:O,onSortChanged:O,getPinnedTopRowCount:O,getPinnedBottomRowCount:O,getPinnedTopRow:O,getPinnedBottomRow:O,showLoadingOverlay:O,showNoRowsOverlay:O,hideOverlay:O,setGridAriaProperty:O,refreshCells:O,flashCells:O,refreshHeader:O,isAnimationFrameQueueEmpty:O,flushAllAnimationFrames:O,getSizesForCurrentTheme:O,getCellRendererInstances:O,addRowDropZone:O,removeRowDropZone:O,getRowDropZoneParams:O,getColumnDef:O,getColumnDefs:O,sizeColumnsToFit:O,setColumnGroupOpened:O,getColumnGroup:O,getProvidedColumnGroup:O,getDisplayNameForColumn:O,getDisplayNameForColumnGroup:O,getColumn:O,getColumns:O,applyColumnState:O,getColumnState:O,resetColumnState:O,getColumnGroupState:O,setColumnGroupState:O,resetColumnGroupState:O,isPinning:O,isPinningLeft:O,isPinningRight:O,getDisplayedColAfter:O,getDisplayedColBefore:O,setColumnVisible:O,setColumnsVisible:O,setColumnPinned:O,setColumnsPinned:O,getAllGridColumns:O,getDisplayedLeftColumns:O,getDisplayedCenterColumns:O,getDisplayedRightColumns:O,getAllDisplayedColumns:O,getAllDisplayedVirtualColumns:O,moveColumn:O,moveColumnByIndex:O,moveColumns:O,setColumnWidth:O,setColumnWidths:O,getLeftDisplayedColumnGroups:O,getCenterDisplayedColumnGroups:O,getRightDisplayedColumnGroups:O,getAllDisplayedColumnGroups:O,autoSizeColumn:O,autoSizeColumns:O,autoSizeAllColumns:O,undoCellEditing:O,redoCellEditing:O,getCellEditorInstances:O,getEditingCells:O,stopEditing:O,startEditingCell:O,getCurrentUndoSize:O,getCurrentRedoSize:O,isAnyFilterPresent:O,onFilterChanged:O,isColumnFilterPresent:O,getFilterInstance:O,getColumnFilterInstance:O,destroyFilter:O,setFilterModel:O,getFilterModel:O,getColumnFilterModel:O,setColumnFilterModel:O,showColumnFilter:O,isQuickFilterPresent:O,getQuickFilter:O,resetQuickFilter:O,paginationIsLastPageFound:O,paginationGetPageSize:O,paginationGetCurrentPage:O,paginationGetTotalPages:O,paginationGetRowCount:O,paginationGoToNextPage:O,paginationGoToPreviousPage:O,paginationGoToFirstPage:O,paginationGoToLastPage:O,paginationGoToPage:O,expandAll:O,collapseAll:O,onRowHeightChanged:O,setRowCount:O,getCacheBlockState:O,onGroupExpandedOrCollapsed:Zs,refreshClientSideRowModel:Zs,forEachLeafNode:Zs,forEachNodeAfterFilter:Zs,forEachNodeAfterFilterAndSort:Zs,resetRowHeights:Zs,applyTransaction:Zs,applyTransactionAsync:Zs,flushAsyncTransactions:Zs,getBestCostNodeSelection:Zs,getDataAsCsv:jV,exportDataAsCsv:jV,refreshInfiniteCache:aC,purgeInfiniteCache:aC,getInfiniteRowCount:aC,isLastRowIndexKnown:aC,getAdvancedFilterModel:lC,setAdvancedFilterModel:lC,showAdvancedFilterBuilder:lC,hideAdvancedFilterBuilder:lC,getChartModels:vs,getChartRef:vs,getChartImageDataURL:vs,downloadChart:vs,openChartToolPanel:vs,closeChartToolPanel:vs,createRangeChart:vs,createPivotChart:vs,createCrossFilterChart:vs,updateChart:vs,restoreChart:vs,copyToClipboard:mu,cutToClipboard:mu,copySelectedRowsToClipboard:mu,copySelectedRangeToClipboard:mu,copySelectedRangeDown:mu,pasteFromClipboard:mu,getDataAsExcel:sf,exportDataAsExcel:sf,getSheetDataForExcel:sf,getMultipleSheetsAsExcel:sf,exportMultipleSheetsAsExcel:sf,addDetailGridInfo:cC,removeDetailGridInfo:cC,getDetailGridInfo:cC,forEachDetailGridInfo:cC,showContextMenu:GD,showColumnChooser:GD,hideColumnChooser:GD,getCellRanges:HD,addCellRange:HD,clearRangeSelection:HD,addAggFunc:rt,addAggFuncs:rt,clearAggFuncs:rt,setColumnAggFunc:rt,isPivotMode:rt,getPivotResultColumn:rt,setValueColumns:rt,getValueColumns:rt,removeValueColumn:rt,removeValueColumns:rt,addValueColumn:rt,addValueColumns:rt,setRowGroupColumns:rt,removeRowGroupColumn:rt,removeRowGroupColumns:rt,addRowGroupColumn:rt,addRowGroupColumns:rt,getRowGroupColumns:rt,moveRowGroupColumn:rt,setPivotColumns:rt,removePivotColumn:rt,removePivotColumns:rt,addPivotColumn:rt,addPivotColumns:rt,getPivotColumns:rt,setPivotResultColumns:rt,getPivotResultColumns:rt,getServerSideSelectionState:Lr,setServerSideSelectionState:Lr,applyServerSideTransaction:Lr,applyServerSideTransactionAsync:Lr,applyServerSideRowData:Lr,retryServerSideLoads:Lr,flushServerSideAsyncTransactions:Lr,refreshServerSide:Lr,getServerSideGroupLevelState:Lr,isSideBarVisible:er,setSideBarVisible:er,setSideBarPosition:er,openToolPanel:er,closeToolPanel:er,getOpenedToolPanel:er,refreshToolPanel:er,isToolPanelShowing:er,getToolPanelInstance:er,getSideBar:er,getStatusPanel:wae},Di="clientSide",si="serverSide",vu="infinite",_ae={onGroupExpandedOrCollapsed:[Di],refreshClientSideRowModel:[Di],forEachLeafNode:[Di],forEachNodeAfterFilter:[Di],forEachNodeAfterFilterAndSort:[Di],resetRowHeights:[Di],applyTransaction:[Di],applyTransactionAsync:[Di],flushAsyncTransactions:[Di],getBestCostNodeSelection:[Di],getServerSideSelectionState:[si],setServerSideSelectionState:[si],applyServerSideTransaction:[si],applyServerSideTransactionAsync:[si],applyServerSideRowData:[si],retryServerSideLoads:[si],flushServerSideAsyncTransactions:[si],refreshServerSide:[si],getServerSideGroupLevelState:[si],refreshInfiniteCache:[vu],purgeInfiniteCache:[vu],getInfiniteRowCount:[vu],isLastRowIndexKnown:[vu],expandAll:[Di,si],collapseAll:[Di,si],onRowHeightChanged:[Di,si],setRowCount:[vu,si],getCacheBlockState:[vu,si]},bae={getValue:{version:"v31.3",new:"getCellValue"},getFirstDisplayedRow:{version:"v31.1",new:"getFirstDisplayedRowIndex"},getLastDisplayedRow:{version:"v31.1",new:"getLastDisplayedRowIndex"},getModel:{version:"v31.1",message:"Please use the appropriate grid API methods instead."},setColumnVisible:{version:"v31.1",old:"setColumnVisible(key,visible)",new:"setColumnsVisible([key],visible)"},setColumnPinned:{version:"v31.1",old:"setColumnPinned(key,pinned)",new:"setColumnsPinned([key],pinned)"},moveColumn:{version:"v31.1",old:"moveColumn(key, toIndex)",new:"moveColumns([key], toIndex)"},setColumnWidth:{version:"v31.1",old:"setColumnWidth(col, width)",new:"setColumnWidths([{key: col, newWidth: width}])"},autoSizeColumn:{version:"v31.1",old:"autoSizeColumn(key, skipHeader)",new:"autoSizeColumns([key], skipHeader)"},addAggFunc:{version:"v31.1",old:"addAggFunc(key, func)",new:"addAggFuncs({ key: func })"},removeValueColumn:{version:"v31.1",old:"removeValueColumn(colKey)",new:"removeValueColumns([colKey])"},addValueColumn:{version:"v31.1",old:"addValueColumn(colKey)",new:"addValueColumns([colKey])"},removeRowGroupColumn:{version:"v31.1",old:"removeRowGroupColumn(colKey)",new:"removeRowGroupColumns([colKey])"},addRowGroupColumn:{version:"v31.1",old:"addRowGroupColumn(colKey)",new:"addRowGroupColumns([colKey])"},removePivotColumn:{version:"v31.1",old:"removePivotColumn(colKey)",new:"removePivotColumns([colKey])"},addPivotColumn:{version:"v31.1",old:"addPivotColumn(colKey)",new:"addPivotColumns([colKey])"},showColumnMenuAfterButtonClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere."},showColumnMenuAfterMouseClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere."},getFilterInstance:{version:"v31.1",message:"'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."},showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'}};function Eae(e,t){let n=Sae[e];n?Kn.__assertRegistered(n,`api.${e}`,t)&&G(`API function '${e}' not registered to module '${n}'`):ke(`Unknown API function: '${e}' on GridApi.`)}function Dae(e,t,n){let i=bae[e];if(i){let{version:r,new:o,old:a,message:l}=i,c=a??e;return(...u)=>{let h=o?`Please use ${o} instead. `:"";return G(`Since ${r} api.${c} is deprecated. ${h}${l??""}`),t.apply(t,u)}}let s=_ae[e];return s?(...r)=>{let o=n.rowModel.getType();if(!s.includes(o)){ke(`api.${e} can only be called when gridOptions.rowModelType is ${s.join(" or ")}`);return}return t.apply(t,r)}:t}var Rae={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"}},Ho=(e,t)=>(t.rowModelType??"clientSide")==="clientSide"?{module:"@ag-grid-enterprise/row-grouping"}:null,Tae={enableRowGroup:Ho,rowGroup:Ho,rowGroupIndex:Ho,enablePivot:Ho,enableValue:Ho,pivot:Ho,pivotIndex:Ho,aggFunc:Ho,cellEditor:e=>e.cellEditor==="agRichSelect"||e.cellEditor==="agRichSelectCellEditor"?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:e=>{let t=["columnsMenuTab","generalMenuTab"];return e.menuTabs?.some(n=>t.includes(n))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],dependencies:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],dependencies:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],dependencies:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>Su},Iae={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0},Aae=Object.keys(Iae),Su={objectName:"colDef",allProperties:Aae,docsUrl:"column-properties/",deprecations:Rae,validations:Tae},Mae=()=>({advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."},suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."}}),Pae={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0},Fae=()=>({sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",dependencies:e=>{let t=e.rowModelType??"clientSide";switch(t){case"clientSide":{let n=`treeData requires 'getDataPath' in the ${t} row model.`;return e.getDataPath?null:n}case"serverSide":{let n=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${t} row model.`;return e.isServerSideGroup&&e.getServerSideGroupKey?null:n}}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],dependencies:e=>{switch(e.rowModelType??"clientSide"){case"clientSide":return null;case"serverSide":return e.suppressServerSideInfiniteScroll?"groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll":null}return null}},groupHideOpenParents:{supportedRowModels:["clientSide"],dependencies:{groupTotalRow:[void 0,"bottom"]}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},columnDefs:()=>Su,defaultColDef:()=>Su,defaultColGroupDef:()=>Su,autoGroupColumnDef:()=>Su}),xae=()=>({objectName:"gridOptions",allProperties:[...hf.ALL_PROPERTIES,...ff.EVENT_CALLBACKS],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:Mae(),validations:Fae()}),Oae=class extends k{constructor(){super(...arguments),this.beanName="validationService"}wireBeans(e){this.beans=e,this.gridOptions=e.gridOptions}postConstruct(){this.processGridOptions(this.gridOptions)}processGridOptions(e){this.processOptions(e,xae())}processColumnDefs(e){this.processOptions(e,Su)}warnMissingApiFunction(e){Eae(e,this.gridId)}validateApiFunction(e,t){return Dae(e,t,this.beans)}processOptions(e,t){let{validations:n,deprecations:i,allProperties:s,propertyExceptions:r,objectName:o,docsUrl:a}=t;s&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...r??[],...Object.keys(i)],s,o,a);let l=new Set;Object.keys(e).forEach(u=>{let h=i[u];if(h)if("renamed"in h){let{renamed:I,version:T}=h;l.add(`As of v${T}, ${String(u)} is deprecated. Please use ${String(I)} instead.`),e[I]=e[u]}else{let{message:I,version:T}=h;l.add(`As of v${T}, ${String(u)} is deprecated. ${I??""}`)}let f=e[u];if(f==null||f===!1)return;let g=n[u],v;if(g)if(typeof g=="function"){let I=g(e,this.gridOptions);if(!I)return;if("objectName"in I){let T=e[u];if(Array.isArray(T)){T.forEach(x=>{this.processOptions(x,I)});return}this.processOptions(e[u],I);return}v=I}else v=g;else return;let{module:y,dependencies:C,supportedRowModels:E}=v;if(E){let I=this.gridOptions.rowModelType??"clientSide";if(!E.includes(I)){l.add(`${String(u)} is not supported with the '${I}' row model.`);return}}if(y){let I=Array.isArray(y)?y:[y],T=!0;if(I.forEach(x=>{Kn.__assertRegistered(x,String(u),this.gridId)||(T=!1,l.add(`${String(u)} is only available when ${x} is loaded.`))}),!T)return}if(C){let I=this.checkForWarning(u,C,e);if(I){l.add(I);return}}}),l.size>0&&l.forEach(u=>{G(u)})}checkForWarning(e,t,n){if(typeof t=="function")return t(n,this.gridOptions);let s=Object.entries(t).find(([a,l])=>{let c=n[a];return!l.includes(c)});if(!s)return null;let[r,o]=s;return o.length>1?`'${String(e)}' requires '${r}' to be one of [${o.join(", ")}].`:`'${String(e)}' requires '${r}' to be ${o[0]}.`}checkProperties(e,t,n,i,s){let r=["__ob__","__v_skip","__metadata__"],o=HZ(Object.getOwnPropertyNames(e),[...r,...t,...n],n);if(ji(o,(a,l)=>{let c=`invalid ${i} property '${a}' did you mean any of these: ${l.slice(0,8).join(", ")}.`;n.includes("context")&&(c+=`
If you are trying to annotate ${i} with application data, use the '${i}.context' property instead.`),G(c)}),Object.keys(o).length>0&&s){let a=this.getFrameworkOverrides().getDocLink(s);G(`to see all the valid ${i} properties please check: ${a}`)}}},Nae={version:ge,moduleName:"@ag-grid-community/core"},kae={version:ge,moduleName:"@ag-grid-community/core-validations",beans:[Oae]},xG={version:ge,moduleName:"@ag-grid-community/core-community-features",dependantModules:[Nae,kae,qie,_te,eae,Are,Vse,yae,Yoe]},Lae=class extends k{constructor(){super(...arguments),this.beanName="gridDestroyService",this.destroyCalled=!1}wireBeans(e){this.beans=e}destroy(){if(this.destroyCalled)return;let e={type:"gridPreDestroyed",state:this.beans.stateService?.getState()??{}};this.eventService.dispatchEvent(e),this.destroyCalled=!0,this.beans.ctrlsService.get("gridCtrl")?.destroyGridUi(),this.beans.context.destroy(),super.destroy()}isDestroyCalled(){return this.destroyCalled}},fC=new Set(["gridPreDestroyed","fillStart","pasteStart"]),Vae=e=>e==="checkboxSelected"||e==="rowClicked"||e==="spaceKey"||e==="uiSelectAll"||e==="uiSelectAllCurrentPage"||e==="uiSelectAllFiltered",Bae=new Map([...hf.BOOLEAN_PROPERTIES.map(e=>[e,$D]),...hf.NUMBER_PROPERTIES.map(e=>[e,JB]),["groupAggFiltering",e=>typeof e=="function"?e:$D(e)],["pageSize",Xs(1)],["autoSizePadding",Xs(0)],["keepDetailRowsCount",Xs(1)],["rowBuffer",Xs(0)],["infiniteInitialRowCount",Xs(1)],["cacheOverflowSize",Xs(1)],["cacheBlockSize",Xs(1)],["serverSideInitialRowCount",Xs(1)],["viewportRowModelPageSize",Xs(1)],["viewportRowModelBufferSize",Xs(0)]]);function OG(e,t){let n=Bae.get(e);return n?n(t):t}function Gae(e){let t={};return Object.entries(e).forEach(([n,i])=>{let s=OG(n,i);t[n]=s}),t}var NG=class kG extends k{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new Tu,this.globalEventHandlerFactory=t=>(n,i)=>{if(!this.isAlive())return;let s=fC.has(n);if(s&&!t||!s&&t)return;let r=ff.getCallbackForEvent(n),o=this.gridOptions[r];typeof o=="function"&&this.frameworkOverrides.wrapOutgoing(()=>{o(i)})}}wireBeans(t){this.gridOptions=t.gridOptions,this.eGridDiv=t.eGridDiv,this.validationService=t.validationService,this.environment=t.environment,this.api=t.gridApi}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){let t=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),t),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.getScrollbarWidth(),this.addManagedEventListeners({gridOptionsChanged:({options:n})=>{this.updateGridOptions({options:n,force:!0,source:"gridOptionsUpdated"})}})}get(t){return this.gridOptions[t]??Pae[t]}getCallback(t){return this.mergeGridCommonParams(this.gridOptions[t])}exists(t){return j(this.gridOptions[t])}mergeGridCommonParams(t){return t&&(i=>{let s=i;return s.api=this.api,s.context=this.gridOptionsContext,t(s)})}updateGridOptions({options:t,force:n,source:i="api"}){let s={id:kG.changeSetId++,properties:[]},r=[];Object.entries(t).forEach(([o,a])=>{i==="api"&&KX[o]&&G(`${o} is an initial property and cannot be updated.`);let l=OG(o,a),c=n||typeof l=="object"&&i==="api",u=this.gridOptions[o];if(c||u!==l){this.gridOptions[o]=l;let h={type:o,currentValue:l,previousValue:u,changeSet:s,source:i};r.push(h)}}),this.validationService?.processGridOptions(this.gridOptions),s.properties=r.map(o=>o.type),r.forEach(o=>{this.gridOptions.debug&&$i(`Updated property ${o.type} from`,o.previousValue," to ",o.currentValue),this.propertyEventService.dispatchEvent(o)})}addPropertyEventListener(t,n){this.propertyEventService.addEventListener(t,n)}removePropertyEventListener(t,n){this.propertyEventService.removeEventListener(t,n)}getScrollbarWidth(){if(this.scrollbarWidth==null){let n=typeof this.gridOptions.scrollbarWidth=="number"&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:fZ();n!=null&&(this.scrollbarWidth=n,this.eventService.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}isRowModelType(t){return this.gridOptions.rowModelType===t||t==="clientSide"&&Ie(this.gridOptions.rowModelType)}isDomLayout(t){return(this.gridOptions.domLayout??"normal")===t}isRowSelection(){return this.gridOptions.rowSelection==="single"||this.gridOptions.rowSelection==="multiple"}useAsyncEvents(){return!this.get("suppressAsyncEvents")}isGetRowHeightFunction(){return typeof this.gridOptions.getRowHeight=="function"}getRowHeightForNode(t,n=!1,i){if(i==null&&(i=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(n)return{height:i,estimated:!0};let r={node:t,data:t.data},o=this.getCallback("getRowHeight")(r);if(this.isNumeric(o))return o===0&&G("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,o),estimated:!1}}return t.detail&&this.get("masterDetail")?this.getMasterDetailRowHeight():{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:i,estimated:!1}}getMasterDetailRowHeight(){return this.get("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}}getRowHeightAsNumber(){if(!this.gridOptions.rowHeight||Ie(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();let t=this.environment.refreshRowHeightVariable();return t!==-1?t:(G("row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())}isNumeric(t){return!isNaN(t)&&typeof t=="number"&&isFinite(t)}getDomDataKey(){return this.domDataKey}getDomData(t,n){let i=t[this.getDomDataKey()];return i?i[n]:void 0}setDomData(t,n,i){let s=this.getDomDataKey(),r=t[s];Ie(r)&&(r={},t[s]=r),r[n]=i}getDocument(){let t=null;return this.gridOptions.getDocument&&j(this.gridOptions.getDocument)?t=this.gridOptions.getDocument():this.eGridDiv&&(t=this.eGridDiv.ownerDocument),t&&j(t)?t:document}getWindow(){return this.getDocument().defaultView||window}getRootNode(){return this.eGridDiv.getRootNode()}getActiveDomElement(){return this.getRootNode().activeElement}getAsyncTransactionWaitMillis(){return j(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50}isAnimateRows(){return this.get("ensureDomOrder")?!1:this.get("animateRows")}isGroupRowsSticky(){return!(this.get("paginateChildRows")||this.get("groupHideOpenParents")||this.isDomLayout("print"))}isColumnsSortingCoupledToGroup(){return!this.gridOptions.autoGroupColumnDef?.comparator&&!this.get("treeData")}getGroupAggFiltering(){let t=this.gridOptions.groupAggFiltering;if(typeof t=="function")return this.getCallback("groupAggFiltering");if(t===!0)return()=>!0}getGrandTotalRow(){let t=this.gridOptions.grandTotalRow;if(t)return t;if(this.gridOptions.groupIncludeTotalFooter)return"bottom"}getGroupTotalRowCallback(){let t=this.get("groupTotalRow");if(typeof t=="function")return this.getCallback("groupTotalRow");if(t)return()=>t;let n=this.get("groupIncludeFooter");if(typeof n=="function"){let i=this.getCallback("groupIncludeFooter");return s=>i(s)?"bottom":void 0}return()=>n?"bottom":void 0}isGroupMultiAutoColumn(){return this.gridOptions.groupDisplayType?this.gridOptions.groupDisplayType==="multipleColumns":this.get("groupHideOpenParents")}isGroupUseEntireRow(t){return t?!1:this.gridOptions.groupDisplayType==="groupRows"}getGridCommonParams(){return{api:this.api,context:this.gridOptionsContext}}addGridCommonParams(t){let n=t;return n.api=this.api,n.context=this.gridOptionsContext,n}getRowIdCallback(){let t=this.getCallback("getRowId");return t===void 0?t:n=>{let i=t(n);return typeof i!="string"&&(G("The getRowId callback must return a string. The ID ",i," is being cast to a string."),i=String(i)),i}}};NG.changeSetId=0;var Hae=NG,Uae=class extends k{constructor(){super(...arguments),this.beanName="headerPositionUtils"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}findHeader(e,t){let n,i;if(Ft(e.column)?n=this.visibleColsService.getGroupAtDirection(e.column,t):(i=`getCol${t}`,n=this.visibleColsService[i](e.column)),!n)return;let{headerRowIndex:s}=e;if(this.getHeaderRowType(s)!=="filter"){let a=[n];for(;n.getParent();)n=n.getParent(),a.push(n);n=a[a.length-1-s]}let{column:r,headerRowIndex:o}=this.getHeaderIndexToFocus(n,s);return{column:r,headerRowIndex:o}}getHeaderIndexToFocus(e,t){let n;if(Ft(e)&&this.isAnyChildSpanningHeaderHeight(e)&&e.isPadding()){let i=e;n=i.getLeafColumns()[0];let s=n;for(;s!==i;)t++,s=s.getParent()}return{column:n||e,headerRowIndex:t}}isAnyChildSpanningHeaderHeight(e){return e?e.getLeafColumns().some(t=>t.isSpanHeaderHeight()):!1}getColumnVisibleParent(e,t){let n=this.getHeaderRowType(t),i=n==="filter",s=n==="column",r=i?e:e.getParent(),o=t-1,a=o;if(s&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;r&&r.isPadding();)r=r.getParent(),o--;a=o,o<0&&(r=e,o=t,a=void 0)}return{column:r,headerRowIndex:o,headerRowIndexWithoutSpan:a}}getColumnVisibleChild(e,t,n="After"){let i=this.getHeaderRowType(t),s=e,r=t+1,o=r;if(i==="group"){let a=e.getDisplayedLeafColumns(),l=n==="After"?a[0]:xe(a),c=[],u=l;for(;u.getParent()!==e;)u=u.getParent(),c.push(u);if(s=l,l.isSpanHeaderHeight())for(let h=c.length-1;h>=0;h--){let f=c[h];if(!f.isPadding()){s=f;break}r++}else s=xe(c),s||(s=l)}return{column:s,headerRowIndex:r,headerRowIndexWithoutSpan:o}}getHeaderRowType(e){let t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){let n=this.visibleColsService.getAllCols(),i=n[t==="start"?0:n.length-1];if(!i)return;let r=this.ctrlsService.getHeaderRowContainerCtrl(i.getPinned()).getRowType(e);if(r=="group"){let o=this.visibleColsService.getColGroupAtLevel(i,e);return{headerRowIndex:e,column:o}}return{headerRowIndex:r==null?-1:e,column:i}}},Wae=class extends k{constructor(){super(...arguments),this.beanName="localeService"}getLocaleTextFunc(){let e=this.gos.getCallback("getLocaleText");if(e)return(n,i,s)=>e({key:n,defaultValue:i,variableValues:s});let t=this.gos.get("localeText");return(n,i,s)=>{let r=t&&t[n];if(r&&s&&s.length){let o=0;for(;!(o>=s.length||r.indexOf("${variable}")===-1);)r=r.replace("${variable}",s[o++])}return r??i}}},jae=class extends k{constructor(){super(...arguments),this.beanName="apiEventService",this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new oR(this.getFrameworkOverrides())}addEventListener(e,t){let n=this.frameworkEventWrappingService.wrap(t),i=this.gos.useAsyncEvents()&&!fC.has(e),s=i?this.asyncEventListeners:this.syncEventListeners;s.has(e)||s.set(e,new Set),s.get(e).add(n),this.eventService.addEventListener(e,n,i)}removeEventListener(e,t){let n=this.frameworkEventWrappingService.unwrap(t),s=!!this.asyncEventListeners.get(e)?.delete(n);s||this.syncEventListeners.get(e)?.delete(n),this.eventService.removeEventListener(e,n,s)}addGlobalListener(e){let t=this.frameworkEventWrappingService.wrapGlobal(e);if(this.gos.useAsyncEvents()){let i=(r,o)=>{fC.has(r)&&t(r,o)},s=(r,o)=>{fC.has(r)||t(r,o)};this.globalEventListenerPairs.set(e,{syncListener:i,asyncListener:s}),this.eventService.addGlobalListener(i,!1),this.eventService.addGlobalListener(s,!0)}else this.syncGlobalEventListeners.add(t),this.eventService.addGlobalListener(t,!1)}removeGlobalListener(e){let t=this.frameworkEventWrappingService.unwrapGlobal(e);if(this.globalEventListenerPairs.has(t)){let{syncListener:i,asyncListener:s}=this.globalEventListenerPairs.get(t);this.eventService.removeGlobalListener(i,!1),this.eventService.removeGlobalListener(s,!0),this.globalEventListenerPairs.delete(e)}else this.syncGlobalEventListeners.delete(t),this.eventService.removeGlobalListener(t,!1)}destroyEventListeners(e,t){e.forEach((n,i)=>{n.forEach(s=>this.eventService.removeEventListener(i,s,t)),n.clear()}),e.clear()}destroyGlobalListeners(e,t){e.forEach(n=>this.eventService.removeGlobalListener(n,t)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener:e,asyncListener:t})=>{this.eventService.removeGlobalListener(e,!1),this.eventService.removeGlobalListener(t,!0)}),this.globalEventListenerPairs.clear()}},zae=class extends k{constructor(){super(...arguments),this.beanName="pageBoundsListener"}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages();let t={type:"paginationChanged",animate:e?e.animate:!1,newData:e?e.newData:!1,newPage:e?e.newPage:!1,newPageSize:e?e.newPageSize:!1,keepRenderedRows:e?e.keepRenderedRows:!1};this.eventService.dispatchEvent(t)}calculatePages(){this.paginationService?this.paginationService.calculatePages():this.pageBoundsService.calculateBounds(0,this.rowModel.getRowCount()-1)}},$ae=class extends k{constructor(){super(...arguments),this.beanName="pageBoundsService",this.pixelOffset=0}wireBeans(e){this.rowModel=e.rowModel}getFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getCurrentPageHeight(){return Ie(this.topRowBounds)||Ie(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){let e=this.topRowBounds?this.topRowBounds.rowTop:0,t=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:e,pageLastPixel:t}}calculateBounds(e,t){this.topRowBounds=this.rowModel.getRowBounds(e),this.topRowBounds&&(this.topRowBounds.rowIndex=e),this.bottomRowBounds=this.rowModel.getRowBounds(t),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=t),this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){let e=j(this.topRowBounds)?this.topRowBounds.rowTop:0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},qae=class extends k{constructor(){super(),this.beanName="ariaAnnouncementService",this.descriptionContainer=null,this.announceValue=Yn(this.announceValue.bind(this),200)}wireBeans(e){this.eGridDiv=e.eGridDiv}postConstruct(){let e=this.gos.getDocument(),t=this.descriptionContainer=e.createElement("div");t.classList.add("ag-aria-description-container"),dB(t,"polite"),ZX(t,"additions text"),XX(t,!0),this.eGridDiv.appendChild(t)}announceValue(e){this.descriptionContainer&&(this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=e)},50))}destroy(){super.destroy();let{descriptionContainer:e}=this;e&&(An(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null}},Kae=class extends k{constructor(){super(...arguments),this.beanName="columnAnimationService",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.suppressAnimation=!1,this.animationThreadCount=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)}finish(){this.active&&this.flush(()=>{this.active=!1})}executeNextVMTurn(e){this.active?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;let e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(e){if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){e();return}let t=n=>{for(;n.length;){let i=n.pop();i&&i()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>t(this.executeNextFuncs),0),window.setTimeout(()=>{e(),t(this.executeLaterFuncs)},200)})}},Qae=class extends k{constructor(){super(...arguments),this.beanName="columnHoverService"}setMouseOver(e){this.selectedColumns=e;let t={type:"columnHoverChanged"};this.eventService.dispatchEvent(t)}clearMouseOver(){this.selectedColumns=null;let e={type:"columnHoverChanged"};this.eventService.dispatchEvent(e)}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}},Yae=class extends k{constructor(){super(...arguments),this.beanName="overlayService",this.state=0,this.showInitialOverlay=!0}wireBeans(e){this.userComponentFactory=e.userComponentFactory,this.rowModel=e.rowModel,this.columnModel=e.columnModel}postConstruct(){let e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e}),this.addManagedPropertyListener("loading",e)}registerOverlayWrapperComp(e){this.overlayWrapperComp=e,this.updateOverlayVisibility()}showLoadingOverlay(){this.showInitialOverlay=!1;let e=this.gos.get("loading");!e&&(e!==void 0||this.gos.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1,!(this.gos.get("loading")||this.gos.get("suppressNoRowsOverlay"))&&this.doShowNoRowsOverlay()}hideOverlay(){this.showInitialOverlay=!1,!this.gos.get("loading")&&this.doHideOverlay()}updateOverlayVisibility(){let e=this.gos.get("loading");this.showInitialOverlay&&e===void 0&&!this.gos.get("suppressLoadingOverlay")&&(e=!this.gos.get("columnDefs")||!this.columnModel.isReady()||!this.gos.get("rowData")&&this.gos.isRowModelType("clientSide")),e?this.state!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,this.rowModel.isEmpty()&&!this.gos.get("suppressNoRowsOverlay")&&this.gos.isRowModelType("clientSide")?this.state!==2&&this.doShowNoRowsOverlay():this.state!==0&&this.doHideOverlay())}doShowLoadingOverlay(){this.state=1,this.showOverlay(this.userComponentFactory.getLoadingOverlayCompDetails({}),"ag-overlay-loading-wrapper","loadingOverlayComponentParams")}doShowNoRowsOverlay(){this.state=2,this.showOverlay(this.userComponentFactory.getNoRowsOverlayCompDetails({}),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams")}doHideOverlay(){this.state=0,this.overlayWrapperComp.hideOverlay()}showOverlay(e,t,n){let i=e.newAgStackInstance();this.overlayWrapperComp.showOverlay(i,t,n)}},Jae=class extends k{constructor(){super(...arguments),this.beanName="rowCssClassCalculator"}wireBeans(e){this.stylingService=e.stylingService}getInitialRowClasses(e){let t=[];return j(e.extraCssClass)&&t.push(e.extraCssClass),t.push("ag-row"),t.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&t.push("ag-opacity-zero"),t.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&t.push("ag-row-pinned"),e.rowNode.isSelected()&&t.push("ag-row-selected"),e.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&t.push("ag-row-loading"),e.fullWidthRow&&t.push("ag-full-width-row"),e.expandable&&(t.push("ag-row-group"),t.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&t.push("ag-row-dragging"),bV(t,this.processClassesFromGridOptions(e.rowNode)),bV(t,this.preProcessRowClassRules(e.rowNode)),t.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&t.push("ag-row-first"),e.lastRowOnPage&&t.push("ag-row-last"),e.fullWidthRow&&(e.pinned==="left"&&t.push("ag-cell-last-left-pinned"),e.pinned==="right"&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(e){let t=[],n=r=>{typeof r=="string"?t.push(r):Array.isArray(r)&&r.forEach(o=>t.push(o))},i=this.gos.get("rowClass");if(i){if(typeof i=="function")return G("rowClass should not be a function, please use getRowClass instead"),[];n(i)}let s=this.gos.getCallback("getRowClass");if(s){let r={data:e.data,node:e,rowIndex:e.rowIndex},o=s(r);n(o)}return t}preProcessRowClassRules(e){let t=[];return this.processRowClassRules(e,n=>{t.push(n)},()=>{}),t}processRowClassRules(e,t,n){let i=this.gos.addGridCommonParams({data:e.data,node:e,rowIndex:e.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),i,t,n)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}},Xae=class extends k{constructor(){super(...arguments),this.beanName="rowContainerHeightService",this.scrollY=0,this.uiBodyHeight=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=uZ(),this.gos.get("debug")&&$i("RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;let t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,n=this.getUiBodyHeight();(t!==this.scrollY||n!==this.uiBodyHeight)&&(this.scrollY=t,this.uiBodyHeight=n,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;let e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.gos.get("debug")&&$i(`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){let t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){let t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return t.bottom-t.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;let t=this.modelHeight-this.getUiBodyHeight(),n=e/t;return this.maxScrollY*n}},Zae=class extends k{constructor(){super(...arguments),this.beanName="rowNodeSorter"}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.showRowGroupColsService=e.showRowGroupColsService}postConstruct(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup())}doFullSort(e,t){let n=(s,r)=>({currentPos:r,rowNode:s}),i=e.map(n);return i.sort(this.compareRowNodes.bind(this,t)),i.map(s=>s.rowNode)}compareRowNodes(e,t,n){let i=t.rowNode,s=n.rowNode;for(let r=0,o=e.length;r<o;r++){let a=e[r],l=a.sort==="desc",c=this.getValue(i,a.column),u=this.getValue(s,a.column),h,f=this.getComparator(a,i);if(f?h=f(c,u,i,s,l):h=wX(c,u,this.isAccentedSort),!isNaN(h)&&h!==0)return a.sort==="asc"?h:h*-1}return t.currentPos-n.currentPos}getComparator(e,t){let n=e.column,i=n.getColDef().comparator;if(i!=null)return i;if(!n.getColDef().showRowGroup)return;let s=!t.group&&n.getColDef().field;if(!s)return;let r=this.columnModel.getColDefCol(s);if(r)return r.getColDef().comparator}getValue(e,t){if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);if(e.rowGroupColumn===t){if(this.gos.isGroupUseEntireRow(this.columnModel.isPivotActive())){let r=e.allLeafChildren?.[0];return r?this.valueService.getValue(t,r,!1,!1):void 0}let s=this.showRowGroupColsService?.getShowRowGroupCol(t.getId());return s?e.groupData?.[s.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return this.valueService.getValue(t,e,!1,!1)}},IC=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,t){if(e.children)for(let n=0;n<e.children.length;n++)this.depthFirstSearchChangedPath(e.children[n],t);t(e.rowNode)}depthFirstSearchEverything(e,t,n){if(e.childrenAfterGroup)for(let i=0;i<e.childrenAfterGroup.length;i++){let s=e.childrenAfterGroup[i];s.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[i],t,n):n&&t(s)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,n=!1){this.active&&!n?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,n=0;for(;!this.mapToItems[t.id];){let i={rowNode:t,children:null};this.mapToItems[t.id]=i,n++,t=t.parent}return n}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let n=e;for(;n;)this.nodeIdsToColumns[n.id]||(this.nodeIdsToColumns[n.id]={}),t.forEach(i=>this.nodeIdsToColumns[n.id][i.getId()]=!0),n=n.parent}linkPathItems(e,t){let n=e;for(let i=0;i<t;i++){let s=this.mapToItems[n.id],r=this.mapToItems[n.parent.id];r.children||(r.children=[]),r.children.push(s),n=n.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;let n=this.createPathItems(e);this.linkPathItems(e,n),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;let n=this.nodeIdsToColumns[e.id];return t.filter(s=>n[s.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;let n=this.nodeIdsToColumns[e.id];return t.filter(s=>!n[s.getId()])}},LG=class extends k{constructor(){super(...arguments),this.beanName="selectionService",this.selectedNodes=new Map,this.selectionCtx=new nse}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.selectionCtx.init(this.rowModel),this.rowSelection=this.gos.get("rowSelection"),this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.rowSelection=this.gos.get("rowSelection"),this.deselectAllRowNodes({source:"api"})}),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes(),this.selectionCtx.reset()}isMultiselect(){return this.rowSelection==="multiple"}overrideSelectionValue(e,t){if(!Vae(t))return e;let n=this.selectionCtx.getRoot();return n?n.isSelected()??!1:!0}setNodesSelected(e){let{newValue:t,clearSelection:n,suppressFinishActions:i,rangeSelect:s,nodes:r,event:o,source:a}=e;if(r.length===0)return 0;if(r.length>1&&!this.isMultiselect())return G("cannot multi select while rowSelection='single'"),0;let l=this.groupSelectsChildren&&e.groupSelectsFiltered===!0,c=r.map(h=>h.footer?h.sibling:h);if(s){if(c.length>1)return G("cannot range select while selecting multiple rows"),0;let h=c[0],f=this.overrideSelectionValue(t,a);if(this.isMultiselect()){if(this.selectionCtx.isInRange(h)){let g=this.selectionCtx.truncate(h);return f&&this.selectRange(g.discard,!1,a),this.selectRange(g.keep,f,a)}else if(this.selectionCtx.getRoot()!==h){let y=this.selectionCtx.extend(h,this.groupSelectsChildren);return f&&this.selectRange(y.discard,!1,a),this.selectRange(y.keep,f,a)}}}i||this.selectionCtx.setRoot(c[0]);let u=0;for(let h=0;h<c.length;h++){let f=c[h];l&&f.group||f.selectThisNode(t,o,a)&&u++,this.groupSelectsChildren&&f.childrenAfterGroup?.length&&(u+=this.selectChildren(f,t,l,a))}return i||(t&&(n||!this.isMultiselect())&&(u+=this.clearOtherNodes(c[0],a)),u>0&&(this.updateGroupsFromChildrenSelections(a),this.dispatchSelectionChanged(a))),u}selectRange(e,t,n){let i=0;return e.forEach(s=>{if(s.group&&this.groupSelectsChildren)return;s.selectThisNode(t,void 0,n)&&i++}),i>0&&(this.updateGroupsFromChildrenSelections(n),this.dispatchSelectionChanged(n)),i}selectChildren(e,t,n,i){let s=n?e.childrenAfterAggFilter:e.childrenAfterGroup;return Ie(s)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:n,source:i,nodes:s})}getSelectedNodes(){let e=[];return this.selectedNodes.forEach(t=>{t&&e.push(t)}),e}getSelectedRows(){let e=[];return this.selectedNodes.forEach(t=>{t&&t.data&&e.push(t.data)}),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){let t=new Map;this.selectedNodes.forEach((n,i)=>{n&&e(n)&&t.set(i,n)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsChildren||this.rowModel.getType()!=="clientSide")return!1;let i=this.rowModel.getRootNode();t||(t=new IC(!0,i),t.setInactive());let s=!1;return t.forEachChangedNodeDepthFirst(r=>{if(r!==i){let o=r.calculateSelectedFromChildren();s=r.selectThisNode(o===null?!1:o,void 0,e)||s}}),s}clearOtherNodes(e,t){let n=new Map,i=0;return this.selectedNodes.forEach(s=>{if(s&&s.id!==e.id){let r=this.selectedNodes.get(s.id);i+=r.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&s.parent&&n.set(s.parent.id,s.parent)}}),n.forEach(s=>{let r=s.calculateSelectedFromChildren();s.selectThisNode(r===null?!1:r,void 0,t)}),i}onRowSelected(e){let t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}syncInOldRowNode(e,t){if(j(t)&&e.id!==t.id&&t){let i=t.id;this.selectedNodes.get(i)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.setSelectedInitialValue(!0),this.selectedNodes.set(e.id,e)):e.setSelectedInitialValue(!1)}reset(e){let t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes?.clear()}getBestCostNodeSelection(){if(this.rowModel.getType()!=="clientSide")return;let t=this.rowModel.getTopLevelNodes();if(t===null)return;let n=[];function i(s){for(let r=0,o=s.length;r<o;r++){let a=s[r];if(a.isSelected())n.push(a);else{let l=a;l.group&&l.children&&i(l.children)}}}return i(t),n}isEmpty(){let e=0;return this.selectedNodes.forEach(t=>{t&&e++}),e===0}deselectAllRowNodes(e){let t=o=>o.selectThisNode(!1,void 0,i),n=this.rowModel.getType()==="clientSide",{source:i,justFiltered:s,justCurrentPage:r}=e;if(r||s){if(!n){ke("selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(s,r).forEach(t)}else this.selectedNodes.forEach(o=>{o&&t(o)}),this.reset(i);this.selectionCtx.reset(),n&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)}getSelectedCounts(e,t){let n=0,i=0,s=r=>{this.groupSelectsChildren&&r.group||(r.isSelected()?n++:r.selectable&&i++)};return this.getNodesToSelect(e,t).forEach(s),{selectedCount:n,notSelectedCount:i}}getSelectAllState(e,t){let{selectedCount:n,notSelectedCount:i}=this.getSelectedCounts(e,t);return n===0&&i===0?!1:n>0&&i>0?null:n>0}hasNodesToSelect(e=!1,t=!1){return this.getNodesToSelect(e,t).filter(n=>n.selectable).length>0}getNodesToSelect(e=!1,t=!1){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);let n=[];if(t)return this.forEachNodeOnPage(s=>{if(!s.group){n.push(s);return}if(!s.expanded){let r=o=>{n.push(o),o.childrenAfterFilter?.length&&o.childrenAfterFilter.forEach(r)};r(s);return}this.groupSelectsChildren||n.push(s)}),n;let i=this.rowModel;return e?(i.forEachNodeAfterFilter(s=>{n.push(s)}),n):(i.forEachNode(s=>{n.push(s)}),n)}forEachNodeOnPage(e){let t=this.pageBoundsService.getFirstRow(),n=this.pageBoundsService.getLastRow();for(let i=t;i<=n;i++){let s=this.rowModel.getRow(i);s&&e(s)}}selectAllRowNodes(e){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);let{source:t,justFiltered:n,justCurrentPage:i}=e,s=this.getNodesToSelect(n,i);s.forEach(r=>r.selectThisNode(!0,void 0,t)),this.selectionCtx.setRoot(s[0]??null),this.selectionCtx.setEndRange(xe(s)??null),this.rowModel.getType()==="clientSide"&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t),this.dispatchSelectionChanged(t)}getSelectionState(){let e=[];return this.selectedNodes.forEach(t=>{t?.id&&e.push(t.id)}),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return;let n=new Set(e),i=[];this.rowModel.forEachNode(s=>{n.has(s.id)&&i.push(s)}),this.setNodesSelected({newValue:!0,nodes:i,source:t})}dispatchSelectionChanged(e){let t={type:"selectionChanged",source:e};this.eventService.dispatchEvent(t)}},ele=class extends k{constructor(){super(...arguments),this.beanName="selectableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){this.addManagedPropertyListener("isRowSelectable",()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(e=!1){let t=!!this.gos.get("rowSelection"),n=this.gos.get("isRowSelectable");if(!t||!n)return;let i=this.gos.get("groupSelectsChildren"),s=this.rowModel.getType()==="clientSide"&&i,r=[],o=a=>{if(e&&!a.group)return;if(s&&a.group){let c=a.childrenAfterGroup.some(u=>u.selectable===!0);a.setRowSelectable(c,!0);return}let l=n?n(a):!0;a.setRowSelectable(l,!0),!l&&a.isSelected()&&r.push(a)};if(s){let a=this.rowModel;new IC(!1,a.getRootNode()).forEachChangedNodeDepthFirst(o,!0,!0)}else this.rowModel.forEachNode(o);r.length&&this.selectionService.setNodesSelected({nodes:r,newValue:!1,source:"selectableChanged"}),s&&this.selectionService instanceof LG&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}},zV=["asc","desc",null],tle=class extends k{constructor(){super(...arguments),this.beanName="sortController"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.showRowGroupColsService=e.showRowGroupColsService}progressSort(e,t,n){let i=this.getNextSortDirection(e);this.setSortForColumn(e,i,t,n)}setSortForColumn(e,t,n,i){t!=="asc"&&t!=="desc"&&(t=null);let s=this.gos.isColumnsSortingCoupledToGroup(),r=[e];if(s&&e.getColDef().showRowGroup){let c=this.funcColsService.getSourceColumnsForGroupColumn(e)?.filter(u=>u.isSortable());c&&(r=[e,...c])}r.forEach(l=>l.setSort(t,i));let o=(n||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"),a=[];if(!o){let l=this.clearSortBarTheseColumns(r,i);a.push(...l)}this.updateSortIndex(e),a.push(...r),this.dispatchSortChangedEvents(i,a)}updateSortIndex(e){let t=this.gos.isColumnsSortingCoupledToGroup(),n=this.showRowGroupColsService?.getShowRowGroupCol(e.getId()),i=t&&n||e,s=this.getColumnsWithSortingOrdered();this.columnModel.getAllCols().forEach(a=>a.setSortIndex(null));let r=s.filter(a=>t&&a.getColDef().showRowGroup?!1:a!==i);(i.getSort()?[...r,i]:r).forEach((a,l)=>{a.setSortIndex(l)})}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let t=this.columnModel.getAllCols().filter(n=>!!n.getSort());return t&&t.length>0}dispatchSortChangedEvents(e,t){let n={type:"sortChanged",source:e};t&&(n.columns=t),this.eventService.dispatchEvent(n)}clearSortBarTheseColumns(e,t){let n=[];return this.columnModel.getAllCols().forEach(i=>{e.includes(i)||(i.getSort()&&n.push(i),i.setSort(void 0,t))}),n}getNextSortDirection(e){let t;if(e.getColDef().sortingOrder?t=e.getColDef().sortingOrder:this.gos.get("sortingOrder")?t=this.gos.get("sortingOrder"):t=zV,!Array.isArray(t)||t.length<=0)return G(`sortingOrder must be an array with at least one element, currently it's ${t}`),null;let n=t.indexOf(e.getSort()),i=n<0,s=n==t.length-1,r;return i||s?r=t[0]:r=t[n+1],zV.indexOf(r)<0?(G("invalid sort type ",r),null):r}getIndexedSortMap(){let e=this.columnModel.getAllCols().filter(r=>!!r.getSort());if(this.columnModel.isPivotMode()){let r=this.gos.isColumnsSortingCoupledToGroup();e=e.filter(o=>{let a=!!o.getAggFunc(),l=!o.isPrimary(),c=r?this.showRowGroupColsService?.getShowRowGroupCol(o.getId()):o.getColDef().showRowGroup;return a||l||c})}let t=this.funcColsService.getRowGroupColumns().filter(r=>!!r.getSort()),n={};e.forEach((r,o)=>n[r.getId()]=o),e.sort((r,o)=>{let a=r.getSortIndex(),l=o.getSortIndex();if(a!=null&&l!=null)return a-l;if(a==null&&l==null){let c=n[r.getId()],u=n[o.getId()];return c>u?1:-1}else return l==null?-1:1});let i=this.gos.isColumnsSortingCoupledToGroup()&&!!t.length;i&&(e=[...new Set(e.map(r=>this.showRowGroupColsService?.getShowRowGroupCol(r.getId())??r))]);let s=new Map;return e.forEach((r,o)=>s.set(r,o)),i&&t.forEach(r=>{let o=this.showRowGroupColsService.getShowRowGroupCol(r.getId());s.set(r,s.get(o))}),s}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([e,t],[n,i])=>t-i).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){let t=this.gos.isColumnsSortingCoupledToGroup(),n=!!e.getColDef().showRowGroup;return t&&n}getDisplaySortForColumn(e){let t=this.funcColsService.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSort();let i=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,s=i[0].getSort();return i.every(o=>o.getSort()==s)?s:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}},nle=class extends k{constructor(){super(...arguments),this.beanName="syncService",this.waitingForColumns=!1}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.rowModel=e.rowModel}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.ctrlsService.whenReady(()=>{let e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){this.columnModel.setColumnDefs(e??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.dispatchGridReadyEvent();let e=Kn.__isRegistered("@ag-grid-enterprise/core",this.gridId);this.gos.get("debug")&&$i(`initialised successfully, enterprise = ${e}`)}dispatchGridReadyEvent(){let e={type:"gridReady"};this.eventService.dispatchEvent(e)}setColumnDefs(e){let t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.columnModel.setColumnDefs(t,wu(e.source))}}},ile="paste",sle=class extends k{constructor(){super(...arguments),this.beanName="changeDetectionService"}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer}postConstruct(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){e.source!==ile&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,t){if(this.gos.get("suppressChangeDetection"))return;let n=[e];if(this.clientSideRowModel&&!e.isRowPinned()){let i=this.gos.get("aggregateOnlyChangedColumns"),s=new IC(i,this.clientSideRowModel.getRootNode());s.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(s),s.forEachChangedNodeDepthFirst(r=>{n.push(r)})}this.rowRenderer.refreshCells({rowNodes:n})}},rle=class extends k{constructor(){super(...arguments),this.beanName="expressionService",this.expressionToFunctionCache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);ke("value should be either a string or a function",e)}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(n){return $i("Processing of the expression failed"),$i("Expression = ",e),$i("Params = ",t),$i("Exception = ",n),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];let t=this.createFunctionBody(e),n=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=n,n}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}},ole=class extends k{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,n){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=n)}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},ale=class extends k{constructor(){super(...arguments),this.beanName="valueService",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionService=e.expressionService,this.columnModel=e.columnModel,this.valueCache=e.valueCache,this.dataTypeService=e.dataTypeService}postConstruct(){this.initialised||this.init()}init(){this.isSsrm=this.gos.isRowModelType("serverSide"),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;let e=n=>this.callColumnCellValueChangedHandler(n),t=this.gos.useAsyncEvents();this.eventService.addEventListener("cellValueChanged",e,t),this.addDestroyFunc(()=>this.eventService.removeEventListener("cellValueChanged",e,t)),this.addManagedPropertyListener("treeData",n=>this.isTreeData=n.currentValue)}getValue(e,t,n=!1,i=!1){if(this.initialised||this.init(),!t)return;let s=e.getColDef(),r=s.field,o=e.getColId(),a=t.data,l,c=t.groupData&&t.groupData[o]!==void 0,u=!i&&t.aggData&&t.aggData[o]!==void 0,h=this.isSsrm&&i&&!!e.getColDef().aggFunc,f=this.isSsrm&&t.footer&&t.field&&(e.getColDef().showRowGroup===!0||e.getColDef().showRowGroup===t.field);if(n&&s.filterValueGetter?l=this.executeFilterValueGetter(s.filterValueGetter,a,e,t):this.isTreeData&&u?l=t.aggData[o]:this.isTreeData&&s.valueGetter?l=this.executeValueGetter(s.valueGetter,a,e,t):this.isTreeData&&r&&a?l=af(a,r,e.isFieldContainsDots()):c?l=t.groupData[o]:u?l=t.aggData[o]:s.valueGetter?l=this.executeValueGetter(s.valueGetter,a,e,t):f?l=af(a,t.field,e.isFieldContainsDots()):r&&a&&!h&&(l=af(a,r,e.isFieldContainsDots())),this.cellExpressions&&typeof l=="string"&&l.indexOf("=")===0){let g=l.substring(1);l=this.executeValueGetter(g,a,e,t)}if(l==null){let g=this.getOpenedGroup(t,e);if(g!=null)return g}return l}parseValue(e,t,n,i){let s=e.getColDef(),r=this.gos.addGridCommonParams({node:t,data:t?.data,oldValue:i,newValue:n,colDef:s,column:e}),o=s.valueParser;return j(o)?typeof o=="function"?o(r):this.expressionService.evaluate(o,r):n}formatValue(e,t,n,i,s=!0){let r=null,o,a=e.getColDef();if(i?o=i:s&&(o=a.valueFormatter),o){let l=this.gos.addGridCommonParams({value:n,node:t,data:t?t.data:null,colDef:a,column:e});typeof o=="function"?r=o(l):r=this.expressionService.evaluate(o,l)}else if(a.refData)return a.refData[n]||"";return r==null&&Array.isArray(n)&&(r=n.join(", ")),r}getOpenedGroup(e,t){if(!this.gos.get("showOpenedGroup")||!t.getColDef().showRowGroup)return;let i=t.getColDef().showRowGroup,s=e.parent;for(;s!=null;){if(s.rowGroupColumn&&(i===!0||i===s.rowGroupColumn.getColId()))return s.key;s=s.parent}}setValue(e,t,n,i){let s=this.columnModel.getColDefCol(t);if(!e||!s)return!1;Ie(e.data)&&(e.data={});let{field:r,valueSetter:o}=s.getColDef();if(Ie(r)&&Ie(o))return G("you need either field or valueSetter set on colDef for editing to work"),!1;if(this.dataTypeService&&!this.dataTypeService.checkType(s,n))return G("Data type of the new value does not match the cell data type of the column"),!1;let a=this.gos.addGridCommonParams({node:e,data:e.data,oldValue:this.getValue(s,e),newValue:n,colDef:s.getColDef(),column:s});a.newValue=n;let l;if(j(o)?typeof o=="function"?l=o(a):l=this.expressionService.evaluate(o,a):l=this.setValueUsingField(e.data,r,n,s.isFieldContainsDots()),l===void 0&&(l=!0),!l)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),a.newValue=this.getValue(s,e);let c={type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:a.column,api:a.api,colDef:a.colDef,context:a.context,data:e.data,node:e,oldValue:a.oldValue,newValue:a.newValue,value:a.newValue,source:i};return this.eventService.dispatchEvent(c),!0}callColumnCellValueChangedHandler(e){let t=e.colDef.onCellValueChanged;typeof t=="function"&&this.getFrameworkOverrides().wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,n,i){if(!t)return!1;let s=!1;if(!i)s=e[t]===n,s||(e[t]=n);else{let r=t.split("."),o=e;for(;r.length>0&&o;){let a=r.shift();r.length===0?(s=o[a]===n,s||(o[a]=n)):o=o[a]}}return!s}executeFilterValueGetter(e,t,n,i){let s=this.gos.addGridCommonParams({data:t,node:i,column:n,colDef:n.getColDef(),getValue:this.getValueCallback.bind(this,i)});return typeof e=="function"?e(s):this.expressionService.evaluate(e,s)}executeValueGetter(e,t,n,i){let s=n.getColId(),r=this.valueCache.getValue(i,s);if(r!==void 0)return r;let o=this.gos.addGridCommonParams({data:t,node:i,column:n,colDef:n.getColDef(),getValue:this.getValueCallback.bind(this,i)}),a;return typeof e=="function"?a=e(o):a=this.expressionService.evaluate(e,o),this.valueCache.setValue(i,s,a),a}getValueCallback(e,t){let n=this.columnModel.getColDefCol(t);return n?this.getValue(n,e):null}getKeyForNode(e,t){let n=this.getValue(e,t),i=e.getColDef().keyCreator,s=n;if(i){let r=this.gos.addGridCommonParams({value:n,colDef:e.getColDef(),column:e,node:t,data:t.data});s=i(r)}return typeof s=="string"||s==null||(s=String(s),s==="[object Object]"&&G("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),s}},rR=class{};rR.gridOptions=void 0;function VG(e,t,n){if(!t)return ke("No gridOptions provided to createGrid"),{};let i=new cle().create(e,t,s=>{let r=new kse(e);s.createBean(r)},void 0,n);if(!Object.isFrozen(t)&&!n?.frameworkOverrides){let s="https://ag-grid.com/javascript-data-grid/grid-interface/#grid-api";Object.defineProperty(t,"api",{get:()=>{ke(`gridOptions.api is no longer supported. See ${s}.`)},configurable:!0})}return i}var lle=1,cle=class{create(e,t,n,i,s){let r={};rR.gridOptions?(zi(r,rR.gridOptions,!0,!0),r=B(B({},r),t)):r=t;let o=Gae(r),a=o.gridId??String(lle++),l=this.getRegisteredModules(s,a),c=this.createBeansList(o.rowModelType,l,a),u=this.createProvidedBeans(e,o,s);if(!c){ke("Failed to create grid.");return}let h={providedBeanInstances:u,beanClasses:c,gridId:a,beanInitComparator:bse,beanDestroyComparator:Ese,derivedBeans:[pse]},f=new lee(h);return this.registerModuleUserComponents(f,l),this.registerControllers(f,l),this.registerModuleApiFunctions(f,l),n(f),f.getBean("syncService").start(),i&&i(f),f.getBean("gridApi")}registerControllers(e,t){let n=e.getBean("ctrlsFactory");t.forEach(i=>{i.controllers&&i.controllers.forEach(s=>n.register(s))})}getRegisteredModules(e,t){let n=e?e.modules:null,i=Kn.__getRegisteredModules(t),s=[],r={},o=(a,l,c)=>{(h=>{r[h.moduleName]||(r[h.moduleName]=!0,s.push(h),Kn.__register(h,a,c))})(l),l.dependantModules&&l.dependantModules.forEach(h=>o(a,h,c))};return o(!!n?.length||!Kn.__isPackageBased(),xG,void 0),n&&n.forEach(a=>o(!0,a,t)),i&&i.forEach(a=>o(!Kn.__isPackageBased(),a,void 0)),s}registerModuleUserComponents(e,t){let n=this.extractModuleEntity(t,s=>s.userComponents?s.userComponents:[]),i=e.getBean("userComponentRegistry");n.forEach(s=>{i.registerDefaultComponent(s.name,s.classImp)})}registerModuleApiFunctions(e,t){let n=e.getBean("apiFunctionService");t.forEach(i=>{let s=i.apiFunctions??{};Object.keys(s).forEach(o=>{n?.addFunction(o,s[o])})})}createProvidedBeans(e,t,n){let i=n?n.frameworkOverrides:null;Ie(i)&&(i=new NR);let s={gridOptions:t,eGridDiv:e,globalEventListener:n?n.globalEventListener:null,globalSyncEventListener:n?n.globalSyncEventListener:null,frameworkOverrides:i};return n&&n.providedBeanInstances&&Object.assign(s,n.providedBeanInstances),s}createBeansList(e="clientSide",t,n){let i=t.filter(l=>!l.rowModel||l.rowModel===e),s={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!s[e]){ke("Could not find row model for rowModelType = ",e);return}if(!Kn.__assertRegistered(s[e],`rowModelType = '${e}'`,n))return;let r=[Ase,Tse,Uae,Lae,hse,WZ,wse,Sse,aie,OB,Xae,sie,Wae,Xie,fee,zX,Fse,Hae,lse,LG,MX,Tte,$ae,zae,Yie,rle,AX,iie,ole,ale,Kie,rie,uee,xse,nie,Mse,use,ise,tie,tle,Qae,Kae,ele,sle,lie,gse,Jae,Zae,Rse,Ose,Ise,Dse,nle,Yae,cie,jae,qae,uie,NX,mse,kX,xX,vse,Cse,jX,OX,UX,yse,WX],o=this.extractModuleEntity(i,l=>l.beans?l.beans:[]);r.push(...o);let a=[];return r.forEach(l=>{a.indexOf(l)<0&&a.push(l)}),a}extractModuleEntity(e,t){return[].concat(...e.map(t))}},BG=class extends k{constructor(){super(...arguments),this.beanName="rowModelHelperService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){let e=this.rowModel;switch(e.getType()){case"clientSide":this.clientSideRowModel=e;break;case"infinite":this.infiniteRowModel=e;break;case"serverSide":this.serverSideRowModel=e;break}}getClientSideRowModel(){return this.clientSideRowModel}getInfiniteRowModel(){return this.infiniteRowModel}getServerSideRowModel(){return this.serverSideRowModel}};function ule(e){e.expansionService.expandAll(!0)}function dle(e){e.expansionService.expandAll(!1)}function hle(e){let t=e.rowModelHelperService?.getClientSideRowModel(),n=e.rowModelHelperService?.getServerSideRowModel();t?t.onRowHeightChanged():n&&n.onRowHeightChanged()}function fle(e,t,n){let i=e.rowModelHelperService?.getServerSideRowModel();if(i){if(e.funcColsService.isRowGroupEmpty()){i.setRowCount(t,n);return}ke("setRowCount cannot be used while using row grouping.");return}let s=e.rowModelHelperService?.getInfiniteRowModel();if(s){s.setRowCount(t,n);return}}function ple(e){return e.rowNodeBlockLoader?.getBlockState()??{}}var gle={version:ge,moduleName:"@ag-grid-community/csrm-ssrm-shared-api",apiFunctions:{expandAll:ule,collapseAll:dle,onRowHeightChanged:hle}},mle={version:ge,moduleName:"@ag-grid-community/ssrm-infinite-shared-api",apiFunctions:{setRowCount:fle,getCacheBlockState:ple}},GG=class{wrap(e,t,n=[],i){let s=this.createWrapper(e,i);return t.forEach(r=>{this.createMethod(s,r,!0)}),n.forEach(r=>{this.createMethod(s,r,!1)}),s}unwrap(e){return e}createMethod(e,t,n){e.addMethod(t,this.createMethodProxy(e,t,n))}createMethodProxy(e,t,n){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(n&&G("Framework component is missing the method "+t+"()"),null)}}};function vle(e,t){if(!e)return!1;let n=(o,a)=>{let l=t[o.id],c=t[a.id],u=l!==void 0,h=c!==void 0,f=u&&h,g=!u&&!h;return f?l-c:g?o.__objectId-a.__objectId:u?1:-1},i,s,r=!1;for(let o=0;o<e.length-1;o++)if(i=e[o],s=e[o+1],n(i,s)>0){r=!0;break}return r?(e.sort(n),!0):!1}var LR=class{};LR.CHART_TYPE_TO_SERIES_TYPE={column:"bar",groupedColumn:"bar",stackedColumn:"bar",normalizedColumn:"bar",bar:"bar",groupedBar:"bar",stackedBar:"bar",normalizedBar:"bar",line:"line",scatter:"scatter",bubble:"bubble",pie:"pie",donut:"donut",doughnut:"donut",area:"area",stackedArea:"area",normalizedArea:"area",histogram:"histogram",radarLine:"radar-line",radarArea:"radar-area",nightingale:"nightingale",radialColumn:"radial-column",radialBar:"radial-bar",sunburst:"sunburst",rangeBar:"range-bar",rangeArea:"range-area",boxPlot:"box-plot",treemap:"treemap",heatmap:"heatmap",waterfall:"waterfall"};LR.COMBO_CHART_TYPES=["columnLineCombo","areaColumnCombo","customCombo"];LR.SERIES_GROUP_TYPES=["grouped","stacked","normalized"];var Mu=typeof global>"u"?{}:global;Mu.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;Mu.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;Mu.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;Mu.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;Mu.Node=typeof Node>"u"?{}:Node;Mu.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var Cle="ROOT_NODE_ID",UD=0,yle=class{constructor(e,t,n,i,s,r){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gos=t,this.eventService=n,this.funcColsService=i,this.beans=r,this.selectionService=s,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=Cle,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return ZV(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if(typeof e=="string"){G("rowData must be an array.");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);let t=this.rootNode,n=this.rootNode.sibling;t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?t.allLeafChildren=e.map(i=>this.createNode(i,this.rootNode,UD)):(t.allLeafChildren=[],t.childrenAfterGroup=[]),n&&(n.childrenAfterFilter=t.childrenAfterFilter,n.childrenAfterGroup=t.childrenAfterGroup,n.childrenAfterAggFilter=t.childrenAfterAggFilter,n.childrenAfterSort=t.childrenAfterSort,n.childrenMapped=t.childrenMapped,n.allLeafChildren=t.allLeafChildren)}updateRowData(e,t){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);let n={remove:[],update:[],add:[]},i=[];return this.executeRemove(e,n,i),this.executeUpdate(e,n,i),this.executeAdd(e,n),this.updateSelection(i,"rowDataChanged"),t&&vle(this.rootNode.allLeafChildren,t),n}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){let t={type:"rowDataUpdateStarted",firstRowData:e?.length?e[0]:null};this.eventService.dispatchEvent(t)}updateSelection(e,t){let n=e.length>0;if(n&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),this.selectionService.updateGroupsFromChildrenSelections(t),n){let i={type:"selectionChanged",source:t};this.eventService.dispatchEvent(i)}}executeAdd(e,t){let{add:n,addIndex:i}=e;if(dn(n))return;let s=n.map(o=>this.createNode(o,this.rootNode,UD)),r=this.rootNode.allLeafChildren;if(typeof i=="number"&&i>=0){let o=r.length,a=i;if(this.gos.get("treeData")&&i>0&&o>0){for(let h=0;h<o;h++)if(r[h]?.rowIndex==i-1){a=h+1;break}}let c=r.slice(0,a),u=r.slice(a,r.length);this.rootNode.allLeafChildren=[...c,...s,...u]}else this.rootNode.allLeafChildren=[...r,...s];this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=r),t.add=s}executeRemove(e,t,n){let{remove:i}=e;if(dn(i))return;let s={};i.forEach(r=>{let o=this.lookupRowNode(r);o&&(o.isSelected()&&n.push(o),o.clearRowTopAndRowIndex(),s[o.id]=!0,delete this.allNodesMap[o.id],t.remove.push(o))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren?.filter(r=>!s[r.id])??null,this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,t,n){let{update:i}=e;dn(i)||i.forEach(s=>{let r=this.lookupRowNode(s);r&&(r.updateData(s),!r.selectable&&r.isSelected()&&n.push(r),this.setMasterForRow(r,s,UD,!1),t.update.push(r))})}lookupRowNode(e){let t=this.gos.getRowIdCallback(),n;if(t){let i=t({data:e,level:0});if(n=this.allNodesMap[i],!n)return ke(`could not find row id=${i}, data item was not found for this id`),null}else if(n=this.rootNode.allLeafChildren?.find(i=>i.data===e),!n)return ke("could not find data item as object was not found",e),ke("Consider using getRowId to help the Grid find matching row data"),null;return n||null}createNode(e,t,n){let i=new Gr(this.beans);return i.group=!1,this.setMasterForRow(i,e,n,!0),t&&(i.parent=t),i.level=n,i.setDataAndId(e,this.nextId.toString()),this.allNodesMap[i.id]&&G(`duplicate node id '${i.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[i.id]=i,this.nextId++,i}setMasterForRow(e,t,n,i){if(this.gos.get("treeData"))e.setMaster(!1),i&&(e.expanded=!1);else{if(this.gos.get("masterDetail")){let o=this.gos.get("isRowMaster");o?e.setMaster(o(t)):e.setMaster(!0)}else e.setMaster(!1);if(i){let o=this.funcColsService.getRowGroupColumns(),a=o?o.length:0,l=n+a;e.expanded=e.master?this.isExpanded(l):!1}}}isExpanded(e){let t=this.gos.get("groupDefaultExpanded");return t===-1?!0:e<t}},wle=class extends k{constructor(){super(...arguments),this.beanName="rowModel",this.onRowHeightChanged_debounced=Yn(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}wireBeans(e){this.beans=e,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.selectionService=e.selectionService,this.valueCache=e.valueCache,this.environment=e.environment,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggregationStage=e.aggregationStage,this.pivotStage=e.pivotStage,this.filterAggregatesStage=e.filterAggregatesStage}postConstruct(){let e=this.refreshModel.bind(this,{step:"group"}),t=!this.gos.get("suppressAnimationFrame"),n=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedEventListeners({newColumnsLoaded:n,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new Gr(this.beans),this.nodeManager=new yle(this.rootNode,this.gos,this.eventService,this.funcColsService,this.selectionService,this.beans)}addPropertyListeners(){let e=new Set(["treeData","masterDetail"]),t=new Set(["groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),n=new Set(["excludeChildrenWhenTreeDataFiltering"]),i=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),s=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),r=new Set(["postSortRows","groupDisplayType","accentedSort"]),o=new Set([]),a=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),l=[...e,...t,...n,...i,...i,...s,...r,...o,...a];this.addManagedPropertyListeners(l,c=>{let u=c.changeSet?.properties;if(!u)return;let h=f=>u.some(g=>f.has(g));if(h(e)){this.setRowData(this.rootNode.allLeafChildren.map(f=>f.data));return}if(h(t)){this.refreshModel({step:"group"});return}if(h(n)){this.refreshModel({step:"filter"});return}if(h(i)){this.refreshModel({step:"pivot"});return}if(h(s)){this.refreshModel({step:"aggregate"});return}if(h(r)){this.refreshModel({step:"sort"});return}if(h(o)){this.refreshModel({step:"filter_aggregates"});return}h(a)&&this.refreshModel({step:"map"})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){let e=this.gos.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))}ensureRowHeightsValid(e,t,n,i){let s,r=!1;do{s=!1;let o=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(o,n),c=Math.min(a,i);for(let u=l;u<=c;u++){let h=this.getRow(u);if(h.rowHeightEstimated){let f=this.gos.getRowHeightForNode(h);h.setRowHeight(f.height),s=!0,r=!0}}s&&this.setRowTopAndRowIndex()}while(s);return r}setRowTopAndRowIndex(){let e=this.environment.getDefaultRowHeight(),t=0,n=new Set,i=this.gos.isDomLayout("normal");for(let s=0;s<this.rowsToDisplay.length;s++){let r=this.rowsToDisplay[s];if(r.id!=null&&n.add(r.id),r.rowHeight==null){let o=this.gos.getRowHeightForNode(r,i,e);r.setRowHeight(o.height,o.estimated)}r.setRowTop(t),r.setRowIndex(s),t+=r.rowHeight}return n}clearRowTopAndRowIndex(e,t){let n=e.isActive(),i=r=>{r&&r.id!=null&&!t.has(r.id)&&r.clearRowTopAndRowIndex()},s=r=>{if(i(r),i(r.detailNode),i(r.sibling),r.hasChildren()&&r.childrenAfterGroup){let o=r.level==-1;n&&!o&&!r.expanded||r.childrenAfterGroup.forEach(s)}};s(this.rootNode)}ensureRowsAtPixel(e,t,n=0){let i=this.getRowIndexAtPixel(t),s=this.getRow(i),r=!this.gos.get("suppressAnimationFrame");return s===e[0]?!1:(e.forEach(o=>{Qn(this.rootNode.allLeafChildren,o)}),e.forEach((o,a)=>{pC(this.rootNode.allLeafChildren,o,Math.max(i+n,0)+a)}),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:r}),!0)}highlightRowAtPixel(e,t){let n=t!=null?this.getRowIndexAtPixel(t):null,i=n!=null?this.getRow(n):null;if(!i||!e||i===e||t==null){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null);return}let s=this.getHighlightPosition(t,i);this.lastHighlightedRow&&this.lastHighlightedRow!==i&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),i.setHighlighted(s),this.lastHighlightedRow=i}getHighlightPosition(e,t){if(!t){let s=this.getRowIndexAtPixel(e);if(t=this.getRow(s||0),!t)return 1}let{rowTop:n,rowHeight:i}=t;return e-n<i/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;let t=this.rootNode.sibling?1:0,n=this.rootNode.childrenAfterAggFilter;return(n?n.length:0)+t}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let n=e;if(this.rowsToDisplay[0].footer){if(e===0)return 0;n-=1}let i=this.rootNode.childrenAfterSort[n];if(this.gos.get("groupHideOpenParents"))for(;i.expanded&&i.childrenAfterSort&&i.childrenAfterSort.length>0;)i=i.childrenAfterSort[0];return i.rowIndex}getRowBounds(e){if(Ie(this.rowsToDisplay))return null;let t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){let e=this.gos.isAnimateRows();this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;let t=this.gos.isAnimateRows(),i=e.columns.length===0||e.columns.some(s=>s.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:i,keepRenderedRows:!0,animate:t})}onSortChanged(){let e=this.gos.isAnimateRows();this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(e){let t=dn(e),n=new IC(!1,this.rootNode);return(t||this.gos.get("treeData"))&&n.setInactive(),n}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction")||e.rowNodeTransactions==null)return!1;let t=e.rowNodeTransactions.filter(i=>i.add!=null&&i.add.length>0||i.remove!=null&&i.remove.length>0);return t==null||t.length==0}buildRefreshModelParams(e){let t="group",n={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",sort:"sort",pivot:"pivot"};if(j(e)&&(t=n[e]),Ie(t)){ke(`invalid step ${e}, available steps are ${Object.keys(n).join(", ")}`);return}let i=!this.gos.get("suppressAnimationFrame");return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:i}}refreshModel(e){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.isChangeEventsDispatching())return;let t=typeof e=="object"&&"step"in e?e:this.buildRefreshModelParams(e);if(!t||this.isSuppressModelUpdateAfterUpdateTransaction(t))return;let n=this.createChangePath(t.rowNodeTransactions);switch(this.isRefreshingModel=!0,t.step){case"group":this.doRowGrouping(t.rowNodeTransactions,t.rowNodeOrder,n,!!t.afterColumnsChanged);case"filter":this.doFilter(n);case"pivot":this.doPivot(n);case"aggregate":this.doAggregate(n);case"filter_aggregates":this.doFilterAggregates(n);case"sort":this.doSort(t.rowNodeTransactions,n);case"map":this.doRowsToDisplay()}let i=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(n,i),this.isRefreshingModel=!1;let s={type:"modelUpdated",animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack};this.eventService.dispatchEvent(s)}isEmpty(){let e=Ie(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return Ie(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return j(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let n=!1,i=!1,s=[],r=this.gos.get("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(o=>{if(i)return;if(n&&(o===t||o===e)&&(i=!0,o.group&&r)){s.push(...o.allLeafChildren);return}if(!n){if(o!==t&&o!==e)return;n=!0}if(!o.group||!r){s.push(o);return}}),s}setDatasource(e){ke("should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let t=0,n=this.rowsToDisplay.length-1;if(e<=0)return 0;if(xe(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let s=-1,r=-1;for(;;){let o=Math.floor((t+n)/2),a=this.rowsToDisplay[o];if(this.isRowInPixel(a,e)||(a.rowTop<e?t=o+1:a.rowTop>e&&(n=o-1),s===t&&r===n))return o;s=t,r=n}}isRowInPixel(e,t){let n=e.rowTop,i=e.rowTop+e.rowHeight;return n<=t&&i>t}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((t,n)=>e(t,n))}forEachNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:0,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:1,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:2,index:0,includeFooterNodes:t})}forEachPivotNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:3,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){let{nodes:t,callback:n,recursionType:i,includeFooterNodes:s}=e,{index:r}=e,o=a=>{let l=t[0]?.parent;if(!l)return;let c=s&&this.gos.getGrandTotalRow(),u=this.gos.getGroupTotalRowCallback(),h=s&&u({node:l});if(l===this.rootNode){c===a&&(l.createFooter(),n(l.sibling,r++));return}h===a&&(l.createFooter(),n(l.sibling,r++))};o("top");for(let a=0;a<t.length;a++){let l=t[a];if(n(l,r++),l.hasChildren()&&!l.footer){let c=null;switch(i){case 0:c=l.childrenAfterGroup;break;case 1:c=l.childrenAfterAggFilter;break;case 2:c=l.childrenAfterSort;break;case 3:c=l.leafGroup?null:l.childrenAfterSort;break}c&&(r=this.recursivelyWalkNodesAndCallback({nodes:[...c],callback:n,recursionType:i,index:r,includeFooterNodes:s}))}}return o("bottom"),r}doAggregate(e){this.aggregationStage?.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){let t=this.gos.get("treeData"),n=this.columnModel.isPivotActive(),i=o=>{o&&o.forEach(a=>{let l=()=>{a.expanded=e,i(a.childrenAfterGroup)};if(t){j(a.childrenAfterGroup)&&l();return}if(n){!a.leafGroup&&l();return}a.group&&l()})};this.rootNode&&i(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"});let r={type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"};this.eventService.dispatchEvent(r)}doSort(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})}doRowGrouping(e,t,n,i){if(this.groupStage){if(e?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,rowNodeOrder:t,changedPath:n}):this.groupStage.execute({rowNode:this.rootNode,changedPath:n,afterColumnsChanged:i}),this.gos.get("groupSelectsChildren")&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",n)){let r={type:"selectionChanged",source:"rowGroupChanged"};this.eventService.dispatchEvent(r)}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren();this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){this.pivotStage?.execute({rowNode:this.rootNode,changedPath:e})}getCopyOfNodesMap(){return this.nodeManager.getCopyOfNodesMap()}getRowNode(e){if(typeof e=="string"&&e.indexOf(Gr.ID_PREFIX_ROW_GROUP)==0){let n;return this.forEachNode(i=>{i.id===e&&(n=i)}),n}return this.nodeManager.getRowNode(e)}setRowData(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){let e={type:"rowDataUpdated"};this.eventService.dispatchEvent(e),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];let n=this.gos.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.executeBatchUpdateRowData()},n)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();let e=[],t=[],n=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(i=>{let s=this.nodeManager.updateRowData(i.rowDataTransaction,void 0);t.push(s),i.callback&&e.push(i.callback.bind(null,s)),typeof i.rowDataTransaction.addIndex=="number"&&(n=!0)}),this.commonUpdateRowData(t,void 0,n),e.length>0&&window.setTimeout(()=>{e.forEach(i=>i())},0),t.length>0){let i={type:"asyncTransactionsFlushed",results:t};this.eventService.dispatchEvent(i)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e,t){this.valueCache.onDataChanged();let n=this.nodeManager.updateRowData(e,t),i=typeof e.addIndex=="number";return this.commonUpdateRowData([n],t,i),n}createRowNodeOrder(){if(this.gos.get("suppressMaintainUnsortedOrder"))return;let t={};if(this.rootNode&&this.rootNode.allLeafChildren)for(let n=0;n<this.rootNode.allLeafChildren.length;n++){let i=this.rootNode.allLeafChildren[n];t[i.id]=n}return t}commonUpdateRowData(e,t,n){if(!this.hasStarted)return;let i=!this.gos.get("suppressAnimationFrame");n&&(t=this.createRowNodeOrder());let s={type:"rowDataUpdated"};this.eventService.dispatchEvent(s),this.refreshModel({step:"group",rowNodeTransactions:e,rowNodeOrder:t,keepRenderedRows:!0,keepEditingRows:!0,animate:i})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){let e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);let n=t.detailNode;n&&n.setRowHeight(n.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.columnModel.isAutoRowHeightActive())return;this.resetRowHeights()}}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}};function Sle(e){e.expansionService.onGroupExpandedOrCollapsed()}function _le(e,t){e.rowModelHelperService?.getClientSideRowModel()?.refreshModel(t)}function ble(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachLeafNode(t)}function Ele(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilter(t)}function Dle(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilterAndSort(t)}function Rle(e){if(e.columnModel.isAutoRowHeightActive()){G("calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}e.rowModelHelperService?.getClientSideRowModel()?.resetRowHeights()}function Tle(e,t){return e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.updateRowData(t))}function Ile(e,t,n){e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.batchUpdateRowData(t,n))}function Ale(e){e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.flushAsyncTransactions())}function Mle(e){return e.selectionService.getBestCostNodeSelection()}var Ple=class extends k{constructor(){super(...arguments),this.beanName="filterStage"}wireBeans(e){this.filterManager=e.filterManager}execute(e){let{changedPath:t}=e;this.filter(t)}filter(e){let t=!!this.filterManager?.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){let n=(i,s)=>{i.hasChildren()&&e&&!s?i.childrenAfterFilter=i.childrenAfterGroup.filter(r=>{let o=r.childrenAfterFilter&&r.childrenAfterFilter.length>0,a=r.data&&this.filterManager.doesRowPassFilter({rowNode:r});return o||a}):i.childrenAfterFilter=i.childrenAfterGroup,i.sibling&&(i.sibling.childrenAfterFilter=i.childrenAfterFilter)};if(this.doingTreeDataFiltering()){let i=(r,o)=>{if(r.childrenAfterGroup)for(let a=0;a<r.childrenAfterGroup.length;a++){let l=r.childrenAfterGroup[a],c=o||this.filterManager.doesRowPassFilter({rowNode:l});l.childrenAfterGroup?i(r.childrenAfterGroup[a],c):n(l,c)}n(r,o)},s=r=>i(r,!1);t.executeFromRootNode(s)}else{let i=s=>n(s,!1);t.forEachChangedNodeDepthFirst(i,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},Fle=class extends k{constructor(){super(...arguments),this.beanName="flattenStage"}wireBeans(e){this.beans=e,this.columnModel=e.columnModel}execute(e){let t=e.rowNode,n=[],i=this.columnModel.isPivotMode(),s=i&&t.leafGroup,r=s?[t]:t.childrenAfterSort,o=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(o,r,n,i,0);let a=n.length>0;if(!s&&a&&o.grandTotalRow){t.createFooter();let c=o.grandTotalRow==="top";this.addRowNodeToRowsToDisplay(o,t.sibling,n,0,c)}return n}getFlattenDetails(){let e=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:this.gos.isGroupMultiAutoColumn(),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:this.gos.getGrandTotalRow(),groupTotalRow:this.gos.getGroupTotalRowCallback()}}recursivelyAddToRowsToDisplay(e,t,n,i,s){if(!dn(t))for(let r=0;r<t.length;r++){let o=t[r],a=o.hasChildren(),l=i&&!a,c=e.groupRemoveSingleChildren&&a&&o.childrenAfterGroup.length===1,u=e.groupRemoveLowestSingleChildren&&a&&o.leafGroup&&o.childrenAfterGroup.length===1,h=i&&o.leafGroup,f=e.hideOpenParents&&o.expanded&&!o.master&&!h;if(!l&&!f&&!c&&!u&&this.addRowNodeToRowsToDisplay(e,o,n,s),!(i&&o.leafGroup)){if(a){let v=c||u;if(o.expanded||v){let y=e.groupTotalRow({node:o});y||o.destroyFooter();let C=v?s:s+1;y==="top"&&(o.createFooter(),this.addRowNodeToRowsToDisplay(e,o.sibling,n,C)),this.recursivelyAddToRowsToDisplay(e,o.childrenAfterSort,n,i,C),y==="bottom"&&(o.createFooter(),this.addRowNodeToRowsToDisplay(e,o.sibling,n,C))}}else if(o.master&&o.expanded){let v=this.createDetailNode(o);this.addRowNodeToRowsToDisplay(e,v,n,s)}}}}addRowNodeToRowsToDisplay(e,t,n,i,s){s?n.unshift(t):n.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:i)}createDetailNode(e){if(j(e.detailNode))return e.detailNode;let t=new Gr(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,j(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t}},xle=class extends k{constructor(){super(...arguments),this.beanName="immutableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){let e=this.gos.exists("getRowId");return this.gos.get("resetRowDataOnUpdate")?!1:e}setRowData(e){let t=this.createTransactionForRowData(e);if(!t)return;let[n,i]=t;this.clientSideRowModel.updateRowData(n,i)}createTransactionForRowData(e){if(Ie(this.clientSideRowModel)){ke("ImmutableService only works with ClientSideRowModel");return}let t=this.gos.getRowIdCallback();if(t==null){ke("ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");return}let n={remove:[],update:[],add:[]},i=this.clientSideRowModel.getCopyOfNodesMap(),r=this.gos.get("suppressMaintainUnsortedOrder")?void 0:{};return j(e)&&e.forEach((o,a)=>{let l=t({data:o,level:0}),c=i[l];r&&(r[l]=a),c?(c.data!==o&&n.update.push(o),i[l]=void 0):n.add.push(o)}),ji(i,(o,a)=>{a&&n.remove.push(a.data)}),[n,r]}onRowDataUpdated(){let e=this.gos.get("rowData");e&&(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))}},Ole=class extends k{constructor(){super(...arguments),this.beanName="sortService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.rowNodeSorter=e.rowNodeSorter,this.showRowGroupColsService=e.showRowGroupColsService}sort(e,t,n,i,s,r){let o=this.gos.get("groupMaintainOrder"),a=this.columnModel.getCols().some(f=>f.isRowGroupActive()),l={};n&&i&&(l=this.calculateDirtyNodes(i));let c=this.columnModel.isPivotMode(),u=this.gos.getCallback("postSortRows"),h=f=>{this.pullDownGroupDataForHideOpenParents(f.childrenAfterAggFilter,!0);let g=c&&f.leafGroup;if(o&&a&&!f.leafGroup&&!r){let C=this.funcColsService.getRowGroupColumns()?.[f.level+1]?.getSort()===null,E=f.childrenAfterAggFilter.slice(0);if(f.childrenAfterSort&&!C){let I={};f.childrenAfterSort.forEach((T,x)=>{I[T.id]=x}),E.sort((T,x)=>(I[T.id]??0)-(I[x.id]??0))}f.childrenAfterSort=E}else!t||g?f.childrenAfterSort=f.childrenAfterAggFilter.slice(0):n?f.childrenAfterSort=this.doDeltaSort(f,l,s,e):f.childrenAfterSort=this.rowNodeSorter.doFullSort(f.childrenAfterAggFilter,e);if(f.sibling&&(f.sibling.childrenAfterSort=f.childrenAfterSort),this.updateChildIndexes(f),u){let y={nodes:f.childrenAfterSort};u(y)}};s&&s.forEachChangedNodeDepthFirst(h),this.updateGroupDataForHideOpenParents(s)}calculateDirtyNodes(e){let t={},n=i=>{i&&i.forEach(s=>t[s.id]=!0)};return e&&e.forEach(i=>{n(i.add),n(i.update),n(i.remove)}),t}doDeltaSort(e,t,n,i){let s=e.childrenAfterAggFilter,r=e.childrenAfterSort;if(!r)return this.rowNodeSorter.doFullSort(s,i);let o={},a=[];s.forEach(h=>{t[h.id]||!n.canSkip(h)?a.push(h):o[h.id]=!0});let l=r.filter(h=>o[h.id]),c=(h,f)=>({currentPos:f,rowNode:h}),u=a.map(c).sort((h,f)=>this.rowNodeSorter.compareRowNodes(i,h,f));return this.mergeSortedArrays(i,u,l.map(c)).map(({rowNode:h})=>h)}mergeSortedArrays(e,t,n){let i=[],s=0,r=0;for(;s<t.length&&r<n.length;)this.rowNodeSorter.compareRowNodes(e,t[s],n[r])<0?i.push(t[s++]):i.push(n[r++]);for(;s<t.length;)i.push(t[s++]);for(;r<n.length;)i.push(n[r++]);return i}updateChildIndexes(e){if(Ie(e.childrenAfterSort))return;let t=e.childrenAfterSort;for(let n=0;n<t.length;n++){let i=t[n],s=n===0,r=n===e.childrenAfterSort.length-1;i.setFirstChild(s),i.setLastChild(r),i.setChildIndex(n)}}updateGroupDataForHideOpenParents(e){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return G("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;let t=n=>{this.pullDownGroupDataForHideOpenParents(n.childrenAfterSort,!1),n.childrenAfterSort.forEach(i=>{i.hasChildren()&&t(i)})};e&&e.executeFromRootNode(n=>t(n))}pullDownGroupDataForHideOpenParents(e,t){!this.gos.get("groupHideOpenParents")||Ie(e)||e.forEach(n=>{(this.showRowGroupColsService?.getShowRowGroupCols()??[]).forEach(s=>{let r=s.getColDef().showRowGroup;if(typeof r!="string"){ke("groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}let o=r,a=this.columnModel.getColDefCol(o);if(a!==n.rowGroupColumn)if(t)n.setGroupValue(s.getId(),void 0);else{let c=n.getFirstChildOfFirstChild(a);c&&n.setGroupValue(s.getId(),c.key)}})})}},Nle=class extends k{constructor(){super(...arguments),this.beanName="sortStage"}wireBeans(e){this.sortService=e.sortService,this.sortController=e.sortController}execute(e){let t=this.sortController.getSortOptions(),n=j(t)&&t.length>0,i=n&&j(e.rowNodeTransactions)&&this.gos.get("deltaSort"),s=t.some(r=>this.gos.isColumnsSortingCoupledToGroup()?r.column.isPrimary()&&r.column.isRowGroupActive():!!r.column.getColDef().showRowGroup);this.sortService.sort(t,n,i,e.rowNodeTransactions,e.changedPath,s)}},VR="32.0.2",HG={version:VR,moduleName:"@ag-grid-community/client-side-row-model-core",rowModel:"clientSide",beans:[wle,Ple,Nle,Fle,Ole,xle]},kle={version:VR,moduleName:"@ag-grid-community/client-side-row-model-api",beans:[BG],apiFunctions:{onGroupExpandedOrCollapsed:Sle,refreshClientSideRowModel:_le,forEachLeafNode:ble,forEachNodeAfterFilter:Ele,forEachNodeAfterFilterAndSort:Dle,resetRowHeights:Rle,applyTransaction:Tle,applyTransactionAsync:Ile,flushAsyncTransactions:Ale,getBestCostNodeSelection:Mle},dependantModules:[HG,gle]},Lle={version:VR,moduleName:"@ag-grid-community/client-side-row-model",dependantModules:[HG,kle]},Vle=class extends k{setBeans(e){this.beans=e}getFileName(e){let t=this.getDefaultFileExtension();return(e==null||!e.length)&&(e=this.getDefaultFileName()),e.indexOf(".")===-1?`${e}.${t}`:e}getData(e){let t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},Ble=class{constructor(e){this.groupColumns=[];let{columnModel:t,funcColsService:n,columnNameService:i,valueService:s,gos:r,processCellCallback:o,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c}=e;this.columnModel=t,this.funcColsService=n,this.columnNameService=i,this.valueService=s,this.gos=r,this.processCellCallback=o,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=c}prepare(e){this.groupColumns=e.filter(t=>!!t.getColDef().showRowGroup)}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,n,i,s){let o=(!this.gos.get("groupHideOpenParents")||s.footer)&&this.shouldRenderGroupSummaryCell(s,e,t)?this.createValueForGroupNode(e,s):this.valueService.getValue(e,s);return this.processCell({accumulatedRowIndex:n,rowNode:s,column:e,value:o,processCellCallback:this.processCellCallback,type:i})}shouldRenderGroupSummaryCell(e,t,n){if(!(e&&e.group))return!1;if(this.groupColumns.indexOf(t)!==-1){if(e.groupData?.[t.getId()]!=null||this.gos.isRowModelType("serverSide")&&e.group)return!0;if(e.footer&&e.level===-1){let o=t.getColDef();return o==null||o.showRowGroup===!0||o.showRowGroup===this.funcColsService.getRowGroupColumns()[0].getId()}}let r=this.gos.isGroupUseEntireRow(this.columnModel.isPivotMode());return n===0&&r}getHeaderName(e,t){return e?e(this.gos.addGridCommonParams({column:t})):this.columnNameService.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:e,node:t}));let n=this.gos.get("treeData"),i=this.gos.get("suppressGroupMaintainValueType"),s=l=>{if(n||i)return l.key;let c=l.groupData?.[e.getId()];return!c||!l.rowGroupColumn||l.rowGroupColumn.getColDef().useValueFormatterForExport===!1?c:this.valueService.formatValue(l.rowGroupColumn,l,c)??c},r=t.footer,o=[s(t)];if(!this.gos.isGroupMultiAutoColumn())for(;t.parent;)t=t.parent,o.push(s(t));let a=o.reverse().join(" -> ");return r?`Total ${a}`:a}processCell(e){let{accumulatedRowIndex:t,rowNode:n,column:i,value:s,processCellCallback:r,type:o}=e;return r?{value:r(this.gos.addGridCommonParams({accumulatedRowIndex:t,column:i,node:n,value:s,type:o,parseValue:a=>this.valueService.parseValue(i,n,a,this.valueService.getValue(i,n)),formatValue:a=>this.valueService.formatValue(i,n,a)??a}))??""}:i.getColDef().useValueFormatterForExport!==!1?{value:s??"",valueFormatted:this.valueService.formatValue(i,n,s)}:{value:s??""}}},Gle=class{static download(e,t){let n=document.defaultView||window;if(!n){G("There is no `window` associated with the current `document`");return}let i=document.createElement("a"),s=n.URL.createObjectURL(t);i.setAttribute("href",s),i.setAttribute("download",e),i.style.display="none",document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:n})),document.body.removeChild(i),n.setTimeout(()=>{n.URL.revokeObjectURL(s)},0)}},$V=`\r
`,Hle=class extends Ble{constructor(e){super(e),this.isFirstLine=!0,this.result="";let{suppressQuotes:t,columnSeparator:n}=e;this.suppressQuotes=t,this.columnSeparator=n}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,$V),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((n,i)=>{i!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(n.data.value||""),n.mergeAcross&&this.appendEmptyCells(n.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,n,i){n!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(i)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,n){t!=0&&(this.result+=this.columnSeparator);let i=this.extractRowCellValue(e,t,t,"csv",n);this.result+=this.putInQuotes(i.valueFormatted??i.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(G("unknown value type during csv conversion"),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=$V),this.isFirstLine=!1}},Ule=class extends Vle{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.gridSerializer=e.gridSerializer}postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(e){let t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){G("Export cancelled. Export is not allowed as per your configuration.");return}let t=this.getMergedParams(e),n=this.getData(t),i=new Blob(["\uFEFF",n],{type:"text/plain"}),s=typeof t.fileName=="function"?t.fileName(this.gos.getGridCommonParams()):t.fileName;Gle.download(this.getFileName(s),i)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){let n=t?Object.assign({},e):this.getMergedParams(e);return this.getData(n)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){let{columnModel:t,columnNameService:n,funcColsService:i,valueService:s,gos:r}=this,{processCellCallback:o,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c,suppressQuotes:u,columnSeparator:h}=e;return new Hle({columnModel:t,columnNameService:n,funcColsService:i,valueService:s,gos:r,processCellCallback:o||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:c||void 0,suppressQuotes:u||!1,columnSeparator:h||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function Wle(e,t){return e.csvCreator?.getDataAsCsv(t)}function jle(e,t){e.csvCreator?.exportDataAsCsv(t)}var zle=class extends k{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.selectionService=e.selectionService,this.rowNodeSorter=e.rowNodeSorter,this.sortController=e.sortController}serialize(e,t={}){let{allColumns:n,columnKeys:i,skipRowGroups:s}=t,r=this.getColumnsToExport(n,s,i);return TX(this.prepareSession(r),this.prependContent(t),this.exportColumnGroups(t,r),this.exportHeaders(t,r),this.processPinnedTopRows(t,r),this.processRows(t,r),this.processPinnedBottomRows(t,r),this.appendContent(t))(e).parse()}processRow(e,t,n,i){let s=t.shouldRowBeSkipped||(()=>!1),r=this.gos.get("groupRemoveSingleChildren"),o=this.gos.get("groupRemoveLowestSingleChildren"),l=t.rowPositions!=null||!!t.onlySelected,c=this.gos.get("groupHideOpenParents")&&!l,u=this.columnModel.isPivotMode()?i.leafGroup:!i.group,h=!!i.footer,f=o&&i.leafGroup,g=i.allChildrenCount===1&&i.childrenAfterGroup?.length===1&&(r||f);if(!u&&!h&&(t.skipRowGroups||g||c)||t.onlySelected&&!i.isSelected()||t.skipPinnedTop&&i.rowPinned==="top"||t.skipPinnedBottom&&i.rowPinned==="bottom"||i.level===-1&&!u&&!h||s(this.gos.addGridCommonParams({node:i})))return;let C=e.onNewBodyRow(i);if(n.forEach((E,I)=>{C.onColumn(E,I,i)}),t.getCustomContentBelowRow){let E=t.getCustomContentBelowRow(this.gos.addGridCommonParams({node:i}));E&&e.addCustomContent(E)}}appendContent(e){return t=>{let n=e.appendContent;return n&&t.addCustomContent(n),t}}prependContent(e){return t=>{let n=e.prependContent;return n&&t.addCustomContent(n),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return n=>{if(!e.skipColumnGroupHeaders){let i=new rB,s=this.visibleColsService.createGroups({columns:t,idCreator:i,pinned:null,isStandaloneStructure:!0});this.recursivelyAddHeaderGroups(s,n,e.processGroupHeaderCallback)}return n}}exportHeaders(e,t){return n=>{if(!e.skipColumnHeaders){let i=n.onNewHeaderRow();t.forEach((s,r)=>{i.onColumn(s,r,void 0)})}return n}}processPinnedTopRows(e,t){return n=>{let i=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter(s=>s.rowPinned==="top").sort((s,r)=>s.rowIndex-r.rowIndex).map(s=>this.pinnedRowModel.getPinnedTopRow(s.rowIndex)).forEach(i):this.pinnedRowModel.forEachPinnedTopRow(i),n}}processRows(e,t){return n=>{let i=this.rowModel,s=i.getType(),r=s==="clientSide",o=s==="serverSide",a=!r&&e.onlySelected,l=this.processRow.bind(this,n,e,t),{exportedRows:c="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(u=>u.rowPinned==null).sort((u,h)=>u.rowIndex-h.rowIndex).map(u=>i.getRow(u.rowIndex)).forEach(l);else if(this.columnModel.isPivotMode())r?i.forEachPivotNode(l,!0):o?i.forEachNodeAfterFilterAndSort(l,!0):i.forEachNode(l);else if(e.onlySelectedAllPages||a){let u=this.selectionService.getSelectedNodes();this.replicateSortedOrder(u),u.forEach(l)}else c==="all"?i.forEachNode(l):r||o?i.forEachNodeAfterFilterAndSort(l,!0):i.forEachNode(l);return n}}replicateSortedOrder(e){let t=this.sortController.getSortOptions(),n=(i,s)=>i.rowIndex!=null&&s.rowIndex!=null?i.rowIndex-s.rowIndex:i.level===s.level?i.parent?.id===s.parent?.id?this.rowNodeSorter.compareRowNodes(t,{rowNode:i,currentPos:i.rowIndex??-1},{rowNode:s,currentPos:s.rowIndex??-1}):n(i.parent,s.parent):i.level>s.level?n(i.parent,s):n(i,s.parent);e.sort(n)}processPinnedBottomRows(e,t){return n=>{let i=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter(s=>s.rowPinned==="bottom").sort((s,r)=>s.rowIndex-r.rowIndex).map(s=>this.pinnedRowModel.getPinnedBottomRow(s.rowIndex)).forEach(i):this.pinnedRowModel.forEachPinnedBottomRow(i),n}}getColumnsToExport(e=!1,t=!1,n){let i=this.columnModel.isPivotMode();if(n&&n.length)return this.columnModel.getColsForKeys(n);let s=this.gos.get("treeData"),r=[];return e&&!i?r=this.columnModel.getCols():r=this.visibleColsService.getAllCols(),t&&!s&&(r=r.filter(o=>o.getColId()!==mf)),r}recursivelyAddHeaderGroups(e,t,n){let i=[];e.forEach(s=>{let r=s;r.getChildren&&r.getChildren().forEach(o=>i.push(o))}),e.length>0&&Ft(e[0])&&this.doAddHeaderHeader(t,e,n),i&&i.length>0&&this.recursivelyAddHeaderGroups(i,t,n)}doAddHeaderHeader(e,t,n){let i=e.onNewHeaderGroupingRow(),s=0;t.forEach(r=>{let o=r,a;n?a=n(this.gos.addGridCommonParams({columnGroup:o})):a=this.columnNameService.getDisplayNameForColumnGroup(o,"header");let l=o.getLeafColumns().reduce((c,u,h,f)=>{let g=xe(c);return u.getColumnGroupShow()==="open"?(!g||g[1]!=null)&&(g=[h],c.push(g)):g&&g[1]==null&&(g[1]=h-1),h===f.length-1&&g&&g[1]==null&&(g[1]=h),c},[]);i.onColumn(o,a||"",s++,o.getLeafColumns().length-1,l)})}},BR="32.0.2",UG={version:BR,moduleName:"@ag-grid-community/csv-export-core",beans:[Ule,zle]},$le={version:BR,moduleName:"@ag-grid-community/csv-export-api",apiFunctions:{getDataAsCsv:Wle,exportDataAsCsv:jle},dependantModules:[UG]},qle={version:BR,moduleName:"@ag-grid-community/csv-export",dependantModules:[UG,$le]};var Kle=e=>F(void 0,null,function*(){let t=0,n=[],i=new WritableStream({write:o=>{n.push(o),t+=o.length}}),s=new ReadableStream({start:o=>{let a=new FileReader;a.onload=l=>{l.target?.result&&o.enqueue(l.target.result),o.close()},a.readAsArrayBuffer(e)}}),r=new window.CompressionStream("deflate-raw");return yield s.pipeThrough(r).pipeTo(i),{size:t,content:new Blob(n)}}),Qle=e=>F(void 0,null,function*(){let t=new Blob([e]),{size:n,content:i}=yield Kle(t),s=new Uint8Array(yield i.arrayBuffer());return{size:n,content:s}}),Yle=e=>{let t=e.getHours();return t<<=6,t=t|e.getMinutes(),t<<=5,t=t|e.getSeconds()/2,t},Jle=e=>{let t=e.getFullYear()-1980;return t<<=4,t=t|e.getMonth()+1,t<<=5,t=t|e.getDate(),t};function Tn(e,t){let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e&255),e>>>=8;return n}var qV=e=>{if(!e.length)return 0;let t=-1,n=0,i=0,s=0;for(let r=0;r<e.length;r++)n=e[r],i=(t^n)&255,s=Xle[i],t=t>>>8^s;return t^-1},KV=e=>e.length?qV(typeof e=="string"?new TextEncoder().encode(e):e):0,Xle=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),WG=(e,t,n,i,s,r)=>{let{content:o,path:a,created:l}=e,c=Yle(l),u=Jle(l),h=KV(s),f=r!==void 0?r:i,g=BX(a),v=g!==a,y="";if(v){let T=Tn(1,1)+Tn(KV(g),4)+g;y="up"+Tn(T.length,2)+T}let C="\0"+(v?"\0\b":"\0\0")+Tn(t?8:0,2)+Tn(c,2)+Tn(u,2)+Tn(f?h:0,4)+Tn(r??i,4)+Tn(i,4)+Tn(g.length,2)+Tn(y.length,2),E="PK"+C+g+y,I="PK\0"+C+"\0\0\0\0\0\0"+(o?"\0\0\0\0":"\0\0\0")+Tn(n,4)+g+y;return{localFileHeader:Uint8Array.from(E,T=>T.charCodeAt(0)),centralDirectoryHeader:Uint8Array.from(I,T=>T.charCodeAt(0))}},jG=e=>{let t;if(typeof e=="string"){let n=atob(e.split(";base64,")[1]);t=Uint8Array.from(n,i=>i.charCodeAt(0))}else t=e;return{size:t.length,content:t}},Zle=(e,t)=>F(void 0,null,function*(){let{content:n}=e,{size:i,content:s}=n?jG(n):{size:0,content:Uint8Array.from([])},r,o,a=!1;if(e.type==="file"&&s&&i>0){let u=yield Qle(s);r=u.content,o=u.size,a=!0}let c=WG(e,a,t,i,s,o);return se(B({},c),{content:r||s,isCompressed:a})}),ece=(e,t)=>{let{content:n}=e,{content:i}=n?jG(n):{content:Uint8Array.from([])},s=WG(e,!1,t,i.length,i,void 0);return se(B({},s),{content:i,isCompressed:!1})},tce=(e,t,n)=>{let i="PK\0\0\0\0"+Tn(e,2)+Tn(e,2)+Tn(t,4)+Tn(n,4)+"\0\0";return Uint8Array.from(i,s=>s.charCodeAt(0))},zG=class{static addFolders(e){e.forEach(this.addFolder.bind(this))}static addFolder(e){this.folders.push({path:e,created:new Date,isBase64:!1,type:"folder"})}static addFile(e,t,n=!1){this.files.push({path:e,created:new Date,content:n?t:new TextEncoder().encode(t),isBase64:n,type:"file"})}static getZipFile(e="application/zip"){return F(this,null,function*(){let t=yield this.buildCompressedFileStream();return this.clearStream(),new Blob([t],{type:e})})}static getUncompressedZipFile(e="application/zip"){let t=this.buildFileStream();return this.clearStream(),new Blob([t],{type:e})}static clearStream(){this.folders=[],this.files=[]}static packageFiles(e){let t=0,n=0;for(let c of e){let{localFileHeader:u,centralDirectoryHeader:h,content:f}=c;t+=u.length+f.length,n+=h.length}let i=new Uint8Array(t),s=new Uint8Array(n),r=0,o=0;for(let c of e){let{localFileHeader:u,centralDirectoryHeader:h,content:f}=c;i.set(u,r),r+=u.length,i.set(f,r),r+=f.length,s.set(h,o),o+=h.length}let a=tce(e.length,n,t),l=new Uint8Array(i.length+s.length+a.length);return l.set(i),l.set(s,i.length),l.set(a,i.length+s.length),l}static buildCompressedFileStream(){return F(this,null,function*(){let e=[...this.folders,...this.files],t=[],n=0;for(let i of e){let s=yield Zle(i,n),{localFileHeader:r,content:o}=s;t.push(s),n+=r.length+o.length}return this.packageFiles(t)})}static buildFileStream(){let e=[...this.folders,...this.files],t=[],n=0;for(let i of e){let s=ece(i,n),{localFileHeader:r,content:o}=s;t.push(s),n+=r.length+o.length}return this.packageFiles(t)}};zG.folders=[];zG.files=[];var nce=class extends Zie{wireBeans(e){this.beans=e}constructor(e,t,n){super(e),this.parentCache=t,this.params=n,this.startRow=e*n.blockSize,this.endRow=this.startRow+n.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(e,t,n){j(t)?e.setDataAndId(t,n.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){let e=this.createLoadParams();if(Ie(this.params.datasource.getRows)){G("datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(e,t,n){this.rowNodes.forEach((i,s)=>{this.startRow+s<n&&e(i,t.next())})}getLastAccessed(){return this.lastAccessed}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.next());let n=e-this.startRow;return this.rowNodes[n]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let e=0;e<this.params.blockSize;e++){let t=this.startRow+e,n=new Gr(this.beans);n.setRowHeight(this.params.rowHeight),n.uiLevel=0,n.setRowIndex(t),n.setRowTop(this.params.rowHeight*t),this.rowNodes.push(n)}}processServerResult(e){this.rowNodes.forEach((n,i)=>{let s=e.rowData?e.rowData[i]:void 0;!n.id&&n.alreadyRendered&&s&&(this.rowNodes[i]=new Gr(this.beans),this.rowNodes[i].setRowIndex(n.rowIndex),this.rowNodes[i].setRowTop(n.rowTop),this.rowNodes[i].setRowHeight(n.rowHeight),n.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[i],s,this.startRow+i)});let t=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,t)}destroy(){this.rowNodes.forEach(e=>{e.clearRowTopAndRowIndex()}),super.destroy()}},ice=2,sce=class extends k{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}wireBeans(e){this.rowRenderer=e.rowRenderer,this.focusService=e.focusService}getRow(e,t=!1){let n=Math.floor(e/this.params.blockSize),i=this.blocks[n];if(!i){if(t)return;i=this.createBlock(n)}return i.getRow(e)}createBlock(e){let t=this.createBean(new nce(e,this,this.params));return this.blocks[t.getId()]=t,this.blockCount++,this.purgeBlocksIfNeeded(t),this.params.rowNodeBlockLoader.addBlock(t),t}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(t=>t.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e)),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(this.gos.get("debug")&&$i(`InfiniteCache - onPageLoaded: page = ${e.getId()}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){let t=this.getBlocksInOrder().filter(o=>o!=e),n=(o,a)=>a.getLastAccessed()-o.getLastAccessed();t.sort(n);let i=this.params.maxBlocksInCache>0,s=i?this.params.maxBlocksInCache-1:null,r=ice-1;t.forEach((o,a)=>{let l=o.getState()==="needsLoading"&&a>=r,c=i?a>=s:!1;if(l||c){if(this.isBlockCurrentlyDisplayed(o)||this.isBlockFocused(o))return;this.removeBlockFromCache(o)}})}isBlockFocused(e){let t=this.focusService.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;let n=e.getStartRow(),i=e.getEndRow();return t.rowIndex>=n&&t.rowIndex<i}isBlockCurrentlyDisplayed(e){let t=e.getStartRow(),n=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(t,n)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){let i=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<i&&(this.rowCount=i)}}setRowCount(e,t){this.rowCount=e,j(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){let t=new Ru;this.getBlocksInOrder().forEach(n=>n.forEachNode(e,t,this.rowCount))}getBlocksInOrder(){let e=(n,i)=>n.getId()-i.getId();return jo(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();let e={type:"storeUpdated"};this.eventService.dispatchEvent(e)}}destroyAllBlocksPastVirtualRowCount(){let e=[];this.getBlocksInOrder().forEach(t=>{t.getId()*this.params.blockSize>=this.rowCount&&e.push(t)}),e.length>0&&e.forEach(t=>this.destroyBlock(t))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){let n=[],i=-1,s=!1,r=new Ru,o=!1;return this.getBlocksInOrder().forEach(l=>{if(!o){if(s&&i+1!==l.getId()){o=!0;return}i=l.getId(),l.forEachNode(c=>{let u=c===e||c===t;(s||u)&&n.push(c),u&&(s=!s)},r,this.rowCount)}}),o||s?[]:n}},rce=class extends k{constructor(){super(...arguments),this.beanName="rowModel"}wireBeans(e){this.filterManager=e.filterManager,this.sortController=e.sortController,this.selectionService=e.selectionService,this.rowRenderer=e.rowRenderer,this.rowNodeBlockLoader=e.rowNodeBlockLoader}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){this.gos.isRowModelType("infinite")&&(this.rowHeight=this.gos.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&G("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.onCacheUpdated.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=this.gos.getRowHeightAsNumber(),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let e;this.cacheParams?e=this.isSortModelDifferent():e=!0,e&&this.reset()}isSortModelDifferent(){return!gC(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,t):[]}reset(){if(!this.datasource)return;this.gos.getRowIdCallback()!=null||this.selectionService.reset("rowDataChanged"),this.resetCache()}createModelUpdatedEvent(){return{type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1}}resetCache(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager?.getFilterModel()??{},sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:this.gos.getRowHeightAsNumber(),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new Ru},this.infiniteCache=this.createBean(new sce(this.cacheParams)),this.eventService.dispatchEventOnce({type:"rowCountReady"});let e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}updateRowHeights(){this.forEachNode(t=>{t.setRowHeight(this.rowHeight),t.setRowTop(this.rowHeight*t.rowIndex)});let e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){let e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}getRow(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)}getRowNode(e){let t;return this.forEachNode(n=>{n.id===e&&(t=n)}),t}forEachNode(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){let t=Math.floor(e/this.rowHeight),n=this.getRowCount()-1;return t>n?n:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(e,t){this.infiniteCache&&this.infiniteCache.setRowCount(e,t)}};function oce(e){e.rowModelHelperService?.getInfiniteRowModel()?.refreshCache()}function ace(e){e.rowModelHelperService?.getInfiniteRowModel()?.purgeCache()}function lce(e){return e.rowModelHelperService?.getInfiniteRowModel()?.getRowCount()}function cce(e){return e.rowModelHelperService?.getInfiniteRowModel()?.isLastRowIndexKnown()}var GR="32.0.2",$G={version:GR,moduleName:"@ag-grid-community/infinite-row-model-core",rowModel:"infinite",beans:[rce],dependantModules:[tse]},uce={version:GR,moduleName:"@ag-grid-community/infinite-row-model-api",beans:[BG],apiFunctions:{refreshInfiniteCache:oce,purgeInfiniteCache:ace,getInfiniteRowCount:lce,isLastRowIndexKnown:cce},dependantModules:[$G,mle]},dce={version:GR,moduleName:"@ag-grid-community/infinite-row-model",dependantModules:[$G,uce]};Kn.__registerModules([xG,Lle,dce,qle],!1,void 0);var qG=(()=>{let t=class t extends GG{setViewContainerRef(i,s){this.viewContainerRef=i,this.angularFrameworkOverrides=s}createWrapper(i){let s=this.angularFrameworkOverrides,r=this;class o extends HR{init(c){s.runInsideAngular(()=>{super.init(c),this._componentRef.changeDetectorRef.detectChanges()})}createComponent(){return s.runInsideAngular(()=>r.createComponent(i))}hasMethod(c){return a.getFrameworkComponentInstance()[c]!=null}callMethod(c,u){let h=this.getFrameworkComponentInstance();return s.runInsideAngular(()=>a.getFrameworkComponentInstance()[c].apply(h,u))}addMethod(c,u){a[c]=u}}let a=new o;return a}createComponent(i){return this.viewContainerRef.createComponent(i)}};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=vr(t)))(r||t)}})(),t.\u0275prov=ee({token:t,factory:t.\u0275fac});let e=t;return e})(),HR=class{init(t){this._params=t,this._componentRef=this.createComponent(),this._agAwareComponent=this._componentRef.instance,this._frameworkComponentInstance=this._componentRef.instance,this._eGui=this._componentRef.location.nativeElement,qi(this._eGui),this._agAwareComponent.agInit(this._params)}getGui(){return this._eGui}getRootElement(){return this._eGui.firstChild}destroy(){this._frameworkComponentInstance&&typeof this._frameworkComponentInstance.destroy=="function"&&this._frameworkComponentInstance.destroy(),this._componentRef&&this._componentRef.destroy()}getFrameworkComponentInstance(){return this._frameworkComponentInstance}},KG=(()=>{let t=class t extends NR{constructor(i){super("angular"),this._ngZone=i,this.isRunningWithinTestZone=!1,this.wrapIncoming=(s,r)=>this.runOutside(s,r),this.wrapOutgoing=s=>this.runInsideAngular(s),this.isRunningWithinTestZone=window?.AG_GRID_UNDER_TEST??!!window?.Zone?.AsyncTestZoneSpec,this._ngZone?this.isRunningWithinTestZone?this.runOutside=(s,r)=>r==="resize-observer"||r==="popupPositioning"?this._ngZone.runOutsideAngular(s):s():this.runOutside=s=>this._ngZone.runOutsideAngular(s):this.runOutside=s=>s()}get shouldWrapOutgoing(){return this._ngZone&&le.isInAngularZone()}isFrameworkComponent(i){if(!i)return!1;let s=i.prototype;return s&&"agInit"in s}runInsideAngular(i){return this._ngZone?this._ngZone.run(i):i()}runOutsideAngular(i,s){return this.runOutside(i,s)}};t.\u0275fac=function(s){return new(s||t)(K(le))},t.\u0275prov=ee({token:t,factory:t.\u0275fac});let e=t;return e})(),QG=(()=>{let t=class t{constructor(i,s,r,o){this.viewContainerRef=s,this.angularFrameworkOverrides=r,this.frameworkComponentWrapper=o,this._initialised=!1,this._destroyed=!1,this._fullyReady=new Promise(a=>{this._resolveFullyReady=a}),this.statusBar=void 0,this.sideBar=void 0,this.suppressContextMenu=void 0,this.preventDefaultOnContextMenu=void 0,this.allowContextMenuWithControlKey=void 0,this.columnMenu=void 0,this.suppressMenuHide=void 0,this.enableBrowserTooltips=void 0,this.tooltipTrigger=void 0,this.tooltipShowDelay=void 0,this.tooltipHideDelay=void 0,this.tooltipMouseTrack=void 0,this.tooltipShowMode=void 0,this.tooltipInteraction=void 0,this.popupParent=void 0,this.copyHeadersToClipboard=void 0,this.copyGroupHeadersToClipboard=void 0,this.clipboardDelimiter=void 0,this.suppressCopyRowsToClipboard=void 0,this.suppressCopySingleCellRanges=void 0,this.suppressLastEmptyLineOnPaste=void 0,this.suppressClipboardPaste=void 0,this.suppressClipboardApi=void 0,this.suppressCutToClipboard=void 0,this.columnDefs=void 0,this.defaultColDef=void 0,this.defaultColGroupDef=void 0,this.columnTypes=void 0,this.dataTypeDefinitions=void 0,this.maintainColumnOrder=void 0,this.suppressFieldDotNotation=void 0,this.headerHeight=void 0,this.groupHeaderHeight=void 0,this.floatingFiltersHeight=void 0,this.pivotHeaderHeight=void 0,this.pivotGroupHeaderHeight=void 0,this.allowDragFromColumnsToolPanel=void 0,this.suppressMovableColumns=void 0,this.suppressColumnMoveAnimation=void 0,this.suppressDragLeaveHidesColumns=void 0,this.suppressRowGroupHidesColumns=void 0,this.colResizeDefault=void 0,this.suppressAutoSize=void 0,this.autoSizePadding=void 0,this.skipHeaderOnAutoSize=void 0,this.autoSizeStrategy=void 0,this.components=void 0,this.editType=void 0,this.singleClickEdit=void 0,this.suppressClickEdit=void 0,this.readOnlyEdit=void 0,this.stopEditingWhenCellsLoseFocus=void 0,this.enterNavigatesVertically=void 0,this.enterNavigatesVerticallyAfterEdit=void 0,this.enableCellEditingOnBackspace=void 0,this.undoRedoCellEditing=void 0,this.undoRedoCellEditingLimit=void 0,this.defaultCsvExportParams=void 0,this.suppressCsvExport=void 0,this.defaultExcelExportParams=void 0,this.suppressExcelExport=void 0,this.excelStyles=void 0,this.quickFilterText=void 0,this.cacheQuickFilter=void 0,this.includeHiddenColumnsInQuickFilter=void 0,this.quickFilterParser=void 0,this.quickFilterMatcher=void 0,this.applyQuickFilterBeforePivotOrAgg=void 0,this.excludeChildrenWhenTreeDataFiltering=void 0,this.enableAdvancedFilter=void 0,this.advancedFilterModel=void 0,this.includeHiddenColumnsInAdvancedFilter=void 0,this.advancedFilterParent=void 0,this.advancedFilterBuilderParams=void 0,this.suppressAdvancedFilterEval=void 0,this.enableCharts=void 0,this.chartThemes=void 0,this.customChartThemes=void 0,this.chartThemeOverrides=void 0,this.chartToolPanelsDef=void 0,this.chartMenuItems=void 0,this.loadingCellRenderer=void 0,this.loadingCellRendererParams=void 0,this.loadingCellRendererSelector=void 0,this.localeText=void 0,this.masterDetail=void 0,this.keepDetailRows=void 0,this.keepDetailRowsCount=void 0,this.detailCellRenderer=void 0,this.detailCellRendererParams=void 0,this.detailRowHeight=void 0,this.detailRowAutoHeight=void 0,this.context=void 0,this.alignedGrids=void 0,this.tabIndex=void 0,this.rowBuffer=void 0,this.valueCache=void 0,this.valueCacheNeverExpires=void 0,this.enableCellExpressions=void 0,this.suppressTouch=void 0,this.suppressFocusAfterRefresh=void 0,this.suppressAsyncEvents=void 0,this.suppressBrowserResizeObserver=void 0,this.suppressPropertyNamesCheck=void 0,this.suppressChangeDetection=void 0,this.debug=void 0,this.loading=void 0,this.overlayLoadingTemplate=void 0,this.loadingOverlayComponent=void 0,this.loadingOverlayComponentParams=void 0,this.suppressLoadingOverlay=void 0,this.overlayNoRowsTemplate=void 0,this.noRowsOverlayComponent=void 0,this.noRowsOverlayComponentParams=void 0,this.suppressNoRowsOverlay=void 0,this.pagination=void 0,this.paginationPageSize=void 0,this.paginationPageSizeSelector=void 0,this.paginationAutoPageSize=void 0,this.paginateChildRows=void 0,this.suppressPaginationPanel=void 0,this.pivotMode=void 0,this.pivotPanelShow=void 0,this.pivotMaxGeneratedColumns=void 0,this.pivotDefaultExpanded=void 0,this.pivotColumnGroupTotals=void 0,this.pivotRowTotals=void 0,this.pivotSuppressAutoColumn=void 0,this.suppressExpandablePivotGroups=void 0,this.functionsReadOnly=void 0,this.aggFuncs=void 0,this.suppressAggFuncInHeader=void 0,this.alwaysAggregateAtRootLevel=void 0,this.aggregateOnlyChangedColumns=void 0,this.suppressAggFilteredOnly=void 0,this.removePivotHeaderRowWhenSingleValueColumn=void 0,this.animateRows=void 0,this.enableCellChangeFlash=void 0,this.cellFlashDuration=void 0,this.cellFlashDelay=void 0,this.cellFadeDuration=void 0,this.cellFadeDelay=void 0,this.allowShowChangeAfterFilter=void 0,this.domLayout=void 0,this.ensureDomOrder=void 0,this.enableRtl=void 0,this.suppressColumnVirtualisation=void 0,this.suppressMaxRenderedRowRestriction=void 0,this.suppressRowVirtualisation=void 0,this.rowDragManaged=void 0,this.suppressRowDrag=void 0,this.suppressMoveWhenRowDragging=void 0,this.rowDragEntireRow=void 0,this.rowDragMultiRow=void 0,this.rowDragText=void 0,this.fullWidthCellRenderer=void 0,this.fullWidthCellRendererParams=void 0,this.embedFullWidthRows=void 0,this.suppressGroupMaintainValueType=void 0,this.groupDisplayType=void 0,this.groupDefaultExpanded=void 0,this.autoGroupColumnDef=void 0,this.groupMaintainOrder=void 0,this.groupSelectsChildren=void 0,this.groupLockGroupColumns=void 0,this.groupAggFiltering=void 0,this.groupIncludeFooter=void 0,this.groupIncludeTotalFooter=void 0,this.groupTotalRow=void 0,this.grandTotalRow=void 0,this.suppressStickyTotalRow=void 0,this.groupSuppressBlankHeader=void 0,this.groupSelectsFiltered=void 0,this.showOpenedGroup=void 0,this.groupRemoveSingleChildren=void 0,this.groupRemoveLowestSingleChildren=void 0,this.groupHideOpenParents=void 0,this.groupAllowUnbalanced=void 0,this.rowGroupPanelShow=void 0,this.groupRowRenderer=void 0,this.groupRowRendererParams=void 0,this.suppressMakeColumnVisibleAfterUnGroup=void 0,this.treeData=void 0,this.rowGroupPanelSuppressSort=void 0,this.suppressGroupRowsSticky=void 0,this.pinnedTopRowData=void 0,this.pinnedBottomRowData=void 0,this.rowModelType=void 0,this.rowData=void 0,this.asyncTransactionWaitMillis=void 0,this.suppressModelUpdateAfterUpdateTransaction=void 0,this.datasource=void 0,this.cacheOverflowSize=void 0,this.infiniteInitialRowCount=void 0,this.serverSideInitialRowCount=void 0,this.suppressServerSideInfiniteScroll=void 0,this.suppressServerSideFullWidthLoadingRow=void 0,this.cacheBlockSize=void 0,this.maxBlocksInCache=void 0,this.maxConcurrentDatasourceRequests=void 0,this.blockLoadDebounceMillis=void 0,this.purgeClosedRowNodes=void 0,this.serverSideDatasource=void 0,this.serverSideSortAllLevels=void 0,this.serverSideEnableClientSideSort=void 0,this.serverSideOnlyRefreshFilteredGroups=void 0,this.serverSideSortOnServer=void 0,this.serverSideFilterOnServer=void 0,this.serverSidePivotResultFieldSeparator=void 0,this.viewportDatasource=void 0,this.viewportRowModelPageSize=void 0,this.viewportRowModelBufferSize=void 0,this.alwaysShowHorizontalScroll=void 0,this.alwaysShowVerticalScroll=void 0,this.debounceVerticalScrollbar=void 0,this.suppressHorizontalScroll=void 0,this.suppressScrollOnNewData=void 0,this.suppressScrollWhenPopupsAreOpen=void 0,this.suppressAnimationFrame=void 0,this.suppressMiddleClickScrolls=void 0,this.suppressPreventDefaultOnMouseWheel=void 0,this.scrollbarWidth=void 0,this.rowSelection=void 0,this.rowMultiSelectWithClick=void 0,this.suppressRowDeselection=void 0,this.suppressRowClickSelection=void 0,this.suppressCellFocus=void 0,this.suppressHeaderFocus=void 0,this.suppressMultiRangeSelection=void 0,this.enableCellTextSelection=void 0,this.enableRangeSelection=void 0,this.enableRangeHandle=void 0,this.enableFillHandle=void 0,this.fillHandleDirection=void 0,this.suppressClearOnFillReduction=void 0,this.sortingOrder=void 0,this.accentedSort=void 0,this.unSortIcon=void 0,this.suppressMultiSort=void 0,this.alwaysMultiSort=void 0,this.multiSortKey=void 0,this.suppressMaintainUnsortedOrder=void 0,this.icons=void 0,this.rowHeight=void 0,this.rowStyle=void 0,this.rowClass=void 0,this.rowClassRules=void 0,this.suppressRowHoverHighlight=void 0,this.suppressRowTransform=void 0,this.columnHoverHighlight=void 0,this.gridId=void 0,this.deltaSort=void 0,this.treeDataDisplayType=void 0,this.enableGroupEdit=void 0,this.initialState=void 0,this.getContextMenuItems=void 0,this.getMainMenuItems=void 0,this.postProcessPopup=void 0,this.processUnpinnedColumns=void 0,this.processCellForClipboard=void 0,this.processHeaderForClipboard=void 0,this.processGroupHeaderForClipboard=void 0,this.processCellFromClipboard=void 0,this.sendToClipboard=void 0,this.processDataFromClipboard=void 0,this.isExternalFilterPresent=void 0,this.doesExternalFilterPass=void 0,this.getChartToolbarItems=void 0,this.createChartContainer=void 0,this.focusGridInnerElement=void 0,this.navigateToNextHeader=void 0,this.tabToNextHeader=void 0,this.navigateToNextCell=void 0,this.tabToNextCell=void 0,this.getLocaleText=void 0,this.getDocument=void 0,this.paginationNumberFormatter=void 0,this.getGroupRowAgg=void 0,this.isGroupOpenByDefault=void 0,this.initialGroupOrderComparator=void 0,this.processPivotResultColDef=void 0,this.processPivotResultColGroupDef=void 0,this.getDataPath=void 0,this.getChildCount=void 0,this.getServerSideGroupLevelParams=void 0,this.isServerSideGroupOpenByDefault=void 0,this.isApplyServerSideTransaction=void 0,this.isServerSideGroup=void 0,this.getServerSideGroupKey=void 0,this.getBusinessKeyForNode=void 0,this.getRowId=void 0,this.resetRowDataOnUpdate=void 0,this.processRowPostCreate=void 0,this.isRowSelectable=void 0,this.isRowMaster=void 0,this.fillOperation=void 0,this.postSortRows=void 0,this.getRowStyle=void 0,this.getRowClass=void 0,this.getRowHeight=void 0,this.isFullWidthRow=void 0,this.toolPanelVisibleChanged=new H,this.toolPanelSizeChanged=new H,this.columnMenuVisibleChanged=new H,this.contextMenuVisibleChanged=new H,this.cutStart=new H,this.cutEnd=new H,this.pasteStart=new H,this.pasteEnd=new H,this.columnVisible=new H,this.columnPinned=new H,this.columnResized=new H,this.columnMoved=new H,this.columnValueChanged=new H,this.columnPivotModeChanged=new H,this.columnPivotChanged=new H,this.columnGroupOpened=new H,this.newColumnsLoaded=new H,this.gridColumnsChanged=new H,this.displayedColumnsChanged=new H,this.virtualColumnsChanged=new H,this.columnEverythingChanged=new H,this.columnHeaderMouseOver=new H,this.columnHeaderMouseLeave=new H,this.columnHeaderClicked=new H,this.columnHeaderContextMenu=new H,this.componentStateChanged=new H,this.cellValueChanged=new H,this.cellEditRequest=new H,this.rowValueChanged=new H,this.cellEditingStarted=new H,this.cellEditingStopped=new H,this.rowEditingStarted=new H,this.rowEditingStopped=new H,this.undoStarted=new H,this.undoEnded=new H,this.redoStarted=new H,this.redoEnded=new H,this.rangeDeleteStart=new H,this.rangeDeleteEnd=new H,this.fillStart=new H,this.fillEnd=new H,this.filterOpened=new H,this.filterChanged=new H,this.filterModified=new H,this.advancedFilterBuilderVisibleChanged=new H,this.chartCreated=new H,this.chartRangeSelectionChanged=new H,this.chartOptionsChanged=new H,this.chartDestroyed=new H,this.cellKeyDown=new H,this.gridReady=new H,this.firstDataRendered=new H,this.gridSizeChanged=new H,this.modelUpdated=new H,this.virtualRowRemoved=new H,this.viewportChanged=new H,this.bodyScroll=new H,this.bodyScrollEnd=new H,this.dragStarted=new H,this.dragStopped=new H,this.stateUpdated=new H,this.paginationChanged=new H,this.rowDragEnter=new H,this.rowDragMove=new H,this.rowDragLeave=new H,this.rowDragEnd=new H,this.columnRowGroupChanged=new H,this.rowGroupOpened=new H,this.expandOrCollapseAll=new H,this.pivotMaxColumnsExceeded=new H,this.pinnedRowDataChanged=new H,this.rowDataUpdated=new H,this.asyncTransactionsFlushed=new H,this.storeRefreshed=new H,this.headerFocused=new H,this.cellClicked=new H,this.cellDoubleClicked=new H,this.cellFocused=new H,this.cellMouseOver=new H,this.cellMouseOut=new H,this.cellMouseDown=new H,this.rowClicked=new H,this.rowDoubleClicked=new H,this.rowSelected=new H,this.selectionChanged=new H,this.cellContextMenu=new H,this.rangeSelectionChanged=new H,this.tooltipShow=new H,this.tooltipHide=new H,this.sortChanged=new H,this._nativeElement=i.nativeElement}ngAfterViewInit(){this.angularFrameworkOverrides.runOutsideAngular(()=>{this.frameworkComponentWrapper.setViewContainerRef(this.viewContainerRef,this.angularFrameworkOverrides);let i=aB(this.gridOptions,this);this.gridParams={globalEventListener:this.globalEventListener.bind(this),frameworkOverrides:this.angularFrameworkOverrides,providedBeanInstances:{frameworkComponentWrapper:this.frameworkComponentWrapper},modules:this.modules||[]};let s=VG(this._nativeElement,i,this.gridParams);s&&(this.api=s),this._initialised=!0,this._resolveFullyReady()})}ngOnChanges(i){this._initialised&&this.angularFrameworkOverrides.runOutsideAngular(()=>{let s={};Object.entries(i).forEach(([r,o])=>{s[r]=o.currentValue}),lB(s,this.api)})}ngOnDestroy(){this._initialised&&(this._destroyed=!0,this.api?.destroy())}isEmitterUsed(i){let r=this[i],o=r?.observed??r?.observers?.length>0,a=`on${i.charAt(0).toUpperCase()}${i.substring(1)}`,l=!!this.gridOptions&&!!this.gridOptions[a];return o||l}globalEventListener(i,s){if(this._destroyed)return;let r=this[i];if(r&&this.isEmitterUsed(i)){let o=()=>this.angularFrameworkOverrides.runInsideAngular(()=>r.emit(s));i==="gridReady"?this._fullyReady.then(()=>o()):o()}}};t.\u0275fac=function(s){return new(s||t)(ne(zt),ne(Ni),ne(KG),ne(qG))},t.\u0275cmp=Pe({type:t,selectors:[["ag-grid-angular"]],inputs:{gridOptions:"gridOptions",modules:"modules",statusBar:"statusBar",sideBar:"sideBar",suppressContextMenu:"suppressContextMenu",preventDefaultOnContextMenu:"preventDefaultOnContextMenu",allowContextMenuWithControlKey:"allowContextMenuWithControlKey",columnMenu:"columnMenu",suppressMenuHide:"suppressMenuHide",enableBrowserTooltips:"enableBrowserTooltips",tooltipTrigger:"tooltipTrigger",tooltipShowDelay:"tooltipShowDelay",tooltipHideDelay:"tooltipHideDelay",tooltipMouseTrack:"tooltipMouseTrack",tooltipShowMode:"tooltipShowMode",tooltipInteraction:"tooltipInteraction",popupParent:"popupParent",copyHeadersToClipboard:"copyHeadersToClipboard",copyGroupHeadersToClipboard:"copyGroupHeadersToClipboard",clipboardDelimiter:"clipboardDelimiter",suppressCopyRowsToClipboard:"suppressCopyRowsToClipboard",suppressCopySingleCellRanges:"suppressCopySingleCellRanges",suppressLastEmptyLineOnPaste:"suppressLastEmptyLineOnPaste",suppressClipboardPaste:"suppressClipboardPaste",suppressClipboardApi:"suppressClipboardApi",suppressCutToClipboard:"suppressCutToClipboard",columnDefs:"columnDefs",defaultColDef:"defaultColDef",defaultColGroupDef:"defaultColGroupDef",columnTypes:"columnTypes",dataTypeDefinitions:"dataTypeDefinitions",maintainColumnOrder:"maintainColumnOrder",suppressFieldDotNotation:"suppressFieldDotNotation",headerHeight:"headerHeight",groupHeaderHeight:"groupHeaderHeight",floatingFiltersHeight:"floatingFiltersHeight",pivotHeaderHeight:"pivotHeaderHeight",pivotGroupHeaderHeight:"pivotGroupHeaderHeight",allowDragFromColumnsToolPanel:"allowDragFromColumnsToolPanel",suppressMovableColumns:"suppressMovableColumns",suppressColumnMoveAnimation:"suppressColumnMoveAnimation",suppressDragLeaveHidesColumns:"suppressDragLeaveHidesColumns",suppressRowGroupHidesColumns:"suppressRowGroupHidesColumns",colResizeDefault:"colResizeDefault",suppressAutoSize:"suppressAutoSize",autoSizePadding:"autoSizePadding",skipHeaderOnAutoSize:"skipHeaderOnAutoSize",autoSizeStrategy:"autoSizeStrategy",components:"components",editType:"editType",singleClickEdit:"singleClickEdit",suppressClickEdit:"suppressClickEdit",readOnlyEdit:"readOnlyEdit",stopEditingWhenCellsLoseFocus:"stopEditingWhenCellsLoseFocus",enterNavigatesVertically:"enterNavigatesVertically",enterNavigatesVerticallyAfterEdit:"enterNavigatesVerticallyAfterEdit",enableCellEditingOnBackspace:"enableCellEditingOnBackspace",undoRedoCellEditing:"undoRedoCellEditing",undoRedoCellEditingLimit:"undoRedoCellEditingLimit",defaultCsvExportParams:"defaultCsvExportParams",suppressCsvExport:"suppressCsvExport",defaultExcelExportParams:"defaultExcelExportParams",suppressExcelExport:"suppressExcelExport",excelStyles:"excelStyles",quickFilterText:"quickFilterText",cacheQuickFilter:"cacheQuickFilter",includeHiddenColumnsInQuickFilter:"includeHiddenColumnsInQuickFilter",quickFilterParser:"quickFilterParser",quickFilterMatcher:"quickFilterMatcher",applyQuickFilterBeforePivotOrAgg:"applyQuickFilterBeforePivotOrAgg",excludeChildrenWhenTreeDataFiltering:"excludeChildrenWhenTreeDataFiltering",enableAdvancedFilter:"enableAdvancedFilter",advancedFilterModel:"advancedFilterModel",includeHiddenColumnsInAdvancedFilter:"includeHiddenColumnsInAdvancedFilter",advancedFilterParent:"advancedFilterParent",advancedFilterBuilderParams:"advancedFilterBuilderParams",suppressAdvancedFilterEval:"suppressAdvancedFilterEval",enableCharts:"enableCharts",chartThemes:"chartThemes",customChartThemes:"customChartThemes",chartThemeOverrides:"chartThemeOverrides",chartToolPanelsDef:"chartToolPanelsDef",chartMenuItems:"chartMenuItems",loadingCellRenderer:"loadingCellRenderer",loadingCellRendererParams:"loadingCellRendererParams",loadingCellRendererSelector:"loadingCellRendererSelector",localeText:"localeText",masterDetail:"masterDetail",keepDetailRows:"keepDetailRows",keepDetailRowsCount:"keepDetailRowsCount",detailCellRenderer:"detailCellRenderer",detailCellRendererParams:"detailCellRendererParams",detailRowHeight:"detailRowHeight",detailRowAutoHeight:"detailRowAutoHeight",context:"context",alignedGrids:"alignedGrids",tabIndex:"tabIndex",rowBuffer:"rowBuffer",valueCache:"valueCache",valueCacheNeverExpires:"valueCacheNeverExpires",enableCellExpressions:"enableCellExpressions",suppressTouch:"suppressTouch",suppressFocusAfterRefresh:"suppressFocusAfterRefresh",suppressAsyncEvents:"suppressAsyncEvents",suppressBrowserResizeObserver:"suppressBrowserResizeObserver",suppressPropertyNamesCheck:"suppressPropertyNamesCheck",suppressChangeDetection:"suppressChangeDetection",debug:"debug",loading:"loading",overlayLoadingTemplate:"overlayLoadingTemplate",loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentParams:"loadingOverlayComponentParams",suppressLoadingOverlay:"suppressLoadingOverlay",overlayNoRowsTemplate:"overlayNoRowsTemplate",noRowsOverlayComponent:"noRowsOverlayComponent",noRowsOverlayComponentParams:"noRowsOverlayComponentParams",suppressNoRowsOverlay:"suppressNoRowsOverlay",pagination:"pagination",paginationPageSize:"paginationPageSize",paginationPageSizeSelector:"paginationPageSizeSelector",paginationAutoPageSize:"paginationAutoPageSize",paginateChildRows:"paginateChildRows",suppressPaginationPanel:"suppressPaginationPanel",pivotMode:"pivotMode",pivotPanelShow:"pivotPanelShow",pivotMaxGeneratedColumns:"pivotMaxGeneratedColumns",pivotDefaultExpanded:"pivotDefaultExpanded",pivotColumnGroupTotals:"pivotColumnGroupTotals",pivotRowTotals:"pivotRowTotals",pivotSuppressAutoColumn:"pivotSuppressAutoColumn",suppressExpandablePivotGroups:"suppressExpandablePivotGroups",functionsReadOnly:"functionsReadOnly",aggFuncs:"aggFuncs",suppressAggFuncInHeader:"suppressAggFuncInHeader",alwaysAggregateAtRootLevel:"alwaysAggregateAtRootLevel",aggregateOnlyChangedColumns:"aggregateOnlyChangedColumns",suppressAggFilteredOnly:"suppressAggFilteredOnly",removePivotHeaderRowWhenSingleValueColumn:"removePivotHeaderRowWhenSingleValueColumn",animateRows:"animateRows",enableCellChangeFlash:"enableCellChangeFlash",cellFlashDuration:"cellFlashDuration",cellFlashDelay:"cellFlashDelay",cellFadeDuration:"cellFadeDuration",cellFadeDelay:"cellFadeDelay",allowShowChangeAfterFilter:"allowShowChangeAfterFilter",domLayout:"domLayout",ensureDomOrder:"ensureDomOrder",enableRtl:"enableRtl",suppressColumnVirtualisation:"suppressColumnVirtualisation",suppressMaxRenderedRowRestriction:"suppressMaxRenderedRowRestriction",suppressRowVirtualisation:"suppressRowVirtualisation",rowDragManaged:"rowDragManaged",suppressRowDrag:"suppressRowDrag",suppressMoveWhenRowDragging:"suppressMoveWhenRowDragging",rowDragEntireRow:"rowDragEntireRow",rowDragMultiRow:"rowDragMultiRow",rowDragText:"rowDragText",fullWidthCellRenderer:"fullWidthCellRenderer",fullWidthCellRendererParams:"fullWidthCellRendererParams",embedFullWidthRows:"embedFullWidthRows",suppressGroupMaintainValueType:"suppressGroupMaintainValueType",groupDisplayType:"groupDisplayType",groupDefaultExpanded:"groupDefaultExpanded",autoGroupColumnDef:"autoGroupColumnDef",groupMaintainOrder:"groupMaintainOrder",groupSelectsChildren:"groupSelectsChildren",groupLockGroupColumns:"groupLockGroupColumns",groupAggFiltering:"groupAggFiltering",groupIncludeFooter:"groupIncludeFooter",groupIncludeTotalFooter:"groupIncludeTotalFooter",groupTotalRow:"groupTotalRow",grandTotalRow:"grandTotalRow",suppressStickyTotalRow:"suppressStickyTotalRow",groupSuppressBlankHeader:"groupSuppressBlankHeader",groupSelectsFiltered:"groupSelectsFiltered",showOpenedGroup:"showOpenedGroup",groupRemoveSingleChildren:"groupRemoveSingleChildren",groupRemoveLowestSingleChildren:"groupRemoveLowestSingleChildren",groupHideOpenParents:"groupHideOpenParents",groupAllowUnbalanced:"groupAllowUnbalanced",rowGroupPanelShow:"rowGroupPanelShow",groupRowRenderer:"groupRowRenderer",groupRowRendererParams:"groupRowRendererParams",suppressMakeColumnVisibleAfterUnGroup:"suppressMakeColumnVisibleAfterUnGroup",treeData:"treeData",rowGroupPanelSuppressSort:"rowGroupPanelSuppressSort",suppressGroupRowsSticky:"suppressGroupRowsSticky",pinnedTopRowData:"pinnedTopRowData",pinnedBottomRowData:"pinnedBottomRowData",rowModelType:"rowModelType",rowData:"rowData",asyncTransactionWaitMillis:"asyncTransactionWaitMillis",suppressModelUpdateAfterUpdateTransaction:"suppressModelUpdateAfterUpdateTransaction",datasource:"datasource",cacheOverflowSize:"cacheOverflowSize",infiniteInitialRowCount:"infiniteInitialRowCount",serverSideInitialRowCount:"serverSideInitialRowCount",suppressServerSideInfiniteScroll:"suppressServerSideInfiniteScroll",suppressServerSideFullWidthLoadingRow:"suppressServerSideFullWidthLoadingRow",cacheBlockSize:"cacheBlockSize",maxBlocksInCache:"maxBlocksInCache",maxConcurrentDatasourceRequests:"maxConcurrentDatasourceRequests",blockLoadDebounceMillis:"blockLoadDebounceMillis",purgeClosedRowNodes:"purgeClosedRowNodes",serverSideDatasource:"serverSideDatasource",serverSideSortAllLevels:"serverSideSortAllLevels",serverSideEnableClientSideSort:"serverSideEnableClientSideSort",serverSideOnlyRefreshFilteredGroups:"serverSideOnlyRefreshFilteredGroups",serverSideSortOnServer:"serverSideSortOnServer",serverSideFilterOnServer:"serverSideFilterOnServer",serverSidePivotResultFieldSeparator:"serverSidePivotResultFieldSeparator",viewportDatasource:"viewportDatasource",viewportRowModelPageSize:"viewportRowModelPageSize",viewportRowModelBufferSize:"viewportRowModelBufferSize",alwaysShowHorizontalScroll:"alwaysShowHorizontalScroll",alwaysShowVerticalScroll:"alwaysShowVerticalScroll",debounceVerticalScrollbar:"debounceVerticalScrollbar",suppressHorizontalScroll:"suppressHorizontalScroll",suppressScrollOnNewData:"suppressScrollOnNewData",suppressScrollWhenPopupsAreOpen:"suppressScrollWhenPopupsAreOpen",suppressAnimationFrame:"suppressAnimationFrame",suppressMiddleClickScrolls:"suppressMiddleClickScrolls",suppressPreventDefaultOnMouseWheel:"suppressPreventDefaultOnMouseWheel",scrollbarWidth:"scrollbarWidth",rowSelection:"rowSelection",rowMultiSelectWithClick:"rowMultiSelectWithClick",suppressRowDeselection:"suppressRowDeselection",suppressRowClickSelection:"suppressRowClickSelection",suppressCellFocus:"suppressCellFocus",suppressHeaderFocus:"suppressHeaderFocus",suppressMultiRangeSelection:"suppressMultiRangeSelection",enableCellTextSelection:"enableCellTextSelection",enableRangeSelection:"enableRangeSelection",enableRangeHandle:"enableRangeHandle",enableFillHandle:"enableFillHandle",fillHandleDirection:"fillHandleDirection",suppressClearOnFillReduction:"suppressClearOnFillReduction",sortingOrder:"sortingOrder",accentedSort:"accentedSort",unSortIcon:"unSortIcon",suppressMultiSort:"suppressMultiSort",alwaysMultiSort:"alwaysMultiSort",multiSortKey:"multiSortKey",suppressMaintainUnsortedOrder:"suppressMaintainUnsortedOrder",icons:"icons",rowHeight:"rowHeight",rowStyle:"rowStyle",rowClass:"rowClass",rowClassRules:"rowClassRules",suppressRowHoverHighlight:"suppressRowHoverHighlight",suppressRowTransform:"suppressRowTransform",columnHoverHighlight:"columnHoverHighlight",gridId:"gridId",deltaSort:"deltaSort",treeDataDisplayType:"treeDataDisplayType",enableGroupEdit:"enableGroupEdit",initialState:"initialState",getContextMenuItems:"getContextMenuItems",getMainMenuItems:"getMainMenuItems",postProcessPopup:"postProcessPopup",processUnpinnedColumns:"processUnpinnedColumns",processCellForClipboard:"processCellForClipboard",processHeaderForClipboard:"processHeaderForClipboard",processGroupHeaderForClipboard:"processGroupHeaderForClipboard",processCellFromClipboard:"processCellFromClipboard",sendToClipboard:"sendToClipboard",processDataFromClipboard:"processDataFromClipboard",isExternalFilterPresent:"isExternalFilterPresent",doesExternalFilterPass:"doesExternalFilterPass",getChartToolbarItems:"getChartToolbarItems",createChartContainer:"createChartContainer",focusGridInnerElement:"focusGridInnerElement",navigateToNextHeader:"navigateToNextHeader",tabToNextHeader:"tabToNextHeader",navigateToNextCell:"navigateToNextCell",tabToNextCell:"tabToNextCell",getLocaleText:"getLocaleText",getDocument:"getDocument",paginationNumberFormatter:"paginationNumberFormatter",getGroupRowAgg:"getGroupRowAgg",isGroupOpenByDefault:"isGroupOpenByDefault",initialGroupOrderComparator:"initialGroupOrderComparator",processPivotResultColDef:"processPivotResultColDef",processPivotResultColGroupDef:"processPivotResultColGroupDef",getDataPath:"getDataPath",getChildCount:"getChildCount",getServerSideGroupLevelParams:"getServerSideGroupLevelParams",isServerSideGroupOpenByDefault:"isServerSideGroupOpenByDefault",isApplyServerSideTransaction:"isApplyServerSideTransaction",isServerSideGroup:"isServerSideGroup",getServerSideGroupKey:"getServerSideGroupKey",getBusinessKeyForNode:"getBusinessKeyForNode",getRowId:"getRowId",resetRowDataOnUpdate:"resetRowDataOnUpdate",processRowPostCreate:"processRowPostCreate",isRowSelectable:"isRowSelectable",isRowMaster:"isRowMaster",fillOperation:"fillOperation",postSortRows:"postSortRows",getRowStyle:"getRowStyle",getRowClass:"getRowClass",getRowHeight:"getRowHeight",isFullWidthRow:"isFullWidthRow"},outputs:{toolPanelVisibleChanged:"toolPanelVisibleChanged",toolPanelSizeChanged:"toolPanelSizeChanged",columnMenuVisibleChanged:"columnMenuVisibleChanged",contextMenuVisibleChanged:"contextMenuVisibleChanged",cutStart:"cutStart",cutEnd:"cutEnd",pasteStart:"pasteStart",pasteEnd:"pasteEnd",columnVisible:"columnVisible",columnPinned:"columnPinned",columnResized:"columnResized",columnMoved:"columnMoved",columnValueChanged:"columnValueChanged",columnPivotModeChanged:"columnPivotModeChanged",columnPivotChanged:"columnPivotChanged",columnGroupOpened:"columnGroupOpened",newColumnsLoaded:"newColumnsLoaded",gridColumnsChanged:"gridColumnsChanged",displayedColumnsChanged:"displayedColumnsChanged",virtualColumnsChanged:"virtualColumnsChanged",columnEverythingChanged:"columnEverythingChanged",columnHeaderMouseOver:"columnHeaderMouseOver",columnHeaderMouseLeave:"columnHeaderMouseLeave",columnHeaderClicked:"columnHeaderClicked",columnHeaderContextMenu:"columnHeaderContextMenu",componentStateChanged:"componentStateChanged",cellValueChanged:"cellValueChanged",cellEditRequest:"cellEditRequest",rowValueChanged:"rowValueChanged",cellEditingStarted:"cellEditingStarted",cellEditingStopped:"cellEditingStopped",rowEditingStarted:"rowEditingStarted",rowEditingStopped:"rowEditingStopped",undoStarted:"undoStarted",undoEnded:"undoEnded",redoStarted:"redoStarted",redoEnded:"redoEnded",rangeDeleteStart:"rangeDeleteStart",rangeDeleteEnd:"rangeDeleteEnd",fillStart:"fillStart",fillEnd:"fillEnd",filterOpened:"filterOpened",filterChanged:"filterChanged",filterModified:"filterModified",advancedFilterBuilderVisibleChanged:"advancedFilterBuilderVisibleChanged",chartCreated:"chartCreated",chartRangeSelectionChanged:"chartRangeSelectionChanged",chartOptionsChanged:"chartOptionsChanged",chartDestroyed:"chartDestroyed",cellKeyDown:"cellKeyDown",gridReady:"gridReady",firstDataRendered:"firstDataRendered",gridSizeChanged:"gridSizeChanged",modelUpdated:"modelUpdated",virtualRowRemoved:"virtualRowRemoved",viewportChanged:"viewportChanged",bodyScroll:"bodyScroll",bodyScrollEnd:"bodyScrollEnd",dragStarted:"dragStarted",dragStopped:"dragStopped",stateUpdated:"stateUpdated",paginationChanged:"paginationChanged",rowDragEnter:"rowDragEnter",rowDragMove:"rowDragMove",rowDragLeave:"rowDragLeave",rowDragEnd:"rowDragEnd",columnRowGroupChanged:"columnRowGroupChanged",rowGroupOpened:"rowGroupOpened",expandOrCollapseAll:"expandOrCollapseAll",pivotMaxColumnsExceeded:"pivotMaxColumnsExceeded",pinnedRowDataChanged:"pinnedRowDataChanged",rowDataUpdated:"rowDataUpdated",asyncTransactionsFlushed:"asyncTransactionsFlushed",storeRefreshed:"storeRefreshed",headerFocused:"headerFocused",cellClicked:"cellClicked",cellDoubleClicked:"cellDoubleClicked",cellFocused:"cellFocused",cellMouseOver:"cellMouseOver",cellMouseOut:"cellMouseOut",cellMouseDown:"cellMouseDown",rowClicked:"rowClicked",rowDoubleClicked:"rowDoubleClicked",rowSelected:"rowSelected",selectionChanged:"selectionChanged",cellContextMenu:"cellContextMenu",rangeSelectionChanged:"rangeSelectionChanged",tooltipShow:"tooltipShow",tooltipHide:"tooltipHide",sortChanged:"sortChanged"},standalone:!0,features:[cs([KG,qG]),nn,Fe],decls:0,vars:0,template:function(s,r){},encapsulation:2});let e=t;return e})();var YG=(()=>{let t=class t{constructor(i,s){this.utilService=i,this.tagService=s,this.transactions=[],this.rowData=[],this.colDefs=[{field:"description"},{field:"amount"},{field:"date"},{field:"type"},{field:"category"}],this.gridOptions={getRowStyle:r=>{let o=r.data.type==="income",a=(r.node.rowIndex??0)%2===0;return o?{backgroundColor:a?"#e6f3e6":"#f0f8f0"}:{backgroundColor:a?"#fce4e4":"#fdf0f0"}}}}ngOnChanges(){this.rowData=this.transactionToRowData(this.transactions)}transactionToRowData(i){return i.map(s=>({date:this.utilService.formatDateToDayMonthYearWeekday(s.date),description:s.description,category:s.tagIds[0],amount:s.amount,type:s.type}))}};t.\u0275fac=function(s){return new(s||t)(ne(Xv),ne(gu))},t.\u0275cmp=Pe({type:t,selectors:[["app-transaction-table"]],inputs:{transactions:"transactions"},standalone:!0,features:[nn,Fe],decls:1,vars:3,consts:[[1,"ag-theme-alpine",2,"height","300px",3,"rowData","columnDefs","gridOptions"]],template:function(s,r){s&1&&de(0,"ag-grid-angular",0),s&2&&_e("rowData",r.rowData)("columnDefs",r.colDefs)("gridOptions",r.gridOptions)},dependencies:[QG]});let e=t;return e})();function hce(e,t){if(e&1&&(Y(0,"div",12),de(1,"app-stat-card",13),J()),e&2){let n=t.$implicit;ve(),_e("title",n.title)("value",n.value)("percentChange",n.percentChange)}}var JG=(()=>{let t=class t{constructor(i,s){this.authService=i,this.transactionService=s,this.userInfo={},this.statCards=[{title:"Income",value:0,percentChange:0},{title:"Expense",value:0,percentChange:0},{title:"Net",value:0,percentChange:0}],this.income=[],this.expenses=[],this.allTransactions=[],this.incomeLineBarData=[],this.expenseLineBarData=[];let r=this.authService.currentUserSig();r&&(this.userInfo=r)}ngOnInit(){this.allTransactions=[],this.loadExpenseTransactions(),this.loadIncomeTransactions()}loadExpenseTransactions(){this.transactionService.expenseTransactions$.subscribe(i=>{this.expenses=i,this.expenseLineBarData=this.convertTransactionsToLineBarData(i),this.statCards[1].value=this.aggregateTransactions(i),this.calculateNetIncome(),this.allTransactions=this.combineAndSortTransactions(this.income,this.expenses)},i=>{console.error("Error fetching expense transactions:",i)})}loadIncomeTransactions(){this.transactionService.incomeTransactions$.subscribe(i=>{this.income=i,this.incomeLineBarData=this.convertTransactionsToLineBarData(i),this.statCards[0].value=this.aggregateTransactions(i),this.calculateNetIncome(),this.allTransactions=this.combineAndSortTransactions(this.income,this.expenses)},i=>{console.error("Error fetching income transactions:",i)})}combineAndSortTransactions(i,s){let r=[...i,...s];return r.sort((o,a)=>new Date(a.date).getTime()-new Date(o.date).getTime()),r}calculateNetIncome(){this.statCards[2].value=this.statCards[0].value-this.statCards[1].value}aggregateTransactions(i){return i.reduce((s,r)=>s+r.amount,0)}convertTransactionsToLineBarData(i){return i.map(s=>({tag:s.tagIds[0],value:[s.date.getTime(),s.amount],title:s.description}))}};t.\u0275fac=function(s){return new(s||t)(ne(Ws),ne(Zv))},t.\u0275cmp=Pe({type:t,selectors:[["app-dashboard-page"]],standalone:!0,features:[Fe],decls:13,vars:6,consts:[[1,"container-fluid","d-flex","justify-content-center"],[1,"mt-2","row","d-flex","justify-content-center"],[1,"row","col-12","col-lg-6"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-start","fw-bold"],[1,"me-4"],[1,"row","mb-3"],["class","col-md-4 mb-2",4,"ngFor","ngForOf"],["title","Total Expenses","percentChangeMessage","Previous dip:",3,"data","isIncome"],[1,"row","col-12","col-lg-6","mt-3","mt-lg-0","mx-lg-2"],["title","Total Income","percentChangeMessage","Previous gains:",1,"mb-3",3,"data","isIncome"],[3,"transactions"],[1,"col-md-4","mb-2"],[3,"title","value","percentChange"]],template:function(s,r){s&1&&(Y(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),Ae(5,"Dashboard"),J(),de(6,"app-transaction-form",5),J(),Y(7,"div",6),Ct(8,hce,2,3,"div",7),J(),de(9,"app-line-bar-chart",8),J(),Y(10,"div",9),de(11,"app-line-bar-chart",10)(12,"app-transaction-table",11),J()()()),s&2&&(ve(8),_e("ngForOf",r.statCards),ve(),_e("data",r.expenseLineBarData)("isIncome",!1),ve(2),_e("data",r.incomeLineBarData)("isIncome",!0),ve(),_e("transactions",r.allTransactions))},dependencies:[vn,So,CV,yV,_V,YG]});let e=t;return e})();var XG=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Pe({type:t,selectors:[["app-landing-page"]],standalone:!0,features:[Fe],decls:2,vars:0,template:function(s,r){s&1&&(Y(0,"p"),Ae(1,"landing-page works!"),J())}});let e=t;return e})();var fce=[{path:"",component:JG}],ZG=[{path:"",component:XG,canActivate:[Gm]},{path:"login",component:dN,canActivate:[Gm]},{path:"register",component:hN,canActivate:[Gm]},{path:"dashboard",component:HN,canActivate:[fN],children:fce}];var nH="@firebase/installations",zR="0.6.8";var iH=1e4,sH=`w:${zR}`,rH="FIS_v2",pce="https://firebaseinstallations.googleapis.com/v1",gce=60*60*1e3,mce="installations",vce="Installations";var Cce={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Sl=new Is(mce,vce,Cce);function oH(e){return e instanceof ns&&e.code.includes("request-failed")}function aH({projectId:e}){return`${pce}/projects/${e}/installations`}function lH(e){return{token:e.token,requestStatus:2,expiresIn:wce(e.expiresIn),creationTime:Date.now()}}function cH(e,t){return F(this,null,function*(){let i=(yield t.json()).error;return Sl.create("request-failed",{requestName:e,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})})}function uH({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function yce(e,{refreshToken:t}){let n=uH(e);return n.append("Authorization",Sce(t)),n}function dH(e){return F(this,null,function*(){let t=yield e();return t.status>=500&&t.status<600?e():t})}function wce(e){return Number(e.replace("s","000"))}function Sce(e){return`${rH} ${e}`}function _ce(i,s){return F(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},{fid:n}){let r=aH(e),o=uH(e),a=t.getImmediate({optional:!0});if(a){let h=yield a.getHeartbeatsHeader();h&&o.append("x-firebase-client",h)}let l={fid:n,authVersion:rH,appId:e.appId,sdkVersion:sH},c={method:"POST",headers:o,body:JSON.stringify(l)},u=yield dH(()=>fetch(r,c));if(u.ok){let h=yield u.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:lH(h.authToken)}}else throw yield cH("Create Installation",u)})}function hH(e){return new Promise(t=>{setTimeout(t,e)})}function bce(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}var Ece=/^[cdef][\w-]{21}$/,jR="";function Dce(){try{let e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;let n=Rce(e);return Ece.test(n)?n:jR}catch{return jR}}function Rce(e){return bce(e).substr(0,22)}function MC(e){return`${e.appName}!${e.appId}`}var fH=new Map;function pH(e,t){let n=MC(e);gH(n,t),Tce(n,t)}function gH(e,t){let n=fH.get(e);if(n)for(let i of n)i(t)}function Tce(e,t){let n=Ice();n&&n.postMessage({key:e,fid:t}),Ace()}var wl=null;function Ice(){return!wl&&"BroadcastChannel"in self&&(wl=new BroadcastChannel("[Firebase] FID Change"),wl.onmessage=e=>{gH(e.data.key,e.data.fid)}),wl}function Ace(){fH.size===0&&wl&&(wl.close(),wl=null)}var Mce="firebase-installations-database",Pce=1,_l="firebase-installations-store",UR=null;function $R(){return UR||(UR=yd(Mce,Pce,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(_l)}}})),UR}function AC(e,t){return F(this,null,function*(){let n=MC(e),s=(yield $R()).transaction(_l,"readwrite"),r=s.objectStore(_l),o=yield r.get(n);return yield r.put(t,n),yield s.done,(!o||o.fid!==t.fid)&&pH(e,t.fid),t})}function mH(e){return F(this,null,function*(){let t=MC(e),i=(yield $R()).transaction(_l,"readwrite");yield i.objectStore(_l).delete(t),yield i.done})}function PC(e,t){return F(this,null,function*(){let n=MC(e),s=(yield $R()).transaction(_l,"readwrite"),r=s.objectStore(_l),o=yield r.get(n),a=t(o);return a===void 0?yield r.delete(n):yield r.put(a,n),yield s.done,a&&(!o||o.fid!==a.fid)&&pH(e,a.fid),a})}function qR(e){return F(this,null,function*(){let t,n=yield PC(e.appConfig,i=>{let s=Fce(i),r=xce(e,s);return t=r.registrationPromise,r.installationEntry});return n.fid===jR?{installationEntry:yield t}:{installationEntry:n,registrationPromise:t}})}function Fce(e){let t=e||{fid:Dce(),registrationStatus:0};return vH(t)}function xce(e,t){if(t.registrationStatus===0){if(!navigator.onLine){let s=Promise.reject(Sl.create("app-offline"));return{installationEntry:t,registrationPromise:s}}let n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=Oce(e,n);return{installationEntry:n,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:Nce(e)}:{installationEntry:t}}function Oce(e,t){return F(this,null,function*(){try{let n=yield _ce(e,t);return AC(e.appConfig,n)}catch(n){throw oH(n)&&n.customData.serverCode===409?yield mH(e.appConfig):yield AC(e.appConfig,{fid:t.fid,registrationStatus:0}),n}})}function Nce(e){return F(this,null,function*(){let t=yield eH(e.appConfig);for(;t.registrationStatus===1;)yield hH(100),t=yield eH(e.appConfig);if(t.registrationStatus===0){let{installationEntry:n,registrationPromise:i}=yield qR(e);return i||n}return t})}function eH(e){return PC(e,t=>{if(!t)throw Sl.create("installation-not-found");return vH(t)})}function vH(e){return kce(e)?{fid:e.fid,registrationStatus:0}:e}function kce(e){return e.registrationStatus===1&&e.registrationTime+iH<Date.now()}function Lce(i,s){return F(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},n){let r=Vce(e,n),o=yce(e,n),a=t.getImmediate({optional:!0});if(a){let h=yield a.getHeartbeatsHeader();h&&o.append("x-firebase-client",h)}let l={installation:{sdkVersion:sH,appId:e.appId}},c={method:"POST",headers:o,body:JSON.stringify(l)},u=yield dH(()=>fetch(r,c));if(u.ok){let h=yield u.json();return lH(h)}else throw yield cH("Generate Auth Token",u)})}function Vce(e,{fid:t}){return`${aH(e)}/${t}/authTokens:generate`}function KR(e,t=!1){return F(this,null,function*(){let n,i=yield PC(e.appConfig,r=>{if(!CH(r))throw Sl.create("not-registered");let o=r.authToken;if(!t&&Hce(o))return r;if(o.requestStatus===1)return n=Bce(e,t),r;{if(!navigator.onLine)throw Sl.create("app-offline");let a=Wce(r);return n=Gce(e,a),a}});return n?yield n:i.authToken})}function Bce(e,t){return F(this,null,function*(){let n=yield tH(e.appConfig);for(;n.authToken.requestStatus===1;)yield hH(100),n=yield tH(e.appConfig);let i=n.authToken;return i.requestStatus===0?KR(e,t):i})}function tH(e){return PC(e,t=>{if(!CH(t))throw Sl.create("not-registered");let n=t.authToken;return jce(n)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}function Gce(e,t){return F(this,null,function*(){try{let n=yield Lce(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return yield AC(e.appConfig,i),n}catch(n){if(oH(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield mH(e.appConfig);else{let i=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});yield AC(e.appConfig,i)}throw n}})}function CH(e){return e!==void 0&&e.registrationStatus===2}function Hce(e){return e.requestStatus===2&&!Uce(e)}function Uce(e){let t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+gce}function Wce(e){let t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function jce(e){return e.requestStatus===1&&e.requestTime+iH<Date.now()}function zce(e){return F(this,null,function*(){let t=e,{installationEntry:n,registrationPromise:i}=yield qR(t);return i?i.catch(console.error):KR(t).catch(console.error),n.fid})}function $ce(e,t=!1){return F(this,null,function*(){let n=e;return yield qce(n),(yield KR(n,t)).token})}function qce(e){return F(this,null,function*(){let{registrationPromise:t}=yield qR(e);t&&(yield t)})}function Kce(e){if(!e||!e.options)throw WR("App Configuration");if(!e.name)throw WR("App Name");let t=["projectId","apiKey","appId"];for(let n of t)if(!e.options[n])throw WR(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function WR(e){return Sl.create("missing-app-config-values",{valueName:e})}var yH="installations",Qce="installations-internal",Yce=e=>{let t=e.getProvider("app").getImmediate(),n=Kce(t),i=Ht(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},Jce=e=>{let t=e.getProvider("app").getImmediate(),n=Ht(t,yH).getImmediate();return{getId:()=>zce(n),getToken:s=>$ce(n,s)}};function Xce(){Et(new bt(yH,Yce,"PUBLIC")),Et(new bt(Qce,Jce,"PRIVATE"))}Xce();pe(nH,zR);pe(nH,zR,"esm2017");var FC="analytics",Zce="firebase_id",eue="origin",tue=60*1e3,nue="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",tT="https://www.googletagmanager.com/gtag/js";var Jn=new Ms("@firebase/analytics");var iue={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ai=new Is("analytics","Analytics",iue);function sue(e){if(!e.startsWith(tT)){let t=Ai.create("invalid-gtag-resource",{gtagURL:e});return Jn.warn(t.message),""}return e}function RH(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function rue(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function oue(e,t){let n=rue("firebase-js-sdk-policy",{createScriptURL:sue}),i=document.createElement("script"),s=`${tT}?l=${e}&id=${t}`;i.src=n?n?.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function aue(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}function lue(e,t,n,i,s,r){return F(this,null,function*(){let o=i[s];try{if(o)yield t[o];else{let l=(yield RH(n)).find(c=>c.measurementId===s);l&&(yield t[l.appId])}}catch(a){Jn.error(a)}e("config",s,r)})}function cue(e,t,n,i,s){return F(this,null,function*(){try{let r=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);let a=yield RH(n);for(let l of o){let c=a.find(h=>h.measurementId===l),u=c&&t[c.appId];if(u)r.push(u);else{r=[];break}}}r.length===0&&(r=Object.values(t)),yield Promise.all(r),e("event",i,s||{})}catch(r){Jn.error(r)}})}function uue(e,t,n,i){function s(r,...o){return F(this,null,function*(){try{if(r==="event"){let[a,l]=o;yield cue(e,t,n,a,l)}else if(r==="config"){let[a,l]=o;yield lue(e,t,n,i,a,l)}else if(r==="consent"){let[a,l]=o;e("consent",a,l)}else if(r==="get"){let[a,l,c]=o;e("get",a,l,c)}else if(r==="set"){let[a]=o;e("set",a)}else e(r,...o)}catch(a){Jn.error(a)}})}return s}function due(e,t,n,i,s){let r=function(...o){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(r=window[s]),window[s]=uue(r,e,t,n),{gtagCore:r,wrappedGtag:window[s]}}function hue(e){let t=window.document.getElementsByTagName("script");for(let n of Object.values(t))if(n.src&&n.src.includes(tT)&&n.src.includes(e))return n;return null}var fue=30,pue=1e3,YR=class{constructor(t={},n=pue){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}},TH=new YR;function gue(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function mue(e){return F(this,null,function*(){var t;let{appId:n,apiKey:i}=e,s={method:"GET",headers:gue(i)},r=nue.replace("{app-id}",n),o=yield fetch(r,s);if(o.status!==200&&o.status!==304){let a="";try{let l=yield o.json();!((t=l.error)===null||t===void 0)&&t.message&&(a=l.error.message)}catch{}throw Ai.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function vue(i){return F(this,arguments,function*(e,t=TH,n){let{appId:s,apiKey:r,measurementId:o}=e.options;if(!s)throw Ai.create("no-app-id");if(!r){if(o)return{measurementId:o,appId:s};throw Ai.create("no-api-key")}let a=t.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new JR;return setTimeout(()=>F(this,null,function*(){l.abort()}),n!==void 0?n:tue),IH({appId:s,apiKey:r,measurementId:o},a,l,t)})}function IH(r,o,a){return F(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:n},i,s=TH){var l;let{appId:c,measurementId:u}=e;try{yield Cue(i,t)}catch(h){if(u)return Jn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:c,measurementId:u};throw h}try{let h=yield mue(e);return s.deleteThrottleMetadata(c),h}catch(h){let f=h;if(!yue(f)){if(s.deleteThrottleMetadata(c),u)return Jn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:c,measurementId:u};throw h}let g=Number((l=f?.customData)===null||l===void 0?void 0:l.httpStatus)===503?Wl(n,s.intervalMillis,fue):Wl(n,s.intervalMillis),v={throttleEndTimeMillis:Date.now()+g,backoffCount:n+1};return s.setThrottleMetadata(c,v),Jn.debug(`Calling attemptFetch again in ${g} millis`),IH(e,v,i,s)}})}function Cue(e,t){return new Promise((n,i)=>{let s=Math.max(t-Date.now(),0),r=setTimeout(n,s);e.addEventListener(()=>{clearTimeout(r),i(Ai.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function yue(e){if(!(e instanceof ns)||!e.customData)return!1;let t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var JR=class{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}};var XR;function wue(e,t,n,i,s){return F(this,null,function*(){if(s&&s.global){e("event",n,i);return}else{let r=yield t,o=Object.assign(Object.assign({},i),{send_to:r});e("event",n,o)}})}function Sue(e,t,n,i){return F(this,null,function*(){if(i&&i.global)return e("set",{user_id:n}),Promise.resolve();{let s=yield t;e("config",s,{update:!0,user_id:n})}})}var ZR;function _ue(e){ZR=e}function bue(e){XR=e}function Eue(){return F(this,null,function*(){if(ts())try{yield na()}catch(e){return Jn.warn(Ai.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}else return Jn.warn(Ai.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function Due(e,t,n,i,s,r,o){return F(this,null,function*(){var a;let l=vue(e);l.then(g=>{n[g.measurementId]=g.appId,e.options.measurementId&&g.measurementId!==e.options.measurementId&&Jn.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Jn.error(g)),t.push(l);let c=Eue().then(g=>{if(g)return i.getId()}),[u,h]=yield Promise.all([l,c]);hue(r)||oue(r,u.measurementId),ZR&&(s("consent","default",ZR),_ue(void 0)),s("js",new Date);let f=(a=o?.config)!==null&&a!==void 0?a:{};return f[eue]="firebase",f.update=!0,h!=null&&(f[Zce]=h),s("config",u.measurementId,f),XR&&(s("set",XR),bue(void 0)),u.measurementId})}var eT=class{constructor(t){this.app=t}_delete(){return delete Pu[this.app.options.appId],Promise.resolve()}},Pu={},wH=[],SH={},QR="dataLayer",Rue="gtag",_H,nT,bH=!1;function Tue(){let e=[];if(wy()&&e.push("This is a browser extension environment."),gd()||e.push("Cookies are not available."),e.length>0){let t=e.map((i,s)=>`(${s+1}) ${i}`).join(" "),n=Ai.create("invalid-analytics-context",{errorInfo:t});Jn.warn(n.message)}}function Iue(e,t,n){Tue();let i=e.options.appId;if(!i)throw Ai.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)Jn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ai.create("no-api-key");if(Pu[i]!=null)throw Ai.create("already-exists",{id:i});if(!bH){aue(QR);let{wrappedGtag:r,gtagCore:o}=due(Pu,wH,SH,QR,Rue);nT=r,_H=o,bH=!0}return Pu[i]=Due(e,wH,SH,t,_H,QR,n),new eT(e)}function AH(e=Xt()){e=Ze(e);let t=Ht(e,FC);return t.isInitialized()?t.getImmediate():MH(e)}function MH(e,t={}){let n=Ht(e,FC);if(n.isInitialized()){let s=n.getImmediate();if(vd(t,n.getOptions()))return s;throw Ai.create("already-initialized")}return n.initialize({options:t})}function PH(){return F(this,null,function*(){if(wy()||!gd()||!ts())return!1;try{return yield na()}catch{return!1}})}function FH(e,t,n){e=Ze(e),Sue(nT,Pu[e.app.options.appId],t,n).catch(i=>Jn.error(i))}function iT(e,t,n,i){e=Ze(e),wue(nT,Pu[e.app.options.appId],t,n,i).catch(s=>Jn.error(s))}var EH="@firebase/analytics",DH="0.10.5";function Aue(){Et(new bt(FC,(t,{options:n})=>{let i=t.getProvider("app").getImmediate(),s=t.getProvider("installations-internal").getImmediate();return Iue(i,s,n)},"PUBLIC")),Et(new bt("analytics-internal",e,"PRIVATE")),pe(EH,DH),pe(EH,DH,"esm2017");function e(t){try{let n=t.getProvider(FC).getImmediate();return{logEvent:(i,s,r)=>iT(n,i,s,r)}}catch(n){throw Ai.create("interop-component-reg-failed",{reason:n})}}}Aue();var bl=class{constructor(t){return t}},NH="analytics",rT=class{constructor(){return yn(NH)}};var oT="__angularfire_symbol__analyticsIsSupportedValue",kH="__angularfire_symbol__analyticsIsSupported";globalThis[kH]||=PH().then(e=>globalThis[oT]=e).catch(()=>globalThis[oT]=!1);var xC={async:()=>globalThis[kH],sync:()=>{let e=globalThis[oT];if(e===void 0)throw new Error(Hc("Analytics"));return e}},LH=xC.async,VH=Oe(AH,!0);var Mue=Oe(iT,!0);var Pue=Oe(FH,!0);var lT=(()=>{class e{initialized;disposables=[];constructor(n,i,s){pe("angularfire",Dt.full,"user-tracking");let r;this.initialized=i.runOutsideAngular(()=>new Promise(o=>{r=o})),LH().then(()=>{let o=s.get(bl);o?this.disposables=[bh(n).subscribe(a=>{Pue(o,a?.uid),r()})]:r()})}ngOnDestroy(){this.disposables.forEach(n=>n.unsubscribe())}static \u0275fac=function(i){return new(i||e)(K(Bi),K(le),K(Ue))};static \u0275prov=ee({token:e,factory:e.\u0275fac})}return e})(),Fue="firebase_event_origin",xue="firebase_previous_class",Oue="firebase_previous_id",Nue="firebase_previous_screen",kue="firebase_screen_class",xH="firebase_screen_id",Lue="firebase_screen",aT="outlet",Vue="page_path",Bue="page_title",yf="screen_class",OH="screen_name",Gue="screen_view",Hue="auto",Uue="#",Wue=Math.floor(Math.random()*(2**32-1))-2**31,sT={},jue=e=>{let t=[e[yf],e[aT]].join(Uue);if(sT.hasOwnProperty(t))return sT[t];{let n=Wue++;return sT[t]=n,n}},zue=(e,t,n)=>e.events.pipe(ut(s=>s instanceof dh)).pipe(Ge(s=>{let o=e.parseUrl(e.url.replace(/(?:\().+(?:\))/g,f=>f.replace("://",":///"))).root.children[s.snapshot.outlet]?.toString()||"",a=e.routerState.root.children.map(f=>f).find(f=>f.outlet===s.snapshot.outlet);if(!a)return Z(null);let l=a;for(;l.firstChild;)l=l.firstChild;let c=l.pathFromRoot.map(f=>f.routeConfig?.path).filter(f=>f).join("/")||"/",u={[OH]:c,[Vue]:`/${o}`,[Fue]:Hue,[Lue]:c,[aT]:s.snapshot.outlet};t&&(u[Bue]=t.getTitle());let h=a.component;if(h){if(h===ob){let f=s.snapshot;for(;f.firstChild;)f=f.firstChild;h=f.component}}else h=s.snapshot.component;if(typeof h=="string")return Z(se(B({},u),{[yf]:h}));if(h){let f=n.resolveComponentFactory(h);return Z(se(B({},u),{[yf]:f.selector}))}return Z(null)}),ut(s=>!!s),oe(s=>B({[kue]:s[yf],[xH]:jue(s)},s)),zy(s=>s[aT]),nt(s=>s.pipe(Td((r,o)=>JSON.stringify(r)===JSON.stringify(o)),ua(void 0),Wp(),oe(([r,o])=>r?B({[xue]:r[yf],[Nue]:r[OH],[Oue]:r[xH]},o):o)))),BH=(()=>{class e{disposable;constructor(n,i,s,r,o,a){pe("angularfire",Dt.full,"screen-tracking"),LH().then(()=>{let l=a.get(bl);!n||!l||r.runOutsideAngular(()=>{this.disposable=zue(n,i,s).pipe(Ge(c=>F(this,null,function*(){return o&&(yield o.initialized),Mue(l,Gue,c)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(i){return new(i||e)(K(Un,8),K(lm,8),K(Sc),K(le),K(lT,8),K(Ue))};static \u0275prov=ee({token:e,factory:e.\u0275fac})}return e})(),cT=new Q("angularfire2.analytics-instances");function $ue(e,t){if(!xC.sync())return null;let n=En(NH,e,t);return n&&new bl(n)}function que(e){return(t,n)=>{if(!xC.sync())return null;let i=t.runOutsideAngular(()=>e(n));return new bl(i)}}var Kue={provide:rT,deps:[[new Te,cT]]},Que={provide:bl,useFactory:$ue,deps:[[new Te,cT],Pt]};function GH(e,...t){return pe("angularfire",Dt.full,"analytics"),ht([Que,Kue,{provide:wo,useValue:xC.async,multi:!0},{provide:cT,useFactory:que(e),multi:!0,deps:[le,Ue,Nt,$t,...t]}])}var HH="@firebase/database",UH="1.0.6";var aI="";function Yue(e){aI=e}var vT=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Jt(n))}get(t){let n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:cp(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var CT=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return As(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var w2=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new vT(t)}}catch{}return new CT},Dl=w2("localStorage"),yT=w2("sessionStorage");var Nu=new Ms("@firebase/database"),Jue=function(){let e=1;return function(){return e++}}(),S2=function(e){let t=dM(e),n=new cM;n.update(t);let i=n.digest();return lp.encodeByteArray(i)},Ff=function(...e){let t="";for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=Ff.apply(null,i):typeof i=="object"?t+=Jt(i):t+=i,t+=" "}return t},Rl=null,WH=!0,Xue=function(e,t){te(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(Nu.logLevel=di.VERBOSE,Rl=Nu.log.bind(Nu),t&&yT.set("logging_enabled",!0)):typeof e=="function"?Rl=e:(Rl=null,yT.remove("logging_enabled"))},Mn=function(...e){if(WH===!0&&(WH=!1,Rl===null&&yT.get("logging_enabled")===!0&&Xue(!0)),Rl){let t=Ff.apply(null,e);Rl(t)}},xf=function(e){return function(...t){Mn(e,...t)}},wT=function(...e){let t="FIREBASE INTERNAL ERROR: "+Ff(...e);Nu.error(t)},zr=function(...e){let t=`FIREBASE FATAL ERROR: ${Ff(...e)}`;throw Nu.error(t),new Error(t)},Mi=function(...e){let t="FIREBASE WARNING: "+Ff(...e);Nu.warn(t)},Zue=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Mi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},_2=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},ede=function(e){if(Ts()||document.readyState==="complete")e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Lu="[MIN_NAME]",Tl="[MAX_NAME]",ju=function(e,t){if(e===t)return 0;if(e===Lu||t===Tl)return-1;if(t===Lu||e===Tl)return 1;{let n=jH(e),i=jH(t);return n!==null?i!==null?n-i===0?e.length-t.length:n-i:-1:i!==null?1:e<t?-1:1}},tde=function(e,t){return e===t?0:e<t?-1:1},wf=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Jt(t))},lI=function(e){if(typeof e!="object"||e===null)return Jt(e);let t=[];for(let i in e)t.push(i);t.sort();let n="{";for(let i=0;i<t.length;i++)i!==0&&(n+=","),n+=Jt(t[i]),n+=":",n+=lI(e[t[i]]);return n+="}",n},b2=function(e,t){let n=e.length;if(n<=t)return[e];let i=[];for(let s=0;s<n;s+=t)s+t>n?i.push(e.substring(s,n)):i.push(e.substring(s,s+t));return i};function Xi(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var E2=function(e){te(!_2(e),"Invalid JSON number");let t=11,n=52,i=(1<<t-1)-1,s,r,o,a,l;e===0?(r=0,o=0,s=1/e===-1/0?1:0):(s=e<0,e=Math.abs(e),e>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),i),r=a+i,o=Math.round(e*Math.pow(2,n-a)-Math.pow(2,n))):(r=0,o=Math.round(e/Math.pow(2,1-i-n))));let c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=t;l;l-=1)c.push(r%2?1:0),r=Math.floor(r/2);c.push(s?1:0),c.reverse();let u=c.join(""),h="";for(l=0;l<64;l+=8){let f=parseInt(u.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},nde=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},ide=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var sde=new RegExp("^-?(0*)\\d{1,10}$"),rde=-2147483648,ode=2147483647,jH=function(e){if(sde.test(e)){let t=Number(e);if(t>=rde&&t<=ode)return t}return null},Of=function(e){try{e()}catch(t){setTimeout(()=>{let n=t.stack||"";throw Mi("Exception was thrown by user callback.",n),t},Math.floor(0))}},ade=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Df=function(e,t){let n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var ST=class{constructor(t,n){this.appName_=t,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Mi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var _T=class{constructor(t,n,i){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(Mn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Mi(t)}},Rf=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),NC="5",D2="v",R2="s",T2="r",I2="f",A2=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,M2="ls",P2="p",bT="ac",F2="websocket",x2="long_polling";var kC=class{constructor(t,n,i,s,r=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Dl.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Dl.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}};function lde(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function O2(e,t,n){te(typeof t=="string","typeof type must == string"),te(typeof n=="object","typeof params must == object");let i;if(t===F2)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===x2)i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);lde(e)&&(n.ns=e.namespace);let s=[];return Xi(n,(r,o)=>{s.push(r+"="+o)}),i+s.join("&")}var ET=class{constructor(){this.counters_={}}incrementCounter(t,n=1){As(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return nM(this.counters_)}};var uT={},dT={};function cI(e){let t=e.toString();return uT[t]||(uT[t]=new ET),uT[t]}function cde(e,t){let n=e.toString();return dT[n]||(dT[n]=t()),dT[n]}var DT=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&Of(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var zH="start",ude="close",dde="pLPCommand",hde="pRTLPCB",N2="id",k2="pw",L2="ser",fde="cb",pde="seg",gde="ts",mde="d",vde="dframe",V2=1870,B2=30,Cde=V2-B2,yde=25e3,wde=3e4,RT=class e{constructor(t,n,i,s,r,o,a){this.connId=t,this.repoInfo=n,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=xf(t),this.stats_=cI(n),this.urlFn=l=>(this.appCheckToken&&(l[bT]=this.appCheckToken),O2(n,x2,l))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new DT(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(wde)),ede(()=>{if(this.isClosed_)return;this.scriptTagHolder=new TT((...r)=>{let[o,a,l,c,u]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===zH)this.id=a,this.password=l;else if(o===ude)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...r)=>{let[o,a]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[zH]="t",i[L2]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[fde]=this.scriptTagHolder.uniqueCallbackIdentifier),i[D2]=NC,this.transportSessionId&&(i[R2]=this.transportSessionId),this.lastSessionId&&(i[M2]=this.lastSessionId),this.applicationId&&(i[P2]=this.applicationId),this.appCheckToken&&(i[bT]=this.appCheckToken),typeof location<"u"&&location.hostname&&A2.test(location.hostname)&&(i[T2]=I2);let s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return Ts()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!nde()&&!ide()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let n=Jt(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let i=tM(n),s=b2(i,Cde);for(let r=0;r<s.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[r]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if(Ts())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[vde]="t",i[N2]=t,i[k2]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let n=Jt(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},TT=class e{constructor(t,n,i,s){if(this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Ts())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Jue(),window[dde+this.uniqueCallbackIdentifier]=t,window[hde+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Mn("frame writing exception"),a.stack&&Mn(a.stack),Mn(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Mn("No IE domain setting required")}catch{let i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[N2]=this.myID,t[k2]=this.myPW,t[L2]=this.currentSerial;let n=this.urlFn(t),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+B2+i.length<=V2;){let o=this.pendingSegs.shift();i=i+"&"+pde+s+"="+o.seg+"&"+gde+s+"="+o.ts+"&"+mde+s+"="+o.d,s++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,i){this.pendingSegs.push({seg:t,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);let i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(i,Math.floor(yde)),r=()=>{clearTimeout(s),i()};this.addTag(t,r)}addTag(t,n){Ts()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){let s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Mn("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var Sde=16384,_de=45e3,LC=null;typeof MozWebSocket<"u"?LC=MozWebSocket:typeof WebSocket<"u"&&(LC=WebSocket);var Sf=(()=>{class e{constructor(n,i,s,r,o,a,l){this.connId=n,this.applicationId=s,this.appCheckToken=r,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=xf(this.connId),this.stats_=cI(i),this.connURL=e.connectionURL_(i,a,l,r,s),this.nodeAdmin=i.nodeAdmin}static connectionURL_(n,i,s,r,o){let a={};return a[D2]=NC,!Ts()&&typeof location<"u"&&location.hostname&&A2.test(location.hostname)&&(a[T2]=I2),i&&(a[R2]=i),s&&(a[M2]=s),r&&(a[bT]=r),o&&(a[P2]=o),O2(n,F2,a)}open(n,i){this.onDisconnect=i,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Dl.set("previous_websocket_failure",!0);try{let s;if(Ts()){let r=this.nodeAdmin?"AdminNode":"Node";s={headers:{"User-Agent":`Firebase/${NC}/${aI}/${process.platform}/${r}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(s.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(s.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(s.proxy={origin:a})}this.mySock=new LC(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");let r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");let r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(i);s&&s.length>1&&parseFloat(s[1])<4.4&&(n=!0)}return!n&&LC!==null&&!e.forceDisallow_}static previouslyFailed(){return Dl.isInMemoryStorage||Dl.get("previous_websocket_failure")===!0}markConnectionHealthy(){Dl.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let s=cp(i);this.onMessage(s)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(te(this.frames===null,"We already have a frame buffer"),n.length<=6){let i=Number(n);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let i=n.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let s=this.extractFrameCount_(i);s!==null&&this.appendFrame_(s)}}send(n){this.resetKeepAlive();let i=Jt(n);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let s=b2(i,Sde);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(_de))}sendString_(n){try{this.mySock.send(n)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),bde=(()=>{class e{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[RT,Sf]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let i=Sf&&Sf.isAvailable(),s=i&&!Sf.previouslyFailed();if(n.webSocketOnly&&(i||Mi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Sf];else{let r=this.transports_=[];for(let o of e.ALL_TRANSPORTS)o&&o.isAvailable()&&r.push(o);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),Ede=6e4,Dde=5e3,Rde=10*1024,Tde=100*1024,hT="t",$H="d",Ide="s",qH="r",Ade="e",KH="o",QH="a",YH="n",JH="p",Mde="h",IT=class{constructor(t,n,i,s,r,o,a,l,c,u){this.id=t,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=r,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=xf("c:"+this.id+":"),this.transportManager_=new bde(n),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));let s=t.healthyTimeout||0;s>0&&(this.healthyTimeout_=Df(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Tde?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Rde?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){let n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(hT in t){let n=t[hT];n===QH?this.upgradeIfSecondaryHealthy_():n===qH?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===KH&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let n=wf("t",t),i=wf("d",t);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:JH,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:QH,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:YH,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let n=wf("t",t),i=wf("d",t);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let n=wf(hT,t);if($H in t){let i=t[$H];if(n===Mde){let s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===YH){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Ide?this.onConnectionShutdown_(i):n===qH?this.onReset_(i):n===Ade?wT("Server Error: "+i):n===KH?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):wT("Unknown control packet command: "+n)}}onHandshake_(t){let n=t.ts,i=t.v,s=t.h;this.sessionId=t.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),NC!==i&&Mi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Df(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Ede))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Df(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Dde))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:JH,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Dl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var VC=class{put(t,n,i,s){}merge(t,n,i,s){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,i){}onDisconnectMerge(t,n,i){}onDisconnectCancel(t,n){}reportStats(t){}};var BC=class{constructor(t){this.allowedEvents_=t,this.listeners_={},te(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){let i=[...this.listeners_[t]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,n)}}on(t,n,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:i});let s=this.getInitialEvent(t);s&&n.apply(i,s)}off(t,n,i){this.validateEventType_(t);let s=this.listeners_[t]||[];for(let r=0;r<s.length;r++)if(s[r].callback===n&&(!i||i===s[r].context)){s.splice(r,1);return}}validateEventType_(t){te(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}};var GC=class e extends BC{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!yy()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new e}getInitialEvent(t){return te(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var XH=32,ZH=768,ot=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function et(){return new ot("")}function je(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Ko(e){return e.pieces_.length-e.pieceNum_}function pt(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ot(e.pieces_,t)}function G2(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Pde(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function H2(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function U2(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ot(t,0)}function hn(e,t){let n=[];for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);if(t instanceof ot)for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{let i=t.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&n.push(i[s])}return new ot(n,0)}function Be(e){return e.pieceNum_>=e.pieces_.length}function Yi(e,t){let n=je(e),i=je(t);if(n===null)return t;if(n===i)return Yi(pt(e),pt(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function W2(e,t){if(Ko(e)!==Ko(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function _s(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(Ko(e)>Ko(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}var AT=class{constructor(t,n){this.errorPrefix_=n,this.parts_=H2(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Cd(this.parts_[i]);j2(this)}};function Fde(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Cd(t),j2(e)}function xde(e){let t=e.parts_.pop();e.byteLength_-=Cd(t),e.parts_.length>0&&(e.byteLength_-=1)}function j2(e){if(e.byteLength_>ZH)throw new Error(e.errorPrefix_+"has a key path longer than "+ZH+" bytes ("+e.byteLength_+").");if(e.parts_.length>XH)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+XH+") or object contains a cycle "+El(e))}function El(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var MT=class e extends BC{constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new e}getInitialEvent(t){return te(t==="visible","Unknown event type: "+t),[this.visible_]}};var _f=1e3,Ode=60*5*1e3,e2=30*1e3,Nde=1.3,kde=3e4,Lde="server_kill",t2=3,uI=(()=>{class e extends VC{constructor(n,i,s,r,o,a,l,c){if(super(),this.repoInfo_=n,this.applicationId_=i,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=e.nextPersistentConnectionId_++,this.log_=xf("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=_f,this.maxReconnectDelay_=Ode,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Ts())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");MT.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&GC.getInstance().on("online",this.onOnline_,this)}sendRequest(n,i,s){let r=++this.requestNumber_,o={r,a:n,b:i};this.log_(Jt(o)),te(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),s&&(this.requestCBHash_[r]=s)}get(n){this.initConnection_();let i=new Hl,r={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?i.resolve(l):i.reject(l)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),i.promise}listen(n,i,s,r){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),te(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),te(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let l={onComplete:r,hashFn:i,query:n,tag:s};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(n){let i=this.outstandingGets_[n];this.sendRequest("g",i.request,s=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(s)})}sendListen_(n){let i=n.query,s=i._path.toString(),r=i._queryIdentifier;this.log_("Listen on "+s+" for "+r);let o={p:s},a="q";n.tag&&(o.q=i._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,l=>{let c=l.d,u=l.s;e.warnOnListenWarnings_(c,i),(this.listens.get(s)&&this.listens.get(s).get(r))===n&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(s,r),n.onComplete&&n.onComplete(u,c))})}static warnOnListenWarnings_(n,i){if(n&&typeof n=="object"&&As(n,"w")){let s=ia(n,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){let r='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();Mi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||aM(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=e2)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,i=oM(n)?"auth":"gauth",s={cred:n};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(i,s,r=>{let o=r.s,a=r.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let i=n.s,s=n.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,s)})}unlisten(n,i){let s=n._path.toString(),r=n._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),te(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,n._queryObject,i)}sendUnlisten_(n,i,s,r){this.log_("Unlisten on "+n+" for "+i);let o={p:n},a="n";r&&(o.q=s,o.t=r),this.sendRequest(a,o)}onDisconnectPut(n,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,i,s):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:i,onComplete:s})}onDisconnectMerge(n,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,i,s):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:i,onComplete:s})}onDisconnectCancel(n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(n,i,s,r){let o={p:i,d:s};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{r&&setTimeout(()=>{r(a.s,a.d)},Math.floor(0))})}put(n,i,s,r){this.putInternal("p",n,i,s,r)}merge(n,i,s,r){this.putInternal("m",n,i,s,r)}putInternal(n,i,s,r,o){this.initConnection_();let a={p:i,d:s};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:r}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+i)}sendPut_(n){let i=this.outstandingPuts_[n].action,s=this.outstandingPuts_[n].request,r=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,s,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(o.s,o.d)})}reportStats(n){if(this.connected_){let i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,s=>{if(s.s!=="ok"){let o=s.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Jt(n));let i=n.r,s=this.requestCBHash_[i];s&&(delete this.requestCBHash_[i],s(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,i){this.log_("handleServerMessage",n,i),n==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):n==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):n==="c"?this.onListenRevoked_(i.p,i.q):n==="ac"?this.onAuthRevoked_(i.s,i.d):n==="apc"?this.onAppCheckRevoked_(i.s,i.d):n==="sd"?this.onSecurityDebugPacket_(i):wT("Unrecognized action received from server: "+Jt(n)+`
Are you using the latest client?`)}onReady_(n,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){te(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=_f,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=_f,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>kde&&(this.reconnectDelay_=_f),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-n);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Nde)}this.onConnectStatus_(!1)}establishConnection_(){return F(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+e.nextConnectionId_++,o=this.lastSessionId,a=!1,l=null,c=function(){l?l.close():(a=!0,s())},u=function(f){te(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(f)};this.realtime_={close:c,sendRequest:u};let h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,g]=yield Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);a?Mn("getToken() completed but was canceled"):(Mn("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=g&&g.token,l=new IT(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,i,s,v=>{Mi(v+" ("+this.repoInfo_.toString()+")"),this.interrupt(Lde)},o))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&Mi(f),c())}}})}interrupt(n){Mn("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Mn("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Sy(this.interruptReasons_)&&(this.reconnectDelay_=_f,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let i=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let i=this.outstandingPuts_[n];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,i){let s;i?s=i.map(o=>lI(o)).join("$"):s="default";let r=this.removeListen_(n,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(n,i){let s=new ot(n).toString(),r;if(this.listens.has(s)){let o=this.listens.get(s);r=o.get(i),o.delete(i),o.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(n,i){Mn("Auth token revoked: "+n+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=t2&&(this.reconnectDelay_=e2,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,i){Mn("App check token revoked: "+n+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=t2&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let i of n.values())this.sendListen_(i);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},i="js";Ts()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),n["sdk."+i+"."+aI.replace(/\./g,"-")]=1,yy()?n["framework.cordova"]=1:sM()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=GC.getInstance().currentlyOnline();return Sy(this.interruptReasons_)&&n}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),ze=class e{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new e(t,n)}};var Vu=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){let i=new ze(Lu,t),s=new ze(Lu,n);return this.compare(i,s)!==0}minPost(){return ze.MIN}};var OC,HC=class extends Vu{static get __EMPTY_NODE(){return OC}static set __EMPTY_NODE(t){OC=t}compare(t,n){return ju(t.name,n.name)}isDefinedOn(t){throw Gl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return ze.MIN}maxPost(){return new ze(Tl,OC)}makePost(t,n){return te(typeof t=="string","KeyIndex indexValue must always be a string."),new ze(t,OC)}toString(){return".key"}},ku=new HC;var xu=class{constructor(t,n,i,s,r=null){this.isReverse_=s,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=n?i(t.key,n):1,s&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},Ss=(()=>{class e{constructor(n,i,s,r,o){this.key=n,this.value=i,this.color=s??e.RED,this.left=r??Ji.EMPTY_NODE,this.right=o??Ji.EMPTY_NODE}copy(n,i,s,r,o){return new e(n??this.key,i??this.value,s??this.color,r??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,i,s){let r=this,o=s(n,r.key);return o<0?r=r.copy(null,null,null,r.left.insert(n,i,s),null):o===0?r=r.copy(null,i,null,null,null):r=r.copy(null,null,null,null,r.right.insert(n,i,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ji.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,i){let s,r;if(s=this,i(n,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(n,i),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),i(n,s.key)===0){if(s.right.isEmpty())return Ji.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(n,i))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,i)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),PT=class{copy(t,n,i,s,r){return this}insert(t,n,i){return new Ss(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Ji=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Ss.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Ss.BLACK,null,null))}get(t){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(t,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(t){let n,i=this.root_,s=null;for(;!i.isEmpty();)if(n=this.comparator_(t,i.key),n===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new xu(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new xu(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new xu(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new xu(this.root_,null,this.comparator_,!0,t)}};Ji.EMPTY_NODE=new PT;function Vde(e,t){return ju(e.name,t.name)}function dI(e,t){return ju(e,t)}var FT;function Bde(e){FT=e}var z2=function(e){return typeof e=="number"?"number:"+E2(e):"string:"+e},$2=function(e){if(e.isLeafNode()){let t=e.val();te(typeof t=="string"||typeof t=="number"||typeof t=="object"&&As(t,".sv"),"Priority must be a string or number.")}else te(e===FT||e.isEmpty(),"priority of unexpected type.");te(e===FT||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var n2,Bu=(()=>{class e{constructor(n,i=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=i,this.lazyHash_=null,te(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),$2(this.priorityNode_)}static set __childrenNodeConstructor(n){n2=n}static get __childrenNodeConstructor(){return n2}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return Be(n)?this:je(n)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,i){return null}updateImmediateChild(n,i){return n===".priority"?this.updatePriority(i):i.isEmpty()&&n!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,i).updatePriority(this.priorityNode_)}updateChild(n,i){let s=je(n);return s===null?i:i.isEmpty()&&s!==".priority"?this:(te(s!==".priority"||Ko(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(pt(n),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,i){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+z2(this.priorityNode_.val())+":");let i=typeof this.value_;n+=i+":",i==="number"?n+=E2(this.value_):n+=this.value_,this.lazyHash_=S2(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(te(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let i=typeof n.value_,s=typeof this.value_,r=e.VALUE_TYPE_ORDER.indexOf(i),o=e.VALUE_TYPE_ORDER.indexOf(s);return te(r>=0,"Unknown leaf type: "+i),te(o>=0,"Unknown leaf type: "+s),r===o?s==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-r}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let i=n;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),q2,K2;function Gde(e){q2=e}function Hde(e){K2=e}var xT=class extends Vu{compare(t,n){let i=t.node.getPriority(),s=n.node.getPriority(),r=i.compareTo(s);return r===0?ju(t.name,n.name):r}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return ze.MIN}maxPost(){return new ze(Tl,new Bu("[PRIORITY-POST]",K2))}makePost(t,n){let i=q2(t);return new ze(n,new Bu("[PRIORITY-POST]",i))}toString(){return".priority"}},Fn=new xT;var Ude=Math.log(2),OT=class{constructor(t){let n=r=>parseInt(Math.log(r)/Ude,10),i=r=>parseInt(Array(r+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;let s=i(this.count);this.bits_=t+1&s}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},UC=function(e,t,n,i){e.sort(t);let s=function(l,c){let u=c-l,h,f;if(u===0)return null;if(u===1)return h=e[l],f=n?n(h):h,new Ss(f,h.node,Ss.BLACK,null,null);{let g=parseInt(u/2,10)+l,v=s(l,g),y=s(g+1,c);return h=e[g],f=n?n(h):h,new Ss(f,h.node,Ss.BLACK,v,y)}},r=function(l){let c=null,u=null,h=e.length,f=function(v,y){let C=h-v,E=h;h-=v;let I=s(C+1,E),T=e[C],x=n?n(T):T;g(new Ss(x,T.node,y,null,I))},g=function(v){c?(c.left=v,c=v):(u=v,c=v)};for(let v=0;v<l.count;++v){let y=l.nextBitIsOne(),C=Math.pow(2,l.count-(v+1));y?f(C,Ss.BLACK):(f(C,Ss.BLACK),f(C,Ss.RED))}return u},o=new OT(e.length),a=r(o);return new Ji(i||t,a)};var fT,Fu={},Gu=class e{constructor(t,n){this.indexes_=t,this.indexSet_=n}static get Default(){return te(Fu&&Fn,"ChildrenNode.ts has not been loaded"),fT=fT||new e({".priority":Fu},{".priority":Fn}),fT}get(t){let n=ia(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof Ji?n:null}hasIndex(t){return As(this.indexSet_,t.toString())}addIndex(t,n){te(t!==ku,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],s=!1,r=n.getIterator(ze.Wrap),o=r.getNext();for(;o;)s=s||t.isDefinedOn(o.node),i.push(o),o=r.getNext();let a;s?a=UC(i,t.getCompare()):a=Fu;let l=t.toString(),c=Object.assign({},this.indexSet_);c[l]=t;let u=Object.assign({},this.indexes_);return u[l]=a,new e(u,c)}addToIndexes(t,n){let i=md(this.indexes_,(s,r)=>{let o=ia(this.indexSet_,r);if(te(o,"Missing index implementation for "+r),s===Fu)if(o.isDefinedOn(t.node)){let a=[],l=n.getIterator(ze.Wrap),c=l.getNext();for(;c;)c.name!==t.name&&a.push(c),c=l.getNext();return a.push(t),UC(a,o.getCompare())}else return Fu;else{let a=n.get(t.name),l=s;return a&&(l=l.remove(new ze(t.name,a))),l.insert(t,t.node)}});return new e(i,this.indexSet_)}removeFromIndexes(t,n){let i=md(this.indexes_,s=>{if(s===Fu)return s;{let r=n.get(t.name);return r?s.remove(new ze(t.name,r)):s}});return new e(i,this.indexSet_)}};var bf,St=(()=>{class e{constructor(n,i,s){this.children_=n,this.priorityNode_=i,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&$2(this.priorityNode_),this.children_.isEmpty()&&te(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return bf||(bf=new e(new Ji(dI),null,Gu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||bf}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let i=this.children_.get(n);return i===null?bf:i}}getChild(n){let i=je(n);return i===null?this:this.getImmediateChild(i).getChild(pt(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,i){if(te(i,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(i);{let s=new ze(n,i),r,o;i.isEmpty()?(r=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(n,i),o=this.indexMap_.addToIndexes(s,this.children_));let a=r.isEmpty()?bf:this.priorityNode_;return new e(r,a,o)}}updateChild(n,i){let s=je(n);if(s===null)return i;{te(je(n)!==".priority"||Ko(n)===1,".priority must be the last token in a path");let r=this.getImmediateChild(s).updateChild(pt(n),i);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let i={},s=0,r=0,o=!0;if(this.forEachChild(Fn,(a,l)=>{i[a]=l.val(n),s++,o&&e.INTEGER_REGEXP_.test(a)?r=Math.max(r,Number(a)):o=!1}),!n&&o&&r<2*s){let a=[];for(let l in i)a[l]=i[l];return a}else return n&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+z2(this.getPriority().val())+":"),this.forEachChild(Fn,(i,s)=>{let r=s.hash();r!==""&&(n+=":"+i+":"+r)}),this.lazyHash_=n===""?"":S2(n)}return this.lazyHash_}getPredecessorChildName(n,i,s){let r=this.resolveIndex_(s);if(r){let o=r.getPredecessorKey(new ze(n,i));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let i=this.resolveIndex_(n);if(i){let s=i.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(n){let i=this.getFirstChildName(n);return i?new ze(i,this.children_.get(i)):null}getLastChildName(n){let i=this.resolveIndex_(n);if(i){let s=i.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(n){let i=this.getLastChildName(n);return i?new ze(i,this.children_.get(i)):null}forEachChild(n,i){let s=this.resolveIndex_(n);return s?s.inorderTraversal(r=>i(r.name,r.node)):this.children_.inorderTraversal(i)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,i){let s=this.resolveIndex_(i);if(s)return s.getIteratorFrom(n,r=>r);{let r=this.children_.getIteratorFrom(n.name,ze.Wrap),o=r.peek();for(;o!=null&&i.compare(o,n)<0;)r.getNext(),o=r.peek();return r}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,i){let s=this.resolveIndex_(i);if(s)return s.getReverseIteratorFrom(n,r=>r);{let r=this.children_.getReverseIteratorFrom(n.name,ze.Wrap),o=r.peek();for(;o!=null&&i.compare(o,n)>0;)r.getNext(),o=r.peek();return r}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Nf?-1:0}withIndex(n){if(n===ku||this.indexMap_.hasIndex(n))return this;{let i=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,i)}}isIndexed(n){return n===ku||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let i=n;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let s=this.getIterator(Fn),r=i.getIterator(Fn),o=s.getNext(),a=r.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=s.getNext(),a=r.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===ku?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),NT=class extends St{constructor(){super(new Ji(dI),St.EMPTY_NODE,Gu.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return St.EMPTY_NODE}isEmpty(){return!1}},Nf=new NT;Object.defineProperties(ze,{MIN:{value:new ze(Lu,St.EMPTY_NODE)},MAX:{value:new ze(Tl,Nf)}});HC.__EMPTY_NODE=St.EMPTY_NODE;Bu.__childrenNodeConstructor=St;Bde(Nf);Hde(Nf);var Wde=!0;function Pn(e,t=null){if(e===null)return St.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),te(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let n=e;return new Bu(n,Pn(t))}if(!(e instanceof Array)&&Wde){let n=[],i=!1;if(Xi(e,(o,a)=>{if(o.substring(0,1)!=="."){let l=Pn(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),n.push(new ze(o,l)))}}),n.length===0)return St.EMPTY_NODE;let r=UC(n,Vde,o=>o.name,dI);if(i){let o=UC(n,Fn.getCompare());return new St(r,Pn(t),new Gu({".priority":o},{".priority":Fn}))}else return new St(r,Pn(t),Gu.Default)}else{let n=St.EMPTY_NODE;return Xi(e,(i,s)=>{if(As(e,i)&&i.substring(0,1)!=="."){let r=Pn(s);(r.isLeafNode()||!r.isEmpty())&&(n=n.updateImmediateChild(i,r))}}),n.updatePriority(Pn(t))}}Gde(Pn);var kT=class extends Vu{constructor(t){super(),this.indexPath_=t,te(!Be(t)&&je(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){let i=this.extractChild(t.node),s=this.extractChild(n.node),r=i.compareTo(s);return r===0?ju(t.name,n.name):r}makePost(t,n){let i=Pn(t),s=St.EMPTY_NODE.updateChild(this.indexPath_,i);return new ze(n,s)}maxPost(){let t=St.EMPTY_NODE.updateChild(this.indexPath_,Nf);return new ze(Tl,t)}toString(){return H2(this.indexPath_,0).join("/")}};var LT=class extends Vu{compare(t,n){let i=t.node.compareTo(n.node);return i===0?ju(t.name,n.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return ze.MIN}maxPost(){return ze.MAX}makePost(t,n){let i=Pn(t);return new ze(n,i)}toString(){return".value"}},jde=new LT;function zde(e){return{type:"value",snapshotNode:e}}function $de(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function qde(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function i2(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function Kde(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var VT=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Fn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return te(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return te(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Lu}hasEnd(){return this.endSet_}getIndexEndValue(){return te(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return te(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Tl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return te(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Fn}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function s2(e){let t={};if(e.isDefault())return t;let n;if(e.index_===Fn?n="$priority":e.index_===jde?n="$value":e.index_===ku?n="$key":(te(e.index_ instanceof kT,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Jt(n),e.startSet_){let i=e.startAfterSet_?"startAfter":"startAt";t[i]=Jt(e.indexStartValue_),e.startNameSet_&&(t[i]+=","+Jt(e.indexStartName_))}if(e.endSet_){let i=e.endBeforeSet_?"endBefore":"endAt";t[i]=Jt(e.indexEndValue_),e.endNameSet_&&(t[i]+=","+Jt(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function r2(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==Fn&&(t.i=e.index_.toString()),t}var BT=class e extends VC{constructor(t,n,i,s){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=xf("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(te(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,n,i,s){let r=t._path.toString();this.log_("Listen called for "+r+" "+t._queryIdentifier);let o=e.getListenId_(t,i),a={};this.listens_[o]=a;let l=s2(t._queryParams);this.restRequest_(r+".json",l,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(r,h,!1,i),ia(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",s(f,null)}})}unlisten(t,n){let i=e.getListenId_(t,n);delete this.listens_[i]}get(t){let n=s2(t._queryParams),i=t._path.toString(),s=new Hl;return this.restRequest_(i+".json",n,(r,o)=>{let a=o;r===404&&(a=null,r=null),r===null?(this.onDataUpdate_(i,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(t){}restRequest_(t,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,r])=>{s&&s.accessToken&&(n.auth=s.accessToken),r&&r.token&&(n.ac=r.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+lM(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=cp(a.responseText)}catch{Mi("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&Mi("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}};var GT=class{constructor(){this.rootNode_=St.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}};function WC(){return{value:null,children:new Map}}function Q2(e,t,n){if(Be(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let i=je(t);e.children.has(i)||e.children.set(i,WC());let s=e.children.get(i);t=pt(t),Q2(s,t,n)}}function HT(e,t,n){e.value!==null?n(t,e.value):Qde(e,(i,s)=>{let r=new ot(t.toString()+"/"+i);HT(s,r,n)})}function Qde(e,t){e.children.forEach((n,i)=>{t(i,n)})}var UT=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),n=Object.assign({},t);return this.last_&&Xi(this.last_,(i,s)=>{n[i]=n[i]-s}),this.last_=t,n}};var o2=10*1e3,Yde=30*1e3,Jde=5*60*1e3,WT=class{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new UT(t);let i=o2+(Yde-o2)*Math.random();Df(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let t=this.statsListener_.get(),n={},i=!1;Xi(t,(s,r)=>{r>0&&As(this.statsToReport_,s)&&(n[s]=r,i=!0)}),i&&this.server_.reportStats(n),Df(this.reportStats_.bind(this),Math.floor(Math.random()*2*Jde))}};var jr=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(jr||{});function Y2(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function J2(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function X2(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var jT=class e{constructor(t,n,i){this.path=t,this.affectedTree=n,this.revert=i,this.type=jr.ACK_USER_WRITE,this.source=Y2()}operationForChild(t){if(Be(this.path)){if(this.affectedTree.value!=null)return te(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new ot(t));return new e(et(),n,this.revert)}}else return te(je(this.path)===t,"operationForChild called for unrelated child."),new e(pt(this.path),this.affectedTree,this.revert)}};var Hu=class e{constructor(t,n,i){this.source=t,this.path=n,this.snap=i,this.type=jr.OVERWRITE}operationForChild(t){return Be(this.path)?new e(this.source,et(),this.snap.getImmediateChild(t)):new e(this.source,pt(this.path),this.snap)}};var jC=class e{constructor(t,n,i){this.source=t,this.path=n,this.children=i,this.type=jr.MERGE}operationForChild(t){if(Be(this.path)){let n=this.children.subtree(new ot(t));return n.isEmpty()?null:n.value?new Hu(this.source,et(),n.value):new e(this.source,et(),n)}else return te(je(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,pt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Af=class{constructor(t,n,i){this.node_=t,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Be(t))return this.isFullyInitialized()&&!this.filtered_;let n=je(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};function Xde(e,t,n,i){let s=[],r=[];return t.forEach(o=>{o.type==="child_changed"&&e.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&r.push(Kde(o.childName,o.snapshotNode))}),Ef(e,s,"child_removed",t,i,n),Ef(e,s,"child_added",t,i,n),Ef(e,s,"child_moved",r,i,n),Ef(e,s,"child_changed",t,i,n),Ef(e,s,"value",t,i,n),s}function Ef(e,t,n,i,s,r){let o=i.filter(a=>a.type===n);o.sort((a,l)=>ehe(e,a,l)),o.forEach(a=>{let l=Zde(e,a,r);s.forEach(c=>{c.respondsTo(a.type)&&t.push(c.createEvent(l,e.query_))})})}function Zde(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function ehe(e,t,n){if(t.childName==null||n.childName==null)throw Gl("Should only compare child_ events.");let i=new ze(t.childName,t.snapshotNode),s=new ze(n.childName,n.snapshotNode);return e.index_.compare(i,s)}function Z2(e,t){return{eventCache:e,serverCache:t}}function Tf(e,t,n,i){return Z2(new Af(t,n,i),e.serverCache)}function eU(e,t,n,i){return Z2(e.eventCache,new Af(t,n,i))}function zT(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Il(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var pT,the=()=>(pT||(pT=new Ji(tde)),pT),ai=class e{constructor(t,n=the()){this.value=t,this.children=n}static fromObject(t){let n=new e(null);return Xi(t,(i,s)=>{n=n.set(new ot(i),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:et(),value:this.value};if(Be(t))return null;{let i=je(t),s=this.children.get(i);if(s!==null){let r=s.findRootMostMatchingPathAndValue(pt(t),n);return r!=null?{path:hn(new ot(i),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Be(t))return this;{let n=je(t),i=this.children.get(n);return i!==null?i.subtree(pt(t)):new e(null)}}set(t,n){if(Be(t))return new e(n,this.children);{let i=je(t),r=(this.children.get(i)||new e(null)).set(pt(t),n),o=this.children.insert(i,r);return new e(this.value,o)}}remove(t){if(Be(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=je(t),i=this.children.get(n);if(i){let s=i.remove(pt(t)),r;return s.isEmpty()?r=this.children.remove(n):r=this.children.insert(n,s),this.value===null&&r.isEmpty()?new e(null):new e(this.value,r)}else return this}}get(t){if(Be(t))return this.value;{let n=je(t),i=this.children.get(n);return i?i.get(pt(t)):null}}setTree(t,n){if(Be(t))return n;{let i=je(t),r=(this.children.get(i)||new e(null)).setTree(pt(t),n),o;return r.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,r),new e(this.value,o)}}fold(t){return this.fold_(et(),t)}fold_(t,n){let i={};return this.children.inorderTraversal((s,r)=>{i[s]=r.fold_(hn(t,s),n)}),n(t,this.value,i)}findOnPath(t,n){return this.findOnPath_(t,et(),n)}findOnPath_(t,n,i){let s=this.value?i(n,this.value):!1;if(s)return s;if(Be(t))return null;{let r=je(t),o=this.children.get(r);return o?o.findOnPath_(pt(t),hn(n,r),i):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,et(),n)}foreachOnPath_(t,n,i){if(Be(t))return this;{this.value&&i(n,this.value);let s=je(t),r=this.children.get(s);return r?r.foreachOnPath_(pt(t),hn(n,s),i):new e(null)}}foreach(t){this.foreach_(et(),t)}foreach_(t,n){this.children.inorderTraversal((i,s)=>{s.foreach_(hn(t,i),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,i)=>{i.value&&t(n,i.value)})}};var bs=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new ai(null))}};function If(e,t,n){if(Be(t))return new bs(new ai(n));{let i=e.writeTree_.findRootMostValueAndPath(t);if(i!=null){let s=i.path,r=i.value,o=Yi(s,t);return r=r.updateChild(o,n),new bs(e.writeTree_.set(s,r))}else{let s=new ai(n),r=e.writeTree_.setTree(t,s);return new bs(r)}}}function a2(e,t,n){let i=e;return Xi(n,(s,r)=>{i=If(i,hn(t,s),r)}),i}function l2(e,t){if(Be(t))return bs.empty();{let n=e.writeTree_.setTree(t,new ai(null));return new bs(n)}}function $T(e,t){return Al(e,t)!=null}function Al(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(Yi(n.path,t)):null}function c2(e){let t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Fn,(i,s)=>{t.push(new ze(i,s))}):e.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&t.push(new ze(i,s.value))}),t}function qo(e,t){if(Be(t))return e;{let n=Al(e,t);return n!=null?new bs(new ai(n)):new bs(e.writeTree_.subtree(t))}}function qT(e){return e.writeTree_.isEmpty()}function Uu(e,t){return tU(et(),e.writeTree_,t)}function tU(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal((s,r)=>{s===".priority"?(te(r.value!==null,"Priority writes must always be leaf nodes"),i=r.value):n=tU(hn(e,s),r,n)}),!n.getChild(e).isEmpty()&&i!==null&&(n=n.updateChild(hn(e,".priority"),i)),n}}function nU(e,t){return aU(t,e)}function nhe(e,t,n,i,s){te(i>e.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:s}),s&&(e.visibleWrites=If(e.visibleWrites,t,n)),e.lastWriteId=i}function ihe(e,t){for(let n=0;n<e.allWrites.length;n++){let i=e.allWrites[n];if(i.writeId===t)return i}return null}function she(e,t){let n=e.allWrites.findIndex(a=>a.writeId===t);te(n>=0,"removeWrite called with nonexistent writeId.");let i=e.allWrites[n];e.allWrites.splice(n,1);let s=i.visible,r=!1,o=e.allWrites.length-1;for(;s&&o>=0;){let a=e.allWrites[o];a.visible&&(o>=n&&rhe(a,i.path)?s=!1:_s(i.path,a.path)&&(r=!0)),o--}if(s){if(r)return ohe(e),!0;if(i.snap)e.visibleWrites=l2(e.visibleWrites,i.path);else{let a=i.children;Xi(a,l=>{e.visibleWrites=l2(e.visibleWrites,hn(i.path,l))})}return!0}else return!1}function rhe(e,t){if(e.snap)return _s(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&_s(hn(e.path,n),t))return!0;return!1}function ohe(e){e.visibleWrites=iU(e.allWrites,ahe,et()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function ahe(e){return e.visible}function iU(e,t,n){let i=bs.empty();for(let s=0;s<e.length;++s){let r=e[s];if(t(r)){let o=r.path,a;if(r.snap)_s(n,o)?(a=Yi(n,o),i=If(i,a,r.snap)):_s(o,n)&&(a=Yi(o,n),i=If(i,et(),r.snap.getChild(a)));else if(r.children){if(_s(n,o))a=Yi(n,o),i=a2(i,a,r.children);else if(_s(o,n))if(a=Yi(o,n),Be(a))i=a2(i,et(),r.children);else{let l=ia(r.children,je(a));if(l){let c=l.getChild(pt(a));i=If(i,et(),c)}}}else throw Gl("WriteRecord should have .snap or .children")}}return i}function sU(e,t,n,i,s){if(!i&&!s){let r=Al(e.visibleWrites,t);if(r!=null)return r;{let o=qo(e.visibleWrites,t);if(qT(o))return n;if(n==null&&!$T(o,et()))return null;{let a=n||St.EMPTY_NODE;return Uu(o,a)}}}else{let r=qo(e.visibleWrites,t);if(!s&&qT(r))return n;if(!s&&n==null&&!$T(r,et()))return null;{let o=function(c){return(c.visible||s)&&(!i||!~i.indexOf(c.writeId))&&(_s(c.path,t)||_s(t,c.path))},a=iU(e.allWrites,o,t),l=n||St.EMPTY_NODE;return Uu(a,l)}}}function lhe(e,t,n){let i=St.EMPTY_NODE,s=Al(e.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild(Fn,(r,o)=>{i=i.updateImmediateChild(r,o)}),i;if(n){let r=qo(e.visibleWrites,t);return n.forEachChild(Fn,(o,a)=>{let l=Uu(qo(r,new ot(o)),a);i=i.updateImmediateChild(o,l)}),c2(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{let r=qo(e.visibleWrites,t);return c2(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function che(e,t,n,i,s){te(i||s,"Either existingEventSnap or existingServerSnap must exist");let r=hn(t,n);if($T(e.visibleWrites,r))return null;{let o=qo(e.visibleWrites,r);return qT(o)?s.getChild(n):Uu(o,s.getChild(n))}}function uhe(e,t,n,i){let s=hn(t,n),r=Al(e.visibleWrites,s);if(r!=null)return r;if(i.isCompleteForChild(n)){let o=qo(e.visibleWrites,s);return Uu(o,i.getNode().getImmediateChild(n))}else return null}function dhe(e,t){return Al(e.visibleWrites,t)}function hhe(e,t,n,i,s,r,o){let a,l=qo(e.visibleWrites,t),c=Al(l,et());if(c!=null)a=c;else if(n!=null)a=Uu(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],h=o.getCompare(),f=r?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o),g=f.getNext();for(;g&&u.length<s;)h(g,i)!==0&&u.push(g),g=f.getNext();return u}else return[]}function fhe(){return{visibleWrites:bs.empty(),allWrites:[],lastWriteId:-1}}function KT(e,t,n,i){return sU(e.writeTree,e.treePath,t,n,i)}function rU(e,t){return lhe(e.writeTree,e.treePath,t)}function u2(e,t,n,i){return che(e.writeTree,e.treePath,t,n,i)}function zC(e,t){return dhe(e.writeTree,hn(e.treePath,t))}function phe(e,t,n,i,s,r){return hhe(e.writeTree,e.treePath,t,n,i,s,r)}function hI(e,t,n){return uhe(e.writeTree,e.treePath,t,n)}function oU(e,t){return aU(hn(e.treePath,t),e.writeTree)}function aU(e,t){return{treePath:e,writeTree:t}}var QT=class{constructor(){this.changeMap=new Map}trackChildChange(t){let n=t.type,i=t.childName;te(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),te(i!==".priority","Only non-priority child changes can be tracked.");let s=this.changeMap.get(i);if(s){let r=s.type;if(n==="child_added"&&r==="child_removed")this.changeMap.set(i,i2(i,t.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&r==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&r==="child_changed")this.changeMap.set(i,qde(i,s.oldSnap));else if(n==="child_changed"&&r==="child_added")this.changeMap.set(i,$de(i,t.snapshotNode));else if(n==="child_changed"&&r==="child_changed")this.changeMap.set(i,i2(i,t.snapshotNode,s.oldSnap));else throw Gl("Illegal combination of changes: "+t+" occurred after "+s)}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}};var YT=class{getCompleteChild(t){return null}getChildAfterChild(t,n,i){return null}},lU=new YT,Mf=class{constructor(t,n,i=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(t){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{let i=this.optCompleteServerCache_!=null?new Af(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hI(this.writes_,t,i)}}getChildAfterChild(t,n,i){let s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Il(this.viewCache_),r=phe(this.writes_,s,n,1,i,t);return r.length===0?null:r[0]}};function ghe(e,t){te(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),te(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function mhe(e,t,n,i,s){let r=new QT,o,a;if(n.type===jr.OVERWRITE){let c=n;c.source.fromUser?o=JT(e,t,c.path,c.snap,i,s,r):(te(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered()&&!Be(c.path),o=$C(e,t,c.path,c.snap,i,s,a,r))}else if(n.type===jr.MERGE){let c=n;c.source.fromUser?o=Che(e,t,c.path,c.children,i,s,r):(te(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered(),o=XT(e,t,c.path,c.children,i,s,a,r))}else if(n.type===jr.ACK_USER_WRITE){let c=n;c.revert?o=She(e,t,c.path,i,s,r):o=yhe(e,t,c.path,c.affectedTree,i,s,r)}else if(n.type===jr.LISTEN_COMPLETE)o=whe(e,t,n.path,i,r);else throw Gl("Unknown operation type: "+n.type);let l=r.getChanges();return vhe(t,o,l),{viewCache:o,changes:l}}function vhe(e,t,n){let i=t.eventCache;if(i.isFullyInitialized()){let s=i.getNode().isLeafNode()||i.getNode().isEmpty(),r=zT(e);(n.length>0||!e.eventCache.isFullyInitialized()||s&&!i.getNode().equals(r)||!i.getNode().getPriority().equals(r.getPriority()))&&n.push(zde(zT(t)))}}function cU(e,t,n,i,s,r){let o=t.eventCache;if(zC(i,n)!=null)return t;{let a,l;if(Be(n))if(te(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let c=Il(t),u=c instanceof St?c:St.EMPTY_NODE,h=rU(i,u);a=e.filter.updateFullNode(t.eventCache.getNode(),h,r)}else{let c=KT(i,Il(t));a=e.filter.updateFullNode(t.eventCache.getNode(),c,r)}else{let c=je(n);if(c===".priority"){te(Ko(n)===1,"Can't have a priority with additional path components");let u=o.getNode();l=t.serverCache.getNode();let h=u2(i,n,u,l);h!=null?a=e.filter.updatePriority(u,h):a=o.getNode()}else{let u=pt(n),h;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();let f=u2(i,n,o.getNode(),l);f!=null?h=o.getNode().getImmediateChild(c).updateChild(u,f):h=o.getNode().getImmediateChild(c)}else h=hI(i,c,t.serverCache);h!=null?a=e.filter.updateChild(o.getNode(),c,h,u,s,r):a=o.getNode()}}return Tf(t,a,o.isFullyInitialized()||Be(n),e.filter.filtersNodes())}}function $C(e,t,n,i,s,r,o,a){let l=t.serverCache,c,u=o?e.filter:e.filter.getIndexedFilter();if(Be(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){let g=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),g,null)}else{let g=je(n);if(!l.isCompleteForPath(n)&&Ko(n)>1)return t;let v=pt(n),C=l.getNode().getImmediateChild(g).updateChild(v,i);g===".priority"?c=u.updatePriority(l.getNode(),C):c=u.updateChild(l.getNode(),g,C,v,lU,null)}let h=eU(t,c,l.isFullyInitialized()||Be(n),u.filtersNodes()),f=new Mf(s,h,r);return cU(e,h,n,s,f,a)}function JT(e,t,n,i,s,r,o){let a=t.eventCache,l,c,u=new Mf(s,t,r);if(Be(n))c=e.filter.updateFullNode(t.eventCache.getNode(),i,o),l=Tf(t,c,!0,e.filter.filtersNodes());else{let h=je(n);if(h===".priority")c=e.filter.updatePriority(t.eventCache.getNode(),i),l=Tf(t,c,a.isFullyInitialized(),a.isFiltered());else{let f=pt(n),g=a.getNode().getImmediateChild(h),v;if(Be(f))v=i;else{let y=u.getCompleteChild(h);y!=null?G2(f)===".priority"&&y.getChild(U2(f)).isEmpty()?v=y:v=y.updateChild(f,i):v=St.EMPTY_NODE}if(g.equals(v))l=t;else{let y=e.filter.updateChild(a.getNode(),h,v,f,u,o);l=Tf(t,y,a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function d2(e,t){return e.eventCache.isCompleteForChild(t)}function Che(e,t,n,i,s,r,o){let a=t;return i.foreach((l,c)=>{let u=hn(n,l);d2(t,je(u))&&(a=JT(e,a,u,c,s,r,o))}),i.foreach((l,c)=>{let u=hn(n,l);d2(t,je(u))||(a=JT(e,a,u,c,s,r,o))}),a}function h2(e,t,n){return n.foreach((i,s)=>{t=t.updateChild(i,s)}),t}function XT(e,t,n,i,s,r,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l=t,c;Be(n)?c=i:c=new ai(null).setTree(n,i);let u=t.serverCache.getNode();return c.children.inorderTraversal((h,f)=>{if(u.hasChild(h)){let g=t.serverCache.getNode().getImmediateChild(h),v=h2(e,g,f);l=$C(e,l,new ot(h),v,s,r,o,a)}}),c.children.inorderTraversal((h,f)=>{let g=!t.serverCache.isCompleteForChild(h)&&f.value===null;if(!u.hasChild(h)&&!g){let v=t.serverCache.getNode().getImmediateChild(h),y=h2(e,v,f);l=$C(e,l,new ot(h),y,s,r,o,a)}}),l}function yhe(e,t,n,i,s,r,o){if(zC(s,n)!=null)return t;let a=t.serverCache.isFiltered(),l=t.serverCache;if(i.value!=null){if(Be(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return $C(e,t,n,l.getNode().getChild(n),s,r,a,o);if(Be(n)){let c=new ai(null);return l.getNode().forEachChild(ku,(u,h)=>{c=c.set(new ot(u),h)}),XT(e,t,n,c,s,r,a,o)}else return t}else{let c=new ai(null);return i.foreach((u,h)=>{let f=hn(n,u);l.isCompleteForPath(f)&&(c=c.set(u,l.getNode().getChild(f)))}),XT(e,t,n,c,s,r,a,o)}}function whe(e,t,n,i,s){let r=t.serverCache,o=eU(t,r.getNode(),r.isFullyInitialized()||Be(n),r.isFiltered());return cU(e,o,n,i,lU,s)}function She(e,t,n,i,s,r){let o;if(zC(i,n)!=null)return t;{let a=new Mf(i,t,s),l=t.eventCache.getNode(),c;if(Be(n)||je(n)===".priority"){let u;if(t.serverCache.isFullyInitialized())u=KT(i,Il(t));else{let h=t.serverCache.getNode();te(h instanceof St,"serverChildren would be complete if leaf node"),u=rU(i,h)}u=u,c=e.filter.updateFullNode(l,u,r)}else{let u=je(n),h=hI(i,u,t.serverCache);h==null&&t.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),h!=null?c=e.filter.updateChild(l,u,h,pt(n),a,r):t.eventCache.getNode().hasChild(u)?c=e.filter.updateChild(l,u,St.EMPTY_NODE,pt(n),a,r):c=l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=KT(i,Il(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,r)))}return o=t.serverCache.isFullyInitialized()||zC(i,et())!=null,Tf(t,c,o,e.filter.filtersNodes())}}function _he(e,t){let n=Il(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Be(t)&&!n.getImmediateChild(je(t)).isEmpty())?n.getChild(t):null}function f2(e,t,n,i){t.type===jr.MERGE&&t.source.queryId!==null&&(te(Il(e.viewCache_),"We should always have a full cache before handling merges"),te(zT(e.viewCache_),"Missing event cache, even though we have a server cache"));let s=e.viewCache_,r=mhe(e.processor_,s,t,n,i);return ghe(e.processor_,r.viewCache),te(r.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=r.viewCache,bhe(e,r.changes,r.viewCache.eventCache.getNode(),null)}function bhe(e,t,n,i){let s=i?[i]:e.eventRegistrations_;return Xde(e.eventGenerator_,t,n,s)}var p2;function Ehe(e){te(!p2,"__referenceConstructor has already been defined"),p2=e}function fI(e,t,n,i){let s=t.source.queryId;if(s!==null){let r=e.views.get(s);return te(r!=null,"SyncTree gave us an op for an invalid query."),f2(r,t,n,i)}else{let r=[];for(let o of e.views.values())r=r.concat(f2(o,t,n,i));return r}}function pI(e,t){let n=null;for(let i of e.views.values())n=n||_he(i,t);return n}var g2;function Dhe(e){te(!g2,"__referenceConstructor has already been defined"),g2=e}var qC=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new ai(null),this.pendingWriteTree_=fhe(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Rhe(e,t,n,i,s){return nhe(e.pendingWriteTree_,t,n,i,s),s?QC(e,new Hu(Y2(),t,n)):[]}function Ou(e,t,n=!1){let i=ihe(e.pendingWriteTree_,t);if(she(e.pendingWriteTree_,t)){let r=new ai(null);return i.snap!=null?r=r.set(et(),!0):Xi(i.children,o=>{r=r.set(new ot(o),!0)}),QC(e,new jT(i.path,r,n))}else return[]}function KC(e,t,n){return QC(e,new Hu(J2(),t,n))}function The(e,t,n){let i=ai.fromObject(n);return QC(e,new jC(J2(),t,i))}function Ihe(e,t,n,i){let s=fU(e,i);if(s!=null){let r=pU(s),o=r.path,a=r.queryId,l=Yi(o,t),c=new Hu(X2(a),l,n);return gU(e,o,c)}else return[]}function Ahe(e,t,n,i){let s=fU(e,i);if(s){let r=pU(s),o=r.path,a=r.queryId,l=Yi(o,t),c=ai.fromObject(n),u=new jC(X2(a),l,c);return gU(e,o,u)}else return[]}function uU(e,t,n){let s=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,(o,a)=>{let l=Yi(o,t),c=pI(a,l);if(c)return c});return sU(s,t,r,n,!0)}function QC(e,t){return dU(t,e.syncPointTree_,null,nU(e.pendingWriteTree_,et()))}function dU(e,t,n,i){if(Be(e.path))return hU(e,t,n,i);{let s=t.get(et());n==null&&s!=null&&(n=pI(s,et()));let r=[],o=je(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){let c=n?n.getImmediateChild(o):null,u=oU(i,o);r=r.concat(dU(a,l,c,u))}return s&&(r=r.concat(fI(s,e,i,n))),r}}function hU(e,t,n,i){let s=t.get(et());n==null&&s!=null&&(n=pI(s,et()));let r=[];return t.children.inorderTraversal((o,a)=>{let l=n?n.getImmediateChild(o):null,c=oU(i,o),u=e.operationForChild(o);u&&(r=r.concat(hU(u,a,l,c)))}),s&&(r=r.concat(fI(s,e,i,n))),r}function fU(e,t){return e.tagToQueryMap.get(t)}function pU(e){let t=e.indexOf("$");return te(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ot(e.substr(0,t))}}function gU(e,t,n){let i=e.syncPointTree_.get(t);te(i,"Missing sync point for query tag that we're tracking");let s=nU(e.pendingWriteTree_,t);return fI(i,n,s,null)}var ZT=class e{constructor(t){this.node_=t}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},eI=class e{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){let n=hn(this.path_,t);return new e(this.syncTree_,n)}node(){return uU(this.syncTree_,this.path_)}},Mhe=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},m2=function(e,t,n){if(!e||typeof e!="object")return e;if(te(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return Phe(e[".sv"],t,n);if(typeof e[".sv"]=="object")return Fhe(e[".sv"],t);te(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},Phe=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:te(!1,"Unexpected server value: "+e)}},Fhe=function(e,t,n){e.hasOwnProperty("increment")||te(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let i=e.increment;typeof i!="number"&&te(!1,"Unexpected increment value: "+i);let s=t.node();if(te(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;let o=s.getValue();return typeof o!="number"?i:o+i},xhe=function(e,t,n,i){return gI(t,new eI(n,e),i)},Ohe=function(e,t,n){return gI(e,new ZT(t),n)};function gI(e,t,n){let i=e.getPriority().val(),s=m2(i,t.getImmediateChild(".priority"),n),r;if(e.isLeafNode()){let o=e,a=m2(o.getValue(),t,n);return a!==o.getValue()||s!==o.getPriority().val()?new Bu(a,Pn(s)):e}else{let o=e;return r=o,s!==o.getPriority().val()&&(r=r.updatePriority(new Bu(s))),o.forEachChild(Fn,(a,l)=>{let c=gI(l,t.getImmediateChild(a),n);c!==l&&(r=r.updateImmediateChild(a,c))}),r}}var Pf=class{constructor(t="",n=null,i={children:{},childCount:0}){this.name=t,this.parent=n,this.node=i}};function mI(e,t){let n=t instanceof ot?t:new ot(t),i=e,s=je(n);for(;s!==null;){let r=ia(i.node.children,s)||{children:{},childCount:0};i=new Pf(s,i,r),n=pt(n),s=je(n)}return i}function zu(e){return e.node.value}function mU(e,t){e.node.value=t,tI(e)}function vU(e){return e.node.childCount>0}function Nhe(e){return zu(e)===void 0&&!vU(e)}function YC(e,t){Xi(e.node.children,(n,i)=>{t(new Pf(n,e,i))})}function CU(e,t,n,i){n&&!i&&t(e),YC(e,s=>{CU(s,t,!0,i)}),n&&i&&t(e)}function khe(e,t,n){let i=n?e:e.parent;for(;i!==null;){if(t(i))return!0;i=i.parent}return!1}function kf(e){return new ot(e.parent===null?e.name:kf(e.parent)+"/"+e.name)}function tI(e){e.parent!==null&&Lhe(e.parent,e.name,e)}function Lhe(e,t,n){let i=Nhe(n),s=As(e.node.children,t);i&&s?(delete e.node.children[t],e.node.childCount--,tI(e)):!i&&!s&&(e.node.children[t]=n.node,e.node.childCount++,tI(e))}var Vhe=/[\[\].#$\/\u0000-\u001F\u007F]/,Bhe=/[\[\].#$\u0000-\u001F\u007F]/,gT=10*1024*1024,yU=function(e){return typeof e=="string"&&e.length!==0&&!Vhe.test(e)},Ghe=function(e){return typeof e=="string"&&e.length!==0&&!Bhe.test(e)},Hhe=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Ghe(e)};var wU=function(e,t,n){let i=n instanceof ot?new AT(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+El(i));if(typeof t=="function")throw new Error(e+"contains a function "+El(i)+" with contents = "+t.toString());if(_2(t))throw new Error(e+"contains "+t.toString()+" "+El(i));if(typeof t=="string"&&t.length>gT/3&&Cd(t)>gT)throw new Error(e+"contains a string greater than "+gT+" utf8 bytes "+El(i)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let s=!1,r=!1;if(Xi(t,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(r=!0,!yU(o)))throw new Error(e+" contains an invalid key ("+o+") "+El(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Fde(i,o),wU(e,a,i),xde(i)}),s&&r)throw new Error(e+' contains ".value" child '+El(i)+" in addition to actual children.")}};var Uhe=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!yU(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!Hhe(n))throw new Error(uM(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var nI=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Whe(e,t){let n=null;for(let i=0;i<t.length;i++){let s=t[i],r=s.getPath();n!==null&&!W2(r,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:r}),n.events.push(s)}n&&e.eventLists_.push(n)}function Ml(e,t,n){Whe(e,n),jhe(e,i=>_s(i,t)||_s(t,i))}function jhe(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){let s=e.eventLists_[i];if(s){let r=s.path;t(r)?(zhe(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function zhe(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let i=n.getEventRunner();Rl&&Mn("event: "+n.toString()),Of(i)}}}var $he="repo_interrupt",qhe=25,iI=class{constructor(t,n,i,s){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new nI,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=WC(),this.transactionQueueTree_=new Pf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function Khe(e,t,n){if(e.stats_=cI(e.repoInfo_),e.forceRestClient_||ade())e.server_=new BT(e.repoInfo_,(i,s,r,o)=>{v2(e,i,s,r,o)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>C2(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Jt(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}e.persistentConnection_=new uI(e.repoInfo_,t,(i,s,r,o)=>{v2(e,i,s,r,o)},i=>{C2(e,i)},i=>{Yhe(e,i)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(i=>{e.server_.refreshAuthToken(i)}),e.appCheckProvider_.addTokenChangeListener(i=>{e.server_.refreshAppCheckToken(i.token)}),e.statsReporter_=cde(e.repoInfo_,()=>new WT(e.stats_,e.server_)),e.infoData_=new GT,e.infoSyncTree_=new qC({startListening:(i,s,r,o)=>{let a=[],l=e.infoData_.getNode(i._path);return l.isEmpty()||(a=KC(e.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),vI(e,"connected",!1),e.serverSyncTree_=new qC({startListening:(i,s,r,o)=>(e.server_.listen(i,r,s,(a,l)=>{let c=o(a,l);Ml(e.eventQueue_,i._path,c)}),[]),stopListening:(i,s)=>{e.server_.unlisten(i,s)}})}function Qhe(e){let n=e.infoData_.getNode(new ot(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function SU(e){return Mhe({timestamp:Qhe(e)})}function v2(e,t,n,i,s){e.dataUpdateCount++;let r=new ot(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(s)if(i){let l=md(n,c=>Pn(c));o=Ahe(e.serverSyncTree_,r,l,s)}else{let l=Pn(n);o=Ihe(e.serverSyncTree_,r,l,s)}else if(i){let l=md(n,c=>Pn(c));o=The(e.serverSyncTree_,r,l)}else{let l=Pn(n);o=KC(e.serverSyncTree_,r,l)}let a=r;o.length>0&&(a=yI(e,r)),Ml(e.eventQueue_,a,o)}function C2(e,t){vI(e,"connected",t),t===!1&&Xhe(e)}function Yhe(e,t){Xi(t,(n,i)=>{vI(e,n,i)})}function vI(e,t,n){let i=new ot("/.info/"+t),s=Pn(n);e.infoData_.updateSnapshot(i,s);let r=KC(e.infoSyncTree_,i,s);Ml(e.eventQueue_,i,r)}function Jhe(e){return e.nextWriteId_++}function Xhe(e){_U(e,"onDisconnectEvents");let t=SU(e),n=WC();HT(e.onDisconnect_,et(),(s,r)=>{let o=xhe(s,r,e.serverSyncTree_,t);Q2(n,s,o)});let i=[];HT(n,et(),(s,r)=>{i=i.concat(KC(e.serverSyncTree_,s,r));let o=nfe(e,s);yI(e,o)}),e.onDisconnect_=WC(),Ml(e.eventQueue_,et(),i)}function Zhe(e){e.persistentConnection_&&e.persistentConnection_.interrupt($he)}function _U(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),Mn(n,...t)}function bU(e,t,n){return uU(e.serverSyncTree_,t,n)||St.EMPTY_NODE}function CI(e,t=e.transactionQueueTree_){if(t||JC(e,t),zu(t)){let n=DU(e,t);te(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&efe(e,kf(t),n)}else vU(t)&&YC(t,n=>{CI(e,n)})}function efe(e,t,n){let i=n.map(c=>c.currentWriteId),s=bU(e,t,i),r=s,o=s.hash();for(let c=0;c<n.length;c++){let u=n[c];te(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let h=Yi(t,u.path);r=r.updateChild(h,u.currentOutputSnapshotRaw)}let a=r.val(!0),l=t;e.server_.put(l.toString(),a,c=>{_U(e,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){let h=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(Ou(e.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&h.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();JC(e,mI(e.transactionQueueTree_,t)),CI(e,e.transactionQueueTree_),Ml(e.eventQueue_,t,u);for(let f=0;f<h.length;f++)Of(h[f])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{Mi("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}yI(e,t)}},o)}function yI(e,t){let n=EU(e,t),i=kf(n),s=DU(e,n);return tfe(e,s,i),i}function tfe(e,t,n){if(t.length===0)return;let i=[],s=[],o=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let l=t[a],c=Yi(n,l.path),u=!1,h;if(te(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,h=l.abortReason,s=s.concat(Ou(e.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=qhe)u=!0,h="maxretry",s=s.concat(Ou(e.serverSyncTree_,l.currentWriteId,!0));else{let f=bU(e,l.path,o);l.currentInputSnapshot=f;let g=t[a].update(f.val());if(g!==void 0){wU("transaction failed: Data returned ",g,l.path);let v=Pn(g);typeof g=="object"&&g!=null&&As(g,".priority")||(v=v.updatePriority(f.getPriority()));let C=l.currentWriteId,E=SU(e),I=Ohe(v,f,E);l.currentOutputSnapshotRaw=v,l.currentOutputSnapshotResolved=I,l.currentWriteId=Jhe(e),o.splice(o.indexOf(C),1),s=s.concat(Rhe(e.serverSyncTree_,l.path,I,l.currentWriteId,l.applyLocally)),s=s.concat(Ou(e.serverSyncTree_,C,!0))}else u=!0,h="nodata",s=s.concat(Ou(e.serverSyncTree_,l.currentWriteId,!0))}Ml(e.eventQueue_,n,s),s=[],u&&(t[a].status=2,function(f){setTimeout(f,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(h==="nodata"?i.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):i.push(()=>t[a].onComplete(new Error(h),!1,null))))}JC(e,e.transactionQueueTree_);for(let a=0;a<i.length;a++)Of(i[a]);CI(e,e.transactionQueueTree_)}function EU(e,t){let n,i=e.transactionQueueTree_;for(n=je(t);n!==null&&zu(i)===void 0;)i=mI(i,n),t=pt(t),n=je(t);return i}function DU(e,t){let n=[];return RU(e,t,n),n.sort((i,s)=>i.order-s.order),n}function RU(e,t,n){let i=zu(t);if(i)for(let s=0;s<i.length;s++)n.push(i[s]);YC(t,s=>{RU(e,s,n)})}function JC(e,t){let n=zu(t);if(n){let i=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[i]=n[s],i++);n.length=i,mU(t,n.length>0?n:void 0)}YC(t,i=>{JC(e,i)})}function nfe(e,t){let n=kf(EU(e,t)),i=mI(e.transactionQueueTree_,t);return khe(i,s=>{mT(e,s)}),mT(e,i),CU(i,s=>{mT(e,s)}),n}function mT(e,t){let n=zu(t);if(n){let i=[],s=[],r=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(te(r===o-1,"All SENT items should be at beginning of queue."),r=o,n[o].status=3,n[o].abortReason="set"):(te(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Ou(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));r===-1?mU(t,void 0):n.length=r+1,Ml(e.eventQueue_,kf(t),s);for(let o=0;o<i.length;o++)Of(i[o])}}function ife(e){let t="",n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let s=n[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}t+="/"+s}return t}function sfe(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let n of e.split("&")){if(n.length===0)continue;let i=n.split("=");i.length===2?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Mi(`Invalid query segment '${n}' in query '${e}'`)}return t}var y2=function(e,t){let n=rfe(e),i=n.namespace;n.domain==="firebase.com"&&zr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&zr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Zue();let s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new kC(n.host,n.secure,i,s,t,"",i!==n.subdomain),path:new ot(n.pathString)}},rfe=function(e){let t="",n="",i="",s="",r="",o=!0,a="https",l=443;if(typeof e=="string"){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");u===-1&&(u=e.length);let h=e.indexOf("?");h===-1&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(s=ife(e.substring(u,h)));let f=sfe(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(t.substring(c+1),10)):c=t.length;let g=t.slice(0,c);if(g.toLowerCase()==="localhost")n="localhost";else if(g.split(".").length<=2)n=g;else{let v=t.indexOf(".");i=t.substring(0,v).toLowerCase(),n=t.substring(v+1),r=i}"ns"in f&&(r=f.ns)}return{host:t,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:s,namespace:r}};var sI=class e{constructor(t,n,i,s){this._repo=t,this._path=n,this._queryParams=i,this._orderByCalled=s}get key(){return Be(this._path)?null:G2(this._path)}get ref(){return new Wu(this._repo,this._path)}get _queryIdentifier(){let t=r2(this._queryParams),n=lI(t);return n==="{}"?"default":n}get _queryObject(){return r2(this._queryParams)}isEqual(t){if(t=Ze(t),!(t instanceof e))return!1;let n=this._repo===t._repo,i=W2(this._path,t._path),s=this._queryIdentifier===t._queryIdentifier;return n&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Pde(this._path)}};var Wu=class e extends sI{constructor(t,n){super(t,n,new VT,!1)}get parent(){let t=U2(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}};Ehe(Wu);Dhe(Wu);var ofe="FIREBASE_DATABASE_EMULATOR_HOST",rI={},afe=!1;function lfe(e,t,n,i){e.repoInfo_=new kC(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),i&&(e.authTokenProvider_=i)}function cfe(e,t,n,i,s){let r=i||e.options.databaseURL;r===void 0&&(e.options.projectId||zr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Mn("Using default host for project ",e.options.projectId),r=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o=y2(r,s),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[ofe]),c?(l=!0,r=`http://${c}?ns=${a.namespace}`,o=y2(r,s),a=o.repoInfo):l=!o.repoInfo.secure;let u=s&&l?new Rf(Rf.OWNER):new _T(e.name,e.options,t);Uhe("Invalid Firebase Database URL",o),Be(o.path)||zr("Database URL must point to the root of a Firebase Database (not including a child path).");let h=dfe(a,e,u,new ST(e.name,n));return new oI(h,e)}function ufe(e,t){let n=rI[t];(!n||n[e.key]!==e)&&zr(`Database ${t}(${e.repoInfo_}) has already been deleted.`),Zhe(e),delete n[e.key]}function dfe(e,t,n,i){let s=rI[t.name];s||(s={},rI[t.name]=s);let r=s[e.toURLString()];return r&&zr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new iI(e,afe,n,i),s[e.toURLString()]=r,r}var oI=class{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Khe(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Wu(this._repo,et())),this._rootInternal}_delete(){return this._rootInternal!==null&&(ufe(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&zr("Cannot call "+t+" on a deleted database.")}};function TU(e=Xt(),t){let n=Ht(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){let i=to("database");i&&IU(n,...i)}return n}function IU(e,t,n,i={}){e=Ze(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&zr("Cannot call useEmulator() after instance has already been initialized.");let s=e._repoInternal,r;if(s.repoInfo_.nodeAdmin)i.mockUserToken&&zr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),r=new Rf(Rf.OWNER);else if(i.mockUserToken){let o=typeof i.mockUserToken=="string"?i.mockUserToken:Ul(i.mockUserToken,e.app.options.projectId);r=new Rf(o)}lfe(s,t,n,r)}function hfe(e){Yue(no),Et(new bt("database",(t,{instanceIdentifier:n})=>{let i=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return cfe(i,s,r,n)},"PUBLIC").setMultipleInstances(!0)),pe(HH,UH,e),pe(HH,UH,"esm2017")}uI.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};uI.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};hfe();var Lf=class{constructor(t){return t}},AU="database",wI=class{constructor(){return yn(AU)}};var SI=new Q("angularfire2.database-instances");function ffe(e,t){let n=En(AU,e,t);return n&&new Lf(n)}function pfe(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new Lf(i)}}var gfe={provide:wI,deps:[[new Te,SI]]},mfe={provide:Lf,useFactory:ffe,deps:[[new Te,SI],Pt]};function MU(e,...t){return pe("angularfire",Dt.full,"rtdb"),ht([mfe,gfe,{provide:SI,useFactory:pfe(e),multi:!0,deps:[le,Ue,Nt,$t,[new Te,ds],[new Te,Wn],...t]}])}var PU=Oe(TU,!0);var OU="functions";var _I=class{constructor(t,n,i){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||i.get().then(s=>this.appCheck=s,()=>{})}getAuthToken(){return F(this,null,function*(){if(this.auth)try{let t=yield this.auth.getToken();return t?.accessToken}catch{return}})}getMessagingToken(){return F(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(t){return F(this,null,function*(){if(this.appCheck){let n=t?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return n.error?null:n.token}return null})}getContext(t){return F(this,null,function*(){let n=yield this.getAuthToken(),i=yield this.getMessagingToken(),s=yield this.getAppCheckToken(t);return{authToken:n,messagingToken:i,appCheckToken:s}})}};var bI="us-central1";var EI=class{constructor(t,n,i,s,r=bI,o){this.app=t,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new _I(n,i,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(r);this.customDomain=a.origin,this.region=bI}catch{this.customDomain=null,this.region=r}}_delete(){return this.deleteService()}_url(t){let n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${n}.cloudfunctions.net/${t}`}};function vfe(e,t,n){e.emulatorOrigin=`http://${t}:${n}`}var FU="@firebase/functions",xU="0.11.6";var Cfe="auth-internal",yfe="app-check-internal",wfe="messaging-internal";function Sfe(e,t){let n=(i,{instanceIdentifier:s})=>{let r=i.getProvider("app").getImmediate(),o=i.getProvider(Cfe),a=i.getProvider(wfe),l=i.getProvider(yfe);return new EI(r,o,a,l,s,e)};Et(new bt(OU,n,"PUBLIC").setMultipleInstances(!0)),pe(FU,xU,t),pe(FU,xU,"esm2017")}function NU(e=Xt(),t=bI){let i=Ht(Ze(e),OU).getImmediate({identifier:t}),s=to("functions");return s&&kU(i,...s),i}function kU(e,t,n){vfe(Ze(e),t,n)}Sfe(fetch.bind(self));var Vf=class{constructor(t){return t}},LU="functions",DI=class{constructor(){return yn(LU)}};var RI=new Q("angularfire2.functions-instances");function _fe(e,t){let n=En(LU,e,t);return n&&new Vf(n)}function bfe(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new Vf(i)}}var Efe={provide:DI,deps:[[new Te,RI]]},Dfe={provide:Vf,useFactory:_fe,deps:[[new Te,RI],Pt]};function VU(e,...t){return pe("angularfire",Dt.full,"fn"),ht([Dfe,Efe,{provide:RI,useFactory:bfe(e),multi:!0,deps:[le,Ue,Nt,$t,[new Te,ds],[new Te,Wn],...t]}])}var BU=Oe(NU,!0);var Rfe="/firebase-messaging-sw.js",Tfe="/firebase-cloud-messaging-push-scope",zU="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ife="https://fcmregistrations.googleapis.com/v1",$U="google.c.a.c_id",Afe="google.c.a.c_l",Mfe="google.c.a.ts",Pfe="google.c.a.e";var XC=function(e){return e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked",e}(XC||{});function $r(e){let t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ffe(e){let t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(n),s=new Uint8Array(i.length);for(let r=0;r<i.length;++r)s[r]=i.charCodeAt(r);return s}var TI="fcm_token_details_db",xfe=5,GU="fcm_token_object_Store";function Ofe(e){return F(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(r=>r.name).includes(TI))return null;let t=null;return(yield yd(TI,xfe,{upgrade:(i,s,r,o)=>F(this,null,function*(){var a;if(s<2||!i.objectStoreNames.contains(GU))return;let l=o.objectStore(GU),c=yield l.index("fcmSenderId").get(e);if(yield l.clear(),!!c){if(s===2){let u=c;if(!u.auth||!u.p256dh||!u.endpoint)return;t={token:u.fcmToken,createTime:(a=u.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:typeof u.vapidKey=="string"?u.vapidKey:$r(u.vapidKey)}}}else if(s===3){let u=c;t={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:$r(u.auth),p256dh:$r(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:$r(u.vapidKey)}}}else if(s===4){let u=c;t={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:$r(u.auth),p256dh:$r(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:$r(u.vapidKey)}}}}})})).close(),yield up(TI),yield up("fcm_vapid_details_db"),yield up("undefined"),Nfe(t)?t:null})}function Nfe(e){if(!e||!e.subscriptionOptions)return!1;let{subscriptionOptions:t}=e;return typeof e.createTime=="number"&&e.createTime>0&&typeof e.token=="string"&&e.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}var kfe="firebase-messaging-database",Lfe=1,Bf="firebase-messaging-store",II=null;function qU(){return II||(II=yd(kfe,Lfe,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Bf)}}})),II}function Vfe(e){return F(this,null,function*(){let t=KU(e),i=yield(yield qU()).transaction(Bf).objectStore(Bf).get(t);if(i)return i;{let s=yield Ofe(e.appConfig.senderId);if(s)return yield PI(e,s),s}})}function PI(e,t){return F(this,null,function*(){let n=KU(e),s=(yield qU()).transaction(Bf,"readwrite");return yield s.objectStore(Bf).put(t,n),yield s.done,t})}function KU({appConfig:e}){return e.appId}var Bfe={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Xn=new Is("messaging","Messaging",Bfe);function Gfe(e,t){return F(this,null,function*(){let n=yield xI(e),i=QU(t),s={method:"POST",headers:n,body:JSON.stringify(i)},r;try{r=yield(yield fetch(FI(e.appConfig),s)).json()}catch(o){throw Xn.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(r.error){let o=r.error.message;throw Xn.create("token-subscribe-failed",{errorInfo:o})}if(!r.token)throw Xn.create("token-subscribe-no-token");return r.token})}function Hfe(e,t){return F(this,null,function*(){let n=yield xI(e),i=QU(t.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(i)},r;try{r=yield(yield fetch(`${FI(e.appConfig)}/${t.token}`,s)).json()}catch(o){throw Xn.create("token-update-failed",{errorInfo:o?.toString()})}if(r.error){let o=r.error.message;throw Xn.create("token-update-failed",{errorInfo:o})}if(!r.token)throw Xn.create("token-update-no-token");return r.token})}function Ufe(e,t){return F(this,null,function*(){let i={method:"DELETE",headers:yield xI(e)};try{let r=yield(yield fetch(`${FI(e.appConfig)}/${t}`,i)).json();if(r.error){let o=r.error.message;throw Xn.create("token-unsubscribe-failed",{errorInfo:o})}}catch(s){throw Xn.create("token-unsubscribe-failed",{errorInfo:s?.toString()})}})}function FI({projectId:e}){return`${Ife}/projects/${e}/registrations`}function xI(n){return F(this,arguments,function*({appConfig:e,installations:t}){let i=yield t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${i}`})})}function QU({p256dh:e,auth:t,endpoint:n,vapidKey:i}){let s={web:{endpoint:n,auth:t,p256dh:e}};return i!==zU&&(s.web.applicationPubKey=i),s}var Wfe=7*24*60*60*1e3;function jfe(e){return F(this,null,function*(){let t=yield $fe(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:$r(t.getKey("auth")),p256dh:$r(t.getKey("p256dh"))},i=yield Vfe(e.firebaseDependencies);if(i){if(qfe(i.subscriptionOptions,n))return Date.now()>=i.createTime+Wfe?zfe(e,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{yield Ufe(e.firebaseDependencies,i.token)}catch(s){console.warn(s)}return HU(e.firebaseDependencies,n)}else return HU(e.firebaseDependencies,n)})}function zfe(e,t){return F(this,null,function*(){try{let n=yield Hfe(e.firebaseDependencies,t),i=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return yield PI(e.firebaseDependencies,i),n}catch(n){throw n}})}function HU(e,t){return F(this,null,function*(){let i={token:yield Gfe(e,t),createTime:Date.now(),subscriptionOptions:t};return yield PI(e,i),i.token})}function $fe(e,t){return F(this,null,function*(){let n=yield e.pushManager.getSubscription();return n||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ffe(t)})})}function qfe(e,t){let n=t.vapidKey===e.vapidKey,i=t.endpoint===e.endpoint,s=t.auth===e.auth,r=t.p256dh===e.p256dh;return n&&i&&s&&r}function UU(e){let t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return Kfe(t,e),Qfe(t,e),Yfe(t,e),t}function Kfe(e,t){if(!t.notification)return;e.notification={};let n=t.notification.title;n&&(e.notification.title=n);let i=t.notification.body;i&&(e.notification.body=i);let s=t.notification.image;s&&(e.notification.image=s);let r=t.notification.icon;r&&(e.notification.icon=r)}function Qfe(e,t){t.data&&(e.data=t.data)}function Yfe(e,t){var n,i,s,r,o;if(!t.fcmOptions&&!(!((n=t.notification)===null||n===void 0)&&n.click_action))return;e.fcmOptions={};let a=(s=(i=t.fcmOptions)===null||i===void 0?void 0:i.link)!==null&&s!==void 0?s:(r=t.notification)===null||r===void 0?void 0:r.click_action;a&&(e.fcmOptions.link=a);let l=(o=t.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(e.fcmOptions.analyticsLabel=l)}function Jfe(e){return typeof e=="object"&&!!e&&$U in e}YU("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");YU("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function YU(e,t){let n=[];for(let i=0;i<e.length;i++)n.push(e.charAt(i)),i<t.length&&n.push(t.charAt(i));return n.join("")}function Xfe(e){if(!e||!e.options)throw AI("App Configuration Object");if(!e.name)throw AI("App Name");let t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(let i of t)if(!n[i])throw AI(i);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function AI(e){return Xn.create("missing-app-config-values",{valueName:e})}var MI=class{constructor(t,n,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let s=Xfe(t);this.firebaseDependencies={app:t,appConfig:s,installations:n,analyticsProvider:i}}_delete(){return Promise.resolve()}};function Zfe(e){return F(this,null,function*(){try{e.swRegistration=yield navigator.serviceWorker.register(Rfe,{scope:Tfe}),e.swRegistration.update().catch(()=>{})}catch(t){throw Xn.create("failed-service-worker-registration",{browserErrorMessage:t?.message})}})}function epe(e,t){return F(this,null,function*(){if(!t&&!e.swRegistration&&(yield Zfe(e)),!(!t&&e.swRegistration)){if(!(t instanceof ServiceWorkerRegistration))throw Xn.create("invalid-sw-registration");e.swRegistration=t}})}function tpe(e,t){return F(this,null,function*(){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=zU)})}function npe(e,t){return F(this,null,function*(){if(!navigator)throw Xn.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw Xn.create("permission-blocked");return yield tpe(e,t?.vapidKey),yield epe(e,t?.serviceWorkerRegistration),jfe(e)})}function ipe(e,t,n){return F(this,null,function*(){let i=spe(t);(yield e.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:n[$U],message_name:n[Afe],message_time:n[Mfe],message_device_time:Math.floor(Date.now()/1e3)})})}function spe(e){switch(e){case XC.NOTIFICATION_CLICKED:return"notification_open";case XC.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function rpe(e,t){return F(this,null,function*(){let n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===XC.PUSH_RECEIVED&&(typeof e.onMessageHandler=="function"?e.onMessageHandler(UU(n)):e.onMessageHandler.next(UU(n)));let i=n.data;Jfe(i)&&i[Pfe]==="1"&&(yield ipe(e,n.messageType,i))})}var WU="@firebase/messaging",jU="0.12.10";var ope=e=>{let t=new MI(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>rpe(t,n)),t},ape=e=>{let t=e.getProvider("messaging").getImmediate();return{getToken:i=>npe(t,i)}};function lpe(){Et(new bt("messaging",ope,"PUBLIC")),Et(new bt("messaging-internal",ape,"PRIVATE")),pe(WU,jU),pe(WU,jU,"esm2017")}function OI(){return F(this,null,function*(){try{yield na()}catch{return!1}return typeof window<"u"&&ts()&&gd()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function JU(e=Xt()){return OI().then(t=>{if(!t)throw Xn.create("unsupported-browser")},t=>{throw Xn.create("indexed-db-unsupported")}),Ht(Ze(e),"messaging").getImmediate()}lpe();var Gf=class{constructor(t){return t}},XU="messaging",NI=class{constructor(){return yn(XU)}};var ZU="__angularfire_symbol__messagingIsSupported",kI="__angularfire_symbol__messagingIsSupportedValue";globalThis[ZU]||=OI().then(e=>globalThis[kI]=e).catch(()=>globalThis[kI]=!1);var ZC={async:()=>globalThis[ZU],sync:()=>{let e=globalThis[kI];if(e===void 0)throw new Error(Hc("Messaging"));return e}},LI=new Q("angularfire2.messaging-instances");function cpe(e,t){if(!ZC.sync())return null;let n=En(XU,e,t);return n&&new Gf(n)}function upe(e){return(t,n)=>{if(!ZC.sync())return null;let i=t.runOutsideAngular(()=>e(n));return new Gf(i)}}var dpe={provide:NI,deps:[[new Te,LI]]},hpe={provide:Gf,useFactory:cpe,deps:[[new Te,LI],Pt]};function eW(e,...t){return pe("angularfire",Dt.full,"fcm"),ht([hpe,dpe,{provide:wo,useValue:ZC.async,multi:!0},{provide:LI,useFactory:upe(e),multi:!0,deps:[le,Ue,Nt,$t,...t]}])}var PGe=ZC.async;var tW=Oe(JU,!0);var aW="firebasestorage.googleapis.com",fpe="storageBucket",ppe=2*60*1e3,gpe=10*60*1e3;var nr=class e extends ns{constructor(t,n,i=0){super(VI(t),`Firebase Storage: ${n} (${VI(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,e.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return VI(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Kr=function(e){return e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment",e}(Kr||{});function VI(e){return"storage/"+e}function mpe(){let e="An unknown error occurred, please check the error payload for server response.";return new nr(Kr.UNKNOWN,e)}function vpe(){return new nr(Kr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Cpe(){return new nr(Kr.CANCELED,"User canceled the upload/download.")}function ype(e){return new nr(Kr.INVALID_URL,"Invalid URL '"+e+"'.")}function wpe(e){return new nr(Kr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function nW(e){return new nr(Kr.INVALID_ARGUMENT,e)}function lW(){return new nr(Kr.APP_DELETED,"The Firebase app was deleted.")}function Spe(e){return new nr(Kr.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var qr=class e{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let i;try{i=e.makeFromUrl(t,n)}catch{return new e(t,"")}if(i.path==="")return i;throw wpe(t)}static makeFromUrl(t,n){let i=null,s="([A-Za-z0-9.\\-_]+)";function r(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(x){x.path_=decodeURIComponent(x.path)}let u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",g=new RegExp(`^https?://${h}/${u}/b/${s}/o${f}`,"i"),v={bucket:1,path:3},y=n===aW?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",E=new RegExp(`^https?://${y}/${s}/${C}`,"i"),T=[{regex:a,indices:l,postModify:r},{regex:g,indices:v,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let x=0;x<T.length;x++){let z=T[x],V=z.regex.exec(t);if(V){let b=V[z.indices.bucket],S=V[z.indices.path];S||(S=""),i=new e(b,S),z.postModify(i);break}}if(i==null)throw ype(t);return i}},BI=class{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}};function _pe(e,t,n){let i=1,s=null,r=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...C){c||(c=!0,t.apply(null,C))}function h(C){s=setTimeout(()=>{s=null,e(g,l())},C)}function f(){r&&clearTimeout(r)}function g(C,...E){if(c){f();return}if(C){f(),u.call(null,C,...E);return}if(l()||o){f(),u.call(null,C,...E);return}i<64&&(i*=2);let T;a===1?(a=2,T=0):T=(i+Math.random())*1e3,h(T)}let v=!1;function y(C){v||(v=!0,f(),!c&&(s!==null?(C||(a=2),clearTimeout(s),h(0)):C||(a=1)))}return h(0),r=setTimeout(()=>{o=!0,y(!0)},n),y}function bpe(e){e(!1)}function Epe(e){return e!==void 0}function iW(e,t,n,i){if(i<t)throw nW(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw nW(`Invalid value for '${e}'. Expected ${n} or less.`)}function Dpe(e){let t=encodeURIComponent,n="?";for(let i in e)if(e.hasOwnProperty(i)){let s=t(i)+"="+t(e[i]);n=n+s+"&"}return n=n.slice(0,-1),n}var GI=function(e){return e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT",e}(GI||{});function Rpe(e,t){let n=e>=500&&e<600,s=[408,429].indexOf(e)!==-1,r=t.indexOf(e)!==-1;return n||s||r}var HI=class{constructor(t,n,i,s,r,o,a,l,c,u,h,f=!0){this.url_=t,this.method_=n,this.headers_=i,this.body_=s,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,v)=>{this.resolve_=g,this.reject_=v,this.start_()})}start_(){let t=(i,s)=>{if(s){i(!1,new $u(!1,null,!0));return}let r=this.connectionFactory_();this.pendingConnection_=r;let o=a=>{let l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&r.addUploadProgressListener(o),r.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(o),this.pendingConnection_=null;let a=r.getErrorCode()===GI.NO_ERROR,l=r.getStatus();if(!a||Rpe(l,this.additionalRetryCodes_)&&this.retry){let u=r.getErrorCode()===GI.ABORT;i(!1,new $u(!1,null,u));return}let c=this.successCodes_.indexOf(l)!==-1;i(!0,new $u(c,r))})},n=(i,s)=>{let r=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{let l=this.callback_(a,a.getResponse());Epe(l)?r(l):r()}catch(l){o(l)}else if(a!==null){let l=mpe();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){let l=this.appDelete_?lW():Cpe();o(l)}else{let l=vpe();o(l)}};this.canceled_?n(!1,new $u(!1,null,!0)):this.backoffId_=_pe(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&bpe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},$u=class{constructor(t,n,i){this.wasSuccessCode=t,this.connection=n,this.canceled=!!i}};function Tpe(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function Ipe(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Ape(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Mpe(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function Ppe(e,t,n,i,s,r,o=!0){let a=Dpe(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return Ape(c,t),Tpe(c,n),Ipe(c,r),Mpe(c,i),new HI(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,o)}function Fpe(e){if(e.length===0)return null;let t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function xpe(e){let t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}var LGe=256*1024;var UI=class e{constructor(t,n){this._service=t,n instanceof qr?this._location=n:this._location=qr.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new e(t,n)}get root(){let t=new qr(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xpe(this._location.path)}get storage(){return this._service}get parent(){let t=Fpe(this._location.path);if(t===null)return null;let n=new qr(this._location.bucket,t);return new e(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw Spe(t)}};function sW(e,t){let n=t?.[fpe];return n==null?null:qr.makeFromBucketSpec(n,e)}function Ope(e,t,n,i={}){e.host=`${t}:${n}`,e._protocol="http";let{mockUserToken:s}=i;s&&(e._overrideAuthToken=typeof s=="string"?s:Ul(s,e.app.options.projectId))}var WI=class{constructor(t,n,i,s,r){this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=s,this._firebaseVersion=r,this._bucket=null,this._host=aW,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ppe,this._maxUploadRetryTime=gpe,this._requests=new Set,s!=null?this._bucket=qr.makeFromBucketSpec(s,this._host):this._bucket=sW(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=qr.makeFromBucketSpec(this._url,t):this._bucket=sW(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){iW("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){iW("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){return F(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let t=this._authProvider.getImmediate({optional:!0});if(t){let n=yield t.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return F(this,null,function*(){let t=this._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new UI(this,t)}_makeRequest(t,n,i,s,r=!0){if(this._deleted)return new BI(lW());{let o=Ppe(t,this._appId,i,s,n,this._firebaseVersion,r);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(t,n){return F(this,null,function*(){let[i,s]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,i,s).getPromise()})}},rW="@firebase/storage",oW="0.12.6";var cW="storage";function uW(e=Xt(),t){e=Ze(e);let i=Ht(e,cW).getImmediate({identifier:t}),s=to("storage");return s&&dW(i,...s),i}function dW(e,t,n,i={}){Ope(e,t,n,i)}function Npe(e,{instanceIdentifier:t}){let n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new WI(n,i,s,t,no)}function kpe(){Et(new bt(cW,Npe,"PUBLIC").setMultipleInstances(!0)),pe(rW,oW,""),pe(rW,oW,"esm2017")}kpe();var Hf=class{constructor(t){return t}},hW="storage",jI=class{constructor(){return yn(hW)}};var zI=new Q("angularfire2.storage-instances");function Lpe(e,t){let n=En(hW,e,t);return n&&new Hf(n)}function Vpe(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new Hf(i)}}var Bpe={provide:jI,deps:[[new Te,zI]]},Gpe={provide:Hf,useFactory:Lpe,deps:[[new Te,zI],Pt]};function fW(e,...t){return pe("angularfire",Dt.full,"gcs"),ht([Gpe,Bpe,{provide:zI,useFactory:Vpe(e),multi:!0,deps:[le,Ue,Nt,$t,[new Te,ds],[new Te,Wn],...t]}])}var pW=Oe(uW,!0);var $I="@firebase/remote-config",gW="0.4.8";var mW="remote-config";var Hpe={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},li=new Is("remoteconfig","Remote Config",Hpe);function vW(e=Xt()){return e=Ze(e),Ht(e,mW).getImmediate()}function CW(e){let t=Ze(e);return t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(()=>{t._isInitializationComplete=!0})),t._initializePromise}var qI=class{constructor(t,n,i,s){this.client=t,this.storage=n,this.storageCache=i,this.logger=s}isCachedDataFresh(t,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let i=Date.now()-n,s=i<=t;return this.logger.debug(`Config fetch cache check. Cache age millis: ${i}. Cache max age millis (minimumFetchIntervalMillis setting): ${t}. Is cache hit: ${s}.`),s}fetch(t){return F(this,null,function*(){let[n,i]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(i&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n))return i;t.eTag=i&&i.eTag;let s=yield this.client.fetch(t),r=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return s.status===200&&r.push(this.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(r),s})}};function Upe(e=navigator){return e.languages&&e.languages[0]||e.language}var KI=class{constructor(t,n,i,s,r,o){this.firebaseInstallations=t,this.sdkVersion=n,this.namespace=i,this.projectId=s,this.apiKey=r,this.appId=o}fetch(t){return F(this,null,function*(){let[n,i]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),r=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,o={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:i,app_id:this.appId,language_code:Upe()},l={method:"POST",headers:o,body:JSON.stringify(a)},c=fetch(r,l),u=new Promise((C,E)=>{t.signal.addEventListener(()=>{let I=new Error("The operation was aborted.");I.name="AbortError",E(I)})}),h;try{yield Promise.race([c,u]),h=yield c}catch(C){let E="fetch-client-network";throw C?.name==="AbortError"&&(E="fetch-timeout"),li.create(E,{originalErrorMessage:C?.message})}let f=h.status,g=h.headers.get("ETag")||void 0,v,y;if(h.status===200){let C;try{C=yield h.json()}catch(E){throw li.create("fetch-client-parse",{originalErrorMessage:E?.message})}v=C.entries,y=C.state}if(y==="INSTANCE_STATE_UNSPECIFIED"?f=500:y==="NO_CHANGE"?f=304:(y==="NO_TEMPLATE"||y==="EMPTY_CONFIG")&&(v={}),f!==304&&f!==200)throw li.create("fetch-status",{httpStatus:f});return{status:f,eTag:g,config:v}})}};function Wpe(e,t){return new Promise((n,i)=>{let s=Math.max(t-Date.now(),0),r=setTimeout(n,s);e.addEventListener(()=>{clearTimeout(r),i(li.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function jpe(e){if(!(e instanceof ns)||!e.customData)return!1;let t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var QI=class{constructor(t,n){this.client=t,this.storage=n}fetch(t){return F(this,null,function*(){let n=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(t,n)})}attemptFetch(s,r){return F(this,arguments,function*(t,{throttleEndTimeMillis:n,backoffCount:i}){yield Wpe(t.signal,n);try{let o=yield this.client.fetch(t);return yield this.storage.deleteThrottleMetadata(),o}catch(o){if(!jpe(o))throw o;let a={throttleEndTimeMillis:Date.now()+Wl(i),backoffCount:i+1};return yield this.storage.setThrottleMetadata(a),this.attemptFetch(t,a)}})}};var zpe=60*1e3,$pe=12*60*60*1e3,YI=class{constructor(t,n,i,s,r){this.app=t,this._client=n,this._storageCache=i,this._storage=s,this._logger=r,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:zpe,minimumFetchIntervalMillis:$pe},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}};function ey(e,t){let n=e.target.error||void 0;return li.create(t,{originalErrorMessage:n&&n?.message})}var Pl="app_namespace_store",qpe="firebase_remote_config",Kpe=1;function Qpe(){return new Promise((e,t)=>{try{let n=indexedDB.open(qpe,Kpe);n.onerror=i=>{t(ey(i,"storage-open"))},n.onsuccess=i=>{e(i.target.result)},n.onupgradeneeded=i=>{let s=i.target.result;switch(i.oldVersion){case 0:s.createObjectStore(Pl,{keyPath:"compositeKey"})}}}catch(n){t(li.create("storage-open",{originalErrorMessage:n?.message}))}})}var JI=class{constructor(t,n,i,s=Qpe()){this.appId=t,this.appName=n,this.namespace=i,this.openDbPromise=s}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(t){return this.set("last_fetch_status",t)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(t){return this.set("last_successful_fetch_timestamp_millis",t)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(t){return this.set("last_successful_fetch_response",t)}getActiveConfig(){return this.get("active_config")}setActiveConfig(t){return this.set("active_config",t)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(t){return this.set("active_config_etag",t)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(t){return this.set("throttle_metadata",t)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(t){return F(this,null,function*(){let n=yield this.openDbPromise;return new Promise((i,s)=>{let o=n.transaction([Pl],"readonly").objectStore(Pl),a=this.createCompositeKey(t);try{let l=o.get(a);l.onerror=c=>{s(ey(c,"storage-get"))},l.onsuccess=c=>{let u=c.target.result;i(u?u.value:void 0)}}catch(l){s(li.create("storage-get",{originalErrorMessage:l?.message}))}})})}set(t,n){return F(this,null,function*(){let i=yield this.openDbPromise;return new Promise((s,r)=>{let a=i.transaction([Pl],"readwrite").objectStore(Pl),l=this.createCompositeKey(t);try{let c=a.put({compositeKey:l,value:n});c.onerror=u=>{r(ey(u,"storage-set"))},c.onsuccess=()=>{s()}}catch(c){r(li.create("storage-set",{originalErrorMessage:c?.message}))}})})}delete(t){return F(this,null,function*(){let n=yield this.openDbPromise;return new Promise((i,s)=>{let o=n.transaction([Pl],"readwrite").objectStore(Pl),a=this.createCompositeKey(t);try{let l=o.delete(a);l.onerror=c=>{s(ey(c,"storage-delete"))},l.onsuccess=()=>{i()}}catch(l){s(li.create("storage-delete",{originalErrorMessage:l?.message}))}})})}createCompositeKey(t){return[this.appId,this.appName,this.namespace,t].join()}};var XI=class{constructor(t){this.storage=t}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){return F(this,null,function*(){let t=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),i=this.storage.getActiveConfig(),s=yield t;s&&(this.lastFetchStatus=s);let r=yield n;r&&(this.lastSuccessfulFetchTimestampMillis=r);let o=yield i;o&&(this.activeConfig=o)})}setLastFetchStatus(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)}setLastSuccessfulFetchTimestampMillis(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)}setActiveConfig(t){return this.activeConfig=t,this.storage.setActiveConfig(t)}};function Ype(){Et(new bt(mW,e,"PUBLIC").setMultipleInstances(!0)),pe($I,gW),pe($I,gW,"esm2017");function e(t,{instanceIdentifier:n}){let i=t.getProvider("app").getImmediate(),s=t.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw li.create("registration-window");if(!ts())throw li.create("indexed-db-unavailable");let{projectId:r,apiKey:o,appId:a}=i.options;if(!r)throw li.create("registration-project-id");if(!o)throw li.create("registration-api-key");if(!a)throw li.create("registration-app-id");n=n||"firebase";let l=new JI(a,i.name,n),c=new XI(l),u=new Ms($I);u.logLevel=di.ERROR;let h=new KI(s,no,n,r,o,a),f=new QI(h,l),g=new qI(f,l,c,u),v=new YI(i,g,c,l,u);return CW(v),v}}function yW(){return F(this,null,function*(){if(!ts())return!1;try{return yield na()}catch{return!1}})}Ype();var Uf=class{constructor(t){return t}},wW="remote-config",ZI=class{constructor(){return yn(wW)}};var eA="__angularfire_symbol__remoteConfigIsSupportedValue",SW="__angularfire_symbol__remoteConfigIsSupported";globalThis[SW]||=yW().then(e=>globalThis[eA]=e).catch(()=>globalThis[eA]=!1);var ty={async:()=>globalThis[SW],sync:()=>{let e=globalThis[eA];if(e===void 0)throw new Error(Hc("RemoteConfig"));return e}},tA=new Q("angularfire2.remote-config-instances");function Jpe(e,t){if(!ty.sync())return null;let n=En(wW,e,t);return n&&new Uf(n)}function Xpe(e){return(t,n)=>{if(!ty.sync())return null;let i=t.runOutsideAngular(()=>e(n));return new Uf(i)}}var Zpe={provide:ZI,deps:[[new Te,tA]]},ege={provide:Uf,useFactory:Jpe,deps:[[new Te,tA],Pt]};function _W(e,...t){return pe("angularfire",Dt.full,"rc"),ht([ege,Zpe,{provide:wo,useValue:ty.async,multi:!0},{provide:tA,useFactory:Xpe(e),multi:!0,deps:[le,Ue,Nt,$t,...t]}])}var OHe=ty.async;var bW=Oe(vW,!0);var nA={firebaseConfig:{projectId:"expense-tracker-app-ee455",appId:"1:652658231358:web:16ee9e447afa0f2385696f",storageBucket:"expense-tracker-app-ee455.appspot.com",apiKey:"AIzaSyDOMgJPMGTfIHUNZDV8k4z4jXNGEaXMZBo",authDomain:"expense-tracker-app-ee455.firebaseapp.com",messagingSenderId:"652658231358",measurementId:"G-8E6SEFV1FX"}};var EW={providers:[{provide:Yv,useValue:nA.firebaseConfig},EO(ZG),W1(),XO(()=>ZO(nA.firebaseConfig)),sN(()=>aN()),GH(()=>VH()),BH,lT,zL(()=>YL()),MU(()=>PU()),VU(()=>BU()),eW(()=>tW()),fW(()=>pW()),_W(()=>bW())]};var DW=(()=>{let t=class t{constructor(i){this.auth=i}ngOnInit(){this.auth.user$.subscribe(i=>{i?this.auth.currentUserSig.set({email:i.email,username:i.displayName}):this.auth.currentUserSig.set(null),console.log(this.auth.currentUserSig())})}};t.\u0275fac=function(s){return new(s||t)(ne(Ws))},t.\u0275cmp=Pe({type:t,selectors:[["app-root"]],standalone:!0,features:[cs([jN()]),Fe],decls:1,vars:0,template:function(s,r){s&1&&de(0,"router-outlet")},dependencies:[vn,Ch]});let e=t;return e})();U1(DW,EW).catch(e=>console.error(e));
