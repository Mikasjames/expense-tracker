import{$ as Vw,A as NP,B as ar,C as ja,D as Nw,E as ah,F as lh,G as kP,H as LP,I as VP,J as BP,K as ch,L as Tc,M as ct,N as Ot,O as Fi,P as lr,Q as uh,R as lg,S as Nt,T as on,U as Bo,V as GP,W as gn,X as cg,Y as Se,Z as kw,_ as Lw,a as TP,aa as Bw,b as rg,ba as Gw,c as RP,ca as ug,d as IP,da as dg,e as se,ea as Hw,f as bc,fa as za,g as og,h as AP,i as MP,j as Vo,k as Ec,l as Dc,m as PP,n as xw,o as Ow,p as FP,q as rr,r as xP,s as Is,t as Wa,u as oh,v as As,w as or,x as ag,y as pn,z as OP}from"./chunk-K74VG7TY.js";import{a as B,b as ae,c as sg,f as x}from"./chunk-FO65GQC2.js";function Uz(e,t){return Object.is(e,t)}var mn=null,hg=!1,fg=1,Ic=Symbol("SIGNAL");function qe(e){let t=mn;return mn=e,t}var Uw={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function HP(e){if(hg)throw new Error("");if(mn===null)return;mn.consumerOnSignalRead(e);let t=mn.nextProducerIndex++;if(Rc(mn),t<mn.producerNode.length&&mn.producerNode[t]!==e&&dh(mn)){let n=mn.producerNode[t];pg(n,mn.producerIndexOfThis[t])}mn.producerNode[t]!==e&&(mn.producerNode[t]=e,mn.producerIndexOfThis[t]=dh(mn)?qP(e,mn,t):0),mn.producerLastReadVersion[t]=e.version}function Wz(){fg++}function jz(e){if(!(dh(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===fg)){if(!e.producerMustRecompute(e)&&!Ww(e)){e.dirty=!1,e.lastCleanEpoch=fg;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=fg}}function UP(e){if(e.liveConsumerNode===void 0)return;let t=hg;hg=!0;try{for(let n of e.liveConsumerNode)n.dirty||zz(n)}finally{hg=t}}function WP(){return mn?.consumerAllowSignalWrites!==!1}function zz(e){e.dirty=!0,UP(e),e.consumerMarkedDirty?.(e)}function jP(e){return e&&(e.nextProducerIndex=0),qe(e)}function zP(e,t){if(qe(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(dh(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)pg(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Ww(e){Rc(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],i=e.producerLastReadVersion[t];if(i!==n.version||(jz(n),i!==n.version))return!0}return!1}function $P(e){if(Rc(e),dh(e))for(let t=0;t<e.producerNode.length;t++)pg(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function qP(e,t,n){if(KP(e),Rc(e),e.liveConsumerNode.length===0)for(let i=0;i<e.producerNode.length;i++)e.producerIndexOfThis[i]=qP(e.producerNode[i],e,i);return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function pg(e,t){if(KP(e),Rc(e),e.liveConsumerNode.length===1)for(let i=0;i<e.producerNode.length;i++)pg(e.producerNode[i],e.producerIndexOfThis[i]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let i=e.liveConsumerIndexOfThis[t],s=e.liveConsumerNode[t];Rc(s),s.producerIndexOfThis[i]=t}}function dh(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Rc(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function KP(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function $z(){throw new Error}var QP=$z;function YP(){QP()}function JP(e){QP=e}var qz=null;function XP(e){let t=Object.create(eF);t.value=e;let n=()=>(HP(t),t.value);return n[Ic]=t,n}function jw(e,t){WP()||YP(),e.equal(e.value,t)||(e.value=t,Kz(e))}function ZP(e,t){WP()||YP(),jw(e,t(e.value))}var eF=ae(B({},Uw),{equal:Uz,value:void 0});function Kz(e){e.version++,Wz(),UP(e),qz?.()}function me(e){return typeof e=="function"}function Ac(e){let n=e(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var gg=Ac(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,s)=>`${s+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function $a(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var It=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let r of n)r.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(me(i))try{i()}catch(r){t=r instanceof gg?r.errors:[r]}let{_finalizers:s}=this;if(s){this._finalizers=null;for(let r of s)try{tF(r)}catch(o){t=t??[],o instanceof gg?t=[...t,...o.errors]:t.push(o)}}if(t)throw new gg(t)}}add(t){var n;if(t&&t!==this)if(this.closed)tF(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&$a(n,t)}remove(t){let{_finalizers:n}=this;n&&$a(n,t),t instanceof e&&t._removeParent(this)}};It.EMPTY=(()=>{let e=new It;return e.closed=!0,e})();var zw=It.EMPTY;function mg(e){return e instanceof It||e&&"closed"in e&&me(e.remove)&&me(e.add)&&me(e.unsubscribe)}function tF(e){me(e)?e():e.unsubscribe()}var Ms={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Mc={setTimeout(e,t,...n){let{delegate:i}=Mc;return i?.setTimeout?i.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=Mc;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function vg(e){Mc.setTimeout(()=>{let{onUnhandledError:t}=Ms;if(t)t(e);else throw e})}function Ps(){}var nF=$w("C",void 0,void 0);function iF(e){return $w("E",void 0,e)}function sF(e){return $w("N",e,void 0)}function $w(e,t,n){return{kind:e,value:t,error:n}}var qa=null;function Pc(e){if(Ms.useDeprecatedSynchronousErrorHandling){let t=!qa;if(t&&(qa={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:i}=qa;if(qa=null,n)throw i}}else e()}function rF(e){Ms.useDeprecatedSynchronousErrorHandling&&qa&&(qa.errorThrown=!0,qa.error=e)}var Ka=class extends It{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,mg(t)&&t.add(this)):this.destination=Jz}static create(t,n,i){return new Hr(t,n,i)}next(t){this.isStopped?Kw(sF(t),this):this._next(t)}error(t){this.isStopped?Kw(iF(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Kw(nF,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Qz=Function.prototype.bind;function qw(e,t){return Qz.call(e,t)}var Qw=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(i){Cg(i)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(i){Cg(i)}else Cg(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Cg(n)}}},Hr=class extends Ka{constructor(t,n,i){super();let s;if(me(t)||!t)s={next:t??void 0,error:n??void 0,complete:i??void 0};else{let r;this&&Ms.useDeprecatedNextContext?(r=Object.create(t),r.unsubscribe=()=>this.unsubscribe(),s={next:t.next&&qw(t.next,r),error:t.error&&qw(t.error,r),complete:t.complete&&qw(t.complete,r)}):s=t}this.destination=new Qw(s)}};function Cg(e){Ms.useDeprecatedSynchronousErrorHandling?rF(e):vg(e)}function Yz(e){throw e}function Kw(e,t){let{onStoppedNotification:n}=Ms;n&&Mc.setTimeout(()=>n(e,t))}var Jz={closed:!0,next:Ps,error:Yz,complete:Ps};var Fc=typeof Symbol=="function"&&Symbol.observable||"@@observable";function In(e){return e}function yg(...e){return Yw(e)}function Yw(e){return e.length===0?In:e.length===1?e[0]:function(n){return e.reduce((i,s)=>s(i),n)}}var le=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new e;return i.source=this,i.operator=n,i}subscribe(n,i,s){let r=Zz(n)?n:new Hr(n,i,s);return Pc(()=>{let{operator:o,source:a}=this;r.add(o?o.call(r,a):a?this._subscribe(r):this._trySubscribe(r))}),r}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=oF(i),new i((s,r)=>{let o=new Hr({next:a=>{try{n(a)}catch(l){r(l),o.unsubscribe()}},error:r,complete:s});this.subscribe(o)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[Fc](){return this}pipe(...n){return Yw(n)(this)}toPromise(n){return n=oF(n),new n((i,s)=>{let r;this.subscribe(o=>r=o,o=>s(o),()=>i(r))})}}return e.create=t=>new e(t),e})();function oF(e){var t;return(t=e??Ms.Promise)!==null&&t!==void 0?t:Promise}function Xz(e){return e&&me(e.next)&&me(e.error)&&me(e.complete)}function Zz(e){return e&&e instanceof Ka||Xz(e)&&mg(e)}function Jw(e){return me(e?.lift)}function ye(e){return t=>{if(Jw(t))return t.lift(function(n){try{return e(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ve(e,t,n,i,s){return new hh(e,t,n,i,s)}var hh=class extends Ka{constructor(t,n,i,s,r,o){super(t),this.onFinalize=r,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){t.error(l)}}:super._next,this._error=s?function(a){try{s(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function xc(){return ye((e,t)=>{let n=null;e._refCount++;let i=ve(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount){n=null;return}let s=e._connection,r=n;n=null,s&&(!r||s===r)&&s.unsubscribe(),t.unsubscribe()});e.subscribe(i),i.closed||(n=e.connect())})}var Go=class extends le{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Jw(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new It;let n=this.getSubject();t.add(this.source.subscribe(ve(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=It.EMPTY)}return t}refCount(){return xc()(this)}};var aF=Ac(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Me=(()=>{class e extends le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new wg(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new aF}next(n){Pc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){Pc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Pc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:s,observers:r}=this;return i||s?zw:(this.currentObservers=null,r.push(n),new It(()=>{this.currentObservers=null,$a(r,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:s,isStopped:r}=this;i?n.error(s):r&&n.complete()}asObservable(){let n=new le;return n.source=this,n}}return e.create=(t,n)=>new wg(t,n),e})(),wg=class extends Me{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,t)}error(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&i!==void 0?i:zw}};var wt=class extends Me{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:i}=this;if(t)throw n;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};var fh={now(){return(fh.delegate||Date).now()},delegate:void 0};var Ur=class extends Me{constructor(t=1/0,n=1/0,i=fh){super(),this._bufferSize=t,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,n)}next(t){let{isStopped:n,_buffer:i,_infiniteTimeWindow:s,_timestampProvider:r,_windowTime:o}=this;n||(i.push(t),!s&&i.push(r.now()+o)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:s}=this,r=s.slice();for(let o=0;o<r.length&&!t.closed;o+=i?1:2)t.next(r[o]);return this._checkFinalizedStatuses(t),n}_trimBuffer(){let{_bufferSize:t,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:s}=this,r=(s?1:2)*t;if(t<1/0&&r<i.length&&i.splice(0,i.length-r),!s){let o=n.now(),a=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)a=l;a&&i.splice(0,a+1)}}};var Sg=class extends It{constructor(t,n){super()}schedule(t,n=0){return this}};var ph={setInterval(e,t,...n){let{delegate:i}=ph;return i?.setInterval?i.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){let{delegate:t}=ph;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};var Oc=class extends Sg{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var i;if(this.closed)return this;this.state=t;let s=this.id,r=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(r,s,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(r,this.id,n),this}requestAsyncId(t,n,i=0){return ph.setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&ph.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(t,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let i=!1,s;try{this.work(t)}catch(r){i=!0,s=r||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){let{id:t,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,$a(i,this),t!=null&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}};var Nc=class e{constructor(t,n=e.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,i){return new this.schedulerActionCtor(this,t).schedule(i,n)}};Nc.now=fh.now;var kc=class extends Nc{constructor(t,n=Nc.now){super(t,n),this.actions=[],this._active=!1}flush(t){let{actions:n}=this;if(this._active){n.push(t);return}let i;this._active=!0;do if(i=t.execute(t.state,t.delay))break;while(t=n.shift());if(this._active=!1,i){for(;t=n.shift();)t.unsubscribe();throw i}}};var es=new kc(Oc),Xw=es;var _g=class extends Oc{constructor(t,n){super(t,n),this.scheduler=t,this.work=n}schedule(t,n=0){return n>0?super.schedule(t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)}execute(t,n){return n>0||this.closed?super.execute(t,n):this._execute(t,n)}requestAsyncId(t,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(t,n,i):(t.flush(this),0)}};var bg=class extends kc{};var Zw=new bg(_g);var an=new le(e=>e.complete());function Eg(e){return e&&me(e.schedule)}function eS(e){return e[e.length-1]}function Ho(e){return me(eS(e))?e.pop():void 0}function cr(e){return Eg(eS(e))?e.pop():void 0}function lF(e,t){return typeof eS(e)=="number"?e.pop():t}var Lc=e=>e&&typeof e.length=="number"&&typeof e!="function";function Dg(e){return me(e?.then)}function Tg(e){return me(e[Fc])}function Rg(e){return Symbol.asyncIterator&&me(e?.[Symbol.asyncIterator])}function Ig(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function e$(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ag=e$();function Mg(e){return me(e?.[Ag])}function Pg(e){return RP(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:i,done:s}=yield rg(n.read());if(s)return yield rg(void 0);yield yield rg(i)}}finally{n.releaseLock()}})}function Fg(e){return me(e?.getReader)}function Fe(e){if(e instanceof le)return e;if(e!=null){if(Tg(e))return t$(e);if(Lc(e))return n$(e);if(Dg(e))return i$(e);if(Rg(e))return cF(e);if(Mg(e))return s$(e);if(Fg(e))return r$(e)}throw Ig(e)}function t$(e){return new le(t=>{let n=e[Fc]();if(me(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function n$(e){return new le(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function i$(e){return new le(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,vg)})}function s$(e){return new le(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function cF(e){return new le(t=>{o$(e,t).catch(n=>t.error(n))})}function r$(e){return cF(Pg(e))}function o$(e,t){var n,i,s,r;return TP(this,void 0,void 0,function*(){try{for(n=IP(e);i=yield n.next(),!i.done;){let o=i.value;if(t.next(o),t.closed)return}}catch(o){s={error:o}}finally{try{i&&!i.done&&(r=n.return)&&(yield r.call(n))}finally{if(s)throw s.error}}t.complete()})}function pi(e,t,n,i=0,s=!1){let r=t.schedule(function(){n(),s?e.add(this.schedule(null,i)):this.unsubscribe()},i);if(e.add(r),!s)return r}function xi(e,t=0){return ye((n,i)=>{n.subscribe(ve(i,s=>pi(i,e,()=>i.next(s),t),()=>pi(i,e,()=>i.complete(),t),s=>pi(i,e,()=>i.error(s),t)))})}function ts(e,t=0){return ye((n,i)=>{i.add(e.schedule(()=>n.subscribe(i),t))})}function uF(e,t){return Fe(e).pipe(ts(t),xi(t))}function dF(e,t){return Fe(e).pipe(ts(t),xi(t))}function hF(e,t){return new le(n=>{let i=0;return t.schedule(function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||this.schedule())})})}function fF(e,t){return new le(n=>{let i;return pi(n,t,()=>{i=e[Ag](),pi(n,t,()=>{let s,r;try{({value:s,done:r}=i.next())}catch(o){n.error(o);return}r?n.complete():n.next(s)},0,!0)}),()=>me(i?.return)&&i.return()})}function xg(e,t){if(!e)throw new Error("Iterable cannot be null");return new le(n=>{pi(n,t,()=>{let i=e[Symbol.asyncIterator]();pi(n,t,()=>{i.next().then(s=>{s.done?n.complete():n.next(s.value)})},0,!0)})})}function pF(e,t){return xg(Pg(e),t)}function gF(e,t){if(e!=null){if(Tg(e))return uF(e,t);if(Lc(e))return hF(e,t);if(Dg(e))return dF(e,t);if(Rg(e))return xg(e,t);if(Mg(e))return fF(e,t);if(Fg(e))return pF(e,t)}throw Ig(e)}function tt(e,t){return t?gF(e,t):Fe(e)}function X(...e){let t=cr(e);return tt(e,t)}function Uo(e,t){let n=me(e)?e:()=>e,i=s=>s.error(n());return new le(t?s=>t.schedule(i,0,s):i)}function tS(e){return!!e&&(e instanceof le||me(e.lift)&&me(e.subscribe))}var Wr=Ac(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function mF(e){return e instanceof Date&&!isNaN(e)}function oe(e,t){return ye((n,i)=>{let s=0;n.subscribe(ve(i,r=>{i.next(e.call(t,r,s++))}))})}var{isArray:a$}=Array;function l$(e,t){return a$(t)?e(...t):e(t)}function Vc(e){return oe(t=>l$(e,t))}var{isArray:c$}=Array,{getPrototypeOf:u$,prototype:d$,keys:h$}=Object;function Og(e){if(e.length===1){let t=e[0];if(c$(t))return{args:t,keys:null};if(f$(t)){let n=h$(t);return{args:n.map(i=>t[i]),keys:n}}}return{args:e,keys:null}}function f$(e){return e&&typeof e=="object"&&u$(e)===d$}function Ng(e,t){return e.reduce((n,i,s)=>(n[i]=t[s],n),{})}function Fs(...e){let t=cr(e),n=Ho(e),{args:i,keys:s}=Og(e);if(i.length===0)return tt([],t);let r=new le(p$(i,t,s?o=>Ng(s,o):In));return n?r.pipe(Vc(n)):r}function p$(e,t,n=In){return i=>{vF(t,()=>{let{length:s}=e,r=new Array(s),o=s,a=s;for(let l=0;l<s;l++)vF(t,()=>{let c=tt(e[l],t),u=!1;c.subscribe(ve(i,h=>{r[l]=h,u||(u=!0,a--),a||i.next(n(r.slice()))},()=>{--o||i.complete()}))},i)},i)}}function vF(e,t,n){e?pi(n,e,t):t()}function CF(e,t,n,i,s,r,o,a){let l=[],c=0,u=0,h=!1,f=()=>{h&&!l.length&&!c&&t.complete()},p=y=>c<i?v(y):l.push(y),v=y=>{r&&t.next(y),c++;let C=!1;Fe(n(y,u++)).subscribe(ve(t,E=>{s?.(E),r?p(E):t.next(E)},()=>{C=!0},void 0,()=>{if(C)try{for(c--;l.length&&c<i;){let E=l.shift();o?pi(t,o,()=>v(E)):v(E)}f()}catch(E){t.error(E)}}))};return e.subscribe(ve(t,p,()=>{h=!0,f()})),()=>{a?.()}}function ft(e,t,n=1/0){return me(t)?ft((i,s)=>oe((r,o)=>t(i,r,s,o))(Fe(e(i,s))),n):(typeof t=="number"&&(n=t),ye((i,s)=>CF(i,s,e,n)))}function gh(e=1/0){return ft(In,e)}function yF(){return gh(1)}function ns(...e){return yF()(tt(e,cr(e)))}function Qa(e){return new le(t=>{Fe(e()).subscribe(t)})}function nS(...e){let t=Ho(e),{args:n,keys:i}=Og(e),s=new le(r=>{let{length:o}=n;if(!o){r.complete();return}let a=new Array(o),l=o,c=o;for(let u=0;u<o;u++){let h=!1;Fe(n[u]).subscribe(ve(r,f=>{h||(h=!0,c--),a[u]=f},()=>l--,void 0,()=>{(!l||!h)&&(c||r.next(i?Ng(i,a):a),r.complete())}))}});return t?s.pipe(Vc(t)):s}var g$=["addListener","removeListener"],m$=["addEventListener","removeEventListener"],v$=["on","off"];function Kt(e,t,n,i){if(me(n)&&(i=n,n=void 0),i)return Kt(e,t,n).pipe(Vc(i));let[s,r]=w$(e)?m$.map(o=>a=>e[o](t,a,n)):C$(e)?g$.map(wF(e,t)):y$(e)?v$.map(wF(e,t)):[];if(!s&&Lc(e))return ft(o=>Kt(o,t,n))(Fe(e));if(!s)throw new TypeError("Invalid event target");return new le(o=>{let a=(...l)=>o.next(1<l.length?l:l[0]);return s(a),()=>r(a)})}function wF(e,t){return n=>i=>e[n](t,i)}function C$(e){return me(e.addListener)&&me(e.removeListener)}function y$(e){return me(e.on)&&me(e.off)}function w$(e){return me(e.addEventListener)&&me(e.removeEventListener)}function Wo(e=0,t,n=Xw){let i=-1;return t!=null&&(Eg(t)?n=t:i=t),new le(s=>{let r=mF(e)?+e-n.now():e;r<0&&(r=0);let o=0;return n.schedule(function(){s.closed||(s.next(o++),0<=i?this.schedule(void 0,i):s.complete())},r)})}function jo(...e){let t=cr(e),n=lF(e,1/0),i=e;return i.length?i.length===1?Fe(i[0]):gh(n)(tt(i,t)):an}var zo=new le(Ps);var{isArray:S$}=Array;function kg(e){return e.length===1&&S$(e[0])?e[0]:e}function Ye(e,t){return ye((n,i)=>{let s=0;n.subscribe(ve(i,r=>e.call(t,r,s++)&&i.next(r)))})}function Lg(...e){return e=kg(e),e.length===1?Fe(e[0]):new le(_$(e))}function _$(e){return t=>{let n=[];for(let i=0;n&&!t.closed&&i<e.length;i++)n.push(Fe(e[i]).subscribe(ve(t,s=>{if(n){for(let r=0;r<n.length;r++)r!==i&&n[r].unsubscribe();n=null}t.next(s)})))}}function mh(...e){let t=Ho(e),n=kg(e);return n.length?new le(i=>{let s=n.map(()=>[]),r=n.map(()=>!1);i.add(()=>{s=r=null});for(let o=0;!i.closed&&o<n.length;o++)Fe(n[o]).subscribe(ve(i,a=>{if(s[o].push(a),s.every(l=>l.length)){let l=s.map(c=>c.shift());i.next(t?t(...l):l),s.some((c,u)=>!c.length&&r[u])&&i.complete()}},()=>{r[o]=!0,!s[o].length&&i.complete()}));return()=>{s=r=null}}):an}function $o(e){return ye((t,n)=>{let i=null,s=!1,r;i=t.subscribe(ve(n,void 0,void 0,o=>{r=Fe(e(o,$o(e)(t))),i?(i.unsubscribe(),i=null,r.subscribe(n)):s=!0})),s&&(i.unsubscribe(),i=null,r.subscribe(n))})}function SF(e,t,n,i,s){return(r,o)=>{let a=n,l=t,c=0;r.subscribe(ve(o,u=>{let h=c++;l=a?e(l,u,h):(a=!0,u),i&&o.next(l)},s&&(()=>{a&&o.next(l),o.complete()})))}}function qo(e,t){return me(t)?ft(e,t,1):ft(e,1)}function _F(e){return new le(t=>e.subscribe(t))}var b$={connector:()=>new Me};function Vg(e,t=b$){let{connector:n}=t;return ye((i,s)=>{let r=n();Fe(e(_F(r))).subscribe(s),s.add(i.subscribe(r))})}function iS(e,t=es){return ye((n,i)=>{let s=null,r=null,o=null,a=()=>{if(s){s.unsubscribe(),s=null;let c=r;r=null,i.next(c)}};function l(){let c=o+e,u=t.now();if(u<c){s=this.schedule(void 0,c-u),i.add(s);return}a()}n.subscribe(ve(i,c=>{r=c,o=t.now(),s||(s=t.schedule(l,e),i.add(s))},()=>{a(),i.complete()},void 0,()=>{r=s=null}))})}function Ko(e){return ye((t,n)=>{let i=!1;t.subscribe(ve(n,s=>{i=!0,n.next(s)},()=>{i||n.next(e),n.complete()}))})}function ut(e){return e<=0?()=>an:ye((t,n)=>{let i=0;t.subscribe(ve(n,s=>{++i<=e&&(n.next(s),e<=i&&n.complete())}))})}function bF(){return ye((e,t)=>{e.subscribe(ve(t,Ps))})}function vh(e){return oe(()=>e)}function sS(e,t){return t?n=>ns(t.pipe(ut(1),bF()),n.pipe(sS(e))):ft((n,i)=>Fe(e(n,i)).pipe(ut(1),vh(n)))}function Ch(e,t=es){let n=Wo(e,t);return sS(()=>n)}function yh(e,t=In){return e=e??E$,ye((n,i)=>{let s,r=!0;n.subscribe(ve(i,o=>{let a=t(o);(r||!e(s,a))&&(r=!1,s=a,i.next(o))}))})}function E$(e,t){return e===t}function Bg(e=D$){return ye((t,n)=>{let i=!1;t.subscribe(ve(n,s=>{i=!0,n.next(s)},()=>i?n.complete():n.error(e())))})}function D$(){return new Wr}function rS(...e){return t=>ns(t,X(...e))}function Ya(e){return ye((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function Oi(e,t){let n=arguments.length>=2;return i=>i.pipe(e?Ye((s,r)=>e(s,r,i)):In,ut(1),n?Ko(t):Bg(()=>new Wr))}function oS(e,t,n,i){return ye((s,r)=>{let o;!t||typeof t=="function"?o=t:{duration:n,element:o,connector:i}=t;let a=new Map,l=v=>{a.forEach(v),v(r)},c=v=>l(y=>y.error(v)),u=0,h=!1,f=new hh(r,v=>{try{let y=e(v),C=a.get(y);if(!C){a.set(y,C=i?i():new Me);let E=p(y,C);if(r.next(E),n){let T=ve(C,()=>{C.complete(),T?.unsubscribe()},void 0,void 0,()=>a.delete(y));f.add(Fe(n(E)).subscribe(T))}}C.next(o?o(v):v)}catch(y){c(y)}},()=>l(v=>v.complete()),c,()=>a.clear(),()=>(h=!0,u===0));s.subscribe(f);function p(v,y){let C=new le(E=>{u++;let T=y.subscribe(E);return()=>{T.unsubscribe(),--u===0&&h&&f.unsubscribe()}});return C.key=v,C}})}function Bc(e){return e<=0?()=>an:ye((t,n)=>{let i=[];t.subscribe(ve(n,s=>{i.push(s),e<i.length&&i.shift()},()=>{for(let s of i)n.next(s);n.complete()},void 0,()=>{i=null}))})}function aS(e,t){let n=arguments.length>=2;return i=>i.pipe(e?Ye((s,r)=>e(s,r,i)):In,Bc(1),n?Ko(t):Bg(()=>new Wr))}function EF(e,t){let n=me(e)?e:()=>e;return me(t)?Vg(t,{connector:n}):i=>new Go(i,n)}function Gg(){return ye((e,t)=>{let n,i=!1;e.subscribe(ve(t,s=>{let r=n;n=s,i&&t.next([r,s]),i=!0}))})}function lS(e){return e?t=>Vg(e)(t):t=>EF(new Me)(t)}function Hg(e,t){return ye(SF(e,t,arguments.length>=2,!0))}function DF(e={}){let{connector:t=()=>new Me,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:s=!0}=e;return r=>{let o,a,l,c=0,u=!1,h=!1,f=()=>{a?.unsubscribe(),a=void 0},p=()=>{f(),o=l=void 0,u=h=!1},v=()=>{let y=o;p(),y?.unsubscribe()};return ye((y,C)=>{c++,!h&&!u&&f();let E=l=l??t();C.add(()=>{c--,c===0&&!h&&!u&&(a=cS(v,s))}),E.subscribe(C),!o&&c>0&&(o=new Hr({next:T=>E.next(T),error:T=>{h=!0,f(),a=cS(p,n,T),E.error(T)},complete:()=>{u=!0,f(),a=cS(p,i),E.complete()}}),Fe(y).subscribe(o))})(r)}}function cS(e,t,...n){if(t===!0){e();return}if(t===!1)return;let i=new Hr({next:()=>{i.unsubscribe(),e()}});return Fe(t(...n)).subscribe(i)}function Ug(e,t,n){let i,s=!1;return e&&typeof e=="object"?{bufferSize:i=1/0,windowTime:t=1/0,refCount:s=!1,scheduler:n}=e:i=e??1/0,DF({connector:()=>new Ur(i,t,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function Ja(...e){let t=cr(e);return ye((n,i)=>{(t?ns(e,n,t):ns(e,n)).subscribe(i)})}function ke(e,t){return ye((n,i)=>{let s=null,r=0,o=!1,a=()=>o&&!s&&i.complete();n.subscribe(ve(i,l=>{s?.unsubscribe();let c=0,u=r++;Fe(e(l,u)).subscribe(s=ve(i,h=>i.next(t?t(l,h,u,c++):h),()=>{s=null,a()}))},()=>{o=!0,a()}))})}function Wg(e,t){return me(t)?ke(()=>e,t):ke(()=>e)}function Tt(e){return ye((t,n)=>{Fe(e).subscribe(ve(n,()=>n.complete(),Ps)),!n.closed&&t.subscribe(n)})}function pt(e,t,n){let i=me(e)||t||n?{next:e,error:t,complete:n}:e;return i?ye((s,r)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;s.subscribe(ve(r,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),r.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),r.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),r.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):In}function TF(e,t){return ye((n,i)=>{let{leading:s=!0,trailing:r=!1}=t??{},o=!1,a=null,l=null,c=!1,u=()=>{l?.unsubscribe(),l=null,r&&(p(),c&&i.complete())},h=()=>{l=null,c&&i.complete()},f=v=>l=Fe(e(v)).subscribe(ve(i,u,h)),p=()=>{if(o){o=!1;let v=a;a=null,i.next(v),!c&&f(v)}};n.subscribe(ve(i,v=>{o=!0,a=v,!(l&&!l.closed)&&(s?p():f(v))},()=>{c=!0,!(r&&o&&l&&!l.closed)&&i.complete()}))})}function uS(e,t=es,n){let i=Wo(e,t);return TF(()=>i,n)}function wh(...e){let t=Ho(e);return ye((n,i)=>{let s=e.length,r=new Array(s),o=e.map(()=>!1),a=!1;for(let l=0;l<s;l++)Fe(e[l]).subscribe(ve(i,c=>{r[l]=c,!a&&!o[l]&&(o[l]=!0,(a=o.every(In))&&(o=null))},Ps));n.subscribe(ve(i,l=>{if(a){let c=[l,...r];i.next(t?t(...c):c)}}))})}var T$="https://g.co/ng/security#xss",ge=class extends Error{constructor(t,n){super(Dm(t,n)),this.code=t}};function Dm(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function kh(e){return{toString:e}.toString()}var jg="__parameters__";function R$(e){return function(...n){if(e){let i=e(...n);for(let s in i)this[s]=i[s]}}}function cx(e,t,n){return kh(()=>{let i=R$(t);function s(...r){if(this instanceof s)return i.apply(this,r),this;let o=new s(...r);return a.annotation=o,a;function a(l,c,u){let h=l.hasOwnProperty(jg)?l[jg]:Object.defineProperty(l,jg,{value:[]})[jg];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(o),l}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=e,s.annotationCls=s,s})}var jr=globalThis;function gt(e){for(let t in e)if(e[t]===gt)return t;throw Error("Could not find renamed property on target object.")}function I$(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Zn(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(Zn).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function MS(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var A$=gt({__forward_ref__:gt});function pr(e){return e.__forward_ref__=pr,e.toString=function(){return Zn(this())},e}function Jn(e){return ux(e)?e():e}function ux(e){return typeof e=="function"&&e.hasOwnProperty(A$)&&e.__forward_ref__===pr}function Y(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function vi(e){return{providers:e.providers||[],imports:e.imports||[]}}function Tm(e){return RF(e,hx)||RF(e,fx)}function dx(e){return Tm(e)!==null}function RF(e,t){return e.hasOwnProperty(t)?e[t]:null}function M$(e){let t=e&&(e[hx]||e[fx]);return t||null}function IF(e){return e&&(e.hasOwnProperty(AF)||e.hasOwnProperty(P$))?e[AF]:null}var hx=gt({\u0275prov:gt}),AF=gt({\u0275inj:gt}),fx=gt({ngInjectableDef:gt}),P$=gt({ngInjectorDef:gt}),te=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=Y({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function px(e){return e&&!!e.\u0275providers}var F$=gt({\u0275cmp:gt}),x$=gt({\u0275dir:gt}),O$=gt({\u0275pipe:gt}),N$=gt({\u0275mod:gt}),nm=gt({\u0275fac:gt}),Sh=gt({__NG_ELEMENT_ID__:gt}),MF=gt({__NG_ENV_ID__:gt});function F_(e){return typeof e=="string"?e:e==null?"":String(e)}function k$(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():F_(e)}function L$(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new ge(-200,e)}function x_(e,t){throw new ge(-201,!1)}var Be=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(Be||{}),PS;function gx(){return PS}function gi(e){let t=PS;return PS=e,t}function mx(e,t,n){let i=Tm(e);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&Be.Optional)return null;if(t!==void 0)return t;x_(e,"Injector")}var V$={},_h=V$,FS="__NG_DI_FLAG__",im="ngTempTokenPath",B$="ngTokenPath",G$=/\n/gm,H$="\u0275",PF="__source",Wc;function U$(){return Wc}function Qo(e){let t=Wc;return Wc=e,t}function W$(e,t=Be.Default){if(Wc===void 0)throw new ge(-203,!1);return Wc===null?mx(e,void 0,t):Wc.get(e,t&Be.Optional?null:void 0,t)}function Z(e,t=Be.Default){return(gx()||W$)(Jn(e),t)}function G(e,t=Be.Default){return Z(e,Rm(t))}function Rm(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function xS(e){let t=[];for(let n=0;n<e.length;n++){let i=Jn(e[n]);if(Array.isArray(i)){if(i.length===0)throw new ge(900,!1);let s,r=Be.Default;for(let o=0;o<i.length;o++){let a=i[o],l=j$(a);typeof l=="number"?l===-1?s=a.token:r|=l:s=a}t.push(Z(s,r))}else t.push(Z(i))}return t}function vx(e,t){return e[FS]=t,e.prototype[FS]=t,e}function j$(e){return e[FS]}function z$(e,t,n,i){let s=e[im];throw t[PF]&&s.unshift(t[PF]),e.message=$$(`
`+e.message,s,n,i),e[B$]=s,e[im]=null,e}function $$(e,t,n,i=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==H$?e.slice(2):e;let s=Zn(t);if(Array.isArray(t))s=t.map(Zn).join(" -> ");else if(typeof t=="object"){let r=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];r.push(o+":"+(typeof a=="string"?JSON.stringify(a):Zn(a)))}s=`{${r.join(", ")}}`}return`${n}${i?"("+i+")":""}[${s}]: ${e.replace(G$,`
  `)}`}var Le=vx(cx("Optional"),8);var Cx=vx(cx("SkipSelf"),4);function el(e,t){let n=e.hasOwnProperty(nm);return n?e[nm]:null}function q$(e,t,n){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){let s=e[i],r=t[i];if(n&&(s=n(s),r=n(r)),r!==s)return!1}return!0}function K$(e){return e.flat(Number.POSITIVE_INFINITY)}function O_(e,t){e.forEach(n=>Array.isArray(n)?O_(n,t):t(n))}function yx(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function sm(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Q$(e,t){let n=[];for(let i=0;i<e;i++)n.push(t);return n}function Y$(e,t,n,i){let s=e.length;if(s==t)e.push(n,i);else if(s===1)e.push(i,e[0]),e[0]=n;else{for(s--,e.push(e[s-1],e[s]);s>t;){let r=s-2;e[s]=e[r],s--}e[t]=n,e[t+1]=i}}function N_(e,t,n){let i=Lh(e,t);return i>=0?e[i|1]=n:(i=~i,Y$(e,i,t,n)),i}function dS(e,t){let n=Lh(e,t);if(n>=0)return e[n|1]}function Lh(e,t){return J$(e,t,1)}function J$(e,t,n){let i=0,s=e.length>>n;for(;s!==i;){let r=i+(s-i>>1),o=e[r<<n];if(t===o)return r<<n;o>t?s=r:i=r+1}return~(s<<n)}var zc={},Xn=[],tl=new te(""),wx=new te("",-1),Sx=new te(""),rm=class{get(t,n=_h){if(n===_h){let i=new Error(`NullInjectorError: No provider for ${Zn(t)}!`);throw i.name="NullInjectorError",i}return n}},_x=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(_x||{}),hr=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(hr||{}),vn=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(vn||{});function X$(e,t,n){let i=e.length;for(;;){let s=e.indexOf(t,n);if(s===-1)return s;if(s===0||e.charCodeAt(s-1)<=32){let r=t.length;if(s+r===i||e.charCodeAt(s+r)<=32)return s}n=s+1}}function OS(e,t,n){let i=0;for(;i<n.length;){let s=n[i];if(typeof s=="number"){if(s!==0)break;i++;let r=n[i++],o=n[i++],a=n[i++];e.setAttribute(t,o,a,r)}else{let r=s,o=n[++i];e3(r)?e.setProperty(t,r,o):e.setAttribute(t,r,o),i++}}return i}function Z$(e){return e===3||e===4||e===6}function e3(e){return e.charCodeAt(0)===64}function bh(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){let s=t[i];typeof s=="number"?n=s:n===0||(n===-1||n===2?FF(e,n,s,null,t[++i]):FF(e,n,s,null,null))}}return e}function FF(e,t,n,i,s){let r=0,o=e.length;if(t===-1)o=-1;else for(;r<e.length;){let a=e[r++];if(typeof a=="number"){if(a===t){o=-1;break}else if(a>t){o=r-1;break}}}for(;r<e.length;){let a=e[r];if(typeof a=="number")break;if(a===n){if(i===null){s!==null&&(e[r+1]=s);return}else if(i===e[r+1]){e[r+2]=s;return}}r++,i!==null&&r++,s!==null&&r++}o!==-1&&(e.splice(o,0,t),r=o+1),e.splice(r++,0,n),i!==null&&e.splice(r++,0,i),s!==null&&e.splice(r++,0,s)}var bx="ng-template";function t3(e,t,n,i){let s=0;if(i){for(;s<t.length&&typeof t[s]=="string";s+=2)if(t[s]==="class"&&X$(t[s+1].toLowerCase(),n,0)!==-1)return!0}else if(k_(e))return!1;if(s=t.indexOf(1,s),s>-1){let r;for(;++s<t.length&&typeof(r=t[s])=="string";)if(r.toLowerCase()===n)return!0}return!1}function k_(e){return e.type===4&&e.value!==bx}function n3(e,t,n){let i=e.type===4&&!n?bx:e.value;return t===i}function i3(e,t,n){let i=4,s=e.attrs,r=s!==null?o3(s):0,o=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!o&&!xs(i)&&!xs(l))return!1;if(o&&xs(l))continue;o=!1,i=l|i&1;continue}if(!o)if(i&4){if(i=2|i&1,l!==""&&!n3(e,l,n)||l===""&&t.length===1){if(xs(i))return!1;o=!0}}else if(i&8){if(s===null||!t3(e,s,l,n)){if(xs(i))return!1;o=!0}}else{let c=t[++a],u=s3(l,s,k_(e),n);if(u===-1){if(xs(i))return!1;o=!0;continue}if(c!==""){let h;if(u>r?h="":h=s[u+1].toLowerCase(),i&2&&c!==h){if(xs(i))return!1;o=!0}}}}return xs(i)||o}function xs(e){return(e&1)===0}function s3(e,t,n,i){if(t===null)return-1;let s=0;if(i||!n){let r=!1;for(;s<t.length;){let o=t[s];if(o===e)return s;if(o===3||o===6)r=!0;else if(o===1||o===2){let a=t[++s];for(;typeof a=="string";)a=t[++s];continue}else{if(o===4)break;if(o===0){s+=4;continue}}s+=r?1:2}return-1}else return a3(t,e)}function Ex(e,t,n=!1){for(let i=0;i<t.length;i++)if(i3(e,t[i],n))return!0;return!1}function r3(e){let t=e.attrs;if(t!=null){let n=t.indexOf(5);if(!(n&1))return t[n+1]}return null}function o3(e){for(let t=0;t<e.length;t++){let n=e[t];if(Z$(n))return t}return e.length}function a3(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let i=e[n];if(typeof i=="number")return-1;if(i===t)return n;n++}return-1}function l3(e,t){e:for(let n=0;n<t.length;n++){let i=t[n];if(e.length===i.length){for(let s=0;s<e.length;s++)if(e[s]!==i[s])continue e;return!0}}return!1}function xF(e,t){return e?":not("+t.trim()+")":t}function c3(e){let t=e[0],n=1,i=2,s="",r=!1;for(;n<e.length;){let o=e[n];if(typeof o=="string")if(i&2){let a=e[++n];s+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?s+="."+o:i&4&&(s+=" "+o);else s!==""&&!xs(o)&&(t+=xF(r,s),s=""),i=o,r=r||!xs(i);n++}return s!==""&&(t+=xF(r,s)),t}function u3(e){return e.map(c3).join(",")}function d3(e){let t=[],n=[],i=1,s=2;for(;i<e.length;){let r=e[i];if(typeof r=="string")s===2?r!==""&&t.push(r,e[++i]):s===8&&n.push(r);else{if(!xs(s))break;s=r}i++}return{attrs:t,classes:n}}function _e(e){return kh(()=>{let t=Mx(e),n=ae(B({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===_x.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||hr.Emulated,styles:e.styles||Xn,_:null,schemas:e.schemas||null,tView:null,id:""});Px(n);let i=e.dependencies;return n.directiveDefs=NF(i,!1),n.pipeDefs=NF(i,!0),n.id=p3(n),n})}function h3(e){return Jo(e)||Tx(e)}function f3(e){return e!==null}function Ci(e){return kh(()=>({type:e.type,bootstrap:e.bootstrap||Xn,declarations:e.declarations||Xn,imports:e.imports||Xn,exports:e.exports||Xn,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function OF(e,t){if(e==null)return zc;let n={};for(let i in e)if(e.hasOwnProperty(i)){let s=e[i],r,o,a=vn.None;Array.isArray(s)?(a=s[0],r=s[1],o=s[2]??r):(r=s,o=s),t?(n[r]=a!==vn.None?[i,a]:i,t[r]=o):n[r]=i}return n}function At(e){return kh(()=>{let t=Mx(e);return Px(t),t})}function Dx(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone===!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function Jo(e){return e[F$]||null}function Tx(e){return e[x$]||null}function Rx(e){return e[O$]||null}function Ix(e){let t=Jo(e)||Tx(e)||Rx(e);return t!==null?t.standalone:!1}function Ax(e,t){let n=e[N$]||null;if(!n&&t===!0)throw new Error(`Type ${Zn(e)} does not have '\u0275mod' property.`);return n}function Mx(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||zc,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||Xn,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:OF(e.inputs,t),outputs:OF(e.outputs),debugInfo:null}}function Px(e){e.features?.forEach(t=>t(e))}function NF(e,t){if(!e)return null;let n=t?Rx:h3;return()=>(typeof e=="function"?e():e).map(i=>n(i)).filter(f3)}function p3(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let s of n)t=Math.imul(31,t)+s.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function mt(e){return{\u0275providers:e}}function g3(...e){return{\u0275providers:Fx(!0,e),\u0275fromNgModule:!0}}function Fx(e,...t){let n=[],i=new Set,s,r=o=>{n.push(o)};return O_(t,o=>{let a=o;NS(a,r,[],i)&&(s||=[],s.push(a))}),s!==void 0&&xx(s,r),n}function xx(e,t){for(let n=0;n<e.length;n++){let{ngModule:i,providers:s}=e[n];L_(s,r=>{t(r,i)})}}function NS(e,t,n,i){if(e=Jn(e),!e)return!1;let s=null,r=IF(e),o=!r&&Jo(e);if(!r&&!o){let l=e.ngModule;if(r=IF(l),r)s=l;else return!1}else{if(o&&!o.standalone)return!1;s=e}let a=i.has(s);if(o){if(a)return!1;if(i.add(s),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)NS(c,t,n,i)}}else if(r){if(r.imports!=null&&!a){i.add(s);let c;try{O_(r.imports,u=>{NS(u,t,n,i)&&(c||=[],c.push(u))})}finally{}c!==void 0&&xx(c,t)}if(!a){let c=el(s)||(()=>new s);t({provide:s,useFactory:c,deps:Xn},s),t({provide:Sx,useValue:s,multi:!0},s),t({provide:tl,useValue:()=>Z(s),multi:!0},s)}let l=r.providers;if(l!=null&&!a){let c=e;L_(l,u=>{t(u,c)})}}else return!1;return s!==e&&e.providers!==void 0}function L_(e,t){for(let n of e)px(n)&&(n=n.\u0275providers),Array.isArray(n)?L_(n,t):t(n)}var m3=gt({provide:String,useValue:gt});function Ox(e){return e!==null&&typeof e=="object"&&m3 in e}function v3(e){return!!(e&&e.useExisting)}function C3(e){return!!(e&&e.useFactory)}function $c(e){return typeof e=="function"}function y3(e){return!!e.useClass}var Im=new te(""),Yg={},w3={},hS;function Am(){return hS===void 0&&(hS=new rm),hS}var ei=class{},Eh=class extends ei{get destroyed(){return this._destroyed}constructor(t,n,i,s){super(),this.parent=n,this.source=i,this.scopes=s,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,LS(t,o=>this.processProvider(o)),this.records.set(wx,Gc(void 0,this)),s.has("environment")&&this.records.set(ei,Gc(void 0,this));let r=this.records.get(Im);r!=null&&typeof r.value=="string"&&this.scopes.add(r.value),this.injectorDefTypes=new Set(this.get(Sx,Xn,Be.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=qe(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),qe(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=Qo(this),i=gi(void 0),s;try{return t()}finally{Qo(n),gi(i)}}get(t,n=_h,i=Be.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(MF))return t[MF](this);i=Rm(i);let s,r=Qo(this),o=gi(void 0);try{if(!(i&Be.SkipSelf)){let l=this.records.get(t);if(l===void 0){let c=D3(t)&&Tm(t);c&&this.injectableDefInScope(c)?l=Gc(kS(t),Yg):l=null,this.records.set(t,l)}if(l!=null)return this.hydrate(t,l)}let a=i&Be.Self?Am():this.parent;return n=i&Be.Optional&&n===_h?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[im]=a[im]||[]).unshift(Zn(t)),r)throw a;return z$(a,t,"R3InjectorError",this.source)}else throw a}finally{gi(o),Qo(r)}}resolveInjectorInitializers(){let t=qe(null),n=Qo(this),i=gi(void 0),s;try{let r=this.get(tl,Xn,Be.Self);for(let o of r)o()}finally{Qo(n),gi(i),qe(t)}}toString(){let t=[],n=this.records;for(let i of n.keys())t.push(Zn(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ge(205,!1)}processProvider(t){t=Jn(t);let n=$c(t)?t:Jn(t&&t.provide),i=_3(t);if(!$c(t)&&t.multi===!0){let s=this.records.get(n);s||(s=Gc(void 0,Yg,!0),s.factory=()=>xS(s.multi),this.records.set(n,s)),n=t,s.multi.push(t)}this.records.set(n,i)}hydrate(t,n){let i=qe(null);try{return n.value===Yg&&(n.value=w3,n.value=n.factory()),typeof n.value=="object"&&n.value&&E3(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{qe(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Jn(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function kS(e){let t=Tm(e),n=t!==null?t.factory:el(e);if(n!==null)return n;if(e instanceof te)throw new ge(204,!1);if(e instanceof Function)return S3(e);throw new ge(204,!1)}function S3(e){if(e.length>0)throw new ge(204,!1);let n=M$(e);return n!==null?()=>n.factory(e):()=>new e}function _3(e){if(Ox(e))return Gc(void 0,e.useValue);{let t=Nx(e);return Gc(t,Yg)}}function Nx(e,t,n){let i;if($c(e)){let s=Jn(e);return el(s)||kS(s)}else if(Ox(e))i=()=>Jn(e.useValue);else if(C3(e))i=()=>e.useFactory(...xS(e.deps||[]));else if(v3(e))i=()=>Z(Jn(e.useExisting));else{let s=Jn(e&&(e.useClass||e.provide));if(b3(e))i=()=>new s(...xS(e.deps));else return el(s)||kS(s)}return i}function Gc(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function b3(e){return!!e.deps}function E3(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function D3(e){return typeof e=="function"||typeof e=="object"&&e instanceof te}function LS(e,t){for(let n of e)Array.isArray(n)?LS(n,t):n&&px(n)?LS(n.\u0275providers,t):t(n)}function ta(e,t){e instanceof Eh&&e.assertNotDestroyed();let n,i=Qo(e),s=gi(void 0);try{return t()}finally{Qo(i),gi(s)}}function kx(){return gx()!==void 0||U$()!=null}function Lx(e){if(!kx())throw new ge(-203,!1)}function T3(e){return typeof e=="function"}var Ni=0,Ae=1,Re=2,Cn=3,Ns=4,Li=5,ki=6,Dh=7,Ln=8,qc=9,fr=10,St=11,Th=12,kF=13,Xc=14,mi=15,Vh=16,Hc=17,$r=18,Mm=19,Vx=20,Yo=21,fS=22,nl=23,Wt=25,Bx=1,Rh=6,qr=7,om=8,Kc=9,An=10,V_=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(V_||{});function zr(e){return Array.isArray(e)&&typeof e[Bx]=="object"}function gr(e){return Array.isArray(e)&&e[Bx]===!0}function B_(e){return(e.flags&4)!==0}function Bh(e){return e.componentOffset>-1}function Pm(e){return(e.flags&1)===1}function Xo(e){return!!e.template}function Gx(e){return(e[Re]&512)!==0}var VS=class{constructor(t,n,i){this.previousValue=t,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function Hx(e,t,n,i){t!==null?t.applyValueToInputSignal(t,i):e[n]=i}function kt(){return Ux}function Ux(e){return e.type.prototype.ngOnChanges&&(e.setInput=I3),R3}kt.ngInherit=!0;function R3(){let e=jx(this),t=e?.current;if(t){let n=e.previous;if(n===zc)e.previous=t;else for(let i in t)n[i]=t[i];e.current=null,this.ngOnChanges(t)}}function I3(e,t,n,i,s){let r=this.declaredInputs[i],o=jx(e)||A3(e,{previous:zc,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[r];a[r]=new VS(c&&c.currentValue,n,l===zc),Hx(e,t,s,n)}var Wx="__ngSimpleChanges__";function jx(e){return e[Wx]||null}function A3(e,t){return e[Wx]=t}var LF=null;var ur=function(e,t,n){LF?.(e,t,n)},zx="svg",M3="math",P3=!1;function F3(){return P3}function ks(e){for(;Array.isArray(e);)e=e[Ni];return e}function $x(e,t){return ks(t[e])}function Vi(e,t){return ks(t[e.index])}function G_(e,t){return e.data[t]}function qx(e,t){return e[t]}function na(e,t){let n=t[e];return zr(n)?n:n[Ni]}function x3(e){return(e[Re]&4)===4}function H_(e){return(e[Re]&128)===128}function O3(e){return gr(e[Cn])}function Qc(e,t){return t==null?null:e[t]}function Kx(e){e[Hc]=0}function N3(e){e[Re]&1024||(e[Re]|=1024,H_(e)&&Ih(e))}function k3(e,t){for(;e>0;)t=t[Xc],e--;return t}function U_(e){return!!(e[Re]&9216||e[nl]?.dirty)}function BS(e){e[fr].changeDetectionScheduler?.notify(1),U_(e)?Ih(e):e[Re]&64&&(F3()?(e[Re]|=1024,Ih(e)):e[fr].changeDetectionScheduler?.notify())}function Ih(e){e[fr].changeDetectionScheduler?.notify();let t=Ah(e);for(;t!==null&&!(t[Re]&8192||(t[Re]|=8192,!H_(t)));)t=Ah(t)}function Qx(e,t){if((e[Re]&256)===256)throw new ge(911,!1);e[Yo]===null&&(e[Yo]=[]),e[Yo].push(t)}function L3(e,t){if(e[Yo]===null)return;let n=e[Yo].indexOf(t);n!==-1&&e[Yo].splice(n,1)}function Ah(e){let t=e[Cn];return gr(t)?t[Cn]:t}var Oe={lFrame:i1(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function V3(){return Oe.lFrame.elementDepthCount}function B3(){Oe.lFrame.elementDepthCount++}function G3(){Oe.lFrame.elementDepthCount--}function Yx(){return Oe.bindingsEnabled}function Zc(){return Oe.skipHydrationRootTNode!==null}function H3(e){return Oe.skipHydrationRootTNode===e}function U3(e){Oe.skipHydrationRootTNode=e}function W3(){Oe.skipHydrationRootTNode=null}function He(){return Oe.lFrame.lView}function Qt(){return Oe.lFrame.tView}function De(e){return Oe.lFrame.contextLView=e,e[Ln]}function Te(e){return Oe.lFrame.contextLView=null,e}function yi(){let e=Jx();for(;e!==null&&e.type===64;)e=e.parent;return e}function Jx(){return Oe.lFrame.currentTNode}function j3(){let e=Oe.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function ll(e,t){let n=Oe.lFrame;n.currentTNode=e,n.isParent=t}function W_(){return Oe.lFrame.isParent}function j_(){Oe.lFrame.isParent=!1}function z3(){return Oe.lFrame.contextLView}function Xx(){let e=Oe.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function $3(e){return Oe.lFrame.bindingIndex=e}function eu(){return Oe.lFrame.bindingIndex++}function Zx(e){let t=Oe.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function q3(){return Oe.lFrame.inI18n}function K3(e,t){let n=Oe.lFrame;n.bindingIndex=n.bindingRootIndex=e,GS(t)}function Q3(){return Oe.lFrame.currentDirectiveIndex}function GS(e){Oe.lFrame.currentDirectiveIndex=e}function Y3(e){let t=Oe.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function e1(){return Oe.lFrame.currentQueryIndex}function z_(e){Oe.lFrame.currentQueryIndex=e}function J3(e){let t=e[Ae];return t.type===2?t.declTNode:t.type===1?e[Li]:null}function t1(e,t,n){if(n&Be.SkipSelf){let s=t,r=e;for(;s=s.parent,s===null&&!(n&Be.Host);)if(s=J3(r),s===null||(r=r[Xc],s.type&10))break;if(s===null)return!1;t=s,e=r}let i=Oe.lFrame=n1();return i.currentTNode=t,i.lView=e,!0}function $_(e){let t=n1(),n=e[Ae];Oe.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function n1(){let e=Oe.lFrame,t=e===null?null:e.child;return t===null?i1(e):t}function i1(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function s1(){let e=Oe.lFrame;return Oe.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var r1=s1;function q_(){let e=s1();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function X3(e){return(Oe.lFrame.contextLView=k3(e,Oe.lFrame.contextLView))[Ln]}function ia(){return Oe.lFrame.selectedIndex}function il(e){Oe.lFrame.selectedIndex=e}function K_(){let e=Oe.lFrame;return G_(e.tView,e.selectedIndex)}function Jr(){Oe.lFrame.currentNamespace=zx}function o1(){return Oe.lFrame.currentNamespace}var a1=!0;function Fm(){return a1}function mr(e){a1=e}function Z3(e,t,n){let{ngOnChanges:i,ngOnInit:s,ngDoCheck:r}=t.type.prototype;if(i){let o=Ux(t);(n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o)}s&&(n.preOrderHooks??=[]).push(0-e,s),r&&((n.preOrderHooks??=[]).push(e,r),(n.preOrderCheckHooks??=[]).push(e,r))}function xm(e,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){let r=e.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=r;o&&(e.contentHooks??=[]).push(-n,o),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),l&&(e.viewHooks??=[]).push(-n,l),c&&((e.viewHooks??=[]).push(n,c),(e.viewCheckHooks??=[]).push(n,c)),u!=null&&(e.destroyHooks??=[]).push(n,u)}}function Jg(e,t,n){l1(e,t,3,n)}function Xg(e,t,n,i){(e[Re]&3)===n&&l1(e,t,n,i)}function pS(e,t){let n=e[Re];(n&3)===t&&(n&=16383,n+=1,e[Re]=n)}function l1(e,t,n,i){let s=i!==void 0?e[Hc]&65535:0,r=i??-1,o=t.length-1,a=0;for(let l=s;l<o;l++)if(typeof t[l+1]=="number"){if(a=t[l],i!=null&&a>=i)break}else t[l]<0&&(e[Hc]+=65536),(a<r||r==-1)&&(e4(e,n,t,l),e[Hc]=(e[Hc]&4294901760)+l+2),l++}function VF(e,t){ur(4,e,t);let n=qe(null);try{t.call(e)}finally{qe(n),ur(5,e,t)}}function e4(e,t,n,i){let s=n[i]<0,r=n[i+1],o=s?-n[i]:n[i],a=e[o];s?e[Re]>>14<e[Hc]>>16&&(e[Re]&3)===t&&(e[Re]+=16384,VF(a,r)):VF(a,r)}var jc=-1,sl=class{constructor(t,n,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function t4(e){return e instanceof sl}function n4(e){return(e.flags&8)!==0}function i4(e){return(e.flags&16)!==0}function c1(e){return e!==jc}function am(e){return e&32767}function s4(e){return e>>16}function lm(e,t){let n=s4(e),i=t;for(;n>0;)i=i[Xc],n--;return i}var HS=!0;function cm(e){let t=HS;return HS=e,t}var r4=256,u1=r4-1,d1=5,o4=0,dr={};function a4(e,t,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Sh)&&(i=n[Sh]),i==null&&(i=n[Sh]=o4++);let s=i&u1,r=1<<s;t.data[e+(s>>d1)]|=r}function um(e,t){let n=h1(e,t);if(n!==-1)return n;let i=t[Ae];i.firstCreatePass&&(e.injectorIndex=t.length,gS(i.data,e),gS(t,null),gS(i.blueprint,null));let s=Q_(e,t),r=e.injectorIndex;if(c1(s)){let o=am(s),a=lm(s,t),l=a[Ae].data;for(let c=0;c<8;c++)t[r+c]=a[o+c]|l[o+c]}return t[r+8]=s,r}function gS(e,t){e.push(0,0,0,0,0,0,0,0,t)}function h1(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function Q_(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,i=null,s=t;for(;s!==null;){if(i=v1(s),i===null)return jc;if(n++,s=s[Xc],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return jc}function US(e,t,n){a4(e,t,n)}function f1(e,t,n){if(n&Be.Optional||e!==void 0)return e;x_(t,"NodeInjector")}function p1(e,t,n,i){if(n&Be.Optional&&i===void 0&&(i=null),!(n&(Be.Self|Be.Host))){let s=e[qc],r=gi(void 0);try{return s?s.get(t,i,n&Be.Optional):mx(t,i,n&Be.Optional)}finally{gi(r)}}return f1(i,t,n)}function g1(e,t,n,i=Be.Default,s){if(e!==null){if(t[Re]&2048&&!(i&Be.Self)){let o=d4(e,t,n,i,dr);if(o!==dr)return o}let r=m1(e,t,n,i,dr);if(r!==dr)return r}return p1(t,n,i,s)}function m1(e,t,n,i,s){let r=c4(n);if(typeof r=="function"){if(!t1(t,e,i))return i&Be.Host?f1(s,n,i):p1(t,n,i,s);try{let o;if(o=r(i),o==null&&!(i&Be.Optional))x_(n);else return o}finally{r1()}}else if(typeof r=="number"){let o=null,a=h1(e,t),l=jc,c=i&Be.Host?t[mi][Li]:null;for((a===-1||i&Be.SkipSelf)&&(l=a===-1?Q_(e,t):t[a+8],l===jc||!GF(i,!1)?a=-1:(o=t[Ae],a=am(l),t=lm(l,t)));a!==-1;){let u=t[Ae];if(BF(r,a,u.data)){let h=l4(a,t,n,o,i,c);if(h!==dr)return h}l=t[a+8],l!==jc&&GF(i,t[Ae].data[a+8]===c)&&BF(r,a,t)?(o=u,a=am(l),t=lm(l,t)):a=-1}}return s}function l4(e,t,n,i,s,r){let o=t[Ae],a=o.data[e+8],l=i==null?Bh(a)&&HS:i!=o&&(a.type&3)!==0,c=s&Be.Host&&r===a,u=Zg(a,o,n,l,c);return u!==null?rl(t,o,u,a):dr}function Zg(e,t,n,i,s){let r=e.providerIndexes,o=t.data,a=r&1048575,l=e.directiveStart,c=e.directiveEnd,u=r>>20,h=i?a:a+u,f=s?a+u:c;for(let p=h;p<f;p++){let v=o[p];if(p<l&&n===v||p>=l&&v.type===n)return p}if(s){let p=o[l];if(p&&Xo(p)&&p.type===n)return l}return null}function rl(e,t,n,i){let s=e[n],r=t.data;if(t4(s)){let o=s;o.resolving&&L$(k$(r[n]));let a=cm(o.canSeeViewProviders);o.resolving=!0;let l,c=o.injectImpl?gi(o.injectImpl):null,u=t1(e,i,Be.Default);try{s=e[n]=o.factory(void 0,r,e,i),t.firstCreatePass&&n>=i.directiveStart&&Z3(n,r[n],t)}finally{c!==null&&gi(c),cm(a),o.resolving=!1,r1()}}return s}function c4(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Sh)?e[Sh]:void 0;return typeof t=="number"?t>=0?t&u1:u4:t}function BF(e,t,n){let i=1<<e;return!!(n[t+(e>>d1)]&i)}function GF(e,t){return!(e&Be.Self)&&!(e&Be.Host&&t)}var Za=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,i){return g1(this._tNode,this._lView,t,Rm(i),n)}};function u4(){return new Za(yi(),He())}function is(e){return kh(()=>{let t=e.prototype.constructor,n=t[nm]||WS(t),i=Object.prototype,s=Object.getPrototypeOf(e.prototype).constructor;for(;s&&s!==i;){let r=s[nm]||WS(s);if(r&&r!==n)return r;s=Object.getPrototypeOf(s)}return r=>new r})}function WS(e){return ux(e)?()=>{let t=WS(Jn(e));return t&&t()}:el(e)}function d4(e,t,n,i,s){let r=e,o=t;for(;r!==null&&o!==null&&o[Re]&2048&&!(o[Re]&512);){let a=m1(r,o,n,i|Be.Self,dr);if(a!==dr)return a;let l=r.parent;if(!l){let c=o[Vx];if(c){let u=c.get(n,dr,i);if(u!==dr)return u}l=v1(o),o=o[Xc]}r=l}return s}function v1(e){let t=e[Ae],n=t.type;return n===2?t.declTNode:n===1?e[Li]:null}function HF(e,t=null,n=null,i){let s=C1(e,t,n,i);return s.resolveInjectorInitializers(),s}function C1(e,t=null,n=null,i,s=new Set){let r=[n||Xn,g3(e)];return i=i||(typeof e=="object"?void 0:Zn(e)),new Eh(r,t||Am(),i||null,s)}var Ge=(()=>{let t=class t{static create(i,s){if(Array.isArray(i))return HF({name:""},s,i,"");{let r=i.name??"";return HF({name:r},i.parent,i.providers,r)}}};t.THROW_IF_NOT_FOUND=_h,t.NULL=new rm,t.\u0275prov=Y({token:t,providedIn:"any",factory:()=>Z(wx)}),t.__NG_ELEMENT_ID__=-1;let e=t;return e})();var h4="ngOriginalError";function mS(e){return e[h4]}var Kr=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&mS(t);for(;n&&mS(n);)n=mS(n);return n||null}},y1=new te("",{providedIn:"root",factory:()=>G(Kr).handleError.bind(void 0)}),tu=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=f4,t.__NG_ENV_ID__=i=>i;let e=t;return e})(),jS=class extends tu{constructor(t){super(),this._lView=t}onDestroy(t){return Qx(this._lView,t),()=>L3(this._lView,t)}};function f4(){return new jS(He())}function p4(){return nu(yi(),He())}function nu(e,t){return new Lt(Vi(e,t))}var Lt=(()=>{let t=class t{constructor(i){this.nativeElement=i}};t.__NG_ELEMENT_ID__=p4;let e=t;return e})();function g4(e){return e instanceof Lt?e.nativeElement:e}var zS=class extends Me{constructor(t=!1){super(),this.destroyRef=void 0,this.__isAsync=t,kx()&&(this.destroyRef=G(tu,{optional:!0})??void 0)}emit(t){let n=qe(null);try{super.next(t)}finally{qe(n)}}subscribe(t,n,i){let s=t,r=n||(()=>null),o=i;if(t&&typeof t=="object"){let l=t;s=l.next?.bind(l),r=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(r=vS(r),s&&(s=vS(s)),o&&(o=vS(o)));let a=super.subscribe({next:s,error:r,complete:o});return t instanceof It&&t.add(a),a}};function vS(e){return t=>{setTimeout(e,void 0,t)}}var W=zS;function m4(){return this._results[Symbol.iterator]()}var $S=class e{get changes(){return this._changes??=new W}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=m4)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let i=K$(t);(this._changesDetected=!q$(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},v4="ngSkipHydration",C4="ngskiphydration";function w1(e){let t=e.mergedAttrs;if(t===null)return!1;for(let n=0;n<t.length;n+=2){let i=t[n];if(typeof i=="number")return!1;if(typeof i=="string"&&i.toLowerCase()===C4)return!0}return!1}function S1(e){return e.hasAttribute(v4)}function dm(e){return(e.flags&128)===128}function y4(e){if(dm(e))return!0;let t=e.parent;for(;t;){if(dm(e)||w1(t))return!0;t=t.parent}return!1}var _1=new Map,w4=0;function S4(){return w4++}function _4(e){_1.set(e[Mm],e)}function b4(e){_1.delete(e[Mm])}var UF="__ngContext__";function Zo(e,t){zr(t)?(e[UF]=t[Mm],_4(t)):e[UF]=t}function b1(e){return D1(e[Th])}function E1(e){return D1(e[Ns])}function D1(e){for(;e!==null&&!gr(e);)e=e[Ns];return e}var qS;function T1(e){qS=e}function Om(){if(qS!==void 0)return qS;if(typeof document<"u")return document;throw new ge(210,!1)}var Nm=new te("",{providedIn:"root",factory:()=>E4}),E4="ng",Y_=new te(""),jt=new te("",{providedIn:"platform",factory:()=>"unknown"});var J_=new te("",{providedIn:"root",factory:()=>Om().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function D4(){let e=new cl;return G(jt)==="browser"&&(e.store=T4(Om(),G(Nm))),e}var cl=(()=>{let t=class t{constructor(){this.store={},this.onSerializeCallbacks={}}get(i,s){return this.store[i]!==void 0?this.store[i]:s}set(i,s){this.store[i]=s}remove(i){delete this.store[i]}hasKey(i){return this.store.hasOwnProperty(i)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(i,s){this.onSerializeCallbacks[i]=s}toJson(){for(let i in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(i))try{this.store[i]=this.onSerializeCallbacks[i]()}catch(s){console.warn("Exception in onSerialize callback: ",s)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}};t.\u0275prov=Y({token:t,providedIn:"root",factory:D4});let e=t;return e})();function T4(e,t){let n=e.getElementById(t+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(i){console.warn("Exception while restoring TransferState for app "+t,i)}return{}}var R1="h",I1="b",KS=function(e){return e.FirstChild="f",e.NextSibling="n",e}(KS||{}),R4="e",I4="t",X_="c",A1="x",hm="r",A4="i",M4="n",P4="d",F4="__nghData__",M1=F4,CS="ngh",x4="nghm",P1=()=>null;function O4(e,t,n=!1){let i=e.getAttribute(CS);if(i==null)return null;let[s,r]=i.split("|");if(i=n?r:s,!i)return null;let o=r?`|${r}`:"",a=n?s:o,l={};if(i!==""){let u=t.get(cl,null,{optional:!0});u!==null&&(l=u.get(M1,[])[Number(i)])}let c={data:l,firstChild:e.firstChild??null};return n&&(c.firstChild=e,km(c,0,e.nextSibling)),a?e.setAttribute(CS,a):e.removeAttribute(CS),c}function N4(){P1=O4}function Z_(e,t,n=!1){return P1(e,t,n)}function k4(e){let t=e._lView;return t[Ae].type===2?null:(Gx(t)&&(t=t[Wt]),t)}function L4(e){return e.textContent?.replace(/\s/gm,"")}function V4(e){let t=Om(),n=t.createNodeIterator(e,NodeFilter.SHOW_COMMENT,{acceptNode(r){let o=L4(r);return o==="ngetn"||o==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),i,s=[];for(;i=n.nextNode();)s.push(i);for(let r of s)r.textContent==="ngetn"?r.replaceWith(t.createTextNode("")):r.remove()}function km(e,t,n){e.segmentHeads??={},e.segmentHeads[t]=n}function QS(e,t){return e.segmentHeads?.[t]??null}function B4(e,t){let n=e.data,i=n[R4]?.[t]??null;return i===null&&n[X_]?.[t]&&(i=eb(e,t)),i}function F1(e,t){return e.data[X_]?.[t]??null}function eb(e,t){let n=F1(e,t)??[],i=0;for(let s of n)i+=s[hm]*(s[A1]??1);return i}function Lm(e,t){if(typeof e.disconnectedNodes>"u"){let n=e.data[P4];e.disconnectedNodes=n?new Set(n):null}return!!e.disconnectedNodes?.has(t)}var zg=new te(""),x1=!1,O1=new te("",{providedIn:"root",factory:()=>x1}),G4=new te("");var YS=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${T$})`}};function Vm(e){return e instanceof YS?e.changingThisBreaksApplicationSecurity:e}var H4=/^>|^->|<!--|-->|--!>|<!-$/g,U4=/(<|>)/g,W4="\u200B$1\u200B";function j4(e){return e.replace(H4,t=>t.replace(U4,W4))}function z4(e){return e.ownerDocument.body}function N1(e){return e instanceof Function?e():e}function $g(e){return(e??G(Ge)).get(jt)==="browser"}var Qr=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Qr||{}),$4;function tb(e,t){return $4(e,t)}function Uc(e,t,n,i,s){if(i!=null){let r,o=!1;gr(i)?r=i:zr(i)&&(o=!0,i=i[Ni]);let a=ks(i);e===0&&n!==null?s==null?B1(t,n,a):fm(t,n,a,s||null,!0):e===1&&n!==null?fm(t,n,a,s||null,!0):e===2?rb(t,a,o):e===3&&t.destroyNode(a),r!=null&&aq(t,e,r,n,s)}}function nb(e,t){return e.createText(t)}function q4(e,t,n){e.setValue(t,n)}function ib(e,t){return e.createComment(j4(t))}function Bm(e,t,n){return e.createElement(t,n)}function K4(e,t){k1(e,t),t[Ni]=null,t[Li]=null}function Q4(e,t,n,i,s,r){i[Ni]=s,i[Li]=t,Um(e,i,n,1,s,r)}function k1(e,t){t[fr].changeDetectionScheduler?.notify(1),Um(e,t,t[St],2,null,null)}function Y4(e){let t=e[Th];if(!t)return yS(e[Ae],e);for(;t;){let n=null;if(zr(t))n=t[Th];else{let i=t[An];i&&(n=i)}if(!n){for(;t&&!t[Ns]&&t!==e;)zr(t)&&yS(t[Ae],t),t=t[Cn];t===null&&(t=e),zr(t)&&yS(t[Ae],t),n=t&&t[Ns]}t=n}}function J4(e,t,n,i){let s=An+i,r=n.length;i>0&&(n[s-1][Ns]=t),i<r-An?(t[Ns]=n[s],yx(n,An+i,t)):(n.push(t),t[Ns]=null),t[Cn]=n;let o=t[Vh];o!==null&&n!==o&&X4(o,t);let a=t[$r];a!==null&&a.insertView(e),BS(t),t[Re]|=128}function X4(e,t){let n=e[Kc],s=t[Cn][Cn][mi];t[mi]!==s&&(e[Re]|=V_.HasTransplantedViews),n===null?e[Kc]=[t]:n.push(t)}function L1(e,t){let n=e[Kc],i=n.indexOf(t);n.splice(i,1)}function Mh(e,t){if(e.length<=An)return;let n=An+t,i=e[n];if(i){let s=i[Vh];s!==null&&s!==e&&L1(s,i),t>0&&(e[n-1][Ns]=i[Ns]);let r=sm(e,An+t);K4(i[Ae],i);let o=r[$r];o!==null&&o.detachView(r[Ae]),i[Cn]=null,i[Ns]=null,i[Re]&=-129}return i}function Gm(e,t){if(!(t[Re]&256)){let n=t[St];n.destroyNode&&Um(e,t,n,3,null,null),Y4(t)}}function yS(e,t){if(t[Re]&256)return;let n=qe(null);try{t[Re]&=-129,t[Re]|=256,t[nl]&&$P(t[nl]),eq(e,t),Z4(e,t),t[Ae].type===1&&t[St].destroy();let i=t[Vh];if(i!==null&&gr(t[Cn])){i!==t[Cn]&&L1(i,t);let s=t[$r];s!==null&&s.detachView(e)}b4(t)}finally{qe(n)}}function Z4(e,t){let n=e.cleanup,i=t[Dh];if(n!==null)for(let r=0;r<n.length-1;r+=2)if(typeof n[r]=="string"){let o=n[r+3];o>=0?i[o]():i[-o].unsubscribe(),r+=2}else{let o=i[n[r+1]];n[r].call(o)}i!==null&&(t[Dh]=null);let s=t[Yo];if(s!==null){t[Yo]=null;for(let r=0;r<s.length;r++){let o=s[r];o()}}}function eq(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let s=t[n[i]];if(!(s instanceof sl)){let r=n[i+1];if(Array.isArray(r))for(let o=0;o<r.length;o+=2){let a=s[r[o]],l=r[o+1];ur(4,a,l);try{l.call(a)}finally{ur(5,a,l)}}else{ur(4,s,r);try{r.call(s)}finally{ur(5,s,r)}}}}}function V1(e,t,n){return tq(e,t.parent,n)}function tq(e,t,n){let i=t;for(;i!==null&&i.type&40;)t=i,i=t.parent;if(i===null)return n[Ni];{let{componentOffset:s}=i;if(s>-1){let{encapsulation:r}=e.data[i.directiveStart+s];if(r===hr.None||r===hr.Emulated)return null}return Vi(i,n)}}function fm(e,t,n,i,s){e.insertBefore(t,n,i,s)}function B1(e,t,n){e.appendChild(t,n)}function WF(e,t,n,i,s){i!==null?fm(e,t,n,i,s):B1(e,t,n)}function nq(e,t,n,i){e.removeChild(t,n,i)}function sb(e,t){return e.parentNode(t)}function iq(e,t){return e.nextSibling(t)}function G1(e,t,n){return rq(e,t,n)}function sq(e,t,n){return e.type&40?Vi(e,n):null}var rq=sq,jF;function Hm(e,t,n,i){let s=V1(e,i,t),r=t[St],o=i.parent||t[Li],a=G1(o,i,t);if(s!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)WF(r,s,n[l],a,!1);else WF(r,s,n,a,!1);jF!==void 0&&jF(r,i,t,n,s)}function em(e,t){if(t!==null){let n=t.type;if(n&3)return Vi(t,e);if(n&4)return JS(-1,e[t.index]);if(n&8){let i=t.child;if(i!==null)return em(e,i);{let s=e[t.index];return gr(s)?JS(-1,s):ks(s)}}else{if(n&32)return tb(t,e)()||ks(e[t.index]);{let i=H1(e,t);if(i!==null){if(Array.isArray(i))return i[0];let s=Ah(e[mi]);return em(s,i)}else return em(e,t.next)}}}return null}function H1(e,t){if(t!==null){let i=e[mi][Li],s=t.projection;return i.projection[s]}return null}function JS(e,t){let n=An+e+1;if(n<t.length){let i=t[n],s=i[Ae].firstChild;if(s!==null)return em(i,s)}return t[qr]}function rb(e,t,n){let i=sb(e,t);i&&nq(e,i,t,n)}function U1(e){e.textContent=""}function ob(e,t,n,i,s,r,o){for(;n!=null;){let a=i[n.index],l=n.type;if(o&&t===0&&(a&&Zo(ks(a),i),n.flags|=2),(n.flags&32)!==32)if(l&8)ob(e,t,n.child,i,s,r,!1),Uc(t,e,s,a,r);else if(l&32){let c=tb(n,i),u;for(;u=c();)Uc(t,e,s,u,r);Uc(t,e,s,a,r)}else l&16?W1(e,t,i,n,s,r):Uc(t,e,s,a,r);n=o?n.projectionNext:n.next}}function Um(e,t,n,i,s,r){ob(n,i,e.firstChild,t,s,r,!1)}function oq(e,t,n){let i=t[St],s=V1(e,n,t),r=n.parent||t[Li],o=G1(r,n,t);W1(i,0,t,n,s,o)}function W1(e,t,n,i,s,r){let o=n[mi],l=o[Li].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];Uc(t,e,s,u,r)}else{let c=l,u=o[Cn];dm(i)&&(c.flags|=128),ob(e,t,c,u,s,r,!0)}}function aq(e,t,n,i,s){let r=n[qr],o=ks(n);r!==o&&Uc(t,e,i,r,s);for(let a=An;a<n.length;a++){let l=n[a];Um(l[Ae],l,e,t,i,r)}}function lq(e,t,n,i,s){if(t)s?e.addClass(n,i):e.removeClass(n,i);else{let r=i.indexOf("-")===-1?void 0:Qr.DashCase;s==null?e.removeStyle(n,i,r):(typeof s=="string"&&s.endsWith("!important")&&(s=s.slice(0,-10),r|=Qr.Important),e.setStyle(n,i,s,r))}}function cq(e,t,n){e.setAttribute(t,"style",n)}function j1(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function z1(e,t,n){let{mergedAttrs:i,classes:s,styles:r}=n;i!==null&&OS(e,t,i),s!==null&&j1(e,t,s),r!==null&&cq(e,t,r)}var Xr={};function K(e=1){$1(Qt(),He(),ia()+e,!1)}function $1(e,t,n,i){if(!i)if((t[Re]&3)===3){let r=e.preOrderCheckHooks;r!==null&&Jg(t,r,n)}else{let r=e.preOrderHooks;r!==null&&Xg(t,r,0,n)}il(n)}function Q(e,t=Be.Default){let n=He();if(n===null)return Z(e,t);let i=yi();return g1(i,n,Jn(e),t)}function q1(e,t,n,i,s,r){let o=qe(null);try{let a=null;s&vn.SignalBased&&(a=t[i][Ic]),a!==null&&a.transformFn!==void 0&&(r=a.transformFn(r)),s&vn.HasDecoratorInputTransform&&(r=e.inputTransforms[i].call(t,r)),e.setInput!==null?e.setInput(t,a,r,n,i):Hx(t,a,i,r)}finally{qe(o)}}function uq(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let s=n[i];if(s<0)il(~s);else{let r=s,o=n[++i],a=n[++i];K3(o,r);let l=t[r];a(2,l)}}}finally{il(-1)}}function Wm(e,t,n,i,s,r,o,a,l,c,u){let h=t.blueprint.slice();return h[Ni]=s,h[Re]=i|4|128|8|64,(c!==null||e&&e[Re]&2048)&&(h[Re]|=2048),Kx(h),h[Cn]=h[Xc]=e,h[Ln]=n,h[fr]=o||e&&e[fr],h[St]=a||e&&e[St],h[qc]=l||e&&e[qc]||null,h[Li]=r,h[Mm]=S4(),h[ki]=u,h[Vx]=c,h[mi]=t.type==2?e[mi]:h,h}function iu(e,t,n,i,s){let r=e.data[t];if(r===null)r=dq(e,t,n,i,s),q3()&&(r.flags|=32);else if(r.type&64){r.type=n,r.value=i,r.attrs=s;let o=j3();r.injectorIndex=o===null?-1:o.injectorIndex}return ll(r,!0),r}function dq(e,t,n,i,s){let r=Jx(),o=W_(),a=o?r:r&&r.parent,l=e.data[t]=Cq(e,a,n,t,i,s);return e.firstChild===null&&(e.firstChild=l),r!==null&&(o?r.child==null&&l.parent!==null&&(r.child=l):r.next===null&&(r.next=l,l.prev=r)),l}function K1(e,t,n,i){if(n===0)return-1;let s=t.length;for(let r=0;r<n;r++)t.push(i),e.blueprint.push(i),e.data.push(null);return s}function Q1(e,t,n,i,s){let r=ia(),o=i&2;try{il(-1),o&&t.length>Wt&&$1(e,t,Wt,!1),ur(o?2:0,s),n(i,s)}finally{il(r),ur(o?3:1,s)}}function ab(e,t,n){if(B_(t)){let i=qe(null);try{let s=t.directiveStart,r=t.directiveEnd;for(let o=s;o<r;o++){let a=e.data[o];if(a.contentQueries){let l=n[o];a.contentQueries(1,l,o)}}}finally{qe(i)}}}function lb(e,t,n){Yx()&&(Eq(e,t,n,Vi(n,t)),(n.flags&64)===64&&eO(e,t,n))}function cb(e,t,n=Vi){let i=t.localNames;if(i!==null){let s=t.index+1;for(let r=0;r<i.length;r+=2){let o=i[r+1],a=o===-1?n(t,e):e[o];e[s++]=a}}}function Y1(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=ub(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function ub(e,t,n,i,s,r,o,a,l,c,u){let h=Wt+i,f=h+s,p=hq(h,f),v=typeof c=="function"?c():c;return p[Ae]={type:e,blueprint:p,template:n,queries:null,viewQuery:a,declTNode:t,data:p.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof r=="function"?r():r,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:v,incompleteFirstPass:!1,ssrId:u}}function hq(e,t){let n=[];for(let i=0;i<t;i++)n.push(i<e?null:Xr);return n}function fq(e,t,n,i){let r=i.get(O1,x1)||n===hr.ShadowDom,o=e.selectRootElement(t,r);return pq(o),o}function pq(e){J1(e)}var J1=()=>null;function gq(e){S1(e)?U1(e):V4(e)}function mq(){J1=gq}function vq(e,t,n,i){let s=iO(t);s.push(n),e.firstCreatePass&&sO(e).push(i,s.length-1)}function Cq(e,t,n,i,s,r){let o=t?t.injectorIndex:-1,a=0;return Zc()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:s,attrs:r,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function zF(e,t,n,i,s){for(let r in t){if(!t.hasOwnProperty(r))continue;let o=t[r];if(o===void 0)continue;i??={};let a,l=vn.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let c=r;if(s!==null){if(!s.hasOwnProperty(r))continue;c=s[r]}e===0?$F(i,n,c,a,l):$F(i,n,c,a)}return i}function $F(e,t,n,i,s){let r;e.hasOwnProperty(n)?(r=e[n]).push(t,i):r=e[n]=[t,i],s!==void 0&&r.push(s)}function yq(e,t,n){let i=t.directiveStart,s=t.directiveEnd,r=e.data,o=t.attrs,a=[],l=null,c=null;for(let u=i;u<s;u++){let h=r[u],f=n?n.get(h):null,p=f?f.inputs:null,v=f?f.outputs:null;l=zF(0,h.inputs,u,l,p),c=zF(1,h.outputs,u,c,v);let y=l!==null&&o!==null&&!k_(t)?Nq(l,u,o):null;a.push(y)}l!==null&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}function wq(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function X1(e,t,n,i,s,r,o,a){let l=Vi(t,n),c=t.inputs,u;!a&&c!=null&&(u=c[i])?(hb(e,n,u,i,s),Bh(t)&&Sq(n,t.index)):t.type&3?(i=wq(i),s=o!=null?o(s,t.value||"",i):s,r.setProperty(l,i,s)):t.type&12}function Sq(e,t){let n=na(t,e);n[Re]&16||(n[Re]|=64)}function db(e,t,n,i){if(Yx()){let s=i===null?null:{"":-1},r=Tq(e,n),o,a;r===null?o=a=null:[o,a]=r,o!==null&&Z1(e,t,n,o,s,a),s&&Rq(n,i,s)}n.mergedAttrs=bh(n.mergedAttrs,n.attrs)}function Z1(e,t,n,i,s,r){for(let c=0;c<i.length;c++)US(um(n,t),e,i[c].type);Aq(n,e.data.length,i.length);for(let c=0;c<i.length;c++){let u=i[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=K1(e,t,i.length,null);for(let c=0;c<i.length;c++){let u=i[c];n.mergedAttrs=bh(n.mergedAttrs,u.hostAttrs),Mq(e,n,t,l,u),Iq(l,u,s),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let h=u.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}yq(e,n,r)}function _q(e,t,n,i,s){let r=s.hostBindings;if(r){let o=e.hostBindingOpCodes;o===null&&(o=e.hostBindingOpCodes=[]);let a=~t.index;bq(o)!=a&&o.push(a),o.push(n,i,r)}}function bq(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function Eq(e,t,n,i){let s=n.directiveStart,r=n.directiveEnd;Bh(n)&&Pq(t,n,e.data[s+n.componentOffset]),e.firstCreatePass||um(n,t),Zo(i,t);let o=n.initialInputs;for(let a=s;a<r;a++){let l=e.data[a],c=rl(t,e,a,n);if(Zo(c,t),o!==null&&Oq(t,a-s,c,l,n,o),Xo(l)){let u=na(n.index,t);u[Ln]=rl(t,e,a,n)}}}function eO(e,t,n){let i=n.directiveStart,s=n.directiveEnd,r=n.index,o=Q3();try{il(r);for(let a=i;a<s;a++){let l=e.data[a],c=t[a];GS(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&Dq(l,c)}}finally{il(-1),GS(o)}}function Dq(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function Tq(e,t){let n=e.directiveRegistry,i=null,s=null;if(n)for(let r=0;r<n.length;r++){let o=n[r];if(Ex(t,o.selectors,!1))if(i||(i=[]),Xo(o))if(o.findHostDirectiveDefs!==null){let a=[];s=s||new Map,o.findHostDirectiveDefs(o,a,s),i.unshift(...a,o);let l=a.length;XS(e,t,l)}else i.unshift(o),XS(e,t,0);else s=s||new Map,o.findHostDirectiveDefs?.(o,i,s),i.push(o)}return i===null?null:[i,s]}function XS(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function Rq(e,t,n){if(t){let i=e.localNames=[];for(let s=0;s<t.length;s+=2){let r=n[t[s+1]];if(r==null)throw new ge(-301,!1);i.push(t[s],r)}}}function Iq(e,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;Xo(t)&&(n[""]=e)}}function Aq(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Mq(e,t,n,i,s){e.data[i]=s;let r=s.factory||(s.factory=el(s.type,!0)),o=new sl(r,Xo(s),Q);e.blueprint[i]=o,n[i]=o,_q(e,t,i,K1(e,n,s.hostVars,Xr),s)}function Pq(e,t,n){let i=Vi(t,e),s=Y1(n),r=e[fr].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=jm(e,Wm(e,s,null,o,i,t,null,r.createRenderer(i,n),null,null,null));e[t.index]=a}function Fq(e,t,n,i,s,r){let o=Vi(e,t);xq(t[St],o,r,e.value,n,i,s)}function xq(e,t,n,i,s,r,o){if(r==null)e.removeAttribute(t,s,n);else{let a=o==null?F_(r):o(r,i||"",s);e.setAttribute(t,s,a,n)}}function Oq(e,t,n,i,s,r){let o=r[t];if(o!==null)for(let a=0;a<o.length;){let l=o[a++],c=o[a++],u=o[a++],h=o[a++];q1(i,n,l,c,u,h)}}function Nq(e,t,n){let i=null,s=0;for(;s<n.length;){let r=n[s];if(r===0){s+=4;continue}else if(r===5){s+=2;continue}if(typeof r=="number")break;if(e.hasOwnProperty(r)){i===null&&(i=[]);let o=e[r];for(let a=0;a<o.length;a+=3)if(o[a]===t){i.push(r,o[a+1],o[a+2],n[s+1]);break}}s+=2}return i}function tO(e,t,n,i){return[e,!0,0,t,null,i,null,n,null,null]}function nO(e,t){let n=e.contentQueries;if(n!==null){let i=qe(null);try{for(let s=0;s<n.length;s+=2){let r=n[s],o=n[s+1];if(o!==-1){let a=e.data[o];z_(r),a.contentQueries(2,t[o],o)}}}finally{qe(i)}}}function jm(e,t){return e[Th]?e[kF][Ns]=t:e[Th]=t,e[kF]=t,t}function ZS(e,t,n){z_(0);let i=qe(null);try{t(e,n)}finally{qe(i)}}function iO(e){return e[Dh]||(e[Dh]=[])}function sO(e){return e.cleanup||(e.cleanup=[])}function rO(e,t){let n=e[qc],i=n?n.get(Kr,null):null;i&&i.handleError(t)}function hb(e,t,n,i,s){for(let r=0;r<n.length;){let o=n[r++],a=n[r++],l=n[r++],c=t[o],u=e.data[o];q1(u,c,i,a,l,s)}}function kq(e,t,n){let i=$x(t,e);q4(e[St],i,n)}function Lq(e,t){let n=na(t,e),i=n[Ae];Vq(i,n);let s=n[Ni];s!==null&&n[ki]===null&&(n[ki]=Z_(s,n[qc])),fb(i,n,n[Ln])}function Vq(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function fb(e,t,n){$_(t);try{let i=e.viewQuery;i!==null&&ZS(1,i,n);let s=e.template;s!==null&&Q1(e,t,s,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[$r]?.finishViewCreation(e),e.staticContentQueries&&nO(e,t),e.staticViewQueries&&ZS(2,e.viewQuery,n);let r=e.components;r!==null&&Bq(t,r)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{t[Re]&=-5,q_()}}function Bq(e,t){for(let n=0;n<t.length;n++)Lq(e,t[n])}function zm(e,t,n,i){let s=qe(null);try{let r=t.tView,a=e[Re]&4096?4096:16,l=Wm(e,r,n,a,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=e[t.index];l[Vh]=c;let u=e[$r];return u!==null&&(l[$r]=u.createEmbeddedView(r)),fb(r,l,n),l}finally{qe(s)}}function oO(e,t){let n=An+t;if(n<e.length)return e[n]}function Ph(e,t){return!t||t.firstChild===null||dm(e)}function $m(e,t,n,i=!0){let s=t[Ae];if(J4(s,t,e,n),i){let o=JS(n,e),a=t[St],l=sb(a,e[qr]);l!==null&&Q4(s,e[Li],a,t,l,o)}let r=t[ki];r!==null&&r.firstChild!==null&&(r.firstChild=null)}function aO(e,t){let n=Mh(e,t);return n!==void 0&&Gm(n[Ae],n),n}function pm(e,t,n,i,s=!1){for(;n!==null;){let r=t[n.index];r!==null&&i.push(ks(r)),gr(r)&&Gq(r,i);let o=n.type;if(o&8)pm(e,t,n.child,i);else if(o&32){let a=tb(n,t),l;for(;l=a();)i.push(l)}else if(o&16){let a=H1(t,n);if(Array.isArray(a))i.push(...a);else{let l=Ah(t[mi]);pm(l[Ae],l,a,i,!0)}}n=s?n.projectionNext:n.next}return i}function Gq(e,t){for(let n=An;n<e.length;n++){let i=e[n],s=i[Ae].firstChild;s!==null&&pm(i[Ae],i,s,t)}e[qr]!==e[Ni]&&t.push(e[qr])}var lO=[];function Hq(e){return e[nl]??Uq(e)}function Uq(e){let t=lO.pop()??Object.create(jq);return t.lView=e,t}function Wq(e){e.lView[nl]!==e&&(e.lView=null,lO.push(e))}var jq=ae(B({},Uw),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Ih(e.lView)},consumerOnSignalRead(){this.lView[nl]=this}}),cO=100;function uO(e,t=!0,n=0){let i=e[fr],s=i.rendererFactory,r=!1;r||s.begin?.();try{zq(e,n)}catch(o){throw t&&rO(e,o),o}finally{r||(s.end?.(),i.inlineEffectRunner?.flush())}}function zq(e,t){e_(e,t);let n=0;for(;U_(e);){if(n===cO)throw new ge(103,!1);n++,e_(e,1)}}function $q(e,t,n,i){let s=t[Re];if((s&256)===256)return;let r=!1;!r&&t[fr].inlineEffectRunner?.flush(),$_(t);let o=null,a=null;!r&&qq(e)&&(a=Hq(t),o=jP(a));try{Kx(t),$3(e.bindingStartIndex),n!==null&&Q1(e,t,n,2,i);let l=(s&3)===3;if(!r)if(l){let h=e.preOrderCheckHooks;h!==null&&Jg(t,h,null)}else{let h=e.preOrderHooks;h!==null&&Xg(t,h,0,null),pS(t,0)}if(Kq(t),dO(t,0),e.contentQueries!==null&&nO(e,t),!r)if(l){let h=e.contentCheckHooks;h!==null&&Jg(t,h)}else{let h=e.contentHooks;h!==null&&Xg(t,h,1),pS(t,1)}uq(e,t);let c=e.components;c!==null&&fO(t,c,0);let u=e.viewQuery;if(u!==null&&ZS(2,u,i),!r)if(l){let h=e.viewCheckHooks;h!==null&&Jg(t,h)}else{let h=e.viewHooks;h!==null&&Xg(t,h,2),pS(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[fS]){for(let h of t[fS])h();t[fS]=null}r||(t[Re]&=-73)}catch(l){throw Ih(t),l}finally{a!==null&&(zP(a,o),Wq(a)),q_()}}function qq(e){return e.type!==2}function dO(e,t){for(let n=b1(e);n!==null;n=E1(n))for(let i=An;i<n.length;i++){let s=n[i];hO(s,t)}}function Kq(e){for(let t=b1(e);t!==null;t=E1(t)){if(!(t[Re]&V_.HasTransplantedViews))continue;let n=t[Kc];for(let i=0;i<n.length;i++){let s=n[i],r=s[Cn];N3(s)}}}function Qq(e,t,n){let i=na(t,e);hO(i,n)}function hO(e,t){H_(e)&&e_(e,t)}function e_(e,t){let i=e[Ae],s=e[Re],r=e[nl],o=!!(t===0&&s&16);if(o||=!!(s&64&&t===0),o||=!!(s&1024),o||=!!(r?.dirty&&Ww(r)),r&&(r.dirty=!1),e[Re]&=-9217,o)$q(i,e,i.template,e[Ln]);else if(s&8192){dO(e,1);let a=i.components;a!==null&&fO(e,a,1)}}function fO(e,t,n){for(let i=0;i<t.length;i++)Qq(e,t[i],n)}function pb(e){for(e[fr].changeDetectionScheduler?.notify();e;){e[Re]|=64;let t=Ah(e);if(Gx(e)&&!t)return e;e=t}return null}var ol=class{get rootNodes(){let t=this._lView,n=t[Ae];return pm(n,t,n.firstChild,[])}constructor(t,n,i=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ln]}set context(t){this._lView[Ln]=t}get destroyed(){return(this._lView[Re]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Cn];if(gr(t)){let n=t[om],i=n?n.indexOf(this):-1;i>-1&&(Mh(t,i),sm(n,i))}this._attachedToViewContainer=!1}Gm(this._lView[Ae],this._lView)}onDestroy(t){Qx(this._lView,t)}markForCheck(){pb(this._cdRefInjectingView||this._lView)}detach(){this._lView[Re]&=-129}reattach(){BS(this._lView),this._lView[Re]|=128}detectChanges(){this._lView[Re]|=1024,uO(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ge(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,k1(this._lView[Ae],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new ge(902,!1);this._appRef=t,BS(this._lView)}},Ls=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=Xq;let e=t;return e})(),Yq=Ls,Jq=class extends Yq{constructor(t,n,i){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,i){let s=zm(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:i});return new ol(s)}};function Xq(){return qm(yi(),He())}function qm(e,t){return e.type&4?new Jq(t,e,nu(e,t)):null}function pO(e){let t=e[Rh]??[],i=e[Cn][St];for(let s of t)Zq(s,i);e[Rh]=Xn}function Zq(e,t){let n=0,i=e.firstChild;if(i){let s=e.data[hm];for(;n<s;){let r=i.nextSibling;rb(t,i,!1),i=r,n++}}}function gO(e){pO(e);for(let t=An;t<e.length;t++)gm(e[t])}function e5(e){let t=e[ki]?.i18nNodes;if(t){let n=e[St];for(let i of t.values())rb(n,i,!1);e[ki].i18nNodes=void 0}}function gm(e){e5(e);let t=e[Ae];for(let n=Wt;n<t.bindingStartIndex;n++)if(gr(e[n])){let i=e[n];gO(i)}else zr(e[n])&&gm(e[n])}function t5(e){let t=e._views;for(let n of t){let i=k4(n);if(i!==null&&i[Ni]!==null)if(zr(i))gm(i);else{let s=i[Ni];gm(s),gO(i)}}}var n5=new RegExp(`^(\\d+)*(${I1}|${R1})*(.*)`);function i5(e){let t=e.match(n5),[n,i,s,r]=t,o=i?parseInt(i,10):s,a=[];for(let[l,c,u]of r.matchAll(/(f|n)(\d*)/g)){let h=parseInt(u,10)||1;a.push(c,h)}return[o,...a]}function s5(e){return!e.prev&&e.parent?.type===8}function wS(e){return e.index-Wt}function r5(e,t){let n=e.i18nNodes;if(n){let i=n.get(t);return i&&n.delete(t),i}return null}function Km(e,t,n,i){let s=wS(i),r=r5(e,s);if(!r){let o=e.data[M4];if(o?.[s])r=a5(o[s],n);else if(t.firstChild===i)r=e.firstChild;else{let a=i.prev===null,l=i.prev??i.parent;if(s5(i)){let c=wS(i.parent);r=QS(e,c)}else{let c=Vi(l,n);if(a)r=c.firstChild;else{let u=wS(l),h=QS(e,u);if(l.type===2&&h){let p=eb(e,u)+1;r=Qm(p,h)}else r=c.nextSibling}}}}return r}function Qm(e,t){let n=t;for(let i=0;i<e;i++)n=n.nextSibling;return n}function o5(e,t){let n=e;for(let i=0;i<t.length;i+=2){let s=t[i],r=t[i+1];for(let o=0;o<r;o++)switch(s){case KS.FirstChild:n=n.firstChild;break;case KS.NextSibling:n=n.nextSibling;break}}return n}function a5(e,t){let[n,...i]=i5(e),s;if(n===R1)s=t[mi][Ni];else if(n===I1)s=z4(t[mi][Ni]);else{let r=Number(n);s=ks(t[r+Wt])}return o5(s,i)}function l5(e,t){let n=[];for(let i of t)for(let s=0;s<(i[A1]??1);s++){let r={data:i,firstChild:null};i[hm]>0&&(r.firstChild=e,e=Qm(i[hm],e)),n.push(r)}return[e,n]}var mO=()=>null;function c5(e,t){let n=e[Rh];return!t||n===null||n.length===0?null:n[0].data[A4]===t?n.shift():(pO(e),null)}function u5(){mO=c5}function Fh(e,t){return mO(e,t)}var t_=class{},n_=class{},mm=class{};function d5(e){let t=Error(`No component factory found for ${Zn(e)}.`);return t[h5]=e,t}var h5="ngComponent";var i_=class{resolveComponentFactory(t){throw d5(t)}},su=(()=>{let t=class t{};t.NULL=new i_;let e=t;return e})(),xh=class{},Vs=(()=>{let t=class t{constructor(){this.destroyNode=null}};t.__NG_ELEMENT_ID__=()=>f5();let e=t;return e})();function f5(){let e=He(),t=yi(),n=na(t.index,e);return(zr(n)?n:e)[St]}var p5=(()=>{let t=class t{};t.\u0275prov=Y({token:t,providedIn:"root",factory:()=>null});let e=t;return e})(),SS={};var qF=new Set;function sa(e){qF.has(e)||(qF.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function KF(...e){}function g5(){let e=typeof jr.requestAnimationFrame=="function",t=jr[e?"requestAnimationFrame":"setTimeout"],n=jr[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i);let s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}var de=class e{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new W(!1),this.onMicrotaskEmpty=new W(!1),this.onStable=new W(!1),this.onError=new W(!1),typeof Zone>"u")throw new ge(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&n,s.shouldCoalesceRunChangeDetection=i,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=g5().nativeRequestAnimationFrame,C5(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new ge(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new ge(909,!1)}run(t,n,i){return this._inner.run(t,n,i)}runTask(t,n,i,s){let r=this._inner,o=r.scheduleEventTask("NgZoneEvent: "+s,t,m5,KF,KF);try{return r.runTask(o,n,i)}finally{r.cancelTask(o)}}runGuarded(t,n,i){return this._inner.runGuarded(t,n,i)}runOutsideAngular(t){return this._outer.run(t)}},m5={};function gb(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function v5(e){e.isCheckStableRunning||e.lastRequestAnimationFrameId!==-1||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(jr,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,s_(e),e.isCheckStableRunning=!0,gb(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),s_(e))}function C5(e){let t=()=>{v5(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,s,r,o,a)=>{if(y5(a))return n.invokeTask(s,r,o,a);try{return QF(e),n.invokeTask(s,r,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&r.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),YF(e)}},onInvoke:(n,i,s,r,o,a,l)=>{try{return QF(e),n.invoke(s,r,o,a,l)}finally{e.shouldCoalesceRunChangeDetection&&t(),YF(e)}},onHasTask:(n,i,s,r)=>{n.hasTask(s,r),i===s&&(r.change=="microTask"?(e._hasPendingMicrotasks=r.microTask,s_(e),gb(e)):r.change=="macroTask"&&(e.hasPendingMacrotasks=r.macroTask))},onHandleError:(n,i,s,r)=>(n.handleError(s,r),e.runOutsideAngular(()=>e.onError.emit(r)),!1)})}function s_(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.lastRequestAnimationFrameId!==-1?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function QF(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function YF(e){e._nesting--,gb(e)}function y5(e){return!Array.isArray(e)||e.length!==1?!1:e[0].data?.__ignore_ng_zone__===!0}var vO=(()=>{let t=class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let s of i)s()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};t.\u0275prov=Y({token:t,providedIn:"root",factory:()=>new t});let e=t;return e})();function vm(e,t,n){let i=n?e.styles:null,s=n?e.classes:null,r=0;if(t!==null)for(let o=0;o<t.length;o++){let a=t[o];if(typeof a=="number")r=a;else if(r==1)s=MS(s,a);else if(r==2){let l=a,c=t[++o];i=MS(i,l+": "+c+";")}}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=s:e.classesWithoutHost=s}var Cm=class extends su{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Jo(t);return new Yc(n,this.ngModule)}};function JF(e){let t=[];for(let n in e){if(!e.hasOwnProperty(n))continue;let i=e[n];i!==void 0&&t.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return t}function w5(e){let t=e.toLowerCase();return t==="svg"?zx:t==="math"?M3:null}var r_=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,i){i=Rm(i);let s=this.injector.get(t,SS,i);return s!==SS||n===SS?s:this.parentInjector.get(t,n,i)}},Yc=class extends mm{get inputs(){let t=this.componentDef,n=t.inputTransforms,i=JF(t.inputs);if(n!==null)for(let s of i)n.hasOwnProperty(s.propName)&&(s.transform=n[s.propName]);return i}get outputs(){return JF(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=u3(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,i,s){let r=qe(null);try{s=s||this.ngModule;let o=s instanceof ei?s:s?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new r_(t,o):t,l=a.get(xh,null);if(l===null)throw new ge(407,!1);let c=a.get(p5,null),u=a.get(vO,null),h=a.get(t_,null),f={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:h},p=l.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",y=i?fq(p,i,this.componentDef.encapsulation,a):Bm(p,v,w5(v)),C=512;this.componentDef.signals?C|=4096:this.componentDef.onPush||(C|=16);let E=null;y!==null&&(E=Z_(y,a,!0));let T=ub(0,null,null,1,0,null,null,null,null,null,null),R=Wm(null,T,null,C,null,null,f,p,a,null,E);$_(R);let F,$;try{let k=this.componentDef,b,S=null;k.findHostDirectiveDefs?(b=[],S=new Map,k.findHostDirectiveDefs(k,b,S),b.push(k)):b=[k];let _=S5(R,y),I=_5(_,y,k,b,R,f,p);$=G_(T,Wt),y&&D5(p,k,y,i),n!==void 0&&T5($,this.ngContentSelectors,n),F=E5(I,k,b,S,R,[R5]),fb(T,R,null)}finally{q_()}return new o_(this.componentType,F,nu($,R),R,$)}finally{qe(r)}}},o_=class extends n_{constructor(t,n,i,s,r){super(),this.location=i,this._rootLView=s,this._tNode=r,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new ol(s,void 0,!1),this.componentType=t}setInput(t,n){let i=this._tNode.inputs,s;if(i!==null&&(s=i[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let r=this._rootLView;hb(r[Ae],r,s,t,n),this.previousInputValues.set(t,n);let o=na(this._tNode.index,r);pb(o)}}get injector(){return new Za(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function S5(e,t){let n=e[Ae],i=Wt;return e[i]=t,iu(n,i,2,"#host",null)}function _5(e,t,n,i,s,r,o){let a=s[Ae];b5(i,e,t,o);let l=null;t!==null&&(l=Z_(t,s[qc]));let c=r.rendererFactory.createRenderer(t,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let h=Wm(s,Y1(n),null,u,s[e.index],e,r,c,null,null,l);return a.firstCreatePass&&XS(a,e,i.length-1),jm(s,h),s[e.index]=h}function b5(e,t,n,i){for(let s of e)t.mergedAttrs=bh(t.mergedAttrs,s.hostAttrs);t.mergedAttrs!==null&&(vm(t,t.mergedAttrs,!0),n!==null&&z1(i,n,t))}function E5(e,t,n,i,s,r){let o=yi(),a=s[Ae],l=Vi(o,s);Z1(a,s,o,n,null,i);for(let u=0;u<n.length;u++){let h=o.directiveStart+u,f=rl(s,a,h,o);Zo(f,s)}eO(a,s,o),l&&Zo(l,s);let c=rl(s,a,o.directiveStart+o.componentOffset,o);if(e[Ln]=s[Ln]=c,r!==null)for(let u of r)u(c,t);return ab(a,o,s),c}function D5(e,t,n,i){if(i)OS(e,n,["ng-version","17.3.12"]);else{let{attrs:s,classes:r}=d3(t.selectors[0]);s&&OS(e,n,s),r&&r.length>0&&j1(e,n,r.join(" "))}}function T5(e,t,n){let i=e.projection=[];for(let s=0;s<t.length;s++){let r=n[s];i.push(r!=null?Array.from(r):null)}}function R5(){let e=yi();xm(He()[Ae],e)}var Bi=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=I5;let e=t;return e})();function I5(){let e=yi();return yO(e,He())}var A5=Bi,CO=class extends A5{constructor(t,n,i){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=i}get element(){return nu(this._hostTNode,this._hostLView)}get injector(){return new Za(this._hostTNode,this._hostLView)}get parentInjector(){let t=Q_(this._hostTNode,this._hostLView);if(c1(t)){let n=lm(t,this._hostLView),i=am(t),s=n[Ae].data[i+8];return new Za(s,n)}else return new Za(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=XF(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-An}createEmbeddedView(t,n,i){let s,r;typeof i=="number"?s=i:i!=null&&(s=i.index,r=i.injector);let o=Fh(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},r,o);return this.insertImpl(a,s,Ph(this._hostTNode,o)),a}createComponent(t,n,i,s,r){let o=t&&!T3(t),a;if(o)a=n;else{let v=n||{};a=v.index,i=v.injector,s=v.projectableNodes,r=v.environmentInjector||v.ngModuleRef}let l=o?t:new Yc(Jo(t)),c=i||this.parentInjector;if(!r&&l.ngModule==null){let y=(o?c:this.parentInjector).get(ei,null);y&&(r=y)}let u=Jo(l.componentType??{}),h=Fh(this._lContainer,u?.id??null),f=h?.firstChild??null,p=l.create(c,s,f,r);return this.insertImpl(p.hostView,a,Ph(this._hostTNode,h)),p}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,i){let s=t._lView;if(O3(s)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=s[Cn],c=new CO(l,l[Li],l[Cn]);c.detach(c.indexOf(t))}}let r=this._adjustIndex(n),o=this._lContainer;return $m(o,s,r,i),t.attachToViewContainerRef(),yx(_S(o),r,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=XF(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),i=Mh(this._lContainer,n);i&&(sm(_S(this._lContainer),n),Gm(i[Ae],i))}detach(t){let n=this._adjustIndex(t,-1),i=Mh(this._lContainer,n);return i&&sm(_S(this._lContainer),n)!=null?new ol(i):null}_adjustIndex(t,n=0){return t??this.length+n}};function XF(e){return e[om]}function _S(e){return e[om]||(e[om]=[])}function yO(e,t){let n,i=t[e.index];return gr(i)?n=i:(n=tO(i,t,null,e),t[e.index]=n,jm(t,n)),wO(n,t,e,i),new CO(n,e,t)}function M5(e,t){let n=e[St],i=n.createComment(""),s=Vi(t,e),r=sb(n,s);return fm(n,r,i,iq(n,s),!1),i}var wO=SO,mb=()=>!1;function P5(e,t,n){return mb(e,t,n)}function SO(e,t,n,i){if(e[qr])return;let s;n.type&8?s=ks(i):s=M5(t,n),e[qr]=s}function F5(e,t,n){if(e[qr]&&e[Rh])return!0;let i=n[ki],s=t.index-Wt;if(!i||y4(t)||Lm(i,s))return!1;let o=QS(i,s),a=i.data[X_]?.[s],[l,c]=l5(o,a);return e[qr]=l,e[Rh]=c,!0}function x5(e,t,n,i){mb(e,n,t)||SO(e,t,n,i)}function O5(){wO=x5,mb=F5}var a_=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},l_=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let i=t.contentQueries!==null?t.contentQueries[0]:n.length,s=[];for(let r=0;r<i;r++){let o=n.getByIndex(r),a=this.queries[o.indexInDeclarationView];s.push(a.clone())}return new e(s)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)vb(t,n).matches!==null&&this.queries[n].setDirty()}},ym=class{constructor(t,n,i=null){this.flags=n,this.read=i,typeof t=="string"?this.predicate=U5(t):this.predicate=t}},c_=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let i=0;i<this.length;i++){let s=n!==null?n.length:0,r=this.getByIndex(i).embeddedTView(t,s);r&&(r.indexInDeclarationView=i,n!==null?n.push(r):n=[r])}return n!==null?new e(n):null}template(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},u_=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let s=0;s<i.length;s++){let r=i[s];this.matchTNodeWithReadOption(t,n,N5(n,r)),this.matchTNodeWithReadOption(t,n,Zg(n,t,r,!1,!1))}else i===Ls?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,Zg(n,t,i,!1,!1))}matchTNodeWithReadOption(t,n,i){if(i!==null){let s=this.metadata.read;if(s!==null)if(s===Lt||s===Bi||s===Ls&&n.type&4)this.addMatch(n.index,-2);else{let r=Zg(n,t,s,!1,!1);r!==null&&this.addMatch(n.index,r)}else this.addMatch(n.index,i)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function N5(e,t){let n=e.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1]}return null}function k5(e,t){return e.type&11?nu(e,t):e.type&4?qm(e,t):null}function L5(e,t,n,i){return n===-1?k5(t,e):n===-2?V5(e,t,i):rl(e,e[Ae],n,t)}function V5(e,t,n){if(n===Lt)return nu(t,e);if(n===Ls)return qm(t,e);if(n===Bi)return yO(t,e)}function _O(e,t,n,i){let s=t[$r].queries[i];if(s.matches===null){let r=e.data,o=n.matches,a=[];for(let l=0;o!==null&&l<o.length;l+=2){let c=o[l];if(c<0)a.push(null);else{let u=r[c];a.push(L5(t,u,o[l+1],n.metadata.read))}}s.matches=a}return s.matches}function d_(e,t,n,i){let s=e.queries.getByIndex(n),r=s.matches;if(r!==null){let o=_O(e,t,s,n);for(let a=0;a<r.length;a+=2){let l=r[a];if(l>0)i.push(o[a/2]);else{let c=r[a+1],u=t[-l];for(let h=An;h<u.length;h++){let f=u[h];f[Vh]===f[Cn]&&d_(f[Ae],f,c,i)}if(u[Kc]!==null){let h=u[Kc];for(let f=0;f<h.length;f++){let p=h[f];d_(p[Ae],p,c,i)}}}}}return i}function B5(e,t){return e[$r].queries[t].queryList}function bO(e,t,n){let i=new $S((n&4)===4);return vq(e,t,i,i.destroy),(t[$r]??=new l_).queries.push(new a_(i))-1}function G5(e,t,n){let i=Qt();return i.firstCreatePass&&(EO(i,new ym(e,t,n),-1),(t&2)===2&&(i.staticViewQueries=!0)),bO(i,He(),t)}function H5(e,t,n,i){let s=Qt();if(s.firstCreatePass){let r=yi();EO(s,new ym(t,n,i),r.index),W5(s,e),(n&2)===2&&(s.staticContentQueries=!0)}return bO(s,He(),n)}function U5(e){return e.split(",").map(t=>t.trim())}function EO(e,t,n){e.queries===null&&(e.queries=new c_),e.queries.track(new u_(t,n))}function W5(e,t){let n=e.contentQueries||(e.contentQueries=[]),i=n.length?n[n.length-1]:-1;t!==i&&n.push(e.queries.length-1,t)}function vb(e,t){return e.queries.getByIndex(t)}function j5(e,t){let n=e[Ae],i=vb(n,t);return i.crossesNgTemplate?d_(n,e,t,[]):_O(n,e,i,t)}function Cb(e,t){sa("NgSignals");let n=XP(e),i=n[Ic];return t?.equal&&(i.equal=t.equal),n.set=s=>jw(i,s),n.update=s=>ZP(i,s),n.asReadonly=z5.bind(n),n}function z5(){let e=this[Ic];if(e.readonlyFn===void 0){let t=()=>this();t[Ic]=e,e.readonlyFn=t}return e.readonlyFn}function $5(e){return Object.getPrototypeOf(e.prototype).constructor}function Bs(e){let t=$5(e.type),n=!0,i=[e];for(;t;){let s;if(Xo(e))s=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new ge(903,!1);s=t.\u0275dir}if(s){if(n){i.push(s);let o=e;o.inputs=qg(e.inputs),o.inputTransforms=qg(e.inputTransforms),o.declaredInputs=qg(e.declaredInputs),o.outputs=qg(e.outputs);let a=s.hostBindings;a&&J5(e,a);let l=s.viewQuery,c=s.contentQueries;if(l&&Q5(e,l),c&&Y5(e,c),q5(e,s),I$(e.outputs,s.outputs),Xo(s)&&s.data.animation){let u=e.data;u.animation=(u.animation||[]).concat(s.data.animation)}}let r=s.features;if(r)for(let o=0;o<r.length;o++){let a=r[o];a&&a.ngInherit&&a(e),a===Bs&&(n=!1)}}t=Object.getPrototypeOf(t)}K5(i)}function q5(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let i=t.inputs[n];if(i!==void 0&&(e.inputs[n]=i,e.declaredInputs[n]=t.declaredInputs[n],t.inputTransforms!==null)){let s=Array.isArray(i)?i[0]:i;if(!t.inputTransforms.hasOwnProperty(s))continue;e.inputTransforms??={},e.inputTransforms[s]=t.inputTransforms[s]}}}function K5(e){let t=0,n=null;for(let i=e.length-1;i>=0;i--){let s=e[i];s.hostVars=t+=s.hostVars,s.hostAttrs=bh(s.hostAttrs,n=bh(n,s.hostAttrs))}}function qg(e){return e===zc?{}:e===Xn?[]:e}function Q5(e,t){let n=e.viewQuery;n?e.viewQuery=(i,s)=>{t(i,s),n(i,s)}:e.viewQuery=t}function Y5(e,t){let n=e.contentQueries;n?e.contentQueries=(i,s,r)=>{t(i,s,r),n(i,s,r)}:e.contentQueries=t}function J5(e,t){let n=e.hostBindings;n?e.hostBindings=(i,s)=>{t(i,s),n(i,s)}:e.hostBindings=t}var ea=class{},Oh=class{};var h_=class extends ea{constructor(t,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Cm(this);let s=Ax(t);this._bootstrapComponents=N1(s.bootstrap),this._r3Injector=C1(t,n,[{provide:ea,useValue:this},{provide:su,useValue:this.componentFactoryResolver},...i],Zn(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},f_=class extends Oh{constructor(t){super(),this.moduleType=t}create(t){return new h_(this.moduleType,t,[])}};var wm=class extends ea{constructor(t){super(),this.componentFactoryResolver=new Cm(this),this.instance=null;let n=new Eh([...t.providers,{provide:ea,useValue:this},{provide:su,useValue:this.componentFactoryResolver}],t.parent||Am(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function yb(e,t,n=null){return new wm({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var Gh=(()=>{let t=class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new wt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function DO(e){return Z5(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function X5(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),i;for(;!(i=n.next()).done;)t(i.value)}}function Z5(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function e6(e,t,n){return e[t]=n}function Zr(e,t,n){let i=e[t];return Object.is(i,n)?!1:(e[t]=n,!0)}function Hh(e){return(e.flags&32)===32}function t6(e,t,n,i,s,r,o,a,l){let c=t.consts,u=iu(t,e,4,o||null,Qc(c,a));db(t,n,u,Qc(c,l)),xm(t,u);let h=u.tView=ub(2,u,i,s,r,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c,null);return t.queries!==null&&(t.queries.template(t,u),h.queries=t.queries.embeddedTView(u)),u}function Ce(e,t,n,i,s,r,o,a){let l=He(),c=Qt(),u=e+Wt,h=c.firstCreatePass?t6(u,c,l,t,n,i,s,r,o):c.data[u];ll(h,!1);let f=TO(c,l,h,e);Fm()&&Hm(c,l,f,h),Zo(f,l);let p=tO(f,l,f,h);return l[u]=p,jm(l,p),P5(p,h,l),Pm(h)&&lb(c,l,h),o!=null&&cb(l,h,a),Ce}var TO=RO;function RO(e,t,n,i){return mr(!0),t[St].createComment("")}function n6(e,t,n,i){let s=t[ki],r=!s||Zc()||Hh(n)||Lm(s,i);if(mr(r),r)return RO(e,t,n,i);let o=s.data[I4]?.[i]??null;o!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=o);let a=Km(s,e,t,n);km(s,i,a);let l=eb(s,i);return Qm(l,a)}function i6(){TO=n6}function eo(e,t,n,i){let s=He(),r=eu();if(Zr(s,r,t)){let o=Qt(),a=K_();Fq(a,s,e,t,n,i)}return eo}function s6(e,t,n,i){return Zr(e,eu(),n)?t+F_(n)+i:Xr}function Kg(e,t){return e<<17|t<<2}function al(e){return e>>17&32767}function r6(e){return(e&2)==2}function o6(e,t){return e&131071|t<<17}function p_(e){return e|2}function Jc(e){return(e&131068)>>2}function bS(e,t){return e&-131069|t<<2}function a6(e){return(e&1)===1}function g_(e){return e|1}function l6(e,t,n,i,s,r){let o=r?t.classBindings:t.styleBindings,a=al(o),l=Jc(o);e[i]=n;let c=!1,u;if(Array.isArray(n)){let h=n;u=h[1],(u===null||Lh(h,u)>0)&&(c=!0)}else u=n;if(s)if(l!==0){let f=al(e[a+1]);e[i+1]=Kg(f,a),f!==0&&(e[f+1]=bS(e[f+1],i)),e[a+1]=o6(e[a+1],i)}else e[i+1]=Kg(a,0),a!==0&&(e[a+1]=bS(e[a+1],i)),a=i;else e[i+1]=Kg(l,0),a===0?a=i:e[l+1]=bS(e[l+1],i),l=i;c&&(e[i+1]=p_(e[i+1])),ZF(e,u,i,!0),ZF(e,u,i,!1),c6(t,u,e,i,r),o=Kg(a,l),r?t.classBindings=o:t.styleBindings=o}function c6(e,t,n,i,s){let r=s?e.residualClasses:e.residualStyles;r!=null&&typeof t=="string"&&Lh(r,t)>=0&&(n[i+1]=g_(n[i+1]))}function ZF(e,t,n,i){let s=e[n+1],r=t===null,o=i?al(s):Jc(s),a=!1;for(;o!==0&&(a===!1||r);){let l=e[o],c=e[o+1];u6(l,t)&&(a=!0,e[o+1]=i?g_(c):p_(c)),o=i?al(c):Jc(c)}a&&(e[n+1]=i?p_(s):g_(s))}function u6(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Lh(e,t)>=0:!1}var Os={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function d6(e){return e.substring(Os.key,Os.keyEnd)}function h6(e){return f6(e),IO(e,AO(e,0,Os.textEnd))}function IO(e,t){let n=Os.textEnd;return n===t?-1:(t=Os.keyEnd=p6(e,Os.key=t,n),AO(e,t,n))}function f6(e){Os.key=0,Os.keyEnd=0,Os.value=0,Os.valueEnd=0,Os.textEnd=e.length}function AO(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function p6(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}function re(e,t,n){let i=He(),s=eu();if(Zr(i,s,t)){let r=Qt(),o=K_();X1(r,o,i,e,t,i[St],n,!1)}return re}function m_(e,t,n,i,s){let r=t.inputs,o=s?"class":"style";hb(e,n,r[o],o,i)}function ul(e,t,n){return MO(e,t,n,!1),ul}function wi(e,t){return MO(e,t,null,!0),wi}function Mn(e){m6(_6,g6,e,!0)}function g6(e,t){for(let n=h6(t);n>=0;n=IO(t,n))N_(e,d6(t),!0)}function MO(e,t,n,i){let s=He(),r=Qt(),o=Zx(2);if(r.firstUpdatePass&&FO(r,e,o,i),t!==Xr&&Zr(s,o,t)){let a=r.data[ia()];xO(r,a,s,s[St],e,s[o+1]=E6(t,n),i,o)}}function m6(e,t,n,i){let s=Qt(),r=Zx(2);s.firstUpdatePass&&FO(s,null,r,i);let o=He();if(n!==Xr&&Zr(o,r,n)){let a=s.data[ia()];if(OO(a,i)&&!PO(s,r)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(n=MS(l,n||"")),m_(s,a,o,n,i)}else b6(s,a,o,o[St],o[r+1],o[r+1]=S6(e,t,n),i,r)}}function PO(e,t){return t>=e.expandoStartIndex}function FO(e,t,n,i){let s=e.data;if(s[n+1]===null){let r=s[ia()],o=PO(e,n);OO(r,i)&&t===null&&!o&&(t=!1),t=v6(s,r,t,i),l6(s,r,t,n,o,i)}}function v6(e,t,n,i){let s=Y3(e),r=i?t.residualClasses:t.residualStyles;if(s===null)(i?t.classBindings:t.styleBindings)===0&&(n=ES(null,e,t,n,i),n=Nh(n,t.attrs,i),r=null);else{let o=t.directiveStylingLast;if(o===-1||e[o]!==s)if(n=ES(s,e,t,n,i),r===null){let l=C6(e,t,i);l!==void 0&&Array.isArray(l)&&(l=ES(null,e,t,l[1],i),l=Nh(l,t.attrs,i),y6(e,t,i,l))}else r=w6(e,t,i)}return r!==void 0&&(i?t.residualClasses=r:t.residualStyles=r),n}function C6(e,t,n){let i=n?t.classBindings:t.styleBindings;if(Jc(i)!==0)return e[al(i)]}function y6(e,t,n,i){let s=n?t.classBindings:t.styleBindings;e[al(s)]=i}function w6(e,t,n){let i,s=t.directiveEnd;for(let r=1+t.directiveStylingLast;r<s;r++){let o=e[r].hostAttrs;i=Nh(i,o,n)}return Nh(i,t.attrs,n)}function ES(e,t,n,i,s){let r=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(r=t[a],i=Nh(i,r.hostAttrs,s),r!==e);)a++;return e!==null&&(n.directiveStylingLast=a),i}function Nh(e,t,n){let i=n?1:2,s=-1;if(t!==null)for(let r=0;r<t.length;r++){let o=t[r];typeof o=="number"?s=o:s===i&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),N_(e,o,n?!0:t[++r]))}return e===void 0?null:e}function S6(e,t,n){if(n==null||n==="")return Xn;let i=[],s=Vm(n);if(Array.isArray(s))for(let r=0;r<s.length;r++)e(i,s[r],!0);else if(typeof s=="object")for(let r in s)s.hasOwnProperty(r)&&e(i,r,s[r]);else typeof s=="string"&&t(i,s);return i}function _6(e,t,n){let i=String(t);i!==""&&!i.includes(" ")&&N_(e,i,n)}function b6(e,t,n,i,s,r,o,a){s===Xr&&(s=Xn);let l=0,c=0,u=0<s.length?s[0]:null,h=0<r.length?r[0]:null;for(;u!==null||h!==null;){let f=l<s.length?s[l+1]:void 0,p=c<r.length?r[c+1]:void 0,v=null,y;u===h?(l+=2,c+=2,f!==p&&(v=h,y=p)):h===null||u!==null&&u<h?(l+=2,v=u):(c+=2,v=h,y=p),v!==null&&xO(e,t,n,i,v,y,o,a),u=l<s.length?s[l]:null,h=c<r.length?r[c]:null}}function xO(e,t,n,i,s,r,o,a){if(!(t.type&3))return;let l=e.data,c=l[a+1],u=a6(c)?ex(l,t,n,s,Jc(c),o):void 0;if(!Sm(u)){Sm(r)||r6(c)&&(r=ex(l,null,n,s,a,o));let h=$x(ia(),n);lq(i,o,h,s,r)}}function ex(e,t,n,i,s,r){let o=t===null,a;for(;s>0;){let l=e[s],c=Array.isArray(l),u=c?l[1]:l,h=u===null,f=n[s+1];f===Xr&&(f=h?Xn:void 0);let p=h?dS(f,i):u===i?f:void 0;if(c&&!Sm(p)&&(p=dS(l,i)),Sm(p)&&(a=p,o))return a;let v=e[s+1];s=o?al(v):Jc(v)}if(t!==null){let l=r?t.residualClasses:t.residualStyles;l!=null&&(a=dS(l,i))}return a}function Sm(e){return e!==void 0}function E6(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Zn(Vm(e)))),e}function OO(e,t){return(e.flags&(t?8:16))!==0}var v_=class{destroy(t){}updateValue(t,n){}swap(t,n){let i=Math.min(t,n),s=Math.max(t,n),r=this.detach(s);if(s-i>1){let o=this.detach(i);this.attach(i,r),this.attach(s,o)}else this.attach(i,r)}move(t,n){this.attach(n,this.detach(t))}};function DS(e,t,n,i,s){return e===n&&Object.is(t,i)?1:Object.is(s(e,t),s(n,i))?-1:0}function D6(e,t,n){let i,s,r=0,o=e.length-1;if(Array.isArray(t)){let a=t.length-1;for(;r<=o&&r<=a;){let l=e.at(r),c=t[r],u=DS(r,l,r,c,n);if(u!==0){u<0&&e.updateValue(r,c),r++;continue}let h=e.at(o),f=t[a],p=DS(o,h,a,f,n);if(p!==0){p<0&&e.updateValue(o,f),o--,a--;continue}let v=n(r,l),y=n(o,h),C=n(r,c);if(Object.is(C,y)){let E=n(a,f);Object.is(E,v)?(e.swap(r,o),e.updateValue(o,f),a--,o--):e.move(o,r),e.updateValue(r,c),r++;continue}if(i??=new _m,s??=nx(e,r,o,n),C_(e,i,r,C))e.updateValue(r,c),r++,o++;else if(s.has(C))i.set(v,e.detach(r)),o--;else{let E=e.create(r,t[r]);e.attach(r,E),r++,o++}}for(;r<=a;)tx(e,i,n,r,t[r]),r++}else if(t!=null){let a=t[Symbol.iterator](),l=a.next();for(;!l.done&&r<=o;){let c=e.at(r),u=l.value,h=DS(r,c,r,u,n);if(h!==0)h<0&&e.updateValue(r,u),r++,l=a.next();else{i??=new _m,s??=nx(e,r,o,n);let f=n(r,u);if(C_(e,i,r,f))e.updateValue(r,u),r++,o++,l=a.next();else if(!s.has(f))e.attach(r,e.create(r,u)),r++,o++,l=a.next();else{let p=n(r,c);i.set(p,e.detach(r)),o--}}}for(;!l.done;)tx(e,i,n,e.length,l.value),l=a.next()}for(;r<=o;)e.destroy(e.detach(o--));i?.forEach(a=>{e.destroy(a)})}function C_(e,t,n,i){return t!==void 0&&t.has(i)?(e.attach(n,t.get(i)),t.delete(i),!0):!1}function tx(e,t,n,i,s){if(C_(e,t,i,n(i,s)))e.updateValue(i,s);else{let r=e.create(i,s);e.attach(i,r)}}function nx(e,t,n,i){let s=new Set;for(let r=t;r<=n;r++)s.add(i(r,e.at(r)));return s}var _m=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let n=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(t,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,n){if(this.kvMap.has(t)){let i=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let s=this._vMap;for(;s.has(i);)i=s.get(i);s.set(i,n)}else this.kvMap.set(t,n)}forEach(t){for(let[n,i]of this.kvMap)if(t(i,n),this._vMap!==void 0){let s=this._vMap;for(;s.has(i);)i=s.get(i),t(i,n)}}};function ti(e,t,n){sa("NgControlFlow");let i=He(),s=eu(),r=__(i,Wt+e),o=0;if(Zr(i,s,t)){let a=qe(null);try{if(aO(r,o),t!==-1){let l=b_(i[Ae],Wt+t),c=Fh(r,l.tView.ssrId),u=zm(i,l,n,{dehydratedView:c});$m(r,u,o,Ph(l,c))}}finally{qe(a)}}else{let a=oO(r,o);a!==void 0&&(a[Ln]=n)}}var y_=class{constructor(t,n,i){this.lContainer=t,this.$implicit=n,this.$index=i}get $count(){return this.lContainer.length-An}};function ra(e,t){return t}var w_=class{constructor(t,n,i){this.hasEmptyBlock=t,this.trackByFn=n,this.liveCollection=i}};function oa(e,t,n,i,s,r,o,a,l,c,u,h,f){sa("NgControlFlow");let p=l!==void 0,v=He(),y=a?o.bind(v[mi][Ln]):o,C=new w_(p,y);v[Wt+e]=C,Ce(e+1,t,n,i,s,r),p&&Ce(e+2,l,c,u,h,f)}var S_=class extends v_{constructor(t,n,i){super(),this.lContainer=t,this.hostLView=n,this.templateTNode=i,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-An}at(t){return this.getLView(t)[Ln].$implicit}attach(t,n){let i=n[ki];this.needsIndexUpdate||=t!==this.length,$m(this.lContainer,n,t,Ph(this.templateTNode,i))}detach(t){return this.needsIndexUpdate||=t!==this.length-1,T6(this.lContainer,t)}create(t,n){let i=Fh(this.lContainer,this.templateTNode.tView.ssrId);return zm(this.hostLView,this.templateTNode,new y_(this.lContainer,n,t),{dehydratedView:i})}destroy(t){Gm(t[Ae],t)}updateValue(t,n){this.getLView(t)[Ln].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[Ln].$index=t}getLView(t){return R6(this.lContainer,t)}};function aa(e){let t=qe(null),n=ia();try{let i=He(),s=i[Ae],r=i[n];if(r.liveCollection===void 0){let a=n+1,l=__(i,a),c=b_(s,a);r.liveCollection=new S_(l,i,c)}else r.liveCollection.reset();let o=r.liveCollection;if(D6(o,e,r.trackByFn),o.updateIndexes(),r.hasEmptyBlock){let a=eu(),l=o.length===0;if(Zr(i,a,l)){let c=n+2,u=__(i,c);if(l){let h=b_(s,c),f=Fh(u,h.tView.ssrId),p=zm(i,h,void 0,{dehydratedView:f});$m(u,p,0,Ph(h,f))}else aO(u,0)}}}finally{qe(t)}}function __(e,t){return e[t]}function T6(e,t){return Mh(e,t)}function R6(e,t){return oO(e,t)}function b_(e,t){return G_(e,t)}function I6(e,t,n,i,s,r){let o=t.consts,a=Qc(o,s),l=iu(t,e,2,i,a);return db(t,n,l,Qc(o,r)),l.attrs!==null&&vm(l,l.attrs,!1),l.mergedAttrs!==null&&vm(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function H(e,t,n,i){let s=He(),r=Qt(),o=Wt+e,a=s[St],l=r.firstCreatePass?I6(o,r,s,t,n,i):r.data[o],c=NO(r,s,l,a,t,e);s[o]=c;let u=Pm(l);return ll(l,!0),z1(a,c,l),!Hh(l)&&Fm()&&Hm(r,s,c,l),V3()===0&&Zo(c,s),B3(),u&&(lb(r,s,l),ab(r,l,s)),i!==null&&cb(s,l),H}function U(){let e=yi();W_()?j_():(e=e.parent,ll(e,!1));let t=e;H3(t)&&W3(),G3();let n=Qt();return n.firstCreatePass&&(xm(n,e),B_(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&n4(t)&&m_(n,t,He(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&i4(t)&&m_(n,t,He(),t.stylesWithoutHost,!1),U}function ne(e,t,n,i){return H(e,t,n,i),U(),ne}var NO=(e,t,n,i,s,r)=>(mr(!0),Bm(i,s,o1()));function A6(e,t,n,i,s,r){let o=t[ki],a=!o||Zc()||Hh(n)||Lm(o,r);if(mr(a),a)return Bm(i,s,o1());let l=Km(o,e,t,n);return F1(o,r)&&km(o,r,l.nextSibling),o&&(w1(n)||S1(l))&&Bh(n)&&(U3(n),U1(l)),l}function M6(){NO=A6}function P6(e,t,n,i,s){let r=t.consts,o=Qc(r,i),a=iu(t,e,8,"ng-container",o);o!==null&&vm(a,o,!0);let l=Qc(r,s);return db(t,n,a,l),t.queries!==null&&t.queries.elementStart(t,a),a}function Gs(e,t,n){let i=He(),s=Qt(),r=e+Wt,o=s.firstCreatePass?P6(r,s,i,t,n):s.data[r];ll(o,!0);let a=kO(s,i,o,e);return i[r]=a,Fm()&&Hm(s,i,a,o),Zo(a,i),Pm(o)&&(lb(s,i,o),ab(s,o,i)),n!=null&&cb(i,o),Gs}function Hs(){let e=yi(),t=Qt();return W_()?j_():(e=e.parent,ll(e,!1)),t.firstCreatePass&&(xm(t,e),B_(e)&&t.queries.elementEnd(e)),Hs}var kO=(e,t,n,i)=>(mr(!0),ib(t[St],""));function F6(e,t,n,i){let s,r=t[ki],o=!r||Zc()||Hh(n);if(mr(o),o)return ib(t[St],"");let a=Km(r,e,t,n),l=B4(r,i);return km(r,i,a),s=Qm(l,a),s}function x6(){kO=F6}function st(){return He()}function wb(e,t,n){let i=He(),s=eu();if(Zr(i,s,t)){let r=Qt(),o=K_();X1(r,o,i,e,t,i[St],n,!0)}return wb}var Xa=void 0;function O6(e){let t=e,n=Math.floor(Math.abs(e)),i=e.toString().replace(/^[^.]*\.?/,"").length;return n===1&&i===0?1:5}var N6=["en",[["a","p"],["AM","PM"],Xa],[["AM","PM"],Xa,Xa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Xa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Xa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Xa,"{1} 'at' {0}",Xa],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",O6],TS={};function ss(e){let t=k6(e),n=ix(t);if(n)return n;let i=t.split("-")[0];if(n=ix(i),n)return n;if(i==="en")return N6;throw new ge(701,!1)}function ix(e){return e in TS||(TS[e]=jr.ng&&jr.ng.common&&jr.ng.common.locales&&jr.ng.common.locales[e]),TS[e]}var zt=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}(zt||{});function k6(e){return e.toLowerCase().replace(/_/g,"-")}var bm="en-US";var L6=bm;function V6(e){typeof e=="string"&&(L6=e.toLowerCase().replace(/_/g,"-"))}function LO(e,t,n){let i=e[St];switch(n){case Node.COMMENT_NODE:return ib(i,t);case Node.TEXT_NODE:return nb(i,t);case Node.ELEMENT_NODE:return Bm(i,t,null)}}var B6=(e,t,n,i)=>(mr(!0),LO(e,n,i));function G6(e,t,n,i){return mr(!0),LO(e,n,i)}function H6(){B6=G6}function pe(e,t,n,i){let s=He(),r=Qt(),o=yi();return W6(r,s,s[St],o,e,t,i),pe}function U6(e,t,n,i){let s=e.cleanup;if(s!=null)for(let r=0;r<s.length-1;r+=2){let o=s[r];if(o===n&&s[r+1]===i){let a=t[Dh],l=s[r+2];return a.length>l?a[l]:null}typeof o=="string"&&(r+=2)}return null}function W6(e,t,n,i,s,r,o){let a=Pm(i),c=e.firstCreatePass&&sO(e),u=t[Ln],h=iO(t),f=!0;if(i.type&3||o){let y=Vi(i,t),C=o?o(y):y,E=h.length,T=o?F=>o(ks(F[i.index])):i.index,R=null;if(!o&&a&&(R=U6(e,t,s,i.index)),R!==null){let F=R.__ngLastListenerFn__||R;F.__ngNextListenerFn__=r,R.__ngLastListenerFn__=r,f=!1}else{r=rx(i,t,u,r,!1);let F=n.listen(C,s,r);h.push(r,F),c&&c.push(s,T,E,E+1)}}else r=rx(i,t,u,r,!1);let p=i.outputs,v;if(f&&p!==null&&(v=p[s])){let y=v.length;if(y)for(let C=0;C<y;C+=2){let E=v[C],T=v[C+1],$=t[E][T].subscribe(r),k=h.length;h.push(r,$),c&&c.push(s,i.index,k,-(k+1))}}}function sx(e,t,n,i){let s=qe(null);try{return ur(6,t,n),n(i)!==!1}catch(r){return rO(e,r),!1}finally{ur(7,t,n),qe(s)}}function rx(e,t,n,i,s){return function r(o){if(o===Function)return i;let a=e.componentOffset>-1?na(e.index,t):t;pb(a);let l=sx(t,n,i,o),c=r.__ngNextListenerFn__;for(;c;)l=sx(t,n,c,o)&&l,c=c.__ngNextListenerFn__;return s&&l===!1&&o.preventDefault(),l}}function fe(e=1){return X3(e)}function j6(e,t){let n=null,i=r3(e);for(let s=0;s<t.length;s++){let r=t[s];if(r==="*"){n=s;continue}if(i===null?Ex(e,r,!0):l3(i,r))return s}return n}function Sb(e){let t=He()[mi][Li];if(!t.projection){let n=e?e.length:1,i=t.projection=Q$(n,null),s=i.slice(),r=t.child;for(;r!==null;){let o=e?j6(r,e):0;o!==null&&(s[o]?s[o].projectionNext=r:i[o]=r,s[o]=r),r=r.next}}}function _b(e,t=0,n){let i=He(),s=Qt(),r=iu(s,Wt+e,16,null,n||null);r.projection===null&&(r.projection=t),j_(),(!i[ki]||Zc())&&(r.flags&32)!==32&&oq(s,i,r)}function bb(e,t,n,i){H5(e,t,n,i)}function rs(e,t,n){G5(e,t,n)}function Si(e){let t=He(),n=Qt(),i=e1();z_(i+1);let s=vb(n,i);if(e.dirty&&x3(t)===((s.metadata.flags&2)===2)){if(s.matches===null)e.reset([]);else{let r=j5(t,i);e.reset(r,g4),e.notifyOnChanges()}return!0}return!1}function _i(){return B5(He(),e1())}function z6(e,t,n,i){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=i}function la(e){let t=z3();return qx(t,Wt+e)}function ue(e,t=""){let n=He(),i=Qt(),s=e+Wt,r=i.firstCreatePass?iu(i,s,1,t,null):i.data[s],o=VO(i,n,r,t,e);n[s]=o,Fm()&&Hm(i,n,o,r),ll(r,!1)}var VO=(e,t,n,i,s)=>(mr(!0),nb(t[St],i));function $6(e,t,n,i,s){let r=t[ki],o=!r||Zc()||Hh(n)||Lm(r,s);return mr(o),o?nb(t[St],i):Km(r,e,t,n)}function q6(){VO=$6}function Gi(e){return Vt("",e,""),Gi}function Vt(e,t,n){let i=He(),s=s6(i,e,t,n);return s!==Xr&&kq(i,ia(),s),Vt}function K6(e,t,n){let i=Qt();if(i.firstCreatePass){let s=Xo(e);E_(n,i.data,i.blueprint,s,!0),E_(t,i.data,i.blueprint,s,!1)}}function E_(e,t,n,i,s){if(e=Jn(e),Array.isArray(e))for(let r=0;r<e.length;r++)E_(e[r],t,n,i,s);else{let r=Qt(),o=He(),a=yi(),l=$c(e)?e:Jn(e.provide),c=Nx(e),u=a.providerIndexes&1048575,h=a.directiveStart,f=a.providerIndexes>>20;if($c(e)||!e.multi){let p=new sl(c,s,Q),v=IS(l,t,s?u:u+f,h);v===-1?(US(um(a,o),r,l),RS(r,e,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),n.push(p),o.push(p)):(n[v]=p,o[v]=p)}else{let p=IS(l,t,u+f,h),v=IS(l,t,u,u+f),y=p>=0&&n[p],C=v>=0&&n[v];if(s&&!C||!s&&!y){US(um(a,o),r,l);let E=J6(s?Y6:Q6,n.length,s,i,c);!s&&C&&(n[v].providerFactory=E),RS(r,e,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,s&&(a.providerIndexes+=1048576),n.push(E),o.push(E)}else{let E=BO(n[s?v:p],c,!s&&i);RS(r,e,p>-1?p:v,E)}!s&&i&&C&&n[v].componentProviders++}}}function RS(e,t,n,i){let s=$c(t),r=y3(t);if(s||r){let l=(r?Jn(t.useClass):t).prototype.ngOnDestroy;if(l){let c=e.destroyHooks||(e.destroyHooks=[]);if(!s&&t.multi){let u=c.indexOf(n);u===-1?c.push(n,[i,l]):c[u+1].push(i,l)}else c.push(n,l)}}}function BO(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function IS(e,t,n,i){for(let s=n;s<i;s++)if(t[s]===e)return s;return-1}function Q6(e,t,n,i){return D_(this.multi,[])}function Y6(e,t,n,i){let s=this.multi,r;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=rl(n,n[Ae],this.providerFactory.index,i);r=a.slice(0,o),D_(s,r);for(let l=o;l<a.length;l++)r.push(a[l])}else r=[],D_(s,r);return r}function D_(e,t){for(let n=0;n<e.length;n++){let i=e[n];t.push(i())}return t}function J6(e,t,n,i,s){let r=new sl(e,n,Q);return r.multi=[],r.index=t,r.componentProviders=0,BO(r,s,i&&!n),r}function os(e,t=[]){return n=>{n.providersResolver=(i,s)=>K6(i,s?s(e):e,t)}}var X6=(()=>{let t=class t{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let s=Fx(!1,i.type),r=s.length>0?yb([s],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,r)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};t.\u0275prov=Y({token:t,providedIn:"environment",factory:()=>new t(Z(ei))});let e=t;return e})();function be(e){sa("NgStandalone"),e.getStandaloneInjector=t=>t.get(X6).getOrCreateStandaloneInjector(e)}function ru(e,t,n,i){return GO(He(),Xx(),e,t,n,i)}function Z6(e,t){let n=e[t];return n===Xr?void 0:n}function GO(e,t,n,i,s,r){let o=t+n;return Zr(e,o,s)?e6(e,o+1,r?i.call(r,s):i(s)):Z6(e,o+1)}function Eb(e,t){let n=Qt(),i,s=e+Wt;n.firstCreatePass?(i=eK(t,n.pipeRegistry),n.data[s]=i,i.onDestroy&&(n.destroyHooks??=[]).push(s,i.onDestroy)):i=n.data[s];let r=i.factory||(i.factory=el(i.type,!0)),o,a=gi(Q);try{let l=cm(!1),c=r();return cm(l),z6(n,He(),s,c),c}finally{gi(a)}}function eK(e,t){if(t)for(let n=t.length-1;n>=0;n--){let i=t[n];if(e===i.name)return i}}function Db(e,t,n){let i=e+Wt,s=He(),r=qx(s,i);return tK(s,i)?GO(s,Xx(),t,r.transform,n,r):r.transform(n)}function tK(e,t){return e[Ae].data[t].pure}function ni(e,t){return qm(e,t)}var Yr=class{constructor(t){this.full=t;let n=t.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Tb=new Yr("17.3.12"),Ym=(()=>{let t=class t{log(i){console.log(i)}warn(i){console.warn(i)}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"platform"});let e=t;return e})();var HO=new te("");function dl(e){return!!e&&typeof e.then=="function"}function UO(e){return!!e&&typeof e.subscribe=="function"}var vr=new te(""),WO=(()=>{let t=class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,s)=>{this.resolve=i,this.reject=s}),this.appInits=G(vr,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let r of this.appInits){let o=r();if(dl(o))i.push(o);else if(UO(o)){let a=new Promise((l,c)=>{o.subscribe({complete:l,error:c})});i.push(a)}}let s=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{s()}).catch(r=>{this.reject(r)}),i.length===0&&s(),this.initialized=!0}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),ou=new te("");function nK(){JP(()=>{throw new ge(600,!1)})}function iK(e){return e.isBoundToModule}function sK(e,t,n){try{let i=n();return dl(i)?i.catch(s=>{throw t.runOutsideAngular(()=>e.handleError(s)),s}):i}catch(i){throw t.runOutsideAngular(()=>e.handleError(i)),i}}var Hi=(()=>{let t=class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=G(y1),this.afterRenderEffectManager=G(vO),this.externalTestViews=new Set,this.beforeRender=new Me,this.afterTick=new Me,this.componentTypes=[],this.components=[],this.isStable=G(Gh).hasPendingTasks.pipe(oe(i=>!i)),this._injector=G(ei)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,s){let r=i instanceof mm;if(!this._injector.get(WO).done){let p=!r&&Ix(i),v=!1;throw new ge(405,v)}let a;r?a=i:a=this._injector.get(su).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let l=iK(a)?void 0:this._injector.get(ea),c=s||a.selector,u=a.create(Ge.NULL,[],c,l),h=u.location.nativeElement,f=u.injector.get(HO,null);return f?.registerApplication(h),u.onDestroy(()=>{this.detachView(u.hostView),AS(this.components,u),f?.unregisterApplication(h)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new ge(101,!1);let s=qe(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(r){this.internalErrorHandler(r)}finally{this.afterTick.next(),this._runningTick=!1,qe(s)}}detectChangesInAttachedViews(i){let s=0,r=this.afterRenderEffectManager;for(;;){if(s===cO)throw new ge(103,!1);if(i){let o=s===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:l}of this._views)rK(a,o,l)}if(s++,r.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>T_(o))&&(r.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>T_(o))))break}}attachView(i){let s=i;this._views.push(s),s.attachToAppRef(this)}detachView(i){let s=i;AS(this._views,s),s.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let s=this._injector.get(ou,[]);[...this._bootstrapListeners,...s].forEach(r=>r(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>AS(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new ge(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function AS(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}var Qg;function Rb(e){Qg??=new WeakMap;let t=Qg.get(e);if(t)return t;let n=e.isStable.pipe(Oi(i=>i)).toPromise().then(()=>{});return Qg.set(e,n),e.onDestroy(()=>Qg?.delete(e)),n}function rK(e,t,n){!t&&!T_(e)||oK(e,n,t)}function T_(e){return U_(e)}function oK(e,t,n){let i;n?(i=0,e[Re]|=1024):e[Re]&64?i=0:i=1,uO(e,t,i)}var R_=class{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},Ib=(()=>{let t=class t{compileModuleSync(i){return new f_(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let s=this.compileModuleSync(i),r=Ax(i),o=N1(r.declarations).reduce((a,l)=>{let c=Jo(l);return c&&a.push(new Yc(c)),a},[]);return new R_(s,o)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var aK=(()=>{let t=class t{constructor(){this.zone=G(de),this.applicationRef=G(Hi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function lK(e){return[{provide:de,useFactory:e},{provide:tl,multi:!0,useFactory:()=>{let t=G(aK,{optional:!0});return()=>t.initialize()}},{provide:tl,multi:!0,useFactory:()=>{let t=G(hK);return()=>{t.initialize()}}},{provide:y1,useFactory:cK}]}function cK(){let e=G(de),t=G(Kr);return n=>e.runOutsideAngular(()=>t.handleError(n))}function uK(e){let t=lK(()=>new de(dK(e)));return mt([[],t])}function dK(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var hK=(()=>{let t=class t{constructor(){this.subscription=new It,this.initialized=!1,this.zone=G(de),this.pendingTasks=G(Gh)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{de.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{de.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function fK(){return typeof $localize<"u"&&$localize.locale||bm}var Uh=new te("",{providedIn:"root",factory:()=>G(Uh,Be.Optional|Be.SkipSelf)||fK()});var jO=new te("");var tm=null;function pK(e=[],t){return Ge.create({name:t,providers:[{provide:Im,useValue:"platform"},{provide:jO,useValue:new Set([()=>tm=null])},...e]})}function gK(e=[]){if(tm)return tm;let t=pK(e);return tm=t,nK(),mK(t),t}function mK(e){e.get(Y_,null)?.forEach(n=>n())}function Wh(){return!1}var Cr=(()=>{let t=class t{};t.__NG_ELEMENT_ID__=vK;let e=t;return e})();function vK(e){return CK(yi(),He(),(e&16)===16)}function CK(e,t,n){if(Bh(e)&&!n){let i=na(e.index,t);return new ol(i,i)}else if(e.type&47){let i=t[mi];return new ol(i,t)}return null}var I_=class{constructor(){}supports(t){return DO(t)}create(t){return new A_(t)}},yK=(e,t)=>t,A_=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||yK}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,i=this._removalsHead,s=0,r=null;for(;n||i;){let o=!i||n&&n.currentIndex<ox(i,s,r)?n:i,a=ox(o,s,r),l=o.currentIndex;if(o===i)s--,i=i._nextRemoved;else if(n=n._next,o.previousIndex==null)s++;else{r||(r=[]);let c=a-s,u=l-s;if(c!=u){for(let f=0;f<c;f++){let p=f<r.length?r[f]:r[f]=0,v=p+f;u<=v&&v<c&&(r[f]=p+1)}let h=o.previousIndex;r[h]=u-c}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!DO(t))throw new ge(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,i=!1,s,r,o;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)r=t[a],o=this._trackByFn(a,r),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,r,o,a),i=!0):(i&&(n=this._verifyReinsertion(n,r,o,a)),Object.is(n.item,r)||this._addIdentityChange(n,r)),n=n._next}else s=0,X5(t,a=>{o=this._trackByFn(s,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,s),i=!0):(i&&(n=this._verifyReinsertion(n,a,o,s)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,s++}),this.length=s;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,i,s){let r;return t===null?r=this._itTail:(r=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,r,s)):(t=this._linkedRecords===null?null:this._linkedRecords.get(i,s),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,r,s)):t=this._addAfter(new M_(n,i),r,s)),t}_verifyReinsertion(t,n,i,s){let r=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return r!==null?t=this._reinsertAfter(r,t._prev,s):t.currentIndex!=s&&(t.currentIndex=s,this._addToMoves(t,s)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let s=t._prevRemoved,r=t._nextRemoved;return s===null?this._removalsHead=r:s._nextRemoved=r,r===null?this._removalsTail=s:r._prevRemoved=s,this._insertAfter(t,n,i),this._addToMoves(t,i),t}_moveAfter(t,n,i){return this._unlink(t),this._insertAfter(t,n,i),this._addToMoves(t,i),t}_addAfter(t,n,i){return this._insertAfter(t,n,i),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,i){let s=n===null?this._itHead:n._next;return t._next=s,t._prev=n,s===null?this._itTail=t:s._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new Em),this._linkedRecords.put(t),t.currentIndex=i,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,i=t._next;return n===null?this._itHead=i:n._next=i,i===null?this._itTail=n:i._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Em),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},M_=class{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},P_=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let i;for(i=this._head;i!==null;i=i._nextDup)if((n===null||n<=i.currentIndex)&&Object.is(i.trackById,t))return i;return null}remove(t){let n=t._prevDup,i=t._nextDup;return n===null?this._head=i:n._nextDup=i,i===null?this._tail=n:i._prevDup=n,this._head===null}},Em=class{constructor(){this.map=new Map}put(t){let n=t.trackById,i=this.map.get(n);i||(i=new P_,this.map.set(n,i)),i.add(t)}get(t,n){let i=t,s=this.map.get(i);return s?s.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function ox(e,t,n){let i=e.previousIndex;if(i===null)return i;let s=0;return n&&i<n.length&&(s=n[i]),i+t+s}function ax(){return new Ab([new I_])}var Ab=(()=>{let t=class t{constructor(i){this.factories=i}static create(i,s){if(s!=null){let r=s.factories.slice();i=i.concat(r)}return new t(i)}static extend(i){return{provide:t,useFactory:s=>t.create(i,s||ax()),deps:[[t,new Cx,new Le]]}}find(i){let s=this.factories.find(r=>r.supports(i));if(s!=null)return s;throw new ge(901,!1)}};t.\u0275prov=Y({token:t,providedIn:"root",factory:ax});let e=t;return e})();function zO(e){try{let{rootComponent:t,appProviders:n,platformProviders:i}=e,s=gK(i),r=[uK(),...n||[]],a=new wm({providers:r,parent:s,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(de);return l.run(()=>{a.resolveInjectorInitializers();let c=a.get(Kr,null),u;l.runOutsideAngular(()=>{u=l.onError.subscribe({next:p=>{c.handleError(p)}})});let h=()=>a.destroy(),f=s.get(jO);return f.add(h),a.onDestroy(()=>{u.unsubscribe(),f.delete(h)}),sK(c,l,()=>{let p=a.get(WO);return p.runInitializers(),p.donePromise.then(()=>{let v=a.get(Uh,bm);V6(v||bm);let y=a.get(Hi);return t!==void 0&&y.bootstrap(t),y})})})}catch(t){return Promise.reject(t)}}var lx=!1,wK=!1;function SK(){lx||(lx=!0,N4(),M6(),q6(),x6(),i6(),O5(),u5(),mq(),H6())}function _K(e,t){return Rb(e)}function $O(){return mt([{provide:zg,useFactory:()=>{let e=!0;return $g()&&(e=!!G(cl,{optional:!0})?.get(M1,null)),e&&sa("NgHydration"),e}},{provide:tl,useValue:()=>{wK=!!G(G4,{optional:!0}),$g()&&G(zg)&&(bK(),SK())},multi:!0},{provide:O1,useFactory:()=>$g()&&G(zg)},{provide:ou,useFactory:()=>{if($g()&&G(zg)){let e=G(Hi),t=G(Ge);return()=>{_K(e,t).then(()=>{t5(e)})}}return()=>{}},multi:!0}])}function bK(){let e=Om(),t;for(let n of e.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===x4){t=n;break}if(!t)throw new ge(-507,!1)}function Jm(e,t){let n=Jo(e),i=t.elementInjector||Am();return new Yc(n).create(i,t.projectableNodes,t.hostElement,t.environmentInjector)}var tN=null;function io(){return tN}function nN(e){tN??=e}var ov=class{};var Jt=new te(""),iN=(()=>{let t=class t{historyGo(i){throw new Error("")}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:()=>G(TK),providedIn:"platform"});let e=t;return e})();var TK=(()=>{let t=class t extends iN{constructor(){super(),this._doc=G(Jt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return io().getBaseHref(this._doc)}onPopState(i){let s=io().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",i,!1),()=>s.removeEventListener("popstate",i)}onHashChange(i){let s=io().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",i,!1),()=>s.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,s,r){this._history.pushState(i,s,r)}replaceState(i,s,r){this._history.replaceState(i,s,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:()=>new t,providedIn:"platform"});let e=t;return e})();function sN(e,t){if(e.length==0)return t;if(t.length==0)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,n==2?e+t.substring(1):n==1?e+t:e+"/"+t}function qO(e){let t=e.match(/#|\?|$/),n=t&&t.index||e.length,i=n-(e[n-1]==="/"?1:0);return e.slice(0,i)+e.slice(n)}function hl(e){return e&&e[0]!=="?"?"?"+e:e}var cv=(()=>{let t=class t{historyGo(i){throw new Error("")}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:()=>G(rN),providedIn:"root"});let e=t;return e})(),RK=new te(""),rN=(()=>{let t=class t extends cv{constructor(i,s){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=s??this._platformLocation.getBaseHrefFromDOM()??G(Jt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return sN(this._baseHref,i)}path(i=!1){let s=this._platformLocation.pathname+hl(this._platformLocation.search),r=this._platformLocation.hash;return r&&i?`${s}${r}`:s}pushState(i,s,r,o){let a=this.prepareExternalUrl(r+hl(o));this._platformLocation.pushState(i,s,a)}replaceState(i,s,r,o){let a=this.prepareExternalUrl(r+hl(o));this._platformLocation.replaceState(i,s,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};t.\u0275fac=function(s){return new(s||t)(Z(iN),Z(RK,8))},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var jh=(()=>{let t=class t{constructor(i){this._subject=new W,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let s=this._locationStrategy.getBaseHref();this._basePath=MK(qO(KO(s))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,s=""){return this.path()==this.normalize(i+hl(s))}normalize(i){return t.stripTrailingSlash(AK(this._basePath,KO(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,s="",r=null){this._locationStrategy.pushState(r,"",i,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+hl(s)),r)}replaceState(i,s="",r=null){this._locationStrategy.replaceState(r,"",i,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+hl(s)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)}),()=>{let s=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(s,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",s){this._urlChangeListeners.forEach(r=>r(i,s))}subscribe(i,s,r){return this._subject.subscribe({next:i,error:s,complete:r})}};t.normalizeQueryParams=hl,t.joinWithSlash=sN,t.stripTrailingSlash=qO,t.\u0275fac=function(s){return new(s||t)(Z(cv))},t.\u0275prov=Y({token:t,factory:()=>IK(),providedIn:"root"});let e=t;return e})();function IK(){return new jh(Z(cv))}function AK(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function KO(e){return e.replace(/\/index.html$/,"")}function MK(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var ln=function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e}(ln||{}),Je=function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e}(Je||{}),Ui=function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e}(Ui||{}),ca={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function PK(e){return ss(e)[zt.LocaleId]}function oN(e,t,n){let i=ss(e),s=[i[zt.DayPeriodsFormat],i[zt.DayPeriodsStandalone]],r=as(s,t);return as(r,n)}function kb(e,t,n){let i=ss(e),s=[i[zt.DaysFormat],i[zt.DaysStandalone]],r=as(s,t);return as(r,n)}function uv(e,t,n){let i=ss(e),s=[i[zt.MonthsFormat],i[zt.MonthsStandalone]],r=as(s,t);return as(r,n)}function FK(e,t){let i=ss(e)[zt.Eras];return as(i,t)}function Xm(e,t){let n=ss(e);return as(n[zt.DateFormat],t)}function Zm(e,t){let n=ss(e);return as(n[zt.TimeFormat],t)}function ev(e,t){let i=ss(e)[zt.DateTimeFormat];return as(i,t)}function dv(e,t){let n=ss(e),i=n[zt.NumberSymbols][t];if(typeof i>"u"){if(t===ca.CurrencyDecimal)return n[zt.NumberSymbols][ca.Decimal];if(t===ca.CurrencyGroup)return n[zt.NumberSymbols][ca.Group]}return i}function aN(e){if(!e[zt.ExtraData])throw new Error(`Missing extra locale data for the locale "${e[zt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function xK(e){let t=ss(e);return aN(t),(t[zt.ExtraData][2]||[]).map(i=>typeof i=="string"?Mb(i):[Mb(i[0]),Mb(i[1])])}function OK(e,t,n){let i=ss(e);aN(i);let s=[i[zt.ExtraData][0],i[zt.ExtraData][1]],r=as(s,t)||[];return as(r,n)||[]}function as(e,t){for(let n=t;n>-1;n--)if(typeof e[n]<"u")return e[n];throw new Error("Locale data API: locale data undefined")}function Mb(e){let[t,n]=e.split(":");return{hours:+t,minutes:+n}}var NK=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,tv={},kK=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,no=function(e){return e[e.Short=0]="Short",e[e.ShortGMT=1]="ShortGMT",e[e.Long=2]="Long",e[e.Extended=3]="Extended",e}(no||{}),ot=function(e){return e[e.FullYear=0]="FullYear",e[e.Month=1]="Month",e[e.Date=2]="Date",e[e.Hours=3]="Hours",e[e.Minutes=4]="Minutes",e[e.Seconds=5]="Seconds",e[e.FractionalSeconds=6]="FractionalSeconds",e[e.Day=7]="Day",e}(ot||{}),rt=function(e){return e[e.DayPeriods=0]="DayPeriods",e[e.Days=1]="Days",e[e.Months=2]="Months",e[e.Eras=3]="Eras",e}(rt||{});function lN(e,t,n,i){let s=zK(e);t=to(n,t)||t;let o=[],a;for(;t;)if(a=kK.exec(t),a){o=o.concat(a.slice(1));let u=o.pop();if(!u)break;t=u}else{o.push(t);break}let l=s.getTimezoneOffset();i&&(l=uN(i,l),s=jK(s,i,!0));let c="";return o.forEach(u=>{let h=UK(u);c+=h?h(s,n,l):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function av(e,t,n){let i=new Date(0);return i.setFullYear(e,t,n),i.setHours(0,0,0),i}function to(e,t){let n=PK(e);if(tv[n]??={},tv[n][t])return tv[n][t];let i="";switch(t){case"shortDate":i=Xm(e,Ui.Short);break;case"mediumDate":i=Xm(e,Ui.Medium);break;case"longDate":i=Xm(e,Ui.Long);break;case"fullDate":i=Xm(e,Ui.Full);break;case"shortTime":i=Zm(e,Ui.Short);break;case"mediumTime":i=Zm(e,Ui.Medium);break;case"longTime":i=Zm(e,Ui.Long);break;case"fullTime":i=Zm(e,Ui.Full);break;case"short":let s=to(e,"shortTime"),r=to(e,"shortDate");i=nv(ev(e,Ui.Short),[s,r]);break;case"medium":let o=to(e,"mediumTime"),a=to(e,"mediumDate");i=nv(ev(e,Ui.Medium),[o,a]);break;case"long":let l=to(e,"longTime"),c=to(e,"longDate");i=nv(ev(e,Ui.Long),[l,c]);break;case"full":let u=to(e,"fullTime"),h=to(e,"fullDate");i=nv(ev(e,Ui.Full),[u,h]);break}return i&&(tv[n][t]=i),i}function nv(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(n,i){return t!=null&&i in t?t[i]:n})),e}function Us(e,t,n="-",i,s){let r="";(e<0||s&&e<=0)&&(s?e=-e+1:(e=-e,r=n));let o=String(e);for(;o.length<t;)o="0"+o;return i&&(o=o.slice(o.length-t)),r+o}function LK(e,t){return Us(e,3).substring(0,t)}function Yt(e,t,n=0,i=!1,s=!1){return function(r,o){let a=VK(e,r);if((n>0||a>-n)&&(a+=n),e===ot.Hours)a===0&&n===-12&&(a=12);else if(e===ot.FractionalSeconds)return LK(a,t);let l=dv(o,ca.MinusSign);return Us(a,t,l,i,s)}}function VK(e,t){switch(e){case ot.FullYear:return t.getFullYear();case ot.Month:return t.getMonth();case ot.Date:return t.getDate();case ot.Hours:return t.getHours();case ot.Minutes:return t.getMinutes();case ot.Seconds:return t.getSeconds();case ot.FractionalSeconds:return t.getMilliseconds();case ot.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${e}".`)}}function _t(e,t,n=ln.Format,i=!1){return function(s,r){return BK(s,r,e,t,n,i)}}function BK(e,t,n,i,s,r){switch(n){case rt.Months:return uv(t,s,i)[e.getMonth()];case rt.Days:return kb(t,s,i)[e.getDay()];case rt.DayPeriods:let o=e.getHours(),a=e.getMinutes();if(r){let c=xK(t),u=OK(t,s,i),h=c.findIndex(f=>{if(Array.isArray(f)){let[p,v]=f,y=o>=p.hours&&a>=p.minutes,C=o<v.hours||o===v.hours&&a<v.minutes;if(p.hours<v.hours){if(y&&C)return!0}else if(y||C)return!0}else if(f.hours===o&&f.minutes===a)return!0;return!1});if(h!==-1)return u[h]}return oN(t,s,i)[o<12?0:1];case rt.Eras:return FK(t,i)[e.getFullYear()<=0?0:1];default:let l=n;throw new Error(`unexpected translation type ${l}`)}}function iv(e){return function(t,n,i){let s=-1*i,r=dv(n,ca.MinusSign),o=s>0?Math.floor(s/60):Math.ceil(s/60);switch(e){case no.Short:return(s>=0?"+":"")+Us(o,2,r)+Us(Math.abs(s%60),2,r);case no.ShortGMT:return"GMT"+(s>=0?"+":"")+Us(o,1,r);case no.Long:return"GMT"+(s>=0?"+":"")+Us(o,2,r)+":"+Us(Math.abs(s%60),2,r);case no.Extended:return i===0?"Z":(s>=0?"+":"")+Us(o,2,r)+":"+Us(Math.abs(s%60),2,r);default:throw new Error(`Unknown zone width "${e}"`)}}}var GK=0,rv=4;function HK(e){let t=av(e,GK,1).getDay();return av(e,0,1+(t<=rv?rv:rv+7)-t)}function cN(e){let t=e.getDay(),n=t===0?-3:rv-t;return av(e.getFullYear(),e.getMonth(),e.getDate()+n)}function Pb(e,t=!1){return function(n,i){let s;if(t){let r=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();s=1+Math.floor((o+r)/7)}else{let r=cN(n),o=HK(r.getFullYear()),a=r.getTime()-o.getTime();s=1+Math.round(a/6048e5)}return Us(s,e,dv(i,ca.MinusSign))}}function sv(e,t=!1){return function(n,i){let r=cN(n).getFullYear();return Us(r,e,dv(i,ca.MinusSign),t)}}var Fb={};function UK(e){if(Fb[e])return Fb[e];let t;switch(e){case"G":case"GG":case"GGG":t=_t(rt.Eras,Je.Abbreviated);break;case"GGGG":t=_t(rt.Eras,Je.Wide);break;case"GGGGG":t=_t(rt.Eras,Je.Narrow);break;case"y":t=Yt(ot.FullYear,1,0,!1,!0);break;case"yy":t=Yt(ot.FullYear,2,0,!0,!0);break;case"yyy":t=Yt(ot.FullYear,3,0,!1,!0);break;case"yyyy":t=Yt(ot.FullYear,4,0,!1,!0);break;case"Y":t=sv(1);break;case"YY":t=sv(2,!0);break;case"YYY":t=sv(3);break;case"YYYY":t=sv(4);break;case"M":case"L":t=Yt(ot.Month,1,1);break;case"MM":case"LL":t=Yt(ot.Month,2,1);break;case"MMM":t=_t(rt.Months,Je.Abbreviated);break;case"MMMM":t=_t(rt.Months,Je.Wide);break;case"MMMMM":t=_t(rt.Months,Je.Narrow);break;case"LLL":t=_t(rt.Months,Je.Abbreviated,ln.Standalone);break;case"LLLL":t=_t(rt.Months,Je.Wide,ln.Standalone);break;case"LLLLL":t=_t(rt.Months,Je.Narrow,ln.Standalone);break;case"w":t=Pb(1);break;case"ww":t=Pb(2);break;case"W":t=Pb(1,!0);break;case"d":t=Yt(ot.Date,1);break;case"dd":t=Yt(ot.Date,2);break;case"c":case"cc":t=Yt(ot.Day,1);break;case"ccc":t=_t(rt.Days,Je.Abbreviated,ln.Standalone);break;case"cccc":t=_t(rt.Days,Je.Wide,ln.Standalone);break;case"ccccc":t=_t(rt.Days,Je.Narrow,ln.Standalone);break;case"cccccc":t=_t(rt.Days,Je.Short,ln.Standalone);break;case"E":case"EE":case"EEE":t=_t(rt.Days,Je.Abbreviated);break;case"EEEE":t=_t(rt.Days,Je.Wide);break;case"EEEEE":t=_t(rt.Days,Je.Narrow);break;case"EEEEEE":t=_t(rt.Days,Je.Short);break;case"a":case"aa":case"aaa":t=_t(rt.DayPeriods,Je.Abbreviated);break;case"aaaa":t=_t(rt.DayPeriods,Je.Wide);break;case"aaaaa":t=_t(rt.DayPeriods,Je.Narrow);break;case"b":case"bb":case"bbb":t=_t(rt.DayPeriods,Je.Abbreviated,ln.Standalone,!0);break;case"bbbb":t=_t(rt.DayPeriods,Je.Wide,ln.Standalone,!0);break;case"bbbbb":t=_t(rt.DayPeriods,Je.Narrow,ln.Standalone,!0);break;case"B":case"BB":case"BBB":t=_t(rt.DayPeriods,Je.Abbreviated,ln.Format,!0);break;case"BBBB":t=_t(rt.DayPeriods,Je.Wide,ln.Format,!0);break;case"BBBBB":t=_t(rt.DayPeriods,Je.Narrow,ln.Format,!0);break;case"h":t=Yt(ot.Hours,1,-12);break;case"hh":t=Yt(ot.Hours,2,-12);break;case"H":t=Yt(ot.Hours,1);break;case"HH":t=Yt(ot.Hours,2);break;case"m":t=Yt(ot.Minutes,1);break;case"mm":t=Yt(ot.Minutes,2);break;case"s":t=Yt(ot.Seconds,1);break;case"ss":t=Yt(ot.Seconds,2);break;case"S":t=Yt(ot.FractionalSeconds,1);break;case"SS":t=Yt(ot.FractionalSeconds,2);break;case"SSS":t=Yt(ot.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=iv(no.Short);break;case"ZZZZZ":t=iv(no.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=iv(no.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=iv(no.Long);break;default:return null}return Fb[e]=t,t}function uN(e,t){e=e.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function WK(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function jK(e,t,n){let i=n?-1:1,s=e.getTimezoneOffset(),r=uN(t,s);return WK(e,i*(r-s))}function zK(e){if(QO(e))return e;if(typeof e=="number"&&!isNaN(e))return new Date(e);if(typeof e=="string"){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){let[s,r=1,o=1]=e.split("-").map(a=>+a);return av(s,r-1,o)}let n=parseFloat(e);if(!isNaN(e-n))return new Date(n);let i;if(i=e.match(NK))return $K(i)}let t=new Date(e);if(!QO(t))throw new Error(`Unable to convert "${e}" into a date`);return t}function $K(e){let t=new Date(0),n=0,i=0,s=e[8]?t.setUTCFullYear:t.setFullYear,r=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),i=Number(e[9]+e[11])),s.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));let o=Number(e[4]||0)-n,a=Number(e[5]||0)-i,l=Number(e[6]||0),c=Math.floor(parseFloat("0."+(e[7]||0))*1e3);return r.call(t,o,a,l,c),t}function QO(e){return e instanceof Date&&!isNaN(e.valueOf())}function Lb(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let i=n.indexOf("="),[s,r]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(s.trim()===t)return decodeURIComponent(r)}return null}var xb=/\s+/,YO=[],hv=(()=>{let t=class t{constructor(i,s){this._ngEl=i,this._renderer=s,this.initialClasses=YO,this.stateMap=new Map}set klass(i){this.initialClasses=i!=null?i.trim().split(xb):YO}set ngClass(i){this.rawClass=typeof i=="string"?i.trim().split(xb):i}ngDoCheck(){for(let s of this.initialClasses)this._updateState(s,!0);let i=this.rawClass;if(Array.isArray(i)||i instanceof Set)for(let s of i)this._updateState(s,!0);else if(i!=null)for(let s of Object.keys(i))this._updateState(s,!!i[s]);this._applyStateDiff()}_updateState(i,s){let r=this.stateMap.get(i);r!==void 0?(r.enabled!==s&&(r.changed=!0,r.enabled=s),r.touched=!0):this.stateMap.set(i,{enabled:s,changed:!0,touched:!0})}_applyStateDiff(){for(let i of this.stateMap){let s=i[0],r=i[1];r.changed?(this._toggleClass(s,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(s,!1),this.stateMap.delete(s)),r.touched=!1}}_toggleClass(i,s){i=i.trim(),i.length>0&&i.split(xb).forEach(r=>{s?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}};t.\u0275fac=function(s){return new(s||t)(Q(Lt),Q(Vs))},t.\u0275dir=At({type:t,selectors:[["","ngClass",""]],inputs:{klass:[vn.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let e=t;return e})();var Ob=class{constructor(t,n,i,s){this.$implicit=t,this.ngForOf=n,this.index=i,this.count=s}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},yr=(()=>{let t=class t{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,s,r){this._viewContainer=i,this._template=s,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let i=this._ngForOf;if(!this._differ&&i)if(0)try{}catch{}else this._differ=this._differs.find(i).create(this.ngForTrackBy)}if(this._differ){let i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){let s=this._viewContainer;i.forEachOperation((r,o,a)=>{if(r.previousIndex==null)s.createEmbeddedView(this._template,new Ob(r.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)s.remove(o===null?void 0:o);else if(o!==null){let l=s.get(o);s.move(l,a),JO(l,r)}});for(let r=0,o=s.length;r<o;r++){let l=s.get(r).context;l.index=r,l.count=o,l.ngForOf=this._ngForOf}i.forEachIdentityChange(r=>{let o=s.get(r.currentIndex);JO(o,r)})}static ngTemplateContextGuard(i,s){return!0}};t.\u0275fac=function(s){return new(s||t)(Q(Bi),Q(Ls),Q(Ab))},t.\u0275dir=At({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let e=t;return e})();function JO(e,t){e.context.$implicit=t.item}var Vn=(()=>{let t=class t{constructor(i,s){this._viewContainer=i,this._context=new Nb,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=s}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){XO("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){XO("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,s){return!0}};t.\u0275fac=function(s){return new(s||t)(Q(Bi),Q(Ls))},t.\u0275dir=At({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let e=t;return e})(),Nb=class{constructor(){this.$implicit=null,this.ngIf=null}};function XO(e,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${e} must be a TemplateRef, but received '${Zn(t)}'.`)}var Vb=(()=>{let t=class t{constructor(i){this._viewContainerRef=i,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(i){if(this._shouldRecreateView(i)){let s=this._viewContainerRef;if(this._viewRef&&s.remove(s.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=s.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(i){return!!i.ngTemplateOutlet||!!i.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(i,s,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,s,r):!1,get:(i,s,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,s,r)}})}};t.\u0275fac=function(s){return new(s||t)(Q(Bi))},t.\u0275dir=At({type:t,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[kt]});let e=t;return e})();function qK(e,t){return new ge(2100,!1)}var KK=/(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])\S*/g,dN=(()=>{let t=class t{transform(i){if(i==null)return null;if(typeof i!="string")throw qK(t,i);return i.replace(KK,s=>s[0].toUpperCase()+s.slice(1).toLowerCase())}};t.\u0275fac=function(s){return new(s||t)},t.\u0275pipe=Dx({name:"titlecase",type:t,pure:!0,standalone:!0});let e=t;return e})();var Mt=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=Ci({type:t}),t.\u0275inj=vi({});let e=t;return e})(),Bb="browser",QK="server";function au(e){return e===Bb}function so(e){return e===QK}var lv=class{};var pv=class e{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let i=n.indexOf(":");if(i>0){let s=n.slice(0,i),r=s.toLowerCase(),o=n.slice(i+1).trim();this.maybeSetNormalizedName(s,r),this.headers.has(r)?this.headers.get(r).push(o):this.headers.set(r,[o])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,n);let s=(t.op==="a"?this.headers.get(n):void 0)||[];s.push(...i),this.headers.set(n,s);break;case"d":let r=t.value;if(!r)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>r.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(t,n){let i=(Array.isArray(n)?n:[n]).map(r=>r.toString()),s=t.toLowerCase();this.headers.set(s,i),this.maybeSetNormalizedName(t,s)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var yN=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}(yN||{}),Gb=class{constructor(t,n=wN.Ok,i="OK"){this.headers=t.headers||new pv,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}};var gv=class e extends Gb{constructor(t={}){super(t),this.type=yN.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}};var wN=function(e){return e[e.Continue=100]="Continue",e[e.SwitchingProtocols=101]="SwitchingProtocols",e[e.Processing=102]="Processing",e[e.EarlyHints=103]="EarlyHints",e[e.Ok=200]="Ok",e[e.Created=201]="Created",e[e.Accepted=202]="Accepted",e[e.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",e[e.NoContent=204]="NoContent",e[e.ResetContent=205]="ResetContent",e[e.PartialContent=206]="PartialContent",e[e.MultiStatus=207]="MultiStatus",e[e.AlreadyReported=208]="AlreadyReported",e[e.ImUsed=226]="ImUsed",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.Found=302]="Found",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.Unused=306]="Unused",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.LengthRequired=411]="LengthRequired",e[e.PreconditionFailed=412]="PreconditionFailed",e[e.PayloadTooLarge=413]="PayloadTooLarge",e[e.UriTooLong=414]="UriTooLong",e[e.UnsupportedMediaType=415]="UnsupportedMediaType",e[e.RangeNotSatisfiable=416]="RangeNotSatisfiable",e[e.ExpectationFailed=417]="ExpectationFailed",e[e.ImATeapot=418]="ImATeapot",e[e.MisdirectedRequest=421]="MisdirectedRequest",e[e.UnprocessableEntity=422]="UnprocessableEntity",e[e.Locked=423]="Locked",e[e.FailedDependency=424]="FailedDependency",e[e.TooEarly=425]="TooEarly",e[e.UpgradeRequired=426]="UpgradeRequired",e[e.PreconditionRequired=428]="PreconditionRequired",e[e.TooManyRequests=429]="TooManyRequests",e[e.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",e[e.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout",e[e.HttpVersionNotSupported=505]="HttpVersionNotSupported",e[e.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",e[e.InsufficientStorage=507]="InsufficientStorage",e[e.LoopDetected=508]="LoopDetected",e[e.NotExtended=510]="NotExtended",e[e.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",e}(wN||{});var JK=new te("");var hN="b",fN="h",pN="s",gN="st",mN="u",vN="rt",fv=new te(""),XK=["GET","HEAD"];function ZK(e,t){let h=G(fv),{isCacheActive:n}=h,i=sg(h,["isCacheActive"]),{transferCache:s,method:r}=e;if(!n||r==="POST"&&!i.includePostRequests&&!s||r!=="POST"&&!XK.includes(r)||s===!1||i.filter?.(e)===!1)return t(e);let o=G(cl),a=t8(e),l=o.get(a,null),c=i.includeHeaders;if(typeof s=="object"&&s.includeHeaders&&(c=s.includeHeaders),l){let{[hN]:f,[vN]:p,[fN]:v,[pN]:y,[gN]:C,[mN]:E}=l,T=f;switch(p){case"arraybuffer":T=new TextEncoder().encode(f).buffer;break;case"blob":T=new Blob([f]);break}let R=new pv(v);return X(new gv({body:T,headers:R,status:y,statusText:C,url:E}))}let u=so(G(jt));return t(e).pipe(pt(f=>{f instanceof gv&&u&&o.set(a,{[hN]:f.body,[fN]:e8(f.headers,c),[pN]:f.status,[gN]:f.statusText,[mN]:f.url||"",[vN]:e.responseType})}))}function e8(e,t){if(!t)return{};let n={};for(let i of t){let s=e.getAll(i);s!==null&&(n[i]=s)}return n}function CN(e){return[...e.keys()].sort().map(t=>`${t}=${e.getAll(t)}`).join("&")}function t8(e){let{params:t,method:n,responseType:i,url:s}=e,r=CN(t),o=e.serializeBody();o instanceof URLSearchParams?o=CN(o):typeof o!="string"&&(o="");let a=[n,i,s,o,r].join("|"),l=n8(a);return l}function n8(e){let t=0;for(let n of e)t=Math.imul(31,t)+n.charCodeAt(0)<<0;return t+=2147483648,t.toString()}function SN(e){return[{provide:fv,useFactory:()=>(sa("NgHttpTransferCache"),B({isCacheActive:!0},e))},{provide:JK,useValue:ZK,multi:!0,deps:[cl,fv]},{provide:ou,multi:!0,useFactory:()=>{let t=G(Hi),n=G(fv);return()=>{Rb(t).then(()=>{n.isCacheActive=!1})}}}]}var Wb=class extends ov{constructor(){super(...arguments),this.supportsDOMEvents=!0}},jb=class e extends Wb{static makeCurrent(){nN(new e)}onAndCancel(t,n,i){return t.addEventListener(n,i),()=>{t.removeEventListener(n,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=i8();return n==null?null:s8(n)}resetBaseElement(){zh=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Lb(document.cookie,t)}},zh=null;function i8(){return zh=zh||document.querySelector("base"),zh?zh.getAttribute("href"):null}function s8(e){return new URL(e,document.baseURI).pathname}var r8=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac});let e=t;return e})(),zb=new te(""),DN=(()=>{let t=class t{constructor(i,s){this._zone=s,this._eventNameToPlugin=new Map,i.forEach(r=>{r.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,s,r){return this._findPluginFor(s).addEventListener(i,s,r)}getZone(){return this._zone}_findPluginFor(i){let s=this._eventNameToPlugin.get(i);if(s)return s;if(s=this._plugins.find(o=>o.supports(i)),!s)throw new ge(5101,!1);return this._eventNameToPlugin.set(i,s),s}};t.\u0275fac=function(s){return new(s||t)(Z(zb),Z(de))},t.\u0275prov=Y({token:t,factory:t.\u0275fac});let e=t;return e})(),mv=class{constructor(t){this._doc=t}},Hb="ng-app-id",TN=(()=>{let t=class t{constructor(i,s,r,o={}){this.doc=i,this.appId=s,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=so(o),this.resetHostNodes()}addStyles(i){for(let s of i)this.changeUsageCount(s,1)===1&&this.onStyleAdded(s)}removeStyles(i){for(let s of i)this.changeUsageCount(s,-1)<=0&&this.onStyleRemoved(s)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(s=>s.remove()),i.clear());for(let s of this.getAllStyles())this.onStyleRemoved(s);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let s of this.getAllStyles())this.addStyleToHost(i,s)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let s of this.hostNodes)this.addStyleToHost(s,i)}onStyleRemoved(i){let s=this.styleRef;s.get(i)?.elements?.forEach(r=>r.remove()),s.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${Hb}="${this.appId}"]`);if(i?.length){let s=new Map;return i.forEach(r=>{r.textContent!=null&&s.set(r.textContent,r)}),s}return null}changeUsageCount(i,s){let r=this.styleRef;if(r.has(i)){let o=r.get(i);return o.usage+=s,o.usage}return r.set(i,{usage:s,elements:[]}),s}getStyleElement(i,s){let r=this.styleNodesInDOM,o=r?.get(s);if(o?.parentNode===i)return r.delete(s),o.removeAttribute(Hb),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=s,this.platformIsServer&&a.setAttribute(Hb,this.appId),i.appendChild(a),a}}addStyleToHost(i,s){let r=this.getStyleElement(i,s),o=this.styleRef,a=o.get(s)?.elements;a?a.push(r):o.set(s,{elements:[r],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};t.\u0275fac=function(s){return new(s||t)(Z(Jt),Z(Nm),Z(J_,8),Z(jt))},t.\u0275prov=Y({token:t,factory:t.\u0275fac});let e=t;return e})(),Ub={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Kb=/%COMP%/g,RN="%COMP%",o8=`_nghost-${RN}`,a8=`_ngcontent-${RN}`,l8=!0,c8=new te("",{providedIn:"root",factory:()=>l8});function u8(e){return a8.replace(Kb,e)}function d8(e){return o8.replace(Kb,e)}function IN(e,t){return t.map(n=>n.replace(Kb,e))}var _N=(()=>{let t=class t{constructor(i,s,r,o,a,l,c,u=null){this.eventManager=i,this.sharedStylesHost=s,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=so(l),this.defaultRenderer=new $h(i,a,c,this.platformIsServer)}createRenderer(i,s){if(!i||!s)return this.defaultRenderer;this.platformIsServer&&s.encapsulation===hr.ShadowDom&&(s=ae(B({},s),{encapsulation:hr.Emulated}));let r=this.getOrCreateRenderer(i,s);return r instanceof vv?r.applyToHost(i):r instanceof qh&&r.applyStyles(),r}getOrCreateRenderer(i,s){let r=this.rendererByCompId,o=r.get(s.id);if(!o){let a=this.doc,l=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(s.encapsulation){case hr.Emulated:o=new vv(c,u,s,this.appId,h,a,l,f);break;case hr.ShadowDom:return new $b(c,u,i,s,a,l,this.nonce,f);default:o=new qh(c,u,s,h,a,l,f);break}r.set(s.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(s){return new(s||t)(Z(DN),Z(TN),Z(Nm),Z(c8),Z(Jt),Z(jt),Z(de),Z(J_))},t.\u0275prov=Y({token:t,factory:t.\u0275fac});let e=t;return e})(),$h=class{constructor(t,n,i,s){this.eventManager=t,this.doc=n,this.ngZone=i,this.platformIsServer=s,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(Ub[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(bN(t)?t.content:t).appendChild(n)}insertBefore(t,n,i){t&&(bN(t)?t.content:t).insertBefore(n,i)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new ge(-5104,!1);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,s){if(s){n=s+":"+n;let r=Ub[s];r?t.setAttributeNS(r,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){let s=Ub[i];s?t.removeAttributeNS(s,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,s){s&(Qr.DashCase|Qr.Important)?t.style.setProperty(n,i,s&Qr.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&Qr.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t!=null&&(t[n]=i)}setValue(t,n){t.nodeValue=n}listen(t,n,i){if(typeof t=="string"&&(t=io().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(i))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function bN(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var $b=class extends $h{constructor(t,n,i,s,r,o,a,l){super(t,r,o,l),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=IN(s.id,s.styles);for(let u of c){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},qh=class extends $h{constructor(t,n,i,s,r,o,a,l){super(t,r,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=s,this.styles=l?IN(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},vv=class extends qh{constructor(t,n,i,s,r,o,a,l){let c=s+"-"+i.id;super(t,n,i,r,o,a,l,c),this.contentAttr=u8(c),this.hostAttr=d8(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}},h8=(()=>{let t=class t extends mv{constructor(i){super(i)}supports(i){return!0}addEventListener(i,s,r){return i.addEventListener(s,r,!1),()=>this.removeEventListener(i,s,r)}removeEventListener(i,s,r){return i.removeEventListener(s,r)}};t.\u0275fac=function(s){return new(s||t)(Z(Jt))},t.\u0275prov=Y({token:t,factory:t.\u0275fac});let e=t;return e})(),EN=["alt","control","meta","shift"],f8={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},p8={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},g8=(()=>{let t=class t extends mv{constructor(i){super(i)}supports(i){return t.parseEventName(i)!=null}addEventListener(i,s,r){let o=t.parseEventName(s),a=t.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>io().onAndCancel(i,o.domEventName,a))}static parseEventName(i){let s=i.toLowerCase().split("."),r=s.shift();if(s.length===0||!(r==="keydown"||r==="keyup"))return null;let o=t._normalizeKey(s.pop()),a="",l=s.indexOf("code");if(l>-1&&(s.splice(l,1),a="code."),EN.forEach(u=>{let h=s.indexOf(u);h>-1&&(s.splice(h,1),a+=u+".")}),a+=o,s.length!=0||o.length===0)return null;let c={};return c.domEventName=r,c.fullKey=a,c}static matchEventFullKeyCode(i,s){let r=f8[i.key]||i.key,o="";return s.indexOf("code.")>-1&&(r=i.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),EN.forEach(a=>{if(a!==r){let l=p8[a];l(i)&&(o+=a+".")}}),o+=r,o===s)}static eventCallback(i,s,r){return o=>{t.matchEventFullKeyCode(o,i)&&r.runGuarded(()=>s(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};t.\u0275fac=function(s){return new(s||t)(Z(Jt))},t.\u0275prov=Y({token:t,factory:t.\u0275fac});let e=t;return e})();function AN(e,t){return zO(B({rootComponent:e},m8(t)))}function m8(e){return{appProviders:[...S8,...e?.providers??[]],platformProviders:w8}}function v8(){jb.makeCurrent()}function C8(){return new Kr}function y8(){return T1(document),document}var w8=[{provide:jt,useValue:Bb},{provide:Y_,useValue:v8,multi:!0},{provide:Jt,useFactory:y8,deps:[]}];var S8=[{provide:Im,useValue:"root"},{provide:Kr,useFactory:C8,deps:[]},{provide:zb,useClass:h8,multi:!0,deps:[Jt,de,jt]},{provide:zb,useClass:g8,multi:!0,deps:[Jt]},_N,TN,DN,{provide:xh,useExisting:_N},{provide:lv,useClass:r8,deps:[]},[]];var Cv=(()=>{let t=class t{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};t.\u0275fac=function(s){return new(s||t)(Z(Jt))},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var qb=function(e){return e[e.NoHttpTransferCache=0]="NoHttpTransferCache",e[e.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",e}(qb||{});function MN(...e){let t=[],n=new Set,i=n.has(qb.HttpTransferCacheOptions);for(let{\u0275providers:s,\u0275kind:r}of e)n.add(r),s.length&&t.push(s);return mt([[],$O(),n.has(qb.NoHttpTransferCache)||i?[]:SN({}),t])}var Ne="primary",uf=Symbol("RouteTitle"),Zb=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function hu(e){return new Zb(e)}function _8(e,t,n){let i=n.path.split("/");if(i.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||i.length<e.length))return null;let s={};for(let r=0;r<i.length;r++){let o=i[r],a=e[r];if(o.startsWith(":"))s[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:e.slice(0,i.length),posParams:s}}function b8(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Sr(e[n],t[n]))return!1;return!0}function Sr(e,t){let n=e?e0(e):void 0,i=t?e0(t):void 0;if(!n||!i||n.length!=i.length)return!1;let s;for(let r=0;r<n.length;r++)if(s=n[r],!LN(e[s],t[s]))return!1;return!0}function e0(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function LN(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),i=[...t].sort();return n.every((s,r)=>i[r]===s)}else return e===t}function VN(e){return e.length>0?e[e.length-1]:null}function ha(e){return tS(e)?e:dl(e)?tt(Promise.resolve(e)):X(e)}var E8={exact:GN,subset:HN},BN={exact:D8,subset:T8,ignored:()=>!0};function FN(e,t,n){return E8[n.paths](e.root,t.root,n.matrixParams)&&BN[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function D8(e,t){return Sr(e,t)}function GN(e,t,n){if(!pl(e.segments,t.segments)||!Sv(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!e.children[i]||!GN(e.children[i],t.children[i],n))return!1;return!0}function T8(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>LN(e[n],t[n]))}function HN(e,t,n){return UN(e,t,t.segments,n)}function UN(e,t,n,i){if(e.segments.length>n.length){let s=e.segments.slice(0,n.length);return!(!pl(s,n)||t.hasChildren()||!Sv(s,n,i))}else if(e.segments.length===n.length){if(!pl(e.segments,n)||!Sv(e.segments,n,i))return!1;for(let s in t.children)if(!e.children[s]||!HN(e.children[s],t.children[s],i))return!1;return!0}else{let s=n.slice(0,e.segments.length),r=n.slice(e.segments.length);return!pl(e.segments,s)||!Sv(e.segments,s,i)||!e.children[Ne]?!1:UN(e.children[Ne],t,r,i)}}function Sv(e,t,n){return t.every((i,s)=>BN[n](e[s].parameters,i.parameters))}var ua=class{constructor(t=new lt([],{}),n={},i=null){this.root=t,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=hu(this.queryParams),this._queryParamMap}toString(){return A8.serialize(this)}},lt=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _v(this)}},fl=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=hu(this.parameters),this._parameterMap}toString(){return jN(this)}};function R8(e,t){return pl(e,t)&&e.every((n,i)=>Sr(n.parameters,t[i].parameters))}function pl(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.path===t[i].path)}function I8(e,t){let n=[];return Object.entries(e.children).forEach(([i,s])=>{i===Ne&&(n=n.concat(t(s,i)))}),Object.entries(e.children).forEach(([i,s])=>{i!==Ne&&(n=n.concat(t(s,i)))}),n}var D0=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:()=>new Ev,providedIn:"root"});let e=t;return e})(),Ev=class{parse(t){let n=new n0(t);return new ua(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${Kh(t.root,!0)}`,i=F8(t.queryParams),s=typeof t.fragment=="string"?`#${M8(t.fragment)}`:"";return`${n}${i}${s}`}},A8=new Ev;function _v(e){return e.segments.map(t=>jN(t)).join("/")}function Kh(e,t){if(!e.hasChildren())return _v(e);if(t){let n=e.children[Ne]?Kh(e.children[Ne],!1):"",i=[];return Object.entries(e.children).forEach(([s,r])=>{s!==Ne&&i.push(`${s}:${Kh(r,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=I8(e,(i,s)=>s===Ne?[Kh(e.children[Ne],!1)]:[`${s}:${Kh(i,!1)}`]);return Object.keys(e.children).length===1&&e.children[Ne]!=null?`${_v(e)}/${n[0]}`:`${_v(e)}/(${n.join("//")})`}}function WN(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yv(e){return WN(e).replace(/%3B/gi,";")}function M8(e){return encodeURI(e)}function t0(e){return WN(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bv(e){return decodeURIComponent(e)}function xN(e){return bv(e.replace(/\+/g,"%20"))}function jN(e){return`${t0(e.path)}${P8(e.parameters)}`}function P8(e){return Object.entries(e).map(([t,n])=>`;${t0(t)}=${t0(n)}`).join("")}function F8(e){let t=Object.entries(e).map(([n,i])=>Array.isArray(i)?i.map(s=>`${yv(n)}=${yv(s)}`).join("&"):`${yv(n)}=${yv(i)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var x8=/^[^\/()?;#]+/;function Qb(e){let t=e.match(x8);return t?t[0]:""}var O8=/^[^\/()?;=#]+/;function N8(e){let t=e.match(O8);return t?t[0]:""}var k8=/^[^=?&#]+/;function L8(e){let t=e.match(k8);return t?t[0]:""}var V8=/^[^&#]+/;function B8(e){let t=e.match(V8);return t?t[0]:""}var n0=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new lt([],{}):new lt([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(i[Ne]=new lt(t,n)),i}parseSegment(){let t=Qb(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new ge(4009,!1);return this.capture(t),new fl(bv(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=N8(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let s=Qb(this.remaining);s&&(i=s,this.capture(i))}t[bv(n)]=bv(i)}parseQueryParam(t){let n=L8(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let o=B8(this.remaining);o&&(i=o,this.capture(i))}let s=xN(n),r=xN(i);if(t.hasOwnProperty(s)){let o=t[s];Array.isArray(o)||(o=[o],t[s]=o),o.push(r)}else t[s]=r}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Qb(this.remaining),s=this.remaining[i.length];if(s!=="/"&&s!==")"&&s!==";")throw new ge(4010,!1);let r;i.indexOf(":")>-1?(r=i.slice(0,i.indexOf(":")),this.capture(r),this.capture(":")):t&&(r=Ne);let o=this.parseChildren();n[r]=Object.keys(o).length===1?o[Ne]:new lt([],o),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new ge(4011,!1)}};function zN(e){return e.segments.length>0?new lt([],{[Ne]:e}):e}function $N(e){let t={};for(let[i,s]of Object.entries(e.children)){let r=$N(s);if(i===Ne&&r.segments.length===0&&r.hasChildren())for(let[o,a]of Object.entries(r.children))t[o]=a;else(r.segments.length>0||r.hasChildren())&&(t[i]=r)}let n=new lt(e.segments,t);return G8(n)}function G8(e){if(e.numberOfChildren===1&&e.children[Ne]){let t=e.children[Ne];return new lt(e.segments.concat(t.segments),t.children)}return e}function fu(e){return e instanceof ua}function H8(e,t,n=null,i=null){let s=qN(e);return KN(s,t,n,i)}function qN(e){let t;function n(r){let o={};for(let l of r.children){let c=n(l);o[l.outlet]=c}let a=new lt(r.url,o);return r===e&&(t=a),a}let i=n(e.root),s=zN(i);return t??s}function KN(e,t,n,i){let s=e;for(;s.parent;)s=s.parent;if(t.length===0)return Yb(s,s,s,n,i);let r=U8(t);if(r.toRoot())return Yb(s,s,new lt([],{}),n,i);let o=W8(r,s,e),a=o.processChildren?Jh(o.segmentGroup,o.index,r.commands):YN(o.segmentGroup,o.index,r.commands);return Yb(s,o.segmentGroup,a,n,i)}function Dv(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function ef(e){return typeof e=="object"&&e!=null&&e.outlets}function Yb(e,t,n,i,s){let r={};i&&Object.entries(i).forEach(([l,c])=>{r[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let o;e===t?o=n:o=QN(e,t,n);let a=zN($N(o));return new ua(a,r,s)}function QN(e,t,n){let i={};return Object.entries(e.children).forEach(([s,r])=>{r===t?i[s]=n:i[s]=QN(r,t,n)}),new lt(e.segments,i)}var Tv=class{constructor(t,n,i){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=i,t&&i.length>0&&Dv(i[0]))throw new ge(4003,!1);let s=i.find(ef);if(s&&s!==VN(i))throw new ge(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function U8(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Tv(!0,0,e);let t=0,n=!1,i=e.reduce((s,r,o)=>{if(typeof r=="object"&&r!=null){if(r.outlets){let a={};return Object.entries(r.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...s,{outlets:a}]}if(r.segmentPath)return[...s,r.segmentPath]}return typeof r!="string"?[...s,r]:o===0?(r.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?t++:a!=""&&s.push(a))}),s):[...s,r]},[]);return new Tv(n,t,i)}var uu=class{constructor(t,n,i){this.segmentGroup=t,this.processChildren=n,this.index=i}};function W8(e,t,n){if(e.isAbsolute)return new uu(t,!0,0);if(!n)return new uu(t,!1,NaN);if(n.parent===null)return new uu(n,!0,0);let i=Dv(e.commands[0])?0:1,s=n.segments.length-1+i;return j8(n,s,e.numberOfDoubleDots)}function j8(e,t,n){let i=e,s=t,r=n;for(;r>s;){if(r-=s,i=i.parent,!i)throw new ge(4005,!1);s=i.segments.length}return new uu(i,!1,s-r)}function z8(e){return ef(e[0])?e[0].outlets:{[Ne]:e}}function YN(e,t,n){if(e??=new lt([],{}),e.segments.length===0&&e.hasChildren())return Jh(e,t,n);let i=$8(e,t,n),s=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){let r=new lt(e.segments.slice(0,i.pathIndex),{});return r.children[Ne]=new lt(e.segments.slice(i.pathIndex),e.children),Jh(r,0,s)}else return i.match&&s.length===0?new lt(e.segments,{}):i.match&&!e.hasChildren()?i0(e,t,n):i.match?Jh(e,0,s):i0(e,t,n)}function Jh(e,t,n){if(n.length===0)return new lt(e.segments,{});{let i=z8(n),s={};if(Object.keys(i).some(r=>r!==Ne)&&e.children[Ne]&&e.numberOfChildren===1&&e.children[Ne].segments.length===0){let r=Jh(e.children[Ne],t,n);return new lt(e.segments,r.children)}return Object.entries(i).forEach(([r,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(s[r]=YN(e.children[r],t,o))}),Object.entries(e.children).forEach(([r,o])=>{i[r]===void 0&&(s[r]=o)}),new lt(e.segments,s)}}function $8(e,t,n){let i=0,s=t,r={match:!1,pathIndex:0,commandIndex:0};for(;s<e.segments.length;){if(i>=n.length)return r;let o=e.segments[s],a=n[i];if(ef(a))break;let l=`${a}`,c=i<n.length-1?n[i+1]:null;if(s>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!NN(l,c,o))return r;i+=2}else{if(!NN(l,{},o))return r;i++}s++}return{match:!0,pathIndex:s,commandIndex:i}}function i0(e,t,n){let i=e.segments.slice(0,t),s=0;for(;s<n.length;){let r=n[s];if(ef(r)){let l=q8(r.outlets);return new lt(i,l)}if(s===0&&Dv(n[0])){let l=e.segments[t];i.push(new fl(l.path,ON(n[0]))),s++;continue}let o=ef(r)?r.outlets[Ne]:`${r}`,a=s<n.length-1?n[s+1]:null;o&&a&&Dv(a)?(i.push(new fl(o,ON(a))),s+=2):(i.push(new fl(o,{})),s++)}return new lt(i,{})}function q8(e){let t={};return Object.entries(e).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[n]=i0(new lt([],{}),0,i))}),t}function ON(e){let t={};return Object.entries(e).forEach(([n,i])=>t[n]=`${i}`),t}function NN(e,t,n){return e==n.path&&Sr(t,n.parameters)}var Xh="imperative",Pn=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Pn||{}),ls=class{constructor(t,n){this.id=t,this.url=n}},tf=class extends ls{constructor(t,n,i="imperative",s=null){super(t,n),this.type=Pn.NavigationStart,this.navigationTrigger=i,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},gl=class extends ls{constructor(t,n,i){super(t,n),this.urlAfterRedirects=i,this.type=Pn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ji=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(ji||{}),s0=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(s0||{}),da=class extends ls{constructor(t,n,i,s){super(t,n),this.reason=i,this.code=s,this.type=Pn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ml=class extends ls{constructor(t,n,i,s){super(t,n),this.reason=i,this.code=s,this.type=Pn.NavigationSkipped}},nf=class extends ls{constructor(t,n,i,s){super(t,n),this.error=i,this.target=s,this.type=Pn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Rv=class extends ls{constructor(t,n,i,s){super(t,n),this.urlAfterRedirects=i,this.state=s,this.type=Pn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},r0=class extends ls{constructor(t,n,i,s){super(t,n),this.urlAfterRedirects=i,this.state=s,this.type=Pn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},o0=class extends ls{constructor(t,n,i,s,r){super(t,n),this.urlAfterRedirects=i,this.state=s,this.shouldActivate=r,this.type=Pn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},a0=class extends ls{constructor(t,n,i,s){super(t,n),this.urlAfterRedirects=i,this.state=s,this.type=Pn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},l0=class extends ls{constructor(t,n,i,s){super(t,n),this.urlAfterRedirects=i,this.state=s,this.type=Pn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},c0=class{constructor(t){this.route=t,this.type=Pn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},u0=class{constructor(t){this.route=t,this.type=Pn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},d0=class{constructor(t){this.snapshot=t,this.type=Pn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},h0=class{constructor(t){this.snapshot=t,this.type=Pn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},f0=class{constructor(t){this.snapshot=t,this.type=Pn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sf=class{constructor(t){this.snapshot=t,this.type=Pn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var rf=class{},of=class{constructor(t){this.url=t}};var p0=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new xv,this.attachRef=null}},xv=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(i,s){let r=this.getOrCreateContext(i);r.outlet=s,this.contexts.set(i,r)}onChildOutletDestroyed(i){let s=this.getContext(i);s&&(s.outlet=null,s.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let s=this.getContext(i);return s||(s=new p0,this.contexts.set(i,s)),s}getContext(i){return this.contexts.get(i)||null}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Iv=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=g0(t,this._root);return n?n.children.map(i=>i.value):[]}firstChild(t){let n=g0(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=m0(t,this._root);return n.length<2?[]:n[n.length-2].children.map(s=>s.value).filter(s=>s!==t)}pathFromRoot(t){return m0(t,this._root).map(n=>n.value)}};function g0(e,t){if(e===t.value)return t;for(let n of t.children){let i=g0(e,n);if(i)return i}return null}function m0(e,t){if(e===t.value)return[t];for(let n of t.children){let i=m0(e,n);if(i.length)return i.unshift(t),i}return[]}var Wi=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function cu(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var Av=class extends Iv{constructor(t,n){super(t),this.snapshot=n,R0(this,t)}toString(){return this.snapshot.toString()}};function JN(e){let t=K8(e),n=new wt([new fl("",{})]),i=new wt({}),s=new wt({}),r=new wt({}),o=new wt(""),a=new pu(n,i,r,o,s,Ne,e,t.root);return a.snapshot=t.root,new Av(new Wi(a,[]),t)}function K8(e){let t={},n={},i={},s="",r=new af([],t,i,s,n,Ne,e,null,{});return new Mv("",new Wi(r,[]))}var pu=class{constructor(t,n,i,s,r,o,a,l){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=s,this.dataSubject=r,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(oe(c=>c[uf]))??X(void 0),this.url=t,this.params=n,this.queryParams=i,this.fragment=s,this.data=r}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(oe(t=>hu(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(oe(t=>hu(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function T0(e,t,n="emptyOnly"){let i,{routeConfig:s}=e;return t!==null&&(n==="always"||s?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:B(B({},t.params),e.params),data:B(B({},t.data),e.data),resolve:B(B(B(B({},e.data),t.data),s?.data),e._resolvedData)}:i={params:B({},e.params),data:B({},e.data),resolve:B(B({},e.data),e._resolvedData??{})},s&&ZN(s)&&(i.resolve[uf]=s.title),i}var af=class{get title(){return this.data?.[uf]}constructor(t,n,i,s,r,o,a,l,c){this.url=t,this.params=n,this.queryParams=i,this.fragment=s,this.data=r,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=hu(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=hu(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Mv=class extends Iv{constructor(t,n){super(n),this.url=t,R0(this,n)}toString(){return XN(this._root)}};function R0(e,t){t.value._routerState=e,t.children.forEach(n=>R0(e,n))}function XN(e){let t=e.children.length>0?` { ${e.children.map(XN).join(", ")} } `:"";return`${e.value}${t}`}function Jb(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Sr(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Sr(t.params,n.params)||e.paramsSubject.next(n.params),b8(t.url,n.url)||e.urlSubject.next(n.url),Sr(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function v0(e,t){let n=Sr(e.params,t.params)&&R8(e.url,t.url),i=!e.parent!=!t.parent;return n&&!i&&(!e.parent||v0(e.parent,t.parent))}function ZN(e){return typeof e.title=="string"||e.title===null}var df=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ne,this.activateEvents=new W,this.deactivateEvents=new W,this.attachEvents=new W,this.detachEvents=new W,this.parentContexts=G(xv),this.location=G(Bi),this.changeDetector=G(Cr),this.environmentInjector=G(ei),this.inputBinder=G(I0,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:s,previousValue:r}=i.name;if(s)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ge(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ge(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ge(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,s){this.activated=i,this._activatedRoute=s,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,s){if(this.isActivated)throw new ge(4013,!1);this._activatedRoute=i;let r=this.location,a=i.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new C0(i,l,r.injector);this.activated=r.createComponent(a,{index:r.length,injector:c,environmentInjector:s??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(s){return new(s||t)},t.\u0275dir=At({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[kt]});let e=t;return e})(),C0=class e{__ngOutletInjector(t){return new e(this.route,this.childContexts,t)}constructor(t,n,i){this.route=t,this.childContexts=n,this.parent=i}get(t,n){return t===pu?this.route:t===xv?this.childContexts:this.parent.get(t,n)}},I0=new te("");function Q8(e,t,n){let i=lf(e,t._root,n?n._root:void 0);return new Av(i,t)}function lf(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=t.value;let s=Y8(e,t,n);return new Wi(i,s)}else{if(e.shouldAttach(t.value)){let r=e.retrieve(t.value);if(r!==null){let o=r.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>lf(e,a)),o}}let i=J8(t.value),s=t.children.map(r=>lf(e,r));return new Wi(i,s)}}function Y8(e,t,n){return t.children.map(i=>{for(let s of n.children)if(e.shouldReuseRoute(i.value,s.value.snapshot))return lf(e,i,s);return lf(e,i)})}function J8(e){return new pu(new wt(e.url),new wt(e.params),new wt(e.queryParams),new wt(e.fragment),new wt(e.data),e.outlet,e.component,e)}var ek="ngNavigationCancelingError";function tk(e,t){let{redirectTo:n,navigationBehaviorOptions:i}=fu(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,s=nk(!1,ji.Redirect);return s.url=n,s.navigationBehaviorOptions=i,s}function nk(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[ek]=!0,n.cancellationCode=t,n}function X8(e){return ik(e)&&fu(e.url)}function ik(e){return!!e&&e[ek]}var A0=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=_e({type:t,selectors:[["ng-component"]],standalone:!0,features:[be],decls:1,vars:0,template:function(s,r){s&1&&ne(0,"router-outlet")},dependencies:[df],encapsulation:2});let e=t;return e})();function Z8(e,t){return e.providers&&!e._injector&&(e._injector=yb(e.providers,t,`Route: ${e.path}`)),e._injector??t}function M0(e){let t=e.children&&e.children.map(M0),n=t?ae(B({},e),{children:t}):B({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Ne&&(n.component=A0),n}function _r(e){return e.outlet||Ne}function e9(e,t){let n=e.filter(i=>_r(i)===t);return n.push(...e.filter(i=>_r(i)!==t)),n}function hf(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var t9=(e,t,n,i)=>oe(s=>(new y0(t,s.targetRouterState,s.currentRouterState,n,i).activate(e),s)),y0=class{constructor(t,n,i,s,r){this.routeReuseStrategy=t,this.futureState=n,this.currState=i,this.forwardEvent=s,this.inputBindingEnabled=r}activate(t){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,t),Jb(this.futureState.root),this.activateChildRoutes(n,i,t)}deactivateChildRoutes(t,n,i){let s=cu(n);t.children.forEach(r=>{let o=r.value.outlet;this.deactivateRoutes(r,s[o],i),delete s[o]}),Object.values(s).forEach(r=>{this.deactivateRouteAndItsChildren(r,i)})}deactivateRoutes(t,n,i){let s=t.value,r=n?n.value:null;if(s===r)if(s.component){let o=i.getContext(s.outlet);o&&this.deactivateChildRoutes(t,n,o.children)}else this.deactivateChildRoutes(t,n,i);else r&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let i=n.getContext(t.value.outlet),s=i&&t.value.component?i.children:n,r=cu(t);for(let o of Object.values(r))this.deactivateRouteAndItsChildren(o,s);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let i=n.getContext(t.value.outlet),s=i&&t.value.component?i.children:n,r=cu(t);for(let o of Object.values(r))this.deactivateRouteAndItsChildren(o,s);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,n,i){let s=cu(n);t.children.forEach(r=>{this.activateRoutes(r,s[r.value.outlet],i),this.forwardEvent(new sf(r.value.snapshot))}),t.children.length&&this.forwardEvent(new h0(t.value.snapshot))}activateRoutes(t,n,i){let s=t.value,r=n?n.value:null;if(Jb(s),s===r)if(s.component){let o=i.getOrCreateContext(s.outlet);this.activateChildRoutes(t,n,o.children)}else this.activateChildRoutes(t,n,i);else if(s.component){let o=i.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){let a=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Jb(a.route.value),this.activateChildRoutes(t,null,o.children)}else{let a=hf(s.snapshot);o.attachRef=null,o.route=s,o.injector=a,o.outlet&&o.outlet.activateWith(s,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,i)}},Pv=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},du=class{constructor(t,n){this.component=t,this.route=n}};function n9(e,t,n){let i=e._root,s=t?t._root:null;return Qh(i,s,n,[i.value])}function i9(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function mu(e,t){let n=Symbol(),i=t.get(e,n);return i===n?typeof e=="function"&&!dx(e)?e:t.get(e):i}function Qh(e,t,n,i,s={canDeactivateChecks:[],canActivateChecks:[]}){let r=cu(t);return e.children.forEach(o=>{s9(o,r[o.value.outlet],n,i.concat([o.value]),s),delete r[o.value.outlet]}),Object.entries(r).forEach(([o,a])=>Zh(a,n.getContext(o),s)),s}function s9(e,t,n,i,s={canDeactivateChecks:[],canActivateChecks:[]}){let r=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&r.routeConfig===o.routeConfig){let l=r9(o,r,r.routeConfig.runGuardsAndResolvers);l?s.canActivateChecks.push(new Pv(i)):(r.data=o.data,r._resolvedData=o._resolvedData),r.component?Qh(e,t,a?a.children:null,i,s):Qh(e,t,n,i,s),l&&a&&a.outlet&&a.outlet.isActivated&&s.canDeactivateChecks.push(new du(a.outlet.component,o))}else o&&Zh(t,a,s),s.canActivateChecks.push(new Pv(i)),r.component?Qh(e,null,a?a.children:null,i,s):Qh(e,null,n,i,s);return s}function r9(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!pl(e.url,t.url);case"pathParamsOrQueryParamsChange":return!pl(e.url,t.url)||!Sr(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!v0(e,t)||!Sr(e.queryParams,t.queryParams);case"paramsChange":default:return!v0(e,t)}}function Zh(e,t,n){let i=cu(e),s=e.value;Object.entries(i).forEach(([r,o])=>{s.component?t?Zh(o,t.children.getContext(r),n):Zh(o,null,n):Zh(o,t,n)}),s.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new du(t.outlet.component,s)):n.canDeactivateChecks.push(new du(null,s)):n.canDeactivateChecks.push(new du(null,s))}function ff(e){return typeof e=="function"}function o9(e){return typeof e=="boolean"}function a9(e){return e&&ff(e.canLoad)}function l9(e){return e&&ff(e.canActivate)}function c9(e){return e&&ff(e.canActivateChild)}function u9(e){return e&&ff(e.canDeactivate)}function d9(e){return e&&ff(e.canMatch)}function sk(e){return e instanceof Wr||e?.name==="EmptyError"}var wv=Symbol("INITIAL_VALUE");function gu(){return ke(e=>Fs(e.map(t=>t.pipe(ut(1),Ja(wv)))).pipe(oe(t=>{for(let n of t)if(n!==!0){if(n===wv)return wv;if(n===!1||n instanceof ua)return n}return!0}),Ye(t=>t!==wv),ut(1)))}function h9(e,t){return ft(n=>{let{targetSnapshot:i,currentSnapshot:s,guards:{canActivateChecks:r,canDeactivateChecks:o}}=n;return o.length===0&&r.length===0?X(ae(B({},n),{guardsResult:!0})):f9(o,i,s,e).pipe(ft(a=>a&&o9(a)?p9(i,r,e,t):X(a)),oe(a=>ae(B({},n),{guardsResult:a})))})}function f9(e,t,n,i){return tt(e).pipe(ft(s=>y9(s.component,s.route,n,t,i)),Oi(s=>s!==!0,!0))}function p9(e,t,n,i){return tt(t).pipe(qo(s=>ns(m9(s.route.parent,i),g9(s.route,i),C9(e,s.path,n),v9(e,s.route,n))),Oi(s=>s!==!0,!0))}function g9(e,t){return e!==null&&t&&t(new f0(e)),X(!0)}function m9(e,t){return e!==null&&t&&t(new d0(e)),X(!0)}function v9(e,t,n){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return X(!0);let s=i.map(r=>Qa(()=>{let o=hf(t)??n,a=mu(r,o),l=l9(a)?a.canActivate(t,e):ta(o,()=>a(t,e));return ha(l).pipe(Oi())}));return X(s).pipe(gu())}function C9(e,t,n){let i=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(o=>i9(o)).filter(o=>o!==null).map(o=>Qa(()=>{let a=o.guards.map(l=>{let c=hf(o.node)??n,u=mu(l,c),h=c9(u)?u.canActivateChild(i,e):ta(c,()=>u(i,e));return ha(h).pipe(Oi())});return X(a).pipe(gu())}));return X(r).pipe(gu())}function y9(e,t,n,i,s){let r=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!r||r.length===0)return X(!0);let o=r.map(a=>{let l=hf(t)??s,c=mu(a,l),u=u9(c)?c.canDeactivate(e,t,n,i):ta(l,()=>c(e,t,n,i));return ha(u).pipe(Oi())});return X(o).pipe(gu())}function w9(e,t,n,i){let s=t.canLoad;if(s===void 0||s.length===0)return X(!0);let r=s.map(o=>{let a=mu(o,e),l=a9(a)?a.canLoad(t,n):ta(e,()=>a(t,n));return ha(l)});return X(r).pipe(gu(),rk(i))}function rk(e){return yg(pt(t=>{if(fu(t))throw tk(e,t)}),oe(t=>t===!0))}function S9(e,t,n,i){let s=t.canMatch;if(!s||s.length===0)return X(!0);let r=s.map(o=>{let a=mu(o,e),l=d9(a)?a.canMatch(t,n):ta(e,()=>a(t,n));return ha(l)});return X(r).pipe(gu(),rk(i))}var cf=class{constructor(t){this.segmentGroup=t||null}},Fv=class extends Error{constructor(t){super(),this.urlTree=t}};function lu(e){return Uo(new cf(e))}function _9(e){return Uo(new ge(4e3,!1))}function b9(e){return Uo(nk(!1,ji.GuardRejected))}var w0=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let i=[],s=n.root;for(;;){if(i=i.concat(s.segments),s.numberOfChildren===0)return X(i);if(s.numberOfChildren>1||!s.children[Ne])return _9(t.redirectTo);s=s.children[Ne]}}applyRedirectCommands(t,n,i){let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,i);if(n.startsWith("/"))throw new Fv(s);return s}applyRedirectCreateUrlTree(t,n,i,s){let r=this.createSegmentGroup(t,n.root,i,s);return new ua(r,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let i={};return Object.entries(t).forEach(([s,r])=>{if(typeof r=="string"&&r.startsWith(":")){let a=r.substring(1);i[s]=n[a]}else i[s]=r}),i}createSegmentGroup(t,n,i,s){let r=this.createSegments(t,n.segments,i,s),o={};return Object.entries(n.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(t,l,i,s)}),new lt(r,o)}createSegments(t,n,i,s){return n.map(r=>r.path.startsWith(":")?this.findPosParam(t,r,s):this.findOrReturn(r,i))}findPosParam(t,n,i){let s=i[n.path.substring(1)];if(!s)throw new ge(4001,!1);return s}findOrReturn(t,n){let i=0;for(let s of n){if(s.path===t.path)return n.splice(i),s;i++}return t}},S0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function E9(e,t,n,i,s){let r=P0(e,t,n);return r.matched?(i=Z8(t,i),S9(i,t,n,s).pipe(oe(o=>o===!0?r:B({},S0)))):X(r)}function P0(e,t,n){if(t.path==="**")return D9(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?B({},S0):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let s=(t.matcher||_8)(n,e,t);if(!s)return B({},S0);let r={};Object.entries(s.posParams??{}).forEach(([a,l])=>{r[a]=l.path});let o=s.consumed.length>0?B(B({},r),s.consumed[s.consumed.length-1].parameters):r;return{matched:!0,consumedSegments:s.consumed,remainingSegments:n.slice(s.consumed.length),parameters:o,positionalParamSegments:s.posParams??{}}}function D9(e){return{matched:!0,parameters:e.length>0?VN(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function kN(e,t,n,i){return n.length>0&&I9(e,n,i)?{segmentGroup:new lt(t,R9(i,new lt(n,e.children))),slicedSegments:[]}:n.length===0&&A9(e,n,i)?{segmentGroup:new lt(e.segments,T9(e,n,i,e.children)),slicedSegments:n}:{segmentGroup:new lt(e.segments,e.children),slicedSegments:n}}function T9(e,t,n,i){let s={};for(let r of n)if(Ov(e,t,r)&&!i[_r(r)]){let o=new lt([],{});s[_r(r)]=o}return B(B({},i),s)}function R9(e,t){let n={};n[Ne]=t;for(let i of e)if(i.path===""&&_r(i)!==Ne){let s=new lt([],{});n[_r(i)]=s}return n}function I9(e,t,n){return n.some(i=>Ov(e,t,i)&&_r(i)!==Ne)}function A9(e,t,n){return n.some(i=>Ov(e,t,i))}function Ov(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function M9(e,t,n,i){return _r(e)!==i&&(i===Ne||!Ov(t,n,e))?!1:P0(t,e,n).matched}function P9(e,t,n){return t.length===0&&!e.children[n]}var _0=class{};function F9(e,t,n,i,s,r,o="emptyOnly"){return new b0(e,t,n,i,s,o,r).recognize()}var x9=31,b0=class{constructor(t,n,i,s,r,o,a){this.injector=t,this.configLoader=n,this.rootComponentType=i,this.config=s,this.urlTree=r,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new w0(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new ge(4002,`'${t.segmentGroup}'`)}recognize(){let t=kN(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(oe(n=>{let i=new af([],Object.freeze({}),Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ne,this.rootComponentType,null,{}),s=new Wi(i,n),r=new Mv("",s),o=H8(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,r.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(r._root,null),{state:r,tree:o}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,Ne).pipe($o(i=>{if(i instanceof Fv)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof cf?this.noMatchError(i):i}))}inheritParamsAndData(t,n){let i=t.value,s=T0(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(s.params),i.data=Object.freeze(s.data),t.children.forEach(r=>this.inheritParamsAndData(r,i))}processSegmentGroup(t,n,i,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,n,i):this.processSegment(t,n,i,i.segments,s,!0).pipe(oe(r=>r instanceof Wi?[r]:[]))}processChildren(t,n,i){let s=[];for(let r of Object.keys(i.children))r==="primary"?s.unshift(r):s.push(r);return tt(s).pipe(qo(r=>{let o=i.children[r],a=e9(n,r);return this.processSegmentGroup(t,a,o,r)}),Hg((r,o)=>(r.push(...o),r)),Ko(null),aS(),ft(r=>{if(r===null)return lu(i);let o=ok(r);return O9(o),X(o)}))}processSegment(t,n,i,s,r,o){return tt(n).pipe(qo(a=>this.processSegmentAgainstRoute(a._injector??t,n,a,i,s,r,o).pipe($o(l=>{if(l instanceof cf)return X(null);throw l}))),Oi(a=>!!a),$o(a=>{if(sk(a))return P9(i,s,r)?X(new _0):lu(i);throw a}))}processSegmentAgainstRoute(t,n,i,s,r,o,a){return M9(i,s,r,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,s,i,r,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,s,n,i,r,o):lu(s):lu(s)}expandSegmentAgainstRouteUsingRedirect(t,n,i,s,r,o){let{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:u}=P0(n,s,r);if(!a)return lu(n);s.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>x9&&(this.allowRedirects=!1));let h=this.applyRedirects.applyRedirectCommands(l,s.redirectTo,c);return this.applyRedirects.lineralizeSegments(s,h).pipe(ft(f=>this.processSegment(t,i,n,f.concat(u),o,!1)))}matchSegmentAgainstRoute(t,n,i,s,r){let o=E9(n,i,s,t,this.urlSerializer);return i.path==="**"&&(n.children={}),o.pipe(ke(a=>a.matched?(t=i._injector??t,this.getChildConfig(t,i,s).pipe(ke(({routes:l})=>{let c=i._loadedInjector??t,{consumedSegments:u,remainingSegments:h,parameters:f}=a,p=new af(u,f,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,k9(i),_r(i),i.component??i._loadedComponent??null,i,L9(i)),{segmentGroup:v,slicedSegments:y}=kN(n,u,h,l);if(y.length===0&&v.hasChildren())return this.processChildren(c,l,v).pipe(oe(E=>E===null?null:new Wi(p,E)));if(l.length===0&&y.length===0)return X(new Wi(p,[]));let C=_r(i)===r;return this.processSegment(c,l,v,y,C?Ne:r,!0).pipe(oe(E=>new Wi(p,E instanceof Wi?[E]:[])))}))):lu(n)))}getChildConfig(t,n,i){return n.children?X({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?X({routes:n._loadedRoutes,injector:n._loadedInjector}):w9(t,n,i,this.urlSerializer).pipe(ft(s=>s?this.configLoader.loadChildren(t,n).pipe(pt(r=>{n._loadedRoutes=r.routes,n._loadedInjector=r.injector})):b9(n))):X({routes:[],injector:t})}};function O9(e){e.sort((t,n)=>t.value.outlet===Ne?-1:n.value.outlet===Ne?1:t.value.outlet.localeCompare(n.value.outlet))}function N9(e){let t=e.value.routeConfig;return t&&t.path===""}function ok(e){let t=[],n=new Set;for(let i of e){if(!N9(i)){t.push(i);continue}let s=t.find(r=>i.value.routeConfig===r.value.routeConfig);s!==void 0?(s.children.push(...i.children),n.add(s)):t.push(i)}for(let i of n){let s=ok(i.children);t.push(new Wi(i.value,s))}return t.filter(i=>!n.has(i))}function k9(e){return e.data||{}}function L9(e){return e.resolve||{}}function V9(e,t,n,i,s,r){return ft(o=>F9(e,t,n,i,o.extractedUrl,s,r).pipe(oe(({state:a,tree:l})=>ae(B({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function B9(e,t){return ft(n=>{let{targetSnapshot:i,guards:{canActivateChecks:s}}=n;if(!s.length)return X(n);let r=new Set(s.map(l=>l.route)),o=new Set;for(let l of r)if(!o.has(l))for(let c of ak(l))o.add(c);let a=0;return tt(o).pipe(qo(l=>r.has(l)?G9(l,i,e,t):(l.data=T0(l,l.parent,e).resolve,X(void 0))),pt(()=>a++),Bc(1),ft(l=>a===o.size?X(n):an))})}function ak(e){let t=e.children.map(n=>ak(n)).flat();return[e,...t]}function G9(e,t,n,i){let s=e.routeConfig,r=e._resolve;return s?.title!==void 0&&!ZN(s)&&(r[uf]=s.title),H9(r,e,t,i).pipe(oe(o=>(e._resolvedData=o,e.data=T0(e,e.parent,n).resolve,null)))}function H9(e,t,n,i){let s=e0(e);if(s.length===0)return X({});let r={};return tt(s).pipe(ft(o=>U9(e[o],t,n,i).pipe(Oi(),pt(a=>{r[o]=a}))),Bc(1),vh(r),$o(o=>sk(o)?an:Uo(o)))}function U9(e,t,n,i){let s=hf(t)??i,r=mu(e,s),o=r.resolve?r.resolve(t,n):ta(s,()=>r(t,n));return ha(o)}function Xb(e){return ke(t=>{let n=e(t);return n?tt(n).pipe(oe(()=>t)):X(t)})}var lk=(()=>{let t=class t{buildTitle(i){let s,r=i.root;for(;r!==void 0;)s=this.getResolvedTitleForRoute(r)??s,r=r.children.find(o=>o.outlet===Ne);return s}getResolvedTitleForRoute(i){return i.data[uf]}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:()=>G(W9),providedIn:"root"});let e=t;return e})(),W9=(()=>{let t=class t extends lk{constructor(i){super(),this.title=i}updateTitle(i){let s=this.buildTitle(i);s!==void 0&&this.title.setTitle(s)}};t.\u0275fac=function(s){return new(s||t)(Z(Cv))},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),F0=new te("",{providedIn:"root",factory:()=>({})}),x0=new te(""),j9=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=G(Ib)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return X(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let s=ha(i.loadComponent()).pipe(oe(ck),pt(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),Ya(()=>{this.componentLoaders.delete(i)})),r=new Go(s,()=>new Me).pipe(xc());return this.componentLoaders.set(i,r),r}loadChildren(i,s){if(this.childrenLoaders.get(s))return this.childrenLoaders.get(s);if(s._loadedRoutes)return X({routes:s._loadedRoutes,injector:s._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(s);let o=z9(s,this.compiler,i,this.onLoadEndListener).pipe(Ya(()=>{this.childrenLoaders.delete(s)})),a=new Go(o,()=>new Me).pipe(xc());return this.childrenLoaders.set(s,a),a}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function z9(e,t,n,i){return ha(e.loadChildren()).pipe(oe(ck),ft(s=>s instanceof Oh||Array.isArray(s)?X(s):tt(t.compileModuleAsync(s))),oe(s=>{i&&i(e);let r,o,a=!1;return Array.isArray(s)?(o=s,a=!0):(r=s.create(n).injector,o=r.get(x0,[],{optional:!0,self:!0}).flat()),{routes:o.map(M0),injector:r}}))}function $9(e){return e&&typeof e=="object"&&"default"in e}function ck(e){return $9(e)?e.default:e}var O0=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:()=>G(q9),providedIn:"root"});let e=t;return e})(),q9=(()=>{let t=class t{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,s){return i}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),K9=new te("");var Q9=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Me,this.transitionAbortSubject=new Me,this.configLoader=G(j9),this.environmentInjector=G(ei),this.urlSerializer=G(D0),this.rootContexts=G(xv),this.location=G(jh),this.inputBindingEnabled=G(I0,{optional:!0})!==null,this.titleStrategy=G(lk),this.options=G(F0,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=G(O0),this.createViewTransition=G(K9,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>X(void 0),this.rootComponentType=null;let i=r=>this.events.next(new c0(r)),s=r=>this.events.next(new u0(r));this.configLoader.onLoadEndListener=s,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let s=++this.navigationId;this.transitions?.next(ae(B(B({},this.transitions.value),i),{id:s}))}setupNavigations(i,s,r){return this.transitions=new wt({id:0,currentUrlTree:s,currentRawUrl:s,extractedUrl:this.urlHandlingStrategy.extract(s),urlAfterRedirects:this.urlHandlingStrategy.extract(s),rawUrl:s,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Xh,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ye(o=>o.id!==0),oe(o=>ae(B({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ke(o=>{let a=!1,l=!1;return X(o).pipe(ke(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",ji.SupersededByNewNavigation),an;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?ae(B({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=c.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!u&&h!=="reload"){let f="";return this.events.next(new ml(c.id,this.urlSerializer.serialize(c.rawUrl),f,s0.IgnoredSameUrlNavigation)),c.resolve(null),an}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return X(c).pipe(ke(f=>{let p=this.transitions?.getValue();return this.events.next(new tf(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),p!==this.transitions?.getValue()?an:Promise.resolve(f)}),V9(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),pt(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=ae(B({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let p=new Rv(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:p,source:v,restoredState:y,extras:C}=c,E=new tf(f,this.urlSerializer.serialize(p),v,y);this.events.next(E);let T=JN(this.rootComponentType).snapshot;return this.currentTransition=o=ae(B({},c),{targetSnapshot:T,urlAfterRedirects:p,extras:ae(B({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,X(o)}else{let f="";return this.events.next(new ml(c.id,this.urlSerializer.serialize(c.extractedUrl),f,s0.IgnoredByUrlHandlingStrategy)),c.resolve(null),an}}),pt(c=>{let u=new r0(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),oe(c=>(this.currentTransition=o=ae(B({},c),{guards:n9(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),h9(this.environmentInjector,c=>this.events.next(c)),pt(c=>{if(o.guardsResult=c.guardsResult,fu(c.guardsResult))throw tk(this.urlSerializer,c.guardsResult);let u=new o0(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),Ye(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",ji.GuardRejected),!1)),Xb(c=>{if(c.guards.canActivateChecks.length)return X(c).pipe(pt(u=>{let h=new a0(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),ke(u=>{let h=!1;return X(u).pipe(B9(this.paramsInheritanceStrategy,this.environmentInjector),pt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(u,"",ji.NoDataFromResolver)}}))}),pt(u=>{let h=new l0(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}))}),Xb(c=>{let u=h=>{let f=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(h.routeConfig).pipe(pt(p=>{h.component=p}),oe(()=>{})));for(let p of h.children)f.push(...u(p));return f};return Fs(u(c.targetSnapshot.root)).pipe(Ko(null),ut(1))}),Xb(()=>this.afterPreactivation()),ke(()=>{let{currentSnapshot:c,targetSnapshot:u}=o,h=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return h?tt(h).pipe(oe(()=>o)):X(o)}),oe(c=>{let u=Q8(i.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=ae(B({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),pt(()=>{this.events.next(new rf)}),t9(this.rootContexts,i.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),ut(1),pt({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new gl(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),Tt(this.transitionAbortSubject.pipe(pt(c=>{throw c}))),Ya(()=>{!a&&!l&&this.cancelNavigationTransition(o,"",ji.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),$o(c=>{if(l=!0,ik(c))this.events.next(new da(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),X8(c)?this.events.next(new of(c.url)):o.resolve(!1);else{this.events.next(new nf(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(i.errorHandler(c))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return an}))}))}cancelNavigationTransition(i,s,r){let o=new da(i.id,this.urlSerializer.serialize(i.extractedUrl),s,r);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Y9(e){return e!==Xh}var J9=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:()=>G(X9),providedIn:"root"});let e=t;return e})(),E0=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},X9=(()=>{let t=class t extends E0{};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=is(t)))(r||t)}})(),t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),uk=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:()=>G(Z9),providedIn:"root"});let e=t;return e})(),Z9=(()=>{let t=class t extends uk{constructor(){super(...arguments),this.location=G(jh),this.urlSerializer=G(D0),this.options=G(F0,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=G(O0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ua,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=JN(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(s=>{s.type==="popstate"&&i(s.url,s.state)})}handleRouterEvent(i,s){if(i instanceof tf)this.stateMemento=this.createStateMemento();else if(i instanceof ml)this.rawUrlTree=s.initialUrl;else if(i instanceof Rv){if(this.urlUpdateStrategy==="eager"&&!s.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(s.finalUrl,s.initialUrl);this.setBrowserUrl(r,s)}}else i instanceof rf?(this.currentUrlTree=s.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(s.finalUrl,s.initialUrl),this.routerState=s.targetRouterState,this.urlUpdateStrategy==="deferred"&&(s.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,s))):i instanceof da&&(i.code===ji.GuardRejected||i.code===ji.NoDataFromResolver)?this.restoreHistory(s):i instanceof nf?this.restoreHistory(s,!0):i instanceof gl&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,s){let r=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(r)||s.extras.replaceUrl){let o=this.browserPageId,a=B(B({},s.extras.state),this.generateNgRouterState(s.id,o));this.location.replaceState(r,"",a)}else{let o=B(B({},s.extras.state),this.generateNgRouterState(s.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(i,s=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(s&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,s){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:s}:{navigationId:i}}};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=is(t)))(r||t)}})(),t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Yh=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(Yh||{});function e7(e,t){e.events.pipe(Ye(n=>n instanceof gl||n instanceof da||n instanceof nf||n instanceof ml),oe(n=>n instanceof gl||n instanceof ml?Yh.COMPLETE:(n instanceof da?n.code===ji.Redirect||n.code===ji.SupersededByNewNavigation:!1)?Yh.REDIRECTING:Yh.FAILED),Ye(n=>n!==Yh.REDIRECTING),ut(1)).subscribe(()=>{t()})}function t7(e){throw e}var n7={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},i7={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},cn=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=G(Ym),this.stateManager=G(uk),this.options=G(F0,{optional:!0})||{},this.pendingTasks=G(Gh),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=G(Q9),this.urlSerializer=G(D0),this.location=G(jh),this.urlHandlingStrategy=G(O0),this._events=new Me,this.errorHandler=this.options.errorHandler||t7,this.navigated=!1,this.routeReuseStrategy=G(J9),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=G(x0,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!G(I0,{optional:!0}),this.eventsSubscription=new It,this.isNgZoneEnabled=G(de)instanceof de&&de.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(s=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(s,o),s instanceof da&&s.code!==ji.Redirect&&s.code!==ji.SupersededByNewNavigation)this.navigated=!0;else if(s instanceof gl)this.navigated=!0;else if(s instanceof of){let a=this.urlHandlingStrategy.merge(s.url,r.currentRawUrl),l={info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Y9(r.source)};this.scheduleNavigation(a,Xh,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}r7(s)&&this._events.next(s)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Xh,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,s)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",s)},0)})}navigateToSyncWithBrowser(i,s,r){let o={replaceUrl:!0},a=r?.navigationId?r:null;if(r){let c=B({},r);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let l=this.parseUrl(i);this.scheduleNavigation(l,s,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(M0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,s={}){let{relativeTo:r,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:c}=s,u=c?this.currentUrlTree.fragment:a,h=null;switch(l){case"merge":h=B(B({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let f;try{let p=r?r.snapshot:this.routerState.snapshot.root;f=qN(p)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),f=this.currentUrlTree.root}return KN(f,i,h,u??null)}navigateByUrl(i,s={skipLocationChange:!1}){let r=fu(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Xh,null,s)}navigate(i,s={skipLocationChange:!1}){return s7(i),this.navigateByUrl(this.createUrlTree(i,s),s)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,s){let r;if(s===!0?r=B({},n7):s===!1?r=B({},i7):r=s,fu(i))return FN(this.currentUrlTree,i,r);let o=this.parseUrl(i);return FN(this.currentUrlTree,o,r)}removeEmptyProps(i){return Object.entries(i).reduce((s,[r,o])=>(o!=null&&(s[r]=o),s),{})}scheduleNavigation(i,s,r,o,a){if(this.disposed)return Promise.resolve(!1);let l,c,u;a?(l=a.resolve,c=a.reject,u=a.promise):u=new Promise((f,p)=>{l=f,c=p});let h=this.pendingTasks.add();return e7(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:s,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function s7(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new ge(4008,!1)}function r7(e){return!(e instanceof rf)&&!(e instanceof of)}var o7=new te("");function dk(e,...t){return mt([{provide:x0,multi:!0,useValue:e},[],{provide:pu,useFactory:a7,deps:[cn]},{provide:ou,multi:!0,useFactory:l7},t.map(n=>n.\u0275providers)])}function a7(e){return e.routerState.root}function l7(){let e=G(Ge);return t=>{let n=e.get(Hi);if(t!==n.components[0])return;let i=e.get(cn),s=e.get(c7);e.get(u7)===1&&i.initialNavigation(),e.get(d7,null,Be.Optional)?.setUpPreloading(),e.get(o7,null,Be.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}var c7=new te("",{factory:()=>new Me}),u7=new te("",{providedIn:"root",factory:()=>1});var d7=new te("");var Ck=(()=>{let t=class t{constructor(i,s){this._renderer=i,this._elementRef=s,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(i,s){this._renderer.setProperty(this._elementRef.nativeElement,i,s)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};t.\u0275fac=function(s){return new(s||t)(Q(Vs),Q(Lt))},t.\u0275dir=At({type:t});let e=t;return e})(),yk=(()=>{let t=class t extends Ck{};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=is(t)))(r||t)}})(),t.\u0275dir=At({type:t,features:[Bs]});let e=t;return e})(),wu=new te("");var h7={provide:wu,useExisting:pr(()=>us),multi:!0};function f7(){let e=io()?io().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var p7=new te(""),us=(()=>{let t=class t extends Ck{constructor(i,s,r){super(i,s),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!f7())}writeValue(i){let s=i??"";this.setProperty("value",s)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};t.\u0275fac=function(s){return new(s||t)(Q(Vs),Q(Lt),Q(p7,8))},t.\u0275dir=At({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(s,r){s&1&&pe("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[os([h7]),Bs]});let e=t;return e})();function ga(e){return e==null||(typeof e=="string"||Array.isArray(e))&&e.length===0}function wk(e){return e!=null&&typeof e.length=="number"}var Wv=new te(""),B0=new te(""),g7=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,cs=class{static min(t){return m7(t)}static max(t){return v7(t)}static required(t){return C7(t)}static requiredTrue(t){return y7(t)}static email(t){return w7(t)}static minLength(t){return S7(t)}static maxLength(t){return _7(t)}static pattern(t){return b7(t)}static nullValidator(t){return Sk(t)}static compose(t){return Rk(t)}static composeAsync(t){return Ak(t)}};function m7(e){return t=>{if(ga(t.value)||ga(e))return null;let n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}function v7(e){return t=>{if(ga(t.value)||ga(e))return null;let n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}function C7(e){return ga(e.value)?{required:!0}:null}function y7(e){return e.value===!0?null:{required:!0}}function w7(e){return ga(e.value)||g7.test(e.value)?null:{email:!0}}function S7(e){return t=>ga(t.value)||!wk(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}function _7(e){return t=>wk(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}function b7(e){if(!e)return Sk;let t,n;return typeof e=="string"?(n="",e.charAt(0)!=="^"&&(n+="^"),n+=e,e.charAt(e.length-1)!=="$"&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),i=>{if(ga(i.value))return null;let s=i.value;return t.test(s)?null:{pattern:{requiredPattern:n,actualValue:s}}}}function Sk(e){return null}function _k(e){return e!=null}function bk(e){return dl(e)?tt(e):e}function Ek(e){let t={};return e.forEach(n=>{t=n!=null?B(B({},t),n):t}),Object.keys(t).length===0?null:t}function Dk(e,t){return t.map(n=>n(e))}function E7(e){return!e.validate}function Tk(e){return e.map(t=>E7(t)?t:n=>t.validate(n))}function Rk(e){if(!e)return null;let t=e.filter(_k);return t.length==0?null:function(n){return Ek(Dk(n,t))}}function Ik(e){return e!=null?Rk(Tk(e)):null}function Ak(e){if(!e)return null;let t=e.filter(_k);return t.length==0?null:function(n){let i=Dk(n,t).map(bk);return nS(i).pipe(oe(Ek))}}function Mk(e){return e!=null?Ak(Tk(e)):null}function hk(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function Pk(e){return e._rawValidators}function Fk(e){return e._rawAsyncValidators}function N0(e){return e?Array.isArray(e)?e:[e]:[]}function kv(e,t){return Array.isArray(e)?e.includes(t):e===t}function fk(e,t){let n=N0(t);return N0(e).forEach(s=>{kv(n,s)||n.push(s)}),n}function pk(e,t){return N0(t).filter(n=>!kv(e,n))}var Lv=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Ik(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Mk(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},Cu=class extends Lv{get formDirective(){return null}get path(){return null}},vl=class extends Lv{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Vv=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},D7={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},nIe=ae(B({},D7),{"[class.ng-submitted]":"isSubmitted"}),br=(()=>{let t=class t extends Vv{constructor(i){super(i)}};t.\u0275fac=function(s){return new(s||t)(Q(vl,2))},t.\u0275dir=At({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(s,r){s&2&&wi("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Bs]});let e=t;return e})(),Su=(()=>{let t=class t extends Vv{constructor(i){super(i)}};t.\u0275fac=function(s){return new(s||t)(Q(Cu,10))},t.\u0275dir=At({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(s,r){s&2&&wi("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Bs]});let e=t;return e})();var pf="VALID",Nv="INVALID",vu="PENDING",gf="DISABLED";function G0(e){return(jv(e)?e.validators:e)||null}function T7(e){return Array.isArray(e)?Ik(e):e||null}function H0(e,t){return(jv(t)?t.asyncValidators:e)||null}function R7(e){return Array.isArray(e)?Mk(e):e||null}function jv(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function xk(e,t,n){let i=e.controls;if(!(t?Object.keys(i):i).length)throw new ge(1e3,"");if(!i[n])throw new ge(1001,"")}function Ok(e,t,n){e._forEachChild((i,s)=>{if(n[s]===void 0)throw new ge(1002,"")})}var yu=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===pf}get invalid(){return this.status===Nv}get pending(){return this.status==vu}get disabled(){return this.status===gf}get enabled(){return this.status!==gf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(fk(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(fk(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(pk(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(pk(t,this._rawAsyncValidators))}hasValidator(t){return kv(this._rawValidators,t)}hasAsyncValidator(t){return kv(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=vu,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=gf,this.errors=null,this._forEachChild(i=>{i.disable(ae(B({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ae(B({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=pf,this._forEachChild(i=>{i.enable(ae(B({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(ae(B({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===pf||this.status===vu)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?gf:pf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=vu,this._hasOwnPendingAsyncValidator=!0;let n=bk(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,s)=>i&&i._find(s),this)}getError(t,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new W,this.statusChanges=new W}_calculateStatus(){return this._allControlsDisabled()?gf:this.errors?Nv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vu)?vu:this._anyControlsHaveStatus(Nv)?Nv:pf}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){jv(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=T7(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=R7(this._rawAsyncValidators)}},Bv=class extends yu{constructor(t,n,i){super(G0(n),H0(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,i={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){Ok(this,!0,t),Object.keys(t).forEach(i=>{xk(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(i=>{let s=this.controls[i];s&&s.patchValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((i,s)=>{i.reset(t?t[s]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,i)=>(t[i]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&t(i,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,i,s)=>((i.enabled||this.disabled)&&(n[s]=i.value),n))}_reduceChildren(t,n){let i=t;return this._forEachChild((s,r)=>{i=n(i,s,r)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var k0=class extends Bv{};var U0=new te("CallSetDisabledState",{providedIn:"root",factory:()=>W0}),W0="always";function I7(e,t){return[...t.path,e]}function L0(e,t,n=W0){j0(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),M7(e,t),F7(e,t),P7(e,t),A7(e,t)}function Gv(e,t,n=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),Uv(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function Hv(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function A7(e,t){if(t.valueAccessor.setDisabledState){let n=i=>{t.valueAccessor.setDisabledState(i)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function j0(e,t){let n=Pk(e);t.validator!==null?e.setValidators(hk(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let i=Fk(e);t.asyncValidator!==null?e.setAsyncValidators(hk(i,t.asyncValidator)):typeof i=="function"&&e.setAsyncValidators([i]);let s=()=>e.updateValueAndValidity();Hv(t._rawValidators,s),Hv(t._rawAsyncValidators,s)}function Uv(e,t){let n=!1;if(e!==null){if(t.validator!==null){let s=Pk(e);if(Array.isArray(s)&&s.length>0){let r=s.filter(o=>o!==t.validator);r.length!==s.length&&(n=!0,e.setValidators(r))}}if(t.asyncValidator!==null){let s=Fk(e);if(Array.isArray(s)&&s.length>0){let r=s.filter(o=>o!==t.asyncValidator);r.length!==s.length&&(n=!0,e.setAsyncValidators(r))}}}let i=()=>{};return Hv(t._rawValidators,i),Hv(t._rawAsyncValidators,i),n}function M7(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&Nk(e,t)})}function P7(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&Nk(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function Nk(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function F7(e,t){let n=(i,s)=>{t.valueAccessor.writeValue(i),s&&t.viewToModelUpdate(i)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function x7(e,t){e==null,j0(e,t)}function O7(e,t){return Uv(e,t)}function kk(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function N7(e){return Object.getPrototypeOf(e.constructor)===yk}function k7(e,t){e._syncPendingControls(),t.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Lk(e,t){if(!t)return null;Array.isArray(t);let n,i,s;return t.forEach(r=>{r.constructor===us?n=r:N7(r)?i=r:s=r}),s||i||n||null}function L7(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function gk(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function mk(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var pa=class extends yu{constructor(t=null,n,i){super(G0(n),H0(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),jv(n)&&(n.nonNullable||n.initialValueIsDefault)&&(mk(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){gk(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){gk(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){mk(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var V7=e=>e instanceof pa;var _u=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275dir=At({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let e=t;return e})(),B7={provide:wu,useExisting:pr(()=>z0),multi:!0},z0=(()=>{let t=class t extends yk{writeValue(i){let s=i??"";this.setProperty("value",s)}registerOnChange(i){this.onChange=s=>{i(s==""?null:parseFloat(s))}}};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=is(t)))(r||t)}})(),t.\u0275dir=At({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(s,r){s&1&&pe("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[os([B7]),Bs]});let e=t;return e})();var $0=new te(""),G7={provide:vl,useExisting:pr(()=>mf)},mf=(()=>{let t=class t extends vl{set isDisabled(i){}constructor(i,s,r,o,a){super(),this._ngModelWarningConfig=o,this.callSetDisabledState=a,this.update=new W,this._ngModelWarningSent=!1,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=Lk(this,r)}ngOnChanges(i){if(this._isControlChanged(i)){let s=i.form.previousValue;s&&Gv(s,this,!1),L0(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}kk(i,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Gv(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_isControlChanged(i){return i.hasOwnProperty("form")}};t._ngModelWarningSentOnce=!1,t.\u0275fac=function(s){return new(s||t)(Q(Wv,10),Q(B0,10),Q(wu,10),Q($0,8),Q(U0,8))},t.\u0275dir=At({type:t,selectors:[["","formControl",""]],inputs:{form:[vn.None,"formControl","form"],isDisabled:[vn.None,"disabled","isDisabled"],model:[vn.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[os([G7]),Bs,kt]});let e=t;return e})(),H7={provide:Cu,useExisting:pr(()=>Cl)},Cl=(()=>{let t=class t extends Cu{constructor(i,s,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new W,this._setValidators(i),this._setAsyncValidators(s)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Uv(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let s=this.form.get(i.path);return L0(s,i,this.callSetDisabledState),s.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),s}getControl(i){return this.form.get(i.path)}removeControl(i){Gv(i.control||null,i,!1),L7(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,s){this.form.get(i.path).setValue(s)}onSubmit(i){return this.submitted=!0,k7(this.form,this.directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_updateDomValue(){this.directives.forEach(i=>{let s=i.control,r=this.form.get(i.path);s!==r&&(Gv(s||null,i),V7(r)&&(L0(r,i,this.callSetDisabledState),i.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let s=this.form.get(i.path);x7(s,i),s.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let s=this.form.get(i.path);s&&O7(s,i)&&s.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){j0(this.form,this),this._oldForm&&Uv(this._oldForm,this)}_checkFormPresent(){this.form}};t.\u0275fac=function(s){return new(s||t)(Q(Wv,10),Q(B0,10),Q(U0,8))},t.\u0275dir=At({type:t,selectors:[["","formGroup",""]],hostBindings:function(s,r){s&1&&pe("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:[vn.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[os([H7]),Bs,kt]});let e=t;return e})();var U7={provide:vl,useExisting:pr(()=>yl)},yl=(()=>{let t=class t extends vl{set isDisabled(i){}constructor(i,s,r,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new W,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(s),this._setAsyncValidators(r),this.valueAccessor=Lk(this,o)}ngOnChanges(i){this._added||this._setUpControl(),kk(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return I7(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};t._ngModelWarningSentOnce=!1,t.\u0275fac=function(s){return new(s||t)(Q(Cu,13),Q(Wv,10),Q(B0,10),Q(wu,10),Q($0,8))},t.\u0275dir=At({type:t,selectors:[["","formControlName",""]],inputs:{name:[vn.None,"formControlName","name"],isDisabled:[vn.None,"disabled","isDisabled"],model:[vn.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[os([U7]),Bs,kt]});let e=t;return e})();var W7=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=Ci({type:t}),t.\u0275inj=vi({});let e=t;return e})(),V0=class extends yu{constructor(t,n,i){super(G0(n),H0(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,n={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(t,n,i={}){this.controls.splice(t,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,n={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(t,n,i={}){let s=this._adjustIndex(t);s<0&&(s=0),this.controls[s]&&this.controls[s]._registerOnCollectionChange(()=>{}),this.controls.splice(s,1),n&&(this.controls.splice(s,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,n={}){Ok(this,!1,t),t.forEach((i,s)=>{xk(this,!1,s),this.at(s).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(t.forEach((i,s)=>{this.at(s)&&this.at(s).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t=[],n={}){this._forEachChild((i,s)=>{i.reset(t[s],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((n,i)=>i._syncPendingControls()?!0:n,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((n,i)=>{t(n,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(n=>n.enabled&&t(n))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function vk(e){return!!e&&(e.asyncValidators!==void 0||e.validators!==void 0||e.updateOn!==void 0)}var bu=(()=>{let t=class t{constructor(){this.useNonNullable=!1}get nonNullable(){let i=new t;return i.useNonNullable=!0,i}group(i,s=null){let r=this._reduceControls(i),o={};return vk(s)?o=s:s!==null&&(o.validators=s.validator,o.asyncValidators=s.asyncValidator),new Bv(r,o)}record(i,s=null){let r=this._reduceControls(i);return new k0(r,s)}control(i,s,r){let o={};return this.useNonNullable?(vk(s)?o=s:(o.validators=s,o.asyncValidators=r),new pa(i,ae(B({},o),{nonNullable:!0}))):new pa(i,s,r)}array(i,s,r){let o=i.map(a=>this._createControl(a));return new V0(o,s,r)}_reduceControls(i){let s={};return Object.keys(i).forEach(r=>{s[r]=this._createControl(i[r])}),s}_createControl(i){if(i instanceof pa)return i;if(i instanceof yu)return i;if(Array.isArray(i)){let s=i[0],r=i.length>1?i[1]:null,o=i.length>2?i[2]:null;return this.control(s,r,o)}else return this.control(i)}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Er=(()=>{let t=class t{static withConfig(i){return{ngModule:t,providers:[{provide:$0,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:U0,useValue:i.callSetDisabledState??W0}]}}};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=Ci({type:t}),t.\u0275inj=vi({imports:[W7]});let e=t;return e})();function j7(e,t){if(e&1&&(Gs(0),Jr(),H(1,"svg",1),ne(2,"path",2),U(),Hs()),e&2){let n=t.$implicit;K(),ul("top",n.top)("left",n.left)("width",n.size)("height",n.size)("opacity",n.opacity)}}var zv=(()=>{let t=class t{constructor(){this.dollarSigns=5,this.minSize=50,this.maxSize=80,this.minOpacity=.05,this.maxOpacity=.15,this.random=!1,this.dollarSignArray=[{top:"70%",left:"25%",size:"200px",opacity:.1},{top:"20%",left:"75%",size:"150px",opacity:.05},{top:"25%",left:"50%",size:"70px",opacity:.15},{top:"60%",left:"40%",size:"80px",opacity:.1}]}ngOnInit(){this.random&&this.generateDollarSigns()}generateDollarSigns(){this.dollarSignArray=Array(this.dollarSigns).fill(null).map(()=>({top:`${this.getRandomNumber(10,90)}%`,left:`${this.getRandomNumber(10,90)}%`,size:`${this.getRandomNumber(this.minSize,this.maxSize)}px`,opacity:this.getRandomNumber(this.minOpacity,this.maxOpacity)}))}getRandomNumber(i,s){return Math.random()*(s-i)+i}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=_e({type:t,selectors:[["app-dollar-sign-svgs"]],inputs:{dollarSigns:"dollarSigns",minSize:"minSize",maxSize:"maxSize",minOpacity:"minOpacity",maxOpacity:"maxOpacity",random:"random"},standalone:!0,features:[be],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["viewBox","0 0 24 24",1,"position-absolute","dollar-sign","z-0"],["fill","#fd7e14","d","M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M11,17H13V16H14A1,1 0 0,0 15,15V12A1,1 0 0,0 14,11H11V10H15V8H13V7H11V8H10A1,1 0 0,0 9,9V12A1,1 0 0,0 10,13H13V14H9V16H11V17Z"]],template:function(s,r){s&1&&Ce(0,j7,3,10,"ng-container",0),s&2&&re("ngForOf",r.dollarSignArray)},dependencies:[Mt,yr],styles:[".dollar-sign[_ngcontent-%COMP%]{pointer-events:none}"]});let e=t;return e})();function z7(e,t){e&1&&(Gs(0),Jr(),H(1,"svg",1),ne(2,"path",2),U(),Hs())}function $7(e,t){e&1&&(Gs(0),Jr(),H(1,"svg",3),ne(2,"path",4),U(),Hs())}var $v=(()=>{let t=class t{constructor(){this.wave="top"}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=_e({type:t,selectors:[["app-wave"]],inputs:{wave:"wave"},standalone:!0,features:[be],decls:2,vars:2,consts:[[4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320",1,"wave-top","z-0"],["fill","#ff9d00","fill-opacity","0.2","d","M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,165.3C1248,171,1344,149,1392,138.7L1440,128L1440,0L1392,0C1344,0,1248,0,1152,0C1056,0,960,0,864,0C768,0,672,0,576,0C480,0,384,0,288,0C192,0,96,0,48,0L0,0Z"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320",1,"wave-bottom"],["fill","#ff9d00","fill-opacity","0.2","d","M0,224L48,213.3C96,203,192,181,288,181.3C384,181,480,203,576,224C672,245,768,267,864,250.7C960,235,1056,181,1152,165.3C1248,149,1344,171,1392,181.3L1440,192L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"]],template:function(s,r){s&1&&Ce(0,z7,3,0,"ng-container",0)(1,$7,3,0,"ng-container",0),s&2&&(re("ngIf",r.wave==="top"),K(),re("ngIf",r.wave==="bottom"))},dependencies:[Mt,Vn],styles:[".wave-top[_ngcontent-%COMP%], .wave-bottom[_ngcontent-%COMP%]{position:absolute;width:100%}.wave-top[_ngcontent-%COMP%]{top:0}.wave-bottom[_ngcontent-%COMP%]{bottom:0}"]});let e=t;return e})();var qv=(()=>{let t=class t{constructor(){this.size=250}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=_e({type:t,selectors:[["app-loader"]],inputs:{size:"size"},standalone:!0,features:[be],decls:4,vars:2,consts:[["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24"],["d","M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M11,17H13V16H14A1,1 0 0,0 15,15V12A1,1 0 0,0 14,11H11V10H15V8H13V7H11V8H10A1,1 0 0,0 9,9V12A1,1 0 0,0 10,13H13V14H9V16H11V17Z",1,"loader"]],template:function(s,r){s&1&&(Jr(),H(0,"svg",0)(1,"style"),ue(2," @keyframes spin { 0% { transform: rotate(0deg) scale(1); } 25% { transform: rotate(90deg) scale(1.1); } 50% { transform: rotate(180deg) scale(1); } 75% { transform: rotate(270deg) scale(1.1); } 100% { transform: rotate(360deg) scale(1); } } .loader { animation: spin 2s linear infinite; transform-origin: center; fill: #fd7e14; stroke: #000000; stroke-width: 0.5; } "),U(),ne(3,"path",1),U()),s&2&&eo("width",r.size)("height",r.size)},styles:["svg[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}"]});let e=t;return e})();var q7="firebase",K7="10.12.5";Se(q7,K7,"app");var Bt=new Yr("ANGULARFIRE2_VERSION"),Du=e=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${e} in the constructor, first ensure that ${e} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${e})\`.`;function Bn(e,t,n){if(t){if(t.length===1)return t[0];let r=t.filter(o=>o.app===n);if(r.length===1)return r[0]}return n.container.getProvider(e).getImmediate({optional:!0})}var Fn=(e,t)=>{let n=t?[t]:cg(),i=[];return n.forEach(s=>{s.container.getProvider(e).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},ii=class{constructor(){return Fn(Q7)}},Q7="app-check";function Eu(){}var Kv=class{zone;delegate;constructor(t,n=Zw){this.zone=t,this.delegate=n}now(){return this.delegate.now()}schedule(t,n,i){let s=this.zone,r=function(o){s.runGuarded(()=>{t.apply(this,[o])})};return this.delegate.schedule(r,n,i)}},q0=class{zone;task=null;constructor(t){this.zone=t}call(t,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Eu,{},Eu,Eu)),n.pipe(pt({next:i,complete:i,error:i})).subscribe(t).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Xt=(()=>{class e{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Kv(Zone.current)),this.insideAngular=n.run(()=>new Kv(Zone.current,es)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||e)(Z(de))};static \u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Qv(){let e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return e}function Y7(e){return Qv().ngZone.runOutsideAngular(()=>e())}function wl(e){return Qv().ngZone.run(()=>e())}function K0(e){return J7(Qv())(e)}function J7(e){return function(n){return n=n.lift(new q0(e.ngZone)),n.pipe(ts(e.outsideAngular),xi(e.insideAngular))}}var X7=(e,t)=>function(){let i=arguments;return t&&setTimeout(()=>{t.state==="scheduled"&&t.invoke()},10),wl(()=>e.apply(void 0,i))},je=(e,t)=>function(){let n,i=arguments;for(let r=0;r<arguments.length;r++)typeof i[r]=="function"&&(t&&(n||=wl(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Eu,{},Eu,Eu))),i[r]=X7(i[r],n));let s=Y7(()=>e.apply(this,i));if(!t)if(s instanceof le){let r=Qv();return s.pipe(ts(r.outsideAngular),xi(r.insideAngular))}else return wl(()=>s);return s instanceof le?s.pipe(K0):s instanceof Promise?wl(()=>new Promise((r,o)=>s.then(a=>wl(()=>r(a)),a=>wl(()=>o(a))))):typeof s=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),s.apply(this,arguments)}:wl(()=>s)};var $t=class{constructor(t){return t}},un=class{constructor(){return cg()}};function eQ(e){return e&&e.length===1?e[0]:new $t(gn())}var Q0=new te("angularfire2._apps"),tQ={provide:$t,useFactory:eQ,deps:[[new Le,Q0]]},nQ={provide:un,deps:[[new Le,Q0]]};function iQ(e){return(t,n)=>{let i=n.get(jt);Se("angularfire",Bt.full,"core"),Se("angularfire",Bt.full,"app"),Se("angular",Tb.full,i.toString());let s=t.runOutsideAngular(()=>e(n));return new $t(s)}}function Vk(e,...t){return mt([tQ,nQ,{provide:Q0,useFactory:iQ(e),multi:!0,deps:[de,Ge,Xt,...t]}])}var Bk=je(GP,!0);function Hk(e){return new le(function(t){var n=dg(e,t.next.bind(t),t.error.bind(t),t.complete.bind(t));return{unsubscribe:n}})}function Uk(e){return new le(function(t){var n=ug(e,t.next.bind(t),t.error.bind(t),t.complete.bind(t));return{unsubscribe:n}})}var Wk="auth",ds=class{constructor(t){return t}},Ws=class{constructor(){return Fn(Wk)}};var Y0=new te("angularfire2.auth-instances");function JQ(e,t){let n=Bn(Wk,e,t);return n&&new ds(n)}function XQ(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new ds(i)}}var ZQ={provide:Ws,deps:[[new Le,Y0]]},eY={provide:ds,useFactory:JQ,deps:[[new Le,Y0],$t]};function jk(e,...t){return Se("angularfire",Bt.full,"auth"),mt([eY,ZQ,{provide:Y0,useFactory:XQ(e),multi:!0,deps:[de,Ge,Xt,un,[new Le,ii],...t]}])}var Cf=je(Hk,!0),zk=je(Uk,!0);var $k=je(Vw,!0);var qk=je(Hw,!0);var Kk=je(Bw,!0);var Qk=je(Gw,!0);var tY=new Map,nY={activated:!1,tokenObservers:[]},iY={initialized:!1,enabled:!1};function js(e){return tY.get(e)||Object.assign({},nY)}function eL(){return iY}var sY="https://content-firebaseappcheck.googleapis.com/v1";var rY="exchangeDebugToken",Yk={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},MAe=24*60*60*1e3;var Z0=class{constructor(t,n,i,s,r){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=s,this.upperBound=r,this.pending=null,this.nextErrorWaitInterval=s,s>r)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return x(this,null,function*(){this.stop();try{this.pending=new Ec,this.pending.promise.catch(n=>{}),yield oY(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new Ec,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function oY(e){return new Promise(t=>{setTimeout(t,e)})}var aY={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ma=new or("appCheck","AppCheck",aY);function tL(e){if(!js(e).activated)throw ma.create("use-before-activation",{appName:e.name})}function nL(i,s){return x(this,arguments,function*({url:e,body:t},n){let r={"Content-Type":"application/json"},o=n.getImmediate({optional:!0});if(o){let p=yield o.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let a={method:"POST",body:JSON.stringify(t),headers:r},l;try{l=yield fetch(e,a)}catch(p){throw ma.create("fetch-network-error",{originalErrorMessage:p?.message})}if(l.status!==200)throw ma.create("fetch-status-error",{httpStatus:l.status});let c;try{c=yield l.json()}catch(p){throw ma.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=c.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw ma.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let h=Number(u[1])*1e3,f=Date.now();return{token:c.token,expireTimeMillis:f+h,issuedAtTimeMillis:f}})}function iL(e,t){let{projectId:n,appId:i,apiKey:s}=e.options;return{url:`${sY}/projects/${n}/apps/${i}:${rY}?key=${s}`,body:{debug_token:t}}}var lY="firebase-app-check-database",cY=1,eE="firebase-app-check-store";var Yv=null;function uY(){return Yv||(Yv=new Promise((e,t)=>{try{let n=indexedDB.open(lY,cY);n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{var s;t(ma.create("storage-open",{originalErrorMessage:(s=i.target.error)===null||s===void 0?void 0:s.message}))},n.onupgradeneeded=i=>{let s=i.target.result;switch(i.oldVersion){case 0:s.createObjectStore(eE,{keyPath:"compositeKey"})}}}catch(n){t(ma.create("storage-open",{originalErrorMessage:n?.message}))}}),Yv)}function dY(e,t){return hY(fY(e),t)}function hY(e,t){return x(this,null,function*(){let i=(yield uY()).transaction(eE,"readwrite"),r=i.objectStore(eE).put({compositeKey:e,value:t});return new Promise((o,a)=>{r.onsuccess=l=>{o()},i.onerror=l=>{var c;a(ma.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})})}function fY(e){return`${e.options.appId}-${e.name}`}var tE=new lr("@firebase/app-check");function X0(e,t){return Is()?dY(e,t).catch(n=>{tE.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function sL(){return eL().enabled}function rL(){return x(this,null,function*(){let e=eL();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var pY={error:"UNKNOWN_ERROR"};function gY(e){return og.encodeString(JSON.stringify(e),!1)}function nE(e,t=!1){return x(this,null,function*(){let n=e.app;tL(n);let i=js(n),s=i.token,r;if(s&&!yf(s)&&(i.token=void 0,s=void 0),!s){let l=yield i.cachedTokenPromise;l&&(yf(l)?s=l:yield X0(n,void 0))}if(!t&&s&&yf(s))return{token:s.token};let o=!1;if(sL()){i.exchangeTokenPromise||(i.exchangeTokenPromise=nL(iL(n,yield rL()),e.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);let l=yield i.exchangeTokenPromise;return yield X0(n,l),i.token=l,{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),s=yield js(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?tE.warn(l.message):tE.error(l),r=l}let a;return s?r?yf(s)?a={token:s.token,internalError:r}:a=Xk(r):(a={token:s.token},i.token=s,yield X0(n,s)):a=Xk(r),o&&yY(n,a),a})}function mY(e){return x(this,null,function*(){let t=e.app;tL(t);let{provider:n}=js(t);if(sL()){let i=yield rL(),{token:s}=yield nL(iL(t,i),e.heartbeatServiceProvider);return{token:s}}else{let{token:i}=yield n.getToken();return{token:i}}})}function vY(e,t,n,i){let{app:s}=e,r=js(s),o={next:n,error:i,type:t};if(r.tokenObservers=[...r.tokenObservers,o],r.token&&yf(r.token)){let a=r.token;Promise.resolve().then(()=>{n({token:a.token}),Jk(e)}).catch(()=>{})}r.cachedTokenPromise.then(()=>Jk(e))}function oL(e,t){let n=js(e),i=n.tokenObservers.filter(s=>s.next!==t);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function Jk(e){let{app:t}=e,n=js(t),i=n.tokenRefresher;i||(i=CY(e),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function CY(e){let{app:t}=e;return new Z0(()=>x(this,null,function*(){let n=js(t),i;if(n.token?i=yield nE(e,!0):i=yield nE(e),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=js(t);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,s=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,s),Math.max(0,i-Date.now())}else return 0},Yk.RETRIAL_MIN_WAIT,Yk.RETRIAL_MAX_WAIT)}function yY(e,t){let n=js(e).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&t.error!=null?i.error(t.error):i.next(t)}catch{}}function yf(e){return e.expireTimeMillis-Date.now()>0}function Xk(e){return{token:gY(pY),error:e}}var iE=class{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:t}=js(this.app);for(let n of t)oL(this.app,n.next);return Promise.resolve()}};function wY(e,t){return new iE(e,t)}function SY(e){return{getToken:t=>nE(e,t),getLimitedUseToken:()=>mY(e),addTokenListener:t=>vY(e,"INTERNAL",t),removeTokenListener:t=>oL(e.app,t)}}var _Y="@firebase/app-check",bY="0.8.7";var EY="app-check",Zk="app-check-internal";function DY(){Nt(new Ot(EY,e=>{let t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return wY(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Zk).initialize()})),Nt(new Ot(Zk,e=>{let t=e.getProvider("app-check").getImmediate();return SY(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Se(_Y,bY)}DY();var TY=["localhost","0.0.0.0","127.0.0.1"],UAe=typeof window<"u"&&TY.includes(window.location.hostname);var IY="firebase",AY="10.12.5";za.registerVersion(IY,AY,"app-compat");var MY=["ngOnDestroy"],lL=(e,t,n,i={})=>new Proxy(e,{get:(s,r)=>n.runOutsideAngular(()=>{if(e[r])return i?.spy?.get&&i.spy.get(r,e[r]),e[r];if(MY.indexOf(r)>-1)return()=>{};let o=t.toPromise().then(a=>{let l=a?.[r];return typeof l=="function"?l.bind(a):l?.then?l.then(c=>n.run(()=>c)):n.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(u=>{let h=u?.(...c);return i?.spy?.apply&&i.spy.apply(r,c,h),h})})})});var sE=class{constructor(t){return t}},Jv=new te("angularfire2.app.options"),cL=new te("angularfire2.app.name");function uL(e,t,n){let i=typeof n=="string"&&n||"[DEFAULT]",s=typeof n=="object"&&n||{};s.name=s.name||i;let o=za.apps.filter(a=>a&&a.name===s.name)[0]||t.runOutsideAngular(()=>za.initializeApp(e,s));try{if(JSON.stringify(e)!==JSON.stringify(o.options)){let a=!!module.hot;PY("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new sE(o)}var PY=(e,...t)=>{Wh()&&typeof console<"u"&&console[e](...t)};function dL(e,t,n,i,s){let[,r,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===e)||[];if(r)return FY(s,o)||(aL("error",`${t} was already initialized on the ${n} Firebase App with different settings.${xY?" You may need to reload as Firebase is not HMR aware.":""}`),aL("warn",{is:s,was:o})),r;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([e,a,s]),a}}function FY(e,t){try{return e.toString()===t.toString()}catch{return e===t}}var xY=typeof module<"u"&&!!module.hot,aL=(e,...t)=>{Wh()&&typeof console<"u"&&console[e](...t)};globalThis.\u0275AngularfireInstanceCache||=[];var OY=new te("angularfire2.auth.use-emulator"),NY=new te("angularfire2.auth.settings"),kY=new te("angularfire2.auth.tenant-id"),LY=new te("angularfire2.auth.langugage-code"),VY=new te("angularfire2.auth.use-device-language"),BY=new te("angularfire.auth.persistence"),GY=(e,t,n,i,s,r,o,a)=>dL(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{let l=t.runOutsideAngular(()=>e.auth());if(n&&l.useEmulator(...n),i&&(l.tenantId=i),l.languageCode=s,r&&l.useDeviceLanguage(),o)for(let[c,u]of Object.entries(o))l.settings[c]=u;return a&&l.setPersistence(a),l},[n,i,s,r,o,a]),Tu=(()=>{class e{authState;idToken;user;idTokenResult;credential;constructor(n,i,s,r,o,a,l,c,u,h,f,p){let v=new Me,y=X(void 0).pipe(xi(o.outsideAngular),ke(()=>r.runOutsideAngular(()=>import("./chunk-Z535KTGD.js"))),oe(()=>uL(n,r,i)),oe(C=>GY(C,r,a,c,u,h,l,f)),Ug({bufferSize:1,refCount:!1}));if(so(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=X(null);else{y.pipe(Oi()).subscribe();let C=y.pipe(ke(R=>R.getRedirectResult().then(F=>F,()=>null)),K0,Ug({bufferSize:1,refCount:!1})),E=y.pipe(ke(R=>new le(F=>({unsubscribe:r.runOutsideAngular(()=>R.onAuthStateChanged($=>F.next($),$=>F.error($),()=>F.complete()))})))),T=y.pipe(ke(R=>new le(F=>({unsubscribe:r.runOutsideAngular(()=>R.onIdTokenChanged($=>F.next($),$=>F.error($),()=>F.complete()))}))));this.authState=C.pipe(Wg(E),ts(o.outsideAngular),xi(o.insideAngular)),this.user=C.pipe(Wg(T),ts(o.outsideAngular),xi(o.insideAngular)),this.idToken=this.user.pipe(ke(R=>R?tt(R.getIdToken()):X(null))),this.idTokenResult=this.user.pipe(ke(R=>R?tt(R.getIdTokenResult()):X(null))),this.credential=jo(C,v,this.authState.pipe(Ye(R=>!R))).pipe(oe(R=>R?.user?R:null),ts(o.outsideAngular),xi(o.insideAngular))}return lL(this,y,r,{spy:{apply:(C,E,T)=>{(C.startsWith("signIn")||C.startsWith("createUser"))&&T.then(R=>v.next(R))}}})}static \u0275fac=function(i){return new(i||e)(Z(Jv),Z(cL,8),Z(jt),Z(de),Z(Xt),Z(OY,8),Z(NY,8),Z(kY,8),Z(LY,8),Z(VY,8),Z(BY,8),Z(ii,8))};static \u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})();var hs=(()=>{let t=class t{constructor(i,s,r){this.firebaseAuth=i,this.router=s,this.fireAuth=r,this.user$=zk(this.firebaseAuth),this.currentUserSig=Cb(void 0)}register(i,s,r){let o=$k(this.firebaseAuth,i,s).then(a=>Qk(a.user,{displayName:r}));return tt(o)}login(i,s){let r=Kk(this.firebaseAuth,i,s).then(()=>{});return tt(r)}logout(){this.firebaseAuth.signOut().then(()=>{this.currentUserSig.set(null),this.router.navigateByUrl("/login")})}googleSignIn(){return this.fireAuth.signInWithPopup(new Lw).then(i=>{this.router.navigate(["/dashboard"]),localStorage.setItem("token",JSON.stringify(i.user?.uid))},i=>{console.log(i)})}facebookSignIn(){return this.fireAuth.signInWithPopup(new kw).then(i=>{this.router.navigate(["/dashboard"]),localStorage.setItem("token",JSON.stringify(i.user?.uid))},i=>{console.log(i)})}};t.\u0275fac=function(s){return new(s||t)(Z(ds),Z(cn),Z(Tu))},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Xv=(()=>{let t=class t{constructor(i){this.authService=i}googleSignIn(){this.authService.googleSignIn()}facebookSignIn(){this.authService.facebookSignIn()}};t.\u0275fac=function(s){return new(s||t)(Q(hs))},t.\u0275cmp=_e({type:t,selectors:[["app-platform-buttons"]],standalone:!0,features:[be],decls:4,vars:0,consts:[[1,"w-100","shadow-none","platform-signup-button","mb-0",3,"click"],[1,"bi","bi-google"],[1,"ms-2"]],template:function(s,r){s&1&&(H(0,"button",0),pe("click",function(){return r.googleSignIn()}),ne(1,"i",1),H(2,"span",2),ue(3,"Sign in with Google"),U()())}});let e=t;return e})();var hL=(()=>{let t=class t{constructor(i){this.platformId=i}isBrowser(){return au(this.platformId)}isServer(){return so(this.platformId)}};t.\u0275fac=function(s){return new(s||t)(Z(jt))},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function UY(e,t){e&1&&(H(0,"div"),ne(1,"app-loader"),U())}function WY(e,t){if(e&1&&(H(0,"div",22),ue(1),U()),e&2){let n=fe(2);K(),Vt(" ",n.error," ")}}function jY(e,t){if(e&1){let n=st();ne(0,"app-wave",2),H(1,"div",3),ne(2,"app-dollar-sign-svgs",2),H(3,"form",4),pe("ngSubmit",function(){De(n);let s=fe();return Te(s.login())}),H(4,"div",5)(5,"div",6)(6,"h1",7),ue(7,"Login"),U(),H(8,"h5",8),ue(9,"Please sign in to continue"),U(),H(10,"div",9),ne(11,"app-platform-buttons"),H(12,"div",10),ne(13,"hr",11),H(14,"span",12),ue(15,"or"),U()(),ne(16,"input",13),U(),H(17,"div",14),ne(18,"input",15),U(),H(19,"button",16),ue(20," Login "),ne(21,"i",17),U(),H(22,"div",18)(23,"a",19),pe("click",function(){De(n);let s=fe();return Te(s.navigateToRegister())}),ue(24,"Sign Up"),U()(),Ce(25,WY,2,1,"div",20),U()()()(),ne(26,"app-wave",21)}if(e&2){let n=fe();K(3),re("formGroup",n.loginForm),K(22),re("ngIf",n.error),K(),re("wave","bottom")}}var fL=(()=>{let t=class t{constructor(i,s,r,o){this.fb=i,this.auth=s,this.router=r,this.platformService=o,this.isLoading=!0,this.loginForm=this.fb.nonNullable.group({email:[""],password:[""]}),this.error=null,this.platformService.isBrowser()&&(this.isLoading=!1)}login(){this.isLoading=!0;let i=this.loginForm.getRawValue();this.auth.login(i.email,i.password).subscribe({next:()=>this.router.navigateByUrl("/dashboard"),error:s=>{this.error=s.message,this.isLoading=!1},complete:()=>{this.isLoading=!1}})}navigateToRegister(){this.router.navigateByUrl("/register")}};t.\u0275fac=function(s){return new(s||t)(Q(bu),Q(hs),Q(cn),Q(hL))},t.\u0275cmp=_e({type:t,selectors:[["app-login"]],standalone:!0,features:[be],decls:3,vars:2,consts:[["loginFormTemplate",""],[4,"ngIf","ngIfElse"],[1,"z-0"],[1,"container-fluid","vh-100","d-flex","flex-column","align-items-center","justify-content-center","bg-light","z-n1"],[1,"z-3",3,"ngSubmit","formGroup"],[1,"d-flex","justify-content-center","align-items-center"],[1,"row","col-11","col-md-9","col-lg-7","col-xl-5"],[1,"fs-1","fw-bolder","text-start"],[1,"fs-6","text-muted","mb-4"],[1,"mb-0"],[1,"position-relative","text-center","my-4"],[1,"m-0"],[1,"position-absolute","top-50","start-50","translate-middle","bg-light","px-2"],["id","email","type","email","formControlName","email","placeholder","Email",1,"email","w-100","shadow-none"],[1,"mb-4","position-relative"],["id","password","type","password","formControlName","password","placeholder","Password",1,"password","w-100"],["type","submit",1,"col-4","offset-8","btn","btn-warning","text-white","mb-3"],[1,"bi","bi-arrow-right"],[1,"text-end"],["role","button",1,"text-decoration-none","hyperlink",3,"click"],["class","text-danger",4,"ngIf"],[1,"z-0",3,"wave"],[1,"text-danger"]],template:function(s,r){if(s&1&&Ce(0,UY,2,0,"div",1)(1,jY,27,3,"ng-template",null,0,ni),s&2){let o=la(2);re("ngIf",r.isLoading)("ngIfElse",o)}},dependencies:[Mt,Vn,Er,_u,us,br,Su,Cl,yl,zv,$v,qv,Xv],styles:["svg[_ngcontent-%COMP%]{pointer-events:none}.email[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px;border-bottom:none}.password[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px}"]});let e=t;return e})();var pL=(()=>{let t=class t{constructor(i,s,r){this.fb=i,this.authService=s,this.router=r,this.registerForm=this.fb.nonNullable.group({email:["",cs.required],username:["",cs.required],password:["",cs.required]}),this.error=null}register(){console.log(this.registerForm.value);let i=this.registerForm.getRawValue();this.authService.register(i.email,i.password,i.username).subscribe({next:()=>this.router.navigate(["/login"]),error:s=>{this.error=s.code}})}navigateToLogin(){this.router.navigateByUrl("/login")}};t.\u0275fac=function(s){return new(s||t)(Q(bu),Q(hs),Q(cn))},t.\u0275cmp=_e({type:t,selectors:[["app-register"]],standalone:!0,features:[be],decls:28,vars:2,consts:[[1,"z-0"],[1,"container-fluid","vh-100","d-flex","flex-column","align-items-center","justify-content-center","bg-light","z-n1"],[1,"z-3",3,"ngSubmit","formGroup"],[1,"d-flex","justify-content-center","align-items-center"],[1,"row","col-11","col-md-9","col-lg-7","col-xl-5"],[1,"fs-1","fw-bolder","text-start"],[1,"fs-6","text-muted","mb-4"],[1,"mb-0"],[1,"position-relative","text-center","my-4"],[1,"m-0"],[1,"position-absolute","top-50","start-50","translate-middle","bg-light","px-2"],["id","email","type","email","formControlName","email","placeholder","Email",1,"email","w-100","shadow-none"],[1,"mb-0","position-relative"],["id","username","type","text","formControlName","username","placeholder","Username",1,"username","w-100"],[1,"mb-4","position-relative"],["id","password","type","password","formControlName","password","placeholder","Password",1,"password","w-100"],["type","submit",1,"col-4","offset-8","btn","btn-warning","text-white","mb-3"],[1,"bi","bi-arrow-right"],[1,"text-end"],["role","button",1,"text-decoration-none",2,"color","#fd7e14",3,"click"],[1,"z-0",3,"wave"]],template:function(s,r){s&1&&(ne(0,"app-wave",0),H(1,"div",1),ne(2,"app-dollar-sign-svgs",0),H(3,"form",2),pe("ngSubmit",function(){return r.register()}),H(4,"div",3)(5,"div",4)(6,"h1",5),ue(7,"Register"),U(),H(8,"h5",6),ue(9,"Please sign up to continue"),U(),H(10,"div",7),ne(11,"app-platform-buttons"),H(12,"div",8),ne(13,"hr",9),H(14,"span",10),ue(15,"or"),U()(),ne(16,"input",11),U(),H(17,"div",12),ne(18,"input",13),U(),H(19,"div",14),ne(20,"input",15),U(),H(21,"button",16),ue(22," Register "),ne(23,"i",17),U(),H(24,"div",18)(25,"a",19),pe("click",function(){return r.navigateToLogin()}),ue(26,"Login"),U()()()()()(),ne(27,"app-wave",20)),s&2&&(K(3),re("formGroup",r.registerForm),K(24),re("wave","bottom"))},dependencies:[Er,_u,us,br,Su,Cl,yl,$v,zv,Xv],styles:[".email[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px;border-bottom:none}.password[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px;border-top:none}"]});let e=t;return e})();var zY=(()=>{let t=class t{constructor(i,s){this.auth=i,this.router=s}canActivate(){return Cf(this.auth).pipe(ut(1),oe(i=>i?!0:(this.router.navigate(["/login"]),!1)))}};t.\u0275fac=function(s){return new(s||t)(Z(ds),Z(cn))},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),$Y=(()=>{let t=class t{constructor(i,s){this.auth=i,this.router=s}canActivate(){return Cf(this.auth).pipe(ut(1),oe(i=>i?(this.router.navigate(["/dashboard"]),!1):!0))}};t.\u0275fac=function(s){return new(s||t)(Z(ds),Z(cn))},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),gL=(e,t)=>G(zY).canActivate(),Zv=(e,t)=>G($Y).canActivate();function wf(e){e||(Lx(wf),e=G(tu));let t=new le(n=>e.onDestroy(n.next.bind(n)));return n=>n.pipe(Tt(t))}var Zt="top",xn="bottom",yn="right",dn="left",eC="auto",va=[Zt,xn,yn,dn],ro="start",Sl="end",mL="clippingParents",tC="viewport",Iu="popper",vL="reference",oE=va.reduce(function(e,t){return e.concat([t+"-"+ro,t+"-"+Sl])},[]),nC=[].concat(va,[eC]).reduce(function(e,t){return e.concat([t,t+"-"+ro,t+"-"+Sl])},[]),qY="beforeRead",KY="read",QY="afterRead",YY="beforeMain",JY="main",XY="afterMain",ZY="beforeWrite",eJ="write",tJ="afterWrite",CL=[qY,KY,QY,YY,JY,XY,ZY,eJ,tJ];function wn(e){return e?(e.nodeName||"").toLowerCase():null}function Rt(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function fs(e){var t=Rt(e).Element;return e instanceof t||e instanceof Element}function hn(e){var t=Rt(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Au(e){if(typeof ShadowRoot>"u")return!1;var t=Rt(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function nJ(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var i=t.styles[n]||{},s=t.attributes[n]||{},r=t.elements[n];!hn(r)||!wn(r)||(Object.assign(r.style,i),Object.keys(s).forEach(function(o){var a=s[o];a===!1?r.removeAttribute(o):r.setAttribute(o,a===!0?"":a)}))})}function iJ(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(i){var s=t.elements[i],r=t.attributes[i]||{},o=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:n[i]),a=o.reduce(function(l,c){return l[c]="",l},{});!hn(s)||!wn(s)||(Object.assign(s.style,a),Object.keys(r).forEach(function(l){s.removeAttribute(l)}))})}}var yL={name:"applyStyles",enabled:!0,phase:"write",fn:nJ,effect:iJ,requires:["computeStyles"]};function Sn(e){return e.split("-")[0]}var zs=Math.max,_l=Math.min,oo=Math.round;function Mu(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Sf(){return!/^((?!chrome|android).)*safari/i.test(Mu())}function ps(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=e.getBoundingClientRect(),s=1,r=1;t&&hn(e)&&(s=e.offsetWidth>0&&oo(i.width)/e.offsetWidth||1,r=e.offsetHeight>0&&oo(i.height)/e.offsetHeight||1);var o=fs(e)?Rt(e):window,a=o.visualViewport,l=!Sf()&&n,c=(i.left+(l&&a?a.offsetLeft:0))/s,u=(i.top+(l&&a?a.offsetTop:0))/r,h=i.width/s,f=i.height/r;return{width:h,height:f,top:u,right:c+h,bottom:u+f,left:c,x:c,y:u}}function bl(e){var t=ps(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function _f(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Au(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function si(e){return Rt(e).getComputedStyle(e)}function aE(e){return["table","td","th"].indexOf(wn(e))>=0}function On(e){return((fs(e)?e.ownerDocument:e.document)||window.document).documentElement}function ao(e){return wn(e)==="html"?e:e.assignedSlot||e.parentNode||(Au(e)?e.host:null)||On(e)}function wL(e){return!hn(e)||si(e).position==="fixed"?null:e.offsetParent}function sJ(e){var t=/firefox/i.test(Mu()),n=/Trident/i.test(Mu());if(n&&hn(e)){var i=si(e);if(i.position==="fixed")return null}var s=ao(e);for(Au(s)&&(s=s.host);hn(s)&&["html","body"].indexOf(wn(s))<0;){var r=si(s);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||t&&r.willChange==="filter"||t&&r.filter&&r.filter!=="none")return s;s=s.parentNode}return null}function $s(e){for(var t=Rt(e),n=wL(e);n&&aE(n)&&si(n).position==="static";)n=wL(n);return n&&(wn(n)==="html"||wn(n)==="body"&&si(n).position==="static")?t:n||sJ(e)||t}function El(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Dl(e,t,n){return zs(e,_l(t,n))}function SL(e,t,n){var i=Dl(e,t,n);return i>n?n:i}function bf(){return{top:0,right:0,bottom:0,left:0}}function Ef(e){return Object.assign({},bf(),e)}function Df(e,t){return t.reduce(function(n,i){return n[i]=e,n},{})}var rJ=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,Ef(typeof t!="number"?t:Df(t,va))};function oJ(e){var t,n=e.state,i=e.name,s=e.options,r=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Sn(n.placement),l=El(a),c=[dn,yn].indexOf(a)>=0,u=c?"height":"width";if(!(!r||!o)){var h=rJ(s.padding,n),f=bl(r),p=l==="y"?Zt:dn,v=l==="y"?xn:yn,y=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],C=o[l]-n.rects.reference[l],E=$s(r),T=E?l==="y"?E.clientHeight||0:E.clientWidth||0:0,R=y/2-C/2,F=h[p],$=T-f[u]-h[v],k=T/2-f[u]/2+R,b=Dl(F,k,$),S=l;n.modifiersData[i]=(t={},t[S]=b,t.centerOffset=b-k,t)}}function aJ(e){var t=e.state,n=e.options,i=n.element,s=i===void 0?"[data-popper-arrow]":i;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||_f(t.elements.popper,s)&&(t.elements.arrow=s))}var lE={name:"arrow",enabled:!0,phase:"main",fn:oJ,effect:aJ,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function gs(e){return e.split("-")[1]}var lJ={top:"auto",right:"auto",bottom:"auto",left:"auto"};function cJ(e,t){var n=e.x,i=e.y,s=t.devicePixelRatio||1;return{x:oo(n*s)/s||0,y:oo(i*s)/s||0}}function _L(e){var t,n=e.popper,i=e.popperRect,s=e.placement,r=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,h=e.isFixed,f=o.x,p=f===void 0?0:f,v=o.y,y=v===void 0?0:v,C=typeof u=="function"?u({x:p,y}):{x:p,y};p=C.x,y=C.y;var E=o.hasOwnProperty("x"),T=o.hasOwnProperty("y"),R=dn,F=Zt,$=window;if(c){var k=$s(n),b="clientHeight",S="clientWidth";if(k===Rt(n)&&(k=On(n),si(k).position!=="static"&&a==="absolute"&&(b="scrollHeight",S="scrollWidth")),k=k,s===Zt||(s===dn||s===yn)&&r===Sl){F=xn;var _=h&&k===$&&$.visualViewport?$.visualViewport.height:k[b];y-=_-i.height,y*=l?1:-1}if(s===dn||(s===Zt||s===xn)&&r===Sl){R=yn;var I=h&&k===$&&$.visualViewport?$.visualViewport.width:k[S];p-=I-i.width,p*=l?1:-1}}var A=Object.assign({position:a},c&&lJ),M=u===!0?cJ({x:p,y},Rt(n)):{x:p,y};if(p=M.x,y=M.y,l){var D;return Object.assign({},A,(D={},D[F]=T?"0":"",D[R]=E?"0":"",D.transform=($.devicePixelRatio||1)<=1?"translate("+p+"px, "+y+"px)":"translate3d("+p+"px, "+y+"px, 0)",D))}return Object.assign({},A,(t={},t[F]=T?y+"px":"",t[R]=E?p+"px":"",t.transform="",t))}function uJ(e){var t=e.state,n=e.options,i=n.gpuAcceleration,s=i===void 0?!0:i,r=n.adaptive,o=r===void 0?!0:r,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:Sn(t.placement),variation:gs(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,_L(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,_L(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var bL={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:uJ,data:{}};var iC={passive:!0};function dJ(e){var t=e.state,n=e.instance,i=e.options,s=i.scroll,r=s===void 0?!0:s,o=i.resize,a=o===void 0?!0:o,l=Rt(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&c.forEach(function(u){u.addEventListener("scroll",n.update,iC)}),a&&l.addEventListener("resize",n.update,iC),function(){r&&c.forEach(function(u){u.removeEventListener("scroll",n.update,iC)}),a&&l.removeEventListener("resize",n.update,iC)}}var EL={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:dJ,data:{}};var hJ={left:"right",right:"left",bottom:"top",top:"bottom"};function Pu(e){return e.replace(/left|right|bottom|top/g,function(t){return hJ[t]})}var fJ={start:"end",end:"start"};function sC(e){return e.replace(/start|end/g,function(t){return fJ[t]})}function Tl(e){var t=Rt(e),n=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:n,scrollTop:i}}function Rl(e){return ps(On(e)).left+Tl(e).scrollLeft}function cE(e,t){var n=Rt(e),i=On(e),s=n.visualViewport,r=i.clientWidth,o=i.clientHeight,a=0,l=0;if(s){r=s.width,o=s.height;var c=Sf();(c||!c&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:a+Rl(e),y:l}}function uE(e){var t,n=On(e),i=Tl(e),s=(t=e.ownerDocument)==null?void 0:t.body,r=zs(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=zs(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-i.scrollLeft+Rl(e),l=-i.scrollTop;return si(s||n).direction==="rtl"&&(a+=zs(n.clientWidth,s?s.clientWidth:0)-r),{width:r,height:o,x:a,y:l}}function Il(e){var t=si(e),n=t.overflow,i=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+i)}function rC(e){return["html","body","#document"].indexOf(wn(e))>=0?e.ownerDocument.body:hn(e)&&Il(e)?e:rC(ao(e))}function Ca(e,t){var n;t===void 0&&(t=[]);var i=rC(e),s=i===((n=e.ownerDocument)==null?void 0:n.body),r=Rt(i),o=s?[r].concat(r.visualViewport||[],Il(i)?i:[]):i,a=t.concat(o);return s?a:a.concat(Ca(ao(o)))}function Fu(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function pJ(e,t){var n=ps(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function DL(e,t,n){return t===tC?Fu(cE(e,n)):fs(t)?pJ(t,n):Fu(uE(On(e)))}function gJ(e){var t=Ca(ao(e)),n=["absolute","fixed"].indexOf(si(e).position)>=0,i=n&&hn(e)?$s(e):e;return fs(i)?t.filter(function(s){return fs(s)&&_f(s,i)&&wn(s)!=="body"}):[]}function dE(e,t,n,i){var s=t==="clippingParents"?gJ(e):[].concat(t),r=[].concat(s,[n]),o=r[0],a=r.reduce(function(l,c){var u=DL(e,c,i);return l.top=zs(u.top,l.top),l.right=_l(u.right,l.right),l.bottom=_l(u.bottom,l.bottom),l.left=zs(u.left,l.left),l},DL(e,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Tf(e){var t=e.reference,n=e.element,i=e.placement,s=i?Sn(i):null,r=i?gs(i):null,o=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,l;switch(s){case Zt:l={x:o,y:t.y-n.height};break;case xn:l={x:o,y:t.y+t.height};break;case yn:l={x:t.x+t.width,y:a};break;case dn:l={x:t.x-n.width,y:a};break;default:l={x:t.x,y:t.y}}var c=s?El(s):null;if(c!=null){var u=c==="y"?"height":"width";switch(r){case ro:l[c]=l[c]-(t[u]/2-n[u]/2);break;case Sl:l[c]=l[c]+(t[u]/2-n[u]/2);break;default:}}return l}function ya(e,t){t===void 0&&(t={});var n=t,i=n.placement,s=i===void 0?e.placement:i,r=n.strategy,o=r===void 0?e.strategy:r,a=n.boundary,l=a===void 0?mL:a,c=n.rootBoundary,u=c===void 0?tC:c,h=n.elementContext,f=h===void 0?Iu:h,p=n.altBoundary,v=p===void 0?!1:p,y=n.padding,C=y===void 0?0:y,E=Ef(typeof C!="number"?C:Df(C,va)),T=f===Iu?vL:Iu,R=e.rects.popper,F=e.elements[v?T:f],$=dE(fs(F)?F:F.contextElement||On(e.elements.popper),l,u,o),k=ps(e.elements.reference),b=Tf({reference:k,element:R,strategy:"absolute",placement:s}),S=Fu(Object.assign({},R,b)),_=f===Iu?S:k,I={top:$.top-_.top+E.top,bottom:_.bottom-$.bottom+E.bottom,left:$.left-_.left+E.left,right:_.right-$.right+E.right},A=e.modifiersData.offset;if(f===Iu&&A){var M=A[s];Object.keys(I).forEach(function(D){var Dn=[yn,xn].indexOf(D)>=0?1:-1,Mi=[Zt,xn].indexOf(D)>=0?"y":"x";I[D]+=M[Mi]*Dn})}return I}function hE(e,t){t===void 0&&(t={});var n=t,i=n.placement,s=n.boundary,r=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?nC:l,u=gs(i),h=u?a?oE:oE.filter(function(v){return gs(v)===u}):va,f=h.filter(function(v){return c.indexOf(v)>=0});f.length===0&&(f=h);var p=f.reduce(function(v,y){return v[y]=ya(e,{placement:y,boundary:s,rootBoundary:r,padding:o})[Sn(y)],v},{});return Object.keys(p).sort(function(v,y){return p[v]-p[y]})}function mJ(e){if(Sn(e)===eC)return[];var t=Pu(e);return[sC(e),t,sC(t)]}function vJ(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var s=n.mainAxis,r=s===void 0?!0:s,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,f=n.altBoundary,p=n.flipVariations,v=p===void 0?!0:p,y=n.allowedAutoPlacements,C=t.options.placement,E=Sn(C),T=E===C,R=l||(T||!v?[Pu(C)]:mJ(C)),F=[C].concat(R).reduce(function(Fo,fi){return Fo.concat(Sn(fi)===eC?hE(t,{placement:fi,boundary:u,rootBoundary:h,padding:c,flipVariations:v,allowedAutoPlacements:y}):fi)},[]),$=t.rects.reference,k=t.rects.popper,b=new Map,S=!0,_=F[0],I=0;I<F.length;I++){var A=F[I],M=Sn(A),D=gs(A)===ro,Dn=[Zt,xn].indexOf(M)>=0,Mi=Dn?"width":"height",Qn=ya(t,{placement:A,boundary:u,rootBoundary:h,altBoundary:f,padding:c}),Tn=Dn?D?yn:dn:D?xn:Zt;$[Mi]>k[Mi]&&(Tn=Pu(Tn));var nr=Pu(Tn),Ts=[];if(r&&Ts.push(Qn[M]<=0),a&&Ts.push(Qn[Tn]<=0,Qn[nr]<=0),Ts.every(function(Fo){return Fo})){_=A,S=!1;break}b.set(A,Ts)}if(S)for(var ka=v?3:1,Vd=function(fi){var La=F.find(function(ir){var Vr=b.get(ir);if(Vr)return Vr.slice(0,fi).every(function(Bd){return Bd})});if(La)return _=La,"break"},hi=ka;hi>0;hi--){var Ut=Vd(hi);if(Ut==="break")break}t.placement!==_&&(t.modifiersData[i]._skip=!0,t.placement=_,t.reset=!0)}}var fE={name:"flip",enabled:!0,phase:"main",fn:vJ,requiresIfExists:["offset"],data:{_skip:!1}};function CJ(e,t,n){var i=Sn(e),s=[dn,Zt].indexOf(i)>=0?-1:1,r=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,o=r[0],a=r[1];return o=o||0,a=(a||0)*s,[dn,yn].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function yJ(e){var t=e.state,n=e.options,i=e.name,s=n.offset,r=s===void 0?[0,0]:s,o=nC.reduce(function(u,h){return u[h]=CJ(h,t.rects,r),u},{}),a=o[t.placement],l=a.x,c=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[i]=o}var pE={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:yJ};function wJ(e){var t=e.state,n=e.name;t.modifiersData[n]=Tf({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var TL={name:"popperOffsets",enabled:!0,phase:"read",fn:wJ,data:{}};function gE(e){return e==="x"?"y":"x"}function SJ(e){var t=e.state,n=e.options,i=e.name,s=n.mainAxis,r=s===void 0?!0:s,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,f=n.tether,p=f===void 0?!0:f,v=n.tetherOffset,y=v===void 0?0:v,C=ya(t,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),E=Sn(t.placement),T=gs(t.placement),R=!T,F=El(E),$=gE(F),k=t.modifiersData.popperOffsets,b=t.rects.reference,S=t.rects.popper,_=typeof y=="function"?y(Object.assign({},t.rects,{placement:t.placement})):y,I=typeof _=="number"?{mainAxis:_,altAxis:_}:Object.assign({mainAxis:0,altAxis:0},_),A=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,M={x:0,y:0};if(k){if(r){var D,Dn=F==="y"?Zt:dn,Mi=F==="y"?xn:yn,Qn=F==="y"?"height":"width",Tn=k[F],nr=Tn+C[Dn],Ts=Tn-C[Mi],ka=p?-S[Qn]/2:0,Vd=T===ro?b[Qn]:S[Qn],hi=T===ro?-S[Qn]:-b[Qn],Ut=t.elements.arrow,Fo=p&&Ut?bl(Ut):{width:0,height:0},fi=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:bf(),La=fi[Dn],ir=fi[Mi],Vr=Dl(0,b[Qn],Fo[Qn]),Bd=R?b[Qn]/2-ka-Vr-La-I.mainAxis:Vd-Vr-La-I.mainAxis,gc=R?-b[Qn]/2+ka+Vr+ir+I.mainAxis:hi+Vr+ir+I.mainAxis,xo=t.elements.arrow&&$s(t.elements.arrow),Gd=xo?F==="y"?xo.clientTop||0:xo.clientLeft||0:0,mc=(D=A?.[F])!=null?D:0,Hd=Tn+Bd-mc-Gd,Ud=Tn+gc-mc,Wd=Dl(p?_l(nr,Hd):nr,Tn,p?zs(Ts,Ud):Ts);k[F]=Wd,M[F]=Wd-Tn}if(a){var jd,mw=F==="x"?Zt:dn,Hp=F==="x"?xn:yn,sr=k[$],Oo=$==="y"?"height":"width",zd=sr+C[mw],Up=sr-C[Hp],Va=[Zt,dn].indexOf(E)!==-1,vc=(jd=A?.[$])!=null?jd:0,Cc=Va?zd:sr-b[Oo]-S[Oo]-vc+I.altAxis,rn=Va?sr+b[Oo]+S[Oo]-vc-I.altAxis:Up,fn=p&&Va?SL(Cc,sr,rn):Dl(p?Cc:zd,sr,p?rn:Up);k[$]=fn,M[$]=fn-sr}t.modifiersData[i]=M}}var mE={name:"preventOverflow",enabled:!0,phase:"main",fn:SJ,requiresIfExists:["offset"]};function vE(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function CE(e){return e===Rt(e)||!hn(e)?Tl(e):vE(e)}function _J(e){var t=e.getBoundingClientRect(),n=oo(t.width)/e.offsetWidth||1,i=oo(t.height)/e.offsetHeight||1;return n!==1||i!==1}function yE(e,t,n){n===void 0&&(n=!1);var i=hn(t),s=hn(t)&&_J(t),r=On(t),o=ps(e,s,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&((wn(t)!=="body"||Il(r))&&(a=CE(t)),hn(t)?(l=ps(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):r&&(l.x=Rl(r))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function bJ(e){var t=new Map,n=new Set,i=[];e.forEach(function(r){t.set(r.name,r)});function s(r){n.add(r.name);var o=[].concat(r.requires||[],r.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=t.get(a);l&&s(l)}}),i.push(r)}return e.forEach(function(r){n.has(r.name)||s(r)}),i}function wE(e){var t=bJ(e);return CL.reduce(function(n,i){return n.concat(t.filter(function(s){return s.phase===i}))},[])}function SE(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function _E(e){var t=e.reduce(function(n,i){var s=n[i.name];return n[i.name]=s?Object.assign({},s,i,{options:Object.assign({},s.options,i.options),data:Object.assign({},s.data,i.data)}):i,n},{});return Object.keys(t).map(function(n){return t[n]})}var RL={placement:"bottom",modifiers:[],strategy:"absolute"};function IL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function AL(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,i=n===void 0?[]:n,s=t.defaultOptions,r=s===void 0?RL:s;return function(a,l,c){c===void 0&&(c=r);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},RL,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},h=[],f=!1,p={state:u,setOptions:function(E){var T=typeof E=="function"?E(u.options):E;y(),u.options=Object.assign({},r,u.options,T),u.scrollParents={reference:fs(a)?Ca(a):a.contextElement?Ca(a.contextElement):[],popper:Ca(l)};var R=wE(_E([].concat(i,u.options.modifiers)));return u.orderedModifiers=R.filter(function(F){return F.enabled}),v(),p.update()},forceUpdate:function(){if(!f){var E=u.elements,T=E.reference,R=E.popper;if(IL(T,R)){u.rects={reference:yE(T,$s(R),u.options.strategy==="fixed"),popper:bl(R)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(I){return u.modifiersData[I.name]=Object.assign({},I.data)});for(var F=0;F<u.orderedModifiers.length;F++){if(u.reset===!0){u.reset=!1,F=-1;continue}var $=u.orderedModifiers[F],k=$.fn,b=$.options,S=b===void 0?{}:b,_=$.name;typeof k=="function"&&(u=k({state:u,options:S,name:_,instance:p})||u)}}}},update:SE(function(){return new Promise(function(C){p.forceUpdate(),C(u)})}),destroy:function(){y(),f=!0}};if(!IL(a,l))return p;p.setOptions(c).then(function(C){!f&&c.onFirstUpdate&&c.onFirstUpdate(C)});function v(){u.orderedModifiers.forEach(function(C){var E=C.name,T=C.options,R=T===void 0?{}:T,F=C.effect;if(typeof F=="function"){var $=F({state:u,name:E,instance:p,options:R}),k=function(){};h.push($||k)}})}function y(){h.forEach(function(C){return C()}),h=[]}return p}}var EJ=[EL,TL,bL,yL],bE=AL({defaultModifiers:EJ});var OL=["*"];var DJ=["ngbDatepickerDayView",""],TJ=["month"],RJ=["year"];function IJ(e,t){if(e&1&&(H(0,"option",3),ue(1),U()),e&2){let n=t.$implicit,i=fe();re("value",n),eo("aria-label",i.i18n.getMonthFullName(n,i.date.year)),K(),Gi(i.i18n.getMonthShortName(n,i.date.year))}}function AJ(e,t){if(e&1&&(H(0,"option",3),ue(1),U()),e&2){let n=t.$implicit,i=fe();re("value",n),K(),Gi(i.i18n.getYearNumerals(n))}}function MJ(e,t){if(e&1){let n=st();H(0,"ngb-datepicker-navigation-select",6),pe("select",function(s){De(n);let r=fe();return Te(r.select.emit(s))}),U()}if(e&2){let n=fe();re("date",n.date)("disabled",n.disabled)("months",n.selectBoxes.months)("years",n.selectBoxes.years)}}function PJ(e,t){e&1&&ne(0,"div",7)}function FJ(e,t){e&1&&ne(0,"div",7)}function xJ(e,t){if(e&1&&(Ce(0,PJ,1,0,"div",7),H(1,"div",8),ue(2),U(),Ce(3,FJ,1,0,"div",7)),e&2){let n=t.$implicit,i=t.$index,s=fe(2);ti(0,i>0?0:-1),K(2),Vt(" ",s.i18n.getMonthLabel(n.firstDate)," "),K(),ti(3,i!==s.months.length-1?3:-1)}}function OJ(e,t){if(e&1&&oa(0,xJ,4,3,null,null,ra),e&2){let n=fe();aa(n.months)}}function NJ(e,t){if(e&1&&(H(0,"div",1),ue(1),U()),e&2){let n=fe(2);K(),Gi(n.i18n.getWeekLabel())}}function kJ(e,t){if(e&1&&(H(0,"div",2),ue(1),U()),e&2){let n=t.$implicit;K(),Gi(n)}}function LJ(e,t){if(e&1&&(H(0,"div",0),Ce(1,NJ,2,1,"div",1),oa(2,kJ,2,1,"div",2,ra),U()),e&2){let n=fe();K(),ti(1,n.datepicker.showWeekNumbers?1:-1),K(),aa(n.viewModel.weekdays)}}function VJ(e,t){if(e&1&&(H(0,"div",4),ue(1),U()),e&2){let n=fe(2).$implicit,i=fe();K(),Gi(i.i18n.getWeekNumerals(n.number))}}function BJ(e,t){}function GJ(e,t){if(e&1&&Ce(0,BJ,0,0,"ng-template",7),e&2){let n=fe().$implicit,i=fe(3);re("ngTemplateOutlet",i.datepicker.dayTemplate)("ngTemplateOutletContext",n.context)}}function HJ(e,t){if(e&1){let n=st();H(0,"div",6),pe("click",function(s){let r=De(n).$implicit;return fe(3).doSelect(r),Te(s.preventDefault())}),Ce(1,GJ,1,2,null,7),U()}if(e&2){let n=t.$implicit;wi("disabled",n.context.disabled)("hidden",n.hidden)("ngb-dp-today",n.context.today),re("tabindex",n.tabindex),eo("aria-label",n.ariaLabel),K(),ti(1,n.hidden?-1:1)}}function UJ(e,t){if(e&1&&(H(0,"div",3),Ce(1,VJ,2,1,"div",4),oa(2,HJ,2,9,"div",5,ra),U()),e&2){let n=fe().$implicit,i=fe();K(),ti(1,i.datepicker.showWeekNumbers?1:-1),K(),aa(n.days)}}function WJ(e,t){if(e&1&&Ce(0,UJ,4,1,"div",3),e&2){let n=t.$implicit;ti(0,n.collapsed?-1:0)}}var jJ=["defaultDayTemplate"],zJ=["content"],$J=e=>({$implicit:e});function qJ(e,t){if(e&1&&ne(0,"div",8),e&2){let n=t.date,i=t.currentMonth,s=t.selected,r=t.disabled,o=t.focused;re("date",n)("currentMonth",i)("selected",s)("disabled",r)("focused",o)}}function KJ(e,t){if(e&1&&(H(0,"div",10),ue(1),U()),e&2){let n=fe().$implicit,i=fe(2);K(),Vt(" ",i.i18n.getMonthLabel(n.firstDate)," ")}}function QJ(e,t){if(e&1&&(H(0,"div",9),Ce(1,KJ,2,1,"div",10),ne(2,"ngb-datepicker-month",11),U()),e&2){let n=t.$implicit,i=fe(2);K(),ti(1,i.navigation==="none"||i.displayMonths>1&&i.navigation==="select"?1:-1),K(),re("month",n.firstDate)}}function YJ(e,t){if(e&1&&oa(0,QJ,3,2,"div",9,ra),e&2){let n=fe();aa(n.model.months)}}function JJ(e,t){if(e&1){let n=st();H(0,"ngb-datepicker-navigation",12),pe("navigate",function(s){De(n);let r=fe();return Te(r.onNavigateEvent(s))})("select",function(s){De(n);let r=fe();return Te(r.onNavigateDateSelect(s))}),U()}if(e&2){let n=fe();re("date",n.model.firstDate)("months",n.model.months)("disabled",n.model.disabled)("showSelect",n.model.navigation==="select")("prevDisabled",n.model.prevDisabled)("nextDisabled",n.model.nextDisabled)("selectBoxes",n.model.selectBoxes)}}function XJ(e,t){}function ZJ(e,t){}var eX=["dialog"];var NL={animation:!0,transitionTimerDelayMs:5},kL=(()=>{let t=class t{constructor(){this.animation=NL.animation}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function tX(e){let{transitionDelay:t,transitionDuration:n}=window.getComputedStyle(e),i=parseFloat(t),s=parseFloat(n);return(i+s)*1e3}function uC(e){return parseInt(`${e}`,10)}function ME(e){return typeof e=="string"}function Ei(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function DE(e){return e!=null}function nX(e){return e&&e.then}function iX(e,t){return!t||typeof e.closest>"u"?null:e.closest(t)}function LL(e){return(e||document.body).getBoundingClientRect()}function sX(e){return t=>new le(n=>{let i=o=>e.run(()=>n.next(o)),s=o=>e.run(()=>n.error(o)),r=()=>e.run(()=>n.complete());return t.subscribe({next:i,error:s,complete:r})})}var rX=()=>{},{transitionTimerDelayMs:oX}=NL,oC=new Map,lo=(e,t,n,i)=>{let s=i.context||{},r=oC.get(t);if(r)switch(i.runningTransition){case"continue":return an;case"stop":e.run(()=>r.transition$.complete()),s=Object.assign(r.context,s),oC.delete(t)}let o=n(t,i.animation,s)||rX;if(!i.animation||window.getComputedStyle(t).transitionProperty==="none")return e.run(()=>o()),X(void 0).pipe(sX(e));let a=new Me,l=new Me,c=a.pipe(rS(!0));oC.set(t,{transition$:a,complete:()=>{l.next(),l.complete()},context:s});let u=tX(t);return e.runOutsideAngular(()=>{let h=Kt(t,"transitionend").pipe(Tt(c),Ye(({target:p})=>p===t)),f=Wo(u+oX).pipe(Tt(c));Lg(f,h,l).pipe(Tt(c)).subscribe(()=>{oC.delete(t),e.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};var zi=class e{static from(t){return t instanceof e?t:t?new e(t.year,t.month,t.day):null}constructor(t,n,i){this.year=Ei(t)?t:null,this.month=Ei(n)?n:null,this.day=Ei(i)?i:null}equals(t){return t!=null&&this.year===t.year&&this.month===t.month&&this.day===t.day}before(t){return t?this.year===t.year?this.month===t.month?this.day===t.day?!1:this.day<t.day:this.month<t.month:this.year<t.year:!1}after(t){return t?this.year===t.year?this.month===t.month?this.day===t.day?!1:this.day>t.day:this.month>t.month:this.year>t.year:!1}};function ML(e){return new zi(e.getFullYear(),e.getMonth()+1,e.getDate())}function aC(e){let t=new Date(e.year,e.month-1,e.day,12);return isNaN(t.getTime())||t.setFullYear(e.year),t}function aX(){return new lX}var Rf=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:()=>aX(),providedIn:"root"});let e=t;return e})(),lX=(()=>{let t=class t extends Rf{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(i,s="d",r=1){let o=aC(i),a=!0,l=o.getMonth();switch(s){case"y":o.setFullYear(o.getFullYear()+r);break;case"m":l+=r,o.setMonth(l),l=l%12,l<0&&(l=l+12);break;case"d":o.setDate(o.getDate()+r),a=!1;break;default:return i}return a&&o.getMonth()!==l&&o.setDate(0),ML(o)}getPrev(i,s="d",r=1){return this.getNext(i,s,-r)}getWeekday(i){let r=aC(i).getDay();return r===0?7:r}getWeekNumber(i,s){s===7&&(s=0);let r=(11-s)%7,o=i[r],a=aC(o);a.setDate(a.getDate()+4-(a.getDay()||7));let l=a.getTime();return a.setMonth(0),a.setDate(1),Math.floor(Math.round((l-a.getTime())/864e5)/7)+1}getToday(){return ML(new Date)}isValid(i){if(!i||!Ei(i.year)||!Ei(i.month)||!Ei(i.day)||i.year===0)return!1;let s=aC(i);return!isNaN(s.getTime())&&s.getFullYear()===i.year&&s.getMonth()+1===i.month&&s.getDate()===i.day}};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=is(t)))(r||t)}})(),t.\u0275prov=Y({token:t,factory:t.\u0275fac});let e=t;return e})();function xu(e,t){return!cX(e,t)}function VL(e,t){return!e&&!t?!1:!e||!t?!0:e.year!==t.year||e.month!==t.month}function cX(e,t){return!e&&!t||!!e&&!!t&&e.equals(t)}function uX(e,t){if(t&&e&&t.before(e))throw new Error(`'maxDate' ${t} should be greater than 'minDate' ${e}`)}function lC(e,t,n){return e&&t&&e.before(t)?t:e&&n&&e.after(n)?n:e||null}function EE(e,t){let{minDate:n,maxDate:i,disabled:s,markDisabled:r}=t;return!(e==null||s||r&&r(e,{year:e.year,month:e.month})||n&&e.before(n)||i&&e.after(i))}function dX(e,t,n,i){if(!t)return[];let s=e.getMonths(t.year);if(n&&t.year===n.year){let r=s.findIndex(o=>o===n.month);s=s.slice(r)}if(i&&t.year===i.year){let r=s.findIndex(o=>o===i.month);s=s.slice(0,r+1)}return s}function hX(e,t,n){if(!e)return[];let i=t?Math.max(t.year,e.year-500):e.year-10,r=(n?Math.min(n.year,e.year+500):e.year+10)-i+1,o=Array(r);for(let a=0;a<r;a++)o[a]=i+a;return o}function fX(e,t,n){let i=Object.assign(e.getNext(t,"m"),{day:1});return n!=null&&i.after(n)}function pX(e,t,n){let i=Object.assign(e.getPrev(t,"m"),{day:1});return n!=null&&(i.year===n.year&&i.month<n.month||i.year<n.year&&n.month===1)}function gX(e,t,n,i,s){let{displayMonths:r,months:o}=n,a=o.splice(0,o.length);return Array.from({length:r},(c,u)=>{let h=Object.assign(e.getNext(t,"m",u),{day:1});if(o[u]=null,!s){let f=a.findIndex(p=>p.firstDate.equals(h));f!==-1&&(o[u]=a.splice(f,1)[0])}return h}).forEach((c,u)=>{o[u]===null&&(o[u]=mX(e,c,n,i,a.shift()||{}))}),o}function mX(e,t,n,i,s={}){let{dayTemplateData:r,minDate:o,maxDate:a,firstDayOfWeek:l,markDisabled:c,outsideDays:u,weekdayWidth:h,weekdaysVisible:f}=n,p=e.getToday();s.firstDate=null,s.lastDate=null,s.number=t.month,s.year=t.year,s.weeks=s.weeks||[],s.weekdays=s.weekdays||[],t=vX(e,t,l),f||(s.weekdays.length=0);for(let v=0;v<e.getWeeksPerMonth();v++){let y=s.weeks[v];y||(y=s.weeks[v]={number:0,days:[],collapsed:!0});let C=y.days;for(let E=0;E<e.getDaysPerWeek();E++){v===0&&f&&(s.weekdays[E]=i.getWeekdayLabel(e.getWeekday(t),h));let T=new zi(t.year,t.month,t.day),R=e.getNext(T),F=i.getDayAriaLabel(T),$=!!(o&&T.before(o)||a&&T.after(a));!$&&c&&($=c(T,{month:s.number,year:s.year}));let k=T.equals(p),b=r?r(T,{month:s.number,year:s.year}):void 0;s.firstDate===null&&T.month===s.number&&(s.firstDate=T),T.month===s.number&&R.month!==s.number&&(s.lastDate=T);let S=C[E];S||(S=C[E]={}),S.date=T,S.context=Object.assign(S.context||{},{$implicit:T,date:T,data:b,currentMonth:s.number,currentYear:s.year,disabled:$,focused:!1,selected:!1,today:k}),S.tabindex=-1,S.ariaLabel=F,S.hidden=!1,t=R}y.number=e.getWeekNumber(C.map(E=>E.date),l),y.collapsed=u==="collapsed"&&C[0].date.month!==s.number&&C[C.length-1].date.month!==s.number}return s}function vX(e,t,n){let i=e.getDaysPerWeek(),s=new zi(t.year,t.month,1),r=e.getWeekday(s)%i;return e.getPrev(s,"d",(i+r-n)%i)}var Al=(()=>{let t=class t{getMonthLabel(i){return`${this.getMonthFullName(i.month,i.year)} ${this.getYearNumerals(i.year)}`}getDayNumerals(i){return`${i.day}`}getWeekNumerals(i){return`${i}`}getYearNumerals(i){return`${i}`}getWeekLabel(){return""}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:()=>new CX,providedIn:"root"});let e=t;return e})(),CX=(()=>{let t=class t extends Al{constructor(){super(...arguments),this._locale=G(Uh),this._monthsShort=uv(this._locale,ln.Standalone,Je.Abbreviated),this._monthsFull=uv(this._locale,ln.Standalone,Je.Wide)}getWeekdayLabel(i,s){let r=kb(this._locale,ln.Standalone,s===void 0?Je.Short:s);return r.map((a,l)=>r[(l+1)%7])[i-1]||""}getMonthShortName(i){return this._monthsShort[i-1]||""}getMonthFullName(i){return this._monthsFull[i-1]||""}getDayAriaLabel(i){let s=new Date(i.year,i.month-1,i.day);return lN(s,"fullDate",this._locale)}};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=is(t)))(r||t)}})(),t.\u0275prov=Y({token:t,factory:t.\u0275fac});let e=t;return e})(),TE=(()=>{let t=class t{constructor(){this._VALIDATORS={dayTemplateData:i=>{if(this._state.dayTemplateData!==i)return{dayTemplateData:i}},displayMonths:i=>{if(i=uC(i),Ei(i)&&i>0&&this._state.displayMonths!==i)return{displayMonths:i}},disabled:i=>{if(this._state.disabled!==i)return{disabled:i}},firstDayOfWeek:i=>{if(i=uC(i),Ei(i)&&i>=0&&this._state.firstDayOfWeek!==i)return{firstDayOfWeek:i}},focusVisible:i=>{if(this._state.focusVisible!==i&&!this._state.disabled)return{focusVisible:i}},markDisabled:i=>{if(this._state.markDisabled!==i)return{markDisabled:i}},maxDate:i=>{let s=this.toValidDate(i,null);if(xu(this._state.maxDate,s))return{maxDate:s}},minDate:i=>{let s=this.toValidDate(i,null);if(xu(this._state.minDate,s))return{minDate:s}},navigation:i=>{if(this._state.navigation!==i)return{navigation:i}},outsideDays:i=>{if(this._state.outsideDays!==i)return{outsideDays:i}},weekdays:i=>{let s=i===!0||i===!1?Je.Short:i,r=i===!0||i===!1?i:!0;if(this._state.weekdayWidth!==s||this._state.weekdaysVisible!==r)return{weekdayWidth:s,weekdaysVisible:r}}},this._calendar=G(Rf),this._i18n=G(Al),this._model$=new Me,this._dateSelect$=new Me,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:Je.Short,weekdaysVisible:!0}}get model$(){return this._model$.pipe(Ye(i=>i.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe(Ye(i=>i!==null))}set(i){let s=Object.keys(i).map(r=>this._VALIDATORS[r](i[r])).reduce((r,o)=>B(B({},r),o),{});Object.keys(s).length>0&&this._nextState(s)}focus(i){let s=this.toValidDate(i,null);s!=null&&!this._state.disabled&&xu(this._state.focusDate,s)&&this._nextState({focusDate:i})}focusSelect(){EE(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(i){let s=this.toValidDate(i,this._calendar.getToday());s!=null&&!this._state.disabled&&(!this._state.firstDate||VL(this._state.firstDate,s))&&this._nextState({firstDate:s})}select(i,s={}){let r=this.toValidDate(i,null);r!=null&&!this._state.disabled&&(xu(this._state.selectedDate,r)&&this._nextState({selectedDate:r}),s.emitEvent&&EE(r,this._state)&&this._dateSelect$.next(r))}toValidDate(i,s){let r=zi.from(i);return s===void 0&&(s=this._calendar.getToday()),this._calendar.isValid(r)?r:s}getMonth(i){for(let s of this._state.months)if(i.month===s.number&&i.year===s.year)return s;throw new Error(`month ${i.month} of year ${i.year} not found`)}_nextState(i){let s=this._updateState(i);this._patchContexts(s),this._state=s,this._model$.next(this._state)}_patchContexts(i){let{months:s,displayMonths:r,selectedDate:o,focusDate:a,focusVisible:l,disabled:c,outsideDays:u}=i;i.months.forEach(h=>{h.weeks.forEach(f=>{f.days.forEach(p=>{a&&(p.context.focused=a.equals(p.date)&&l),p.tabindex=!c&&a&&p.date.equals(a)&&a.month===h.number?0:-1,c===!0&&(p.context.disabled=!0),o!==void 0&&(p.context.selected=o!==null&&o.equals(p.date)),h.number!==p.date.month&&(p.hidden=u==="hidden"||u==="collapsed"||r>1&&p.date.after(s[0].firstDate)&&p.date.before(s[r-1].lastDate))})})})}_updateState(i){let s=Object.assign({},this._state,i),r=s.firstDate;if(("minDate"in i||"maxDate"in i)&&(uX(s.minDate,s.maxDate),s.focusDate=lC(s.focusDate,s.minDate,s.maxDate),s.firstDate=lC(s.firstDate,s.minDate,s.maxDate),r=s.focusDate),"disabled"in i&&(s.focusVisible=!1),"selectedDate"in i&&this._state.months.length===0&&(r=s.selectedDate),"focusVisible"in i||"focusDate"in i&&(s.focusDate=lC(s.focusDate,s.minDate,s.maxDate),r=s.focusDate,s.months.length!==0&&s.focusDate&&!s.focusDate.before(s.firstDate)&&!s.focusDate.after(s.lastDate)))return s;if("firstDate"in i&&(s.firstDate=lC(s.firstDate,s.minDate,s.maxDate),r=s.firstDate),r){let o="dayTemplateData"in i||"firstDayOfWeek"in i||"markDisabled"in i||"minDate"in i||"maxDate"in i||"disabled"in i||"outsideDays"in i||"weekdaysVisible"in i,a=gX(this._calendar,r,s,this._i18n,o);s.months=a,s.firstDate=a[0].firstDate,s.lastDate=a[a.length-1].lastDate,"selectedDate"in i&&!EE(s.selectedDate,s)&&(s.selectedDate=null),"firstDate"in i&&(!s.focusDate||s.focusDate.before(s.firstDate)||s.focusDate.after(s.lastDate))&&(s.focusDate=r);let l=!this._state.firstDate||this._state.firstDate.year!==s.firstDate.year,c=!this._state.firstDate||this._state.firstDate.month!==s.firstDate.month;s.navigation==="select"?(("minDate"in i||"maxDate"in i||s.selectBoxes.years.length===0||l)&&(s.selectBoxes.years=hX(s.firstDate,s.minDate,s.maxDate)),("minDate"in i||"maxDate"in i||s.selectBoxes.months.length===0||l)&&(s.selectBoxes.months=dX(this._calendar,s.firstDate,s.minDate,s.maxDate))):s.selectBoxes={years:[],months:[]},(s.navigation==="arrows"||s.navigation==="select")&&(c||l||"minDate"in i||"maxDate"in i||"disabled"in i)&&(s.prevDisabled=s.disabled||pX(this._calendar,s.firstDate,s.minDate),s.nextDisabled=s.disabled||fX(this._calendar,s.lastDate,s.maxDate))}return s}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac});let e=t;return e})(),dC=function(e){return e[e.PREV=0]="PREV",e[e.NEXT=1]="NEXT",e}(dC||{}),yX=(()=>{let t=class t{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays=Je.Short}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function wX(){return new SX}var BL=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:()=>wX(),providedIn:"root"});let e=t;return e})(),SX=(()=>{let t=class t extends BL{fromModel(i){return i&&Ei(i.year)&&Ei(i.month)&&Ei(i.day)?{year:i.year,month:i.month,day:i.day}:null}toModel(i){return i&&Ei(i.year)&&Ei(i.month)&&Ei(i.day)?{year:i.year,month:i.month,day:i.day}:null}};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=is(t)))(r||t)}})(),t.\u0275prov=Y({token:t,factory:t.\u0275fac});let e=t;return e})(),bi=function(e){return e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.ArrowLeft=37]="ArrowLeft",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowRight=39]="ArrowRight",e[e.ArrowDown=40]="ArrowDown",e}(bi||{}),_X=(()=>{let t=class t{processKey(i,s){let{state:r,calendar:o}=s;switch(i.which){case bi.PageUp:s.focusDate(o.getPrev(r.focusedDate,i.shiftKey?"y":"m",1));break;case bi.PageDown:s.focusDate(o.getNext(r.focusedDate,i.shiftKey?"y":"m",1));break;case bi.End:s.focusDate(i.shiftKey?r.maxDate:r.lastDate);break;case bi.Home:s.focusDate(i.shiftKey?r.minDate:r.firstDate);break;case bi.ArrowLeft:s.focusDate(o.getPrev(r.focusedDate,"d",1));break;case bi.ArrowUp:s.focusDate(o.getPrev(r.focusedDate,"d",o.getDaysPerWeek()));break;case bi.ArrowRight:s.focusDate(o.getNext(r.focusedDate,"d",1));break;case bi.ArrowDown:s.focusDate(o.getNext(r.focusedDate,"d",o.getDaysPerWeek()));break;case bi.Enter:case bi.Space:s.focusSelect();break;default:return}i.preventDefault(),i.stopPropagation()}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),bX=(()=>{let t=class t{constructor(){this.i18n=G(Al)}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=_e({type:t,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(s,r){s&2&&wi("bg-primary",r.selected)("text-white",r.selected)("text-muted",r.isMuted())("outside",r.isMuted())("active",r.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},standalone:!0,features:[be],attrs:DJ,decls:1,vars:1,template:function(s,r){s&1&&ue(0),s&2&&Gi(r.i18n.getDayNumerals(r.date))},styles:[`[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-tertiary-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}
`],encapsulation:2,changeDetection:0});let e=t;return e})(),EX=(()=>{let t=class t{constructor(){this._month=-1,this._year=-1,this.i18n=G(Al),this.select=new W}changeMonth(i){this.select.emit(new zi(this.date.year,uC(i),1))}changeYear(i){this.select.emit(new zi(uC(i),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this.monthSelect.nativeElement.value=`${this._month}`),this.date.year!==this._year&&(this._year=this.date.year,this.yearSelect.nativeElement.value=`${this._year}`))}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=_e({type:t,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(s,r){if(s&1&&(rs(TJ,7,Lt),rs(RJ,7,Lt)),s&2){let o;Si(o=_i())&&(r.monthSelect=o.first),Si(o=_i())&&(r.yearSelect=o.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},standalone:!0,features:[be],decls:8,vars:2,consts:()=>{let i;i=$localize`:@@ngb.datepicker.select-month:Select month`;let s;s=$localize`:@@ngb.datepicker.select-month:Select month`;let r;r=$localize`:@@ngb.datepicker.select-year:Select year`;let o;return o=$localize`:@@ngb.datepicker.select-year:Select year`,[["month",""],["year",""],["aria-label",i,"title",s,1,"form-select",3,"change","disabled"],[3,"value"],["aria-label",r,"title",o,1,"form-select",3,"change","disabled"]]},template:function(s,r){if(s&1){let o=st();H(0,"select",2,0),pe("change",function(l){return De(o),Te(r.changeMonth(l.target.value))}),oa(2,IJ,2,3,"option",3,ra),U(),H(4,"select",4,1),pe("change",function(l){return De(o),Te(r.changeYear(l.target.value))}),oa(6,AJ,2,2,"option",3,ra),U()}s&2&&(re("disabled",r.disabled),K(2),aa(r.months),K(2),re("disabled",r.disabled),K(2),aa(r.years))},styles:[`ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}
`],encapsulation:2,changeDetection:0});let e=t;return e})(),DX=(()=>{let t=class t{constructor(){this.navigation=dC,this.i18n=G(Al),this.months=[],this.navigate=new W,this.select=new W}onClickPrev(i){i.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(i){i.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=_e({type:t,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},standalone:!0,features:[be],decls:8,vars:4,consts:()=>{let i;i=$localize`:@@ngb.datepicker.previous-month:Previous month`;let s;s=$localize`:@@ngb.datepicker.previous-month:Previous month`;let r;r=$localize`:@@ngb.datepicker.next-month:Next month`;let o;return o=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow","ngb-dp-arrow-prev"],["type","button","aria-label",i,"title",s,1,"btn","btn-link","ngb-dp-arrow-btn",3,"click","disabled"],[1,"ngb-dp-navigation-chevron"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years"],[1,"ngb-dp-arrow","ngb-dp-arrow-next"],["type","button","aria-label",r,"title",o,1,"btn","btn-link","ngb-dp-arrow-btn",3,"click","disabled"],[1,"ngb-dp-navigation-select",3,"select","date","disabled","months","years"],[1,"ngb-dp-arrow"],[1,"ngb-dp-month-name"]]},template:function(s,r){s&1&&(H(0,"div",0)(1,"button",1),pe("click",function(a){return r.onClickPrev(a)}),ne(2,"span",2),U()(),Ce(3,MJ,1,4,"ngb-datepicker-navigation-select",3)(4,OJ,2,0),H(5,"div",4)(6,"button",5),pe("click",function(a){return r.onClickNext(a)}),ne(7,"span",2),U()()),s&2&&(K(),re("disabled",r.prevDisabled),K(2),ti(3,r.showSelect?3:-1),K(),ti(4,r.showSelect?-1:4),K(2),re("disabled",r.nextDisabled))},dependencies:[EX],styles:[`ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow-next{justify-content:flex-end}.ngb-dp-arrow-next .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}
`],encapsulation:2,changeDetection:0});let e=t;return e})(),TX=(()=>{let t=class t{constructor(){this.templateRef=G(Ls)}};t.\u0275fac=function(s){return new(s||t)},t.\u0275dir=At({type:t,selectors:[["ng-template","ngbDatepickerContent",""]],standalone:!0});let e=t;return e})(),RX=(()=>{let t=class t{constructor(){this._keyboardService=G(_X),this._service=G(TE),this.i18n=G(Al),this.datepicker=G(PE)}set month(i){this.viewModel=this._service.getMonth(i)}onKeyDown(i){this._keyboardService.processKey(i,this.datepicker)}doSelect(i){!i.context.disabled&&!i.hidden&&this.datepicker.onDateSelect(i.date)}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=_e({type:t,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(s,r){s&1&&pe("keydown",function(a){return r.onKeyDown(a)})},inputs:{month:"month"},standalone:!0,features:[be],decls:3,vars:1,consts:[["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["role","row",1,"ngb-dp-week"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"disabled","tabindex","hidden","ngb-dp-today"],["role","gridcell",1,"ngb-dp-day",3,"click","tabindex"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(s,r){s&1&&(Ce(0,LJ,4,1,"div",0),oa(1,WJ,1,1,null,null,ra)),s&2&&(ti(0,r.viewModel.weekdays.length>0?0:-1),K(),aa(r.viewModel.weeks))},dependencies:[Vb],styles:[`ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-tertiary-bg)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}
`],encapsulation:2});let e=t;return e})(),PE=(()=>{let t=class t{constructor(){this.injector=G(Ge),this._service=G(TE),this._calendar=G(Rf),this._i18n=G(Al),this._config=G(yX),this._nativeElement=G(Lt).nativeElement,this._ngbDateAdapter=G(BL),this._ngZone=G(de),this._destroyRef=G(tu),this._controlValue=null,this._publicState={},this.dayTemplate=this._config.dayTemplate,this.dayTemplateData=this._config.dayTemplateData,this.displayMonths=this._config.displayMonths,this.firstDayOfWeek=this._config.firstDayOfWeek,this.footerTemplate=this._config.footerTemplate,this.markDisabled=this._config.markDisabled,this.maxDate=this._config.maxDate,this.minDate=this._config.minDate,this.navigation=this._config.navigation,this.outsideDays=this._config.outsideDays,this.showWeekNumbers=this._config.showWeekNumbers,this.startDate=this._config.startDate,this.weekdays=this._config.weekdays,this.navigate=new W,this.dateSelect=new W,this.onChange=s=>{},this.onTouched=()=>{};let i=G(Cr);this._service.dateSelect$.pipe(wf()).subscribe(s=>{this.dateSelect.emit(s)}),this._service.model$.pipe(wf()).subscribe(s=>{let r=s.firstDate,o=this.model?this.model.firstDate:null;this._publicState={maxDate:s.maxDate,minDate:s.minDate,firstDate:s.firstDate,lastDate:s.lastDate,focusedDate:s.focusDate,months:s.months.map(h=>h.firstDate)};let a=!1;if(!r.equals(o)&&(this.navigate.emit({current:o?{year:o.year,month:o.month}:null,next:{year:r.year,month:r.month},preventDefault:()=>a=!0}),a&&o!==null)){this._service.open(o);return}let l=s.selectedDate,c=s.focusDate,u=this.model?this.model.focusDate:null;this.model=s,xu(l,this._controlValue)&&(this._controlValue=l,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(l))),xu(c,u)&&u&&s.focusVisible&&this.focus(),i.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}get i18n(){return this._i18n}focusDate(i){this._service.focus(zi.from(i))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe(ut(1)).subscribe(()=>this._nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]')?.focus())}navigateTo(i){this._service.open(zi.from(i?i.day?i:ae(B({},i),{day:1}):null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{let i=Kt(this._contentEl.nativeElement,"focusin"),s=Kt(this._contentEl.nativeElement,"focusout");jo(i,s).pipe(Ye(r=>{let o=r.target,a=r.relatedTarget;return!(o?.classList.contains("ngb-dp-day")&&a?.classList.contains("ngb-dp-day")&&this._nativeElement.contains(o)&&this._nativeElement.contains(a))}),wf(this._destroyRef)).subscribe(({type:r})=>this._ngZone.run(()=>this._service.set({focusVisible:r==="focusin"})))})}ngOnInit(){if(this.model===void 0){let i={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(s=>i[s]=this[s]),this._service.set(i),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(i){let s={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(r=>r in i).forEach(r=>s[r]=this[r]),this._service.set(s),"startDate"in i){let{currentValue:r,previousValue:o}=i.startDate;VL(o,r)&&this.navigateTo(this.startDate)}}onDateSelect(i){this._service.focus(i),this._service.select(i,{emitEvent:!0})}onNavigateDateSelect(i){this._service.open(i)}onNavigateEvent(i){switch(i){case dC.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case dC.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1));break}}registerOnChange(i){this.onChange=i}registerOnTouched(i){this.onTouched=i}setDisabledState(i){this._service.set({disabled:i})}writeValue(i){this._controlValue=zi.from(this._ngbDateAdapter.fromModel(i)),this._service.select(this._controlValue)}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=_e({type:t,selectors:[["ngb-datepicker"]],contentQueries:function(s,r,o){if(s&1&&bb(o,TX,7),s&2){let a;Si(a=_i())&&(r.contentTemplateFromContent=a.first)}},viewQuery:function(s,r){if(s&1&&(rs(jJ,7),rs(zJ,7)),s&2){let o;Si(o=_i())&&(r._defaultDayTemplate=o.first),Si(o=_i())&&(r._contentEl=o.first)}},hostVars:2,hostBindings:function(s,r){s&2&&wi("disabled",r.model.disabled)},inputs:{contentTemplate:"contentTemplate",dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],standalone:!0,features:[os([{provide:wu,useExisting:pr(()=>t),multi:!0},TE]),kt,be],decls:10,vars:9,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],["content",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes"],[1,"ngb-dp-content"],[3,"ngTemplateOutlet","ngTemplateOutletContext","ngTemplateOutletInjector"],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],[1,"ngb-dp-month"],[1,"ngb-dp-month-name"],[3,"month"],[3,"navigate","select","date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes"]],template:function(s,r){if(s&1&&(Ce(0,qJ,1,5,"ng-template",null,0,ni)(2,YJ,2,0,"ng-template",null,1,ni),H(4,"div",3),Ce(5,JJ,1,7,"ngb-datepicker-navigation",4),U(),H(6,"div",5,2),Ce(8,XJ,0,0,"ng-template",6),U(),Ce(9,ZJ,0,0,"ng-template",7)),s&2){let o=la(3);K(5),ti(5,r.navigation!=="none"?5:-1),K(),wi("ngb-dp-months",!r.contentTemplate),K(2),re("ngTemplateOutlet",r.contentTemplate||(r.contentTemplateFromContent==null?null:r.contentTemplateFromContent.templateRef)||o)("ngTemplateOutletContext",ru(7,$J,r))("ngTemplateOutletInjector",r.injector),K(),re("ngTemplateOutlet",r.footerTemplate)}},dependencies:[Vb,bX,RX,DX],styles:[`ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-tertiary-bg)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-tertiary-bg)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}
`],encapsulation:2,changeDetection:0});let e=t;return e})(),cC=(e,t)=>t?t.some(n=>n.contains(e)):!1,PL=(e,t)=>!t||iX(e,t)!=null,IX=(()=>{let e=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,t=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(e()||t()):!1})(),AX=e=>IX?()=>setTimeout(()=>e(),100):e;function MX(e,t,n,i,s,r,o,a){n&&e.runOutsideAngular(AX(()=>{let l=f=>{let p=f.target;return f.button===2||cC(p,o)?!1:n==="inside"?cC(p,r)&&PL(p,a):n==="outside"?!cC(p,r):PL(p,a)||!cC(p,r)},c=Kt(t,"keydown").pipe(Tt(s),Ye(f=>f.which===bi.Escape),pt(f=>f.preventDefault())),u=Kt(t,"mousedown").pipe(oe(l),Tt(s)),h=Kt(t,"mouseup").pipe(wh(u),Ye(([f,p])=>p),Ch(0),Tt(s));Lg([c.pipe(oe(f=>0)),h.pipe(oe(f=>1))]).subscribe(f=>e.run(()=>i(f)))}))}var PX=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function GL(e){let t=Array.from(e.querySelectorAll(PX)).filter(n=>n.tabIndex!==-1);return[t[0],t[t.length-1]]}var FX=(e,t,n,i=!1)=>{e.runOutsideAngular(()=>{let s=Kt(t,"focusin").pipe(Tt(n),oe(r=>r.target));Kt(t,"keydown").pipe(Tt(n),Ye(r=>r.which===bi.Tab),wh(s)).subscribe(([r,o])=>{let[a,l]=GL(t);(o===a||o===t)&&r.shiftKey&&(l.focus(),r.preventDefault()),o===l&&!r.shiftKey&&(a.focus(),r.preventDefault())}),i&&Kt(t,"click").pipe(Tt(n),wh(s),oe(r=>r[1])).subscribe(r=>r.focus())})},xX=(()=>{let t=class t{constructor(){this._element=G(Jt).documentElement}isRTL(){return(this._element.getAttribute("dir")||"").toLowerCase()==="rtl"}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),OX=/\s+/,NX=/  +/gi,kX={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]};function LX(e,t){let[n,i]=kX[e];return t&&i||n}var VX=/^left/,BX=/^right/,GX=/^start/,HX=/^end/;function UX(e,t){let[n,i]=t.split("-"),s=n.replace(VX,"start").replace(BX,"end"),r=[s];if(i){let o=i;(n==="left"||n==="right")&&(o=o.replace(GX,"top").replace(HX,"bottom")),r.push(`${s}-${o}`)}return e&&(r=r.map(o=>`${e}-${o}`)),r.join(" ")}function FL({placement:e,baseClass:t},n){let i=Array.isArray(e)?e:e.split(OX),s=["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"],r=i.findIndex(c=>c==="auto");r>=0&&s.forEach(function(c){i.find(u=>u.search("^"+c)!==-1)==null&&i.splice(r++,1,c)});let o=i.map(c=>LX(c,n.isRTL()));return{placement:o.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!t,phase:"write",fn({state:c}){let u=new RegExp(t+"(-[a-z]+)*","gi"),h=c.elements.popper,f=c.placement,p=h.className;p=p.replace(u,""),p+=` ${UX(t,f)}`,p=p.trim().replace(NX," "),h.className=p}},fE,mE,lE,{enabled:!0,name:"flip",options:{fallbackPlacements:o}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function xL(e){return e}function WX(){let e=G(xX),t=null;return{createPopper(n){if(!t){let s=(n.updatePopperOptions||xL)(FL(n,e));t=bE(n.hostElement,n.targetElement,s)}},update(){t&&t.update()},setOptions(n){if(t){let s=(n.updatePopperOptions||xL)(FL(n,e));t.setOptions(s)}},destroy(){t&&(t.destroy(),t=null)}}}function jX(e){return t=>(t.modifiers.push(pE,{name:"offset",options:{offset:()=>e}}),t)}var dOe=new Date(1882,10,12),hOe=new Date(2174,10,25);var fOe=1e3*60*60*24;var FE=1080,zX=24*FE,$X=12*FE+793,pOe=29*zX+$X,gOe=11*FE+204;var qX=(()=>{let t=class t{constructor(){this._ngbConfig=G(kL),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(i){this._animation=i}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),co=class{constructor(t,n,i){this.nodes=t,this.viewRef=n,this.componentRef=i}},RE=class{constructor(t){this._componentType=t,this._windowRef=null,this._contentRef=null,this._document=G(Jt),this._applicationRef=G(Hi),this._injector=G(Ge),this._viewContainerRef=G(Bi),this._ngZone=G(de)}open(t,n,i=!1){this._windowRef||(this._contentRef=this._getContentRef(t,n),this._windowRef=this._viewContainerRef.createComponent(this._componentType,{injector:this._injector,projectableNodes:this._contentRef.nodes}));let{nativeElement:s}=this._windowRef.location,r=this._ngZone.onStable.pipe(ut(1),ft(()=>lo(this._ngZone,s,({classList:o})=>o.add("show"),{animation:i,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:r}}close(t=!1){return this._windowRef?lo(this._ngZone,this._windowRef.location.nativeElement,({classList:n})=>n.remove("show"),{animation:t,runningTransition:"stop"}).pipe(pt(()=>{this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),this._contentRef?.viewRef&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):X(void 0)}_getContentRef(t,n){if(t)if(t instanceof Ls){let i=t.createEmbeddedView(n);return this._applicationRef.attachView(i),new co([i.rootNodes],i)}else return new co([[this._document.createTextNode(`${t}`)]]);else return new co([])}},KX=(()=>{let t=class t{constructor(){this._document=G(Jt)}hide(){let i=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),s=this._document.body,r=s.style,{overflow:o,paddingRight:a}=r;if(i>0){let l=parseFloat(window.getComputedStyle(s).paddingRight);r.paddingRight=`${l+i}px`}return r.overflow="hidden",()=>{i>0&&(r.paddingRight=a),r.overflow=o}}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),QX=(()=>{let t=class t{constructor(){this._nativeElement=G(Lt).nativeElement,this._zone=G(de)}ngOnInit(){this._zone.onStable.asObservable().pipe(ut(1)).subscribe(()=>{lo(this._zone,this._nativeElement,(i,s)=>{s&&LL(i),i.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return lo(this._zone,this._nativeElement,({classList:i})=>i.remove("show"),{animation:this.animation,runningTransition:"stop"})}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=_e({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(s,r){s&2&&(Mn("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),wi("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[be],decls:0,vars:0,template:function(s,r){},encapsulation:2});let e=t;return e})(),hC=class{update(t){}close(t){}dismiss(t){}},YX=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],JX=["animation","backdropClass"],IE=class{_applyWindowOptions(t,n){YX.forEach(i=>{DE(n[i])&&(t[i]=n[i])})}_applyBackdropOptions(t,n){JX.forEach(i=>{DE(n[i])&&(t[i]=n[i])})}update(t){this._applyWindowOptions(this._windowCmptRef.instance,t),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,t)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Tt(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Tt(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(t,n,i,s){this._windowCmptRef=t,this._contentRef=n,this._backdropCmptRef=i,this._beforeDismiss=s,this._closed=new Me,this._dismissed=new Me,this._hidden=new Me,t.instance.dismissEvent.subscribe(r=>{this.dismiss(r)}),this.result=new Promise((r,o)=>{this._resolve=r,this._reject=o}),this.result.then(null,()=>{})}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(t);else{let n=this._beforeDismiss();nX(n)?n.then(i=>{i!==!1&&this._dismiss(t)},()=>{}):n!==!1&&this._dismiss(t)}}_removeModalElements(){let t=this._windowCmptRef.instance.hide(),n=this._backdropCmptRef?this._backdropCmptRef.instance.hide():X(void 0);t.subscribe(()=>{let{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),n.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),mh(t,n).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},AE=function(e){return e[e.BACKDROP_CLICK=0]="BACKDROP_CLICK",e[e.ESC=1]="ESC",e}(AE||{}),XX=(()=>{let t=class t{constructor(){this._document=G(Jt),this._elRef=G(Lt),this._zone=G(de),this._closed$=new Me,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new W,this.shown=new Me,this.hidden=new Me}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":ME(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(i){this.dismissEvent.emit(i)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(ut(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:i}=this._elRef,s={animation:this.animation,runningTransition:"stop"},r=lo(this._zone,i,()=>i.classList.remove("show"),s),o=lo(this._zone,this._dialogEl.nativeElement,()=>{},s),a=mh(r,o);return a.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),a}_show(){let i={animation:this.animation,runningTransition:"continue"},s=lo(this._zone,this._elRef.nativeElement,(o,a)=>{a&&LL(o),o.classList.add("show")},i),r=lo(this._zone,this._dialogEl.nativeElement,()=>{},i);mh(s,r).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:i}=this._elRef;this._zone.runOutsideAngular(()=>{Kt(i,"keydown").pipe(Tt(this._closed$),Ye(r=>r.which===bi.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(AE.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let s=!1;Kt(this._dialogEl.nativeElement,"mousedown").pipe(Tt(this._closed$),pt(()=>s=!1),ke(()=>Kt(i,"mouseup").pipe(Tt(this._closed$),ut(1))),Ye(({target:r})=>i===r)).subscribe(()=>{s=!0}),Kt(i,"click").pipe(Tt(this._closed$)).subscribe(({target:r})=>{i===r&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!s&&this._zone.run(()=>this.dismiss(AE.BACKDROP_CLICK))),s=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:i}=this._elRef;if(!i.contains(document.activeElement)){let s=i.querySelector("[ngbAutofocus]"),r=GL(i)[0];(s||r||i).focus()}}_restoreFocus(){let i=this._document.body,s=this._elWithFocus,r;s&&s.focus&&i.contains(s)?r=s:r=i,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&lo(this._zone,this._elRef.nativeElement,({classList:i})=>(i.add("modal-static"),()=>i.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=_e({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(s,r){if(s&1&&rs(eX,7),s&2){let o;Si(o=_i())&&(r._dialogEl=o.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(s,r){s&2&&(eo("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),Mn("modal d-block"+(r.windowClass?" "+r.windowClass:"")),wi("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[be],ngContentSelectors:OL,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(s,r){s&1&&(Sb(),H(0,"div",1,0)(2,"div",2),_b(3),U()()),s&2&&Mn("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2});let e=t;return e})(),ZX=(()=>{let t=class t{constructor(){this._applicationRef=G(Hi),this._injector=G(Ge),this._environmentInjector=G(ei),this._document=G(Jt),this._scrollBar=G(KX),this._activeWindowCmptHasChanged=new Me,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new W;let i=G(de);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let s=this._windowCmpts[this._windowCmpts.length-1];FX(i,s.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(s.location.nativeElement)}})}_restoreScrollBar(){let i=this._scrollBarRestoreFn;i&&(this._scrollBarRestoreFn=null,i())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(i,s,r){let o=r.container instanceof HTMLElement?r.container:DE(r.container)?this._document.querySelector(r.container):this._document.body;if(!o)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let a=new hC;i=r.injector||i;let l=i.get(ei,null)||this._environmentInjector,c=this._getContentRef(i,l,s,a,r),u=r.backdrop!==!1?this._attachBackdrop(o):void 0,h=this._attachWindowComponent(o,c.nodes),f=new IE(h,c,u,r.beforeDismiss);return this._registerModalRef(f),this._registerWindowCmpt(h),f.hidden.pipe(ut(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),a.close=p=>{f.close(p)},a.dismiss=p=>{f.dismiss(p)},a.update=p=>{f.update(p)},f.update(r),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),u&&u.instance&&u.changeDetectorRef.detectChanges(),h.changeDetectorRef.detectChanges(),f}get activeInstances(){return this._activeInstances}dismissAll(i){this._modalRefs.forEach(s=>s.dismiss(i))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(i){let s=Jm(QX,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(s.hostView),i.appendChild(s.location.nativeElement),s}_attachWindowComponent(i,s){let r=Jm(XX,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:s});return this._applicationRef.attachView(r.hostView),i.appendChild(r.location.nativeElement),r}_getContentRef(i,s,r,o,a){return r?r instanceof Ls?this._createFromTemplateRef(r,o):ME(r)?this._createFromString(r):this._createFromComponent(i,s,r,o,a):new co([])}_createFromTemplateRef(i,s){let r={$implicit:s,close(a){s.close(a)},dismiss(a){s.dismiss(a)}},o=i.createEmbeddedView(r);return this._applicationRef.attachView(o),new co([o.rootNodes],o)}_createFromString(i){let s=this._document.createTextNode(`${i}`);return new co([[s]])}_createFromComponent(i,s,r,o,a){let l=Ge.create({providers:[{provide:hC,useValue:o}],parent:i}),c=Jm(r,{environmentInjector:s,elementInjector:l}),u=c.location.nativeElement;return a.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new co([[u]],c.hostView,c)}_setAriaHidden(i){let s=i.parentElement;s&&i!==this._document.body&&(Array.from(s.children).forEach(r=>{r!==i&&r.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(s))}_revertAriaHidden(){this._ariaHiddenValues.forEach((i,s)=>{i?s.setAttribute("aria-hidden",i):s.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(i){let s=()=>{let r=this._modalRefs.indexOf(i);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(i),this._activeInstances.emit(this._modalRefs),i.result.then(s,s)}_registerWindowCmpt(i){this._windowCmpts.push(i),this._activeWindowCmptHasChanged.next(),i.onDestroy(()=>{let s=this._windowCmpts.indexOf(i);s>-1&&(this._windowCmpts.splice(s,1),this._activeWindowCmptHasChanged.next())})}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Ou=(()=>{let t=class t{constructor(){this._injector=G(Ge),this._modalStack=G(ZX),this._config=G(qX)}open(i,s={}){let r=B(ae(B({},this._config),{animation:this._config.animation}),s);return this._modalStack.open(this._injector,i,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(i){this._modalStack.dismissAll(i)}hasOpenModals(){return this._modalStack.hasOpenModals()}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var eZ={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]};function tZ(e){let t=(e||"").trim();if(t.length===0)return[];let n=t.split(/\s+/).map(s=>s.split(":")).map(s=>eZ[s[0]]||s),i=n.filter(s=>s.includes("manual"));if(i.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(i.length===1&&n.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return i.length?[]:n}function nZ(e,t,n,i,s,r=0,o=0){let a=tZ(t);if(a.length===0)return()=>{};let l=new Set,c=[],u;function h(p,v){e.addEventListener(p,v),c.push(()=>e.removeEventListener(p,v))}function f(p,v){clearTimeout(u),v>0?u=setTimeout(p,v):p()}for(let[p,v]of a)v?(h(p,()=>{l.add(p),f(()=>l.size>0&&i(),r)}),h(v,()=>{l.delete(p),f(()=>l.size===0&&s(),o)})):h(p,()=>n()?f(s,o):f(i,r));return()=>c.forEach(p=>p())}var iZ=(()=>{let t=class t{constructor(){this._ngbConfig=G(kL),this.autoClose=!0,this.placement="auto",this.popperOptions=i=>i,this.triggers="hover focus",this.disableTooltip=!1,this.openDelay=0,this.closeDelay=0}get animation(){return this._animation??this._ngbConfig.animation}set animation(i){this._animation=i}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),sZ=0,rZ=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=_e({type:t,selectors:[["ngb-tooltip-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(s,r){s&2&&(wb("id",r.id),Mn("tooltip"+(r.tooltipClass?" "+r.tooltipClass:"")),wi("fade",r.animation))},inputs:{animation:"animation",id:"id",tooltipClass:"tooltipClass"},standalone:!0,features:[be],ngContentSelectors:OL,decls:3,vars:0,consts:[["data-popper-arrow","",1,"tooltip-arrow"],[1,"tooltip-inner"]],template:function(s,r){s&1&&(Sb(),ne(0,"div",0),H(1,"div",1),_b(2),U())},styles:[`ngb-tooltip-window{pointer-events:none;position:absolute}ngb-tooltip-window .tooltip-inner{pointer-events:auto}ngb-tooltip-window.bs-tooltip-top,ngb-tooltip-window.bs-tooltip-bottom{padding-left:0;padding-right:0}ngb-tooltip-window.bs-tooltip-start,ngb-tooltip-window.bs-tooltip-end{padding-top:0;padding-bottom:0}
`],encapsulation:2,changeDetection:0});let e=t;return e})(),fC=(()=>{let t=class t{constructor(){this._config=G(iZ),this.animation=this._config.animation,this.autoClose=this._config.autoClose,this.placement=this._config.placement,this.popperOptions=this._config.popperOptions,this.triggers=this._config.triggers,this.container=this._config.container,this.disableTooltip=this._config.disableTooltip,this.tooltipClass=this._config.tooltipClass,this.openDelay=this._config.openDelay,this.closeDelay=this._config.closeDelay,this.shown=new W,this.hidden=new W,this._nativeElement=G(Lt).nativeElement,this._ngZone=G(de),this._document=G(Jt),this._changeDetector=G(Cr),this._ngbTooltipWindowId=`ngb-tooltip-${sZ++}`,this._popupService=new RE(rZ),this._windowRef=null,this._positioning=WX()}set ngbTooltip(i){this._ngbTooltip=i,!i&&this._windowRef&&this.close()}get ngbTooltip(){return this._ngbTooltip}open(i){if(!this._windowRef&&this._ngbTooltip&&!this.disableTooltip){let{windowRef:s,transition$:r}=this._popupService.open(this._ngbTooltip,i??this.tooltipContext,this.animation);this._windowRef=s,this._windowRef.setInput("animation",this.animation),this._windowRef.setInput("tooltipClass",this.tooltipClass),this._windowRef.setInput("id",this._ngbTooltipWindowId),this._getPositionTargetElement().setAttribute("aria-describedby",this._ngbTooltipWindowId),this.container==="body"&&this._document.body.appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._getPositionTargetElement(),targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:this.container==="body",baseClass:"bs-tooltip",updatePopperOptions:o=>this.popperOptions(jX([0,6])(o))}),Promise.resolve().then(()=>{this._positioning.update(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positioning.update())})}),MX(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement],[this._nativeElement]),r.subscribe(()=>this.shown.emit())}}close(i=this.animation){this._windowRef!=null&&(this._getPositionTargetElement().removeAttribute("aria-describedby"),this._popupService.close(i).subscribe(()=>{this._windowRef=null,this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return this._windowRef!=null}ngOnInit(){this._unregisterListenersFn=nZ(this._nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({tooltipClass:i}){i&&this.isOpen()&&this._windowRef.setInput("tooltipClass",i.currentValue)}ngOnDestroy(){this.close(!1),this._unregisterListenersFn?.()}_getPositionTargetElement(){return(ME(this.positionTarget)?this._document.querySelector(this.positionTarget):this.positionTarget)||this._nativeElement}};t.\u0275fac=function(s){return new(s||t)},t.\u0275dir=At({type:t,selectors:[["","ngbTooltip",""]],inputs:{animation:"animation",autoClose:"autoClose",placement:"placement",popperOptions:"popperOptions",triggers:"triggers",positionTarget:"positionTarget",container:"container",disableTooltip:"disableTooltip",tooltipClass:"tooltipClass",tooltipContext:"tooltipContext",openDelay:"openDelay",closeDelay:"closeDelay",ngbTooltip:"ngbTooltip"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbTooltip"],standalone:!0,features:[kt]});let e=t;return e})(),HL=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=Ci({type:t}),t.\u0275inj=vi({});let e=t;return e})();var mOe=new te("live announcer delay",{providedIn:"root",factory:()=>100});function oZ(e,t){if(e&1){let n=st();Gs(0),H(1,"div",2),pe("click",function(){let s=De(n).$implicit;return Te(s.action())}),ne(2,"i"),U(),Hs()}if(e&2){let n=t.$implicit;K(),Mn(n.icon==="flex-grow-spacer"?"flex-grow-spacer":"sidebar-item"),re("ngbTooltip",n.label),K(),Mn(n.icon)}}var UL=(()=>{let t=class t{constructor(i,s){this.authService=i,this.router=s,this.sidebarItems=[{label:"Dashboard",icon:"bi bi-house",action:()=>{this.router.navigateByUrl("/dashboard")}},{label:"Profile",icon:"bi bi-person",action:()=>{this.router.navigateByUrl("/profile")}},{label:"Settings",icon:"bi bi-gear",action:()=>{this.router.navigateByUrl("/settings")}},{label:"",icon:"flex-grow-spacer",action:()=>{}},{label:"Logout",icon:"bi bi-box-arrow-right",action:()=>{this.logout()}}]}logout(){this.authService.logout()}};t.\u0275fac=function(s){return new(s||t)(Q(hs),Q(cn))},t.\u0275cmp=_e({type:t,selectors:[["app-sidebar"]],inputs:{sidebarItems:"sidebarItems"},standalone:!0,features:[be],decls:2,vars:1,consts:[[1,"sidebar"],[4,"ngFor","ngForOf"],["placement","right",3,"click","ngbTooltip"]],template:function(s,r){s&1&&(H(0,"div",0),Ce(1,oZ,3,5,"ng-container",1),U()),s&2&&(K(),re("ngForOf",r.sidebarItems))},dependencies:[Mt,yr,HL,fC],styles:[".sidebar[_ngcontent-%COMP%]{width:60px;height:100vh;background-color:#1f1f1f;display:flex;flex-direction:column;align-items:center;padding:10px 0;position:fixed;left:0;top:0}.sidebar-item[_ngcontent-%COMP%]{width:100%;padding:15px 0;display:flex;justify-content:center;align-items:center;cursor:pointer;color:#ccc}.sidebar-item[_ngcontent-%COMP%]:hover{background-color:#333}.flex-grow-spacer[_ngcontent-%COMP%]{flex-grow:1}.icon[_ngcontent-%COMP%]{font-size:24px;color:#ccc}.icon[_ngcontent-%COMP%]:hover{color:#fff}"]});let e=t;return e})();var Nu=(()=>{let t=class t{constructor(){this.dateRangeSubject=new wt(null),this.dateRange$=this.dateRangeSubject.asObservable()}setDateRange(i){this.dateRangeSubject.next(i)}clearDateRange(){this.dateRangeSubject.next(null)}getDateRange(){return this.dateRange$}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function aZ(e,t){if(e&1){let n=st();H(0,"span",8),pe("mouseenter",function(){let s=De(n).$implicit,r=fe();return Te(r.hoveredDate=s)})("mouseleave",function(){De(n);let s=fe();return Te(s.hoveredDate=null)}),ue(1),U()}if(e&2){let n=t.$implicit,i=t.focused,s=fe();wi("focused",i)("range",s.isRange(n))("faded",s.isHovered(n)||s.isInside(n)),K(),Vt(" ",n.day," ")}}var WL=(()=>{let t=class t{constructor(i,s){this.calendar=i,this.dateSelectorService=s,this.hoveredDate=null,this.fromDate=null,this.toDate=null,this.startDate=this.calendar.getToday(),this.dateSelectorService.dateRange$.subscribe(r=>{r&&r.from&&r.to?(this.fromDate=this.convertDateToNgbDate(r.from),this.toDate=this.convertDateToNgbDate(r.to)):(this.fromDate=null,this.toDate=null),this.updateStartDate()})}onDateSelection(i){let s=this.fromDate?this.convertNgbDateToDate(this.fromDate):null,r=this.toDate?this.convertNgbDateToDate(this.toDate):null;!this.fromDate&&!this.toDate?(this.fromDate=i,s=this.convertNgbDateToDate(this.fromDate)):this.fromDate&&!this.toDate&&i.after(this.fromDate)?(this.toDate=i,r=this.convertNgbDateToDate(this.toDate)):(this.toDate=null,r=null,this.fromDate=i,s=this.convertNgbDateToDate(this.fromDate)),s&&r&&this.dateSelectorService.setDateRange({from:s,to:r})}selectRange(i){let s=new Date,r=null,o=null;switch(i){case"thisWeek":r=this.getStartOfWeek(s),o=new Date(r),o.setDate(r.getDate()+6);break;case"lastWeek":let a=this.getStartOfWeek(s);o=new Date(a),o.setDate(a.getDate()-1),r=new Date(o),r.setDate(o.getDate()-6);break;case"thisMonth":r=new Date(s.getFullYear(),s.getMonth(),1),o=this.getLastDayOfCurrentMonth();break;case"lastMonth":r=new Date(s.getFullYear(),s.getMonth()-1,1),o=new Date(s.getFullYear(),s.getMonth(),0);break;case"thisYear":r=new Date(s.getFullYear(),0,1),o=this.getLastDayOfCurrentYear();break;case"lastYear":r=new Date(s.getFullYear()-1,0,1),o=new Date(s.getFullYear()-1,11,31);break;case"clear":this.clearDateRange();break;default:return}r&&o&&(this.fromDate=this.convertDateToNgbDate(r),this.toDate=this.convertDateToNgbDate(o),this.dateSelectorService.setDateRange({from:r,to:o}),this.updateStartDate())}getStartOfWeek(i){let s=i.getDay(),r=i.getDate()-s+(s===0?-6:1);return new Date(i.setDate(r))}clearDateRange(){this.dateSelectorService.clearDateRange()}getLastDayOfCurrentMonth(){let i=new Date;return new Date(i.getFullYear(),i.getMonth()+1,0)}getLastDayOfCurrentYear(){let i=new Date;return new Date(i.getFullYear(),11,31)}convertNgbDateToDate(i){return new Date(i.year,i.month-1,i.day)}convertDateToNgbDate(i){return new zi(i.getFullYear(),i.getMonth()+1,i.getDate())}isHovered(i){return this.fromDate&&!this.toDate&&this.hoveredDate&&i.after(this.fromDate)&&i.before(this.hoveredDate)}isInside(i){return this.toDate&&i.after(this.fromDate)&&i.before(this.toDate)}isRange(i){return i.equals(this.fromDate)||this.toDate&&i.equals(this.toDate)||this.isInside(i)||this.isHovered(i)}updateStartDate(){this.fromDate?this.startDate=this.fromDate:this.startDate=this.calendar.getToday()}};t.\u0275fac=function(s){return new(s||t)(Q(Rf),Q(Nu))},t.\u0275cmp=_e({type:t,selectors:[["app-date-selector"]],standalone:!0,features:[be],decls:21,vars:3,consts:[["dp",""],["t",""],[1,"row",2,"width","260px"],["outsideDays","hidden",3,"dateSelect","startDate","displayMonths","dayTemplate"],[1,"date-selector"],[1,"row","d-flex","justify-content-center","align-items-center"],[1,"btn","btn-sm","col-5","m-1",3,"click"],[1,"btn","btn-sm","col-5","m-1","bg-danger",3,"click"],[1,"custom-day",3,"mouseenter","mouseleave"]],template:function(s,r){if(s&1){let o=st();H(0,"div",2)(1,"ngb-datepicker",3,0),pe("dateSelect",function(l){return De(o),Te(r.onDateSelection(l))}),U(),Ce(3,aZ,2,7,"ng-template",4,1,ni),ne(5,"hr"),H(6,"div",5)(7,"button",6),pe("click",function(){return De(o),Te(r.selectRange("thisWeek"))}),ue(8," This Week "),U(),H(9,"button",6),pe("click",function(){return De(o),Te(r.selectRange("lastWeek"))}),ue(10," Last Week "),U(),H(11,"button",6),pe("click",function(){return De(o),Te(r.selectRange("thisMonth"))}),ue(12," This Month "),U(),H(13,"button",6),pe("click",function(){return De(o),Te(r.selectRange("lastMonth"))}),ue(14," Last Month "),U(),H(15,"button",6),pe("click",function(){return De(o),Te(r.selectRange("thisYear"))}),ue(16," This Year "),U(),H(17,"button",6),pe("click",function(){return De(o),Te(r.selectRange("lastYear"))}),ue(18," Last Year "),U(),H(19,"button",7),pe("click",function(){return De(o),Te(r.selectRange("clear"))}),ue(20," Clear "),U()()()}if(s&2){let o=la(4);K(),re("startDate",r.startDate)("displayMonths",1)("dayTemplate",o)}},dependencies:[PE],styles:[".custom-day[_ngcontent-%COMP%]{text-align:center;padding:.185rem .25rem;display:inline-block;height:2rem;width:2rem}.custom-day.focused[_ngcontent-%COMP%]{background-color:#e6e6e6}.custom-day.range[_ngcontent-%COMP%], .custom-day[_ngcontent-%COMP%]:hover{background-color:#0275d8;color:#fff}.custom-day.faded[_ngcontent-%COMP%]{background-color:#0275d880}"]});let e=t;return e})();function lZ(e,t){if(e&1){let n=st();Gs(0),H(1,"div",3),pe("click",function(){let s=De(n).$implicit;return Te(s.action())}),ne(2,"i"),U(),Hs()}if(e&2){let n=t.$implicit;K(),Mn(n.icon==="flex-grow-spacer"?"flex-grow-spacer":"topbar-item"),re("ngbTooltip",n.label),K(),Mn(n.icon)}}function cZ(e,t){if(e&1){let n=st();H(0,"div",4),pe("click",function(){De(n);let s=fe();return Te(s.preventCloseOnClick())}),ne(1,"app-date-selector"),U()}}var jL=(()=>{let t=class t{constructor(i,s,r){this.router=i,this.dateSelectorService=s,this.renderer=r,this.showSidebar=!1,this.topbarItems=[{label:"",icon:"bi bi-three-dots-vertical",action:()=>{this.showSidebar=!this.showSidebar,this.toggleSidebar.emit(this.showSidebar)}},{label:"",icon:"flex-grow-spacer",action:()=>{}},{label:"",icon:"bi bi-calendar-fill",action:()=>{this.toggleDateSelector(),this.preventCloseOnClick()}}],this.toggleSidebar=new W,this.showDateSelector=!1,this.dateSelectorClicked=!1,this.dateSelectorService.dateRange$.subscribe(()=>{this.showDateSelector=!1}),this.renderer.listen("window","click",o=>{this.dateSelectorClicked||(this.showDateSelector=!1),this.dateSelectorClicked=!1})}toggleDateSelector(){this.showDateSelector=!this.showDateSelector}preventCloseOnClick(){this.dateSelectorClicked=!0}};t.\u0275fac=function(s){return new(s||t)(Q(cn),Q(Nu),Q(Vs))},t.\u0275cmp=_e({type:t,selectors:[["app-topbar"]],inputs:{showSidebar:"showSidebar",topbarItems:"topbarItems"},outputs:{toggleSidebar:"toggleSidebar"},standalone:!0,features:[be],decls:3,vars:2,consts:[[1,"topbar"],[4,"ngFor","ngForOf"],["class","date-selector-container d-flex justify-content-center align-items-center position-absolute",3,"click",4,"ngIf"],["placement","bottom",3,"click","ngbTooltip"],[1,"date-selector-container","d-flex","justify-content-center","align-items-center","position-absolute",3,"click"]],template:function(s,r){s&1&&(H(0,"div",0),Ce(1,lZ,3,5,"ng-container",1),U(),Ce(2,cZ,2,0,"div",2)),s&2&&(K(),re("ngForOf",r.topbarItems),K(),re("ngIf",r.showDateSelector))},dependencies:[Mt,yr,Vn,fC,WL],styles:[".topbar[_ngcontent-%COMP%]{height:60px;width:100vw;background-color:#1f1f1f;display:flex;justify-content:flex-start;align-items:center;padding:0 20px;position:fixed;top:0;z-index:1000}.topbar-item[_ngcontent-%COMP%]{padding:15px;display:flex;justify-content:center;align-items:center;cursor:pointer;color:#ccc;z-index:1001}.topbar-item[_ngcontent-%COMP%]:hover{background-color:#333}.flex-grow-spacer[_ngcontent-%COMP%]{flex-grow:1}.date-selector-container[_ngcontent-%COMP%]{top:60px;z-index:1000;background-color:#fff;border:1px solid #ccc;padding:10px;right:0}"]});let e=t;return e})();var uZ=e=>({"dim-content":e});function dZ(e,t){if(e&1){let n=st();H(0,"aside",6),pe("click",function(){De(n);let s=fe();return Te(s.preventCloseOnClick())}),ne(1,"app-sidebar"),U()}}var zL=(()=>{let t=class t{constructor(i){this.renderer=i,this.showSidebar=!1,this.mobileSidebarTogglerClicked=!1,this.renderer.listen("window","click",s=>{this.mobileSidebarTogglerClicked||(this.showSidebar=!1),this.mobileSidebarTogglerClicked=!1})}toggleSidebar(i){this.showSidebar=i}preventCloseOnClick(){this.mobileSidebarTogglerClicked=!0}};t.\u0275fac=function(s){return new(s||t)(Q(Vs))},t.\u0275cmp=_e({type:t,selectors:[["app-dashboard"]],standalone:!0,features:[be],decls:8,vars:5,consts:[[1,"app-container"],[1,"d-none","d-md-block"],["class","d-md-none sidebar-transition","style","z-index: 1002",3,"click",4,"ngIf"],[1,"d-md-none"],[3,"toggleSidebar","showSidebar"],[1,"main-content","ms-md-5","ps-md-4","ps-xl-5",3,"ngClass"],[1,"d-md-none","sidebar-transition",2,"z-index","1002",3,"click"]],template:function(s,r){s&1&&(H(0,"div",0)(1,"aside",1),ne(2,"app-sidebar"),U(),Ce(3,dZ,2,0,"aside",2),H(4,"header",3)(5,"app-topbar",4),pe("toggleSidebar",function(a){return r.toggleSidebar(a),r.preventCloseOnClick()}),U()(),H(6,"main",5),ne(7,"router-outlet"),U()()),s&2&&(K(3),re("ngIf",r.showSidebar),K(2),re("showSidebar",r.showSidebar),K(),re("ngClass",ru(3,uZ,r.showSidebar)))},dependencies:[df,UL,jL,Mt,hv,Vn],styles:[".app-container[_ngcontent-%COMP%]{display:flex;height:100vh}.main-content[_ngcontent-%COMP%]{flex-grow:1;padding:20px;overflow-y:auto}@media (max-width: 768px){.main-content[_ngcontent-%COMP%]{padding-top:80px}.dim-content[_ngcontent-%COMP%]{opacity:.3}}"]});let e=t;return e})();var OE=class{constructor(){this.subject=new Ur(1),this.subscriptions=new It}doFilter(t){this.subject.next(t)}dispose(){this.subscriptions.unsubscribe()}notEmpty(t,n){this.subscriptions.add(this.subject.subscribe(i=>{if(i[t]){let s=i[t].currentValue;s!=null&&n(s)}}))}has(t,n){this.subscriptions.add(this.subject.subscribe(i=>{if(i[t]){let s=i[t].currentValue;n(s)}}))}notFirst(t,n){this.subscriptions.add(this.subject.subscribe(i=>{if(i[t]&&!i[t].isFirstChange()){let s=i[t].currentValue;n(s)}}))}notFirstAndEmpty(t,n){this.subscriptions.add(this.subject.subscribe(i=>{if(i[t]&&!i[t].isFirstChange()){let s=i[t].currentValue;s!=null&&n(s)}}))}},$L=new te("NGX_ECHARTS_CONFIG"),qL=(()=>{let t=class t{constructor(i,s,r){this.el=s,this.ngZone=r,this.options=null,this.theme=null,this.initOpts=null,this.merge=null,this.autoResize=!0,this.loading=!1,this.loadingType="default",this.loadingOpts=null,this.chartInit=new W,this.optionsError=new W,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartHighlight=this.createLazyEvent("highlight"),this.chartDownplay=this.createLazyEvent("downplay"),this.chartSelectChanged=this.createLazyEvent("selectchanged"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendLegendSelectAll=this.createLazyEvent("legendselectall"),this.chartLegendLegendInverseSelect=this.createLazyEvent("legendinverseselect"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartGraphRoam=this.createLazyEvent("graphroam"),this.chartGeoRoam=this.createLazyEvent("georoam"),this.chartTreeRoam=this.createLazyEvent("treeroam"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartGeoSelectChanged=this.createLazyEvent("geoselectchanged"),this.chartGeoSelected=this.createLazyEvent("geoselected"),this.chartGeoUnselected=this.createLazyEvent("geounselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartGlobalCursorTaken=this.createLazyEvent("globalcursortaken"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.chart$=new Ur(1),this.resize$=new Me,this.changeFilter=new OE,this.resizeObFired=!1,this.echarts=i.echarts,this.theme=i.theme||null}ngOnChanges(i){this.changeFilter.doFilter(i)}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe(uS(100,es,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(i=>{for(let s of i)s.target===this.el.nativeElement&&(this.resizeObFired?this.animationFrameID=window.requestAnimationFrame(()=>{this.resize$.next()}):this.resizeObFired=!0)})),this.resizeOb.observe(this.el.nativeElement)),this.changeFilter.notFirstAndEmpty("options",i=>this.onOptionsChange(i)),this.changeFilter.notFirstAndEmpty("merge",i=>this.setOption(i)),this.changeFilter.has("loading",i=>this.toggleLoading(!!i)),this.changeFilter.notFirst("theme",()=>this.refreshChart())}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.loadingSub&&this.loadingSub.unsubscribe(),this.changeFilter.dispose(),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(i){this.chart?i?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading():this.loadingSub=this.chart$.subscribe(s=>i?s.showLoading(this.loadingType,this.loadingOpts):s.hideLoading())}setOption(i,s){if(this.chart)try{this.chart.setOption(i,s)}catch(r){console.error(r),this.optionsError.emit(r)}}refreshChart(){return x(this,null,function*(){this.dispose(),yield this.initChart()})}createChart(){let i=this.el.nativeElement;if(window&&window.getComputedStyle){let s=window.getComputedStyle(i,null).getPropertyValue("height");(!s||s==="0px")&&(!i.style.height||i.style.height==="0px")&&(i.style.height="400px")}return this.ngZone.runOutsideAngular(()=>(typeof this.echarts=="function"?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:r})=>r(i,this.theme,this.initOpts)))}initChart(){return x(this,null,function*(){yield this.onOptionsChange(this.options),this.merge&&this.chart&&this.setOption(this.merge)})}onOptionsChange(i){return x(this,null,function*(){i&&(this.chart?this.setOption(this.options,!0):(this.chart=yield this.createChart(),this.chart$.next(this.chart),this.chartInit.emit(this.chart),this.setOption(this.options,!0)))})}createLazyEvent(i){return this.chartInit.pipe(ke(s=>new le(r=>(s.on(i,o=>this.ngZone.run(()=>r.next(o))),()=>{this.chart&&(this.chart.isDisposed()||s.off(i))}))))}};t.\u0275fac=function(s){return new(s||t)(Q($L),Q(Lt),Q(de))},t.\u0275dir=At({type:t,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loading:"loading",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartHighlight:"chartHighlight",chartDownplay:"chartDownplay",chartSelectChanged:"chartSelectChanged",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendLegendSelectAll:"chartLegendLegendSelectAll",chartLegendLegendInverseSelect:"chartLegendLegendInverseSelect",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartGraphRoam:"chartGraphRoam",chartGeoRoam:"chartGeoRoam",chartTreeRoam:"chartTreeRoam",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartGeoSelectChanged:"chartGeoSelectChanged",chartGeoSelected:"chartGeoSelected",chartGeoUnselected:"chartGeoUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartGlobalCursorTaken:"chartGlobalCursorTaken",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],standalone:!0,features:[kt]});let e=t;return e})(),KL=(e={})=>({provide:$L,useFactory:()=>ae(B({},e),{echarts:()=>import("./chunk-CC4FQ6XH.js")})});var QL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},YL={};var wa,NE;(function(){var e;function t(b,S){function _(){}_.prototype=S.prototype,b.D=S.prototype,b.prototype=new _,b.prototype.constructor=b,b.C=function(I,A,M){for(var D=Array(arguments.length-2),Dn=2;Dn<arguments.length;Dn++)D[Dn-2]=arguments[Dn];return S.prototype[A].apply(I,D)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,S,_){_||(_=0);var I=Array(16);if(typeof S=="string")for(var A=0;16>A;++A)I[A]=S.charCodeAt(_++)|S.charCodeAt(_++)<<8|S.charCodeAt(_++)<<16|S.charCodeAt(_++)<<24;else for(A=0;16>A;++A)I[A]=S[_++]|S[_++]<<8|S[_++]<<16|S[_++]<<24;S=b.g[0],_=b.g[1],A=b.g[2];var M=b.g[3],D=S+(M^_&(A^M))+I[0]+3614090360&4294967295;S=_+(D<<7&4294967295|D>>>25),D=M+(A^S&(_^A))+I[1]+3905402710&4294967295,M=S+(D<<12&4294967295|D>>>20),D=A+(_^M&(S^_))+I[2]+606105819&4294967295,A=M+(D<<17&4294967295|D>>>15),D=_+(S^A&(M^S))+I[3]+3250441966&4294967295,_=A+(D<<22&4294967295|D>>>10),D=S+(M^_&(A^M))+I[4]+4118548399&4294967295,S=_+(D<<7&4294967295|D>>>25),D=M+(A^S&(_^A))+I[5]+1200080426&4294967295,M=S+(D<<12&4294967295|D>>>20),D=A+(_^M&(S^_))+I[6]+2821735955&4294967295,A=M+(D<<17&4294967295|D>>>15),D=_+(S^A&(M^S))+I[7]+4249261313&4294967295,_=A+(D<<22&4294967295|D>>>10),D=S+(M^_&(A^M))+I[8]+1770035416&4294967295,S=_+(D<<7&4294967295|D>>>25),D=M+(A^S&(_^A))+I[9]+2336552879&4294967295,M=S+(D<<12&4294967295|D>>>20),D=A+(_^M&(S^_))+I[10]+4294925233&4294967295,A=M+(D<<17&4294967295|D>>>15),D=_+(S^A&(M^S))+I[11]+2304563134&4294967295,_=A+(D<<22&4294967295|D>>>10),D=S+(M^_&(A^M))+I[12]+1804603682&4294967295,S=_+(D<<7&4294967295|D>>>25),D=M+(A^S&(_^A))+I[13]+4254626195&4294967295,M=S+(D<<12&4294967295|D>>>20),D=A+(_^M&(S^_))+I[14]+2792965006&4294967295,A=M+(D<<17&4294967295|D>>>15),D=_+(S^A&(M^S))+I[15]+1236535329&4294967295,_=A+(D<<22&4294967295|D>>>10),D=S+(A^M&(_^A))+I[1]+4129170786&4294967295,S=_+(D<<5&4294967295|D>>>27),D=M+(_^A&(S^_))+I[6]+3225465664&4294967295,M=S+(D<<9&4294967295|D>>>23),D=A+(S^_&(M^S))+I[11]+643717713&4294967295,A=M+(D<<14&4294967295|D>>>18),D=_+(M^S&(A^M))+I[0]+3921069994&4294967295,_=A+(D<<20&4294967295|D>>>12),D=S+(A^M&(_^A))+I[5]+3593408605&4294967295,S=_+(D<<5&4294967295|D>>>27),D=M+(_^A&(S^_))+I[10]+38016083&4294967295,M=S+(D<<9&4294967295|D>>>23),D=A+(S^_&(M^S))+I[15]+3634488961&4294967295,A=M+(D<<14&4294967295|D>>>18),D=_+(M^S&(A^M))+I[4]+3889429448&4294967295,_=A+(D<<20&4294967295|D>>>12),D=S+(A^M&(_^A))+I[9]+568446438&4294967295,S=_+(D<<5&4294967295|D>>>27),D=M+(_^A&(S^_))+I[14]+3275163606&4294967295,M=S+(D<<9&4294967295|D>>>23),D=A+(S^_&(M^S))+I[3]+4107603335&4294967295,A=M+(D<<14&4294967295|D>>>18),D=_+(M^S&(A^M))+I[8]+1163531501&4294967295,_=A+(D<<20&4294967295|D>>>12),D=S+(A^M&(_^A))+I[13]+2850285829&4294967295,S=_+(D<<5&4294967295|D>>>27),D=M+(_^A&(S^_))+I[2]+4243563512&4294967295,M=S+(D<<9&4294967295|D>>>23),D=A+(S^_&(M^S))+I[7]+1735328473&4294967295,A=M+(D<<14&4294967295|D>>>18),D=_+(M^S&(A^M))+I[12]+2368359562&4294967295,_=A+(D<<20&4294967295|D>>>12),D=S+(_^A^M)+I[5]+4294588738&4294967295,S=_+(D<<4&4294967295|D>>>28),D=M+(S^_^A)+I[8]+2272392833&4294967295,M=S+(D<<11&4294967295|D>>>21),D=A+(M^S^_)+I[11]+1839030562&4294967295,A=M+(D<<16&4294967295|D>>>16),D=_+(A^M^S)+I[14]+4259657740&4294967295,_=A+(D<<23&4294967295|D>>>9),D=S+(_^A^M)+I[1]+2763975236&4294967295,S=_+(D<<4&4294967295|D>>>28),D=M+(S^_^A)+I[4]+1272893353&4294967295,M=S+(D<<11&4294967295|D>>>21),D=A+(M^S^_)+I[7]+4139469664&4294967295,A=M+(D<<16&4294967295|D>>>16),D=_+(A^M^S)+I[10]+3200236656&4294967295,_=A+(D<<23&4294967295|D>>>9),D=S+(_^A^M)+I[13]+681279174&4294967295,S=_+(D<<4&4294967295|D>>>28),D=M+(S^_^A)+I[0]+3936430074&4294967295,M=S+(D<<11&4294967295|D>>>21),D=A+(M^S^_)+I[3]+3572445317&4294967295,A=M+(D<<16&4294967295|D>>>16),D=_+(A^M^S)+I[6]+76029189&4294967295,_=A+(D<<23&4294967295|D>>>9),D=S+(_^A^M)+I[9]+3654602809&4294967295,S=_+(D<<4&4294967295|D>>>28),D=M+(S^_^A)+I[12]+3873151461&4294967295,M=S+(D<<11&4294967295|D>>>21),D=A+(M^S^_)+I[15]+530742520&4294967295,A=M+(D<<16&4294967295|D>>>16),D=_+(A^M^S)+I[2]+3299628645&4294967295,_=A+(D<<23&4294967295|D>>>9),D=S+(A^(_|~M))+I[0]+4096336452&4294967295,S=_+(D<<6&4294967295|D>>>26),D=M+(_^(S|~A))+I[7]+1126891415&4294967295,M=S+(D<<10&4294967295|D>>>22),D=A+(S^(M|~_))+I[14]+2878612391&4294967295,A=M+(D<<15&4294967295|D>>>17),D=_+(M^(A|~S))+I[5]+4237533241&4294967295,_=A+(D<<21&4294967295|D>>>11),D=S+(A^(_|~M))+I[12]+1700485571&4294967295,S=_+(D<<6&4294967295|D>>>26),D=M+(_^(S|~A))+I[3]+2399980690&4294967295,M=S+(D<<10&4294967295|D>>>22),D=A+(S^(M|~_))+I[10]+4293915773&4294967295,A=M+(D<<15&4294967295|D>>>17),D=_+(M^(A|~S))+I[1]+2240044497&4294967295,_=A+(D<<21&4294967295|D>>>11),D=S+(A^(_|~M))+I[8]+1873313359&4294967295,S=_+(D<<6&4294967295|D>>>26),D=M+(_^(S|~A))+I[15]+4264355552&4294967295,M=S+(D<<10&4294967295|D>>>22),D=A+(S^(M|~_))+I[6]+2734768916&4294967295,A=M+(D<<15&4294967295|D>>>17),D=_+(M^(A|~S))+I[13]+1309151649&4294967295,_=A+(D<<21&4294967295|D>>>11),D=S+(A^(_|~M))+I[4]+4149444226&4294967295,S=_+(D<<6&4294967295|D>>>26),D=M+(_^(S|~A))+I[11]+3174756917&4294967295,M=S+(D<<10&4294967295|D>>>22),D=A+(S^(M|~_))+I[2]+718787259&4294967295,A=M+(D<<15&4294967295|D>>>17),D=_+(M^(A|~S))+I[9]+3951481745&4294967295,b.g[0]=b.g[0]+S&4294967295,b.g[1]=b.g[1]+(A+(D<<21&4294967295|D>>>11))&4294967295,b.g[2]=b.g[2]+A&4294967295,b.g[3]=b.g[3]+M&4294967295}i.prototype.u=function(b,S){S===void 0&&(S=b.length);for(var _=S-this.blockSize,I=this.B,A=this.h,M=0;M<S;){if(A==0)for(;M<=_;)s(this,b,M),M+=this.blockSize;if(typeof b=="string"){for(;M<S;)if(I[A++]=b.charCodeAt(M++),A==this.blockSize){s(this,I),A=0;break}}else for(;M<S;)if(I[A++]=b[M++],A==this.blockSize){s(this,I),A=0;break}}this.h=A,this.o+=S},i.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var S=1;S<b.length-8;++S)b[S]=0;var _=8*this.o;for(S=b.length-8;S<b.length;++S)b[S]=_&255,_/=256;for(this.u(b),b=Array(16),S=_=0;4>S;++S)for(var I=0;32>I;I+=8)b[_++]=this.g[S]>>>I&255;return b};function r(b,S){var _=a;return Object.prototype.hasOwnProperty.call(_,b)?_[b]:_[b]=S(b)}function o(b,S){this.h=S;for(var _=[],I=!0,A=b.length-1;0<=A;A--){var M=b[A]|0;I&&M==S||(_[A]=M,I=!1)}this.g=_}var a={};function l(b){return-128<=b&&128>b?r(b,function(S){return new o([S|0],0>S?-1:0)}):new o([b|0],0>b?-1:0)}function c(b){if(isNaN(b)||!isFinite(b))return h;if(0>b)return C(c(-b));for(var S=[],_=1,I=0;b>=_;I++)S[I]=b/_|0,_*=4294967296;return new o(S,0)}function u(b,S){if(b.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(b.charAt(0)=="-")return C(u(b.substring(1),S));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=c(Math.pow(S,8)),I=h,A=0;A<b.length;A+=8){var M=Math.min(8,b.length-A),D=parseInt(b.substring(A,A+M),S);8>M?(M=c(Math.pow(S,M)),I=I.j(M).add(c(D))):(I=I.j(_),I=I.add(c(D)))}return I}var h=l(0),f=l(1),p=l(16777216);e=o.prototype,e.m=function(){if(y(this))return-C(this).m();for(var b=0,S=1,_=0;_<this.g.length;_++){var I=this.i(_);b+=(0<=I?I:4294967296+I)*S,S*=4294967296}return b},e.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(v(this))return"0";if(y(this))return"-"+C(this).toString(b);for(var S=c(Math.pow(b,6)),_=this,I="";;){var A=F(_,S).g;_=E(_,A.j(S));var M=((0<_.g.length?_.g[0]:_.h)>>>0).toString(b);if(_=A,v(_))return M+I;for(;6>M.length;)M="0"+M;I=M+I}},e.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function v(b){if(b.h!=0)return!1;for(var S=0;S<b.g.length;S++)if(b.g[S]!=0)return!1;return!0}function y(b){return b.h==-1}e.l=function(b){return b=E(this,b),y(b)?-1:v(b)?0:1};function C(b){for(var S=b.g.length,_=[],I=0;I<S;I++)_[I]=~b.g[I];return new o(_,~b.h).add(f)}e.abs=function(){return y(this)?C(this):this},e.add=function(b){for(var S=Math.max(this.g.length,b.g.length),_=[],I=0,A=0;A<=S;A++){var M=I+(this.i(A)&65535)+(b.i(A)&65535),D=(M>>>16)+(this.i(A)>>>16)+(b.i(A)>>>16);I=D>>>16,M&=65535,D&=65535,_[A]=D<<16|M}return new o(_,_[_.length-1]&-2147483648?-1:0)};function E(b,S){return b.add(C(S))}e.j=function(b){if(v(this)||v(b))return h;if(y(this))return y(b)?C(this).j(C(b)):C(C(this).j(b));if(y(b))return C(this.j(C(b)));if(0>this.l(p)&&0>b.l(p))return c(this.m()*b.m());for(var S=this.g.length+b.g.length,_=[],I=0;I<2*S;I++)_[I]=0;for(I=0;I<this.g.length;I++)for(var A=0;A<b.g.length;A++){var M=this.i(I)>>>16,D=this.i(I)&65535,Dn=b.i(A)>>>16,Mi=b.i(A)&65535;_[2*I+2*A]+=D*Mi,T(_,2*I+2*A),_[2*I+2*A+1]+=M*Mi,T(_,2*I+2*A+1),_[2*I+2*A+1]+=D*Dn,T(_,2*I+2*A+1),_[2*I+2*A+2]+=M*Dn,T(_,2*I+2*A+2)}for(I=0;I<S;I++)_[I]=_[2*I+1]<<16|_[2*I];for(I=S;I<2*S;I++)_[I]=0;return new o(_,0)};function T(b,S){for(;(b[S]&65535)!=b[S];)b[S+1]+=b[S]>>>16,b[S]&=65535,S++}function R(b,S){this.g=b,this.h=S}function F(b,S){if(v(S))throw Error("division by zero");if(v(b))return new R(h,h);if(y(b))return S=F(C(b),S),new R(C(S.g),C(S.h));if(y(S))return S=F(b,C(S)),new R(C(S.g),S.h);if(30<b.g.length){if(y(b)||y(S))throw Error("slowDivide_ only works with positive integers.");for(var _=f,I=S;0>=I.l(b);)_=$(_),I=$(I);var A=k(_,1),M=k(I,1);for(I=k(I,2),_=k(_,2);!v(I);){var D=M.add(I);0>=D.l(b)&&(A=A.add(_),M=D),I=k(I,1),_=k(_,1)}return S=E(b,A.j(S)),new R(A,S)}for(A=h;0<=b.l(S);){for(_=Math.max(1,Math.floor(b.m()/S.m())),I=Math.ceil(Math.log(_)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),M=c(_),D=M.j(S);y(D)||0<D.l(b);)_-=I,M=c(_),D=M.j(S);v(M)&&(M=f),A=A.add(M),b=E(b,D)}return new R(A,b)}e.A=function(b){return F(this,b).h},e.and=function(b){for(var S=Math.max(this.g.length,b.g.length),_=[],I=0;I<S;I++)_[I]=this.i(I)&b.i(I);return new o(_,this.h&b.h)},e.or=function(b){for(var S=Math.max(this.g.length,b.g.length),_=[],I=0;I<S;I++)_[I]=this.i(I)|b.i(I);return new o(_,this.h|b.h)},e.xor=function(b){for(var S=Math.max(this.g.length,b.g.length),_=[],I=0;I<S;I++)_[I]=this.i(I)^b.i(I);return new o(_,this.h^b.h)};function $(b){for(var S=b.g.length+1,_=[],I=0;I<S;I++)_[I]=b.i(I)<<1|b.i(I-1)>>>31;return new o(_,b.h)}function k(b,S){var _=S>>5;S%=32;for(var I=b.g.length-_,A=[],M=0;M<I;M++)A[M]=0<S?b.i(M+_)>>>S|b.i(M+_+1)<<32-S:b.i(M+_);return new o(A,b.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,NE=YL.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,wa=YL.Integer=o}).apply(typeof QL<"u"?QL:typeof self<"u"?self:typeof window<"u"?window:{});var pC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},uo={};var kE,LE,ku,VE,Af,gC,BE,GE,HE;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,m){return d==Array.prototype||d==Object.prototype||(d[g]=m.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof pC=="object"&&pC];for(var g=0;g<d.length;++g){var m=d[g];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var i=n(this);function s(d,g){if(g)e:{var m=i;d=d.split(".");for(var w=0;w<d.length-1;w++){var P=d[w];if(!(P in m))break e;m=m[P]}d=d[d.length-1],w=m[d],g=g(w),g!=w&&g!=null&&t(m,d,{configurable:!0,writable:!0,value:g})}}function r(d,g){d instanceof String&&(d+="");var m=0,w=!1,P={next:function(){if(!w&&m<d.length){var V=m++;return{value:g(V,d[V]),done:!1}}return w=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}s("Array.prototype.values",function(d){return d||function(){return r(this,function(g,m){return m})}});var o=o||{},a=this||self;function l(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function c(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function u(d,g,m){return d.call.apply(d.bind,arguments)}function h(d,g,m){if(!d)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,w),d.apply(g,P)}}return function(){return d.apply(g,arguments)}}function f(d,g,m){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,f.apply(null,arguments)}function p(d,g){var m=Array.prototype.slice.call(arguments,1);return function(){var w=m.slice();return w.push.apply(w,arguments),d.apply(this,w)}}function v(d,g){function m(){}m.prototype=g.prototype,d.aa=g.prototype,d.prototype=new m,d.prototype.constructor=d,d.Qb=function(w,P,V){for(var ee=Array(arguments.length-2),ht=2;ht<arguments.length;ht++)ee[ht-2]=arguments[ht];return g.prototype[P].apply(w,ee)}}function y(d){let g=d.length;if(0<g){let m=Array(g);for(let w=0;w<g;w++)m[w]=d[w];return m}return[]}function C(d,g){for(let m=1;m<arguments.length;m++){let w=arguments[m];if(l(w)){let P=d.length||0,V=w.length||0;d.length=P+V;for(let ee=0;ee<V;ee++)d[P+ee]=w[ee]}else d.push(w)}}class E{constructor(g,m){this.i=g,this.j=m,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function T(d){return/^[\s\xa0]*$/.test(d)}function R(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function F(d){return F[" "](d),d}F[" "]=function(){};var $=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function k(d,g,m){for(let w in d)g.call(m,d[w],w,d)}function b(d,g){for(let m in d)g.call(void 0,d[m],m,d)}function S(d){let g={};for(let m in d)g[m]=d[m];return g}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(d,g){let m,w;for(let P=1;P<arguments.length;P++){w=arguments[P];for(m in w)d[m]=w[m];for(let V=0;V<_.length;V++)m=_[V],Object.prototype.hasOwnProperty.call(w,m)&&(d[m]=w[m])}}function A(d){var g=1;d=d.split(":");let m=[];for(;0<g&&d.length;)m.push(d.shift()),g--;return d.length&&m.push(d.join(":")),m}function M(d){a.setTimeout(()=>{throw d},0)}function D(){var d=Ts;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class Dn{constructor(){this.h=this.g=null}add(g,m){let w=Mi.get();w.set(g,m),this.h?this.h.next=w:this.g=w,this.h=w}}var Mi=new E(()=>new Qn,d=>d.reset());class Qn{constructor(){this.next=this.g=this.h=null}set(g,m){this.h=g,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Tn,nr=!1,Ts=new Dn,ka=()=>{let d=a.Promise.resolve(void 0);Tn=()=>{d.then(Vd)}};var Vd=()=>{for(var d;d=D();){try{d.h.call(d.g)}catch(m){M(m)}var g=Mi;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}nr=!1};function hi(){this.s=this.s,this.C=this.C}hi.prototype.s=!1,hi.prototype.ma=function(){this.s||(this.s=!0,this.N())},hi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ut(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}Ut.prototype.h=function(){this.defaultPrevented=!0};var Fo=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let m=()=>{};a.addEventListener("test",m,g),a.removeEventListener("test",m,g)}catch{}return d}();function fi(d,g){if(Ut.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var m=this.type=d.type,w=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if($){e:{try{F(g.nodeName);var P=!0;break e}catch{}P=!1}P||(g=null)}}else m=="mouseover"?g=d.fromElement:m=="mouseout"&&(g=d.toElement);this.relatedTarget=g,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:La[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&fi.aa.h.call(this)}}v(fi,Ut);var La={2:"touch",3:"pen",4:"mouse"};fi.prototype.h=function(){fi.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ir="closure_listenable_"+(1e6*Math.random()|0),Vr=0;function Bd(d,g,m,w,P){this.listener=d,this.proxy=null,this.src=g,this.type=m,this.capture=!!w,this.ha=P,this.key=++Vr,this.da=this.fa=!1}function gc(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function xo(d){this.src=d,this.g={},this.h=0}xo.prototype.add=function(d,g,m,w,P){var V=d.toString();d=this.g[V],d||(d=this.g[V]=[],this.h++);var ee=mc(d,g,w,P);return-1<ee?(g=d[ee],m||(g.fa=!1)):(g=new Bd(g,this.src,V,!!w,P),g.fa=m,d.push(g)),g};function Gd(d,g){var m=g.type;if(m in d.g){var w=d.g[m],P=Array.prototype.indexOf.call(w,g,void 0),V;(V=0<=P)&&Array.prototype.splice.call(w,P,1),V&&(gc(g),d.g[m].length==0&&(delete d.g[m],d.h--))}}function mc(d,g,m,w){for(var P=0;P<d.length;++P){var V=d[P];if(!V.da&&V.listener==g&&V.capture==!!m&&V.ha==w)return P}return-1}var Hd="closure_lm_"+(1e6*Math.random()|0),Ud={};function Wd(d,g,m,w,P){if(w&&w.once)return Hp(d,g,m,w,P);if(Array.isArray(g)){for(var V=0;V<g.length;V++)Wd(d,g[V],m,w,P);return null}return m=Cc(m),d&&d[ir]?d.K(g,m,c(w)?!!w.capture:!!w,P):jd(d,g,m,!1,w,P)}function jd(d,g,m,w,P,V){if(!g)throw Error("Invalid event type");var ee=c(P)?!!P.capture:!!P,ht=Va(d);if(ht||(d[Hd]=ht=new xo(d)),m=ht.add(g,m,w,ee,V),m.proxy)return m;if(w=mw(),m.proxy=w,w.src=d,w.listener=m,d.addEventListener)Fo||(P=ee),P===void 0&&(P=!1),d.addEventListener(g.toString(),w,P);else if(d.attachEvent)d.attachEvent(zd(g.toString()),w);else if(d.addListener&&d.removeListener)d.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return m}function mw(){function d(m){return g.call(d.src,d.listener,m)}let g=Up;return d}function Hp(d,g,m,w,P){if(Array.isArray(g)){for(var V=0;V<g.length;V++)Hp(d,g[V],m,w,P);return null}return m=Cc(m),d&&d[ir]?d.L(g,m,c(w)?!!w.capture:!!w,P):jd(d,g,m,!0,w,P)}function sr(d,g,m,w,P){if(Array.isArray(g))for(var V=0;V<g.length;V++)sr(d,g[V],m,w,P);else w=c(w)?!!w.capture:!!w,m=Cc(m),d&&d[ir]?(d=d.i,g=String(g).toString(),g in d.g&&(V=d.g[g],m=mc(V,m,w,P),-1<m&&(gc(V[m]),Array.prototype.splice.call(V,m,1),V.length==0&&(delete d.g[g],d.h--)))):d&&(d=Va(d))&&(g=d.g[g.toString()],d=-1,g&&(d=mc(g,m,w,P)),(m=-1<d?g[d]:null)&&Oo(m))}function Oo(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[ir])Gd(g.i,d);else{var m=d.type,w=d.proxy;g.removeEventListener?g.removeEventListener(m,w,d.capture):g.detachEvent?g.detachEvent(zd(m),w):g.addListener&&g.removeListener&&g.removeListener(w),(m=Va(g))?(Gd(m,d),m.h==0&&(m.src=null,g[Hd]=null)):gc(d)}}}function zd(d){return d in Ud?Ud[d]:Ud[d]="on"+d}function Up(d,g){if(d.da)d=!0;else{g=new fi(g,this);var m=d.listener,w=d.ha||d.src;d.fa&&Oo(d),d=m.call(w,g)}return d}function Va(d){return d=d[Hd],d instanceof xo?d:null}var vc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cc(d){return typeof d=="function"?d:(d[vc]||(d[vc]=function(g){return d.handleEvent(g)}),d[vc])}function rn(){hi.call(this),this.i=new xo(this),this.M=this,this.F=null}v(rn,hi),rn.prototype[ir]=!0,rn.prototype.removeEventListener=function(d,g,m,w){sr(this,d,g,m,w)};function fn(d,g){var m,w=d.F;if(w)for(m=[];w;w=w.F)m.push(w);if(d=d.M,w=g.type||g,typeof g=="string")g=new Ut(g,d);else if(g instanceof Ut)g.target=g.target||d;else{var P=g;g=new Ut(w,d),I(g,P)}if(P=!0,m)for(var V=m.length-1;0<=V;V--){var ee=g.g=m[V];P=Wp(ee,w,!0,g)&&P}if(ee=g.g=d,P=Wp(ee,w,!0,g)&&P,P=Wp(ee,w,!1,g)&&P,m)for(V=0;V<m.length;V++)ee=g.g=m[V],P=Wp(ee,w,!1,g)&&P}rn.prototype.N=function(){if(rn.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var m=d.g[g],w=0;w<m.length;w++)gc(m[w]);delete d.g[g],d.h--}}this.F=null},rn.prototype.K=function(d,g,m,w){return this.i.add(String(d),g,!1,m,w)},rn.prototype.L=function(d,g,m,w){return this.i.add(String(d),g,!0,m,w)};function Wp(d,g,m,w){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var P=!0,V=0;V<g.length;++V){var ee=g[V];if(ee&&!ee.da&&ee.capture==m){var ht=ee.listener,Rn=ee.ha||ee.src;ee.fa&&Gd(d.i,ee),P=ht.call(Rn,w)!==!1&&P}}return P&&!w.defaultPrevented}function PM(d,g,m){if(typeof d=="function")m&&(d=f(d,m));else if(d&&typeof d.handleEvent=="function")d=f(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(d,g||0)}function FM(d){d.g=PM(()=>{d.g=null,d.i&&(d.i=!1,FM(d))},d.l);let g=d.h;d.h=null,d.m.apply(null,g)}class mz extends hi{constructor(g,m){super(),this.m=g,this.l=m,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:FM(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $d(d){hi.call(this),this.h=d,this.g={}}v($d,hi);var xM=[];function OM(d){k(d.g,function(g,m){this.g.hasOwnProperty(m)&&Oo(g)},d),d.g={}}$d.prototype.N=function(){$d.aa.N.call(this),OM(this)},$d.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vw=a.JSON.stringify,vz=a.JSON.parse,Cz=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function Cw(){}Cw.prototype.h=null;function NM(d){return d.h||(d.h=d.i())}function kM(){}var qd={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yw(){Ut.call(this,"d")}v(yw,Ut);function ww(){Ut.call(this,"c")}v(ww,Ut);var Ba={},LM=null;function jp(){return LM=LM||new rn}Ba.La="serverreachability";function VM(d){Ut.call(this,Ba.La,d)}v(VM,Ut);function Kd(d){let g=jp();fn(g,new VM(g))}Ba.STAT_EVENT="statevent";function BM(d,g){Ut.call(this,Ba.STAT_EVENT,d),this.stat=g}v(BM,Ut);function Yn(d){let g=jp();fn(g,new BM(g,d))}Ba.Ma="timingevent";function GM(d,g){Ut.call(this,Ba.Ma,d),this.size=g}v(GM,Ut);function Qd(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},g)}function Yd(){this.g=!0}Yd.prototype.xa=function(){this.g=!1};function yz(d,g,m,w,P,V){d.info(function(){if(d.g)if(V)for(var ee="",ht=V.split("&"),Rn=0;Rn<ht.length;Rn++){var nt=ht[Rn].split("=");if(1<nt.length){var Nn=nt[0];nt=nt[1];var kn=Nn.split("_");ee=2<=kn.length&&kn[1]=="type"?ee+(Nn+"="+nt+"&"):ee+(Nn+"=redacted&")}}else ee=null;else ee=V;return"XMLHTTP REQ ("+w+") [attempt "+P+"]: "+g+`
`+m+`
`+ee})}function wz(d,g,m,w,P,V,ee){d.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+P+"]: "+g+`
`+m+`
`+V+" "+ee})}function yc(d,g,m,w){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+_z(d,m)+(w?" "+w:"")})}function Sz(d,g){d.info(function(){return"TIMEOUT: "+g})}Yd.prototype.info=function(){};function _z(d,g){if(!d.g)return g;if(!g)return null;try{var m=JSON.parse(g);if(m){for(d=0;d<m.length;d++)if(Array.isArray(m[d])){var w=m[d];if(!(2>w.length)){var P=w[1];if(Array.isArray(P)&&!(1>P.length)){var V=P[0];if(V!="noop"&&V!="stop"&&V!="close")for(var ee=1;ee<P.length;ee++)P[ee]=""}}}}return vw(m)}catch{return g}}var zp={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},HM={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sw;function $p(){}v($p,Cw),$p.prototype.g=function(){return new XMLHttpRequest},$p.prototype.i=function(){return{}},Sw=new $p;function No(d,g,m,w){this.j=d,this.i=g,this.l=m,this.R=w||1,this.U=new $d(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new UM}function UM(){this.i=null,this.g="",this.h=!1}var WM={},_w={};function bw(d,g,m){d.L=1,d.v=Yp(Br(g)),d.m=m,d.P=!0,jM(d,null)}function jM(d,g){d.F=Date.now(),qp(d),d.A=Br(d.v);var m=d.A,w=d.R;Array.isArray(w)||(w=[String(w)]),sP(m.i,"t",w),d.C=0,m=d.j.J,d.h=new UM,d.g=_P(d.j,m?g:null,!d.m),0<d.O&&(d.M=new mz(f(d.Y,d,d.g),d.O)),g=d.U,m=d.g,w=d.ca;var P="readystatechange";Array.isArray(P)||(P&&(xM[0]=P.toString()),P=xM);for(var V=0;V<P.length;V++){var ee=Wd(m,P[V],w||g.handleEvent,!1,g.h||g);if(!ee)break;g.g[ee.key]=ee}g=d.H?S(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),Kd(),yz(d.i,d.u,d.A,d.l,d.R,d.m)}No.prototype.ca=function(d){d=d.target;let g=this.M;g&&Gr(d)==3?g.j():this.Y(d)},No.prototype.Y=function(d){try{if(d==this.g)e:{let kn=Gr(this.g);var g=this.g.Ba();let _c=this.g.Z();if(!(3>kn)&&(kn!=3||this.g&&(this.h.h||this.g.oa()||dP(this.g)))){this.J||kn!=4||g==7||(g==8||0>=_c?Kd(3):Kd(2)),Ew(this);var m=this.g.Z();this.X=m;t:if(zM(this)){var w=dP(this.g);d="";var P=w.length,V=Gr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ga(this),Jd(this);var ee="";break t}this.h.i=new a.TextDecoder}for(g=0;g<P;g++)this.h.h=!0,d+=this.h.i.decode(w[g],{stream:!(V&&g==P-1)});w.length=0,this.h.g+=d,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=m==200,wz(this.i,this.u,this.A,this.l,this.R,kn,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ht,Rn=this.g;if((ht=Rn.g?Rn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(ht)){var nt=ht;break t}}nt=null}if(m=nt)yc(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dw(this,m);else{this.o=!1,this.s=3,Yn(12),Ga(this),Jd(this);break e}}if(this.P){m=!0;let Rs;for(;!this.J&&this.C<ee.length;)if(Rs=bz(this,ee),Rs==_w){kn==4&&(this.s=4,Yn(14),m=!1),yc(this.i,this.l,null,"[Incomplete Response]");break}else if(Rs==WM){this.s=4,Yn(15),yc(this.i,this.l,ee,"[Invalid Chunk]"),m=!1;break}else yc(this.i,this.l,Rs,null),Dw(this,Rs);if(zM(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kn!=4||ee.length!=0||this.h.h||(this.s=1,Yn(16),m=!1),this.o=this.o&&m,!m)yc(this.i,this.l,ee,"[Invalid Chunked Response]"),Ga(this),Jd(this);else if(0<ee.length&&!this.W){this.W=!0;var Nn=this.j;Nn.g==this&&Nn.ba&&!Nn.M&&(Nn.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),Pw(Nn),Nn.M=!0,Yn(11))}}else yc(this.i,this.l,ee,null),Dw(this,ee);kn==4&&Ga(this),this.o&&!this.J&&(kn==4?CP(this.j,this):(this.o=!1,qp(this)))}else Gz(this.g),m==400&&0<ee.indexOf("Unknown SID")?(this.s=3,Yn(12)):(this.s=0,Yn(13)),Ga(this),Jd(this)}}}catch{}finally{}};function zM(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function bz(d,g){var m=d.C,w=g.indexOf(`
`,m);return w==-1?_w:(m=Number(g.substring(m,w)),isNaN(m)?WM:(w+=1,w+m>g.length?_w:(g=g.slice(w,w+m),d.C=w+m,g)))}No.prototype.cancel=function(){this.J=!0,Ga(this)};function qp(d){d.S=Date.now()+d.I,$M(d,d.I)}function $M(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Qd(f(d.ba,d),g)}function Ew(d){d.B&&(a.clearTimeout(d.B),d.B=null)}No.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(Sz(this.i,this.A),this.L!=2&&(Kd(),Yn(17)),Ga(this),this.s=2,Jd(this)):$M(this,this.S-d)};function Jd(d){d.j.G==0||d.J||CP(d.j,d)}function Ga(d){Ew(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,OM(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function Dw(d,g){try{var m=d.j;if(m.G!=0&&(m.g==d||Tw(m.h,d))){if(!d.K&&Tw(m.h,d)&&m.G==3){try{var w=m.Da.g.parse(g)}catch{w=null}if(Array.isArray(w)&&w.length==3){var P=w;if(P[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<d.F)tg(m),Zp(m);else break e;Mw(m),Yn(18)}}else m.za=P[1],0<m.za-m.T&&37500>P[2]&&m.F&&m.v==0&&!m.C&&(m.C=Qd(f(m.Za,m),6e3));if(1>=QM(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Ua(m,11)}else if((d.K||m.g==d)&&tg(m),!T(g))for(P=m.Da.g.parse(g),g=0;g<P.length;g++){let nt=P[g];if(m.T=nt[0],nt=nt[1],m.G==2)if(nt[0]=="c"){m.K=nt[1],m.ia=nt[2];let Nn=nt[3];Nn!=null&&(m.la=Nn,m.j.info("VER="+m.la));let kn=nt[4];kn!=null&&(m.Aa=kn,m.j.info("SVER="+m.Aa));let _c=nt[5];_c!=null&&typeof _c=="number"&&0<_c&&(w=1.5*_c,m.L=w,m.j.info("backChannelRequestTimeoutMs_="+w)),w=m;let Rs=d.g;if(Rs){let ig=Rs.g?Rs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ig){var V=w.h;V.g||ig.indexOf("spdy")==-1&&ig.indexOf("quic")==-1&&ig.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Rw(V,V.h),V.h=null))}if(w.D){let Fw=Rs.g?Rs.g.getResponseHeader("X-HTTP-Session-Id"):null;Fw&&(w.ya=Fw,bt(w.I,w.D,Fw))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-d.F,m.j.info("Handshake RTT: "+m.R+"ms")),w=m;var ee=d;if(w.qa=SP(w,w.J?w.ia:null,w.W),ee.K){YM(w.h,ee);var ht=ee,Rn=w.L;Rn&&(ht.I=Rn),ht.B&&(Ew(ht),qp(ht)),w.g=ee}else mP(w);0<m.i.length&&eg(m)}else nt[0]!="stop"&&nt[0]!="close"||Ua(m,7);else m.G==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?Ua(m,7):Aw(m):nt[0]!="noop"&&m.l&&m.l.ta(nt),m.v=0)}}Kd(4)}catch{}}var Ez=class{constructor(d,g){this.g=d,this.map=g}};function qM(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function KM(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function QM(d){return d.h?1:d.g?d.g.size:0}function Tw(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function Rw(d,g){d.g?d.g.add(g):d.h=g}function YM(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}qM.prototype.cancel=function(){if(this.i=JM(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function JM(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(let m of d.g.values())g=g.concat(m.D);return g}return y(d.i)}function Dz(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var g=[],m=d.length,w=0;w<m;w++)g.push(d[w]);return g}g=[],m=0;for(w in d)g[m++]=d[w];return g}function Tz(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var g=[];d=d.length;for(var m=0;m<d;m++)g.push(m);return g}g=[],m=0;for(let w in d)g[m++]=w;return g}}}function XM(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var m=Tz(d),w=Dz(d),P=w.length,V=0;V<P;V++)g.call(void 0,w[V],m&&m[V],d)}var ZM=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rz(d,g){if(d){d=d.split("&");for(var m=0;m<d.length;m++){var w=d[m].indexOf("="),P=null;if(0<=w){var V=d[m].substring(0,w);P=d[m].substring(w+1)}else V=d[m];g(V,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Ha(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Ha){this.h=d.h,Kp(this,d.j),this.o=d.o,this.g=d.g,Qp(this,d.s),this.l=d.l;var g=d.i,m=new eh;m.i=g.i,g.g&&(m.g=new Map(g.g),m.h=g.h),eP(this,m),this.m=d.m}else d&&(g=String(d).match(ZM))?(this.h=!1,Kp(this,g[1]||"",!0),this.o=Xd(g[2]||""),this.g=Xd(g[3]||"",!0),Qp(this,g[4]),this.l=Xd(g[5]||"",!0),eP(this,g[6]||"",!0),this.m=Xd(g[7]||"")):(this.h=!1,this.i=new eh(null,this.h))}Ha.prototype.toString=function(){var d=[],g=this.j;g&&d.push(Zd(g,tP,!0),":");var m=this.g;return(m||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Zd(g,tP,!0),"@"),d.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&d.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&d.push("/"),d.push(Zd(m,m.charAt(0)=="/"?Mz:Az,!0))),(m=this.i.toString())&&d.push("?",m),(m=this.m)&&d.push("#",Zd(m,Fz)),d.join("")};function Br(d){return new Ha(d)}function Kp(d,g,m){d.j=m?Xd(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function Qp(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function eP(d,g,m){g instanceof eh?(d.i=g,xz(d.i,d.h)):(m||(g=Zd(g,Pz)),d.i=new eh(g,d.h))}function bt(d,g,m){d.i.set(g,m)}function Yp(d){return bt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Xd(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Zd(d,g,m){return typeof d=="string"?(d=encodeURI(d).replace(g,Iz),m&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Iz(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var tP=/[#\/\?@]/g,Az=/[#\?:]/g,Mz=/[#\?]/g,Pz=/[#\?@]/g,Fz=/#/g;function eh(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function ko(d){d.g||(d.g=new Map,d.h=0,d.i&&Rz(d.i,function(g,m){d.add(decodeURIComponent(g.replace(/\+/g," ")),m)}))}e=eh.prototype,e.add=function(d,g){ko(this),this.i=null,d=wc(this,d);var m=this.g.get(d);return m||this.g.set(d,m=[]),m.push(g),this.h+=1,this};function nP(d,g){ko(d),g=wc(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function iP(d,g){return ko(d),g=wc(d,g),d.g.has(g)}e.forEach=function(d,g){ko(this),this.g.forEach(function(m,w){m.forEach(function(P){d.call(g,P,w,this)},this)},this)},e.na=function(){ko(this);let d=Array.from(this.g.values()),g=Array.from(this.g.keys()),m=[];for(let w=0;w<g.length;w++){let P=d[w];for(let V=0;V<P.length;V++)m.push(g[w])}return m},e.V=function(d){ko(this);let g=[];if(typeof d=="string")iP(this,d)&&(g=g.concat(this.g.get(wc(this,d))));else{d=Array.from(this.g.values());for(let m=0;m<d.length;m++)g=g.concat(d[m])}return g},e.set=function(d,g){return ko(this),this.i=null,d=wc(this,d),iP(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},e.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function sP(d,g,m){nP(d,g),0<m.length&&(d.i=null,d.g.set(wc(d,g),y(m)),d.h+=m.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],g=Array.from(this.g.keys());for(var m=0;m<g.length;m++){var w=g[m];let V=encodeURIComponent(String(w)),ee=this.V(w);for(w=0;w<ee.length;w++){var P=V;ee[w]!==""&&(P+="="+encodeURIComponent(String(ee[w]))),d.push(P)}}return this.i=d.join("&")};function wc(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function xz(d,g){g&&!d.j&&(ko(d),d.i=null,d.g.forEach(function(m,w){var P=w.toLowerCase();w!=P&&(nP(this,w),sP(this,P,m))},d)),d.j=g}function Oz(d,g){let m=new Yd;if(a.Image){let w=new Image;w.onload=p(Lo,m,"TestLoadImage: loaded",!0,g,w),w.onerror=p(Lo,m,"TestLoadImage: error",!1,g,w),w.onabort=p(Lo,m,"TestLoadImage: abort",!1,g,w),w.ontimeout=p(Lo,m,"TestLoadImage: timeout",!1,g,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=d}else g(!1)}function Nz(d,g){let m=new Yd,w=new AbortController,P=setTimeout(()=>{w.abort(),Lo(m,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:w.signal}).then(V=>{clearTimeout(P),V.ok?Lo(m,"TestPingServer: ok",!0,g):Lo(m,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(P),Lo(m,"TestPingServer: error",!1,g)})}function Lo(d,g,m,w,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),w(m)}catch{}}function kz(){this.g=new Cz}function Lz(d,g,m){let w=m||"";try{XM(d,function(P,V){let ee=P;c(P)&&(ee=vw(P)),g.push(w+V+"="+encodeURIComponent(ee))})}catch(P){throw g.push(w+"type="+encodeURIComponent("_badmap")),P}}function th(d){this.l=d.Ub||null,this.j=d.eb||!1}v(th,Cw),th.prototype.g=function(){return new Jp(this.l,this.j)},th.prototype.i=function(d){return function(){return d}}({});function Jp(d,g){rn.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Jp,rn),e=Jp.prototype,e.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,ih(this)},e.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,nh(this)),this.readyState=0},e.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ih(this)),this.g&&(this.readyState=3,ih(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rP(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function rP(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}e.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?nh(this):ih(this),this.readyState==3&&rP(this)}},e.Ra=function(d){this.g&&(this.response=this.responseText=d,nh(this))},e.Qa=function(d){this.g&&(this.response=d,nh(this))},e.ga=function(){this.g&&nh(this)};function nh(d){d.readyState=4,d.l=null,d.j=null,d.v=null,ih(d)}e.setRequestHeader=function(d,g){this.u.append(d,g)},e.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],g=this.h.entries();for(var m=g.next();!m.done;)m=m.value,d.push(m[0]+": "+m[1]),m=g.next();return d.join(`\r
`)};function ih(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Jp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function oP(d){let g="";return k(d,function(m,w){g+=w,g+=":",g+=m,g+=`\r
`}),g}function Iw(d,g,m){e:{for(w in m){var w=!1;break e}w=!0}w||(m=oP(m),typeof d=="string"?m!=null&&encodeURIComponent(String(m)):bt(d,g,m))}function xt(d){rn.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(xt,rn);var Vz=/^https?$/i,Bz=["POST","PUT"];e=xt.prototype,e.Ha=function(d){this.J=d},e.ea=function(d,g,m,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sw.g(),this.v=this.o?NM(this.o):NM(Sw),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(V){aP(this,V);return}if(d=m||"",m=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var P in w)m.set(P,w[P]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(let V of w.keys())m.set(V,w.get(V));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(m.keys()).find(V=>V.toLowerCase()=="content-type"),P=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Bz,g,void 0))||w||P||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[V,ee]of m)this.g.setRequestHeader(V,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{uP(this),this.u=!0,this.g.send(d),this.u=!1}catch(V){aP(this,V)}};function aP(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,lP(d),Xp(d)}function lP(d){d.A||(d.A=!0,fn(d,"complete"),fn(d,"error"))}e.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,fn(this,"complete"),fn(this,"abort"),Xp(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xp(this,!0)),xt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?cP(this):this.bb())},e.bb=function(){cP(this)};function cP(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Gr(d)!=4||d.Z()!=2)){if(d.u&&Gr(d)==4)PM(d.Ea,0,d);else if(fn(d,"readystatechange"),Gr(d)==4){d.h=!1;try{let ee=d.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var m;if(!(m=g)){var w;if(w=ee===0){var P=String(d.D).match(ZM)[1]||null;!P&&a.self&&a.self.location&&(P=a.self.location.protocol.slice(0,-1)),w=!Vz.test(P?P.toLowerCase():"")}m=w}if(m)fn(d,"complete"),fn(d,"success");else{d.m=6;try{var V=2<Gr(d)?d.g.statusText:""}catch{V=""}d.l=V+" ["+d.Z()+"]",lP(d)}}finally{Xp(d)}}}}function Xp(d,g){if(d.g){uP(d);let m=d.g,w=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||fn(d,"ready");try{m.onreadystatechange=w}catch{}}}function uP(d){d.I&&(a.clearTimeout(d.I),d.I=null)}e.isActive=function(){return!!this.g};function Gr(d){return d.g?d.g.readyState:0}e.Z=function(){try{return 2<Gr(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),vz(g)}};function dP(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Gz(d){let g={};d=(d.g&&2<=Gr(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<d.length;w++){if(T(d[w]))continue;var m=A(d[w]);let P=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let V=g[P]||[];g[P]=V,V.push(m)}b(g,function(w){return w.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function sh(d,g,m){return m&&m.internalChannelParams&&m.internalChannelParams[d]||g}function hP(d){this.Aa=0,this.i=[],this.j=new Yd,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=sh("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=sh("baseRetryDelayMs",5e3,d),this.cb=sh("retryDelaySeedMs",1e4,d),this.Wa=sh("forwardChannelMaxRetries",2,d),this.wa=sh("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new qM(d&&d.concurrentRequestLimit),this.Da=new kz,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=hP.prototype,e.la=8,e.G=1,e.connect=function(d,g,m,w){Yn(0),this.W=d,this.H=g||{},m&&w!==void 0&&(this.H.OSID=m,this.H.OAID=w),this.F=this.X,this.I=SP(this,null,this.W),eg(this)};function Aw(d){if(fP(d),d.G==3){var g=d.U++,m=Br(d.I);if(bt(m,"SID",d.K),bt(m,"RID",g),bt(m,"TYPE","terminate"),rh(d,m),g=new No(d,d.j,g),g.L=2,g.v=Yp(Br(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=g.v,m=!0),m||(g.g=_P(g.j,null),g.g.ea(g.v)),g.F=Date.now(),qp(g)}wP(d)}function Zp(d){d.g&&(Pw(d),d.g.cancel(),d.g=null)}function fP(d){Zp(d),d.u&&(a.clearTimeout(d.u),d.u=null),tg(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function eg(d){if(!KM(d.h)&&!d.s){d.s=!0;var g=d.Ga;Tn||ka(),nr||(Tn(),nr=!0),Ts.add(g,d),d.B=0}}function Hz(d,g){return QM(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Qd(f(d.Ga,d,g),yP(d,d.B)),d.B++,!0)}e.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let P=new No(this,this.j,d),V=this.o;if(this.S&&(V?(V=S(V),I(V,this.S)):V=this.S),this.m!==null||this.O||(P.H=V,V=null),this.P)e:{for(var g=0,m=0;m<this.i.length;m++){t:{var w=this.i[m];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(g+=w,4096<g){g=m;break e}if(g===4096||m===this.i.length-1){g=m+1;break e}}g=1e3}else g=1e3;g=gP(this,P,g),m=Br(this.I),bt(m,"RID",d),bt(m,"CVER",22),this.D&&bt(m,"X-HTTP-Session-Id",this.D),rh(this,m),V&&(this.O?g="headers="+encodeURIComponent(String(oP(V)))+"&"+g:this.m&&Iw(m,this.m,V)),Rw(this.h,P),this.Ua&&bt(m,"TYPE","init"),this.P?(bt(m,"$req",g),bt(m,"SID","null"),P.T=!0,bw(P,m,null)):bw(P,m,g),this.G=2}}else this.G==3&&(d?pP(this,d):this.i.length==0||KM(this.h)||pP(this))};function pP(d,g){var m;g?m=g.l:m=d.U++;let w=Br(d.I);bt(w,"SID",d.K),bt(w,"RID",m),bt(w,"AID",d.T),rh(d,w),d.m&&d.o&&Iw(w,d.m,d.o),m=new No(d,d.j,m,d.B+1),d.m===null&&(m.H=d.o),g&&(d.i=g.D.concat(d.i)),g=gP(d,m,1e3),m.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Rw(d.h,m),bw(m,w,g)}function rh(d,g){d.H&&k(d.H,function(m,w){bt(g,w,m)}),d.l&&XM({},function(m,w){bt(g,w,m)})}function gP(d,g,m){m=Math.min(d.i.length,m);var w=d.l?f(d.l.Na,d.l,d):null;e:{var P=d.i;let V=-1;for(;;){let ee=["count="+m];V==-1?0<m?(V=P[0].g,ee.push("ofs="+V)):V=0:ee.push("ofs="+V);let ht=!0;for(let Rn=0;Rn<m;Rn++){let nt=P[Rn].g,Nn=P[Rn].map;if(nt-=V,0>nt)V=Math.max(0,P[Rn].g-100),ht=!1;else try{Lz(Nn,ee,"req"+nt+"_")}catch{w&&w(Nn)}}if(ht){w=ee.join("&");break e}}}return d=d.i.splice(0,m),g.D=d,w}function mP(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;Tn||ka(),nr||(Tn(),nr=!0),Ts.add(g,d),d.v=0}}function Mw(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Qd(f(d.Fa,d),yP(d,d.v)),d.v++,!0)}e.Fa=function(){if(this.u=null,vP(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Qd(f(this.ab,this),d)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Yn(10),Zp(this),vP(this))};function Pw(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function vP(d){d.g=new No(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=Br(d.qa);bt(g,"RID","rpc"),bt(g,"SID",d.K),bt(g,"AID",d.T),bt(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&bt(g,"TO",d.ja),bt(g,"TYPE","xmlhttp"),rh(d,g),d.m&&d.o&&Iw(g,d.m,d.o),d.L&&(d.g.I=d.L);var m=d.g;d=d.ia,m.L=1,m.v=Yp(Br(g)),m.m=null,m.P=!0,jM(m,d)}e.Za=function(){this.C!=null&&(this.C=null,Zp(this),Mw(this),Yn(19))};function tg(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function CP(d,g){var m=null;if(d.g==g){tg(d),Pw(d),d.g=null;var w=2}else if(Tw(d.h,g))m=g.D,YM(d.h,g),w=1;else return;if(d.G!=0){if(g.o)if(w==1){m=g.m?g.m.length:0,g=Date.now()-g.F;var P=d.B;w=jp(),fn(w,new GM(w,m)),eg(d)}else mP(d);else if(P=g.s,P==3||P==0&&0<g.X||!(w==1&&Hz(d,g)||w==2&&Mw(d)))switch(m&&0<m.length&&(g=d.h,g.i=g.i.concat(m)),P){case 1:Ua(d,5);break;case 4:Ua(d,10);break;case 3:Ua(d,6);break;default:Ua(d,2)}}}function yP(d,g){let m=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(m*=2),m*g}function Ua(d,g){if(d.j.info("Error code "+g),g==2){var m=f(d.fb,d),w=d.Xa;let P=!w;w=new Ha(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Kp(w,"https"),Yp(w),P?Oz(w.toString(),m):Nz(w.toString(),m)}else Yn(2);d.G=0,d.l&&d.l.sa(g),wP(d),fP(d)}e.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Yn(2)):(this.j.info("Failed to ping google.com"),Yn(1))};function wP(d){if(d.G=0,d.ka=[],d.l){let g=JM(d.h);(g.length!=0||d.i.length!=0)&&(C(d.ka,g),C(d.ka,d.i),d.h.i.length=0,y(d.i),d.i.length=0),d.l.ra()}}function SP(d,g,m){var w=m instanceof Ha?Br(m):new Ha(m);if(w.g!="")g&&(w.g=g+"."+w.g),Qp(w,w.s);else{var P=a.location;w=P.protocol,g=g?g+"."+P.hostname:P.hostname,P=+P.port;var V=new Ha(null);w&&Kp(V,w),g&&(V.g=g),P&&Qp(V,P),m&&(V.l=m),w=V}return m=d.D,g=d.ya,m&&g&&bt(w,m,g),bt(w,"VER",d.la),rh(d,w),w}function _P(d,g,m){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new xt(new th({eb:m})):new xt(d.pa),g.Ha(d.J),g}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function bP(){}e=bP.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function ng(){}ng.prototype.g=function(d,g){return new Pi(d,g)};function Pi(d,g){rn.call(this),this.g=new hP(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!T(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!T(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Sc(this)}v(Pi,rn),Pi.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pi.prototype.close=function(){Aw(this.g)},Pi.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var m={};m.__data__=d,d=m}else this.u&&(m={},m.__data__=vw(d),d=m);g.i.push(new Ez(g.Ya++,d)),g.G==3&&eg(g)},Pi.prototype.N=function(){this.g.l=null,delete this.j,Aw(this.g),delete this.g,Pi.aa.N.call(this)};function EP(d){yw.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(let m in g){d=m;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}v(EP,yw);function DP(){ww.call(this),this.status=1}v(DP,ww);function Sc(d){this.g=d}v(Sc,bP),Sc.prototype.ua=function(){fn(this.g,"a")},Sc.prototype.ta=function(d){fn(this.g,new EP(d))},Sc.prototype.sa=function(d){fn(this.g,new DP)},Sc.prototype.ra=function(){fn(this.g,"b")},ng.prototype.createWebChannel=ng.prototype.g,Pi.prototype.send=Pi.prototype.o,Pi.prototype.open=Pi.prototype.m,Pi.prototype.close=Pi.prototype.close,HE=uo.createWebChannelTransport=function(){return new ng},GE=uo.getStatEventTarget=function(){return jp()},BE=uo.Event=Ba,gC=uo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zp.NO_ERROR=0,zp.TIMEOUT=8,zp.HTTP_ERROR=6,Af=uo.ErrorCode=zp,HM.COMPLETE="complete",VE=uo.EventType=HM,kM.EventType=qd,qd.OPEN="a",qd.CLOSE="b",qd.ERROR="c",qd.MESSAGE="d",rn.prototype.listen=rn.prototype.K,ku=uo.WebChannel=kM,LE=uo.FetchXmlHttpFactory=th,xt.prototype.listenOnce=xt.prototype.L,xt.prototype.getLastError=xt.prototype.Ka,xt.prototype.getLastErrorCode=xt.prototype.Ba,xt.prototype.getStatus=xt.prototype.Z,xt.prototype.getResponseJson=xt.prototype.Oa,xt.prototype.getResponseText=xt.prototype.oa,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Ha,kE=uo.XhrIo=xt}).apply(typeof pC<"u"?pC:typeof self<"u"?self:typeof window<"u"?window:{});var JL="@firebase/firestore";var _n=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};_n.UNAUTHENTICATED=new _n(null),_n.GOOGLE_CREDENTIALS=new _n("google-credentials-uid"),_n.FIRST_PARTY=new _n("first-party-uid"),_n.MOCK_USER=new _n("mock-user");var td="10.12.5";var xl=new lr("@firebase/firestore");function Mf(){return xl.logLevel}function he(e,...t){if(xl.logLevel<=Fi.DEBUG){let n=t.map(AT);xl.debug(`Firestore (${td}): ${e}`,...n)}}function fo(e,...t){if(xl.logLevel<=Fi.ERROR){let n=t.map(AT);xl.error(`Firestore (${td}): ${e}`,...n)}}function Wu(e,...t){if(xl.logLevel<=Fi.WARN){let n=t.map(AT);xl.warn(`Firestore (${td}): ${e}`,...n)}}function AT(e){if(typeof e=="string")return e;try{return function(n){return JSON.stringify(n)}(e)}catch{return e}}function Ie(e="Unexpected state"){let t=`FIRESTORE (${td}) INTERNAL ASSERTION FAILED: `+e;throw fo(t),new Error(t)}function vt(e,t){e||Ie()}function Pe(e,t){return e}var z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ce=class extends As{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Tr=class{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}};var wC=class{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},$E=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(_n.UNAUTHENTICATED))}shutdown(){}},qE=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},KE=class{constructor(t){this.t=t,this.currentUser=_n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let i=this.i,s=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve(),r=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Tr,t.enqueueRetryable(()=>s(this.currentUser))};let o=()=>{let l=r;t.enqueueRetryable(()=>x(this,null,function*(){yield l.promise,yield s(this.currentUser)}))},a=l=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Tr)}},0),o()}getToken(){let t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==t?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(vt(typeof i.accessToken=="string"),new wC(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return vt(t===null||typeof t=="string"),new _n(t)}},QE=class{constructor(t,n,i){this.l=t,this.h=n,this.P=i,this.type="FirstParty",this.user=_n.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},YE=class{constructor(t,n,i){this.l=t,this.h=n,this.P=i}getToken(){return Promise.resolve(new QE(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(_n.FIRST_PARTY))}shutdown(){}invalidateToken(){}},JE=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},XE=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){let i=r=>{r.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);let o=r.token!==this.R;return this.R=r.token,he("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{t.enqueueRetryable(()=>i(r))};let s=r=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.A.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){let r=this.A.getImmediate({optional:!0});r?s(r):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(vt(typeof n.token=="string"),this.R=n.token,new JE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function hZ(e){let t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}var SC=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length,i="";for(;i.length<20;){let s=hZ(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=t.charAt(s[r]%t.length))}return i}};function at(e,t){return e<t?-1:e>t?1:0}function ju(e,t,n){return e.length===t.length&&e.every((i,s)=>n(i,t[s]))}var sn=class e{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new ce(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new ce(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ce(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return e.fromMillis(Date.now())}static fromDate(t){return e.fromMillis(t.getTime())}static fromMillis(t){let n=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*n));return new e(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?at(this.nanoseconds,t.nanoseconds):at(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var xe=class e{constructor(t){this.timestamp=t}static fromTimestamp(t){return new e(t)}static min(){return new e(new sn(0,0))}static max(){return new e(new sn(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var _C=class e{constructor(t,n,i){n===void 0?n=0:n>t.length&&Ie(),i===void 0?i=t.length-n:i>t.length-n&&Ie(),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return e.comparator(this,t)===0}child(t){let n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(i=>{n.push(i)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){let i=Math.min(t.length,n.length);for(let s=0;s<i;s++){let r=t.get(s),o=n.get(s);if(r<o)return-1;if(r>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}},Pt=class e extends _C{construct(t,n,i){return new e(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let n=[];for(let i of t){if(i.indexOf("//")>=0)throw new ce(z.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new e(n)}static emptyPath(){return new e([])}},fZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/,qi=class e extends _C{construct(t,n,i){return new e(t,n,i)}static isValidIdentifier(t){return fZ.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new e(["__name__"])}static fromServerFormat(t){let n=[],i="",s=0,r=()=>{if(i.length===0)throw new ce(z.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},o=!1;for(;s<t.length;){let a=t[s];if(a==="\\"){if(s+1===t.length)throw new ce(z.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let l=t[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ce(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(i+=a,s++):(r(),s++)}if(r(),o)throw new ce(z.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)}static emptyPath(){return new e([])}};var we=class e{constructor(t){this.path=t}static fromPath(t){return new e(Pt.fromString(t))}static fromName(t){return new e(Pt.fromString(t).popFirst(5))}static empty(){return new e(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Pt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Pt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new e(new Pt(t.slice()))}};var ZE=class{constructor(t,n,i,s){this.indexId=t,this.collectionGroup=n,this.fields=i,this.indexState=s}};ZE.UNKNOWN_ID=-1;function pZ(e,t){let n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,s=xe.fromTimestamp(i===1e9?new sn(n+1,0):new sn(n,i));return new Ol(s,we.empty(),t)}function gZ(e){return new Ol(e.readTime,e.key,-1)}var Ol=class e{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new e(xe.min(),we.empty(),-1)}static max(){return new e(xe.max(),we.empty(),-1)}};function mZ(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=we.comparator(e.documentKey,t.documentKey),n!==0?n:at(e.largestBatchId,t.largestBatchId))}var vZ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",eD=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function qf(e){return x(this,null,function*(){if(e.code!==z.FAILED_PRECONDITION||e.message!==vZ)throw e;he("LocalStore","Unexpectedly lost primary lease")})}var J=class e{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(t,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{let n=t();return n instanceof e?n:e.resolve(n)}catch(n){return e.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):e.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):e.reject(n)}static resolve(t){return new e((n,i)=>{n(t)})}static reject(t){return new e((n,i)=>{i(t)})}static waitFor(t){return new e((n,i)=>{let s=0,r=0,o=!1;t.forEach(a=>{++s,a.next(()=>{++r,o&&r===s&&n()},l=>i(l))}),o=!0,r===s&&n()})}static or(t){let n=e.resolve(!1);for(let i of t)n=n.next(s=>s?e.resolve(s):i());return n}static forEach(t,n){let i=[];return t.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(t,n){return new e((i,s)=>{let r=t.length,o=new Array(r),a=0;for(let l=0;l<r;l++){let c=l;n(t[c]).next(u=>{o[c]=u,++a,a===r&&i(o)},u=>s(u))}})}static doWhile(t,n){return new e((i,s)=>{let r=()=>{t()===!0?n().next(()=>{r()},s):i()};r()})}};function CZ(e){let t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Kf(e){return e.name==="IndexedDbTransactionError"}var MV=(()=>{class e{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=s=>this.ie(s),this.se=s=>i.writeSequenceNumber(s))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return e.oe=-1,e})();function ty(e){return e==null}function kf(e){return e===0&&1/e==-1/0}function yZ(e){return typeof e=="number"&&Number.isInteger(e)&&!kf(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var wZ=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],rNe=[...wZ,"documentOverlays"],SZ=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],_Z=SZ,bZ=[..._Z,"indexConfiguration","indexState","indexEntries"];var oNe=[...bZ,"globals"];function XL(e){let t=0;for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Gl(e,t){for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function PV(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Ht=class e{constructor(t,n){this.comparator=t,this.root=n||Rr.EMPTY}insert(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Rr.BLACK,null,null))}remove(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Rr.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){let s=this.comparator(t,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,i)=>(t(n,i),!1))}toString(){let t=[];return this.inorderTraversal((n,i)=>(t.push(`${n}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Gu(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Gu(this.root,t,this.comparator,!1)}getReverseIterator(){return new Gu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Gu(this.root,t,this.comparator,!0)}},Gu=class{constructor(t,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=n?i(t.key,n):1,n&&s&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(r===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Rr=class e{constructor(t,n,i,s,r){this.key=t,this.value=n,this.color=i??e.RED,this.left=s??e.EMPTY,this.right=r??e.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,s,r){return new e(t??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let s=this,r=i(t,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(t,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return e.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return e.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ie();let t=this.left.check();if(t!==this.right.check())throw Ie();return t+(this.isRed()?0:1)}};Rr.EMPTY=null,Rr.RED=!0,Rr.BLACK=!1;Rr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie()}get value(){throw Ie()}get color(){throw Ie()}get left(){throw Ie()}get right(){throw Ie()}copy(t,n,i,s,r){return this}insert(t,n,i){return new Rr(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Hn=class e{constructor(t){this.comparator=t,this.data=new Ht(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,i)=>(t(n),!1))}forEachInRange(t,n){let i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){let s=i.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){let n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new bC(this.data.getIterator())}getIteratorFrom(t){return new bC(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(i=>{n=n.add(i)}),n}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){let s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(n=>{t.push(n)}),t}toString(){let t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){let n=new e(this.comparator);return n.data=t,n}},bC=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var ms=class e{constructor(t){this.fields=t,t.sort(qi.comparator)}static empty(){return new e([])}unionWith(t){let n=new Hn(qi.comparator);for(let i of this.fields)n=n.add(i);for(let i of t)n=n.add(i);return new e(n.toArray())}covers(t){for(let n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return ju(this.fields,t.fields,(n,i)=>n.isEqual(i))}};var EC=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Un=class e{constructor(t){this.binaryString=t}static fromBase64String(t){let n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new EC("Invalid base64 string: "+r):r}}(t);return new e(n)}static fromUint8Array(t){let n=function(s){let r="";for(let o=0;o<s.length;++o)r+=String.fromCharCode(s[o]);return r}(t);return new e(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return at(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};Un.EMPTY_BYTE_STRING=new Un("");var EZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function po(e){if(vt(!!e),typeof e=="string"){let t=0,n=EZ.exec(e);if(vt(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}let i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Gt(e.seconds),nanos:Gt(e.nanos)}}function Gt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function _a(e){return typeof e=="string"?Un.fromBase64String(e):Un.fromUint8Array(e)}function MT(e){var t,n;return((n=(((t=e?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function PT(e){let t=e.mapValue.fields.__previous_value__;return MT(t)?PT(t):t}function Lf(e){let t=po(e.mapValue.fields.__local_write_time__.timestampValue);return new sn(t.seconds,t.nanos)}var tD=class{constructor(t,n,i,s,r,o,a,l,c){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}},DC=class e{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new e("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}};var mC={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Nl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?MT(e)?4:FV(e)?9007199254740991:10:Ie()}function Pr(e,t){if(e===t)return!0;let n=Nl(e);if(n!==Nl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Lf(e).isEqual(Lf(t));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;let o=po(s.timestampValue),a=po(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,r){return _a(s.bytesValue).isEqual(_a(r.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,r){return Gt(s.geoPointValue.latitude)===Gt(r.geoPointValue.latitude)&&Gt(s.geoPointValue.longitude)===Gt(r.geoPointValue.longitude)}(e,t);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Gt(s.integerValue)===Gt(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){let o=Gt(s.doubleValue),a=Gt(r.doubleValue);return o===a?kf(o)===kf(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return ju(e.arrayValue.values||[],t.arrayValue.values||[],Pr);case 10:return function(s,r){let o=s.mapValue.fields||{},a=r.mapValue.fields||{};if(XL(o)!==XL(a))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Pr(o[l],a[l])))return!1;return!0}(e,t);default:return Ie()}}function Vf(e,t){return(e.values||[]).find(n=>Pr(n,t))!==void 0}function zu(e,t){if(e===t)return 0;let n=Nl(e),i=Nl(t);if(n!==i)return at(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return at(e.booleanValue,t.booleanValue);case 2:return function(r,o){let a=Gt(r.integerValue||r.doubleValue),l=Gt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return ZL(e.timestampValue,t.timestampValue);case 4:return ZL(Lf(e),Lf(t));case 5:return at(e.stringValue,t.stringValue);case 6:return function(r,o){let a=_a(r),l=_a(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(r,o){let a=r.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){let u=at(a[c],l[c]);if(u!==0)return u}return at(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(r,o){let a=at(Gt(r.latitude),Gt(o.latitude));return a!==0?a:at(Gt(r.longitude),Gt(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(r,o){let a=r.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){let u=zu(a[c],l[c]);if(u)return u}return at(a.length,l.length)}(e.arrayValue,t.arrayValue);case 10:return function(r,o){if(r===mC.mapValue&&o===mC.mapValue)return 0;if(r===mC.mapValue)return 1;if(o===mC.mapValue)return-1;let a=r.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){let f=at(l[h],u[h]);if(f!==0)return f;let p=zu(a[l[h]],c[u[h]]);if(p!==0)return p}return at(l.length,u.length)}(e.mapValue,t.mapValue);default:throw Ie()}}function ZL(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return at(e,t);let n=po(e),i=po(t),s=at(n.seconds,i.seconds);return s!==0?s:at(n.nanos,i.nanos)}function $u(e){return nD(e)}function nD(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){let i=po(n);return`time(${i.seconds},${i.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return _a(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return we.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let i="[",s=!0;for(let r of n.values||[])s?s=!1:i+=",",i+=nD(r);return i+"]"}(e.arrayValue):"mapValue"in e?function(n){let i=Object.keys(n.fields||{}).sort(),s="{",r=!0;for(let o of i)r?r=!1:s+=",",s+=`${o}:${nD(n.fields[o])}`;return s+"}"}(e.mapValue):Ie()}function eV(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function iD(e){return!!e&&"integerValue"in e}function FT(e){return!!e&&"arrayValue"in e}function tV(e){return!!e&&"nullValue"in e}function nV(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function CC(e){return!!e&&"mapValue"in e}function Ff(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return Gl(e.mapValue.fields,(n,i)=>t.mapValue.fields[n]=Ff(i)),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ff(e.arrayValue.values[n]);return t}return Object.assign({},e)}function FV(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var $i=class e{constructor(t){this.value=t}static empty(){return new e({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!CC(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ff(n)}setAll(t){let n=qi.emptyPath(),i={},s=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let l=this.getFieldsMap(n);this.applyChanges(l,i,s),i={},s=[],n=a.popLast()}o?i[a.lastSegment()]=Ff(o):s.push(a.lastSegment())});let r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(t){let n=this.field(t.popLast());CC(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Pr(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let s=n.mapValue.fields[t.get(i)];CC(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,i){Gl(n,(s,r)=>t[s]=r);for(let s of i)delete t[s]}clone(){return new e(Ff(this.value))}};function xV(e){let t=[];return Gl(e.fields,(n,i)=>{let s=new qi([n]);if(CC(i)){let r=xV(i.mapValue).fields;if(r.length===0)t.push(s);else for(let o of r)t.push(s.child(o))}else t.push(s)}),new ms(t)}var qs=class e{constructor(t,n,i,s,r,o,a){this.key=t,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(t){return new e(t,0,xe.min(),xe.min(),xe.min(),$i.empty(),0)}static newFoundDocument(t,n,i,s){return new e(t,1,n,xe.min(),i,s,0)}static newNoDocument(t,n){return new e(t,2,n,xe.min(),xe.min(),$i.empty(),0)}static newUnknownDocument(t,n){return new e(t,3,n,xe.min(),xe.min(),$i.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(xe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=$i.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=$i.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xe.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var qu=class{constructor(t,n){this.position=t,this.inclusive=n}};function iV(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){let r=t[s],o=e.position[s];if(r.field.isKeyField()?i=we.comparator(we.fromName(o.referenceValue),n.key):i=zu(o,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function sV(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Pr(e.position[n],t.position[n]))return!1;return!0}var kl=class{constructor(t,n="asc"){this.field=t,this.dir=n}};function DZ(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var TC=class{},nn=class e extends TC{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new rD(t,n,i):n==="array-contains"?new lD(t,i):n==="in"?new cD(t,i):n==="not-in"?new uD(t,i):n==="array-contains-any"?new dD(t,i):new e(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new oD(t,i):new aD(t,i)}matches(t){let n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(zu(n,this.value)):n!==null&&Nl(this.value)===Nl(n)&&this.matchesComparison(zu(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ks=class e extends TC{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new e(t,n)}matches(t){return OV(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function OV(e){return e.op==="and"}function NV(e){return TZ(e)&&OV(e)}function TZ(e){for(let t of e.filters)if(t instanceof Ks)return!1;return!0}function sD(e){if(e instanceof nn)return e.field.canonicalString()+e.op.toString()+$u(e.value);if(NV(e))return e.filters.map(t=>sD(t)).join(",");{let t=e.filters.map(n=>sD(n)).join(",");return`${e.op}(${t})`}}function kV(e,t){return e instanceof nn?function(i,s){return s instanceof nn&&i.op===s.op&&i.field.isEqual(s.field)&&Pr(i.value,s.value)}(e,t):e instanceof Ks?function(i,s){return s instanceof Ks&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,o,a)=>r&&kV(o,s.filters[a]),!0):!1}(e,t):void Ie()}function LV(e){return e instanceof nn?function(n){return`${n.field.canonicalString()} ${n.op} ${$u(n.value)}`}(e):e instanceof Ks?function(n){return n.op.toString()+" {"+n.getFilters().map(LV).join(" ,")+"}"}(e):"Filter"}var rD=class extends nn{constructor(t,n,i){super(t,n,i),this.key=we.fromName(i.referenceValue)}matches(t){let n=we.comparator(t.key,this.key);return this.matchesComparison(n)}},oD=class extends nn{constructor(t,n){super(t,"in",n),this.keys=VV("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}},aD=class extends nn{constructor(t,n){super(t,"not-in",n),this.keys=VV("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}};function VV(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>we.fromName(i.referenceValue))}var lD=class extends nn{constructor(t,n){super(t,"array-contains",n)}matches(t){let n=t.data.field(this.field);return FT(n)&&Vf(n.arrayValue,this.value)}},cD=class extends nn{constructor(t,n){super(t,"in",n)}matches(t){let n=t.data.field(this.field);return n!==null&&Vf(this.value.arrayValue,n)}},uD=class extends nn{constructor(t,n){super(t,"not-in",n)}matches(t){if(Vf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=t.data.field(this.field);return n!==null&&!Vf(this.value.arrayValue,n)}},dD=class extends nn{constructor(t,n){super(t,"array-contains-any",n)}matches(t){let n=t.data.field(this.field);return!(!FT(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Vf(this.value.arrayValue,i))}};var hD=class{constructor(t,n=null,i=[],s=[],r=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=o,this.endAt=a,this.ue=null}};function rV(e,t=null,n=[],i=[],s=null,r=null,o=null){return new hD(e,t,n,i,s,r,o)}function xT(e){let t=Pe(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(i=>sD(i)).join(","),n+="|ob:",n+=t.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),ty(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>$u(i)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>$u(i)).join(",")),t.ue=n}return t.ue}function OT(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!DZ(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!kV(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!sV(e.startAt,t.startAt)&&sV(e.endAt,t.endAt)}function fD(e){return we.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}var ba=class{constructor(t,n=null,i=[],s=[],r=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function RZ(e,t,n,i,s,r,o,a){return new ba(e,t,n,i,s,r,o,a)}function ny(e){return new ba(e)}function oV(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function BV(e){return e.collectionGroup!==null}function xf(e){let t=Pe(e);if(t.ce===null){t.ce=[];let n=new Set;for(let r of t.explicitOrderBy)t.ce.push(r),n.add(r.field.canonicalString());let i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Hn(qi.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(t).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||t.ce.push(new kl(r,i))}),n.has(qi.keyField().canonicalString())||t.ce.push(new kl(qi.keyField(),i))}return t.ce}function Ir(e){let t=Pe(e);return t.le||(t.le=IZ(t,xf(e))),t.le}function IZ(e,t){if(e.limitType==="F")return rV(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{let r=s.dir==="desc"?"asc":"desc";return new kl(s.field,r)});let n=e.endAt?new qu(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new qu(e.startAt.position,e.startAt.inclusive):null;return rV(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function pD(e,t){let n=e.filters.concat([t]);return new ba(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function gD(e,t,n){return new ba(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function iy(e,t){return OT(Ir(e),Ir(t))&&e.limitType===t.limitType}function GV(e){return`${xT(Ir(e))}|lt:${e.limitType}`}function Lu(e){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>LV(s)).join(", ")}]`),ty(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>$u(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>$u(s)).join(",")),`Target(${i})`}(Ir(e))}; limitType=${e.limitType})`}function sy(e,t){return t.isFoundDocument()&&function(i,s){let r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):we.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(e,t)&&function(i,s){for(let r of xf(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(e,t)&&function(i,s){for(let r of i.filters)if(!r.matches(s))return!1;return!0}(e,t)&&function(i,s){return!(i.startAt&&!function(o,a,l){let c=iV(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,xf(i),s)||i.endAt&&!function(o,a,l){let c=iV(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,xf(i),s))}(e,t)}function AZ(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function HV(e){return(t,n)=>{let i=!1;for(let s of xf(e)){let r=MZ(s,t,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function MZ(e,t,n){let i=e.field.isKeyField()?we.comparator(t.key,n.key):function(r,o,a){let l=o.data.field(r),c=a.data.field(r);return l!==null&&c!==null?zu(l,c):Ie()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Ie()}}var Ea=class{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){let n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(let[s,r]of i)if(this.equalsFn(s,t))return r}}has(t){return this.get(t)!==void 0}set(t,n){let i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],t))return void(s[r]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){let n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Gl(this.inner,(n,i)=>{for(let[s,r]of i)t(s,r)})}isEmpty(){return PV(this.inner)}size(){return this.innerSize}};var PZ=new Ht(we.comparator);function go(){return PZ}var UV=new Ht(we.comparator);function Pf(...e){let t=UV;for(let n of e)t=t.insert(n.key,n);return t}function WV(e){let t=UV;return e.forEach((n,i)=>t=t.insert(n,i.overlayedDocument)),t}function Ml(){return Of()}function jV(){return Of()}function Of(){return new Ea(e=>e.toString(),(e,t)=>e.isEqual(t))}var FZ=new Ht(we.comparator),xZ=new Hn(we.comparator);function ze(...e){let t=xZ;for(let n of e)t=t.add(n);return t}var OZ=new Hn(at);function NZ(){return OZ}function zV(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kf(t)?"-0":t}}function $V(e){return{integerValue:""+e}}function kZ(e,t){return yZ(t)?$V(t):zV(e,t)}var Ku=class{constructor(){this._=void 0}};function LZ(e,t,n){return e instanceof Qu?function(s,r){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&MT(r)&&(r=PT(r)),r&&(o.fields.__previous_value__=r),{mapValue:o}}(n,t):e instanceof Da?KV(e,t):e instanceof Ta?QV(e,t):function(s,r){let o=qV(s,r),a=aV(o)+aV(s.Pe);return iD(o)&&iD(s.Pe)?$V(a):zV(s.serializer,a)}(e,t)}function VZ(e,t,n){return e instanceof Da?KV(e,t):e instanceof Ta?QV(e,t):n}function qV(e,t){return e instanceof Yu?function(i){return iD(i)||function(r){return!!r&&"doubleValue"in r}(i)}(t)?t:{integerValue:0}:null}var Qu=class extends Ku{},Da=class extends Ku{constructor(t){super(),this.elements=t}};function KV(e,t){let n=YV(t);for(let i of e.elements)n.some(s=>Pr(s,i))||n.push(i);return{arrayValue:{values:n}}}var Ta=class extends Ku{constructor(t){super(),this.elements=t}};function QV(e,t){let n=YV(t);for(let i of e.elements)n=n.filter(s=>!Pr(s,i));return{arrayValue:{values:n}}}var Yu=class extends Ku{constructor(t,n){super(),this.serializer=t,this.Pe=n}};function aV(e){return Gt(e.integerValue||e.doubleValue)}function YV(e){return FT(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var RC=class{constructor(t,n){this.field=t,this.transform=n}};function BZ(e,t){return e.field.isEqual(t.field)&&function(i,s){return i instanceof Da&&s instanceof Da||i instanceof Ta&&s instanceof Ta?ju(i.elements,s.elements,Pr):i instanceof Yu&&s instanceof Yu?Pr(i.Pe,s.Pe):i instanceof Qu&&s instanceof Qu}(e.transform,t.transform)}var mD=class{constructor(t,n){this.version=t,this.transformResults=n}},ho=class e{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new e}static exists(t){return new e(void 0,t)}static updateTime(t){return new e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function yC(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}var Ju=class{};function JV(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Bf(e.key,ho.none()):new Ll(e.key,e.data,ho.none());{let n=e.data,i=$i.empty(),s=new Hn(qi.comparator);for(let r of t.fields)if(!s.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?i.delete(r):i.set(r,o),s=s.add(r)}return new Fr(e.key,i,new ms(s.toArray()),ho.none())}}function GZ(e,t,n){e instanceof Ll?function(s,r,o){let a=s.value.clone(),l=cV(s.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Fr?function(s,r,o){if(!yC(s.precondition,r))return void r.convertToUnknownDocument(o.version);let a=cV(s.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(XV(s)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(s,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function Nf(e,t,n,i){return e instanceof Ll?function(r,o,a,l){if(!yC(r.precondition,o))return a;let c=r.value.clone(),u=uV(r.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(e,t,n,i):e instanceof Fr?function(r,o,a,l){if(!yC(r.precondition,o))return a;let c=uV(r.fieldTransforms,l,o),u=o.data;return u.setAll(XV(r)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(h=>h.field))}(e,t,n,i):function(r,o,a){return yC(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function HZ(e,t){let n=null;for(let i of e.fieldTransforms){let s=t.data.field(i.field),r=qV(i.transform,s||null);r!=null&&(n===null&&(n=$i.empty()),n.set(i.field,r))}return n||null}function lV(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&ju(i,s,(r,o)=>BZ(r,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Ll=class extends Ju{constructor(t,n,i,s=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}},Fr=class extends Ju{constructor(t,n,i,s,r=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}};function XV(e){let t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=e.data.field(n);t.set(n,i)}}),t}function cV(e,t,n){let i=new Map;vt(e.length===n.length);for(let s=0;s<n.length;s++){let r=e[s],o=r.transform,a=t.data.field(r.field);i.set(r.field,VZ(o,a,n[s]))}return i}function uV(e,t,n){let i=new Map;for(let s of e){let r=s.transform,o=n.data.field(s.field);i.set(s.field,LZ(r,o,t))}return i}var Bf=class extends Ju{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},vD=class extends Ju{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var CD=class{constructor(t,n,i,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(t,n){let i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){let r=this.mutations[s];r.key.isEqual(t.key)&&GZ(r,t,i[s])}}applyToLocalView(t,n){for(let i of this.baseMutations)i.key.isEqual(t.key)&&(n=Nf(i,t,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(t.key)&&(n=Nf(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){let i=jV();return this.mutations.forEach(s=>{let r=t.get(s.key),o=r.overlayedDocument,a=this.applyToLocalView(o,r.mutatedFields);a=n.has(s.key)?null:a;let l=JV(o,a);l!==null&&i.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(xe.min())}),i}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),ze())}isEqual(t){return this.batchId===t.batchId&&ju(this.mutations,t.mutations,(n,i)=>lV(n,i))&&ju(this.baseMutations,t.baseMutations,(n,i)=>lV(n,i))}},yD=class e{constructor(t,n,i,s){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(t,n,i){vt(t.mutations.length===i.length);let s=function(){return FZ}(),r=t.mutations;for(let o=0;o<r.length;o++)s=s.insert(r[o].key,i[o].version);return new e(t,n,i,s)}};var wD=class{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var SD=class{constructor(t,n){this.count=t,this.unchangedNames=n}};var en,Xe;function UZ(e){switch(e){default:return Ie();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function ZV(e){if(e===void 0)return fo("GRPC error has no .code"),z.UNKNOWN;switch(e){case en.OK:return z.OK;case en.CANCELLED:return z.CANCELLED;case en.UNKNOWN:return z.UNKNOWN;case en.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case en.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case en.INTERNAL:return z.INTERNAL;case en.UNAVAILABLE:return z.UNAVAILABLE;case en.UNAUTHENTICATED:return z.UNAUTHENTICATED;case en.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case en.NOT_FOUND:return z.NOT_FOUND;case en.ALREADY_EXISTS:return z.ALREADY_EXISTS;case en.PERMISSION_DENIED:return z.PERMISSION_DENIED;case en.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case en.ABORTED:return z.ABORTED;case en.OUT_OF_RANGE:return z.OUT_OF_RANGE;case en.UNIMPLEMENTED:return z.UNIMPLEMENTED;case en.DATA_LOSS:return z.DATA_LOSS;default:return Ie()}}(Xe=en||(en={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";var dV=null;function WZ(){return new TextEncoder}var jZ=new wa([4294967295,4294967295],0);function hV(e){let t=WZ().encode(e),n=new NE;return n.update(t),new Uint8Array(n.digest())}function fV(e){let t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new wa([n,i],0),new wa([s,r],0)]}var _D=class e{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Pl(`Invalid padding: ${n}`);if(i<0)throw new Pl(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Pl(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new Pl(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=wa.fromNumber(this.Ie)}Ee(t,n,i){let s=t.add(n.multiply(wa.fromNumber(i)));return s.compare(jZ)===1&&(s=new wa([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;let n=hV(t),[i,s]=fV(n);for(let r=0;r<this.hashCount;r++){let o=this.Ee(i,s,r);if(!this.de(o))return!1}return!0}static create(t,n,i){let s=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),o=new e(r,s,n);return i.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;let n=hV(t),[i,s]=fV(n);for(let r=0;r<this.hashCount;r++){let o=this.Ee(i,s,r);this.Ae(o)}}Ae(t){let n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}},Pl=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var IC=class e{constructor(t,n,i,s,r){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,n,i){let s=new Map;return s.set(t,Gf.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new e(xe.min(),s,new Ht(at),go(),ze())}},Gf=class e{constructor(t,n,i,s,r){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new e(i,n,ze(),ze(),ze())}};var Hu=class{constructor(t,n,i,s){this.Re=t,this.removedTargetIds=n,this.key=i,this.Ve=s}},AC=class{constructor(t,n){this.targetId=t,this.me=n}},MC=class{constructor(t,n,i=Un.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=s}},PC=class{constructor(){this.fe=0,this.ge=gV(),this.pe=Un.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=ze(),n=ze(),i=ze();return this.ge.forEach((s,r)=>{switch(r){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:Ie()}}),new Gf(this.pe,this.ye,t,n,i)}ve(){this.we=!1,this.ge=gV()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,vt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},bD=class{constructor(t){this.Le=t,this.Be=new Map,this.ke=go(),this.qe=pV(),this.Qe=new Ht(at)}Ke(t){for(let n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(let n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{let i=this.Ge(n);switch(t.state){case 0:this.ze(n)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(t.resumeToken));break;default:Ie()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((i,s)=>{this.ze(s)&&n(s)})}He(t){let n=t.targetId,i=t.me.count,s=this.Je(n);if(s){let r=s.target;if(fD(r))if(i===0){let o=new we(r.path);this.Ue(n,o,qs.newNoDocument(o,xe.min()))}else vt(i===1);else{let o=this.Ye(n);if(o!==i){let a=this.Ze(t),l=a?this.Xe(a,t,o):1;if(l!==0){this.je(n);let c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}dV?.et(function(u,h,f,p,v){var y,C,E,T,R,F;let $={localCacheCount:u,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},k=h.unchangedNames;return k&&($.bloomFilter={applied:v===0,hashCount:(y=k?.hashCount)!==null&&y!==void 0?y:0,bitmapLength:(T=(E=(C=k?.bits)===null||C===void 0?void 0:C.bitmap)===null||E===void 0?void 0:E.length)!==null&&T!==void 0?T:0,padding:(F=(R=k?.bits)===null||R===void 0?void 0:R.padding)!==null&&F!==void 0?F:0,mightContain:b=>{var S;return(S=p?.mightContain(b))!==null&&S!==void 0&&S}}),$}(o,t.me,this.Le.tt(),a,l))}}}}Ze(t){let n=t.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n,o,a;try{o=_a(i).toUint8Array()}catch(l){if(l instanceof EC)return Wu("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new _D(o,s,r)}catch(l){return Wu(l instanceof Pl?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(t,n,i){return n.me.count===i-this.nt(t,n.targetId)?0:2}nt(t,n){let i=this.Le.getRemoteKeysForTarget(n),s=0;return i.forEach(r=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,r,null),s++)}),s}rt(t){let n=new Map;this.Be.forEach((r,o)=>{let a=this.Je(o);if(a){if(r.current&&fD(a.target)){let l=new we(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,qs.newNoDocument(l,t))}r.be&&(n.set(o,r.Ce()),r.ve())}});let i=ze();this.qe.forEach((r,o)=>{let a=!0;o.forEachWhile(l=>{let c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(r))}),this.ke.forEach((r,o)=>o.setReadTime(t));let s=new IC(t,n,this.Qe,this.ke,i);return this.ke=go(),this.qe=pV(),this.Qe=new Ht(at),s}$e(t,n){if(!this.ze(t))return;let i=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,i){if(!this.ze(t))return;let s=this.Ge(t);this.it(t,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(t){this.Be.delete(t)}Ye(t){let n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new PC,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Hn(at),this.qe=this.qe.insert(t,n)),n}ze(t){let n=this.Je(t)!==null;return n||he("WatchChangeAggregator","Detected inactive target",t),n}Je(t){let n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new PC),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}};function pV(){return new Ht(we.comparator)}function gV(){return new Ht(we.comparator)}var zZ={asc:"ASCENDING",desc:"DESCENDING"},$Z={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qZ={and:"AND",or:"OR"},ED=class{constructor(t,n){this.databaseId=t,this.useProto3Json=n}};function DD(e,t){return e.useProto3Json||ty(t)?t:{value:t}}function FC(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function eB(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function KZ(e,t){return FC(e,t.toTimestamp())}function Ar(e){return vt(!!e),xe.fromTimestamp(function(n){let i=po(n);return new sn(i.seconds,i.nanos)}(e))}function NT(e,t){return TD(e,t).canonicalString()}function TD(e,t){let n=function(s){return new Pt(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function tB(e){let t=Pt.fromString(e);return vt(oB(t)),t}function RD(e,t){return NT(e.databaseId,t.path)}function UE(e,t){let n=tB(t);if(n.get(1)!==e.databaseId.projectId)throw new ce(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ce(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new we(iB(n))}function nB(e,t){return NT(e.databaseId,t)}function QZ(e){let t=tB(e);return t.length===4?Pt.emptyPath():iB(t)}function ID(e){return new Pt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function iB(e){return vt(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function mV(e,t,n){return{name:RD(e,t),fields:n.value.mapValue.fields}}function YZ(e,t){let n;if("targetChange"in t){t.targetChange;let i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ie()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=function(c,u){return c.useProto3Json?(vt(u===void 0||typeof u=="string"),Un.fromBase64String(u||"")):(vt(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Un.fromUint8Array(u||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(c){let u=c.code===void 0?z.UNKNOWN:ZV(c.code);return new ce(u,c.message||"")}(o);n=new MC(i,s,r,a||null)}else if("documentChange"in t){t.documentChange;let i=t.documentChange;i.document,i.document.name,i.document.updateTime;let s=UE(e,i.document.name),r=Ar(i.document.updateTime),o=i.document.createTime?Ar(i.document.createTime):xe.min(),a=new $i({mapValue:{fields:i.document.fields}}),l=qs.newFoundDocument(s,r,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new Hu(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;let i=t.documentDelete;i.document;let s=UE(e,i.document),r=i.readTime?Ar(i.readTime):xe.min(),o=qs.newNoDocument(s,r),a=i.removedTargetIds||[];n=new Hu([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;let i=t.documentRemove;i.document;let s=UE(e,i.document),r=i.removedTargetIds||[];n=new Hu([],r,s,null)}else{if(!("filter"in t))return Ie();{t.filter;let i=t.filter;i.targetId;let{count:s=0,unchangedNames:r}=i,o=new SD(s,r),a=i.targetId;n=new AC(a,o)}}return n}function JZ(e,t){let n;if(t instanceof Ll)n={update:mV(e,t.key,t.value)};else if(t instanceof Bf)n={delete:RD(e,t.key)};else if(t instanceof Fr)n={update:mV(e,t.key,t.data),updateMask:oee(t.fieldMask)};else{if(!(t instanceof vD))return Ie();n={verify:RD(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(i=>function(r,o){let a=o.transform;if(a instanceof Qu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Da)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ta)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Yu)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Ie()}(0,i))),t.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:KZ(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Ie()}(e,t.precondition)),n}function XZ(e,t){return e&&e.length>0?(vt(t!==void 0),e.map(n=>function(s,r){let o=s.updateTime?Ar(s.updateTime):Ar(r);return o.isEqual(xe.min())&&(o=Ar(r)),new mD(o,s.transformResults||[])}(n,t))):[]}function ZZ(e,t){return{documents:[nB(e,t.path)]}}function eee(e,t){let n={structuredQuery:{}},i=t.path,s;t.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=nB(e,s);let r=function(c){if(c.length!==0)return rB(Ks.create(c,"and"))}(t.filters);r&&(n.structuredQuery.where=r);let o=function(c){if(c.length!==0)return c.map(u=>function(f){return{field:Vu(f.field),direction:iee(f.dir)}}(u))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);let a=DD(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{_t:n,parent:s}}function tee(e){let t=QZ(e.parent),n=e.structuredQuery,i=n.from?n.from.length:0,s=null;if(i>0){vt(i===1);let u=n.from[0];u.allDescendants?s=u.collectionId:t=t.child(u.collectionId)}let r=[];n.where&&(r=function(h){let f=sB(h);return f instanceof Ks&&NV(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(v){return new kl(Bu(v.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,ty(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(h){let f=!!h.before,p=h.values||[];return new qu(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(h){let f=!h.before,p=h.values||[];return new qu(p,f)}(n.endAt)),RZ(t,s,o,r,a,"F",l,c)}function nee(e,t){let n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function sB(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=Bu(n.unaryFilter.field);return nn.create(i,"==",{doubleValue:NaN});case"IS_NULL":let s=Bu(n.unaryFilter.field);return nn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let r=Bu(n.unaryFilter.field);return nn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Bu(n.unaryFilter.field);return nn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ie()}}(e):e.fieldFilter!==void 0?function(n){return nn.create(Bu(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Ks.create(n.compositeFilter.filters.map(i=>sB(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ie()}}(n.compositeFilter.op))}(e):Ie()}function iee(e){return zZ[e]}function see(e){return $Z[e]}function ree(e){return qZ[e]}function Vu(e){return{fieldPath:e.canonicalString()}}function Bu(e){return qi.fromServerFormat(e.fieldPath)}function rB(e){return e instanceof nn?function(n){if(n.op==="=="){if(nV(n.value))return{unaryFilter:{field:Vu(n.field),op:"IS_NAN"}};if(tV(n.value))return{unaryFilter:{field:Vu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(nV(n.value))return{unaryFilter:{field:Vu(n.field),op:"IS_NOT_NAN"}};if(tV(n.value))return{unaryFilter:{field:Vu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vu(n.field),op:see(n.op),value:n.value}}}(e):e instanceof Ks?function(n){let i=n.getFilters().map(s=>rB(s));return i.length===1?i[0]:{compositeFilter:{op:ree(n.op),filters:i}}}(e):Ie()}function oee(e){let t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function oB(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}var Hf=class e{constructor(t,n,i,s,r=xe.min(),o=xe.min(),a=Un.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var AD=class{constructor(t){this.ct=t}};function aee(e){let t=tee({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?gD(t,t.limit,"L"):t}var xC=class{constructor(){}It(t,n){this.Tt(t,n),n.Et()}Tt(t,n){if("nullValue"in t)this.dt(n,5);else if("booleanValue"in t)this.dt(n,10),n.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(n,15),n.At(Gt(t.integerValue));else if("doubleValue"in t){let i=Gt(t.doubleValue);isNaN(i)?this.dt(n,13):(this.dt(n,15),kf(i)?n.At(0):n.At(i))}else if("timestampValue"in t){let i=t.timestampValue;this.dt(n,20),typeof i=="string"&&(i=po(i)),n.Rt(`${i.seconds||""}`),n.At(i.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,n),this.ft(n);else if("bytesValue"in t)this.dt(n,30),n.gt(_a(t.bytesValue)),this.ft(n);else if("referenceValue"in t)this.yt(t.referenceValue,n);else if("geoPointValue"in t){let i=t.geoPointValue;this.dt(n,45),n.At(i.latitude||0),n.At(i.longitude||0)}else"mapValue"in t?FV(t)?this.dt(n,Number.MAX_SAFE_INTEGER):(this.wt(t.mapValue,n),this.ft(n)):"arrayValue"in t?(this.St(t.arrayValue,n),this.ft(n)):Ie()}Vt(t,n){this.dt(n,25),this.bt(t,n)}bt(t,n){n.Rt(t)}wt(t,n){let i=t.fields||{};this.dt(n,55);for(let s of Object.keys(i))this.Vt(s,n),this.Tt(i[s],n)}St(t,n){let i=t.values||[];this.dt(n,50);for(let s of i)this.Tt(s,n)}yt(t,n){this.dt(n,37),we.fromName(t).path.forEach(i=>{this.dt(n,60),this.bt(i,n)})}dt(t,n){t.At(n)}ft(t){t.At(2)}};xC.Dt=new xC;var MD=class{constructor(){this.an=new PD}addToCollectionParentIndex(t,n){return this.an.add(n),J.resolve()}getCollectionParents(t,n){return J.resolve(this.an.getEntries(n))}addFieldIndex(t,n){return J.resolve()}deleteFieldIndex(t,n){return J.resolve()}deleteAllFieldIndexes(t){return J.resolve()}createTargetIndexes(t,n){return J.resolve()}getDocumentsMatchingTarget(t,n){return J.resolve(null)}getIndexType(t,n){return J.resolve(0)}getFieldIndexes(t,n){return J.resolve([])}getNextCollectionGroupToUpdate(t){return J.resolve(null)}getMinOffset(t,n){return J.resolve(Ol.min())}getMinOffsetFromCollectionGroup(t,n){return J.resolve(Ol.min())}updateCollectionGroup(t,n,i){return J.resolve()}updateIndexEntries(t,n){return J.resolve()}},PD=class{constructor(){this.index={}}add(t){let n=t.lastSegment(),i=t.popLast(),s=this.index[n]||new Hn(Pt.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(t){let n=t.lastSegment(),i=t.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(t){return(this.index[t]||new Hn(Pt.comparator)).toArray()}};var lNe=new Uint8Array(0);var Dr=class e{constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Dr.DEFAULT_COLLECTION_PERCENTILE=10,Dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dr.DEFAULT=new Dr(41943040,Dr.DEFAULT_COLLECTION_PERCENTILE,Dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dr.DISABLED=new Dr(-1,0,0);var Uf=class e{constructor(t){this.Nn=t}next(){return this.Nn+=2,this.Nn}static Ln(){return new e(0)}static Bn(){return new e(-1)}};var FD=class{constructor(){this.changes=new Ea(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,qs.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?J.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var xD=class{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}};var OD=class{constructor(t,n,i,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(i!==null&&Nf(i.mutation,s,ms.empty(),sn.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.getLocalViewOfDocuments(t,i,ze()).next(()=>i))}getLocalViewOfDocuments(t,n,i=ze()){let s=Ml();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,i).next(r=>{let o=Pf();return r.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){let i=Ml();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,ze()))}populateOverlays(t,n,i){let s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(t,s).next(r=>{r.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,i,s){let r=go(),o=Of(),a=function(){return Of()}();return n.forEach((l,c)=>{let u=i.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof Fr)?r=r.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Nf(u.mutation,c,u.mutation.getFieldMask(),sn.now())):o.set(c.key,ms.empty())}),this.recalculateAndSaveOverlays(t,r).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new xD(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(t,n){let i=Of(),s=new Ht((o,a)=>o-a),r=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(let a of o)a.keys().forEach(l=>{let c=n.get(l);if(c===null)return;let u=i.get(l)||ms.empty();u=a.applyToLocalView(c,u),i.set(l,u);let h=(s.get(a.batchId)||ze()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{let o=[],a=s.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),c=l.key,u=l.value,h=jV();u.forEach(f=>{if(!r.has(f)){let p=JV(n.get(f),i.get(f));p!==null&&h.set(f,p),r=r.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,h))}return J.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,n,i,s){return function(o){return we.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):BV(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,s):this.getDocumentsMatchingCollectionQuery(t,n,i,s)}getNextDocuments(t,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,s).next(r=>{let o=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,s-r.size):J.resolve(Ml()),a=-1,l=r;return o.next(c=>J.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),r.get(u)?J.resolve():this.remoteDocumentCache.getEntry(t,u).next(f=>{l=l.insert(u,f)}))).next(()=>this.populateOverlays(t,c,r)).next(()=>this.computeViews(t,l,c,ze())).next(u=>({batchId:a,changes:WV(u)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new we(n)).next(i=>{let s=Pf();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,i,s){let r=n.collectionGroup,o=Pf();return this.indexManager.getCollectionParents(t,r).next(a=>J.forEach(a,l=>{let c=function(h,f){return new ba(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(r));return this.getDocumentsMatchingCollectionQuery(t,c,i,s).next(u=>{u.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,r,s))).next(o=>{r.forEach((l,c)=>{let u=c.getKey();o.get(u)===null&&(o=o.insert(u,qs.newInvalidDocument(u)))});let a=Pf();return o.forEach((l,c)=>{let u=r.get(l);u!==void 0&&Nf(u.mutation,c,ms.empty(),sn.now()),sy(n,c)&&(a=a.insert(l,c))}),a})}};var ND=class{constructor(t){this.serializer=t,this.lr=new Map,this.hr=new Map}getBundleMetadata(t,n){return J.resolve(this.lr.get(n))}saveBundleMetadata(t,n){return this.lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Ar(s.createTime)}}(n)),J.resolve()}getNamedQuery(t,n){return J.resolve(this.hr.get(n))}saveNamedQuery(t,n){return this.hr.set(n.name,function(s){return{name:s.name,query:aee(s.bundledQuery),readTime:Ar(s.readTime)}}(n)),J.resolve()}};var kD=class{constructor(){this.overlays=new Ht(we.comparator),this.Pr=new Map}getOverlay(t,n){return J.resolve(this.overlays.get(n))}getOverlays(t,n){let i=Ml();return J.forEach(n,s=>this.getOverlay(t,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(t,n,i){return i.forEach((s,r)=>{this.ht(t,n,r)}),J.resolve()}removeOverlaysForBatchId(t,n,i){let s=this.Pr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.Pr.delete(i)),J.resolve()}getOverlaysForCollection(t,n,i){let s=Ml(),r=n.length+1,o=new we(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===r&&l.largestBatchId>i&&s.set(l.getKey(),l)}return J.resolve(s)}getOverlaysForCollectionGroup(t,n,i,s){let r=new Ht((c,u)=>c-u),o=this.overlays.getIterator();for(;o.hasNext();){let c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>i){let u=r.get(c.largestBatchId);u===null&&(u=Ml(),r=r.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}let a=Ml(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return J.resolve(a)}ht(t,n,i){let s=this.overlays.get(i.key);if(s!==null){let o=this.Pr.get(s.largestBatchId).delete(i.key);this.Pr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new wD(n,i));let r=this.Pr.get(n);r===void 0&&(r=ze(),this.Pr.set(n,r)),this.Pr.set(n,r.add(i.key))}};var LD=class{constructor(){this.sessionToken=Un.EMPTY_BYTE_STRING}getSessionToken(t){return J.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,J.resolve()}};var Wf=class{constructor(){this.Ir=new Hn(tn.Tr),this.Er=new Hn(tn.dr)}isEmpty(){return this.Ir.isEmpty()}addReference(t,n){let i=new tn(t,n);this.Ir=this.Ir.add(i),this.Er=this.Er.add(i)}Ar(t,n){t.forEach(i=>this.addReference(i,n))}removeReference(t,n){this.Rr(new tn(t,n))}Vr(t,n){t.forEach(i=>this.removeReference(i,n))}mr(t){let n=new we(new Pt([])),i=new tn(n,t),s=new tn(n,t+1),r=[];return this.Er.forEachInRange([i,s],o=>{this.Rr(o),r.push(o.key)}),r}gr(){this.Ir.forEach(t=>this.Rr(t))}Rr(t){this.Ir=this.Ir.delete(t),this.Er=this.Er.delete(t)}pr(t){let n=new we(new Pt([])),i=new tn(n,t),s=new tn(n,t+1),r=ze();return this.Er.forEachInRange([i,s],o=>{r=r.add(o.key)}),r}containsKey(t){let n=new tn(t,0),i=this.Ir.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}},tn=class{constructor(t,n){this.key=t,this.yr=n}static Tr(t,n){return we.comparator(t.key,n.key)||at(t.yr,n.yr)}static dr(t,n){return at(t.yr,n.yr)||we.comparator(t.key,n.key)}};var VD=class{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.wr=1,this.Sr=new Hn(tn.Tr)}checkEmpty(t){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,s){let r=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new CD(r,n,i,s);this.mutationQueue.push(o);for(let a of s)this.Sr=this.Sr.add(new tn(a.key,r)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return J.resolve(o)}lookupMutationBatch(t,n){return J.resolve(this.br(n))}getNextMutationBatchAfterBatchId(t,n){let i=n+1,s=this.Dr(i),r=s<0?0:s;return J.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?-1:this.wr-1)}getAllMutationBatches(t){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){let i=new tn(n,0),s=new tn(n,Number.POSITIVE_INFINITY),r=[];return this.Sr.forEachInRange([i,s],o=>{let a=this.br(o.yr);r.push(a)}),J.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new Hn(at);return n.forEach(s=>{let r=new tn(s,0),o=new tn(s,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([r,o],a=>{i=i.add(a.yr)})}),J.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(t,n){let i=n.path,s=i.length+1,r=i;we.isDocumentKey(r)||(r=r.child(""));let o=new tn(new we(r),0),a=new Hn(at);return this.Sr.forEachWhile(l=>{let c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.yr)),!0)},o),J.resolve(this.Cr(a))}Cr(t){let n=[];return t.forEach(i=>{let s=this.br(i);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){vt(this.vr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Sr;return J.forEach(n.mutations,s=>{let r=new tn(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.Sr=i})}xn(t){}containsKey(t,n){let i=new tn(n,0),s=this.Sr.firstAfterOrEqual(i);return J.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,J.resolve()}vr(t,n){return this.Dr(t)}Dr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}br(t){let n=this.Dr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var BD=class{constructor(t){this.Fr=t,this.docs=function(){return new Ht(we.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){let i=n.key,s=this.docs.get(i),r=s?s.size:0,o=this.Fr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){let n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){let i=this.docs.get(n);return J.resolve(i?i.document.mutableCopy():qs.newInvalidDocument(n))}getEntries(t,n){let i=go();return n.forEach(s=>{let r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():qs.newInvalidDocument(s))}),J.resolve(i)}getDocumentsMatchingQuery(t,n,i,s){let r=go(),o=n.path,a=new we(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||mZ(gZ(u),i)<=0||(s.has(u.key)||sy(n,u))&&(r=r.insert(u.key,u.mutableCopy()))}return J.resolve(r)}getAllFromCollectionGroup(t,n,i,s){Ie()}Mr(t,n){return J.forEach(this.docs,i=>n(i))}newChangeBuffer(t){return new GD(this)}getSize(t){return J.resolve(this.size)}},GD=class extends FD{constructor(t){super(),this.ur=t}applyChanges(t){let n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.ur.addEntry(t,s)):this.ur.removeEntry(i)}),J.waitFor(n)}getFromCache(t,n){return this.ur.getEntry(t,n)}getAllFromCache(t,n){return this.ur.getEntries(t,n)}};var HD=class{constructor(t){this.persistence=t,this.Or=new Ea(n=>xT(n),OT),this.lastRemoteSnapshotVersion=xe.min(),this.highestTargetId=0,this.Nr=0,this.Lr=new Wf,this.targetCount=0,this.Br=Uf.Ln()}forEachTarget(t,n){return this.Or.forEach((i,s)=>n(s)),J.resolve()}getLastRemoteSnapshotVersion(t){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return J.resolve(this.Nr)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Nr&&(this.Nr=n),J.resolve()}Qn(t){this.Or.set(t.target,t);let n=t.targetId;n>this.highestTargetId&&(this.Br=new Uf(n),this.highestTargetId=n),t.sequenceNumber>this.Nr&&(this.Nr=t.sequenceNumber)}addTargetData(t,n){return this.Qn(n),this.targetCount+=1,J.resolve()}updateTargetData(t,n){return this.Qn(n),J.resolve()}removeTargetData(t,n){return this.Or.delete(n.target),this.Lr.mr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(t,n,i){let s=0,r=[];return this.Or.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Or.delete(o),r.push(this.removeMatchingKeysForTargetId(t,a.targetId)),s++)}),J.waitFor(r).next(()=>s)}getTargetCount(t){return J.resolve(this.targetCount)}getTargetData(t,n){let i=this.Or.get(n)||null;return J.resolve(i)}addMatchingKeys(t,n,i){return this.Lr.Ar(n,i),J.resolve()}removeMatchingKeys(t,n,i){this.Lr.Vr(n,i);let s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(o=>{r.push(s.markPotentiallyOrphaned(t,o))}),J.waitFor(r)}removeMatchingKeysForTargetId(t,n){return this.Lr.mr(n),J.resolve()}getMatchingKeysForTargetId(t,n){let i=this.Lr.pr(n);return J.resolve(i)}containsKey(t,n){return J.resolve(this.Lr.containsKey(n))}};var UD=class{constructor(t,n){this.kr={},this.overlays={},this.qr=new MV(0),this.Qr=!1,this.Qr=!0,this.Kr=new LD,this.referenceDelegate=t(this),this.$r=new HD(this),this.indexManager=new MD,this.remoteDocumentCache=function(s){return new BD(s)}(i=>this.referenceDelegate.Ur(i)),this.serializer=new AD(n),this.Wr=new ND(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new kD,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.kr[t.toKey()];return i||(i=new VD(n,this.referenceDelegate),this.kr[t.toKey()]=i),i}getGlobalsCache(){return this.Kr}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Wr}runTransaction(t,n,i){he("MemoryPersistence","Starting transaction:",t);let s=new WD(this.qr.next());return this.referenceDelegate.Gr(),i(s).next(r=>this.referenceDelegate.zr(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}jr(t,n){return J.or(Object.values(this.kr).map(i=>()=>i.containsKey(t,n)))}},WD=class extends eD{constructor(t){super(),this.currentSequenceNumber=t}},jD=class e{constructor(t){this.persistence=t,this.Hr=new Wf,this.Jr=null}static Yr(t){return new e(t)}get Zr(){if(this.Jr)return this.Jr;throw Ie()}addReference(t,n,i){return this.Hr.addReference(i,n),this.Zr.delete(i.toString()),J.resolve()}removeReference(t,n,i){return this.Hr.removeReference(i,n),this.Zr.add(i.toString()),J.resolve()}markPotentiallyOrphaned(t,n){return this.Zr.add(n.toString()),J.resolve()}removeTarget(t,n){this.Hr.mr(n.targetId).forEach(s=>this.Zr.add(s.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(r=>this.Zr.add(r.toString()))}).next(()=>i.removeTargetData(t,n))}Gr(){this.Jr=new Set}zr(t){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.Zr,i=>{let s=we.fromPath(i);return this.Xr(t,s).next(r=>{r||n.removeEntry(s,xe.min())})}).next(()=>(this.Jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Xr(t,n).next(i=>{i?this.Zr.delete(n.toString()):this.Zr.add(n.toString())})}Ur(t){return 0}Xr(t,n){return J.or([()=>J.resolve(this.Hr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.jr(t,n)])}};var zD=class e{constructor(t,n,i,s){this.targetId=t,this.fromCache=n,this.Ki=i,this.$i=s}static Ui(t,n){let i=ze(),s=ze();for(let r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new e(t,n.fromCache,i,s)}};var $D=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var qD=class{constructor(){this.Wi=!1,this.Gi=!1,this.zi=100,this.ji=function(){return xP()?8:CZ(PP())>0?6:4}()}initialize(t,n){this.Hi=t,this.indexManager=n,this.Wi=!0}getDocumentsMatchingQuery(t,n,i,s){let r={result:null};return this.Ji(t,n).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.Yi(t,n,s,i).next(o=>{r.result=o})}).next(()=>{if(r.result)return;let o=new $D;return this.Zi(t,n,o).next(a=>{if(r.result=a,this.Gi)return this.Xi(t,n,o,a.size)})}).next(()=>r.result)}Xi(t,n,i,s){return i.documentReadCount<this.zi?(Mf()<=Fi.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Lu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.zi,"documents"),J.resolve()):(Mf()<=Fi.DEBUG&&he("QueryEngine","Query:",Lu(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ji*s?(Mf()<=Fi.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Lu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Ir(n))):J.resolve())}Ji(t,n){if(oV(n))return J.resolve(null);let i=Ir(n);return this.indexManager.getIndexType(t,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=gD(n,null,"F"),i=Ir(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next(r=>{let o=ze(...r);return this.Hi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{let c=this.es(n,a);return this.ts(n,c,o,l.readTime)?this.Ji(t,gD(n,null,"F")):this.ns(t,c,n,l)}))})))}Yi(t,n,i,s){return oV(n)||s.isEqual(xe.min())?J.resolve(null):this.Hi.getDocuments(t,i).next(r=>{let o=this.es(n,r);return this.ts(n,o,i,s)?J.resolve(null):(Mf()<=Fi.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Lu(n)),this.ns(t,o,n,pZ(s,-1)).next(a=>a))})}es(t,n){let i=new Hn(HV(t));return n.forEach((s,r)=>{sy(t,r)&&(i=i.add(r))}),i}ts(t,n,i,s){if(t.limit===null)return!1;if(i.size!==n.size)return!0;let r=t.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Zi(t,n,i){return Mf()<=Fi.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Lu(n)),this.Hi.getDocumentsMatchingQuery(t,n,Ol.min(),i)}ns(t,n,i,s){return this.Hi.getDocumentsMatchingQuery(t,i,s).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}};var KD=class{constructor(t,n,i,s){this.persistence=t,this.rs=n,this.serializer=s,this.ss=new Ht(at),this.os=new Ea(r=>xT(r),OT),this._s=new Map,this.us=t.getRemoteDocumentCache(),this.$r=t.getTargetCache(),this.Wr=t.getBundleCache(),this.cs(i)}cs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new OD(this.us,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.us.setIndexManager(this.indexManager),this.rs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ss))}};function lee(e,t,n,i){return new KD(e,t,n,i)}function aB(e,t){return x(this,null,function*(){let n=Pe(e);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.cs(t),n.mutationQueue.getAllMutationBatches(i))).next(r=>{let o=[],a=[],l=ze();for(let c of s){o.push(c.batchId);for(let u of c.mutations)l=l.add(u.key)}for(let c of r){a.push(c.batchId);for(let u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(i,l).next(c=>({ls:c,removedBatchIds:o,addedBatchIds:a}))})})})}function cee(e,t){let n=Pe(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let s=t.batch.keys(),r=n.us.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){let h=c.batch,f=h.keys(),p=J.resolve();return f.forEach(v=>{p=p.next(()=>u.getEntry(l,v)).next(y=>{let C=c.docVersions.get(v);vt(C!==null),y.version.compareTo(C)<0&&(h.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,i,t,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=ze();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(t))).next(()=>n.localDocuments.getDocuments(i,s))})}function lB(e){let t=Pe(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.$r.getLastRemoteSnapshotVersion(n))}function uee(e,t){let n=Pe(e),i=t.snapshotVersion,s=n.ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{let o=n.us.newChangeBuffer({trackRemovals:!0});s=n.ss;let a=[];t.targetChanges.forEach((u,h)=>{let f=s.get(h);if(!f)return;a.push(n.$r.removeMatchingKeys(r,u.removedDocuments,h).next(()=>n.$r.addMatchingKeys(r,u.addedDocuments,h)));let p=f.withSequenceNumber(r.currentSequenceNumber);t.targetMismatches.get(h)!==null?p=p.withResumeToken(Un.EMPTY_BYTE_STRING,xe.min()).withLastLimboFreeSnapshotVersion(xe.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,i)),s=s.insert(h,p),function(y,C,E){return y.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,p,u)&&a.push(n.$r.updateTargetData(r,p))});let l=go(),c=ze();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,u))}),a.push(dee(r,o,t.documentUpdates).next(u=>{l=u.hs,c=u.Ps})),!i.isEqual(xe.min())){let u=n.$r.getLastRemoteSnapshotVersion(r).next(h=>n.$r.setTargetsMetadata(r,r.currentSequenceNumber,i));a.push(u)}return J.waitFor(a).next(()=>o.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,l,c)).next(()=>l)}).then(r=>(n.ss=s,r))}function dee(e,t,n){let i=ze(),s=ze();return n.forEach(r=>i=i.add(r)),t.getEntries(e,i).next(r=>{let o=go();return n.forEach((a,l)=>{let c=r.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(xe.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):he("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{hs:o,Ps:s}})}function hee(e,t){let n=Pe(e);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function fee(e,t){let n=Pe(e);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.$r.getTargetData(i,t).next(r=>r?(s=r,J.resolve(s)):n.$r.allocateTargetId(i).next(o=>(s=new Hf(t,o,"TargetPurposeListen",i.currentSequenceNumber),n.$r.addTargetData(i,s).next(()=>s))))}).then(i=>{let s=n.ss.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.ss=n.ss.insert(i.targetId,i),n.os.set(t,i.targetId)),i})}function QD(e,t,n){return x(this,null,function*(){let i=Pe(e),s=i.ss.get(t),r=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",r,o=>i.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!Kf(o))throw o;he("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}i.ss=i.ss.remove(t),i.os.delete(s.target)})}function vV(e,t,n){let i=Pe(e),s=xe.min(),r=ze();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){let h=Pe(l),f=h.os.get(u);return f!==void 0?J.resolve(h.ss.get(f)):h.$r.getTargetData(c,u)}(i,o,Ir(t)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,i.$r.getMatchingKeysForTargetId(o,a.targetId).next(l=>{r=l})}).next(()=>i.rs.getDocumentsMatchingQuery(o,t,n?s:xe.min(),n?r:ze())).next(a=>(pee(i,AZ(t),a),{documents:a,Is:r})))}function pee(e,t,n){let i=e._s.get(t)||xe.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),e._s.set(t,i)}var OC=class{constructor(){this.activeTargetIds=NZ()}Vs(t){this.activeTargetIds=this.activeTargetIds.add(t)}fs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Rs(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}};var YD=class{constructor(){this.io=new OC,this.so={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t){return this.io.Vs(t),this.so[t]||"not-current"}updateQueryState(t,n,i){this.so[t]=n}removeLocalQueryTarget(t){this.io.fs(t)}isLocalQueryTarget(t){return this.io.activeTargetIds.has(t)}clearQueryState(t){delete this.so[t]}getAllActiveQueryTargets(){return this.io.activeTargetIds}isActiveQueryTarget(t){return this.io.activeTargetIds.has(t)}start(){return this.io=new OC,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var JD=class{oo(t){}shutdown(){}};var NC=class{constructor(){this._o=()=>this.ao(),this.uo=()=>this.co(),this.lo=[],this.ho()}oo(t){this.lo.push(t)}shutdown(){window.removeEventListener("online",this._o),window.removeEventListener("offline",this.uo)}ho(){window.addEventListener("online",this._o),window.addEventListener("offline",this.uo)}ao(){he("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.lo)t(0)}co(){he("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.lo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var vC=null;function WE(){return vC===null?vC=function(){return 268435456+Math.round(2147483648*Math.random())}():vC++,"0x"+vC.toString(16)}var gee={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var XD=class{constructor(t){this.Po=t.Po,this.Io=t.Io}To(t){this.Eo=t}Ao(t){this.Ro=t}Vo(t){this.mo=t}onMessage(t){this.fo=t}close(){this.Io()}send(t){this.Po(t)}po(){this.Eo()}yo(){this.Ro()}wo(t){this.mo(t)}So(t){this.fo(t)}};var Gn="WebChannelConnection",ZD=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.bo=i+"://"+n.host,this.Do=`projects/${s}/databases/${r}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${r}`}get vo(){return!1}Fo(n,i,s,r,o){let a=WE(),l=this.Mo(n,i.toUriEncodedString());he("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);let c={"google-cloud-resource-prefix":this.Do,"x-goog-request-params":this.Co};return this.xo(c,r,o),this.Oo(n,l,c,s).then(u=>(he("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Wu("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",s),u})}No(n,i,s,r,o,a){return this.Fo(n,i,s,r,o)}xo(n,i,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+td}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((r,o)=>n[o]=r),s&&s.headers.forEach((r,o)=>n[o]=r)}Mo(n,i){let s=gee[n];return`${this.bo}/v1/${i}:${s}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Oo(t,n,i,s){let r=WE();return new Promise((o,a)=>{let l=new kE;l.setWithCredentials(!0),l.listenOnce(VE.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Af.NO_ERROR:let u=l.getResponseJson();he(Gn,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(u)),o(u);break;case Af.TIMEOUT:he(Gn,`RPC '${t}' ${r} timed out`),a(new ce(z.DEADLINE_EXCEEDED,"Request time out"));break;case Af.HTTP_ERROR:let h=l.getStatus();if(he(Gn,`RPC '${t}' ${r} failed with status:`,h,"response text:",l.getResponseText()),h>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);let p=f?.error;if(p&&p.status&&p.message){let v=function(C){let E=C.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(E)>=0?E:z.UNKNOWN}(p.status);a(new ce(v,p.message))}else a(new ce(z.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ce(z.UNAVAILABLE,"Connection failed."));break;default:Ie()}}finally{he(Gn,`RPC '${t}' ${r} completed.`)}});let c=JSON.stringify(s);he(Gn,`RPC '${t}' ${r} sending request:`,s),l.send(n,"POST",c,i,15)})}Lo(t,n,i){let s=WE(),r=[this.bo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=HE(),a=GE(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new LE({})),this.xo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;let u=r.join("");he(Gn,`Creating RPC '${t}' stream ${s}: ${u}`,l);let h=o.createWebChannel(u,l),f=!1,p=!1,v=new XD({Po:C=>{p?he(Gn,`Not sending because RPC '${t}' stream ${s} is closed:`,C):(f||(he(Gn,`Opening RPC '${t}' stream ${s} transport.`),h.open(),f=!0),he(Gn,`RPC '${t}' stream ${s} sending:`,C),h.send(C))},Io:()=>h.close()}),y=(C,E,T)=>{C.listen(E,R=>{try{T(R)}catch(F){setTimeout(()=>{throw F},0)}})};return y(h,ku.EventType.OPEN,()=>{p||(he(Gn,`RPC '${t}' stream ${s} transport opened.`),v.po())}),y(h,ku.EventType.CLOSE,()=>{p||(p=!0,he(Gn,`RPC '${t}' stream ${s} transport closed`),v.wo())}),y(h,ku.EventType.ERROR,C=>{p||(p=!0,Wu(Gn,`RPC '${t}' stream ${s} transport errored:`,C),v.wo(new ce(z.UNAVAILABLE,"The operation could not be completed")))}),y(h,ku.EventType.MESSAGE,C=>{var E;if(!p){let T=C.data[0];vt(!!T);let R=T,F=R.error||((E=R[0])===null||E===void 0?void 0:E.error);if(F){he(Gn,`RPC '${t}' stream ${s} received error:`,F);let $=F.status,k=function(_){let I=en[_];if(I!==void 0)return ZV(I)}($),b=F.message;k===void 0&&(k=z.INTERNAL,b="Unknown error status: "+$+" with message "+F.message),p=!0,v.wo(new ce(k,b)),h.close()}else he(Gn,`RPC '${t}' stream ${s} received:`,T),v.So(T)}}),y(a,BE.STAT_EVENT,C=>{C.stat===gC.PROXY?he(Gn,`RPC '${t}' stream ${s} detected buffering proxy`):C.stat===gC.NOPROXY&&he(Gn,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.yo()},0),v}};function jE(){return typeof document<"u"?document:null}function ry(e){return new ED(e,!0)}var kC=class{constructor(t,n,i=1e3,s=1.5,r=6e4){this.ai=t,this.timerId=n,this.Bo=i,this.ko=s,this.qo=r,this.Qo=0,this.Ko=null,this.$o=Date.now(),this.reset()}reset(){this.Qo=0}Uo(){this.Qo=this.qo}Wo(t){this.cancel();let n=Math.floor(this.Qo+this.Go()),i=Math.max(0,Date.now()-this.$o),s=Math.max(0,n-i);s>0&&he("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Qo} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.Ko=this.ai.enqueueAfterDelay(this.timerId,s,()=>(this.$o=Date.now(),t())),this.Qo*=this.ko,this.Qo<this.Bo&&(this.Qo=this.Bo),this.Qo>this.qo&&(this.Qo=this.qo)}zo(){this.Ko!==null&&(this.Ko.skipDelay(),this.Ko=null)}cancel(){this.Ko!==null&&(this.Ko.cancel(),this.Ko=null)}Go(){return(Math.random()-.5)*this.Qo}};var LC=class{constructor(t,n,i,s,r,o,a,l){this.ai=t,this.jo=i,this.Ho=s,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Jo=0,this.Yo=null,this.Zo=null,this.stream=null,this.Xo=0,this.e_=new kC(t,n)}t_(){return this.state===1||this.state===5||this.n_()}n_(){return this.state===2||this.state===3}start(){this.Xo=0,this.state!==4?this.auth():this.r_()}stop(){return x(this,null,function*(){this.t_()&&(yield this.close(0))})}i_(){this.state=0,this.e_.reset()}s_(){this.n_()&&this.Yo===null&&(this.Yo=this.ai.enqueueAfterDelay(this.jo,6e4,()=>this.o_()))}__(t){this.a_(),this.stream.send(t)}o_(){return x(this,null,function*(){if(this.n_())return this.close(0)})}a_(){this.Yo&&(this.Yo.cancel(),this.Yo=null)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}close(t,n){return x(this,null,function*(){this.a_(),this.u_(),this.e_.cancel(),this.Jo++,t!==4?this.e_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?(fo(n.toString()),fo("Using maximum backoff delay to prevent overloading the backend."),this.e_.Uo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.c_(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.Vo(n)})}c_(){}auth(){this.state=1;let t=this.l_(this.Jo),n=this.Jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.Jo===n&&this.h_(i,s)},i=>{t(()=>{let s=new ce(z.UNKNOWN,"Fetching auth token failed: "+i.message);return this.P_(s)})})}h_(t,n){let i=this.l_(this.Jo);this.stream=this.I_(t,n),this.stream.To(()=>{i(()=>this.listener.To())}),this.stream.Ao(()=>{i(()=>(this.state=2,this.Zo=this.ai.enqueueAfterDelay(this.Ho,1e4,()=>(this.n_()&&(this.state=3),Promise.resolve())),this.listener.Ao()))}),this.stream.Vo(s=>{i(()=>this.P_(s))}),this.stream.onMessage(s=>{i(()=>++this.Xo==1?this.T_(s):this.onNext(s))})}r_(){this.state=5,this.e_.Wo(()=>x(this,null,function*(){this.state=0,this.start()}))}P_(t){return he("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}l_(t){return n=>{this.ai.enqueueAndForget(()=>this.Jo===t?n():(he("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},eT=class extends LC{constructor(t,n,i,s,r,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,o),this.serializer=r}I_(t,n){return this.connection.Lo("Listen",t,n)}T_(t){return this.onNext(t)}onNext(t){this.e_.reset();let n=YZ(this.serializer,t),i=function(r){if(!("targetChange"in r))return xe.min();let o=r.targetChange;return o.targetIds&&o.targetIds.length?xe.min():o.readTime?Ar(o.readTime):xe.min()}(t);return this.listener.E_(n,i)}d_(t){let n={};n.database=ID(this.serializer),n.addTarget=function(r,o){let a,l=o.target;if(a=fD(l)?{documents:ZZ(r,l)}:{query:eee(r,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=eB(r,o.resumeToken);let c=DD(r,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(xe.min())>0){a.readTime=FC(r,o.snapshotVersion.toTimestamp());let c=DD(r,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,t);let i=nee(this.serializer,t);i&&(n.labels=i),this.__(n)}A_(t){let n={};n.database=ID(this.serializer),n.removeTarget=t,this.__(n)}},tT=class extends LC{constructor(t,n,i,s,r,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,o),this.serializer=r}get R_(){return this.Xo>0}start(){this.lastStreamToken=void 0,super.start()}c_(){this.R_&&this.V_([])}I_(t,n){return this.connection.Lo("Write",t,n)}T_(t){return vt(!!t.streamToken),this.lastStreamToken=t.streamToken,vt(!t.writeResults||t.writeResults.length===0),this.listener.m_()}onNext(t){vt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.e_.reset();let n=XZ(t.writeResults,t.commitTime),i=Ar(t.commitTime);return this.listener.f_(i,n)}g_(){let t={};t.database=ID(this.serializer),this.__(t)}V_(t){let n={streamToken:this.lastStreamToken,writes:t.map(i=>JZ(this.serializer,i))};this.__(n)}};var nT=class extends class{}{constructor(t,n,i,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.p_=!1}y_(){if(this.p_)throw new ce(z.FAILED_PRECONDITION,"The client has already been terminated.")}Fo(t,n,i,s){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.Fo(t,TD(n,i),s,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new ce(z.UNKNOWN,r.toString())})}No(t,n,i,s,r){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.No(t,TD(n,i),s,o,a,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(z.UNKNOWN,o.toString())})}terminate(){this.p_=!0,this.connection.terminate()}},iT=class{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.w_=0,this.S_=null,this.b_=!0}D_(){this.w_===0&&(this.C_("Unknown"),this.S_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.S_=null,this.v_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}F_(t){this.state==="Online"?this.C_("Unknown"):(this.w_++,this.w_>=1&&(this.M_(),this.v_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.M_(),this.w_=0,t==="Online"&&(this.b_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}v_(t){let n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.b_?(fo(n),this.b_=!1):he("OnlineStateTracker",n)}M_(){this.S_!==null&&(this.S_.cancel(),this.S_=null)}};var sT=class{constructor(t,n,i,s,r){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.x_=[],this.O_=new Map,this.N_=new Set,this.L_=[],this.B_=r,this.B_.oo(o=>{i.enqueueAndForget(()=>x(this,null,function*(){Hl(this)&&(he("RemoteStore","Restarting streams for network reachability change."),yield function(l){return x(this,null,function*(){let c=Pe(l);c.N_.add(4),yield Qf(c),c.k_.set("Unknown"),c.N_.delete(4),yield oy(c)})}(this))}))}),this.k_=new iT(i,s)}};function oy(e){return x(this,null,function*(){if(Hl(e))for(let t of e.L_)yield t(!0)})}function Qf(e){return x(this,null,function*(){for(let t of e.L_)yield t(!1)})}function cB(e,t){let n=Pe(e);n.O_.has(t.targetId)||(n.O_.set(t.targetId,t),BT(n)?VT(n):nd(n).n_()&&LT(n,t))}function kT(e,t){let n=Pe(e),i=nd(n);n.O_.delete(t),i.n_()&&uB(n,t),n.O_.size===0&&(i.n_()?i.s_():Hl(n)&&n.k_.set("Unknown"))}function LT(e,t){if(e.q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(xe.min())>0){let n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}nd(e).d_(t)}function uB(e,t){e.q_.xe(t),nd(e).A_(t)}function VT(e){e.q_=new bD({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.O_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),nd(e).start(),e.k_.D_()}function BT(e){return Hl(e)&&!nd(e).t_()&&e.O_.size>0}function Hl(e){return Pe(e).N_.size===0}function dB(e){e.q_=void 0}function mee(e){return x(this,null,function*(){e.k_.set("Online")})}function vee(e){return x(this,null,function*(){e.O_.forEach((t,n)=>{LT(e,t)})})}function Cee(e,t){return x(this,null,function*(){dB(e),BT(e)?(e.k_.F_(t),VT(e)):e.k_.set("Unknown")})}function yee(e,t,n){return x(this,null,function*(){if(e.k_.set("Online"),t instanceof MC&&t.state===2&&t.cause)try{yield function(s,r){return x(this,null,function*(){let o=r.cause;for(let a of r.targetIds)s.O_.has(a)&&(yield s.remoteSyncer.rejectListen(a,o),s.O_.delete(a),s.q_.removeTarget(a))})}(e,t)}catch(i){he("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield VC(e,i)}else if(t instanceof Hu?e.q_.Ke(t):t instanceof AC?e.q_.He(t):e.q_.We(t),!n.isEqual(xe.min()))try{let i=yield lB(e.localStore);n.compareTo(i)>=0&&(yield function(r,o){let a=r.q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){let u=r.O_.get(c);u&&r.O_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{let u=r.O_.get(l);if(!u)return;r.O_.set(l,u.withResumeToken(Un.EMPTY_BYTE_STRING,u.snapshotVersion)),uB(r,l);let h=new Hf(u.target,l,c,u.sequenceNumber);LT(r,h)}),r.remoteSyncer.applyRemoteEvent(a)}(e,n))}catch(i){he("RemoteStore","Failed to raise snapshot:",i),yield VC(e,i)}})}function VC(e,t,n){return x(this,null,function*(){if(!Kf(t))throw t;e.N_.add(1),yield Qf(e),e.k_.set("Offline"),n||(n=()=>lB(e.localStore)),e.asyncQueue.enqueueRetryable(()=>x(this,null,function*(){he("RemoteStore","Retrying IndexedDB access"),yield n(),e.N_.delete(1),yield oy(e)}))})}function hB(e,t){return t().catch(n=>VC(e,n,t))}function ay(e){return x(this,null,function*(){let t=Pe(e),n=Ra(t),i=t.x_.length>0?t.x_[t.x_.length-1].batchId:-1;for(;wee(t);)try{let s=yield hee(t.localStore,i);if(s===null){t.x_.length===0&&n.s_();break}i=s.batchId,See(t,s)}catch(s){yield VC(t,s)}fB(t)&&pB(t)})}function wee(e){return Hl(e)&&e.x_.length<10}function See(e,t){e.x_.push(t);let n=Ra(e);n.n_()&&n.R_&&n.V_(t.mutations)}function fB(e){return Hl(e)&&!Ra(e).t_()&&e.x_.length>0}function pB(e){Ra(e).start()}function _ee(e){return x(this,null,function*(){Ra(e).g_()})}function bee(e){return x(this,null,function*(){let t=Ra(e);for(let n of e.x_)t.V_(n.mutations)})}function Eee(e,t,n){return x(this,null,function*(){let i=e.x_.shift(),s=yD.from(i,t,n);yield hB(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),yield ay(e)})}function Dee(e,t){return x(this,null,function*(){t&&Ra(e).R_&&(yield function(i,s){return x(this,null,function*(){if(function(o){return UZ(o)&&o!==z.ABORTED}(s.code)){let r=i.x_.shift();Ra(i).i_(),yield hB(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),yield ay(i)}})}(e,t)),fB(e)&&pB(e)})}function CV(e,t){return x(this,null,function*(){let n=Pe(e);n.asyncQueue.verifyOperationInProgress(),he("RemoteStore","RemoteStore received new credentials");let i=Hl(n);n.N_.add(3),yield Qf(n),i&&n.k_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(t),n.N_.delete(3),yield oy(n)})}function Tee(e,t){return x(this,null,function*(){let n=Pe(e);t?(n.N_.delete(2),yield oy(n)):t||(n.N_.add(2),yield Qf(n),n.k_.set("Unknown"))})}function nd(e){return e.Q_||(e.Q_=function(n,i,s){let r=Pe(n);return r.y_(),new eT(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{To:mee.bind(null,e),Ao:vee.bind(null,e),Vo:Cee.bind(null,e),E_:yee.bind(null,e)}),e.L_.push(t=>x(this,null,function*(){t?(e.Q_.i_(),BT(e)?VT(e):e.k_.set("Unknown")):(yield e.Q_.stop(),dB(e))}))),e.Q_}function Ra(e){return e.K_||(e.K_=function(n,i,s){let r=Pe(n);return r.y_(),new tT(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(e.datastore,e.asyncQueue,{To:()=>Promise.resolve(),Ao:_ee.bind(null,e),Vo:Dee.bind(null,e),m_:bee.bind(null,e),f_:Eee.bind(null,e)}),e.L_.push(t=>x(this,null,function*(){t?(e.K_.i_(),yield ay(e)):(yield e.K_.stop(),e.x_.length>0&&(he("RemoteStore",`Stopping write stream with ${e.x_.length} pending writes`),e.x_=[]))}))),e.K_}var rT=class e{constructor(t,n,i,s,r){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,s,r){let o=Date.now()+i,a=new e(t,n,o,s,r);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(z.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function GT(e,t){if(fo("AsyncQueue",`${t}: ${e}`),Kf(e))return new ce(z.UNAVAILABLE,`${t}: ${e}`);throw e}var BC=class e{constructor(t){this.comparator=t?(n,i)=>t(n,i)||we.comparator(n.key,i.key):(n,i)=>we.comparator(n.key,i.key),this.keyedMap=Pf(),this.sortedSet=new Ht(this.comparator)}static emptySet(t){return new e(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,i)=>(t(n),!1))}add(t){let n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){let n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof e)||this.size!==t.size)return!1;let n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){let s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){let t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){let i=new e;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}};var GC=class{constructor(){this.U_=new Ht(we.comparator)}track(t){let n=t.doc.key,i=this.U_.get(n);i?t.type!==0&&i.type===3?this.U_=this.U_.insert(n,t):t.type===3&&i.type!==1?this.U_=this.U_.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.U_=this.U_.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.U_=this.U_.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.U_=this.U_.remove(n):t.type===1&&i.type===2?this.U_=this.U_.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.U_=this.U_.insert(n,{type:2,doc:t.doc}):Ie():this.U_=this.U_.insert(n,t)}W_(){let t=[];return this.U_.inorderTraversal((n,i)=>{t.push(i)}),t}},Xu=class e{constructor(t,n,i,s,r,o,a,l,c){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,n,i,s,r){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new e(t,n,BC.emptySet(n),o,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&iy(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}};var oT=class{constructor(){this.G_=void 0,this.z_=[]}j_(){return this.z_.some(t=>t.H_())}},aT=class{constructor(){this.queries=yV(),this.onlineState="Unknown",this.J_=new Set}terminate(){(function(n,i){let s=Pe(n),r=s.queries;s.queries=yV(),r.forEach((o,a)=>{for(let l of a.z_)l.onError(i)})})(this,new ce(z.ABORTED,"Firestore shutting down"))}};function yV(){return new Ea(e=>GV(e),iy)}function gB(e,t){return x(this,null,function*(){let n=Pe(e),i=3,s=t.query,r=n.queries.get(s);r?!r.j_()&&t.H_()&&(i=2):(r=new oT,i=t.H_()?0:1);try{switch(i){case 0:r.G_=yield n.onListen(s,!0);break;case 1:r.G_=yield n.onListen(s,!1);break;case 2:yield n.onFirstRemoteStoreListen(s)}}catch(o){let a=GT(o,`Initialization of query '${Lu(t.query)}' failed`);return void t.onError(a)}n.queries.set(s,r),r.z_.push(t),t.Y_(n.onlineState),r.G_&&t.Z_(r.G_)&&HT(n)})}function mB(e,t){return x(this,null,function*(){let n=Pe(e),i=t.query,s=3,r=n.queries.get(i);if(r){let o=r.z_.indexOf(t);o>=0&&(r.z_.splice(o,1),r.z_.length===0?s=t.H_()?0:1:!r.j_()&&t.H_()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function Ree(e,t){let n=Pe(e),i=!1;for(let s of t){let r=s.query,o=n.queries.get(r);if(o){for(let a of o.z_)a.Z_(s)&&(i=!0);o.G_=s}}i&&HT(n)}function Iee(e,t,n){let i=Pe(e),s=i.queries.get(t);if(s)for(let r of s.z_)r.onError(n);i.queries.delete(t)}function HT(e){e.J_.forEach(t=>{t.next()})}var lT,wV;(wV=lT||(lT={})).X_="default",wV.Cache="cache";var HC=class{constructor(t,n,i){this.query=t,this.ea=n,this.ta=!1,this.na=null,this.onlineState="Unknown",this.options=i||{}}Z_(t){if(!this.options.includeMetadataChanges){let i=[];for(let s of t.docChanges)s.type!==3&&i.push(s);t=new Xu(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ta?this.ra(t)&&(this.ea.next(t),n=!0):this.ia(t,this.onlineState)&&(this.sa(t),n=!0),this.na=t,n}onError(t){this.ea.error(t)}Y_(t){this.onlineState=t;let n=!1;return this.na&&!this.ta&&this.ia(this.na,t)&&(this.sa(this.na),n=!0),n}ia(t,n){if(!t.fromCache||!this.H_())return!0;let i=n!=="Offline";return(!this.options.oa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ra(t){if(t.docChanges.length>0)return!0;let n=this.na&&this.na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}sa(t){t=Xu.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ta=!0,this.ea.next(t)}H_(){return this.options.source!==lT.Cache}};var UC=class{constructor(t){this.key=t}},WC=class{constructor(t){this.key=t}},cT=class{constructor(t,n){this.query=t,this.Ia=n,this.Ta=null,this.hasCachedResults=!1,this.current=!1,this.Ea=ze(),this.mutatedKeys=ze(),this.da=HV(t),this.Aa=new BC(this.da)}get Ra(){return this.Ia}Va(t,n){let i=n?n.ma:new GC,s=n?n.Aa:this.Aa,r=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1,l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((u,h)=>{let f=s.get(u),p=sy(this.query,h)?h:null,v=!!f&&this.mutatedKeys.has(f.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations),C=!1;f&&p?f.data.isEqual(p.data)?v!==y&&(i.track({type:3,doc:p}),C=!0):this.fa(f,p)||(i.track({type:2,doc:p}),C=!0,(l&&this.da(p,l)>0||c&&this.da(p,c)<0)&&(a=!0)):!f&&p?(i.track({type:0,doc:p}),C=!0):f&&!p&&(i.track({type:1,doc:f}),C=!0,(l||c)&&(a=!0)),C&&(p?(o=o.add(p),r=y?r.add(u):r.delete(u)):(o=o.delete(u),r=r.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),r=r.delete(u.key),i.track({type:1,doc:u})}return{Aa:o,ma:i,ts:a,mutatedKeys:r}}fa(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,s){let r=this.Aa;this.Aa=t.Aa,this.mutatedKeys=t.mutatedKeys;let o=t.ma.W_();o.sort((u,h)=>function(p,v){let y=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie()}};return y(p)-y(v)}(u.type,h.type)||this.da(u.doc,h.doc)),this.ga(i),s=s!=null&&s;let a=n&&!s?this.pa():[],l=this.Ea.size===0&&this.current&&!s?1:0,c=l!==this.Ta;return this.Ta=l,o.length!==0||c?{snapshot:new Xu(this.query,t.Aa,r,o,t.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),ya:a}:{ya:a}}Y_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Aa:this.Aa,ma:new GC,mutatedKeys:this.mutatedKeys,ts:!1},!1)):{ya:[]}}wa(t){return!this.Ia.has(t)&&!!this.Aa.has(t)&&!this.Aa.get(t).hasLocalMutations}ga(t){t&&(t.addedDocuments.forEach(n=>this.Ia=this.Ia.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ia=this.Ia.delete(n)),this.current=t.current)}pa(){if(!this.current)return[];let t=this.Ea;this.Ea=ze(),this.Aa.forEach(i=>{this.wa(i.key)&&(this.Ea=this.Ea.add(i.key))});let n=[];return t.forEach(i=>{this.Ea.has(i)||n.push(new WC(i))}),this.Ea.forEach(i=>{t.has(i)||n.push(new UC(i))}),n}Sa(t){this.Ia=t.Is,this.Ea=ze();let n=this.Va(t.documents);return this.applyChanges(n,!0)}ba(){return Xu.fromInitialDocuments(this.query,this.Aa,this.mutatedKeys,this.Ta===0,this.hasCachedResults)}},uT=class{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}},dT=class{constructor(t){this.key=t,this.Da=!1}},hT=class{constructor(t,n,i,s,r,o){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Ca={},this.va=new Ea(a=>GV(a),iy),this.Fa=new Map,this.Ma=new Set,this.xa=new Ht(we.comparator),this.Oa=new Map,this.Na=new Wf,this.La={},this.Ba=new Map,this.ka=Uf.Bn(),this.onlineState="Unknown",this.qa=void 0}get isPrimaryClient(){return this.qa===!0}};function Aee(e,t,n=!0){return x(this,null,function*(){let i=_B(e),s,r=i.va.get(t);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.ba()):s=yield vB(i,t,n,!0),s})}function Mee(e,t){return x(this,null,function*(){let n=_B(e);yield vB(n,t,!0,!1)})}function vB(e,t,n,i){return x(this,null,function*(){let s=yield fee(e.localStore,Ir(t)),r=s.targetId,o=n?e.sharedClientState.addLocalQueryTarget(r):"not-current",a;return i&&(a=yield Pee(e,t,r,o==="current",s.resumeToken)),e.isPrimaryClient&&n&&cB(e.remoteStore,s),a})}function Pee(e,t,n,i,s){return x(this,null,function*(){e.Qa=(h,f,p)=>function(y,C,E,T){return x(this,null,function*(){let R=C.view.Va(E);R.ts&&(R=yield vV(y.localStore,C.query,!1).then(({documents:b})=>C.view.Va(b,R)));let F=T&&T.targetChanges.get(C.targetId),$=T&&T.targetMismatches.get(C.targetId)!=null,k=C.view.applyChanges(R,y.isPrimaryClient,F,$);return _V(y,C.targetId,k.ya),k.snapshot})}(e,h,f,p);let r=yield vV(e.localStore,t,!0),o=new cT(t,r.Is),a=o.Va(r.documents),l=Gf.createSynthesizedTargetChangeForCurrentChange(n,i&&e.onlineState!=="Offline",s),c=o.applyChanges(a,e.isPrimaryClient,l);_V(e,n,c.ya);let u=new uT(t,n,o);return e.va.set(t,u),e.Fa.has(n)?e.Fa.get(n).push(t):e.Fa.set(n,[t]),c.snapshot})}function Fee(e,t,n){return x(this,null,function*(){let i=Pe(e),s=i.va.get(t),r=i.Fa.get(s.targetId);if(r.length>1)return i.Fa.set(s.targetId,r.filter(o=>!iy(o,t))),void i.va.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||(yield QD(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&kT(i.remoteStore,s.targetId),fT(i,s.targetId)}).catch(qf))):(fT(i,s.targetId),yield QD(i.localStore,s.targetId,!0))})}function xee(e,t){return x(this,null,function*(){let n=Pe(e),i=n.va.get(t),s=n.Fa.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),kT(n.remoteStore,i.targetId))})}function Oee(e,t,n){return x(this,null,function*(){let i=Hee(e);try{let s=yield function(o,a){let l=Pe(o),c=sn.now(),u=a.reduce((p,v)=>p.add(v.key),ze()),h,f;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let v=go(),y=ze();return l.us.getEntries(p,u).next(C=>{v=C,v.forEach((E,T)=>{T.isValidDocument()||(y=y.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,v)).next(C=>{h=C;let E=[];for(let T of a){let R=HZ(T,h.get(T.key).overlayedDocument);R!=null&&E.push(new Fr(T.key,R,xV(R.value.mapValue),ho.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,E,a)}).next(C=>{f=C;let E=C.applyToLocalDocumentSet(h,y);return l.documentOverlayCache.saveOverlays(p,C.batchId,E)})}).then(()=>({batchId:f.batchId,changes:WV(h)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.La[o.currentUser.toKey()];c||(c=new Ht(at)),c=c.insert(a,l),o.La[o.currentUser.toKey()]=c}(i,s.batchId,n),yield Yf(i,s.changes),yield ay(i.remoteStore)}catch(s){let r=GT(s,"Failed to persist write");n.reject(r)}})}function CB(e,t){return x(this,null,function*(){let n=Pe(e);try{let i=yield uee(n.localStore,t);t.targetChanges.forEach((s,r)=>{let o=n.Oa.get(r);o&&(vt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Da=!0:s.modifiedDocuments.size>0?vt(o.Da):s.removedDocuments.size>0&&(vt(o.Da),o.Da=!1))}),yield Yf(n,i,t)}catch(i){yield qf(i)}})}function SV(e,t,n){let i=Pe(e);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let s=[];i.va.forEach((r,o)=>{let a=o.view.Y_(t);a.snapshot&&s.push(a.snapshot)}),function(o,a){let l=Pe(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(let f of h.z_)f.Y_(a)&&(c=!0)}),c&&HT(l)}(i.eventManager,t),s.length&&i.Ca.E_(s),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function Nee(e,t,n){return x(this,null,function*(){let i=Pe(e);i.sharedClientState.updateQueryState(t,"rejected",n);let s=i.Oa.get(t),r=s&&s.key;if(r){let o=new Ht(we.comparator);o=o.insert(r,qs.newNoDocument(r,xe.min()));let a=ze().add(r),l=new IC(xe.min(),new Map,new Ht(at),o,a);yield CB(i,l),i.xa=i.xa.remove(r),i.Oa.delete(t),UT(i)}else yield QD(i.localStore,t,!1).then(()=>fT(i,t,n)).catch(qf)})}function kee(e,t){return x(this,null,function*(){let n=Pe(e),i=t.batch.batchId;try{let s=yield cee(n.localStore,t);wB(n,i,null),yB(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield Yf(n,s)}catch(s){yield qf(s)}})}function Lee(e,t,n){return x(this,null,function*(){let i=Pe(e);try{let s=yield function(o,a){let l=Pe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(vt(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(i.localStore,t);wB(i,t,n),yB(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),yield Yf(i,s)}catch(s){yield qf(s)}})}function yB(e,t){(e.Ba.get(t)||[]).forEach(n=>{n.resolve()}),e.Ba.delete(t)}function wB(e,t,n){let i=Pe(e),s=i.La[i.currentUser.toKey()];if(s){let r=s.get(t);r&&(n?r.reject(n):r.resolve(),s=s.remove(t)),i.La[i.currentUser.toKey()]=s}}function fT(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(let i of e.Fa.get(t))e.va.delete(i),n&&e.Ca.Ka(i,n);e.Fa.delete(t),e.isPrimaryClient&&e.Na.mr(t).forEach(i=>{e.Na.containsKey(i)||SB(e,i)})}function SB(e,t){e.Ma.delete(t.path.canonicalString());let n=e.xa.get(t);n!==null&&(kT(e.remoteStore,n),e.xa=e.xa.remove(t),e.Oa.delete(n),UT(e))}function _V(e,t,n){for(let i of n)i instanceof UC?(e.Na.addReference(i.key,t),Vee(e,i)):i instanceof WC?(he("SyncEngine","Document no longer in limbo: "+i.key),e.Na.removeReference(i.key,t),e.Na.containsKey(i.key)||SB(e,i.key)):Ie()}function Vee(e,t){let n=t.key,i=n.path.canonicalString();e.xa.get(n)||e.Ma.has(i)||(he("SyncEngine","New document in limbo: "+n),e.Ma.add(i),UT(e))}function UT(e){for(;e.Ma.size>0&&e.xa.size<e.maxConcurrentLimboResolutions;){let t=e.Ma.values().next().value;e.Ma.delete(t);let n=new we(Pt.fromString(t)),i=e.ka.next();e.Oa.set(i,new dT(n)),e.xa=e.xa.insert(n,i),cB(e.remoteStore,new Hf(Ir(ny(n.path)),i,"TargetPurposeLimboResolution",MV.oe))}}function Yf(e,t,n){return x(this,null,function*(){let i=Pe(e),s=[],r=[],o=[];i.va.isEmpty()||(i.va.forEach((a,l)=>{o.push(i.Qa(l,t,n).then(c=>{var u;if((c||n)&&i.isPrimaryClient){let h=c?!c.fromCache:(u=n?.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;i.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){s.push(c);let h=zD.Ui(l.targetId,c);r.push(h)}}))}),yield Promise.all(o),i.Ca.E_(s),yield function(l,c){return x(this,null,function*(){let u=Pe(l);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>J.forEach(c,f=>J.forEach(f.Ki,p=>u.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>J.forEach(f.$i,p=>u.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!Kf(h))throw h;he("LocalStore","Failed to update sequence numbers: "+h)}for(let h of c){let f=h.targetId;if(!h.fromCache){let p=u.ss.get(f),v=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(v);u.ss=u.ss.insert(f,y)}}})}(i.localStore,r))})}function Bee(e,t){return x(this,null,function*(){let n=Pe(e);if(!n.currentUser.isEqual(t)){he("SyncEngine","User change. New user:",t.toKey());let i=yield aB(n.localStore,t);n.currentUser=t,function(r,o){r.Ba.forEach(a=>{a.forEach(l=>{l.reject(new ce(z.CANCELLED,o))})}),r.Ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield Yf(n,i.ls)}})}function Gee(e,t){let n=Pe(e),i=n.Oa.get(t);if(i&&i.Da)return ze().add(i.key);{let s=ze(),r=n.Fa.get(t);if(!r)return s;for(let o of r){let a=n.va.get(o);s=s.unionWith(a.view.Ra)}return s}}function _B(e){let t=Pe(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=CB.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Gee.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Nee.bind(null,t),t.Ca.E_=Ree.bind(null,t.eventManager),t.Ca.Ka=Iee.bind(null,t.eventManager),t}function Hee(e){let t=Pe(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=kee.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Lee.bind(null,t),t}var jC=class{constructor(){this.synchronizeTabs=!1}initialize(t){return x(this,null,function*(){this.serializer=ry(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return lee(this.persistence,new qD,t.initialUser,this.serializer)}createPersistence(t){return new UD(jD.Yr,this.serializer)}createSharedClientState(t){return new YD}terminate(){return x(this,null,function*(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var pT=class{initialize(t,n){return x(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>SV(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Bee.bind(null,this.syncEngine),yield Tee(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new aT}()}createDatastore(t){let n=ry(t.databaseInfo.databaseId),i=function(r){return new ZD(r)}(t.databaseInfo);return function(r,o,a,l){return new nT(r,o,a,l)}(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return function(i,s,r,o,a){return new sT(i,s,r,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>SV(this.syncEngine,n,0),function(){return NC.D()?new NC:new JD}())}createSyncEngine(t,n){return function(s,r,o,a,l,c,u){let h=new hT(s,r,o,a,l,c);return u&&(h.qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}terminate(){return x(this,null,function*(){var t,n;yield function(s){return x(this,null,function*(){let r=Pe(s);he("RemoteStore","RemoteStore shutting down."),r.N_.add(5),yield Qf(r),r.B_.shutdown(),r.k_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}};var zC=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Wa(this.observer.next,t)}error(t){this.observer.error?this.Wa(this.observer.error,t):fo("Uncaught Error in snapshot listener:",t.toString())}Ga(){this.muted=!0}Wa(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}};var gT=class{constructor(t,n,i,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=_n.UNAUTHENTICATED,this.clientId=SC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,r=>x(this,null,function*(){he("FirestoreClient","Received user=",r.uid),yield this.authCredentialListener(r),this.user=r})),this.appCheckCredentials.start(i,r=>(he("FirestoreClient","Received new app check token=",r),this.appCheckCredentialListener(r,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ce(z.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>x(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){let i=GT(n,"Failed to shutdown persistence");t.reject(i)}})),t.promise}};function zE(e,t){return x(this,null,function*(){e.asyncQueue.verifyOperationInProgress(),he("FirestoreClient","Initializing OfflineComponentProvider");let n=e.configuration;yield t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(s=>x(this,null,function*(){i.isEqual(s)||(yield aB(t.localStore,s),i=s)})),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t})}function bV(e,t){return x(this,null,function*(){e.asyncQueue.verifyOperationInProgress();let n=yield Wee(e);he("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(n,e.configuration),e.setCredentialChangeListener(i=>CV(t.remoteStore,i)),e.setAppCheckTokenChangeListener((i,s)=>CV(t.remoteStore,s)),e._onlineComponents=t})}function Uee(e){return e.name==="FirebaseError"?e.code===z.FAILED_PRECONDITION||e.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}function Wee(e){return x(this,null,function*(){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){he("FirestoreClient","Using user provided OfflineComponentProvider");try{yield zE(e,e._uninitializedComponentsProvider._offline)}catch(t){let n=t;if(!Uee(n))throw n;Wu("Error using user provided cache. Falling back to memory cache: "+n),yield zE(e,new jC)}}else he("FirestoreClient","Using default OfflineComponentProvider"),yield zE(e,new jC);return e._offlineComponents})}function bB(e){return x(this,null,function*(){return e._onlineComponents||(e._uninitializedComponentsProvider?(he("FirestoreClient","Using user provided OnlineComponentProvider"),yield bV(e,e._uninitializedComponentsProvider._online)):(he("FirestoreClient","Using default OnlineComponentProvider"),yield bV(e,new pT))),e._onlineComponents})}function jee(e){return bB(e).then(t=>t.syncEngine)}function mT(e){return x(this,null,function*(){let t=yield bB(e),n=t.eventManager;return n.onListen=Aee.bind(null,t.syncEngine),n.onUnlisten=Fee.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Mee.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=xee.bind(null,t.syncEngine),n})}function zee(e,t,n={}){let i=new Tr;return e.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(r,o,a,l,c){let u=new zC({next:f=>{o.enqueueAndForget(()=>mB(r,h));let p=f.docs.has(a);!p&&f.fromCache?c.reject(new ce(z.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&l&&l.source==="server"?c.reject(new ce(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new HC(ny(a.path),u,{includeMetadataChanges:!0,oa:!0});return gB(r,h)}(yield mT(e),e.asyncQueue,t,n,i)})),i.promise}function EB(e){let t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}var EV=new Map;function DB(e,t,n){if(!n)throw new ce(z.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function $ee(e,t,n,i){if(t===!0&&i===!0)throw new ce(z.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function DV(e){if(!we.isDocumentKey(e))throw new ce(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function TV(e){if(we.isDocumentKey(e))throw new ce(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ly(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{let t=function(i){return i.constructor?i.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Ie()}function Mr(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ce(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=ly(e);throw new ce(z.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}var $C=class{constructor(t){var n,i;if(t.host===void 0){if(t.ssl!==void 0)throw new ce(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new ce(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}$ee("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=EB((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ce(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ce(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ce(z.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},Zu=class{constructor(t,n,i,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $C({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ce(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new ce(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $C(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new $E;switch(i.type){case"firstParty":return new YE(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ce(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=EV.get(n);i&&(he("ComponentProvider","Removing Datastore"),EV.delete(n),i.terminate())}(this),Promise.resolve()}};function TB(e,t,n,i={}){var s;let r=(e=Mr(e,Zu))._getSettings(),o=`${t}:${n}`;if(r.host!=="firestore.googleapis.com"&&r.host!==o&&Wu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},r),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=_n.MOCK_USER;else{a=Dc(i.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);let c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new ce(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new _n(c)}e._authCredentials=new qE(new wC(a,l))}}var Vl=class e{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new e(this.firestore,t,this._query)}},ri=class e{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sa(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}},Sa=class e extends Vl{constructor(t,n,i){super(t,n,ny(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new ri(this.firestore,null,new we(t))}withConverter(t){return new e(this.firestore,t,this._path)}};function RB(e,t,...n){if(e=ct(e),DB("collection","path",t),e instanceof Zu){let i=Pt.fromString(t,...n);return TV(i),new Sa(e,null,i)}{if(!(e instanceof ri||e instanceof Sa))throw new ce(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=e._path.child(Pt.fromString(t,...n));return TV(i),new Sa(e.firestore,null,i)}}function WT(e,t,...n){if(e=ct(e),arguments.length===1&&(t=SC.newId()),DB("doc","path",t),e instanceof Zu){let i=Pt.fromString(t,...n);return DV(i),new ri(e,null,new we(i))}{if(!(e instanceof ri||e instanceof Sa))throw new ce(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=e._path.child(Pt.fromString(t,...n));return DV(i),new ri(e.firestore,e instanceof Sa?e.converter:null,new we(i))}}var vT=class{constructor(){this._u=Promise.resolve(),this.au=[],this.uu=!1,this.cu=[],this.lu=null,this.hu=!1,this.Pu=!1,this.Iu=[],this.e_=new kC(this,"async_queue_retry"),this.Tu=()=>{let n=jE();n&&he("AsyncQueue","Visibility state changed to "+n.visibilityState),this.e_.zo()};let t=jE();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Tu)}get isShuttingDown(){return this.uu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Eu(),this.du(t)}enterRestrictedMode(t){if(!this.uu){this.uu=!0,this.Pu=t||!1;let n=jE();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Tu)}}enqueue(t){if(this.Eu(),this.uu)return new Promise(()=>{});let n=new Tr;return this.du(()=>this.uu&&this.Pu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.au.push(t),this.Au()))}Au(){return x(this,null,function*(){if(this.au.length!==0){try{yield this.au[0](),this.au.shift(),this.e_.reset()}catch(t){if(!Kf(t))throw t;he("AsyncQueue","Operation failed with retryable error: "+t)}this.au.length>0&&this.e_.Wo(()=>this.Au())}})}du(t){let n=this._u.then(()=>(this.hu=!0,t().catch(i=>{this.lu=i,this.hu=!1;let s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw fo("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.hu=!1,i))));return this._u=n,n}enqueueAfterDelay(t,n,i){this.Eu(),this.Iu.indexOf(t)>-1&&(n=0);let s=rT.createAndSchedule(this,t,n,i,r=>this.Ru(r));return this.cu.push(s),s}Eu(){this.lu&&Ie()}verifyOperationInProgress(){}Vu(){return x(this,null,function*(){let t;do t=this._u,yield t;while(t!==this._u)})}mu(t){for(let n of this.cu)if(n.timerId===t)return!0;return!1}fu(t){return this.Vu().then(()=>{this.cu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this.cu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Vu()})}gu(t){this.Iu.push(t)}Ru(t){let n=this.cu.indexOf(t);this.cu.splice(n,1)}};function RV(e){return function(n,i){if(typeof n!="object"||n===null)return!1;let s=n;for(let r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(e,["next","error","complete"])}var mo=class extends Zu{constructor(t,n,i,s){super(t,n,i,s),this.type="firestore",this._queue=function(){return new vT}(),this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||AB(this),this._firestoreClient.terminate()}};function IB(e,t){let n=typeof e=="object"?e:gn(),i=typeof e=="string"?e:t||"(default)",s=on(n,"firestore").getImmediate({identifier:i});if(!s._initialized){let r=Vo("firestore");r&&TB(s,...r)}return s}function jT(e){return e._firestoreClient||AB(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function AB(e){var t,n,i;let s=e._freezeSettings(),r=function(a,l,c,u){return new tD(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,EB(u.experimentalLongPollingOptions),u.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._firestoreClient=new gT(e._authCredentials,e._appCheckCredentials,e._queue,r),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}var jf=class e{constructor(t){this._byteString=t}static fromBase64String(t){try{return new e(Un.fromBase64String(t))}catch(n){throw new ce(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new e(Un.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var ed=class{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new ce(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var Bl=class{constructor(t){this._methodName=t}};var zf=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new ce(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ce(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return at(this._lat,t._lat)||at(this._long,t._long)}};var qee=/^__.*__$/,CT=class{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Fr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Ll(t,this.data,n,this.fieldTransforms)}},qC=class{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return new Fr(t,this.data,this.fieldMask,n,this.fieldTransforms)}};function MB(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie()}}var KC=class e{constructor(t,n,i,s,r,o){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.pu(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get yu(){return this.settings.yu}wu(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Su(t){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.wu({path:i,bu:!1});return s.Du(t),s}Cu(t){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.wu({path:i,bu:!1});return s.pu(),s}vu(t){return this.wu({path:void 0,bu:!0})}Fu(t){return YC(t,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.xu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}pu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Du(this.path.get(t))}Du(t){if(t.length===0)throw this.Fu("Document fields must not be empty");if(MB(this.yu)&&qee.test(t))throw this.Fu('Document fields cannot begin and end with "__"')}},yT=class{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||ry(t)}Ou(t,n,i,s=!1){return new KC({yu:t,methodName:n,xu:i,path:qi.emptyPath(),bu:!1,Mu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function zT(e){let t=e._freezeSettings(),n=ry(e._databaseId);return new yT(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Kee(e,t,n,i,s,r={}){let o=e.Ou(r.merge||r.mergeFields?2:0,t,n,s);$T("Data must be an object, but it was:",o,i);let a=FB(i,o),l,c;if(r.merge)l=new ms(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){let u=[];for(let h of r.mergeFields){let f=_T(t,h,n);if(!o.contains(f))throw new ce(z.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);OB(u,f)||u.push(f)}l=new ms(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new CT(new $i(a),l,c)}var QC=class e extends Bl{_toFieldTransform(t){if(t.yu!==2)throw t.yu===1?t.Fu(`${this._methodName}() can only appear at the top level of your update data`):t.Fu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof e}};function PB(e,t,n){return new KC({yu:3,xu:t.settings.xu,methodName:e._methodName,bu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var wT=class e extends Bl{constructor(t,n){super(t),this.Nu=n}_toFieldTransform(t){let n=PB(this,t,!0),i=this.Nu.map(r=>Ul(r,n)),s=new Da(i);return new RC(t.path,s)}isEqual(t){return t instanceof e&&lh(this.Nu,t.Nu)}},ST=class e extends Bl{constructor(t,n){super(t),this.Nu=n}_toFieldTransform(t){let n=PB(this,t,!0),i=this.Nu.map(r=>Ul(r,n)),s=new Ta(i);return new RC(t.path,s)}isEqual(t){return t instanceof e&&lh(this.Nu,t.Nu)}};function Qee(e,t,n,i){let s=e.Ou(1,t,n);$T("Data must be an object, but it was:",s,i);let r=[],o=$i.empty();Gl(i,(l,c)=>{let u=qT(t,l,n);c=ct(c);let h=s.Cu(u);if(c instanceof QC)r.push(u);else{let f=Ul(c,h);f!=null&&(r.push(u),o.set(u,f))}});let a=new ms(r);return new qC(o,a,s.fieldTransforms)}function Yee(e,t,n,i,s,r){let o=e.Ou(1,t,n),a=[_T(t,i,n)],l=[s];if(r.length%2!=0)throw new ce(z.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<r.length;f+=2)a.push(_T(t,r[f])),l.push(r[f+1]);let c=[],u=$i.empty();for(let f=a.length-1;f>=0;--f)if(!OB(c,a[f])){let p=a[f],v=l[f];v=ct(v);let y=o.Cu(p);if(v instanceof QC)c.push(p);else{let C=Ul(v,y);C!=null&&(c.push(p),u.set(p,C))}}let h=new ms(c);return new qC(u,h,o.fieldTransforms)}function Jee(e,t,n,i=!1){return Ul(n,e.Ou(i?4:3,t))}function Ul(e,t){if(xB(e=ct(e)))return $T("Unsupported field value:",t,e),FB(e,t);if(e instanceof Bl)return function(i,s){if(!MB(s.yu))throw s.Fu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Fu(`${i._methodName}() is not currently supported inside arrays`);let r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.bu&&t.yu!==4)throw t.Fu("Nested arrays are not supported");return function(i,s){let r=[],o=0;for(let a of i){let l=Ul(a,s.vu(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}}(e,t)}return function(i,s){if((i=ct(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return kZ(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let r=sn.fromDate(i);return{timestampValue:FC(s.serializer,r)}}if(i instanceof sn){let r=new sn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:FC(s.serializer,r)}}if(i instanceof zf)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof jf)return{bytesValue:eB(s.serializer,i._byteString)};if(i instanceof ri){let r=s.databaseId,o=i.firestore._databaseId;if(!o.isEqual(r))throw s.Fu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:NT(i.firestore._databaseId||s.databaseId,i._key.path)}}throw s.Fu(`Unsupported field value: ${ly(i)}`)}(e,t)}function FB(e,t){let n={};return PV(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Gl(e,(i,s)=>{let r=Ul(s,t.Su(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function xB(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof sn||e instanceof zf||e instanceof jf||e instanceof ri||e instanceof Bl)}function $T(e,t,n){if(!xB(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){let i=ly(n);throw i==="an object"?t.Fu(e+" a custom object"):t.Fu(e+" "+i)}}function _T(e,t,n){if((t=ct(t))instanceof ed)return t._internalPath;if(typeof t=="string")return qT(e,t);throw YC("Field path arguments must be of type string or ",e,!1,void 0,n)}var Xee=new RegExp("[~\\*/\\[\\]]");function qT(e,t,n){if(t.search(Xee)>=0)throw YC(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ed(...t.split("."))._internalPath}catch{throw YC(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function YC(e,t,n,i,s){let r=i&&!i.isEmpty(),o=s!==void 0,a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${i}`),o&&(l+=` in document ${s}`),l+=")"),new ce(z.INVALID_ARGUMENT,a+e+l)}function OB(e,t){return e.some(n=>n.isEqual(t))}var JC=class{constructor(t,n,i,s,r){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new ri(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new bT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let n=this._document.data.field(KT("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}},bT=class extends JC{data(){return super.data()}};function KT(e,t){return typeof t=="string"?qT(e,t):t instanceof ed?t._internalPath:t._delegate._internalPath}function Zee(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new ce(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var $f=class{},XC=class extends $f{};function NB(e,t,...n){let i=[];t instanceof $f&&i.push(t),i=i.concat(n),function(r){let o=r.filter(l=>l instanceof DT).length,a=r.filter(l=>l instanceof ET).length;if(o>1||o>0&&a>0)throw new ce(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let s of i)e=s._apply(e);return e}var ET=class e extends XC{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new e(t,n,i)}_apply(t){let n=this._parse(t);return LB(t._query,n),new Vl(t.firestore,t.converter,pD(t._query,n))}_parse(t){let n=zT(t.firestore);return function(r,o,a,l,c,u,h){let f;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ce(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){AV(h,u);let p=[];for(let v of h)p.push(IV(l,r,v));f={arrayValue:{values:p}}}else f=IV(l,r,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||AV(h,u),f=Jee(a,o,h,u==="in"||u==="not-in");return nn.create(c,u,f)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}};var DT=class e extends $f{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new e(t,n)}_parse(t){let n=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Ks.create(n,this._getOperator())}_apply(t){let n=this._parse(t);return n.getFilters().length===0?t:(function(s,r){let o=s,a=r.getFlattenedFilters();for(let l of a)LB(o,l),o=pD(o,l)}(t._query,n),new Vl(t.firestore,t.converter,pD(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var TT=class e extends XC{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new e(t,n)}_apply(t){let n=function(s,r,o){if(s.startAt!==null)throw new ce(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ce(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new kl(r,o)}(t._query,this._field,this._direction);return new Vl(t.firestore,t.converter,function(s,r){let o=s.explicitOrderBy.concat([r]);return new ba(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(t._query,n))}};function kB(e,t="asc"){let n=t,i=KT("orderBy",e);return TT._create(i,n)}function IV(e,t,n){if(typeof(n=ct(n))=="string"){if(n==="")throw new ce(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BV(t)&&n.indexOf("/")!==-1)throw new ce(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=t.path.child(Pt.fromString(n));if(!we.isDocumentKey(i))throw new ce(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return eV(e,new we(i))}if(n instanceof ri)return eV(e,n._key);throw new ce(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ly(n)}.`)}function AV(e,t){if(!Array.isArray(e)||e.length===0)throw new ce(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function LB(e,t){let n=function(s,r){for(let o of s)for(let a of o.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new ce(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ce(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}var RT=class{convertValue(t,n="none"){switch(Nl(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Gt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(_a(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw Ie()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){let i={};return Gl(t,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertGeoPoint(t){return new zf(Gt(t.latitude),Gt(t.longitude))}convertArray(t,n){return(t.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(t,n){switch(n){case"previous":let i=PT(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Lf(t));default:return null}}convertTimestamp(t){let n=po(t);return new sn(n.seconds,n.nanos)}convertDocumentKey(t,n){let i=Pt.fromString(t);vt(oB(i));let s=new DC(i.get(1),i.get(3)),r=new we(i.popFirst(5));return s.isEqual(n)||fo(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}};function ete(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}var Fl=class{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},ZC=class extends JC{constructor(t,n,i,s,r,o){super(t,n,i,s,o),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let n=new Uu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){let i=this._document.data.field(KT("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},Uu=class extends ZC{data(t={}){return super.data(t)}},IT=class{constructor(t,n,i,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new Fl(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){let t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(i=>{t.call(n,new Uu(this._firestore,this._userDataWriter,i.key,i,new Fl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{let l=new Uu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Fl(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{let l=new Uu(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Fl(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter),c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:tte(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function tte(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie()}}function VB(e){e=Mr(e,ri);let t=Mr(e.firestore,mo);return zee(jT(t),e._key).then(n=>UB(t,e,n))}var ey=class extends RT{constructor(t){super(),this.firestore=t}convertBytes(t){return new jf(t)}convertReference(t){let n=this.convertDocumentKey(t,this.firestore._databaseId);return new ri(this.firestore,null,n)}};function BB(e,t,n,...i){e=Mr(e,ri);let s=Mr(e.firestore,mo),r=zT(s),o;return o=typeof(t=ct(t))=="string"||t instanceof ed?Yee(r,"updateDoc",e._key,t,n,i):Qee(r,"updateDoc",e._key,t),YT(s,[o.toMutation(e._key,ho.exists(!0))])}function GB(e){return YT(Mr(e.firestore,mo),[new Bf(e._key,ho.none())])}function HB(e,t){let n=Mr(e.firestore,mo),i=WT(e),s=ete(e.converter,t);return YT(n,[Kee(zT(e.firestore),"addDoc",i._key,s,e.converter!==null,{}).toMutation(i._key,ho.exists(!1))]).then(()=>i)}function QT(e,...t){var n,i,s;e=ct(e);let r={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||RV(t[o])||(r=t[o],o++);let a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(RV(t[o])){let h=t[o];t[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),t[o+1]=(i=h.error)===null||i===void 0?void 0:i.bind(h),t[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,c,u;if(e instanceof ri)c=Mr(e.firestore,mo),u=ny(e._key.path),l={next:h=>{t[o]&&t[o](UB(c,e,h))},error:t[o+1],complete:t[o+2]};else{let h=Mr(e,Vl);c=Mr(h.firestore,mo),u=h._query;let f=new ey(c);l={next:p=>{t[o]&&t[o](new IT(c,f,h,p))},error:t[o+1],complete:t[o+2]},Zee(e._query)}return function(f,p,v,y){let C=new zC(y),E=new HC(p,C,v);return f.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return gB(yield mT(f),E)})),()=>{C.Ga(),f.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return mB(yield mT(f),E)}))}}(jT(c),u,a,l)}function YT(e,t){return function(i,s){let r=new Tr;return i.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return Oee(yield jee(i),s,r)})),r.promise}(jT(e),t)}function UB(e,t,n){let i=n.docs.get(t._key),s=new ey(e);return new ZC(e,s,t._key,i,new Fl(n.hasPendingWrites,n.fromCache),t.converter)}function WB(...e){return new wT("arrayUnion",e)}function jB(...e){return new ST("arrayRemove",e)}(function(t,n=!0){(function(s){td=s})(Bo),Nt(new Ot("firestore",(i,{instanceIdentifier:s,options:r})=>{let o=i.getProvider("app").getImmediate(),a=new mo(new KE(i.getProvider("auth-internal")),new XE(i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ce(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DC(c.options.projectId,u)}(o,s),o);return r=Object.assign({useFetchStreams:n},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),Se(JL,"4.6.5",t),Se(JL,"4.6.5","esm2017")})();var cy=function(){return cy=Object.assign||function(t){for(var n,i=1,s=arguments.length;i<s;i++){n=arguments[i];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cy.apply(this,arguments)};var ste={includeMetadataChanges:!1};function zB(e,t){return t===void 0&&(t=ste),new le(function(n){var i=QT(e,t,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:i}})}function $B(e,t){var n;t===void 0&&(t={});var i=e.data(t);return!e.exists()||typeof i!="object"||i===null||!t.idField?i:cy(cy({},i),(n={},n[t.idField]=e.id,n))}function qB(e){return zB(e,{includeMetadataChanges:!0}).pipe(oe(function(t){return t.docs}))}function KB(e,t){return t===void 0&&(t={}),qB(e).pipe(oe(function(n){return n.map(function(i){return $B(i,t)})}))}var vo=class{constructor(t){return t}},QB="firestore",JT=class{constructor(){return Fn(QB)}};var XT=new te("angularfire2.firestore-instances");function rte(e,t){let n=Bn(QB,e,t);return n&&new vo(n)}function ote(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new vo(i)}}var ate={provide:JT,deps:[[new Le,XT]]},lte={provide:vo,useFactory:rte,deps:[[new Le,XT],$t]};function YB(e,...t){return Se("angularfire",Bt.full,"fst"),mt([lte,ate,{provide:XT,useFactory:ote(e),multi:!0,deps:[de,Ge,Xt,un,[new Le,Ws],[new Le,ii],...t]}])}var Jf=je(KB,!0);var uy=je(HB,!0);var JB=je(jB,!0),XB=je(WB,!0);var Wl=je(RB,!0);var dy=je(GB,!0);var Co=je(WT,!0);var ZB=je(VB,!0);var eG=je(IB,!0);var tG=je(kB,!0);var nG=je(NB,!0);var id=je(BB,!0);var sd=(()=>{let t=class t{constructor(i,s){this.afAuth=i,this.fs=s,this.userId=null,this.incomeTags=new wt([]),this.incomeTags$=this.incomeTags.asObservable(),this.expenseTags=new wt([]),this.expenseTags$=this.expenseTags.asObservable(),this.afAuth.authState.pipe(ke(r=>r?(this.userId=r.uid,this.getTags()):(this.userId=null,X([])))).subscribe(r=>{this.separateTagsByType(r)})}getTagFromId(i,s){return(s==="income"?this.incomeTags$:this.expenseTags$).pipe(ke(r=>{let o=r.find(a=>a.id===i);return X(o||{id:"",name:"",type:s})}))}synchronousGetTagFromId(i,s){return(s==="income"?this.incomeTags.value:this.expenseTags.value).find(a=>a.id===i)||{id:"",name:"",type:s}}separateTagsByType(i){this.incomeTags.next(i.filter(s=>s.type==="income")),this.expenseTags.next(i.filter(s=>s.type==="expense"))}getTags(){if(!this.userId)return X([]);let i=Wl(this.fs,`tags/${this.userId}/userTags`);return Jf(i,{idField:"id"})}addTag(i,s){if(!this.userId)return X("");let r={name:i,type:s};return new le(o=>{uy(Wl(this.fs,`tags/${this.userId}/userTags`),r).then(a=>{o.next(a.id),o.complete()}).catch(a=>o.error(a))})}updateTag(i,s){if(!this.userId)return X();let r=Co(this.fs,`tags/${this.userId}/userTags/${i}`);return new le(o=>{id(r,s).then(()=>{o.next(),o.complete()}).catch(a=>o.error(a))})}deleteTag(i){if(!this.userId)return X();let s=Co(this.fs,`tags/${this.userId}/userTags/${i}`);return new le(r=>{dy(s).then(()=>{r.next(),r.complete()}).catch(o=>r.error(o))})}addTagToTransaction(i,s,r){if(!this.userId)return X();let o=Co(this.fs,`transactions/${this.userId}/${r}/${i}`);return new le(a=>{id(o,{tagIds:XB(s)}).then(()=>{a.next(),a.complete()}).catch(l=>a.error(l))})}removeTagFromTransaction(i,s,r){if(!this.userId)return X();let o=Co(this.fs,`transactions/${this.userId}/${r}/${i}`);return new le(a=>{id(o,{tagIds:JB(s)}).then(()=>{a.next(),a.complete()}).catch(l=>a.error(l))})}getTagsForTransaction(i,s){if(!this.userId)return X([]);let r=Co(this.fs,`transactions/${this.userId}/${s}/${i}`);return new le(o=>{ZB(r).then(a=>{if(a.exists()){let l=B({id:a.id},a.data());this.getTags().pipe(oe(c=>c.filter(u=>l.tagIds.includes(u.id)))).subscribe(c=>{o.next(c),o.complete()},c=>o.error(c))}else o.next([]),o.complete()}).catch(a=>o.error(a))})}getTransactionsByTag(i,s){if(!this.userId)return X([]);let r=Wl(this.fs,`transactions/${this.userId}/${s}`);return Jf(r,{idField:"id"}).pipe(oe(o=>o.filter(a=>{let l=a.tagIds||[];return Array.isArray(l)&&l.includes(i)})))}};t.\u0275fac=function(s){return new(s||t)(Z(Tu),Z(vo))},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var hy=(()=>{let t=class t{constructor(i){this.tagService=i}formatDateToDayMonthYearWeekday(i){let s={day:"2-digit",month:"short",year:"numeric",weekday:"short"},r=i.toLocaleDateString("en-GB",s),[o,a,l,c]=r.replace(",","").split(" ");return`${l} ${a} ${c} (${o})`}moneyToLineBarData(i){return i.map(s=>({tag:s.tags[0],value:[s.date,s.amount],title:s.title??""}))}dateToMilli(i){return new Date(i).getTime()}milliToDate(i){return new Date(i).toLocaleDateString("en-CA",{month:"short",day:"2-digit"}).split("T")[0]}dateToMonthDateYearDay(i,s=!0){let r={weekday:"short",year:"numeric",month:"long",day:s?"numeric":void 0};return new Date(i).toLocaleDateString("en-US",r)}groupLineBarDataByDay(i){let s={};return i.forEach(r=>{let o=new Date(r.value[0]),a=`${o.getFullYear()}-${(o.getMonth()+1).toString().padStart(2,"0")}-${o.getDate().toString().padStart(2,"0")}`;s[a]||(s[a]=[]),s[a].push({tag:r.tag,value:r.value[1],title:r.title})}),Object.entries(s).map(([r,o])=>{let a=o,[l,c,u]=r.split("-");return{value:[new Date(parseInt(l),parseInt(c)-1,parseInt(u)).getTime(),a.reduce((f,p)=>f+Number(p.value),0)],points:a}})}groupBarDataByMonth(i){let s=[];return i.forEach(r=>{let o=new Date(r[0]),a=`${o.getFullYear()}-${(o.getMonth()+1).toString().padStart(2,"0")}`;s[a]||(s[a]=0),s[a]+=r[1]}),Object.entries(s).map(([r,o])=>{let[a,l]=r.split("-");return[new Date(parseInt(a),parseInt(l)-1).getTime(),o]})}groupPointsByTags(i){return i.reduce((s,r)=>(s[r.tag]||(s[r.tag]={tag:r.tag,points:[]}),s[r.tag].points.push({title:r.title,value:r.value}),s),{})}formatTooltipBySortedPoints(i,s=!1){return Object.values(i).map(r=>{let o=this.tagService.synchronousGetTagFromId(r.tag,s?"income":"expense").name,a=r.points.map(l=>`${l.title}: \u20B1${l.value.toLocaleString()}`).join("<br/>");return`<small><pr><code>${o}</code></pr></small><br/>${a}`}).join("<br/>")}};t.\u0275fac=function(s){return new(s||t)(Z(sd))},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function cte(e,t){if(e&1&&(Jr(),H(0,"svg",10),ne(1,"path",11),U()),e&2){let n=fe(2);Mn(n.arrowIconClass)}}function ute(e,t){if(e&1){let n=st();H(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),ue(4),U(),H(5,"p",4),ue(6),H(7,"span",5),ue(8),Ce(9,cte,2,2,":svg:svg",6),U()()(),H(10,"div",7)(11,"button",8),pe("click",function(){De(n);let s=fe();return Te(s.toggleChartType())}),ne(12,"i"),U()()(),H(13,"div"),ne(14,"div",9),U()()}if(e&2){let n=fe();K(4),Gi(n.title),K(2),Vt(" ",n.percentChangeMessage," "),K(),Mn(n.percentChangeClass),K(),Vt(" ",n.percentChange.toFixed(0),"% "),K(),ti(9,n.percentChange!==0?9:-1),K(3),Mn(n.toggleChartTypeSymbol),K(2),ul("height",n.height),re("options",n.options)}}var rG=(()=>{let t=class t{constructor(i){this.utilService=i,this.data=[],this.title="",this.percentChangeMessage="Recent change:",this.isIncome=!1,this.type="line",this.height="150px",this.percentChange=0,this.isLoading=!1,this.options={tooltip:{confine:!0,trigger:"axis",formatter:s=>{s=s[0];let r=this.utilService.groupPointsByTags(s.data.points),o=this.utilService.dateToMonthDateYearDay(s.value[0]),a=this.utilService.formatTooltipBySortedPoints(r,this.isIncome);return`<small>${o}</small><br/>${a}<br/>${s.data.points.length>1?`<small>Total: \u20B1${s.value[1].toLocaleString()}</small>`:""}`},axisPointer:{animation:!1}},xAxis:{type:"category",splitLine:{show:!1},axisLabel:{formatter:s=>this.utilService.milliToDate(Number(s))},show:!1},grid:{bottom:"5%",top:"5%",left:0,right:0},yAxis:{type:"value",splitLine:{show:!1},show:!1},series:[{name:"Mock Data",type:this.type,showSymbol:!0,data:[],itemStyle:{color:"#c23531"}}]}}ngOnInit(){this.loadData()}ngOnChanges(){this.loadData()}toggleChartType(){this.type==="line"?this.type="bar":this.type="line",this.loadData()}loadData(){this.isLoading=!0;let i=this.utilService.groupLineBarDataByDay(this.data);this.percentChange=this.calculatePercentChange(this.data),this.options=ae(B({},this.options),{series:[{data:i,type:this.type,itemStyle:{color:"#c23531"}}]}),this.isLoading=!1}get toggleChartTypeSymbol(){return this.type==="bar"?"bi bi-bar-chart-fill":"bi bi-graph-up"}calculatePercentChange(i){if(i.length<2)return 0;let s=i[0].value[1];return(i[i.length-1].value[1]-s)/s*100}get arrowIconClass(){return this.percentChange>0?"w-3 h-3 ms-1":"w-3 h-3 ms-1 rotate-180"}get percentChangeClass(){let i="";if(this.percentChange!==0){let s=this.percentChange>0;this.isIncome?i=s?"text-success":"text-danger":i=s?"text-danger":"text-success"}return`${i}`}};t.\u0275fac=function(s){return new(s||t)(Q(hy))},t.\u0275cmp=_e({type:t,selectors:[["app-line-bar-chart"]],inputs:{data:"data",title:"title",percentChangeMessage:"percentChangeMessage",isIncome:"isIncome",type:"type",height:"height"},standalone:!0,features:[kt,be],decls:1,vars:1,consts:[[1,"bg-light","rounded-3","p-3"],[1,"d-flex","m-3"],[1,"col-6","d-flex","flex-column","justify-content-start"],[1,"fw-bold"],[1,"text-muted"],[1,"fw-semibold","text-start","ms-2"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 10 14",3,"class"],[1,"col-3","offset-2","d-flex","justify-content-end"],["type","button",1,"btn","btn-warning","p-1","col-6","offset-6",3,"click"],["echarts","",1,"demo-chart",3,"options"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 10 14"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13V1m0 0L1 5m4-4 4 4"]],template:function(s,r){s&1&&Ce(0,ute,15,11,"div",0),s&2&&ti(0,r.isLoading?-1:0)},dependencies:[qL],styles:["svg[_ngcontent-%COMP%]{width:20px;height:20px}.btn[_ngcontent-%COMP%]{width:50px;height:50px}"]});let e=t;return e})();var oG=(()=>{let t=class t{constructor(){this.title="Title",this.value=0,this.percentChange=0,this.isIncome=!0}get roundedPercentChange(){let i=Math.round(this.percentChange);return`${i>0?"+":""}${i}`}get percentChangeClass(){return this.percentChange===0?"":this.isIncome?this.percentChange>0?"text-success":"text-danger":this.percentChange>0?"text-danger":"text-success"}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=_e({type:t,selectors:[["app-stat-card"]],inputs:{title:"title",value:"value",percentChange:"percentChange",isIncome:"isIncome"},standalone:!0,features:[be],decls:7,vars:5,consts:[[1,"bg-light","border","border-primary","rounded-4","p-4"],[1,"text-muted","small"],[1,"h2","fw-bold"],[1,"small","mb-0"]],template:function(s,r){s&1&&(H(0,"div",0)(1,"h3",1),ue(2),U(),H(3,"p",2),ue(4),U(),H(5,"p",3),ue(6),U()()),s&2&&(K(2),Gi(r.title),K(2),Gi(r.value.toLocaleString()),K(),Mn(r.percentChangeClass),K(),Vt(" ",r.roundedPercentChange,"% "))}});let e=t;return e})();var dte=e=>({"add-tag":e});function hte(e,t){if(e&1){let n=st();H(0,"div",3),ue(1),H(2,"i",4),pe("click",function(){De(n);let s=fe();return Te(s.removeExistingTag())}),U()()}if(e&2){let n=fe();K(),Vt(" ",n.selectedTag.name," ")}}function fte(e,t){if(e&1){let n=st();H(0,"textarea",5),pe("keydown.enter",function(s){De(n);let r=fe();return Te(r.onEnterKey(s))}),U()}if(e&2){let n=fe();re("formControl",n.tagForm)}}function pte(e,t){if(e&1&&(H(0,"li",10),ue(1),U()),e&2){let n=fe(2);K(),Vt(' Add tag "',n.tagForm.value,'" ')}}function gte(e,t){if(e&1){let n=st();H(0,"li",11),pe("click",function(){let s=De(n).$implicit,r=fe(2);return Te(r.addExistingTag(s))}),ue(1),ne(2,"i",12),U()}if(e&2){let n=t.$implicit,i=fe(2);re("ngClass",ru(2,dte,i.isOptionHighlighted(n.name))),K(),Vt(" ",n.name," ")}}function mte(e,t){if(e&1&&(H(0,"div",6)(1,"ul",7),Ce(2,pte,2,1,"li",8)(3,gte,3,4,"li",9),U()()),e&2){let n=fe();K(2),re("ngIf",n.showAddTagOption()),K(),re("ngForOf",n.suggestions)}}var aG=(()=>{let t=class t{constructor(i){this.tagService=i,this.type="income",this.tagId=null,this.tagAdded=new W,this.incomeTags=[],this.expenseTags=[],this.tagForm=new pa(""),this.selectedTag=null,this.suggestions=[],this.searchDelay=0,this.tagService.incomeTags$.subscribe(s=>{this.incomeTags=s}),this.tagService.expenseTags$.subscribe(s=>{this.expenseTags=s}),this.tagForm.valueChanges.pipe(iS(this.searchDelay)).subscribe(s=>{this.filterSuggestions(s)})}ngOnInit(){this.suggestions=this.type==="income"?this.incomeTags:this.expenseTags,this.tagId!==null&&(this.removeTagFromSuggestions(this.tagId),this.tagService.getTagFromId(this.tagId,this.type).subscribe(i=>{this.selectedTag=i}))}filterSuggestions(i){if(!i)this.suggestions=this.type==="income"?this.incomeTags:this.expenseTags;else{let s=i.toLowerCase();this.suggestions=(this.type==="income"?this.incomeTags:this.expenseTags).filter(r=>r.name.toLowerCase().includes(s)).sort((r,o)=>r.name.length-o.name.length)}this.selectedTag&&this.removeTagFromSuggestions(this.selectedTag.id)}addTag(i){console.log("Adding tag:",i),this.tagService.addTag(i,this.type).subscribe(s=>{console.log("Tag added successfully"),this.tagAdded.emit(s),this.tagForm.setValue(""),this.selectedTag=this.tagService.synchronousGetTagFromId(s,this.type),this.removeTagFromSuggestions(s)},s=>{console.error("Error adding tag:",s)})}addExistingTag(i){console.log("Adding existing tag:",i.name),this.tagAdded.emit(i.id),this.tagForm.setValue(""),this.selectedTag=i,this.removeTagFromSuggestions(i.id)}removeExistingTag(){this.selectedTag&&(this.tagAdded.emit(null),this.suggestions=this.type==="income"?this.incomeTags:this.expenseTags,this.selectedTag=null)}removeTagFromSuggestions(i){this.suggestions=this.suggestions.filter(s=>s.id.toLowerCase()!==i.toLowerCase())}showAddTagOption(){return!this.suggestions.some(i=>i.name.toLowerCase()===this.tagForm.value.toLowerCase())}onEnterKey(i){if(!this.tagForm.value)return;if(i.preventDefault(),this.suggestions.find(r=>r.name.toLowerCase()===this.tagForm.value.toLowerCase())){this.addExistingTag(this.suggestions[0]);return}this.addTag(this.tagForm.value)}isOptionHighlighted(i){return i.toLowerCase()===this.tagForm.value.toLowerCase()}};t.\u0275fac=function(s){return new(s||t)(Q(sd))},t.\u0275cmp=_e({type:t,selectors:[["app-tag-input"]],inputs:{type:"type",tagId:"tagId"},outputs:{tagAdded:"tagAdded"},standalone:!0,features:[be],decls:3,vars:3,consts:[["class","badge bg-primary text-wrap",4,"ngIf"],["class","form-control border-0 shadow-none","id","tagIds","placeholder","Add a tag","style","height: 40px; resize: none; overflow: hidden","rows","3",3,"formControl","keydown.enter",4,"ngIf"],["class","position-relative col-6",4,"ngIf"],[1,"badge","bg-primary","text-wrap"],[1,"bi","bi-x-circle-fill","ms-1",3,"click"],["id","tagIds","placeholder","Add a tag","rows","3",1,"form-control","border-0","shadow-none",2,"height","40px","resize","none","overflow","hidden",3,"keydown.enter","formControl"],[1,"position-relative","col-6"],[1,"list-group","position-absolute","shadow","rounded","border","border-1","border-secondary","bg-white","w-100","mt-1","p-0",2,"max-height","125px","overflow-y","auto"],["class","add-tag list-group-item d-flex justify-content-between align-items-center p-2",4,"ngIf"],["class","list-group-item d-flex justify-content-between align-items-center p-2 icon-link-hover",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"add-tag","list-group-item","d-flex","justify-content-between","align-items-center","p-2"],[1,"list-group-item","d-flex","justify-content-between","align-items-center","p-2","icon-link-hover",3,"click","ngClass"],[1,"bi","bi-plus-lg","mx-1"]],template:function(s,r){s&1&&Ce(0,hte,3,1,"div",0)(1,fte,1,1,"textarea",1)(2,mte,4,2,"div",2),s&2&&(re("ngIf",r.selectedTag),K(),re("ngIf",r.selectedTag===null),K(),re("ngIf",r.tagForm.value))},dependencies:[Er,us,br,mf,Mt,hv,yr,Vn],styles:[".add-tag[_ngcontent-%COMP%]{background-color:#fd7e14;color:#fff}li[_ngcontent-%COMP%]{cursor:pointer}"]});let e=t;return e})();var rd=(()=>{let t=class t{constructor(i,s){this.afAuth=i,this.fs=s,this.userId=null,this.incomeTransactionsSubject=new wt([]),this.incomeTransactions$=this.incomeTransactionsSubject.asObservable(),this.expenseTransactionsSubject=new wt([]),this.expenseTransactions$=this.expenseTransactionsSubject.asObservable(),this.afAuth.authState.pipe(ke(r=>r?(this.userId=r.uid,this.getAllTransactions()):(this.userId=null,X({incomeTransactions:[],expenseTransactions:[]})))).subscribe({next:({incomeTransactions:r,expenseTransactions:o})=>{this.incomeTransactionsSubject.next(r),this.expenseTransactionsSubject.next(o)},error:r=>{console.error("Error fetching transactions:",r)}})}getTransactionFromId(i,s){return(s==="income"?this.incomeTransactionsSubject:this.expenseTransactionsSubject).value.find(r=>r.id===i)}getAllTransactions(){if(!this.userId)return X({incomeTransactions:[],expenseTransactions:[]});let i=this.getIncomeTransactions(),s=this.getExpenseTransactions();return Fs([i,s]).pipe(oe(([r,o])=>({incomeTransactions:r,expenseTransactions:o})))}getTransactions(i){if(!this.userId)return X([]);let s=Wl(this.fs,`transactions/${this.userId}/${i}`),r=nG(s,tG("date"));return Jf(r,{idField:"id"}).pipe(oe(o=>o.map(a=>ae(B({},a),{date:a.date instanceof sn?a.date.toDate():a.date}))))}getIncomeTransactions(){return this.getTransactions("income")}getExpenseTransactions(){return this.getTransactions("expense")}addTransaction(i){let s=uy(Wl(this.fs,`transactions/${this.userId}/${i.type}`),i);return X(s)}updateTransaction(i,s){let r=Co(this.fs,`transactions/${this.userId}/${s.type}`,i),o=id(r,ae(B({},s),{date:sn.fromDate(s.date)}));return X(o)}deleteTransaction(i){let s=Co(this.fs,`transactions/${this.userId}/${i.type}`,i.id);return X(dy(s))}};t.\u0275fac=function(s){return new(s||t)(Z(Tu),Z(vo))},t.\u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var vte=["deleteConfirmationModal"];function Cte(e,t){e&1&&(H(0,"div",21),ue(1," Title is required. "),U())}function yte(e,t){e&1&&(H(0,"div",21),ue(1," Amount is required and must be greater than or equal to 0. "),U())}function wte(e,t){e&1&&(H(0,"div",21),ue(1," Date is required. "),U())}function Ste(e,t){if(e&1){let n=st();H(0,"div",22)(1,"span",23),pe("click",function(){De(n);let s=fe();return Te(s.deleteConfirmation())}),ne(2,"i",24),ue(3," Delete Transaction "),U()()}}function _te(e,t){if(e&1){let n=st();H(0,"div",1)(1,"div",2)(2,"i",3),pe("click",function(){De(n);let s=fe();return Te(s.closeDeleteConfirmation())}),U(),H(3,"h4",25),ue(4,"Delete Confirmation"),U(),H(5,"p",26),ue(6," Are you sure you want to delete this transaction? "),U(),H(7,"div",27)(8,"button",28),pe("click",function(){De(n);let s=fe();return Te(s.deleteTransaction())}),ue(9," Delete "),U(),H(10,"button",29),pe("click",function(){De(n);let s=fe();return Te(s.closeDeleteConfirmation())}),ue(11," Cancel "),U()()()()}}var fy=(()=>{let t=class t{constructor(i,s,r){this.ngbModal=i,this.fb=s,this.transactionService=r,this.transactionForm=this.fb.group({title:["",cs.required],amount:[0,[cs.required,cs.min(0)]],type:["income",cs.required],description:[""],date:["",cs.required],tagIds:[[]]}),this.transactionType="income",this.selectedTransaction=null}ngOnInit(){this.initializeForm()}ngOnChanges(i){i&&i.transactionType&&(this.transactionType=i.transactionType.currentValue,this.transactionForm.get("type")?.setValue(this.transactionType)),i&&i.selectedTransaction&&(this.selectedTransaction=i.selectedTransaction.currentValue,this.initializeForm())}initializeForm(){this.selectedTransaction?this.transactionForm.patchValue(ae(B({},this.selectedTransaction),{date:this.formatDate(new Date(this.selectedTransaction.date))})):this.transactionForm.patchValue({amount:null,type:this.transactionType,description:"",date:this.formatDate(new Date),tagIds:[]})}formatDate(i){return i.toISOString().split("T")[0]}deleteConfirmation(){this.deleteConfirmationModalReference=this.ngbModal.open(this.deleteConfirmationModal,{centered:!0,backdrop:!0,size:"sm"})}closeDeleteConfirmation(){this.deleteConfirmationModalReference.close()}deleteTransaction(){this.selectedTransaction&&this.transactionService.deleteTransaction(this.selectedTransaction).subscribe({next:()=>{console.log("Transaction deleted successfully")},error:i=>{console.error("Error deleting transaction",i)}}),this.closeModal()}parseDate(i){return new Date(i)}closeModal(){this.ngbModal.dismissAll(),this.transactionForm.reset()}updateTransactionTag(i){if(console.log("Tag ID:",i),!i){this.transactionForm.get("tagIds")?.setValue([]);return}this.transactionForm.get("tagIds")?.setValue([i])}onSubmit(){if(this.transactionForm.valid){let i=this.transactionForm.value,s={title:i.title??"",amount:i.amount??0,type:i.type,description:i.description??"",date:this.parseDate(i.date??""),tagIds:i.tagIds??[]};this.selectedTransaction?this.transactionService.updateTransaction(this.selectedTransaction.id,s).subscribe({next:()=>{console.log("Transaction updated successfully")},error:r=>{console.error("Error updating transaction",r)}}):this.transactionService.addTransaction(s).subscribe({next:()=>{console.log("Transaction added successfully")},error:r=>{console.error("Error adding transaction",r)}}),this.closeModal()}else console.error("Form is invalid")}get isPost(){return this.selectedTransaction===null}};t.\u0275fac=function(s){return new(s||t)(Q(Ou),Q(bu),Q(rd))},t.\u0275cmp=_e({type:t,selectors:[["app-transaction-form"]],viewQuery:function(s,r){if(s&1&&rs(vte,5),s&2){let o;Si(o=_i())&&(r.deleteConfirmationModal=o.first)}},inputs:{transactionType:"transactionType",selectedTransaction:"selectedTransaction"},standalone:!0,features:[kt,be],decls:36,vars:13,consts:[["deleteConfirmationModal",""],[1,"modal-content","d-flex","align-items-center","justify-content-center","p-4"],[1,"user-select-none","w-100"],["role","button",1,"bi","bi-x-lg","float-end",3,"click"],["id","modal-title",1,"modal-title","fw-bold"],[1,"text-muted"],[1,"p-3",3,"ngSubmit","formGroup"],[1,"form-row","mb-3"],["for","title",1,"form-label"],["type","text","id","title","formControlName","title","placeholder","Enter title",1,"form-control"],["class","text-danger",4,"ngIf"],["for","amount",1,"form-label"],["type","number","id","amount","formControlName","amount","placeholder","Enter amount",1,"form-control"],["for","description",1,"form-label"],["id","description","formControlName","description","placeholder","Enter description","rows","3",1,"form-control"],["for","date",1,"form-label"],["type","date","id","date","formControlName","date",1,"form-control"],[3,"tagAdded","tagId","type"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-warning",3,"disabled"],["class","modal-footer d-flex justify-content-center",4,"ngIf"],[1,"text-danger"],[1,"modal-footer","d-flex","justify-content-center"],["role","button",1,"text-danger",3,"click"],[1,"bi","bi-trash"],[1,"modal-title","fw-bold"],[1,"text-muted","mb-3"],[1,"d-flex","justify-content-center"],["type","button",1,"bg-danger","text-white","border-0","rounded-3","col-5",3,"click"],["type","button",1,"col-5","bg-white","rounded-3","offset-2","border-1",3,"click"]],template:function(s,r){if(s&1){let o=st();H(0,"div",1)(1,"div",2)(2,"i",3),pe("click",function(){return De(o),Te(r.closeModal())}),U(),H(3,"h4",4),ue(4),Eb(5,"titlecase"),U(),H(6,"p",5),ue(7),U(),H(8,"form",6),pe("ngSubmit",function(){return De(o),Te(r.onSubmit())}),H(9,"div",7)(10,"label",8),ue(11,"Title"),U(),ne(12,"input",9),Ce(13,Cte,2,0,"div",10),U(),H(14,"div",7)(15,"label",11),ue(16,"Amount"),U(),ne(17,"input",12),Ce(18,yte,2,0,"div",10),U(),H(19,"div",7)(20,"label",13),ue(21,"Description"),U(),ne(22,"textarea",14),U(),H(23,"div",7)(24,"label",15),ue(25,"Date"),U(),ne(26,"input",16),Ce(27,wte,2,0,"div",10),U(),H(28,"div",7)(29,"app-tag-input",17),pe("tagAdded",function(l){return De(o),Te(r.updateTransactionTag(l))}),U()(),H(30,"div",18)(31,"button",19),ue(32),U()()(),Ce(33,Ste,4,0,"div",20),U()(),Ce(34,_te,12,0,"ng-template",null,0,ni)}s&2&&(K(4),Vt(" ",Db(5,11,r.isPost?r.transactionType:"Update Transaction")," "),K(3),Vt("Enter your ",r.transactionType," details below."),K(),re("formGroup",r.transactionForm),K(5),re("ngIf",r.transactionForm.controls.title.invalid&&r.transactionForm.controls.title.touched),K(5),re("ngIf",r.transactionForm.controls.amount.invalid&&r.transactionForm.controls.amount.touched),K(9),re("ngIf",r.transactionForm.controls.date.invalid&&r.transactionForm.controls.date.touched),K(2),re("tagId",(r.selectedTransaction==null||r.selectedTransaction.tagIds==null?null:r.selectedTransaction.tagIds[0])||null)("type",r.transactionType),K(2),re("disabled",r.transactionForm.invalid),K(),Vt(" ",r.isPost?"Submit":"Update"," "),K(),re("ngIf",!r.isPost))},dependencies:[Er,_u,us,z0,br,Su,Cl,yl,Mt,Vn,dN,aG]});let e=t;return e})();var vd=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,n){let i=t?this.allAsyncListeners:this.allSyncListeners,s=i.get(e);return!s&&n&&(s=new Set,i.set(e,s)),s}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,n=!1){this.getListeners(e,n,!0).add(t)}removeEventListener(e,t,n=!1){let i=this.getListeners(e,n,!1);i&&(i.delete(t),i.size===0&&(n?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){let t=e;this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){let n=e.type;if(t&&"event"in e){let a=e.event;a instanceof Event&&(e.eventPath=a.composedPath())}let i=(a,l)=>a.forEach(c=>{if(!l.has(c))return;let u=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>c(e)):()=>c(e);t?this.dispatchAsync(u):u()}),s=this.getListeners(n,t,!1)??new Set,r=new Set(s);r.size>0&&i(r,s),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(a=>{let l=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>a(n,e)):()=>a(n,e);t?this.dispatchAsync(l):l()})}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){let t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;let e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}};function We(e){if(!(!e||!e.length))return e[e.length-1]}function Xl(e,t,n){return e==null&&t==null?!0:e!=null&&t!=null&&e.length===t.length&&e.every((i,s)=>n?n(i,t[s]):t[s]===i)}function bte(e){return e.sort((t,n)=>t-n)}function OG(e,t){let n=e.indexOf(t);n>=0&&(e[n]=e[e.length-1],e.pop())}function li(e,t){let n=e.indexOf(t);n>=0&&e.splice(n,1)}function Ete(e,t){for(let n=0;n<t.length;n++)OG(e,t[n])}function Dte(e,t){for(let n=0;n<t.length;n++)li(e,t[n])}function Iy(e,t,n){e.splice(n,0,t)}function NG(e,t,n){Dte(e,t),t.slice().reverse().forEach(i=>Iy(e,i,n))}function ql(e,t){return e.indexOf(t)>-1}function Tte(e){return[].concat.apply([],e)}function lG(e,t){t==null||e==null||t.forEach(n=>e.push(n))}var kG="__ag_Grid_Stop_Propagation",Rte=["touchstart","touchend","touchmove","touchcancel","scroll"],tR={};function fd(e){e[kG]=!0}function Aa(e){return e[kG]===!0}var LG=(()=>{let e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return n=>{if(typeof tR[n]=="boolean")return tR[n];let i=document.createElement(e[n]||"div");return n="on"+n,tR[n]=n in i}})();function vR(e,t,n){let i=t;for(;i;){let s=e.getDomData(i,n);if(s)return s;i=i.parentElement}return null}function Ite(e,t){return!t||!e?!1:Mte(t).indexOf(e)>=0}function Ate(e){let t=[],n=e.target;for(;n;)t.push(n),n=n.parentElement;return t}function Mte(e){let t=e;return t.path?t.path:t.composedPath?t.composedPath():Ate(t)}function Pte(e,t,n,i){let r=ql(Rte,n)?{passive:!0}:void 0;e&&e.addEventListener&&e.addEventListener(t,n,i,r)}var L=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.gridId=e.context.getGridId(),this.frameworkOverrides=e.frameworkOverrides,this.stubContext=e.context,this.eventService=e.eventService,this.gos=e.gos,this.localeService=e.localeService}getFrameworkOverrides(){return this.frameworkOverrides}destroy(){for(let e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t){this.localEventService||(this.localEventService=new vd),this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService&&this.localEventService.removeEventListener(e,t)}dispatchLocalEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventService,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){let n=[];for(let i in t){let s=t[i];s&&n.push(this._setupListener(e,i,s))}return n}_setupListener(e,t,n){if(this.destroyed)return()=>null;e instanceof HTMLElement?Pte(this.getFrameworkOverrides(),e,t,n):e.addEventListener(t,n);let i=()=>(e.removeEventListener(t,n),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(s=>s!==i),null)}setupGridOptionListener(e,t){this.gos.addPropertyEventListener(e,t);let n=()=>(this.gos.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter(i=>i!==n),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;let n=e.join("-")+this.propertyListenerId++,i=s=>{if(s.changeSet){if(s.changeSet&&s.changeSet.id===this.lastChangeSetIdLookup[n])return;this.lastChangeSetIdLookup[n]=s.changeSet.id}let r={type:"gridPropertyChanged",changeSet:s.changeSet,source:s.source};t(r)};e.forEach(s=>this.setupGridOptionListener(s,i))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,t){let n=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),n}createBean(e,t,n){return(t||this.stubContext).createBean(e,n)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}},OR=class{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=n=>{this.frameworkOverrides.wrapOutgoing(()=>e(n))},this.wrappedListeners.set(e,t)),t}wrapGlobal(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=(n,i)=>{this.frameworkOverrides.wrapOutgoing(()=>e(n,i))},this.wrappedGlobalListeners.set(e,t)),t}unwrap(e){return this.wrappedListeners.get(e)??e}unwrapGlobal(e){return this.wrappedGlobalListeners.get(e)??e}};function Kl(e){return e==null||e===""?null:e}function q(e,t=!1){return e!=null&&(e!==""||t)}function Ve(e){return!q(e)}function bn(e){return e==null||e.length===0}function CR(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function Ql(e){if(e===void 0)return;if(e===null||e==="")return null;if(typeof e=="number")return isNaN(e)?void 0:e;let t=parseInt(e,10);return isNaN(t)?void 0:t}function yR(e){if(e!==void 0)return e===null||e===""?!1:wR(e)}function wR(e){return typeof e=="boolean"?e:typeof e=="string"?e.toUpperCase()==="TRUE"||e=="":!1}function Ay(e,t){let n=e?JSON.stringify(e):null,i=t?JSON.stringify(t):null;return n===i}function Fte(e,t,n=!1){let i=e==null,s=t==null;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),i&&s)return 0;if(i)return-1;if(s)return 1;function r(o,a){return o>a?1:o<a?-1:0}if(typeof e!="string"||!n)return r(e,t);try{return e.localeCompare(t)}catch{return r(e,t)}}function Ey(e){if(e instanceof Set||e instanceof Map){let t=[];return e.forEach(n=>t.push(n)),t}return Object.values(e)}var NR=new Set(["__proto__","constructor","prototype"]);function vs(e,t){if(e!=null){if(Array.isArray(e)){for(let n=0;n<e.length;n++)t(n.toString(),e[n]);return}for(let[n,i]of Object.entries(e))t(n,i)}}function VG(e){let t={},n=Object.keys(e);for(let i=0;i<n.length;i++){if(NR.has(n[i]))continue;let s=n[i],r=e[s];t[s]=r}return t}function SR(e,t){if(!e)return;let n=e,i={};return Object.keys(n).forEach(s=>{if(t&&t.indexOf(s)>=0||NR.has(s))return;let r=n[s];_R(r)&&r.constructor===Object?i[s]=SR(r):i[s]=r}),i}function Pa(e){if(!e)return[];let t=Object;if(typeof t.values=="function")return t.values(e);let n=[];for(let i in e)e.hasOwnProperty(i)&&e.propertyIsEnumerable(i)&&n.push(e[i]);return n}function Cs(e,t,n=!0,i=!1){q(t)&&vs(t,(s,r)=>{if(NR.has(s))return;let o=e[s];o!==r&&(i&&o==null&&r!=null&&typeof r=="object"&&r.constructor===Object&&(o={},e[s]=o),_R(r)&&_R(o)&&!Array.isArray(o)?Cs(o,r,n,i):(n||r!==void 0)&&(e[s]=r))})}function ip(e,t,n){if(!t||!e)return;if(!n)return e[t];let i=t.split("."),s=e;for(let r=0;r<i.length;r++){if(s==null)return;s=s[i[r]]}return s}function _R(e){return typeof e=="object"&&e!==null}var xte={resizable:!0,sortable:!0},Ote=0;function BG(){return Ote++}function Fa(e){return e instanceof HG}var GG=20,HG=class extends L{constructor(e,t,n,i){super(),this.isColumn=!0,this.instanceId=BG(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.columnEventService=new vd,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=t,this.colId=n,this.primary=i,this.setState(e)}wireBeans(e){this.columnHoverService=e.columnHoverService}getInstanceId(){return this.instanceId}setState(e){e.sort!==void 0?(e.sort==="asc"||e.sort==="desc")&&(this.sort=e.sort):(e.initialSort==="asc"||e.initialSort==="desc")&&(this.sort=e.initialSort);let t=e.sortIndex,n=e.initialSortIndex;t!==void 0?t!==null&&(this.sortIndex=t):n!==null&&(this.sortIndex=n);let i=e.hide,s=e.initialHide;i!==void 0?this.visible=!i:this.visible=!s,e.pinned!==void 0?this.setPinned(e.pinned):this.setPinned(e.initialPinned);let r=e.flex,o=e.initialFlex;r!==void 0?this.flex=r:o!==void 0&&(this.flex=o)}setColDef(e,t,n){this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.columnEventService.dispatchEvent(this.createColumnEvent("colDefChanged",n))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}postConstruct(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){let e=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=q(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=q(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){let e=this.colDef;this.minWidth=e.minWidth??GG,this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=q(this.colDef.tooltipField)||q(this.colDef.tooltipValueGetter)||q(this.colDef.tooltipComponent)}resetActualWidth(e){let t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t,n=Ql(e.width),i=Ql(e.initialWidth);return n!=null?t=n:i!=null?t=i:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(Ve(this.colDef)||Ve(this.colDef.showRowGroup))return!1;let t=this.colDef.showRowGroup===!0,n=this.colDef.showRowGroup===e;return t||n}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}addEventListener(e,t){this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.columnEventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new OR(this.frameworkOverrides));let n=this.frameworkEventListenerService?.wrap(t)??t;this.columnEventService.addEventListener(e,n)}removeEventListener(e,t){let n=this.frameworkEventListenerService?.unwrap(t)??t;this.columnEventService.removeEventListener(e,n)}createColumnFunctionCallbackParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){let t=this.createColumnFunctionCallbackParams(e),n=this.colDef.suppressNavigable;return n(t)}return!1}isCellEditable(e){return e.group&&!this.gos.get("enableGroupEdit")?!1:this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??xte[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){let n=this.createColumnFunctionCallbackParams(e);return t(n)}return!1}setMoving(e,t){this.moving=e,this.columnEventService.dispatchEvent(this.createColumnEvent("movingChanged",t))}createColumnEvent(e,t){return this.gos.addGridCommonParams({type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,t){this.sort!==e&&(this.sort=e,this.columnEventService.dispatchEvent(this.createColumnEvent("sortChanged",t))),this.dispatchStateUpdatedEvent("sort")}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return Ve(this.sort)}isSorting(){return q(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setMenuVisible(e,t){this.menuVisible!==e&&(this.menuVisible=e,this.columnEventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",t)))}isMenuVisible(){return this.menuVisible}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.columnEventService.dispatchEvent(this.createColumnEvent("leftChanged",t)))}isFilterActive(){return this.filterActive}setFilterActive(e,t,n){this.filterActive!==e&&(this.filterActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",t)));let i=this.createColumnEvent("filterChanged",t);n&&Cs(i,n),this.columnEventService.dispatchEvent(i)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){e===!0||e==="left"?this.pinned="left":e==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",t)))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",t)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){let n=e===!0;this.visible!==n&&(this.visible=n,this.columnEventService.dispatchEvent(this.createColumnEvent("visibleChanged",t))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){let e=this.getColDef();return!e.suppressSpanHeaderHeight&&!e.autoHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};let t=e.getPaddingLevel()+1,n=!0;for(;e;){if(!e.isPadding()){n=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:n}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){let t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(Ve(this.colDef.colSpan))return 1;let t=this.createBaseColDefParams(e),n=this.colDef.colSpan(t);return Math.max(n,1)}getRowSpan(e){if(Ve(this.colDef.rowSpan))return 1;let t=this.createBaseColDefParams(e),n=this.colDef.rowSpan(t);return Math.max(n,1)}setActualWidth(e,t,n=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),n||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.columnEventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,t){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",t))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,t){this.pivotActive!==e&&(this.pivotActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",t))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,t){this.aggregationActive!==e&&(this.aggregationActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnValueChanged",t)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchStateUpdatedEvent(e){this.columnEventService.dispatchEvent({type:"columnStateUpdated",key:e})}};function oi(e){return e instanceof Dy}var Dy=class extends L{constructor(e,t,n,i){super(),this.isColumn=!1,this.expandable=!1,this.instanceId=BG(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=t,this.expanded=!!e&&!!e.openByDefault,this.padding=n,this.level=i}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(t=>{Fa(t)?e.push(t):oi(t)&&t.addLeafColumns(e)})}getColumnGroupShow(){let e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();let e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,n=!1,i=this.findChildrenRemovingPadding();for(let r=0,o=i.length;r<o;r++){let a=i[r];if(!a.isVisible())continue;let l=a.getColumnGroupShow();l==="open"?(e=!0,n=!0):l==="closed"?(t=!0,n=!0):(e=!0,t=!0)}let s=e&&t&&n;this.expandable!==s&&(this.expandable=s,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){let e=[],t=n=>{n.forEach(i=>{oi(i)&&i.isPadding()?t(i.children):e.push(i)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},Nte={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},cG={};function kR(e,t){cG[t]||(e(),cG[t]=!0)}function ys(e,...t){console.log("AG Grid: "+e,...t)}function j(e,...t){kR(()=>console.warn("AG Grid: "+e,...t),e+t?.join(""))}function $e(e,...t){kR(()=>console.error("AG Grid: "+e,...t),e+t?.join(""))}function LR(e){return!!(e&&e.constructor&&e.call&&e.apply)}function kte(e){Lte(e,400)}var nR=[],iR=!1;function uG(e){nR.push(e),!iR&&(iR=!0,window.setTimeout(()=>{let t=nR.slice();nR.length=0,iR=!1,t.forEach(n=>n())},0))}function Lte(e,t=0){e.length>0&&window.setTimeout(()=>e.forEach(n=>n()),t)}function ci(e,t){let n;return function(...i){let s=this;window.clearTimeout(n),n=window.setTimeout(function(){e.apply(s,i)},t)}}function dG(e,t){let n=0;return function(...i){let s=this,r=new Date().getTime();r-n<t||(n=r,e.apply(s,i))}}function Vte(e,t,n=100,i){let s=new Date().getTime(),r=null,o=!1,a=()=>{let l=new Date().getTime()-s>n;(e()||l)&&(t(),o=!0,r!=null&&(window.clearInterval(r),r=null),l&&i&&j(i))};a(),o||(r=window.setInterval(a,10))}function Bte(...e){return t=>e.reduce((n,i)=>i(n),t)}var Gte=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=CR(e);let n=0;for(;;){let i;if(e?(i=e,n!==0&&(i+="_"+n)):t?(i=t,n!==0&&(i+="_"+n)):i=n,!this.existingKeys[i])return this.existingKeys[i]=!0,String(i);n++}}},hp="ag-Grid-AutoColumn";function VR(e){let t=[],n=i=>{for(let s=0;s<i.length;s++){let r=i[s];Fa(r)?t.push(r):oi(r)&&n(r.getChildren())}};return n(e),t}function So(e){return e.reduce((t,n)=>t+n.getActualWidth(),0)}function cd(e,t,n){let i={};if(!t)return;Eo(null,t,r=>{i[r.getInstanceId()]=r}),n&&Eo(null,n,r=>{i[r.getInstanceId()]=null});let s=Object.values(i).filter(r=>r!=null);e.destroyBeans(s)}function hG(e){return e.getId().startsWith(hp)}function Ty(e){let t=[];return e instanceof Array?e.some(i=>typeof i!="string")?j("if colDef.type is supplied an array it should be of type 'string[]'"):t=e:typeof e=="string"?t=e.split(","):j("colDef.type should be of type 'string' | 'string[]'"),t}var Hte=class extends L{constructor(){super(...arguments),this.beanName="columnFactory"}wireBeans(e){this.dataTypeService=e.dataTypeService}createColumnTree(e,t,n,i){let s=new Gte,{existingCols:r,existingGroups:o,existingColKeys:a}=this.extractExistingTreeData(n);s.addExistingKeys(a);let l=this.recursivelyCreateColumns(e,0,t,r,s,o,i),c=this.findMaxDept(l,0),u=this.balanceColumnTree(l,0,c,s);return Eo(null,u,(f,p)=>{oi(f)&&f.setupExpandable(),f.setOriginalParent(p)}),{columnTree:u,treeDept:c}}extractExistingTreeData(e){let t=[],n=[],i=[];return e&&Eo(null,e,s=>{if(oi(s)){let r=s;n.push(r)}else{let r=s;i.push(r.getId()),t.push(r)}}),{existingCols:t,existingGroups:n,existingColKeys:i}}createForAutoGroups(e,t){let n=[],i=this.findDepth(t);return e.forEach(s=>{let r=s;for(let o=i-1;o>=0;o--){let a=new Dy(null,`FAKE_PATH_${s.getId()}}_${o}`,!0,o);this.createBean(a),a.setChildren([r]),r.setOriginalParent(a),r=a}i===0&&s.setOriginalParent(null),n.push(r)}),[n,i]}findDepth(e){let t=0,n=e;for(;n&&n[0]&&oi(n[0]);)t++,n=n[0].getChildren();return t}balanceColumnTree(e,t,n,i){let s=[];for(let r=0;r<e.length;r++){let o=e[r];if(oi(o)){let a=o,l=this.balanceColumnTree(a.getChildren(),t+1,n,i);a.setChildren(l),s.push(a)}else{let a,l;for(let c=n-1;c>=t;c--){let u=i.getUniqueKey(null,null),h=this.createMergedColGroupDef(null),f=new Dy(h,u,!0,t);this.createBean(f),l&&l.setChildren([f]),l=f,a||(a=l)}if(a&&l)if(s.push(a),e.some(u=>oi(u))){l.setChildren([o]);continue}else{l.setChildren(e);break}s.push(o)}}return s}findMaxDept(e,t){let n=t;for(let i=0;i<e.length;i++){let s=e[i];if(oi(s)){let r=s,o=this.findMaxDept(r.getChildren(),t+1);n<o&&(n=o)}}return n}recursivelyCreateColumns(e,t,n,i,s,r,o){if(!e)return[];let a=new Array(e.length);for(let l=0;l<a.length;l++){let c=e[l];this.isColumnGroup(c)?a[l]=this.createColumnGroup(n,c,t,i,s,r,o):a[l]=this.createColumn(n,c,i,s,o)}return a}createColumnGroup(e,t,n,i,s,r,o){let a=this.createMergedColGroupDef(t),l=s.getUniqueKey(a.groupId||null,null),c=new Dy(a,l,!1,n);this.createBean(c);let u=this.findExistingGroup(t,r);u&&r.splice(u.idx,1);let h=u?.group;h&&c.setExpanded(h.isExpanded());let f=this.recursivelyCreateColumns(a.children,n+1,e,i,s,r,o);return c.setChildren(f),c}createMergedColGroupDef(e){let t={};return Object.assign(t,this.gos.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,n,i,s){let r=this.findExistingColumn(t,n);r&&n?.splice(r.idx,1);let o=r?.column;if(o){let a=this.addColumnDefaultAndTypes(t,o.getColId());o.setColDef(a,t,s),this.applyColumnState(o,a,s)}else{let a=i.getUniqueKey(t.colId,t.field),l=this.addColumnDefaultAndTypes(t,a);o=new HG(l,t,a,e),this.createBean(o)}return this.dataTypeService?.addColumnListeners(o),o}applyColumnState(e,t,n){let i=Ql(t.flex);if(i!==void 0&&e.setFlex(i),e.getFlex()<=0){let a=Ql(t.width);if(a!=null)e.setActualWidth(a,n);else{let l=e.getActualWidth();e.setActualWidth(l,n)}}t.sort!==void 0&&(t.sort=="asc"||t.sort=="desc"?e.setSort(t.sort,n):e.setSort(void 0,n));let r=Ql(t.sortIndex);r!==void 0&&e.setSortIndex(r);let o=yR(t.hide);o!==void 0&&e.setVisible(!o,n),t.pinned!==void 0&&e.setPinned(t.pinned)}findExistingColumn(e,t){if(t)for(let n=0;n<t.length;n++){let i=t[n].getUserProvidedColDef();if(!i)continue;if(e.colId!=null){if(t[n].getId()===e.colId)return{idx:n,column:t[n]};continue}if(e.field!=null){if(i.field===e.field)return{idx:n,column:t[n]};continue}if(i===e)return{idx:n,column:t[n]}}}findExistingGroup(e,t){if(e.groupId!=null)for(let i=0;i<t.length;i++){let s=t[i];if(s.getColGroupDef()&&s.getId()===e.groupId)return{idx:i,group:s}}}addColumnDefaultAndTypes(e,t){let n={},i=this.gos.get("defaultColDef");Cs(n,i,!1,!0);let s=this.updateColDefAndGetColumnType(n,e,t);s&&this.assignColumnTypes(s,n),Cs(n,e,!1,!0);let r=this.gos.get("autoGroupColumnDef"),o=this.gos.isColumnsSortingCoupledToGroup();return e.rowGroup&&r&&o&&Cs(n,{sort:r.sort,initialSort:r.initialSort},!1,!0),this.dataTypeService?.validateColDef(n),n}updateColDefAndGetColumnType(e,t,n){let i=this.dataTypeService?.updateColDefAndGetColumnType(e,t,n),s=t.type??i??e.type;return e.type=s,s?Ty(s):void 0}assignColumnTypes(e,t){if(!e.length)return;let n=Object.assign({},Nte),i=this.gos.get("columnTypes")||{};vs(i,(s,r)=>{s in n?j(`the column type '${s}' is a default column type and cannot be overridden.`):(r.type&&j("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),n[s]=r)}),e.forEach(s=>{let r=n[s.trim()];r?Cs(t,r,!1,!0):j("colDef.type '"+s+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(e){return e.children!==void 0}};function Eo(e,t,n){if(t)for(let i=0;i<t.length;i++){let s=t[i];oi(s)&&Eo(s,s.getChildren(),n),n(s,e)}}var Ute=class extends L{constructor(){super(...arguments),this.beanName="columnModel",this.pivotMode=!1,this.autoHeightActiveAtLeastOnce=!1,this.ready=!1,this.changeEventsDispatching=!1,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}wireBeans(e){this.context=e.context,this.columnFactory=e.columnFactory,this.columnSizeService=e.columnSizeService,this.visibleColsService=e.visibleColsService,this.columnViewportService=e.columnViewportService,this.pivotResultColsService=e.pivotResultColsService,this.columnAnimationService=e.columnAnimationService,this.autoColService=e.autoColService,this.valueCache=e.valueCache,this.columnDefFactory=e.columnDefFactory,this.columnApplyStateService=e.columnApplyStateService,this.columnGroupStateService=e.columnGroupStateService,this.eventDispatcher=e.columnEventDispatcher,this.columnMoveService=e.columnMoveService,this.columnAutosizeService=e.columnAutosizeService,this.funcColsService=e.funcColsService,this.quickFilterService=e.quickFilterService,this.showRowGroupColsService=e.showRowGroupColsService,this.environment=e.environment}postConstruct(){let e=this.gos.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],t=>this.refreshAll(ud(t.source))),this.addManagedPropertyListener("autoGroupColumnDef",t=>this.onAutoGroupColumnDefChanged(ud(t.source))),this.addManagedPropertyListeners(["defaultColDef","columnTypes","suppressFieldDotNotation"],t=>this.recreateColumnDefs(ud(t.source))),this.addManagedPropertyListener("pivotMode",t=>this.setPivotMode(this.gos.get("pivotMode"),ud(t.source))),this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}createColsFromColDefs(e,t){let n=e?this.columnApplyStateService.compareColumnStatesAndDispatchEvents(t):void 0;this.valueCache.expire();let i=this.colDefCols&&this.colDefCols.list,s=this.colDefCols&&this.colDefCols.tree,r=this.columnFactory.createColumnTree(this.colDefs,!0,s,t);cd(this.context,this.colDefCols?.tree,r.columnTree);let o=r.columnTree,a=r.treeDept,l=VR(o),c={};l.forEach(h=>c[h.getId()]=h),this.colDefCols={tree:o,treeDepth:a,list:l,map:c},this.funcColsService.extractCols(t,i),this.ready=!0,this.refreshCols(),e&&!this.showingPivotResult&&!this.gos.get("maintainColumnOrder")&&this.orderColsLikeColDefCols(),this.visibleColsService.refresh(t),this.columnViewportService.checkViewportColumns(),this.eventDispatcher.everythingChanged(t),n&&(this.changeEventsDispatching=!0,n(),this.changeEventsDispatching=!1),this.eventDispatcher.newColumnsLoaded(t),t==="gridInitializing"&&this.columnSizeService.applyAutosizeStrategy()}refreshCols(){if(!this.colDefCols)return;let e=this.cols?.tree;this.saveColOrder(),this.selectCols(),this.createAutoCols(),this.addAutoCols(),this.restoreColOrder(),this.positionLockedCols(),this.showRowGroupColsService?.refresh(),this.quickFilterService?.refreshQuickFilterCols(),this.setColSpanActive(),this.setAutoHeightActive(),this.visibleColsService.clear(),this.columnViewportService.clear(),!Xl(e,this.cols.tree)&&this.eventDispatcher.gridColumns()}selectCols(){let e=this.pivotResultColsService.getPivotResultCols();if(this.showingPivotResult=e!=null,e){let{map:t,list:n,tree:i,treeDepth:s}=e;this.cols={list:n.slice(),map:B({},t),tree:i.slice(),treeDepth:s},e.list.some(o=>this.cols?.map[o.getColId()]!==void 0)||(this.lastPivotOrder=null)}else{let{map:t,list:n,tree:i,treeDepth:s}=this.colDefCols;this.cols={list:n.slice(),map:B({},t),tree:i.slice(),treeDepth:s}}}getColsToShow(){let e=this.isPivotMode()&&!this.isShowingPivotResult(),t=this.funcColsService.getValueColumns();return this.cols.list.filter(i=>{let s=hG(i);if(e){let r=t&&ql(t,i);return s||r}else return s||i.isVisible()})}addAutoCols(){this.autoCols!=null&&(this.cols.list=this.autoCols.list.concat(this.cols.list),this.cols.tree=this.autoCols.tree.concat(this.cols.tree),Wte(this.cols))}createAutoCols(){let e=this.gos.isGroupUseEntireRow(this.pivotMode),t=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),n=this.funcColsService.getRowGroupColumns(),s=!(n.length>0||this.gos.get("treeData"))||t||e,r=()=>{this.autoCols&&(cd(this.context,this.autoCols.tree),this.autoCols=null)};if(s||!this.autoColService){r();return}let o=this.autoColService.createAutoCols(n)??[],a=jte(o,this.autoCols?.list||null),l=this.cols.treeDepth,u=(this.autoCols?this.autoCols.treeDepth:-1)==l;if(a&&u)return;r();let[h,f]=this.columnFactory.createForAutoGroups(o,this.cols?.tree);this.autoCols={list:o,tree:h,treeDepth:f,map:{}};let p=v=>{if(!v)return null;let y=v.filter(C=>!hG(C));return[...o,...y]};this.lastOrder=p(this.lastOrder),this.lastPivotOrder=p(this.lastPivotOrder)}refreshAll(e){this.isReady()&&(this.refreshCols(),this.visibleColsService.refresh(e))}setColsVisible(e,t=!1,n){this.columnApplyStateService.applyColumnState({state:e.map(i=>({colId:typeof i=="string"?i:i.getColId(),hide:!t}))},n)}setColsPinned(e,t,n){if(!this.cols||bn(e))return;if(this.gos.isDomLayout("print")){j("Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let i;t===!0||t==="left"?i="left":t==="right"?i="right":i=null;let s=[];e.forEach(r=>{if(!r)return;let o=this.getCol(r);o&&o.getPinned()!==i&&(o.setPinned(i),s.push(o))}),s.length&&(this.visibleColsService.refresh(n),this.eventDispatcher.columnPinned(s,n)),this.columnAnimationService.finish()}setColumnGroupOpened(e,t,n){let i;oi(e)?i=e.getId():i=e||"",this.columnGroupStateService.setColumnGroupState([{groupId:i,open:t}],n)}getProvidedColGroup(e){let t=null;return Eo(null,this.cols?.tree,n=>{oi(n)&&n.getId()===e&&(t=n)}),t}isColGroupLocked(e){let t=this.gos.get("groupLockGroupColumns");if(!e.isRowGroupActive()||t===0)return!1;if(t===-1)return!0;let i=this.funcColsService.getRowGroupColumns().findIndex(s=>s.getColId()===e.getColId());return t>i}isSuppressAutoCol(){return this.gos.get("groupDisplayType")==="custom"?!0:this.gos.get("treeDataDisplayType")==="custom"}setAutoHeightActive(){this.autoHeightActive=this.cols.list.some(e=>e.isAutoHeight()),this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,this.gos.isRowModelType("clientSide")||this.gos.isRowModelType("serverSide")||j("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}restoreColOrder(){let e=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!e)return;let t=new Map(e.map((l,c)=>[l,c]));if(!this.cols.list.some(l=>t.has(l)))return;let i=new Map(this.cols.list.map(l=>[l,!0])),s=e.filter(l=>i.has(l)),r=new Map(s.map(l=>[l,!0])),o=this.cols.list.filter(l=>!r.has(l)),a=s.slice();o.forEach(l=>{let c=l.getOriginalParent();if(!c){a.push(l);return}let u=[];for(;!u.length&&c;)c.getLeafColumns().forEach(v=>{let y=a.indexOf(v)>=0,C=u.indexOf(v)<0;y&&C&&u.push(v)}),c=c.getOriginalParent();if(!u.length){a.push(l);return}let h=u.map(p=>a.indexOf(p)),f=Math.max(...h);Iy(a,l,f+1)}),this.cols.list=a}orderColsLikeColDefCols(){if(!this.colDefCols||!this.cols)return;let e=this.colDefCols.list.filter(n=>this.cols.list.indexOf(n)>=0),t=this.cols.list.filter(n=>e.indexOf(n)<0);this.cols.list=[...t,...e],this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}sortColsLikeKeys(e){if(this.cols==null)return;let t=[],n={};e.forEach(s=>{if(n[s])return;let r=this.cols.map[s];r&&(t.push(r),n[s]=!0)});let i=0;if(this.cols.list.forEach(s=>{let r=s.getColId();if(n[r]!=null)return;r.startsWith(hp)?Iy(t,s,i++):t.push(s)}),t=this.columnMoveService.placeLockedColumns(t),!this.columnMoveService.doesMovePassMarryChildren(t)){j("Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.cols.list=t}sortColsLikeCols(e){!e||e.length<=1||e.filter(n=>this.cols.list.indexOf(n)<0).length>0||e.sort((n,i)=>{let s=this.cols.list.indexOf(n),r=this.cols.list.indexOf(i);return s-r})}resetColDefIntoCol(e,t){let n=e.getUserProvidedColDef();if(!n)return!1;let i=this.columnFactory.addColumnDefaultAndTypes(n,e.getColId());return e.setColDef(i,n,t),!0}queueResizeOperations(){this.shouldQueueResizeOperations=!0}isShouldQueueResizeOperations(){return this.shouldQueueResizeOperations}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}moveInCols(e,t,n){NG(this.cols?.list,e,t),this.visibleColsService.refresh(n)}positionLockedCols(){this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list:this.lastOrder=this.cols?.list}getColumnDefs(){if(!this.colDefCols)return;let e=this.colDefCols.list.slice();this.showingPivotResult?e.sort((i,s)=>this.lastOrder.indexOf(i)-this.lastOrder.indexOf(s)):this.lastOrder&&e.sort((i,s)=>this.cols.list.indexOf(i)-this.cols.list.indexOf(s));let t=this.funcColsService.getRowGroupColumns(),n=this.funcColsService.getPivotColumns();return this.columnDefFactory.buildColumnDefs(e,t,n)}isShowingPivotResult(){return this.showingPivotResult}isChangeEventsDispatching(){return this.changeEventsDispatching}isColSpanActive(){return this.colSpanActive}isProvidedColGroupsPresent(){return this.colDefCols?.treeDepth>0}setColSpanActive(){this.colSpanActive=this.cols.list.some(e=>e.getColDef().colSpan!=null)}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}getHeaderRowCount(){return this.cols?this.cols.treeDepth+1:-1}isReady(){return this.ready}isPivotMode(){return this.pivotMode}setPivotMode(e,t){e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=e,this.ready&&(this.refreshCols(),this.visibleColsService.refresh(t),this.eventDispatcher.pivotModeChanged()))}isPivotSettingAllowed(e){return e&&this.gos.get("treeData")?(j("Pivot mode not available with treeData."),!1):!0}isPivotActive(){let e=this.funcColsService.getPivotColumns();return this.pivotMode&&!bn(e)}recreateColumnDefs(e){this.cols&&(this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e),this.createColsFromColDefs(!0,e))}setColumnDefs(e,t){let n=!!this.colDefs;this.colDefs=e,this.createColsFromColDefs(n,t)}destroy(){cd(this.context,this.colDefCols?.tree),cd(this.context,this.autoCols?.tree),super.destroy()}getColTree(){return this.cols.tree}getColDefColTree(){return this.colDefCols.tree}getColDefCols(){return this.colDefCols?.list?this.colDefCols.list:null}getCols(){return this.cols?.list??[]}getAllCols(){let t=this.pivotResultColsService.getPivotResultCols()?.list;return[].concat(this.colDefCols?.list||[],this.autoCols?.list||[],t||[])}getColsForKeys(e){return e?e.map(n=>this.getCol(n)).filter(n=>n!=null):[]}getColDefCol(e){return this.colDefCols?.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColFromCollection(e,t){if(t==null)return null;let{map:n,list:i}=t;if(typeof e=="string"&&n[e])return n[e];for(let s=0;s<i.length;s++)if(fG(i[s],e))return i[s];return this.getAutoCol(e)}getAutoCol(e){return this.autoCols==null?null:this.autoCols.list.find(t=>fG(t,e))||null}getAutoCols(){return this.autoCols?.list||null}setColHeaderHeight(e,t){e.setAutoHeaderHeight(t)&&this.eventDispatcher.headerHeight(e)}getColumnGroupHeaderRowHeight(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()}getColumnHeaderRowHeight(){let e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),n=this.visibleColsService.getAllCols().filter(i=>i.isAutoHeaderHeight()).map(i=>i.getAutoHeaderHeight()||0);return Math.max(e,...n)}getHeaderHeight(){return this.gos.get("headerHeight")??this.environment.getDefaultHeaderHeight()}getFloatingFiltersHeight(){return this.gos.get("floatingFiltersHeight")??this.getHeaderHeight()}getGroupHeaderHeight(){return this.gos.get("groupHeaderHeight")??this.getHeaderHeight()}getPivotHeaderHeight(){return this.gos.get("pivotHeaderHeight")??this.getHeaderHeight()}getPivotGroupHeaderHeight(){return this.gos.get("pivotGroupHeaderHeight")??this.getGroupHeaderHeight()}onFirstDataRendered(){let e=this.gos.get("autoSizeStrategy");if(e?.type!=="fitCellContents")return;let{colIds:t,skipHeader:n}=e;setTimeout(()=>{t?this.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:n,source:"autosizeColumns"}):this.columnAutosizeService.autoSizeAllColumns("autosizeColumns",n)})}onAutoGroupColumnDefChanged(e){this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e)}};function ud(e){return e==="gridOptionsUpdated"?"gridOptionsChanged":e}function Wte(e){e.map={},e.list.forEach(t=>e.map[t.getId()]=t)}function fG(e,t){let n=e===t,i=e.getColDef()===t,s=e.getColId()==t;return n||i||s}function jte(e,t){return Xl(e,t,(n,i)=>n.getColId()===i.getColId())}var zte=class extends L{constructor(){super(...arguments),this.beanName="columnAutosizeService",this.timesDelayed=0}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.animationFrameService=e.animationFrameService,this.autoWidthCalculator=e.autoWidthCalculator,this.eventDispatcher=e.columnEventDispatcher,this.ctrlsService=e.ctrlsService,this.renderStatusService=e.renderStatusService}autoSizeCols(e){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeCols(e));return}let{colKeys:t,skipHeader:n,skipHeaderGroups:i,stopAtGroup:s,source:r="api"}=e;if(this.animationFrameService.flushAllFrames(),this.timesDelayed<5&&this.renderStatusService&&!this.renderStatusService.areHeaderCellsRendered()){this.timesDelayed++,setTimeout(()=>this.autoSizeCols(e));return}this.timesDelayed=0;let o=[],a=-1,l=n??this.gos.get("skipHeaderOnAutoSize"),c=i??l;for(;a!==0;){a=0;let u=[];t.forEach(h=>{if(!h)return;let f=this.columnModel.getCol(h);if(!f||o.indexOf(f)>=0)return;let p=this.autoWidthCalculator.getPreferredWidthForColumn(f,l);if(p>0){let v=this.normaliseColumnWidth(f,p);f.setActualWidth(v,r),o.push(f),a++}u.push(f)}),u.length&&this.visibleColsService.refresh(r)}c||this.autoSizeColumnGroupsByColumns(t,r,s),this.eventDispatcher.columnResized(o,!0,"autosizeColumns")}autoSizeColumn(e,t,n){e&&this.autoSizeCols({colKeys:[e],skipHeader:n,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,n){let i=new Set;this.columnModel.getColsForKeys(e).forEach(a=>{let l=a.getParent();for(;l&&l!=n;)l.isPadding()||i.add(l),l=l.getParent()});let r,o=[];for(let a of i){for(let l of this.ctrlsService.getHeaderRowContainerCtrls())if(r=l.getHeaderCtrlForColumn(a),r)break;r&&r.resizeLeafColumnsToFit(t)}return o}autoSizeAllColumns(e,t){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeAllColumns(e,t));return}let n=this.visibleColsService.getAllCols();this.autoSizeCols({colKeys:n,skipHeader:t,source:e})}normaliseColumnWidth(e,t){let n=e.getMinWidth();t<n&&(t=n);let i=e.getMaxWidth();return e.isGreaterThanMax(t)&&(t=i),t}},$te=class extends L{constructor(){super(...arguments),this.beanName="funcColsService",this.rowGroupCols=[],this.valueCols=[],this.pivotCols=[]}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.aggFuncService=e.aggFuncService,this.visibleColsService=e.visibleColsService}getModifyColumnsNoEventsCallbacks(){return{addGroupCol:e=>this.rowGroupCols.push(e),removeGroupCol:e=>li(this.rowGroupCols,e),addPivotCol:e=>this.pivotCols.push(e),removePivotCol:e=>li(this.pivotCols,e),addValueCol:e=>this.valueCols.push(e),removeValueCol:e=>li(this.valueCols,e)}}getSourceColumnsForGroupColumn(e){let t=e.getColDef().showRowGroup;if(!t)return null;if(t===!0)return this.rowGroupCols.slice(0);let n=this.columnModel.getColDefCol(t);return n?[n]:null}sortRowGroupColumns(e){this.rowGroupCols.sort(e)}sortPivotColumns(e){this.pivotCols.sort(e)}getValueColumns(){return this.valueCols?this.valueCols:[]}getPivotColumns(){return this.pivotCols?this.pivotCols:[]}getRowGroupColumns(){return this.rowGroupCols?this.rowGroupCols:[]}isRowGroupEmpty(){return bn(this.rowGroupCols)}setColumnAggFunc(e,t,n){if(!e)return;let i=this.columnModel.getColDefCol(e);i&&(i.setAggFunc(t),this.eventDispatcher.columnChanged("columnValueChanged",[i],n))}setRowGroupColumns(e,t){this.setColList(e,this.rowGroupCols,"columnRowGroupChanged",!0,!0,(n,i)=>this.setRowGroupActive(n,i,t),t)}setRowGroupActive(e,t,n){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,n),e&&!this.gos.get("suppressRowGroupHidesColumns")&&this.columnModel.setColsVisible([t],!1,n),!e&&!this.gos.get("suppressMakeColumnVisibleAfterUnGroup")&&this.columnModel.setColsVisible([t],!0,n))}addRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!0,!0,n=>this.setRowGroupActive(!0,n,t),"columnRowGroupChanged",t)}removeRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!1,!0,n=>this.setRowGroupActive(!1,n,t),"columnRowGroupChanged",t)}addPivotColumns(e,t){this.updateColList(e,this.pivotCols,!0,!1,n=>n.setPivotActive(!0,t),"columnPivotChanged",t)}setPivotColumns(e,t){this.setColList(e,this.pivotCols,"columnPivotChanged",!0,!1,(n,i)=>{i.setPivotActive(n,t)},t)}removePivotColumns(e,t){this.updateColList(e,this.pivotCols,!1,!1,n=>n.setPivotActive(!1,t),"columnPivotChanged",t)}setValueColumns(e,t){this.setColList(e,this.valueCols,"columnValueChanged",!1,!1,(n,i)=>this.setValueActive(n,i,t),t)}setValueActive(e,t,n){if(e!==t.isValueActive()&&(t.setValueActive(e,n),e&&!t.getAggFunc()&&this.aggFuncService)){let i=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(i)}}addValueColumns(e,t){this.updateColList(e,this.valueCols,!0,!1,n=>this.setValueActive(!0,n,t),"columnValueChanged",t)}removeValueColumns(e,t){this.updateColList(e,this.valueCols,!1,!1,n=>this.setValueActive(!1,n,t),"columnValueChanged",t)}moveRowGroupColumn(e,t,n){if(this.isRowGroupEmpty())return;let i=this.rowGroupCols[e],s=this.rowGroupCols.slice(e,t);this.rowGroupCols.splice(e,1),this.rowGroupCols.splice(t,0,i),this.eventDispatcher.rowGroupChanged(s,n)}setColList(e,t,n,i,s,r,o){let a=this.columnModel.getCols();if(bn(a))return;let l=new Map;t.forEach((u,h)=>l.set(u,h)),t.length=0,q(e)&&e.forEach(u=>{let h=this.columnModel.getColDefCol(u);h&&t.push(h)}),t.forEach((u,h)=>{let f=l.get(u);if(f===void 0){l.set(u,0);return}i&&f!==h||l.delete(u)}),(this.columnModel.getColDefCols()||[]).forEach(u=>{let h=t.indexOf(u)>=0;r(h,u)}),s&&this.columnModel.refreshCols(),this.visibleColsService.refresh(o),this.eventDispatcher.columnChanged(n,[...l.keys()],o)}updateColList(e,t,n,i,s,r,o){if(!e||bn(e))return;let a=!1;e.forEach(l=>{if(!l)return;let c=this.columnModel.getColDefCol(l);if(c){if(n){if(t.indexOf(c)>=0)return;t.push(c)}else{if(t.indexOf(c)<0)return;li(t,c)}s(c),a=!0}}),a&&(i&&this.columnModel.refreshCols(),this.visibleColsService.refresh(o),this.eventDispatcher.genericColumnEvent(r,t,o))}extractCols(e,t){this.extractRowGroupCols(e,t),this.extractPivotCols(e,t),this.extractValueCols(e,t)}extractValueCols(e,t){this.valueCols=this.extractColsCommon(t,this.valueCols,(n,i)=>n.setValueActive(i,e),()=>{},()=>{},n=>{let i=n.aggFunc;if(i===null||i==="")return null;if(i!==void 0)return!!i},n=>n.initialAggFunc!=null&&n.initialAggFunc!=""),this.valueCols.forEach(n=>{let i=n.getColDef();i.aggFunc!=null&&i.aggFunc!=""?n.setAggFunc(i.aggFunc):n.getAggFunc()||n.setAggFunc(i.initialAggFunc)})}extractRowGroupCols(e,t){this.rowGroupCols=this.extractColsCommon(t,this.rowGroupCols,(n,i)=>n.setRowGroupActive(i,e),n=>n.rowGroupIndex,n=>n.initialRowGroupIndex,n=>n.rowGroup,n=>n.initialRowGroup)}extractPivotCols(e,t){this.pivotCols=this.extractColsCommon(t,this.pivotCols,(n,i)=>n.setPivotActive(i,e),n=>n.pivotIndex,n=>n.initialPivotIndex,n=>n.pivot,n=>n.initialPivot)}extractColsCommon(e=[],t=[],n,i,s,r,o){let a=[],l=[];(this.columnModel.getColDefCols()||[]).forEach(f=>{let p=e.indexOf(f)<0,v=f.getColDef(),y=yR(r(v)),C=yR(o(v)),E=Ql(i(v)),T=Ql(s(v)),R;y!==void 0?R=y:E!==void 0?E===null?R=!1:R=E>=0:p?C!==void 0?R=C:T!==void 0?R=T!=null&&T>=0:R=!1:R=t.indexOf(f)>=0,R&&((p?E!=null||T!=null:E!=null)?a.push(f):l.push(f))});let u=f=>{let p=i(f.getColDef()),v=s(f.getColDef());return p??v};a.sort((f,p)=>{let v=u(f),y=u(p);return v===y?0:v<y?-1:1});let h=[].concat(a);return t.forEach(f=>{l.indexOf(f)>=0&&h.push(f)}),l.forEach(f=>{h.indexOf(f)<0&&h.push(f)}),t.forEach(f=>{h.indexOf(f)<0&&n(f,!1)}),h.forEach(f=>{t.indexOf(f)<0&&n(f,!0)}),h}generateColumnStateForRowGroupAndPivotIndexes(e,t){let n={},i=(s,r,o,a,l,c)=>{let u=this.columnModel.getColDefCols();if(!r.length||!u)return[];let h=Object.keys(s),f=new Set(h),p=new Set(h),v=new Set(r.map(k=>{let b=k.getColId();return p.delete(b),b}).concat(h)),y=[],C={},E=0;for(let k=0;k<u.length;k++){let b=u[k].getColId();v.has(b)&&(y.push(b),C[b]=E++)}let T=1e3,R=!1,F=0,$=k=>{let b=C[k];for(let S=F;S<b;S++){let _=y[S];p.has(_)&&(s[_][l]=T++,p.delete(_))}F=b};r.forEach(k=>{let b=k.getColId();if(f.has(b))$(b),s[b][l]=T++;else{let S=k.getColDef();(S[l]===null||S[l]===void 0&&S[c]==null)&&(R||(S[o]||S[o]===void 0&&S[a]?$(b):(p.forEach(A=>{s[A][l]=T+C[A]}),T+=y.length,R=!0)),n[b]||(n[b]={colId:b}),n[b][l]=T++)}})};return i(e,this.rowGroupCols,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),i(t,this.pivotCols,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(n)}},qte=class extends L{constructor(){super(...arguments),this.beanName="columnApplyStateService"}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.sortController=e.sortController,this.columnGetStateService=e.columnGetStateService,this.funcColsService=e.funcColsService,this.visibleColsService=e.visibleColsService,this.columnAnimationService=e.columnAnimationService,this.pivotResultColsService=e.pivotResultColsService}applyColumnState(e,t){let n=this.columnModel.getColDefCols()||[];if(bn(n))return!1;if(e&&e.state&&!e.state.forEach)return j("applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;let i=this.funcColsService.getModifyColumnsNoEventsCallbacks(),s=(a,l,c)=>{let u=this.compareColumnStatesAndDispatchEvents(t),h=l.slice(),f={},p={},v=[],y=[],C=0,E=this.funcColsService.getRowGroupColumns().slice(),T=this.funcColsService.getPivotColumns().slice();a.forEach(k=>{let b=k.colId||"";if(b.startsWith(hp)){v.push(k),y.push(k);return}let _=c(b);_?(this.syncColumnWithStateItem(_,k,e.defaultState,f,p,!1,t,i),li(h,_)):(y.push(k),C+=1)});let R=k=>this.syncColumnWithStateItem(k,null,e.defaultState,f,p,!1,t,i);h.forEach(R),this.funcColsService.sortRowGroupColumns(pG.bind(this,f,E)),this.funcColsService.sortPivotColumns(pG.bind(this,p,T)),this.columnModel.refreshCols();let $=(this.columnModel.getAutoCols()||[]).slice();return v.forEach(k=>{let b=this.columnModel.getAutoCol(k.colId);li($,b),this.syncColumnWithStateItem(b,k,e.defaultState,null,null,!0,t,i)}),$.forEach(R),this.orderLiveColsLikeState(e),this.visibleColsService.refresh(t),this.eventDispatcher.everythingChanged(t),u(),{unmatchedAndAutoStates:y,unmatchedCount:C}};this.columnAnimationService.start();let{unmatchedAndAutoStates:r,unmatchedCount:o}=s(e.state||[],n,a=>this.columnModel.getColDefCol(a));if(r.length>0||q(e.defaultState)){let l=this.pivotResultColsService.getPivotResultCols()?.list;o=s(r,l||[],c=>this.pivotResultColsService.getPivotResultCol(c)).unmatchedCount}return this.columnAnimationService.finish(),o===0}resetColumnState(e){let t=this.columnModel.getColDefCols();if(bn(t))return;let n=this.columnModel.getColDefColTree(),i=VR(n),s=[],r=1e3,o=1e3,a=[],l=this.columnModel.getAutoCols();l&&(a=a.concat(l)),i&&(a=a.concat(i)),a.forEach(c=>{let u=this.getColumnStateFromColDef(c);Ve(u.rowGroupIndex)&&u.rowGroup&&(u.rowGroupIndex=r++),Ve(u.pivotIndex)&&u.pivot&&(u.pivotIndex=o++),s.push(u)}),this.applyColumnState({state:s,applyOrder:!0},e)}getColumnStateFromColDef(e){let t=(v,y)=>v??y??null,n=e.getColDef(),i=t(n.sort,n.initialSort),s=t(n.sortIndex,n.initialSortIndex),r=t(n.hide,n.initialHide),o=t(n.pinned,n.initialPinned),a=t(n.width,n.initialWidth),l=t(n.flex,n.initialFlex),c=t(n.rowGroupIndex,n.initialRowGroupIndex),u=t(n.rowGroup,n.initialRowGroup);c==null&&(u==null||u==!1)&&(c=null,u=null);let h=t(n.pivotIndex,n.initialPivotIndex),f=t(n.pivot,n.initialPivot);h==null&&(f==null||f==!1)&&(h=null,f=null);let p=t(n.aggFunc,n.initialAggFunc);return{colId:e.getColId(),sort:i,sortIndex:s,hide:r,pinned:o,width:a,flex:l,rowGroup:u,rowGroupIndex:c,pivot:f,pivotIndex:h,aggFunc:p}}syncColumnWithStateItem(e,t,n,i,s,r,o,a){if(!e)return;let l=(F,$)=>{let k={value1:void 0,value2:void 0},b=!1;return t&&(t[F]!==void 0&&(k.value1=t[F],b=!0),q($)&&t[$]!==void 0&&(k.value2=t[$],b=!0)),!b&&n&&(n[F]!==void 0&&(k.value1=n[F]),q($)&&n[$]!==void 0&&(k.value2=n[$])),k},c=l("hide").value1;c!==void 0&&e.setVisible(!c,o);let u=l("pinned").value1;u!==void 0&&e.setPinned(u);let h=e.getColDef().minWidth??GG,f=l("flex").value1;if(f!==void 0&&e.setFlex(f),f==null){let F=l("width").value1;F!=null&&h!=null&&F>=h&&e.setActualWidth(F,o)}let p=l("sort").value1;p!==void 0&&(p==="desc"||p==="asc"?e.setSort(p,o):e.setSort(void 0,o));let v=l("sortIndex").value1;if(v!==void 0&&e.setSortIndex(v),r||!e.isPrimary())return;let y=l("aggFunc").value1;y!==void 0&&(typeof y=="string"?(e.setAggFunc(y),e.isValueActive()||(e.setValueActive(!0,o),a.addValueCol(e))):(q(y)&&j("stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,o),a.removeValueCol(e))));let{value1:C,value2:E}=l("rowGroup","rowGroupIndex");(C!==void 0||E!==void 0)&&(typeof E=="number"||C?(e.isRowGroupActive()||(e.setRowGroupActive(!0,o),a.addGroupCol(e)),i&&typeof E=="number"&&(i[e.getId()]=E)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,o),a.removeGroupCol(e)));let{value1:T,value2:R}=l("pivot","pivotIndex");(T!==void 0||R!==void 0)&&(typeof R=="number"||T?(e.isPivotActive()||(e.setPivotActive(!0,o),a.addPivotCol(e)),s&&typeof R=="number"&&(s[e.getId()]=R)):e.isPivotActive()&&(e.setPivotActive(!1,o),a.removePivotCol(e)))}orderLiveColsLikeState(e){if(!e.applyOrder||!e.state)return;let t=[];e.state.forEach(n=>{n.colId!=null&&t.push(n.colId)}),this.columnModel.sortColsLikeKeys(t)}compareColumnStatesAndDispatchEvents(e){let t={rowGroupColumns:this.funcColsService.getRowGroupColumns().slice(),pivotColumns:this.funcColsService.getPivotColumns().slice(),valueColumns:this.funcColsService.getValueColumns().slice()},n=this.columnGetStateService.getColumnState(),i={};return n.forEach(s=>{i[s.colId]=s}),()=>{let s=this.columnModel.getAllCols(),r=(y,C,E,T)=>{let R=C.map(T),F=E.map(T);if(Xl(R,F))return;let k=new Set(C);E.forEach(_=>{k.delete(_)||k.add(_)});let b=[...k],S={type:y,columns:b,column:b.length===1?b[0]:null,source:e};this.eventService.dispatchEvent(S)},o=y=>{let C=[];return s.forEach(E=>{let T=i[E.getColId()];T&&y(T,E)&&C.push(E)}),C},a=y=>y.getColId();r("columnRowGroupChanged",t.rowGroupColumns,this.funcColsService.getRowGroupColumns(),a),r("columnPivotChanged",t.pivotColumns,this.funcColsService.getPivotColumns(),a);let c=o((y,C)=>{let E=y.aggFunc!=null,T=E!=C.isValueActive(),R=E&&y.aggFunc!=C.getAggFunc();return T||R});c.length>0&&this.eventDispatcher.columnChanged("columnValueChanged",c,e);let u=(y,C)=>y.width!=C.getActualWidth();this.eventDispatcher.columnResized(o(u),!0,e);let h=(y,C)=>y.pinned!=C.getPinned();this.eventDispatcher.columnPinned(o(h),e);let f=(y,C)=>y.hide==C.isVisible();this.eventDispatcher.columnVisible(o(f),e);let v=o((y,C)=>y.sort!=C.getSort()||y.sortIndex!=C.getSortIndex());v.length>0&&this.sortController.dispatchSortChangedEvents(e,v),this.normaliseColumnMovedEventForColumnState(n,e)}}normaliseColumnMovedEventForColumnState(e,t){let n=this.columnGetStateService.getColumnState(),i={};n.forEach(l=>i[l.colId]=l);let s={};e.forEach(l=>{i[l.colId]&&(s[l.colId]=!0)});let r=e.filter(l=>s[l.colId]),o=n.filter(l=>s[l.colId]),a=[];o.forEach((l,c)=>{let u=r&&r[c];if(u&&u.colId!==l.colId){let h=this.columnModel.getCol(u.colId);h&&a.push(h)}}),a.length&&this.eventDispatcher.columnMoved({movedColumns:a,source:t,finished:!0})}},pG=(e,t,n,i)=>{let s=e[n.getId()],r=e[i.getId()],o=s!=null,a=r!=null;if(o&&a)return s-r;if(o)return-1;if(a)return 1;let l=t.indexOf(n),c=t.indexOf(i),u=l>=0,h=c>=0;return u&&h?l-c:u?-1:1},Kte=class extends L{constructor(){super(...arguments),this.beanName="columnMoveService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher}moveColumnByIndex(e,t,n){let i=this.columnModel.getCols();if(!i)return;let s=i[e];this.moveColumns([s],t,n)}moveColumns(e,t,n,i=!0){let s=this.columnModel.getCols();if(!s)return;if(this.columnAnimationService.start(),t>s.length-e.length){j("tried to insert columns in invalid location, toIndex = ",t),j("remember that you should not count the moving columns when calculating the new index");return}let r=this.columnModel.getColsForKeys(e);this.doesMovePassRules(r,t)&&(this.columnModel.moveInCols(r,t,n),this.eventDispatcher.columnMoved({movedColumns:r,source:n,toIndex:t,finished:i}),this.columnAnimationService.finish())}doesMovePassRules(e,t){let n=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(n)}doesOrderPassRules(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))}getProposedColumnOrder(e,t){let i=this.columnModel.getCols().slice();return NG(i,e,t),i}doesMovePassLockedPositions(e){let t=r=>r?r==="left"||r===!0?-1:1:0,n=this.gos.get("enableRtl"),i=n?1:-1,s=!0;return e.forEach(r=>{let o=t(r.getColDef().lockPosition);n?o>i&&(s=!1):o<i&&(s=!1),i=o}),s}doesMovePassMarryChildren(e){let t=!0,n=this.columnModel.getColTree();return Eo(null,n,i=>{if(!oi(i))return;let s=i,r=s.getColGroupDef();if(!(r&&r.marryChildren))return;let a=[];s.getLeafColumns().forEach(f=>{let p=e.indexOf(f);a.push(p)});let l=Math.max.apply(Math,a),c=Math.min.apply(Math,a),u=l-c,h=s.getLeafColumns().length-1;u>h&&(t=!1)}),t}placeLockedColumns(e){let t=[],n=[],i=[];return e.forEach(r=>{let o=r.getColDef().lockPosition;o==="right"?i.push(r):o==="left"||o===!0?t.push(r):n.push(r)}),this.gos.get("enableRtl")?[...i,...n,...t]:[...t,...n,...i]}},Qte=/[&<>"']/g,Yte={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Jte(e){let t=String.fromCharCode;function n(h){let f=[];if(!h)return[];let p=h.length,v=0,y,C;for(;v<p;)y=h.charCodeAt(v++),y>=55296&&y<=56319&&v<p?(C=h.charCodeAt(v++),(C&64512)==56320?f.push(((y&1023)<<10)+(C&1023)+65536):(f.push(y),v--)):f.push(y);return f}function i(h){if(h>=55296&&h<=57343)throw Error("Lone surrogate U+"+h.toString(16).toUpperCase()+" is not a scalar value")}function s(h,f){return t(h>>f&63|128)}function r(h){if(!(h&4294967168))return t(h);let f="";return h&4294965248?h&4294901760?h&4292870144||(f=t(h>>18&7|240),f+=s(h,12),f+=s(h,6)):(i(h),f=t(h>>12&15|224),f+=s(h,6)):f=t(h>>6&31|192),f+=t(h&63|128),f}let o=n(e),a=o.length,l=-1,c,u="";for(;++l<a;)c=o[l],u+=r(c);return u}function kr(e,t){if(e==null)return null;let n=e.toString().toString();return t?n:n.replace(Qte,i=>Yte[i])}function Xte(e){if(!e||e==null)return null;let t=/([a-z])([A-Z])/g,n=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(n,"$1 $2$3").replace(/\./g," ").split(" ").map(s=>s.substring(0,1).toUpperCase()+(s.length>1?s.substring(1,s.length):"")).join(" ")}function Zte(e){return e.replace(/[A-Z]/g,t=>`-${t.toLocaleLowerCase()}`)}var ene=class extends L{constructor(){super(...arguments),this.beanName="columnNameService"}wireBeans(e){this.expressionService=e.expressionService,this.funcColsService=e.funcColsService,this.columnModel=e.columnModel}getDisplayNameForColumn(e,t,n=!1){if(!e)return null;let i=this.getHeaderName(e.getColDef(),e,null,null,t);return n?this.wrapHeaderNameWithAggFunc(e,i):i}getDisplayNameForProvidedColumnGroup(e,t,n){let i=t?t.getColGroupDef():null;return i?this.getHeaderName(i,null,e,t,n):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,n,i,s){let r=e.headerValueGetter;if(r){let o=this.gos.addGridCommonParams({colDef:e,column:t,columnGroup:n,providedColumnGroup:i,location:s});return typeof r=="function"?r(o):typeof r=="string"?this.expressionService.evaluate(r,o):(j("headerValueGetter must be a function or a string"),"")}else{if(e.headerName!=null)return e.headerName;if(e.field)return Xte(e.field)}return""}wrapHeaderNameWithAggFunc(e,t){if(this.gos.get("suppressAggFuncInHeader"))return t;let n=e.getColDef().pivotValueColumn,i=q(n),s=null,r;if(i){let o=this.funcColsService.getValueColumns(),a=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&o.length===1,l=e.getColDef().pivotTotalColumnIds!==void 0;if(a&&!l)return t;s=n?n.getAggFunc():null,r=!0}else{let o=e.isValueActive(),a=this.columnModel.isPivotMode()||!this.funcColsService.isRowGroupEmpty();o&&a?(s=e.getAggFunc(),r=!0):r=!1}if(r){let o=typeof s=="string"?s:"func";return`${this.localeService.getLocaleTextFunc()(o,o)}(${t})`}return t}},tne=class extends L{constructor(){super(...arguments),this.beanName="pivotResultColsService"}wireBeans(e){this.context=e.context,this.columnModel=e.columnModel,this.columnFactory=e.columnFactory,this.visibleColsService=e.visibleColsService}destroy(){cd(this.context,this.pivotResultCols?.tree),super.destroy()}isPivotResultColsPresent(){return this.pivotResultCols!=null}lookupPivotResultCol(e,t){if(this.pivotResultCols==null)return null;let n=this.columnModel.getColDefCol(t),i=null;return this.pivotResultCols.list.forEach(s=>{let r=s.getColDef().pivotKeys,o=s.getColDef().pivotValueColumn;Xl(r,e)&&o===n&&(i=s)}),i}getPivotResultCols(){return this.pivotResultCols}getPivotResultCol(e){return this.pivotResultCols?this.columnModel.getColFromCollection(e,this.pivotResultCols):null}setPivotResultCols(e,t){if(this.columnModel.isReady()&&!(e==null&&this.pivotResultCols==null)){if(e){this.processPivotResultColDef(e);let n=this.columnFactory.createColumnTree(e,!1,this.pivotResultCols?.tree||this.previousPivotResultCols||void 0,t);cd(this.context,this.pivotResultCols?.tree,n.columnTree);let i=n.columnTree,s=n.treeDept,r=VR(i),o={};this.pivotResultCols={tree:i,treeDepth:s,list:r,map:o},this.pivotResultCols.list.forEach(a=>this.pivotResultCols.map[a.getId()]=a),this.previousPivotResultCols=null}else this.previousPivotResultCols=this.pivotResultCols?this.pivotResultCols.tree:null,this.pivotResultCols=null;this.columnModel.refreshCols(),this.visibleColsService.refresh(t)}}processPivotResultColDef(e){let t=this.gos.get("processPivotResultColDef"),n=this.gos.get("processPivotResultColGroupDef");if(!t&&!n)return;let i=s=>{s.forEach(r=>{if(q(r.children)){let a=r;n&&n(a),i(a.children)}else t&&t(r)})};e&&i(e)}},nne=class extends L{constructor(){super(...arguments),this.beanName="columnSizeService"}wireBeans(e){this.columnModel=e.columnModel,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}setColumnWidths(e,t,n,i){let s=[];e.forEach(r=>{let o=this.columnModel.getColDefCol(r.key)||this.columnModel.getCol(r.key);if(!o)return;if(s.push({width:r.newWidth,ratios:[1],columns:[o]}),this.gos.get("colResizeDefault")==="shift"&&(t=!t),t){let l=this.visibleColsService.getColAfter(o);if(!l)return;let c=o.getActualWidth()-r.newWidth,u=l.getActualWidth()+c;s.push({width:u,ratios:[1],columns:[l]})}}),s.length!==0&&this.resizeColumnSets({resizeSets:s,finished:n,source:i})}resizeColumnSets(e){let{resizeSets:t,finished:n,source:i}=e;if(!(!t||t.every(u=>this.checkMinAndMaxWidthsForSet(u)))){if(n){let u=t&&t.length>0?t[0].columns:null;this.eventDispatcher.columnResized(u,n,i)}return}let r=[],o=[];t.forEach(u=>{let{width:h,columns:f,ratios:p}=u,v={},y={};f.forEach(T=>o.push(T));let C=!0,E=0;for(;C;){if(E++,E>1e3){$e("infinite loop in resizeColumnSets");break}C=!1;let T=[],R=0,F=h;f.forEach((k,b)=>{if(y[k.getId()])F-=v[k.getId()];else{T.push(k);let _=p[b];R+=_}});let $=1/R;T.forEach((k,b)=>{let S=b===T.length-1,_;S?_=F:(_=Math.round(p[b]*h*$),F-=_);let I=k.getMinWidth(),A=k.getMaxWidth();_<I?(_=I,y[k.getId()]=!0,C=!0):A>0&&_>A&&(_=A,y[k.getId()]=!0,C=!0),v[k.getId()]=_})}f.forEach(T=>{let R=v[T.getId()];T.getActualWidth()!==R&&(T.setActualWidth(R,i),r.push(T))})});let a=r.length>0,l=[];a&&(l=this.refreshFlexedColumns({resizingCols:o,skipSetLeft:!0}),this.visibleColsService.setLeftValues(i),this.visibleColsService.updateBodyWidths(),this.columnViewportService.checkViewportColumns());let c=o.concat(l);(a||n)&&this.eventDispatcher.columnResized(c,n,i,l)}checkMinAndMaxWidthsForSet(e){let{columns:t,width:n}=e,i=0,s=0,r=!0;t.forEach(l=>{let c=l.getMinWidth();i+=c||0;let u=l.getMaxWidth();u>0?s+=u:r=!1});let o=n>=i,a=!r||n<=s;return o&&a}refreshFlexedColumns(e={}){let t=e.source?e.source:"flex";if(e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];let n=this.visibleColsService.getCenterCols(),i=-1;if(e.resizingCols){let f=new Set(e.resizingCols);for(let p=n.length-1;p>=0;p--)if(f.has(n[p])){i=p;break}}let s=0,r=[],o=0,a=0;for(let f=0;f<n.length;f++)n[f].getFlex()&&f>i?(r.push(n[f]),a+=n[f].getFlex(),o+=n[f].getMinWidth()):s+=n[f].getActualWidth();if(!r.length)return[];let l=[];s+o>this.flexViewportWidth&&(r.forEach(f=>f.setActualWidth(f.getMinWidth(),t)),l=r,r=[]);let c=[],u;e:for(;;){u=this.flexViewportWidth-s;let f=u/a;for(let p=0;p<r.length;p++){let v=r[p],y=f*v.getFlex(),C=0,E=v.getMinWidth(),T=v.getMaxWidth();if(y<E?C=E:y>T&&(C=T),C){v.setActualWidth(C,t),OG(r,v),a-=v.getFlex(),l.push(v),s+=v.getActualWidth();continue e}c[p]=Math.round(y)}break}let h=u;return r.forEach((f,p)=>{f.setActualWidth(Math.min(c[p],h),t),l.push(f),h-=c[p]}),e.skipSetLeft||this.visibleColsService.setLeftValues(t),e.updateBodyWidths&&this.visibleColsService.updateBodyWidths(),e.fireResizedEvent&&this.eventDispatcher.columnResized(l,!0,t,r),r}sizeColumnsToFit(e,t="sizeColumnsToFit",n,i){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,n,i));return}let s={};i&&i?.columnLimits?.forEach(v=>{var y=v,{key:f}=y,p=sg(y,["key"]);s[typeof f=="string"?f:f.getColId()]=p});let r=this.visibleColsService.getAllCols(),o=e===So(r);if(e<=0||!r.length||o)return;let a=[],l=[];r.forEach(f=>{f.getColDef().suppressSizeToFit===!0?l.push(f):a.push(f)});let c=a.slice(0),u=!1,h=f=>{li(a,f),l.push(f)};for(a.forEach(f=>{f.resetActualWidth(t);let p=s?.[f.getId()],v=p?.minWidth??i?.defaultMinWidth,y=p?.maxWidth??i?.defaultMaxWidth,C=f.getActualWidth();typeof v=="number"&&C<v?f.setActualWidth(v,t,!0):typeof y=="number"&&C>y&&f.setActualWidth(y,t,!0)});!u;){u=!0;let f=e-So(l);if(f<=0)a.forEach(p=>{let v=s?.[p.getId()]?.minWidth??i?.defaultMinWidth;if(typeof v=="number"){p.setActualWidth(v,t,!0);return}p.setMinimum(t)});else{let p=f/So(a),v=f;for(let y=a.length-1;y>=0;y--){let C=a[y],E=s?.[C.getId()],T=E?.minWidth??i?.defaultMinWidth,R=E?.maxWidth??i?.defaultMaxWidth,F=C.getMinWidth(),$=C.getMaxWidth(),k=typeof T=="number"&&T>F?T:F,b=typeof R=="number"&&R<$?R:$,S=Math.round(C.getActualWidth()*p);S<k?(S=k,h(C),u=!1):S>b?(S=b,h(C),u=!1):y===0&&(S=v),C.setActualWidth(S,t,!0),v-=S}}}c.forEach(f=>{f.fireColumnWidthChangedEvent(t)}),this.visibleColsService.setLeftValues(t),this.visibleColsService.updateBodyWidths(),!n&&this.eventDispatcher.columnResized(c,!0,t)}applyAutosizeStrategy(){let e=this.gos.get("autoSizeStrategy");if(!e)return;let{type:t}=e;setTimeout(()=>{if(t==="fitGridWidth"){let{columnLimits:n,defaultMinWidth:i,defaultMaxWidth:s}=e,r=n?.map(({colId:o,minWidth:a,maxWidth:l})=>({key:o,minWidth:a,maxWidth:l}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:i,defaultMaxWidth:s,columnLimits:r})}else t==="fitProvidedWidth"&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}};function UG(e,t){return e+"_"+t}function qt(e){return e instanceof WG}var WG=class extends L{constructor(e,t,n,i){super(),this.isColumn=!1,this.displayedChildren=[],this.parent=null,this.groupId=t,this.partId=n,this.providedColumnGroup=e,this.pinned=i}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return UG(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){let e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{qt(e)&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){let t=We(this.displayedChildren).getLeft();this.setLeft(t)}else{let e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach(t=>{e+=t.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){let e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){let e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{Fa(t)?e.push(t):qt(t)&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{Fa(t)?e.push(t):qt(t)&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){let e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}this.children.forEach(n=>{if(qt(n)&&(!n.displayedChildren||!n.displayedChildren.length))return;switch(n.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(n);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(n);break;default:this.displayedChildren.push(n);break}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},jG=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){let t=this.existingIds[e],n;return typeof t!="number"?n=0:n=t+1,this.existingIds[e]=n,n}},ine=class extends L{constructor(){super(...arguments),this.beanName="visibleColsService",this.colsAndGroupsMap={},this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher}refresh(e,t=!1){t||this.buildTrees(),this.updateOpenClosedVisibilityInColumnGroups(),this.columnsLeft=sR(this.treeLeft),this.columnsCenter=sR(this.treeCenter),this.columnsRight=sR(this.treeRight),this.joinColsAriaOrder(),this.joinCols(),this.setLeftValues(e),this.autoHeightCols=this.columns.filter(n=>n.isAutoHeight()),this.columnSizeService.refreshFlexedColumns(),this.updateBodyWidths(),this.columnViewportService.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(e),this.eventDispatcher.visibleCols()}updateBodyWidths(){let e=So(this.columnsCenter),t=So(this.columnsLeft),n=So(this.columnsRight);if(this.bodyWidthDirty=this.bodyWidth!==e,this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==n){this.bodyWidth=e,this.leftWidth=t,this.rightWidth=n;let s={type:"columnContainerWidthChanged"};this.eventService.dispatchEvent(s);let r={type:"displayedColumnsWidthChanged"};this.eventService.dispatchEvent(r)}}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e){let t,n;this.gos.get("enableRtl")?(t=this.columnsLeft?this.columnsLeft[0]:null,n=this.columnsRight?We(this.columnsRight):null):(t=this.columnsLeft?We(this.columnsLeft):null,n=this.columnsRight?this.columnsRight[0]:null),this.columnModel.getCols().forEach(i=>{i.setLastLeftPinned(i===t,e),i.setFirstRightPinned(i===n,e)})}buildTrees(){let e=this.columnModel.getColsToShow(),t=e.filter(r=>r.getPinned()=="left"),n=e.filter(r=>r.getPinned()=="right"),i=e.filter(r=>r.getPinned()!="left"&&r.getPinned()!="right"),s=new jG;this.treeLeft=this.createGroups({columns:t,idCreator:s,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=this.createGroups({columns:n,idCreator:s,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=this.createGroups({columns:i,idCreator:s,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.ariaOrderColumns=[]}joinColsAriaOrder(){let e=this.columnModel.getCols(),t=[],n=[],i=[];for(let s of e){let r=s.getPinned();r?r===!0||r==="left"?t.push(s):i.push(s):n.push(s)}this.ariaOrderColumns=t.concat(n).concat(i)}getAriaColIndex(e){let t;return qt(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}getAllAutoHeightCols(){return this.autoHeightCols}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(e=>{e.forEach(t=>{qt(t)&&t.checkLeft()})})}setLeftValuesOfCols(e){if(!this.columnModel.getColDefCols())return;let n=this.columnModel.getCols().slice(0),i=this.gos.get("enableRtl");[this.columnsLeft,this.columnsRight,this.columnsCenter].forEach(s=>{if(i){let r=So(s);s.forEach(o=>{r-=o.getActualWidth(),o.setLeft(r,e)})}else{let r=0;s.forEach(o=>{o.setLeft(r,e),r+=o.getActualWidth()})}Ete(n,s)}),n.forEach(s=>{s.setLeft(null,e)})}joinCols(){this.gos.get("enableRtl")?this.columns=this.columnsRight.concat(this.columnsCenter).concat(this.columnsLeft):this.columns=this.columnsLeft.concat(this.columnsCenter).concat(this.columnsRight)}getColsCenter(){return this.columnsCenter}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}getTreeLeft(){return this.treeLeft}getTreeRight(){return this.treeRight}getTreeCenter(){return this.treeCenter}getAllCols(){return this.columns}isColDisplayed(e){return this.getAllCols().indexOf(e)>=0}getLeftColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsLeft):this.columnsLeft}getRightColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsRight):this.columnsRight}getColsForRow(e,t,n,i){let s=[],r=null;for(let o=0;o<t.length;o++){let a=t[o],l=t.length-o,c=Math.min(a.getColSpan(e),l),u=[a];if(c>1){let f=c-1;for(let p=1;p<=f;p++)u.push(t[o+p]);o+=f}let h;n?(h=!1,u.forEach(f=>{n(f)&&(h=!0)})):h=!0,h&&(s.length===0&&r&&(i&&i(a))&&s.push(r),s.push(a)),r=a}return s}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getCenterCols(){return this.columnsCenter}getLeftCols(){return this.columnsLeft}getRightCols(){return this.columnsRight}getColBefore(e){let t=this.getAllCols(),n=t.indexOf(e);return n>0?t[n-1]:null}getGroupAtDirection(e,t){let n=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),i=e.getDisplayedLeafColumns(),s=t==="After"?We(i):i[0],r=`getCol${t}`;for(;;){let o=this[r](s);if(!o)return null;let a=this.getColGroupAtLevel(o,n);if(a!==e)return a}}getColGroupAtLevel(e,t){let n=e.getParent(),i,s;for(;i=n.getProvidedColumnGroup().getLevel(),s=n.getPaddingLevel(),!(i+s<=t);)n=n.getParent();return n}isPinningLeft(){return this.columnsLeft.length>0}isPinningRight(){return this.columnsRight.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};let e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};zl(this.treeCenter,!1,e),zl(this.treeLeft,!1,e),zl(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){let e=this.getAllTrees();zl(e,!1,t=>{qt(t)&&t.calculateDisplayedColumns()})}getFirstColumn(){let e=this.gos.get("enableRtl"),t=["getLeftCols","getCenterCols","getRightCols"];e&&t.reverse();for(let n=0;n<t.length;n++){let i=this[t[n]]();if(i.length)return e?We(i):i[0]}return null}getColumnGroup(e,t){if(!e)return null;if(qt(e))return e;let n=this.getAllTrees(),i=typeof t=="number",s=null;return zl(n,!1,r=>{if(qt(r)){let o=r,a;i?a=e===o.getGroupId()&&t===o.getPartId():a=e===o.getGroupId(),a&&(s=o)}}),s}getColAfter(e){let t=this.getAllCols(),n=t.indexOf(e);return n<t.length-1?t[n+1]:null}isBodyWidthDirty(){return this.bodyWidthDirty}setBodyWidthDirty(){this.bodyWidthDirty=!0}getColsLeftWidth(){return So(this.columnsLeft)}getDisplayedColumnsRightWidth(){return So(this.columnsRight)}isColAtEdge(e,t){let n=this.getAllCols();if(!n.length)return!1;let i=t==="first",s;if(qt(e)){let r=e.getDisplayedLeafColumns();if(!r.length)return!1;s=i?r[0]:We(r)}else s=e;return(i?n[0]:We(n))===s}createGroups(e){let{columns:t,idCreator:n,pinned:i,oldDisplayedGroups:s,isStandaloneStructure:r}=e,o=this.mapOldGroupsById(s),a=[],l=t;for(;l.length;){let c=l;l=[];let u=0,h=f=>{let p=u;u=f;let v=c[p],C=(qt(v)?v.getProvidedColumnGroup():v).getOriginalParent();if(C==null){for(let T=p;T<f;T++)a.push(c[T]);return}let E=this.createColGroup(C,n,o,i,r);for(let T=p;T<f;T++)E.addChild(c[T]);l.push(E)};for(let f=1;f<c.length;f++){let p=c[f],y=(qt(p)?p.getProvidedColumnGroup():p).getOriginalParent(),C=c[u],T=(qt(C)?C.getProvidedColumnGroup():C).getOriginalParent();y!==T&&h(f)}u<c.length&&h(c.length)}return r||this.setupParentsIntoCols(a,null),a}createColGroup(e,t,n,i,s){let r=e.getGroupId(),o=t.getInstanceIdForKey(r),a=UG(r,o),l=n[a];return l&&l.getProvidedColumnGroup()!==e&&(l=null),q(l)?l.reset():(l=new WG(e,r,o,i),s||this.createBean(l)),l}mapOldGroupsById(e){let t={},n=i=>{i.forEach(s=>{if(qt(s)){let r=s;t[s.getUniqueId()]=r,n(r.getChildren())}})};return e&&n(e),t}setupParentsIntoCols(e,t){e.forEach(n=>{if(n.setParent(t),qt(n)){let i=n;this.setupParentsIntoCols(i.getChildren(),i)}})}};function zl(e,t,n){if(e)for(let i=0;i<e.length;i++){let s=e[i];if(qt(s)){let r=t?s.getDisplayedChildren():s.getChildren();zl(r,t,n)}n(s)}}function sR(e){let t=[];return zl(e,!0,n=>{Fa(n)&&t.push(n)}),t}var zG=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd"],sne=["scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged"],rne=[...zG,...sne],one={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,removePivotHeaderRowWhenSingleValueColumn:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0},jn=class{};jn.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"];jn.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy"];jn.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"];jn.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"];jn.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading"];jn.OTHER_PROPERTIES=["suppressStickyTotalRow"];jn.FUNCTION_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"];jn.ALL_PROPERTIES=[...jn.ARRAY_PROPERTIES,...jn.OBJECT_PROPERTIES,...jn.STRING_PROPERTIES,...jn.NUMBER_PROPERTIES,...jn.FUNCTION_PROPERTIES,...jn.BOOLEAN_PROPERTIES,...jn.OTHER_PROPERTIES];var lp=jn,Ss=class{static getCallbackForEvent(t){return!t||t.length<2?t:"on"+t[0].toUpperCase()+t.substring(1)}};Ss.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY";Ss.PUBLIC_EVENTS=zG;Ss.EVENT_CALLBACKS=rne.map(e=>Ss.getCallbackForEvent(e));Ss.BOOLEAN_PROPERTIES=lp.BOOLEAN_PROPERTIES;Ss.ALL_PROPERTIES=lp.ALL_PROPERTIES;Ss.ALL_PROPERTIES_AND_CALLBACKS=[...Ss.ALL_PROPERTIES,...Ss.EVENT_CALLBACKS];Ss.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(Ss.ALL_PROPERTIES_AND_CALLBACKS);var cp=Ss;function $G(e,t){typeof e!="object"&&(e={});let n=B({},e);return cp.ALL_PROPERTIES_AND_CALLBACKS.forEach(s=>{let r=t[s];typeof r<"u"&&r!==cp.VUE_OMITTED_PROPERTY&&(n[s]=r)}),n}function qG(e,t){if(!e)return;let n={},i=!1;if(Object.keys(e).filter(o=>cp.ALL_PROPERTIES_AND_CALLBACKS_SET.has(o)).forEach(o=>{n[o]=e[o],i=!0}),!i)return;let s={type:"gridOptionsChanged",options:n};t.dispatchEvent(s);let r={type:"componentStateChanged"};vs(n,(o,a)=>{r[o]=a}),t.dispatchEvent(r)}var ane=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){let t=(e||"").split(" ");if(t.length>1){t.forEach(i=>this.addCssClass(i));return}if(this.cssClassStates[e]!==!0&&e.length){let i=this.getGui();i&&i.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){let t=(e||"").split(" ");if(t.length>1){t.forEach(i=>this.removeCssClass(i));return}if(this.cssClassStates[e]!==!1&&e.length){let i=this.getGui();i&&i.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){let t=this.getGui();return t?t.classList.contains(e):!1}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){let i=(e||"").split(" ");if(i.length>1){i.forEach(s=>this.addOrRemoveCssClass(s,t));return}}if(this.cssClassStates[e]!==t&&e.length){let i=this.getGui();i&&i.classList.toggle(e,t),this.cssClassStates[e]=t}}};function To(e,t,n){n==null||typeof n=="string"&&n==""?KG(e,t):Xs(e,t,n)}function Xs(e,t,n){e.setAttribute(QG(t),n.toString())}function KG(e,t){e.removeAttribute(QG(t))}function QG(e){return`aria-${e}`}function Ri(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function lne(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function cne(e){return e.getAttribute("aria-label")}function pd(e,t){To(e,"label",t)}function up(e,t){To(e,"labelledby",t)}function YG(e,t){To(e,"live",t)}function une(e,t){To(e,"atomic",t)}function dne(e,t){To(e,"relevant",t)}function hne(e,t){To(e,"disabled",t)}function BR(e,t){To(e,"hidden",t)}function My(e,t){Xs(e,"expanded",t)}function fne(e,t){Xs(e,"setsize",t)}function pne(e,t){Xs(e,"posinset",t)}function gne(e,t){Xs(e,"multiselectable",t)}function mne(e,t){Xs(e,"rowcount",t)}function JG(e,t){Xs(e,"rowindex",t)}function vne(e,t){Xs(e,"colcount",t)}function XG(e,t){Xs(e,"colindex",t)}function Cne(e,t){Xs(e,"colspan",t)}function yne(e,t){Xs(e,"sort",t)}function wne(e){KG(e,"sort")}function Py(e,t){To(e,"selected",t)}function Sne(e,t){To(e,"controls",t.id),up(t,e.id)}function GR(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var rR,py,oR,aR,lR,cR,bR,ER;function Do(){return rR===void 0&&(rR=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),rR}function ZG(){if(py===void 0)if(Do()){let e=navigator.userAgent.match(/version\/(\d+)/i);e&&(py=e[1]!=null?parseFloat(e[1]):0)}else py=0;return py}function HR(){if(oR===void 0){let e=window;oR=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return oR}function eH(){return aR===void 0&&(aR=/(firefox)/i.test(navigator.userAgent)),aR}function tH(){return lR===void 0&&(lR=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),lR}function xa(){return cR===void 0&&(cR=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),cR}function DR(){return!Do()||ZG()>=15}function TR(e){if(!e)return null;let t=e.tabIndex,n=e.getAttribute("tabIndex");return t===-1&&(n===null||n===""&&!eH())?null:t.toString()}function _ne(){if(!document.body)return-1;let e=1e6,t=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,n=document.createElement("div");for(document.body.appendChild(n);;){let i=e*2;if(n.style.height=i+"px",i>t||n.clientHeight!==i)break;e=i}return document.body.removeChild(n),e}function bne(){return document.body?.clientWidth??(window.innerHeight||document.documentElement?.clientWidth||-1)}function Ene(){return document.body?.clientHeight??(window.innerHeight||document.documentElement?.clientHeight||-1)}function Dne(){return ER==null&&nH(),ER}function nH(){let e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let n=t.offsetWidth-t.clientWidth;n===0&&t.clientWidth===0&&(n=null),t.parentNode&&t.parentNode.removeChild(t),n!=null&&(ER=n,bR=n===0)}function iH(){return bR==null&&nH(),bR}var gy;var Tne="[tabindex], input, select, button, textarea, [href]",sH="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function UR(e){let t=Element.prototype.matches||Element.prototype.msMatchesSelector,i=t.call(e,"input, select, button, textarea"),s=t.call(e,sH),r=Js(e);return i&&!s&&r}function Et(e,t,n={}){let{skipAriaHidden:i}=n;e.classList.toggle("ag-hidden",!t),i||BR(e,!t)}function Rne(e,t,n={}){let{skipAriaHidden:i}=n;e.classList.toggle("ag-invisible",!t),i||BR(e,!t)}function dp(e,t){let n="disabled",i=t?s=>s.setAttribute(n,""):s=>s.removeAttribute(n);i(e),dH(e.querySelectorAll("input"),s=>i(s))}function hd(e,t,n){let i=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof n=="number"){if(++i>n)break}else if(e===n)break}return!1}function Zl(e){let{height:t,width:n,borderTopWidth:i,borderRightWidth:s,borderBottomWidth:r,borderLeftWidth:o,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:u,marginTop:h,marginRight:f,marginBottom:p,marginLeft:v,boxSizing:y}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(n||"0"),borderTopWidth:parseFloat(i||"0"),borderRightWidth:parseFloat(s||"0"),borderBottomWidth:parseFloat(r||"0"),borderLeftWidth:parseFloat(o||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(c||"0"),paddingLeft:parseFloat(u||"0"),marginTop:parseFloat(h||"0"),marginRight:parseFloat(f||"0"),marginBottom:parseFloat(p||"0"),marginLeft:parseFloat(v||"0"),boxSizing:y}}function WR(e){let t=Zl(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function fp(e){let t=Zl(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function rH(e){let{height:t,marginBottom:n,marginTop:i}=Zl(e);return Math.floor(t+n+i)}function Fy(e){let{width:t,marginLeft:n,marginRight:i}=Zl(e);return Math.floor(t+n+i)}function oH(e){let t=e.getBoundingClientRect(),{borderTopWidth:n,borderLeftWidth:i,borderRightWidth:s,borderBottomWidth:r}=Zl(e);return{top:t.top+(n||0),left:t.left+(i||0),right:t.right+(s||0),bottom:t.bottom+(r||0)}}function xy(){if(typeof gy=="boolean")return gy;let e=document.createElement("div");return e.style.direction="rtl",e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="0px",e.style.overflow="hidden",e.dir="rtl",e.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(e),e.scrollLeft=1,gy=Math.floor(e.scrollLeft)===0,document.body.removeChild(e),gy}function Oy(e,t){let n=e.scrollLeft;return t&&(n=Math.abs(n),HR()&&!xy()&&(n=e.scrollWidth-e.clientWidth-n)),n}function Ny(e,t,n){n&&(xy()?t*=-1:(Do()||HR())&&(t=e.scrollWidth-e.clientWidth-t)),e.scrollLeft=t}function zn(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function ws(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function aH(e){return!!e.offsetParent}function Js(e){let t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!aH(e)||window.getComputedStyle(e).visibility!=="visible")}function gd(e){let t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function lH(e,t,n){n&&n.nextSibling===t||(n?n.nextSibling?e.insertBefore(t,n.nextSibling):e.appendChild(t):e.firstChild&&e.firstChild!==t&&e.insertAdjacentElement("afterbegin",t))}function cH(e,t){for(let n=0;n<t.length;n++){let i=t[n],s=e.children[n];s!==i&&e.insertBefore(i,s)}}function Ine(e,t,n){n?n.insertAdjacentElement("afterend",t):e.firstChild?e.insertAdjacentElement("afterbegin",t):e.appendChild(t)}function uH(e,t){if(t)for(let[n,i]of Object.entries(t)){if(!n||!n.length||i==null)continue;let s=Zte(n),r=i.toString(),o=r.replace(/\s*!important/g,""),a=o.length!=r.length?"important":void 0;e.style.setProperty(s,o,a)}}function Ane(e){return e.clientWidth<e.scrollWidth}function Mne(e){return e.clientHeight<e.scrollHeight}function ky(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):Ys(e,t)}function Ys(e,t){t=jR(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function sp(e,t){t=jR(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function jR(e){return typeof e=="number"?`${e}px`:e}function zR(e){return e instanceof Node||e instanceof HTMLElement}function Pne(e){if(e==null)return[];let t=[];return dH(e,n=>t.push(n)),t}function Fne(e,t){if(e)for(let n=0;n<e.length;n++){let i=e[n];t(i.name,i.value)}}function _o(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n.toString())}function dH(e,t){if(e!=null)for(let n=0;n<e.length;n++)t(e[n])}var md=class{constructor(e=0,t=1){this.nextValue=e,this.step=t}next(){let e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}},xne=1e3,One=1e3,gG=100,hH=class jl extends L{constructor(t,n,i,s){super(),this.parentComp=t,this.tooltipShowDelayOverride=n,this.tooltipHideDelayOverride=i,this.shouldDisplayTooltip=s,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(t){this.popupService=t.popupService,this.userComponentFactory=t.userComponentFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");let t=this.parentComp.getGui();this.tooltipTrigger===0&&this.addManagedListeners(t,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(t,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(t,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(t,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(t){let n=this.gos.get(t);return n<0&&j(`${t} should not be lower than 0`),Math.max(200,n)}getTooltipDelay(t){return t==="show"?this.tooltipShowDelayOverride??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipHideDelayOverride??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){let t=this.gos.get("tooltipTrigger");return!t||t==="hover"?0:1}onMouseEnter(t){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!xa()&&(jl.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(t)},gG):this.prepareToShowTooltip(t))}onMouseMove(t){this.lastMouseEvent&&(this.lastMouseEvent=t),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(t){let n=t.relatedTarget,i=this.parentComp.getGui(),s=this.tooltipComp?.getGui();this.isInteractingWithTooltip||i.contains(n)||this.interactionEnabled&&s?.contains(n)||this.setToDoNothing()}onKeyDown(){this.setToDoNothing()}prepareToShowTooltip(t){if(this.state!=0||jl.isLocked)return;let n=0;t&&(n=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=t||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),n),this.state=1}isLastTooltipHiddenRecently(){let t=new Date().getTime(),n=jl.lastTooltipHideTime;return t-n<xne}setToDoNothing(){this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){let t=B({},this.parentComp.getTooltipParams());if(!q(t.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;let n=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(t).newAgStackInstance().then(n)}hideTooltip(t){if(!t&&this.isInteractingWithTooltip)return;this.tooltipComp&&(this.destroyTooltipComp(),jl.lastTooltipHideTime=new Date().getTime());let n={type:"tooltipHide",parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(n),t&&(this.isInteractingWithTooltip=!1),this.state=0}newTooltipComponentCallback(t,n){if(this.state!==2||this.tooltipInstanceCount!==t){this.destroyBean(n);return}let s=n.getGui();this.tooltipComp=n,s.classList.contains("ag-tooltip")||s.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&s.classList.add("ag-tooltip-animate"),this.interactionEnabled&&s.classList.add("ag-tooltip-interactive");let r=this.localeService.getLocaleTextFunc(),o=this.popupService.addPopup({eChild:s,ariaLabel:r("ariaLabelTooltip","Tooltip")});if(o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){let l=this.setToDoNothing.bind(this);[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:l,columnMoved:l})}this.interactionEnabled&&(this.tooltipTrigger===0?[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(s,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}):[this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(s,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}));let a={type:"tooltipShow",tooltipGui:s,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(a),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isInteractingWithTooltip=!1,this.lockService()}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}onTooltipFocusOut(t){let n=this.parentComp.getGui(),i=this.tooltipComp?.getGui(),s=t.relatedTarget;i?.contains(s)||(this.isInteractingWithTooltip=!1,n.contains(s)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){let t={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(ae(B({},t),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(ae(B({},t),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");let t=this.tooltipPopupDestroyFunc,n=this.tooltipComp,i=this.tooltipTrigger===0?One:0;window.setTimeout(()=>{t(),this.destroyBean(n)},i),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(t=>{t&&t()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){jl.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},gG)}unlockService(){jl.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};hH.isLocked=!1;var Nne=hH,Cd=class extends L{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}wireBeans(e){this.beans=e}postConstruct(){this.refreshToolTip()}setBrowserTooltip(e){let t="title",n=this.ctrl.getGui();n&&(e!=null&&e!=""?n.setAttribute(t,e):n.removeAttribute(t))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){if(this.tooltipManager!=null)return;let e={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new Nne(e,this.ctrl.getTooltipShowDelayOverride?.(),this.ctrl.getTooltipHideDelayOverride?.(),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){let e=this.ctrl,t=e.getColumn?e.getColumn():void 0,n=e.getColDef?e.getColDef():void 0,i=e.getRowNode?e.getRowNode():void 0;return{location:e.getLocation(),colDef:n,column:t,rowIndex:e.getRowIndex?e.getRowIndex():void 0,node:i,data:i?i.data:void 0,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?e.getValueFormatted():void 0,hideTooltipCallback:()=>this.tooltipManager?.hideTooltip(!0)}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}},kne=new md,ie=null,Ke=class fH extends L{constructor(t,n){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=kne.next(),this.cssClassManager=new ane(()=>this.eGui),this.componentSelectors=new Map((n??[]).map(i=>[i.selector,i])),t&&this.setTemplate(t)}preWireBeans(t){super.preWireBeans(t)}preConstruct(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips"),this.wireTemplate(this.getGui())}wireTemplate(t,n){t&&this.gos&&(this.applyElementsToComponent(t),this.createChildComponentsFromTags(t,n))}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(t){let{newTooltipText:n,showDelayOverride:i,hideDelayOverride:s,location:r,shouldDisplayTooltip:o}=t||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==n&&(this.tooltipText=n);let a=()=>this.tooltipText;n!=null&&(this.tooltipFeature=this.createBean(new Cd({getTooltipValue:a,getGui:()=>this.getGui(),getLocation:()=>r??"UNKNOWN",getColDef:t?.getColDef,getColumn:t?.getColumn,getTooltipShowDelayOverride:i!=null?()=>i:void 0,getTooltipHideDelayOverride:s!=null?()=>s:void 0,shouldDisplayTooltip:o})))}getDataRefAttribute(t){return t.getAttribute?t.getAttribute("data-ref"):null}applyElementsToComponent(t,n,i,s=null){if(n===void 0&&(n=this.getDataRefAttribute(t)),n){let r=this[n];if(r===ie)this[n]=s??t;else{let o=i&&i[n];!this.suppressDataRefValidation&&!o&&j(`Issue with data-ref: ${n} on ${this.constructor.name} with ${r}`)}}}createChildComponentsFromTags(t,n){Pne(t.childNodes).forEach(s=>{if(!(s instanceof HTMLElement))return;let r=this.createComponentFromElement(s,o=>{o.getGui()&&this.copyAttributesFromNode(s,o.getGui())},n);if(r){if(r.addItems&&s.children.length){this.createChildComponentsFromTags(s,n);let o=Array.prototype.slice.call(s.children);r.addItems(o)}this.swapComponentForNode(r,t,s)}else s.childNodes&&this.createChildComponentsFromTags(s,n)})}createComponentFromElement(t,n,i){let s=t.nodeName,r=this.getDataRefAttribute(t),o=s.indexOf("AG-")===0,a=o?this.componentSelectors.get(s):null,l=null;if(a){fH.elementGettingCreated=t;let c=i&&r?i[r]:void 0;l=new a.component(c),l.setParentComponent(this),this.createBean(l,null,n)}else o&&j(`Missing selector: ${s}`);return this.applyElementsToComponent(t,r,i,l),l}copyAttributesFromNode(t,n){Fne(t.attributes,(i,s)=>n.setAttribute(i,s))}swapComponentForNode(t,n,i){let s=t.getGui();n.replaceChild(s,i),n.insertBefore(document.createComment(i.nodeName),s),this.addDestroyFunc(this.destroyBean.bind(this,t))}activateTabIndex(t){let n=this.gos.get("tabIndex");t||(t=[]),t.length||t.push(this.getGui()),t.forEach(i=>i.setAttribute("tabindex",n.toString()))}setTemplate(t,n,i){let s=gd(t);this.setTemplateFromElement(s,n,i)}setTemplateFromElement(t,n,i,s=!1){if(this.eGui=t,this.suppressDataRefValidation=s,n)for(let r=0;r<n.length;r++){let o=n[r];this.componentSelectors.set(o.selector,o)}this.wireTemplate(t,i)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(t){this.parentComponent=t}getParentComponent(){return this.parentComponent}setGui(t){this.eGui=t}queryForHtmlElement(t){return this.eGui.querySelector(t)}getContainerAndElement(t,n){let i=n;return t==null?null:(i||(i=this.eGui),zR(t)?{element:t,parent:i}:{element:t.getGui(),parent:i})}prependChild(t,n){let{element:i,parent:s}=this.getContainerAndElement(t,n)||{};!i||!s||s.insertAdjacentElement("afterbegin",i)}appendChild(t,n){let{element:i,parent:s}=this.getContainerAndElement(t,n)||{};!i||!s||s.appendChild(i)}isDisplayed(){return this.displayed}setVisible(t,n={}){if(t!==this.visible){this.visible=t;let{skipAriaHidden:i}=n;Rne(this.eGui,t,{skipAriaHidden:i})}}setDisplayed(t,n={}){if(t!==this.displayed){this.displayed=t;let{skipAriaHidden:i}=n;Et(this.eGui,t,{skipAriaHidden:i});let s={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(s)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}addGuiEventListener(t,n,i){this.eGui.addEventListener(t,n,i),this.addDestroyFunc(()=>this.eGui.removeEventListener(t,n))}addCssClass(t){this.cssClassManager.addCssClass(t)}removeCssClass(t){this.cssClassManager.removeCssClass(t)}containsCssClass(t){return this.cssClassManager.containsCssClass(t)}addOrRemoveCssClass(t,n){this.cssClassManager.addOrRemoveCssClass(t,n)}},Lne={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus",checkboxChecked:"checkbox-checked",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off"};function yo(e,t,n){let i=Ji(e,t,n);if(i){let{className:r}=i;if(typeof r=="string"&&r.indexOf("ag-icon")>-1||typeof r=="object"&&r["ag-icon"])return i}let s=document.createElement("span");return s.appendChild(i),s}function Ji(e,t,n,i){let s=null,r=n&&n.getColDef().icons;if(r&&(s=r[e]),t&&!s){let o=t.get("icons");o&&(s=o[e])}if(s){let o;if(typeof s=="function")o=s();else if(typeof s=="string")o=s;else throw new Error("icon from grid options needs to be a string or a function");if(typeof o=="string")return gd(o);if(zR(o))return o;j("iconRenderer should return back a string or a dom object")}else{let o=document.createElement("span"),a=Lne[e];return a||(i?a=e:(j(`Did not find icon ${e}`),a="")),o.setAttribute("class",`ag-icon ag-icon-${a}`),o.setAttribute("unselectable","on"),Ri(o,"presentation"),o}}function pH(e,t,n){if(n===0)return!1;let i=Math.abs(e.clientX-t.clientX),s=Math.abs(e.clientY-t.clientY);return Math.max(i,s)<=n}var Ma=class{constructor(e,t=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new vd,this.eElement=e,this.preventMouseClick=t;let n=this.onTouchStart.bind(this),i=this.onTouchMove.bind(this),s=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",n,{passive:!0}),this.eElement.addEventListener("touchmove",i,{passive:!0}),this.eElement.addEventListener("touchend",s,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",n,{passive:!0}),this.eElement.removeEventListener("touchmove",i,{passive:!0}),this.eElement.removeEventListener("touchend",s,{passive:!1})})}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;let t=this.touchStart;window.setTimeout(()=>{let n=this.touchStart===t;if(this.touching&&n&&!this.moved){this.moved=!0;let i={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(i)}},500)}onTouchMove(e){if(!this.touching)return;let t=this.getActiveTouch(e.touches);if(!t)return;!pH(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){let t={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(t),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){let e=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){let n={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(n),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}},Vne=`<span class="ag-sort-indicator-container">
        <span data-ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>
        <span data-ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>
        <span data-ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>
        <span data-ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>
        <span data-ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>
    </span>`,$R=class extends Ke{constructor(e){super(),this.eSortOrder=ie,this.eSortAsc=ie,this.eSortDesc=ie,this.eSortMixed=ie,this.eSortNone=ie,e||this.setTemplate(Vne)}wireBeans(e){this.sortController=e.sortController}attachCustomElements(e,t,n,i,s){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=n,this.eSortMixed=i,this.eSortNone=s}setupSort(e,t=!1){this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!(!this.column.isSortable()&&!this.column.getColDef().showRowGroup)&&(this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addManagedPropertyListener("unSortIcon",()=>this.updateIcons()),this.addManagedEventListeners({newColumnsLoaded:this.updateIcons.bind(this),sortChanged:this.onSortChanged.bind(this),columnRowGroupChanged:this.onSortChanged.bind(this)}),this.onSortChanged())}addInIcon(e,t,n){if(t==null)return;let i=Ji(e,this.gos,n);i&&t.appendChild(i)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){let e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){let t=e==="asc";Et(this.eSortAsc,t,{skipAriaHidden:!0})}if(this.eSortDesc){let t=e==="desc";Et(this.eSortDesc,t,{skipAriaHidden:!0})}if(this.eSortNone){let t=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),n=e==null;Et(this.eSortNone,!t&&n,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);let e=this.column.getColDef().showRowGroup;this.gos.isColumnsSortingCoupledToGroup()&&e&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){let e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";Et(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){if(!this.eSortOrder)return;let e=this.sortController.getColumnsWithSortingOrdered(),t=this.sortController.getDisplaySortIndexForColumn(this.column)??-1,n=e.some(s=>this.sortController.getDisplaySortIndexForColumn(s)??!1),i=t>=0&&n;Et(this.eSortOrder,i,{skipAriaHidden:!0}),t>=0?this.eSortOrder.textContent=(t+1).toString():zn(this.eSortOrder)}},Bne={selector:"AG-SORT-INDICATOR",component:$R},Gne=`<div class="ag-cell-label-container" role="presentation">
        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">
            <span data-ref="eText" class="ag-header-cell-text"></span>
            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
            <ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>
        </div>
    </div>`,RR=class extends Ke{constructor(){super(...arguments),this.eFilter=ie,this.eFilterButton=ie,this.eSortIndicator=ie,this.eMenu=ie,this.eLabel=ie,this.eText=ie,this.eSortOrder=ie,this.eSortAsc=ie,this.eSortDesc=ie,this.eSortMixed=ie,this.eSortNone=ie,this.lastMovingChanged=0}wireBeans(e){this.sortController=e.sortController,this.menuService=e.menuService,this.funcColsService=e.funcColsService}destroy(){super.destroy()}refresh(e){let t=this.params;return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon?!1:(this.setDisplayName(e),!0)}workOutTemplate(){let e=this.params.template??Gne;return e=e&&e.trim?e.trim():e,e}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,[Bne]),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;let t=kr(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=t)}}addInIcon(e,t,n){if(t==null)return;let i=Ji(e,this.gos,n);i&&t.appendChild(i)}setupTap(){let{gos:e}=this;if(e.get("suppressTouch"))return;let t=new Ma(this.getGui(),!0),n=this.shouldSuppressMenuHide(),i=n&&q(this.eMenu),s=i?new Ma(this.eMenu,!0):t;if(this.params.enableMenu){let r=i?"tap":"longTap",o=a=>this.params.showColumnMenuAfterMouseClick(a.touchStart);this.addManagedListeners(s,{[r]:o})}if(this.params.enableSorting){let r=o=>{let a=o.touchStart.target;n&&(this.eMenu?.contains(a)||this.eFilterButton?.contains(a))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListeners(t,{tap:r})}if(this.params.enableFilterButton){let r=new Ma(this.eFilterButton,!0);this.addManagedListeners(r,{tap:()=>this.params.showFilter(this.eFilterButton)}),this.addDestroyFunc(()=>r.destroy())}this.addDestroyFunc(()=>t.destroy()),i&&this.addDestroyFunc(()=>s.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){ws(this.eMenu),this.eMenu=void 0;return}let e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedElementListeners(this.eMenu,{click:()=>this.params.showColumnMenu(this.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){let t=this.params.column,n=this.menuService.isLegacyMenuEnabled();if(e&&!n){if(this.menuService.isFilterMenuInHeaderEnabled(t))return this.params.showFilter(this.eFilterButton??this.eMenu??this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu(this.eMenu??this.eFilterButton??this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.createBean(new $R(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListeners(this.params.column,{movingChanged:()=>{this.lastMovingChanged=new Date().getTime()}}),this.eLabel&&this.addManagedElementListeners(this.eLabel,{click:t=>{let n=this.params.column.isMoving(),s=new Date().getTime()-this.lastMovingChanged<50;if(!(n||s)){let a=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.params.progressSort(a)}}});let e=()=>{let t=this.params.column.getSort();if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",t==="asc"),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",t==="desc"),this.addOrRemoveCssClass("ag-header-cell-sorted-none",!t),this.params.column.getColDef().showRowGroup){let s=!this.funcColsService.getSourceColumnsForGroupColumn(this.params.column)?.every(r=>this.params.column.getSort()==r.getSort());this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",s)}};this.addManagedEventListeners({sortChanged:e,columnRowGroupChanged:e})}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedElementListeners(this.eFilterButton,{click:()=>this.params.showFilter(this.eFilterButton)}):this.eFilterButton=void 0}configureFilter(e,t,n){if(!e)return ws(t),!1;let i=this.params.column;return this.addInIcon("filter",t,i),this.addManagedListeners(i,{filterChanged:n}),n(),!0}onFilterChangedIcon(){let e=this.params.column.isFilterActive();Et(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){let e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){return e?this.eFilterButton??this.eMenu??this.getGui():this.eMenu??this.eFilterButton??this.getGui()}},Hne=class extends Ke{constructor(){super(`<div class="ag-header-group-cell-label" role="presentation">
            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`),this.agOpened=ie,this.agClosed=ie,this.agLabel=ie}wireBeans(e){this.columnModel=e.columnModel}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&j("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened",this.agOpened),this.addInIcon("columnGroupClosed",this.agClosed);let e=s=>{if(Aa(s))return;let r=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),r,"uiColumnExpanded")};this.addTouchAndClickListeners(this.agClosed,e),this.addTouchAndClickListeners(this.agOpened,e);let t=s=>{fd(s)};this.addManagedElementListeners(this.agClosed,{dblclick:t}),this.addManagedElementListeners(this.agOpened,{dblclick:t}),this.addManagedElementListeners(this.getGui(),{dblclick:e}),this.updateIconVisibility();let n=this.params.columnGroup.getProvidedColumnGroup(),i=this.updateIconVisibility.bind(this);this.addManagedListeners(n,{expandedChanged:i,expandableChanged:i})}addTouchAndClickListeners(e,t){let n=new Ma(e,!0);this.addManagedListeners(n,{tap:t}),this.addDestroyFunc(()=>n.destroy()),this.addManagedElementListeners(e,{click:t})}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){let t=this.params.columnGroup.isExpanded();Et(this.agOpened,t),Et(this.agClosed,!t)}else Et(this.agOpened,!1),Et(this.agClosed,!1)}addInIcon(e,t){let n=Ji(e,this.gos,null);n&&t.appendChild(n)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){Et(this.agOpened,!1),Et(this.agClosed,!1);return}}setupLabel(){let{displayName:e,columnGroup:t}=this.params;if(q(e)){let n=kr(e,!0);this.agLabel.textContent=n}this.addOrRemoveCssClass("ag-sticky-label",!t.getColGroupDef()?.suppressStickyLabel)}},gH=(e=>(e.CommunityCoreModule="@ag-grid-community/core",e.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",e.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",e.CsvExportModule="@ag-grid-community/csv-export",e.EnterpriseCoreModule="@ag-grid-enterprise/core",e.RowGroupingModule="@ag-grid-enterprise/row-grouping",e.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",e.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",e.MenuModule="@ag-grid-enterprise/menu",e.SetFilterModule="@ag-grid-enterprise/set-filter",e.MultiFilterModule="@ag-grid-enterprise/multi-filter",e.StatusBarModule="@ag-grid-enterprise/status-bar",e.SideBarModule="@ag-grid-enterprise/side-bar",e.RangeSelectionModule="@ag-grid-enterprise/range-selection",e.MasterDetailModule="@ag-grid-enterprise/master-detail",e.RichSelectModule="@ag-grid-enterprise/rich-select",e.GridChartsModule="@ag-grid-enterprise/charts",e.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",e.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",e.ExcelExportModule="@ag-grid-enterprise/excel-export",e.ClipboardModule="@ag-grid-enterprise/clipboard",e.SparklinesModule="@ag-grid-enterprise/sparklines",e.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",e.AngularModule="@ag-grid-community/angular",e.ReactModule="@ag-grid-community/react",e.VueModule="@ag-grid-community/vue",e))(gH||{}),Vy=class it{static register(t){it.__register(t,!0,void 0)}static registerModules(t){it.__registerModules(t,!0,void 0)}static __register(t,n,i){it.runVersionChecks(t),i!==void 0?(it.areGridScopedModules=!0,it.gridModulesMap[i]===void 0&&(it.gridModulesMap[i]={}),it.gridModulesMap[i][t.moduleName]=t):it.globalModulesMap[t.moduleName]=t,it.setModuleBased(n)}static __unRegisterGridModules(t){delete it.gridModulesMap[t]}static __registerModules(t,n,i){it.setModuleBased(n),t&&t.forEach(s=>it.__register(s,n,i))}static isValidModuleVersion(t){let[n,i]=t.version.split(".")||[],[s,r]=it.currentModuleVersion.split(".")||[];return n===s&&i===r}static runVersionChecks(t){it.currentModuleVersion||(it.currentModuleVersion=t.version);let n=i=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${i} Please update all modules to the same version.`;if(t.version?it.isValidModuleVersion(t)||$e(n(`'${t.moduleName}' is version ${t.version} but the other modules are version ${it.currentModuleVersion}.`)):$e(n(`'${t.moduleName}' is incompatible.`)),t.validate){let i=t.validate();i.isValid||$e(`${i.message}`)}}static setModuleBased(t){it.moduleBased===void 0?it.moduleBased=t:it.moduleBased!==t&&($e("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),$e("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information."))}static __setIsBundled(){it.isBundled=!0}static __assertRegistered(t,n,i){if(this.__isRegistered(t,i))return!0;let s;if(it.isBundled)s=`AG Grid: unable to use ${n} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(it.moduleBased||it.moduleBased===void 0){let r=Object.entries(gH).find(([o,a])=>a===t)?.[0];s=`AG Grid: unable to use ${n} as the ${r} is not registered${it.areGridScopedModules?` for gridId: ${i}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${r} } from '${t}';
    
    ModuleRegistry.registerModules([ ${r} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else s=`AG Grid: unable to use ${n} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';`;return $e(s),!1}static __isRegistered(t,n){return!!it.globalModulesMap[t]||!!it.gridModulesMap[n]?.[t]}static __getRegisteredModules(t){return[...Ey(it.globalModulesMap),...Ey(it.gridModulesMap[t]||{})]}static __getGridRegisteredModules(t){return Ey(it.gridModulesMap[t]??{})||[]}static __isPackageBased(){return!it.moduleBased}};Vy.globalModulesMap={};Vy.gridModulesMap={};Vy.areGridScopedModules=!1;var ai=Vy,Une="\u2191",Wne="\u2193",jne=class extends Ke{constructor(){super(),this.refreshCount=0;let e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");let n=document.createElement("span");n.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(n),this.setTemplateFromElement(e)}wireBeans(e){this.filterManager=e.filterManager}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){let n=Math.abs(t),i=e.formatValue(n),s=q(i)?i:n,r=t>=0;r?this.eDelta.textContent=Une+s:this.eDelta.textContent=Wne+s,this.eDelta.classList.toggle("ag-value-change-delta-up",r),this.eDelta.classList.toggle("ag-value-change-delta-down",!r)}setTimerToRemoveDelta(){this.refreshCount++;let e=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),zn(this.eDelta)}refresh(e,t=!1){let n=e.value;if(n===this.lastValue||(q(e.valueFormatted)?this.eValue.textContent=e.valueFormatted:q(e.value)?this.eValue.textContent=n:zn(this.eValue),this.filterManager?.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof n=="number"&&typeof this.lastValue=="number"){let i=n-this.lastValue;this.showDelta(e,i)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=n,!0}},zne=class extends Ke{constructor(){super(),this.refreshCount=0;let e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}wireBeans(e){this.filterManager=e.filterManager}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;let e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);let t=document.createElement("span");t.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=t,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(e,t=!1){let n=e.value;return Ve(n)&&(n=""),n===this.lastValue||this.filterManager?.isSuppressFlashingCellsBecauseFiltering()?!1:(t||this.addSlideAnimation(),this.lastValue=n,q(e.valueFormatted)?this.eCurrent.textContent=e.valueFormatted:q(e.value)?this.eCurrent.textContent=n:zn(this.eCurrent),!0)}},N=class{};N.BACKSPACE="Backspace";N.TAB="Tab";N.ENTER="Enter";N.ESCAPE="Escape";N.SPACE=" ";N.LEFT="ArrowLeft";N.UP="ArrowUp";N.RIGHT="ArrowRight";N.DOWN="ArrowDown";N.DELETE="Delete";N.F2="F2";N.PAGE_UP="PageUp";N.PAGE_DOWN="PageDown";N.PAGE_HOME="Home";N.PAGE_END="End";N.A="KeyA";N.C="KeyC";N.D="KeyD";N.V="KeyV";N.X="KeyX";N.Y="KeyY";N.Z="KeyZ";var $ne=class extends Ke{constructor(e,t,n){super(t,n),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");let{labelSeparator:e,label:t,labelWidth:n,labelAlignment:i,disabled:s}=this.config;s!=null&&this.setDisabled(s),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),n!=null&&this.setLabelWidth(n),this.setLabelAlignment(i||this.labelAlignment),this.refreshLabel()}refreshLabel(){zn(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(Et(this.eLabel,!1),Ri(this.eLabel,"presentation")):(Et(this.eLabel,!0),Ri(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){let n=this.getGui().classList;return n.toggle("ag-label-align-left",e==="left"),n.toggle("ag-label-align-right",e==="right"),n.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(ky(this.eLabel,e),this)}setDisabled(e){e=!!e;let t=this.getGui();return dp(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},mH=class extends $ne{constructor(e,t,n,i){super(e,t,n),this.className=i}postConstruct(){super.postConstruct();let{width:e,value:t,onValueChange:n}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),n!=null&&this.onValueChange(n),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){let e=this.getAriaElement(),t=this.getLabelId(),n=this.getLabel();n==null||n==""||cne(e)!==null?up(e,""):up(e,t??"")}setAriaLabel(e){return pd(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return Ys(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}},$l=class extends mH{constructor(e,t,n="text",i="input"){super(e,e?.template??`
            <div role="presentation">
                <div data-ref="eLabel" class="ag-input-field-label"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${i} data-ref="eInput" class="ag-input-field-input"></${i}>
                </div>
            </div>`,[],t),this.inputType=n,this.displayFieldTag=i,this.eLabel=ie,this.eWrapper=ie,this.eInput=ie}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;let{inputName:e,inputWidth:t}=this.config;e!=null&&this.setInputName(e),t!=null&&this.setInputWidth(t),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return ky(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){let t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return _o(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return pd(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return dp(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)_o(this.eInput,"autocomplete",null);else{let t=typeof e=="string"?e:"off";_o(this.eInput,"autocomplete",t)}return this}},qR=class extends $l{constructor(e,t="ag-checkbox",n="checkbox"){super(e,t,n),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();let{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;let e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){let t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,t,n){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:n});let i=this.getInputElement(),s={type:"checkboxChanged",id:i.id,name:i.name,selected:e,previousValue:t};this.eventService.dispatchEvent(s)}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;let t=this.isSelected(),n=this.selected=e.target.checked;this.refreshSelectedClass(n),this.dispatchChange(n,t,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",e===!0),this.eWrapper.classList.toggle("ag-indeterminate",e==null)}},KR={selector:"AG-CHECKBOX",component:qR},qne=class extends Ke{constructor(){super(`
            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[KR]),this.eCheckbox=ie}init(e){this.params=e,this.updateCheckbox(e);let t=this.eCheckbox.getInputElement();t.setAttribute("tabindex","-1"),YG(t,"polite"),this.addManagedListeners(t,{click:n=>{if(fd(n),this.eCheckbox.isDisabled())return;let i=this.eCheckbox.getValue();this.onCheckboxChanged(i)},dblclick:n=>{fd(n)}}),this.addManagedElementListeners(this.params.eGridCell,{keydown:n=>{if(n.key===N.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===this.gos.getActiveDomElement()&&this.eCheckbox.toggle();let i=this.eCheckbox.getValue();this.onCheckboxChanged(i),n.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,n=!0;if(e.node.group&&e.column){let a=e.column.getColId();a.startsWith(hp)?t=e.value==null||e.value===""?void 0:e.value==="true":e.node.aggData&&e.node.aggData[a]!==void 0?t=e.value??void 0:n=!1}else t=e.value??void 0;if(!n){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(t);let i=e.disabled!=null?e.disabled:!e.column?.isCellEditable(e.node);this.eCheckbox.setDisabled(i);let s=this.localeService.getLocaleTextFunc(),r=GR(s,t),o=i?r:`${s("ariaToggleCellValue","Press SPACE to toggle cell value")} (${r})`;this.eCheckbox.setInputAriaLabel(o)}onCheckboxChanged(e){let{column:t,node:n,value:i}=this.params,s={type:"cellEditingStarted",column:t,colDef:t?.getColDef(),data:n.data,node:n,rowIndex:n.rowIndex,rowPinned:n.rowPinned,value:i};this.eventService.dispatchEvent(s);let r=this.params.node.setDataValue(this.params.column,e,"edit"),o={type:"cellEditingStopped",column:t,colDef:t?.getColDef(),data:n.data,node:n,rowIndex:n.rowIndex,rowPinned:n.rowPinned,value:i,oldValue:i,newValue:e,valueChanged:r};this.eventService.dispatchEvent(o)}},Kne=class extends Ke{constructor(){super(`<div class="ag-loading">
            <span class="ag-loading-icon" data-ref="eLoadingIcon"></span>
            <span class="ag-loading-text" data-ref="eLoadingText"></span>
        </div>`),this.eLoadingIcon=ie,this.eLoadingText=ie}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){let e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){let e=Ji("groupLoading",this.gos,null);e&&this.eLoadingIcon.appendChild(e);let t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}},Qne=class extends Ke{constructor(){super('<div class="ag-skeleton-container"></div>')}init(e){let t=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",t),this.addDestroyFunc(()=>up(e.eParentOfValue)),up(e.eParentOfValue,t),e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){let e=this.localeService.getLocaleTextFunc();this.getGui().innerText=e("loadingError","ERR");let t=e("ariaSkeletonCellLoadingFailed","Row failed to load");pd(this.getGui(),t)}setupLoading(e){let n=this.gos.getDocument().createElement("div");n.classList.add("ag-skeleton-effect");let i=e.node.rowIndex;if(i!=null){let o=75+25*(i%2===0?Math.sin(i):Math.cos(i));n.style.width=`${o}%`}this.getGui().appendChild(n);let r=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");pd(this.getGui(),r)}refresh(e){return!1}destroy(){super.destroy()}},vH=class extends Ke{constructor(){super()}destroy(){super.destroy()}},Yne=class extends vH{init(){let e=this.gos.get("overlayLoadingTemplate");if(this.setTemplate(e??'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!e){let t=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=t("loadingOoo","Loading...")})}}},Jne=class extends vH{init(){let e=this.gos.get("overlayNoRowsTemplate");if(this.setTemplate(e??'<span class="ag-overlay-no-rows-center"></span>'),!e){let t=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=t("noRowsToShow","No Rows To Show")})}}},yd=class extends Ke{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){let e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},Xne=class extends yd{constructor(){super('<div class="ag-tooltip"></div>')}init(e){let{value:t}=e;this.getGui().textContent=kr(t,!0)}};function Zne(e,t,n){let i={},s=e.filter(r=>!t.some(o=>o===r));return s.length>0&&s.forEach(r=>i[r]=CH(r,n).values),i}function CH(e,t,n,i){let s=t.map((a,l)=>({value:a,relevance:eie(e.toLowerCase(),a.toLocaleLowerCase()),idx:l}));if(s.sort((a,l)=>l.relevance-a.relevance),n&&(s=s.filter(a=>a.relevance!==0)),s.length>0&&i&&i>0){let l=s[0].relevance*i;s=s.filter(c=>l-c.relevance<0)}let r=[],o=[];for(let a of s)r.push(a.value),o.push(a.idx);return{values:r,indices:o}}function eie(e,t){let n=e.replace(/\s/g,""),i=t.replace(/\s/g,""),s=0,r=-1;for(let o=0;o<n.length;o++){let a=i.indexOf(n[o],r+1);a!==-1&&(r=a,s+=100-r*100/1e4*100)}return s}var tie=class extends L{constructor(){super(...arguments),this.beanName="userComponentRegistry",this.agGridDefaults={agColumnHeader:RR,agColumnGroupHeader:Hne,agSortIndicator:$R,agAnimateShowChangeCellRenderer:jne,agAnimateSlideCellRenderer:zne,agLoadingCellRenderer:Kne,agSkeletonCellRenderer:Qne,agCheckboxCellRenderer:qne,agLoadingOverlay:Yne,agNoRowsOverlay:Jne,agTooltipComponent:Xne},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agGroupCellRenderer:"@ag-grid-enterprise/row-grouping",agGroupRowRenderer:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}postConstruct(){let e=this.gos.get("components");e!=null&&vs(e,(t,n)=>this.registerJsComponent(t,n))}registerDefaultComponent(e,t){this.agGridDefaults[e]=t}registerJsComponent(e,t){this.jsComps[e]=t}retrieve(e,t){let n=(a,l)=>({componentFromFramework:l,component:a}),i=this.getFrameworkOverrides().frameworkComponent(t,this.gos.get("components"));if(i!=null)return n(i,!0);let s=this.jsComps[t];if(s){let a=this.getFrameworkOverrides().isFrameworkComponent(s);return n(s,a)}let r=this.agGridDefaults[t];if(r)return n(r,!1);let o=this.enterpriseAgDefaultCompsModule[t];return o?ai.__assertRegistered(o,`AG Grid '${e}' component: ${t}`,this.gridId):kR(()=>{this.warnAboutMissingComponent(e,t)},"MissingComp"+t),null}warnAboutMissingComponent(e,t){let n=[...Object.keys(this.agGridDefaults).filter(s=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(s)),...Object.keys(this.jsComps)],i=CH(t,n,!0,.8).values;j(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.`),i.length>0&&j(`         Did you mean: [${i.slice(0,3)}]?`),j(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}},Yi=class tp{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(n=>this.onDone(n),n=>this.onReject(n))}static all(t){return t.length?new tp(n=>{let i=t.length,s=new Array(i);t.forEach((r,o)=>{r.then(a=>{s[o]=a,i--,i===0&&n(s)})})}):tp.resolve()}static resolve(t=null){return new tp(n=>n(t))}then(t){return new tp(n=>{this.status===1?n(t(this.resolution)):this.waiters.push(i=>n(t(i)))})}onDone(t){this.status=1,this.resolution=t,this.waiters.forEach(n=>n(t))}onReject(t){}},nie={propertyName:"dateComponent",cellRenderer:!1},iie={propertyName:"headerComponent",cellRenderer:!1},sie={propertyName:"headerGroupComponent",cellRenderer:!1},mG={propertyName:"cellRenderer",cellRenderer:!0},rie={propertyName:"cellRenderer",cellRenderer:!1},oie={propertyName:"loadingCellRenderer",cellRenderer:!0},aie={propertyName:"cellEditor",cellRenderer:!1},vG={propertyName:"innerRenderer",cellRenderer:!0},lie={propertyName:"loadingOverlayComponent",cellRenderer:!1},cie={propertyName:"noRowsOverlayComponent",cellRenderer:!1},uie={propertyName:"tooltipComponent",cellRenderer:!1},QR={propertyName:"filter",cellRenderer:!1},die={propertyName:"floatingFilterComponent",cellRenderer:!1},hie={propertyName:"toolPanel",cellRenderer:!1},fie={propertyName:"statusPanel",cellRenderer:!1},pie={propertyName:"fullWidthCellRenderer",cellRenderer:!0},gie={propertyName:"loadingCellRenderer",cellRenderer:!0},mie={propertyName:"groupRowRenderer",cellRenderer:!0},vie={propertyName:"detailCellRenderer",cellRenderer:!0},Cie={propertyName:"menuItem",cellRenderer:!1},yH=class wH extends L{constructor(){super(...arguments),this.beanName="userComponentFactory"}wireBeans(t){this.agComponentUtils=t.agComponentUtils,this.componentMetadataProvider=t.componentMetadataProvider,this.userComponentRegistry=t.userComponentRegistry,this.frameworkComponentWrapper=t.frameworkComponentWrapper,this.gridOptions=t.gridOptions}getHeaderCompDetails(t,n){return this.getCompDetails(t,iie,"agColumnHeader",n)}getHeaderGroupCompDetails(t){let n=t.columnGroup.getColGroupDef();return this.getCompDetails(n,sie,"agColumnGroupHeader",t)}getFullWidthCellRendererDetails(t){return this.getCompDetails(this.gridOptions,pie,null,t,!0)}getFullWidthLoadingCellRendererDetails(t){return this.getCompDetails(this.gridOptions,gie,"agLoadingCellRenderer",t,!0)}getFullWidthGroupCellRendererDetails(t){return this.getCompDetails(this.gridOptions,mie,"agGroupRowRenderer",t,!0)}getFullWidthDetailCellRendererDetails(t){return this.getCompDetails(this.gridOptions,vie,"agDetailCellRenderer",t,!0)}getInnerRendererDetails(t,n){return this.getCompDetails(t,vG,null,n)}getFullWidthGroupRowInnerCellRenderer(t,n){return this.getCompDetails(t,vG,null,n)}getCellRendererDetails(t,n){return this.getCompDetails(t,mG,null,n)}getEditorRendererDetails(t,n){return this.getCompDetails(t,rie,null,n)}getLoadingCellRendererDetails(t,n){return this.getCompDetails(t,oie,"agSkeletonCellRenderer",n,!0)}getCellEditorDetails(t,n){return this.getCompDetails(t,aie,"agCellEditor",n,!0)}getFilterDetails(t,n,i){return this.getCompDetails(t,QR,i,n,!0)}getDateCompDetails(t){return this.getCompDetails(this.gridOptions,nie,"agDateInput",t,!0)}getLoadingOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,lie,"agLoadingOverlay",t,!0)}getNoRowsOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,cie,"agNoRowsOverlay",t,!0)}getTooltipCompDetails(t){return this.getCompDetails(t.colDef,uie,"agTooltipComponent",t,!0)}getSetFilterCellRendererDetails(t,n){return this.getCompDetails(t,mG,null,n)}getFloatingFilterCompDetails(t,n,i){return this.getCompDetails(t,die,i,n)}getToolPanelCompDetails(t,n){return this.getCompDetails(t,hie,null,n,!0)}getStatusPanelCompDetails(t,n){return this.getCompDetails(t,fie,null,n,!0)}getMenuItemCompDetails(t,n){return this.getCompDetails(t,Cie,"agMenuItem",n,!0)}getCompDetails(t,n,i,s,r=!1){let{propertyName:o,cellRenderer:a}=n,{compName:l,jsComp:c,fwComp:u,paramsFromSelector:h,popupFromSelector:f,popupPositionFromSelector:p}=wH.getCompKeys(this.frameworkOverrides,t,n,s),v=T=>{let R=this.userComponentRegistry.retrieve(o,T);R&&(c=R.componentFromFramework?void 0:R.component,u=R.componentFromFramework?R.component:void 0)};if(l!=null&&v(l),c==null&&u==null&&i!=null&&v(i),c&&a&&!this.agComponentUtils.doesImplementIComponent(c)&&(c=this.agComponentUtils.adaptFunction(o,c)),!c&&!u){r&&$e(`Could not find component ${l}, did you forget to configure this component?`);return}let y=this.mergeParamsWithApplicationProvidedParams(t,n,s,h),C=c==null,E=c||u;return{componentFromFramework:C,componentClass:E,params:y,type:n,popupFromSelector:f,popupPositionFromSelector:p,newAgStackInstance:()=>this.newAgStackInstance(E,C,y,n)}}static getCompKeys(t,n,i,s){let{propertyName:r}=i,o,a,l,c,u,h;if(n){let f=n,p=f[r+"Selector"],v=p?p(s):null,y=C=>{typeof C=="string"?o=C:C!=null&&C!==!0&&(t.isFrameworkComponent(C)?l=C:a=C)};v?(y(v.component),c=v.params,u=v.popup,h=v.popupPosition):y(f[r])}return{compName:o,jsComp:a,fwComp:l,paramsFromSelector:c,popupFromSelector:u,popupPositionFromSelector:h}}newAgStackInstance(t,n,i,s){let r=s.propertyName,o=!n,a;if(o)a=new t;else{let c=this.componentMetadataProvider.retrieve(r);a=this.frameworkComponentWrapper.wrap(t,c.mandatoryMethodList,c.optionalMethodList,s)}let l=this.initComponent(a,i);return l==null?Yi.resolve(a):l.then(()=>a)}mergeParamsWithApplicationProvidedParams(t,n,i,s=null){let r=this.gos.getGridCommonParams();Cs(r,i);let o=t,a=o&&o[n.propertyName+"Params"];if(typeof a=="function"){let l=a(i);Cs(r,l)}else typeof a=="object"&&Cs(r,a);return Cs(r,s),r}initComponent(t,n){if(this.createBean(t),t.init!=null)return t.init(n)}};function rp(e){let t=e;return t!=null&&t.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}var yie=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,!(!e||!e.beanClasses)&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){Object.entries(e.providedBeanInstances).forEach(([t,n])=>{this.beans[t]=n}),e.beanClasses.forEach(t=>{let n=new t;n.beanName?this.beans[n.beanName]=n:console.error(`Bean ${t.name} is missing beanName`),this.createdBeans.push(n)}),e.derivedBeans?.forEach(t=>{let{beanName:n,bean:i}=t(this);this.beans[n]=i,this.createdBeans.push(i)}),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){if(!e)throw Error("Can't wire to bean since it is null");return this.initBeans([e],t),e}initBeans(e,t){e.forEach(n=>{n.preWireBeans?.(this.beans),n.wireBeans?.(this.beans)}),e.forEach(n=>n.preConstruct?.()),t&&e.forEach(t),e.forEach(n=>n.postConstruct?.())}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;let e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){e?.destroy?.()}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},wie=class extends yie{init(e){this.gridId=e.gridId,this.beans.context=this,super.init(e)}destroy(){super.destroy(),ai.__unRegisterGridModules(this.gridId)}getGridId(){return this.gridId}};var SH=(e=>(e[e.Left=0]="Left",e[e.Right=1]="Right",e))(SH||{});var Sie=`<div class="ag-dnd-ghost ag-unselectable">
<span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
<div class="ag-dnd-ghost-label"></div>
</div>`,_ie=class extends L{constructor(){super(...arguments),this.beanName="dragAndDropService",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.dragService=e.dragService,this.mouseEventService=e.mouseEventService,this.environment=e.environment}postConstruct(){this.dropIconMap={pinned:yo("columnMovePin",this.gos,null),hide:yo("columnMoveHide",this.gos,null),move:yo("columnMoveMove",this.gos,null),left:yo("columnMoveLeft",this.gos,null),right:yo("columnMoveRight",this.gos,null),group:yo("columnMoveGroup",this.gos,null),aggregate:yo("columnMoveValue",this.gos,null),pivot:yo("columnMovePivot",this.gos,null),notAllowed:yo("dropNotAllowed",this.gos,null)}}addDragSource(e,t=!1){let n={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:n,dragSource:e}),this.dragService.addDragSource(n)}removeDragSource(e){let t=this.dragSourceAndParamsList.find(n=>n.dragSource===e);t&&(this.dragService.removeDragSource(t.params),li(this.dragSourceAndParamsList,t))}destroy(){this.dragSourceAndParamsList.forEach(e=>this.dragService.removeDragSource(e.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0,super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()}onDragStop(e){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){let t=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(t)}this.lastDropTarget=void 0,this.dragItem=null,this.removeGhost()}onDragging(e,t){let n=this.getHorizontalDirection(e),i=this.getVerticalDirection(e);this.eventLastTime=e,this.positionGhost(e);let s=this.dropTargets.filter(o=>this.isMouseOnDropTarget(e,o)),r=this.findCurrentDropTarget(e,s);if(r!==this.lastDropTarget)this.leaveLastTargetIfExists(e,n,i,t),this.lastDropTarget!==null&&r===null&&this.dragSource.onGridExit?.(this.dragItem),this.lastDropTarget===null&&r!==null&&this.dragSource.onGridEnter?.(this.dragItem),this.enterDragTargetIfExists(r,e,n,i,t),this.lastDropTarget=r;else if(r&&r.onDragging){let o=this.createDropTargetEvent(r,e,n,i,t);r.onDragging(o)}}getAllContainersFromDropTarget(e){let t=e.getSecondaryContainers?e.getSecondaryContainers():null,n=[[e.getContainer()]];return t?n.concat(t):n}allContainersIntersect(e,t){for(let n of t){let i=n.getBoundingClientRect();if(i.width===0||i.height===0)return!1;let s=e.clientX>=i.left&&e.clientX<i.right,r=e.clientY>=i.top&&e.clientY<i.bottom;if(!s||!r)return!1}return!0}isMouseOnDropTarget(e,t){let n=this.getAllContainersFromDropTarget(t),i=!1;for(let s of n)if(this.allContainersIntersect(e,s)){i=!0;break}return t.targetContainsSource&&!t.getContainer().contains(this.dragSource.eElement)?!1:i&&t.isInterestedIn(this.dragSource.type,this.dragSource.eElement)}findCurrentDropTarget(e,t){let n=t.length;if(n===0)return null;if(n===1)return t[0];let s=this.gos.getRootNode().elementsFromPoint(e.clientX,e.clientY);for(let r of s)for(let o of t)if(Tte(this.getAllContainersFromDropTarget(o)).indexOf(r)!==-1)return o;return null}enterDragTargetIfExists(e,t,n,i,s){if(e){if(e.onDragEnter){let r=this.createDropTargetEvent(e,t,n,i,s);e.onDragEnter(r)}this.setGhostIcon(e.getIconName?e.getIconName():null)}}leaveLastTargetIfExists(e,t,n,i){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){let s=this.createDropTargetEvent(this.lastDropTarget,e,t,n,i);this.lastDropTarget.onDragLeave(s)}this.setGhostIcon(null)}}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(n=>n.external).find(n=>n.getContainer()===e.getContainer())||null}getHorizontalDirection(e){let t=this.eventLastTime&&this.eventLastTime.clientX,n=e.clientX;return t===n?null:t>n?0:1}getVerticalDirection(e){let t=this.eventLastTime&&this.eventLastTime.clientY,n=e.clientY;return t===n?null:t>n?0:1}createDropTargetEvent(e,t,n,i,s){let r=e.getContainer(),o=r.getBoundingClientRect(),{dragItem:a,dragSource:l}=this,c=t.clientX-o.left,u=t.clientY-o.top;return this.gos.addGridCommonParams({event:t,x:c,y:u,vDirection:i,hDirection:n,dragSource:l,fromNudge:s,dragItem:a,dropZoneTarget:r})}positionGhost(e){let t=this.eGhost;if(!t)return;let i=t.getBoundingClientRect().height,s=bne()-2,r=Ene()-2,o=oH(t.offsetParent),{clientY:a,clientX:l}=e,c=a-o.top-i/2,u=l-o.left-10,h=this.gos.getDocument(),f=h.defaultView||window,p=f.pageYOffset||h.documentElement.scrollTop,v=f.pageXOffset||h.documentElement.scrollLeft;s>0&&u+t.clientWidth>s+v&&(u=s+v-t.clientWidth),u<0&&(u=0),r>0&&c+t.clientHeight>r+p&&(c=r+p-t.clientHeight),c<0&&(c=0),t.style.left=`${u}px`,t.style.top=`${c}px`}removeGhost(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null}createGhost(){this.eGhost=gd(Sie),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost),this.environment.applyThemeClasses(this.eGhost),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);let e=this.eGhost.querySelector(".ag-dnd-ghost-label"),t=this.dragSource.dragItemName;LR(t)&&(t=t()),e.innerHTML=kr(t)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";let n=this.gos.getDocument(),i=null,s=null;try{i=n.fullscreenElement}catch{}finally{i||(i=this.gos.getRootNode());let r=i.querySelector("body");r?s=r:i instanceof ShadowRoot?s=i:i instanceof Document?s=i?.documentElement:s=i}this.eGhostParent=s,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):j("Could not find document body, it is needed for dragging columns")}setGhostIcon(e,t=!1){zn(this.eGhostIcon);let n=null;e||(e=this.dragSource.getDefaultIconName?this.dragSource.getDefaultIconName():"notAllowed"),n=this.dropIconMap[e],this.eGhostIcon.classList.toggle("ag-shake-left-to-right",t),!(n===this.dropIconMap.hide&&this.gos.get("suppressDragLeaveHidesColumns"))&&n&&this.eGhostIcon.appendChild(n)}},bie=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){let n=t||this.shouldSkipVerticalScroll();if(n&&this.shouldSkipHorizontalScroll())return;let i=this.scrollContainer.getBoundingClientRect(),s=this.scrollByTick;this.tickLeft=e.clientX<i.left+s,this.tickRight=e.clientX>i.right-s,this.tickUp=e.clientY<i.top+s&&!n,this.tickDown=e.clientY>i.bottom-s&&!n,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;let e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){let t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){let t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}};var Eie=class extends L{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.sortController=e.sortController,this.filterManager=e.filterManager,this.selectionService=e.selectionService,this.mouseEventService=e.mouseEventService,this.ctrlsService=e.ctrlsService,this.funcColsService=e.funcColsService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){this.gos.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(e=>{let t=e.gridBodyCtrl;this.autoScrollService=new bie({scrollContainer:t.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>t.getScrollFeature().getVScrollPosition().top,setVerticalPosition:n=>t.getScrollFeature().setVerticalScrollPosition(n),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){return!!(this.funcColsService.getRowGroupColumns().length||this.filterManager?.isAnyFilterPresent()||this.sortController.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];let t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){let i=[...this.selectionService.getSelectedNodes()].sort((s,r)=>s.rowIndex==null||r.rowIndex==null?0:this.getRowIndexNumber(s)-this.getRowIndexNumber(r));if(i.indexOf(t)!==-1)return i}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach(t=>{t.setDragging(!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){let{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}isDropZoneWithinThisGrid(e){let n=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:i}=e;return!n.contains(i)}onEnterOrDragging(e){this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e;let t=this.mouseEventService.getNormalisedPosition(e).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){let n=this.isFromThisGrid(e),i=this.gos.get("rowDragManaged"),s=e.dragItem.rowNodes;i&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!n?this.isDropZoneWithinThisGrid(e)||this.clientSideRowModel.highlightRowAtPixel(s[0],t):this.moveRows(s,t))}getRowIndexNumber(e){let t=e.getRowIndexString();return parseInt(We(t.split("-")),10)}moveRowAndClearHighlight(e){let t=this.clientSideRowModel.getLastHighlightedRowNode(),n=t&&t.highlighted===1,i=this.mouseEventService.getNormalisedPosition(e).y,s=e.dragItem.rowNodes,r=n?1:0;if(this.isFromThisGrid(e))s.forEach(o=>{o.rowTop<i&&(r-=1)}),this.moveRows(s,i,r);else{let o=this.gos.getRowIdCallback(),a=this.clientSideRowModel.getRowIndexAtPixel(i)+1;this.clientSideRowModel.getHighlightPosition(i)===0&&a--,this.clientSideRowModel.updateRowData({add:s.filter(l=>!this.clientSideRowModel.getRowNode(o?.({data:l.data,level:0,rowPinned:l.rowPinned})??l.data.id)).map(l=>l.data),addIndex:a})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t,n=0){this.clientSideRowModel.ensureRowsAtPixel(e,t,n)&&(this.focusService.clearFocusedCell(),this.rangeService?.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer()){j("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(e)){j("addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let t={getContainer:e.getContainer};e.fromGrid?t=e:(e.onDragEnter&&(t.onDragEnter=n=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",n))}),e.onDragLeave&&(t.onDragLeave=n=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",n))}),e.onDragging&&(t.onDragging=n=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",n))}),e.onDragStop&&(t.onDragStop=n=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",n))})),this.dragAndDropService.addDropTarget(B({isInterestedIn:n=>n===2,getIconName:()=>"move",external:!0},t))}getRowDropZone(e){let t=this.getContainer.bind(this),n=this.onDragEnter.bind(this),i=this.onDragLeave.bind(this),s=this.onDragging.bind(this),r=this.onDragStop.bind(this);return e?{getContainer:t,onDragEnter:e.onDragEnter?o=>{n(o),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",o))}:n,onDragLeave:e.onDragLeave?o=>{i(o),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",o))}:i,onDragging:e.onDragging?o=>{s(o),e.onDragging(this.draggingToRowDragEvent("rowDragMove",o))}:s,onDragStop:e.onDragStop?o=>{r(o),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",o))}:r,fromGrid:!0}:{getContainer:t,onDragEnter:n,onDragLeave:i,onDragging:s,onDragStop:r,fromGrid:!0}}draggingToRowDragEvent(e,t){let n=this.mouseEventService.getNormalisedPosition(t).y,i=n>this.pageBoundsService.getCurrentPageHeight(),s=-1,r;i||(s=this.rowModel.getRowIndexAtPixel(n),r=this.rowModel.getRow(s));let o;switch(t.vDirection){case 1:o="down";break;case 0:o="up";break;default:o=null;break}return this.gos.addGridCommonParams({type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:s,overNode:r,y:n,vDirection:o})}dispatchGridEvent(e,t){let n=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(n)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&!this.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(t=>{t.setDragging(!1)})}},Die=class extends L{constructor(){super(...arguments),this.beanName="dragService",this.dragEndFunctions=[],this.dragSources=[]}wireBeans(e){this.mouseEventService=e.mouseEventService}destroy(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0,super.destroy()}removeListener(e){let t=e.dragSource.eElement,n=e.mouseDownListener;if(t.removeEventListener("mousedown",n),e.touchEnabled){let i=e.touchStartListener;t.removeEventListener("touchstart",i,{passive:!0})}}removeDragSource(e){let t=this.dragSources.find(n=>n.dragSource===e);t&&(this.removeListener(t),li(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(e){let t=this.onMouseDown.bind(this,e),{eElement:n,includeTouch:i,stopPropagationForTouch:s}=e;n.addEventListener("mousedown",t);let r=null,o=this.gos.get("suppressTouch");i&&!o&&(r=a=>{UR(a.target)||(a.cancelable&&(a.preventDefault(),s&&a.stopPropagation()),this.onTouchStart(e,a))},n.addEventListener("touchstart",r,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:r,touchEnabled:!!i})}getStartTarget(){return this.startTarget}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;let n=t.touches[0];this.touchLastTime=n,this.touchStart=n;let i=l=>this.onTouchMove(l,e.eElement),s=l=>this.onTouchUp(l,e.eElement),r=l=>{l.cancelable&&l.preventDefault()},o=t.target,a=[{target:this.gos.getRootNode(),type:"touchmove",listener:r,options:{passive:!1}},{target:o,type:"touchmove",listener:i,options:{passive:!0}},{target:o,type:"touchend",listener:s,options:{passive:!0}},{target:o,type:"touchcancel",listener:s,options:{passive:!0}}];this.addTemporaryEvents(a),e.dragStartPixels===0&&this.onCommonMove(n,this.touchStart,e.eElement)}onMouseDown(e,t){let n=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||n._alreadyProcessedByDragService||(n._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;let i=l=>this.onMouseMove(l,e.eElement),s=l=>this.onMouseUp(l,e.eElement),r=l=>l.preventDefault(),o=this.gos.getRootNode(),a=[{target:o,type:"mousemove",listener:i},{target:o,type:"mouseup",listener:s},{target:o,type:"contextmenu",listener:r}];this.addTemporaryEvents(a),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{let{target:n,type:i,listener:s,options:r}=t;n.addEventListener(i,s,r)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{let{target:n,type:i,listener:s,options:r}=t;n.removeEventListener(i,s,r)})})}isEventNearStartEvent(e,t){let{dragStartPixels:n}=this.currentDragParams,i=q(n)?n:4;return pH(e,t,i)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,n){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(e,t))return;this.dragging=!0;let i={type:"dragStarted",target:n};this.eventService.dispatchEvent(i),this.currentDragParams.onDragStart(t),this.currentDragParams.onDragging(t)}this.currentDragParams.onDragging(e)}onTouchMove(e,t){let n=this.getFirstActiveTouch(e.touches);n&&this.onCommonMove(n,this.touchStart,t)}onMouseMove(e,t){Do()&&this.gos.getDocument().getSelection()?.removeAllRanges(),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){let t=this.gos.get("enableCellTextSelection"),n=e.type==="mousemove";return t&&n&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){return!!e.target?.tagName.toLocaleLowerCase()?.match("^a$|textarea|input|select|button")}onTouchUp(e,t){let n=this.getFirstActiveTouch(e.changedTouches);n||(n=this.touchLastTime),this.onUpCommon(n,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(e);let n={type:"dragStopped",target:t};this.eventService.dispatchEvent(n)}this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(n=>n()),this.dragEndFunctions.length=0}},IR=class extends Ke{constructor(e,t,n,i,s,r){super(),this.cellValueFn=e,this.rowNode=t,this.column=n,this.customGui=i,this.dragStartPixels=s,this.suppressVisibilityChange=r,this.dragSource=null}wireBeans(e){this.beans=e}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(Ji("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){let e=this.gos.get("rowDragManaged")?new Rie(this,this.beans,this.rowNode,this.column):new Tie(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e),this.addDragSource(t)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];let t=this.beans.selectionService.getSelectedNodes();return t.indexOf(this.rowNode)!==-1?t:[this.rowNode]}checkCompatibility(){let e=this.gos.get("rowDragManaged");this.gos.get("treeData")&&e&&j("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){let t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();let t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:i=>{i?.preventDefault()}})[0]);let n=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:()=>{let i=this.getDragItem(),s=i.rowNodes?.length||1,r=this.getRowDragText(this.column);return r?r(i,s):s===1?this.cellValueFn():`${s} ${n("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},_H=class extends L{constructor(e,t,n){super(),this.parent=e,this.rowNode=t,this.column=n}setDisplayedOrVisible(e){let t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let n=!0,i=!1;this.column&&(n=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),i=LR(this.column.getColDef().rowDrag)),i?(this.parent.setDisplayed(!0,t),this.parent.setVisible(n,t)):(this.parent.setDisplayed(n,t),this.parent.setVisible(!0,t))}}},Tie=class extends _H{constructor(e,t,n,i){super(e,n,i),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));let e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}},Rie=class extends _H{constructor(e,t,n,i){super(e,n,i),this.beans=t}postConstruct(){let e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventService,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){let t=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),n=t&&t.shouldPreventRowMove(),i=this.gos.get("suppressRowDrag"),s=this.beans.dragAndDropService.hasExternalDropZones(),r=n&&!s||i;this.setDisplayedOrVisible(r)}},pp=class ld{constructor(t){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=ld.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=t}setData(t){this.setDataCommon(t,!1)}updateData(t){this.setDataCommon(t,!0)}setDataCommon(t,n){let i=this.data;this.data=t,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();let s=this.createDataChangedEvent(t,i,n);this.localEventService?.dispatchEvent(s)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(t,n,i){return{type:"dataChanged",node:this,oldData:n,newData:t,update:i}}getRowIndexString(){return this.rowIndex==null?($e("Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid."),null):this.rowPinned==="top"?"t-"+this.rowIndex:this.rowPinned==="bottom"?"b-"+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){let t=new ld(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t}setDataAndId(t,n){let i=q(this.id)?this.createDaemonNode():null,s=this.data;this.data=t,this.updateDataOnDetailNode(),this.setId(n),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,i);let r=this.createDataChangedEvent(t,s,!1);this.localEventService?.dispatchEvent(r)}checkRowSelectable(){let t=this.beans.gos.get("isRowSelectable");this.setRowSelectable(t?t(this):!0)}setRowSelectable(t,n){if(this.selectable!==t){if(this.selectable=t,this.dispatchRowEvent("selectableChanged"),n)return;if(this.beans.gos.get("groupSelectsChildren")){let s=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:s??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(t){let n=this.beans.gos.getRowIdCallback();if(n)if(this.data){let i=this.getGroupKeys(!0);this.id=n({data:this.data,parentKeys:i.length>0?i:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(ld.ID_PREFIX_ROW_GROUP)&&$e(`Row IDs cannot start with ${ld.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`)}else this.id=void 0;else this.id=t}getGroupKeys(t=!1){let n=[],i=this;for(t&&(i=i.parent);i&&i.level>=0;)n.push(i.key),i=i.parent;return n.reverse(),n}isPixelInRange(t){return!q(this.rowTop)||!q(this.rowHeight)?!1:t>=this.rowTop&&t<this.rowTop+this.rowHeight}updateIfDifferent(t,n,i){this[t]!==n&&(this[t]=n,this.dispatchRowEvent(i))}setFirstChild(t){this.updateIfDifferent("firstChild",t,"firstChildChanged")}setLastChild(t){this.updateIfDifferent("lastChild",t,"lastChildChanged")}setChildIndex(t){this.updateIfDifferent("childIndex",t,"childIndexChanged")}setRowTop(t){this.oldRowTop=this.rowTop,this.rowTop!==t&&(this.rowTop=t,this.dispatchRowEvent("topChanged"),this.setDisplayed(t!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setDisplayed(t){this.updateIfDifferent("displayed",t,"displayedChanged")}setDragging(t){this.updateIfDifferent("dragging",t,"draggingChanged")}setHighlighted(t){this.updateIfDifferent("highlighted",t,"rowHighlightChanged")}setHovered(t){this.hovered!==t&&(this.hovered=t)}isHovered(){return this.hovered}setAllChildrenCount(t){this.updateIfDifferent("allChildrenCount",t,"allChildrenCountChanged")}setMaster(t){this.master!==t&&(this.master&&!t&&(this.expanded=!1),this.master=t,this.dispatchRowEvent("masterChanged"))}setGroup(t){this.group!==t&&(this.group&&!t&&(this.expanded=!1),this.group=t,this.updateHasChildren(),this.checkRowSelectable(),this.dispatchRowEvent("groupChanged"))}setRowHeight(t,n=!1){this.rowHeight=t,this.rowHeightEstimated=n,this.dispatchRowEvent("heightChanged")}setRowAutoHeight(t,n){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[n.getId()]=t,t!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=ci(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let t=!1,n=!0,i=0,s=this.__autoHeights;if(s==null||(this.beans.visibleColsService.getAllAutoHeightCols().forEach(a=>{let l=s[a.getId()];if(l==null)if(this.beans.columnModel.isColSpanActive()){let c=[];switch(a.getPinned()){case"left":c=this.beans.visibleColsService.getLeftColsForRow(this);break;case"right":c=this.beans.visibleColsService.getRightColsForRow(this);break;case null:c=this.beans.columnViewportService.getColsWithinViewport(this);break}if(c.includes(a)){t=!0;return}l=-1}else{t=!0;return}else n=!1;l>i&&(i=l)}),t)||((n||i<10)&&(i=this.beans.gos.getRowHeightForNode(this).height),i==this.rowHeight))return;this.setRowHeight(i);let o=this.beans.rowModel;o.onRowHeightChangedDebounced&&o.onRowHeightChangedDebounced()}setRowIndex(t){this.updateIfDifferent("rowIndex",t,"rowIndexChanged")}setUiLevel(t){this.updateIfDifferent("uiLevel",t,"uiLevelChanged")}setExpanded(t,n,i){if(this.expanded===t)return;this.expanded=t,this.dispatchRowEvent("expandedChanged");let s=ae(B({},this.createGlobalRowEvent("rowGroupOpened")),{expanded:t,event:n||null});this.beans.rowNodeEventThrottle.dispatchExpanded(s,i),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(t){return this.beans.gos.addGridCommonParams({type:t,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}setDataValue(t,n,i){let r=typeof t!="string"?t:this.beans.columnModel.getCol(t)??this.beans.columnModel.getColDefCol(t),o=this.getValueFromValueService(r);if(this.beans.gos.get("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(r,o,n,i),!1;let a=this.beans.valueService.setValue(this,r,n,i);return this.dispatchCellChangedEvent(r,n,o),this.checkRowSelectable(),a}getValueFromValueService(t){let n=this.leafGroup&&this.beans.columnModel.isPivotMode(),i=this.group&&this.expanded&&!this.footer&&!n,s=!1,r=this.beans.gos.get("groupTotalRow")??this.beans.gos.get("groupIncludeFooter");typeof r!="function"?s=!!r:s=!!(this.beans.gos.getCallback("groupTotalRow")??this.beans.gos.getCallback("groupIncludeFooter"))({node:this});let o=this.beans.gos.get("groupSuppressBlankHeader"),a=i&&s&&!o;return this.beans.valueService.getValue(t,this,!1,a)}dispatchEventForSaveValueReadOnly(t,n,i,s){let r=this.beans.gos.addGridCommonParams({type:"cellEditRequest",event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:t,colDef:t.getColDef(),data:this.data,node:this,oldValue:n,newValue:i,value:i,source:s});this.beans.eventService.dispatchEvent(r)}setGroupValue(t,n){let i=this.beans.columnModel.getCol(t);Ve(this.groupData)&&(this.groupData={});let s=i.getColId(),r=this.groupData[s];r!==n&&(this.groupData[s]=n,this.dispatchCellChangedEvent(i,n,r))}setAggData(t){let n=this.aggData;if(this.aggData=t,this.localEventService){let i=s=>{let r=this.aggData?this.aggData[s]:void 0,o=n?n[s]:void 0;if(r===o)return;let a=this.beans.columnModel.getCol(s);a&&this.dispatchCellChangedEvent(a,r,o)};for(let s in this.aggData)i(s);for(let s in t)s in this.aggData||i(s)}}updateHasChildren(){let t=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(this.beans.gos.isRowModelType("serverSide")){let i=this.beans.gos.get("treeData"),s=this.beans.gos.get("isServerSideGroup");t=!this.stub&&!this.footer&&(i?!!s&&s(this.data):!!this.group)}t!==this.__hasChildren&&(this.__hasChildren=!!t,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}isEmptyRowGroupNode(){return(this.group&&bn(this.childrenAfterGroup))??!1}dispatchCellChangedEvent(t,n,i){let s={type:"cellChanged",node:this,column:t,newValue:n,oldValue:i};this.localEventService?.dispatchEvent(s)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(t){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(n=>n.depthFirstSearch(t)),t(this)}calculateSelectedFromChildren(){let t=!1,n=!1,i=!1;if(!this.childrenAfterGroup?.length)return this.selectable?this.selected:null;for(let s=0;s<this.childrenAfterGroup.length;s++){let r=this.childrenAfterGroup[s],o=r.isSelected();if(!r.selectable){let a=r.calculateSelectedFromChildren();if(a===null)continue;o=a}switch(o){case!0:t=!0;break;case!1:n=!0;break;default:i=!0;break}}if(!(i||t&&n))return t?!0:n?!1:this.selectable?this.selected:null}setSelectedInitialValue(t){this.selected=t}dispatchRowEvent(t){let n={type:t,node:this};this.localEventService?.dispatchEvent(n)}selectThisNode(t,n,i="api"){let s=!this.selectable&&t,r=this.selected===t;if(s||r)return!1;this.selected=t,this.dispatchRowEvent("rowSelected");let o=this.sibling;o&&o.footer&&o.localEventService&&o.dispatchRowEvent("rowSelected");let a=ae(B({},this.createGlobalRowEvent("rowSelected")),{event:n||null,source:i});return this.beans.eventService.dispatchEvent(a),!0}setSelected(t,n=!1,i="api"){if(typeof i=="boolean"){j("since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:t,clearSelection:n,rangeSelect:!1,source:i})}setSelectedParams(t){return this.rowPinned?(j("cannot select pinned rows"),0):this.id===void 0?(j("cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(ae(B({},t),{nodes:[this.footer?this.sibling:this]}))}isRowPinned(){return this.rowPinned==="top"||this.rowPinned==="bottom"}isParentOfNode(t){let n=this.parent;for(;n;){if(n===t)return!0;n=n.parent}return!1}addEventListener(t,n){this.localEventService||(this.localEventService=new vd),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.localEventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new OR(this.beans.frameworkOverrides));let i=this.frameworkEventListenerService?.wrap(n)??n;this.localEventService.addEventListener(t,i)}removeEventListener(t,n){if(!this.localEventService)return;let i=this.frameworkEventListenerService?.unwrap(n)??n;this.localEventService.removeEventListener(t,i),this.localEventService.noRegisteredListenersExist()&&(this.localEventService=null)}onMouseEnter(){this.dispatchRowEvent("mouseEnter")}onMouseLeave(){this.dispatchRowEvent("mouseLeave")}getFirstChildOfFirstChild(t){let n=this,i=!0,s=!1,r=null;for(;i&&!s;){let o=n.parent;q(o)&&n.firstChild?o.rowGroupColumn===t&&(s=!0,r=o):i=!1,n=o}return s?r:null}isFullWidthCell(){if(this.detail)return!0;let t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this}):!1}getRoute(){if(this.key==null)return;let t=[],n=this;for(;n&&n.key!=null;)t.push(n.key),n=n.parent;return t.reverse()}createFooter(){if(this.sibling)return;let t=new Set(["eventService","__objectId","sticky"]),n=new ld(this.beans);Object.keys(this).forEach(i=>{t.has(i)||(n[i]=this[i])}),n.footer=!0,n.setRowTop(null),n.setRowIndex(null),n.oldRowTop=null,n.id="rowGroupFooter_"+this.id,n.sibling=this,this.sibling=n}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}};pp.ID_PREFIX_ROW_GROUP="row-group-";pp.ID_PREFIX_TOP_PINNED="t-";pp.ID_PREFIX_BOTTOM_PINNED="b-";pp.OBJECT_ID_SEQUENCE=0;var bo=pp,Iie=class extends L{constructor(){super(...arguments),this.beanName="filterManager",this.advancedFilterModelUpdateQueue=[]}wireBeans(e){this.columnModel=e.columnModel,this.dataTypeService=e.dataTypeService,this.quickFilterService=e.quickFilterService,this.advancedFilterService=e.advancedFilterService,this.columnFilterService=e.columnFilterService}postConstruct(){this.addManagedEventListeners({columnValueChanged:this.refreshFiltersForAggregations.bind(this),columnPivotChanged:this.refreshFiltersForAggregations.bind(this),columnPivotModeChanged:this.refreshFiltersForAggregations.bind(this),newColumnsLoaded:this.updateAdvancedFilterColumns.bind(this),columnVisible:this.updateAdvancedFilterColumns.bind(this),advancedFilterEnabledChanged:({enabled:e})=>this.onAdvancedFilterEnabledChanged(e),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",e=>this.setAdvancedFilterModel(e.currentValue)),this.quickFilterService&&this.addManagedListeners(this.quickFilterService,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})})}isExternalFilterPresentCallback(){let e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"?e({}):!1}doesExternalFilterPass(e){let t=this.gos.get("doesExternalFilterPass");return typeof t=="function"?t(e):!1}setFilterModel(e,t="api"){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}this.columnFilterService?.setFilterModel(e,t)}getFilterModel(){return this.columnFilterService?.getFilterModel()??{}}isColumnFilterPresent(){return!!this.columnFilterService?.isColumnFilterPresent()}isAggregateFilterPresent(){return!!this.columnFilterService?.isAggregateFilterPresent()}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){e?this.columnFilterService?.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):this.advancedFilterService?.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){return!!this.advancedFilterService?.isEnabled()}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}resetQuickFilterCache(){this.quickFilterService?.resetQuickFilterCache()}refreshFiltersForAggregations(){this.gos.getGroupAggFiltering()&&this.onFilterChanged()}onFilterChanged(e={}){let{source:t,additionalEventAttributes:n,columns:i=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.columnFilterService?this.columnFilterService.updateBeforeFilterChanged(e):Yi.resolve()).then(()=>{let s={source:t,type:"filterChanged",columns:i};n&&Cs(s,n),this.eventService.dispatchEvent(s),this.columnFilterService?.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){return!!this.columnFilterService?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilterService?.isQuickFilterPresent()}updateAggFiltering(){this.aggFiltering=!!this.gos.getGroupAggFiltering()}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.columnFilterService.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.columnFilterService.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))}isFilterActive(e){return!!this.columnFilterService?.isFilterActive(e)}getOrCreateFilterWrapper(e){return this.columnFilterService?.getOrCreateFilterWrapper(e)??null}getDefaultFloatingFilter(e){return this.columnFilterService.getDefaultFloatingFilter(e)}createFilterParams(e,t){return this.columnFilterService.createFilterParams(e,t)}isFilterAllowed(e){return this.isAdvancedFilterEnabled()?!1:!!this.columnFilterService?.isFilterAllowed(e)}getFloatingFilterCompDetails(e,t){return this.columnFilterService?.getFloatingFilterCompDetails(e,t)}getCurrentFloatingFilterParentModel(e){return this.columnFilterService?.getCurrentFloatingFilterParentModel(e)}destroyFilter(e,t="api"){this.columnFilterService?.destroyFilter(e,t)}areFilterCompsDifferent(e,t){return!!this.columnFilterService?.areFilterCompsDifferent(e,t)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){if(this.isAdvancedFilterEnabled()){if(this.dataTypeService?.isPendingInference()){this.advancedFilterModelUpdateQueue.push(e);return}this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"})}}toggleAdvancedFilterBuilder(e,t){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder(t,e)}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvancedFilterEnabled()?!1:!!this.columnFilterService?.hasFloatingFilters()}getFilterInstance(e,t){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}return this.columnFilterService?.getFilterInstance(e,t)}getColumnFilterInstance(e){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve(void 0)):this.columnFilterService?.getColumnFilterInstance(e)??Promise.resolve(void 0)}warnAdvancedFilters(){j("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(e){this.advancedFilterService?.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advancedFilterModelUpdateQueue.forEach(e=>this.setAdvancedFilterModel(e)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(e){return this.columnFilterService?.getColumnFilterModel(e)}setColumnFilterModel(e,t){return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve()):this.columnFilterService?.setColumnFilterModel(e,t)??Promise.resolve()}},Aie=class extends Ke{constructor(e,t){super('<div class="ag-filter"></div>'),this.column=e,this.source=t,this.filterWrapper=null}wireBeans(e){this.filterManager=e.filterManager,this.columnModel=e.columnModel}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){return this.filterWrapper?.filterPromise??null}afterInit(){return this.filterWrapper?.filterPromise?.then(()=>{})??Yi.resolve()}afterGuiAttached(e){this.filterWrapper?.filterPromise?.then(t=>{t?.afterGuiAttached?.(e)})}afterGuiDetached(){this.filterWrapper?.filterPromise?.then(e=>{e?.afterGuiDetached?.()})}createFilter(e){let{column:t,source:n}=this;this.filterWrapper=this.filterManager?.getOrCreateFilterWrapper(t)??null,this.filterWrapper?.filterPromise&&this.filterWrapper.filterPromise.then(i=>{let s=i.getGui();if(q(s)||j(`getGui method from filter returned ${s}; it should be a DOM element.`),this.appendChild(s),e){let r={type:"filterOpened",column:t,source:n,eGui:this.getGui()};this.eventService.dispatchEvent(r)}})}onFilterDestroyed(e){(e.source==="api"||e.source==="paramsUpdated")&&e.column.getId()===this.column.getId()&&this.columnModel.getColDefCol(this.column)&&(zn(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},bH="ag-resizer-wrapper",Mie=`<div class="${bH}">
        <div data-ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>
        <div data-ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>
        <div data-ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>
        <div data-ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>
        <div data-ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>
        <div data-ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>
        <div data-ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>
        <div data-ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>
    </div>`,Pie=class extends L{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupService=e.popupService,this.resizeObserverService=e.resizeObserverService,this.dragService=e.dragService}center(){let{clientHeight:e,clientWidth:t}=this.offsetParent,n=t/2-this.getWidth()/2,i=e/2-this.getHeight()/2;this.offsetElement(n,i)}initialisePosition(){if(this.positioned)return;let{centered:e,forcePopupParentAsOffsetParent:t,minWidth:n,width:i,minHeight:s,height:r,x:o,y:a}=this.config;this.offsetParent||this.setOffsetParent();let l=0,c=0,u=Js(this.element);if(u){let h=this.findBoundaryElement(),f=window.getComputedStyle(h);if(f.minWidth!=null){let p=h.offsetWidth-this.element.offsetWidth;c=parseInt(f.minWidth,10)-p}if(f.minHeight!=null){let p=h.offsetHeight-this.element.offsetHeight;l=parseInt(f.minHeight,10)-p}}if(this.minHeight=s||l,this.minWidth=n||c,i&&this.setWidth(i),r&&this.setHeight(r),(!i||!r)&&this.refreshSize(),e)this.center();else if(o||a)this.offsetElement(o,a);else if(u&&t){let h=this.boundaryEl,f=!0;if(h||(h=this.findBoundaryElement(),f=!1),h){let p=parseFloat(h.style.top),v=parseFloat(h.style.left);f?this.offsetElement(isNaN(v)?0:v,isNaN(p)?0:p):this.setPosition(v,p)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;let n=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(n),this.moveElementDragListener=n):(this.dragService.removeDragSource(n),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{let i=!!e[t],s=this.getResizerElement(t),r={dragStartPixels:0,eElement:s,onDragStart:o=>this.onResizeStart(o,t),onDragging:this.onResize.bind(this),onDragStop:o=>this.onResizeEnd(o,t)};(i||!this.isAlive()&&!i)&&(i?(this.dragService.addDragSource(r),this.resizeListeners.push(r),s.style.pointerEvents="all"):s.style.pointerEvents="none",this.resizable[t]=i)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";let{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){let{popup:t}=this.config,n=this.element,i=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)sp(n,e),e=rH(n),i=!0;else if(e=Math.max(this.minHeight,e),this.positioned){let s=this.getAvailableHeight();s&&e>s&&(e=s)}this.getHeight()!==e&&(i?(n.style.maxHeight="unset",n.style.minHeight="unset"):t?sp(n,e):(n.style.height=`${e}px`,n.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){let{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();let{clientHeight:n}=this.offsetParent;if(!n)return null;let i=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),r=e?this.position.y:i.top,o=e?0:s.top,a=0;if(t){let c=this.element.parentElement;if(c){let{bottom:u}=c.getBoundingClientRect();a=u-i.bottom}}return n+o-r-a}getWidth(){return this.element.offsetWidth}setWidth(e){let t=this.element,{popup:n}=this.config,i=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Ys(t,e),e=Fy(t),i=!0;else if(this.positioned){e=Math.max(this.minWidth,e);let{clientWidth:s}=this.offsetParent,r=n?this.position.x:this.element.getBoundingClientRect().left;s&&e+r>s&&(e=s-r)}this.getWidth()!==e&&(i?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?Ys(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,t=0){let{forcePopupParentAsOffsetParent:n}=this.config,i=n?this.boundaryEl:this.element;i&&(this.popupService.positionPopup({ePopup:i,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(i.style.left),parseFloat(i.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;let t=()=>{let n=this.getAvailableHeight();this.element.style.setProperty("max-height",`${n}px`)};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){let{e:t,isLeft:n,isTop:i,anywhereWithin:s,topBuffer:r}=e,o=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y,l=this.shouldSkipX(t,!!n,!!s,o)?0:o,c=this.shouldSkipY(t,!!i,r,a)?0:a;return{movementX:l,movementY:c}}shouldSkipX(e,t,n,i){let s=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:s.left,l=a<=0&&r.left>=e.clientX||r.right<=e.clientX&&r.right<=o.right;return l?!0:(t?l=i<0&&e.clientX>a+r.left||i>0&&e.clientX<a+r.left:n?l=i<0&&e.clientX>o.right||i>0&&e.clientX<a+r.left:l=i<0&&e.clientX>o.right||i>0&&e.clientX<o.right,l)}shouldSkipY(e,t,n=0,i){let s=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:s.top,l=a<=0&&r.top>=e.clientY||r.bottom<=e.clientY&&r.bottom<=o.bottom;return l?!0:(t?l=i<0&&e.clientY>a+r.top+n||i>0&&e.clientY<a+r.top:l=i<0&&e.clientY>o.bottom||i>0&&e.clientY<o.bottom,l)}createResizeMap(){let e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[data-ref=eTopLeftResizer]")},top:{element:e.querySelector("[data-ref=eTopResizer]")},topRight:{element:e.querySelector("[data-ref=eTopRightResizer]")},right:{element:e.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:e.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:e.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;let e=this.element;if(!e)return;let n=new DOMParser().parseFromString(Mie,"text/html").body;e.appendChild(n.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;let e=this.element.querySelector(`.${bH}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");let{popup:n,forcePopupParentAsOffsetParent:i}=this.config;!n&&!i&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){let t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(n=>!n.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){let e=this.getSiblings()||[],t=0,n=0;for(let i=0;i<e.length;i++){let s=e[i],r=!!s.style.flex&&s.style.flex!=="0 0 auto";if(s===this.element)continue;let o=this.minHeight||0,a=this.minWidth||0;if(r){let l=window.getComputedStyle(s);l.minHeight&&(o=parseInt(l.minHeight,10)),l.minWidth&&(a=parseInt(l.minWidth,10))}else o=s.offsetHeight,a=s.offsetWidth;t+=o,n+=a}return{height:t,width:n}}applySizeToSiblings(e){let t=null,n=this.getSiblings();if(n){for(let i=0;i<n.length;i++){let s=n[i];s!==t&&(e?s.style.height=`${s.offsetHeight}px`:s.style.width=`${s.offsetWidth}px`,s.style.flex="0 0 auto",s===this.element&&(t=n[i+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;let{popup:t,forcePopupParentAsOffsetParent:n}=this.config,{isTop:i,isRight:s,isBottom:r,isLeft:o}=this.currentResizer,a=s||o,l=r||i,{movementX:c,movementY:u}=this.calculateMouseMovement({e,isLeft:o,isTop:i}),h=this.position.x,f=this.position.y,p=0,v=0;if(a&&c){let y=o?-1:1,C=this.getWidth(),E=C+c*y,T=!1;o&&(p=C-E,(h+p<=0||E<=this.minWidth)&&(T=!0,p=0)),T||this.setWidth(E)}if(l&&u){let y=i?-1:1,C=this.getHeight(),E=C+u*y,T=!1;i?(v=C-E,(f+v<=0||E<=this.minHeight)&&(T=!0,v=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&C<E&&this.getMinSizeOfSiblings().height+E>this.element.parentElement.offsetHeight&&(T=!0),T||this.setHeight(E)}this.updateDragStartPosition(e.clientX,e.clientY),((t||n)&&p||v)&&this.offsetElement(h+p,f+v)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){let e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;let{x:t,y:n}=this.position,i;this.config.calculateTopBuffer&&(i=this.config.calculateTopBuffer());let{movementX:s,movementY:r}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:i});this.offsetElement(t+s,n+r),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){let e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},EH=class DH extends L{constructor(t,n={}){super(),this.eFocusableElement=t,this.callbacks=n,this.callbacks=B({shouldStopEventPropagation:()=>!1,onTabKeyDown:i=>{if(i.defaultPrevented)return;let s=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,i.shiftKey);s&&(s.focus(),i.preventDefault())}},n)}wireBeans(t){this.focusService=t.focusService}postConstruct(){this.eFocusableElement.classList.add(DH.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedElementListeners(this.eFocusableElement,{focusin:this.callbacks.onFocusIn}),this.callbacks.onFocusOut&&this.addManagedElementListeners(this.eFocusableElement,{focusout:this.callbacks.onFocusOut})}addKeyDownListeners(t){this.addManagedElementListeners(t,{keydown:n=>{if(!(n.defaultPrevented||Aa(n))){if(this.callbacks.shouldStopEventPropagation(n)){fd(n);return}n.key===N.TAB?this.callbacks.onTabKeyDown(n):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(n)}}})}};EH.FOCUS_MANAGED_CLASS="ag-focus-managed";var ec=EH,TH={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function YR(e,t){return Ly(e)?(e.debounceMs!=null&&j("debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:t}function Ly(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}var Fie=class extends Ke{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=ie,this.buttonListeners=[]}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.resetTemplate(),this.createManagedBean(new ec(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new Pie(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);let n=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" data-ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(n,this.getAgComponents(),e),t=this.getGui(),t&&t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.providedFilterParams=e,this.applyActive=Ly(e),this.resetButtonsPanel()}updateParams(e){this.providedFilterParams=e,this.applyActive=Ly(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(){let{buttons:e}=this.providedFilterParams,t=e&&e.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(zn(this.eButtonsPanel),this.buttonListeners.forEach(s=>s()),this.buttonListeners=[]):t&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!t){this.eButtonsPanel&&ws(this.eButtonsPanel);return}let n=document.createDocumentFragment(),i=s=>{let r,o;switch(s){case"apply":r=this.translate("applyFilter"),o=c=>this.onBtApply(!1,!1,c);break;case"clear":r=this.translate("clearFilter"),o=()=>this.onBtClear();break;case"reset":r=this.translate("resetFilter"),o=()=>this.onBtReset();break;case"cancel":r=this.translate("cancelFilter"),o=c=>{this.onBtCancel(c)};break;default:j("Unknown button type specified");return}let l=gd(`<button
                    type="${s==="apply"?"submit":"button"}"
                    data-ref="${s}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${r}
                </button>`);this.buttonListeners.push(...this.addManagedElementListeners(l,{click:o})),n.append(l)};e.forEach(s=>i(s)),this.eButtonsPanel.append(n),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){let e=YR(this.providedFilterParams,this.getDefaultDebounceMs()),t=ci(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){let n=()=>{this.onUiChanged(!1,"prevent"),t?.()};e!=null?this.setModelIntoUi(e).then(n):this.resetUiToDefaults().then(n)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){let t=this.getModelFromUi();if(!this.isModelValid(t))return!1;let n=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(n,t)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,t=!1,n){n&&n.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:"columnFilter"});let{closeOnApply:i}=this.providedFilterParams;i&&this.applyActive&&!e&&!t&&this.close(n)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;let t=e,n=t&&t.key,i;(n==="Enter"||n==="Space")&&(i={keyboardEvent:t}),this.hidePopup(i),this.hidePopup=null}onUiChanged(e=!1,t){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){let n=this.isModelValid(this.getModelFromUi()),i=this.queryForHtmlElement('[data-ref="applyFilterButton"]');i&&dp(i,!n)}e&&!t||t==="immediately"?this.onBtApply(e):(!this.applyActive&&!t||t==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){if(!this.positionableFeature||e==="toolPanel")return;let t=e==="floatingFilter"||e==="columnFilter",{positionableFeature:n,gos:i}=this;t?(n.restoreLastSize(),n.setResizable(i.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}refresh(e){return this.providedFilterParams=e,!0}destroy(){let e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,TH[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}},xie=class extends qR{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}},Oie=class extends Ke{constructor(e="default",t=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){let e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),!this.unFocusable&&this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){let t=e.key;switch(t){case N.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{let n=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(n)}break;case N.DOWN:case N.UP:e.preventDefault(),this.navigate(t);break;case N.PAGE_DOWN:case N.PAGE_UP:case N.PAGE_HOME:case N.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}navigate(e){let t=e===N.DOWN,n;if(!this.highlightedEl)n=this.itemEls[t?0:this.itemEls.length-1];else{let s=this.itemEls.indexOf(this.highlightedEl)+(t?1:-1);s=Math.min(Math.max(s,0),this.itemEls.length-1),n=this.itemEls[s]}this.highlightItem(n)}navigateToPage(e){if(!this.highlightedEl||this.itemEls.length===0)return;let t=this.itemEls.indexOf(this.highlightedEl),n=this.options.length-1,i=this.itemEls[0].clientHeight,s=Math.floor(this.getGui().clientHeight/i),r=-1;e===N.PAGE_HOME?r=0:e===N.PAGE_END?r=n:e===N.PAGE_DOWN?r=Math.min(t+s,n):e===N.PAGE_UP&&(r=Math.max(t-s,0)),r!==-1&&this.highlightItem(this.itemEls[r])}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){let{value:t,text:n}=e,i=n||t;return this.options.push({value:t,text:i}),this.renderOption(t,i),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{ws(e)}),this.itemEls=[]}updateIndices(){let e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((t,n)=>{pne(t,n+1),fne(t,e.length)})}renderOption(e,t){let n=this.gos.getDocument(),i=n.createElement("div");Ri(i,"option"),i.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);let s=n.createElement("span");i.appendChild(s),s.textContent=t,this.unFocusable||(i.tabIndex=-1),this.itemEls.push(i),this.addManagedListeners(i,{mouseover:()=>this.highlightItem(i),mousedown:r=>{r.preventDefault(),r.stopPropagation(),this.setValue(e)}}),this.createManagedBean(new Cd({getTooltipValue:()=>t,getGui:()=>i,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>s.scrollWidth>s.clientWidth})),this.getGui().appendChild(i)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;let n=this.options.findIndex(i=>i.value===e);if(n!==-1){let i=this.options[n];this.value=i.value,this.displayValue=i.text,this.highlightItem(this.itemEls[n]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();let e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!Js(e))return;this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(this.activeClass),Py(this.highlightedEl,!0);let t=this.getGui(),{scrollTop:n,clientHeight:i}=t,{offsetTop:s,offsetHeight:r}=e;(s+r>n+i||s<n)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!Js(this.highlightedEl)||(this.highlightedEl.classList.remove(this.activeClass),Py(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},Nie=class extends mH{constructor(e){if(super(e,e?.template||`
            <div class="ag-picker-field" role="presentation">
                <div data-ref="eLabel"></div>
                    <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>
                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
                </div>
            </div>`,e?.agComponents||[],e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=ie,this.eWrapper=ie,this.eDisplayField=ie,this.eIcon=ie,this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;let{pickerGap:t,maxPickerHeight:n,variableWidth:i,minPickerWidth:s,maxPickerWidth:r}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!i,n!=null&&this.setPickerMaxHeight(n),s!=null&&this.setPickerMinWidth(s),r!=null&&this.setPickerMaxWidth(r)}wireBeans(e){this.popupService=e.popupService}postConstruct(){super.postConstruct(),this.setupAria();let e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);let t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});let{pickerIcon:n,inputWidth:i}=this.config;if(n){let s=Ji(n,this.gos);s&&this.eIcon.appendChild(s)}i!=null&&this.setInputWidth(i)}setupAria(){let e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),My(e,!1),this.ariaRole&&Ri(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){let t=this.getFocusableElement();if(t!==this.eWrapper&&e?.target===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case N.UP:case N.DOWN:case N.ENTER:case N.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case N.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());let e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){let e=this.gos.getDocument(),t=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));let n=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:i,pickerAriaLabelValue:s,modalPicker:r=!0}=this.config,o={modal:r,eChild:t,closeOnEsc:!0,closedCallback:()=>{let p=this.gos.getActiveDomElement(),v=!p||p===e.body;this.beforeHidePicker(),v&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:n(i,s)},a=this.popupService.addPopup(o),{maxPickerHeight:l,minPickerWidth:c,maxPickerWidth:u,variableWidth:h}=this;h?(c&&(t.style.minWidth=c),t.style.width=jR(Fy(this.eWrapper)),u&&(t.style.maxWidth=u)):ky(t,u??Fy(this.eWrapper));let f=l??`${WR(this.popupService.getPopupParent())}px`;return t.style.setProperty("max-height",f),t.style.position="absolute",this.alignPickerToComponent(),a.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;let{pickerType:e}=this.config,{pickerGap:t}=this,n=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:e,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:n,keepWithinBounds:!0,nudgeY:t})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);let e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;let t=this.getAriaElement();My(t,e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){this.pickerComponent?.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(e){return ky(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},JR=class extends Nie{constructor(e){super(B({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox"},e))}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");let{options:e,value:t,placeholder:n}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),n&&t==null&&(this.eDisplayField.textContent=n),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new Oie("select",!0)),this.listComponent.setParentComponent(this);let e=this.listComponent.getAriaElement(),t=`ag-select-list-${this.listComponent.getCompId()}`;e.setAttribute("id",t),Sne(this.getAriaElement(),e),this.listComponent.addManagedListeners(this.listComponent,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})}}),this.listComponent.addManagedListeners(this.listComponent,{fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){let{key:t}=e;switch(t===N.TAB&&this.hidePicker(),t){case N.ENTER:case N.UP:case N.DOWN:case N.PAGE_UP:case N.PAGE_DOWN:case N.PAGE_HOME:case N.PAGE_END:e.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(e):super.onKeyDown(e);break;case N.ESCAPE:super.onKeyDown(e);break}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){return this.listComponent?.clearOptions(),this}setValue(e,t,n){if(this.value===e||!this.listComponent)return this;if(n||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue())return this;let s=this.listComponent.getDisplayValue();return s==null&&this.config.placeholder&&(s=this.config.placeholder),this.eDisplayField.textContent=s,this.setTooltip({newTooltipText:s??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,t)}destroy(){this.listComponent&&(this.listComponent=this.destroyBean(this.listComponent)),super.destroy()}},kie={selector:"AG-SELECT",component:JR},RH=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(e=>{if(typeof e=="string")return;let t=[["displayKey"],["displayName"],["predicate","test"]],n=i=>i.some(s=>e[s]!=null)?!0:(j(`ignoring FilterOptionDef as it doesn't contain one of '${i}'`),!1);if(!t.every(n)){this.filterOptions=this.filterOptions.filter(i=>i===e)||[];return}this.customFilterOptions[e.displayKey]=e})}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){let t=this.filterOptions[0];typeof t=="string"?this.defaultOption=t:t.displayKey?this.defaultOption=t.displayKey:j("invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else j("no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}},IH=class extends Fie{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){let t=this.optionsFactory.getCustomOption(e);if(t){let{numberOfInputs:i}=t;return i??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,n)=>{n===0?t.setValue(e,!0):t.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){let e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;let n=!e.operator,i=!t.operator;if(!n&&i||n&&!i)return!1;let r;if(n){let o=e,a=t;r=this.areSimpleModelsEqual(o,a)}else{let o=e,a=t;r=o.operator===a.operator&&Xl(o.conditions,a.conditions,(l,c)=>this.areSimpleModelsEqual(l,c))}return r}shouldRefresh(e){let t=this.getModel(),n=t?t.conditions??[t]:null,i=e.filterOptions?.map(r=>typeof r=="string"?r:r.displayKey)??this.getDefaultFilterOptions();return!(!(!n||n.every(r=>i.find(o=>o===r.type)!==void 0))||typeof e.maxNumConditions=="number"&&n&&n.length>e.maxNumConditions)}refresh(e){return!this.shouldRefresh(e)||!super.refresh(e)?!1:(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){let n=e,i=n.conditions;i==null&&(i=[],j("Filter model is missing 'conditions'"));let s=this.validateAndUpdateConditions(i),r=this.getNumConditions();if(s<r)this.removeConditionsAndOperators(s);else if(s>r)for(let a=r;a<s;a++)this.createJoinOperatorPanel(),this.createOption();let o=n.operator==="OR";this.eJoinOperatorsAnd.forEach(a=>a.setValue(!o,!0)),this.eJoinOperatorsOr.forEach(a=>a.setValue(o,!0)),i.forEach((a,l)=>{this.eTypes[l].setValue(a.type,!0),this.setConditionIntoUi(a,l)})}else{let n=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(n.type,!0),this.setConditionIntoUi(n,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),Yi.resolve()}validateAndUpdateConditions(e){let t=e.length;return t>this.maxNumConditions&&(e.splice(this.maxNumConditions),j('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),t=this.maxNumConditions),t}doesFilterPass(e){let t=this.getModel();if(t==null)return!0;let{operator:n}=t,i=[];if(n){let r=t;i.push(...r.conditions??[])}else i.push(t);return i[n&&n==="OR"?"some":"every"](r=>this.individualConditionPasses(e,r))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new RH,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){this.maxNumConditions=e.maxNumConditions??2,this.maxNumConditions<1&&(j('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=e.numAlwaysVisibleConditions??1,this.numAlwaysVisibleConditions<1&&(j('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(j('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){let e=this.createManagedBean(new JR);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());let t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);let n=this.getNumConditions()-1;this.forEachPositionInput(n,i=>this.resetInput(i)),this.addChangedListeners(e,n)}createJoinOperatorPanel(){let e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");let t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),n=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);let i=this.eJoinOperatorPanels.length-1,s=this.joinOperatorId++;this.resetJoinOperatorAnd(t,i,s),this.resetJoinOperatorOr(n,i,s),this.isReadOnly()||(t.onValueChange(this.listener),n.onValueChange(this.listener))}createJoinOperator(e,t,n){let i=this.createManagedBean(new xie);return e.push(i),i.addCssClass("ag-filter-condition-operator"),i.addCssClass(`ag-filter-condition-operator-${n}`),t.appendChild(i.getGui()),i}getDefaultJoinOperator(e){return e==="AND"||e==="OR"?e:"AND"}createFilterListOptions(){let e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map(t=>typeof t=="string"?this.createBoilerplateListOption(t):this.createCustomListOption(t))}putOptionsIntoDropdown(e){this.filterListOptions.forEach(t=>{e.addOption(t)}),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){let{displayKey:t}=e,n=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:n?this.localeService.getLocaleTextFunc()(n.displayKey,n.displayName):this.translate(t)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){let e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let n=0;n<this.getNumConditions();n++)this.isConditionUiComplete(n)?e=n:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{let n=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<n){this.removeConditionsAndOperators(n+1);let i=e+1,s=n-i;s>0&&this.removeConditionsAndOperators(i,s),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((i,s)=>{let r=this.isConditionDisabled(s,e);i.setDisabled(r||this.filterListOptions.length<=1),s===1&&(dp(this.eJoinOperatorPanels[0],r),this.eJoinOperatorsAnd[0].setDisabled(r),this.eJoinOperatorsOr[0].setDisabled(r))}),this.eConditionBodies.forEach((i,s)=>{Et(i,this.isConditionBodyVisible(s))});let n=(t??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach(i=>{i.setValue(!n,!0)}),this.eJoinOperatorsOr.forEach(i=>{i.setValue(n,!0)}),this.forEachInput((i,s,r,o)=>{this.setElementDisplayed(i,s<o),this.setElementDisabled(i,this.isConditionDisabled(r,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,t),this.removeElements(this.eConditionBodies,e,t),this.removeValueElements(e,t);let n=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,n,t),this.removeComponents(this.eJoinOperatorsAnd,n,t),this.removeComponents(this.eJoinOperatorsOr,n,t)}removeElements(e,t,n){this.removeItems(e,t,n).forEach(s=>ws(s))}removeComponents(e,t,n){this.removeItems(e,t,n).forEach(s=>{ws(s.getGui()),this.destroyBean(s)})}removeItems(e,t,n){return n==null?e.splice(t):e.splice(t,n)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus)if(this.isReadOnly())this.eFilterBody.focus();else{let t=this.getInputs(0)[0];if(!t)return;t instanceof $l&&t.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();let e=this.getModel();this.resetUiToActiveModel(e);let t=-1,n=-1,i=!1,s=this.getJoinOperator();for(let o=this.getNumConditions()-1;o>=0;o--)if(this.isConditionUiComplete(o))t===-1&&(t=o,n=o);else{let a=o>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(o-1),l=o<t;(a||l)&&(this.removeConditionsAndOperators(o,1),i=!0,l&&n--)}let r=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),r=!0),this.shouldAddNewConditionAtEnd(n===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),r=!0),r&&this.updateConditionStatusesAndValues(n,s),i&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=n}getPlaceholderText(e,t){let n=this.translate(e);if(LR(this.filterPlaceholder)){let i=this.filterPlaceholder,s=this.eTypes[t].getValue(),r=this.translate(s);n=i({filterOptionKey:s,filterOption:r,placeholder:n})}else typeof this.filterPlaceholder=="string"&&(n=this.filterPlaceholder);return n}resetPlaceholder(){let e=this.localeService.getLocaleTextFunc();this.forEachInput((t,n,i,s)=>{if(!(t instanceof $l))return;let r=n===0&&s>1?"inRangeStart":n===0?"filterOoo":"inRangeEnd",o=n===0&&s>1?e("ariaFilterFromValue","Filter from value"):n===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(r,i)),t.setInputAriaLabel(o)})}setElementValue(e,t,n){e instanceof $l&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){e instanceof Ke&&Et(e.getGui(),t)}setElementDisabled(e,t){e instanceof Ke&&dp(e.getGui(),t)}attachElementOnChange(e,t){e instanceof $l&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,n)=>{this.forEachPositionTypeInput(n,t,e)})}forEachPositionInput(e,t){let n=this.getConditionType(e);this.forEachPositionTypeInput(e,n,t)}forEachPositionTypeInput(e,t,n){let i=this.getNumberOfInputs(t),s=this.getInputs(e);for(let r=0;r<s.length;r++){let o=s[r];o!=null&&n(o,r,e,i)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){let t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(n=>n==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){let e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinOperatorsAnd.forEach((t,n)=>this.resetJoinOperatorAnd(t,n,this.joinOperatorId+n)),this.eJoinOperatorsOr.forEach((t,n)=>this.resetJoinOperatorOr(t,n,this.joinOperatorId+n)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),Yi.resolve()}resetType(e){let n=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(n).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,n){this.resetJoinOperator(e,t,this.isDefaultOperator("AND"),this.translate("andCondition"),n)}resetJoinOperatorOr(e,t,n){this.resetJoinOperator(e,t,this.isDefaultOperator("OR"),this.translate("orCondition"),n)}resetJoinOperator(e,t,n,i,s){this.updateJoinOperatorDisabled(e.setValue(n,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${s}`).setLabel(i),t)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t)),this.eJoinOperatorsOr.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t))}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){let n=this.mapValuesFromModel(e);this.forEachInput((i,s,r)=>{r===t&&this.setElementValue(i,n[s]!=null?n[s]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,n,i)=>{this.setElementValue(t,n===0&&i===0?e:null,!0)})}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,n=>{this.attachElementOnChange(n,this.listener)}))}individualConditionPasses(e,t){let n=this.getCellValue(e.node),i=this.mapValuesFromModel(t),s=this.optionsFactory.getCustomOption(t.type),r=this.evaluateCustomFilter(s,i,n);return r??(n==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(i,n,t,e))}evaluateCustomFilter(e,t,n){if(e==null)return;let{predicate:i}=e;if(i!=null&&!t.some(s=>s==null))return i(t,n)}isBlank(e){return e==null||typeof e=="string"&&e.trim().length===0}hasInvalidInputs(){return!1}},AH=class extends IH{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case"equals":case"notEqual":if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case"lessThan":case"lessThanOrEqual":if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case"inRange":if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,n){let i=this.comparator(),s=e[0]!=null?i(e[0],t):0;switch(n.type){case"equals":return s===0;case"notEqual":return s!==0;case"greaterThan":return s>0;case"greaterThanOrEqual":return s>=0;case"lessThan":return s<0;case"lessThanOrEqual":return s<=0;case"inRange":{let r=i(e[1],t);return this.scalarFilterParams.inRangeInclusive?s>=0&&r<=0:s>0&&r<0}case"blank":return this.isBlank(t);case"notBlank":return!this.isBlank(t);default:return j('Unexpected type of filter "'+n.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},Lie=65,Vie=67,Bie=86,Gie=68,Hie=90,Uie=89;function MH(e){return e.altKey||e.ctrlKey||e.metaKey?!1:e.key.length===1}function AR(e,t,n,i,s){let r=i?i.getColDef().suppressKeyboardEvent:void 0;if(!r)return!1;let o=e.addGridCommonParams({event:t,editing:s,column:i,node:n,data:n.data,colDef:i.getColDef()});return!!(r&&r(o))}function Wie(e,t,n,i){let s=i.getDefinition(),r=s&&s.suppressHeaderKeyboardEvent;if(!q(r))return!1;let o=e.addGridCommonParams({colDef:s,column:i,headerRowIndex:n,event:t});return!!r(o)}function jie(e){let{keyCode:t}=e,n;switch(t){case Lie:n=N.A;break;case Vie:n=N.C;break;case Bie:n=N.V;break;case Gie:n=N.D;break;case Hie:n=N.Z;break;case Uie:n=N.Y;break;default:n=e.code}return n}function zie(e,t=!1){return e===N.DELETE?!0:!t&&e===N.BACKSPACE?tH():!1}var tc=class extends $l{constructor(e,t="ag-text-field",n="text"){super(e,t,n)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){return this.eInput.value!==e&&(this.eInput.value=q(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){let e=new RegExp(`[${this.config.allowedCharPattern}]`),t=n=>{MH(n)&&n.key&&!e.test(n.key)&&n.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:n=>{let i=n.clipboardData?.getData("text");i&&i.split("").some(s=>!e.test(s))&&n.preventDefault()}})}},By={selector:"AG-INPUT-TEXT-FIELD",component:tc},XR=class extends tc{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListeners(this.eInput,{blur:()=>{let s=parseFloat(this.eInput.value),r=isNaN(s)?"":this.normalizeValue(s.toString());this.value!==r&&this.setValue(r)},wheel:this.onWheel.bind(this)}),this.eInput.step="any";let{precision:e,min:t,max:n,step:i}=this.config;typeof e=="number"&&this.setPrecision(e),typeof t=="number"&&this.setMin(t),typeof n=="number"&&this.setMax(n),typeof i=="number"&&this.setStep(i)}onWheel(e){this.gos.getActiveDomElement()===this.eInput&&e.preventDefault()}normalizeValue(e){if(e==="")return"";this.precision!=null&&(e=this.adjustPrecision(e));let t=parseFloat(e);return this.min!=null&&t<this.min?e=this.min.toString():this.max!=null&&t>this.max&&(e=this.max.toString()),e}adjustPrecision(e,t){if(this.precision==null)return e;if(t){let i=parseFloat(e).toFixed(this.precision);return parseFloat(i).toString()}let n=String(e).split(".");if(n.length>1){if(n[1].length<=this.precision)return e;if(this.precision>0)return`${n[0]}.${n[1].slice(0,this.precision)}`}return n[0]}setMin(e){return this.min===e?this:(this.min=e,_o(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,_o(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,_o(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(n=>super.setValue(n,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,n){if(q(n)){let i=this.isScientificNotation(n);if(i&&this.eInput.validity.valid)return e(n);if(!i){n=this.adjustPrecision(n);let s=this.normalizeValue(n);i=n!=s}if(i)return t(n)}return e(n)}getValue(){if(!this.eInput.validity.valid)return;let e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},$ie={selector:"AG-INPUT-NUMBER-FIELD",component:XR},PH=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],ZR=class{constructor(e,t,n){this.localeService=e,this.optionsFactory=t,this.valueFormatter=n}getModelAsString(e){if(!e)return null;let t=e.operator!=null,n=this.localeService.getLocaleTextFunc();if(t){let i=e,r=(i.conditions??[]).map(a=>this.getModelAsString(a)),o=i.operator==="AND"?"andCondition":"orCondition";return r.join(` ${n(o,TH[o])} `)}else{if(e.type==="blank"||e.type==="notBlank")return n(e.type,e.type);{let i=e,s=this.optionsFactory.getCustomOption(i.type),{displayKey:r,displayName:o,numberOfInputs:a}=s||{};return r&&o&&a===0?(n(r,o),o):this.conditionToString(i,s)}}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){return this.valueFormatter?this.valueFormatter(e??null)??"":String(e)}},FH=class extends ZR{conditionToString(e,t){let{numberOfInputs:n}=t||{};return e.type=="inRange"||n===2?`${this.formatValue(e.filter)}-${this.formatValue(e.filterTo)}`:e.filter!=null?this.formatValue(e.filter):`${e.type}`}};function MR(e){let{allowedCharPattern:t}=e??{};return t??null}var qie=class extends AH{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern!==e.allowedCharPattern?!1:super.refresh(e)}mapValuesFromModel(e){let{filter:t,filterTo:n,type:i}=e||{};return[this.processValue(t),this.processValue(n)].slice(0,this.getNumberOfInputs(i))}getDefaultDebounceMs(){return 500}comparator(){return(e,t)=>e===t?0:e<t?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new FH(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return PH}setElementValue(e,t,n){let i=!n&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(t??null):t;super.setElementValue(e,i)}createValueElement(){let e=MR(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),Ri(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,n,i){let s=this.createManagedBean(i?new tc({allowedCharPattern:i}):new XR);s.addCssClass(`ag-filter-${n}`),s.addCssClass("ag-filter-filter"),t.push(s),e.appendChild(s.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}getValues(e){let t=[];return this.forEachPositionInput(e,(n,i,s,r)=>{i<r&&t.push(this.processValue(this.stringToFloat(n.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getFilterType(){return"number"}processValue(e){return e==null||isNaN(e)?null:e}stringToFloat(e){if(typeof e=="number")return e;let t=Kl(e);return t!=null&&t.trim()===""&&(t=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(t):t==null||t.trim()==="-"?null:parseFloat(t)}createCondition(e){let t=this.getConditionType(e),n={filterType:this.getFilterType(),type:t},i=this.getValues(e);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{if(!t.getInputElement().validity.valid){e=!0;return}}),e}},xH=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],OH=class extends ZR{conditionToString(e,t){let{numberOfInputs:n}=t||{};return e.type=="inRange"||n===2?`${e.filter}-${e.filterTo}`:e.filter!=null?`${e.filter}`:`${e.type}`}};function NH(e){let t=e&&e.trim();return t===""?e:t}var Kie=class extends IH{constructor(){super("textFilter"),this.defaultFormatter=e=>e,this.defaultLowercaseFormatter=e=>e==null?null:e.toString().toLowerCase(),this.defaultMatcher=({filterOption:e,value:t,filterText:n})=>{if(n==null)return!1;switch(e){case"contains":return t.indexOf(n)>=0;case"notContains":return t.indexOf(n)<0;case"equals":return t===n;case"notEqual":return t!=n;case"startsWith":return t.indexOf(n)===0;case"endsWith":{let i=t.lastIndexOf(n);return i>=0&&i===t.length-n.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[]}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new OH(this.localeService,this.optionsFactory)}getTextMatcher(){let e=this.textFilterParams.textCustomComparator;return e?(j("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:t,value:n,filterText:i})=>e(t,n,i)):this.textFilterParams.textMatcher||this.defaultMatcher}createCondition(e){let t=this.getConditionType(e),n={filterType:this.getFilterType(),type:t},i=this.getValuesWithSideEffects(e,!0);return i.length>0&&(n.filter=i[0]),i.length>1&&(n.filterTo=i[1]),n}getFilterType(){return"text"}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){let n=[];return this.forEachPositionInput(e,(i,s,r,o)=>{if(s<o){let a=Kl(i.getValue());t&&this.textFilterParams.trimInput&&(a=NH(a)??null,i.setValue(a,!0)),n.push(a)}}),n}getDefaultFilterOptions(){return xH}createValueElement(){let e=document.createElement("div");return e.classList.add("ag-filter-body"),Ri(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,n){let i=this.createManagedBean(new tc);i.addCssClass(`ag-filter-${n}`),i.addCssClass("ag-filter-filter"),t.push(i),e.appendChild(i.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}mapValuesFromModel(e){let{filter:t,filterTo:n,type:i}=e||{};return[t||null,n||null].slice(0,this.getNumberOfInputs(i))}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,n,i){let s=e.map(f=>this.formatter(f))||[],r=this.formatter(t),{api:o,colDef:a,column:l,context:c,textFormatter:u}=this.textFilterParams;if(n.type==="blank")return this.isBlank(t);if(n.type==="notBlank")return!this.isBlank(t);let h={api:o,colDef:a,column:l,context:c,node:i.node,data:i.data,filterOption:n.type,value:r,textFormatter:u};return s.some(f=>this.matcher(ae(B({},h),{filterText:f})))}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}};function kH(e){if(typeof e=="number")return e;if(typeof e=="string"){let t=parseInt(e);return isNaN(t)?void 0:t}}function xr(e,t=Number.MAX_VALUE){return n=>{let i=kH(n);if(!(i==null||i<e||i>t))return i}}function op(e,t){return e.toString().padStart(t,"0")}function Qie(e,t){let n=[];for(let i=e;i<=t;i++)n.push(i);return n}function Yie(e,t,n){return typeof e!="number"?"":e.toString().replace(".",n).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${t}`)}function _s(e,t=!0,n="-"){if(!e)return null;let i=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(s=>op(s,2)).join(n);return t&&(i+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map(s=>op(s,2)).join(":")),i}var uR=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function ap(e,t="YYYY-MM-DD"){let n=op(e.getFullYear(),4),i=["January","February","March","April","May","June","July","August","September","October","November","December"],s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r={YYYY:()=>n.slice(n.length-4,n.length),YY:()=>n.slice(n.length-2,n.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>i[e.getMonth()],MMM:()=>i[e.getMonth()].slice(0,3),MM:()=>op(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${uR(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${uR(e.getDate())}`,DD:()=>op(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>s[e.getDay()],ddd:()=>s[e.getDay()].slice(0,3),dd:()=>s[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${uR(e.getDay())}`,d:()=>`${e.getDay()}`},o=new RegExp(Object.keys(r).join("|"),"g");return t.replace(o,a=>a in r?r[a]():a)}function Ti(e){if(!e)return null;let[t,n]=e.split(" ");if(!t)return null;let i=t.split("-").map(h=>parseInt(h,10));if(i.filter(h=>!isNaN(h)).length!==3)return null;let[s,r,o]=i,a=new Date(s,r-1,o);if(a.getFullYear()!==s||a.getMonth()!==r-1||a.getDate()!==o)return null;if(!n||n==="00:00:00")return a;let[l,c,u]=n.split(":").map(h=>parseInt(h,10));return l>=0&&l<24&&a.setHours(l),c>=0&&c<60&&a.setMinutes(c),u>=0&&u<60&&a.setSeconds(u),a}var LH=class{constructor(e,t,n,i,s){this.alive=!0,this.context=e,this.eParent=i,t.getDateCompDetails(n).newAgStackInstance().then(a=>{if(!this.alive){e.destroyBean(a);return}this.dateComp=a,a&&(i.appendChild(a.getGui()),a.afterGuiAttached&&a.afterGuiAttached(),this.tempValue&&a.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled),s?.(this))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){Et(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(e)}updateParams(e){let t=!1;this.dateComp?.refresh&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(e)!==null&&(t=!0),!t&&this.dateComp?.onParamsUpdated&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(e)!==null&&j("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(e){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(e)}},VH=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],BH=class extends ZR{constructor(e,t,n){super(t,n),this.dateFilterParams=e}conditionToString(e,t){let{type:n}=e,{numberOfInputs:i}=t||{},s=n=="inRange"||i===2,r=Ti(e.dateFrom),o=Ti(e.dateTo),a=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(s){let l=r!==null?ap(r,a):"null",c=o!==null?ap(o,a):"null";return`${l}-${c}`}return r!=null?ap(r,a):`${n}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},CG=1e3,yG=1/0,Jie=class extends AH{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=CG,this.maxValidYear=yG,this.minValidDate=null,this.maxValidDate=null}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){let{dateFrom:t,dateTo:n,type:i}=e||{};return[t&&Ti(t)||null,n&&Ti(n)||null].slice(0,this.getNumberOfInputs(i))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,t){let n=t;return t==null||n<e?-1:n>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);let t=(n,i)=>{if(e[n]!=null)if(isNaN(e[n]))j(`DateFilter ${n} is not a number`);else return e[n]==null?i:Number(e[n]);return i};this.minValidYear=t("minValidYear",CG),this.maxValidYear=t("maxValidYear",yG),this.minValidYear>this.maxValidYear&&j("DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:Ti(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:Ti(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&j("DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new BH(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){let t=new LH(this.context,this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc(()=>t.destroy()),t}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return VH}createValueElement(){let t=this.gos.getDocument().createElement("div");return t.classList.add("ag-filter-body"),this.createFromToElement(t,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(t,this.eConditionPanelsTo,this.dateConditionToComps,"to"),t}createFromToElement(e,t,n,i){let r=this.gos.getDocument().createElement("div");r.classList.add(`ag-filter-${i}`),r.classList.add(`ag-filter-date-${i}`),t.push(r),e.appendChild(r),n.push(this.createDateCompWrapper(r))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),this.removeItems(this.eConditionPanelsFrom,e,t),this.removeItems(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,n){this.removeItems(e,t,n).forEach(s=>s.destroy())}isValidDateValue(e){if(e===null)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((n,i,s,r)=>{s!==e||!t||i>=r||(t=t&&this.isValidDateValue(n.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}getFilterType(){return"date"}createCondition(e){let t=this.getConditionType(e),n={},i=this.getValues(e);return i.length>0&&(n.dateFrom=_s(i[0])),i.length>1&&(n.dateTo=_s(i[1])),B({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:t},n)}resetPlaceholder(){let e=this.localeService.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),n=e("ariaFilterValue","Filter Value");this.forEachInput(i=>{i.setInputPlaceholder(t),i.setInputAriaLabel(n)})}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){let t=[];return this.forEachPositionInput(e,(n,i,s,r)=>{i<r&&t.push(n.getDate())}),t}translate(e){return e==="lessThan"?super.translate("before"):e==="greaterThan"?super.translate("after"):super.translate(e)}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}},eI=class extends L{constructor(e,t,n,i){super(),this.columnOrGroup=e,this.columnOrGroup=e,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=i,this.beans=n}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?We(this.colsSpanning):this.columnOrGroup}postConstruct(){let e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){let e=this.beans.gos.get("suppressColumnMoveAnimation"),t=q(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){let e=this.getColumnOrGroup(),t=e.getLeft(),n=e.getOldLeft(),i=this.modifyLeftForPrintLayout(e,n),s=this.modifyLeftForPrintLayout(e,t);this.setLeft(i),this.actualLeft=s,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===s&&this.setLeft(s)})}onLeftChanged(){let e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){if(!this.beans.gos.isDomLayout("print")||e.getPinned()==="left")return t;let i=this.beans.visibleColsService.getColsLeftWidth();if(e.getPinned()==="right"){let s=this.beans.visibleColsService.getBodyContainerWidth();return i+s+t}return i+t}setLeft(e){if(q(e)&&(this.eCell.style.left=`${e}px`),qt(this.columnOrGroup)){let t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&Cne(this.ariaEl,t.length)}}},Xie="ag-column-first",Zie="ag-column-last";function GH(e,t,n,i){return Ve(e)?[]:tse(e.headerClass,e,t,n,i)}function HH(e,t,n){e.addOrRemoveCssClass(Xie,n.isColAtEdge(t,"first")),e.addOrRemoveCssClass(Zie,n.isColAtEdge(t,"last"))}function ese(e,t,n,i){return t.addGridCommonParams({colDef:e,column:n,columnGroup:i})}function tse(e,t,n,i,s){if(Ve(e))return[];let r;if(typeof e=="function"){let o=ese(t,n,i,s);r=e(o)}else r=e;return typeof r=="string"?[r]:Array.isArray(r)?[...r]:[]}var nse=0,UH=class WH extends L{constructor(t,n,i){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=t,this.parentRowCtrl=i,this.beans=n,this.instanceId=t.getUniqueId()+"-"+nse++}wireBeans(t){this.pinnedWidthService=t.pinnedWidthService,this.focusService=t.focusService,this.userComponentFactory=t.userComponentFactory,this.ctrlsService=t.ctrlsService,this.dragAndDropService=t.dragAndDropService,this.menuService=t.menuService}postConstruct(){this.addManagedPropertyListeners(["suppressHeaderFocus"],()=>this.refreshTabIndex())}shouldStopEventPropagation(t){let{headerRowIndex:n,column:i}=this.focusService.getFocusedHeader();return Wie(this.gos,t,n,i)}getWrapperHasFocus(){return this.gos.getActiveDomElement()===this.eGui}setGui(t){this.eGui=t,this.addDomData(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onGuiFocus(){let t={type:"headerFocused",column:this.column};this.eventService.dispatchEvent(t)}onDisplayedColumnsChanged(){!this.comp||!this.column||(this.refreshFirstAndLastStyles(),this.refreshAriaColIndex())}refreshFirstAndLastStyles(){let{comp:t,column:n,beans:i}=this;HH(t,n,i.visibleColsService)}refreshAriaColIndex(){let{beans:t,column:n}=this,i=t.visibleColsService.getAriaColIndex(n);XG(this.eGui,i)}addResizeAndMoveKeyboardListeners(){this.resizeFeature&&this.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){this.gos.get("suppressHeaderFocus")?this.eGui.removeAttribute("tabindex"):this.eGui.setAttribute("tabindex","-1")}onGuiKeyDown(t){let n=this.gos.getActiveDomElement(),i=t.key===N.LEFT||t.key===N.RIGHT;if(this.isResizing&&(t.preventDefault(),t.stopImmediatePropagation()),n!==this.eGui||!t.shiftKey&&!t.altKey||((this.isResizing||i)&&(t.preventDefault(),t.stopImmediatePropagation()),!i))return;let s=t.key===N.LEFT!==this.gos.get("enableRtl"),r=SH[s?"Left":"Right"];if(t.altKey){this.isResizing=!0,this.resizeMultiplier+=1;let o=this.getViewportAdjustedResizeDiff(t);this.resizeHeader(o,t.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(r)}getViewportAdjustedResizeDiff(t){let n=this.getResizeDiff(t);if(this.column.getPinned()){let s=this.pinnedWidthService.getPinnedLeftWidth(),r=this.pinnedWidthService.getPinnedRightWidth(),o=fp(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(s+r+n>o)if(o>s+r)n=o-s-r;else return 0}return n}getResizeDiff(t){let n=t.key===N.LEFT!==this.gos.get("enableRtl"),i=this.column.getPinned(),s=this.gos.get("enableRtl");return i&&s!==(i==="right")&&(n=!n),(n?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{this.resizeFeature?.toggleColumnResizing(!1)},150))}handleKeyDown(t){let n=this.getWrapperHasFocus();switch(t.key){case N.PAGE_DOWN:case N.PAGE_UP:case N.PAGE_HOME:case N.PAGE_END:n&&t.preventDefault()}}addDomData(){let t=WH.DOM_DATA_KEY_HEADER_CTRL;this.gos.setDomData(this.eGui,t,this),this.addDestroyFunc(()=>this.gos.setDomData(this.eGui,t,null))}getGui(){return this.eGui}focus(t){return this.eGui?(this.lastFocusEvent=t||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getInstanceId(){return this.instanceId}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(t,n,i){let s=t??n;this.gos.get("preventDefaultOnContextMenu")&&s.preventDefault();let r=Fa(i)?i:void 0;this.menuService.isHeaderContextMenuEnabled(r)&&this.menuService.showHeaderContextMenu(r,t,n),this.dispatchColumnMouseEvent("columnHeaderContextMenu",i)}dispatchColumnMouseEvent(t,n){let i={type:t,column:n};this.eventService.dispatchEvent(i)}destroy(){super.destroy(),this.removeDragSource(),this.comp=null,this.column=null,this.resizeFeature=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null,this.eGui=null}};UH.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";var Gy=UH,tI=class extends L{wireBeans(e){this.columnHoverService=e.columnHoverService}constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListeners(this.element,{mouseout:this.onMouseOut.bind(this),mouseover:this.onMouseOver.bind(this)})}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}},ise=class extends Gy{constructor(e,t,n){super(e,t,n),this.iconCreated=!1,this.column=e}setComp(e,t,n,i){this.comp=e,this.eButtonShowMainFilter=n,this.eFloatingFilterBody=i,this.setGui(t),this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(),this.addManagedListeners(this.column,{colDefChanged:this.onColDefChanged.bind(this)})}resizeHeader(){}moveHeader(){}setupActive(){let e=this.column.getColDef(),t=!!e.filter,n=!!e.floatingFilter;this.active=t&&n}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;let e=Ji("filter",this.gos,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(){this.createManagedBean(new ec(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){let e=this.localeService.getLocaleTextFunc();pd(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(this.gos.getActiveDomElement()===this.eGui)return;let i=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(i){this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),i.focus();return}let s=this.findNextColumnWithFloatingFilter(e.shiftKey);s&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:s},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){let t=this.beans.visibleColsService,n=this.column;do if(n=e?t.getColBefore(n):t.getColAfter(n),!n)break;while(!n.getColDef().filter||!n.getColDef().floatingFilter);return n}handleKeyDown(e){super.handleKeyDown(e);let t=this.getWrapperHasFocus();switch(e.key){case N.UP:case N.DOWN:t||e.preventDefault();case N.LEFT:case N.RIGHT:if(t)return;e.stopPropagation();case N.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case N.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;let n=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),i=!!e.relatedTarget&&hd(e.relatedTarget,"ag-floating-filter");if(n&&i&&e.target===this.eGui){let r=this.lastFocusEvent,o=!!(r&&r.key===N.TAB);if(r&&o){let a=r.shiftKey;this.focusService.focusInto(this.eGui,a)}}let s=this.getRowIndex();this.beans.focusService.setFocusedHeader(s,this.column)}setupHover(){this.createManagedBean(new tI([this.column],this.eGui));let e=()=>{if(!this.gos.get("columnHoverHighlight"))return;let t=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",t)};this.addManagedEventListeners({columnHoverChanged:e}),e()}setupLeft(){let e=new eI(this.column,this.eGui,this.beans);this.createManagedBean(e)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){if(!this.active)return;let e=this.beans.filterManager?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){let e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(){if(!this.active)return;let{filterManager:e}=this.beans,t=n=>{if(n?.source==="filterDestroyed"&&!this.isAlive())return;let i=this.comp.getFloatingFilterComp();i&&i.then(s=>{if(s){let r=e?.getCurrentFloatingFilterParentModel(this.column),o=n?ae(B({},n),{columns:n.columns??[],source:n.source==="api"?"api":"columnFilter"}):null;s.onParentModelChanged(r,o)}})};[this.destroySyncListener]=this.addManagedListeners(this.column,{filterChanged:t}),e?.isFilterActive(this.column)&&t(null)}setupWidth(){let e=()=>{let t=`${this.column.getActualWidth()}px`;this.comp.setWidth(t)};this.addManagedListeners(this.column,{widthChanged:e}),e()}setupFilterChangedListener(){this.active&&([this.destroyFilterChangedListener]=this.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){let e=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(){let e=this.active;this.setupActive();let t=!e&&this.active;e&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());let n=this.active?this.beans.filterManager?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,i=this.comp.getFloatingFilterComp();!i||!n?this.updateCompDetails(n,t):i.then(s=>{!s||this.beans.filterManager?.areFilterCompsDifferent(this.userCompDetails??null,n)?this.updateCompDetails(n,t):this.updateFloatingFilterParams(n)})}updateCompDetails(e,t){this.isAlive()&&(this.setCompDetails(e),this.setupFilterButton(),this.setupUi(),t&&(this.setupSyncWithFilter(),this.setupFilterChangedListener()))}updateFloatingFilterParams(e){if(!e)return;let t=e.params;this.comp.getFloatingFilterComp()?.then(n=>{let i=!1;n?.refresh&&typeof n.refresh=="function"&&n.refresh(t)!==null&&(i=!0),!i&&n?.onParamsUpdated&&typeof n.onParamsUpdated=="function"&&n.onParamsUpdated(t)!==null&&j("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.destroySyncListener=null,this.destroyFilterChangedListener=null}},Ee="32.0.2";function sse(e){return!!e.filterManager?.isColumnFilterPresent()||!!e.filterManager?.isAggregateFilterPresent()}function rse(e,t,n){return e.filterManager?.getFilterInstance(t,n)}function ose(e,t){return e.filterManager?.getColumnFilterInstance(t)??Promise.resolve(void 0)}function ase(e,t){let n=e.columnModel.getColDefCol(t);if(n)return e.filterManager?.destroyFilter(n,"api")}function lse(e,t){e.frameworkOverrides.wrapIncoming(()=>e.filterManager?.setFilterModel(t))}function cse(e){return e.filterManager?.getFilterModel()??{}}function use(e,t){return e.filterManager?.getColumnFilterModel(t)??null}function dse(e,t,n){return e.filterManager?.setColumnFilterModel(t,n)??Promise.resolve()}function hse(e,t){let n=e.columnModel.getCol(t);if(!n){$e(`column '${t}' not found`);return}e.menuService.showFilterMenu({column:n,containerType:"columnFilter",positionBy:"auto"})}function fse(e,t,n){if(t==null)return null;let i=null,{compName:s,jsComp:r,fwComp:o}=yH.getCompKeys(e,t,QR);return s?i={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[s]:r==null&&o==null&&t.filter===!0&&(i=n()),i}var pse=class extends L{constructor(){super(...arguments),this.beanName="columnFilterService",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.userComponentFactory=e.userComponentFactory,this.rowRenderer=e.rowRenderer,this.dataTypeService=e.dataTypeService,this.filterManager=e.filterManager}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),rowDataUpdated:()=>this.onNewRowsLoaded("rowDataUpdated"),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel=B({},this.gos.get("initialState")?.filter?.filterModel??{})}setFilterModel(e,t="api"){if(this.dataTypeService?.isPendingInference()){this.filterModelUpdateQueue.push({model:e,source:t});return}let n=[],i=this.getFilterModel();if(e){let s=new Set(Object.keys(e));this.allColumnFilters.forEach((r,o)=>{let a=e[o];n.push(this.setModelOnFilterWrapper(r.filterPromise,a)),s.delete(o)}),s.forEach(r=>{let o=this.columnModel.getColDefCol(r)||this.columnModel.getCol(r);if(!o){j("setFilterModel() - no column found for colId: "+r);return}if(!o.isFilterAllowed()){j("setFilterModel() - unable to fully apply model, filtering disabled for colId: "+r);return}let a=this.getOrCreateFilterWrapper(o);if(!a){j("setFilterModel() - unable to fully apply model, unable to create filter for colId: "+r);return}n.push(this.setModelOnFilterWrapper(a.filterPromise,e[r]))})}else this.allColumnFilters.forEach(s=>{n.push(this.setModelOnFilterWrapper(s.filterPromise,null))});Yi.all(n).then(()=>{let s=this.getFilterModel(),r=[];this.allColumnFilters.forEach((o,a)=>{let l=i?i[a]:null,c=s?s[a]:null;Ay(l,c)||r.push(o.column)}),r.length>0&&this.filterManager?.onFilterChanged({columns:r,source:t})})}setModelOnFilterWrapper(e,t){return new Yi(n=>{e.then(i=>{typeof i.setModel!="function"&&(j("filter missing setModel method, which is needed for setFilterModel"),n()),(i.setModel(t)||Yi.resolve()).then(()=>n())})})}getFilterModel(){let e={};return this.allColumnFilters.forEach((t,n)=>{let i=this.getModelFromFilterWrapper(t);q(i)&&(e[n]=i)}),e}getModelFromFilterWrapper(e){let{filter:t}=e;return t?typeof t.getModel!="function"?(j("filter API missing getModel method, which is needed for getFilterModel"),null):t.getModel():this.getModelFromInitialState(e.column)}getModelFromInitialState(e){return this.initialFilterModel[e.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){return this.allColumnFilters.size?(this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"advancedFilterEnabled")),!0):!1}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){let e=r=>r?r.isFilterActive?r.isFilterActive():(j("Filter is missing isFilterActive() method"),!1):!1,t=!!this.gos.getGroupAggFiltering(),n=r=>{if(!r.isPrimary())return!0;let a=!this.columnModel.isPivotActive();return!r.isValueActive()||!a?!1:this.columnModel.isPivotMode()?!0:t},i=[],s=[];return this.forEachColumnFilter((r,o)=>{e(r)&&(n(o.column)?i.push(r):s.push(r))}).then(()=>{this.activeAggregateFilters=i,this.activeColumnFilters=s})}updateFilterFlagInColumns(e,t){return this.forEachColumnFilter((n,i)=>i.column.setFilterActive(n.isFilterActive(),e,t))}forEachColumnFilter(e){return Yi.all(Array.from(this.allColumnFilters.values()).map(t=>t.filterPromise.then(n=>e(n,t))))}doColumnFiltersPass(e,t,n){let{data:i,aggData:s}=e,r=n?this.activeAggregateFilters:this.activeColumnFilters,o=n?s:i;for(let a=0;a<r.length;a++){let l=r[a];if(!(l==null||l===t)){if(typeof l.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!l.doesFilterPass({node:e,data:o}))return!1}}return!0}callOnFilterChangedOutsideRenderCycle(e){let t=()=>this.filterManager?.onFilterChanged(e);this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}updateBeforeFilterChanged(e={}){let{filterInstance:t,additionalEventAttributes:n}=e;return this.updateDependentFilters(),this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",n).then(()=>{this.allColumnFilters.forEach(i=>{i.filterPromise&&i.filterPromise.then(s=>{s&&s!==t&&s.onAnyFilterChanged&&s.onAnyFilterChanged()})}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){this.forEachColumnFilter(t=>{t.onNewRowsLoaded&&t.onNewRowsLoaded()}).then(()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createValueGetter(e){return({node:t})=>this.valueService.getValue(e,t,!0)}createGetValue(e){return(t,n)=>{let i=n?this.columnModel.getCol(n):e;return i?this.valueService.getValue(i,t,!0):void 0}}isFilterActive(e){let{filter:t}=this.cachedFilter(e)??{};return t?t.isFilterActive():this.getModelFromInitialState(e)!=null}getOrCreateFilterWrapper(e){if(!e.isFilterAllowed())return null;let t=this.cachedFilter(e);return t||(t=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,t)),t}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t;if(ai.__isRegistered("@ag-grid-enterprise/set-filter",this.gridId))t="agSetColumnFilter";else{let n=this.dataTypeService?.getBaseDataType(e);n==="number"?t="agNumberColumnFilter":n==="date"||n==="dateString"?t="agDateColumnFilter":t="agTextColumnFilter"}return t}getDefaultFloatingFilter(e){let t;if(ai.__isRegistered("@ag-grid-enterprise/set-filter",this.gridId))t="agSetColumnFloatingFilter";else{let n=this.dataTypeService?.getBaseDataType(e);n==="number"?t="agNumberColumnFloatingFilter":n==="date"||n==="dateString"?t="agDateColumnFloatingFilter":t="agTextColumnFloatingFilter"}return t}createFilterInstance(e,t){let n=this.getDefaultFilter(e),i=e.getColDef(),s,r=ae(B({},this.createFilterParams(e,i)),{filterModifiedCallback:()=>this.filterModifiedCallbackFactory(s,e)(),filterChangedCallback:a=>this.filterChangedCallbackFactory(s,e)(a),doesRowPassOtherFilter:a=>this.filterManager?this.filterManager.doesRowPassOtherFilters(s,a):!0}),o=this.userComponentFactory.getFilterDetails(i,r,n);return o?{filterPromise:()=>{let a=o.newAgStackInstance();return a?.then(l=>{s=l,t&&(t.filter=l)}),a},compDetails:o}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return this.gos.addGridCommonParams({column:e,colDef:VG(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e){let t={column:e,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:n,compDetails:i}=this.createFilterInstance(e,t);return t.filterPromise=n?.()??null,t.compDetails=i,t}onColumnsChanged(){let e=[];this.allColumnFilters.forEach((t,n)=>{let i;t.column.isPrimary()?i=this.columnModel.getColDefCol(n):i=this.columnModel.getCol(n),!(i&&i===t.column)&&(e.push(t.column),this.disposeFilterWrapper(t,"columnChanged"),this.disposeColumnListener(n))}),e.length>0?this.filterManager?.onFilterChanged({columns:e,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){this.columnModel.getAutoCols()?.forEach(t=>{t.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(t)})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;let{filter:n}=this.allColumnFilters.get(e.getColId())??{};return n&&typeof n?.isFilterAllowed=="function"?n.isFilterAllowed():!0}getFloatingFilterCompDetails(e,t){let n=l=>{let c=this.getOrCreateFilterWrapper(e)?.filterPromise;c?.then(u=>{l(rp(u))})},i=e.getColDef(),s=ae(B({},this.createFilterParams(e,i)),{filterChangedCallback:()=>n(l=>this.filterChangedCallbackFactory(l,e)())}),r=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(i,QR,s),o=fse(this.frameworkOverrides,i,()=>this.getDefaultFloatingFilter(e));o==null&&(o="agReadOnlyFloatingFilter");let a={column:e,filterParams:r,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:n,showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(i,a,o)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilter(e,t="api"){let n=e.getColId(),i=this.allColumnFilters.get(n);this.disposeColumnListener(n),delete this.initialFilterModel[n],i&&(this.disposeFilterWrapper(i,t),this.filterManager?.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){let t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){e.filterPromise.then(n=>{this.destroyBean(n),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId());let i={type:"filterDestroyed",source:t,column:e.column};this.eventService.dispatchEvent(i)})}filterModifiedCallbackFactory(e,t){return()=>{let n={type:"filterModified",column:t,filterInstance:e};this.eventService.dispatchEvent(n)}}filterChangedCallbackFactory(e,t){return n=>{let i=n?.source??"columnFilter",s={filter:e,additionalEventAttributes:n,columns:[t],source:i};this.callOnFilterChangedOutsideRenderCycle(s)}}checkDestroyFilter(e){let t=this.allColumnFilters.get(e);if(!t)return;let n=t.column,{compDetails:i}=n.isFilterAllowed()?this.createFilterInstance(n):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,i)){this.destroyFilter(n,"paramsUpdated");return}let s=n.getColDef().filterParams;if(!t.filterPromise){this.destroyFilter(n,"paramsUpdated");return}t.filterPromise.then(r=>{(r?.refresh?r.refresh(B(ae(B({},this.createFilterParams(n,n.getColDef())),{filterModifiedCallback:this.filterModifiedCallbackFactory(r,n),filterChangedCallback:this.filterChangedCallbackFactory(r,n),doesRowPassOtherFilter:a=>this.filterManager?this.filterManager.doesRowPassOtherFilters(r,a):!0}),s)):!0)===!1&&this.destroyFilter(n,"paramsUpdated")})}setColumnFilterWrapper(e,t){let n=e.getColId();this.allColumnFilters.set(n,t),this.allColumnListeners.set(n,this.addManagedListeners(e,{colDefChanged:()=>this.checkDestroyFilter(n)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;let{componentClass:n}=e,{componentClass:i}=t;return!(n===i||n?.render&&i?.render&&n.render===i.render)}hasFloatingFilters(){return this.columnModel.getCols().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e,t){t&&this.getFilterInstanceImpl(e).then(n=>{let i=rp(n);t(i)})}getColumnFilterInstance(e){return new Promise(t=>{this.getFilterInstanceImpl(e).then(n=>{t(rp(n))})})}getFilterInstanceImpl(e){let t=this.columnModel.getColDefCol(e);return t?this.getOrCreateFilterWrapper(t)?.filterPromise??Yi.resolve(null):Yi.resolve(void 0)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:e,source:t})=>this.setFilterModel(e,t)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:e,model:t,resolve:n})=>{this.setColumnFilterModel(e,t).then(()=>n())}),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(e){let t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){if(this.dataTypeService?.isPendingInference()){let r=()=>{},o=new Promise(a=>{r=a});return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:r}),o}let n=this.columnModel.getColDefCol(e),i=n?this.getOrCreateFilterWrapper(n):null;return i?(r=>new Promise(o=>{r.then(a=>o(a))}))(this.setModelOnFilterWrapper(i.filterPromise,t)):Promise.resolve()}getFilterWrapper(e){let t=this.columnModel.getColDefCol(e);return t?this.cachedFilter(t)??null:null}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}};function gse(e){return!!e.filterManager?.isAnyFilterPresent()}function mse(e,t="api"){e.filterManager?.onFilterChanged({source:t})}var vse=class extends Ke{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>
            </div>`,[By]),this.eFloatingFilterText=ie}wireBeans(e){this.columnNameService=e.columnNameService}destroy(){super.destroy()}init(e){this.params=e;let t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),n=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${n("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){let n=t.getModelAsString(e);this.eFloatingFilterText.setValue(n)}})}onParamsUpdated(e){this.refresh(e)}refresh(e){this.init(e)}},jH=class extends Ke{wireBeans(e){this.columnNameService=e.columnNameService}getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return e?.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.getDefaultOption();return}let t=e.operator,n;t?n=e.conditions[0]:n=e,this.lastType=n.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;let n=e;return this.isTypeEditable(n.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){this.optionsFactory=new RH,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),t||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!e.filterParams.readOnly;let n=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(n)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){let t=this.optionsFactory.getCustomOption(e),{numberOfInputs:n}=t||{};return n==null||n==1}isTypeEditable(e){let t=["inRange","empty","blank","notBlank"];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){let t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),n=this.localeService.getLocaleTextFunc();return`${t} ${n("ariaFilterInput","Filter Input")}`}},Cse=class extends jH{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eReadOnlyText"></ag-input-text-field>
                <div data-ref="eDateWrapper" style="display: flex;"></div>
            </div>`,[By]),this.eReadOnlyText=ie,this.eDateWrapper=ie}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}getDefaultFilterOptions(){return VH}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new BH(this.filterParams,this.localeService,this.optionsFactory);let t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){let t=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){if(e){let n=e;this.dateComp.setDate(Ti(n.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){Et(this.eDateWrapper,e),Et(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){let e=this.dateComp.getDate(),t=_s(e);this.params.parentFilterInstance(n=>{if(n){let i=Ti(t);n.onFloatingFilterChanged(this.getLastType()||null,i)}})}getDateComponentParams(){let e=YR(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:ci(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new LH(this.context,this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,e=>{e.setInputAriaLabel(this.getAriaLabel(this.params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){let e=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}},yse=class extends Ke{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" data-ref="eDateInput"></ag-input-text-field>
            </div>`,[By]),this.eDateInput=ie}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);let t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus()},input:n=>{n.target===this.gos.getActiveDomElement()&&(this.eDateInput.isDisabled()||this.params.onDateChanged())}})}setParams(e){let t=this.eDateInput.getInputElement(),n=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=n&&Do(),t.type=n?"date":"text";let{minValidYear:i,maxValidYear:s,minValidDate:r,maxValidDate:o}=e.filterParams||{};if(r&&i&&j("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),o&&s&&j("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),r&&o){let[a,l]=[r,o].map(c=>c instanceof Date?c:Ti(c));a&&l&&a.getTime()>l.getTime()&&j("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}r?r instanceof Date?t.min=ap(r):t.min=r:i&&(t.min=`${i}-01-01`),o?o instanceof Date?t.max=ap(o):t.max=o:s&&(t.max=`${s}-12-31`)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams(e)}getDate(){return Ti(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(_s(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&e.filterParams.browserDatePicker!=null?e.filterParams.browserDatePicker:HR()||eH()||Do()&&ZG()>=14.1}},zH=class extends L{constructor(e){super(),this.params=e,this.eFloatingFilterTextInput=ie,this.valueChangedListener=()=>{}}setupGui(e){this.eFloatingFilterTextInput=this.createManagedBean(new tc(this.params?.config));let t=this.eFloatingFilterTextInput.getGui();e.appendChild(t);let n=i=>this.valueChangedListener(i);this.addManagedListeners(t,{input:n,keydown:n})}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,t){this.eFloatingFilterTextInput.setValue(e,t)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}},$H=class extends jH{constructor(){super(...arguments),this.eFloatingFilterInputContainer=ie}postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){this.params=e;let t=e.browserAutoComplete??!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=Ly(this.params.filterParams),!this.isReadOnly()){let n=YR(this.params.filterParams,this.getDefaultDebounceMs()),i=ci(this.syncUpWithParentFilter.bind(this),n);this.floatingFilterInputService.setValueChangedListener(i)}}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){let t=this.floatingFilterInputService.getValue();zn(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(t,!0)}syncUpWithParentFilter(e){let t=e.key===N.ENTER;if(this.applyActive&&!t)return;let n=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(n=NH(n),this.floatingFilterInputService.setValue(n,!0)),this.params.parentFilterInstance(i=>{i&&i.onFloatingFilterChanged(this.getLastType()||null,n||null)})}setEditable(e){this.floatingFilterInputService.setEditable(e)}},wse=class extends L{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new XR),this.eFloatingFilterTextInput=this.createManagedBean(new tc),this.eFloatingFilterTextInput.setDisabled(!0);let t=this.eFloatingFilterNumberInput.getGui(),n=this.eFloatingFilterTextInput.getGui();e.appendChild(t),e.appendChild(n),this.setupListeners(t,i=>this.valueChangedListener(i)),this.setupListeners(n,i=>this.valueChangedListener(i))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}},Sse=class extends $H{init(e){super.init(e),this.filterModelFormatter=new FH(this.localeService,this.optionsFactory,e.filterParams?.numberFormatter)}onParamsUpdated(e){this.refresh(e)}refresh(e){MR(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return PH}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=MR(e.filterParams),this.allowedCharPattern?this.createManagedBean(new zH({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new wse)}},_se=class extends $H{init(e){super.init(e),this.filterModelFormatter=new OH(this.localeService,this.optionsFactory)}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return xH}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new zH)}};function bse(e){return!!e.filterManager?.isQuickFilterPresent()}function Ese(e){return e.gos.get("quickFilterText")}function Dse(e){e.filterManager?.resetQuickFilterCache()}var Tse=class extends L{constructor(){super(...arguments),this.beanName="quickFilterService",this.quickFilter=null,this.quickFilterParts=null}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.pivotResultColsService=e.pivotResultColsService}postConstruct(){let e=this.resetQuickFilterCache.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}}),this.addManagedPropertyListener("quickFilterText",t=>this.setQuickFilter(t.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onQuickFilterColumnConfigChanged()),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}refreshQuickFilterCols(){let e=this.columnModel.isPivotMode(),t=this.columnModel.getAutoCols(),n=this.columnModel.getColDefCols(),i=(e&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?this.pivotResultColsService.getPivotResultCols()?.list:n)??[];t&&(i=i.concat(t)),this.colsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?i:i.filter(s=>s.isVisible()||s.isRowGroupActive())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(e){let t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(t,e):this.quickFilterParts.every(n=>t?this.doesRowPassQuickFilterCache(e,n):this.doesRowPassQuickFilterNoCache(e,n))}resetQuickFilterCache(){this.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}setQuickFilterParts(){let{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseQuickFilter(e){return q(e)?this.gos.isRowModelType("clientSide")?e.toUpperCase():(j("Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(e!=null&&typeof e!="string"){j(`Grid option quickFilterText only supports string inputs, received: ${typeof e}`);return}let t=this.parseQuickFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setQuickFilterParserAndMatcher(){let e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),n=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,n&&(this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onQuickFilterColumnConfigChanged(){this.refreshQuickFilterCols(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassQuickFilterNoCache(e,t){return this.colsForQuickFilter.some(n=>{let i=this.getQuickFilterTextForColumn(n,e);return q(i)&&i.indexOf(t)>=0})}doesRowPassQuickFilterCache(e,t){return this.checkGenerateQuickFilterAggregateText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilterMatcher(e,t){let n;e?(this.checkGenerateQuickFilterAggregateText(t),n=t.quickFilterAggregateText):n=this.getQuickFilterAggregateText(t);let{quickFilterParts:i,matcher:s}=this;return s(i,n)}checkGenerateQuickFilterAggregateText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getQuickFilterAggregateText(e))}getQuickFilterTextForColumn(e,t){let n=this.valueService.getValue(e,t,!0),i=e.getColDef();if(i.getQuickFilterText){let s=this.gos.addGridCommonParams({value:n,node:t,data:t.data,column:e,colDef:i});n=i.getQuickFilterText(s)}return q(n)?n.toString().toUpperCase():null}getQuickFilterAggregateText(e){let t=[];return this.colsForQuickFilter.forEach(n=>{let i=this.getQuickFilterTextForColumn(n,e);q(i)&&t.push(i)}),t.join(`
`)}},nI={version:Ee,moduleName:"@ag-grid-community/filter-core",beans:[Iie]},Rse={version:Ee,moduleName:"@ag-grid-community/filter-api",apiFunctions:{isAnyFilterPresent:gse,onFilterChanged:mse},dependantModules:[nI]},iI={version:Ee,moduleName:"@ag-grid-community/column-filter",beans:[pse],dependantModules:[nI]},Ise={version:Ee,moduleName:"@ag-grid-community/column-filter-api",apiFunctions:{isColumnFilterPresent:sse,getFilterInstance:rse,getColumnFilterInstance:ose,destroyFilter:ase,setFilterModel:lse,getFilterModel:cse,getColumnFilterModel:use,setColumnFilterModel:dse,showColumnFilter:hse},dependantModules:[iI,Rse]},qH={version:Ee,moduleName:"@ag-grid-community/floating-filter-core",controllers:[{name:"headerFilterCell",classImp:ise}],dependantModules:[iI]};var Ase={version:Ee,moduleName:"@ag-grid-community/read-only-floating-filter",userComponents:[{name:"agReadOnlyFloatingFilter",classImp:vse}],dependantModules:[qH]},Mse={version:Ee,moduleName:"@ag-grid-community/simple-filter",dependantModules:[iI],userComponents:[{name:"agTextColumnFilter",classImp:Kie},{name:"agNumberColumnFilter",classImp:qie},{name:"agDateColumnFilter",classImp:Jie},{name:"agDateInput",classImp:yse}]},Pse={version:Ee,moduleName:"@ag-grid-community/simple-floating-filter",dependantModules:[Mse,qH],userComponents:[{name:"agTextColumnFloatingFilter",classImp:_se},{name:"agNumberColumnFloatingFilter",classImp:Sse},{name:"agDateColumnFloatingFilter",classImp:Cse}]},KH={version:Ee,moduleName:"@ag-grid-community/quick-filter-core",beans:[Tse],dependantModules:[nI]},Fse={version:Ee,moduleName:"@ag-grid-community/quick-filter-api",apiFunctions:{isQuickFilterPresent:bse,getQuickFilter:Ese,resetQuickFilter:Dse},dependantModules:[KH]},xse={version:Ee,moduleName:"@ag-grid-community/quick-filter",dependantModules:[KH,Fse]},Ose={version:Ee,moduleName:"@ag-grid-community/filter",dependantModules:[Pse,Ase,xse,Ise]},sI=class extends Ke{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}},Nse=class extends sI{constructor(e){super(`<div class="ag-header-cell ag-floating-filter" role="gridcell">
            <div data-ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" data-ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" data-ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`,e),this.eFloatingFilterBody=ie,this.eButtonWrapper=ie,this.eButtonShowMainFilter=ie}postConstruct(){let e=this.getGui(),t={addOrRemoveCssClass:(n,i)=>this.addOrRemoveCssClass(n,i),addOrRemoveBodyCssClass:(n,i)=>this.eFloatingFilterBody.classList.toggle(n,i),setButtonWrapperDisplayed:n=>Et(this.eButtonWrapper,n),setCompDetails:n=>this.setCompDetails(n),getFloatingFilterComp:()=>this.compPromise,setWidth:n=>e.style.width=n,setMenuIcon:n=>this.eButtonShowMainFilter.appendChild(n)};this.ctrl.setComp(t,e,this.eButtonShowMainFilter,this.eFloatingFilterBody)}setCompDetails(e){if(!e){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=e.newAgStackInstance(),this.compPromise.then(t=>this.afterCompCreated(t))}destroy(){this.destroyFloatingFilterComp(),super.destroy()}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive()){this.destroyBean(e);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}},kse=class extends sI{constructor(e){super(`<div class="ag-header-cell" role="columnheader">
            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div data-ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`,e),this.eResize=ie,this.eHeaderCompWrapper=ie,this.headerCompVersion=0,this.column=e.getColumnGroupChild(),this.pinned=e.getPinned()}postConstruct(){let e=this.getGui();((s,r)=>{r!=null&&r!=""?e.setAttribute(s,r):e.removeAttribute(s)})("col-id",this.column.getColId());let n={setWidth:s=>e.style.width=s,addOrRemoveCssClass:(s,r)=>this.addOrRemoveCssClass(s,r),setAriaSort:s=>s?yne(e,s):wne(e),setUserCompDetails:s=>this.setUserCompDetails(s),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(n,this.getGui(),this.eResize,this.eHeaderCompWrapper);let i=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",i)}destroy(){this.destroyHeaderComp(),super.destroy()}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;let t=this.headerCompVersion;e.newAgStackInstance().then(n=>this.afterCompCreated(t,n))}afterCompCreated(e,t){if(e!=this.headerCompVersion||!this.isAlive()){this.destroyBean(t);return}this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}},Lse=class extends sI{constructor(e){super(`<div class="ag-header-group-cell" role="columnheader">
            <div data-ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`,e),this.eResize=ie}postConstruct(){let e=this.getGui(),t=(i,s)=>s!=null?e.setAttribute(i,s):e.removeAttribute(i);e.setAttribute("col-id",this.ctrl.getColId());let n={addOrRemoveCssClass:(i,s)=>this.addOrRemoveCssClass(i,s),setResizableDisplayed:i=>Et(this.eResize,i),setWidth:i=>e.style.width=i,setAriaExpanded:i=>t("aria-expanded",i),setUserCompDetails:i=>this.setUserCompDetails(i),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(n,e,this.eResize)}setUserCompDetails(e){e.newAgStackInstance().then(t=>this.afterHeaderCompCreated(t))}afterHeaderCompCreated(e){let t=()=>this.destroyBean(e);if(!this.isAlive()){t();return}let n=this.getGui(),i=e.getGui();n.appendChild(i),this.addDestroyFunc(t),this.headerGroupComp=e,this.ctrl.setDragSource(n)}};var Vse=class extends Ke{constructor(e){super(),this.headerComps={},this.ctrl=e,this.setTemplate(`<div class="${this.ctrl.getHeaderRowClass()}" role="row"></div>`)}postConstruct(){JG(this.getGui(),this.ctrl.getAriaRowIndex());let e={setHeight:t=>this.getGui().style.height=t,setTop:t=>this.getGui().style.top=t,setHeaderCtrls:(t,n)=>this.setHeaderCtrls(t,n),setWidth:t=>this.getGui().style.width=t};this.ctrl.setComp(e)}destroy(){this.setHeaderCtrls([],!1),super.destroy()}setHeaderCtrls(e,t){if(!this.isAlive())return;let n=this.headerComps;if(this.headerComps={},e.forEach(i=>{let s=i.getInstanceId(),r=n[s];delete n[s],r==null&&(r=this.createHeaderComp(i),this.getGui().appendChild(r.getGui())),this.headerComps[s]=r}),vs(n,(i,s)=>{this.getGui().removeChild(s.getGui()),this.destroyBean(s)}),t){let i=Pa(this.headerComps);i.sort((r,o)=>{let a=r.getCtrl().getColumnGroupChild().getLeft(),l=o.getCtrl().getColumnGroupChild().getLeft();return a-l});let s=i.map(r=>r.getGui());cH(this.getGui(),s)}}createHeaderComp(e){let t;switch(this.ctrl.getType()){case"group":t=new Lse(e);break;case"filter":t=new Nse(e);break;default:t=new kse(e);break}return this.createBean(t),t.setParentComponent(this),t}};var Bse=class extends L{constructor(){super(...arguments),this.beanName="headerNavigationService",this.currentHeaderRowWithoutSpan=-1}wireBeans(e){this.focusService=e.focusService,this.headerPositionUtils=e.headerPositionUtils,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.visibleColService=e.visibleColsService}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridBodyCon=t.gridBodyCtrl});let e=this.gos.getDocument();this.addManagedElementListeners(e,{mousedown:()=>this.setCurrentHeaderRowWithoutSpan(-1)})}getHeaderRowCount(){let e=this.ctrlsService.getHeaderRowContainerCtrl();return e?e.getRowCount():0}getHeaderPositionForColumn(e,t){let n;if(typeof e=="string"?(n=this.columnModel.getCol(e),n||(n=this.visibleColService.getColumnGroup(e))):n=e,!n)return null;let s=this.ctrlsService.getHeaderRowContainerCtrl().getAllCtrls(),r=We(s).getType()==="filter",o=this.getHeaderRowCount()-1,a=-1,l=n;for(;l;)a++,l=l.getParent();let c=a;return t&&r&&c===o-1&&c++,c===-1?null:{headerRowIndex:c,column:n}}navigateVertically(e,t,n){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;let{headerRowIndex:i}=t,s=t.column,r=this.getHeaderRowCount(),o=e===0,{headerRowIndex:a,column:l,headerRowIndexWithoutSpan:c}=o?this.headerPositionUtils.getColumnVisibleParent(s,i):this.headerPositionUtils.getColumnVisibleChild(s,i),u=!1;return a<0&&(a=0,l=s,u=!0),a>=r?(a=-1,this.setCurrentHeaderRowWithoutSpan(-1)):c!==void 0&&(this.currentHeaderRowWithoutSpan=c),!u&&!l?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a,column:l},allowUserOverride:!0,event:n})}setCurrentHeaderRowWithoutSpan(e){this.currentHeaderRowWithoutSpan=e}navigateHorizontally(e,t=!1,n){let i=this.focusService.getFocusedHeader(),s=e===2,r=this.gos.get("enableRtl"),o,a;if(this.currentHeaderRowWithoutSpan!==-1?i.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=i.headerRowIndex,s!==r?(a="Before",o=this.headerPositionUtils.findHeader(i,a)):(a="After",o=this.headerPositionUtils.findHeader(i,a)),o||!t)return this.focusService.focusHeaderPosition({headerPosition:o,direction:a,fromTab:t,allowUserOverride:!0,event:n});if(t){let l=this.gos.getCallback("tabToNextHeader");if(l)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:o,direction:a})}return this.focusNextHeaderRow(i,a,n)}focusNextHeaderRow(e,t,n){let i=e.headerRowIndex,s=null,r;if(t==="Before"?i>0&&(r=i-1,this.currentHeaderRowWithoutSpan-=1,s=this.headerPositionUtils.findColAtEdgeForHeaderRow(r,"end")):(r=i+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),s=this.headerPositionUtils.findColAtEdgeForHeaderRow(r,"start")),!s)return!1;let{column:o,headerRowIndex:a}=this.headerPositionUtils.getHeaderIndexToFocus(s.column,s?.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:o,headerRowIndex:a},direction:t,fromTab:!0,allowUserOverride:!0,event:n})}scrollToColumn(e,t="After"){if(e.getPinned())return;let n;if(qt(e)){let i=e.getDisplayedLeafColumns();n=t==="Before"?We(i):i[0]}else n=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(n)}},Gse=class extends L{wireBeans(e){this.headerNavigationService=e.headerNavigationService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService,this.filterManager=e.filterManager,this.menuService=e.menuService}setComp(e,t,n){this.comp=e,this.eGui=t,this.createManagedBean(new ec(n,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.onPivotModeChanged(),this.setupHeaderHeight();let i=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:i}),this.mockContextMenuForIPad(i),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){let e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListener("headerHeight",e),this.addManagedPropertyListener("pivotHeaderHeight",e),this.addManagedPropertyListener("groupHeaderHeight",e),this.addManagedPropertyListener("pivotGroupHeaderHeight",e),this.addManagedPropertyListener("floatingFiltersHeight",e),this.addManagedEventListeners({displayedColumnsChanged:e,columnHeaderHeightChanged:e,gridStylesChanged:e,advancedFilterEnabledChanged:e})}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){let{columnModel:e}=this,t=0,n=e.getHeaderRowCount(),i;this.filterManager?.hasFloatingFilters()&&(n++,t=1);let r=this.columnModel.getColumnGroupHeaderRowHeight(),o=this.columnModel.getColumnHeaderRowHeight(),a=1+t,l=n-a;if(i=t*e.getFloatingFiltersHeight(),i+=l*r,i+=o,this.headerHeight===i)return;this.headerHeight=i;let c=`${i+1}px`;this.comp.setHeightAndMinHeight(c),this.eventService.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(){let e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){let t=this.visibleColsService.getAllCols().some(n=>n.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)}onTabKeyDown(e){let t=this.gos.get("enableRtl"),n=e.shiftKey!==t?2:3;(this.headerNavigationService.navigateHorizontally(n,!0,e)||this.focusService.focusNextGridCoreContainer(e.shiftKey))&&e.preventDefault()}handleKeyDown(e){let t=null;switch(e.key){case N.LEFT:t=2;case N.RIGHT:{q(t)||(t=3),this.headerNavigationService.navigateHorizontally(t,!1,e);break}case N.UP:t=0;case N.DOWN:{q(t)||(t=1),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break}default:return}}onFocusOut(e){let{relatedTarget:t}=e;!t&&this.eGui.contains(this.gos.getActiveDomElement())||this.eGui.contains(t)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(e,t,n){if(!e&&!n||!this.menuService.isHeaderContextMenuEnabled())return;let{target:i}=e??t;(i===this.eGui||i===this.ctrlsService.getHeaderRowContainerCtrl().getViewport())&&this.menuService.showHeaderContextMenu(void 0,e,n)}mockContextMenuForIPad(e){if(!xa())return;let t=new Ma(this.eGui),n=i=>{e(void 0,i.touchStart,i.touchEvent)};this.addManagedListeners(t,{longTap:n}),this.addDestroyFunc(()=>t.destroy())}},rI=class extends L{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}wireBeans(e){this.visibleColsService=e.visibleColsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){let e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){let e=this.gos.isDomLayout("print"),t=this.visibleColsService.getBodyContainerWidth(),n=this.visibleColsService.getColsLeftWidth(),i=this.visibleColsService.getDisplayedColumnsRightWidth(),s;e?s=t+n+i:(s=t,this.addSpacer&&(this.gos.get("enableRtl")?n:i)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(s+=this.gos.getScrollbarWidth())),this.callback(s)}},Hse=class extends L{constructor(e){super(),this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}wireBeans(e){this.funcColsService=e.funcColsService}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;let t=e.dragItem.columns;t&&t.forEach(n=>{n.isPrimary()&&(n.isAnyFunctionActive()||(n.isAllowValue()?this.columnsToAggregate.push(n):n.isAllowRowGroup()?this.columnsToGroup.push(n):n.isAllowPivot()&&this.columnsToPivot.push(n)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.funcColsService.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.funcColsService.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.funcColsService.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}};function oI(e){let{isFromHeader:t,hDirection:n,xPosition:i,fromEnter:s,fakeEvent:r,pinned:o,gos:a,columnModel:l,columnMoveService:c,presentedColsService:u}=e,h=n===0,f=n===1,{allMovingColumns:p}=e;if(t){let k=[];p.forEach(b=>{let S=null,_=b.getParent();for(;_!=null&&_.getDisplayedLeafColumns().length===1;)S=_,_=_.getParent();S!=null?(!!S.getColGroupDef()?.marryChildren?S.getProvidedColumnGroup().getLeafColumns():S.getLeafColumns()).forEach(M=>{k.includes(M)||k.push(M)}):k.includes(b)||k.push(b)}),p=k}let v=p.slice();l.sortColsLikeCols(v);let y=zse({movingCols:v,draggingRight:f,xPosition:i,pinned:o,gos:a,columnModel:l,presentedColsService:u}),C=Use(v,l);if(y.length===0)return;let E=y[0],T=C!==null&&!s;if(t&&(T=C!==null),T&&!r&&(h&&E>=C||f&&E<=C))return;let R=u.getAllCols(),F=[],$=null;for(let k=0;k<y.length;k++){let b=y[k],S=c.getProposedColumnOrder(v,b);if(!c.doesOrderPassRules(S))continue;let _=S.filter(A=>R.includes(A));if($===null)$=_;else if(!Xl(_,$))break;let I=Wse(S);F.push({move:b,fragCount:I})}if(F.length!==0)return F.sort((k,b)=>k.fragCount-b.fragCount),QH(p,F[0].move,"uiColumnMoved",!1,c)}function QH(e,t,n,i,s){return s.moveColumns(e,t,n,i),i?null:{columns:e,toIndex:t}}function Use(e,t){let n=t.getCols(),i=bte(e.map(l=>n.indexOf(l))),s=i[0];return We(i)-s!==i.length-1?null:s}function Wse(e){function t(i){let s=[],r=i.getOriginalParent();for(;r!=null;)s.push(r),r=r.getOriginalParent();return s}let n=0;for(let i=0;i<e.length-1;i++){let s=t(e[i]),r=t(e[i+1]);[s,r]=s.length>r.length?[s,r]:[r,s],s.forEach(o=>{r.indexOf(o)===-1&&n++})}return n}function jse(e,t){switch(t){case"left":return e.getLeftCols();case"right":return e.getRightCols();default:return e.getCenterCols()}}function zse(e){let{movingCols:t,draggingRight:n,xPosition:i,pinned:s,gos:r,columnModel:o,presentedColsService:a}=e;if(r.get("suppressMovableColumns")||t.some(R=>R.getColDef().suppressMovable))return[];let c=jse(a,s),u=o.getCols(),h=c.filter(R=>ql(t,R)),f=c.filter(R=>!ql(t,R)),p=u.filter(R=>!ql(t,R)),v=0,y=i;if(n){let R=0;h.forEach(F=>R+=F.getActualWidth()),y-=R}if(y>0){for(let R=0;R<f.length;R++){let F=f[R];if(y-=F.getActualWidth(),y<0)break;v++}n&&v++}let C;if(v>0){let R=f[v-1];C=p.indexOf(R)+1}else C=p.indexOf(f[0]),C===-1&&(C=0);let E=[C],T=(R,F)=>R-F;if(n){let R=C+1,F=u.length-1;for(;R<=F;)E.push(R),R++;E.sort(T)}else{let R=C,F=u.length-1,$=u[R];for(;R<=F&&c.indexOf($)<0;)R++,E.push(R),$=u[R];R=C-1;let k=0;for(;R>=k;)E.push(R),R--;E.sort(T).reverse()}return E}function aI(e,t,n,i,s){let r=s.getHeaderRowContainerCtrl(t).getViewport();return n&&(e-=r.getBoundingClientRect().left),i.get("enableRtl")&&(e=r.clientWidth-e),t==null&&(e+=s.get("center").getCenterViewportScrollLeft()),e}var $se=class extends L{constructor(e){super(),this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.isCenterContainer=!q(e)}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnMoveService=e.columnMoveService,this.dragAndDropService=e.dragAndDropService,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){return this.pinned?"pinned":"move"}onDragEnter(e){let t=e.dragItem.columns;if(e.dragSource.type===0)this.setColumnsVisible(t,!0,"uiColumnDragged");else{let i=e.dragItem.visibleState,s=(t||[]).filter(r=>i[r.getId()]);this.setColumnsVisible(s,!0,"uiColumnDragged")}this.setColumnsPinned(t,this.pinned,"uiColumnDragged"),this.onDragging(e,!0,!0)}onDragLeave(){this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,n){if(e){let i=e.filter(s=>!s.getColDef().lockVisible);this.columnModel.setColsVisible(i,t,n)}}setColumnsPinned(e,t,n){if(e){let i=e.filter(s=>!s.getColDef().lockPinned);this.columnModel.setColsPinned(i,t,n)}}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}checkCenterForScrolling(e){if(this.isCenterContainer){let t=this.ctrlsService.get("center"),n=t.getCenterViewportScrollLeft(),i=n+t.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=e<n+50,this.needToMoveLeft=e>i-50):(this.needToMoveLeft=e<n+50,this.needToMoveRight=e>i-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}}onDragging(e=this.lastDraggingEvent,t=!1,n=!1,i=!1){if(i){if(this.lastMovedInfo){let{columns:c,toIndex:u}=this.lastMovedInfo;QH(c,u,"uiColumnMoved",!0,this.columnMoveService)}return}if(this.lastDraggingEvent=e,Ve(e.hDirection))return;let s=aI(e.x,this.pinned,!1,this.gos,this.ctrlsService);t||this.checkCenterForScrolling(s);let r=this.normaliseDirection(e.hDirection),o=e.dragSource.type,a=e.dragSource.getDragItem().columns?.filter(c=>c.getColDef().lockPinned?c.getPinned()==this.pinned:!0)||[],l=oI({allMovingColumns:a,isFromHeader:o===1,hDirection:r,xPosition:s,pinned:this.pinned,fromEnter:t,fakeEvent:n,gos:this.gos,columnModel:this.columnModel,columnMoveService:this.columnMoveService,presentedColsService:this.visibleColsService});l&&(this.lastMovedInfo=l)}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case 0:return 1;case 1:return 0;default:$e(`Unknown direction ${e}`)}else return e}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.dragAndDropService.setGhostIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon("move"))}moveInterval(){let e;this.intervalCount++,e=10+this.intervalCount*5,e>100&&(e=100);let t=null,n=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=n.scrollHorizontally(-e):this.needToMoveRight&&(t=n.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;let s=this.lastDraggingEvent.dragItem.columns.filter(r=>!r.getColDef().lockPinned);if(s.length>0&&(this.dragAndDropService.setGhostIcon("pinned"),this.failedMoveAttempts>7)){let r=this.needToMoveLeft?"left":"right";this.setColumnsPinned(s,r,"uiColumnDragged"),this.dragAndDropService.nudge()}}}},qse=class extends L{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady(e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.left.getContainerElement()],[e.bottomLeft.getContainerElement()],[e.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.right.getContainerElement()],[e.bottomRight.getContainerElement()],[e.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.center.getViewportElement()],[e.bottomCenter.getViewportElement()],[e.topCenter.getViewportElement()]];break}}),this.moveColumnFeature=this.createManagedBean(new $se(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new Hse(this.pinned)),this.dragAndDropService.addDropTarget(this)}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}},Kse=class extends L{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.pinnedWidthService=e.pinnedWidthService,this.ctrlsService=e.ctrlsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,n,i,s){super(),this.pinned=e,this.column=t,this.eResize=n,this.comp=i,this.ctrl=s}postConstruct(){let e=[],t,n,i=()=>{if(Et(this.eResize,t),!t)return;let o=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(e.push(o),n){let a=this.gos.get("skipHeaderOnAutoSize"),l=()=>{this.columnAutosizeService.autoSizeColumn(this.column,"uiColumnResized",a)};this.eResize.addEventListener("dblclick",l);let c=new Ma(this.eResize);c.addEventListener("doubleTap",l),e.push(()=>{this.eResize.removeEventListener("dblclick",l),c.removeEventListener("doubleTap",l),c.destroy()})}},s=()=>{e.forEach(o=>o()),e.length=0},r=()=>{let o=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(o!==t||a!==n)&&(t=o,n=a,s(),i())};r(),this.addDestroyFunc(s),this.ctrl.addRefreshFunction(r)}onResizing(e,t){let{column:n,lastResizeAmount:i,resizeStartWidth:s}=this,r=this.normaliseResizeAmount(t),o=s+r,a=[{key:n,newWidth:o}];if(this.column.getPinned()){let l=this.pinnedWidthService.getPinnedLeftWidth(),c=this.pinnedWidthService.getPinnedRightWidth(),u=fp(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(l+c+(r-i)>u)return}this.lastResizeAmount=r,this.columnSizeService.setColumnWidths(a,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e,n=this.pinned!=="left",i=this.pinned==="right";return this.gos.get("enableRtl")?n&&(t*=-1):i&&(t*=-1),t}},Qse=class extends L{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}onSpaceKeyDown(e){let t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(this.gos.getActiveDomElement())&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new qR),this.cbSelectAll.addCssClass("ag-header-select-all"),Ri(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:this.onNewColumnsLoaded.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedListeners(this.cbSelectAll,{fieldValueChanged:this.onCbSelectAll.bind(this)}),BR(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;let e=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(e);let t=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!t),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){let e=this.localeService.getLocaleTextFunc(),n=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),i=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${i} (${n})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(`${i} (${n})`),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(e){return this.gos.get("rowSelection")==="multiple"?!0:(j(`${e} is only available if using 'multiple' rowSelection.`),!1)}checkRightRowModelType(e){let t=this.rowModel.getType();return t==="clientSide"||t==="serverSide"?!0:(j(`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;let e=this.cbSelectAll.getValue(),t=this.isFilteredOnly(),n=this.isCurrentPageOnly(),i="uiSelectAll";n?i="uiSelectAllCurrentPage":t&&(i="uiSelectAllFiltered");let s={source:i,justFiltered:t,justCurrentPage:n};e?this.selectionService.selectAllRowNodes(s):this.selectionService.deselectAllRowNodes(s)}isCheckboxSelection(){let e=this.column.getColDef().headerCheckboxSelection;if(typeof e=="function"){let t=e,n=this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()});e=t(n)}return e?this.checkRightRowModelType("headerCheckboxSelection")&&this.checkSelectionType("headerCheckboxSelection"):!1}isFilteredOnly(){return!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){return!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}},Yse=class extends Gy{constructor(e,t,n){super(e,t,n),this.refreshFunctions=[],this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,t,n,i){this.comp=e,this.setGui(t),this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(i),this.addColumnHoverListener(),this.setupFilterClass(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.resizeFeature=this.createManagedBean(new Kse(this.getPinned(),this.column,n,e,this)),this.createManagedBean(new tI([this.column],t)),this.createManagedBean(new eI(this.column,t,this.beans)),this.createManagedBean(new ec(t,{shouldStopEventPropagation:s=>this.shouldStopEventPropagation(s),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(),this.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],this.refresh.bind(this)),this.addManagedListeners(this.column,{colDefChanged:this.refresh.bind(this)}),this.addManagedEventListeners({columnValueChanged:this.onColumnValueChanged.bind(this),columnRowGroupChanged:this.onColumnRowGroupChanged.bind(this),columnPivotChanged:this.onColumnPivotChanged.bind(this),headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}resizeHeader(e,t){if(!this.column.isResizable())return;let n=this.column.getActualWidth(),i=this.column.getMinWidth(),s=this.column.getMaxWidth(),r=Math.min(Math.max(n+e,i),s);this.beans.columnSizeService.setColumnWidths([{key:this.column,newWidth:r}],t,!0,"uiColumnResized")}moveHeader(e){let{eGui:t,column:n,gos:i,ctrlsService:s}=this,r=this.getPinned(),o=t.getBoundingClientRect().left,a=n.getActualWidth(),l=i.get("enableRtl"),u=aI(e===0!==l?o-20:o+a+20,r,!0,i,s);oI({allMovingColumns:[n],isFromHeader:!0,hDirection:e,xPosition:u,pinned:r,fromEnter:!1,fakeEvent:!1,gos:i,columnModel:this.beans.columnModel,columnMoveService:this.beans.columnMoveService,presentedColsService:this.beans.visibleColsService}),s.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(n,"auto")}setupUserComp(){let e=this.lookupUserCompDetails();this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){let e=this.createParams(),t=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(t,e)}createParams(){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:t=>{this.menuService.showColumnMenu({column:this.column,buttonElement:t,positionBy:"button"})},showColumnMenuAfterMouseClick:t=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:t,positionBy:"mouse"})},showFilter:t=>{this.menuService.showFilterMenu({column:this.column,buttonElement:t,containerType:"columnFilter",positionBy:"button"})},progressSort:t=>{this.beans.sortController.progressSort(this.column,!!t,"uiColumnSorted")},setSort:(t,n)=>{this.beans.sortController.setSortForColumn(this.column,t,!!n,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(t,n)=>{this.setupTooltip(t,n)}})}setupSelectAll(){this.selectAllFeature=this.createManagedBean(new Qse(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===N.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===N.ENTER&&this.onEnterKeyDown(e),e.key===N.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){let t=e.shiftKey;this.beans.sortController.progressSort(this.column,t,"uiColumnSorted")}}showMenuOnKeyPress(e,t){let n=this.comp.getUserCompInstance();!n||!(n instanceof RR)||n.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){let t=this.getRowIndex();this.focusService.setFocusedHeader(t,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));let n=this.gos.get("tooltipShowMode")==="whenTruncated",i=this.eGui,s=this.column.getColDef();!t&&n&&!s.headerComponent&&(t=()=>{let a=i.querySelector(".ag-header-cell-text");return a?a.scrollWidth>a.clientWidth:!0});let r={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>i,getLocation:()=>"header",getTooltipValue:()=>e??this.column.getColDef().headerTooltip,shouldDisplayTooltip:t},o=this.createManagedBean(new Cd(r));this.refreshFunctions.push(()=>o.refreshToolTip())}setupClassesFromColDef(){let e=()=>{let t=this.column.getColDef(),n=GH(t,this.gos,this.column,null),i=this.userHeaderClasses;this.userHeaderClasses=new Set(n),n.forEach(s=>{i.has(s)?i.delete(s):this.comp.addOrRemoveCssClass(s,!0)}),i.forEach(s=>this.comp.addOrRemoveCssClass(s,!1))};this.refreshFunctions.push(e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;let{column:t,beans:n,displayName:i,dragAndDropService:s,gos:r}=this,{columnModel:o}=n,a=!this.gos.get("suppressDragLeaveHidesColumns"),l=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:()=>this.createDragItem(t),dragItemName:i,onDragStarted:()=>{a=!r.get("suppressDragLeaveHidesColumns"),t.setMoving(!0,"uiColumnMoved")},onDragStopped:()=>t.setMoving(!1,"uiColumnMoved"),onGridEnter:c=>{if(a){let u=c?.columns?.filter(h=>!h.getColDef().lockVisible)||[];o.setColsVisible(u,!0,"uiColumnMoved")}},onGridExit:c=>{if(a){let u=c?.columns?.filter(h=>!h.getColDef().lockVisible)||[];o.setColsVisible(u,!1,"uiColumnMoved")}}};s.addDragSource(l,!0)}createDragItem(e){let t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}addRefreshFunction(e){this.refreshFunctions.push(e)}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(e=>e())}refreshHeaderComp(){let e=this.lookupUserCompDetails();(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass?this.attemptHeaderCompRefresh(e.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){let t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.columnNameService.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){let e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}onColumnRowGroupChanged(){this.checkDisplayName()}onColumnPivotChanged(){this.checkDisplayName()}onColumnValueChanged(){this.checkDisplayName()}setupWidth(){let e=()=>{let t=this.column.getActualWidth();this.comp.setWidth(`${t}px`)};this.addManagedListeners(this.column,{widthChanged:e}),e()}setupMovingCss(){let e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};this.addManagedListeners(this.column,{movingChanged:e}),e()}setupMenuClass(){let e=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};this.addManagedListeners(this.column,{menuVisibleChanged:e}),e()}setupSortableClass(){let e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};e(),this.addRefreshFunction(e),this.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(){let e=()=>{let t=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",t),this.refreshAria()};this.addManagedListeners(this.column,{filterActiveChanged:e}),e()}setupWrapTextClass(){let e=()=>{let t=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",t)};e(),this.addRefreshFunction(e)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){let{eGui:e,column:t,comp:n,beans:i}=this;if(!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),n.addOrRemoveCssClass("ag-header-span-height",!1),n.addOrRemoveCssClass("ag-header-span-total",!1);return}let{numberOfParents:s,isSpanningTotal:r}=this.column.getColumnGroupPaddingInfo();n.addOrRemoveCssClass("ag-header-span-height",s>0);let{columnModel:o}=i,a=o.getColumnHeaderRowHeight();if(s===0){n.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${a}px`);return}n.addOrRemoveCssClass("ag-header-span-total",r);let c=o.isPivotMode()?o.getPivotGroupHeaderHeight():o.getGroupHeaderHeight(),u=s*c;e.style.setProperty("top",`${-u}px`),e.style.setProperty("height",`${a+u}px`)}setupAutoHeight(e){let{columnModel:t,resizeObserverService:n}=this.beans,i=c=>{if(!this.isAlive())return;let{paddingTop:u,paddingBottom:h,borderBottomWidth:f,borderTopWidth:p}=Zl(this.getGui()),v=u+h+f+p,C=e.offsetHeight+v;if(c<5){let E=this.beans.gos.getDocument(),T=!E||!E.contains(e),R=C==0;if(T||R){window.setTimeout(()=>i(c+1),0);return}}t.setColHeaderHeight(this.column,C)},s=!1,r,o=()=>{let c=this.column.isAutoHeaderHeight();c&&!s&&a(),!c&&s&&l()},a=()=>{s=!0,i(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),r=n.observeResize(e,()=>i(0))},l=()=>{s=!1,r&&r(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),r=void 0};o(),this.addDestroyFunc(()=>l()),this.addManagedListeners(this.column,{widthChanged:()=>s&&i(0)}),this.addManagedEventListeners({sortChanged:()=>{s&&window.setTimeout(()=>i(0))}}),this.addRefreshFunction(o)}refreshAriaSort(){if(this.sortable){let e=this.localeService.getLocaleTextFunc(),t=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(lne(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){let e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){let e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){let e=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains(this.beans.gos.getActiveDomElement()))return;let e=Array.from(this.ariaDescriptionProperties.keys()).sort((t,n)=>t==="filter"?-1:n.charCodeAt(0)-t.charCodeAt(0)).map(t=>this.ariaDescriptionProperties.get(t)).join(". ");this.beans.ariaAnnouncementService.announceValue(e)}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(){let e=()=>{if(!this.gos.get("columnHoverHighlight"))return;let t=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",t)};this.addManagedEventListeners({columnHoverChanged:e}),e()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(){let e=i=>this.handleMouseOverChange(i.type==="mouseenter"),t=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column),n=i=>this.handleContextMenuMouseEvent(i,void 0,this.column);this.addManagedListeners(this.getGui(),{mouseenter:e,mouseleave:e,click:t,contextmenu:n})}handleMouseOverChange(e){this.setActiveHeader(e);let n={type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column};this.eventService.dispatchEvent(n)}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){let t=this.comp.getUserCompInstance();return t instanceof RR?t.getAnchorElementForMenu(e):this.getGui()}destroy(){super.destroy(),this.refreshFunctions=null,this.selectAllFeature=null,this.dragSourceElement=null,this.userCompDetails=null,this.userHeaderClasses=null,this.ariaDescriptionProperties=null}},Jse=class extends L{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.autoWidthCalculator=e.autoWidthCalculator,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,n,i){super(),this.eResize=t,this.comp=e,this.pinned=n,this.columnGroup=i}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}let e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gos.get("suppressAutoSize")){let t=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{let n=[];this.columnGroup.getDisplayedLeafColumns().forEach(s=>{s.getColDef().suppressAutoSize||n.push(s.getColId())}),n.length>0&&this.columnAutosizeService.autoSizeCols({colKeys:n,skipHeader:t,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(e){let t=this.getInitialValues(e);this.storeLocalValues(t),this.toggleColumnResizing(!0)}onResizing(e,t,n="uiColumnResized"){let i=this.normaliseDragChange(t),s=this.resizeStartWidth+i;this.resizeColumnsFromLocalValues(s,n,e)}getInitialValues(e){let t=this.getColumnsToResize(),n=this.getInitialSizeOfColumns(t),i=this.getSizeRatiosOfColumns(t,n),s={columnsToResize:t,resizeStartWidth:n,resizeRatios:i},r=null;if(e&&(r=this.visibleColsService.getGroupAtDirection(this.columnGroup,"After")),r){let o=r.getDisplayedLeafColumns(),a=s.groupAfterColumns=o.filter(c=>c.isResizable()),l=s.groupAfterStartWidth=this.getInitialSizeOfColumns(a);s.groupAfterRatios=this.getSizeRatiosOfColumns(a,l)}else s.groupAfterColumns=void 0,s.groupAfterStartWidth=void 0,s.groupAfterRatios=void 0;return s}storeLocalValues(e){let{columnsToResize:t,resizeStartWidth:n,resizeRatios:i,groupAfterColumns:s,groupAfterStartWidth:r,groupAfterRatios:o}=e;this.resizeCols=t,this.resizeStartWidth=n,this.resizeRatios=i,this.resizeTakeFromCols=s,this.resizeTakeFromStartWidth=r,this.resizeTakeFromRatios=o}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(e){let t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),n=this.getInitialValues();t>n.resizeStartWidth&&this.resizeColumns(n,t,e,!0)}resizeColumnsFromLocalValues(e,t,n=!0){if(!this.resizeCols||!this.resizeRatios)return;let i={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols??void 0,groupAfterStartWidth:this.resizeTakeFromStartWidth??void 0,groupAfterRatios:this.resizeTakeFromRatios??void 0};this.resizeColumns(i,e,t,n)}resizeColumns(e,t,n,i=!0){let{columnsToResize:s,resizeStartWidth:r,resizeRatios:o,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:c}=e,u=[];if(u.push({columns:s,ratios:o,width:t}),a){let h=t-r;u.push({columns:a,ratios:c,width:l-h})}this.columnSizeService.resizeColumnSets({resizeSets:u,finished:i,source:n}),i&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}getInitialSizeOfColumns(e){return e.reduce((t,n)=>t+n.getActualWidth(),0)}getSizeRatiosOfColumns(e,t){return e.map(n=>n.getActualWidth()/t)}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.clearLocalValues()}},Xse=class extends L{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();let e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){let e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",e===0)}},Zse=class extends Gy{constructor(e,t,n){super(e,t,n),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){let i=this.getGui();this.setDragSource(i)}},this.column=e}setComp(e,t,n){this.comp=e,this.setGui(t),this.displayName=this.beans.columnNameService.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.addDestroyFunc(()=>{this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature))}),this.setupUserComp(),this.addHeaderMouseListeners();let i=this.getParentRowCtrl().getPinned(),s=this.column.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new tI(s,t)),this.createManagedBean(new eI(this.column,t,this.beans)),this.createManagedBean(new Xse(e,this.column)),this.resizeFeature=this.createManagedBean(new Jse(e,n,i,this.column)),this.createManagedBean(new ec(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners()}resizeHeader(e,t){if(!this.resizeFeature)return;let n=this.resizeFeature.getInitialValues(t);this.resizeFeature.resizeColumns(n,n.resizeStartWidth+e,"uiColumnResized",!0)}moveHeader(e){let{beans:t,eGui:n,column:i,gos:s,ctrlsService:r}=this,o=s.get("enableRtl"),a=e===0,l=this.getPinned(),c=n.getBoundingClientRect(),u=c.left,h=c.width,f=aI(a!==o?u-20:u+h+20,l,!0,s,r),p=i.getGroupId(),v=this.focusService.getFocusedHeader();oI({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,hDirection:e,xPosition:f,pinned:l,fromEnter:!1,fakeEvent:!1,gos:s,columnModel:t.columnModel,columnMoveService:t.columnMoveService,presentedColsService:t.visibleColsService});let y=i.getDisplayedLeafColumns(),C=a?y[0]:We(y);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(C,"auto"),!this.isAlive()&&v&&this.restoreFocus(p,i,v)}restoreFocus(e,t,n){let i=t.getLeafColumns();if(!i.length)return;let s=i[0].getParent();if(!s)return;let r=this.findGroupWidthId(s,e);r&&this.focusService.focusHeaderPosition({headerPosition:ae(B({},n),{column:r})})}findGroupWidthId(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return null}resizeLeafColumnsToFit(e){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(){let e=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:n=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),n,"gridInitializing")},setTooltip:(n,i)=>{this.setupTooltip(n,i)}}),t=this.userComponentFactory.getHeaderGroupCompDetails(e);this.comp.setUserCompDetails(t)}addHeaderMouseListeners(){let e=i=>this.handleMouseOverChange(i.type==="mouseenter"),t=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),n=i=>this.handleContextMenuMouseEvent(i,void 0,this.column.getProvidedColumnGroup());this.addManagedListeners(this.getGui(),{mouseenter:e,mouseleave:e,click:t,contextmenu:n})}handleMouseOverChange(e){let n={type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()};this.eventService.dispatchEvent(n)}setupTooltip(e,t){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));let n=this.column.getColGroupDef(),i=this.gos.get("tooltipShowMode")==="whenTruncated",s=this.eGui;!t&&i&&!n?.headerGroupComponent&&(t=()=>{let o=s.querySelector(".ag-header-group-text");return o?o.scrollWidth>o.clientWidth:!0});let r={getColumn:()=>this.column,getGui:()=>s,getLocation:()=>"headerGroup",getTooltipValue:()=>e??(n&&n.headerTooltip),shouldDisplayTooltip:t};n&&(r.getColDef=()=>n),this.createManagedBean(new Cd(r))}setupExpandable(){let e=this.column.getProvidedColumnGroup();this.refreshExpanded();let t=this.refreshExpanded.bind(this);this.addManagedListeners(e,{expandedChanged:t,expandableChanged:t})}refreshExpanded(){let{column:e}=this;this.expandable=e.isExpandable();let t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){let e=this.column.getColGroupDef(),t=GH(e,this.gos,null,this.column);this.column.isPadding()?(t.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(i=>i.isSpanHeaderHeight())&&t.push("ag-header-span-height")):t.push("ag-header-group-cell-with-group"),t.forEach(n=>this.comp.addOrRemoveCssClass(n,!0))}setupMovingCss(){let t=this.column.getProvidedColumnGroup().getLeafColumns(),n=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());t.forEach(i=>{this.addManagedListeners(i,{movingChanged:n})}),n()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){let t=this.getRowIndex();this.beans.focusService.setFocusedHeader(t,this.column)}}handleKeyDown(e){super.handleKeyDown(e);let t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===N.ENTER){let n=this.column,i=!n.isExpanded();this.beans.columnModel.setColumnGroupOpened(n.getProvidedColumnGroup(),i,"uiColumnExpanded")}}setDragSource(e){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!e))return;let{beans:t,column:n,displayName:i,gos:s,dragAndDropService:r}=this,{columnModel:o}=t,a=n.getProvidedColumnGroup().getLeafColumns(),l=!s.get("suppressDragLeaveHidesColumns"),c=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>l?"hide":"notAllowed",dragItemName:i,getDragItem:()=>this.getDragItemForGroup(n),onDragStarted:()=>{l=!s.get("suppressDragLeaveHidesColumns"),a.forEach(u=>u.setMoving(!0,"uiColumnDragged"))},onDragStopped:()=>a.forEach(u=>u.setMoving(!1,"uiColumnDragged")),onGridEnter:u=>{if(l){let h=u?.columns?.filter(f=>!f.getColDef().lockVisible)||[];o.setColsVisible(h,!0,"uiColumnMoved")}},onGridExit:u=>{if(l){let h=u?.columns?.filter(f=>!f.getColDef().lockVisible)||[];o.setColsVisible(h,!1,"uiColumnMoved")}}};r.addDragSource(c,!0)}getDragItemForGroup(e){let t=e.getProvidedColumnGroup().getLeafColumns(),n={};t.forEach(s=>n[s.getId()]=s.isVisible());let i=[];return this.beans.visibleColsService.getAllCols().forEach(s=>{t.indexOf(s)>=0&&(i.push(s),li(t,s))}),t.forEach(s=>i.push(s)),{columns:i,visibleState:n}}isSuppressMoving(){let e=!1;return this.column.getLeafColumns().forEach(n=>{(n.getColDef().suppressMovable||n.getColDef().lockPosition)&&(e=!0)}),e||this.gos.get("suppressMovableColumns")}},ere=0,dR=class extends L{constructor(e,t,n){super(),this.instanceId=ere++,this.rowIndex=e,this.pinned=t,this.type=n;let i=n=="group"?"ag-header-row-column-group":n=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${i}`}wireBeans(e){this.beans=e}postConstruct(){this.isPrintLayout=this.gos.isDomLayout("print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}getInstanceId(){return this.instanceId}areCellsRendered(){return this.comp?this.getHeaderCellCtrls().every(e=>e.getGui()!=null):!1}setComp(e,t=!0){this.comp=e,t&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(){let e=this.onRowHeightChanged.bind(this);this.addManagedEventListeners({columnResized:this.onColumnResized.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:t=>this.onVirtualColumnsChanged(t.afterScroll),columnHeaderHeightChanged:e,gridStylesChanged:e,advancedFilterEnabledChanged:e}),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",t=>this.isEnsureDomOrder=t.currentValue),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e)}getHeaderCellCtrl(e){if(this.headerCellCtrls)return Ey(this.headerCellCtrls).find(t=>t.getColumnGroupChild()===e)}onDisplayedColumnsChanged(){this.isPrintLayout=this.gos.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){let e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){let{visibleColsService:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){let{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let{columnModel:e,filterManager:t}=this.beans,n=e.getHeaderRowCount(),i=[],s=0;t?.hasFloatingFilters()&&(n++,s=1);let r=e.getColumnGroupHeaderRowHeight(),o=e.getColumnHeaderRowHeight(),a=1+s,l=n-a;for(let h=0;h<l;h++)i.push(r);i.push(o);for(let h=0;h<s;h++)i.push(e.getFloatingFiltersHeight());let c=0;for(let h=0;h<this.rowIndex;h++)c+=i[h];let u=i[this.rowIndex];return{topOffset:c,rowHeight:u}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(e=!1){let t=this.getHeaderCtrls(),n=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,n,e)}getHeaderCtrls(){let e=this.headerCellCtrls;this.headerCellCtrls=new Map;let t=this.getColumnsInViewport();for(let i of t)this.recycleAndCreateHeaderCtrls(i,e);let n=i=>{let{focusService:s,visibleColsService:r}=this.beans;return s.isHeaderWrapperFocused(i)?r.isVisible(i.getColumnGroupChild()):!1};if(e)for(let[i,s]of e)n(s)?this.headerCellCtrls.set(i,s):this.destroyBean(s);return this.getHeaderCellCtrls()}getHeaderCellCtrls(){return Array.from(this.headerCellCtrls?.values()??[])}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls||e.isEmptyGroup())return;let n=e.getUniqueId(),i;if(t&&(i=t.get(n),t.delete(n)),i&&i.getColumnGroupChild()!=e&&(this.destroyBean(i),i=void 0),i==null)switch(this.type){case"filter":{i=this.createBean(this.beans.ctrlsFactory.getInstance("headerFilterCell",e,this.beans,this));break}case"group":i=this.createBean(new Zse(e,this.beans,this));break;default:i=this.createBean(new Yse(e,this.beans,this));break}this.headerCellCtrls.set(n,i)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let e=[],t=this.getActualDepth(),{columnViewportService:n}=this.beans;return["left",null,"right"].forEach(i=>{let s=n.getHeadersToRender(i,t);e=e.concat(s)}),e}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnViewportService.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(e){return this.headerCellCtrls?this.getHeaderCellCtrls().find(i=>i.getColumnGroupChild()==e):void 0}focusHeader(e,t){let n=this.findHeaderCellCtrl(e);return n?n.focus(t):!1}destroy(){this.headerCellCtrls&&this.headerCellCtrls.forEach(e=>{this.destroyBean(e)}),this.headerCellCtrls=void 0,super.destroy()}},tre=class extends L{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}wireBeans(e){this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.focusService=e.focusService,this.filterManager=e.filterManager}setComp(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport);let n=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:n,advancedFilterEnabledChanged:n}),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()}getAllCtrls(){let e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){let t=new md,n=this.focusService.getFocusHeaderToUseAfterRefresh(),i=()=>{let a=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let l=0;l<a;l++){let c=this.createBean(new dR(t.next(),this.pinned,"group"));this.groupsRowCtrls.push(c)}},s=()=>{let a=t.next(),l=!this.hidden&&(this.columnsRowCtrl==null||!e||this.columnsRowCtrl.getRowIndex()!==a);(l||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),l&&(this.columnsRowCtrl=this.createBean(new dR(a,this.pinned,"column")))},r=()=>{this.includeFloatingFilter=!!this.filterManager?.hasFloatingFilters()&&!this.hidden;let a=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){a();return}let l=t.next();if(this.filtersRowCtrl){let c=this.filtersRowCtrl.getRowIndex()!==l;(!e||c)&&a()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new dR(l,this.pinned,"filter")))};i(),s(),r();let o=this.getAllCtrls();this.comp.setCtrls(o),this.restoreFocusOnHeader(n)}getHeaderCtrlForColumn(e){if(Fa(e))return this.columnsRowCtrl?this.columnsRowCtrl.getHeaderCellCtrl(e):void 0;if(this.groupsRowCtrls.length!==0)for(let t=0;t<this.groupsRowCtrls.length;t++){let n=this.groupsRowCtrls[t].getHeaderCellCtrl(e);if(n)return n}}getHtmlElementForColumnHeader(e){let t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null}getRowType(e){let n=this.getAllCtrls()[e];return n?n.getType():void 0}focusHeader(e,t,n){let s=this.getAllCtrls()[e];return s?s.focusHeader(t,n):!1}getViewport(){return this.eViewport}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}setupDragAndDrop(e){let t=new qse(this.pinned,e);this.createManagedBean(t)}restoreFocusOnHeader(e){if(!e)return;let{column:t}=e;t.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:e})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){let e=this.filterManager?.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new rI(e=>this.comp.setCenterWidth(`${e}px`),!0))}setupPinnedWidth(){if(this.pinned==null)return;let e=this.pinned==="left",t=this.pinned==="right";this.hidden=!0;let n=()=>{let i=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(i==null)return;let s=i==0,r=this.hidden!==s,o=this.gos.get("enableRtl"),a=this.gos.getScrollbarWidth(),c=this.scrollVisibleService.isVerticalScrollShowing()&&(o&&e||!o&&t)?i+a:i;this.comp.setPinnedContainerWidth(`${c}px`),this.comp.setDisplayed(!s),r&&(this.hidden=s,this.refresh())};this.addManagedEventListeners({leftPinnedWidthChanged:n,rightPinnedWidthChanged:n,scrollVisibilityChanged:n,scrollbarWidthChanged:n})}},nre='<div class="ag-pinned-left-header" role="rowgroup"></div>',ire='<div class="ag-pinned-right-header" role="rowgroup"></div>',sre=`<div class="ag-header-viewport" role="presentation">
        <div class="ag-header-container" data-ref="eCenterContainer" role="rowgroup"></div>
    </div>`,hR=class extends Ke{constructor(e){super(),this.eCenterContainer=ie,this.headerRowComps={},this.rowCompsList=[],this.pinned=e}postConstruct(){this.selectAndSetTemplate();let e={setDisplayed:n=>this.setDisplayed(n),setCtrls:n=>this.setCtrls(n),setCenterWidth:n=>this.eCenterContainer.style.width=n,setViewportScrollLeft:n=>this.getGui().scrollLeft=n,setPinnedContainerWidth:n=>{let i=this.getGui();i.style.width=n,i.style.maxWidth=n,i.style.minWidth=n}};this.createManagedBean(new tre(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){let e=this.pinned=="left",t=this.pinned=="right",n=e?nre:t?ire:sre;this.setTemplate(n),this.eRowContainer=this.eCenterContainer!==ie?this.eCenterContainer:this.getGui()}destroy(){this.setCtrls([]),super.destroy()}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){let t=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let n,i=s=>{let r=s.getGui();r.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(r),n&&lH(this.eRowContainer,r,n),n=r};e.forEach(s=>{let r=s.getInstanceId(),o=t[r];delete t[r];let a=o||this.createBean(new Vse(s));this.headerRowComps[r]=a,this.rowCompsList.push(a),i(a)}),Pa(t).forEach(s=>this.destroyRowComp(s))}},rre=class extends Ke{constructor(){super('<div class="ag-header" role="presentation"/>')}postConstruct(){let e={addOrRemoveCssClass:(i,s)=>this.addOrRemoveCssClass(i,s),setHeightAndMinHeight:i=>{this.getGui().style.height=i,this.getGui().style.minHeight=i}};this.createManagedBean(new Gse).setComp(e,this.getGui(),this.getFocusableElement());let n=i=>{this.createManagedBean(i),this.appendChild(i)};n(new hR("left")),n(new hR(null)),n(new hR("right"))}},ore={selector:"AG-HEADER-ROOT",component:rre};var lI=class extends L{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){let e=this.getDomLayout(),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},n=t.autoHeight?"ag-layout-auto-height":t.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(n,t)}getDomLayout(){let e=this.gos.get("domLayout")??"normal";return["normal","print","autoHeight"].indexOf(e)===-1?(j(`${e} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):e}},are=class extends Ke{constructor(){super(`
            <div class="ag-overlay" role="presentation">
                <div class="ag-overlay-panel" role="presentation">
                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>
                </div>
            </div>`),this.eOverlayWrapper=ie,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeOverlayWrapperCssClass=null}wireBeans(e){this.overlayService=e.overlayService}updateLayoutClasses(e,t){let n=this.eOverlayWrapper.classList;n.toggle("ag-layout-auto-height",t.autoHeight),n.toggle("ag-layout-normal",t.normal),n.toggle("ag-layout-print",t.print)}postConstruct(){this.createManagedBean(new lI(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.registerOverlayWrapperComp(this)}setWrapperTypeClass(e){let t=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&t.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,t.toggle(e,!0)}showOverlay(e,t,n){this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.activePromise=e,e?.then(i=>{if(this.activePromise!==e){this.activeOverlay!==i&&(this.destroyBean(i),i=null);return}if(this.activePromise=null,!!i&&this.activeOverlay!=i&&(this.eOverlayWrapper.appendChild(i.getGui()),this.activeOverlay=i,n)){let s=i;this.updateListenerDestroyFunc=this.addManagedPropertyListener(n,({currentValue:r})=>{s.refresh?.(this.gos.addGridCommonParams(B({},r??{})))})}}),this.setDisplayed(!0,{skipAriaHidden:!0})}destroyActiveOverlay(){this.activePromise=null;let e=this.activeOverlay;if(!e)return;this.activeOverlay=null;let t=this.updateListenerDestroyFunc;t&&(t(),this.updateListenerDestroyFunc=null),this.destroyBean(e),zn(this.eOverlayWrapper)}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.destroyActiveOverlay(),super.destroy()}},lre={selector:"AG-OVERLAY-WRAPPER",component:are},YH=class extends Ke{constructor(e,t){super(),this.direction=t,this.eViewport=ie,this.eContainer=ie,this.hideTimeout=null,this.setTemplate(e)}wireBeans(e){this.animationFrameService=e.animationFrameService}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",tH()||xa())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=iH(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){let e=this.getGui(),t=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),n=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:n,touchend:n})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)}})}attemptSettingScrollPosition(e){let t=this.getViewport();Vte(()=>Js(t),()=>this.setScrollPosition(e),100)}getViewport(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedElementListeners(this.getViewport(),{scroll:e})}},cre=class extends YH{constructor(){super(`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>
        </div>`,"horizontal"),this.eLeftSpacer=ie,this.eRightSpacer=ie}wireBeans(e){super.wireBeans(e),this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){super.postConstruct();let e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new rI(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;let e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){let e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.visibleColsService.getDisplayedColumnsRightWidth(),n=!this.enableRtl&&e,i=this.gos.getScrollbarWidth();n&&(t+=i),Ys(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=i);let s=this.visibleColsService.getColsLeftWidth();this.enableRtl&&e&&(s+=i),Ys(this.eLeftSpacer,s),this.eLeftSpacer.classList.toggle("ag-scroller-corner",s<=i)}setScrollVisible(){let e=this.scrollVisibleService.isHorizontalScrollShowing(),t=this.invisibleScrollbar,n=this.gos.get("suppressHorizontalScroll"),i=e&&this.gos.getScrollbarWidth()||0,r=n?0:i===0&&t?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),sp(this.getGui(),r),sp(this.eViewport,r),sp(this.eContainer,r),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return Oy(this.getViewport(),this.enableRtl)}setScrollPosition(e){Js(this.getViewport())||this.attemptSettingScrollPosition(e),Ny(this.getViewport(),e,this.enableRtl)}},ure={selector:"AG-FAKE-HORIZONTAL-SCROLL",component:cre},JH=class extends L{wireBeans(e){this.maxDivHeightScaler=e.rowContainerHeightService}constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this)})}onHeightChanged(){let e=this.maxDivHeightScaler.getUiContainerHeight(),t=e!=null?`${e}px`:"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)}},dre=class extends YH{wireBeans(e){super.wireBeans(e),this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}constructor(){super(`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>
            </div>
        </div>`,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new JH(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this)})}setScrollVisible(){let e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.invisibleScrollbar,n=e&&this.gos.getScrollbarWidth()||0,i=n===0&&t?16:n;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),Ys(this.getGui(),i),Ys(this.eViewport,i),Ys(this.eContainer,i),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){let{ctrlsService:e}=this,n=e.getGridBodyCtrl().getBodyViewportElement(),i=this.getScrollPosition(),s=n.scrollTop;i!=s&&this.setScrollPosition(s,!0)}getScrollPosition(){return this.getViewport().scrollTop}setScrollPosition(e,t){!t&&!Js(this.getViewport())&&this.attemptSettingScrollPosition(e),this.getViewport().scrollTop=e}},hre={selector:"AG-FAKE-VERTICAL-SCROLL",component:dre},fre=class extends L{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=ci(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=ci(()=>this.lastScrollSource[0]=null,500)}wireBeans(e){this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.rowModel=e.rowModel,this.heightScaler=e.rowContainerHeightService,this.rowRenderer=e.rowRenderer,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)}),this.ctrlsService.whenReady(e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){let{fakeHScrollComp:e,fakeVScrollComp:t}=this.ctrlsService.getParams();this.addManagedElementListeners(this.centerRowsCtrl.getViewportElement(),{scroll:this.onHScroll.bind(this)}),e.onScrollCallback(this.onFakeHScroll.bind(this));let n=this.gos.get("debounceVerticalScrollbar"),i=n?ci(this.onVScroll.bind(this),100):this.onVScroll.bind(this),s=n?ci(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedElementListeners(this.eBodyViewport,{scroll:i}),t.onScrollCallback(s)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){if(this.centerRowsCtrl==null)return;e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft());let n=this.enableRtl?e:-e,{topCenter:i,stickyTopCenter:s,stickyBottomCenter:r,centerHeader:o,bottomCenter:a,fakeHScrollComp:l}=this.ctrlsService.getParams();o.setHorizontalScroll(-n),a.setContainerTranslateX(n),i.setContainerTranslateX(n),s.setContainerTranslateX(n),r.setContainerTranslateX(n);let c=this.centerRowsCtrl.getViewportElement(),u=this.lastScrollSource[1]===0;e=Math.abs(e),u?l.setScrollPosition(e):Ny(c,e,this.enableRtl)}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(this.lastScrollSource[t]=e,!0):this.lastScrollSource[t]===e}onFakeHScroll(){this.isControllingScroll(1,1)&&this.onHScrollCommon(1)}onHScroll(){this.isControllingScroll(0,1)&&this.onHScrollCommon(0)}onHScrollCommon(e){let t=this.centerRowsCtrl.getViewportElement(),{scrollLeft:n}=t;if(this.shouldBlockScrollUpdate(1,n,!0))return;let i;e===0?i=Oy(t,this.enableRtl):i=this.ctrlsService.get("fakeHScrollComp").getScrollPosition(),this.doHorizontalScroll(Math.round(i)),this.resetLastHScrollDebounced()}onFakeVScroll(){this.isControllingScroll(1,0)&&this.onVScrollCommon(1)}onVScroll(){this.isControllingScroll(0,0)&&this.onVScrollCommon(0)}onVScrollCommon(e){let t;e===0?t=this.eBodyViewport.scrollTop:t=this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),!this.shouldBlockScrollUpdate(0,t,!0)&&(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,e===0?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){let t=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){let t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{let n=ae(B({},t),{type:"bodyScrollEnd"});this.eventService.dispatchEvent(n)},100)}shouldBlockScrollUpdate(e,t,n=!1){return n&&!xa()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){let t=WR(this.eBodyViewport),{scrollHeight:n}=this.eBodyViewport;return e<0||e+t>n}shouldBlockHorizontalScroll(e){let t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:n}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl&&xy()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>n}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(0)}scrollGridIfNeeded(){let e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e,t=!1){let i=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl&&xy()?e=e>0?0:i:e=Math.min(Math.max(e,0),i)),Ny(this.centerRowsCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){let t=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){let n=this.rowModel.getRowCount(),i=-1;for(let s=0;s<n;s++){let r=this.rowModel.getRow(s);if(typeof e=="function"){if(r&&e(r)){i=s;break}}else if(e===r||e===r.data){i=s;break}}i>=0&&this.ensureIndexVisible(i,t)}ensureIndexVisible(e,t){if(this.gos.isDomLayout("print"))return;let n=this.rowModel.getRowCount();if(typeof e!="number"||e<0||e>=n){j("Invalid row index for ensureIndexVisible: "+e);return}let s=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{s||this.paginationService?.goToPageWithIndex(e);let r=this.ctrlsService.getGridBodyCtrl(),o=r.getStickyTopHeight(),a=r.getStickyBottomHeight(),l=this.rowModel.getRow(e),c;do{let u=l.rowTop,h=l.rowHeight,f=this.pageBoundsService.getPixelOffset(),p=l.rowTop-f,v=p+l.rowHeight,y=this.getVScrollPosition(),C=this.heightScaler.getDivStretchOffset(),E=y.top+C,T=y.bottom+C,R=T-E,F=this.heightScaler.getScrollPositionForPixel(p),$=this.heightScaler.getScrollPositionForPixel(v-R),k=Math.min((F+$)/2,p),b=E+o>p,S=T-a<v,_=null;t==="top"?_=F:t==="bottom"?_=$:t==="middle"?_=k:b?_=F-o:S&&(_=$+a),_!==null&&(this.setVerticalScrollPosition(_),this.rowRenderer.redraw({afterScroll:!0})),c=u!==l.rowTop||h!==l.rowHeight}while(c);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(e,t="auto"){let n=this.columnModel.getCol(e);if(!n||n.isPinned()||!this.visibleColsService.isColDisplayed(n))return;let i=this.getPositionedHorizontalScroll(n,t);this.getFrameworkOverrides().wrapIncoming(()=>{i!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(i),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(e,t){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(t),this.setVerticalScrollPosition(e),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(e,t){let{columnBeforeStart:n,columnAfterEnd:i}=this.isColumnOutsideViewport(e),s=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),r=this.centerRowsCtrl.getCenterWidth(),o=this.enableRtl,a=(o?n:i)||s,l=o?i:n;t!=="auto"&&(a=t==="start",l=t==="end");let c=t==="middle";if(a||l||c){let{colLeft:u,colMiddle:h,colRight:f}=this.getColumnBounds(e);return c?h-r/2:a?o?f:u:o?u-r:f-r}return null}isColumnOutsideViewport(e){let{start:t,end:n}=this.getViewportBounds(),{colLeft:i,colRight:s}=this.getColumnBounds(e),r=this.enableRtl,o=r?t>s:n<s,a=r?n<i:t>i;return{columnBeforeStart:o,columnAfterEnd:a}}getColumnBounds(e){let t=this.enableRtl,n=this.visibleColsService.getBodyContainerWidth(),i=e.getActualWidth(),s=e.getLeft(),r=t?-1:1,o=t?n-s:s,a=o+i*r,l=o+i/2*r;return{colLeft:o,colMiddle:l,colRight:a}}getViewportBounds(){let e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),n=t,i=e+t;return{start:n,end:i,width:e}}},XH="ag-force-vertical-scroll",pre="ag-selectable",gre="ag-column-moving",mre=class extends L{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.menuService=e.menuService,this.headerNavigationService=e.headerNavigationService,this.dragAndDropService=e.dragAndDropService,this.pinnedRowModel=e.pinnedRowModel,this.rowRenderer=e.rowRenderer,this.popupService=e.popupService,this.mouseEventService=e.mouseEventService,this.rowModel=e.rowModel,this.filterManager=e.filterManager,this.environment=e.environment}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,t,n,i,s,r,o){this.comp=e,this.eGridBody=t,this.eBodyViewport=n,this.eTop=i,this.eBottom=s,this.eStickyTop=r,this.eStickyBottom=o,this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",a=>this.setCellTextSelection(a.currentValue)),this.createManagedBean(new lI(this.comp)),this.bodyScrollFeature=this.createManagedBean(new fre(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([i,n,s,r,o]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.filterManager?.setupAdvancedFilterHeaderComp(i),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),pinnedRowDataChanged:this.setFloatingHeights.bind(this),pinnedHeightChanged:this.setFloatingHeights.bind(this),headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}addFocusListeners(e){e.forEach(t=>{this.addManagedElementListeners(t,{focusin:n=>{let{target:i}=n,s=hd(i,"ag-root",t);t.classList.toggle("ag-has-focus",!s)},focusout:n=>{let{target:i,relatedTarget:s}=n,r=t.contains(s),o=hd(s,"ag-root",t);hd(i,"ag-root",t)||(!r||o)&&t.classList.remove("ag-has-focus")}})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(gre,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(pre,e)}onScrollVisibilityChanged(){let e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyWidth(e),this.setStickyBottomOffsetBottom();let t=e&&this.gos.getScrollbarWidth()||0,n=iH()?16:0,i=`calc(100% + ${t+n}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(i))}onGridColumnsChanged(){let e=this.columnModel.getCols();this.comp.setColumnCount(e.length)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;let e=n=>{let i=n.relatedTarget;if(TR(i)===null){this.rowRenderer.stopEditing();return}let s=t.some(r=>r.contains(i))&&this.mouseEventService.isElementInThisGrid(i);if(!s){let r=this.popupService;s=r.getActivePopups().some(o=>o.contains(i))||r.isElementWithinCustomPopup(i)}s||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];t.forEach(n=>this.addManagedElementListeners(n,{focusout:e}))}updateRowCount(){let e=this.headerNavigationService.getHeaderRowCount()+(this.filterManager?.getHeaderRowCount()??0),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,n=t===-1?-1:e+t;this.comp.setRowCount(n)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){let t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){let e=this.gos.get("alwaysShowVerticalScroll"),t=e?XH:null,n=this.gos.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||n&&Mne(this.eBodyViewport)}setupRowAnimationCssClass(){let e=this.environment.hasMeasuredSizes(),t=()=>{let n=e&&this.gos.isAnimateRows()&&!this.rowContainerHeightService.isStretching(),i=n?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(i,n)};t(),this.addManagedEventListeners({heightScaleChanged:t}),this.addManagedPropertyListener("animateRows",t),this.addManagedEventListeners({gridStylesChanged:()=>{!e&&this.environment.hasMeasuredSizes()&&(e=!0,t())}})}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){let e=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:e}),this.mockContextMenuForIPad(e),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){let e=this.eBodyViewport.querySelector(".ag-full-width-container"),t=this.eBodyViewport.querySelector(".ag-center-cols-viewport");e&&t&&this.addManagedElementListeners(e,{wheel:n=>this.onFullWidthContainerWheel(n,t)})}onFullWidthContainerWheel(e,t){!e.deltaX||Math.abs(e.deltaY)>Math.abs(e.deltaX)||!this.mouseEventService.isEventFromThisGrid(e)||(e.preventDefault(),t.scrollBy({left:e.deltaX}))}onBodyViewportContextMenu(e,t,n){if(!e&&!n)return;this.gos.get("preventDefaultOnContextMenu")&&(e||n).preventDefault();let{target:i}=e||t;(i===this.eBodyViewport||i===this.ctrlsService.get("center").getViewportElement())&&this.menuService.showContextMenu({mouseEvent:e,touchEvent:n,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(e){if(!xa())return;let t=new Ma(this.eBodyViewport),n=i=>{e(void 0,i.touchStart,i.touchEvent)};this.addManagedListeners(t,{longTap:n}),this.addDestroyFunc(()=>t.destroy())}onBodyViewportWheel(e){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}onStickyWheel(e){e.preventDefault(),e.offsetY&&this.scrollVertically(e.deltaY)}getGui(){return this.eGridBody}scrollVertically(e){let t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new Eie(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)}getRowDragFeature(){return this.rowDragFeature}setFloatingHeights(){let{pinnedRowModel:e}=this,t=e.getPinnedTopTotalHeight(),n=e.getPinnedBottomTotalHeight();this.comp.setTopHeight(t),this.comp.setBottomHeight(n),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(n?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{let t=this.gos.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){let t=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+(this.filterManager?.getHeaderHeight()??0),n=this.pinnedRowModel.getPinnedTopTotalHeight(),i=0;t>0&&(i+=t),n>0&&(i+=n),i>0&&(i+=1),this.comp.setStickyTopTop(`${i}px`)}setStickyBottomOffsetBottom(){let e=this.pinnedRowModel.getPinnedBottomTotalHeight(),n=this.scrollVisibleService.isHorizontalScrollShowing()&&this.gos.getScrollbarWidth()||0,i=e+n;this.comp.setStickyBottomBottom(`${i}px`)}sizeColumnsToFit(e,t){let i=this.isVerticalScrollShowing()?this.gos.getScrollbarWidth():0,r=fp(this.eGridBody)-i;if(r>0){this.columnSizeService.sizeColumnsToFit(r,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFit(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFit(e,-1)},500):j("tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}},vre=class extends Ke{constructor(e,t,n,i,s){super(),this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.column=t.getColumn(),this.rowNode=t.getRowNode(),this.rowCtrl=t.getRowCtrl(),this.eRow=i,this.cellCtrl=t;let r=document.createElement("div");r.setAttribute("comp-id",`${this.getCompId()}`),this.setTemplateFromElement(r);let o=this.getGui();this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1);let a=(u,h)=>{h!=null&&h!=""?o.setAttribute(u,h):o.removeAttribute(u)};Ri(o,t.getCellAriaRole()),a("col-id",t.getColumnIdSanitised());let l=t.getTabIndex();l!==void 0&&a("tabindex",l.toString());let c={addOrRemoveCssClass:(u,h)=>this.addOrRemoveCssClass(u,h),setUserStyles:u=>uH(o,u),getFocusableElement:()=>this.getFocusableElement(),setIncludeSelection:u=>this.includeSelection=u,setIncludeRowDrag:u=>this.includeRowDrag=u,setIncludeDndSource:u=>this.includeDndSource=u,setRenderDetails:(u,h,f)=>this.setRenderDetails(u,h,f),setEditDetails:(u,h,f)=>this.setEditDetails(u,h,f),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};t.setComp(c,this.getGui(),this.eCellWrapper,n,s)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(e,t,n){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;let s=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!(n||s)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(t))}setEditDetails(e,t,n){e?this.createCellEditorInstance(e,t,n):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(e){let t=this.includeRowDrag||this.includeDndSource||this.includeSelection,n=t||this.forceWrapper,i=n&&this.eCellWrapper==null;if(i){let c=document.createElement("div");c.setAttribute("role","presentation"),c.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=c,this.getGui().appendChild(this.eCellWrapper)}let s=!n&&this.eCellWrapper!=null;s&&(ws(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!n);let r=!e&&n,o=r&&this.eCellValue==null;if(o){let c=document.createElement("span");c.setAttribute("role","presentation"),c.setAttribute("class","ag-cell-value"),this.eCellValue=c,this.eCellWrapper.appendChild(this.eCellValue)}let a=!r&&this.eCellValue!=null;a&&(ws(this.eCellValue),this.eCellValue=void 0);let l=i||s||o||a;return l&&this.removeControls(),e||t&&this.addControls(),l}addControls(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(e,t,n){let i=this.editorVersion,s=e.newAgStackInstance();if(s==null)return;let{params:r}=e;s.then(a=>this.afterCellEditorCreated(i,a,r,t,n)),Ve(this.cellEditor)&&r.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){let t=this.getParentOfValue();zn(t);let n=e!=null?kr(e,!0):null;n!=null&&(t.textContent=n)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){let{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),ws(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){let{context:e}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),ws(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==e.componentClass)return!1;let t=this.cellRenderer.refresh(e.params);return t===!0||t===void 0}createCellRendererInstance(e){let n=!this.beans.gos.get("suppressAnimationFrame"),i=this.rendererVersion,{componentClass:s}=e,r=()=>{if(this.rendererVersion!==i||!this.isAlive())return;let a=e.newAgStackInstance(),l=this.afterCellRendererCreated.bind(this,i,s);a&&a.then(l)};n&&this.firstRender?this.beans.animationFrameService.createTask(r,this.rowNode.rowIndex,"createTasksP2"):r()}getCtrl(){return this.cellCtrl}getRowCtrl(){return this.rowCtrl}getCellRenderer(){return this.cellRenderer}getCellEditor(){return this.cellEditor}afterCellRendererCreated(e,t,n){if(!this.isAlive()||e!==this.rendererVersion){this.beans.context.destroyBean(n);return}if(this.cellRenderer=n,this.cellRendererClass=t,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){let s=this.getParentOfValue();zn(s),s.appendChild(this.cellRendererGui)}}afterCellEditorCreated(e,t,n,i,s){if(e!==this.editorVersion){this.beans.context.destroyBean(t);return}if(t.isCancelBeforeStart&&t.isCancelBeforeStart()){this.beans.context.destroyBean(t),this.cellCtrl.stopEditing(!0);return}if(!t.getGui){j(`cellEditor for column ${this.column.getId()} is missing getGui() method`),this.beans.context.destroyBean(t);return}this.cellEditor=t,this.cellEditorGui=t.getGui();let a=i||t.isPopup!==void 0&&t.isPopup();a?this.addPopupCellEditor(n,s):this.addInCellEditor(),this.refreshEditStyles(!0,a),t.afterGuiAttached&&t.afterGuiAttached()}refreshEditStyles(e,t){this.addOrRemoveCssClass("ag-cell-inline-editing",e&&!t),this.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!t),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!t),this.rowCtrl?.setInlineEditingCss(e)}addInCellEditor(){let e=this.getGui();e.contains(this.beans.gos.getActiveDomElement())&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(e,t){this.beans.gos.get("editType")==="fullRow"&&j("popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");let n=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(this.beans.editService.createPopupEditorWrapper(e));let i=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&i.appendChild(this.cellEditorGui);let s=this.beans.popupService,r=this.beans.gos.get("stopEditingWhenCellsLoseFocus"),o=t??(n.getPopupPosition?n.getPopupPosition():"over"),a=this.beans.gos.get("enableRtl"),l={ePopup:i,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:o,alignSide:a?"right":"left",keepWithinBounds:!0},c=s.positionPopupByComponent.bind(s,l),u=this.beans.localeService.getLocaleTextFunc(),h=s.addPopup({modal:r,eChild:i,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:c,ariaLabel:u("ariaLabelCellEditor","Cell Editor")});h&&(this.hideEditorPopup=h.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){let e=this.getGui();e.contains(this.beans.gos.getActiveDomElement())&&DR()&&e.focus({preventScroll:!0}),zn(this.getParentOfValue())}},Cre=class extends Ke{constructor(e,t,n){super(),this.cellComps={},this.beans=t,this.rowCtrl=e;let i=document.createElement("div");i.setAttribute("comp-id",`${this.getCompId()}`),i.setAttribute("style",this.getInitialStyle(n)),this.setTemplateFromElement(i);let s=this.getGui(),r=s.style;this.domOrder=this.rowCtrl.getDomOrder(),Ri(s,"row");let o=this.rowCtrl.getTabIndex();o!=null&&s.setAttribute("tabindex",o.toString());let a={setDomOrder:l=>this.domOrder=l,setCellCtrls:l=>this.setCellCtrls(l),showFullWidth:l=>this.showFullWidth(l),getFullWidthCellRenderer:()=>this.getFullWidthCellRenderer(),addOrRemoveCssClass:(l,c)=>this.addOrRemoveCssClass(l,c),setUserStyles:l=>uH(s,l),setTop:l=>r.top=l,setTransform:l=>r.transform=l,setRowIndex:l=>s.setAttribute("row-index",l),setRowId:l=>s.setAttribute("row-id",l),setRowBusinessKey:l=>s.setAttribute("row-business-key",l),refreshFullWidth:l=>this.refreshFullWidth(l)};e.setComp(a,this.getGui(),n),this.addDestroyFunc(()=>{e.unsetComp(n)})}getInitialStyle(e){let t=this.rowCtrl.getInitialTransform(e);return t?`transform: ${t}`:`top: ${this.rowCtrl.getInitialRowTop(e)}`}showFullWidth(e){let t=i=>{if(this.isAlive()){let s=i.getGui();this.getGui().appendChild(s),this.rowCtrl.setupDetailRowAutoHeight(s),this.setFullWidthRowComp(i)}else this.beans.context.destroyBean(i)},n=e.newAgStackInstance();n&&n.then(t)}setCellCtrls(e){let t=Object.assign({},this.cellComps);e.forEach(i=>{let s=i.getInstanceId();this.cellComps[s]==null?this.newCellComp(i):t[s]=null});let n=Pa(t).filter(i=>i!=null);this.destroyCells(n),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;let t=[];e.forEach(n=>{let i=this.cellComps[n.getInstanceId()];i&&t.push(i.getGui())}),cH(this.getGui(),t)}newCellComp(e){let t=new vre(this.beans,e,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[e.getInstanceId()]=t,this.getGui().appendChild(t.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){let e=Pa(this.cellComps).filter(t=>t!=null);this.destroyCells(e)}setFullWidthRowComp(e){this.fullWidthCellRenderer&&$e("should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=e,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}getFullWidthCellRenderer(){return this.fullWidthCellRenderer}destroyCells(e){e.forEach(t=>{if(!t)return;let n=t.getCtrl().getInstanceId();this.cellComps[n]===t&&(t.detach(),t.destroy(),this.cellComps[n]=null)})}refreshFullWidth(e){let{fullWidthCellRenderer:t}=this;if(!t||!t.refresh)return!1;let n=e();return t.refresh(n)}},yre=class extends L{wireBeans(e){this.ctrlsService=e.ctrlsService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.columnViewportService=e.columnViewportService}constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){let e=()=>this.onCenterViewportResized();this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();let e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnSizeService.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){let e=this.gridBodyCtrl.getBodyViewportElement(),t=fp(e);if(t<=50)return;let n=this.getPinnedColumnsOverflowingViewport(t-50),i=this.gos.getCallback("processUnpinnedColumns");n.length&&(i&&(n=i({columns:n,viewportWidth:t})),this.columnModel.setColsPinned(n,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(e){let t=this.pinnedWidthService.getPinnedRightWidth(),n=this.pinnedWidthService.getPinnedLeftWidth(),i=t+n;if(i<e)return[];let s=[...this.visibleColsService.getLeftCols()],r=[...this.visibleColsService.getRightCols()],o=0,a=0,l=0,c=[],u=i-l-e;for(;(a<s.length||o<r.length)&&u>0;){if(o<r.length){let h=r[o++];u-=h.getActualWidth(),c.push(h)}if(a<s.length&&u>0){let h=s[a++];u-=h.getActualWidth(),c.push(h)}}return c}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){let e=this.gridBodyCtrl.getBodyViewportElement(),t=WR(e);if(this.bodyHeight!==t){this.bodyHeight=t;let n={type:"bodyHeightChanged"};this.eventService.dispatchEvent(n)}}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){let e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){let e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnViewportService.setScrollPosition(e,t)}},wre=class extends L{wireBeans(e){this.dragService=e.dragService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListener("enableRangeSelection",t=>{if(t.currentValue){this.enableFeature();return}this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),this.gos.get("enableRangeSelection")&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}},Sre=class extends Ke{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[KR]),this.eCheckbox=ie}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){let e=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),n=GR(e,t),[i,s]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],r=e(i,s);this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel(`${r} (${n})`)}onClicked(e,t,n){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:n.shiftKey,groupSelectsFiltered:t,event:n,source:"checkboxSelected"})}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:i=>fd(i),click:i=>{fd(i);let s=this.gos.get("groupSelectsFiltered"),r=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(r,s)?this.onClicked(!0,s,i||{})===0&&this.onClicked(!1,s,i):r?this.onClicked(!1,s,i):this.onClicked(!0,s,i||{})}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.gos.get("isRowSelectable")||typeof this.getIsVisible()=="function"){let i=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:i}),this.addManagedListeners(this.rowNode,{dataChanged:i,cellChanged:i}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,t){return t&&(this.eCheckbox.getPreviousValue()===void 0||e===void 0)&&this.gos.isRowModelType("clientSide")}showOrHideSelect(){let e=this.rowNode.selectable,t=this.getIsVisible();if(e)if(typeof t=="function"){let i=this.overrides?.callbackParams;if(!this.column)e=t(ae(B({},i),{node:this.rowNode,data:this.rowNode.data}));else{let s=this.column.createColumnFunctionCallbackParams(this.rowNode);e=t(B(B({},i),s))}}else e=t??!1;if(this.column?.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!e),this.setVisible(!0),this.setDisplayed(!0);return}if(this.overrides?.removeHidden){this.setDisplayed(e);return}this.setVisible(e)}getIsVisible(){return this.overrides?this.overrides.isVisible:this.column?.getColDef()?.checkboxSelection}},_re=class extends Ke{constructor(e,t,n){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=n}postConstruct(){this.getGui().appendChild(Ji("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){let t=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);let n=()=>{try{let i=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",i),e.dataTransfer.setData("text/plain",i)}catch{}};if(t){let i=this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:e});t(i)}else n()}checkVisibility(){let e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}},bre=class extends L{constructor(e,t){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){let e=this.column.getColDef(),{cellClassRules:t}=e,n=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(t===this.cellClassRules?void 0:this.cellClassRules,t,n,i=>this.cellComp.addOrRemoveCssClass(i,!0),i=>this.cellComp.addOrRemoveCssClass(i,!1)),this.cellClassRules=t}applyUserStyles(){let e=this.column.getColDef();if(!e.cellStyle)return;let t;if(typeof e.cellStyle=="function"){let n=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),i=e.cellStyle;t=i(n)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){let e=this.column.getColDef(),t=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(n=>this.cellComp.addOrRemoveCssClass(n,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,t),this.staticClasses.length&&this.staticClasses.forEach(n=>this.cellComp.addOrRemoveCssClass(n,!0))}destroy(){super.destroy()}},Ere=class extends L{constructor(e,t,n,i,s){super(),this.cellCtrl=e,this.beans=t,this.rowNode=i,this.rowCtrl=s}setComp(e){this.eGui=e}onKeyDown(e){let t=e.key;switch(t){case N.ENTER:this.onEnterKeyDown(e);break;case N.F2:this.onF2KeyDown(e);break;case N.ESCAPE:this.onEscapeKeyDown(e);break;case N.TAB:this.onTabKeyDown(e);break;case N.BACKSPACE:case N.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case N.DOWN:case N.UP:case N.RIGHT:case N.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;let t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){let{cellCtrl:n,beans:i,rowNode:s}=this,{gos:r,rangeService:o,eventService:a}=i;if(!n.isEditing()){if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),zie(e,r.get("enableCellEditingOnBackspace"))){if(o&&r.get("enableRangeSelection"))o.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(n.isCellEditable()){let l=n.getColumn(),c=this.beans.valueService.parseValue(l,s,"",s.getValueFromValueService(l))??null;s.setDataValue(l,c,"cellClear")}}else n.startRowOrCellEdit(e,t);a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){let t=e.shiftKey?N.UP:N.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(N.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(N.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;let i=e.key;i===" "?this.onSpaceKeyDown(e):(this.cellCtrl.startRowOrCellEdit(i,e),e.preventDefault())}onSpaceKeyDown(e){let{gos:t}=this.beans;if(!this.cellCtrl.isEditing()&&t.isRowSelection()){let n=this.rowNode.isSelected(),i=!n;if(i||!t.get("suppressRowDeselection")){let s=this.beans.gos.get("groupSelectsFiltered"),r=this.rowNode.setSelectedParams({newValue:i,rangeSelect:e.shiftKey,groupSelectsFiltered:s,event:e,source:"spaceKey"});n===void 0&&r===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:s,event:e,source:"spaceKey"})}}e.preventDefault()}destroy(){super.destroy()}},Dre=class extends L{constructor(e,t,n){super(),this.cellCtrl=e,this.beans=t,this.column=n}onMouseEvent(e,t){if(!Aa(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(e),e.preventDefault();return}let{eventService:t,rangeService:n,gos:i}=this.beans,s=e.ctrlKey||e.metaKey;n&&s&&n.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&n.intersectLastRange(!0);let r=this.cellCtrl.createEvent(e,"cellClicked");t.dispatchEvent(r);let o=this.column.getColDef();o.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{o.onCellClicked(r)})},0),(i.get("singleClickEdit")||o.singleClickEdit)&&!i.get("suppressClickEdit")&&!(e.shiftKey&&n?.getCellRanges().length!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!xa()||LG("dblclick"))return!1;let e=new Date().getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t}onCellDoubleClicked(e){let{column:t,beans:n,cellCtrl:i}=this,{eventService:s,frameworkOverrides:r,gos:o}=n,a=t.getColDef(),l=i.createEvent(e,"cellDoubleClicked");s.dispatchEvent(l),typeof a.onCellDoubleClicked=="function"&&window.setTimeout(()=>{r.wrapOutgoing(()=>{a.onCellDoubleClicked(l)})},0),!o.get("singleClickEdit")&&!o.get("suppressClickEdit")&&i.startRowOrCellEdit(null,e)}onMouseDown(e){let{ctrlKey:t,metaKey:n,shiftKey:i}=e,s=e.target,{cellCtrl:r,beans:o}=this,{eventService:a,rangeService:l,focusService:c,gos:u}=o;if(this.isRightClickInExistingRange(e))return;let h=l&&l.getCellRanges().length!=0;if(!i||!h){let p=u.get("enableCellTextSelection")&&e.defaultPrevented,v=(Do()||p)&&!r.isEditing()&&!UR(s);r.focusCell(v)}if(i&&h&&!c.isCellFocused(r.getCellPosition())){e.preventDefault();let f=c.getFocusedCell();if(f){let{column:p,rowIndex:v,rowPinned:y}=f,E=o.rowRenderer.getRowByPosition({rowIndex:v,rowPinned:y})?.getCellCtrl(p);E?.isEditing()&&E.stopEditing(),c.setFocusedCell({column:p,rowIndex:v,rowPinned:y,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(s)){if(l){let f=this.cellCtrl.getCellPosition();if(i)l.extendLatestRangeToCell(f);else{let p=t||n;l.setRangeToCell(f,p)}}a.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){let{rangeService:t}=this.beans;if(t){let n=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),i=e.button===2||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(n&&i)return!0}return!1}containsWidget(e){return hd(e,"ag-selection-checkbox",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;let t=this.cellCtrl.createEvent(e,"cellMouseOut");this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;let t=this.cellCtrl.createEvent(e,"cellMouseOver");this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;let t=this.cellCtrl.getGui(),n=t.contains(e.target),i=t.contains(e.relatedTarget);return n&&i}destroy(){super.destroy()}},Tre=class extends L{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}setComp(e){this.eGui=e,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){let e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))}onDisplayColumnsChanged(){let e=this.getColSpanningList();Xl(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eGui)return;let e=this.getCellWidth();this.eGui.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){let e=this.column.getColSpan(this.rowNode),t=[];if(e===1)t.push(this.column);else{let n=this.column,i=this.column.getPinned();for(let s=0;n&&s<e&&(t.push(n),n=this.beans.visibleColsService.getColAfter(n),!(!n||Ve(n)||i!==n.getPinned()));s++);}return t}onLeftChanged(){if(!this.eGui)return;let e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=We(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return e;let t=this.beans.visibleColsService.getColsLeftWidth();if(this.column.getPinned()==="right"){let n=this.beans.visibleColsService.getBodyContainerWidth();return t+n+(e||0)}return t+(e||0)}applyRowSpan(e){if(this.rowSpan===1&&!e)return;let n=this.beans.gos.getRowHeightAsNumber()*this.rowSpan;this.eGui.style.height=`${n}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}};var Xf="ag-cell-range-selected",Rre="ag-cell-range-chart",Ire="ag-cell-range-single-cell",Are="ag-cell-range-chart-category",Mre="ag-cell-range-handle",Pre="ag-cell-range-top",Fre="ag-cell-range-right",xre="ag-cell-range-bottom",Ore="ag-cell-range-left",Nre=class{constructor(e,t){this.beans=e,this.rangeService=e.rangeService,this.selectionHandleFactory=e.selectionHandleFactory,this.cellCtrl=t}setComp(e,t){this.cellComp=e,this.eGui=t,this.onRangeSelectionChanged()}onRangeSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(Xf,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${Xf}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${Xf}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${Xf}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${Xf}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(Rre,this.hasChartRange),Py(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(Ire,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){let e=this.getRangeBorders(),t=this.isSingleCell(),n=!t&&e.top,i=!t&&e.right,s=!t&&e.bottom,r=!t&&e.left;this.cellComp.addOrRemoveCssClass(Pre,n),this.cellComp.addOrRemoveCssClass(Fre,i),this.cellComp.addOrRemoveCssClass(xre,s),this.cellComp.addOrRemoveCssClass(Ore,r)}isSingleCell(){let{rangeService:e}=this.beans;return this.rangeCount===1&&!!e&&!e.isMoreThanOneCell()}getHasChartRange(){let{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;let t=e.getCellRanges();return t.length>0&&t.every(n=>ql([1,0],n.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){let e=this.beans.gos.get("enableRtl"),t=!1,n=!1,i=!1,s=!1,r=this.cellCtrl.getCellPosition().column,o=this.beans.visibleColsService,a,l;e?(a=o.getColAfter(r),l=o.getColBefore(r)):(a=o.getColBefore(r),l=o.getColAfter(r));let c=this.rangeService.getCellRanges().filter(u=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),u));a||(s=!0),l||(n=!0);for(let u=0;u<c.length&&!(t&&n&&i&&s);u++){let h=c[u],f=this.rangeService.getRangeStartRow(h),p=this.rangeService.getRangeEndRow(h);!t&&this.beans.rowPositionUtils.sameRow(f,this.cellCtrl.getCellPosition())&&(t=!0),!i&&this.beans.rowPositionUtils.sameRow(p,this.cellCtrl.getCellPosition())&&(i=!0),!s&&a&&h.columns.indexOf(a)<0&&(s=!0),!n&&l&&h.columns.indexOf(l)<0&&(n=!0)}return{top:t,right:n,bottom:i,left:s}}refreshHandle(){if(this.beans.context.isDestroyed())return;let e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(Mre,!!this.selectionHandle)}shouldHaveSelectionHandle(){let e=this.beans.gos,t=this.rangeService.getCellRanges(),n=t.length;if(this.rangeCount<1||n<1)return!1;let i=We(t),s=this.cellCtrl.getCellPosition(),r=e.get("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),o=e.get("enableRangeHandle"),a=n===1&&!this.cellCtrl.isEditing()&&(r||o);if(this.hasChartRange){let c=t[0].type===1&&this.rangeService.isCellInSpecificRange(s,t[0]);this.cellComp.addOrRemoveCssClass(Are,c),a=i.type===0}return a&&i.endRow!=null&&this.rangeService.isContiguousRange(i)&&this.rangeService.isBottomRightCell(i,s)}addSelectionHandle(){let e=this.beans.gos,t=We(this.rangeService.getCellRanges()).type,i=e.get("enableFillHandle")&&Ve(t)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==i&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(i)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},kre="ag-cell",Lre="ag-cell-auto-height",Vre="ag-cell-normal-height",Bre="ag-cell-focus",Gre="ag-cell-first-right-pinned",Hre="ag-cell-last-left-pinned",Ure="ag-cell-not-inline-editing",Wre="ag-column-hover",jre="ag-cell-wrap-text",zre=0,ZH=class PR extends L{constructor(t,n,i,s){super(),this.column=t,this.rowNode=n,this.beans=i,this.rowCtrl=s,this.cellRangeFeature=null,this.cellPositionFeature=null,this.cellCustomStyleFeature=null,this.tooltipFeature=null,this.cellMouseListenerFeature=null,this.cellKeyboardListenerFeature=null,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.instanceId=t.getId()+"-"+zre++,this.colIdSanitised=kr(this.column.getId()),i.gos.get("suppressCellFocus")||(this.tabIndex=-1),this.createCellPosition(),this.addFeatures(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}addFeatures(){this.cellPositionFeature=new Tre(this,this.beans),this.addDestroyFunc(()=>{this.cellPositionFeature?.destroy(),this.cellPositionFeature=null}),this.cellCustomStyleFeature=new bre(this,this.beans),this.addDestroyFunc(()=>{this.cellCustomStyleFeature?.destroy(),this.cellCustomStyleFeature=null}),this.cellMouseListenerFeature=new Dre(this,this.beans,this.column),this.addDestroyFunc(()=>{this.cellMouseListenerFeature?.destroy(),this.cellMouseListenerFeature=null}),this.cellKeyboardListenerFeature=new Ere(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(()=>{this.cellKeyboardListenerFeature?.destroy(),this.cellKeyboardListenerFeature=null}),this.column.isTooltipEnabled()&&(this.enableTooltipFeature(),this.addDestroyFunc(()=>{this.disableTooltipFeature()})),this.beans.rangeService&&this.beans.gos.get("enableRangeSelection")&&(this.cellRangeFeature=new Nre(this.beans,this),this.addDestroyFunc(()=>{this.cellRangeFeature?.destroy(),this.cellRangeFeature=null}))}enableTooltipFeature(t,n){let i=()=>{let o=this.column.getColDef(),a=this.rowNode.data;if(o.tooltipField&&q(a))return ip(a,o.tooltipField,this.column.isTooltipFieldContainsDots());let l=o.tooltipValueGetter;return l?l(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},s=this.beans.gos.get("tooltipShowMode")==="whenTruncated";!n&&s&&!this.isCellRenderer()&&(n=()=>{let o=this.getGui(),a=o.children.length===0?o:o.querySelector(".ag-cell-value");return a?a.scrollWidth>a.clientWidth:!0});let r={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:t!=null?()=>t:i,getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:n};this.tooltipFeature=new Cd(r,this.beans)}disableTooltipFeature(){this.tooltipFeature&&(this.tooltipFeature.destroy(),this.tooltipFeature=null)}setComp(t,n,i,s,r){this.cellComp=t,this.eGui=n,this.printLayout=s,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(i),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),this.cellPositionFeature?.setComp(n),this.cellCustomStyleFeature?.setComp(t),this.tooltipFeature?.refreshToolTip(),this.cellKeyboardListenerFeature?.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(t,n),r&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(o=>o()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(t){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!t)return;let n=t.parentElement,i=this.beans.gos.getRowHeightForNode(this.rowNode).height,s=a=>{if(this.editing||!this.isAlive())return;let{paddingTop:l,paddingBottom:c,borderBottomWidth:u,borderTopWidth:h}=Zl(n),f=l+c+u+h,v=t.offsetHeight+f;if(a<5){let C=this.beans.gos.getDocument(),E=!C||!C.contains(t),T=v==0;if(E||T){window.setTimeout(()=>s(a+1),0);return}}let y=Math.max(v,i);this.rowNode.setRowAutoHeight(y,this.column)},r=()=>s(0);r();let o=this.beans.resizeObserverService.observeResize(t,r);this.addDestroyFunc(()=>{o(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}getInstanceId(){return this.instanceId}getColumnIdSanitised(){return this.colIdSanitised}getTabIndex(){return this.tabIndex}isCellRenderer(){let t=this.column.getColDef();return t.cellRenderer!=null||t.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}showValue(t=!1){let n=this.getValueToDisplay(),i;if(this.rowNode.stub){let s=this.createCellRendererParams();i=this.beans.userComponentFactory.getLoadingCellRendererDetails(this.column.getColDef(),s)}else if(this.isCellRenderer()){let s=this.createCellRendererParams();i=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),s)}this.cellComp.setRenderDetails(i,n,t),this.cellRangeFeature?.refreshHandle()}setupControlComps(){let t=this.column.getColDef();this.includeSelection=this.isIncludeControl(t.checkboxSelection),this.includeRowDrag=this.isIncludeControl(t.rowDrag),this.includeDndSource=this.isIncludeControl(t.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(t){return this.rowNode.rowPinned!=null?!1:typeof t=="function"||t===!0}refreshShouldDestroy(){let t=this.column.getColDef(),n=this.includeSelection!=this.isIncludeControl(t.checkboxSelection),i=this.includeRowDrag!=this.isIncludeControl(t.rowDrag),s=this.includeDndSource!=this.isIncludeControl(t.dndSource),r=this.isAutoHeight!=this.column.isAutoHeight();return n||i||s||r}startEditing(t=null,n=!1,i=null){let{editService:s}=this.beans;if(!(!this.isCellEditable()||this.editing||!s)){if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startEditing(t,n,i)});return}s.startEditing(this,t,n,i)}}setEditing(t,n){this.editCompDetails=n,this.editing!==t&&(this.editing=t,this.cellRangeFeature?.refreshHandle())}stopRowOrCellEdit(t=!1){this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.stopEditing(t):this.stopEditing(t)}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(t=!1){let{editService:n}=this.beans;return!this.editing||!n?!1:n.stopEditing(this,t)}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.rowNode.getValueFromValueService(this.column),setValue:n=>this.beans.valueService.setValue(this.rowNode,this.column,n),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(n,i,s,r)=>this.registerRowDragger(n,i,r),setTooltip:(n,i)=>{this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(n,i),this.tooltipFeature?.refreshToolTip()}})}setFocusOutOnEditor(){this.editing&&this.beans.editService?.setFocusOutOnEditor(this)}setFocusInOnEditor(){this.editing&&this.beans.editService?.setFocusInOnEditor(this)}onCellChanged(t){t.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(t){this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(t)}refreshCell(t){if(this.suppressRefreshCell||this.editing)return;let n=this.column.getColDef(),i=t!=null&&!!t.newData,s=t!=null&&!!t.suppressFlash||!!n.suppressCellFlash,r=n.field==null&&n.valueGetter==null&&n.showRowGroup==null,o=t&&t.forceRefresh||r||i,a=!!this.cellComp,l=this.updateAndFormatValue(a),c=o||l;if(a){if(c){this.showValue(i);let u=this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering();!s&&!u&&(this.beans.gos.get("enableCellChangeFlash")||n.enableCellChangeFlash)&&this.flashCell(),this.cellCustomStyleFeature?.applyUserStyles(),this.cellCustomStyleFeature?.applyClassesFromColDef()}this.tooltipFeature?.refreshToolTip(),this.cellCustomStyleFeature?.applyCellClassRules()}}stopEditingAndFocus(t=!1,n=!1){this.beans.editService?.stopEditingAndFocus(this,t,n)}flashCell(t){let n=t?.flashDuration??t?.flashDelay,i=t?.fadeDuration??t?.fadeDelay;this.animateCell("data-changed",n,i)}animateCell(t,n,i){if(!this.cellComp)return;let s=`ag-cell-${t}`,r=`ag-cell-${t}-animation`,{gos:o}=this.beans;n||(n=o.get("cellFlashDuration")),q(i)||(i=o.get("cellFadeDuration")),this.cellComp.addOrRemoveCssClass(s,!0),this.cellComp.addOrRemoveCssClass(r,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(s,!1),this.cellComp.addOrRemoveCssClass(r,!0),this.eGui.style.transition=`background-color ${i}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(r,!1),this.eGui.style.transition="")},i))},n)})}onFlashCells(t){if(!this.cellComp)return;let n=this.beans.cellPositionUtils.createId(this.getCellPosition());t.cells[n]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(t){return this.callValueFormatter(t)??t}callValueFormatter(t){return this.beans.valueService.formatValue(this.column,this.rowNode,t)}updateAndFormatValue(t){let n=this.value,i=this.valueFormatted;return this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value),t?!this.valuesAreEqual(n,this.value)||this.valueFormatted!=i:!0}valuesAreEqual(t,n){let i=this.column.getColDef();return i.equals?i.equals(t,n):t===n}getComp(){return this.cellComp}getValue(){return this.value}addDomData(){let t=this.getGui();this.beans.gos.setDomData(t,PR.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(()=>this.beans.gos.setDomData(t,PR.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(t,n){return this.beans.gos.addGridCommonParams({type:n,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:t,rowIndex:this.rowNode.rowIndex})}processCharacter(t){this.cellKeyboardListenerFeature?.processCharacter(t)}onKeyDown(t){this.cellKeyboardListenerFeature?.onKeyDown(t)}onMouseEvent(t,n){this.cellMouseListenerFeature?.onMouseEvent(t,n)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){this.cellComp&&this.cellPositionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){let{cellComp:t,column:n,beans:i}=this;HH(t,n,i.visibleColsService)}refreshAriaColIndex(){let t=this.beans.visibleColsService.getAriaColIndex(this.column);XG(this.getGui(),t)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){return this.cellPositionFeature?.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(t,n=null){if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(t,n)});return}this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(t,this):this.startEditing(t,!0,n)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onRangeSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(t=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:t})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}onFirstRightPinnedChanged(){if(!this.cellComp)return;let t=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(Gre,t)}onLastLeftPinnedChanged(){if(!this.cellComp)return;let t=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(Hre,t)}onCellFocused(t){if(this.beans.gos.get("suppressCellFocus"))return;let n=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){n&&t?.forceBrowserFocus&&(this.focusEventToRestore=t);return}if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(Bre,n),n&&t&&t.forceBrowserFocus){let s=this.cellComp.getFocusableElement();if(this.editing){let r=this.beans.focusService.findFocusableElements(s,null,!0);r.length&&(s=r[0])}s.focus({preventScroll:!!t.preventScrollOnBrowserFocus})}let i=this.beans.gos.get("editType")==="fullRow";!n&&!i&&this.editing&&this.stopRowOrCellEdit(),n&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:Kl(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(kre,!0),this.cellComp.addOrRemoveCssClass(Ure,!0);let t=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(Lre,t),this.cellComp.addOrRemoveCssClass(Vre,!t)}onColumnHover(){if(!this.cellComp||!this.beans.gos.get("columnHoverHighlight"))return;let t=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(Wre,t)}onColDefChanged(){if(!this.cellComp)return;this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?this.beans.editService?.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0})}setWrapText(){let t=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(jre,t)}dispatchCellContextMenuEvent(t){let n=this.column.getColDef(),i=this.createEvent(t,"cellContextMenu");this.beans.eventService.dispatchEvent(i),n.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{n.onCellContextMenu(i)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){let t=new Sre;return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t}createDndSource(){let t=new _re(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(t),t}registerRowDragger(t,n,i){if(this.customRowDragComp){this.customRowDragComp.setDragElement(t,n);return}let s=this.createRowDragComp(t,n,i);s&&(this.customRowDragComp=s,this.addDestroyFunc(()=>{this.beans.context.destroyBean(s),this.customRowDragComp=null}))}createRowDragComp(t,n,i){let s=this.beans.gos.get("pagination"),r=this.beans.gos.get("rowDragManaged"),o=this.beans.gos.isRowModelType("clientSide");if(r){if(!o){j("managed row dragging is only allowed in the Client Side Row Model");return}if(s){j("managed row dragging is not possible when doing pagination");return}}let a=new IR(()=>this.value,this.rowNode,this.column,t,n,i);return this.beans.context.createBean(a),a}setSuppressRefreshCell(t){this.suppressRefreshCell=t}getEditCompDetails(){return this.editCompDetails}};ZH.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var Yl=ZH,$re=0,e2=class FR extends L{constructor(t,n,i,s,r){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=n,this.gos=n.gos,this.rowNode=t,this.paginationPage=n.paginationService?.getCurrentPage()??0,this.useAnimationFrameForCreate=s,this.printLayout=r,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=t.id+"-"+$re++,this.rowId=kr(t.id),this.initRowBusinessKey(),this.rowFocused=n.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=n.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(i),this.rowStyles=this.processStylesFromGridOptions(),this.isFullWidth()&&!this.gos.get("suppressCellFocus")&&(this.tabIndex=-1),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;let t=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=kr(t)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}getTabIndex(){return this.tabIndex}isSticky(){return this.rowNode.sticky}getInstanceId(){return this.instanceId}updateGui(t,n){t==="left"?this.leftGui=n:t==="right"?this.rightGui=n:t==="fullWidth"?this.fullWidthGui=n:this.centerGui=n}setComp(t,n,i){let s={rowComp:t,element:n,containerType:i};this.allRowGuis.push(s),this.updateGui(i,s),this.initialiseRowComp(s),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(t){this.allRowGuis=this.allRowGuis.filter(n=>n.containerType!==t),this.updateGui(t,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(t){let n=t?"none":"";this.allRowGuis.forEach(i=>i.element.style.display=n)}initialiseRowComp(t){let n=this.gos;this.listenOnDomOrder(t),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),n.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);let i=t.rowComp;this.getInitialRowClasses(t.containerType).forEach(r=>i.addOrRemoveCssClass(r,!0)),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&My(t.element,this.rowNode.expanded==!0),this.setRowCompRowId(i),this.setRowCompRowBusinessKey(i),n.setDomData(t.element,FR.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc(()=>n.setDomData(t.element,FR.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,t.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(t.element),this.isFullWidth()&&this.setupFullWidth(t),n.get("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&t.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(t){this.businessKeySanitised!=null&&t.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(t){this.rowId=kr(this.rowNode.id),this.rowId!=null&&t.setRowId(this.rowId)}executeSlideAndFadeAnimations(t){let{containerType:n}=t;this.slideInAnimation[n]&&(uG(()=>{this.onTopChanged()}),this.slideInAnimation[n]=!1),this.fadeInAnimation[n]&&(uG(()=>{t.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[n]=!1)}addRowDraggerToRow(t){if(this.gos.get("enableRangeSelection")){j("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`");return}let n=this.beans.localeService.getLocaleTextFunc(),i=new IR(()=>`1 ${n("rowDragRow","row")}`,this.rowNode,void 0,t.element,void 0,!0),s=this.createBean(i,this.beans.context);this.rowDragComps.push(s)}setupFullWidth(t){let n=this.getPinnedForContainer(t.containerType);if(this.rowType=="FullWidthDetail"&&!ai.__assertRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId()))return;let i=this.createFullWidthCompDetails(t.element,n);t.rowComp.showFullWidth(i)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(t=>t?.rowComp?.getFullWidthCellRenderer()):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}getCellElement(t){let n=this.getCellCtrl(t);return n?n.getGui():null}executeProcessRowPostCreateFunc(){let t=this.gos.getCallback("processRowPostCreate");if(!t||!this.areAllContainersReady())return;let n={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};t(n)}areAllContainersReady(){let t=!!this.leftGui||!this.beans.visibleColsService.isPinningLeft(),n=!!this.centerGui,i=!!this.rightGui||!this.beans.visibleColsService.isPinningRight();return t&&n&&i}setRowType(){let t=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow"),n=this.rowNode.isFullWidthCell(),i=this.gos.get("masterDetail")&&this.rowNode.detail,s=this.beans.columnModel.isPivotMode(),o=!!this.rowNode.group&&!this.rowNode.footer&&this.gos.isGroupUseEntireRow(s);t?this.rowType="FullWidthLoading":i?this.rowType="FullWidthDetail":n?this.rowType="FullWidth":o?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(t=!1,n=!1){if(this.isFullWidth())return;if(t||this.gos.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(n);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(t,n,i=null){let s={list:[],map:{}},r=(o,a)=>{s.list.push(a),s.map[o]=a};return n.forEach(o=>{let a=o.getInstanceId(),l=t.map[a];l||(l=new Yl(o,this.rowNode,this.beans,this)),r(a,l)}),t.list.forEach(o=>{if(s.map[o.getColumn().getInstanceId()]!=null)return;if(!this.isCellEligibleToBeRemoved(o,i)){r(o.getColumn().getInstanceId(),o);return}o.destroy()}),s}updateColumnListsImpl(t){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(t)}setCellCtrls(t){this.allRowGuis.forEach(n=>{let i=this.getCellCtrlsForContainer(n.containerType);n.rowComp.setCellCtrls(i,t)})}getCellCtrlsForContainer(t){switch(t){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){let t=this.beans.columnViewportService,n=this.beans.visibleColsService;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,n.getAllCols()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{let i=t.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);let s=n.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,s,"left");let r=n.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,r,"right")}}isCellEligibleToBeRemoved(t,n){if(t.getColumn().getPinned()!=n)return!0;let o=t.isEditing(),a=this.beans.focusService.isCellFocused(t.getCellPosition());if(o||a){let c=t.getColumn();return!(this.beans.visibleColsService.getAllCols().indexOf(c)>=0)}return!0}getDomOrder(){return this.gos.get("ensureDomOrder")||this.gos.isDomLayout("print")}listenOnDomOrder(t){let n=()=>{t.rowComp.setDomOrder(this.getDomOrder())};this.addManagedPropertyListener("domLayout",n),this.addManagedPropertyListener("ensureDomOrder",n)}setAnimateFlags(t){if(this.isSticky()||!t)return;let n=q(this.rowNode.oldRowTop),i=this.beans.visibleColsService.isPinningLeft(),s=this.beans.visibleColsService.isPinningRight();if(n){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=i,this.slideInAnimation.right=s}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=i,this.fadeInAnimation.right=s}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){let t=(a,l)=>a?a.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(a.element,l).params):!0,n=t(this.fullWidthGui,null),i=t(this.centerGui,null),s=t(this.leftGui,"left"),r=t(this.rightGui,"right");return n&&i&&s&&r}addListeners(){this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),expandedChanged:this.updateExpandedCss.bind(this),hasChildrenChanged:this.updateExpandedCss.bind(this)}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventService,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.addDestroyFunc(()=>{this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowDragEntireRow"],()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(n=>{this.addRowDraggerToRow(n)});return}this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach(t=>t.onRowIndexChanged())},cellChanged:t=>{this.getAllCellCtrls().forEach(n=>n.onCellChanged(t))}})}onRowNodeDataChanged(t){if(this.isFullWidth()!==!!this.rowNode.isFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(i=>i.refreshCell({suppressFlash:!t.update,newData:!t.update})),this.allRowGuis.forEach(i=>{this.setRowCompRowId(i.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(i.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){let t=this.rowNode.highlighted;this.allRowGuis.forEach(n=>{let i=t===0,s=t===1;n.rowComp.addOrRemoveCssClass("ag-row-highlight-above",i),n.rowComp.addOrRemoveCssClass("ag-row-highlight-below",s)})}postProcessRowDragging(){let t=this.rowNode.dragging;this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-row-dragging",t))}updateExpandedCss(){let t=this.rowNode.isExpandable(),n=this.rowNode.expanded==!0;this.allRowGuis.forEach(i=>{i.rowComp.addOrRemoveCssClass("ag-row-group",t),i.rowComp.addOrRemoveCssClass("ag-row-group-expanded",t&&n),i.rowComp.addOrRemoveCssClass("ag-row-group-contracted",t&&!n),My(i.element,t&&n)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:Kl(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(t){let n=this.allRowGuis.find(l=>l.element.contains(t.target));if(!((n?n.element:null)===t.target))return;let r=this.rowNode,o=this.beans.focusService.getFocusedCell(),a={rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:o&&o.column};this.beans.navigationService.navigateToNextCell(t,t.key,a,!0),t.preventDefault()}onTabKeyDown(t){if(t.defaultPrevented||Aa(t))return;let n=this.allRowGuis.find(o=>o.element.contains(t.target)),i=n?n.element:null,s=i===t.target,r=null;s||(r=this.beans.focusService.findNextFocusableElement(i,!1,t.shiftKey)),(this.isFullWidth()&&s||!r)&&this.beans.navigationService.onTabKeyDown(this,t)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){let t=this.allRowGuis.find(n=>Js(n.element))?.element;return t?t.getBoundingClientRect().top:0}onFullWidthRowFocused(t){let n=this.rowNode,i=t?this.isFullWidth()&&t.rowIndex===n.rowIndex&&t.rowPinned==n.rowPinned:!1,s=this.fullWidthGui?this.fullWidthGui.element:this.centerGui?.element;s&&(s.classList.toggle("ag-full-width-focus",i),i&&t?.forceBrowserFocus&&s.focus({preventScroll:!0}))}recreateCell(t){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,t),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,t),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,t),t.destroy(),this.updateColumnLists()}removeCellCtrl(t,n){let i={list:[],map:{}};return t.list.forEach(s=>{s!==n&&(i.list.push(s),i.map[s.getColumn().getInstanceId()]=s)}),i}onMouseEvent(t,n){switch(t){case"dblclick":this.onRowDblClick(n);break;case"click":this.onRowClick(n);break;case"touchstart":case"mousedown":this.onRowMouseDown(n);break}}createRowEvent(t,n){return this.gos.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:n})}createRowEventWithSource(t,n){let i=this.createRowEvent(t,n);return i.source=this,i}onRowDblClick(t){if(Aa(t))return;let n=this.createRowEventWithSource("rowDoubleClicked",t);this.beans.eventService.dispatchEvent(n)}onRowMouseDown(t){if(this.lastMouseDownOnDragger=hd(t.target,"ag-row-drag",3),!this.isFullWidth())return;let n=this.rowNode,i=this.beans.visibleColsService;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges();let s=this.getFullWidthElement(),r=t.target,o=!0;s&&s.contains(r)&&UR(r)&&(o=!1),this.beans.focusService.setFocusedCell({rowIndex:n.rowIndex,column:i.getAllCols()[0],rowPinned:n.rowPinned,forceBrowserFocus:o})}onRowClick(t){if(Aa(t)||this.lastMouseDownOnDragger)return;let i=this.createRowEventWithSource("rowClicked",t);this.beans.eventService.dispatchEvent(i);let s=t.ctrlKey||t.metaKey,r=t.shiftKey;if(this.gos.get("groupSelectsChildren")&&this.rowNode.group||this.isRowSelectionBlocked()||this.gos.get("suppressRowClickSelection"))return;let a=this.gos.get("rowMultiSelectWithClick"),l=!this.gos.get("suppressRowDeselection"),c="rowClicked";if(this.rowNode.isSelected())a?this.rowNode.setSelectedParams({newValue:!1,event:t,source:c}):s?l&&this.rowNode.setSelectedParams({newValue:!1,event:t,source:c}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!r,rangeSelect:r,event:t,source:c});else{let u=a?!1:!s;this.rowNode.setSelectedParams({newValue:!0,clearSelection:u,rangeSelect:r,event:t,source:c})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!this.gos.isRowSelection()}setupDetailRowAutoHeight(t){if(this.rowType!=="FullWidthDetail"||!this.gos.get("detailRowAutoHeight"))return;let n=()=>{let s=t.clientHeight;if(s!=null&&s>0){let r=()=>{this.rowNode.setRowHeight(s),this.beans.rowModel.getType()==="clientSide"?this.beans.rowModel.onRowHeightChanged():this.beans.rowModel.getType()==="serverSide"&&this.beans.rowModel.onRowHeightChanged()};window.setTimeout(r,0)}},i=this.beans.resizeObserverService.observeResize(t,n);this.addDestroyFunc(i),n()}createFullWidthCompDetails(t,n){let{gos:i,rowNode:s}=this,r=i.addGridCommonParams({fullWidth:!0,data:s.data,node:s,value:s.key,valueFormatted:s.key,eGridCell:t,eParentOfValue:t,pinned:n,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(a,l,c,u)=>this.addFullWidthRowDragging(a,l,c,u),setTooltip:(a,l)=>this.refreshRowTooltip(a,l)}),o=this.beans.userComponentFactory;switch(this.rowType){case"FullWidthDetail":return o.getFullWidthDetailCellRendererDetails(r);case"FullWidthGroup":return o.getFullWidthGroupCellRendererDetails(r);case"FullWidthLoading":return o.getFullWidthLoadingCellRendererDetails(r);default:return o.getFullWidthCellRendererDetails(r)}}refreshRowTooltip(t,n){if(!this.fullWidthGui)return;let i={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>t,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:n};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new Cd(i,this.beans))}addFullWidthRowDragging(t,n,i="",s){if(!this.isFullWidth())return;let r=new IR(()=>i,this.rowNode,void 0,t,n,s);this.createBean(r,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(r,this.beans.context)})}onUiLevelChanged(){let t=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=t){let n="ag-row-level-"+t,i="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(s=>{s.rowComp.addOrRemoveCssClass(n,!0),s.rowComp.addOrRemoveCssClass(i,!1)})}this.rowLevel=t}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getLastRow()}refreshFirstAndLastRowStyles(){let t=this.isFirstRowOnPage(),n=this.isLastRowOnPage();this.firstRowOnPage!==t&&(this.firstRowOnPage=t,this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-first",t))),this.lastRowOnPage!==n&&(this.lastRowOnPage=n,this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-last",n)))}stopEditing(t=!1){this.stoppingRowEdit||this.beans.rowEditService?.stopEditing(this,t)}setInlineEditingCss(t){this.allRowGuis.forEach(n=>{n.rowComp.addOrRemoveCssClass("ag-row-inline-editing",t),n.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!t)})}setEditingRow(t){this.editingRow=t}startRowEditing(t=null,n=null,i=null){this.editingRow||this.beans.rowEditService?.startEditing(this,t,n,i)}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){let t=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!t||!t.length||t.forEach(n=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(n,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,t=>{this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass(t,!0))},t=>{this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass(t,!1))})}setStylesFromGridOptions(t,n){t&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(n,i=>i.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(t){return t==="left"||t==="right"?t:null}getInitialRowClasses(t){let n=this.getPinnedForContainer(t),i={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[t],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:n};return this.beans.rowCssClassCalculator.getInitialRowClasses(i)}processStylesFromGridOptions(){let t=this.gos.get("rowStyle");if(t&&typeof t=="function"){j("rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}let n=this.gos.getCallback("getRowStyle"),i;if(n){let s={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};i=n(s)}return i||t?Object.assign({},t,i):this.emptyStyle}onRowSelected(t){let n=!!this.rowNode.isSelected();this.forEachGui(t,i=>{i.rowComp.addOrRemoveCssClass("ag-row-selected",n),Py(i.element,n),i.element.contains(this.gos.getActiveDomElement())&&(i===this.centerGui||i===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;let t=this.rowNode.isSelected();if(t&&this.gos.get("suppressRowDeselection"))return;let i=this.beans.localeService.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(i)}addHoverFunctionality(t){if(!this.active)return;let{rowNode:n,beans:i,gos:s}=this;this.addManagedListeners(t,{mouseenter:()=>n.onMouseEnter(),mouseleave:()=>n.onMouseLeave()}),this.addManagedListeners(n,{mouseEnter:()=>{!i.dragService.isDragging()&&!s.get("suppressRowHoverHighlight")&&(t.classList.add("ag-row-hover"),n.setHovered(!0))},mouseLeave:()=>{t.classList.remove("ag-row-hover"),n.setHovered(!1)}})}roundRowTopToBounds(t){let n=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),i=this.applyPaginationOffset(n.top,!0)-100,s=this.applyPaginationOffset(n.bottom,!0)+100;return Math.min(Math.max(i,t),s)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(t,n){t?n(t):this.allRowGuis.forEach(n)}onRowHeightChanged(t){if(this.rowNode.rowHeight==null)return;let n=this.rowNode.rowHeight,i=this.beans.environment.getDefaultRowHeight(),r=this.gos.isGetRowHeightFunction()?this.gos.getRowHeightForNode(this.rowNode).height:void 0,o=r?`${Math.min(i,r)-2}px`:void 0;this.forEachGui(t,a=>{a.element.style.height=`${n}px`,o&&a.element.style.setProperty("--ag-line-height",o)})}addEventListener(t,n){super.addEventListener(t,n)}removeEventListener(t,n){super.removeEventListener(t,n)}destroyFirstPass(t=!1){if(this.active=!1,!t&&this.gos.isAnimateRows()&&!this.isSticky())if(this.rowNode.rowTop!=null){let s=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(s)}else this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);let n=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(n),this.beans.eventService.dispatchEvent(n),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();let t=n=>(n.list.forEach(i=>i.destroy()),{list:[],map:{}});this.centerCellCtrls=t(this.centerCellCtrls),this.leftCellCtrls=t(this.leftCellCtrls),this.rightCellCtrls=t(this.rightCellCtrls)}setFocusedClasses(t){this.forEachGui(t,n=>{n.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),n.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){let t=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses()),!t&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){let t=this.beans.paginationService?.getCurrentPage()??0;this.paginationPage!==t&&(this.paginationPage=t,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(t,n=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return t;let i=this.beans.pageBoundsService.getPixelOffset();return t+i*(n?1:-1)}setRowTop(t){if(!this.printLayout&&q(t)){let n=this.applyPaginationOffset(t),r=`${this.rowNode.isRowPinned()||this.rowNode.sticky?n:this.beans.rowContainerHeightService.getRealPixelPosition(n)}px`;this.setRowTopStyle(r)}}getInitialRowTop(t){return this.suppressRowTransform?this.getInitialRowTopShared(t):void 0}getInitialTransform(t){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(t)})`}getInitialRowTopShared(t){if(this.printLayout)return"";let n=this.rowNode,i;if(this.isSticky())i=n.stickyRowTop;else{let s=this.slideInAnimation[t]?this.roundRowTopToBounds(n.oldRowTop):n.rowTop,r=this.applyPaginationOffset(s);i=n.isRowPinned()?r:this.beans.rowContainerHeightService.getRealPixelPosition(r)}return i+"px"}setRowTopStyle(t){this.allRowGuis.forEach(n=>this.suppressRowTransform?n.rowComp.setTop(t):n.rowComp.setTransform(`translateY(${t})`))}getRowNode(){return this.rowNode}getCellCtrl(t){let n=null;return this.getAllCellCtrls().forEach(i=>{i.getColumn()==t&&(n=i)}),n!=null||this.getAllCellCtrls().forEach(i=>{i.getColSpanningList().indexOf(t)>=0&&(n=i)}),n}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(t){let n=this.rowNode.getRowIndexString();if(n===null)return;let i=this.beans.headerNavigationService.getHeaderRowCount()+(this.beans.filterManager?.getHeaderRowCount()??0),s=this.rowNode.rowIndex%2===0,r=i+this.rowNode.rowIndex+1;this.forEachGui(t,o=>{o.rowComp.setRowIndex(n),o.rowComp.addOrRemoveCssClass("ag-row-even",s),o.rowComp.addOrRemoveCssClass("ag-row-odd",!s),JG(o.element,r)})}setStoppingRowEdit(t){this.stoppingRowEdit=t}};e2.DOM_DATA_KEY_ROW_CTRL="renderedRow";var Jl=e2,qre=class extends L{wireBeans(e){this.mouseEventService=e.mouseEventService,this.valueService=e.valueService,this.menuService=e.menuService,this.ctrlsService=e.ctrlsService,this.navigationService=e.navigationService,this.focusService=e.focusService,this.undoRedoService=e.undoRedoService,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.rangeService=e.rangeService,this.clipboardService=e.clipboardService}constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){let e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",LG("touchstart")?"touchstart":"mousedown"].forEach(n=>{let i=this.processMouseEvent.bind(this,n);this.addManagedElementListeners(this.element,{[n]:i})})}processMouseEvent(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)||Aa(t))return;let n=this.getRowForEvent(t),i=this.mouseEventService.getRenderedCellForEvent(t);e==="contextmenu"?this.handleContextMenuMouseEvent(t,void 0,n,i):(i&&i.onMouseEvent(e,t),n&&n.onMouseEvent(e,t))}mockContextMenuForIPad(){if(!xa())return;let e=new Ma(this.element),t=n=>{let i=this.getRowForEvent(n.touchEvent),s=this.mouseEventService.getRenderedCellForEvent(n.touchEvent);this.handleContextMenuMouseEvent(void 0,n.touchEvent,i,s)};this.addManagedListeners(e,{longTap:t}),this.addDestroyFunc(()=>e.destroy())}getRowForEvent(e){let t=e.target;for(;t;){let n=this.gos.getDomData(t,Jl.DOM_DATA_KEY_ROW_CTRL);if(n)return n;t=t.parentElement}return null}handleContextMenuMouseEvent(e,t,n,i){let s=n?n.getRowNode():null,r=i?i.getColumn():null,o=null;if(r){let c=e||t;i.dispatchCellContextMenuEvent(c??null),o=this.valueService.getValue(r,s)}let a=this.ctrlsService.getGridBodyCtrl(),l=i?i.getGui():a.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:s,column:r,value:o,anchorToElement:l})}getControlsForEventTarget(e){return{cellCtrl:vR(this.gos,e,Yl.DOM_DATA_KEY_CELL_CTRL),rowCtrl:vR(this.gos,e,Jl.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){let{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(n?this.processCellKeyboardEvent(n,e,t):i&&i.isFullWidth()&&this.processFullWidthRowKeyboardEvent(i,e,t))}processCellKeyboardEvent(e,t,n){let i=e.getRowNode(),s=e.getColumn(),r=e.isEditing();if(!AR(this.gos,n,i,s,r)&&t==="keydown"&&(!r&&this.navigationService.handlePageScrollingKey(n)||e.onKeyDown(n),this.doGridOperations(n,e.isEditing()),MH(n)&&e.processCharacter(n)),t==="keydown"){let a=e.createEvent(n,"cellKeyDown");this.eventService.dispatchEvent(a)}}processFullWidthRowKeyboardEvent(e,t,n){let i=e.getRowNode(),s=this.focusService.getFocusedCell(),r=s&&s.column;if(!AR(this.gos,n,i,r,!1)){let a=n.key;if(t==="keydown")switch(a){case N.PAGE_HOME:case N.PAGE_END:case N.PAGE_UP:case N.PAGE_DOWN:this.navigationService.handlePageScrollingKey(n,!0);break;case N.UP:case N.DOWN:e.onKeyboardNavigate(n);break;case N.TAB:e.onTabKeyDown(n);break;default:}}if(t==="keydown"){let a=e.createRowEvent("cellKeyDown",n);this.eventService.dispatchEvent(a)}}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!this.mouseEventService.isEventFromThisGrid(e))return;let n=jie(e);if(n===N.A)return this.onCtrlAndA(e);if(n===N.C)return this.onCtrlAndC(e);if(n===N.D)return this.onCtrlAndD(e);if(n===N.V)return this.onCtrlAndV(e);if(n===N.X)return this.onCtrlAndX(e);if(n===N.Y)return this.onCtrlAndY();if(n===N.Z)return this.onCtrlAndZ(e)}onCtrlAndA(e){let{pinnedRowModel:t,rowModel:n,rangeService:i}=this;if(i&&n.isRowsToRender()){let[s,r]=[t.isEmpty("top"),t.isEmpty("bottom")],o=s?null:"top",a,l;r?(a=null,l=n.getRowCount()-1):(a="bottom",l=t.getPinnedBottomRowNodes().length-1);let c=this.visibleColsService.getAllCols();if(bn(c))return;i.setCellRange({rowStartIndex:0,rowStartPinned:o,rowEndIndex:l,rowEndPinned:a,columnStart:c[0],columnEnd:We(c)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;let{cellCtrl:t,rowCtrl:n}=this.getControlsForEventTarget(e.target);t?.isEditing()||n?.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;let{cellCtrl:t,rowCtrl:n}=this.getControlsForEventTarget(e.target);t?.isEditing()||n?.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){let{cellCtrl:t,rowCtrl:n}=this.getControlsForEventTarget(e.target);t?.isEditing()||n?.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){!this.gos.get("undoRedoCellEditing")||!this.undoRedoService||(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService?.redo("ui")}},Kre=class extends L{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({leftPinnedWidthChanged:this.onPinnedLeftWidthChanged.bind(this)})}onPinnedLeftWidthChanged(){let e=this.pinnedWidthService.getPinnedLeftWidth(),t=e>0;Et(this.element,t),Ys(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}},Qre=class extends L{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({rightPinnedWidthChanged:this.onPinnedRightWidthChanged.bind(this)})}onPinnedRightWidthChanged(){let e=this.pinnedWidthService.getPinnedRightWidth(),t=e>0;Et(this.element,t),Ys(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}},my=e=>e.getTopRowCtrls(),vy=e=>e.getStickyTopRowCtrls(),Cy=e=>e.getStickyBottomRowCtrls(),yy=e=>e.getBottomRowCtrls(),wy=e=>e.getCentreRowCtrls(),Yre={center:{type:"center",container:"ag-center-cols-container",viewport:"ag-center-cols-viewport",getRowCtrls:wy},left:{type:"left",container:"ag-pinned-left-cols-container",pinnedType:"left",getRowCtrls:wy},right:{type:"right",container:"ag-pinned-right-cols-container",pinnedType:"right",getRowCtrls:wy},fullWidth:{type:"fullWidth",container:"ag-full-width-container",fullWidth:!0,getRowCtrls:wy},topCenter:{type:"center",container:"ag-floating-top-container",viewport:"ag-floating-top-viewport",getRowCtrls:my},topLeft:{type:"left",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:my},topRight:{type:"right",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:my},topFullWidth:{type:"fullWidth",container:"ag-floating-top-full-width-container",fullWidth:!0,getRowCtrls:my},stickyTopCenter:{type:"center",container:"ag-sticky-top-container",viewport:"ag-sticky-top-viewport",getRowCtrls:vy},stickyTopLeft:{type:"left",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:vy},stickyTopRight:{type:"right",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:vy},stickyTopFullWidth:{type:"fullWidth",container:"ag-sticky-top-full-width-container",fullWidth:!0,getRowCtrls:vy},stickyBottomCenter:{type:"center",container:"ag-sticky-bottom-container",viewport:"ag-sticky-bottom-viewport",getRowCtrls:Cy},stickyBottomLeft:{type:"left",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:Cy},stickyBottomRight:{type:"right",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:Cy},stickyBottomFullWidth:{type:"fullWidth",container:"ag-sticky-bottom-full-width-container",fullWidth:!0,getRowCtrls:Cy},bottomCenter:{type:"center",container:"ag-floating-bottom-container",viewport:"ag-floating-bottom-viewport",getRowCtrls:yy},bottomLeft:{type:"left",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:yy},bottomRight:{type:"right",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:yy},bottomFullWidth:{type:"fullWidth",container:"ag-floating-bottom-full-width-container",fullWidth:!0,getRowCtrls:yy}};function t2(e){return Yre[e]}var Jre=["topCenter","topLeft","topRight"],Xre=["bottomCenter","bottomLeft","bottomRight"],Zre=["center","left","right"],eoe=["center","left","right","fullWidth"],toe=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],noe=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],ioe=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],n2=["stickyTopCenter","stickyTopLeft","stickyTopRight"],i2=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],soe=[...n2,"stickyTopFullWidth",...i2,"stickyBottomFullWidth"],roe=[...Jre,...Xre,...Zre,...n2,...i2],ooe=class extends L{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.options=t2(e)}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService,this.columnViewportService=e.columnViewportService,this.resizeObserverService=e.resizeObserverService,this.rowRenderer=e.rowRenderer}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new yre(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.ctrlsService.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,t,n){this.comp=e,this.eContainer=t,this.eViewport=n,this.createManagedBean(new qre(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows(),this.forContainers(noe,()=>{this.pinnedWidthFeature=this.createManagedBean(new Kre(this.eContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:()=>this.onPinnedWidthChanged()})}),this.forContainers(ioe,()=>{this.pinnedWidthFeature=this.createManagedBean(new Qre(this.eContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:()=>this.onPinnedWidthChanged()})}),this.forContainers(eoe,()=>this.createManagedBean(new JH(this.eContainer,this.name==="center"?n:void 0))),this.forContainers(roe,()=>this.createManagedBean(new wre(this.eContainer))),this.forContainers(toe,()=>this.createManagedBean(new rI(i=>this.comp.setContainerWidth(`${i}px`)))),this.addListeners(),this.registerWithCtrlsService()}addListeners(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(soe.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}let t=()=>{let n=this.gos.get("ensureDomOrder"),i=this.gos.isDomLayout("print");this.comp.setDomOrder(n||i)};this.addManagedPropertyListener("domLayout",t),t()}stopHScrollOnPinnedRows(){this.forContainers(["topCenter","stickyTopCenter","bottomCenter","stickyBottomCenter"],()=>{let e=()=>this.eViewport.scrollLeft=0;this.addManagedElementListeners(this.eViewport,{scroll:e})})}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){let e=t=>{this.dragService.isDragging()&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(e=!1){let t=this.getCenterWidth(),n=this.getCenterViewportScrollLeft();this.columnViewportService.setScrollPosition(t,n,e)}getCenterWidth(){return fp(this.eViewport)}getCenterViewportScrollLeft(){return Oy(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){let t=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return aH(this.eViewport)}getViewportScrollLeft(){return Oy(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||Ane(this.eViewport)}getViewportElement(){return this.eViewport}setContainerTranslateX(e){this.eContainer.style.transform=`translateX(${e}px)`}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){Ny(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){let e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){let t=this.options.getRowCtrls(this.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}let n=this.gos.isDomLayout("print"),s=this.gos.get("embedFullWidthRows")||n,r=t.filter(o=>{let a=o.isFullWidth();return this.options.fullWidth?!s&&a:s||!a});this.comp.setRowCtrls({rowCtrls:r,useFlushSync:e})}};function aoe(e){let t;return e.type==="center"?t=`<div class="${e.viewport}" data-ref="eViewport" role="presentation">
                <div class="${e.container}" data-ref="eContainer"></div>
            </div>`:t=`<div class="${e.container}" data-ref="eContainer"></div>`,t}var loe=class extends Ke{constructor(){super(),this.eViewport=ie,this.eContainer=ie,this.rowComps={},this.name=Ke.elementGettingCreated.getAttribute("name"),this.options=t2(this.name),this.setTemplate(aoe(this.options))}wireBeans(e){this.beans=e}postConstruct(){let e={setViewportHeight:n=>this.eViewport.style.height=n,setRowCtrls:({rowCtrls:n})=>this.setRowCtrls(n),setDomOrder:n=>{this.domOrder=n},setContainerWidth:n=>this.eContainer.style.width=n,setOffsetTop:n=>this.eContainer.style.transform=`translateY(${n})`};this.createManagedBean(new ooe(this.name)).setComp(e,this.eContainer,this.eViewport)}destroy(){this.setRowCtrls([]),super.destroy()}setRowCtrls(e){let t=B({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;let n=i=>{let s=i.getInstanceId(),r=t[s];if(r)this.rowComps[s]=r,delete t[s],this.ensureDomOrder(r.getGui());else{if(!i.getRowNode().displayed)return;let o=new Cre(i,this.beans,this.options.type);this.rowComps[s]=o,this.appendRow(o.getGui())}};e.forEach(n),Pa(t).forEach(i=>{this.eContainer.removeChild(i.getGui()),i.destroy()}),Ri(this.eContainer,"rowgroup")}appendRow(e){this.domOrder?Ine(this.eContainer,e,this.lastPlacedElement):this.eContainer.appendChild(e),this.lastPlacedElement=e}ensureDomOrder(e){this.domOrder&&(lH(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)}},coe={selector:"AG-ROW-CONTAINER",component:loe};function Zf(e){return e.map(t=>`<ag-row-container name="${t}"></ag-row-container>`).join("")}var uoe=`<div class="ag-root ag-unselectable" role="treegrid">
        <ag-header-root></ag-header-root>
        <div class="ag-floating-top" data-ref="eTop" role="presentation">
            ${Zf(["topLeft","topCenter","topRight","topFullWidth"])}
        </div>
        <div class="ag-body" data-ref="eBody" role="presentation">
            <div class="ag-body-viewport" data-ref="eBodyViewport" role="presentation">
            ${Zf(["left","center","right","fullWidth"])}
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" data-ref="eStickyTop" role="presentation">
            ${Zf(["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])}
        </div>
        <div class="ag-sticky-bottom" data-ref="eStickyBottom" role="presentation">
            ${Zf(["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])}
        </div>
        <div class="ag-floating-bottom" data-ref="eBottom" role="presentation">
            ${Zf(["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])}
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`,doe=class extends Ke{constructor(){super(uoe,[lre,ure,hre,ore,coe]),this.eBodyViewport=ie,this.eStickyTop=ie,this.eStickyBottom=ie,this.eTop=ie,this.eBottom=ie,this.eBody=ie}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.rangeService=e.rangeService}postConstruct(){let e=(n,i)=>{let s=`${n}px`;i.style.minHeight=s,i.style.height=s},t={setRowAnimationCssOnBodyViewport:(n,i)=>this.setRowAnimationCssOnBodyViewport(n,i),setColumnCount:n=>vne(this.getGui(),n),setRowCount:n=>mne(this.getGui(),n),setTopHeight:n=>e(n,this.eTop),setBottomHeight:n=>e(n,this.eBottom),setTopDisplay:n=>this.eTop.style.display=n,setBottomDisplay:n=>this.eBottom.style.display=n,setStickyTopHeight:n=>this.eStickyTop.style.height=n,setStickyTopTop:n=>this.eStickyTop.style.top=n,setStickyTopWidth:n=>this.eStickyTop.style.width=n,setStickyBottomHeight:n=>this.eStickyBottom.style.height=n,setStickyBottomBottom:n=>this.eStickyBottom.style.bottom=n,setStickyBottomWidth:n=>this.eStickyBottom.style.width=n,setColumnMovingCss:(n,i)=>this.addOrRemoveCssClass(n,i),updateLayoutClasses:(n,i)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach(r=>{r.toggle("ag-layout-auto-height",i.autoHeight),r.toggle("ag-layout-normal",i.normal),r.toggle("ag-layout-print",i.print)}),this.addOrRemoveCssClass("ag-layout-auto-height",i.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",i.normal),this.addOrRemoveCssClass("ag-layout-print",i.print)},setAlwaysVerticalScrollClass:(n,i)=>this.eBodyViewport.classList.toggle(XH,i),registerBodyViewportResizeListener:n=>{let i=this.resizeObserverService.observeResize(this.eBodyViewport,n);this.addDestroyFunc(()=>i())},setPinnedTopBottomOverflowY:n=>this.eTop.style.overflowY=this.eBottom.style.overflowY=n,setCellSelectableCss:(n,i)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(s=>s.classList.toggle(n,i))},setBodyViewportWidth:n=>this.eBodyViewport.style.width=n};this.ctrl=this.createManagedBean(new mre),this.ctrl.setComp(t,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop,this.eStickyBottom),(this.rangeService&&this.gos.get("enableRangeSelection")||this.gos.get("rowSelection")==="multiple")&&gne(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,t){let n=this.eBodyViewport.classList;n.toggle("ag-row-animation",t),n.toggle("ag-row-no-animation",!t)}getFloatingTopBottom(){return[this.eTop,this.eBottom]}},hoe={selector:"AG-GRID-BODY",component:doe},foe=class extends L{constructor(){super(...arguments),this.beanName="scrollVisibleService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnAnimationService=e.columnAnimationService}postConstruct(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)})}onDisplayedColumnsChanged(){this.update()}onDisplayedColumnsWidthChanged(){this.update()}update(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateImpl())}):this.updateImpl()}updateImpl(){let e=this.ctrlsService.get("center");if(!e||this.columnAnimationService.isActive())return;let t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t)}setScrollsVisible(e){if(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing){this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing;let n={type:"scrollVisibilityChanged"};this.eventService.dispatchEvent(n)}}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}},wG="__ag_grid_instance",s2=class r2 extends L{constructor(){super(...arguments),this.beanName="mouseEventService",this.gridInstanceId=r2.gridInstanceSequence.next()}wireBeans(t){this.ctrlsService=t.ctrlsService}stampTopLevelGridCompWithGridInstance(t){t[wG]=this.gridInstanceId}getRenderedCellForEvent(t){return vR(this.gos,t.target,Yl.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(t){return this.isElementInThisGrid(t.target)}isElementInThisGrid(t){let n=t;for(;n;){let i=n[wG];if(q(i))return i===this.gridInstanceId;n=n.parentElement}return!1}getCellPositionForEvent(t){let n=this.getRenderedCellForEvent(t);return n?n.getCellPosition():null}getNormalisedPosition(t){let n=this.gos.isDomLayout("normal"),i=t,s,r;if(i.clientX!=null||i.clientY!=null?(s=i.clientX,r=i.clientY):(s=i.x,r=i.y),n){let o=this.ctrlsService.getGridBodyCtrl(),a=o.getScrollFeature().getVScrollPosition(),l=o.getScrollFeature().getHScrollPosition();s+=l.left,r+=a.top}return{x:s,y:r}}};s2.gridInstanceSequence=new md;var poe=s2,goe=class extends L{constructor(){super(),this.beanName="navigationService",this.onPageDown=dG(this.onPageDown,100),this.onPageUp=dG(this.onPageUp,100)}wireBeans(e){this.mouseEventService=e.mouseEventService,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.ctrlsService=e.ctrlsService,this.rowRenderer=e.rowRenderer,this.headerNavigationService=e.headerNavigationService,this.rowPositionUtils=e.rowPositionUtils,this.cellNavigationService=e.cellNavigationService,this.pinnedRowModel=e.pinnedRowModel,this.rangeService=e.rangeService}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){let n=e.key,i=e.altKey,s=e.ctrlKey||e.metaKey,r=!!this.rangeService&&e.shiftKey,o=this.mouseEventService.getCellPositionForEvent(e),a=!1;switch(n){case N.PAGE_HOME:case N.PAGE_END:!s&&!i&&(this.onHomeOrEndKey(n),a=!0);break;case N.LEFT:case N.RIGHT:case N.UP:case N.DOWN:if(!o)return!1;s&&!i&&!r&&(this.onCtrlUpDownLeftRight(n,o),a=!0);break;case N.PAGE_DOWN:case N.PAGE_UP:!s&&!i&&(a=this.handlePageUpDown(n,o,t));break}return a&&e.preventDefault(),a}handlePageUpDown(e,t,n){return n&&(t=this.focusService.getFocusedCell()),t?(e===N.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo(e){let{scrollIndex:t,scrollType:n,scrollColumn:i,focusIndex:s,focusColumn:r}=e;q(i)&&!i.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(i),q(t)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t,n),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(s),this.focusService.setFocusedCell({rowIndex:s,column:r,rowPinned:null,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:s,rowPinned:null,column:r})}onPageDown(e){let n=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.getViewportHeight(),s=this.pageBoundsService.getPixelOffset(),r=n.top+i,o=this.rowModel.getRowIndexAtPixel(r+s);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,o):this.navigateToNextPage(e,o)}onPageUp(e){let n=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.pageBoundsService.getPixelOffset(),s=n.top,r=this.rowModel.getRowIndexAtPixel(s+i);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,r,!0):this.navigateToNextPage(e,r,!0)}navigateToNextPage(e,t,n=!1){let i=this.getViewportHeight(),s=this.pageBoundsService.getFirstRow(),r=this.pageBoundsService.getLastRow(),o=this.pageBoundsService.getPixelOffset(),a=this.rowModel.getRow(e.rowIndex),l=n?a?.rowHeight-i-o:i-o,c=a?.rowTop+l,u=this.rowModel.getRowIndexAtPixel(c+o);if(u===e.rowIndex){let f=n?-1:1;t=u=e.rowIndex+f}let h;n?(h="bottom",u<s&&(u=s),t<s&&(t=s)):(h="top",u>r&&(u=r),t>r&&(t=r)),this.isRowTallerThanView(u)&&(t=u,h="top"),this.navigateTo({scrollIndex:t,scrollType:h,scrollColumn:null,focusIndex:u,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,n=!1){this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{let i=this.getNextFocusIndexForAutoHeight(e,n);this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:i,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){let n=t?-1:1,i=this.getViewportHeight(),s=this.pageBoundsService.getLastRow(),r=0,o=e.rowIndex;for(;o>=0&&o<=s;){let a=this.rowModel.getRow(o);if(a){let l=a.rowHeight??0;if(r+l>i)break;r+=l}o+=n}return Math.max(0,Math.min(o,s))}getViewportHeight(){let{gridBodyCtrl:e,center:t}=this.ctrlsService.getParams(),n=e.getScrollFeature().getVScrollPosition(),i=this.gos.getScrollbarWidth(),s=n.bottom-n.top;return t.isHorizontalScrollShowing()&&(s-=i),s}isRowTallerThanView(e){let t=this.rowModel.getRow(e);if(!t)return!1;let n=t.rowHeight;return typeof n!="number"?!1:n>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){let n=this.cellNavigationService.getNextCellToFocus(e,t,!0),{rowIndex:i}=n,s=n.column;this.navigateTo({scrollIndex:i,scrollType:null,scrollColumn:s,focusIndex:i,focusColumn:s})}onHomeOrEndKey(e){let t=e===N.PAGE_HOME,n=this.visibleColsService.getAllCols(),i=t?n[0]:We(n),s=t?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow();this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:i,focusIndex:s,focusColumn:i})}onTabKeyDown(e,t){let n=t.shiftKey,i=this.tabToNextCellCommon(e,n,t);if(i!==!1){i&&t.preventDefault();return}if(n){let{rowIndex:s,rowPinned:r}=e.getRowPosition();(r?s===0:s===this.pageBoundsService.getFirstRow())&&(this.gos.get("headerHeight")===0||this.gos.get("suppressHeaderFocus")?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else e instanceof Yl&&e.focusCell(!0),this.focusService.focusNextGridCoreContainer(n)&&t.preventDefault()}tabToNextCell(e,t){let n=this.focusService.getFocusedCell();if(!n)return!1;let i=this.getCellByPosition(n);return!i&&(i=this.rowRenderer.getRowByPosition(n),!i||!i.isFullWidth())?!1:!!this.tabToNextCellCommon(i,e,t)}tabToNextCellCommon(e,t,n){let i=e.isEditing();if(!i&&e instanceof Yl){let o=e.getRowCtrl();o&&(i=o.isEditing())}let s;return i?this.gos.get("editType")==="fullRow"?s=this.moveToNextEditingRow(e,t,n):s=this.moveToNextEditingCell(e,t,n):s=this.moveToNextCellNotEditing(e,t),s===null?s:s||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,t,n=null){let i=e.getCellPosition();e.getGui().focus(),e.stopEditing();let s=this.findNextCellToFocusOn(i,t,!0);return s===!1?null:s==null?!1:(s.startEditing(null,!0,n),s.focusCell(!1),!0)}moveToNextEditingRow(e,t,n=null){let i=e.getCellPosition(),s=this.findNextCellToFocusOn(i,t,!0);if(s===!1)return null;if(s==null)return!1;let r=s.getCellPosition(),o=this.isCellEditable(i),a=this.isCellEditable(r),l=r&&i.rowIndex===r.rowIndex&&i.rowPinned===r.rowPinned;return o&&e.setFocusOutOnEditor(),l||(e.getRowCtrl().stopEditing(),s.getRowCtrl().startRowEditing(void 0,void 0,n)),a?(s.setFocusInOnEditor(),s.focusCell()):s.focusCell(!0),!0}moveToNextCellNotEditing(e,t){let n=this.visibleColsService.getAllCols(),i;e instanceof Jl?i=ae(B({},e.getRowPosition()),{column:t?n[0]:We(n)}):i=e.getCellPosition();let s=this.findNextCellToFocusOn(i,t,!1);if(s===!1)return null;if(s instanceof Yl)s.focusCell(!0);else if(s)return this.tryToFocusFullWidthRow(s.getRowPosition(),t);return q(s)}findNextCellToFocusOn(e,t,n){let i=e;for(;;){e!==i&&(e=i),t||(i=this.getLastCellOfColSpan(i)),i=this.cellNavigationService.getNextTabbedCell(i,t);let s=this.gos.getCallback("tabToNextCell");if(q(s)){let l=s({backwards:t,editing:n,previousCellPosition:e,nextCellPosition:i||null});if(l===!0||l===null)l===null&&j("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),i=e;else{if(l===!1)return!1;i={rowIndex:l.rowIndex,column:l.column,rowPinned:l.rowPinned}}}if(!i)return null;if(i.rowIndex<0){let a=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a+i.rowIndex,column:i.column},fromCell:!0}),null}let r=this.gos.get("editType")==="fullRow";if(n&&!r&&!this.isCellEditable(i))continue;this.ensureCellVisible(i);let o=this.getCellByPosition(i);if(!o){let a=this.rowRenderer.getRowByPosition(i);if(!a||!a.isFullWidth()||n)continue;return a}if(!o.isSuppressNavigable())return this.rangeService?.setRangeToCell(i),o}}isCellEditable(e){let t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}getCellByPosition(e){let t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return e.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):e.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.rowModel.getRow(e.rowIndex)}navigateToNextCell(e,t,n,i){let s=n,r=!1;for(;s&&(s===n||!this.isValidNavigateCell(s));)this.gos.get("enableRtl")?t===N.LEFT&&(s=this.getLastCellOfColSpan(s)):t===N.RIGHT&&(s=this.getLastCellOfColSpan(s)),s=this.cellNavigationService.getNextCellToFocus(t,s),r=Ve(s);if(r&&e&&e.key===N.UP&&(s={rowIndex:-1,rowPinned:null,column:n.column}),i){let a=this.gos.getCallback("navigateToNextCell");if(q(a)){let c=a({key:t,previousCellPosition:n,nextCellPosition:s||null,event:e});q(c)?s={rowPinned:c.rowPinned,rowIndex:c.rowIndex,column:c.column}:s=null}}if(!s)return;if(s.rowIndex<0){let a=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a+s.rowIndex,column:n.column},event:e||void 0,fromCell:!0});return}let o=this.getNormalisedPosition(s);o?this.focusPosition(o):this.tryToFocusFullWidthRow(s)}getNormalisedPosition(e){this.ensureCellVisible(e);let t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t=!1){let n=this.visibleColsService.getAllCols(),i=this.rowRenderer.getRowByPosition(e);if(!i||!i.isFullWidth())return!1;let s=this.focusService.getFocusedCell(),r={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?We(n):n[0])};this.focusPosition(r);let o=s!=null?this.rowPositionUtils.before(r,s):!1,a={type:"fullWidthRowFocused",rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:r.column,isFullWidthCell:!0,fromBelow:o};return this.eventService.dispatchEvent(a),!0}focusPosition(e){this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),this.rangeService?.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){let t=this.getCellByPosition(e);if(!t)return e;let n=t.getColSpanningList();return n.length===1?e:{rowIndex:e.rowIndex,column:We(n),rowPinned:e.rowPinned}}ensureCellVisible(e){let t=this.gos.isGroupRowsSticky(),n=this.rowModel.getRow(e.rowIndex);!(t&&n?.sticky)&&Ve(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}},moe=class extends L{constructor(){super(...arguments),this.beanName="horizontalResizeService"}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService}addResizeBar(e){let t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(t),()=>this.dragService.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();let n=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(n)}setResizeIcons(){let e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e,t){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){let e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},voe=class extends L{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupService=e.popupService,this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.menuService=e.menuService}hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,t,n){this.showPopup(e,i=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:n,mouseEvent:t,ePopup:i})},n,t.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(e,t,n){let i=-1,s="left",r=this.menuService.isLegacyMenuEnabled();!r&&this.gos.get("enableRtl")&&(i=1,s="right");let o=r?void 0:4*i,a=r?void 0:4;this.showPopup(e,l=>{this.popupService.positionPopupByComponent({type:n,eventSource:t,ePopup:l,nudgeX:o,nudgeY:a,alignSide:s,keepWithinBounds:!0,position:"under",column:e})},n,t,r)}showPopup(e,t,n,i,s){let r=e?this.createBean(new Aie(e,"COLUMN_MENU")):void 0;if(this.activeMenu=r,!r?.hasFilter()||!e)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");let o=document.createElement("div");Ri(o,"presentation"),o.classList.add("ag-menu"),s||o.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(o,{keydown:v=>this.trapFocusWithin(v,o)}),o.appendChild(r?.getGui());let a,l=()=>r?.afterGuiDetached(),c=this.menuService.isColumnMenuAnchoringEnabled()?i??this.ctrlsService.getGridBodyCtrl().getGui():void 0,u=v=>{e.setMenuVisible(!1,"contextMenu");let y=v instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),y&&i&&Js(i)){let C=this.focusService.findTabbableParent(i);C&&C.focus()}l(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,n,e)},h=this.localeService.getLocaleTextFunc(),f=s&&n!=="columnFilter"?h("ariaLabelColumnMenu","Column Menu"):h("ariaLabelColumnFilter","Column Filter"),p=this.popupService.addPopup({modal:!0,eChild:o,closeOnEsc:!0,closedCallback:u,positionCallback:()=>t(o),anchorToElement:c,ariaLabel:f});p&&(this.hidePopup=a=p.hideFunc),r.afterInit().then(()=>{t(o),r.afterGuiAttached({container:n,hidePopup:a})}),e.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,n,e)}trapFocusWithin(e,t){e.key!==N.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,n){let i={type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:n??null};this.eventService.dispatchEvent(i)}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},Coe=50,yoe=class extends L{constructor(){super(...arguments),this.beanName="resizeObserverService",this.polyfillFunctions=[]}observeResize(e,t){let n=this.gos.getWindow(),i=()=>{let a=new n.ResizeObserver(t);return a.observe(e),()=>a.disconnect()},s=()=>{let a=e?.clientWidth??0,l=e?.clientHeight??0,c=!0,u=()=>{if(c){let h=e?.clientWidth??0,f=e?.clientHeight??0;(h!==a||f!==l)&&(a=h,l=f,t()),this.doNextPolyfillTurn(u)}};return u(),()=>c=!1},r=this.gos.get("suppressBrowserResizeObserver");return!!n.ResizeObserver&&!r?i():this.getFrameworkOverrides().wrapIncoming(()=>s(),"resize-observer")}doNextPolyfillTurn(e){this.polyfillFunctions.push(e),this.schedulePolyfill()}schedulePolyfill(){if(this.polyfillScheduled)return;let e=()=>{let t=this.polyfillFunctions;this.polyfillScheduled=!1,this.polyfillFunctions=[],t.forEach(n=>n())};this.polyfillScheduled=!0,window.setTimeout(e,Coe)}},woe=class extends L{constructor(){super(...arguments),this.beanName="animationFrameService",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}setScrollTop(e){let t=this.gos.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&e===0){let n=this.paginationService?.getCurrentPage()??0;n!==this.lastPage&&(this.lastPage=n,this.scrollGoingDown=!0)}this.lastScrollTop=e}postConstruct(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){this.useAnimationFrame===!1&&j(`AnimationFrameService.${e} called but animation frames are off`)}createTask(e,t,n){this.verifyAnimationFrameOn(n);let i={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[n],i),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;let t=this.scrollGoingDown?1:-1;e.list.sort((n,i)=>n.index!==i.index?t*(i.index-n.index):i.createOrder-n.createOrder),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");let t=this.createTasksP1,n=t.list,i=this.createTasksP2,s=i.list,r=this.destroyTasks,o=new Date().getTime(),a=new Date().getTime()-o,l=e<=0,c=this.ctrlsService.getGridBodyCtrl();for(;l||a<e;){if(!c.getScrollFeature().scrollGridIfNeeded()){let h;if(n.length)this.sortTaskList(t),h=n.pop().task;else if(s.length)this.sortTaskList(i),h=s.pop().task;else if(r.length)h=r.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(h)||h()}a=new Date().getTime()-o}n.length||s.length||r.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){let e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){let t=this.gos.getWindow();t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let t=!1;return()=>{if(!this.isOn()){window.setTimeout(e,0);return}t||(t=!0,this.addDestroyTask(()=>{t=!1,e()}))}}};var Soe=class extends L{constructor(){super(...arguments),this.beanName="expansionService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.isClientSideRowModel=this.rowModel.getType()==="clientSide"}expandRows(e){if(!this.isClientSideRowModel)return;let t=new Set(e);this.rowModel.forEachNode(n=>{n.id&&t.has(n.id)&&(n.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){let e=[];return this.rowModel.forEachNode(({expanded:t,id:n})=>{t&&n&&e.push(n)}),e}expandAll(e){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(e)}setRowNodeExpanded(e,t,n,i){e&&(n&&e.parent&&e.parent.level!==-1&&this.setRowNodeExpanded(e.parent,t,n,i),e.setExpanded(t,void 0,i))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}},_oe=class extends L{constructor(){super(...arguments),this.beanName="menuService"}wireBeans(e){this.filterMenuFactory=e.filterMenuFactory,this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.filterManager=e.filterManager,this.rowRenderer=e.rowRenderer,this.columnChooserFactory=e.columnChooserFactory,this.contextMenuFactory=e.contextMenuFactory,this.enterpriseMenuFactory=e.enterpriseMenuFactory}postConstruct(){this.activeMenuFactory=this.enterpriseMenuFactory??this.filterMenuFactory}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){let t=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(t,e,e.containerType,!0)}showHeaderContextMenu(e,t,n){this.activeMenuFactory.showMenuAfterContextMenuEvent(e,t,n)}getContextMenuPosition(e,t){let n=this.getRowCtrl(e),i=this.getCellGui(n,t);if(!i)return n?{x:0,y:n.getRowYPosition()}:{x:0,y:0};let s=i.getBoundingClientRect();return{x:s.x+s.width/2,y:s.y+s.height/2}}showContextMenu(e){let{rowNode:t}=e,n=e.column,{anchorToElement:i,value:s}=e;t&&n&&s==null&&(s=t.getValueFromValueService(n)),i==null&&(i=this.getContextMenuAnchorElement(t,n)),this.contextMenuFactory?.onContextMenu(e.mouseEvent??null,e.touchEvent??null,t??null,n??null,s,i)}showColumnChooser(e){this.columnChooserFactory?.showColumnChooser(e)}hidePopupMenu(){this.contextMenuFactory?.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){this.columnChooserFactory?.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(e){let{suppressMenu:t,suppressHeaderMenuButton:n}=e.getColDef();return!(n??t)&&this.activeMenuFactory.isMenuEnabled(e)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&!!this.filterManager?.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){return!e?.getColDef().suppressHeaderContextMenu&&this.getColumnMenuType()==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){let e=!this.isSuppressMenuHide();return!(xa()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return!!this.filterManager?.isFilterAllowed(e)&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return this.getColumnMenuType()==="new"}isLegacyMenuEnabled(){return this.getColumnMenuType()==="legacy"}isFloatingFilterButtonEnabled(e){let t=e.getColDef(),n=t.floatingFilterComponentParams?.suppressFilterButton;return n!=null&&j("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),t.suppressFloatingFilterButton==null?!n:!t.suppressFloatingFilterButton}getColumnMenuType(){return this.gos.get("columnMenu")}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){let e=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()?this.gos.exists("suppressMenuHide")?e:!1:e}showColumnMenuCommon(e,t,n,i){let{positionBy:s}=t,r=t.column;if(s==="button"){let{buttonElement:o}=t;e.showMenuAfterButtonClick(r,o,n,i)}else if(s==="mouse"){let{mouseEvent:o}=t;e.showMenuAfterMouseEvent(r,o,n,i)}else r&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(r,"auto"),this.animationFrameService.requestAnimationFrame(()=>{let o=this.ctrlsService.getHeaderRowContainerCtrl(r.getPinned()).getHeaderCtrlForColumn(r);e.showMenuAfterButtonClick(r,o.getAnchorElementForMenu(i),n,!0)}))}getRowCtrl(e){let{rowIndex:t,rowPinned:n}=e||{};if(t!=null)return this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:n})||void 0}getCellGui(e,t){return!e||!t?void 0:e.getCellCtrl(t)?.getGui()||void 0}getContextMenuAnchorElement(e,t){let n=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),i=this.getRowCtrl(e);if(!i)return n;let s=this.getCellGui(i,t);return s||(i.isFullWidth()?i.getFullWidthElement():n)}},boe=class extends $l{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){let n=super.setValue(e,t);return this.eInput.value=e,n}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},Eoe={selector:"AG-INPUT-TEXT-AREA",component:boe},Doe=class extends yd{constructor(){super(`<div class="ag-large-text">
        <ag-input-text-area data-ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`,[Eoe]),this.eTextArea=ie}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),q(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){let t=e.key;(t===N.LEFT||t===N.UP||t===N.RIGHT||t===N.DOWN||e.shiftKey&&t===N.ENTER)&&e.stopPropagation()}afterGuiAttached(){let e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){let e=this.eTextArea.getValue();return!q(e)&&!q(this.params.value)?this.params.value:this.params.parseValue(e)}},Toe=class extends yd{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){this.gos.setDomData(this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){let e=this.getGui(),t=this.params,n=i=>{AR(this.gos,i,t.node,t.column,!0)||t.onKeyDown(i)};this.addManagedElementListeners(e,{keydown:n})}},Roe=class extends yd{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" data-ref="eSelect"></ag-select>
            </div>`,[kie]),this.eSelect=ie,this.startedByEnter=!1}wireBeans(e){this.valueService=e.valueService}init(e){this.focusAfterAttached=e.cellStartedEdit;let{eSelect:t,valueService:n,gos:i}=this,{values:s,value:r,eventKey:o}=e;if(Ve(s)){j("no values found for select cellEditor");return}this.startedByEnter=o!=null?o===N.ENTER:!1;let a=!1;s.forEach(h=>{let f={value:h},p=n.formatValue(e.column,null,h),v=p!=null;f.text=v?p:h,t.addOption(f),a=a||r===h}),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);let{valueListGap:l,valueListMaxWidth:c,valueListMaxHeight:u}=e;l!=null&&t.setPickerGap(l),u!=null&&t.setPickerMaxHeight(u),c!=null&&t.setPickerMaxWidth(c),i.get("editType")!=="fullRow"&&this.addManagedListeners(this.eSelect,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}},Hy=class extends yd{constructor(e){super(`
            <div class="ag-cell-edit-wrapper">
                ${e.getTemplate()}
            </div>`,e.getAgComponents()),this.cellEditorInput=e,this.eInput=ie}init(e){this.params=e;let t=this.eInput;this.cellEditorInput.init(t,e);let n;if(e.cellStartedEdit){this.focusAfterAttached=!0;let i=e.eventKey;i===N.BACKSPACE||e.eventKey===N.DELETE?n="":i&&i.length===1?n=i:(n=this.cellEditorInput.getStartValue(),i!==N.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,n=this.cellEditorInput.getStartValue();n!=null&&t.setStartValue(n),this.addManagedElementListeners(t.getGui(),{keydown:i=>{let{key:s}=i;(s===N.PAGE_UP||s===N.PAGE_DOWN)&&i.preventDefault()}})}afterGuiAttached(){let e=this.localeService.getLocaleTextFunc(),t=this.eInput;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;Do()||t.getFocusableElement().focus();let n=t.getInputElement();this.highlightAllOnFocus?n.select():this.cellEditorInput.setCaret?.()}focusIn(){let e=this.eInput,t=e.getFocusableElement(),n=e.getInputElement();t.focus(),n.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}},Ioe=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" data-ref="eInput"></ag-input-text-field>'}getAgComponents(){return[By]}init(e,t){this.eInput=e,this.params=t,t.maxLength!=null&&e.setMaxLength(t.maxLength)}getValue(){let e=this.eInput.getValue();return!q(e)&&!q(this.params.value)?this.params.value:this.params.parseValue(e)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){let e=this.eInput.getValue(),t=q(e)&&e.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}},o2=class extends Hy{constructor(){super(new Ioe)}},Aoe=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" data-ref="eInput"></ag-input-number-field>'}getAgComponents(){return[$ie]}init(e,t){this.eInput=e,this.params=t,t.max!=null&&e.setMax(t.max),t.min!=null&&e.setMin(t.min),t.precision!=null&&e.setPrecision(t.precision),t.step!=null&&e.setStep(t.step);let n=e.getInputElement();t.preventStepping?e.addManagedElementListeners(n,{keydown:this.preventStepping}):t.showStepperButtons&&n.classList.add("ag-number-field-input-stepper")}preventStepping(e){(e.key===N.UP||e.key===N.DOWN)&&e.preventDefault()}getValue(){let e=this.eInput.getValue();if(!q(e)&&!q(this.params.value))return this.params.value;let t=this.params.parseValue(e);if(t==null)return t;if(typeof t=="string"){if(t==="")return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}},Moe=class extends Hy{constructor(){super(new Aoe)}},Poe=class extends tc{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();let e=Do();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){this.gos.getActiveDomElement()===this.eInput&&e.preventDefault()}setMin(e){let t=e instanceof Date?_s(e??null,!1)??void 0:e;return this.min===t?this:(this.min=t,_o(this.eInput,"min",t),this)}setMax(e){let t=e instanceof Date?_s(e??null,!1)??void 0:e;return this.max===t?this:(this.max=t,_o(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,_o(this.eInput,"step",e),this)}getDate(){if(this.eInput.validity.valid)return Ti(this.getValue())??void 0}setDate(e,t){this.setValue(_s(e??null,!1),t)}},a2={selector:"AG-INPUT-DATE-FIELD",component:Poe},Foe=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[a2]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){let e=this.eInput.getDate();return!q(e)&&!q(this.params.value)?this.params.value:e??null}getStartValue(){let{value:e}=this.params;if(e instanceof Date)return _s(e,!1)}},xoe=class extends Hy{constructor(){super(new Foe)}},Ooe=class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[a2]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){let e=this.formatDate(this.eInput.getDate());return!q(e)&&!q(this.params.value)?this.params.value:this.params.parseValue(e??"")}getStartValue(){return _s(this.parseDate(this.params.value??void 0)??null,!1)}parseDate(e){let t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):Ti(e)??void 0}formatDate(e){let t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):_s(e??null,!1)??void 0}},Noe=class extends Hy{wireBeans(e){this.dataTypeService=e.dataTypeService}constructor(){super(new Ooe(()=>this.dataTypeService))}},koe=class extends yd{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[KR]),this.eCheckbox=ie}init(e){this.params=e;let t=e.value??void 0;this.eCheckbox.setValue(t),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(this.eCheckbox,{fieldValueChanged:i=>this.setAriaLabel(i.selected)})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){let t=this.localeService.getLocaleTextFunc(),n=GR(t,e),i=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${i} (${n})`)}},np=class{constructor(e){this.cellValueChanges=e}},fR=class extends np{constructor(e,t,n,i){super(e),this.initialRange=t,this.finalRange=n,this.ranges=i}},Loe=10,SG=class{constructor(e){this.actionStack=[],this.maxStackSize=e||Loe,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},Voe=class extends L{constructor(){super(...arguments),this.beanName="undoRedoService",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{let t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},n=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,t),i=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(n||i||this.isPasting||this.isRangeInAction))return;let{rowPinned:r,rowIndex:o,column:a,oldValue:l,value:c}=e,u={rowPinned:r,rowIndex:o,columnId:a.getColId(),newValue:c,oldValue:l};this.cellValueChanges.push(u)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}wireBeans(e){this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.cellPositionUtils=e.cellPositionUtils,this.rowPositionUtils=e.rowPositionUtils,this.columnModel=e.columnModel,this.rangeService=e.rangeService}postConstruct(){if(!this.gos.get("undoRedoCellEditing"))return;let e=this.gos.get("undoRedoCellEditingLimit");if(e<=0)return;this.undoStack=new SG(e),this.redoStack=new SG(e),this.addListeners();let t=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:n=>{n.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:t,newColumnsLoaded:t,columnGroupOpened:t,columnRowGroupChanged:t,columnMoved:t,columnPinned:t,columnVisible:t,rowDragEnd:t}),this.ctrlsService.whenReady(n=>{this.gridBodyCtrl=n.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){let t={type:"undoStarted",source:e};this.eventService.dispatchEvent(t);let n=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo"),i={type:"undoEnded",source:e,operationPerformed:n};this.eventService.dispatchEvent(i)}redo(e){let t={type:"redoStarted",source:e};this.eventService.dispatchEvent(t);let n=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo"),i={type:"redoEnded",source:e,operationPerformed:n};this.eventService.dispatchEvent(i)}undoRedo(e,t,n,i,s){if(!e)return!1;let r=e.pop();return!r||!r.cellValueChanges?!1:(this.processAction(r,o=>o[i],s),r instanceof fR?this.processRange(this.rangeService,r.ranges||[r[n]]):this.processCell(r.cellValueChanges),t.push(r),!0)}processAction(e,t,n){e.cellValueChanges.forEach(i=>{let{rowIndex:s,rowPinned:r,columnId:o}=i,a={rowIndex:s,rowPinned:r},l=this.rowPositionUtils.getRowNode(a);l.displayed&&l.setDataValue(o,t(i),n)})}processRange(e,t){let n;e.removeAllCellRanges(!0),t.forEach((i,s)=>{if(!i)return;let r=i.startRow,o=i.endRow;s===t.length-1&&(n={rowPinned:r.rowPinned,rowIndex:r.rowIndex,columnId:i.startColumn.getColId()},this.setLastFocusedCell(n));let a={rowStartIndex:r.rowIndex,rowStartPinned:r.rowPinned,rowEndIndex:o.rowIndex,rowEndPinned:o.rowPinned,columnStart:i.startColumn,columns:i.columns};e.addCellRange(a)})}processCell(e){let t=e[0],{rowIndex:n,rowPinned:i}=t,s={rowIndex:n,rowPinned:i},r=this.rowPositionUtils.getRowNode(s),o={rowPinned:t.rowPinned,rowIndex:r.rowIndex,columnId:t.columnId};this.setLastFocusedCell(o,this.rangeService)}setLastFocusedCell(e,t){let{rowIndex:n,columnId:i,rowPinned:s}=e,r=this.gridBodyCtrl.getScrollFeature(),o=this.columnModel.getCol(i);if(!o)return;r.ensureIndexVisible(n),r.ensureColumnVisible(o);let a={rowIndex:n,column:o,rowPinned:s};this.focusService.setFocusedCell(ae(B({},a),{forceBrowserFocus:!0})),t?.setRangeToCell(a)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{let e=new np(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){let n=new np(this.cellValueChanges);this.pushActionsToUndoStack(n)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{let e=new np(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{let t=new fR(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;this.rangeService&&this.gos.get("enableRangeSelection")?e=new fR(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):e=new np(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1}})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}};function Boe(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition()}function Goe(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getHScrollPosition()}function l2(e,t,n="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(t,n),"ensureVisible")}function c2(e,t,n){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureIndexVisible(t,n),"ensureVisible")}function Hoe(e,t,n=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureNodeVisible(t,n),"ensureVisible")}function Uoe(e){e.undoRedoService?.undo("api")}function Woe(e){e.undoRedoService?.redo("api")}function joe(e,t={}){return e.rowRenderer.getCellEditorInstances(t).map(rp)}function zoe(e){return e.rowRenderer.getEditingCells()}function $oe(e,t=!1){e.rowRenderer.stopEditing(t)}function qoe(e,t){let n=e.columnModel.getCol(t.colKey);if(!n){j(`no column found for ${t.colKey}`);return}let i={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:n};t.rowPinned==null&&c2(e,t.rowIndex),l2(e,t.colKey);let r=e.navigationService.getCellByPosition(i);r&&(e.focusService.isCellFocused(i)||e.focusService.setFocusedCell(i),r.startRowOrCellEdit(t.key))}function Koe(e){return e.undoRedoService?.getCurrentUndoStackSize()??0}function Qoe(e){return e.undoRedoService?.getCurrentRedoStackSize()??0}var Yoe=class extends L{constructor(){super(...arguments),this.beanName="editService"}wireBeans(e){this.navigationService=e.navigationService,this.userComponentFactory=e.userComponentFactory,this.valueService=e.valueService}startEditing(e,t=null,n=!1,i=null){let s=this.createCellEditorParams(e,t,n),r=e.getColumn().getColDef(),o=this.userComponentFactory.getCellEditorDetails(r,s),a=o?.popupFromSelector!=null?o.popupFromSelector:!!r.cellEditorPopup,l=o?.popupPositionFromSelector!=null?o.popupPositionFromSelector:r.cellEditorPopupPosition;e.setEditing(!0,o),e.getComp().setEditDetails(o,a,l,this.gos.get("reactiveCustomComponents"));let c=e.createEvent(i,"cellEditingStarted");this.eventService.dispatchEvent(c)}stopEditing(e,t){let n=e.getComp(),{newValue:i,newValueExists:s}=this.takeValueFromCellEditor(t,n),r=e.getRowNode(),o=e.getColumn(),a=r.getValueFromValueService(o),l=!1;s&&(l=this.saveNewValue(e,a,i,r,o)),e.setEditing(!1,void 0),n.setEditDetails(),e.updateAndFormatValue(!1),e.refreshCell({forceRefresh:!0,suppressFlash:!0});let c=ae(B({},e.createEvent(null,"cellEditingStopped")),{oldValue:a,newValue:i,valueChanged:l});return this.eventService.dispatchEvent(c),l}handleColDefChanged(e){let t=e.getCellEditor();if(t?.refresh){let{eventKey:n,cellStartedEdit:i}=e.getEditCompDetails().params,s=this.createCellEditorParams(e,n,i),r=e.getColumn().getColDef(),o=this.userComponentFactory.getCellEditorDetails(r,s);t.refresh(o.params)}}setFocusOutOnEditor(e){let t=e.getComp().getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(e){let t=e.getComp().getCellEditor();t&&t.focusIn?t.focusIn():e.focusCell(!0)}stopEditingAndFocus(e,t=!1,n=!1){e.stopRowOrCellEdit(),e.focusCell(!0),t||this.navigateAfterEdit(n,e.getCellPosition())}createPopupEditorWrapper(e){return new Toe(e)}takeValueFromCellEditor(e,t){let n={newValueExists:!1};if(e)return n;let i=t.getCellEditor();return!i||i.isCancelAfterEnd&&i.isCancelAfterEnd()?n:{newValue:i.getValue(),newValueExists:!0}}saveNewValue(e,t,n,i,s){if(n===t)return!1;e.setSuppressRefreshCell(!0);let r=i.setDataValue(s,n,"edit");return e.setSuppressRefreshCell(!1),r}createCellEditorParams(e,t,n){let i=e.getColumn(),s=e.getRowNode();return this.gos.addGridCommonParams({value:s.getValueFromValueService(i),eventKey:t,column:i,colDef:i.getColDef(),rowIndex:e.getCellPosition().rowIndex,node:s,data:s.data,cellStartedEdit:n,onKeyDown:e.onKeyDown.bind(e),stopEditing:e.stopEditingAndFocus.bind(e),eGridCell:e.getGui(),parseValue:r=>this.valueService.parseValue(i,s,r,e.getValue()),formatValue:e.formatValue.bind(e)})}navigateAfterEdit(e,t){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){let i=e?N.UP:N.DOWN;this.navigationService.navigateToNextCell(null,i,t,!1)}}},Joe=class extends L{constructor(){super(...arguments),this.beanName="rowEditService"}startEditing(e,t=null,n=null,i=null){e.getAllCellCtrls().reduce((r,o)=>{let a=o===n;return a?o.startEditing(t,a,i):o.startEditing(null,a,i),r?!0:o.isEditing()},!1)&&this.setEditing(e,!0)}stopEditing(e,t=!1){let n=e.getAllCellCtrls(),i=e.isEditing();e.setStoppingRowEdit(!0);let s=!1;for(let r of n){let o=r.stopEditing(t);i&&!t&&!s&&o&&(s=!0)}if(s){let r=e.createRowEvent("rowValueChanged");this.eventService.dispatchEvent(r)}i&&this.setEditing(e,!1),e.setStoppingRowEdit(!1)}setEditing(e,t){e.setEditingRow(t),e.forEachGui(void 0,i=>i.rowComp.addOrRemoveCssClass("ag-row-editing",t));let n=t?e.createRowEvent("rowEditingStarted"):e.createRowEvent("rowEditingStopped");this.eventService.dispatchEvent(n)}},nc={version:Ee,moduleName:"@ag-grid-community/edit-core",beans:[Yoe]},Xoe={version:Ee,moduleName:"@ag-grid-community/edit-api",apiFunctions:{undoCellEditing:Uoe,redoCellEditing:Woe,getCellEditorInstances:joe,getEditingCells:zoe,stopEditing:$oe,startEditingCell:qoe,getCurrentUndoSize:Koe,getCurrentRedoSize:Qoe},dependantModules:[nc]},Zoe={version:Ee,moduleName:"@ag-grid-community/undo-redo-edit",beans:[Voe],dependantModules:[nc]},eae={version:Ee,moduleName:"@ag-grid-community/full-row-edit",beans:[Joe],dependantModules:[nc]},u2={version:Ee,moduleName:"@ag-grid-community/default-editor",userComponents:[{name:"agCellEditor",classImp:o2}],dependantModules:[nc]},tae={version:Ee,moduleName:"@ag-grid-community/data-type-editors",userComponents:[{name:"agTextCellEditor",classImp:o2},{name:"agNumberCellEditor",classImp:Moe},{name:"agDateCellEditor",classImp:xoe},{name:"agDateStringCellEditor",classImp:Noe},{name:"agCheckboxCellEditor",classImp:koe}],dependantModules:[u2]},nae={version:Ee,moduleName:"@ag-grid-community/select-editor",userComponents:[{name:"agSelectCellEditor",classImp:Roe}],dependantModules:[nc]},iae={version:Ee,moduleName:"@ag-grid-community/large-text-editor",userComponents:[{name:"agLargeTextCellEditor",classImp:Doe}],dependantModules:[nc]},sae={version:Ee,moduleName:"@ag-grid-community/all-editors",dependantModules:[u2,tae,nae,iae]},rae={version:Ee,moduleName:"@ag-grid-community/editing",dependantModules:[nc,Zoe,eae,sae,Xoe]},oae=class extends L{constructor(){super(...arguments),this.beanName="autoWidthCalculator"}wireBeans(e){this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){let n=this.getHeaderCellForColumn(e);if(!n)return-1;let i=this.rowRenderer.getAllCellsForColumn(e);return t||i.push(n),this.addElementsToContainerAndGetWidth(i)}getPreferredWidthForColumnGroup(e){let t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){let t=document.createElement("form");t.style.position="fixed";let n=this.centerRowContainerCtrl.getContainerElement();e.forEach(r=>this.cloneItemIntoDummy(r,t)),n.appendChild(t);let i=t.offsetWidth;n.removeChild(t);let s=this.getAutoSizePadding();return i+s}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(e){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(n=>{let i=n.getHtmlElementForColumnHeader(e);i!=null&&(t=i)}),t}cloneItemIntoDummy(e,t){let n=e.cloneNode(!0);n.style.width="",n.style.position="static",n.style.left="";let i=document.createElement("div"),s=i.classList;["ag-header-cell","ag-header-group-cell"].some(a=>n.classList.contains(a))?(s.add("ag-header","ag-header-row"),i.style.position="static"):s.add("ag-row");let o=e.parentElement;for(;o;){if(["ag-header-row","ag-row"].some(l=>o.classList.contains(l))){for(let l=0;l<o.classList.length;l++){let c=o.classList[l];c!="ag-row-position-absolute"&&s.add(c)}break}o=o.parentElement}i.appendChild(n),t.appendChild(i)}},aae=class extends L{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.topContainerHeight=0,this.bottomContainerHeight=0,this.extraTopHeight=0,this.extraBottomHeight=0}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.isClientSide=this.rowModel.getType()==="clientSide",this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl})}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}setOffsetTop(e){if(this.extraTopHeight===e)return;this.extraTopHeight=e;let t={type:"stickyTopOffsetChanged",offset:e};this.eventService.dispatchEvent(t)}setOffsetBottom(e){this.extraBottomHeight!==e&&(this.extraBottomHeight=e)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getExtraTopHeight(){return this.extraTopHeight}getExtraBottomHeight(){return this.extraBottomHeight}getLastPixelOfGroup(e){return this.isClientSide?this.getClientSideLastPixelOfGroup(e):this.getServerSideLastPixelOfGroup(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}getServerSideLastPixelOfGroup(e){if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(e.isExpandable()||e.footer){if(e.master)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let n=e.childStore?.getStoreBounds();return e.footer&&(n=e.sibling.childStore?.getStoreBounds()),(n?.heightPx??0)+(n?.topPx??0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(e){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(e.isExpandable()||e.footer){if(e.footer&&e.rowIndex===0)return Number.MAX_SAFE_INTEGER;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let i=e.footer?e.sibling:e;for(;i.isExpandable()&&i.expanded;)if(i.master)i=i.detailNode;else if(i.childrenAfterSort){if(i.childrenAfterSort.length===0)break;i=We(i.childrenAfterSort)}return i.rowTop+i.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(e){let t=e==="top",n=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,n);let i=t?this.rowRenderer.getFirstVisibleVerticalPixel()-this.extraTopHeight:this.rowRenderer.getLastVisibleVerticalPixel()-this.extraTopHeight,s=new Set,r=c=>{if(s.add(c),t){let u=this.getLastPixelOfGroup(c),h=i+n+c.rowHeight;u<h?c.stickyRowTop=n+(u-h):c.stickyRowTop=n}else{let u=this.getFirstPixelOfGroup(c),h=i-(n+c.rowHeight);u>h?c.stickyRowTop=n-(u-h):c.stickyRowTop=n}n=0,s.forEach(u=>{let h=u.stickyRowTop+u.rowHeight;n<h&&(n=h)})},o=this.areFooterRowsStickySuppressed(),a=this.gos.get("suppressGroupRowsSticky"),l=c=>c.displayed?c.footer?o===!0||o==="grand"&&c.level===-1||o==="group"&&c.level>-1?!1:!s.has(c):c.isExpandable()?a===!0?!1:!s.has(c)&&c.expanded:!1:!1;for(let c=0;c<100;c++){let u=i+n;t||(u=i-n);let h=this.rowModel.getRowIndexAtPixel(u),f=this.rowModel.getRow(h);if(f==null)break;let v=this.getStickyAncestors(f).find(C=>(t?C.rowIndex<h:C.rowIndex>h)&&l(C));if(v){r(v);continue}if((t?f.rowTop<u:f.rowTop+f.rowHeight>u)&&l(f)){r(f);continue}break}return t||s.forEach(c=>{c.stickyRowTop=n-(c.stickyRowTop+c.rowHeight)}),this.refreshNodesAndContainerHeight(e,s,n)}areFooterRowsStickySuppressed(){let e=this.gos.get("suppressStickyTotalRow");if(e===!0)return!0;let t=!!this.gos.get("groupIncludeFooter")||e==="group",n=!!this.gos.get("groupIncludeTotalFooter")||e==="grand";return t&&n?!0:n?"grand":t?"group":!1}canRowsBeSticky(){let e=this.gos.isGroupRowsSticky(),t=this.areFooterRowsStickySuppressed(),n=this.gos.get("suppressGroupRowsSticky");return e&&(!t||!n)}getStickyAncestors(e){let t=[],n=e.footer?e.sibling:e.parent;for(;n;)n.sibling&&t.push(n.sibling),t.push(n),n=n.parent;return t.reverse()}checkStickyRows(){let e=this.updateStickyRows("top"),t=this.updateStickyRows("bottom");return e||t}destroyStickyCtrls(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){let t=new Set;if(this.stickyTopRowCtrls.some(n=>n.getRowNode()===e)){for(let n=0;n<this.stickyTopRowCtrls.length;n++){let i=this.stickyTopRowCtrls[n].getRowNode();i!==e&&t.add(i)}this.refreshNodesAndContainerHeight("top",t,this.topContainerHeight)&&this.checkStickyRows();return}for(let n=0;n<this.stickyBottomRowCtrls.length;n++){let i=this.stickyBottomRowCtrls[n].getRowNode();i!==e&&t.add(i)}this.refreshNodesAndContainerHeight("bottom",t,this.bottomContainerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(e,t,n){let i=e==="top",s=i?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,r={},o=[];for(let f=0;f<s.length;f++){let p=s[f].getRowNode();if(!t.has(p)){r[p.id]=s[f],p.sticky=!1;continue}o.push(s[f])}let a=new Set;for(let f=0;f<o.length;f++)a.add(o[f].getRowNode());let l=[];t.forEach(f=>{a.has(f)||(f.sticky=!0,l.push(this.createRowCon(f,!1,!1)))});let c=!!l.length||o.length!==s.length;i?this.topContainerHeight!==n&&(this.topContainerHeight=n,this.gridBodyCtrl.setStickyTopHeight(n),c=!0):this.bottomContainerHeight!==n&&(this.bottomContainerHeight=n,this.gridBodyCtrl.setStickyBottomHeight(n),c=!0),this.destroyRowCtrls(r,!1);let u=[...o,...l];u.sort((f,p)=>p.getRowNode().rowIndex-f.getRowNode().rowIndex),i||u.reverse(),u.forEach(f=>f.setRowTop(f.getRowNode().stickyRowTop));let h=0;return i?(t.forEach(f=>{f.rowIndex<this.pageBoundsService.getFirstRow()&&(h+=f.rowHeight)}),h>this.topContainerHeight&&(h=this.topContainerHeight),this.setOffsetTop(h)):(t.forEach(f=>{f.rowIndex>this.pageBoundsService.getLastRow()&&(h+=f.rowHeight)}),h>this.bottomContainerHeight&&(h=this.bottomContainerHeight),this.setOffsetBottom(h)),c?(i?this.stickyTopRowCtrls=u:this.stickyBottomRowCtrls=u,!0):!1}ensureRowHeightsValid(){let e=!1,t=n=>{let i=n.getRowNode();if(i.rowHeightEstimated){let s=this.gos.getRowHeightForNode(i);i.setRowHeight(s.height),e=!0}};return this.stickyTopRowCtrls.forEach(t),this.stickyBottomRowCtrls.forEach(t),e}},lae=class extends L{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{let e=()=>{this.getAllCellCtrls().forEach(r=>r.onRangeSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(r=>r.updateRangeBordersIfRangeCount())},n=()=>{this.eventService.addEventListener("rangeSelectionChanged",e),this.eventService.addEventListener("columnMoved",t),this.eventService.addEventListener("columnPinned",t),this.eventService.addEventListener("columnVisible",t)},i=()=>{this.eventService.removeEventListener("rangeSelectionChanged",e),this.eventService.removeEventListener("columnMoved",t),this.eventService.removeEventListener("columnPinned",t),this.eventService.removeEventListener("columnVisible",t)};this.addDestroyFunc(()=>i()),this.addManagedPropertyListener("enableRangeSelection",r=>{r.currentValue?n():i()}),this.gos.get("enableRangeSelection")&&n()}}wireBeans(e){this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusService=e.focusService,this.beans=e,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){if(this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this)}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListeners(["suppressCellFocus","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.gos.isGroupRowsSticky()){let e=this.rowModel.getType();(e==="clientSide"||e==="serverSide")&&(this.stickyRowFeature=this.createManagedBean(new aae(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gos.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){let e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new cae(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){let e=Pa(this.rowCtrlsByRowIndex),t=Pa(this.zombieRowCtrls),n=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];t.length>0||n.length>0?this.allRowCtrls=[...e,...t,...n]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>{this.onCellFocusChanged(e)},cellFocusCleared:()=>this.onCellFocusChanged(),flashCells:e=>{this.getAllCellCtrls().forEach(t=>t.onFlashCells(e))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getCols().forEach(t=>{let n=l=>{this.getAllCellCtrls().forEach(c=>{c.getColumn()===t&&l(c)})},i=()=>{n(l=>l.onLeftChanged())},s=()=>{n(l=>l.onWidthChanged())},r=()=>{n(l=>l.onFirstRightPinnedChanged())},o=()=>{n(l=>l.onLastLeftPinnedChanged())},a=()=>{n(l=>l.onColDefChanged())};t.addEventListener("leftChanged",i),t.addEventListener("widthChanged",s),t.addEventListener("firstRightPinnedChanged",r),t.addEventListener("lastLeftPinnedChanged",o),t.addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{t.removeEventListener("leftChanged",i),t.removeEventListener("widthChanged",s),t.removeEventListener("firstRightPinnedChanged",r),t.removeEventListener("lastLeftPinnedChanged",o),t.removeEventListener("colDefChanged",a)})})}onDomLayoutChanged(){let e=this.gos.isDomLayout("print"),t=e||this.gos.get("embedFullWidthRows"),n=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,n&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;let e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){let t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsForColumn(e){let t=[];return this.getAllRowCtrls().forEach(n=>{let i=n.getCellElement(e);i&&t.push(i)}),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowNodes()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowNodes())}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,t){let n=Object.fromEntries(t.map(s=>[s.id,s])),i=Object.fromEntries(e.map(s=>[s.getRowNode().id,s]));for(let s=0;s<t.length;s++){let r=t[s],o=e[s];o&&n[o.getRowNode().id]===void 0&&(o.destroyFirstPass(),o.destroySecondPass()),r.id in i?(e[s]=i[r.id],delete i[r.id]):e[s]=new Jl(r,this.beans,!1,!1,this.printLayout)}e.length=t.length}onPinnedRowDataChanged(){let e={recycleRows:!0};this.redrawAfterModelUpdate(e)}redrawRow(e,t=!1){if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else if(this.cachedRowCtrls?.has(e)){this.cachedRowCtrls.removeRow(e);return}else{let n=i=>{let s=i[e.rowIndex];s&&s.getRowNode()===e&&(s.destroyFirstPass(),s.destroySecondPass(),i[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":n(this.topRowCtrls);break;case"bottom":n(this.bottomRowCtrls);break;default:n(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(e!=null){e?.forEach(n=>this.redrawRow(n,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){let t=e?.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(t==null)return null;let n=this.gos.getActiveDomElement(),i=this.gos.getDomData(n,Yl.DOM_DATA_KEY_CELL_CTRL),s=this.gos.getDomData(n,Jl.DOM_DATA_KEY_ROW_CTRL);return i||s?t:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();let t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);let n=!e.domLayoutChanged&&!!e.recycleRows,i=e.animate&&this.gos.isAnimateRows(),s=n?this.getRowsToRecycle():null;if(n||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature){this.stickyRowFeature.checkStickyRows();let r=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();r&&this.updateContainerHeights(r)}this.recycleRows(s,i),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){let t=e.newData||e.newPage,n=this.gos.get("suppressScrollOnNewData");t&&!n&&(this.gridBodyCtrl.getScrollFeature().scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(e=0){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let t=this.pageBoundsService.getCurrentPageHeight();t===0&&(t=1),this.rowContainerHeightService.setModelHeight(t+e)}getLockOnRefresh(){if(this.refreshInProgress){let e=this.frameworkOverrides.getLockOnRefreshError?.()??"";throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace."+e)}this.refreshInProgress=!0,this.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&setTimeout(()=>{this.focusService.setRestoreFocusedCell(e),this.onCellFocusChanged(this.gos.addGridCommonParams({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))})}stopEditing(e=!1){this.getAllRowCtrls().forEach(t=>{t.stopEditing(e)})}getAllCellCtrls(){let e=[],t=this.getAllRowCtrls(),n=t.length;for(let i=0;i<n;i++){let s=t[i].getAllCellCtrls(),r=s.length;for(let o=0;o<r;o++)e.push(s[o])}return e}getAllRowCtrls(){let e=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],t=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],n=[...this.topRowCtrls,...this.bottomRowCtrls,...e,...t];for(let i in this.rowCtrlsByRowIndex)n.push(this.rowCtrlsByRowIndex[i]);return n}addRenderedRowListener(e,t,n){let i=this.rowCtrlsByRowIndex[t];i&&i.addEventListener(e,n)}flashCells(e={}){this.getCellCtrls(e.rowNodes,e.columns).forEach(t=>t.flashCell(e))}refreshCells(e={}){let t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};for(let n of this.getCellCtrls(e.rowNodes,e.columns))n.refreshOrDestroyCell(t);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=null;this.stickyRowFeature&&DR()&&(t=this.getCellToRestoreFocusToAfterRefresh()||null);for(let n of this.getRowCtrls(e)){if(!n.isFullWidth())continue;n.refreshFullWidth()||this.redrawRow(n.getRowNode(),!0)}this.dispatchDisplayedRowsChanged(!1),t&&this.restoreFocusedCell(t)}getCellRendererInstances(e){let t=this.getCellCtrls(e.rowNodes,e.columns).map(s=>s.getCellRenderer()).filter(s=>s!=null);if(e.columns?.length)return t;let n=[],i=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(s=>{if(i&&!this.isRowInMap(s.getRowNode(),i)||!s.isFullWidth())return;let r=s.getFullWidthCellRenderers();for(let o=0;o<r.length;o++){let a=r[o];a!=null&&n.push(a)}}),[...n,...t]}getCellEditorInstances(e){let t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(n=>{let i=n.getCellEditor();i&&t.push(i)}),t}getEditingCells(){let e=[];return this.getAllCellCtrls().forEach(t=>{if(t.isEditing()){let n=t.getCellPosition();e.push(n)}}),e}mapRowNodes(e){if(!e)return;let t={top:{},bottom:{},normal:{}};return e.forEach(n=>{let i=n.id;switch(n.rowPinned){case"top":t.top[i]=n;break;case"bottom":t.bottom[i]=n;break;default:t.normal[i]=n;break}}),t}isRowInMap(e,t){let n=e.id;switch(e.rowPinned){case"top":return t.top[n]!=null;case"bottom":return t.bottom[n]!=null;default:return t.normal[n]!=null}}getRowCtrls(e){let t=this.mapRowNodes(e),n=this.getAllRowCtrls();return!e||!t?n:n.filter(i=>{let s=i.getRowNode();return this.isRowInMap(s,t)})}getCellCtrls(e,t){let n;q(t)&&(n={},t.forEach(s=>{let r=this.columnModel.getCol(s);q(r)&&(n[r.getId()]=!0)}));let i=[];return this.getRowCtrls(e).forEach(s=>{s.getAllCellCtrls().forEach(r=>{let o=r.getColumn().getId();n&&!n[o]||i.push(r)})}),i}destroy(){this.removeAllRowComps(),super.destroy()}removeAllRowComps(){let e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){let e=[];vs(this.rowCtrlsByRowIndex,(n,i)=>{i.getRowNode().id==null&&e.push(n)}),this.removeRowCtrls(e);let t={};return vs(this.rowCtrlsByRowIndex,(n,i)=>{let s=i.getRowNode();t[s.id]=i}),this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(n=>{let i=this.rowCtrlsByRowIndex[n];i&&(i.destroyFirstPass(t),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[n]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){let{afterScroll:t}=e,n;this.stickyRowFeature&&DR()&&(n=this.getCellToRestoreFocusToAfterRefresh()||void 0);let i=this.firstRenderedRow,s=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let r=!1;if(this.stickyRowFeature){r=this.stickyRowFeature.checkStickyRows();let a=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();a&&this.updateContainerHeights(a)}let o=this.firstRenderedRow!==i||this.lastRenderedRow!==s;if(!(t&&!r&&!o)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!r),n!=null)){let a=this.getCellToRestoreFocusToAfterRefresh();n!=null&&a==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(n))}}removeRowCompsNotToDraw(e,t){let n={};e.forEach(r=>n[r]=!0);let s=Object.keys(this.rowCtrlsByRowIndex).filter(r=>!n[r]);this.removeRowCtrls(s,t)}calculateIndexesToDraw(e){let t=Qie(this.firstRenderedRow,this.lastRenderedRow),n=(s,r)=>{let o=r.getRowNode().rowIndex;o!=null&&(o<this.firstRenderedRow||o>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(r)&&t.push(o)};vs(this.rowCtrlsByRowIndex,n),vs(e,n),t.sort((s,r)=>s-r);let i=[];for(let s=0;s<t.length;s++){let r=t[s],o=this.rowModel.getRow(r);o&&!o.sticky&&i.push(r)}return i}recycleRows(e,t=!1,n=!1){let i=this.calculateIndexesToDraw(e);(this.printLayout||n)&&(t=!1),this.removeRowCompsNotToDraw(i,!t);let s=[];i.forEach(r=>{let o=this.createOrUpdateRowCtrl(r,e,t,n);q(o)&&s.push(o)}),e&&(n&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){let t={type:"displayedRowsChanged",afterScroll:e};this.eventService.dispatchEvent(t)}onDisplayedColumnsChanged(){let e=this.visibleColsService.isPinningLeft(),t=this.visibleColsService.isPinningRight();(this.pinningLeft!==e||t!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){let e=[];this.getFullWidthRowCtrls().forEach(t=>{let n=t.getRowNode().rowIndex;e.push(n.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){let t=this.mapRowNodes(e);return this.getAllRowCtrls().filter(n=>{if(!n.isFullWidth())return!1;let i=n.getRowNode();return!(t!=null&&!this.isRowInMap(i,t))})}createOrUpdateRowCtrl(e,t,n,i){let s,r=this.rowCtrlsByRowIndex[e];if(r||(s=this.rowModel.getRow(e),q(s)&&q(t)&&t[s.id]&&s.alreadyRendered&&(r=t[s.id],t[s.id]=null)),!r)if(s||(s=this.rowModel.getRow(e)),q(s))r=this.createRowCon(s,n,i);else return;return s&&(s.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=r,r}destroyRowCtrls(e,t){let n=[];vs(e,(i,s)=>{if(s){if(this.cachedRowCtrls&&s.isCacheable()){this.cachedRowCtrls.addRow(s);return}s.destroyFirstPass(!t),t?(this.zombieRowCtrls[s.getInstanceId()]=s,n.push(()=>{s.destroySecondPass(),delete this.zombieRowCtrls[s.getInstanceId()]})):s.destroySecondPass()}}),t&&(n.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),kte(n))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){let e=this.getRowBuffer(),t=this.gos.getRowHeightAsNumber();return e*t}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let e,t;if(!this.rowModel.isRowsToRender())e=0,t=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.pageBoundsService.getFirstRow(),t=this.pageBoundsService.getLastRow();else{let a=this.getRowBufferInPixels(),l=this.ctrlsService.getGridBodyCtrl(),c=this.gos.get("suppressRowVirtualisation"),u=!1,h,f;do{let E=this.pageBoundsService.getPixelOffset(),{pageFirstPixel:T,pageLastPixel:R}=this.pageBoundsService.getCurrentPagePixelRange(),F=this.rowContainerHeightService.getDivStretchOffset(),$=l.getScrollFeature().getVScrollPosition(),k=$.top,b=$.bottom;c?(h=T+F,f=R+F):(h=Math.max(k+E-a,T)+F,f=Math.min(b+E+a,R)+F),this.firstVisibleVPixel=Math.max(k+E,T)+F,this.lastVisibleVPixel=Math.min(b+E,R)+F,u=this.ensureAllRowsInRangeHaveHeightsCalculated(h,f)}while(u);let p=this.rowModel.getRowIndexAtPixel(h),v=this.rowModel.getRowIndexAtPixel(f),y=this.pageBoundsService.getFirstRow(),C=this.pageBoundsService.getLastRow();p<y&&(p=y),v>C&&(v=C),e=p,t=v}let n=this.gos.isDomLayout("normal"),i=this.gos.get("suppressMaxRenderedRowRestriction"),s=Math.max(this.getRowBuffer(),500);n&&!i&&t-e>s&&(t=e+s);let r=e!==this.firstRenderedRow,o=t!==this.lastRenderedRow;if(r||o){this.firstRenderedRow=e,this.lastRenderedRow=t;let a={type:"viewportChanged",firstRow:e,lastRow:t};this.eventService.dispatchEvent(a)}}dispatchFirstDataRenderedEvent(){if(this.dataFirstRenderedFired)return;this.dataFirstRenderedFired=!0;let e={type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent(e)})}ensureAllRowsInRangeHaveHeightsCalculated(e,t){let n=this.pinnedRowModel?.ensureRowHeightsValid(),i=this.stickyRowFeature?.ensureRowHeightsValid(),s=this.rowModel.ensureRowHeightsValid(e,t,this.pageBoundsService.getFirstRow(),this.pageBoundsService.getLastRow());return(s||i)&&this.eventService.dispatchEvent({type:"recalculateRowBounds"}),i||s||n?(this.updateContainerHeights(),!0):!1}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){let i=e.getRowNode(),s=this.focusService.isRowNodeFocused(i),r=e.isEditing(),o=i.detail;return s||r||o?!!this.isRowPresent(i):!1}isRowPresent(e){return this.rowModel.isRowPresent(e)?this.paginationService?this.paginationService.isRowPresent(e):!0:!1}createRowCon(e,t,n){let i=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(i)return i;let s=this.gos.get("suppressAnimationFrame"),r=n&&!s&&!this.printLayout;return new Jl(e,this.beans,t,r,this.printLayout)}getRenderedNodes(){let e=this.rowCtrlsByRowIndex;return Object.values(e).map(t=>t.getRowNode())}getRowByPosition(e){let t,{rowIndex:n}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[n];break;case"bottom":t=this.bottomRowCtrls[n];break;default:t=this.rowCtrlsByRowIndex[n],t||(t=this.getStickyTopRowCtrls().find(i=>i.getRowNode().rowIndex===n)||null,t||(t=this.getStickyBottomRowCtrls().find(i=>i.getRowNode().rowIndex===n)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;let i=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!i}},cae=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){let t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e==null||e.id==null)return null;let t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.getRowNode()!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){let t=e.id,n=this.entriesMap[t];delete this.entriesMap[t],li(this.entriesList,n)}removeFromCache(e){let t=e.getRowNode().id;delete this.entriesMap[t],li(this.entriesList,e)}getEntries(){return this.entriesList}},uae=class extends L{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0}wireBeans(e){this.beans=e}postConstruct(){this.setPinnedTopRowData(),this.setPinnedBottomRowData(),this.addManagedPropertyListener("pinnedTopRowData",()=>this.setPinnedTopRowData()),this.addManagedPropertyListener("pinnedBottomRowData",()=>this.setPinnedBottomRowData()),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(e){let t=e==="top"?this.pinnedTopRows:this.pinnedBottomRows;return bn(t)}isRowsToRender(e){return!this.isEmpty(e)}getRowAtPixel(e,t){let n=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(bn(n))return 0;for(let i=0;i<n.length;i++){let s=n[i];if(s.rowTop+s.rowHeight-1>=e)return i}return n.length-1}onGridStylesChanges(e){if(e.rowHeightChanged){let t=n=>{n.setRowHeight(n.rowHeight,!0)};this.pinnedBottomRows.forEach(t),this.pinnedTopRows.forEach(t)}}ensureRowHeightsValid(){let e=!1,t=0,n=s=>{if(s.rowHeightEstimated){let r=this.gos.getRowHeightForNode(s);s.setRowTop(t),s.setRowHeight(r.height),t+=r.height,e=!0}};this.pinnedBottomRows?.forEach(n),t=0,this.pinnedTopRows?.forEach(n);let i={type:"pinnedHeightChanged"};return this.eventService.dispatchEvent(i),e}setPinnedTopRowData(){let e=this.gos.get("pinnedTopRowData");this.pinnedTopRows=this.createNodesFromData(e,!0);let t={type:"pinnedRowDataChanged"};this.eventService.dispatchEvent(t)}setPinnedBottomRowData(){let e=this.gos.get("pinnedBottomRowData");this.pinnedBottomRows=this.createNodesFromData(e,!1);let t={type:"pinnedRowDataChanged"};this.eventService.dispatchEvent(t)}createNodesFromData(e,t){let n=[];if(e){let i=this.gos.getRowIdCallback(),s=t?bo.ID_PREFIX_TOP_PINNED:bo.ID_PREFIX_BOTTOM_PINNED,r=0,o=t?"top":"bottom";e.forEach((a,l)=>{let c=new bo(this.beans);c.data=a,c.id=i?.({data:a,level:0,rowPinned:o})??s+this.nextId++,c.rowPinned=o,c.setRowTop(r),c.setRowHeight(this.gos.getRowHeightForNode(c).height),c.setRowIndex(l),r+=c.rowHeight,n.push(c)})}return n}getPinnedTopRowNodes(){return this.pinnedTopRows}getPinnedBottomRowNodes(){return this.pinnedBottomRows}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedTopRowCount(){return this.pinnedTopRows?this.pinnedTopRows.length:0}getPinnedBottomRowCount(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0}getPinnedTopRow(e){return this.pinnedTopRows[e]}getPinnedBottomRow(e){return this.pinnedBottomRows[e]}forEachPinnedTopRow(e){bn(this.pinnedTopRows)||this.pinnedTopRows.forEach(e)}forEachPinnedBottomRow(e){bn(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(e)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getTotalHeight(e){if(!e||e.length===0)return 0;let t=We(e);return t.rowTop+t.rowHeight}};var dae=class extends L{constructor(e){super(),this.state="needsLoading",this.version=0,this.id=e}getId(){return this.id}load(){this.state="loading",this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed",this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,t){this.successCommon(e,t)}pageLoaded(e,t,n){this.successCommon(e,{rowData:t,rowCount:n})}isRequestMostRecentAndLive(e){let t=e===this.version,n=this.isAlive();return t&&n}successCommon(e,t){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}dispatchLoadCompleted(e=!0){let t={type:"loadComplete",success:e,block:this};this.dispatchLocalEvent(t)}},hae=class extends L{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();let e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=ci(this.performCheckBlocksToLoad.bind(this),e))}getMaxConcurrentDatasourceRequests(){let e=this.gos.get("maxConcurrentDatasourceRequests");if(e==null)return 2;if(!(e<=0))return e}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){li(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchLocalEvent({type:"blockLoaded"}),this.activeBlockLoadsCount==0&&this.dispatchLocalEvent({type:"blockLoaderFinished"})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.gos.get("debug")&&ys("RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}let e=this.getAvailableLoadingCount(),t=this.blocks.filter(n=>n.getState()==="needsLoading").slice(0,e);this.registerLoads(t.length),t.forEach(n=>n.load()),this.printCacheStatus()}getBlockState(){if(this.gos.isRowModelType("serverSide"))return this.rowModel.getBlockStates();let e={};return this.blocks.forEach(t=>{let{id:n,state:i}=t.getBlockStateJson();e[n]=i}),e}printCacheStatus(){this.gos.get("debug")&&ys(`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}},fae={version:Ee,moduleName:"@ag-grid-community/row-node-block",beans:[hae]},pae=class{constructor(){this.root=null,this.end=null,this.cachedRange=[]}init(e){this.rowModel=e}reset(){this.root=null,this.end=null,this.cachedRange.length=0}setRoot(e){this.root=e,this.end=null,this.cachedRange.length=0}setEndRange(e){this.end=e,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){let e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(e,t)}return this.cachedRange}isInRange(e){return this.root===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(){return this.root&&this.root?.key===null&&(this.root=this.rowModel.getRowNode(this.root.id)??null),this.root}getEnd(){return this.end&&this.end?.key===null&&(this.end=this.rowModel.getRowNode(this.end.id)??null),this.end}truncate(e){let t=this.getRange();if(t.length===0)return{keep:[],discard:[]};let n=t[0].id===this.root.id,i=t.findIndex(s=>s.id===e.id);if(i>-1){let s=t.slice(0,i),r=t.slice(i+1);return this.setEndRange(e),n?{keep:s,discard:r}:{keep:r,discard:s}}else return{keep:t,discard:[]}}extend(e,t=!1){let n=this.getRoot();if(n==null){let s=this.getRange().slice();return t&&e.depthFirstSearch(r=>!r.group&&s.push(r)),s.push(e),this.setRoot(e),{keep:s,discard:[]}}if(this.rowModel.getNodesInRangeForSelection(n,e).find(s=>s.id===this.end?.id))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{let s=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:s}}}},gae=class extends L{constructor(){super(...arguments),this.beanName="stylingService"}wireBeans(e){this.expressionService=e.expressionService}processAllCellClasses(e,t,n,i){this.processClassRules(void 0,e.cellClassRules,t,n,i),this.processStaticCellClasses(e,t,n)}processClassRules(e,t,n,i,s){if(t==null&&e==null)return;let r={},o={},a=(l,c)=>{l.split(" ").forEach(u=>{u.trim()!=""&&c(u)})};if(t){let l=Object.keys(t);for(let c=0;c<l.length;c++){let u=l[c],h=t[u],f;typeof h=="string"?f=this.expressionService.evaluate(h,n):typeof h=="function"&&(f=h(n)),a(u,p=>{f?r[p]=!0:o[p]=!0})}}e&&s&&Object.keys(e).forEach(l=>a(l,c=>{r[c]||(o[c]=!0)})),s&&Object.keys(o).forEach(s),Object.keys(r).forEach(i)}getStaticCellClasses(e,t){let{cellClass:n}=e;if(!n)return[];let i;return typeof n=="function"?i=n(t):i=n,typeof i=="string"&&(i=[i]),i||[]}processStaticCellClasses(e,t,n){this.getStaticCellClasses(e,t).forEach(s=>{n(s)})}};var mae=class extends L{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;let{comp:t,eTopGuard:n,eBottomGuard:i,focusTrapActive:s,forceFocusOutWhenTabGuardsAreEmpty:r,isFocusableContainer:o,focusInnerElement:a,onFocusIn:l,onFocusOut:c,shouldStopEventPropagation:u,onTabKeyDown:h,handleKeyDown:f,eFocusableElement:p}=e;this.comp=t,this.eTopGuard=n,this.eBottomGuard=i,this.providedFocusInnerElement=a,this.eFocusableElement=p,this.focusTrapActive=!!s,this.forceFocusOutWhenTabGuardsAreEmpty=!!r,this.isFocusableContainer=!!o,this.providedFocusIn=l,this.providedFocusOut=c,this.providedShouldStopEventPropagation=u,this.providedOnTabKeyDown=h,this.providedHandleKeyDown=f}wireBeans(e){this.focusService=e.focusService}postConstruct(){this.createManagedBean(new ec(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)}))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;let e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;let t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}findNextElementOutsideAndFocus(e){let t=this.gos.getDocument(),n=this.focusService.findFocusableElements(t.body,null,!0),i=n.indexOf(e?this.eTopGuard:this.eBottomGuard);if(i===-1)return;let s,r;e?(s=0,r=i):(s=i+1,r=n.length);let o=n.slice(s,r),a=this.gos.get("tabIndex");o.sort((l,c)=>{let u=parseInt(l.getAttribute("tabindex")||"0"),h=parseInt(c.getAttribute("tabindex")||"0");return h===a?1:u===a?-1:u===0?1:h===0?-1:u-h}),o[e?o.length-1:0].focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;let t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();let n=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),n&&(n.focus(),e.preventDefault())}focusInnerElement(e=!1){let t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;let t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},vae=class extends L{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();let{eTopGuard:t,eBottomGuard:n,eFocusableElement:i}=this,s=[t,n],r={setTabIndex:y=>{s.forEach(C=>y!=null?C.setAttribute("tabindex",y):C.removeAttribute("tabindex"))}};this.addTabGuards(t,n);let{focusTrapActive:o=!1,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:h,shouldStopEventPropagation:f,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:v}=e;this.tabGuardCtrl=this.createManagedBean(new mae({comp:r,focusTrapActive:o,eTopGuard:t,eBottomGuard:n,eFocusableElement:i,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:u,onTabKeyDown:h,shouldStopEventPropagation:f,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:v}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){let t=this.gos.getDocument().createElement("div"),n=e==="top"?"ag-tab-guard-top":"ag-tab-guard-bottom";return t.classList.add("ag-tab-guard",n),Ri(t,"presentation"),t}addTabGuards(e,t){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){let e=[this.eTopGuard,this.eBottomGuard];zn(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,n){zR(t)||(t=t.getGui());let{eBottomGuard:i}=this;i?i.insertAdjacentElement("beforebegin",t):e(t,n)}},d2=class extends Ke{initialiseTabGuard(e){this.tabGuardFeature=this.createManagedBean(new vae(this)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(e=!1){this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},Cae=0,yae=200,wae=class extends L{constructor(){super(...arguments),this.beanName="popupService",this.popupList=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.resizeObserverService=e.resizeObserverService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){let e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){let{eventSource:t,ePopup:n}=e,i=this.getPopupIndex(n);if(i!==-1){let p=this.popupList[i];p.alignedToElement=t}let s=t.getBoundingClientRect(),r=this.getParentRect(),o=this.keepXYWithinBounds(n,s.top-r.top,0),a=n.clientWidth>0?n.clientWidth:200;n.style.minWidth=`${a}px`;let c=r.right-r.left-a,u;this.gos.get("enableRtl")?(u=f(),u<0&&(u=h(),this.setAlignedStyles(n,"left")),u>c&&(u=0,this.setAlignedStyles(n,"right"))):(u=h(),u>c&&(u=f(),this.setAlignedStyles(n,"right")),u<0&&(u=0,this.setAlignedStyles(n,"left"))),n.style.left=`${u}px`,n.style.top=`${o}px`;function h(){return s.right-r.left-2}function f(){return s.left-r.left-a}}positionPopupUnderMouseEvent(e){let{ePopup:t,nudgeX:n,nudgeY:i,skipObserver:s}=e;this.positionPopup({ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:!0,skipObserver:s,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){let t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){let{ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:s,eventSource:r,alignSide:o="left",position:a="over",column:l,rowNode:c,type:u}=e,h=r.getBoundingClientRect(),f=this.getParentRect(),p=this.getPopupIndex(t);if(p!==-1){let y=this.popupList[p];y.alignedToElement=r}let v=()=>{let y=h.left-f.left;o==="right"&&(y-=t.offsetWidth-h.width);let C;return a==="over"?(C=h.top-f.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,h,f,e.nudgeY||0)==="under"?C=h.top-f.top+h.height:C=h.top-t.offsetHeight-(i||0)*2-f.top),{x:y,y:C}};this.positionPopup({ePopup:t,nudgeX:n,nudgeY:i,keepWithinBounds:s,updatePosition:v,postProcessCallback:()=>this.callPostProcessPopup(u,t,r,null,l,c)})}shouldRenderUnderOrAbove(e,t,n,i){let s=n.bottom-t.bottom,r=t.top-n.top,o=e.offsetHeight+i;return s>o?"under":r>o||r>s?"above":"under"}setAlignedStyles(e,t){let n=this.getPopupIndex(e);if(n===-1)return;let i=this.popupList[n],{alignedToElement:s}=i;!s||(["right","left","over","above","under"].forEach(o=>{s.classList.remove(`ag-has-popup-positioned-${o}`),e.classList.remove(`ag-popup-positioned-${o}`)}),!t)||(s.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}callPostProcessPopup(e,t,n,i,s,r){let o=this.gos.getCallback("postProcessPopup");o&&o({column:s,rowNode:r,ePopup:t,type:e,eventSource:n,mouseEvent:i})}positionPopup(e){let{ePopup:t,keepWithinBounds:n,nudgeX:i,nudgeY:s,skipObserver:r,updatePosition:o}=e,a={width:0,height:0},l=(c=!1)=>{let{x:u,y:h}=o();c&&t.clientWidth===a.width&&t.clientHeight===a.height||(a.width=t.clientWidth,a.height=t.clientHeight,i&&(u+=i),s&&(h+=s),n&&(u=this.keepXYWithinBounds(t,u,1),h=this.keepXYWithinBounds(t,h,0)),t.style.left=`${u}px`,t.style.top=`${h}px`,e.postProcessCallback&&e.postProcessCallback())};if(l(),!r){let c=this.resizeObserverService.observeResize(t,()=>l(!0));setTimeout(()=>c(),yae)}}getActivePopups(){return this.popupList.map(e=>e.element)}getPopupList(){return this.popupList}getParentRect(){let e=this.gos.getDocument(),t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),oH(t)}keepXYWithinBounds(e,t,n){let i=n===0,s=i?"clientHeight":"clientWidth",r=i?"top":"left",o=i?"height":"width",a=i?"scrollTop":"scrollLeft",l=this.gos.getDocument(),c=l.documentElement,u=this.getPopupParent(),h=e.getBoundingClientRect(),f=u.getBoundingClientRect(),p=l.documentElement.getBoundingClientRect(),v=u===l.body,y=Math.ceil(h[o]),E=v?(i?rH:Fy)(c)+c[a]:u[s];v&&(E-=Math.abs(p[r]-f[r]));let T=E-y;return Math.min(Math.max(t,0),Math.abs(T))}addPopup(e){let t=this.gos.getDocument(),{eChild:n,ariaLabel:i,alwaysOnTop:s,positionCallback:r,anchorToElement:o}=e;if(!t)return j("could not find the document, document is empty"),{hideFunc:()=>{}};let a=this.getPopupIndex(n);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(n);let l=this.createPopupWrapper(n,i,!!s),c=this.addEventListenersToPopup(ae(B({},e),{wrapperEl:l}));return r&&r(),this.addPopupToPopupList(n,l,c,o),{hideFunc:c}}initialisePopupPosition(e){let n=this.getPopupParent().getBoundingClientRect();q(e.style.top)||(e.style.top=`${n.top*-1}px`),q(e.style.left)||(e.style.left=`${n.left*-1}px`)}createPopupWrapper(e,t,n){let i=this.getPopupParent(),s=document.createElement("div");return this.environment.applyThemeClasses(s),s.classList.add("ag-popup"),e.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||Ri(e,"dialog"),pd(e,t),s.appendChild(e),i.appendChild(s),n?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),s}handleThemeChange(e){if(e.themeChanged)for(let t of this.popupList)this.environment.applyThemeClasses(t.wrapper)}addEventListenersToPopup(e){let t=this.gos.getDocument(),n=this.getPopupParent(),{wrapperEl:i,eChild:s,closedCallback:r,afterGuiAttached:o,closeOnEsc:a,modal:l}=e,c=!1,u=v=>{if(!i.contains(this.gos.getActiveDomElement()))return;v.key===N.ESCAPE&&!Aa(v)&&p({keyboardEvent:v})},h=v=>p({mouseEvent:v}),f=v=>p({touchEvent:v}),p=(v={})=>{let{mouseEvent:y,touchEvent:C,keyboardEvent:E,forceHide:T}=v;!T&&(this.isEventFromCurrentPopup({mouseEvent:y,touchEvent:C},s)||c)||(c=!0,n.removeChild(i),t.removeEventListener("keydown",u),t.removeEventListener("mousedown",h),t.removeEventListener("touchstart",f),t.removeEventListener("contextmenu",h),this.eventService.removeEventListener("dragStarted",h),r&&r(y||C||E),this.removePopupFromPopupList(s))};return o&&o({hidePopup:p}),window.setTimeout(()=>{a&&t.addEventListener("keydown",u),l&&(t.addEventListener("mousedown",h),this.eventService.addEventListener("dragStarted",h),t.addEventListener("touchstart",f),t.addEventListener("contextmenu",h))},0),p}addPopupToPopupList(e,t,n,i){this.popupList.push({element:e,wrapper:t,hideFunc:n,instanceId:Cae++,isAnchored:!!i}),i&&this.setPopupPositionRelatedToElement(e,i)}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){let n=this.getPopupIndex(e);if(n===-1)return;let i=this.popupList[n];if(i.stopAnchoringPromise&&i.stopAnchoringPromise.then(r=>r&&r()),i.stopAnchoringPromise=void 0,i.isAnchored=!1,!t)return;let s=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:i.hideFunc});return i.stopAnchoringPromise=s,i.isAnchored=!0,s}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){let t=this.getPopupParent(),n=t.getBoundingClientRect(),{element:i,ePopup:s}=e,r=i.getBoundingClientRect(),o=n.top-r.top,a=n.left-r.left,l=o,c=a,u=s.style.top,h=parseInt(u.substring(0,u.length-1),10),f=s.style.left,p=parseInt(f.substring(0,f.length-1),10),v=this.getFrameworkOverrides();return new Yi(y=>{v.wrapIncoming(()=>{v.setInterval(()=>{let C=t.getBoundingClientRect(),E=i.getBoundingClientRect();if(E.top==0&&E.left==0&&E.height==0&&E.width==0){e.hidePopup();return}let R=C.top-E.top;if(R!=l){let $=this.keepXYWithinBounds(s,h+o-R,0);s.style.top=`${$}px`}l=R;let F=C.left-E.left;if(F!=c){let $=this.keepXYWithinBounds(s,p+a-F,1);s.style.left=`${$}px`}c=F},200).then(C=>{y(()=>{C!=null&&window.clearInterval(C)})})},"popupPositioning")})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){let{mouseEvent:n,touchEvent:i}=e,s=n||i;if(!s)return!1;let r=this.getPopupIndex(t);if(r===-1)return!1;for(let o=r;o<this.popupList.length;o++){let a=this.popupList[o];if(Ite(a.element,s))return!0}return this.isElementWithinCustomPopup(s.target)}isElementWithinCustomPopup(e){let t=this.gos.getDocument();for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){let n=this.getWrapper(e);n&&(n.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(n))}bringPopupToFront(e){let t=this.getPopupParent(),n=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),i=n.length,s=Array.prototype.slice.call(t.querySelectorAll(".ag-popup.ag-always-on-top")),r=s.length,o=this.getWrapper(e);if(!o||i<=1||!t.contains(e))return!1;let a=n.indexOf(o),l=o.querySelectorAll("div"),c=[];l.forEach(h=>{h.scrollTop!==0&&c.push([h,h.scrollTop])});let u=!1;for(r?o.classList.contains("ag-always-on-top")?a!==i-1&&(We(s).insertAdjacentElement("afterend",o),u=!0):a!==i-r-1&&(s[0].insertAdjacentElement("beforebegin",o),u=!0):a!==i-1&&(We(n).insertAdjacentElement("afterend",o),u=!0);c.length;){let h=c.pop();h[0].scrollTop=h[1]}return u}},Sae=["touchstart","touchend","touchmove","touchcancel"],cI=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t()}setInterval(e,t){return new Yi(n=>{n(window.setInterval(e,t))})}addEventListener(e,t,n,i){let s=ql(Sae,t);e.addEventListener(t,n,{capture:!!i,passive:s})}get shouldWrapOutgoing(){return!1}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`https://www.ag-grid.com/${this.frameworkName==="solid"?"react":this.frameworkName}-data-grid${e?`/${e}`:""}`}},_ae=class extends L{constructor(){super(...arguments),this.beanName="cellNavigationService"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.pinnedRowModel=e.pinnedRowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}getNextCellToFocus(e,t,n=!1){return n?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){let n=e===N.UP,i=e===N.DOWN,s=e===N.LEFT,r,o;if(n||i)o=n?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow(),r=t.column;else{let a=this.visibleColsService.getAllCols(),l=this.gos.get("enableRtl");o=t.rowIndex,r=s!==l?a[0]:We(a)}return{rowIndex:o,rowPinned:null,column:r}}getNextCellToFocusWithoutCtrlPressed(e,t){let n=t,i=!1;for(;!i;){switch(e){case N.UP:n=this.getCellAbove(n);break;case N.DOWN:n=this.getCellBelow(n);break;case N.RIGHT:this.gos.get("enableRtl")?n=this.getCellToLeft(n):n=this.getCellToRight(n);break;case N.LEFT:this.gos.get("enableRtl")?n=this.getCellToRight(n):n=this.getCellToLeft(n);break;default:n=null,j("unknown key for navigation ",e);break}n?i=this.isCellGoodToFocusOn(n):i=!0}return n}isCellGoodToFocusOn(e){let t=e.column,n;switch(e.rowPinned){case"top":n=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":n=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:n=this.rowModel.getRow(e.rowIndex);break}return n?!t.isSuppressNavigable(n):!1}getCellToLeft(e){if(!e)return null;let t=this.visibleColsService.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;let t=this.visibleColsService.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){let t=e.rowIndex,n=e.rowPinned;if(this.isLastRowInContainer(e))switch(n){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.pageBoundsService.getFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}let i=this.rowModel.getRow(e.rowIndex),s=this.getNextStickyPosition(i);return s||{rowIndex:t+1,rowPinned:n}}getNextStickyPosition(e,t){if(!this.gos.isGroupRowsSticky()||!e||!e.sticky)return;let n=this.rowRenderer.getStickyTopRowCtrls().some(a=>a.getRowNode().rowIndex===e.rowIndex),i=[];n?i=[...this.rowRenderer.getStickyTopRowCtrls()].sort((a,l)=>a.getRowNode().rowIndex-l.getRowNode().rowIndex):i=[...this.rowRenderer.getStickyBottomRowCtrls()].sort((a,l)=>l.getRowNode().rowIndex-a.getRowNode().rowIndex);let s=t?-1:1,r=i.findIndex(a=>a.getRowNode().rowIndex===e.rowIndex),o=i[r+s];if(o)return{rowIndex:o.getRowNode().rowIndex,rowPinned:null}}getCellBelow(e){if(!e)return null;let t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){let t=e.rowPinned,n=e.rowIndex;return t==="top"?this.pinnedRowModel.getPinnedTopRowNodes().length-1<=n:t==="bottom"?this.pinnedRowModel.getPinnedBottomRowNodes().length-1<=n:this.pageBoundsService.getLastRow()<=n}getRowAbove(e){let t=e.rowIndex,n=e.rowPinned;if(n?t===0:t===this.pageBoundsService.getFirstRow())return n==="top"?null:n?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;let s=this.rowModel.getRow(e.rowIndex),r=this.getNextStickyPosition(s,!0);return r||{rowIndex:t-1,rowPinned:n}}getCellAbove(e){if(!e)return null;let t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.pageBoundsService.getLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowNodes().length-1,rowPinned:"top"}}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){let t=this.visibleColsService.getAllCols(),n=e.rowIndex,i=e.rowPinned,s=this.visibleColsService.getColAfter(e.column);if(!s){s=t[0];let r=this.getRowBelow(e);if(Ve(r)||!r.rowPinned&&!(this.paginationService?.isRowInPage(r)??!0))return null;n=r?r.rowIndex:null,i=r?r.rowPinned:null}return{rowIndex:n,column:s,rowPinned:i}}getNextTabbedCellBackwards(e){let t=this.visibleColsService.getAllCols(),n=e.rowIndex,i=e.rowPinned,s=this.visibleColsService.getColBefore(e.column);if(!s){s=We(t);let r=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(Ve(r)||!r.rowPinned&&!(this.paginationService?.isRowInPage(r)??!0))return null;n=r?r.rowIndex:null,i=r?r.rowPinned:null}return{rowIndex:n,column:s,rowPinned:i}}};function bae(e,t){e.eventService.dispatchEvent(t)}var Eae=class extends L{constructor(){super(...arguments),this.beanName="apiFunctionService",this.functions={dispatchEvent:bae},this.isDestroyed=!1}wireBeans(e){this.beans=e}postConstruct(){this.preDestroyLink=this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}callFunction(e,t){let n=this.functions[e];if(n)return n.apply(n,[this.beans,...t]);if(this.isDestroyed)return this.destroyedHandler(e);this.isFrameworkMethod(e)||this.beans.validationService?.warnMissingApiFunction(e)}addFunction(e,t){let{validationService:n}=this.beans;n&&(t=n.validateApiFunction(e,t)),this.functions[e]=t}destroy(){this.functions={},this.isDestroyed=!0,super.destroy()}destroyedHandler(e){if(e==="isDestroyed")return!0;e!=="destroy"&&j(`Grid API function ${e}() cannot be called as the grid has been destroyed.
Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${this.preDestroyLink}`)}isFrameworkMethod(e){return["preWireBeans","wireBeans","preConstruct","postConstruct"].includes(e)}};function Dae(e){let t=e.getBean("apiFunctionService");return new Proxy(t,{get(n,i){if(i!=="then")return(...s)=>n.callFunction(i,s)}})}function Tae(e){return{beanName:"gridApi",bean:Dae(e)}}var Rae=class extends L{constructor(){super(...arguments),this.beanName="columnDefFactory"}buildColumnDefs(e,t,n){let i=[],s={};return e.forEach(r=>{let o=this.createDefFromColumn(r,t,n),a=!0,l=o,c=r.getOriginalParent(),u=null;for(;c;){let h=null;if(c.isPadding()){c=c.getOriginalParent();continue}let f=s[c.getGroupId()];if(f){f.children.push(l),a=!1;break}if(h=this.createDefFromGroup(c),h&&(h.children=[l],s[h.groupId]=h,l=h,c=c.getOriginalParent()),c!=null&&u===c){a=!1;break}u=c}a&&i.push(l)}),i}createDefFromGroup(e){let t=SR(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,n){let i=SR(e.getColDef());return i.colId=e.getColId(),i.width=e.getActualWidth(),i.rowGroup=e.isRowGroupActive(),i.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,i.pivot=e.isPivotActive(),i.pivotIndex=e.isPivotActive()?n.indexOf(e):null,i.aggFunc=e.isValueActive()?e.getAggFunc():null,i.hide=e.isVisible()?void 0:!0,i.pinned=e.isPinned()?e.getPinned():null,i.sort=e.getSort()?e.getSort():null,i.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,i}},Iae=class extends L{constructor(){super(...arguments),this.beanName="columnEventDispatcher"}visibleCols(){let e={type:"displayedColumnsChanged"};this.eventService.dispatchEvent(e)}gridColumns(){let e={type:"gridColumnsChanged"};this.eventService.dispatchEvent(e)}headerHeight(e){let t={type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(t)}groupOpened(e){let t={type:"columnGroupOpened",columnGroup:e.length===1?e[0]:void 0,columnGroups:e};this.eventService.dispatchEvent(t)}rowGroupChanged(e,t){let n={type:"columnRowGroupChanged",columns:e,column:e.length===1?e[0]:null,source:t};this.eventService.dispatchEvent(n)}genericColumnEvent(e,t,n){let i={type:e,columns:t,column:t.length===1?t[0]:null,source:n};this.eventService.dispatchEvent(i)}pivotModeChanged(){let e={type:"columnPivotModeChanged"};this.eventService.dispatchEvent(e)}virtualColumnsChanged(e){let t={type:"virtualColumnsChanged",afterScroll:e};this.eventService.dispatchEvent(t)}newColumnsLoaded(e){let t={type:"newColumnsLoaded",source:e};this.eventService.dispatchEvent(t)}everythingChanged(e){let t={type:"columnEverythingChanged",source:e};this.eventService.dispatchEvent(t)}columnMoved(e){let{movedColumns:t,source:n,toIndex:i,finished:s}=e,r={type:"columnMoved",columns:t,column:t&&t.length===1?t[0]:null,toIndex:i,finished:s,source:n};this.eventService.dispatchEvent(r)}columnPinned(e,t){if(!e.length)return;let n=e.length===1?e[0]:null,i=this.getCommonValue(e,r=>r.getPinned()),s={type:"columnPinned",pinned:i??null,columns:e,column:n,source:t};this.eventService.dispatchEvent(s)}columnVisible(e,t){if(!e.length)return;let n=e.length===1?e[0]:null,s={type:"columnVisible",visible:this.getCommonValue(e,r=>r.isVisible()),columns:e,column:n,source:t};this.eventService.dispatchEvent(s)}getCommonValue(e,t){if(!e||e.length==0)return;let n=t(e[0]);for(let i=1;i<e.length;i++)if(n!==t(e[i]))return;return n}columnChanged(e,t,n){let i={type:e,columns:t,column:t&&t.length==1?t[0]:null,source:n};this.eventService.dispatchEvent(i)}columnResized(e,t,n,i=null){if(e&&e.length){let s={type:"columnResized",columns:e,column:e.length===1?e[0]:null,flexColumns:i,finished:t,source:n};this.eventService.dispatchEvent(s)}}},Aae=class extends L{constructor(){super(...arguments),this.beanName="columnGetStateService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService}getColumnState(){let e=this.columnModel.getColDefCols();if(Ve(e)||!this.columnModel.isAlive())return[];let n=this.columnModel.getAllCols().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(n),n}createStateItemFromColumn(e){let t=this.funcColsService.getRowGroupColumns(),n=this.funcColsService.getPivotColumns(),i=e.isRowGroupActive()?t.indexOf(e):null,s=e.isPivotActive()?n.indexOf(e):null,r=e.isValueActive()?e.getAggFunc():null,o=e.getSort()!=null?e.getSort():null,a=e.getSortIndex()!=null?e.getSortIndex():null,l=e.getFlex()!=null&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:o,sortIndex:a,aggFunc:r,rowGroup:e.isRowGroupActive(),rowGroupIndex:i,pivot:e.isPivotActive(),pivotIndex:s,flex:l}}orderColumnStateList(e){let t=this.columnModel.getCols(),n=new Map(t.map((i,s)=>[i.getColId(),s]));e.sort((i,s)=>{let r=n.has(i.colId)?n.get(i.colId):-1,o=n.has(s.colId)?n.get(s.colId):-1;return r-o})}},Mae=class extends L{constructor(){super(...arguments),this.beanName="columnGroupStateService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService}getColumnGroupState(){let e=[],t=this.columnModel.getColTree();return Eo(null,t,n=>{oi(n)&&e.push({groupId:n.getGroupId(),open:n.isExpanded()})}),e}resetColumnGroupState(e){let t=this.columnModel.getColDefColTree();if(!t)return;let n=[];Eo(null,t,i=>{if(oi(i)){let s=i.getColGroupDef(),r={groupId:i.getGroupId(),open:s?s.openByDefault:void 0};n.push(r)}}),this.setColumnGroupState(n,e)}setColumnGroupState(e,t){if(!this.columnModel.getColTree())return;this.columnAnimationService.start();let i=[];e.forEach(s=>{let r=s.groupId,o=s.open,a=this.columnModel.getProvidedColGroup(r);a&&a.isExpanded()!==o&&(a.setExpanded(o),i.push(a))}),this.visibleColsService.refresh(t,!0),i.length&&this.eventDispatcher.groupOpened(i),this.columnAnimationService.finish()}},Pae=class extends L{constructor(){super(...arguments),this.beanName="columnViewportService",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,n=!1){let i=this.visibleColsService.isBodyWidthDirty();if(!(e===this.scrollWidth&&t===this.scrollPosition&&!i)){if(this.scrollWidth=e,this.scrollPosition=t,this.visibleColsService.setBodyWidthDirty(),this.gos.get("enableRtl")){let r=this.visibleColsService.getBodyContainerWidth();this.viewportLeft=r-this.scrollPosition-this.scrollWidth,this.viewportRight=r-this.scrollPosition}else this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition;this.columnModel.isReady()&&this.checkViewportColumns(n)}}getHeadersToRender(e,t){let n;switch(e){case"left":n=this.rowsOfHeadersToRenderLeft[t];break;case"right":n=this.rowsOfHeadersToRenderRight[t];break;default:n=this.rowsOfHeadersToRenderCenter[t];break}return n||[]}extractViewportColumns(){let e=this.visibleColsService.getCenterCols();this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;let t=e.getLeft()||0,n=t+e.getActualWidth(),i=this.viewportLeft-200,s=this.viewportRight+200,r=t<i&&n<i,o=t>s&&n>s;return!r&&!o}getViewportColumns(){let e=this.visibleColsService.getLeftCols(),t=this.visibleColsService.getRightCols();return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.columnModel.isColSpanActive())return this.colsWithinViewport;let t=s=>{let r=s.getLeft();return q(r)&&r>this.viewportLeft},n=this.isColumnVirtualisationSuppressed()?null:this.isColumnInRowViewport.bind(this),i=this.visibleColsService.getColsCenter();return this.visibleColsService.getColsForRow(e,i,n,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventDispatcher.virtualColumnsChanged(e)}calculateHeaderRows(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={};let e={},t=this.visibleColsService.getLeftCols(),n=this.visibleColsService.getRightCols();this.headerColsWithinViewport.concat(t).concat(n).forEach(r=>e[r.getId()]=!0);let s=(r,o,a)=>{let l=!1;for(let c=0;c<r.length;c++){let u=r[c],h=!1;if(Fa(u))h=e[u.getId()]===!0;else{let p=u.getDisplayedChildren();p&&(h=s(p,o,a+1))}h&&(l=!0,o[a]||(o[a]=[]),o[a].push(u))}return l};s(this.visibleColsService.getTreeLeft(),this.rowsOfHeadersToRenderLeft,0),s(this.visibleColsService.getTreeRight(),this.rowsOfHeadersToRenderRight,0),s(this.visibleColsService.getTreeCenter(),this.rowsOfHeadersToRenderCenter,0)}extractViewport(){let e=i=>`${i.getId()}-${i.getPinned()||"normal"}`;this.extractViewportColumns();let t=this.getViewportColumns().map(e).join("#"),n=this.colsWithinViewportHash!==t;return n&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),n}},Fae=class extends L{constructor(){super(...arguments),this.beanName="agComponentUtils"}wireBeans(e){this.componentMetadataProvider=e.componentMetadataProvider}adaptFunction(e,t){let n=this.componentMetadataProvider.retrieve(e);return n&&n.functionAdapter?n.functionAdapter(t):null}adaptCellRendererFunction(e){class t{refresh(){return!1}getGui(){return this.eGui}init(i){let s=e(i),r=typeof s;if(r==="string"||r==="number"||r==="boolean"){this.eGui=gd("<span>"+s+"</span>");return}if(s==null){this.eGui=gd("<span></span>");return}this.eGui=s}}return t}doesImplementIComponent(e){return e?e.prototype&&"getGui"in e.prototype:!1}},xae=class extends L{constructor(){super(...arguments),this.beanName="componentMetadataProvider"}wireBeans(e){this.agComponentUtils=e.agComponentUtils}postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(e){return this.componentMetaData[e]}},Oae=["rowPositionUtils","cellPositionUtils","headerPositionUtils","paginationAutoPageSizeService","apiFunctionService","gridApi","userComponentRegistry","agComponentUtils","componentMetadataProvider","resizeObserverService","userComponentFactory","rowContainerHeightService","horizontalResizeService","localeService","validationService","pinnedRowModel","dragService","visibleColsService","eventService","gos","popupService","selectionService","columnFilterService","quickFilterService","filterManager","columnModel","headerNavigationService","pageBoundsService","paginationService","pageBoundsListener","rowRenderer","expressionService","columnFactory","alignedGridsService","navigationService","valueCache","valueService","loggerFactory","autoWidthCalculator","filterMenuFactory","dragAndDropService","focusService","mouseEventService","environment","cellNavigationService","stylingService","scrollVisibleService","sortController","columnHoverService","columnAnimationService","selectableService","autoColService","changeDetectionService","animationFrameService","undoRedoService","columnDefFactory","rowCssClassCalculator","rowNodeBlockLoader","rowNodeSorter","ctrlsService","pinnedWidthService","rowNodeEventThrottle","ctrlsFactory","dataTypeService","syncService","overlayService","stateService","expansionService","apiEventService","ariaAnnouncementService","menuService","columnApplyStateService","columnEventDispatcher","columnMoveService","columnAutosizeService","columnGetStateService","columnGroupStateService","columnSizeService","funcColsService","columnNameService","columnViewportService","pivotResultColsService","showRowGroupColsService"],_G=Object.fromEntries(Oae.map((e,t)=>[e,t]));function Nae(e,t){let n=(e.beanName?_G[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,i=(t.beanName?_G[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return n-i}function kae(e,t){return e?.beanName==="gridDestroyService"?-1:0}var Lae=class extends L{constructor(){super(...arguments),this.beanName="ctrlsFactory",this.registry={}}register(e){this.registry[e.name]=e.classImp}getInstance(e,...t){let n=this.registry[e];if(n!=null)return new n(...t)}},Vae=class extends L{constructor(){super(...arguments),this.beanName="ctrlsService",this.params={},this.ready=!1,this.readyCallbacks=[]}checkReady(){let e=this.params;this.ready=e.gridCtrl!=null&&e.gridBodyCtrl!=null&&e.center!=null&&e.left!=null&&e.right!=null&&e.bottomCenter!=null&&e.bottomLeft!=null&&e.bottomRight!=null&&e.topCenter!=null&&e.topLeft!=null&&e.topRight!=null&&e.stickyTopCenter!=null&&e.stickyTopLeft!=null&&e.stickyTopRight!=null&&e.stickyBottomCenter!=null&&e.stickyBottomLeft!=null&&e.stickyBottomRight!=null&&e.centerHeader!=null&&e.leftHeader!=null&&e.rightHeader!=null&&e.fakeHScrollComp!=null&&e.fakeVScrollComp!=null&&e.gridHeaderCtrl!=null,this.ready&&(this.readyCallbacks.forEach(t=>t(e)),this.readyCallbacks.length=0)}whenReady(e){this.ready?e(this.params):this.readyCallbacks.push(e)}register(e,t){this.params[e]=t,this.checkReady()}registerHeaderContainer(e,t){let n=this.params;switch(t){case"left":n.leftHeader=e;break;case"right":n.rightHeader=e;break;default:n.centerHeader=e;break}this.checkReady()}get(e){return this.params[e]}getParams(){return this.params}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){let{leftHeader:e,centerHeader:t,rightHeader:n}=this.params;return[e,n,t]}getHeaderRowContainerCtrl(e){let t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}},Bae=class extends L{constructor(){super(...arguments),this.beanName="cellPositionUtils"}createId(e){let{rowIndex:t,rowPinned:n,column:i}=e;return this.createIdFromValues({rowIndex:t,column:i,rowPinned:n})}createIdFromValues(e){let{rowIndex:t,rowPinned:n,column:i}=e;return`${t}.${n??"null"}.${i.getId()}`}equals(e,t){let n=e.column===t.column,i=e.rowPinned===t.rowPinned,s=e.rowIndex===t.rowIndex;return n&&i&&s}},Gae=class extends L{constructor(){super(...arguments),this.beanName="rowNodeEventThrottle",this.events=[]}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowModel=e.rowModel}postConstruct(){this.rowModel.getType()=="clientSide"&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e,t){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(e);return}this.events.push(e);let n=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(i=>this.eventService.dispatchEvent(i)),this.events=[]};t?n():(this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(n)),this.dispatchExpandedDebounced())}},Hae=class extends L{constructor(){super(...arguments),this.beanName="rowPositionUtils"}wireBeans(e){this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.pageBoundsService=e.pageBoundsService}getFirstRow(){let e=0,t;return this.pinnedRowModel.getPinnedTopRowCount()?t="top":this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(t="bottom"),t===void 0?null:{rowIndex:e,rowPinned:t}}getLastRow(){let e,t=null,n=this.pinnedRowModel.getPinnedBottomRowCount(),i=this.pinnedRowModel.getPinnedTopRowCount();return n?(t="bottom",e=n-1):this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getLastRow()):i&&(t="top",e=i-1),e===void 0?null:{rowIndex:e,rowPinned:t}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowNodes()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowNodes()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}before(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(q(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}},bG={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},EG={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},DG={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},Uae=class extends L{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.themeClasses=[],this.eThemeAncestor=null,this.eMeasurementContainer=null,this.sizesMeasured=!1}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.eGridDiv=e.eGridDiv}postConstruct(){this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.themeClasses=this.getAncestorThemeClasses(),this.setUpThemeClassObservers(),this.getSizeEl(bG),this.getSizeEl(EG),this.getSizeEl(DG)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(bG)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(EG)}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(DG)}hasMeasuredSizes(){return this.sizesMeasured}getThemeClasses(){return this.themeClasses}applyThemeClasses(e){for(let t of Array.from(e.classList))t.startsWith("ag-theme-")&&!this.themeClasses.includes(t)&&e.classList.remove(t);for(let t of this.themeClasses)e.classList.contains(t)||e.classList.add(t)}getThemeAncestorElement(){return this.eThemeAncestor}refreshRowHeightVariable(){let e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gos.get("rowHeight");if(t==null||isNaN(t)||!isFinite(t))return e!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;let n=`${t}px`;return e!=n?(this.eGridDiv.style.setProperty("--ag-line-height",n),t):e!=""?parseFloat(e):-1}getCSSVariablePixelValue(e){let t=this.lastKnownValues.get(e);if(t!=null)return t;let n=this.measureSizeEl(e);return n==="detached"||n==="no-styles"?e.defaultValue:(this.lastKnownValues.set(e,n),n)}measureSizeEl(e){let t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";let n=t.offsetWidth;return n===TG?"no-styles":(this.sizesMeasured=!0,n)}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;let n=this.eMeasurementContainer;n||(n=this.eMeasurementContainer=document.createElement("div"),n.className="ag-measurement-container",this.eGridDiv.appendChild(n)),t=document.createElement("div"),t.style.width=`var(${e.cssName}, ${TG}px)`,n.appendChild(t),this.sizeEls.set(e,t);let i=this.measureSizeEl(e);i==="no-styles"&&j(`no value for ${e.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e.defaultValue} will be used and updated when styles load.`);let s=this.resizeObserverService.observeResize(t,()=>{let r=this.measureSizeEl(e);r==="detached"||r==="no-styles"||(this.lastKnownValues.set(e,r),r!==i&&(i=r,this.fireGridStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>s()),t}fireGridStylesChangedEvent(e){let t={type:"gridStylesChanged",[e]:!0};this.eventService.dispatchEvent(t)}setUpThemeClassObservers(){let e=new MutationObserver(()=>{let n=this.getAncestorThemeClasses();Wae(n,this.themeClasses)||(this.themeClasses=n,this.fireGridStylesChangedEvent("themeChanged"))}),t=this.eGridDiv;for(;t;)e.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement}getAncestorThemeClasses(){let e=this.eGridDiv,t=[];for(this.eThemeAncestor=null;e;){let n=Array.from(e.classList).filter(i=>i.startsWith("ag-theme-"));for(let i of n)this.eThemeAncestor=e,t.includes(i)||t.unshift(i);e=e.parentElement}return Object.freeze(t)}},Wae=(e,t)=>e.length===t.length&&e.findIndex((n,i)=>e[i]!==t[i])===-1,TG=15538,jae=class extends L{constructor(){super(...arguments),this.beanName="eventService",this.globalEventService=new vd}wireBeans(e){this.globalEventListener=e.globalEventListener,this.globalSyncEventListener=e.globalSyncEventListener}postConstruct(){if(this.globalEventListener){let e=this.gos.useAsyncEvents();this.addGlobalListener(this.globalEventListener,e)}this.globalSyncEventListener&&this.addGlobalListener(this.globalSyncEventListener,!1)}addEventListener(e,t,n){this.globalEventService.addEventListener(e,t,n)}removeEventListener(e,t,n){this.globalEventService.removeEventListener(e,t,n)}addGlobalListener(e,t=!1){this.globalEventService.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalEventService.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalEventService.dispatchEvent(this.gos.addGridCommonParams(e))}dispatchEventOnce(e){this.globalEventService.dispatchEventOnce(this.gos.addGridCommonParams(e))}},uI=class Qi extends L{constructor(){super(...arguments),this.beanName="focusService"}wireBeans(t){this.eGridDiv=t.eGridDiv,this.columnModel=t.columnModel,this.visibleColsService=t.visibleColsService,this.headerNavigationService=t.headerNavigationService,this.headerPositionUtils=t.headerPositionUtils,this.rowRenderer=t.rowRenderer,this.rowPositionUtils=t.rowPositionUtils,this.cellPositionUtils=t.cellPositionUtils,this.navigationService=t.navigationService,this.ctrlsService=t.ctrlsService,this.filterManager=t.filterManager,this.rangeService=t.rangeService,this.advancedFilterService=t.advancedFilterService}static addKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",Qi.toggleKeyboardMode),t.addEventListener("mousedown",Qi.toggleKeyboardMode))}static removeKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",Qi.toggleKeyboardMode),t.addEventListener("mousedown",Qi.toggleKeyboardMode))}static toggleKeyboardMode(t){let n=Qi.keyboardModeActive,i=t.type==="keydown";i&&(t.ctrlKey||t.metaKey||t.altKey)||n!==i&&(Qi.keyboardModeActive=i)}static unregisterGridCompController(t){Qi.removeKeyboardModeEvents(t)}postConstruct(){let t=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:t,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:t,columnRowGroupChanged:t}),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(n=>{this.gridCtrl=n.gridCtrl})}registerKeyboardFocusEvents(){let t=this.gos.getDocument();Qi.addKeyboardModeEvents(t),Qi.instanceCount++,this.addDestroyFunc(()=>{Qi.instanceCount--,Qi.unregisterGridCompController(t)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;let t=this.focusedCellPosition.column,n=this.columnModel.getCol(t.getId());t!==n&&this.clearFocusedCell()}isKeyboardMode(){return Qi.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),Jl.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),Gy.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(t,n){let i=t;for(;i;){if(this.gos.getDomData(i,n))return!1;i=i.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(t){return this.isCellRestoreFocused(t)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}isCellRestoreFocused(t){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.restoredFocusedCellPosition)}setRestoreFocusedCell(t){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=t)}getFocusEventParams(){let{rowIndex:t,rowPinned:n,column:i}=this.focusedCellPosition,s={rowIndex:t,rowPinned:n,column:i,isFullWidthCell:!1},r=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:n});return r&&(s.isFullWidthCell=r.isFullWidth()),s}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;let t=B({type:"cellFocusCleared"},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(t)}setFocusedCell(t){let{column:n,rowIndex:i,rowPinned:s,forceBrowserFocus:r=!1,preventScrollOnBrowserFocus:o=!1}=t,a=this.columnModel.getCol(n);if(!a){this.focusedCellPosition=null;return}this.focusedCellPosition=a?{rowIndex:i,rowPinned:Kl(s),column:a}:null;let l=ae(B({type:"cellFocused"},this.getFocusEventParams()),{forceBrowserFocus:r,preventScrollOnBrowserFocus:o});this.eventService.dispatchEvent(l)}isCellFocused(t){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.focusedCellPosition)}isRowNodeFocused(t){return this.isRowFocused(t.rowIndex,t.rowPinned)}isHeaderWrapperFocused(t){if(this.focusedHeaderPosition==null)return!1;let n=t.getColumnGroupChild(),i=t.getRowIndex(),s=t.getPinned(),{column:r,headerRowIndex:o}=this.focusedHeaderPosition;return n===r&&i===o&&s==r.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(t,n){this.focusedHeaderPosition={headerRowIndex:t,column:n}}focusHeaderPosition(t){if(this.gos.get("suppressHeaderFocus"))return!1;let{direction:n,fromTab:i,allowUserOverride:s,event:r,fromCell:o,rowWithoutSpanValue:a}=t,{headerPosition:l}=t;if(o&&this.filterManager?.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(l);if(s){let c=this.getFocusedHeader(),u=this.headerNavigationService.getHeaderRowCount();if(i){let h=this.gos.getCallback("tabToNextHeader");h&&(l=this.getHeaderPositionFromUserFunc({userFunc:h,direction:n,currentPosition:c,headerPosition:l,headerRowCount:u}))}else{let h=this.gos.getCallback("navigateToNextHeader");if(h&&r){let f={key:r.key,previousHeaderPosition:c,nextHeaderPosition:l,headerRowCount:u,event:r};l=h(f)}}}return l?this.focusProvidedHeaderPosition({headerPosition:l,direction:n,event:r,fromCell:o,rowWithoutSpanValue:a}):!1}focusHeaderPositionFromUserFunc(t){if(this.gos.get("suppressHeaderFocus"))return!1;let{userFunc:n,headerPosition:i,direction:s,event:r}=t,o=this.getFocusedHeader(),a=this.headerNavigationService.getHeaderRowCount(),l=this.getHeaderPositionFromUserFunc({userFunc:n,direction:s,currentPosition:o,headerPosition:i,headerRowCount:a});return!!l&&this.focusProvidedHeaderPosition({headerPosition:l,direction:s,event:r})}getHeaderPositionFromUserFunc(t){let{userFunc:n,direction:i,currentPosition:s,headerPosition:r,headerRowCount:o}=t,l=n({backwards:i==="Before",previousHeaderPosition:s,nextHeaderPosition:r,headerRowCount:o});return l===!0||l===null?(l===null&&j("Since v31.3 Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),s):l===!1?null:l}focusProvidedHeaderPosition(t){let{headerPosition:n,direction:i,fromCell:s,rowWithoutSpanValue:r,event:o}=t,{column:a,headerRowIndex:l}=n;if(l===-1)return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(n):this.focusGridView(a);this.headerNavigationService.scrollToColumn(a,i);let u=this.ctrlsService.getHeaderRowContainerCtrl(a.getPinned()).focusHeader(n.headerRowIndex,a,o);return u&&(r!=null||s)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(r??-1),u}focusFirstHeader(){let t=this.visibleColsService.getAllCols()[0];if(!t)return!1;t.getParent()&&(t=this.visibleColsService.getColGroupAtLevel(t,0));let n=this.headerPositionUtils.getHeaderIndexToFocus(t,0);return this.focusHeaderPosition({headerPosition:n,rowWithoutSpanValue:0})}focusLastHeader(t){let n=this.headerNavigationService.getHeaderRowCount()-1,i=We(this.visibleColsService.getAllCols());return this.focusHeaderPosition({headerPosition:{headerRowIndex:n,column:i},rowWithoutSpanValue:-1,event:t})}focusPreviousFromFirstCell(t){return this.filterManager?.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(t)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(t,n){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===t&&this.focusedCellPosition.rowPinned===Kl(n)}findFocusableElements(t,n,i=!1){let s=Tne,r=sH;n&&(r+=", "+n),i&&(r+=', [tabindex="-1"]');let o=Array.prototype.slice.apply(t.querySelectorAll(s)).filter(c=>Js(c)),a=Array.prototype.slice.apply(t.querySelectorAll(r));return a.length?((c,u)=>c.filter(h=>u.indexOf(h)===-1))(o,a):o}focusInto(t,n=!1,i=!1){let s=this.findFocusableElements(t,null,i),r=n?We(s):s[0];return r?(r.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(t,n){if(!n)return null;let i=this.findFocusableElements(t),s=i.indexOf(n);if(s===-1)return null;let r=-1;for(let o=s-1;o>=0;o--)if(i[o].classList.contains("ag-tab-guard-top")){r=o;break}return r<=0?null:i[r-1]}findNextFocusableElement(t=this.eGridDiv,n,i){let s=this.findFocusableElements(t,n?':not([tabindex="-1"])':null),r=this.gos.getActiveDomElement(),o;n?o=s.findIndex(l=>l.contains(r)):o=s.indexOf(r);let a=o+(i?-1:1);return a<0||a>=s.length?null:s[a]}isTargetUnderManagedComponent(t,n){if(!n)return!1;let i=t.querySelectorAll(`.${ec.FOCUS_MANAGED_CLASS}`);if(!i.length)return!1;for(let s=0;s<i.length;s++)if(i[s].contains(n))return!0;return!1}findTabbableParent(t,n=5){let i=0;for(;t&&TR(t)===null&&++i<=n;)t=t.parentElement;return TR(t)===null?null:t}focusGridView(t,n){if(this.gos.get("suppressCellFocus"))return n?this.gos.get("suppressHeaderFocus")?this.focusNextGridCoreContainer(!0,!0):this.focusLastHeader():this.focusNextGridCoreContainer(!1);let i=n?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!i)return!1;let{rowIndex:s,rowPinned:r}=i,o=this.getFocusedHeader();return!t&&o&&(t=o.column),s==null||!t?!1:(this.navigationService.ensureCellVisible({rowIndex:s,column:t,rowPinned:r}),this.setFocusedCell({rowIndex:s,column:t,rowPinned:Kl(r),forceBrowserFocus:!0}),this.rangeService?.setRangeToCell({rowIndex:s,rowPinned:r,column:t}),!0)}focusNextGridCoreContainer(t,n=!1){return!n&&this.gridCtrl.focusNextInnerContainer(t)?!0:((n||!t&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(t),!1)}focusAdvancedFilter(t){return this.advancedFilterFocusColumn=t?.column,this.advancedFilterService?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(t,n){let i=(n?void 0:this.advancedFilterFocusColumn)??this.visibleColsService.getAllCols()?.[0];return t?this.focusHeaderPosition({headerPosition:{column:i,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(i)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}addFocusableContainer(t){this.gridCtrl.addFocusableContainer(t)}removeFocusableContainer(t){this.gridCtrl.removeFocusableContainer(t)}focusGridInnerElement(t){return this.gridCtrl.focusInnerElement(t)}};uI.keyboardModeActive=!1;uI.instanceCount=0;var zae=uI,$ae=class extends L{constructor(){super(...arguments),this.beanName="pinnedWidthService"}wireBeans(e){this.visibleColsService=e.visibleColsService}postConstruct(){let e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){let e=this.gos.isDomLayout("print"),t=e?0:this.visibleColsService.getColsLeftWidth(),n=e?0:this.visibleColsService.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:"leftPinnedWidthChanged"})),n!=this.rightWidth&&(this.rightWidth=n,this.eventService.dispatchEvent({type:"rightPinnedWidthChanged"}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}},qae=class extends L{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}wireBeans(e){this.beans=e,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}setComp(e,t,n){this.view=e,this.eGridHostDiv=t,this.eGui=n,this.eGui.setAttribute("grid-id",this.gridId);let{dragAndDropService:i,mouseEventService:s,ctrlsService:r,resizeObserverService:o}=this.beans;i.addDropTarget({getContainer:()=>this.eGui,isInterestedIn:l=>l===1||l===0,getIconName:()=>"notAllowed"}),s.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new lI(this.view)),this.addRtlSupport();let a=o.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>a()),r.register("gridCtrl",this)}isDetailGrid(){return this.focusService.findTabbableParent(this.getGui())?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){let e=this.beans;return{paginationSelector:e.paginationService?.getPaginationSelector(),gridHeaderDropZonesSelector:e.columnDropZonesService?.getDropZoneSelector(),sideBarSelector:e.sideBarService?.getSideBarSelector(),statusBarSelector:e.statusBarService?.getStatusPanelSelector(),watermarkSelector:e.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){let e={type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(e)}addRtlSupport(){let e=this.gos.get("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(e)}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){let t=this.getFocusableContainers(),n=this.gos.getActiveDomElement(),i=t.findIndex(r=>r.getGui().contains(n)),s=i+(e?-1:1);if(s<0||s>=t.length)return!1;if(s===0){if(i>0){let r=this.visibleColsService.getAllCols(),o=We(r);if(this.focusService.focusGridView(o,!0))return!0}return!1}return this.focusContainer(t[s],e)}focusInnerElement(e){let t=this.getFocusableContainers(),n=this.visibleColsService.getAllCols(),i=this.gos.getCallback("focusGridInnerElement");if(i&&i({fromBottom:!!e}))return!0;if(e){if(t.length>1)return this.focusContainer(We(t),!0);let s=We(n);if(this.focusService.focusGridView(s,!0))return!0}if(this.gos.get("headerHeight")===0||this.gos.get("suppressHeaderFocus")){if(this.focusService.focusGridView(n[0]))return!0;for(let s=1;s<t.length;s++)if(this.focusService.focusInto(t[s].getGui()))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}focusContainer(e,t){e?.setAllowFocus?.(!0);let n=this.focusService.focusInto(e.getGui(),t);return e?.setAllowFocus?.(!1),n}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers.values()]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},Kae=class extends d2{constructor(e){super(),this.gridBody=ie,this.sideBar=ie,this.pagination=ie,this.rootWrapperBody=ie,this.eGridDiv=e}postConstruct(){let e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:r=>this.addCssClass(r),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:r=>{this.getGui().style.userSelect=r??"",this.getGui().style.webkitUserSelect=r??""},setCursor:r=>{this.getGui().style.cursor=r??""}},t=this.createManagedBean(new qae),n=t.getOptionalSelectors(),i=this.createTemplate(n),s=[hoe,...Object.values(n).filter(r=>!!r)];this.setTemplate(i,s),t.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:r=>t.focusInnerElement(r),forceFocusOutWhenTabGuardsAreEmpty:!0})}insertGridIntoDom(){let e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(e),this.gos.get("debug")&&ys("Grid removed from DOM")})}updateLayoutClasses(e,t){let n=this.rootWrapperBody.classList;n.toggle("ag-layout-auto-height",t.autoHeight),n.toggle("ag-layout-normal",t.normal),n.toggle("ag-layout-print",t.print),this.addOrRemoveCssClass("ag-layout-auto-height",t.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",t.normal),this.addOrRemoveCssClass("ag-layout-print",t.print)}createTemplate(e){let t=e.gridHeaderDropZonesSelector?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",n=e.sideBarSelector?'<ag-side-bar data-ref="sideBar"></ag-side-bar>':"",i=e.statusBarSelector?"<ag-status-bar></ag-status-bar>":"",s=e.watermarkSelector?"<ag-watermark></ag-watermark>":"",r=e.paginationSelector?'<ag-pagination data-ref="pagination"></ag-pagination>':"";return`<div class="ag-root-wrapper" role="presentation">
                ${t}
                <div class="ag-root-wrapper-body" data-ref="rootWrapperBody" role="presentation">
                    <ag-grid-body data-ref="gridBody"></ag-grid-body>
                    ${n}
                </div>
                ${i}
                ${r}
                ${s}
            </div>`}getFocusableElement(){return this.rootWrapperBody}forceFocusOutOfContainer(e=!1){if(!e&&this.pagination?.isDisplayed()){this.pagination.forceFocusOutOfContainer(e);return}super.forceFocusOutOfContainer(e)}getFocusableContainers(){let e=[this.gridBody];return[this.sideBar,this.pagination].forEach(t=>{t&&e.push(t)}),e.filter(t=>Js(t.getGui()))}},Qae=class extends L{constructor(){super(...arguments),this.beanName="alignedGridsService",this.consuming=!1}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.ctrlsService=e.ctrlsService,this.columnApplyStateService=e.columnApplyStateService}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[],t=typeof e=="function";typeof e=="function"&&(e=e());let n=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return e.map(s=>{if(!s){$e("alignedGrids contains an undefined option."),t||$e(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),$e(n());return}if(this.isGridApi(s))return s;let r=s;return"current"in r?r.current?.api:(r.api||$e(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${n()}`),r.api)}).filter(s=>!!s&&!s.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){let e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach(t=>{t.isDestroyed()||t.dispatchEvent(e)})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){let t={type:"alignedGridColumn",event:e};this.fireEvent(t)}fireScrollEvent(e){if(e.direction!=="horizontal")return;let t={type:"alignedGridScroll",event:e};this.fireEvent(t)}onScrollEvent(e){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}getMasterColumns(e){let t=[];return e.columns?e.columns.forEach(n=>{t.push(n)}):e.column&&t.push(e.column),t}getColumnIds(e){let t=[];return e.columns?e.columns.forEach(n=>{t.push(n.getColId())}):e.column&&t.push(e.column.getColId()),t}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{let t=e;this.processColumnEvent(t);break}case"columnGroupOpened":{let t=e;this.processGroupOpenedEvent(t);break}case"columnPivotChanged":j("pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(e){e.columnGroups.forEach(t=>{let n=null;if(t){let i=t.getGroupId();n=this.columnModel.getProvidedColGroup(i)}t&&!n||this.columnModel.setColumnGroupOpened(n,t.isExpanded(),"alignedGridChanged")})}processColumnEvent(e){let t=e.column,n=null;if(t&&(n=this.columnModel.getColDefCol(t.getColId())),t&&!n)return;let i=this.getMasterColumns(e);switch(e.type){case"columnMoved":{let a=e.api.getColumnState().map(l=>({colId:l.colId}));this.columnApplyStateService.applyColumnState({state:a,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{let a=e.api.getColumnState().map(l=>({colId:l.colId,hide:l.hide}));this.columnApplyStateService.applyColumnState({state:a},"alignedGridChanged")}break;case"columnPinned":{let a=e.api.getColumnState().map(l=>({colId:l.colId,pinned:l.pinned}));this.columnApplyStateService.applyColumnState({state:a},"alignedGridChanged")}break;case"columnResized":{let o=e,a={};i.forEach(l=>{a[l.getId()]={key:l.getColId(),newWidth:l.getActualWidth()}}),o.flexColumns?.forEach(l=>{a[l.getId()]&&delete a[l.getId()]}),this.columnSizeService.setColumnWidths(Object.values(a),!1,o.finished,"alignedGridChanged");break}}let r=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(o=>{o.setGridOption("alwaysShowVerticalScroll",r)})}},Yae={version:Ee,moduleName:"@ag-grid-community/aligned-grid",beans:[Qae]};function Jae(e,t){let n=e.columnModel.getColDefCol(t);return n?n.getColDef():null}function Xae(e){return e.columnModel.getColumnDefs()}function Zae(e,t){typeof t=="number"?e.columnSizeService.sizeColumnsToFit(t,"api"):e.ctrlsService.getGridBodyCtrl().sizeColumnsToFit(t)}function ele(e,t,n){e.columnModel.setColumnGroupOpened(t,n,"api")}function tle(e,t,n){return e.visibleColsService.getColumnGroup(t,n)}function nle(e,t){return e.columnModel.getProvidedColGroup(t)}function ile(e,t,n){return e.columnNameService.getDisplayNameForColumn(t,n)||""}function sle(e,t,n){return e.columnNameService.getDisplayNameForColumnGroup(t,n)||""}function rle(e,t){return e.columnModel.getColDefCol(t)}function ole(e){return e.columnModel.getColDefCols()}function ale(e,t){return e.columnApplyStateService.applyColumnState(t,"api")}function lle(e){return e.columnGetStateService.getColumnState()}function cle(e){e.columnApplyStateService.resetColumnState("api")}function ule(e){return e.columnGroupStateService.getColumnGroupState()}function dle(e,t){e.columnGroupStateService.setColumnGroupState(t,"api")}function hle(e){e.columnGroupStateService.resetColumnGroupState("api")}function fle(e){return e.visibleColsService.isPinningLeft()||e.visibleColsService.isPinningRight()}function ple(e){return e.visibleColsService.isPinningLeft()}function gle(e){return e.visibleColsService.isPinningRight()}function mle(e,t){return e.visibleColsService.getColAfter(t)}function vle(e,t){return e.visibleColsService.getColBefore(t)}function Cle(e,t,n){e.columnModel.setColsVisible([t],n,"api")}function yle(e,t,n){e.columnModel.setColsVisible(t,n,"api")}function wle(e,t,n){e.columnModel.setColsPinned([t],n,"api")}function Sle(e,t,n){e.columnModel.setColsPinned(t,n,"api")}function _le(e){return e.columnModel.getCols()}function ble(e){return e.visibleColsService.getLeftCols()}function Ele(e){return e.visibleColsService.getCenterCols()}function Dle(e){return e.visibleColsService.getRightCols()}function Tle(e){return e.visibleColsService.getAllCols()}function Rle(e){return e.columnViewportService.getViewportColumns()}function Ile(e,t,n){e.columnMoveService.moveColumns([t],n,"api")}function Ale(e,t,n){e.columnMoveService.moveColumnByIndex(t,n,"api")}function Mle(e,t,n){e.columnMoveService.moveColumns(t,n,"api")}function Ple(e,t,n,i=!0,s="api"){e.columnSizeService.setColumnWidths([{key:t,newWidth:n}],!1,i,s)}function Fle(e,t,n=!0,i="api"){e.columnSizeService.setColumnWidths(t,!1,n,i)}function xle(e){return e.visibleColsService.getTreeLeft()}function Ole(e){return e.visibleColsService.getTreeCenter()}function Nle(e){return e.visibleColsService.getTreeRight()}function kle(e){return e.visibleColsService.getAllTrees()}function Lle(e,t,n){return e.columnAutosizeService.autoSizeCols({colKeys:[t],skipHeader:n,source:"api"})}function Vle(e,t,n){e.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:n,source:"api"})}function Ble(e,t){e.columnAutosizeService.autoSizeAllColumns("api",t)}var RG={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},IG=["january","february","march","april","may","june","july","august","september","october","november","december"],Gle=class extends L{constructor(){super(...arguments),this.beanName="dataTypeService",this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(e){this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.columnApplyStateService=e.columnApplyStateService}postConstruct(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(ud(e.source))})}processDataTypeDefinitions(){let e=this.getDefaultDataTypes();this.dataTypeDefinitions={},this.formatValueFuncs={};let t=i=>s=>{let{column:r,node:o,value:a}=s,l=r.getColDef().valueFormatter;return l===i.groupSafeValueFormatter&&(l=i.valueFormatter),this.valueService.formatValue(r,o,a,l)};Object.entries(e).forEach(([i,s])=>{let r=ae(B({},s),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(s)});this.dataTypeDefinitions[i]=r,this.formatValueFuncs[i]=t(r)});let n=this.gos.get("dataTypeDefinitions")??{};this.dataTypeMatchers={},Object.entries(n).forEach(([i,s])=>{let r=this.processDataTypeDefinition(s,n,[i],e);r&&(this.dataTypeDefinitions[i]=r,s.dataTypeMatcher&&(this.dataTypeMatchers[i]=s.dataTypeMatcher),this.formatValueFuncs[i]=t(r))}),this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach(i=>{let s=this.dataTypeMatchers[i];s&&delete this.dataTypeMatchers[i],this.dataTypeMatchers[i]=s??e[i].dataTypeMatcher})}mergeDataTypeDefinitions(e,t){let n=B(B({},e),t);return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(n.columnTypes=[...Ty(e.columnTypes),...Ty(t.columnTypes)]),n}processDataTypeDefinition(e,t,n,i){let s,r=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let o=i[r],a=t[r];if(o&&a&&(o=a),!this.validateDataTypeDefinition(e,o,r))return;s=this.mergeDataTypeDefinitions(o,e)}else{if(n.includes(r)){j('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}let o=t[r];if(!this.validateDataTypeDefinition(e,o,r))return;let a=this.processDataTypeDefinition(o,t,[...n,r],i);if(!a)return;s=this.mergeDataTypeDefinitions(a,e)}return ae(B({},s),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(s)})}validateDataTypeDefinition(e,t,n){return t?t.baseDataType!==e.baseDataType?(j('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(j(`The data type definition ${n} does not exist.`),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return t=>{if(t.node?.group){let n=t.column.getAggFunc();if(n){if(n==="first"||n==="last")return e.valueFormatter(t);if(e.baseDataType==="number"&&n!=="count"){if(typeof t.value=="number")return e.valueFormatter(t);if(typeof t.value=="object"){if(!t.value)return;if("toNumber"in t.value)return e.valueFormatter(ae(B({},t),{value:t.value.toNumber()}));if("value"in t.value)return e.valueFormatter(ae(B({},t),{value:t.value.value}))}}}if(!this.gos.get("suppressGroupMaintainValueType"))return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive()){if(typeof t.value!="string"||e.dataTypeMatcher?.(t.value))return e.valueFormatter(t);if(!this.gos.get("suppressGroupMaintainValueType"))return}return e.valueFormatter(t)}}updateColDefAndGetColumnType(e,t,n){let{cellDataType:i}=t,{field:s}=t;if(i===void 0&&(i=e.cellDataType),(i==null||i===!0)&&(i=this.canInferCellDataType(e,t)?this.inferCellDataType(s,n):!1),!i){e.cellDataType=!1;return}let r=this.dataTypeDefinitions[i];if(!r){j(`Missing data type definition - "${i}"`);return}return e.cellDataType=i,r.groupSafeValueFormatter&&(e.valueFormatter=r.groupSafeValueFormatter),r.valueParser&&(e.valueParser=r.valueParser),r.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,i,r,n),r.columnTypes}addColumnListeners(e){if(!this.isWaitingForRowData)return;let t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;let n=i=>{t.add(i.key)};e.addEventListener("columnStateUpdated",n),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.removeEventListener("columnStateUpdated",n))}canInferCellDataType(e,t){if(this.rowModel.getType()!=="clientSide")return!1;let n={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,n))return!1;let i=t.type===null?e.type:t.type;if(i){let s=this.gos.get("columnTypes")??{};if(Ty(i).some(o=>{let a=s[o.trim()];return a&&this.doColDefPropsPreventInference(a,n)}))return!1}return!this.doColDefPropsPreventInference(e,n)}doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([n,i])=>this.doesColDefPropPreventInference(e,t,n,i))}doesColDefPropPreventInference(e,t,n,i){if(!t[n])return!1;let s=e[n];return s===null?(t[n]=!1,!1):i===void 0?!!s:s===i}inferCellDataType(e,t){if(!e)return;let n,i=this.getInitialData();if(i){let r=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");n=ip(i,e,r)}else this.initWaitForRowData(t);if(n==null)return;let[s]=Object.entries(this.dataTypeMatchers).find(([r,o])=>o(n))??["object"];return s}getInitialData(){let e=this.gos.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{let t=this.rowModel.getRootNode().allLeafChildren;if(t?.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;let t=this.isColumnTypeOverrideInDataTypeDefinitions;t&&this.columnModel.queueResizeOperations();let[n]=this.addManagedEventListeners({rowDataUpdateStarted:i=>{let{firstRowData:s}=i;if(!s)return;n?.(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(s,t),this.columnStateUpdatesPendingInference={},t&&this.columnModel.processResizeOperations();let r={type:"dataTypesInferred"};this.eventService.dispatchEvent(r)}})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,t){this.initialData=e;let n=[];this.destroyColumnStateUpdateListeners();let i={},s={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([r,o])=>{let a=this.columnModel.getCol(r);if(!a)return;let l=a.getColDef();if(!this.columnModel.resetColDefIntoCol(a,"cellDataTypeInferred"))return;let c=a.getColDef();if(t&&c.type&&c.type!==l.type){let u=this.getUpdatedColumnState(a,o);u.rowGroup&&u.rowGroupIndex==null&&(i[r]=u),u.pivot&&u.pivotIndex==null&&(s[r]=u),n.push(u)}}),t&&n.push(...this.funcColsService.generateColumnStateForRowGroupAndPivotIndexes(i,s)),n.length&&this.columnApplyStateService.applyColumnState({state:n},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,t){let n=this.columnApplyStateService.getColumnStateFromColDef(e);return t.forEach(i=>{delete n[i],i==="rowGroup"?delete n.rowGroupIndex:i==="pivot"&&delete n.pivotIndex}),n}checkObjectValueHandlers(e){let t=this.dataTypeDefinitions.object,n=e.object;this.hasObjectValueParser=t.valueParser!==n.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==n.valueFormatter}getDateStringTypeDefinition(e){return e?this.getDataTypeDefinition(e)??this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){let t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){return this.getDataTypeDefinition(e)?.baseDataType}checkType(e,t){if(t==null)return!0;let n=this.getDataTypeDefinition(e)?.dataTypeMatcher;return n?n(t):!0}validateColDef(e){e.cellDataType==="object"&&(e.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&j('Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"'),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&j('Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"'))}getFormatValue(e){return this.formatValueFuncs[e]}setColDefPropertiesForBaseDataType(e,t,n,i){let s=this.formatValueFuncs[t],r=ai.__isRegistered("@ag-grid-enterprise/set-filter",this.gridId),o=this.localeService.getLocaleTextFunc(),a=l=>{let{filterParams:c}=e;e.filterParams=typeof c=="object"?B(B({},c),l):l};switch(n.baseDataType){case"number":{e.cellEditor="agNumberCellEditor",r&&a({comparator:(l,c)=>{let u=l==null?0:parseInt(l),h=c==null?0:parseInt(c);return u===h?0:u>h?1:-1}});break}case"boolean":{e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=l=>!!l.colDef.editable&&l.event.key===N.SPACE,a(r?{valueFormatter:l=>q(l.value)?o(String(l.value),l.value?"True":"False"):o("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(l,c)=>c,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(l,c)=>c===!1,numberOfInputs:0}]});break}case"date":{e.cellEditor="agDateCellEditor",e.keyCreator=s,r&&a({valueFormatter:l=>{let c=s(l);return q(c)?c:o("blanks","(Blanks)")},treeList:!0,treeListFormatter:(l,c)=>{if(c===1&&l!=null){let u=IG[Number(l)-1];return o(u,RG[u])}return l??o("blanks","(Blanks)")}});break}case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=s;let l=n.dateParser;a(r?{valueFormatter:c=>{let u=s(c);return q(u)?u:o("blanks","(Blanks)")},treeList:!0,treeListPathGetter:c=>{let u=l(c??void 0);return u?[String(u.getFullYear()),String(u.getMonth()+1),String(u.getDate())]:null},treeListFormatter:(c,u)=>{if(u===1&&c!=null){let h=IG[Number(c)-1];return o(h,RG[h])}return c??o("blanks","(Blanks)")}}:{comparator:(c,u)=>{let h=l(u);return u==null||h<c?-1:h>c?1:0}});break}case"object":{e.cellEditorParams={useFormatter:!0},e.comparator=(l,c)=>{let u=this.columnModel.getColDefCol(i),h=u?.getColDef();if(!u||!h)return 0;let f=l==null?"":s({column:u,node:null,value:l}),p=c==null?"":s({column:u,node:null,value:c});return f===p?0:f>p?1:-1},e.keyCreator=s,r?a({valueFormatter:l=>{let c=s(l);return q(c)?c:o("blanks","(Blanks)")}}):e.filterValueGetter=l=>s({column:l.column,node:l.node,value:this.valueService.getValue(l.column,l.node)});break}}}getDefaultDataTypes(){let e=n=>!!n.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:n=>n.newValue?.trim?.()===""?null:Number(n.newValue),valueFormatter:n=>n.value==null?"":typeof n.value!="number"||isNaN(n.value)?t("invalidNumber","Invalid Number"):String(n.value),dataTypeMatcher:n=>typeof n=="number"},text:{baseDataType:"text",valueParser:n=>n.newValue===""?null:CR(n.newValue),dataTypeMatcher:n=>typeof n=="string"},boolean:{baseDataType:"boolean",valueParser:n=>n.newValue==null?n.newValue:n.newValue?.trim?.()===""?null:String(n.newValue).toLowerCase()==="true",valueFormatter:n=>n.value==null?"":String(n.value),dataTypeMatcher:n=>typeof n=="boolean"},date:{baseDataType:"date",valueParser:n=>Ti(n.newValue==null?null:String(n.newValue)),valueFormatter:n=>n.value==null?"":!(n.value instanceof Date)||isNaN(n.value.getTime())?t("invalidDate","Invalid Date"):_s(n.value,!1)??"",dataTypeMatcher:n=>n instanceof Date},dateString:{baseDataType:"dateString",dateParser:n=>Ti(n)??void 0,dateFormatter:n=>_s(n??null,!1)??void 0,valueParser:n=>e(String(n.newValue))?n.newValue:null,valueFormatter:n=>e(String(n.value))?n.value:"",dataTypeMatcher:n=>typeof n=="string"&&e(n)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:n=>CR(n.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(e=>e()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}},Hle={version:Ee,moduleName:"@ag-grid-community/data-type",beans:[Gle]},Ule={version:Ee,moduleName:"@ag-grid-community/column-api",apiFunctions:{getColumnDef:Jae,getColumnDefs:Xae,sizeColumnsToFit:Zae,setColumnGroupOpened:ele,getColumnGroup:tle,getProvidedColumnGroup:nle,getDisplayNameForColumn:ile,getDisplayNameForColumnGroup:sle,getColumn:rle,getColumns:ole,applyColumnState:ale,getColumnState:lle,resetColumnState:cle,getColumnGroupState:ule,setColumnGroupState:dle,resetColumnGroupState:hle,isPinning:fle,isPinningLeft:ple,isPinningRight:gle,getDisplayedColAfter:mle,getDisplayedColBefore:vle,setColumnVisible:Cle,setColumnsVisible:yle,setColumnPinned:wle,setColumnsPinned:Sle,getAllGridColumns:_le,getDisplayedLeftColumns:ble,getDisplayedCenterColumns:Ele,getDisplayedRightColumns:Dle,getAllDisplayedColumns:Tle,getAllDisplayedVirtualColumns:Rle,moveColumn:Ile,moveColumnByIndex:Ale,moveColumns:Mle,setColumnWidth:Ple,setColumnWidths:Fle,getLeftDisplayedColumnGroups:xle,getCenterDisplayedColumnGroups:Ole,getRightDisplayedColumnGroups:Nle,getAllDisplayedColumnGroups:kle,autoSizeColumn:Lle,autoSizeColumns:Vle,autoSizeAllColumns:Ble}};function Wle(e,t){e.ctrlsService.getGridBodyCtrl().getRowDragFeature().addRowDropZone(t)}function jle(e,t){let n=e.dragAndDropService.findExternalZone(t);n&&e.dragAndDropService.removeDropTarget(n)}function zle(e,t){return e.ctrlsService.getGridBodyCtrl().getRowDragFeature().getRowDropZone(t)}var $le={version:Ee,moduleName:"@ag-grid-community/drag-api",apiFunctions:{addRowDropZone:Wle,removeRowDropZone:jle,getRowDropZoneParams:zle}};function qle(e){return e.pinnedRowModel.getPinnedTopRowCount()}function Kle(e){return e.pinnedRowModel.getPinnedBottomRowCount()}function Qle(e,t){return e.pinnedRowModel.getPinnedTopRow(t)}function Yle(e,t){return e.pinnedRowModel.getPinnedBottomRow(t)}var Jle={version:Ee,moduleName:"@ag-grid-community/pinned-row-api",apiFunctions:{getPinnedTopRowCount:qle,getPinnedBottomRowCount:Kle,getPinnedTopRow:Qle,getPinnedBottomRow:Yle}};function Xle(e){e.overlayService.showLoadingOverlay()}function Zle(e){e.overlayService.showNoRowsOverlay()}function ece(e){e.overlayService.hideOverlay()}var tce={version:Ee,moduleName:"@ag-grid-community/overlay-api",apiFunctions:{showLoadingOverlay:Xle,showNoRowsOverlay:Zle,hideOverlay:ece}};function nce(e,t,n){if(!t)return;let i=e.ctrlsService.getGridBodyCtrl().getGui(),s=`aria-${t}`;n===null?i.removeAttribute(s):i.setAttribute(s,n)}function ice(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function sce(e,t={}){let n=i=>j(`Since v31.1 api.flashCells parameter '${i}Delay' is deprecated. Please use '${i}Duration' instead.`);q(t.fadeDelay)&&n("fade"),q(t.flashDelay)&&n("flash"),e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.flashCells(t))}function rce(e){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getHeaderRowContainerCtrls().forEach(t=>t.refresh()))}function oce(e){return e.animationFrameService.isQueueEmpty()}function ace(e){e.animationFrameService.flushAllFrames()}function lce(e){return{rowHeight:e.gos.getRowHeightAsNumber(),headerHeight:e.columnModel.getHeaderHeight()}}function cce(e,t={}){return e.rowRenderer.getCellRendererInstances(t).map(rp)}var uce={version:Ee,moduleName:"@ag-grid-community/render-api",apiFunctions:{setGridAriaProperty:nce,refreshCells:ice,flashCells:sce,refreshHeader:rce,isAnimationFrameQueueEmpty:oce,flushAllAnimationFrames:ace,getSizesForCurrentTheme:lce,getCellRendererInstances:cce}};function dce(e){e.valueCache.expire()}function hce(e,t,n){return h2(e,{colKey:t,rowNode:n})}function h2(e,t){let{colKey:n,rowNode:i,useFormatter:s}=t,r=e.columnModel.getColDefCol(n)??e.columnModel.getCol(n);if(Ve(r))return null;let o=e.valueService.getValue(r,i);return s?e.valueService.formatValue(r,i,o)??kr(o,!0):o}function fce(e){return e.context.getGridId()}function pce(e){e.gridDestroyService.destroy()}function gce(e){return e.gridDestroyService.isDestroyCalled()}function mce(e,t){return e.gos.get(t)}function vce(e,t,n){f2(e,{[t]:n})}function f2(e,t){e.gos.updateGridOptions({options:t})}function Cce(e,t,n){e.apiEventService.addEventListener(t,n)}function yce(e,t,n){e.apiEventService.removeEventListener(t,n)}function wce(e,t){e.apiEventService.addGlobalListener(t)}function Sce(e,t){e.apiEventService.removeGlobalListener(t)}function _ce(e){return e.focusService.getFocusedCell()}function bce(e){return e.focusService.clearFocusedCell()}function Ece(e,t,n,i){e.focusService.setFocusedCell({rowIndex:t,column:n,rowPinned:i,forceBrowserFocus:!0})}function Dce(e,t){return e.navigationService.tabToNextCell(!1,t)}function Tce(e,t){return e.navigationService.tabToNextCell(!0,t)}function Rce(e,t,n=!1){let i=e.headerNavigationService.getHeaderPositionForColumn(t,n);i&&e.focusService.focusHeaderPosition({headerPosition:i})}function Ice(e,t,n){let i=e.columnModel.getCol(t);e.menuService.showColumnMenu({column:i,buttonElement:n,positionBy:"button"})}function Ace(e,t,n){let i=e.columnModel.getCol(t);if(i||(i=e.columnModel.getColDefCol(t)),!i){$e(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:i,mouseEvent:n,positionBy:"mouse"})}function Mce(e,t){let n=e.columnModel.getCol(t);if(!n){$e(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:n,positionBy:"auto"})}function Pce(e){e.menuService.hidePopupMenu()}function Fce(e,t={}){let n=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(n))}function xce(e,t,n,i,s){e.expansionService.setRowNodeExpanded(t,n,i,s)}function Oce(e,t){return e.rowModel.getRowNode(t)}function Nce(e,t,n,i){e.rowRenderer.addRenderedRowListener(t,n,i)}function kce(e){return e.rowRenderer.getRenderedNodes()}function Lce(e,t,n){e.rowModel.forEachNode(t,n)}function Vce(e){return p2(e)}function p2(e){return e.rowRenderer.getFirstVirtualRenderedRow()}function Bce(e){return g2(e)}function g2(e){return e.rowRenderer.getLastVirtualRenderedRow()}function Gce(e,t){return e.rowModel.getRow(t)}function Hce(e){return e.rowModel.getRowCount()}function Uce(e){return e.rowModel}function Wce(e,t){if(!t.nodes.every(a=>a.rowPinned?(j("cannot select pinned rows"),!1):a.id===void 0?(j("cannot select node until id for node is known"),!1):!0))return;let{nodes:i,source:s,newValue:r}=t,o=i;e.selectionService.setNodesSelected({nodes:o,source:s??"api",newValue:r})}function jce(e,t="apiSelectAll"){e.selectionService.selectAllRowNodes({source:t})}function zce(e,t="apiSelectAll"){e.selectionService.deselectAllRowNodes({source:t})}function $ce(e,t="apiSelectAllFiltered"){e.selectionService.selectAllRowNodes({source:t,justFiltered:!0})}function qce(e,t="apiSelectAllFiltered"){e.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})}function Kce(e,t="apiSelectAllCurrentPage"){e.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})}function Qce(e,t="apiSelectAllCurrentPage"){e.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})}function Yce(e){return e.selectionService.getSelectedNodes()}function Jce(e){return e.selectionService.getSelectedRows()}function Xce(e){e.sortController.onSortChanged("api")}var Zce={version:Ee,moduleName:"@ag-grid-community/core-api",apiFunctions:{getGridId:fce,destroy:pce,isDestroyed:gce,getGridOption:mce,setGridOption:vce,updateGridOptions:f2}},eue={version:Ee,moduleName:"@ag-grid-community/row-selection-api",apiFunctions:{setNodesSelected:Wce,selectAll:jce,deselectAll:zce,selectAllFiltered:$ce,deselectAllFiltered:qce,selectAllOnCurrentPage:Kce,deselectAllOnCurrentPage:Qce,getSelectedNodes:Yce,getSelectedRows:Jce}},tue={version:Ee,moduleName:"@ag-grid-community/row-api",apiFunctions:{redrawRows:Fce,setRowNodeExpanded:xce,getRowNode:Oce,addRenderedRowListener:Nce,getRenderedNodes:kce,forEachNode:Lce,getFirstDisplayedRow:Vce,getFirstDisplayedRowIndex:p2,getLastDisplayedRow:Bce,getLastDisplayedRowIndex:g2,getDisplayedRowAtIndex:Gce,getDisplayedRowCount:Hce,getModel:Uce}},nue={version:Ee,moduleName:"@ag-grid-community/scroll-api",apiFunctions:{getVerticalPixelRange:Boe,getHorizontalPixelRange:Goe,ensureColumnVisible:l2,ensureIndexVisible:c2,ensureNodeVisible:Hoe}},iue={version:Ee,moduleName:"@ag-grid-community/keyboard-navigation-api",apiFunctions:{getFocusedCell:_ce,clearFocusedCell:bce,setFocusedCell:Ece,setFocusedHeader:Rce,tabToNextCell:Dce,tabToPreviousCell:Tce}},sue={version:Ee,moduleName:"@ag-grid-community/event-api",apiFunctions:{addEventListener:Cce,addGlobalListener:wce,removeEventListener:yce,removeGlobalListener:Sce}},rue={version:Ee,moduleName:"@ag-grid-community/cell-api",apiFunctions:{expireValueCache:dce,getValue:hce,getCellValue:h2}},oue={version:Ee,moduleName:"@ag-grid-community/menu-api",apiFunctions:{showColumnMenuAfterButtonClick:Ice,showColumnMenuAfterMouseClick:Ace,showColumnMenu:Mce,hidePopupMenu:Pce}},aue={version:Ee,moduleName:"@ag-grid-community/sort-api",apiFunctions:{onSortChanged:Xce}},lue={version:Ee,moduleName:"@ag-grid-community/api",dependantModules:[Zce,Jle,eue,Ule,tue,$le,nue,tce,iue,sue,uce,rue,oue,aue]};function cue(e){return e.stateService?.getState()??{}}var uue=class extends L{constructor(){super(...arguments),this.beanName="stateService",this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=ci(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=ci(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=ci(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}wireBeans(e){this.filterManager=e.filterManager,this.ctrlsService=e.ctrlsService,this.pivotResultColsService=e.pivotResultColsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnGroupStateService=e.columnGroupStateService,this.columnGetStateService=e.columnGetStateService,this.paginationService=e.paginationService,this.rowModel=e.rowModel,this.selectionService=e.selectionService,this.expansionService=e.expansionService,this.columnAnimationService=e.columnAnimationService,this.columnApplyStateService=e.columnApplyStateService,this.sideBarService=e.sideBarService,this.rangeService=e.rangeService}postConstruct(){this.isClientSideRowModel=this.rowModel.getType()==="clientSide",this.cachedState=this.gos.get("initialState")??{},this.ctrlsService.whenReady(()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));let[e,t,n]=this.addManagedEventListeners({newColumnsLoaded:({source:i})=>{i==="gridInitializing"&&(e(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))},rowCountReady:()=>{t?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())},firstDataRendered:()=>{n?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())}})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState());let e=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:e,sideBarUpdated:e})}setupStateOnColumnsInitialised(){let e=this.gos.get("initialState")??{};this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState()),this.addManagedEventListeners({columnValueChanged:()=>this.updateColumnState(["aggregation"]),columnMoved:()=>this.updateColumnState(["columnOrder"]),columnPinned:()=>this.updateColumnState(["columnPinning"]),columnResized:()=>this.updateColumnState(["columnSizing"]),columnVisible:()=>this.updateColumnState(["columnVisibility"]),columnPivotChanged:()=>this.updateColumnState(["pivot"]),columnPivotModeChanged:()=>this.updateColumnState(["pivot"]),columnRowGroupChanged:()=>this.updateColumnState(["rowGroup"]),sortChanged:()=>this.updateColumnState(["sort"]),newColumnsLoaded:()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setupStateOnRowCountReady(){let{filter:e,rowGroupExpansion:t,rowSelection:n,pagination:i}=this.gos.get("initialState")??{},s=this.gos.get("advancedFilterModel");(e||s)&&this.setFilterState(e,s),t&&this.setRowGroupExpansionState(t),n&&this.setRowSelectionState(n),i&&this.setPaginationState(i),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState()),this.addManagedEventListeners({filterChanged:()=>this.updateCachedState("filter",this.getFilterState()),rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:r=>{(r.newPage||r.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())}})}setupStateOnFirstDataRendered(){let{scroll:e,rangeSelection:t,focusedCell:n,columnOrder:i}=this.gos.get("initialState")??{};n&&this.setFocusedCellState(n),t&&this.setRangeSelectionState(t),e&&this.setScrollState(e),this.setColumnPivotState(!!i?.orderedColIds),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState()),this.updateCachedState("rangeSelection",this.getRangeSelectionState()),this.updateCachedState("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:()=>this.updateCachedState("focusedCell",this.getFocusedCellState()),rangeSelectionChanged:s=>{s.finished&&this.updateCachedState("rangeSelection",this.getRangeSelectionState())},bodyScrollEnd:()=>this.updateCachedState("scroll",this.getScrollState())})}getColumnState(){let e=this.columnModel.isPivotMode(),t=[],n=[],i=[],s=[],r=[],o=[],a=[],l=[],c=[],u=this.columnGetStateService.getColumnState();for(let h=0;h<u.length;h++){let{colId:f,sort:p,sortIndex:v,rowGroup:y,rowGroupIndex:C,aggFunc:E,pivot:T,pivotIndex:R,pinned:F,hide:$,width:k,flex:b}=u[h];c.push(f),p&&(t[v??0]={colId:f,sort:p}),y&&(n[C??0]=f),typeof E=="string"&&i.push({colId:f,aggFunc:E}),T&&(s[R??0]=f),F&&(F==="right"?o:r).push(f),$&&a.push(f),(b||k)&&l.push({colId:f,flex:b??void 0,width:k})}return{sort:t.length?{sortModel:t}:void 0,rowGroup:n.length?{groupColIds:n}:void 0,aggregation:i.length?{aggregationModel:i}:void 0,pivot:s.length||e?{pivotMode:e,pivotColIds:s}:void 0,columnPinning:r.length||o.length?{leftColIds:r,rightColIds:o}:void 0,columnVisibility:a.length?{hiddenColIds:a}:void 0,columnSizing:l.length?{columnSizingModel:l}:void 0,columnOrder:c.length?{orderedColIds:c}:void 0}}setColumnState(e){let{sort:t,rowGroup:n,aggregation:i,pivot:s,columnPinning:r,columnVisibility:o,columnSizing:a,columnOrder:l}=e,c={},u=v=>{let y=c[v];return y||(y={colId:v},c[v]=y,y)};t&&t.sortModel.forEach(({colId:v,sort:y},C)=>{let E=u(v);E.sort=y,E.sortIndex=C}),n&&n.groupColIds.forEach((v,y)=>{let C=u(v);C.rowGroup=!0,C.rowGroupIndex=y}),i&&i.aggregationModel.forEach(({colId:v,aggFunc:y})=>{u(v).aggFunc=y}),s&&(s.pivotColIds.forEach((v,y)=>{let C=u(v);C.pivot=!0,C.pivotIndex=y}),this.gos.updateGridOptions({options:{pivotMode:s.pivotMode},source:"gridInitializing"})),r&&(r.leftColIds.forEach(v=>{u(v).pinned="left"}),r.rightColIds.forEach(v=>{u(v).pinned="right"})),o&&o.hiddenColIds.forEach(v=>{u(v).hide=!0}),a&&a.columnSizingModel.forEach(({colId:v,flex:y,width:C})=>{let E=u(v);E.flex=y??null,E.width=C});let h=l?.orderedColIds,f=!!h?.length,p=f?h.map(v=>u(v)):Object.values(c);if(p.length){this.columnStates=p;let v={sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};this.columnApplyStateService.applyColumnState({state:p,applyOrder:f,defaultState:v},"gridInitializing")}}setColumnPivotState(e){let t=this.columnStates;this.columnStates=void 0;let n=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.pivotResultColsService.isPivotResultColsPresent()){if(t){let i=[];for(let s of t)this.pivotResultColsService.getPivotResultCol(s.colId)&&i.push(s);this.columnApplyStateService.applyColumnState({state:i,applyOrder:e},"gridInitializing")}n&&this.columnGroupStateService.setColumnGroupState(n,"gridInitializing")}}getColumnGroupState(){let e=this.columnGroupStateService.getColumnGroupState(),t=[];return e.forEach(({groupId:n,open:i})=>{i&&t.push(n)}),t.length?{openColumnGroupIds:t}:void 0}setColumnGroupState(e){if(!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;let t=new Set(e.columnGroup?.openColumnGroupIds),i=this.columnGroupStateService.getColumnGroupState().map(({groupId:s})=>{let r=t.has(s);return r&&t.delete(s),{groupId:s,open:r}});t.forEach(s=>{i.push({groupId:s,open:!0})}),i.length&&(this.columnGroupStates=i),this.columnGroupStateService.setColumnGroupState(i,"gridInitializing")}getFilterState(){let e=this.filterManager?.getFilterModel();e&&Object.keys(e).length===0&&(e=void 0);let t=this.filterManager?.getAdvancedFilterModel()??void 0;return e||t?{filterModel:e,advancedFilterModel:t}:void 0}setFilterState(e,t){let{filterModel:n,advancedFilterModel:i}=e??{advancedFilterModel:t};n&&this.filterManager?.setFilterModel(n,"columnFilter"),i&&this.filterManager?.setAdvancedFilterModel(i)}getRangeSelectionState(){let e=this.rangeService?.getCellRanges().map(t=>{let{id:n,type:i,startRow:s,endRow:r,columns:o,startColumn:a}=t;return{id:n,type:i,startRow:s,endRow:r,colIds:o.map(l=>l.getColId()),startColId:a.getColId()}});return e?.length?{cellRanges:e}:void 0}setRangeSelectionState(e){if(!this.gos.get("enableRangeSelection")||!this.rangeService)return;let t=[];e.cellRanges.forEach(n=>{let i=[];if(n.colIds.forEach(r=>{let o=this.columnModel.getCol(r);o&&i.push(o)}),!i.length)return;let s=this.columnModel.getCol(n.startColId);if(!s){let r=this.visibleColsService.getAllCols(),o=new Set(i);s=r.find(a=>o.has(a))}t.push(ae(B({},n),{columns:i,startColumn:s}))}),this.rangeService.setCellRanges(t)}getScrollState(){if(!this.isClientSideRowModel)return;let e=this.ctrlsService.getGridBodyCtrl()?.getScrollFeature(),{left:t}=e?.getHScrollPosition()??{left:0},{top:n}=e?.getVScrollPosition()??{top:0};return n||t?{top:n,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;let{top:t,left:n}=e;this.ctrlsService.getGridBodyCtrl()?.getScrollFeature().setScrollPosition(t,n)}getSideBarState(){return this.sideBarService?.getSideBarComp()?.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;let e=this.focusService.getFocusedCell();if(e){let{column:t,rowIndex:n,rowPinned:i}=e;return{colId:t.getColId(),rowIndex:n,rowPinned:i}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;let{colId:t,rowIndex:n,rowPinned:i}=e;this.focusService.setFocusedCell({column:this.columnModel.getCol(t),rowIndex:n,rowPinned:i,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){if(!this.paginationService)return;let e=this.paginationService.getCurrentPage(),t=this.gos.get("paginationAutoPageSize")?void 0:this.paginationService.getPageSize();if(!(!e&&!t))return{page:e,pageSize:t}}setPaginationState(e){this.paginationService&&(e.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationService.setPageSize(e.pageSize,"initialState"),typeof e.page=="number"&&this.paginationService.setPage(e.page))}getRowSelectionState(){let e=this.selectionService.getSelectionState();return!e||!Array.isArray(e)&&(e.selectAll===!1||e.selectAllChildren===!1)&&!e?.toggledNodes?.length?void 0:e}setRowSelectionState(e){this.selectionService.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){let e=this.expansionService.getExpandedRows();return e.length?{expandedRowGroupIds:e}:void 0}setRowGroupExpansionState(e){this.expansionService.expandRows(e.expandedRowGroupIds)}updateColumnState(e){let t=this.getColumnState(),n=!1;Object.entries(t).forEach(([i,s])=>{Ay(s,this.cachedState[i])||(n=!0)}),this.cachedState=B(B({},this.cachedState),t),n&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){let n=this.cachedState[e];this.setCachedStateValue(e,t),Ay(t,n)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState=ae(B({},this.cachedState),{[e]:t})}refreshStaleState(){this.staleStateKeys.forEach(e=>{switch(e){case"rowSelection":this.setCachedStateValue(e,this.getRowSelectionState());break}}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach(t=>this.queuedUpdateSources.add(t)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){let e=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear();let t={type:"stateUpdated",sources:e,state:this.cachedState};this.eventService.dispatchEvent(t)}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),e(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}},m2={version:Ee,moduleName:"@ag-grid-community/state-core",beans:[uue]},due={version:Ee,moduleName:"@ag-grid-community/state-api",apiFunctions:{getState:cue},dependantModules:[m2]},hue={version:Ee,moduleName:"@ag-grid-community/state",dependantModules:[m2,due]};function fue(e){return e.rowModel.isLastRowIndexKnown()}function pue(e){return e.paginationService?.getPageSize()??100}function gue(e){return e.paginationService?.getCurrentPage()??0}function mue(e){return e.paginationService?.getTotalPages()??1}function vue(e){return e.paginationService?e.paginationService.getMasterRowCount():e.rowModel.getRowCount()}function Cue(e){e.paginationService?.goToNextPage()}function yue(e){e.paginationService?.goToPreviousPage()}function wue(e){e.paginationService?.goToFirstPage()}function Sue(e){e.paginationService?.goToLastPage()}function _ue(e,t){e.paginationService?.goToPage(t)}var bue=class extends L{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}postConstruct(){this.ctrlsService.whenReady(e=>{this.centerRowsCtrl=e.center;let t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.paginationService.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;let e=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(e>0){let t=()=>{let n=Math.max(this.gos.getRowHeightAsNumber(),1),i=Math.floor(e/n);this.paginationService.setPageSize(i,"autoCalculated")};this.isBodyRendered?ci(()=>t(),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};function Eue(e,t,n){e.addManagedElementListeners(t,{keydown:i=>{if(!i.defaultPrevented&&i.key===N.TAB){let s=i.shiftKey;n.findNextFocusableElement(t,!1,s)||n.focusNextGridCoreContainer(s)&&i.preventDefault()}}})}var Due=class extends Ke{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;let e=this.selectPageSizeComp.getValue();if(!e)return;let t=Number(e);isNaN(t)||t<1||t===this.paginationService.getPageSize()||(this.paginationService.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.paginationService=e.paginationService}postConstruct(){this.addManagedPropertyListener("paginationPageSizeSelector",()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!e?.newPageSize)return;let t=this.paginationService.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp&&this.appendChild(this.selectPageSizeComp))}reset(){zn(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get("paginationPageSizeSelector")!==!1}reloadPageSizesSelector(){let e=this.getPageSizeSelectorValues(),t=this.paginationService.getPageSize(),n=!t||!e.includes(t);n&&(e.unshift(""),j(`The paginationPageSize grid option is set to a value that is not in the list of page size options.
                Please make sure that the paginationPageSize grid option is set to one of the values in the 
                paginationPageSizeSelector array, or set the paginationPageSizeSelector to false to hide the page size selector.`)),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp));let i=this.localeService.getLocaleTextFunc(),s=i("pageSizeSelectorLabel","Page Size:"),r=e.map(a=>({value:String(a),text:String(a)})),o=i("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new JR).addOptions(r).setValue(String(n?"":t)).setAriaLabel(o).setLabel(s).onValueChange(()=>this.handlePageSizeItemSelected()),this.hasEmptyOption=n}getPageSizeSelectorValues(){let e=[20,50,100],t=this.gos.get("paginationPageSizeSelector");return!Array.isArray(t)||!this.validateValues(t)?e:[...t].sort((n,i)=>n-i)}validateValues(e){if(!e.length)return j(`The paginationPageSizeSelector grid option is an empty array. This is most likely a mistake.
                If you want to hide the page size selector, please set the paginationPageSizeSelector to false.`),!1;for(let t=0;t<e.length;t++){let n=e[t],i=typeof n=="number",s=n>0;if(!i)return j(`The paginationPageSizeSelector grid option contains a non-numeric value.
                    Please make sure that all values in the paginationPageSizeSelector array are numbers.`),!1;if(!s)return j(`The paginationPageSizeSelector grid option contains a negative number or zero.
                    Please make sure that all values in the paginationPageSizeSelector array are positive.`),!1}return!0}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},Tue={selector:"AG-PAGE-SIZE-SELECTOR",component:Due},Rue=class extends d2{constructor(){super(),this.btFirst=ie,this.btPrevious=ie,this.btNext=ie,this.btLast=ie,this.lbRecordCount=ie,this.lbFirstRowOnPage=ie,this.lbLastRowOnPage=ie,this.lbCurrent=ie,this.lbTotal=ie,this.pageSizeComp=ie,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1}wireBeans(e){this.rowNodeBlockLoader=e.rowNodeBlockLoader,this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.focusService=e.focusService}postConstruct(){let e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[Tue]);let{btFirst:t,btPrevious:n,btNext:i,btLast:s}=this;this.activateTabIndex([t,n,i,s]),t.insertAdjacentElement("afterbegin",Ji(e?"last":"first",this.gos)),n.insertAdjacentElement("afterbegin",Ji(e?"next":"previous",this.gos)),i.insertAdjacentElement("afterbegin",Ji(e?"previous":"next",this.gos)),s.insertAdjacentElement("afterbegin",Ji(e?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:r=>{this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(r):this.focusService.focusGridInnerElement(r)},forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){let t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{let{el:t,fn:n}=e;this.addManagedListeners(t,{click:n,keydown:i=>{(i.key===N.ENTER||i.key===N.SPACE)&&(i.preventDefault(),n())}})}),Eue(this,this.getGui(),this.focusService),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationService.goToFirstPage()}setCurrentPageLabel(){let e=this.paginationService.getTotalPages()>0,t=this.paginationService.getCurrentPage(),n=e?t+1:0;this.lbCurrent.textContent=this.formatNumber(n)}formatNumber(e){let t=this.gos.getCallback("paginationNumberFormatter");if(t)return t({value:e});let n=this.localeService.getLocaleTextFunc(),i=n("thousandSeparator",","),s=n("decimalSeparator",".");return Yie(e,i,s)}getTemplate(){let e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),n=e("to","to"),i=e("of","of"),s=e("firstPage","First Page"),r=e("previousPage","Previous Page"),o=e("nextPage","Next Page"),a=e("lastPage","Last Page"),l=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${l}">
                <ag-page-size-selector data-ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel" role="status">
                    <span id="ag-${l}-first-row" data-ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-to">${n}</span>
                    <span id="ag-${l}-last-row" data-ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-of">${i}</span>
                    <span id="ag-${l}-row-count" data-ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div data-ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${s}"></div>
                    <div data-ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${r}"></div>
                    <span class="ag-paging-description" role="status">
                        <span id="ag-${l}-start-page">${t}</span>
                        <span id="ag-${l}-start-page-number" data-ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${l}-of-page">${i}</span>
                        <span id="ag-${l}-of-page-number" data-ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div data-ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>
                    <div data-ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationService.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationService.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationService.goToLastPage()}enableOrDisableButtons(){let e=this.paginationService.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),n=this.paginationService.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);let i=this.isZeroPagesToDisplay(),s=e===n-1;this.nextButtonDisabled=s||i,this.lastButtonDisabled=!t||i||e===n-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){hne(e,t),e.classList.toggle("ag-disabled",t)}updateRowLabels(){let e=this.paginationService.getCurrentPage(),t=this.paginationService.getPageSize(),n=this.rowModel.isLastRowIndexKnown(),i=this.rowModel.isLastRowIndexKnown()?this.paginationService.getMasterRowCount():null,s,r;if(this.isZeroPagesToDisplay()?s=r=0:(s=t*e+1,r=s+t-1,n&&r>i&&(r=i)),this.lbFirstRowOnPage.textContent=this.formatNumber(s),this.rowNodeBlockLoader?.isLoading()){let o=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=o("pageLastRowUnknown","?")}else this.lbLastRowOnPage.textContent=this.formatNumber(r)}isZeroPagesToDisplay(){let e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages();return e&&t===0}setTotalLabels(){let e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages(),n=e?this.paginationService.getMasterRowCount():null;if(n===1){let i=this.rowModel.getRow(0);if(i&&i.group&&!(i.groupData||i.aggData)){this.setTotalLabelsToZero();return}}if(e)this.lbTotal.textContent=this.formatNumber(t),this.lbRecordCount.textContent=this.formatNumber(n);else{let i=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=i,this.lbRecordCount.innerHTML=i}}setTotalLabelsToZero(){this.lbFirstRowOnPage.textContent=this.formatNumber(0),this.lbCurrent.textContent=this.formatNumber(0),this.lbLastRowOnPage.textContent=this.formatNumber(0),this.lbTotal.textContent=this.formatNumber(0),this.lbRecordCount.textContent=this.formatNumber(0)}},Iue={selector:"AG-PAGINATION",component:Rue},Aue=class extends L{constructor(){super(...arguments),this.beanName="paginationService",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return Iue}isPaginateChildRows(){return this.gos.get("groupRemoveSingleChildren")||this.gos.get("groupRemoveLowestSingleChildren")?!0:this.gos.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){!this.active||this.currentPage===e||typeof this.currentPage!="number"||(this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}isRowPresent(e){return e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;let t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){return this.active?this.getPageForIndex(e.rowIndex)===this.currentPage:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){let e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return q(this.pageSizeAutoCalculated)?this.pageSizeAutoCalculated:q(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:q(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:q(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.pageBoundsService.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;let e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){let n=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}n!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}let e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();let t=this.pageSize*this.currentPage,n=this.pageSize*(this.currentPage+1)-1;if(n>e&&(n=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),n===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{let i=this.rowModel.getTopLevelRowDisplayedIndex(n+1);this.bottomDisplayedRowIndex=i-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}let e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){let{keepRenderedRows:t=!1,newPage:n=!1,newPageSize:i=!1}=e,s={type:"paginationChanged",animate:!1,newData:!1,newPage:n,newPageSize:i,keepRenderedRows:t};this.eventService.dispatchEvent(s)}},v2={version:Ee,moduleName:"@ag-grid-community/pagination-core",beans:[Aue,bue]},Mue={version:Ee,moduleName:"@ag-grid-community/pagination-api",dependantModules:[v2],apiFunctions:{paginationIsLastPageFound:fue,paginationGetPageSize:pue,paginationGetCurrentPage:gue,paginationGetTotalPages:mue,paginationGetRowCount:vue,paginationGoToNextPage:Cue,paginationGoToPreviousPage:yue,paginationGoToFirstPage:wue,paginationGoToLastPage:Sue,paginationGoToPage:_ue}},Pue={version:Ee,moduleName:"@ag-grid-community/pagination",dependantModules:[v2,Mue]},O="@ag-grid-community/core",Or="@ag-grid-community/client-side-row-model",AG="@ag-grid-community/csv-export",Sy="@ag-grid-community/infinite-row-model",_y="@ag-grid-enterprise/advanced-filter",Qs="@ag-grid-enterprise/charts",od="@ag-grid-enterprise/clipboard",ep="@ag-grid-enterprise/excel-export",by="@ag-grid-enterprise/master-detail",pR="@ag-grid-enterprise/menu",gR="@ag-grid-enterprise/range-selection",Ct="@ag-grid-enterprise/row-grouping",wo="@ag-grid-enterprise/server-side-row-model",Nr="@ag-grid-enterprise/side-bar",Fue="@ag-grid-enterprise/status-bar",xue={dispatchEvent:O,getState:O,getGridId:O,destroy:O,isDestroyed:O,getGridOption:O,setGridOption:O,updateGridOptions:O,setNodesSelected:O,selectAll:O,deselectAll:O,selectAllFiltered:O,deselectAllFiltered:O,selectAllOnCurrentPage:O,deselectAllOnCurrentPage:O,getSelectedNodes:O,getSelectedRows:O,redrawRows:O,setRowNodeExpanded:O,getRowNode:O,addRenderedRowListener:O,getRenderedNodes:O,forEachNode:O,getFirstDisplayedRow:O,getFirstDisplayedRowIndex:O,getLastDisplayedRow:O,getLastDisplayedRowIndex:O,getDisplayedRowAtIndex:O,getDisplayedRowCount:O,getModel:O,getVerticalPixelRange:O,getHorizontalPixelRange:O,ensureColumnVisible:O,ensureIndexVisible:O,ensureNodeVisible:O,getFocusedCell:O,clearFocusedCell:O,setFocusedCell:O,tabToNextCell:O,tabToPreviousCell:O,setFocusedHeader:O,addEventListener:O,addGlobalListener:O,removeEventListener:O,removeGlobalListener:O,expireValueCache:O,getValue:O,getCellValue:O,showColumnMenuAfterButtonClick:O,showColumnMenuAfterMouseClick:O,showColumnMenu:O,hidePopupMenu:O,onSortChanged:O,getPinnedTopRowCount:O,getPinnedBottomRowCount:O,getPinnedTopRow:O,getPinnedBottomRow:O,showLoadingOverlay:O,showNoRowsOverlay:O,hideOverlay:O,setGridAriaProperty:O,refreshCells:O,flashCells:O,refreshHeader:O,isAnimationFrameQueueEmpty:O,flushAllAnimationFrames:O,getSizesForCurrentTheme:O,getCellRendererInstances:O,addRowDropZone:O,removeRowDropZone:O,getRowDropZoneParams:O,getColumnDef:O,getColumnDefs:O,sizeColumnsToFit:O,setColumnGroupOpened:O,getColumnGroup:O,getProvidedColumnGroup:O,getDisplayNameForColumn:O,getDisplayNameForColumnGroup:O,getColumn:O,getColumns:O,applyColumnState:O,getColumnState:O,resetColumnState:O,getColumnGroupState:O,setColumnGroupState:O,resetColumnGroupState:O,isPinning:O,isPinningLeft:O,isPinningRight:O,getDisplayedColAfter:O,getDisplayedColBefore:O,setColumnVisible:O,setColumnsVisible:O,setColumnPinned:O,setColumnsPinned:O,getAllGridColumns:O,getDisplayedLeftColumns:O,getDisplayedCenterColumns:O,getDisplayedRightColumns:O,getAllDisplayedColumns:O,getAllDisplayedVirtualColumns:O,moveColumn:O,moveColumnByIndex:O,moveColumns:O,setColumnWidth:O,setColumnWidths:O,getLeftDisplayedColumnGroups:O,getCenterDisplayedColumnGroups:O,getRightDisplayedColumnGroups:O,getAllDisplayedColumnGroups:O,autoSizeColumn:O,autoSizeColumns:O,autoSizeAllColumns:O,undoCellEditing:O,redoCellEditing:O,getCellEditorInstances:O,getEditingCells:O,stopEditing:O,startEditingCell:O,getCurrentUndoSize:O,getCurrentRedoSize:O,isAnyFilterPresent:O,onFilterChanged:O,isColumnFilterPresent:O,getFilterInstance:O,getColumnFilterInstance:O,destroyFilter:O,setFilterModel:O,getFilterModel:O,getColumnFilterModel:O,setColumnFilterModel:O,showColumnFilter:O,isQuickFilterPresent:O,getQuickFilter:O,resetQuickFilter:O,paginationIsLastPageFound:O,paginationGetPageSize:O,paginationGetCurrentPage:O,paginationGetTotalPages:O,paginationGetRowCount:O,paginationGoToNextPage:O,paginationGoToPreviousPage:O,paginationGoToFirstPage:O,paginationGoToLastPage:O,paginationGoToPage:O,expandAll:O,collapseAll:O,onRowHeightChanged:O,setRowCount:O,getCacheBlockState:O,onGroupExpandedOrCollapsed:Or,refreshClientSideRowModel:Or,forEachLeafNode:Or,forEachNodeAfterFilter:Or,forEachNodeAfterFilterAndSort:Or,resetRowHeights:Or,applyTransaction:Or,applyTransactionAsync:Or,flushAsyncTransactions:Or,getBestCostNodeSelection:Or,getDataAsCsv:AG,exportDataAsCsv:AG,refreshInfiniteCache:Sy,purgeInfiniteCache:Sy,getInfiniteRowCount:Sy,isLastRowIndexKnown:Sy,getAdvancedFilterModel:_y,setAdvancedFilterModel:_y,showAdvancedFilterBuilder:_y,hideAdvancedFilterBuilder:_y,getChartModels:Qs,getChartRef:Qs,getChartImageDataURL:Qs,downloadChart:Qs,openChartToolPanel:Qs,closeChartToolPanel:Qs,createRangeChart:Qs,createPivotChart:Qs,createCrossFilterChart:Qs,updateChart:Qs,restoreChart:Qs,copyToClipboard:od,cutToClipboard:od,copySelectedRowsToClipboard:od,copySelectedRangeToClipboard:od,copySelectedRangeDown:od,pasteFromClipboard:od,getDataAsExcel:ep,exportDataAsExcel:ep,getSheetDataForExcel:ep,getMultipleSheetsAsExcel:ep,exportMultipleSheetsAsExcel:ep,addDetailGridInfo:by,removeDetailGridInfo:by,getDetailGridInfo:by,forEachDetailGridInfo:by,showContextMenu:pR,showColumnChooser:pR,hideColumnChooser:pR,getCellRanges:gR,addCellRange:gR,clearRangeSelection:gR,addAggFunc:Ct,addAggFuncs:Ct,clearAggFuncs:Ct,setColumnAggFunc:Ct,isPivotMode:Ct,getPivotResultColumn:Ct,setValueColumns:Ct,getValueColumns:Ct,removeValueColumn:Ct,removeValueColumns:Ct,addValueColumn:Ct,addValueColumns:Ct,setRowGroupColumns:Ct,removeRowGroupColumn:Ct,removeRowGroupColumns:Ct,addRowGroupColumn:Ct,addRowGroupColumns:Ct,getRowGroupColumns:Ct,moveRowGroupColumn:Ct,setPivotColumns:Ct,removePivotColumn:Ct,removePivotColumns:Ct,addPivotColumn:Ct,addPivotColumns:Ct,getPivotColumns:Ct,setPivotResultColumns:Ct,getPivotResultColumns:Ct,getServerSideSelectionState:wo,setServerSideSelectionState:wo,applyServerSideTransaction:wo,applyServerSideTransactionAsync:wo,applyServerSideRowData:wo,retryServerSideLoads:wo,flushServerSideAsyncTransactions:wo,refreshServerSide:wo,getServerSideGroupLevelState:wo,isSideBarVisible:Nr,setSideBarVisible:Nr,setSideBarPosition:Nr,openToolPanel:Nr,closeToolPanel:Nr,getOpenedToolPanel:Nr,refreshToolPanel:Nr,isToolPanelShowing:Nr,getToolPanelInstance:Nr,getSideBar:Nr,getStatusPanel:Fue},Ki="clientSide",Di="serverSide",ad="infinite",Oue={onGroupExpandedOrCollapsed:[Ki],refreshClientSideRowModel:[Ki],forEachLeafNode:[Ki],forEachNodeAfterFilter:[Ki],forEachNodeAfterFilterAndSort:[Ki],resetRowHeights:[Ki],applyTransaction:[Ki],applyTransactionAsync:[Ki],flushAsyncTransactions:[Ki],getBestCostNodeSelection:[Ki],getServerSideSelectionState:[Di],setServerSideSelectionState:[Di],applyServerSideTransaction:[Di],applyServerSideTransactionAsync:[Di],applyServerSideRowData:[Di],retryServerSideLoads:[Di],flushServerSideAsyncTransactions:[Di],refreshServerSide:[Di],getServerSideGroupLevelState:[Di],refreshInfiniteCache:[ad],purgeInfiniteCache:[ad],getInfiniteRowCount:[ad],isLastRowIndexKnown:[ad],expandAll:[Ki,Di],collapseAll:[Ki,Di],onRowHeightChanged:[Ki,Di],setRowCount:[ad,Di],getCacheBlockState:[ad,Di]},Nue={getValue:{version:"v31.3",new:"getCellValue"},getFirstDisplayedRow:{version:"v31.1",new:"getFirstDisplayedRowIndex"},getLastDisplayedRow:{version:"v31.1",new:"getLastDisplayedRowIndex"},getModel:{version:"v31.1",message:"Please use the appropriate grid API methods instead."},setColumnVisible:{version:"v31.1",old:"setColumnVisible(key,visible)",new:"setColumnsVisible([key],visible)"},setColumnPinned:{version:"v31.1",old:"setColumnPinned(key,pinned)",new:"setColumnsPinned([key],pinned)"},moveColumn:{version:"v31.1",old:"moveColumn(key, toIndex)",new:"moveColumns([key], toIndex)"},setColumnWidth:{version:"v31.1",old:"setColumnWidth(col, width)",new:"setColumnWidths([{key: col, newWidth: width}])"},autoSizeColumn:{version:"v31.1",old:"autoSizeColumn(key, skipHeader)",new:"autoSizeColumns([key], skipHeader)"},addAggFunc:{version:"v31.1",old:"addAggFunc(key, func)",new:"addAggFuncs({ key: func })"},removeValueColumn:{version:"v31.1",old:"removeValueColumn(colKey)",new:"removeValueColumns([colKey])"},addValueColumn:{version:"v31.1",old:"addValueColumn(colKey)",new:"addValueColumns([colKey])"},removeRowGroupColumn:{version:"v31.1",old:"removeRowGroupColumn(colKey)",new:"removeRowGroupColumns([colKey])"},addRowGroupColumn:{version:"v31.1",old:"addRowGroupColumn(colKey)",new:"addRowGroupColumns([colKey])"},removePivotColumn:{version:"v31.1",old:"removePivotColumn(colKey)",new:"removePivotColumns([colKey])"},addPivotColumn:{version:"v31.1",old:"addPivotColumn(colKey)",new:"addPivotColumns([colKey])"},showColumnMenuAfterButtonClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere."},showColumnMenuAfterMouseClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere."},getFilterInstance:{version:"v31.1",message:"'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."},showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'}};function kue(e,t){let n=xue[e];n?ai.__assertRegistered(n,`api.${e}`,t)&&j(`API function '${e}' not registered to module '${n}'`):$e(`Unknown API function: '${e}' on GridApi.`)}function Lue(e,t,n){let i=Nue[e];if(i){let{version:r,new:o,old:a,message:l}=i,c=a??e;return(...u)=>{let h=o?`Please use ${o} instead. `:"";return j(`Since ${r} api.${c} is deprecated. ${h}${l??""}`),t.apply(t,u)}}let s=Oue[e];return s?(...r)=>{let o=n.rowModel.getType();if(!s.includes(o)){$e(`api.${e} can only be called when gridOptions.rowModelType is ${s.join(" or ")}`);return}return t.apply(t,r)}:t}var Vue={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"}},Ia=(e,t)=>(t.rowModelType??"clientSide")==="clientSide"?{module:"@ag-grid-enterprise/row-grouping"}:null,Bue={enableRowGroup:Ia,rowGroup:Ia,rowGroupIndex:Ia,enablePivot:Ia,enableValue:Ia,pivot:Ia,pivotIndex:Ia,aggFunc:Ia,cellEditor:e=>e.cellEditor==="agRichSelect"||e.cellEditor==="agRichSelectCellEditor"?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:e=>{let t=["columnsMenuTab","generalMenuTab"];return e.menuTabs?.some(n=>t.includes(n))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],dependencies:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],dependencies:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],dependencies:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>dd},Gue={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0},Hue=Object.keys(Gue),dd={objectName:"colDef",allProperties:Hue,docsUrl:"column-properties/",deprecations:Vue,validations:Bue},Uue=()=>({advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."},suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."}}),Wue={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0},jue=()=>({sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",dependencies:e=>{let t=e.rowModelType??"clientSide";switch(t){case"clientSide":{let n=`treeData requires 'getDataPath' in the ${t} row model.`;return e.getDataPath?null:n}case"serverSide":{let n=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${t} row model.`;return e.isServerSideGroup&&e.getServerSideGroupKey?null:n}}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],dependencies:e=>{switch(e.rowModelType??"clientSide"){case"clientSide":return null;case"serverSide":return e.suppressServerSideInfiniteScroll?"groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll":null}return null}},groupHideOpenParents:{supportedRowModels:["clientSide"],dependencies:{groupTotalRow:[void 0,"bottom"]}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},columnDefs:()=>dd,defaultColDef:()=>dd,defaultColGroupDef:()=>dd,autoGroupColumnDef:()=>dd}),zue=()=>({objectName:"gridOptions",allProperties:[...lp.ALL_PROPERTIES,...cp.EVENT_CALLBACKS],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:Uue(),validations:jue()}),$ue=class extends L{constructor(){super(...arguments),this.beanName="validationService"}wireBeans(e){this.beans=e,this.gridOptions=e.gridOptions}postConstruct(){this.processGridOptions(this.gridOptions)}processGridOptions(e){this.processOptions(e,zue())}processColumnDefs(e){this.processOptions(e,dd)}warnMissingApiFunction(e){kue(e,this.gridId)}validateApiFunction(e,t){return Lue(e,t,this.beans)}processOptions(e,t){let{validations:n,deprecations:i,allProperties:s,propertyExceptions:r,objectName:o,docsUrl:a}=t;s&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...r??[],...Object.keys(i)],s,o,a);let l=new Set;Object.keys(e).forEach(u=>{let h=i[u];if(h)if("renamed"in h){let{renamed:T,version:R}=h;l.add(`As of v${R}, ${String(u)} is deprecated. Please use ${String(T)} instead.`),e[T]=e[u]}else{let{message:T,version:R}=h;l.add(`As of v${R}, ${String(u)} is deprecated. ${T??""}`)}let f=e[u];if(f==null||f===!1)return;let p=n[u],v;if(p)if(typeof p=="function"){let T=p(e,this.gridOptions);if(!T)return;if("objectName"in T){let R=e[u];if(Array.isArray(R)){R.forEach(F=>{this.processOptions(F,T)});return}this.processOptions(e[u],T);return}v=T}else v=p;else return;let{module:y,dependencies:C,supportedRowModels:E}=v;if(E){let T=this.gridOptions.rowModelType??"clientSide";if(!E.includes(T)){l.add(`${String(u)} is not supported with the '${T}' row model.`);return}}if(y){let T=Array.isArray(y)?y:[y],R=!0;if(T.forEach(F=>{ai.__assertRegistered(F,String(u),this.gridId)||(R=!1,l.add(`${String(u)} is only available when ${F} is loaded.`))}),!R)return}if(C){let T=this.checkForWarning(u,C,e);if(T){l.add(T);return}}}),l.size>0&&l.forEach(u=>{j(u)})}checkForWarning(e,t,n){if(typeof t=="function")return t(n,this.gridOptions);let s=Object.entries(t).find(([a,l])=>{let c=n[a];return!l.includes(c)});if(!s)return null;let[r,o]=s;return o.length>1?`'${String(e)}' requires '${r}' to be one of [${o.join(", ")}].`:`'${String(e)}' requires '${r}' to be ${o[0]}.`}checkProperties(e,t,n,i,s){let r=["__ob__","__v_skip","__metadata__"],o=Zne(Object.getOwnPropertyNames(e),[...r,...t,...n],n);if(vs(o,(a,l)=>{let c=`invalid ${i} property '${a}' did you mean any of these: ${l.slice(0,8).join(", ")}.`;n.includes("context")&&(c+=`
If you are trying to annotate ${i} with application data, use the '${i}.context' property instead.`),j(c)}),Object.keys(o).length>0&&s){let a=this.getFrameworkOverrides().getDocLink(s);j(`to see all the valid ${i} properties please check: ${a}`)}}},que={version:Ee,moduleName:"@ag-grid-community/core"},Kue={version:Ee,moduleName:"@ag-grid-community/core-validations",beans:[$ue]},C2={version:Ee,moduleName:"@ag-grid-community/core-community-features",dependantModules:[que,Kue,rae,Ose,hue,Hle,Yae,Pue,lue]},Que=class extends L{constructor(){super(...arguments),this.beanName="gridDestroyService",this.destroyCalled=!1}wireBeans(e){this.beans=e}destroy(){if(this.destroyCalled)return;let e={type:"gridPreDestroyed",state:this.beans.stateService?.getState()??{}};this.eventService.dispatchEvent(e),this.destroyCalled=!0,this.beans.ctrlsService.get("gridCtrl")?.destroyGridUi(),this.beans.context.destroy(),super.destroy()}isDestroyCalled(){return this.destroyCalled}},Ry=new Set(["gridPreDestroyed","fillStart","pasteStart"]),Yue=e=>e==="checkboxSelected"||e==="rowClicked"||e==="spaceKey"||e==="uiSelectAll"||e==="uiSelectAllCurrentPage"||e==="uiSelectAllFiltered",Jue=new Map([...lp.BOOLEAN_PROPERTIES.map(e=>[e,wR]),...lp.NUMBER_PROPERTIES.map(e=>[e,kH]),["groupAggFiltering",e=>typeof e=="function"?e:wR(e)],["pageSize",xr(1)],["autoSizePadding",xr(0)],["keepDetailRowsCount",xr(1)],["rowBuffer",xr(0)],["infiniteInitialRowCount",xr(1)],["cacheOverflowSize",xr(1)],["cacheBlockSize",xr(1)],["serverSideInitialRowCount",xr(1)],["viewportRowModelPageSize",xr(1)],["viewportRowModelBufferSize",xr(0)]]);function y2(e,t){let n=Jue.get(e);return n?n(t):t}function Xue(e){let t={};return Object.entries(e).forEach(([n,i])=>{let s=y2(n,i);t[n]=s}),t}var w2=class S2 extends L{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new vd,this.globalEventHandlerFactory=t=>(n,i)=>{if(!this.isAlive())return;let s=Ry.has(n);if(s&&!t||!s&&t)return;let r=cp.getCallbackForEvent(n),o=this.gridOptions[r];typeof o=="function"&&this.frameworkOverrides.wrapOutgoing(()=>{o(i)})}}wireBeans(t){this.gridOptions=t.gridOptions,this.eGridDiv=t.eGridDiv,this.validationService=t.validationService,this.environment=t.environment,this.api=t.gridApi}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){let t=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),t),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.getScrollbarWidth(),this.addManagedEventListeners({gridOptionsChanged:({options:n})=>{this.updateGridOptions({options:n,force:!0,source:"gridOptionsUpdated"})}})}get(t){return this.gridOptions[t]??Wue[t]}getCallback(t){return this.mergeGridCommonParams(this.gridOptions[t])}exists(t){return q(this.gridOptions[t])}mergeGridCommonParams(t){return t&&(i=>{let s=i;return s.api=this.api,s.context=this.gridOptionsContext,t(s)})}updateGridOptions({options:t,force:n,source:i="api"}){let s={id:S2.changeSetId++,properties:[]},r=[];Object.entries(t).forEach(([o,a])=>{i==="api"&&one[o]&&j(`${o} is an initial property and cannot be updated.`);let l=y2(o,a),c=n||typeof l=="object"&&i==="api",u=this.gridOptions[o];if(c||u!==l){this.gridOptions[o]=l;let h={type:o,currentValue:l,previousValue:u,changeSet:s,source:i};r.push(h)}}),this.validationService?.processGridOptions(this.gridOptions),s.properties=r.map(o=>o.type),r.forEach(o=>{this.gridOptions.debug&&ys(`Updated property ${o.type} from`,o.previousValue," to ",o.currentValue),this.propertyEventService.dispatchEvent(o)})}addPropertyEventListener(t,n){this.propertyEventService.addEventListener(t,n)}removePropertyEventListener(t,n){this.propertyEventService.removeEventListener(t,n)}getScrollbarWidth(){if(this.scrollbarWidth==null){let n=typeof this.gridOptions.scrollbarWidth=="number"&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:Dne();n!=null&&(this.scrollbarWidth=n,this.eventService.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}isRowModelType(t){return this.gridOptions.rowModelType===t||t==="clientSide"&&Ve(this.gridOptions.rowModelType)}isDomLayout(t){return(this.gridOptions.domLayout??"normal")===t}isRowSelection(){return this.gridOptions.rowSelection==="single"||this.gridOptions.rowSelection==="multiple"}useAsyncEvents(){return!this.get("suppressAsyncEvents")}isGetRowHeightFunction(){return typeof this.gridOptions.getRowHeight=="function"}getRowHeightForNode(t,n=!1,i){if(i==null&&(i=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(n)return{height:i,estimated:!0};let r={node:t,data:t.data},o=this.getCallback("getRowHeight")(r);if(this.isNumeric(o))return o===0&&j("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,o),estimated:!1}}return t.detail&&this.get("masterDetail")?this.getMasterDetailRowHeight():{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:i,estimated:!1}}getMasterDetailRowHeight(){return this.get("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}}getRowHeightAsNumber(){if(!this.gridOptions.rowHeight||Ve(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();let t=this.environment.refreshRowHeightVariable();return t!==-1?t:(j("row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())}isNumeric(t){return!isNaN(t)&&typeof t=="number"&&isFinite(t)}getDomDataKey(){return this.domDataKey}getDomData(t,n){let i=t[this.getDomDataKey()];return i?i[n]:void 0}setDomData(t,n,i){let s=this.getDomDataKey(),r=t[s];Ve(r)&&(r={},t[s]=r),r[n]=i}getDocument(){let t=null;return this.gridOptions.getDocument&&q(this.gridOptions.getDocument)?t=this.gridOptions.getDocument():this.eGridDiv&&(t=this.eGridDiv.ownerDocument),t&&q(t)?t:document}getWindow(){return this.getDocument().defaultView||window}getRootNode(){return this.eGridDiv.getRootNode()}getActiveDomElement(){return this.getRootNode().activeElement}getAsyncTransactionWaitMillis(){return q(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50}isAnimateRows(){return this.get("ensureDomOrder")?!1:this.get("animateRows")}isGroupRowsSticky(){return!(this.get("paginateChildRows")||this.get("groupHideOpenParents")||this.isDomLayout("print"))}isColumnsSortingCoupledToGroup(){return!this.gridOptions.autoGroupColumnDef?.comparator&&!this.get("treeData")}getGroupAggFiltering(){let t=this.gridOptions.groupAggFiltering;if(typeof t=="function")return this.getCallback("groupAggFiltering");if(t===!0)return()=>!0}getGrandTotalRow(){let t=this.gridOptions.grandTotalRow;if(t)return t;if(this.gridOptions.groupIncludeTotalFooter)return"bottom"}getGroupTotalRowCallback(){let t=this.get("groupTotalRow");if(typeof t=="function")return this.getCallback("groupTotalRow");if(t)return()=>t;let n=this.get("groupIncludeFooter");if(typeof n=="function"){let i=this.getCallback("groupIncludeFooter");return s=>i(s)?"bottom":void 0}return()=>n?"bottom":void 0}isGroupMultiAutoColumn(){return this.gridOptions.groupDisplayType?this.gridOptions.groupDisplayType==="multipleColumns":this.get("groupHideOpenParents")}isGroupUseEntireRow(t){return t?!1:this.gridOptions.groupDisplayType==="groupRows"}getGridCommonParams(){return{api:this.api,context:this.gridOptionsContext}}addGridCommonParams(t){let n=t;return n.api=this.api,n.context=this.gridOptionsContext,n}getRowIdCallback(){let t=this.getCallback("getRowId");return t===void 0?t:n=>{let i=t(n);return typeof i!="string"&&(j("The getRowId callback must return a string. The ID ",i," is being cast to a string."),i=String(i)),i}}};w2.changeSetId=0;var Zue=w2,ede=class extends L{constructor(){super(...arguments),this.beanName="headerPositionUtils"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}findHeader(e,t){let n,i;if(qt(e.column)?n=this.visibleColsService.getGroupAtDirection(e.column,t):(i=`getCol${t}`,n=this.visibleColsService[i](e.column)),!n)return;let{headerRowIndex:s}=e;if(this.getHeaderRowType(s)!=="filter"){let a=[n];for(;n.getParent();)n=n.getParent(),a.push(n);n=a[a.length-1-s]}let{column:r,headerRowIndex:o}=this.getHeaderIndexToFocus(n,s);return{column:r,headerRowIndex:o}}getHeaderIndexToFocus(e,t){let n;if(qt(e)&&this.isAnyChildSpanningHeaderHeight(e)&&e.isPadding()){let i=e;n=i.getLeafColumns()[0];let s=n;for(;s!==i;)t++,s=s.getParent()}return{column:n||e,headerRowIndex:t}}isAnyChildSpanningHeaderHeight(e){return e?e.getLeafColumns().some(t=>t.isSpanHeaderHeight()):!1}getColumnVisibleParent(e,t){let n=this.getHeaderRowType(t),i=n==="filter",s=n==="column",r=i?e:e.getParent(),o=t-1,a=o;if(s&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;r&&r.isPadding();)r=r.getParent(),o--;a=o,o<0&&(r=e,o=t,a=void 0)}return{column:r,headerRowIndex:o,headerRowIndexWithoutSpan:a}}getColumnVisibleChild(e,t,n="After"){let i=this.getHeaderRowType(t),s=e,r=t+1,o=r;if(i==="group"){let a=e.getDisplayedLeafColumns(),l=n==="After"?a[0]:We(a),c=[],u=l;for(;u.getParent()!==e;)u=u.getParent(),c.push(u);if(s=l,l.isSpanHeaderHeight())for(let h=c.length-1;h>=0;h--){let f=c[h];if(!f.isPadding()){s=f;break}r++}else s=We(c),s||(s=l)}return{column:s,headerRowIndex:r,headerRowIndexWithoutSpan:o}}getHeaderRowType(e){let t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){let n=this.visibleColsService.getAllCols(),i=n[t==="start"?0:n.length-1];if(!i)return;let r=this.ctrlsService.getHeaderRowContainerCtrl(i.getPinned()).getRowType(e);if(r=="group"){let o=this.visibleColsService.getColGroupAtLevel(i,e);return{headerRowIndex:e,column:o}}return{headerRowIndex:r==null?-1:e,column:i}}},tde=class extends L{constructor(){super(...arguments),this.beanName="localeService"}getLocaleTextFunc(){let e=this.gos.getCallback("getLocaleText");if(e)return(n,i,s)=>e({key:n,defaultValue:i,variableValues:s});let t=this.gos.get("localeText");return(n,i,s)=>{let r=t&&t[n];if(r&&s&&s.length){let o=0;for(;!(o>=s.length||r.indexOf("${variable}")===-1);)r=r.replace("${variable}",s[o++])}return r??i}}},nde=class extends L{constructor(){super(...arguments),this.beanName="apiEventService",this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new OR(this.getFrameworkOverrides())}addEventListener(e,t){let n=this.frameworkEventWrappingService.wrap(t),i=this.gos.useAsyncEvents()&&!Ry.has(e),s=i?this.asyncEventListeners:this.syncEventListeners;s.has(e)||s.set(e,new Set),s.get(e).add(n),this.eventService.addEventListener(e,n,i)}removeEventListener(e,t){let n=this.frameworkEventWrappingService.unwrap(t),s=!!this.asyncEventListeners.get(e)?.delete(n);s||this.syncEventListeners.get(e)?.delete(n),this.eventService.removeEventListener(e,n,s)}addGlobalListener(e){let t=this.frameworkEventWrappingService.wrapGlobal(e);if(this.gos.useAsyncEvents()){let i=(r,o)=>{Ry.has(r)&&t(r,o)},s=(r,o)=>{Ry.has(r)||t(r,o)};this.globalEventListenerPairs.set(e,{syncListener:i,asyncListener:s}),this.eventService.addGlobalListener(i,!1),this.eventService.addGlobalListener(s,!0)}else this.syncGlobalEventListeners.add(t),this.eventService.addGlobalListener(t,!1)}removeGlobalListener(e){let t=this.frameworkEventWrappingService.unwrapGlobal(e);if(this.globalEventListenerPairs.has(t)){let{syncListener:i,asyncListener:s}=this.globalEventListenerPairs.get(t);this.eventService.removeGlobalListener(i,!1),this.eventService.removeGlobalListener(s,!0),this.globalEventListenerPairs.delete(e)}else this.syncGlobalEventListeners.delete(t),this.eventService.removeGlobalListener(t,!1)}destroyEventListeners(e,t){e.forEach((n,i)=>{n.forEach(s=>this.eventService.removeEventListener(i,s,t)),n.clear()}),e.clear()}destroyGlobalListeners(e,t){e.forEach(n=>this.eventService.removeGlobalListener(n,t)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener:e,asyncListener:t})=>{this.eventService.removeGlobalListener(e,!1),this.eventService.removeGlobalListener(t,!0)}),this.globalEventListenerPairs.clear()}},ide=class extends L{constructor(){super(...arguments),this.beanName="pageBoundsListener"}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages();let t={type:"paginationChanged",animate:e?e.animate:!1,newData:e?e.newData:!1,newPage:e?e.newPage:!1,newPageSize:e?e.newPageSize:!1,keepRenderedRows:e?e.keepRenderedRows:!1};this.eventService.dispatchEvent(t)}calculatePages(){this.paginationService?this.paginationService.calculatePages():this.pageBoundsService.calculateBounds(0,this.rowModel.getRowCount()-1)}},sde=class extends L{constructor(){super(...arguments),this.beanName="pageBoundsService",this.pixelOffset=0}wireBeans(e){this.rowModel=e.rowModel}getFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getCurrentPageHeight(){return Ve(this.topRowBounds)||Ve(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){let e=this.topRowBounds?this.topRowBounds.rowTop:0,t=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:e,pageLastPixel:t}}calculateBounds(e,t){this.topRowBounds=this.rowModel.getRowBounds(e),this.topRowBounds&&(this.topRowBounds.rowIndex=e),this.bottomRowBounds=this.rowModel.getRowBounds(t),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=t),this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){let e=q(this.topRowBounds)?this.topRowBounds.rowTop:0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},rde=class extends L{constructor(){super(),this.beanName="ariaAnnouncementService",this.descriptionContainer=null,this.announceValue=ci(this.announceValue.bind(this),200)}wireBeans(e){this.eGridDiv=e.eGridDiv}postConstruct(){let e=this.gos.getDocument(),t=this.descriptionContainer=e.createElement("div");t.classList.add("ag-aria-description-container"),YG(t,"polite"),dne(t,"additions text"),une(t,!0),this.eGridDiv.appendChild(t)}announceValue(e){this.descriptionContainer&&(this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=e)},50))}destroy(){super.destroy();let{descriptionContainer:e}=this;e&&(zn(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null}},ode=class extends L{constructor(){super(...arguments),this.beanName="columnAnimationService",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.suppressAnimation=!1,this.animationThreadCount=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)}finish(){this.active&&this.flush(()=>{this.active=!1})}executeNextVMTurn(e){this.active?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;let e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(e){if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){e();return}let t=n=>{for(;n.length;){let i=n.pop();i&&i()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>t(this.executeNextFuncs),0),window.setTimeout(()=>{e(),t(this.executeLaterFuncs)},200)})}},ade=class extends L{constructor(){super(...arguments),this.beanName="columnHoverService"}setMouseOver(e){this.selectedColumns=e;let t={type:"columnHoverChanged"};this.eventService.dispatchEvent(t)}clearMouseOver(){this.selectedColumns=null;let e={type:"columnHoverChanged"};this.eventService.dispatchEvent(e)}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}},lde=class extends L{constructor(){super(...arguments),this.beanName="overlayService",this.state=0,this.showInitialOverlay=!0}wireBeans(e){this.userComponentFactory=e.userComponentFactory,this.rowModel=e.rowModel,this.columnModel=e.columnModel}postConstruct(){let e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e}),this.addManagedPropertyListener("loading",e)}registerOverlayWrapperComp(e){this.overlayWrapperComp=e,this.updateOverlayVisibility()}showLoadingOverlay(){this.showInitialOverlay=!1;let e=this.gos.get("loading");!e&&(e!==void 0||this.gos.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1,!(this.gos.get("loading")||this.gos.get("suppressNoRowsOverlay"))&&this.doShowNoRowsOverlay()}hideOverlay(){this.showInitialOverlay=!1,!this.gos.get("loading")&&this.doHideOverlay()}updateOverlayVisibility(){let e=this.gos.get("loading");this.showInitialOverlay&&e===void 0&&!this.gos.get("suppressLoadingOverlay")&&(e=!this.gos.get("columnDefs")||!this.columnModel.isReady()||!this.gos.get("rowData")&&this.gos.isRowModelType("clientSide")),e?this.state!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,this.rowModel.isEmpty()&&!this.gos.get("suppressNoRowsOverlay")&&this.gos.isRowModelType("clientSide")?this.state!==2&&this.doShowNoRowsOverlay():this.state!==0&&this.doHideOverlay())}doShowLoadingOverlay(){this.state=1,this.showOverlay(this.userComponentFactory.getLoadingOverlayCompDetails({}),"ag-overlay-loading-wrapper","loadingOverlayComponentParams")}doShowNoRowsOverlay(){this.state=2,this.showOverlay(this.userComponentFactory.getNoRowsOverlayCompDetails({}),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams")}doHideOverlay(){this.state=0,this.overlayWrapperComp.hideOverlay()}showOverlay(e,t,n){let i=e.newAgStackInstance();this.overlayWrapperComp.showOverlay(i,t,n)}},cde=class extends L{constructor(){super(...arguments),this.beanName="rowCssClassCalculator"}wireBeans(e){this.stylingService=e.stylingService}getInitialRowClasses(e){let t=[];return q(e.extraCssClass)&&t.push(e.extraCssClass),t.push("ag-row"),t.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&t.push("ag-opacity-zero"),t.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&t.push("ag-row-pinned"),e.rowNode.isSelected()&&t.push("ag-row-selected"),e.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&t.push("ag-row-loading"),e.fullWidthRow&&t.push("ag-full-width-row"),e.expandable&&(t.push("ag-row-group"),t.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&t.push("ag-row-dragging"),lG(t,this.processClassesFromGridOptions(e.rowNode)),lG(t,this.preProcessRowClassRules(e.rowNode)),t.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&t.push("ag-row-first"),e.lastRowOnPage&&t.push("ag-row-last"),e.fullWidthRow&&(e.pinned==="left"&&t.push("ag-cell-last-left-pinned"),e.pinned==="right"&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(e){let t=[],n=r=>{typeof r=="string"?t.push(r):Array.isArray(r)&&r.forEach(o=>t.push(o))},i=this.gos.get("rowClass");if(i){if(typeof i=="function")return j("rowClass should not be a function, please use getRowClass instead"),[];n(i)}let s=this.gos.getCallback("getRowClass");if(s){let r={data:e.data,node:e,rowIndex:e.rowIndex},o=s(r);n(o)}return t}preProcessRowClassRules(e){let t=[];return this.processRowClassRules(e,n=>{t.push(n)},()=>{}),t}processRowClassRules(e,t,n){let i=this.gos.addGridCommonParams({data:e.data,node:e,rowIndex:e.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),i,t,n)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}},ude=class extends L{constructor(){super(...arguments),this.beanName="rowContainerHeightService",this.scrollY=0,this.uiBodyHeight=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=_ne(),this.gos.get("debug")&&ys("RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;let t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,n=this.getUiBodyHeight();(t!==this.scrollY||n!==this.uiBodyHeight)&&(this.scrollY=t,this.uiBodyHeight=n,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;let e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.gos.get("debug")&&ys(`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){let t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){let t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return t.bottom-t.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;let t=this.modelHeight-this.getUiBodyHeight(),n=e/t;return this.maxScrollY*n}},dde=class extends L{constructor(){super(...arguments),this.beanName="rowNodeSorter"}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.showRowGroupColsService=e.showRowGroupColsService}postConstruct(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup())}doFullSort(e,t){let n=(s,r)=>({currentPos:r,rowNode:s}),i=e.map(n);return i.sort(this.compareRowNodes.bind(this,t)),i.map(s=>s.rowNode)}compareRowNodes(e,t,n){let i=t.rowNode,s=n.rowNode;for(let r=0,o=e.length;r<o;r++){let a=e[r],l=a.sort==="desc",c=this.getValue(i,a.column),u=this.getValue(s,a.column),h,f=this.getComparator(a,i);if(f?h=f(c,u,i,s,l):h=Fte(c,u,this.isAccentedSort),!isNaN(h)&&h!==0)return a.sort==="asc"?h:h*-1}return t.currentPos-n.currentPos}getComparator(e,t){let n=e.column,i=n.getColDef().comparator;if(i!=null)return i;if(!n.getColDef().showRowGroup)return;let s=!t.group&&n.getColDef().field;if(!s)return;let r=this.columnModel.getColDefCol(s);if(r)return r.getColDef().comparator}getValue(e,t){if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);if(e.rowGroupColumn===t){if(this.gos.isGroupUseEntireRow(this.columnModel.isPivotActive())){let r=e.allLeafChildren?.[0];return r?this.valueService.getValue(t,r,!1,!1):void 0}let s=this.showRowGroupColsService?.getShowRowGroupCol(t.getId());return s?e.groupData?.[s.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return this.valueService.getValue(t,e,!1,!1)}},Uy=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,t){if(e.children)for(let n=0;n<e.children.length;n++)this.depthFirstSearchChangedPath(e.children[n],t);t(e.rowNode)}depthFirstSearchEverything(e,t,n){if(e.childrenAfterGroup)for(let i=0;i<e.childrenAfterGroup.length;i++){let s=e.childrenAfterGroup[i];s.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[i],t,n):n&&t(s)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,n=!1){this.active&&!n?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,n=0;for(;!this.mapToItems[t.id];){let i={rowNode:t,children:null};this.mapToItems[t.id]=i,n++,t=t.parent}return n}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let n=e;for(;n;)this.nodeIdsToColumns[n.id]||(this.nodeIdsToColumns[n.id]={}),t.forEach(i=>this.nodeIdsToColumns[n.id][i.getId()]=!0),n=n.parent}linkPathItems(e,t){let n=e;for(let i=0;i<t;i++){let s=this.mapToItems[n.id],r=this.mapToItems[n.parent.id];r.children||(r.children=[]),r.children.push(s),n=n.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;let n=this.createPathItems(e);this.linkPathItems(e,n),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;let n=this.nodeIdsToColumns[e.id];return t.filter(s=>n[s.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;let n=this.nodeIdsToColumns[e.id];return t.filter(s=>!n[s.getId()])}},_2=class extends L{constructor(){super(...arguments),this.beanName="selectionService",this.selectedNodes=new Map,this.selectionCtx=new pae}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.selectionCtx.init(this.rowModel),this.rowSelection=this.gos.get("rowSelection"),this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.rowSelection=this.gos.get("rowSelection"),this.deselectAllRowNodes({source:"api"})}),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes(),this.selectionCtx.reset()}isMultiselect(){return this.rowSelection==="multiple"}overrideSelectionValue(e,t){if(!Yue(t))return e;let n=this.selectionCtx.getRoot();return n?n.isSelected()??!1:!0}setNodesSelected(e){let{newValue:t,clearSelection:n,suppressFinishActions:i,rangeSelect:s,nodes:r,event:o,source:a}=e;if(r.length===0)return 0;if(r.length>1&&!this.isMultiselect())return j("cannot multi select while rowSelection='single'"),0;let l=this.groupSelectsChildren&&e.groupSelectsFiltered===!0,c=r.map(h=>h.footer?h.sibling:h);if(s){if(c.length>1)return j("cannot range select while selecting multiple rows"),0;let h=c[0],f=this.overrideSelectionValue(t,a);if(this.isMultiselect()){if(this.selectionCtx.isInRange(h)){let p=this.selectionCtx.truncate(h);return f&&this.selectRange(p.discard,!1,a),this.selectRange(p.keep,f,a)}else if(this.selectionCtx.getRoot()!==h){let y=this.selectionCtx.extend(h,this.groupSelectsChildren);return f&&this.selectRange(y.discard,!1,a),this.selectRange(y.keep,f,a)}}}i||this.selectionCtx.setRoot(c[0]);let u=0;for(let h=0;h<c.length;h++){let f=c[h];l&&f.group||f.selectThisNode(t,o,a)&&u++,this.groupSelectsChildren&&f.childrenAfterGroup?.length&&(u+=this.selectChildren(f,t,l,a))}return i||(t&&(n||!this.isMultiselect())&&(u+=this.clearOtherNodes(c[0],a)),u>0&&(this.updateGroupsFromChildrenSelections(a),this.dispatchSelectionChanged(a))),u}selectRange(e,t,n){let i=0;return e.forEach(s=>{if(s.group&&this.groupSelectsChildren)return;s.selectThisNode(t,void 0,n)&&i++}),i>0&&(this.updateGroupsFromChildrenSelections(n),this.dispatchSelectionChanged(n)),i}selectChildren(e,t,n,i){let s=n?e.childrenAfterAggFilter:e.childrenAfterGroup;return Ve(s)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:n,source:i,nodes:s})}getSelectedNodes(){let e=[];return this.selectedNodes.forEach(t=>{t&&e.push(t)}),e}getSelectedRows(){let e=[];return this.selectedNodes.forEach(t=>{t&&t.data&&e.push(t.data)}),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){let t=new Map;this.selectedNodes.forEach((n,i)=>{n&&e(n)&&t.set(i,n)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsChildren||this.rowModel.getType()!=="clientSide")return!1;let i=this.rowModel.getRootNode();t||(t=new Uy(!0,i),t.setInactive());let s=!1;return t.forEachChangedNodeDepthFirst(r=>{if(r!==i){let o=r.calculateSelectedFromChildren();s=r.selectThisNode(o===null?!1:o,void 0,e)||s}}),s}clearOtherNodes(e,t){let n=new Map,i=0;return this.selectedNodes.forEach(s=>{if(s&&s.id!==e.id){let r=this.selectedNodes.get(s.id);i+=r.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&s.parent&&n.set(s.parent.id,s.parent)}}),n.forEach(s=>{let r=s.calculateSelectedFromChildren();s.selectThisNode(r===null?!1:r,void 0,t)}),i}onRowSelected(e){let t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}syncInOldRowNode(e,t){if(q(t)&&e.id!==t.id&&t){let i=t.id;this.selectedNodes.get(i)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.setSelectedInitialValue(!0),this.selectedNodes.set(e.id,e)):e.setSelectedInitialValue(!1)}reset(e){let t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes?.clear()}getBestCostNodeSelection(){if(this.rowModel.getType()!=="clientSide")return;let t=this.rowModel.getTopLevelNodes();if(t===null)return;let n=[];function i(s){for(let r=0,o=s.length;r<o;r++){let a=s[r];if(a.isSelected())n.push(a);else{let l=a;l.group&&l.children&&i(l.children)}}}return i(t),n}isEmpty(){let e=0;return this.selectedNodes.forEach(t=>{t&&e++}),e===0}deselectAllRowNodes(e){let t=o=>o.selectThisNode(!1,void 0,i),n=this.rowModel.getType()==="clientSide",{source:i,justFiltered:s,justCurrentPage:r}=e;if(r||s){if(!n){$e("selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(s,r).forEach(t)}else this.selectedNodes.forEach(o=>{o&&t(o)}),this.reset(i);this.selectionCtx.reset(),n&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)}getSelectedCounts(e,t){let n=0,i=0,s=r=>{this.groupSelectsChildren&&r.group||(r.isSelected()?n++:r.selectable&&i++)};return this.getNodesToSelect(e,t).forEach(s),{selectedCount:n,notSelectedCount:i}}getSelectAllState(e,t){let{selectedCount:n,notSelectedCount:i}=this.getSelectedCounts(e,t);return n===0&&i===0?!1:n>0&&i>0?null:n>0}hasNodesToSelect(e=!1,t=!1){return this.getNodesToSelect(e,t).filter(n=>n.selectable).length>0}getNodesToSelect(e=!1,t=!1){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);let n=[];if(t)return this.forEachNodeOnPage(s=>{if(!s.group){n.push(s);return}if(!s.expanded){let r=o=>{n.push(o),o.childrenAfterFilter?.length&&o.childrenAfterFilter.forEach(r)};r(s);return}this.groupSelectsChildren||n.push(s)}),n;let i=this.rowModel;return e?(i.forEachNodeAfterFilter(s=>{n.push(s)}),n):(i.forEachNode(s=>{n.push(s)}),n)}forEachNodeOnPage(e){let t=this.pageBoundsService.getFirstRow(),n=this.pageBoundsService.getLastRow();for(let i=t;i<=n;i++){let s=this.rowModel.getRow(i);s&&e(s)}}selectAllRowNodes(e){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);let{source:t,justFiltered:n,justCurrentPage:i}=e,s=this.getNodesToSelect(n,i);s.forEach(r=>r.selectThisNode(!0,void 0,t)),this.selectionCtx.setRoot(s[0]??null),this.selectionCtx.setEndRange(We(s)??null),this.rowModel.getType()==="clientSide"&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t),this.dispatchSelectionChanged(t)}getSelectionState(){let e=[];return this.selectedNodes.forEach(t=>{t?.id&&e.push(t.id)}),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return;let n=new Set(e),i=[];this.rowModel.forEachNode(s=>{n.has(s.id)&&i.push(s)}),this.setNodesSelected({newValue:!0,nodes:i,source:t})}dispatchSelectionChanged(e){let t={type:"selectionChanged",source:e};this.eventService.dispatchEvent(t)}},hde=class extends L{constructor(){super(...arguments),this.beanName="selectableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){this.addManagedPropertyListener("isRowSelectable",()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(e=!1){let t=!!this.gos.get("rowSelection"),n=this.gos.get("isRowSelectable");if(!t||!n)return;let i=this.gos.get("groupSelectsChildren"),s=this.rowModel.getType()==="clientSide"&&i,r=[],o=a=>{if(e&&!a.group)return;if(s&&a.group){let c=a.childrenAfterGroup.some(u=>u.selectable===!0);a.setRowSelectable(c,!0);return}let l=n?n(a):!0;a.setRowSelectable(l,!0),!l&&a.isSelected()&&r.push(a)};if(s){let a=this.rowModel;new Uy(!1,a.getRootNode()).forEachChangedNodeDepthFirst(o,!0,!0)}else this.rowModel.forEachNode(o);r.length&&this.selectionService.setNodesSelected({nodes:r,newValue:!1,source:"selectableChanged"}),s&&this.selectionService instanceof _2&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}},MG=["asc","desc",null],fde=class extends L{constructor(){super(...arguments),this.beanName="sortController"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.showRowGroupColsService=e.showRowGroupColsService}progressSort(e,t,n){let i=this.getNextSortDirection(e);this.setSortForColumn(e,i,t,n)}setSortForColumn(e,t,n,i){t!=="asc"&&t!=="desc"&&(t=null);let s=this.gos.isColumnsSortingCoupledToGroup(),r=[e];if(s&&e.getColDef().showRowGroup){let c=this.funcColsService.getSourceColumnsForGroupColumn(e)?.filter(u=>u.isSortable());c&&(r=[e,...c])}r.forEach(l=>l.setSort(t,i));let o=(n||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"),a=[];if(!o){let l=this.clearSortBarTheseColumns(r,i);a.push(...l)}this.updateSortIndex(e),a.push(...r),this.dispatchSortChangedEvents(i,a)}updateSortIndex(e){let t=this.gos.isColumnsSortingCoupledToGroup(),n=this.showRowGroupColsService?.getShowRowGroupCol(e.getId()),i=t&&n||e,s=this.getColumnsWithSortingOrdered();this.columnModel.getAllCols().forEach(a=>a.setSortIndex(null));let r=s.filter(a=>t&&a.getColDef().showRowGroup?!1:a!==i);(i.getSort()?[...r,i]:r).forEach((a,l)=>{a.setSortIndex(l)})}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let t=this.columnModel.getAllCols().filter(n=>!!n.getSort());return t&&t.length>0}dispatchSortChangedEvents(e,t){let n={type:"sortChanged",source:e};t&&(n.columns=t),this.eventService.dispatchEvent(n)}clearSortBarTheseColumns(e,t){let n=[];return this.columnModel.getAllCols().forEach(i=>{e.includes(i)||(i.getSort()&&n.push(i),i.setSort(void 0,t))}),n}getNextSortDirection(e){let t;if(e.getColDef().sortingOrder?t=e.getColDef().sortingOrder:this.gos.get("sortingOrder")?t=this.gos.get("sortingOrder"):t=MG,!Array.isArray(t)||t.length<=0)return j(`sortingOrder must be an array with at least one element, currently it's ${t}`),null;let n=t.indexOf(e.getSort()),i=n<0,s=n==t.length-1,r;return i||s?r=t[0]:r=t[n+1],MG.indexOf(r)<0?(j("invalid sort type ",r),null):r}getIndexedSortMap(){let e=this.columnModel.getAllCols().filter(r=>!!r.getSort());if(this.columnModel.isPivotMode()){let r=this.gos.isColumnsSortingCoupledToGroup();e=e.filter(o=>{let a=!!o.getAggFunc(),l=!o.isPrimary(),c=r?this.showRowGroupColsService?.getShowRowGroupCol(o.getId()):o.getColDef().showRowGroup;return a||l||c})}let t=this.funcColsService.getRowGroupColumns().filter(r=>!!r.getSort()),n={};e.forEach((r,o)=>n[r.getId()]=o),e.sort((r,o)=>{let a=r.getSortIndex(),l=o.getSortIndex();if(a!=null&&l!=null)return a-l;if(a==null&&l==null){let c=n[r.getId()],u=n[o.getId()];return c>u?1:-1}else return l==null?-1:1});let i=this.gos.isColumnsSortingCoupledToGroup()&&!!t.length;i&&(e=[...new Set(e.map(r=>this.showRowGroupColsService?.getShowRowGroupCol(r.getId())??r))]);let s=new Map;return e.forEach((r,o)=>s.set(r,o)),i&&t.forEach(r=>{let o=this.showRowGroupColsService.getShowRowGroupCol(r.getId());s.set(r,s.get(o))}),s}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([e,t],[n,i])=>t-i).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){let t=this.gos.isColumnsSortingCoupledToGroup(),n=!!e.getColDef().showRowGroup;return t&&n}getDisplaySortForColumn(e){let t=this.funcColsService.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSort();let i=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,s=i[0].getSort();return i.every(o=>o.getSort()==s)?s:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}},pde=class extends L{constructor(){super(...arguments),this.beanName="syncService",this.waitingForColumns=!1}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.rowModel=e.rowModel}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.ctrlsService.whenReady(()=>{let e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){this.columnModel.setColumnDefs(e??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.dispatchGridReadyEvent();let e=ai.__isRegistered("@ag-grid-enterprise/core",this.gridId);this.gos.get("debug")&&ys(`initialised successfully, enterprise = ${e}`)}dispatchGridReadyEvent(){let e={type:"gridReady"};this.eventService.dispatchEvent(e)}setColumnDefs(e){let t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.columnModel.setColumnDefs(t,ud(e.source))}}},gde="paste",mde=class extends L{constructor(){super(...arguments),this.beanName="changeDetectionService"}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer}postConstruct(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){e.source!==gde&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,t){if(this.gos.get("suppressChangeDetection"))return;let n=[e];if(this.clientSideRowModel&&!e.isRowPinned()){let i=this.gos.get("aggregateOnlyChangedColumns"),s=new Uy(i,this.clientSideRowModel.getRootNode());s.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(s),s.forEachChangedNodeDepthFirst(r=>{n.push(r)})}this.rowRenderer.refreshCells({rowNodes:n})}},vde=class extends L{constructor(){super(...arguments),this.beanName="expressionService",this.expressionToFunctionCache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);$e("value should be either a string or a function",e)}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(n){return ys("Processing of the expression failed"),ys("Expression = ",e),ys("Params = ",t),ys("Exception = ",n),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];let t=this.createFunctionBody(e),n=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=n,n}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}},Cde=class extends L{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,n){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=n)}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},yde=class extends L{constructor(){super(...arguments),this.beanName="valueService",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionService=e.expressionService,this.columnModel=e.columnModel,this.valueCache=e.valueCache,this.dataTypeService=e.dataTypeService}postConstruct(){this.initialised||this.init()}init(){this.isSsrm=this.gos.isRowModelType("serverSide"),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;let e=n=>this.callColumnCellValueChangedHandler(n),t=this.gos.useAsyncEvents();this.eventService.addEventListener("cellValueChanged",e,t),this.addDestroyFunc(()=>this.eventService.removeEventListener("cellValueChanged",e,t)),this.addManagedPropertyListener("treeData",n=>this.isTreeData=n.currentValue)}getValue(e,t,n=!1,i=!1){if(this.initialised||this.init(),!t)return;let s=e.getColDef(),r=s.field,o=e.getColId(),a=t.data,l,c=t.groupData&&t.groupData[o]!==void 0,u=!i&&t.aggData&&t.aggData[o]!==void 0,h=this.isSsrm&&i&&!!e.getColDef().aggFunc,f=this.isSsrm&&t.footer&&t.field&&(e.getColDef().showRowGroup===!0||e.getColDef().showRowGroup===t.field);if(n&&s.filterValueGetter?l=this.executeFilterValueGetter(s.filterValueGetter,a,e,t):this.isTreeData&&u?l=t.aggData[o]:this.isTreeData&&s.valueGetter?l=this.executeValueGetter(s.valueGetter,a,e,t):this.isTreeData&&r&&a?l=ip(a,r,e.isFieldContainsDots()):c?l=t.groupData[o]:u?l=t.aggData[o]:s.valueGetter?l=this.executeValueGetter(s.valueGetter,a,e,t):f?l=ip(a,t.field,e.isFieldContainsDots()):r&&a&&!h&&(l=ip(a,r,e.isFieldContainsDots())),this.cellExpressions&&typeof l=="string"&&l.indexOf("=")===0){let p=l.substring(1);l=this.executeValueGetter(p,a,e,t)}if(l==null){let p=this.getOpenedGroup(t,e);if(p!=null)return p}return l}parseValue(e,t,n,i){let s=e.getColDef(),r=this.gos.addGridCommonParams({node:t,data:t?.data,oldValue:i,newValue:n,colDef:s,column:e}),o=s.valueParser;return q(o)?typeof o=="function"?o(r):this.expressionService.evaluate(o,r):n}formatValue(e,t,n,i,s=!0){let r=null,o,a=e.getColDef();if(i?o=i:s&&(o=a.valueFormatter),o){let l=this.gos.addGridCommonParams({value:n,node:t,data:t?t.data:null,colDef:a,column:e});typeof o=="function"?r=o(l):r=this.expressionService.evaluate(o,l)}else if(a.refData)return a.refData[n]||"";return r==null&&Array.isArray(n)&&(r=n.join(", ")),r}getOpenedGroup(e,t){if(!this.gos.get("showOpenedGroup")||!t.getColDef().showRowGroup)return;let i=t.getColDef().showRowGroup,s=e.parent;for(;s!=null;){if(s.rowGroupColumn&&(i===!0||i===s.rowGroupColumn.getColId()))return s.key;s=s.parent}}setValue(e,t,n,i){let s=this.columnModel.getColDefCol(t);if(!e||!s)return!1;Ve(e.data)&&(e.data={});let{field:r,valueSetter:o}=s.getColDef();if(Ve(r)&&Ve(o))return j("you need either field or valueSetter set on colDef for editing to work"),!1;if(this.dataTypeService&&!this.dataTypeService.checkType(s,n))return j("Data type of the new value does not match the cell data type of the column"),!1;let a=this.gos.addGridCommonParams({node:e,data:e.data,oldValue:this.getValue(s,e),newValue:n,colDef:s.getColDef(),column:s});a.newValue=n;let l;if(q(o)?typeof o=="function"?l=o(a):l=this.expressionService.evaluate(o,a):l=this.setValueUsingField(e.data,r,n,s.isFieldContainsDots()),l===void 0&&(l=!0),!l)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),a.newValue=this.getValue(s,e);let c={type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:a.column,api:a.api,colDef:a.colDef,context:a.context,data:e.data,node:e,oldValue:a.oldValue,newValue:a.newValue,value:a.newValue,source:i};return this.eventService.dispatchEvent(c),!0}callColumnCellValueChangedHandler(e){let t=e.colDef.onCellValueChanged;typeof t=="function"&&this.getFrameworkOverrides().wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,n,i){if(!t)return!1;let s=!1;if(!i)s=e[t]===n,s||(e[t]=n);else{let r=t.split("."),o=e;for(;r.length>0&&o;){let a=r.shift();r.length===0?(s=o[a]===n,s||(o[a]=n)):o=o[a]}}return!s}executeFilterValueGetter(e,t,n,i){let s=this.gos.addGridCommonParams({data:t,node:i,column:n,colDef:n.getColDef(),getValue:this.getValueCallback.bind(this,i)});return typeof e=="function"?e(s):this.expressionService.evaluate(e,s)}executeValueGetter(e,t,n,i){let s=n.getColId(),r=this.valueCache.getValue(i,s);if(r!==void 0)return r;let o=this.gos.addGridCommonParams({data:t,node:i,column:n,colDef:n.getColDef(),getValue:this.getValueCallback.bind(this,i)}),a;return typeof e=="function"?a=e(o):a=this.expressionService.evaluate(e,o),this.valueCache.setValue(i,s,a),a}getValueCallback(e,t){let n=this.columnModel.getColDefCol(t);return n?this.getValue(n,e):null}getKeyForNode(e,t){let n=this.getValue(e,t),i=e.getColDef().keyCreator,s=n;if(i){let r=this.gos.addGridCommonParams({value:n,colDef:e.getColDef(),column:e,node:t,data:t.data});s=i(r)}return typeof s=="string"||s==null||(s=String(s),s==="[object Object]"&&j("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),s}},xR=class{};xR.gridOptions=void 0;function b2(e,t,n){if(!t)return $e("No gridOptions provided to createGrid"),{};let i=new Sde().create(e,t,s=>{let r=new Kae(e);s.createBean(r)},void 0,n);if(!Object.isFrozen(t)&&!n?.frameworkOverrides){let s="https://ag-grid.com/javascript-data-grid/grid-interface/#grid-api";Object.defineProperty(t,"api",{get:()=>{$e(`gridOptions.api is no longer supported. See ${s}.`)},configurable:!0})}return i}var wde=1,Sde=class{create(e,t,n,i,s){let r={};xR.gridOptions?(Cs(r,xR.gridOptions,!0,!0),r=B(B({},r),t)):r=t;let o=Xue(r),a=o.gridId??String(wde++),l=this.getRegisteredModules(s,a),c=this.createBeansList(o.rowModelType,l,a),u=this.createProvidedBeans(e,o,s);if(!c){$e("Failed to create grid.");return}let h={providedBeanInstances:u,beanClasses:c,gridId:a,beanInitComparator:Nae,beanDestroyComparator:kae,derivedBeans:[Tae]},f=new wie(h);return this.registerModuleUserComponents(f,l),this.registerControllers(f,l),this.registerModuleApiFunctions(f,l),n(f),f.getBean("syncService").start(),i&&i(f),f.getBean("gridApi")}registerControllers(e,t){let n=e.getBean("ctrlsFactory");t.forEach(i=>{i.controllers&&i.controllers.forEach(s=>n.register(s))})}getRegisteredModules(e,t){let n=e?e.modules:null,i=ai.__getRegisteredModules(t),s=[],r={},o=(a,l,c)=>{(h=>{r[h.moduleName]||(r[h.moduleName]=!0,s.push(h),ai.__register(h,a,c))})(l),l.dependantModules&&l.dependantModules.forEach(h=>o(a,h,c))};return o(!!n?.length||!ai.__isPackageBased(),C2,void 0),n&&n.forEach(a=>o(!0,a,t)),i&&i.forEach(a=>o(!ai.__isPackageBased(),a,void 0)),s}registerModuleUserComponents(e,t){let n=this.extractModuleEntity(t,s=>s.userComponents?s.userComponents:[]),i=e.getBean("userComponentRegistry");n.forEach(s=>{i.registerDefaultComponent(s.name,s.classImp)})}registerModuleApiFunctions(e,t){let n=e.getBean("apiFunctionService");t.forEach(i=>{let s=i.apiFunctions??{};Object.keys(s).forEach(o=>{n?.addFunction(o,s[o])})})}createProvidedBeans(e,t,n){let i=n?n.frameworkOverrides:null;Ve(i)&&(i=new cI);let s={gridOptions:t,eGridDiv:e,globalEventListener:n?n.globalEventListener:null,globalSyncEventListener:n?n.globalSyncEventListener:null,frameworkOverrides:i};return n&&n.providedBeanInstances&&Object.assign(s,n.providedBeanInstances),s}createBeansList(e="clientSide",t,n){let i=t.filter(l=>!l.rowModel||l.rowModel===e),s={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!s[e]){$e("Could not find row model for rowModelType = ",e);return}if(!ai.__assertRegistered(s[e],`rowModelType = '${e}'`,n))return;let r=[Hae,Bae,ede,Que,Eae,tie,Fae,xae,yoe,yH,ude,moe,tde,uae,Die,ine,jae,Zue,wae,_2,Ute,Bse,sde,ide,lae,vde,Hte,goe,Cde,yde,oae,voe,_ie,zae,poe,Uae,_ae,gae,foe,fde,ade,ode,hde,mde,woe,Rae,cde,dde,Vae,$ae,Gae,Lae,pde,lde,Soe,nde,rde,_oe,qte,Iae,Kte,zte,Aae,Mae,nne,$te,ene,Pae,tne],o=this.extractModuleEntity(i,l=>l.beans?l.beans:[]);r.push(...o);let a=[];return r.forEach(l=>{a.indexOf(l)<0&&a.push(l)}),a}extractModuleEntity(e,t){return[].concat(...e.map(t))}},E2=class extends L{constructor(){super(...arguments),this.beanName="rowModelHelperService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){let e=this.rowModel;switch(e.getType()){case"clientSide":this.clientSideRowModel=e;break;case"infinite":this.infiniteRowModel=e;break;case"serverSide":this.serverSideRowModel=e;break}}getClientSideRowModel(){return this.clientSideRowModel}getInfiniteRowModel(){return this.infiniteRowModel}getServerSideRowModel(){return this.serverSideRowModel}};function _de(e){e.expansionService.expandAll(!0)}function bde(e){e.expansionService.expandAll(!1)}function Ede(e){let t=e.rowModelHelperService?.getClientSideRowModel(),n=e.rowModelHelperService?.getServerSideRowModel();t?t.onRowHeightChanged():n&&n.onRowHeightChanged()}function Dde(e,t,n){let i=e.rowModelHelperService?.getServerSideRowModel();if(i){if(e.funcColsService.isRowGroupEmpty()){i.setRowCount(t,n);return}$e("setRowCount cannot be used while using row grouping.");return}let s=e.rowModelHelperService?.getInfiniteRowModel();if(s){s.setRowCount(t,n);return}}function Tde(e){return e.rowNodeBlockLoader?.getBlockState()??{}}var Rde={version:Ee,moduleName:"@ag-grid-community/csrm-ssrm-shared-api",apiFunctions:{expandAll:_de,collapseAll:bde,onRowHeightChanged:Ede}},Ide={version:Ee,moduleName:"@ag-grid-community/ssrm-infinite-shared-api",apiFunctions:{setRowCount:Dde,getCacheBlockState:Tde}},D2=class{wrap(e,t,n=[],i){let s=this.createWrapper(e,i);return t.forEach(r=>{this.createMethod(s,r,!0)}),n.forEach(r=>{this.createMethod(s,r,!1)}),s}unwrap(e){return e}createMethod(e,t,n){e.addMethod(t,this.createMethodProxy(e,t,n))}createMethodProxy(e,t,n){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(n&&j("Framework component is missing the method "+t+"()"),null)}}};function Ade(e,t){if(!e)return!1;let n=(o,a)=>{let l=t[o.id],c=t[a.id],u=l!==void 0,h=c!==void 0,f=u&&h,p=!u&&!h;return f?l-c:p?o.__objectId-a.__objectId:u?1:-1},i,s,r=!1;for(let o=0;o<e.length-1;o++)if(i=e[o],s=e[o+1],n(i,s)>0){r=!0;break}return r?(e.sort(n),!0):!1}var dI=class{};dI.CHART_TYPE_TO_SERIES_TYPE={column:"bar",groupedColumn:"bar",stackedColumn:"bar",normalizedColumn:"bar",bar:"bar",groupedBar:"bar",stackedBar:"bar",normalizedBar:"bar",line:"line",scatter:"scatter",bubble:"bubble",pie:"pie",donut:"donut",doughnut:"donut",area:"area",stackedArea:"area",normalizedArea:"area",histogram:"histogram",radarLine:"radar-line",radarArea:"radar-area",nightingale:"nightingale",radialColumn:"radial-column",radialBar:"radial-bar",sunburst:"sunburst",rangeBar:"range-bar",rangeArea:"range-area",boxPlot:"box-plot",treemap:"treemap",heatmap:"heatmap",waterfall:"waterfall"};dI.COMBO_CHART_TYPES=["columnLineCombo","areaColumnCombo","customCombo"];dI.SERIES_GROUP_TYPES=["grouped","stacked","normalized"];var wd=typeof global>"u"?{}:global;wd.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;wd.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;wd.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;wd.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;wd.Node=typeof Node>"u"?{}:Node;wd.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var Mde="ROOT_NODE_ID",mR=0,Pde=class{constructor(e,t,n,i,s,r){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gos=t,this.eventService=n,this.funcColsService=i,this.beans=r,this.selectionService=s,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=Mde,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return VG(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if(typeof e=="string"){j("rowData must be an array.");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);let t=this.rootNode,n=this.rootNode.sibling;t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?t.allLeafChildren=e.map(i=>this.createNode(i,this.rootNode,mR)):(t.allLeafChildren=[],t.childrenAfterGroup=[]),n&&(n.childrenAfterFilter=t.childrenAfterFilter,n.childrenAfterGroup=t.childrenAfterGroup,n.childrenAfterAggFilter=t.childrenAfterAggFilter,n.childrenAfterSort=t.childrenAfterSort,n.childrenMapped=t.childrenMapped,n.allLeafChildren=t.allLeafChildren)}updateRowData(e,t){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);let n={remove:[],update:[],add:[]},i=[];return this.executeRemove(e,n,i),this.executeUpdate(e,n,i),this.executeAdd(e,n),this.updateSelection(i,"rowDataChanged"),t&&Ade(this.rootNode.allLeafChildren,t),n}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){let t={type:"rowDataUpdateStarted",firstRowData:e?.length?e[0]:null};this.eventService.dispatchEvent(t)}updateSelection(e,t){let n=e.length>0;if(n&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),this.selectionService.updateGroupsFromChildrenSelections(t),n){let i={type:"selectionChanged",source:t};this.eventService.dispatchEvent(i)}}executeAdd(e,t){let{add:n,addIndex:i}=e;if(bn(n))return;let s=n.map(o=>this.createNode(o,this.rootNode,mR)),r=this.rootNode.allLeafChildren;if(typeof i=="number"&&i>=0){let o=r.length,a=i;if(this.gos.get("treeData")&&i>0&&o>0){for(let h=0;h<o;h++)if(r[h]?.rowIndex==i-1){a=h+1;break}}let c=r.slice(0,a),u=r.slice(a,r.length);this.rootNode.allLeafChildren=[...c,...s,...u]}else this.rootNode.allLeafChildren=[...r,...s];this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=r),t.add=s}executeRemove(e,t,n){let{remove:i}=e;if(bn(i))return;let s={};i.forEach(r=>{let o=this.lookupRowNode(r);o&&(o.isSelected()&&n.push(o),o.clearRowTopAndRowIndex(),s[o.id]=!0,delete this.allNodesMap[o.id],t.remove.push(o))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren?.filter(r=>!s[r.id])??null,this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,t,n){let{update:i}=e;bn(i)||i.forEach(s=>{let r=this.lookupRowNode(s);r&&(r.updateData(s),!r.selectable&&r.isSelected()&&n.push(r),this.setMasterForRow(r,s,mR,!1),t.update.push(r))})}lookupRowNode(e){let t=this.gos.getRowIdCallback(),n;if(t){let i=t({data:e,level:0});if(n=this.allNodesMap[i],!n)return $e(`could not find row id=${i}, data item was not found for this id`),null}else if(n=this.rootNode.allLeafChildren?.find(i=>i.data===e),!n)return $e("could not find data item as object was not found",e),$e("Consider using getRowId to help the Grid find matching row data"),null;return n||null}createNode(e,t,n){let i=new bo(this.beans);return i.group=!1,this.setMasterForRow(i,e,n,!0),t&&(i.parent=t),i.level=n,i.setDataAndId(e,this.nextId.toString()),this.allNodesMap[i.id]&&j(`duplicate node id '${i.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[i.id]=i,this.nextId++,i}setMasterForRow(e,t,n,i){if(this.gos.get("treeData"))e.setMaster(!1),i&&(e.expanded=!1);else{if(this.gos.get("masterDetail")){let o=this.gos.get("isRowMaster");o?e.setMaster(o(t)):e.setMaster(!0)}else e.setMaster(!1);if(i){let o=this.funcColsService.getRowGroupColumns(),a=o?o.length:0,l=n+a;e.expanded=e.master?this.isExpanded(l):!1}}}isExpanded(e){let t=this.gos.get("groupDefaultExpanded");return t===-1?!0:e<t}},Fde=class extends L{constructor(){super(...arguments),this.beanName="rowModel",this.onRowHeightChanged_debounced=ci(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}wireBeans(e){this.beans=e,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.selectionService=e.selectionService,this.valueCache=e.valueCache,this.environment=e.environment,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggregationStage=e.aggregationStage,this.pivotStage=e.pivotStage,this.filterAggregatesStage=e.filterAggregatesStage}postConstruct(){let e=this.refreshModel.bind(this,{step:"group"}),t=!this.gos.get("suppressAnimationFrame"),n=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedEventListeners({newColumnsLoaded:n,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new bo(this.beans),this.nodeManager=new Pde(this.rootNode,this.gos,this.eventService,this.funcColsService,this.selectionService,this.beans)}addPropertyListeners(){let e=new Set(["treeData","masterDetail"]),t=new Set(["groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),n=new Set(["excludeChildrenWhenTreeDataFiltering"]),i=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),s=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),r=new Set(["postSortRows","groupDisplayType","accentedSort"]),o=new Set([]),a=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),l=[...e,...t,...n,...i,...i,...s,...r,...o,...a];this.addManagedPropertyListeners(l,c=>{let u=c.changeSet?.properties;if(!u)return;let h=f=>u.some(p=>f.has(p));if(h(e)){this.setRowData(this.rootNode.allLeafChildren.map(f=>f.data));return}if(h(t)){this.refreshModel({step:"group"});return}if(h(n)){this.refreshModel({step:"filter"});return}if(h(i)){this.refreshModel({step:"pivot"});return}if(h(s)){this.refreshModel({step:"aggregate"});return}if(h(r)){this.refreshModel({step:"sort"});return}if(h(o)){this.refreshModel({step:"filter_aggregates"});return}h(a)&&this.refreshModel({step:"map"})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){let e=this.gos.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))}ensureRowHeightsValid(e,t,n,i){let s,r=!1;do{s=!1;let o=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(o,n),c=Math.min(a,i);for(let u=l;u<=c;u++){let h=this.getRow(u);if(h.rowHeightEstimated){let f=this.gos.getRowHeightForNode(h);h.setRowHeight(f.height),s=!0,r=!0}}s&&this.setRowTopAndRowIndex()}while(s);return r}setRowTopAndRowIndex(){let e=this.environment.getDefaultRowHeight(),t=0,n=new Set,i=this.gos.isDomLayout("normal");for(let s=0;s<this.rowsToDisplay.length;s++){let r=this.rowsToDisplay[s];if(r.id!=null&&n.add(r.id),r.rowHeight==null){let o=this.gos.getRowHeightForNode(r,i,e);r.setRowHeight(o.height,o.estimated)}r.setRowTop(t),r.setRowIndex(s),t+=r.rowHeight}return n}clearRowTopAndRowIndex(e,t){let n=e.isActive(),i=r=>{r&&r.id!=null&&!t.has(r.id)&&r.clearRowTopAndRowIndex()},s=r=>{if(i(r),i(r.detailNode),i(r.sibling),r.hasChildren()&&r.childrenAfterGroup){let o=r.level==-1;n&&!o&&!r.expanded||r.childrenAfterGroup.forEach(s)}};s(this.rootNode)}ensureRowsAtPixel(e,t,n=0){let i=this.getRowIndexAtPixel(t),s=this.getRow(i),r=!this.gos.get("suppressAnimationFrame");return s===e[0]?!1:(e.forEach(o=>{li(this.rootNode.allLeafChildren,o)}),e.forEach((o,a)=>{Iy(this.rootNode.allLeafChildren,o,Math.max(i+n,0)+a)}),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:r}),!0)}highlightRowAtPixel(e,t){let n=t!=null?this.getRowIndexAtPixel(t):null,i=n!=null?this.getRow(n):null;if(!i||!e||i===e||t==null){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null);return}let s=this.getHighlightPosition(t,i);this.lastHighlightedRow&&this.lastHighlightedRow!==i&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),i.setHighlighted(s),this.lastHighlightedRow=i}getHighlightPosition(e,t){if(!t){let s=this.getRowIndexAtPixel(e);if(t=this.getRow(s||0),!t)return 1}let{rowTop:n,rowHeight:i}=t;return e-n<i/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;let t=this.rootNode.sibling?1:0,n=this.rootNode.childrenAfterAggFilter;return(n?n.length:0)+t}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let n=e;if(this.rowsToDisplay[0].footer){if(e===0)return 0;n-=1}let i=this.rootNode.childrenAfterSort[n];if(this.gos.get("groupHideOpenParents"))for(;i.expanded&&i.childrenAfterSort&&i.childrenAfterSort.length>0;)i=i.childrenAfterSort[0];return i.rowIndex}getRowBounds(e){if(Ve(this.rowsToDisplay))return null;let t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){let e=this.gos.isAnimateRows();this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;let t=this.gos.isAnimateRows(),i=e.columns.length===0||e.columns.some(s=>s.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:i,keepRenderedRows:!0,animate:t})}onSortChanged(){let e=this.gos.isAnimateRows();this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(e){let t=bn(e),n=new Uy(!1,this.rootNode);return(t||this.gos.get("treeData"))&&n.setInactive(),n}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction")||e.rowNodeTransactions==null)return!1;let t=e.rowNodeTransactions.filter(i=>i.add!=null&&i.add.length>0||i.remove!=null&&i.remove.length>0);return t==null||t.length==0}buildRefreshModelParams(e){let t="group",n={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",sort:"sort",pivot:"pivot"};if(q(e)&&(t=n[e]),Ve(t)){$e(`invalid step ${e}, available steps are ${Object.keys(n).join(", ")}`);return}let i=!this.gos.get("suppressAnimationFrame");return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:i}}refreshModel(e){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.isChangeEventsDispatching())return;let t=typeof e=="object"&&"step"in e?e:this.buildRefreshModelParams(e);if(!t||this.isSuppressModelUpdateAfterUpdateTransaction(t))return;let n=this.createChangePath(t.rowNodeTransactions);switch(this.isRefreshingModel=!0,t.step){case"group":this.doRowGrouping(t.rowNodeTransactions,t.rowNodeOrder,n,!!t.afterColumnsChanged);case"filter":this.doFilter(n);case"pivot":this.doPivot(n);case"aggregate":this.doAggregate(n);case"filter_aggregates":this.doFilterAggregates(n);case"sort":this.doSort(t.rowNodeTransactions,n);case"map":this.doRowsToDisplay()}let i=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(n,i),this.isRefreshingModel=!1;let s={type:"modelUpdated",animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack};this.eventService.dispatchEvent(s)}isEmpty(){let e=Ve(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return Ve(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return q(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let n=!1,i=!1,s=[],r=this.gos.get("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(o=>{if(i)return;if(n&&(o===t||o===e)&&(i=!0,o.group&&r)){s.push(...o.allLeafChildren);return}if(!n){if(o!==t&&o!==e)return;n=!0}if(!o.group||!r){s.push(o);return}}),s}setDatasource(e){$e("should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let t=0,n=this.rowsToDisplay.length-1;if(e<=0)return 0;if(We(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let s=-1,r=-1;for(;;){let o=Math.floor((t+n)/2),a=this.rowsToDisplay[o];if(this.isRowInPixel(a,e)||(a.rowTop<e?t=o+1:a.rowTop>e&&(n=o-1),s===t&&r===n))return o;s=t,r=n}}isRowInPixel(e,t){let n=e.rowTop,i=e.rowTop+e.rowHeight;return n<=t&&i>t}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((t,n)=>e(t,n))}forEachNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:0,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:1,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:2,index:0,includeFooterNodes:t})}forEachPivotNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:3,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){let{nodes:t,callback:n,recursionType:i,includeFooterNodes:s}=e,{index:r}=e,o=a=>{let l=t[0]?.parent;if(!l)return;let c=s&&this.gos.getGrandTotalRow(),u=this.gos.getGroupTotalRowCallback(),h=s&&u({node:l});if(l===this.rootNode){c===a&&(l.createFooter(),n(l.sibling,r++));return}h===a&&(l.createFooter(),n(l.sibling,r++))};o("top");for(let a=0;a<t.length;a++){let l=t[a];if(n(l,r++),l.hasChildren()&&!l.footer){let c=null;switch(i){case 0:c=l.childrenAfterGroup;break;case 1:c=l.childrenAfterAggFilter;break;case 2:c=l.childrenAfterSort;break;case 3:c=l.leafGroup?null:l.childrenAfterSort;break}c&&(r=this.recursivelyWalkNodesAndCallback({nodes:[...c],callback:n,recursionType:i,index:r,includeFooterNodes:s}))}}return o("bottom"),r}doAggregate(e){this.aggregationStage?.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){let t=this.gos.get("treeData"),n=this.columnModel.isPivotActive(),i=o=>{o&&o.forEach(a=>{let l=()=>{a.expanded=e,i(a.childrenAfterGroup)};if(t){q(a.childrenAfterGroup)&&l();return}if(n){!a.leafGroup&&l();return}a.group&&l()})};this.rootNode&&i(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"});let r={type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"};this.eventService.dispatchEvent(r)}doSort(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})}doRowGrouping(e,t,n,i){if(this.groupStage){if(e?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,rowNodeOrder:t,changedPath:n}):this.groupStage.execute({rowNode:this.rootNode,changedPath:n,afterColumnsChanged:i}),this.gos.get("groupSelectsChildren")&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",n)){let r={type:"selectionChanged",source:"rowGroupChanged"};this.eventService.dispatchEvent(r)}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren();this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){this.pivotStage?.execute({rowNode:this.rootNode,changedPath:e})}getCopyOfNodesMap(){return this.nodeManager.getCopyOfNodesMap()}getRowNode(e){if(typeof e=="string"&&e.indexOf(bo.ID_PREFIX_ROW_GROUP)==0){let n;return this.forEachNode(i=>{i.id===e&&(n=i)}),n}return this.nodeManager.getRowNode(e)}setRowData(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){let e={type:"rowDataUpdated"};this.eventService.dispatchEvent(e),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];let n=this.gos.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.executeBatchUpdateRowData()},n)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();let e=[],t=[],n=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(i=>{let s=this.nodeManager.updateRowData(i.rowDataTransaction,void 0);t.push(s),i.callback&&e.push(i.callback.bind(null,s)),typeof i.rowDataTransaction.addIndex=="number"&&(n=!0)}),this.commonUpdateRowData(t,void 0,n),e.length>0&&window.setTimeout(()=>{e.forEach(i=>i())},0),t.length>0){let i={type:"asyncTransactionsFlushed",results:t};this.eventService.dispatchEvent(i)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e,t){this.valueCache.onDataChanged();let n=this.nodeManager.updateRowData(e,t),i=typeof e.addIndex=="number";return this.commonUpdateRowData([n],t,i),n}createRowNodeOrder(){if(this.gos.get("suppressMaintainUnsortedOrder"))return;let t={};if(this.rootNode&&this.rootNode.allLeafChildren)for(let n=0;n<this.rootNode.allLeafChildren.length;n++){let i=this.rootNode.allLeafChildren[n];t[i.id]=n}return t}commonUpdateRowData(e,t,n){if(!this.hasStarted)return;let i=!this.gos.get("suppressAnimationFrame");n&&(t=this.createRowNodeOrder());let s={type:"rowDataUpdated"};this.eventService.dispatchEvent(s),this.refreshModel({step:"group",rowNodeTransactions:e,rowNodeOrder:t,keepRenderedRows:!0,keepEditingRows:!0,animate:i})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){let e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);let n=t.detailNode;n&&n.setRowHeight(n.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.columnModel.isAutoRowHeightActive())return;this.resetRowHeights()}}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}};function xde(e){e.expansionService.onGroupExpandedOrCollapsed()}function Ode(e,t){e.rowModelHelperService?.getClientSideRowModel()?.refreshModel(t)}function Nde(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachLeafNode(t)}function kde(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilter(t)}function Lde(e,t){e.rowModelHelperService?.getClientSideRowModel()?.forEachNodeAfterFilterAndSort(t)}function Vde(e){if(e.columnModel.isAutoRowHeightActive()){j("calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}e.rowModelHelperService?.getClientSideRowModel()?.resetRowHeights()}function Bde(e,t){return e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.updateRowData(t))}function Gde(e,t,n){e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.batchUpdateRowData(t,n))}function Hde(e){e.frameworkOverrides.wrapIncoming(()=>e.rowModelHelperService?.getClientSideRowModel()?.flushAsyncTransactions())}function Ude(e){return e.selectionService.getBestCostNodeSelection()}var Wde=class extends L{constructor(){super(...arguments),this.beanName="filterStage"}wireBeans(e){this.filterManager=e.filterManager}execute(e){let{changedPath:t}=e;this.filter(t)}filter(e){let t=!!this.filterManager?.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){let n=(i,s)=>{i.hasChildren()&&e&&!s?i.childrenAfterFilter=i.childrenAfterGroup.filter(r=>{let o=r.childrenAfterFilter&&r.childrenAfterFilter.length>0,a=r.data&&this.filterManager.doesRowPassFilter({rowNode:r});return o||a}):i.childrenAfterFilter=i.childrenAfterGroup,i.sibling&&(i.sibling.childrenAfterFilter=i.childrenAfterFilter)};if(this.doingTreeDataFiltering()){let i=(r,o)=>{if(r.childrenAfterGroup)for(let a=0;a<r.childrenAfterGroup.length;a++){let l=r.childrenAfterGroup[a],c=o||this.filterManager.doesRowPassFilter({rowNode:l});l.childrenAfterGroup?i(r.childrenAfterGroup[a],c):n(l,c)}n(r,o)},s=r=>i(r,!1);t.executeFromRootNode(s)}else{let i=s=>n(s,!1);t.forEachChangedNodeDepthFirst(i,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},jde=class extends L{constructor(){super(...arguments),this.beanName="flattenStage"}wireBeans(e){this.beans=e,this.columnModel=e.columnModel}execute(e){let t=e.rowNode,n=[],i=this.columnModel.isPivotMode(),s=i&&t.leafGroup,r=s?[t]:t.childrenAfterSort,o=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(o,r,n,i,0);let a=n.length>0;if(!s&&a&&o.grandTotalRow){t.createFooter();let c=o.grandTotalRow==="top";this.addRowNodeToRowsToDisplay(o,t.sibling,n,0,c)}return n}getFlattenDetails(){let e=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:this.gos.isGroupMultiAutoColumn(),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:this.gos.getGrandTotalRow(),groupTotalRow:this.gos.getGroupTotalRowCallback()}}recursivelyAddToRowsToDisplay(e,t,n,i,s){if(!bn(t))for(let r=0;r<t.length;r++){let o=t[r],a=o.hasChildren(),l=i&&!a,c=e.groupRemoveSingleChildren&&a&&o.childrenAfterGroup.length===1,u=e.groupRemoveLowestSingleChildren&&a&&o.leafGroup&&o.childrenAfterGroup.length===1,h=i&&o.leafGroup,f=e.hideOpenParents&&o.expanded&&!o.master&&!h;if(!l&&!f&&!c&&!u&&this.addRowNodeToRowsToDisplay(e,o,n,s),!(i&&o.leafGroup)){if(a){let v=c||u;if(o.expanded||v){let y=e.groupTotalRow({node:o});y||o.destroyFooter();let C=v?s:s+1;y==="top"&&(o.createFooter(),this.addRowNodeToRowsToDisplay(e,o.sibling,n,C)),this.recursivelyAddToRowsToDisplay(e,o.childrenAfterSort,n,i,C),y==="bottom"&&(o.createFooter(),this.addRowNodeToRowsToDisplay(e,o.sibling,n,C))}}else if(o.master&&o.expanded){let v=this.createDetailNode(o);this.addRowNodeToRowsToDisplay(e,v,n,s)}}}}addRowNodeToRowsToDisplay(e,t,n,i,s){s?n.unshift(t):n.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:i)}createDetailNode(e){if(q(e.detailNode))return e.detailNode;let t=new bo(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,q(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t}},zde=class extends L{constructor(){super(...arguments),this.beanName="immutableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){let e=this.gos.exists("getRowId");return this.gos.get("resetRowDataOnUpdate")?!1:e}setRowData(e){let t=this.createTransactionForRowData(e);if(!t)return;let[n,i]=t;this.clientSideRowModel.updateRowData(n,i)}createTransactionForRowData(e){if(Ve(this.clientSideRowModel)){$e("ImmutableService only works with ClientSideRowModel");return}let t=this.gos.getRowIdCallback();if(t==null){$e("ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");return}let n={remove:[],update:[],add:[]},i=this.clientSideRowModel.getCopyOfNodesMap(),r=this.gos.get("suppressMaintainUnsortedOrder")?void 0:{};return q(e)&&e.forEach((o,a)=>{let l=t({data:o,level:0}),c=i[l];r&&(r[l]=a),c?(c.data!==o&&n.update.push(o),i[l]=void 0):n.add.push(o)}),vs(i,(o,a)=>{a&&n.remove.push(a.data)}),[n,r]}onRowDataUpdated(){let e=this.gos.get("rowData");e&&(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))}},$de=class extends L{constructor(){super(...arguments),this.beanName="sortService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.rowNodeSorter=e.rowNodeSorter,this.showRowGroupColsService=e.showRowGroupColsService}sort(e,t,n,i,s,r){let o=this.gos.get("groupMaintainOrder"),a=this.columnModel.getCols().some(f=>f.isRowGroupActive()),l={};n&&i&&(l=this.calculateDirtyNodes(i));let c=this.columnModel.isPivotMode(),u=this.gos.getCallback("postSortRows"),h=f=>{this.pullDownGroupDataForHideOpenParents(f.childrenAfterAggFilter,!0);let p=c&&f.leafGroup;if(o&&a&&!f.leafGroup&&!r){let C=this.funcColsService.getRowGroupColumns()?.[f.level+1]?.getSort()===null,E=f.childrenAfterAggFilter.slice(0);if(f.childrenAfterSort&&!C){let T={};f.childrenAfterSort.forEach((R,F)=>{T[R.id]=F}),E.sort((R,F)=>(T[R.id]??0)-(T[F.id]??0))}f.childrenAfterSort=E}else!t||p?f.childrenAfterSort=f.childrenAfterAggFilter.slice(0):n?f.childrenAfterSort=this.doDeltaSort(f,l,s,e):f.childrenAfterSort=this.rowNodeSorter.doFullSort(f.childrenAfterAggFilter,e);if(f.sibling&&(f.sibling.childrenAfterSort=f.childrenAfterSort),this.updateChildIndexes(f),u){let y={nodes:f.childrenAfterSort};u(y)}};s&&s.forEachChangedNodeDepthFirst(h),this.updateGroupDataForHideOpenParents(s)}calculateDirtyNodes(e){let t={},n=i=>{i&&i.forEach(s=>t[s.id]=!0)};return e&&e.forEach(i=>{n(i.add),n(i.update),n(i.remove)}),t}doDeltaSort(e,t,n,i){let s=e.childrenAfterAggFilter,r=e.childrenAfterSort;if(!r)return this.rowNodeSorter.doFullSort(s,i);let o={},a=[];s.forEach(h=>{t[h.id]||!n.canSkip(h)?a.push(h):o[h.id]=!0});let l=r.filter(h=>o[h.id]),c=(h,f)=>({currentPos:f,rowNode:h}),u=a.map(c).sort((h,f)=>this.rowNodeSorter.compareRowNodes(i,h,f));return this.mergeSortedArrays(i,u,l.map(c)).map(({rowNode:h})=>h)}mergeSortedArrays(e,t,n){let i=[],s=0,r=0;for(;s<t.length&&r<n.length;)this.rowNodeSorter.compareRowNodes(e,t[s],n[r])<0?i.push(t[s++]):i.push(n[r++]);for(;s<t.length;)i.push(t[s++]);for(;r<n.length;)i.push(n[r++]);return i}updateChildIndexes(e){if(Ve(e.childrenAfterSort))return;let t=e.childrenAfterSort;for(let n=0;n<t.length;n++){let i=t[n],s=n===0,r=n===e.childrenAfterSort.length-1;i.setFirstChild(s),i.setLastChild(r),i.setChildIndex(n)}}updateGroupDataForHideOpenParents(e){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return j("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;let t=n=>{this.pullDownGroupDataForHideOpenParents(n.childrenAfterSort,!1),n.childrenAfterSort.forEach(i=>{i.hasChildren()&&t(i)})};e&&e.executeFromRootNode(n=>t(n))}pullDownGroupDataForHideOpenParents(e,t){!this.gos.get("groupHideOpenParents")||Ve(e)||e.forEach(n=>{(this.showRowGroupColsService?.getShowRowGroupCols()??[]).forEach(s=>{let r=s.getColDef().showRowGroup;if(typeof r!="string"){$e("groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}let o=r,a=this.columnModel.getColDefCol(o);if(a!==n.rowGroupColumn)if(t)n.setGroupValue(s.getId(),void 0);else{let c=n.getFirstChildOfFirstChild(a);c&&n.setGroupValue(s.getId(),c.key)}})})}},qde=class extends L{constructor(){super(...arguments),this.beanName="sortStage"}wireBeans(e){this.sortService=e.sortService,this.sortController=e.sortController}execute(e){let t=this.sortController.getSortOptions(),n=q(t)&&t.length>0,i=n&&q(e.rowNodeTransactions)&&this.gos.get("deltaSort"),s=t.some(r=>this.gos.isColumnsSortingCoupledToGroup()?r.column.isPrimary()&&r.column.isRowGroupActive():!!r.column.getColDef().showRowGroup);this.sortService.sort(t,n,i,e.rowNodeTransactions,e.changedPath,s)}},hI="32.0.2",T2={version:hI,moduleName:"@ag-grid-community/client-side-row-model-core",rowModel:"clientSide",beans:[Fde,Wde,qde,jde,$de,zde]},Kde={version:hI,moduleName:"@ag-grid-community/client-side-row-model-api",beans:[E2],apiFunctions:{onGroupExpandedOrCollapsed:xde,refreshClientSideRowModel:Ode,forEachLeafNode:Nde,forEachNodeAfterFilter:kde,forEachNodeAfterFilterAndSort:Lde,resetRowHeights:Vde,applyTransaction:Bde,applyTransactionAsync:Gde,flushAsyncTransactions:Hde,getBestCostNodeSelection:Ude},dependantModules:[T2,Rde]},Qde={version:hI,moduleName:"@ag-grid-community/client-side-row-model",dependantModules:[T2,Kde]},Yde=class extends L{setBeans(e){this.beans=e}getFileName(e){let t=this.getDefaultFileExtension();return(e==null||!e.length)&&(e=this.getDefaultFileName()),e.indexOf(".")===-1?`${e}.${t}`:e}getData(e){let t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},Jde=class{constructor(e){this.groupColumns=[];let{columnModel:t,funcColsService:n,columnNameService:i,valueService:s,gos:r,processCellCallback:o,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c}=e;this.columnModel=t,this.funcColsService=n,this.columnNameService=i,this.valueService=s,this.gos=r,this.processCellCallback=o,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=c}prepare(e){this.groupColumns=e.filter(t=>!!t.getColDef().showRowGroup)}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,n,i,s){let o=(!this.gos.get("groupHideOpenParents")||s.footer)&&this.shouldRenderGroupSummaryCell(s,e,t)?this.createValueForGroupNode(e,s):this.valueService.getValue(e,s);return this.processCell({accumulatedRowIndex:n,rowNode:s,column:e,value:o,processCellCallback:this.processCellCallback,type:i})}shouldRenderGroupSummaryCell(e,t,n){if(!(e&&e.group))return!1;if(this.groupColumns.indexOf(t)!==-1){if(e.groupData?.[t.getId()]!=null||this.gos.isRowModelType("serverSide")&&e.group)return!0;if(e.footer&&e.level===-1){let o=t.getColDef();return o==null||o.showRowGroup===!0||o.showRowGroup===this.funcColsService.getRowGroupColumns()[0].getId()}}let r=this.gos.isGroupUseEntireRow(this.columnModel.isPivotMode());return n===0&&r}getHeaderName(e,t){return e?e(this.gos.addGridCommonParams({column:t})):this.columnNameService.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:e,node:t}));let n=this.gos.get("treeData"),i=this.gos.get("suppressGroupMaintainValueType"),s=l=>{if(n||i)return l.key;let c=l.groupData?.[e.getId()];return!c||!l.rowGroupColumn||l.rowGroupColumn.getColDef().useValueFormatterForExport===!1?c:this.valueService.formatValue(l.rowGroupColumn,l,c)??c},r=t.footer,o=[s(t)];if(!this.gos.isGroupMultiAutoColumn())for(;t.parent;)t=t.parent,o.push(s(t));let a=o.reverse().join(" -> ");return r?`Total ${a}`:a}processCell(e){let{accumulatedRowIndex:t,rowNode:n,column:i,value:s,processCellCallback:r,type:o}=e;return r?{value:r(this.gos.addGridCommonParams({accumulatedRowIndex:t,column:i,node:n,value:s,type:o,parseValue:a=>this.valueService.parseValue(i,n,a,this.valueService.getValue(i,n)),formatValue:a=>this.valueService.formatValue(i,n,a)??a}))??""}:i.getColDef().useValueFormatterForExport!==!1?{value:s??"",valueFormatted:this.valueService.formatValue(i,n,s)}:{value:s??""}}},Xde=class{static download(e,t){let n=document.defaultView||window;if(!n){j("There is no `window` associated with the current `document`");return}let i=document.createElement("a"),s=n.URL.createObjectURL(t);i.setAttribute("href",s),i.setAttribute("download",e),i.style.display="none",document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:n})),document.body.removeChild(i),n.setTimeout(()=>{n.URL.revokeObjectURL(s)},0)}},PG=`\r
`,Zde=class extends Jde{constructor(e){super(e),this.isFirstLine=!0,this.result="";let{suppressQuotes:t,columnSeparator:n}=e;this.suppressQuotes=t,this.columnSeparator=n}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,PG),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((n,i)=>{i!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(n.data.value||""),n.mergeAcross&&this.appendEmptyCells(n.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,n,i){n!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(i)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,n){t!=0&&(this.result+=this.columnSeparator);let i=this.extractRowCellValue(e,t,t,"csv",n);this.result+=this.putInQuotes(i.valueFormatted??i.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(j("unknown value type during csv conversion"),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=PG),this.isFirstLine=!1}},ehe=class extends Yde{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.gridSerializer=e.gridSerializer}postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(e){let t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){j("Export cancelled. Export is not allowed as per your configuration.");return}let t=this.getMergedParams(e),n=this.getData(t),i=new Blob(["\uFEFF",n],{type:"text/plain"}),s=typeof t.fileName=="function"?t.fileName(this.gos.getGridCommonParams()):t.fileName;Xde.download(this.getFileName(s),i)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){let n=t?Object.assign({},e):this.getMergedParams(e);return this.getData(n)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){let{columnModel:t,columnNameService:n,funcColsService:i,valueService:s,gos:r}=this,{processCellCallback:o,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c,suppressQuotes:u,columnSeparator:h}=e;return new Zde({columnModel:t,columnNameService:n,funcColsService:i,valueService:s,gos:r,processCellCallback:o||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:c||void 0,suppressQuotes:u||!1,columnSeparator:h||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function the(e,t){return e.csvCreator?.getDataAsCsv(t)}function nhe(e,t){e.csvCreator?.exportDataAsCsv(t)}var ihe=class extends L{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.selectionService=e.selectionService,this.rowNodeSorter=e.rowNodeSorter,this.sortController=e.sortController}serialize(e,t={}){let{allColumns:n,columnKeys:i,skipRowGroups:s}=t,r=this.getColumnsToExport(n,s,i);return Bte(this.prepareSession(r),this.prependContent(t),this.exportColumnGroups(t,r),this.exportHeaders(t,r),this.processPinnedTopRows(t,r),this.processRows(t,r),this.processPinnedBottomRows(t,r),this.appendContent(t))(e).parse()}processRow(e,t,n,i){let s=t.shouldRowBeSkipped||(()=>!1),r=this.gos.get("groupRemoveSingleChildren"),o=this.gos.get("groupRemoveLowestSingleChildren"),l=t.rowPositions!=null||!!t.onlySelected,c=this.gos.get("groupHideOpenParents")&&!l,u=this.columnModel.isPivotMode()?i.leafGroup:!i.group,h=!!i.footer,f=o&&i.leafGroup,p=i.allChildrenCount===1&&i.childrenAfterGroup?.length===1&&(r||f);if(!u&&!h&&(t.skipRowGroups||p||c)||t.onlySelected&&!i.isSelected()||t.skipPinnedTop&&i.rowPinned==="top"||t.skipPinnedBottom&&i.rowPinned==="bottom"||i.level===-1&&!u&&!h||s(this.gos.addGridCommonParams({node:i})))return;let C=e.onNewBodyRow(i);if(n.forEach((E,T)=>{C.onColumn(E,T,i)}),t.getCustomContentBelowRow){let E=t.getCustomContentBelowRow(this.gos.addGridCommonParams({node:i}));E&&e.addCustomContent(E)}}appendContent(e){return t=>{let n=e.appendContent;return n&&t.addCustomContent(n),t}}prependContent(e){return t=>{let n=e.prependContent;return n&&t.addCustomContent(n),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return n=>{if(!e.skipColumnGroupHeaders){let i=new jG,s=this.visibleColsService.createGroups({columns:t,idCreator:i,pinned:null,isStandaloneStructure:!0});this.recursivelyAddHeaderGroups(s,n,e.processGroupHeaderCallback)}return n}}exportHeaders(e,t){return n=>{if(!e.skipColumnHeaders){let i=n.onNewHeaderRow();t.forEach((s,r)=>{i.onColumn(s,r,void 0)})}return n}}processPinnedTopRows(e,t){return n=>{let i=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter(s=>s.rowPinned==="top").sort((s,r)=>s.rowIndex-r.rowIndex).map(s=>this.pinnedRowModel.getPinnedTopRow(s.rowIndex)).forEach(i):this.pinnedRowModel.forEachPinnedTopRow(i),n}}processRows(e,t){return n=>{let i=this.rowModel,s=i.getType(),r=s==="clientSide",o=s==="serverSide",a=!r&&e.onlySelected,l=this.processRow.bind(this,n,e,t),{exportedRows:c="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(u=>u.rowPinned==null).sort((u,h)=>u.rowIndex-h.rowIndex).map(u=>i.getRow(u.rowIndex)).forEach(l);else if(this.columnModel.isPivotMode())r?i.forEachPivotNode(l,!0):o?i.forEachNodeAfterFilterAndSort(l,!0):i.forEachNode(l);else if(e.onlySelectedAllPages||a){let u=this.selectionService.getSelectedNodes();this.replicateSortedOrder(u),u.forEach(l)}else c==="all"?i.forEachNode(l):r||o?i.forEachNodeAfterFilterAndSort(l,!0):i.forEachNode(l);return n}}replicateSortedOrder(e){let t=this.sortController.getSortOptions(),n=(i,s)=>i.rowIndex!=null&&s.rowIndex!=null?i.rowIndex-s.rowIndex:i.level===s.level?i.parent?.id===s.parent?.id?this.rowNodeSorter.compareRowNodes(t,{rowNode:i,currentPos:i.rowIndex??-1},{rowNode:s,currentPos:s.rowIndex??-1}):n(i.parent,s.parent):i.level>s.level?n(i.parent,s):n(i,s.parent);e.sort(n)}processPinnedBottomRows(e,t){return n=>{let i=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter(s=>s.rowPinned==="bottom").sort((s,r)=>s.rowIndex-r.rowIndex).map(s=>this.pinnedRowModel.getPinnedBottomRow(s.rowIndex)).forEach(i):this.pinnedRowModel.forEachPinnedBottomRow(i),n}}getColumnsToExport(e=!1,t=!1,n){let i=this.columnModel.isPivotMode();if(n&&n.length)return this.columnModel.getColsForKeys(n);let s=this.gos.get("treeData"),r=[];return e&&!i?r=this.columnModel.getCols():r=this.visibleColsService.getAllCols(),t&&!s&&(r=r.filter(o=>o.getColId()!==hp)),r}recursivelyAddHeaderGroups(e,t,n){let i=[];e.forEach(s=>{let r=s;r.getChildren&&r.getChildren().forEach(o=>i.push(o))}),e.length>0&&qt(e[0])&&this.doAddHeaderHeader(t,e,n),i&&i.length>0&&this.recursivelyAddHeaderGroups(i,t,n)}doAddHeaderHeader(e,t,n){let i=e.onNewHeaderGroupingRow(),s=0;t.forEach(r=>{let o=r,a;n?a=n(this.gos.addGridCommonParams({columnGroup:o})):a=this.columnNameService.getDisplayNameForColumnGroup(o,"header");let l=o.getLeafColumns().reduce((c,u,h,f)=>{let p=We(c);return u.getColumnGroupShow()==="open"?(!p||p[1]!=null)&&(p=[h],c.push(p)):p&&p[1]==null&&(p[1]=h-1),h===f.length-1&&p&&p[1]==null&&(p[1]=h),c},[]);i.onColumn(o,a||"",s++,o.getLeafColumns().length-1,l)})}},fI="32.0.2",R2={version:fI,moduleName:"@ag-grid-community/csv-export-core",beans:[ehe,ihe]},she={version:fI,moduleName:"@ag-grid-community/csv-export-api",apiFunctions:{getDataAsCsv:the,exportDataAsCsv:nhe},dependantModules:[R2]},rhe={version:fI,moduleName:"@ag-grid-community/csv-export",dependantModules:[R2,she]};var ohe=e=>x(void 0,null,function*(){let t=0,n=[],i=new WritableStream({write:o=>{n.push(o),t+=o.length}}),s=new ReadableStream({start:o=>{let a=new FileReader;a.onload=l=>{l.target?.result&&o.enqueue(l.target.result),o.close()},a.readAsArrayBuffer(e)}}),r=new window.CompressionStream("deflate-raw");return yield s.pipeThrough(r).pipeTo(i),{size:t,content:new Blob(n)}}),ahe=e=>x(void 0,null,function*(){let t=new Blob([e]),{size:n,content:i}=yield ohe(t),s=new Uint8Array(yield i.arrayBuffer());return{size:n,content:s}}),lhe=e=>{let t=e.getHours();return t<<=6,t=t|e.getMinutes(),t<<=5,t=t|e.getSeconds()/2,t},che=e=>{let t=e.getFullYear()-1980;return t<<=4,t=t|e.getMonth()+1,t<<=5,t=t|e.getDate(),t};function Wn(e,t){let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e&255),e>>>=8;return n}var FG=e=>{if(!e.length)return 0;let t=-1,n=0,i=0,s=0;for(let r=0;r<e.length;r++)n=e[r],i=(t^n)&255,s=uhe[i],t=t>>>8^s;return t^-1},xG=e=>e.length?FG(typeof e=="string"?new TextEncoder().encode(e):e):0,uhe=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),I2=(e,t,n,i,s,r)=>{let{content:o,path:a,created:l}=e,c=lhe(l),u=che(l),h=xG(s),f=r!==void 0?r:i,p=Jte(a),v=p!==a,y="";if(v){let R=Wn(1,1)+Wn(xG(p),4)+p;y="up"+Wn(R.length,2)+R}let C="\0"+(v?"\0\b":"\0\0")+Wn(t?8:0,2)+Wn(c,2)+Wn(u,2)+Wn(f?h:0,4)+Wn(r??i,4)+Wn(i,4)+Wn(p.length,2)+Wn(y.length,2),E="PK"+C+p+y,T="PK\0"+C+"\0\0\0\0\0\0"+(o?"\0\0\0\0":"\0\0\0")+Wn(n,4)+p+y;return{localFileHeader:Uint8Array.from(E,R=>R.charCodeAt(0)),centralDirectoryHeader:Uint8Array.from(T,R=>R.charCodeAt(0))}},A2=e=>{let t;if(typeof e=="string"){let n=atob(e.split(";base64,")[1]);t=Uint8Array.from(n,i=>i.charCodeAt(0))}else t=e;return{size:t.length,content:t}},dhe=(e,t)=>x(void 0,null,function*(){let{content:n}=e,{size:i,content:s}=n?A2(n):{size:0,content:Uint8Array.from([])},r,o,a=!1;if(e.type==="file"&&s&&i>0){let u=yield ahe(s);r=u.content,o=u.size,a=!0}let c=I2(e,a,t,i,s,o);return ae(B({},c),{content:r||s,isCompressed:a})}),hhe=(e,t)=>{let{content:n}=e,{content:i}=n?A2(n):{content:Uint8Array.from([])},s=I2(e,!1,t,i.length,i,void 0);return ae(B({},s),{content:i,isCompressed:!1})},fhe=(e,t,n)=>{let i="PK\0\0\0\0"+Wn(e,2)+Wn(e,2)+Wn(t,4)+Wn(n,4)+"\0\0";return Uint8Array.from(i,s=>s.charCodeAt(0))},M2=class{static addFolders(e){e.forEach(this.addFolder.bind(this))}static addFolder(e){this.folders.push({path:e,created:new Date,isBase64:!1,type:"folder"})}static addFile(e,t,n=!1){this.files.push({path:e,created:new Date,content:n?t:new TextEncoder().encode(t),isBase64:n,type:"file"})}static getZipFile(e="application/zip"){return x(this,null,function*(){let t=yield this.buildCompressedFileStream();return this.clearStream(),new Blob([t],{type:e})})}static getUncompressedZipFile(e="application/zip"){let t=this.buildFileStream();return this.clearStream(),new Blob([t],{type:e})}static clearStream(){this.folders=[],this.files=[]}static packageFiles(e){let t=0,n=0;for(let c of e){let{localFileHeader:u,centralDirectoryHeader:h,content:f}=c;t+=u.length+f.length,n+=h.length}let i=new Uint8Array(t),s=new Uint8Array(n),r=0,o=0;for(let c of e){let{localFileHeader:u,centralDirectoryHeader:h,content:f}=c;i.set(u,r),r+=u.length,i.set(f,r),r+=f.length,s.set(h,o),o+=h.length}let a=fhe(e.length,n,t),l=new Uint8Array(i.length+s.length+a.length);return l.set(i),l.set(s,i.length),l.set(a,i.length+s.length),l}static buildCompressedFileStream(){return x(this,null,function*(){let e=[...this.folders,...this.files],t=[],n=0;for(let i of e){let s=yield dhe(i,n),{localFileHeader:r,content:o}=s;t.push(s),n+=r.length+o.length}return this.packageFiles(t)})}static buildFileStream(){let e=[...this.folders,...this.files],t=[],n=0;for(let i of e){let s=hhe(i,n),{localFileHeader:r,content:o}=s;t.push(s),n+=r.length+o.length}return this.packageFiles(t)}};M2.folders=[];M2.files=[];var phe=class extends dae{wireBeans(e){this.beans=e}constructor(e,t,n){super(e),this.parentCache=t,this.params=n,this.startRow=e*n.blockSize,this.endRow=this.startRow+n.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(e,t,n){q(t)?e.setDataAndId(t,n.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){let e=this.createLoadParams();if(Ve(this.params.datasource.getRows)){j("datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(e,t,n){this.rowNodes.forEach((i,s)=>{this.startRow+s<n&&e(i,t.next())})}getLastAccessed(){return this.lastAccessed}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.next());let n=e-this.startRow;return this.rowNodes[n]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let e=0;e<this.params.blockSize;e++){let t=this.startRow+e,n=new bo(this.beans);n.setRowHeight(this.params.rowHeight),n.uiLevel=0,n.setRowIndex(t),n.setRowTop(this.params.rowHeight*t),this.rowNodes.push(n)}}processServerResult(e){this.rowNodes.forEach((n,i)=>{let s=e.rowData?e.rowData[i]:void 0;!n.id&&n.alreadyRendered&&s&&(this.rowNodes[i]=new bo(this.beans),this.rowNodes[i].setRowIndex(n.rowIndex),this.rowNodes[i].setRowTop(n.rowTop),this.rowNodes[i].setRowHeight(n.rowHeight),n.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[i],s,this.startRow+i)});let t=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,t)}destroy(){this.rowNodes.forEach(e=>{e.clearRowTopAndRowIndex()}),super.destroy()}},ghe=2,mhe=class extends L{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}wireBeans(e){this.rowRenderer=e.rowRenderer,this.focusService=e.focusService}getRow(e,t=!1){let n=Math.floor(e/this.params.blockSize),i=this.blocks[n];if(!i){if(t)return;i=this.createBlock(n)}return i.getRow(e)}createBlock(e){let t=this.createBean(new phe(e,this,this.params));return this.blocks[t.getId()]=t,this.blockCount++,this.purgeBlocksIfNeeded(t),this.params.rowNodeBlockLoader.addBlock(t),t}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(t=>t.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e)),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(this.gos.get("debug")&&ys(`InfiniteCache - onPageLoaded: page = ${e.getId()}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){let t=this.getBlocksInOrder().filter(o=>o!=e),n=(o,a)=>a.getLastAccessed()-o.getLastAccessed();t.sort(n);let i=this.params.maxBlocksInCache>0,s=i?this.params.maxBlocksInCache-1:null,r=ghe-1;t.forEach((o,a)=>{let l=o.getState()==="needsLoading"&&a>=r,c=i?a>=s:!1;if(l||c){if(this.isBlockCurrentlyDisplayed(o)||this.isBlockFocused(o))return;this.removeBlockFromCache(o)}})}isBlockFocused(e){let t=this.focusService.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;let n=e.getStartRow(),i=e.getEndRow();return t.rowIndex>=n&&t.rowIndex<i}isBlockCurrentlyDisplayed(e){let t=e.getStartRow(),n=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(t,n)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){let i=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<i&&(this.rowCount=i)}}setRowCount(e,t){this.rowCount=e,q(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){let t=new md;this.getBlocksInOrder().forEach(n=>n.forEachNode(e,t,this.rowCount))}getBlocksInOrder(){let e=(n,i)=>n.getId()-i.getId();return Pa(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();let e={type:"storeUpdated"};this.eventService.dispatchEvent(e)}}destroyAllBlocksPastVirtualRowCount(){let e=[];this.getBlocksInOrder().forEach(t=>{t.getId()*this.params.blockSize>=this.rowCount&&e.push(t)}),e.length>0&&e.forEach(t=>this.destroyBlock(t))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){let n=[],i=-1,s=!1,r=new md,o=!1;return this.getBlocksInOrder().forEach(l=>{if(!o){if(s&&i+1!==l.getId()){o=!0;return}i=l.getId(),l.forEachNode(c=>{let u=c===e||c===t;(s||u)&&n.push(c),u&&(s=!s)},r,this.rowCount)}}),o||s?[]:n}},vhe=class extends L{constructor(){super(...arguments),this.beanName="rowModel"}wireBeans(e){this.filterManager=e.filterManager,this.sortController=e.sortController,this.selectionService=e.selectionService,this.rowRenderer=e.rowRenderer,this.rowNodeBlockLoader=e.rowNodeBlockLoader}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){this.gos.isRowModelType("infinite")&&(this.rowHeight=this.gos.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&j("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.onCacheUpdated.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=this.gos.getRowHeightAsNumber(),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let e;this.cacheParams?e=this.isSortModelDifferent():e=!0,e&&this.reset()}isSortModelDifferent(){return!Ay(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,t):[]}reset(){if(!this.datasource)return;this.gos.getRowIdCallback()!=null||this.selectionService.reset("rowDataChanged"),this.resetCache()}createModelUpdatedEvent(){return{type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1}}resetCache(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager?.getFilterModel()??{},sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:this.gos.getRowHeightAsNumber(),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new md},this.infiniteCache=this.createBean(new mhe(this.cacheParams)),this.eventService.dispatchEventOnce({type:"rowCountReady"});let e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}updateRowHeights(){this.forEachNode(t=>{t.setRowHeight(this.rowHeight),t.setRowTop(this.rowHeight*t.rowIndex)});let e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){let e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}getRow(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)}getRowNode(e){let t;return this.forEachNode(n=>{n.id===e&&(t=n)}),t}forEachNode(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){let t=Math.floor(e/this.rowHeight),n=this.getRowCount()-1;return t>n?n:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(e,t){this.infiniteCache&&this.infiniteCache.setRowCount(e,t)}};function Che(e){e.rowModelHelperService?.getInfiniteRowModel()?.refreshCache()}function yhe(e){e.rowModelHelperService?.getInfiniteRowModel()?.purgeCache()}function whe(e){return e.rowModelHelperService?.getInfiniteRowModel()?.getRowCount()}function She(e){return e.rowModelHelperService?.getInfiniteRowModel()?.isLastRowIndexKnown()}var pI="32.0.2",P2={version:pI,moduleName:"@ag-grid-community/infinite-row-model-core",rowModel:"infinite",beans:[vhe],dependantModules:[fae]},_he={version:pI,moduleName:"@ag-grid-community/infinite-row-model-api",beans:[E2],apiFunctions:{refreshInfiniteCache:Che,purgeInfiniteCache:yhe,getInfiniteRowCount:whe,isLastRowIndexKnown:She},dependantModules:[P2,Ide]},bhe={version:pI,moduleName:"@ag-grid-community/infinite-row-model",dependantModules:[P2,_he]};ai.__registerModules([C2,Qde,bhe,rhe],!1,void 0);var F2=(()=>{let t=class t extends D2{setViewContainerRef(i,s){this.viewContainerRef=i,this.angularFrameworkOverrides=s}createWrapper(i){let s=this.angularFrameworkOverrides,r=this;class o extends gI{init(c){s.runInsideAngular(()=>{super.init(c),this._componentRef.changeDetectorRef.detectChanges()})}createComponent(){return s.runInsideAngular(()=>r.createComponent(i))}hasMethod(c){return a.getFrameworkComponentInstance()[c]!=null}callMethod(c,u){let h=this.getFrameworkComponentInstance();return s.runInsideAngular(()=>a.getFrameworkComponentInstance()[c].apply(h,u))}addMethod(c,u){a[c]=u}}let a=new o;return a}createComponent(i){return this.viewContainerRef.createComponent(i)}};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=is(t)))(r||t)}})(),t.\u0275prov=Y({token:t,factory:t.\u0275fac});let e=t;return e})(),gI=class{init(t){this._params=t,this._componentRef=this.createComponent(),this._agAwareComponent=this._componentRef.instance,this._frameworkComponentInstance=this._componentRef.instance,this._eGui=this._componentRef.location.nativeElement,ws(this._eGui),this._agAwareComponent.agInit(this._params)}getGui(){return this._eGui}getRootElement(){return this._eGui.firstChild}destroy(){this._frameworkComponentInstance&&typeof this._frameworkComponentInstance.destroy=="function"&&this._frameworkComponentInstance.destroy(),this._componentRef&&this._componentRef.destroy()}getFrameworkComponentInstance(){return this._frameworkComponentInstance}},x2=(()=>{let t=class t extends cI{constructor(i){super("angular"),this._ngZone=i,this.isRunningWithinTestZone=!1,this.wrapIncoming=(s,r)=>this.runOutside(s,r),this.wrapOutgoing=s=>this.runInsideAngular(s),this.isRunningWithinTestZone=window?.AG_GRID_UNDER_TEST??!!window?.Zone?.AsyncTestZoneSpec,this._ngZone?this.isRunningWithinTestZone?this.runOutside=(s,r)=>r==="resize-observer"||r==="popupPositioning"?this._ngZone.runOutsideAngular(s):s():this.runOutside=s=>this._ngZone.runOutsideAngular(s):this.runOutside=s=>s()}get shouldWrapOutgoing(){return this._ngZone&&de.isInAngularZone()}isFrameworkComponent(i){if(!i)return!1;let s=i.prototype;return s&&"agInit"in s}runInsideAngular(i){return this._ngZone?this._ngZone.run(i):i()}runOutsideAngular(i,s){return this.runOutside(i,s)}};t.\u0275fac=function(s){return new(s||t)(Z(de))},t.\u0275prov=Y({token:t,factory:t.\u0275fac});let e=t;return e})(),O2=(()=>{let t=class t{constructor(i,s,r,o){this.viewContainerRef=s,this.angularFrameworkOverrides=r,this.frameworkComponentWrapper=o,this._initialised=!1,this._destroyed=!1,this._fullyReady=new Promise(a=>{this._resolveFullyReady=a}),this.statusBar=void 0,this.sideBar=void 0,this.suppressContextMenu=void 0,this.preventDefaultOnContextMenu=void 0,this.allowContextMenuWithControlKey=void 0,this.columnMenu=void 0,this.suppressMenuHide=void 0,this.enableBrowserTooltips=void 0,this.tooltipTrigger=void 0,this.tooltipShowDelay=void 0,this.tooltipHideDelay=void 0,this.tooltipMouseTrack=void 0,this.tooltipShowMode=void 0,this.tooltipInteraction=void 0,this.popupParent=void 0,this.copyHeadersToClipboard=void 0,this.copyGroupHeadersToClipboard=void 0,this.clipboardDelimiter=void 0,this.suppressCopyRowsToClipboard=void 0,this.suppressCopySingleCellRanges=void 0,this.suppressLastEmptyLineOnPaste=void 0,this.suppressClipboardPaste=void 0,this.suppressClipboardApi=void 0,this.suppressCutToClipboard=void 0,this.columnDefs=void 0,this.defaultColDef=void 0,this.defaultColGroupDef=void 0,this.columnTypes=void 0,this.dataTypeDefinitions=void 0,this.maintainColumnOrder=void 0,this.suppressFieldDotNotation=void 0,this.headerHeight=void 0,this.groupHeaderHeight=void 0,this.floatingFiltersHeight=void 0,this.pivotHeaderHeight=void 0,this.pivotGroupHeaderHeight=void 0,this.allowDragFromColumnsToolPanel=void 0,this.suppressMovableColumns=void 0,this.suppressColumnMoveAnimation=void 0,this.suppressDragLeaveHidesColumns=void 0,this.suppressRowGroupHidesColumns=void 0,this.colResizeDefault=void 0,this.suppressAutoSize=void 0,this.autoSizePadding=void 0,this.skipHeaderOnAutoSize=void 0,this.autoSizeStrategy=void 0,this.components=void 0,this.editType=void 0,this.singleClickEdit=void 0,this.suppressClickEdit=void 0,this.readOnlyEdit=void 0,this.stopEditingWhenCellsLoseFocus=void 0,this.enterNavigatesVertically=void 0,this.enterNavigatesVerticallyAfterEdit=void 0,this.enableCellEditingOnBackspace=void 0,this.undoRedoCellEditing=void 0,this.undoRedoCellEditingLimit=void 0,this.defaultCsvExportParams=void 0,this.suppressCsvExport=void 0,this.defaultExcelExportParams=void 0,this.suppressExcelExport=void 0,this.excelStyles=void 0,this.quickFilterText=void 0,this.cacheQuickFilter=void 0,this.includeHiddenColumnsInQuickFilter=void 0,this.quickFilterParser=void 0,this.quickFilterMatcher=void 0,this.applyQuickFilterBeforePivotOrAgg=void 0,this.excludeChildrenWhenTreeDataFiltering=void 0,this.enableAdvancedFilter=void 0,this.advancedFilterModel=void 0,this.includeHiddenColumnsInAdvancedFilter=void 0,this.advancedFilterParent=void 0,this.advancedFilterBuilderParams=void 0,this.suppressAdvancedFilterEval=void 0,this.enableCharts=void 0,this.chartThemes=void 0,this.customChartThemes=void 0,this.chartThemeOverrides=void 0,this.chartToolPanelsDef=void 0,this.chartMenuItems=void 0,this.loadingCellRenderer=void 0,this.loadingCellRendererParams=void 0,this.loadingCellRendererSelector=void 0,this.localeText=void 0,this.masterDetail=void 0,this.keepDetailRows=void 0,this.keepDetailRowsCount=void 0,this.detailCellRenderer=void 0,this.detailCellRendererParams=void 0,this.detailRowHeight=void 0,this.detailRowAutoHeight=void 0,this.context=void 0,this.alignedGrids=void 0,this.tabIndex=void 0,this.rowBuffer=void 0,this.valueCache=void 0,this.valueCacheNeverExpires=void 0,this.enableCellExpressions=void 0,this.suppressTouch=void 0,this.suppressFocusAfterRefresh=void 0,this.suppressAsyncEvents=void 0,this.suppressBrowserResizeObserver=void 0,this.suppressPropertyNamesCheck=void 0,this.suppressChangeDetection=void 0,this.debug=void 0,this.loading=void 0,this.overlayLoadingTemplate=void 0,this.loadingOverlayComponent=void 0,this.loadingOverlayComponentParams=void 0,this.suppressLoadingOverlay=void 0,this.overlayNoRowsTemplate=void 0,this.noRowsOverlayComponent=void 0,this.noRowsOverlayComponentParams=void 0,this.suppressNoRowsOverlay=void 0,this.pagination=void 0,this.paginationPageSize=void 0,this.paginationPageSizeSelector=void 0,this.paginationAutoPageSize=void 0,this.paginateChildRows=void 0,this.suppressPaginationPanel=void 0,this.pivotMode=void 0,this.pivotPanelShow=void 0,this.pivotMaxGeneratedColumns=void 0,this.pivotDefaultExpanded=void 0,this.pivotColumnGroupTotals=void 0,this.pivotRowTotals=void 0,this.pivotSuppressAutoColumn=void 0,this.suppressExpandablePivotGroups=void 0,this.functionsReadOnly=void 0,this.aggFuncs=void 0,this.suppressAggFuncInHeader=void 0,this.alwaysAggregateAtRootLevel=void 0,this.aggregateOnlyChangedColumns=void 0,this.suppressAggFilteredOnly=void 0,this.removePivotHeaderRowWhenSingleValueColumn=void 0,this.animateRows=void 0,this.enableCellChangeFlash=void 0,this.cellFlashDuration=void 0,this.cellFlashDelay=void 0,this.cellFadeDuration=void 0,this.cellFadeDelay=void 0,this.allowShowChangeAfterFilter=void 0,this.domLayout=void 0,this.ensureDomOrder=void 0,this.enableRtl=void 0,this.suppressColumnVirtualisation=void 0,this.suppressMaxRenderedRowRestriction=void 0,this.suppressRowVirtualisation=void 0,this.rowDragManaged=void 0,this.suppressRowDrag=void 0,this.suppressMoveWhenRowDragging=void 0,this.rowDragEntireRow=void 0,this.rowDragMultiRow=void 0,this.rowDragText=void 0,this.fullWidthCellRenderer=void 0,this.fullWidthCellRendererParams=void 0,this.embedFullWidthRows=void 0,this.suppressGroupMaintainValueType=void 0,this.groupDisplayType=void 0,this.groupDefaultExpanded=void 0,this.autoGroupColumnDef=void 0,this.groupMaintainOrder=void 0,this.groupSelectsChildren=void 0,this.groupLockGroupColumns=void 0,this.groupAggFiltering=void 0,this.groupIncludeFooter=void 0,this.groupIncludeTotalFooter=void 0,this.groupTotalRow=void 0,this.grandTotalRow=void 0,this.suppressStickyTotalRow=void 0,this.groupSuppressBlankHeader=void 0,this.groupSelectsFiltered=void 0,this.showOpenedGroup=void 0,this.groupRemoveSingleChildren=void 0,this.groupRemoveLowestSingleChildren=void 0,this.groupHideOpenParents=void 0,this.groupAllowUnbalanced=void 0,this.rowGroupPanelShow=void 0,this.groupRowRenderer=void 0,this.groupRowRendererParams=void 0,this.suppressMakeColumnVisibleAfterUnGroup=void 0,this.treeData=void 0,this.rowGroupPanelSuppressSort=void 0,this.suppressGroupRowsSticky=void 0,this.pinnedTopRowData=void 0,this.pinnedBottomRowData=void 0,this.rowModelType=void 0,this.rowData=void 0,this.asyncTransactionWaitMillis=void 0,this.suppressModelUpdateAfterUpdateTransaction=void 0,this.datasource=void 0,this.cacheOverflowSize=void 0,this.infiniteInitialRowCount=void 0,this.serverSideInitialRowCount=void 0,this.suppressServerSideInfiniteScroll=void 0,this.suppressServerSideFullWidthLoadingRow=void 0,this.cacheBlockSize=void 0,this.maxBlocksInCache=void 0,this.maxConcurrentDatasourceRequests=void 0,this.blockLoadDebounceMillis=void 0,this.purgeClosedRowNodes=void 0,this.serverSideDatasource=void 0,this.serverSideSortAllLevels=void 0,this.serverSideEnableClientSideSort=void 0,this.serverSideOnlyRefreshFilteredGroups=void 0,this.serverSideSortOnServer=void 0,this.serverSideFilterOnServer=void 0,this.serverSidePivotResultFieldSeparator=void 0,this.viewportDatasource=void 0,this.viewportRowModelPageSize=void 0,this.viewportRowModelBufferSize=void 0,this.alwaysShowHorizontalScroll=void 0,this.alwaysShowVerticalScroll=void 0,this.debounceVerticalScrollbar=void 0,this.suppressHorizontalScroll=void 0,this.suppressScrollOnNewData=void 0,this.suppressScrollWhenPopupsAreOpen=void 0,this.suppressAnimationFrame=void 0,this.suppressMiddleClickScrolls=void 0,this.suppressPreventDefaultOnMouseWheel=void 0,this.scrollbarWidth=void 0,this.rowSelection=void 0,this.rowMultiSelectWithClick=void 0,this.suppressRowDeselection=void 0,this.suppressRowClickSelection=void 0,this.suppressCellFocus=void 0,this.suppressHeaderFocus=void 0,this.suppressMultiRangeSelection=void 0,this.enableCellTextSelection=void 0,this.enableRangeSelection=void 0,this.enableRangeHandle=void 0,this.enableFillHandle=void 0,this.fillHandleDirection=void 0,this.suppressClearOnFillReduction=void 0,this.sortingOrder=void 0,this.accentedSort=void 0,this.unSortIcon=void 0,this.suppressMultiSort=void 0,this.alwaysMultiSort=void 0,this.multiSortKey=void 0,this.suppressMaintainUnsortedOrder=void 0,this.icons=void 0,this.rowHeight=void 0,this.rowStyle=void 0,this.rowClass=void 0,this.rowClassRules=void 0,this.suppressRowHoverHighlight=void 0,this.suppressRowTransform=void 0,this.columnHoverHighlight=void 0,this.gridId=void 0,this.deltaSort=void 0,this.treeDataDisplayType=void 0,this.enableGroupEdit=void 0,this.initialState=void 0,this.getContextMenuItems=void 0,this.getMainMenuItems=void 0,this.postProcessPopup=void 0,this.processUnpinnedColumns=void 0,this.processCellForClipboard=void 0,this.processHeaderForClipboard=void 0,this.processGroupHeaderForClipboard=void 0,this.processCellFromClipboard=void 0,this.sendToClipboard=void 0,this.processDataFromClipboard=void 0,this.isExternalFilterPresent=void 0,this.doesExternalFilterPass=void 0,this.getChartToolbarItems=void 0,this.createChartContainer=void 0,this.focusGridInnerElement=void 0,this.navigateToNextHeader=void 0,this.tabToNextHeader=void 0,this.navigateToNextCell=void 0,this.tabToNextCell=void 0,this.getLocaleText=void 0,this.getDocument=void 0,this.paginationNumberFormatter=void 0,this.getGroupRowAgg=void 0,this.isGroupOpenByDefault=void 0,this.initialGroupOrderComparator=void 0,this.processPivotResultColDef=void 0,this.processPivotResultColGroupDef=void 0,this.getDataPath=void 0,this.getChildCount=void 0,this.getServerSideGroupLevelParams=void 0,this.isServerSideGroupOpenByDefault=void 0,this.isApplyServerSideTransaction=void 0,this.isServerSideGroup=void 0,this.getServerSideGroupKey=void 0,this.getBusinessKeyForNode=void 0,this.getRowId=void 0,this.resetRowDataOnUpdate=void 0,this.processRowPostCreate=void 0,this.isRowSelectable=void 0,this.isRowMaster=void 0,this.fillOperation=void 0,this.postSortRows=void 0,this.getRowStyle=void 0,this.getRowClass=void 0,this.getRowHeight=void 0,this.isFullWidthRow=void 0,this.toolPanelVisibleChanged=new W,this.toolPanelSizeChanged=new W,this.columnMenuVisibleChanged=new W,this.contextMenuVisibleChanged=new W,this.cutStart=new W,this.cutEnd=new W,this.pasteStart=new W,this.pasteEnd=new W,this.columnVisible=new W,this.columnPinned=new W,this.columnResized=new W,this.columnMoved=new W,this.columnValueChanged=new W,this.columnPivotModeChanged=new W,this.columnPivotChanged=new W,this.columnGroupOpened=new W,this.newColumnsLoaded=new W,this.gridColumnsChanged=new W,this.displayedColumnsChanged=new W,this.virtualColumnsChanged=new W,this.columnEverythingChanged=new W,this.columnHeaderMouseOver=new W,this.columnHeaderMouseLeave=new W,this.columnHeaderClicked=new W,this.columnHeaderContextMenu=new W,this.componentStateChanged=new W,this.cellValueChanged=new W,this.cellEditRequest=new W,this.rowValueChanged=new W,this.cellEditingStarted=new W,this.cellEditingStopped=new W,this.rowEditingStarted=new W,this.rowEditingStopped=new W,this.undoStarted=new W,this.undoEnded=new W,this.redoStarted=new W,this.redoEnded=new W,this.rangeDeleteStart=new W,this.rangeDeleteEnd=new W,this.fillStart=new W,this.fillEnd=new W,this.filterOpened=new W,this.filterChanged=new W,this.filterModified=new W,this.advancedFilterBuilderVisibleChanged=new W,this.chartCreated=new W,this.chartRangeSelectionChanged=new W,this.chartOptionsChanged=new W,this.chartDestroyed=new W,this.cellKeyDown=new W,this.gridReady=new W,this.firstDataRendered=new W,this.gridSizeChanged=new W,this.modelUpdated=new W,this.virtualRowRemoved=new W,this.viewportChanged=new W,this.bodyScroll=new W,this.bodyScrollEnd=new W,this.dragStarted=new W,this.dragStopped=new W,this.stateUpdated=new W,this.paginationChanged=new W,this.rowDragEnter=new W,this.rowDragMove=new W,this.rowDragLeave=new W,this.rowDragEnd=new W,this.columnRowGroupChanged=new W,this.rowGroupOpened=new W,this.expandOrCollapseAll=new W,this.pivotMaxColumnsExceeded=new W,this.pinnedRowDataChanged=new W,this.rowDataUpdated=new W,this.asyncTransactionsFlushed=new W,this.storeRefreshed=new W,this.headerFocused=new W,this.cellClicked=new W,this.cellDoubleClicked=new W,this.cellFocused=new W,this.cellMouseOver=new W,this.cellMouseOut=new W,this.cellMouseDown=new W,this.rowClicked=new W,this.rowDoubleClicked=new W,this.rowSelected=new W,this.selectionChanged=new W,this.cellContextMenu=new W,this.rangeSelectionChanged=new W,this.tooltipShow=new W,this.tooltipHide=new W,this.sortChanged=new W,this._nativeElement=i.nativeElement}ngAfterViewInit(){this.angularFrameworkOverrides.runOutsideAngular(()=>{this.frameworkComponentWrapper.setViewContainerRef(this.viewContainerRef,this.angularFrameworkOverrides);let i=$G(this.gridOptions,this);this.gridParams={globalEventListener:this.globalEventListener.bind(this),frameworkOverrides:this.angularFrameworkOverrides,providedBeanInstances:{frameworkComponentWrapper:this.frameworkComponentWrapper},modules:this.modules||[]};let s=b2(this._nativeElement,i,this.gridParams);s&&(this.api=s),this._initialised=!0,this._resolveFullyReady()})}ngOnChanges(i){this._initialised&&this.angularFrameworkOverrides.runOutsideAngular(()=>{let s={};Object.entries(i).forEach(([r,o])=>{s[r]=o.currentValue}),qG(s,this.api)})}ngOnDestroy(){this._initialised&&(this._destroyed=!0,this.api?.destroy())}isEmitterUsed(i){let r=this[i],o=r?.observed??r?.observers?.length>0,a=`on${i.charAt(0).toUpperCase()}${i.substring(1)}`,l=!!this.gridOptions&&!!this.gridOptions[a];return o||l}globalEventListener(i,s){if(this._destroyed)return;let r=this[i];if(r&&this.isEmitterUsed(i)){let o=()=>this.angularFrameworkOverrides.runInsideAngular(()=>r.emit(s));i==="gridReady"?this._fullyReady.then(()=>o()):o()}}};t.\u0275fac=function(s){return new(s||t)(Q(Lt),Q(Bi),Q(x2),Q(F2))},t.\u0275cmp=_e({type:t,selectors:[["ag-grid-angular"]],inputs:{gridOptions:"gridOptions",modules:"modules",statusBar:"statusBar",sideBar:"sideBar",suppressContextMenu:"suppressContextMenu",preventDefaultOnContextMenu:"preventDefaultOnContextMenu",allowContextMenuWithControlKey:"allowContextMenuWithControlKey",columnMenu:"columnMenu",suppressMenuHide:"suppressMenuHide",enableBrowserTooltips:"enableBrowserTooltips",tooltipTrigger:"tooltipTrigger",tooltipShowDelay:"tooltipShowDelay",tooltipHideDelay:"tooltipHideDelay",tooltipMouseTrack:"tooltipMouseTrack",tooltipShowMode:"tooltipShowMode",tooltipInteraction:"tooltipInteraction",popupParent:"popupParent",copyHeadersToClipboard:"copyHeadersToClipboard",copyGroupHeadersToClipboard:"copyGroupHeadersToClipboard",clipboardDelimiter:"clipboardDelimiter",suppressCopyRowsToClipboard:"suppressCopyRowsToClipboard",suppressCopySingleCellRanges:"suppressCopySingleCellRanges",suppressLastEmptyLineOnPaste:"suppressLastEmptyLineOnPaste",suppressClipboardPaste:"suppressClipboardPaste",suppressClipboardApi:"suppressClipboardApi",suppressCutToClipboard:"suppressCutToClipboard",columnDefs:"columnDefs",defaultColDef:"defaultColDef",defaultColGroupDef:"defaultColGroupDef",columnTypes:"columnTypes",dataTypeDefinitions:"dataTypeDefinitions",maintainColumnOrder:"maintainColumnOrder",suppressFieldDotNotation:"suppressFieldDotNotation",headerHeight:"headerHeight",groupHeaderHeight:"groupHeaderHeight",floatingFiltersHeight:"floatingFiltersHeight",pivotHeaderHeight:"pivotHeaderHeight",pivotGroupHeaderHeight:"pivotGroupHeaderHeight",allowDragFromColumnsToolPanel:"allowDragFromColumnsToolPanel",suppressMovableColumns:"suppressMovableColumns",suppressColumnMoveAnimation:"suppressColumnMoveAnimation",suppressDragLeaveHidesColumns:"suppressDragLeaveHidesColumns",suppressRowGroupHidesColumns:"suppressRowGroupHidesColumns",colResizeDefault:"colResizeDefault",suppressAutoSize:"suppressAutoSize",autoSizePadding:"autoSizePadding",skipHeaderOnAutoSize:"skipHeaderOnAutoSize",autoSizeStrategy:"autoSizeStrategy",components:"components",editType:"editType",singleClickEdit:"singleClickEdit",suppressClickEdit:"suppressClickEdit",readOnlyEdit:"readOnlyEdit",stopEditingWhenCellsLoseFocus:"stopEditingWhenCellsLoseFocus",enterNavigatesVertically:"enterNavigatesVertically",enterNavigatesVerticallyAfterEdit:"enterNavigatesVerticallyAfterEdit",enableCellEditingOnBackspace:"enableCellEditingOnBackspace",undoRedoCellEditing:"undoRedoCellEditing",undoRedoCellEditingLimit:"undoRedoCellEditingLimit",defaultCsvExportParams:"defaultCsvExportParams",suppressCsvExport:"suppressCsvExport",defaultExcelExportParams:"defaultExcelExportParams",suppressExcelExport:"suppressExcelExport",excelStyles:"excelStyles",quickFilterText:"quickFilterText",cacheQuickFilter:"cacheQuickFilter",includeHiddenColumnsInQuickFilter:"includeHiddenColumnsInQuickFilter",quickFilterParser:"quickFilterParser",quickFilterMatcher:"quickFilterMatcher",applyQuickFilterBeforePivotOrAgg:"applyQuickFilterBeforePivotOrAgg",excludeChildrenWhenTreeDataFiltering:"excludeChildrenWhenTreeDataFiltering",enableAdvancedFilter:"enableAdvancedFilter",advancedFilterModel:"advancedFilterModel",includeHiddenColumnsInAdvancedFilter:"includeHiddenColumnsInAdvancedFilter",advancedFilterParent:"advancedFilterParent",advancedFilterBuilderParams:"advancedFilterBuilderParams",suppressAdvancedFilterEval:"suppressAdvancedFilterEval",enableCharts:"enableCharts",chartThemes:"chartThemes",customChartThemes:"customChartThemes",chartThemeOverrides:"chartThemeOverrides",chartToolPanelsDef:"chartToolPanelsDef",chartMenuItems:"chartMenuItems",loadingCellRenderer:"loadingCellRenderer",loadingCellRendererParams:"loadingCellRendererParams",loadingCellRendererSelector:"loadingCellRendererSelector",localeText:"localeText",masterDetail:"masterDetail",keepDetailRows:"keepDetailRows",keepDetailRowsCount:"keepDetailRowsCount",detailCellRenderer:"detailCellRenderer",detailCellRendererParams:"detailCellRendererParams",detailRowHeight:"detailRowHeight",detailRowAutoHeight:"detailRowAutoHeight",context:"context",alignedGrids:"alignedGrids",tabIndex:"tabIndex",rowBuffer:"rowBuffer",valueCache:"valueCache",valueCacheNeverExpires:"valueCacheNeverExpires",enableCellExpressions:"enableCellExpressions",suppressTouch:"suppressTouch",suppressFocusAfterRefresh:"suppressFocusAfterRefresh",suppressAsyncEvents:"suppressAsyncEvents",suppressBrowserResizeObserver:"suppressBrowserResizeObserver",suppressPropertyNamesCheck:"suppressPropertyNamesCheck",suppressChangeDetection:"suppressChangeDetection",debug:"debug",loading:"loading",overlayLoadingTemplate:"overlayLoadingTemplate",loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentParams:"loadingOverlayComponentParams",suppressLoadingOverlay:"suppressLoadingOverlay",overlayNoRowsTemplate:"overlayNoRowsTemplate",noRowsOverlayComponent:"noRowsOverlayComponent",noRowsOverlayComponentParams:"noRowsOverlayComponentParams",suppressNoRowsOverlay:"suppressNoRowsOverlay",pagination:"pagination",paginationPageSize:"paginationPageSize",paginationPageSizeSelector:"paginationPageSizeSelector",paginationAutoPageSize:"paginationAutoPageSize",paginateChildRows:"paginateChildRows",suppressPaginationPanel:"suppressPaginationPanel",pivotMode:"pivotMode",pivotPanelShow:"pivotPanelShow",pivotMaxGeneratedColumns:"pivotMaxGeneratedColumns",pivotDefaultExpanded:"pivotDefaultExpanded",pivotColumnGroupTotals:"pivotColumnGroupTotals",pivotRowTotals:"pivotRowTotals",pivotSuppressAutoColumn:"pivotSuppressAutoColumn",suppressExpandablePivotGroups:"suppressExpandablePivotGroups",functionsReadOnly:"functionsReadOnly",aggFuncs:"aggFuncs",suppressAggFuncInHeader:"suppressAggFuncInHeader",alwaysAggregateAtRootLevel:"alwaysAggregateAtRootLevel",aggregateOnlyChangedColumns:"aggregateOnlyChangedColumns",suppressAggFilteredOnly:"suppressAggFilteredOnly",removePivotHeaderRowWhenSingleValueColumn:"removePivotHeaderRowWhenSingleValueColumn",animateRows:"animateRows",enableCellChangeFlash:"enableCellChangeFlash",cellFlashDuration:"cellFlashDuration",cellFlashDelay:"cellFlashDelay",cellFadeDuration:"cellFadeDuration",cellFadeDelay:"cellFadeDelay",allowShowChangeAfterFilter:"allowShowChangeAfterFilter",domLayout:"domLayout",ensureDomOrder:"ensureDomOrder",enableRtl:"enableRtl",suppressColumnVirtualisation:"suppressColumnVirtualisation",suppressMaxRenderedRowRestriction:"suppressMaxRenderedRowRestriction",suppressRowVirtualisation:"suppressRowVirtualisation",rowDragManaged:"rowDragManaged",suppressRowDrag:"suppressRowDrag",suppressMoveWhenRowDragging:"suppressMoveWhenRowDragging",rowDragEntireRow:"rowDragEntireRow",rowDragMultiRow:"rowDragMultiRow",rowDragText:"rowDragText",fullWidthCellRenderer:"fullWidthCellRenderer",fullWidthCellRendererParams:"fullWidthCellRendererParams",embedFullWidthRows:"embedFullWidthRows",suppressGroupMaintainValueType:"suppressGroupMaintainValueType",groupDisplayType:"groupDisplayType",groupDefaultExpanded:"groupDefaultExpanded",autoGroupColumnDef:"autoGroupColumnDef",groupMaintainOrder:"groupMaintainOrder",groupSelectsChildren:"groupSelectsChildren",groupLockGroupColumns:"groupLockGroupColumns",groupAggFiltering:"groupAggFiltering",groupIncludeFooter:"groupIncludeFooter",groupIncludeTotalFooter:"groupIncludeTotalFooter",groupTotalRow:"groupTotalRow",grandTotalRow:"grandTotalRow",suppressStickyTotalRow:"suppressStickyTotalRow",groupSuppressBlankHeader:"groupSuppressBlankHeader",groupSelectsFiltered:"groupSelectsFiltered",showOpenedGroup:"showOpenedGroup",groupRemoveSingleChildren:"groupRemoveSingleChildren",groupRemoveLowestSingleChildren:"groupRemoveLowestSingleChildren",groupHideOpenParents:"groupHideOpenParents",groupAllowUnbalanced:"groupAllowUnbalanced",rowGroupPanelShow:"rowGroupPanelShow",groupRowRenderer:"groupRowRenderer",groupRowRendererParams:"groupRowRendererParams",suppressMakeColumnVisibleAfterUnGroup:"suppressMakeColumnVisibleAfterUnGroup",treeData:"treeData",rowGroupPanelSuppressSort:"rowGroupPanelSuppressSort",suppressGroupRowsSticky:"suppressGroupRowsSticky",pinnedTopRowData:"pinnedTopRowData",pinnedBottomRowData:"pinnedBottomRowData",rowModelType:"rowModelType",rowData:"rowData",asyncTransactionWaitMillis:"asyncTransactionWaitMillis",suppressModelUpdateAfterUpdateTransaction:"suppressModelUpdateAfterUpdateTransaction",datasource:"datasource",cacheOverflowSize:"cacheOverflowSize",infiniteInitialRowCount:"infiniteInitialRowCount",serverSideInitialRowCount:"serverSideInitialRowCount",suppressServerSideInfiniteScroll:"suppressServerSideInfiniteScroll",suppressServerSideFullWidthLoadingRow:"suppressServerSideFullWidthLoadingRow",cacheBlockSize:"cacheBlockSize",maxBlocksInCache:"maxBlocksInCache",maxConcurrentDatasourceRequests:"maxConcurrentDatasourceRequests",blockLoadDebounceMillis:"blockLoadDebounceMillis",purgeClosedRowNodes:"purgeClosedRowNodes",serverSideDatasource:"serverSideDatasource",serverSideSortAllLevels:"serverSideSortAllLevels",serverSideEnableClientSideSort:"serverSideEnableClientSideSort",serverSideOnlyRefreshFilteredGroups:"serverSideOnlyRefreshFilteredGroups",serverSideSortOnServer:"serverSideSortOnServer",serverSideFilterOnServer:"serverSideFilterOnServer",serverSidePivotResultFieldSeparator:"serverSidePivotResultFieldSeparator",viewportDatasource:"viewportDatasource",viewportRowModelPageSize:"viewportRowModelPageSize",viewportRowModelBufferSize:"viewportRowModelBufferSize",alwaysShowHorizontalScroll:"alwaysShowHorizontalScroll",alwaysShowVerticalScroll:"alwaysShowVerticalScroll",debounceVerticalScrollbar:"debounceVerticalScrollbar",suppressHorizontalScroll:"suppressHorizontalScroll",suppressScrollOnNewData:"suppressScrollOnNewData",suppressScrollWhenPopupsAreOpen:"suppressScrollWhenPopupsAreOpen",suppressAnimationFrame:"suppressAnimationFrame",suppressMiddleClickScrolls:"suppressMiddleClickScrolls",suppressPreventDefaultOnMouseWheel:"suppressPreventDefaultOnMouseWheel",scrollbarWidth:"scrollbarWidth",rowSelection:"rowSelection",rowMultiSelectWithClick:"rowMultiSelectWithClick",suppressRowDeselection:"suppressRowDeselection",suppressRowClickSelection:"suppressRowClickSelection",suppressCellFocus:"suppressCellFocus",suppressHeaderFocus:"suppressHeaderFocus",suppressMultiRangeSelection:"suppressMultiRangeSelection",enableCellTextSelection:"enableCellTextSelection",enableRangeSelection:"enableRangeSelection",enableRangeHandle:"enableRangeHandle",enableFillHandle:"enableFillHandle",fillHandleDirection:"fillHandleDirection",suppressClearOnFillReduction:"suppressClearOnFillReduction",sortingOrder:"sortingOrder",accentedSort:"accentedSort",unSortIcon:"unSortIcon",suppressMultiSort:"suppressMultiSort",alwaysMultiSort:"alwaysMultiSort",multiSortKey:"multiSortKey",suppressMaintainUnsortedOrder:"suppressMaintainUnsortedOrder",icons:"icons",rowHeight:"rowHeight",rowStyle:"rowStyle",rowClass:"rowClass",rowClassRules:"rowClassRules",suppressRowHoverHighlight:"suppressRowHoverHighlight",suppressRowTransform:"suppressRowTransform",columnHoverHighlight:"columnHoverHighlight",gridId:"gridId",deltaSort:"deltaSort",treeDataDisplayType:"treeDataDisplayType",enableGroupEdit:"enableGroupEdit",initialState:"initialState",getContextMenuItems:"getContextMenuItems",getMainMenuItems:"getMainMenuItems",postProcessPopup:"postProcessPopup",processUnpinnedColumns:"processUnpinnedColumns",processCellForClipboard:"processCellForClipboard",processHeaderForClipboard:"processHeaderForClipboard",processGroupHeaderForClipboard:"processGroupHeaderForClipboard",processCellFromClipboard:"processCellFromClipboard",sendToClipboard:"sendToClipboard",processDataFromClipboard:"processDataFromClipboard",isExternalFilterPresent:"isExternalFilterPresent",doesExternalFilterPass:"doesExternalFilterPass",getChartToolbarItems:"getChartToolbarItems",createChartContainer:"createChartContainer",focusGridInnerElement:"focusGridInnerElement",navigateToNextHeader:"navigateToNextHeader",tabToNextHeader:"tabToNextHeader",navigateToNextCell:"navigateToNextCell",tabToNextCell:"tabToNextCell",getLocaleText:"getLocaleText",getDocument:"getDocument",paginationNumberFormatter:"paginationNumberFormatter",getGroupRowAgg:"getGroupRowAgg",isGroupOpenByDefault:"isGroupOpenByDefault",initialGroupOrderComparator:"initialGroupOrderComparator",processPivotResultColDef:"processPivotResultColDef",processPivotResultColGroupDef:"processPivotResultColGroupDef",getDataPath:"getDataPath",getChildCount:"getChildCount",getServerSideGroupLevelParams:"getServerSideGroupLevelParams",isServerSideGroupOpenByDefault:"isServerSideGroupOpenByDefault",isApplyServerSideTransaction:"isApplyServerSideTransaction",isServerSideGroup:"isServerSideGroup",getServerSideGroupKey:"getServerSideGroupKey",getBusinessKeyForNode:"getBusinessKeyForNode",getRowId:"getRowId",resetRowDataOnUpdate:"resetRowDataOnUpdate",processRowPostCreate:"processRowPostCreate",isRowSelectable:"isRowSelectable",isRowMaster:"isRowMaster",fillOperation:"fillOperation",postSortRows:"postSortRows",getRowStyle:"getRowStyle",getRowClass:"getRowClass",getRowHeight:"getRowHeight",isFullWidthRow:"isFullWidthRow"},outputs:{toolPanelVisibleChanged:"toolPanelVisibleChanged",toolPanelSizeChanged:"toolPanelSizeChanged",columnMenuVisibleChanged:"columnMenuVisibleChanged",contextMenuVisibleChanged:"contextMenuVisibleChanged",cutStart:"cutStart",cutEnd:"cutEnd",pasteStart:"pasteStart",pasteEnd:"pasteEnd",columnVisible:"columnVisible",columnPinned:"columnPinned",columnResized:"columnResized",columnMoved:"columnMoved",columnValueChanged:"columnValueChanged",columnPivotModeChanged:"columnPivotModeChanged",columnPivotChanged:"columnPivotChanged",columnGroupOpened:"columnGroupOpened",newColumnsLoaded:"newColumnsLoaded",gridColumnsChanged:"gridColumnsChanged",displayedColumnsChanged:"displayedColumnsChanged",virtualColumnsChanged:"virtualColumnsChanged",columnEverythingChanged:"columnEverythingChanged",columnHeaderMouseOver:"columnHeaderMouseOver",columnHeaderMouseLeave:"columnHeaderMouseLeave",columnHeaderClicked:"columnHeaderClicked",columnHeaderContextMenu:"columnHeaderContextMenu",componentStateChanged:"componentStateChanged",cellValueChanged:"cellValueChanged",cellEditRequest:"cellEditRequest",rowValueChanged:"rowValueChanged",cellEditingStarted:"cellEditingStarted",cellEditingStopped:"cellEditingStopped",rowEditingStarted:"rowEditingStarted",rowEditingStopped:"rowEditingStopped",undoStarted:"undoStarted",undoEnded:"undoEnded",redoStarted:"redoStarted",redoEnded:"redoEnded",rangeDeleteStart:"rangeDeleteStart",rangeDeleteEnd:"rangeDeleteEnd",fillStart:"fillStart",fillEnd:"fillEnd",filterOpened:"filterOpened",filterChanged:"filterChanged",filterModified:"filterModified",advancedFilterBuilderVisibleChanged:"advancedFilterBuilderVisibleChanged",chartCreated:"chartCreated",chartRangeSelectionChanged:"chartRangeSelectionChanged",chartOptionsChanged:"chartOptionsChanged",chartDestroyed:"chartDestroyed",cellKeyDown:"cellKeyDown",gridReady:"gridReady",firstDataRendered:"firstDataRendered",gridSizeChanged:"gridSizeChanged",modelUpdated:"modelUpdated",virtualRowRemoved:"virtualRowRemoved",viewportChanged:"viewportChanged",bodyScroll:"bodyScroll",bodyScrollEnd:"bodyScrollEnd",dragStarted:"dragStarted",dragStopped:"dragStopped",stateUpdated:"stateUpdated",paginationChanged:"paginationChanged",rowDragEnter:"rowDragEnter",rowDragMove:"rowDragMove",rowDragLeave:"rowDragLeave",rowDragEnd:"rowDragEnd",columnRowGroupChanged:"columnRowGroupChanged",rowGroupOpened:"rowGroupOpened",expandOrCollapseAll:"expandOrCollapseAll",pivotMaxColumnsExceeded:"pivotMaxColumnsExceeded",pinnedRowDataChanged:"pinnedRowDataChanged",rowDataUpdated:"rowDataUpdated",asyncTransactionsFlushed:"asyncTransactionsFlushed",storeRefreshed:"storeRefreshed",headerFocused:"headerFocused",cellClicked:"cellClicked",cellDoubleClicked:"cellDoubleClicked",cellFocused:"cellFocused",cellMouseOver:"cellMouseOver",cellMouseOut:"cellMouseOut",cellMouseDown:"cellMouseDown",rowClicked:"rowClicked",rowDoubleClicked:"rowDoubleClicked",rowSelected:"rowSelected",selectionChanged:"selectionChanged",cellContextMenu:"cellContextMenu",rangeSelectionChanged:"rangeSelectionChanged",tooltipShow:"tooltipShow",tooltipHide:"tooltipHide",sortChanged:"sortChanged"},standalone:!0,features:[os([x2,F2]),kt,be],decls:0,vars:0,template:function(s,r){},encapsulation:2});let e=t;return e})();var Ehe=["modalTemplate"];function Dhe(e,t){if(e&1&&(H(0,"div"),ne(1,"input",3),U()),e&2){let n=fe();K(),re("formControl",n.filterText)}}function The(e,t){if(e&1&&ne(0,"app-transaction-form",4),e&2){let n=fe();re("transactionType",n.transactionType)("selectedTransaction",n.selectedTransaction)}}var N2=(()=>{let t=class t{constructor(i,s,r,o){this.utilService=i,this.tagService=s,this.transactionService=r,this.ngbModal=o,this.transactions=[],this.showFilter=!1,this.filterText=new pa(""),this.rowData=[],this.colDefs=[{field:"title"},{field:"amount",valueFormatter:a=>`${a.value.toLocaleString()}`},{field:"date"},{field:"category"},{field:"description"},{field:"type"}],this.gridOptions={getRowStyle:a=>{let l=a.data.type==="income",c=(a.node.rowIndex??0)%2===0;return l?{backgroundColor:c?"#e6f3e6":"#f0f8f0"}:{backgroundColor:c?"#fce4e4":"#fdf0f0"}}},this.selectedTransaction=null,this.transactionType="income"}onGridReady(i){this.gridApi=i.api}ngOnChanges(){this.transactions.length===0&&(this.rowData=[]),this.transactionToRowData(this.transactions).subscribe(i=>{this.rowData=i,this.filterText.valueChanges.subscribe(s=>{this.filterTable(s??"")})})}onRowDoubleClicked(i){if(i.data){let s=this.transactionService.getTransactionFromId(i.data.id,i.data.type==="income"?"income":"expense");this.selectedTransaction=s??null,this.openModal(s?s.type:"income")}}transactionToRowData(i){let s=i.map(r=>this.tagService.getTagFromId(r.tagIds[0],r.type).pipe(oe(o=>({id:r.id,title:r.title,date:this.utilService.formatDateToDayMonthYearWeekday(r.date),description:r.description,category:o.name,amount:r.amount,type:r.type}))));return Fs(s)}filterTable(i){this.gridApi.setGridOption("quickFilterText",i)}openModal(i){this.transactionType=i,this.ngbModal.open(this.modalTemplate,{centered:!0,fullscreen:"sm"})}};t.\u0275fac=function(s){return new(s||t)(Q(hy),Q(sd),Q(rd),Q(Ou))},t.\u0275cmp=_e({type:t,selectors:[["app-transaction-table"]],viewQuery:function(s,r){if(s&1&&rs(Ehe,5),s&2){let o;Si(o=_i())&&(r.modalTemplate=o.first)}},inputs:{transactions:"transactions",showFilter:"showFilter"},standalone:!0,features:[kt,be],decls:4,vars:4,consts:[["modalTemplate",""],[4,"ngIf"],[1,"ag-theme-alpine",2,"height","300px",3,"rowDoubleClicked","gridReady","rowData","columnDefs","gridOptions"],["type","text","id","filter-text-box","placeholder","Filter...",1,"filter-box","mb-2",3,"formControl"],[3,"transactionType","selectedTransaction"]],template:function(s,r){if(s&1){let o=st();Ce(0,Dhe,2,1,"div",1),H(1,"ag-grid-angular",2),pe("rowDoubleClicked",function(l){return De(o),Te(r.onRowDoubleClicked(l))})("gridReady",function(l){return De(o),Te(r.onGridReady(l))}),U(),Ce(2,The,1,2,"ng-template",null,0,ni)}s&2&&(re("ngIf",r.showFilter),K(),re("rowData",r.rowData)("columnDefs",r.colDefs)("gridOptions",r.gridOptions))},dependencies:[O2,Mt,Vn,Er,us,br,mf,fy],styles:[".filter-box[_ngcontent-%COMP%]{height:30px}"]});let e=t;return e})();var Rhe=["modalTemplate"];function Ihe(e,t){if(e&1&&ne(0,"app-transaction-form",6),e&2){let n=fe();re("transactionType",n.transactionType)}}var k2=(()=>{let t=class t{constructor(i){this.ngbModal=i,this.transactionType="income"}openModal(i){this.transactionType=i,this.ngbModal.open(this.modalTemplate,{centered:!0,fullscreen:"sm"})}};t.\u0275fac=function(s){return new(s||t)(Q(Ou))},t.\u0275cmp=_e({type:t,selectors:[["app-transaction-form-buttons"]],viewQuery:function(s,r){if(s&1&&rs(Rhe,5),s&2){let o;Si(o=_i())&&(r.modalTemplate=o.first)}},standalone:!0,features:[be],decls:7,vars:0,consts:[["modalTemplate",""],[1,"btn-group"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"bi","bi-plus-circle-fill"],["type","button",1,"btn","btn-danger","btn-sm",3,"click"],[1,"bi","bi-dash-circle-fill"],[3,"transactionType"]],template:function(s,r){if(s&1){let o=st();H(0,"div",1)(1,"button",2),pe("click",function(){return De(o),Te(r.openModal("income"))}),ne(2,"i",3),U(),H(3,"button",4),pe("click",function(){return De(o),Te(r.openModal("expense"))}),ne(4,"i",5),U()(),Ce(5,Ihe,1,1,"ng-template",null,0,ni)}},dependencies:[fy]});let e=t;return e})();function Ahe(e,t){e&1&&(H(0,"div"),ne(1,"app-loader"),U())}function Mhe(e,t){if(e&1&&(H(0,"div",13),ne(1,"app-stat-card",14),U()),e&2){let n=t.$implicit;K(),re("title",n.title)("value",n.value)("percentChange",n.percentChange)("isIncome",n.isIncome)}}function Phe(e,t){if(e&1&&(H(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h1",6),ue(5,"Dashboard"),U(),ne(6,"app-transaction-form-buttons"),U(),H(7,"div",7),Ce(8,Mhe,2,4,"div",8),U(),ne(9,"app-line-bar-chart",9),U(),H(10,"div",10),ne(11,"app-line-bar-chart",11)(12,"app-transaction-table",12),U()()()),e&2){let n=fe();K(8),re("ngForOf",n.statCards),K(),re("data",n.incomeLineBarData)("isIncome",!0),K(2),re("data",n.expenseLineBarData)("isIncome",!1),K(),re("transactions",n.allTransactions)("showFilter",!0)}}var L2=(()=>{let t=class t{constructor(i,s,r){this.authService=i,this.transactionService=s,this.dateSelectorService=r,this.statCards=[{title:"In",value:0,percentChange:0,isIncome:!0},{title:"Out",value:0,percentChange:0,isIncome:!1},{title:"On Hand",value:0,percentChange:0,isIncome:!0}],this.allTransactions=[],this.incomeLineBarData=[],this.expenseLineBarData=[],this.isLoading=!0,this.destroy$=new Me,this.userInfo=this.authService.currentUserSig()||{}}ngOnInit(){this.initializeData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeData(){Fs([this.transactionService.expenseTransactions$,this.transactionService.incomeTransactions$,this.dateSelectorService.dateRange$]).pipe(Tt(this.destroy$),oe(([i,s,r])=>({expenses:this.filterTransactionsByDateRange(i,r),income:this.filterTransactionsByDateRange(s,r)}))).subscribe(({expenses:i,income:s})=>{this.updateDashboard(i,s),this.isLoading=!1},i=>console.error("Error fetching transactions:",i))}filterTransactionsByDateRange(i,s){if(!s||!s.from||!s.to)return i;let r=new Date(s.to);return r.setHours(23,59,59,999),i.filter(o=>new Date(o.date)>=s.from&&new Date(o.date)<=r)}updateDashboard(i,s){this.updateStatCard(s,0),this.updateStatCard(i,1),this.calculateNetIncome(s,i),this.incomeLineBarData=this.convertTransactionsToLineBarData(s),this.expenseLineBarData=this.convertTransactionsToLineBarData(i),this.allTransactions=this.combineAndSortTransactions(s,i)}updateStatCard(i,s){if(i.length===0){this.statCards[s].value=0,this.statCards[s].percentChange=0;return}this.statCards[s].value=this.aggregateTransactions(i),this.statCards[s].percentChange=this.calculatePercentChange(i[i.length-1].amount,i[0].amount)}calculateNetIncome(i,s){let r=this.aggregateTransactions(i),o=this.aggregateTransactions(s),a=r-o,l=i.length>0?i[0].amount:0,c=s.length>0?s[0].amount:0,u=l-c;this.statCards[2].value=a,this.statCards[2].percentChange=this.calculatePercentChange(a,u)}aggregateTransactions(i){return Math.round(i.reduce((s,r)=>s+r.amount,0))}calculatePercentChange(i,s){return s!==0?(i-s)/Math.abs(s)*100:0}convertTransactionsToLineBarData(i){return i.map(s=>({tag:s.tagIds[0],value:[new Date(s.date).getTime(),s.amount],title:s.title}))}combineAndSortTransactions(i,s){return[...i,...s].sort((r,o)=>new Date(o.date).getTime()-new Date(r.date).getTime())}};t.\u0275fac=function(s){return new(s||t)(Q(hs),Q(rd),Q(Nu))},t.\u0275cmp=_e({type:t,selectors:[["app-dashboard-page"]],standalone:!0,features:[be],decls:3,vars:2,consts:[["content",""],[4,"ngIf","ngIfElse"],[1,"container-fluid","d-flex","justify-content-center"],[1,"mt-2","row","d-flex","justify-content-center"],[1,"row","col-12","col-lg-6"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"text-start","fw-bold"],[1,"row","mb-3"],["class","col-6 col-md-4 mb-2 mx-auto mx-md-0",4,"ngFor","ngForOf"],["title","Total Ins","percentChangeMessage","Previous gains:",1,"mb-3",3,"data","isIncome"],[1,"row","col-12","col-lg-6","mt-3","mt-lg-0","mx-lg-2"],["title","Total Outs","percentChangeMessage","Previous dip:",3,"data","isIncome"],[3,"transactions","showFilter"],[1,"col-6","col-md-4","mb-2","mx-auto","mx-md-0"],[3,"title","value","percentChange","isIncome"]],template:function(s,r){if(s&1&&Ce(0,Ahe,2,0,"div",1)(1,Phe,13,7,"ng-template",null,0,ni),s&2){let o=la(2);re("ngIf",r.isLoading)("ngIfElse",o)}},dependencies:[Mt,yr,Vn,rG,oG,qv,N2,k2]});let e=t;return e})();var V2=(()=>{let t=class t{constructor(i){this.router=i,this.router.navigate(["/login"])}};t.\u0275fac=function(s){return new(s||t)(Q(cn))},t.\u0275cmp=_e({type:t,selectors:[["app-landing-page"]],standalone:!0,features:[be],decls:2,vars:0,template:function(s,r){s&1&&(H(0,"p"),ue(1,"landing-page works!"),U())}});let e=t;return e})();var Fhe=[{path:"",component:L2}],B2=[{path:"",component:V2,canActivate:[Zv]},{path:"login",component:fL,canActivate:[Zv]},{path:"register",component:pL,canActivate:[Zv]},{path:"dashboard",component:zL,canActivate:[gL],children:Fhe}];var U2="@firebase/installations",yI="0.6.8";var W2=1e4,j2=`w:${yI}`,z2="FIS_v2",xhe="https://firebaseinstallations.googleapis.com/v1",Ohe=60*60*1e3,Nhe="installations",khe="Installations";var Lhe={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},sc=new or(Nhe,khe,Lhe);function $2(e){return e instanceof As&&e.code.includes("request-failed")}function q2({projectId:e}){return`${xhe}/projects/${e}/installations`}function K2(e){return{token:e.token,requestStatus:2,expiresIn:Bhe(e.expiresIn),creationTime:Date.now()}}function Q2(e,t){return x(this,null,function*(){let i=(yield t.json()).error;return sc.create("request-failed",{requestName:e,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})})}function Y2({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Vhe(e,{refreshToken:t}){let n=Y2(e);return n.append("Authorization",Ghe(t)),n}function J2(e){return x(this,null,function*(){let t=yield e();return t.status>=500&&t.status<600?e():t})}function Bhe(e){return Number(e.replace("s","000"))}function Ghe(e){return`${z2} ${e}`}function Hhe(i,s){return x(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},{fid:n}){let r=q2(e),o=Y2(e),a=t.getImmediate({optional:!0});if(a){let h=yield a.getHeartbeatsHeader();h&&o.append("x-firebase-client",h)}let l={fid:n,authVersion:z2,appId:e.appId,sdkVersion:j2},c={method:"POST",headers:o,body:JSON.stringify(l)},u=yield J2(()=>fetch(r,c));if(u.ok){let h=yield u.json();return{fid:h.fid||n,registrationStatus:2,refreshToken:h.refreshToken,authToken:K2(h.authToken)}}else throw yield Q2("Create Installation",u)})}function X2(e){return new Promise(t=>{setTimeout(t,e)})}function Uhe(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}var Whe=/^[cdef][\w-]{21}$/,CI="";function jhe(){try{let e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;let n=zhe(e);return Whe.test(n)?n:CI}catch{return CI}}function zhe(e){return Uhe(e).substr(0,22)}function jy(e){return`${e.appName}!${e.appId}`}var Z2=new Map;function eU(e,t){let n=jy(e);tU(n,t),$he(n,t)}function tU(e,t){let n=Z2.get(e);if(n)for(let i of n)i(t)}function $he(e,t){let n=qhe();n&&n.postMessage({key:e,fid:t}),Khe()}var ic=null;function qhe(){return!ic&&"BroadcastChannel"in self&&(ic=new BroadcastChannel("[Firebase] FID Change"),ic.onmessage=e=>{tU(e.data.key,e.data.fid)}),ic}function Khe(){Z2.size===0&&ic&&(ic.close(),ic=null)}var Qhe="firebase-installations-database",Yhe=1,rc="firebase-installations-store",mI=null;function wI(){return mI||(mI=uh(Qhe,Yhe,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(rc)}}})),mI}function Wy(e,t){return x(this,null,function*(){let n=jy(e),s=(yield wI()).transaction(rc,"readwrite"),r=s.objectStore(rc),o=yield r.get(n);return yield r.put(t,n),yield s.done,(!o||o.fid!==t.fid)&&eU(e,t.fid),t})}function nU(e){return x(this,null,function*(){let t=jy(e),i=(yield wI()).transaction(rc,"readwrite");yield i.objectStore(rc).delete(t),yield i.done})}function zy(e,t){return x(this,null,function*(){let n=jy(e),s=(yield wI()).transaction(rc,"readwrite"),r=s.objectStore(rc),o=yield r.get(n),a=t(o);return a===void 0?yield r.delete(n):yield r.put(a,n),yield s.done,a&&(!o||o.fid!==a.fid)&&eU(e,a.fid),a})}function SI(e){return x(this,null,function*(){let t,n=yield zy(e.appConfig,i=>{let s=Jhe(i),r=Xhe(e,s);return t=r.registrationPromise,r.installationEntry});return n.fid===CI?{installationEntry:yield t}:{installationEntry:n,registrationPromise:t}})}function Jhe(e){let t=e||{fid:jhe(),registrationStatus:0};return iU(t)}function Xhe(e,t){if(t.registrationStatus===0){if(!navigator.onLine){let s=Promise.reject(sc.create("app-offline"));return{installationEntry:t,registrationPromise:s}}let n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=Zhe(e,n);return{installationEntry:n,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:efe(e)}:{installationEntry:t}}function Zhe(e,t){return x(this,null,function*(){try{let n=yield Hhe(e,t);return Wy(e.appConfig,n)}catch(n){throw $2(n)&&n.customData.serverCode===409?yield nU(e.appConfig):yield Wy(e.appConfig,{fid:t.fid,registrationStatus:0}),n}})}function efe(e){return x(this,null,function*(){let t=yield G2(e.appConfig);for(;t.registrationStatus===1;)yield X2(100),t=yield G2(e.appConfig);if(t.registrationStatus===0){let{installationEntry:n,registrationPromise:i}=yield SI(e);return i||n}return t})}function G2(e){return zy(e,t=>{if(!t)throw sc.create("installation-not-found");return iU(t)})}function iU(e){return tfe(e)?{fid:e.fid,registrationStatus:0}:e}function tfe(e){return e.registrationStatus===1&&e.registrationTime+W2<Date.now()}function nfe(i,s){return x(this,arguments,function*({appConfig:e,heartbeatServiceProvider:t},n){let r=ife(e,n),o=Vhe(e,n),a=t.getImmediate({optional:!0});if(a){let h=yield a.getHeartbeatsHeader();h&&o.append("x-firebase-client",h)}let l={installation:{sdkVersion:j2,appId:e.appId}},c={method:"POST",headers:o,body:JSON.stringify(l)},u=yield J2(()=>fetch(r,c));if(u.ok){let h=yield u.json();return K2(h)}else throw yield Q2("Generate Auth Token",u)})}function ife(e,{fid:t}){return`${q2(e)}/${t}/authTokens:generate`}function _I(e,t=!1){return x(this,null,function*(){let n,i=yield zy(e.appConfig,r=>{if(!sU(r))throw sc.create("not-registered");let o=r.authToken;if(!t&&ofe(o))return r;if(o.requestStatus===1)return n=sfe(e,t),r;{if(!navigator.onLine)throw sc.create("app-offline");let a=lfe(r);return n=rfe(e,a),a}});return n?yield n:i.authToken})}function sfe(e,t){return x(this,null,function*(){let n=yield H2(e.appConfig);for(;n.authToken.requestStatus===1;)yield X2(100),n=yield H2(e.appConfig);let i=n.authToken;return i.requestStatus===0?_I(e,t):i})}function H2(e){return zy(e,t=>{if(!sU(t))throw sc.create("not-registered");let n=t.authToken;return cfe(n)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}function rfe(e,t){return x(this,null,function*(){try{let n=yield nfe(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return yield Wy(e.appConfig,i),n}catch(n){if($2(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield nU(e.appConfig);else{let i=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});yield Wy(e.appConfig,i)}throw n}})}function sU(e){return e!==void 0&&e.registrationStatus===2}function ofe(e){return e.requestStatus===2&&!afe(e)}function afe(e){let t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Ohe}function lfe(e){let t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function cfe(e){return e.requestStatus===1&&e.requestTime+W2<Date.now()}function ufe(e){return x(this,null,function*(){let t=e,{installationEntry:n,registrationPromise:i}=yield SI(t);return i?i.catch(console.error):_I(t).catch(console.error),n.fid})}function dfe(e,t=!1){return x(this,null,function*(){let n=e;return yield hfe(n),(yield _I(n,t)).token})}function hfe(e){return x(this,null,function*(){let{registrationPromise:t}=yield SI(e);t&&(yield t)})}function ffe(e){if(!e||!e.options)throw vI("App Configuration");if(!e.name)throw vI("App Name");let t=["projectId","apiKey","appId"];for(let n of t)if(!e.options[n])throw vI(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function vI(e){return sc.create("missing-app-config-values",{valueName:e})}var rU="installations",pfe="installations-internal",gfe=e=>{let t=e.getProvider("app").getImmediate(),n=ffe(t),i=on(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},mfe=e=>{let t=e.getProvider("app").getImmediate(),n=on(t,rU).getImmediate();return{getId:()=>ufe(n),getToken:s=>dfe(n,s)}};function vfe(){Nt(new Ot(rU,gfe,"PUBLIC")),Nt(new Ot(pfe,mfe,"PRIVATE"))}vfe();Se(U2,yI);Se(U2,yI,"esm2017");var $y="analytics",Cfe="firebase_id",yfe="origin",wfe=60*1e3,Sfe="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",AI="https://www.googletagmanager.com/gtag/js";var ui=new lr("@firebase/analytics");var _fe={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Xi=new or("analytics","Analytics",_fe);function bfe(e){if(!e.startsWith(AI)){let t=Xi.create("invalid-gtag-resource",{gtagURL:e});return ui.warn(t.message),""}return e}function hU(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function Efe(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function Dfe(e,t){let n=Efe("firebase-js-sdk-policy",{createScriptURL:bfe}),i=document.createElement("script"),s=`${AI}?l=${e}&id=${t}`;i.src=n?n?.createScriptURL(s):s,i.async=!0,document.head.appendChild(i)}function Tfe(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}function Rfe(e,t,n,i,s,r){return x(this,null,function*(){let o=i[s];try{if(o)yield t[o];else{let l=(yield hU(n)).find(c=>c.measurementId===s);l&&(yield t[l.appId])}}catch(a){ui.error(a)}e("config",s,r)})}function Ife(e,t,n,i,s){return x(this,null,function*(){try{let r=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);let a=yield hU(n);for(let l of o){let c=a.find(h=>h.measurementId===l),u=c&&t[c.appId];if(u)r.push(u);else{r=[];break}}}r.length===0&&(r=Object.values(t)),yield Promise.all(r),e("event",i,s||{})}catch(r){ui.error(r)}})}function Afe(e,t,n,i){function s(r,...o){return x(this,null,function*(){try{if(r==="event"){let[a,l]=o;yield Ife(e,t,n,a,l)}else if(r==="config"){let[a,l]=o;yield Rfe(e,t,n,i,a,l)}else if(r==="consent"){let[a,l]=o;e("consent",a,l)}else if(r==="get"){let[a,l,c]=o;e("get",a,l,c)}else if(r==="set"){let[a]=o;e("set",a)}else e(r,...o)}catch(a){ui.error(a)}})}return s}function Mfe(e,t,n,i,s){let r=function(...o){window[i].push(arguments)};return window[s]&&typeof window[s]=="function"&&(r=window[s]),window[s]=Afe(r,e,t,n),{gtagCore:r,wrappedGtag:window[s]}}function Pfe(e){let t=window.document.getElementsByTagName("script");for(let n of Object.values(t))if(n.src&&n.src.includes(AI)&&n.src.includes(e))return n;return null}var Ffe=30,xfe=1e3,EI=class{constructor(t={},n=xfe){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}},fU=new EI;function Ofe(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function Nfe(e){return x(this,null,function*(){var t;let{appId:n,apiKey:i}=e,s={method:"GET",headers:Ofe(i)},r=Sfe.replace("{app-id}",n),o=yield fetch(r,s);if(o.status!==200&&o.status!==304){let a="";try{let l=yield o.json();!((t=l.error)===null||t===void 0)&&t.message&&(a=l.error.message)}catch{}throw Xi.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function kfe(i){return x(this,arguments,function*(e,t=fU,n){let{appId:s,apiKey:r,measurementId:o}=e.options;if(!s)throw Xi.create("no-app-id");if(!r){if(o)return{measurementId:o,appId:s};throw Xi.create("no-api-key")}let a=t.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new DI;return setTimeout(()=>x(this,null,function*(){l.abort()}),n!==void 0?n:wfe),pU({appId:s,apiKey:r,measurementId:o},a,l,t)})}function pU(r,o,a){return x(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:n},i,s=fU){var l;let{appId:c,measurementId:u}=e;try{yield Lfe(i,t)}catch(h){if(u)return ui.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:c,measurementId:u};throw h}try{let h=yield Nfe(e);return s.deleteThrottleMetadata(c),h}catch(h){let f=h;if(!Vfe(f)){if(s.deleteThrottleMetadata(c),u)return ui.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:c,measurementId:u};throw h}let p=Number((l=f?.customData)===null||l===void 0?void 0:l.httpStatus)===503?Tc(n,s.intervalMillis,Ffe):Tc(n,s.intervalMillis),v={throttleEndTimeMillis:Date.now()+p,backoffCount:n+1};return s.setThrottleMetadata(c,v),ui.debug(`Calling attemptFetch again in ${p} millis`),pU(e,v,i,s)}})}function Lfe(e,t){return new Promise((n,i)=>{let s=Math.max(t-Date.now(),0),r=setTimeout(n,s);e.addEventListener(()=>{clearTimeout(r),i(Xi.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function Vfe(e){if(!(e instanceof As)||!e.customData)return!1;let t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var DI=class{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}};var TI;function Bfe(e,t,n,i,s){return x(this,null,function*(){if(s&&s.global){e("event",n,i);return}else{let r=yield t,o=Object.assign(Object.assign({},i),{send_to:r});e("event",n,o)}})}function Gfe(e,t,n,i){return x(this,null,function*(){if(i&&i.global)return e("set",{user_id:n}),Promise.resolve();{let s=yield t;e("config",s,{update:!0,user_id:n})}})}var RI;function Hfe(e){RI=e}function Ufe(e){TI=e}function Wfe(){return x(this,null,function*(){if(Is())try{yield Wa()}catch(e){return ui.warn(Xi.create("indexeddb-unavailable",{errorInfo:e?.toString()}).message),!1}else return ui.warn(Xi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function jfe(e,t,n,i,s,r,o){return x(this,null,function*(){var a;let l=kfe(e);l.then(p=>{n[p.measurementId]=p.appId,e.options.measurementId&&p.measurementId!==e.options.measurementId&&ui.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>ui.error(p)),t.push(l);let c=Wfe().then(p=>{if(p)return i.getId()}),[u,h]=yield Promise.all([l,c]);Pfe(r)||Dfe(r,u.measurementId),RI&&(s("consent","default",RI),Hfe(void 0)),s("js",new Date);let f=(a=o?.config)!==null&&a!==void 0?a:{};return f[yfe]="firebase",f.update=!0,h!=null&&(f[Cfe]=h),s("config",u.measurementId,f),TI&&(s("set",TI),Ufe(void 0)),u.measurementId})}var II=class{constructor(t){this.app=t}_delete(){return delete Sd[this.app.options.appId],Promise.resolve()}},Sd={},oU=[],aU={},bI="dataLayer",zfe="gtag",lU,MI,cU=!1;function $fe(){let e=[];if(Ow()&&e.push("This is a browser extension environment."),oh()||e.push("Cookies are not available."),e.length>0){let t=e.map((i,s)=>`(${s+1}) ${i}`).join(" "),n=Xi.create("invalid-analytics-context",{errorInfo:t});ui.warn(n.message)}}function qfe(e,t,n){$fe();let i=e.options.appId;if(!i)throw Xi.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)ui.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Xi.create("no-api-key");if(Sd[i]!=null)throw Xi.create("already-exists",{id:i});if(!cU){Tfe(bI);let{wrappedGtag:r,gtagCore:o}=Mfe(Sd,oU,aU,bI,zfe);MI=r,lU=o,cU=!0}return Sd[i]=jfe(e,oU,aU,t,lU,bI,n),new II(e)}function gU(e=gn()){e=ct(e);let t=on(e,$y);return t.isInitialized()?t.getImmediate():mU(e)}function mU(e,t={}){let n=on(e,$y);if(n.isInitialized()){let s=n.getImmediate();if(lh(t,n.getOptions()))return s;throw Xi.create("already-initialized")}return n.initialize({options:t})}function vU(){return x(this,null,function*(){if(Ow()||!oh()||!Is())return!1;try{return yield Wa()}catch{return!1}})}function CU(e,t,n){e=ct(e),Gfe(MI,Sd[e.app.options.appId],t,n).catch(i=>ui.error(i))}function PI(e,t,n,i){e=ct(e),Bfe(MI,Sd[e.app.options.appId],t,n,i).catch(s=>ui.error(s))}var uU="@firebase/analytics",dU="0.10.7";function Kfe(){Nt(new Ot($y,(t,{options:n})=>{let i=t.getProvider("app").getImmediate(),s=t.getProvider("installations-internal").getImmediate();return qfe(i,s,n)},"PUBLIC")),Nt(new Ot("analytics-internal",e,"PRIVATE")),Se(uU,dU),Se(uU,dU,"esm2017");function e(t){try{let n=t.getProvider($y).getImmediate();return{logEvent:(i,s,r)=>PI(n,i,s,r)}}catch(n){throw Xi.create("interop-component-reg-failed",{reason:n})}}}Kfe();var oc=class{constructor(t){return t}},SU="analytics",xI=class{constructor(){return Fn(SU)}};var OI="__angularfire_symbol__analyticsIsSupportedValue",_U="__angularfire_symbol__analyticsIsSupported";globalThis[_U]||=vU().then(e=>globalThis[OI]=e).catch(()=>globalThis[OI]=!1);var qy={async:()=>globalThis[_U],sync:()=>{let e=globalThis[OI];if(e===void 0)throw new Error(Du("Analytics"));return e}},bU=qy.async,EU=je(gU,!0);var Qfe=je(PI,!0);var Yfe=je(CU,!0);var kI=(()=>{class e{initialized;disposables=[];constructor(n,i,s){Se("angularfire",Bt.full,"user-tracking");let r;this.initialized=i.runOutsideAngular(()=>new Promise(o=>{r=o})),bU().then(()=>{let o=s.get(oc);o?this.disposables=[Cf(n).subscribe(a=>{Yfe(o,a?.uid),r()})]:r()})}ngOnDestroy(){this.disposables.forEach(n=>n.unsubscribe())}static \u0275fac=function(i){return new(i||e)(Z(ds),Z(de),Z(Ge))};static \u0275prov=Y({token:e,factory:e.\u0275fac})}return e})(),Jfe="firebase_event_origin",Xfe="firebase_previous_class",Zfe="firebase_previous_id",epe="firebase_previous_screen",tpe="firebase_screen_class",yU="firebase_screen_id",npe="firebase_screen",NI="outlet",ipe="page_path",spe="page_title",gp="screen_class",wU="screen_name",rpe="screen_view",ope="auto",ape="#",lpe=Math.floor(Math.random()*(2**32-1))-2**31,FI={},cpe=e=>{let t=[e[gp],e[NI]].join(ape);if(FI.hasOwnProperty(t))return FI[t];{let n=lpe++;return FI[t]=n,n}},upe=(e,t,n)=>e.events.pipe(Ye(s=>s instanceof sf)).pipe(ke(s=>{let o=e.parseUrl(e.url.replace(/(?:\().+(?:\))/g,f=>f.replace("://",":///"))).root.children[s.snapshot.outlet]?.toString()||"",a=e.routerState.root.children.map(f=>f).find(f=>f.outlet===s.snapshot.outlet);if(!a)return X(null);let l=a;for(;l.firstChild;)l=l.firstChild;let c=l.pathFromRoot.map(f=>f.routeConfig?.path).filter(f=>f).join("/")||"/",u={[wU]:c,[ipe]:`/${o}`,[Jfe]:ope,[npe]:c,[NI]:s.snapshot.outlet};t&&(u[spe]=t.getTitle());let h=a.component;if(h){if(h===A0){let f=s.snapshot;for(;f.firstChild;)f=f.firstChild;h=f.component}}else h=s.snapshot.component;if(typeof h=="string")return X(ae(B({},u),{[gp]:h}));if(h){let f=n.resolveComponentFactory(h);return X(ae(B({},u),{[gp]:f.selector}))}return X(null)}),Ye(s=>!!s),oe(s=>B({[tpe]:s[gp],[yU]:cpe(s)},s)),oS(s=>s[NI]),ft(s=>s.pipe(yh((r,o)=>JSON.stringify(r)===JSON.stringify(o)),Ja(void 0),Gg(),oe(([r,o])=>r?B({[Xfe]:r[gp],[epe]:r[wU],[Zfe]:r[yU]},o):o)))),DU=(()=>{class e{disposable;constructor(n,i,s,r,o,a){Se("angularfire",Bt.full,"screen-tracking"),bU().then(()=>{let l=a.get(oc);!n||!l||r.runOutsideAngular(()=>{this.disposable=upe(n,i,s).pipe(ke(c=>x(this,null,function*(){return o&&(yield o.initialized),Qfe(l,rpe,c)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(i){return new(i||e)(Z(cn,8),Z(Cv,8),Z(su),Z(de),Z(kI,8),Z(Ge))};static \u0275prov=Y({token:e,factory:e.\u0275fac})}return e})(),LI=new te("angularfire2.analytics-instances");function dpe(e,t){if(!qy.sync())return null;let n=Bn(SU,e,t);return n&&new oc(n)}function hpe(e){return(t,n)=>{if(!qy.sync())return null;let i=t.runOutsideAngular(()=>e(n));return new oc(i)}}var fpe={provide:xI,deps:[[new Le,LI]]},ppe={provide:oc,useFactory:dpe,deps:[[new Le,LI],$t]};function TU(e,...t){return Se("angularfire",Bt.full,"analytics"),mt([ppe,fpe,{provide:vr,useValue:qy.async,multi:!0},{provide:LI,useFactory:hpe(e),multi:!0,deps:[de,Ge,Xt,un,...t]}])}var RU="@firebase/database",IU="1.0.7";var NA="";function gpe(e){NA=e}var zI=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),pn(n))}get(t){let n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:ag(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var $I=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return ar(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var oW=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){let t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new zI(t)}}catch{}return new $I},lc=oW("localStorage"),qI=oW("sessionStorage");var Dd=new lr("@firebase/database"),mpe=function(){let e=1;return function(){return e++}}(),aW=function(e){let t=BP(e),n=new LP;n.update(t);let i=n.digest();return og.encodeByteArray(i)},Ip=function(...e){let t="";for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?t+=Ip.apply(null,i):typeof i=="object"?t+=pn(i):t+=i,t+=" "}return t},cc=null,AU=!0,vpe=function(e,t){se(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(Dd.logLevel=Fi.VERBOSE,cc=Dd.log.bind(Dd),t&&qI.set("logging_enabled",!0)):typeof e=="function"?cc=e:(cc=null,qI.remove("logging_enabled"))},$n=function(...e){if(AU===!0&&(AU=!1,cc===null&&qI.get("logging_enabled")===!0&&vpe(!0)),cc){let t=Ip.apply(null,e);cc(t)}},Ap=function(e){return function(...t){$n(e,...t)}},KI=function(...e){let t="FIREBASE INTERNAL ERROR: "+Ip(...e);Dd.error(t)},Io=function(...e){let t=`FIREBASE FATAL ERROR: ${Ip(...e)}`;throw Dd.error(t),new Error(t)},Zi=function(...e){let t="FIREBASE WARNING: "+Ip(...e);Dd.warn(t)},Cpe=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Zi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},lW=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},ype=function(e){if(rr()||document.readyState==="complete")e();else{let t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Rd="[MIN_NAME]",uc="[MAX_NAME]",Od=function(e,t){if(e===t)return 0;if(e===Rd||t===uc)return-1;if(t===Rd||e===uc)return 1;{let n=MU(e),i=MU(t);return n!==null?i!==null?n-i===0?e.length-t.length:n-i:-1:i!==null?1:e<t?-1:1}},wpe=function(e,t){return e===t?0:e<t?-1:1},mp=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+pn(t))},kA=function(e){if(typeof e!="object"||e===null)return pn(e);let t=[];for(let i in e)t.push(i);t.sort();let n="{";for(let i=0;i<t.length;i++)i!==0&&(n+=","),n+=pn(t[i]),n+=":",n+=kA(e[t[i]]);return n+="}",n},cW=function(e,t){let n=e.length;if(n<=t)return[e];let i=[];for(let s=0;s<n;s+=t)s+t>n?i.push(e.substring(s,n)):i.push(e.substring(s,s+t));return i};function Ds(e,t){for(let n in e)e.hasOwnProperty(n)&&t(n,e[n])}var uW=function(e){se(!lW(e),"Invalid JSON number");let t=11,n=52,i=(1<<t-1)-1,s,r,o,a,l;e===0?(r=0,o=0,s=1/e===-1/0?1:0):(s=e<0,e=Math.abs(e),e>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),i),r=a+i,o=Math.round(e*Math.pow(2,n-a)-Math.pow(2,n))):(r=0,o=Math.round(e/Math.pow(2,1-i-n))));let c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=t;l;l-=1)c.push(r%2?1:0),r=Math.floor(r/2);c.push(s?1:0),c.reverse();let u=c.join(""),h="";for(l=0;l<64;l+=8){let f=parseInt(u.substr(l,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},Spe=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},_pe=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var bpe=new RegExp("^-?(0*)\\d{1,10}$"),Epe=-2147483648,Dpe=2147483647,MU=function(e){if(bpe.test(e)){let t=Number(e);if(t>=Epe&&t<=Dpe)return t}return null},Mp=function(e){try{e()}catch(t){setTimeout(()=>{let n=t.stack||"";throw Zi("Exception was thrown by user callback.",n),t},Math.floor(0))}},Tpe=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Sp=function(e,t){let n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var QI=class{constructor(t,n){this.appName_=t,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Zi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var YI=class{constructor(t,n,i){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?($n("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,i):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Zi(t)}},_p=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}e.OWNER="owner";return e})(),Qy="5",dW="v",hW="s",fW="r",pW="f",gW=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,mW="ls",vW="p",JI="ac",CW="websocket",yW="long_polling";var Yy=class{constructor(t,n,i,s,r=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=lc.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&lc.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}};function Rpe(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function wW(e,t,n){se(typeof t=="string","typeof type must == string"),se(typeof n=="object","typeof params must == object");let i;if(t===CW)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===yW)i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);Rpe(e)&&(n.ns=e.namespace);let s=[];return Ds(n,(r,o)=>{s.push(r+"="+o)}),i+s.join("&")}var XI=class{constructor(){this.counters_={}}incrementCounter(t,n=1){ar(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return MP(this.counters_)}};var VI={},BI={};function LA(e){let t=e.toString();return VI[t]||(VI[t]=new XI),VI[t]}function Ipe(e,t){let n=e.toString();return BI[n]||(BI[n]=t()),BI[n]}var ZI=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&Mp(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var PU="start",Ape="close",Mpe="pLPCommand",Ppe="pRTLPCB",SW="id",_W="pw",bW="ser",Fpe="cb",xpe="seg",Ope="ts",Npe="d",kpe="dframe",EW=1870,DW=30,Lpe=EW-DW,Vpe=25e3,Bpe=3e4,eA=class e{constructor(t,n,i,s,r,o,a){this.connId=t,this.repoInfo=n,this.applicationId=i,this.appCheckToken=s,this.authToken=r,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ap(t),this.stats_=LA(n),this.urlFn=l=>(this.appCheckToken&&(l[JI]=this.appCheckToken),wW(n,yW,l))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new ZI(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Bpe)),ype(()=>{if(this.isClosed_)return;this.scriptTagHolder=new tA((...r)=>{let[o,a,l,c,u]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===PU)this.id=a,this.password=l;else if(o===Ape)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...r)=>{let[o,a]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[PU]="t",i[bW]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[Fpe]=this.scriptTagHolder.uniqueCallbackIdentifier),i[dW]=Qy,this.transportSessionId&&(i[hW]=this.transportSessionId),this.lastSessionId&&(i[mW]=this.lastSessionId),this.applicationId&&(i[vW]=this.applicationId),this.appCheckToken&&(i[JI]=this.appCheckToken),typeof location<"u"&&location.hostname&&gW.test(location.hostname)&&(i[fW]=pW);let s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){e.forceAllow_=!0}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){return rr()?!1:e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Spe()&&!_pe()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let n=pn(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let i=AP(n),s=cW(i,Lpe);for(let r=0;r<s.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[r]),this.curSegmentNum++}addDisconnectPingFrame(t,n){if(rr())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[kpe]="t",i[SW]=t,i[_W]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let n=pn(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},tA=class e{constructor(t,n,i,s){if(this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,rr())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=mpe(),window[Mpe+this.uniqueCallbackIdentifier]=t,window[Ppe+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){$n("frame writing exception"),a.stack&&$n(a.stack),$n(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||$n("No IE domain setting required")}catch{let i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[SW]=this.myID,t[_W]=this.myPW,t[bW]=this.currentSerial;let n=this.urlFn(t),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+DW+i.length<=EW;){let o=this.pendingSegs.shift();i=i+"&"+xpe+s+"="+o.seg+"&"+Ope+s+"="+o.ts+"&"+Npe+s+"="+o.d,s++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,i){this.pendingSegs.push({seg:t,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);let i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},s=setTimeout(i,Math.floor(Vpe)),r=()=>{clearTimeout(s),i()};this.addTag(t,r)}addTag(t,n){rr()?this.doNodeLongPoll(t,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){let s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{$n("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var Gpe=16384,Hpe=45e3,Jy=null;typeof MozWebSocket<"u"?Jy=MozWebSocket:typeof WebSocket<"u"&&(Jy=WebSocket);var vp=(()=>{class e{constructor(n,i,s,r,o,a,l){this.connId=n,this.applicationId=s,this.appCheckToken=r,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ap(this.connId),this.stats_=LA(i),this.connURL=e.connectionURL_(i,a,l,r,s),this.nodeAdmin=i.nodeAdmin}static connectionURL_(n,i,s,r,o){let a={};return a[dW]=Qy,!rr()&&typeof location<"u"&&location.hostname&&gW.test(location.hostname)&&(a[fW]=pW),i&&(a[hW]=i),s&&(a[mW]=s),r&&(a[JI]=r),o&&(a[vW]=o),wW(n,CW,a)}open(n,i){this.onDisconnect=i,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,lc.set("previous_websocket_failure",!0);try{let s;if(rr()){let r=this.nodeAdmin?"AdminNode":"Node";s={headers:{"User-Agent":`Firebase/${Qy}/${NA}/${process.platform}/${r}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(s.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(s.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(s.proxy={origin:a})}this.mySock=new Jy(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");let r=s.message||s.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");let r=s.message||s.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(i);s&&s.length>1&&parseFloat(s[1])<4.4&&(n=!0)}return!n&&Jy!==null&&!e.forceDisallow_}static previouslyFailed(){return lc.isInMemoryStorage||lc.get("previous_websocket_failure")===!0}markConnectionHealthy(){lc.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let s=ag(i);this.onMessage(s)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(se(this.frames===null,"We already have a frame buffer"),n.length<=6){let i=Number(n);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let i=n.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let s=this.extractFrameCount_(i);s!==null&&this.appendFrame_(s)}}send(n){this.resetKeepAlive();let i=pn(n);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let s=cW(i,Gpe);s.length>1&&this.sendString_(String(s.length));for(let r=0;r<s.length;r++)this.sendString_(s[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Hpe))}sendString_(n){try{this.mySock.send(n)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4;return e})(),Upe=(()=>{class e{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[eA,vp]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let i=vp&&vp.isAvailable(),s=i&&!vp.previouslyFailed();if(n.webSocketOnly&&(i||Zi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[vp];else{let r=this.transports_=[];for(let o of e.ALL_TRANSPORTS)o&&o.isAvailable()&&r.push(o);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}e.globalTransportInitialized_=!1;return e})(),Wpe=6e4,jpe=5e3,zpe=10*1024,$pe=100*1024,GI="t",FU="d",qpe="s",xU="r",Kpe="e",OU="o",NU="a",kU="n",LU="p",Qpe="h",nA=class{constructor(t,n,i,s,r,o,a,l,c,u){this.id=t,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=r,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ap("c:"+this.id+":"),this.transportManager_=new Upe(n),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));let s=t.healthyTimeout||0;s>0&&(this.healthyTimeout_=Sp(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>$pe?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>zpe?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){let n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(GI in t){let n=t[GI];n===NU?this.upgradeIfSecondaryHealthy_():n===xU?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===OU&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let n=mp("t",t),i=mp("d",t);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:LU,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:NU,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:kU,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let n=mp("t",t),i=mp("d",t);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let n=mp(GI,t);if(FU in t){let i=t[FU];if(n===Qpe){let s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(n===kU){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===qpe?this.onConnectionShutdown_(i):n===xU?this.onReset_(i):n===Kpe?KI("Server Error: "+i):n===OU?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):KI("Unknown control packet command: "+n)}}onHandshake_(t){let n=t.ts,i=t.v,s=t.h;this.sessionId=t.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Qy!==i&&Zi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Sp(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Wpe))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Sp(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(jpe))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:LU,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(lc.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Xy=class{put(t,n,i,s){}merge(t,n,i,s){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,i){}onDisconnectMerge(t,n,i){}onDisconnectCancel(t,n){}reportStats(t){}};var Zy=class{constructor(t){this.allowedEvents_=t,this.listeners_={},se(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){let i=[...this.listeners_[t]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,n)}}on(t,n,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:i});let s=this.getInitialEvent(t);s&&n.apply(i,s)}off(t,n,i){this.validateEventType_(t);let s=this.listeners_[t]||[];for(let r=0;r<s.length;r++)if(s[r].callback===n&&(!i||i===s[r].context)){s.splice(r,1);return}}validateEventType_(t){se(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}};var ew=class e extends Zy{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!xw()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new e}getInitialEvent(t){return se(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var VU=32,BU=768,yt=class{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}};function dt(){return new yt("")}function Ze(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Na(e){return e.pieces_.length-e.pieceNum_}function Dt(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new yt(e.pieces_,t)}function TW(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Ype(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function RW(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function IW(e){if(e.pieceNum_>=e.pieces_.length)return null;let t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new yt(t,0)}function En(e,t){let n=[];for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);if(t instanceof yt)for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{let i=t.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&n.push(i[s])}return new yt(n,0)}function Qe(e){return e.pieceNum_>=e.pieces_.length}function bs(e,t){let n=Ze(e),i=Ze(t);if(n===null)return t;if(n===i)return bs(Dt(e),Dt(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function AW(e,t){if(Na(e)!==Na(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function er(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(Na(e)>Na(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}var iA=class{constructor(t,n){this.errorPrefix_=n,this.parts_=RW(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=ch(this.parts_[i]);MW(this)}};function Jpe(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=ch(t),MW(e)}function Xpe(e){let t=e.parts_.pop();e.byteLength_-=ch(t),e.parts_.length>0&&(e.byteLength_-=1)}function MW(e){if(e.byteLength_>BU)throw new Error(e.errorPrefix_+"has a key path longer than "+BU+" bytes ("+e.byteLength_+").");if(e.parts_.length>VU)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+VU+") or object contains a cycle "+ac(e))}function ac(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}var sA=class e extends Zy{constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new e}getInitialEvent(t){return se(t==="visible","Unknown event type: "+t),[this.visible_]}};var Cp=1e3,Zpe=60*5*1e3,GU=30*1e3,ege=1.3,tge=3e4,nge="server_kill",HU=3,VA=(()=>{class e extends Xy{constructor(n,i,s,r,o,a,l,c){if(super(),this.repoInfo_=n,this.applicationId_=i,this.onDataUpdate_=s,this.onConnectStatus_=r,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=e.nextPersistentConnectionId_++,this.log_=Ap("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Cp,this.maxReconnectDelay_=Zpe,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!rr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");sA.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&ew.getInstance().on("online",this.onOnline_,this)}sendRequest(n,i,s){let r=++this.requestNumber_,o={r,a:n,b:i};this.log_(pn(o)),se(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),s&&(this.requestCBHash_[r]=s)}get(n){this.initConnection_();let i=new Ec,r={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?i.resolve(l):i.reject(l)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),i.promise}listen(n,i,s,r){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),se(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),se(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let l={onComplete:r,hashFn:i,query:n,tag:s};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(n){let i=this.outstandingGets_[n];this.sendRequest("g",i.request,s=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(s)})}sendListen_(n){let i=n.query,s=i._path.toString(),r=i._queryIdentifier;this.log_("Listen on "+s+" for "+r);let o={p:s},a="q";n.tag&&(o.q=i._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,l=>{let c=l.d,u=l.s;e.warnOnListenWarnings_(c,i),(this.listens.get(s)&&this.listens.get(s).get(r))===n&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(s,r),n.onComplete&&n.onComplete(u,c))})}static warnOnListenWarnings_(n,i){if(n&&typeof n=="object"&&ar(n,"w")){let s=ja(n,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){let r='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();Zi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||NP(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=GU)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,i=OP(n)?"auth":"gauth",s={cred:n};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(i,s,r=>{let o=r.s,a=r.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let i=n.s,s=n.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,s)})}unlisten(n,i){let s=n._path.toString(),r=n._queryIdentifier;this.log_("Unlisten called for "+s+" "+r),se(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,r)&&this.connected_&&this.sendUnlisten_(s,r,n._queryObject,i)}sendUnlisten_(n,i,s,r){this.log_("Unlisten on "+n+" for "+i);let o={p:n},a="n";r&&(o.q=s,o.t=r),this.sendRequest(a,o)}onDisconnectPut(n,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,i,s):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:i,onComplete:s})}onDisconnectMerge(n,i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,i,s):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:i,onComplete:s})}onDisconnectCancel(n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(n,i,s,r){let o={p:i,d:s};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{r&&setTimeout(()=>{r(a.s,a.d)},Math.floor(0))})}put(n,i,s,r){this.putInternal("p",n,i,s,r)}merge(n,i,s,r){this.putInternal("m",n,i,s,r)}putInternal(n,i,s,r,o){this.initConnection_();let a={p:i,d:s};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:r}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+i)}sendPut_(n){let i=this.outstandingPuts_[n].action,s=this.outstandingPuts_[n].request,r=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,s,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(o.s,o.d)})}reportStats(n){if(this.connected_){let i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,s=>{if(s.s!=="ok"){let o=s.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+pn(n));let i=n.r,s=this.requestCBHash_[i];s&&(delete this.requestCBHash_[i],s(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,i){this.log_("handleServerMessage",n,i),n==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):n==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):n==="c"?this.onListenRevoked_(i.p,i.q):n==="ac"?this.onAuthRevoked_(i.s,i.d):n==="apc"?this.onAppCheckRevoked_(i.s,i.d):n==="sd"?this.onSecurityDebugPacket_(i):KI("Unrecognized action received from server: "+pn(n)+`
Are you using the latest client?`)}onReady_(n,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){se(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Cp,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Cp,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>tge&&(this.reconnectDelay_=Cp),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-n);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*ege)}this.onConnectStatus_(!1)}establishConnection_(){return x(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+e.nextConnectionId_++,o=this.lastSessionId,a=!1,l=null,c=function(){l?l.close():(a=!0,s())},u=function(f){se(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(f)};this.realtime_={close:c,sendRequest:u};let h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,p]=yield Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);a?$n("getToken() completed but was canceled"):($n("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,l=new nA(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,i,s,v=>{Zi(v+" ("+this.repoInfo_.toString()+")"),this.interrupt(nge)},o))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&Zi(f),c())}}})}interrupt(n){$n("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){$n("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Nw(this.interruptReasons_)&&(this.reconnectDelay_=Cp,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let i=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let i=this.outstandingPuts_[n];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,i){let s;i?s=i.map(o=>kA(o)).join("$"):s="default";let r=this.removeListen_(n,s);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(n,i){let s=new yt(n).toString(),r;if(this.listens.has(s)){let o=this.listens.get(s);r=o.get(i),o.delete(i),o.size===0&&this.listens.delete(s)}else r=void 0;return r}onAuthRevoked_(n,i){$n("Auth token revoked: "+n+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=HU&&(this.reconnectDelay_=GU,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,i){$n("App check token revoked: "+n+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=HU&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let i of n.values())this.sendListen_(i);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},i="js";rr()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),n["sdk."+i+"."+NA.replace(/\./g,"-")]=1,xw()?n["framework.cordova"]=1:FP()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=ew.getInstance().currentlyOnline();return Nw(this.interruptReasons_)&&n}}e.nextPersistentConnectionId_=0,e.nextConnectionId_=0;return e})(),et=class e{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new e(t,n)}};var Id=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){let i=new et(Rd,t),s=new et(Rd,n);return this.compare(i,s)!==0}minPost(){return et.MIN}};var Ky,tw=class extends Id{static get __EMPTY_NODE(){return Ky}static set __EMPTY_NODE(t){Ky=t}compare(t,n){return Od(t.name,n.name)}isDefinedOn(t){throw bc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return et.MIN}maxPost(){return new et(uc,Ky)}makePost(t,n){return se(typeof t=="string","KeyIndex indexValue must always be a string."),new et(t,Ky)}toString(){return".key"}},Td=new tw;var bd=class{constructor(t,n,i,s,r=null){this.isReverse_=s,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=n?i(t.key,n):1,s&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},Zs=(()=>{class e{constructor(n,i,s,r,o){this.key=n,this.value=i,this.color=s??e.RED,this.left=r??Es.EMPTY_NODE,this.right=o??Es.EMPTY_NODE}copy(n,i,s,r,o){return new e(n??this.key,i??this.value,s??this.color,r??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,i,s){let r=this,o=s(n,r.key);return o<0?r=r.copy(null,null,null,r.left.insert(n,i,s),null):o===0?r=r.copy(null,i,null,null,null):r=r.copy(null,null,null,null,r.right.insert(n,i,s)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Es.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,i){let s,r;if(s=this,i(n,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(n,i),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),i(n,s.key)===0){if(s.right.isEmpty())return Es.EMPTY_NODE;r=s.right.min_(),s=s.copy(r.key,r.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(n,i))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,i)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})(),rA=class{copy(t,n,i,s,r){return this}insert(t,n,i){return new Zs(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Es=class e{constructor(t,n=e.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Zs.BLACK,null,null))}remove(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Zs.BLACK,null,null))}get(t){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(t,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(t){let n,i=this.root_,s=null;for(;!i.isEmpty();)if(n=this.comparator_(t,i.key),n===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new bd(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new bd(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new bd(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new bd(this.root_,null,this.comparator_,!0,t)}};Es.EMPTY_NODE=new rA;function ige(e,t){return Od(e.name,t.name)}function BA(e,t){return Od(e,t)}var oA;function sge(e){oA=e}var PW=function(e){return typeof e=="number"?"number:"+uW(e):"string:"+e},FW=function(e){if(e.isLeafNode()){let t=e.val();se(typeof t=="string"||typeof t=="number"||typeof t=="object"&&ar(t,".sv"),"Priority must be a string or number.")}else se(e===oA||e.isEmpty(),"priority of unexpected type.");se(e===oA||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var UU,Ad=(()=>{class e{constructor(n,i=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=i,this.lazyHash_=null,se(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),FW(this.priorityNode_)}static set __childrenNodeConstructor(n){UU=n}static get __childrenNodeConstructor(){return UU}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return Qe(n)?this:Ze(n)===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,i){return null}updateImmediateChild(n,i){return n===".priority"?this.updatePriority(i):i.isEmpty()&&n!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,i).updatePriority(this.priorityNode_)}updateChild(n,i){let s=Ze(n);return s===null?i:i.isEmpty()&&s!==".priority"?this:(se(s!==".priority"||Na(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Dt(n),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,i){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+PW(this.priorityNode_.val())+":");let i=typeof this.value_;n+=i+":",i==="number"?n+=uW(this.value_):n+=this.value_,this.lazyHash_=aW(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(se(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let i=typeof n.value_,s=typeof this.value_,r=e.VALUE_TYPE_ORDER.indexOf(i),o=e.VALUE_TYPE_ORDER.indexOf(s);return se(r>=0,"Unknown leaf type: "+i),se(o>=0,"Unknown leaf type: "+s),r===o?s==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-r}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let i=n;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}e.VALUE_TYPE_ORDER=["object","boolean","number","string"];return e})(),xW,OW;function rge(e){xW=e}function oge(e){OW=e}var aA=class extends Id{compare(t,n){let i=t.node.getPriority(),s=n.node.getPriority(),r=i.compareTo(s);return r===0?Od(t.name,n.name):r}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return et.MIN}maxPost(){return new et(uc,new Ad("[PRIORITY-POST]",OW))}makePost(t,n){let i=xW(t);return new et(n,new Ad("[PRIORITY-POST]",i))}toString(){return".priority"}},Kn=new aA;var age=Math.log(2),lA=class{constructor(t){let n=r=>parseInt(Math.log(r)/age,10),i=r=>parseInt(Array(r+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;let s=i(this.count);this.bits_=t+1&s}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},nw=function(e,t,n,i){e.sort(t);let s=function(l,c){let u=c-l,h,f;if(u===0)return null;if(u===1)return h=e[l],f=n?n(h):h,new Zs(f,h.node,Zs.BLACK,null,null);{let p=parseInt(u/2,10)+l,v=s(l,p),y=s(p+1,c);return h=e[p],f=n?n(h):h,new Zs(f,h.node,Zs.BLACK,v,y)}},r=function(l){let c=null,u=null,h=e.length,f=function(v,y){let C=h-v,E=h;h-=v;let T=s(C+1,E),R=e[C],F=n?n(R):R;p(new Zs(F,R.node,y,null,T))},p=function(v){c?(c.left=v,c=v):(u=v,c=v)};for(let v=0;v<l.count;++v){let y=l.nextBitIsOne(),C=Math.pow(2,l.count-(v+1));y?f(C,Zs.BLACK):(f(C,Zs.BLACK),f(C,Zs.RED))}return u},o=new lA(e.length),a=r(o);return new Es(i||t,a)};var HI,_d={},Md=class e{constructor(t,n){this.indexes_=t,this.indexSet_=n}static get Default(){return se(_d&&Kn,"ChildrenNode.ts has not been loaded"),HI=HI||new e({".priority":_d},{".priority":Kn}),HI}get(t){let n=ja(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof Es?n:null}hasIndex(t){return ar(this.indexSet_,t.toString())}addIndex(t,n){se(t!==Td,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],s=!1,r=n.getIterator(et.Wrap),o=r.getNext();for(;o;)s=s||t.isDefinedOn(o.node),i.push(o),o=r.getNext();let a;s?a=nw(i,t.getCompare()):a=_d;let l=t.toString(),c=Object.assign({},this.indexSet_);c[l]=t;let u=Object.assign({},this.indexes_);return u[l]=a,new e(u,c)}addToIndexes(t,n){let i=ah(this.indexes_,(s,r)=>{let o=ja(this.indexSet_,r);if(se(o,"Missing index implementation for "+r),s===_d)if(o.isDefinedOn(t.node)){let a=[],l=n.getIterator(et.Wrap),c=l.getNext();for(;c;)c.name!==t.name&&a.push(c),c=l.getNext();return a.push(t),nw(a,o.getCompare())}else return _d;else{let a=n.get(t.name),l=s;return a&&(l=l.remove(new et(t.name,a))),l.insert(t,t.node)}});return new e(i,this.indexSet_)}removeFromIndexes(t,n){let i=ah(this.indexes_,s=>{if(s===_d)return s;{let r=n.get(t.name);return r?s.remove(new et(t.name,r)):s}});return new e(i,this.indexSet_)}};var yp,Ft=(()=>{class e{constructor(n,i,s){this.children_=n,this.priorityNode_=i,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&FW(this.priorityNode_),this.children_.isEmpty()&&se(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return yp||(yp=new e(new Es(BA),null,Md.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||yp}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let i=this.children_.get(n);return i===null?yp:i}}getChild(n){let i=Ze(n);return i===null?this:this.getImmediateChild(i).getChild(Dt(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,i){if(se(i,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(i);{let s=new et(n,i),r,o;i.isEmpty()?(r=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(s,this.children_)):(r=this.children_.insert(n,i),o=this.indexMap_.addToIndexes(s,this.children_));let a=r.isEmpty()?yp:this.priorityNode_;return new e(r,a,o)}}updateChild(n,i){let s=Ze(n);if(s===null)return i;{se(Ze(n)!==".priority"||Na(n)===1,".priority must be the last token in a path");let r=this.getImmediateChild(s).updateChild(Dt(n),i);return this.updateImmediateChild(s,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let i={},s=0,r=0,o=!0;if(this.forEachChild(Kn,(a,l)=>{i[a]=l.val(n),s++,o&&e.INTEGER_REGEXP_.test(a)?r=Math.max(r,Number(a)):o=!1}),!n&&o&&r<2*s){let a=[];for(let l in i)a[l]=i[l];return a}else return n&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+PW(this.getPriority().val())+":"),this.forEachChild(Kn,(i,s)=>{let r=s.hash();r!==""&&(n+=":"+i+":"+r)}),this.lazyHash_=n===""?"":aW(n)}return this.lazyHash_}getPredecessorChildName(n,i,s){let r=this.resolveIndex_(s);if(r){let o=r.getPredecessorKey(new et(n,i));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let i=this.resolveIndex_(n);if(i){let s=i.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(n){let i=this.getFirstChildName(n);return i?new et(i,this.children_.get(i)):null}getLastChildName(n){let i=this.resolveIndex_(n);if(i){let s=i.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(n){let i=this.getLastChildName(n);return i?new et(i,this.children_.get(i)):null}forEachChild(n,i){let s=this.resolveIndex_(n);return s?s.inorderTraversal(r=>i(r.name,r.node)):this.children_.inorderTraversal(i)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,i){let s=this.resolveIndex_(i);if(s)return s.getIteratorFrom(n,r=>r);{let r=this.children_.getIteratorFrom(n.name,et.Wrap),o=r.peek();for(;o!=null&&i.compare(o,n)<0;)r.getNext(),o=r.peek();return r}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,i){let s=this.resolveIndex_(i);if(s)return s.getReverseIteratorFrom(n,r=>r);{let r=this.children_.getReverseIteratorFrom(n.name,et.Wrap),o=r.peek();for(;o!=null&&i.compare(o,n)>0;)r.getNext(),o=r.peek();return r}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Pp?-1:0}withIndex(n){if(n===Td||this.indexMap_.hasIndex(n))return this;{let i=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,i)}}isIndexed(n){return n===Td||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let i=n;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let s=this.getIterator(Kn),r=i.getIterator(Kn),o=s.getNext(),a=r.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=s.getNext(),a=r.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Td?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})(),cA=class extends Ft{constructor(){super(new Es(BA),Ft.EMPTY_NODE,Md.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Ft.EMPTY_NODE}isEmpty(){return!1}},Pp=new cA;Object.defineProperties(et,{MIN:{value:new et(Rd,Ft.EMPTY_NODE)},MAX:{value:new et(uc,Pp)}});tw.__EMPTY_NODE=Ft.EMPTY_NODE;Ad.__childrenNodeConstructor=Ft;sge(Pp);oge(Pp);var lge=!0;function qn(e,t=null){if(e===null)return Ft.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),se(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){let n=e;return new Ad(n,qn(t))}if(!(e instanceof Array)&&lge){let n=[],i=!1;if(Ds(e,(o,a)=>{if(o.substring(0,1)!=="."){let l=qn(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),n.push(new et(o,l)))}}),n.length===0)return Ft.EMPTY_NODE;let r=nw(n,ige,o=>o.name,BA);if(i){let o=nw(n,Kn.getCompare());return new Ft(r,qn(t),new Md({".priority":o},{".priority":Kn}))}else return new Ft(r,qn(t),Md.Default)}else{let n=Ft.EMPTY_NODE;return Ds(e,(i,s)=>{if(ar(e,i)&&i.substring(0,1)!=="."){let r=qn(s);(r.isLeafNode()||!r.isEmpty())&&(n=n.updateImmediateChild(i,r))}}),n.updatePriority(qn(t))}}rge(qn);var uA=class extends Id{constructor(t){super(),this.indexPath_=t,se(!Qe(t)&&Ze(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){let i=this.extractChild(t.node),s=this.extractChild(n.node),r=i.compareTo(s);return r===0?Od(t.name,n.name):r}makePost(t,n){let i=qn(t),s=Ft.EMPTY_NODE.updateChild(this.indexPath_,i);return new et(n,s)}maxPost(){let t=Ft.EMPTY_NODE.updateChild(this.indexPath_,Pp);return new et(uc,t)}toString(){return RW(this.indexPath_,0).join("/")}};var dA=class extends Id{compare(t,n){let i=t.node.compareTo(n.node);return i===0?Od(t.name,n.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return et.MIN}maxPost(){return et.MAX}makePost(t,n){let i=qn(t);return new et(n,i)}toString(){return".value"}},cge=new dA;function uge(e){return{type:"value",snapshotNode:e}}function dge(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function hge(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function WU(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function fge(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}var hA=class e{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Kn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return se(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return se(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Rd}hasEnd(){return this.endSet_}getIndexEndValue(){return se(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return se(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:uc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return se(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Kn}copy(){let t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function jU(e){let t={};if(e.isDefault())return t;let n;if(e.index_===Kn?n="$priority":e.index_===cge?n="$value":e.index_===Td?n="$key":(se(e.index_ instanceof uA,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=pn(n),e.startSet_){let i=e.startAfterSet_?"startAfter":"startAt";t[i]=pn(e.indexStartValue_),e.startNameSet_&&(t[i]+=","+pn(e.indexStartName_))}if(e.endSet_){let i=e.endBeforeSet_?"endBefore":"endAt";t[i]=pn(e.indexEndValue_),e.endNameSet_&&(t[i]+=","+pn(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function zU(e){let t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==Kn&&(t.i=e.index_.toString()),t}var fA=class e extends Xy{constructor(t,n,i,s){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=Ap("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(se(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,n,i,s){let r=t._path.toString();this.log_("Listen called for "+r+" "+t._queryIdentifier);let o=e.getListenId_(t,i),a={};this.listens_[o]=a;let l=jU(t._queryParams);this.restRequest_(r+".json",l,(c,u)=>{let h=u;if(c===404&&(h=null,c=null),c===null&&this.onDataUpdate_(r,h,!1,i),ja(this.listens_,o)===a){let f;c?c===401?f="permission_denied":f="rest_error:"+c:f="ok",s(f,null)}})}unlisten(t,n){let i=e.getListenId_(t,n);delete this.listens_[i]}get(t){let n=jU(t._queryParams),i=t._path.toString(),s=new Ec;return this.restRequest_(i+".json",n,(r,o)=>{let a=o;r===404&&(a=null,r=null),r===null?(this.onDataUpdate_(i,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(t){}restRequest_(t,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,r])=>{s&&s.accessToken&&(n.auth=s.accessToken),r&&r.token&&(n.ac=r.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+kP(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=ag(a.responseText)}catch{Zi("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&Zi("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}};var pA=class{constructor(){this.rootNode_=Ft.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}};function iw(){return{value:null,children:new Map}}function NW(e,t,n){if(Qe(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{let i=Ze(t);e.children.has(i)||e.children.set(i,iw());let s=e.children.get(i);t=Dt(t),NW(s,t,n)}}function gA(e,t,n){e.value!==null?n(t,e.value):pge(e,(i,s)=>{let r=new yt(t.toString()+"/"+i);gA(s,r,n)})}function pge(e,t){e.children.forEach((n,i)=>{t(i,n)})}var mA=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),n=Object.assign({},t);return this.last_&&Ds(this.last_,(i,s)=>{n[i]=n[i]-s}),this.last_=t,n}};var $U=10*1e3,gge=30*1e3,mge=5*60*1e3,vA=class{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new mA(t);let i=$U+(gge-$U)*Math.random();Sp(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let t=this.statsListener_.get(),n={},i=!1;Ds(t,(s,r)=>{r>0&&ar(this.statsToReport_,s)&&(n[s]=r,i=!0)}),i&&this.server_.reportStats(n),Sp(this.reportStats_.bind(this),Math.floor(Math.random()*2*mge))}};var Ro=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(Ro||{});function kW(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function LW(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function VW(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var CA=class e{constructor(t,n,i){this.path=t,this.affectedTree=n,this.revert=i,this.type=Ro.ACK_USER_WRITE,this.source=kW()}operationForChild(t){if(Qe(this.path)){if(this.affectedTree.value!=null)return se(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new yt(t));return new e(dt(),n,this.revert)}}else return se(Ze(this.path)===t,"operationForChild called for unrelated child."),new e(Dt(this.path),this.affectedTree,this.revert)}};var Pd=class e{constructor(t,n,i){this.source=t,this.path=n,this.snap=i,this.type=Ro.OVERWRITE}operationForChild(t){return Qe(this.path)?new e(this.source,dt(),this.snap.getImmediateChild(t)):new e(this.source,Dt(this.path),this.snap)}};var sw=class e{constructor(t,n,i){this.source=t,this.path=n,this.children=i,this.type=Ro.MERGE}operationForChild(t){if(Qe(this.path)){let n=this.children.subtree(new yt(t));return n.isEmpty()?null:n.value?new Pd(this.source,dt(),n.value):new e(this.source,dt(),n)}else return se(Ze(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Dt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Dp=class{constructor(t,n,i){this.node_=t,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Qe(t))return this.isFullyInitialized()&&!this.filtered_;let n=Ze(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};function vge(e,t,n,i){let s=[],r=[];return t.forEach(o=>{o.type==="child_changed"&&e.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&r.push(fge(o.childName,o.snapshotNode))}),wp(e,s,"child_removed",t,i,n),wp(e,s,"child_added",t,i,n),wp(e,s,"child_moved",r,i,n),wp(e,s,"child_changed",t,i,n),wp(e,s,"value",t,i,n),s}function wp(e,t,n,i,s,r){let o=i.filter(a=>a.type===n);o.sort((a,l)=>yge(e,a,l)),o.forEach(a=>{let l=Cge(e,a,r);s.forEach(c=>{c.respondsTo(a.type)&&t.push(c.createEvent(l,e.query_))})})}function Cge(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function yge(e,t,n){if(t.childName==null||n.childName==null)throw bc("Should only compare child_ events.");let i=new et(t.childName,t.snapshotNode),s=new et(n.childName,n.snapshotNode);return e.index_.compare(i,s)}function BW(e,t){return{eventCache:e,serverCache:t}}function bp(e,t,n,i){return BW(new Dp(t,n,i),e.serverCache)}function GW(e,t,n,i){return BW(e.eventCache,new Dp(t,n,i))}function yA(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function dc(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var UI,wge=()=>(UI||(UI=new Es(wpe)),UI),Ii=class e{constructor(t,n=wge()){this.value=t,this.children=n}static fromObject(t){let n=new e(null);return Ds(t,(i,s)=>{n=n.set(new yt(i),s)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:dt(),value:this.value};if(Qe(t))return null;{let i=Ze(t),s=this.children.get(i);if(s!==null){let r=s.findRootMostMatchingPathAndValue(Dt(t),n);return r!=null?{path:En(new yt(i),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Qe(t))return this;{let n=Ze(t),i=this.children.get(n);return i!==null?i.subtree(Dt(t)):new e(null)}}set(t,n){if(Qe(t))return new e(n,this.children);{let i=Ze(t),r=(this.children.get(i)||new e(null)).set(Dt(t),n),o=this.children.insert(i,r);return new e(this.value,o)}}remove(t){if(Qe(t))return this.children.isEmpty()?new e(null):new e(null,this.children);{let n=Ze(t),i=this.children.get(n);if(i){let s=i.remove(Dt(t)),r;return s.isEmpty()?r=this.children.remove(n):r=this.children.insert(n,s),this.value===null&&r.isEmpty()?new e(null):new e(this.value,r)}else return this}}get(t){if(Qe(t))return this.value;{let n=Ze(t),i=this.children.get(n);return i?i.get(Dt(t)):null}}setTree(t,n){if(Qe(t))return n;{let i=Ze(t),r=(this.children.get(i)||new e(null)).setTree(Dt(t),n),o;return r.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,r),new e(this.value,o)}}fold(t){return this.fold_(dt(),t)}fold_(t,n){let i={};return this.children.inorderTraversal((s,r)=>{i[s]=r.fold_(En(t,s),n)}),n(t,this.value,i)}findOnPath(t,n){return this.findOnPath_(t,dt(),n)}findOnPath_(t,n,i){let s=this.value?i(n,this.value):!1;if(s)return s;if(Qe(t))return null;{let r=Ze(t),o=this.children.get(r);return o?o.findOnPath_(Dt(t),En(n,r),i):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,dt(),n)}foreachOnPath_(t,n,i){if(Qe(t))return this;{this.value&&i(n,this.value);let s=Ze(t),r=this.children.get(s);return r?r.foreachOnPath_(Dt(t),En(n,s),i):new e(null)}}foreach(t){this.foreach_(dt(),t)}foreach_(t,n){this.children.inorderTraversal((i,s)=>{s.foreach_(En(t,i),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,i)=>{i.value&&t(n,i.value)})}};var tr=class e{constructor(t){this.writeTree_=t}static empty(){return new e(new Ii(null))}};function Ep(e,t,n){if(Qe(t))return new tr(new Ii(n));{let i=e.writeTree_.findRootMostValueAndPath(t);if(i!=null){let s=i.path,r=i.value,o=bs(s,t);return r=r.updateChild(o,n),new tr(e.writeTree_.set(s,r))}else{let s=new Ii(n),r=e.writeTree_.setTree(t,s);return new tr(r)}}}function qU(e,t,n){let i=e;return Ds(n,(s,r)=>{i=Ep(i,En(t,s),r)}),i}function KU(e,t){if(Qe(t))return tr.empty();{let n=e.writeTree_.setTree(t,new Ii(null));return new tr(n)}}function wA(e,t){return hc(e,t)!=null}function hc(e,t){let n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(bs(n.path,t)):null}function QU(e){let t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Kn,(i,s)=>{t.push(new et(i,s))}):e.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&t.push(new et(i,s.value))}),t}function Oa(e,t){if(Qe(t))return e;{let n=hc(e,t);return n!=null?new tr(new Ii(n)):new tr(e.writeTree_.subtree(t))}}function SA(e){return e.writeTree_.isEmpty()}function Fd(e,t){return HW(dt(),e.writeTree_,t)}function HW(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal((s,r)=>{s===".priority"?(se(r.value!==null,"Priority writes must always be leaf nodes"),i=r.value):n=HW(En(e,s),r,n)}),!n.getChild(e).isEmpty()&&i!==null&&(n=n.updateChild(En(e,".priority"),i)),n}}function UW(e,t){return qW(t,e)}function Sge(e,t,n,i,s){se(i>e.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:s}),s&&(e.visibleWrites=Ep(e.visibleWrites,t,n)),e.lastWriteId=i}function _ge(e,t){for(let n=0;n<e.allWrites.length;n++){let i=e.allWrites[n];if(i.writeId===t)return i}return null}function bge(e,t){let n=e.allWrites.findIndex(a=>a.writeId===t);se(n>=0,"removeWrite called with nonexistent writeId.");let i=e.allWrites[n];e.allWrites.splice(n,1);let s=i.visible,r=!1,o=e.allWrites.length-1;for(;s&&o>=0;){let a=e.allWrites[o];a.visible&&(o>=n&&Ege(a,i.path)?s=!1:er(i.path,a.path)&&(r=!0)),o--}if(s){if(r)return Dge(e),!0;if(i.snap)e.visibleWrites=KU(e.visibleWrites,i.path);else{let a=i.children;Ds(a,l=>{e.visibleWrites=KU(e.visibleWrites,En(i.path,l))})}return!0}else return!1}function Ege(e,t){if(e.snap)return er(e.path,t);for(let n in e.children)if(e.children.hasOwnProperty(n)&&er(En(e.path,n),t))return!0;return!1}function Dge(e){e.visibleWrites=WW(e.allWrites,Tge,dt()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function Tge(e){return e.visible}function WW(e,t,n){let i=tr.empty();for(let s=0;s<e.length;++s){let r=e[s];if(t(r)){let o=r.path,a;if(r.snap)er(n,o)?(a=bs(n,o),i=Ep(i,a,r.snap)):er(o,n)&&(a=bs(o,n),i=Ep(i,dt(),r.snap.getChild(a)));else if(r.children){if(er(n,o))a=bs(n,o),i=qU(i,a,r.children);else if(er(o,n))if(a=bs(o,n),Qe(a))i=qU(i,dt(),r.children);else{let l=ja(r.children,Ze(a));if(l){let c=l.getChild(Dt(a));i=Ep(i,dt(),c)}}}else throw bc("WriteRecord should have .snap or .children")}}return i}function jW(e,t,n,i,s){if(!i&&!s){let r=hc(e.visibleWrites,t);if(r!=null)return r;{let o=Oa(e.visibleWrites,t);if(SA(o))return n;if(n==null&&!wA(o,dt()))return null;{let a=n||Ft.EMPTY_NODE;return Fd(o,a)}}}else{let r=Oa(e.visibleWrites,t);if(!s&&SA(r))return n;if(!s&&n==null&&!wA(r,dt()))return null;{let o=function(c){return(c.visible||s)&&(!i||!~i.indexOf(c.writeId))&&(er(c.path,t)||er(t,c.path))},a=WW(e.allWrites,o,t),l=n||Ft.EMPTY_NODE;return Fd(a,l)}}}function Rge(e,t,n){let i=Ft.EMPTY_NODE,s=hc(e.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild(Kn,(r,o)=>{i=i.updateImmediateChild(r,o)}),i;if(n){let r=Oa(e.visibleWrites,t);return n.forEachChild(Kn,(o,a)=>{let l=Fd(Oa(r,new yt(o)),a);i=i.updateImmediateChild(o,l)}),QU(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{let r=Oa(e.visibleWrites,t);return QU(r).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function Ige(e,t,n,i,s){se(i||s,"Either existingEventSnap or existingServerSnap must exist");let r=En(t,n);if(wA(e.visibleWrites,r))return null;{let o=Oa(e.visibleWrites,r);return SA(o)?s.getChild(n):Fd(o,s.getChild(n))}}function Age(e,t,n,i){let s=En(t,n),r=hc(e.visibleWrites,s);if(r!=null)return r;if(i.isCompleteForChild(n)){let o=Oa(e.visibleWrites,s);return Fd(o,i.getNode().getImmediateChild(n))}else return null}function Mge(e,t){return hc(e.visibleWrites,t)}function Pge(e,t,n,i,s,r,o){let a,l=Oa(e.visibleWrites,t),c=hc(l,dt());if(c!=null)a=c;else if(n!=null)a=Fd(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],h=o.getCompare(),f=r?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o),p=f.getNext();for(;p&&u.length<s;)h(p,i)!==0&&u.push(p),p=f.getNext();return u}else return[]}function Fge(){return{visibleWrites:tr.empty(),allWrites:[],lastWriteId:-1}}function _A(e,t,n,i){return jW(e.writeTree,e.treePath,t,n,i)}function zW(e,t){return Rge(e.writeTree,e.treePath,t)}function YU(e,t,n,i){return Ige(e.writeTree,e.treePath,t,n,i)}function rw(e,t){return Mge(e.writeTree,En(e.treePath,t))}function xge(e,t,n,i,s,r){return Pge(e.writeTree,e.treePath,t,n,i,s,r)}function GA(e,t,n){return Age(e.writeTree,e.treePath,t,n)}function $W(e,t){return qW(En(e.treePath,t),e.writeTree)}function qW(e,t){return{treePath:e,writeTree:t}}var bA=class{constructor(){this.changeMap=new Map}trackChildChange(t){let n=t.type,i=t.childName;se(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),se(i!==".priority","Only non-priority child changes can be tracked.");let s=this.changeMap.get(i);if(s){let r=s.type;if(n==="child_added"&&r==="child_removed")this.changeMap.set(i,WU(i,t.snapshotNode,s.snapshotNode));else if(n==="child_removed"&&r==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&r==="child_changed")this.changeMap.set(i,hge(i,s.oldSnap));else if(n==="child_changed"&&r==="child_added")this.changeMap.set(i,dge(i,t.snapshotNode));else if(n==="child_changed"&&r==="child_changed")this.changeMap.set(i,WU(i,t.snapshotNode,s.oldSnap));else throw bc("Illegal combination of changes: "+t+" occurred after "+s)}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}};var EA=class{getCompleteChild(t){return null}getChildAfterChild(t,n,i){return null}},KW=new EA,Tp=class{constructor(t,n,i=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(t){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{let i=this.optCompleteServerCache_!=null?new Dp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return GA(this.writes_,t,i)}}getChildAfterChild(t,n,i){let s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:dc(this.viewCache_),r=xge(this.writes_,s,n,1,i,t);return r.length===0?null:r[0]}};function Oge(e,t){se(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),se(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function Nge(e,t,n,i,s){let r=new bA,o,a;if(n.type===Ro.OVERWRITE){let c=n;c.source.fromUser?o=DA(e,t,c.path,c.snap,i,s,r):(se(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered()&&!Qe(c.path),o=ow(e,t,c.path,c.snap,i,s,a,r))}else if(n.type===Ro.MERGE){let c=n;c.source.fromUser?o=Lge(e,t,c.path,c.children,i,s,r):(se(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered(),o=TA(e,t,c.path,c.children,i,s,a,r))}else if(n.type===Ro.ACK_USER_WRITE){let c=n;c.revert?o=Gge(e,t,c.path,i,s,r):o=Vge(e,t,c.path,c.affectedTree,i,s,r)}else if(n.type===Ro.LISTEN_COMPLETE)o=Bge(e,t,n.path,i,r);else throw bc("Unknown operation type: "+n.type);let l=r.getChanges();return kge(t,o,l),{viewCache:o,changes:l}}function kge(e,t,n){let i=t.eventCache;if(i.isFullyInitialized()){let s=i.getNode().isLeafNode()||i.getNode().isEmpty(),r=yA(e);(n.length>0||!e.eventCache.isFullyInitialized()||s&&!i.getNode().equals(r)||!i.getNode().getPriority().equals(r.getPriority()))&&n.push(uge(yA(t)))}}function QW(e,t,n,i,s,r){let o=t.eventCache;if(rw(i,n)!=null)return t;{let a,l;if(Qe(n))if(se(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let c=dc(t),u=c instanceof Ft?c:Ft.EMPTY_NODE,h=zW(i,u);a=e.filter.updateFullNode(t.eventCache.getNode(),h,r)}else{let c=_A(i,dc(t));a=e.filter.updateFullNode(t.eventCache.getNode(),c,r)}else{let c=Ze(n);if(c===".priority"){se(Na(n)===1,"Can't have a priority with additional path components");let u=o.getNode();l=t.serverCache.getNode();let h=YU(i,n,u,l);h!=null?a=e.filter.updatePriority(u,h):a=o.getNode()}else{let u=Dt(n),h;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();let f=YU(i,n,o.getNode(),l);f!=null?h=o.getNode().getImmediateChild(c).updateChild(u,f):h=o.getNode().getImmediateChild(c)}else h=GA(i,c,t.serverCache);h!=null?a=e.filter.updateChild(o.getNode(),c,h,u,s,r):a=o.getNode()}}return bp(t,a,o.isFullyInitialized()||Qe(n),e.filter.filtersNodes())}}function ow(e,t,n,i,s,r,o,a){let l=t.serverCache,c,u=o?e.filter:e.filter.getIndexedFilter();if(Qe(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){let p=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),p,null)}else{let p=Ze(n);if(!l.isCompleteForPath(n)&&Na(n)>1)return t;let v=Dt(n),C=l.getNode().getImmediateChild(p).updateChild(v,i);p===".priority"?c=u.updatePriority(l.getNode(),C):c=u.updateChild(l.getNode(),p,C,v,KW,null)}let h=GW(t,c,l.isFullyInitialized()||Qe(n),u.filtersNodes()),f=new Tp(s,h,r);return QW(e,h,n,s,f,a)}function DA(e,t,n,i,s,r,o){let a=t.eventCache,l,c,u=new Tp(s,t,r);if(Qe(n))c=e.filter.updateFullNode(t.eventCache.getNode(),i,o),l=bp(t,c,!0,e.filter.filtersNodes());else{let h=Ze(n);if(h===".priority")c=e.filter.updatePriority(t.eventCache.getNode(),i),l=bp(t,c,a.isFullyInitialized(),a.isFiltered());else{let f=Dt(n),p=a.getNode().getImmediateChild(h),v;if(Qe(f))v=i;else{let y=u.getCompleteChild(h);y!=null?TW(f)===".priority"&&y.getChild(IW(f)).isEmpty()?v=y:v=y.updateChild(f,i):v=Ft.EMPTY_NODE}if(p.equals(v))l=t;else{let y=e.filter.updateChild(a.getNode(),h,v,f,u,o);l=bp(t,y,a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function JU(e,t){return e.eventCache.isCompleteForChild(t)}function Lge(e,t,n,i,s,r,o){let a=t;return i.foreach((l,c)=>{let u=En(n,l);JU(t,Ze(u))&&(a=DA(e,a,u,c,s,r,o))}),i.foreach((l,c)=>{let u=En(n,l);JU(t,Ze(u))||(a=DA(e,a,u,c,s,r,o))}),a}function XU(e,t,n){return n.foreach((i,s)=>{t=t.updateChild(i,s)}),t}function TA(e,t,n,i,s,r,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l=t,c;Qe(n)?c=i:c=new Ii(null).setTree(n,i);let u=t.serverCache.getNode();return c.children.inorderTraversal((h,f)=>{if(u.hasChild(h)){let p=t.serverCache.getNode().getImmediateChild(h),v=XU(e,p,f);l=ow(e,l,new yt(h),v,s,r,o,a)}}),c.children.inorderTraversal((h,f)=>{let p=!t.serverCache.isCompleteForChild(h)&&f.value===null;if(!u.hasChild(h)&&!p){let v=t.serverCache.getNode().getImmediateChild(h),y=XU(e,v,f);l=ow(e,l,new yt(h),y,s,r,o,a)}}),l}function Vge(e,t,n,i,s,r,o){if(rw(s,n)!=null)return t;let a=t.serverCache.isFiltered(),l=t.serverCache;if(i.value!=null){if(Qe(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return ow(e,t,n,l.getNode().getChild(n),s,r,a,o);if(Qe(n)){let c=new Ii(null);return l.getNode().forEachChild(Td,(u,h)=>{c=c.set(new yt(u),h)}),TA(e,t,n,c,s,r,a,o)}else return t}else{let c=new Ii(null);return i.foreach((u,h)=>{let f=En(n,u);l.isCompleteForPath(f)&&(c=c.set(u,l.getNode().getChild(f)))}),TA(e,t,n,c,s,r,a,o)}}function Bge(e,t,n,i,s){let r=t.serverCache,o=GW(t,r.getNode(),r.isFullyInitialized()||Qe(n),r.isFiltered());return QW(e,o,n,i,KW,s)}function Gge(e,t,n,i,s,r){let o;if(rw(i,n)!=null)return t;{let a=new Tp(i,t,s),l=t.eventCache.getNode(),c;if(Qe(n)||Ze(n)===".priority"){let u;if(t.serverCache.isFullyInitialized())u=_A(i,dc(t));else{let h=t.serverCache.getNode();se(h instanceof Ft,"serverChildren would be complete if leaf node"),u=zW(i,h)}u=u,c=e.filter.updateFullNode(l,u,r)}else{let u=Ze(n),h=GA(i,u,t.serverCache);h==null&&t.serverCache.isCompleteForChild(u)&&(h=l.getImmediateChild(u)),h!=null?c=e.filter.updateChild(l,u,h,Dt(n),a,r):t.eventCache.getNode().hasChild(u)?c=e.filter.updateChild(l,u,Ft.EMPTY_NODE,Dt(n),a,r):c=l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=_A(i,dc(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,r)))}return o=t.serverCache.isFullyInitialized()||rw(i,dt())!=null,bp(t,c,o,e.filter.filtersNodes())}}function Hge(e,t){let n=dc(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Qe(t)&&!n.getImmediateChild(Ze(t)).isEmpty())?n.getChild(t):null}function ZU(e,t,n,i){t.type===Ro.MERGE&&t.source.queryId!==null&&(se(dc(e.viewCache_),"We should always have a full cache before handling merges"),se(yA(e.viewCache_),"Missing event cache, even though we have a server cache"));let s=e.viewCache_,r=Nge(e.processor_,s,t,n,i);return Oge(e.processor_,r.viewCache),se(r.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=r.viewCache,Uge(e,r.changes,r.viewCache.eventCache.getNode(),null)}function Uge(e,t,n,i){let s=i?[i]:e.eventRegistrations_;return vge(e.eventGenerator_,t,n,s)}var eW;function Wge(e){se(!eW,"__referenceConstructor has already been defined"),eW=e}function HA(e,t,n,i){let s=t.source.queryId;if(s!==null){let r=e.views.get(s);return se(r!=null,"SyncTree gave us an op for an invalid query."),ZU(r,t,n,i)}else{let r=[];for(let o of e.views.values())r=r.concat(ZU(o,t,n,i));return r}}function UA(e,t){let n=null;for(let i of e.views.values())n=n||Hge(i,t);return n}var tW;function jge(e){se(!tW,"__referenceConstructor has already been defined"),tW=e}var aw=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Ii(null),this.pendingWriteTree_=Fge(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function zge(e,t,n,i,s){return Sge(e.pendingWriteTree_,t,n,i,s),s?cw(e,new Pd(kW(),t,n)):[]}function Ed(e,t,n=!1){let i=_ge(e.pendingWriteTree_,t);if(bge(e.pendingWriteTree_,t)){let r=new Ii(null);return i.snap!=null?r=r.set(dt(),!0):Ds(i.children,o=>{r=r.set(new yt(o),!0)}),cw(e,new CA(i.path,r,n))}else return[]}function lw(e,t,n){return cw(e,new Pd(LW(),t,n))}function $ge(e,t,n){let i=Ii.fromObject(n);return cw(e,new sw(LW(),t,i))}function qge(e,t,n,i){let s=ZW(e,i);if(s!=null){let r=ej(s),o=r.path,a=r.queryId,l=bs(o,t),c=new Pd(VW(a),l,n);return tj(e,o,c)}else return[]}function Kge(e,t,n,i){let s=ZW(e,i);if(s){let r=ej(s),o=r.path,a=r.queryId,l=bs(o,t),c=Ii.fromObject(n),u=new sw(VW(a),l,c);return tj(e,o,u)}else return[]}function YW(e,t,n){let s=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,(o,a)=>{let l=bs(o,t),c=UA(a,l);if(c)return c});return jW(s,t,r,n,!0)}function cw(e,t){return JW(t,e.syncPointTree_,null,UW(e.pendingWriteTree_,dt()))}function JW(e,t,n,i){if(Qe(e.path))return XW(e,t,n,i);{let s=t.get(dt());n==null&&s!=null&&(n=UA(s,dt()));let r=[],o=Ze(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){let c=n?n.getImmediateChild(o):null,u=$W(i,o);r=r.concat(JW(a,l,c,u))}return s&&(r=r.concat(HA(s,e,i,n))),r}}function XW(e,t,n,i){let s=t.get(dt());n==null&&s!=null&&(n=UA(s,dt()));let r=[];return t.children.inorderTraversal((o,a)=>{let l=n?n.getImmediateChild(o):null,c=$W(i,o),u=e.operationForChild(o);u&&(r=r.concat(XW(u,a,l,c)))}),s&&(r=r.concat(HA(s,e,i,n))),r}function ZW(e,t){return e.tagToQueryMap.get(t)}function ej(e){let t=e.indexOf("$");return se(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new yt(e.substr(0,t))}}function tj(e,t,n){let i=e.syncPointTree_.get(t);se(i,"Missing sync point for query tag that we're tracking");let s=UW(e.pendingWriteTree_,t);return HA(i,n,s,null)}var RA=class e{constructor(t){this.node_=t}getImmediateChild(t){let n=this.node_.getImmediateChild(t);return new e(n)}node(){return this.node_}},IA=class e{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){let n=En(this.path_,t);return new e(this.syncTree_,n)}node(){return YW(this.syncTree_,this.path_)}},Qge=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},nW=function(e,t,n){if(!e||typeof e!="object")return e;if(se(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return Yge(e[".sv"],t,n);if(typeof e[".sv"]=="object")return Jge(e[".sv"],t);se(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},Yge=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:se(!1,"Unexpected server value: "+e)}},Jge=function(e,t,n){e.hasOwnProperty("increment")||se(!1,"Unexpected server value: "+JSON.stringify(e,null,2));let i=e.increment;typeof i!="number"&&se(!1,"Unexpected increment value: "+i);let s=t.node();if(se(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;let o=s.getValue();return typeof o!="number"?i:o+i},Xge=function(e,t,n,i){return WA(t,new IA(n,e),i)},Zge=function(e,t,n){return WA(e,new RA(t),n)};function WA(e,t,n){let i=e.getPriority().val(),s=nW(i,t.getImmediateChild(".priority"),n),r;if(e.isLeafNode()){let o=e,a=nW(o.getValue(),t,n);return a!==o.getValue()||s!==o.getPriority().val()?new Ad(a,qn(s)):e}else{let o=e;return r=o,s!==o.getPriority().val()&&(r=r.updatePriority(new Ad(s))),o.forEachChild(Kn,(a,l)=>{let c=WA(l,t.getImmediateChild(a),n);c!==l&&(r=r.updateImmediateChild(a,c))}),r}}var Rp=class{constructor(t="",n=null,i={children:{},childCount:0}){this.name=t,this.parent=n,this.node=i}};function jA(e,t){let n=t instanceof yt?t:new yt(t),i=e,s=Ze(n);for(;s!==null;){let r=ja(i.node.children,s)||{children:{},childCount:0};i=new Rp(s,i,r),n=Dt(n),s=Ze(n)}return i}function Nd(e){return e.node.value}function nj(e,t){e.node.value=t,AA(e)}function ij(e){return e.node.childCount>0}function eme(e){return Nd(e)===void 0&&!ij(e)}function uw(e,t){Ds(e.node.children,(n,i)=>{t(new Rp(n,e,i))})}function sj(e,t,n,i){n&&!i&&t(e),uw(e,s=>{sj(s,t,!0,i)}),n&&i&&t(e)}function tme(e,t,n){let i=n?e:e.parent;for(;i!==null;){if(t(i))return!0;i=i.parent}return!1}function Fp(e){return new yt(e.parent===null?e.name:Fp(e.parent)+"/"+e.name)}function AA(e){e.parent!==null&&nme(e.parent,e.name,e)}function nme(e,t,n){let i=eme(n),s=ar(e.node.children,t);i&&s?(delete e.node.children[t],e.node.childCount--,AA(e)):!i&&!s&&(e.node.children[t]=n.node,e.node.childCount++,AA(e))}var ime=/[\[\].#$\/\u0000-\u001F\u007F]/,sme=/[\[\].#$\u0000-\u001F\u007F]/,WI=10*1024*1024,rj=function(e){return typeof e=="string"&&e.length!==0&&!ime.test(e)},rme=function(e){return typeof e=="string"&&e.length!==0&&!sme.test(e)},ome=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),rme(e)};var oj=function(e,t,n){let i=n instanceof yt?new iA(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+ac(i));if(typeof t=="function")throw new Error(e+"contains a function "+ac(i)+" with contents = "+t.toString());if(lW(t))throw new Error(e+"contains "+t.toString()+" "+ac(i));if(typeof t=="string"&&t.length>WI/3&&ch(t)>WI)throw new Error(e+"contains a string greater than "+WI+" utf8 bytes "+ac(i)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let s=!1,r=!1;if(Ds(t,(o,a)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(r=!0,!rj(o)))throw new Error(e+" contains an invalid key ("+o+") "+ac(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Jpe(i,o),oj(e,a,i),Xpe(i)}),s&&r)throw new Error(e+' contains ".value" child '+ac(i)+" in addition to actual children.")}};var ame=function(e,t){let n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!rj(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!ome(n))throw new Error(VP(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var MA=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function lme(e,t){let n=null;for(let i=0;i<t.length;i++){let s=t[i],r=s.getPath();n!==null&&!AW(r,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:r}),n.events.push(s)}n&&e.eventLists_.push(n)}function fc(e,t,n){lme(e,n),cme(e,i=>er(i,t)||er(t,i))}function cme(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){let s=e.eventLists_[i];if(s){let r=s.path;t(r)?(ume(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function ume(e){for(let t=0;t<e.events.length;t++){let n=e.events[t];if(n!==null){e.events[t]=null;let i=n.getEventRunner();cc&&$n("event: "+n.toString()),Mp(i)}}}var dme="repo_interrupt",hme=25,PA=class{constructor(t,n,i,s){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new MA,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=iw(),this.transactionQueueTree_=new Rp,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function fme(e,t,n){if(e.stats_=LA(e.repoInfo_),e.forceRestClient_||Tpe())e.server_=new fA(e.repoInfo_,(i,s,r,o)=>{iW(e,i,s,r,o)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>sW(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{pn(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}e.persistentConnection_=new VA(e.repoInfo_,t,(i,s,r,o)=>{iW(e,i,s,r,o)},i=>{sW(e,i)},i=>{gme(e,i)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(i=>{e.server_.refreshAuthToken(i)}),e.appCheckProvider_.addTokenChangeListener(i=>{e.server_.refreshAppCheckToken(i.token)}),e.statsReporter_=Ipe(e.repoInfo_,()=>new vA(e.stats_,e.server_)),e.infoData_=new pA,e.infoSyncTree_=new aw({startListening:(i,s,r,o)=>{let a=[],l=e.infoData_.getNode(i._path);return l.isEmpty()||(a=lw(e.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),zA(e,"connected",!1),e.serverSyncTree_=new aw({startListening:(i,s,r,o)=>(e.server_.listen(i,r,s,(a,l)=>{let c=o(a,l);fc(e.eventQueue_,i._path,c)}),[]),stopListening:(i,s)=>{e.server_.unlisten(i,s)}})}function pme(e){let n=e.infoData_.getNode(new yt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function aj(e){return Qge({timestamp:pme(e)})}function iW(e,t,n,i,s){e.dataUpdateCount++;let r=new yt(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(s)if(i){let l=ah(n,c=>qn(c));o=Kge(e.serverSyncTree_,r,l,s)}else{let l=qn(n);o=qge(e.serverSyncTree_,r,l,s)}else if(i){let l=ah(n,c=>qn(c));o=$ge(e.serverSyncTree_,r,l)}else{let l=qn(n);o=lw(e.serverSyncTree_,r,l)}let a=r;o.length>0&&(a=qA(e,r)),fc(e.eventQueue_,a,o)}function sW(e,t){zA(e,"connected",t),t===!1&&vme(e)}function gme(e,t){Ds(t,(n,i)=>{zA(e,n,i)})}function zA(e,t,n){let i=new yt("/.info/"+t),s=qn(n);e.infoData_.updateSnapshot(i,s);let r=lw(e.infoSyncTree_,i,s);fc(e.eventQueue_,i,r)}function mme(e){return e.nextWriteId_++}function vme(e){lj(e,"onDisconnectEvents");let t=aj(e),n=iw();gA(e.onDisconnect_,dt(),(s,r)=>{let o=Xge(s,r,e.serverSyncTree_,t);NW(n,s,o)});let i=[];gA(n,dt(),(s,r)=>{i=i.concat(lw(e.serverSyncTree_,s,r));let o=Sme(e,s);qA(e,o)}),e.onDisconnect_=iw(),fc(e.eventQueue_,dt(),i)}function Cme(e){e.persistentConnection_&&e.persistentConnection_.interrupt(dme)}function lj(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),$n(n,...t)}function cj(e,t,n){return YW(e.serverSyncTree_,t,n)||Ft.EMPTY_NODE}function $A(e,t=e.transactionQueueTree_){if(t||dw(e,t),Nd(t)){let n=dj(e,t);se(n.length>0,"Sending zero length transaction queue"),n.every(s=>s.status===0)&&yme(e,Fp(t),n)}else ij(t)&&uw(t,n=>{$A(e,n)})}function yme(e,t,n){let i=n.map(c=>c.currentWriteId),s=cj(e,t,i),r=s,o=s.hash();for(let c=0;c<n.length;c++){let u=n[c];se(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let h=bs(t,u.path);r=r.updateChild(h,u.currentOutputSnapshotRaw)}let a=r.val(!0),l=t;e.server_.put(l.toString(),a,c=>{lj(e,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){let h=[];for(let f=0;f<n.length;f++)n[f].status=2,u=u.concat(Ed(e.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&h.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();dw(e,jA(e.transactionQueueTree_,t)),$A(e,e.transactionQueueTree_),fc(e.eventQueue_,t,u);for(let f=0;f<h.length;f++)Mp(h[f])}else{if(c==="datastale")for(let h=0;h<n.length;h++)n[h].status===3?n[h].status=4:n[h].status=0;else{Zi("transaction at "+l.toString()+" failed: "+c);for(let h=0;h<n.length;h++)n[h].status=4,n[h].abortReason=c}qA(e,t)}},o)}function qA(e,t){let n=uj(e,t),i=Fp(n),s=dj(e,n);return wme(e,s,i),i}function wme(e,t,n){if(t.length===0)return;let i=[],s=[],o=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let l=t[a],c=bs(n,l.path),u=!1,h;if(se(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,h=l.abortReason,s=s.concat(Ed(e.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=hme)u=!0,h="maxretry",s=s.concat(Ed(e.serverSyncTree_,l.currentWriteId,!0));else{let f=cj(e,l.path,o);l.currentInputSnapshot=f;let p=t[a].update(f.val());if(p!==void 0){oj("transaction failed: Data returned ",p,l.path);let v=qn(p);typeof p=="object"&&p!=null&&ar(p,".priority")||(v=v.updatePriority(f.getPriority()));let C=l.currentWriteId,E=aj(e),T=Zge(v,f,E);l.currentOutputSnapshotRaw=v,l.currentOutputSnapshotResolved=T,l.currentWriteId=mme(e),o.splice(o.indexOf(C),1),s=s.concat(zge(e.serverSyncTree_,l.path,T,l.currentWriteId,l.applyLocally)),s=s.concat(Ed(e.serverSyncTree_,C,!0))}else u=!0,h="nodata",s=s.concat(Ed(e.serverSyncTree_,l.currentWriteId,!0))}fc(e.eventQueue_,n,s),s=[],u&&(t[a].status=2,function(f){setTimeout(f,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(h==="nodata"?i.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):i.push(()=>t[a].onComplete(new Error(h),!1,null))))}dw(e,e.transactionQueueTree_);for(let a=0;a<i.length;a++)Mp(i[a]);$A(e,e.transactionQueueTree_)}function uj(e,t){let n,i=e.transactionQueueTree_;for(n=Ze(t);n!==null&&Nd(i)===void 0;)i=jA(i,n),t=Dt(t),n=Ze(t);return i}function dj(e,t){let n=[];return hj(e,t,n),n.sort((i,s)=>i.order-s.order),n}function hj(e,t,n){let i=Nd(t);if(i)for(let s=0;s<i.length;s++)n.push(i[s]);uw(t,s=>{hj(e,s,n)})}function dw(e,t){let n=Nd(t);if(n){let i=0;for(let s=0;s<n.length;s++)n[s].status!==2&&(n[i]=n[s],i++);n.length=i,nj(t,n.length>0?n:void 0)}uw(t,i=>{dw(e,i)})}function Sme(e,t){let n=Fp(uj(e,t)),i=jA(e.transactionQueueTree_,t);return tme(i,s=>{jI(e,s)}),jI(e,i),sj(i,s=>{jI(e,s)}),n}function jI(e,t){let n=Nd(t);if(n){let i=[],s=[],r=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(se(r===o-1,"All SENT items should be at beginning of queue."),r=o,n[o].status=3,n[o].abortReason="set"):(se(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),s=s.concat(Ed(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));r===-1?nj(t,void 0):n.length=r+1,fc(e.eventQueue_,Fp(t),s);for(let o=0;o<i.length;o++)Mp(i[o])}}function _me(e){let t="",n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let s=n[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}t+="/"+s}return t}function bme(e){let t={};e.charAt(0)==="?"&&(e=e.substring(1));for(let n of e.split("&")){if(n.length===0)continue;let i=n.split("=");i.length===2?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Zi(`Invalid query segment '${n}' in query '${e}'`)}return t}var rW=function(e,t){let n=Eme(e),i=n.namespace;n.domain==="firebase.com"&&Io(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&Io("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Cpe();let s=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Yy(n.host,n.secure,i,s,t,"",i!==n.subdomain),path:new yt(n.pathString)}},Eme=function(e){let t="",n="",i="",s="",r="",o=!0,a="https",l=443;if(typeof e=="string"){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");u===-1&&(u=e.length);let h=e.indexOf("?");h===-1&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(s=_me(e.substring(u,h)));let f=bme(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(t.substring(c+1),10)):c=t.length;let p=t.slice(0,c);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{let v=t.indexOf(".");i=t.substring(0,v).toLowerCase(),n=t.substring(v+1),r=i}"ns"in f&&(r=f.ns)}return{host:t,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:s,namespace:r}};var FA=class e{constructor(t,n,i,s){this._repo=t,this._path=n,this._queryParams=i,this._orderByCalled=s}get key(){return Qe(this._path)?null:TW(this._path)}get ref(){return new xd(this._repo,this._path)}get _queryIdentifier(){let t=zU(this._queryParams),n=kA(t);return n==="{}"?"default":n}get _queryObject(){return zU(this._queryParams)}isEqual(t){if(t=ct(t),!(t instanceof e))return!1;let n=this._repo===t._repo,i=AW(this._path,t._path),s=this._queryIdentifier===t._queryIdentifier;return n&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Ype(this._path)}};var xd=class e extends FA{constructor(t,n){super(t,n,new hA,!1)}get parent(){let t=IW(this._path);return t===null?null:new e(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}};Wge(xd);jge(xd);var Dme="FIREBASE_DATABASE_EMULATOR_HOST",xA={},Tme=!1;function Rme(e,t,n,i){e.repoInfo_=new Yy(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),i&&(e.authTokenProvider_=i)}function Ime(e,t,n,i,s){let r=i||e.options.databaseURL;r===void 0&&(e.options.projectId||Io("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),$n("Using default host for project ",e.options.projectId),r=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o=rW(r,s),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[Dme]),c?(l=!0,r=`http://${c}?ns=${a.namespace}`,o=rW(r,s),a=o.repoInfo):l=!o.repoInfo.secure;let u=s&&l?new _p(_p.OWNER):new YI(e.name,e.options,t);ame("Invalid Firebase Database URL",o),Qe(o.path)||Io("Database URL must point to the root of a Firebase Database (not including a child path).");let h=Mme(a,e,u,new QI(e.name,n));return new OA(h,e)}function Ame(e,t){let n=xA[t];(!n||n[e.key]!==e)&&Io(`Database ${t}(${e.repoInfo_}) has already been deleted.`),Cme(e),delete n[e.key]}function Mme(e,t,n,i){let s=xA[t.name];s||(s={},xA[t.name]=s);let r=s[e.toURLString()];return r&&Io("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new PA(e,Tme,n,i),s[e.toURLString()]=r,r}var OA=class{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(fme(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new xd(this._repo,dt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Ame(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Io("Cannot call "+t+" on a deleted database.")}};function fj(e=gn(),t){let n=on(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){let i=Vo("database");i&&pj(n,...i)}return n}function pj(e,t,n,i={}){e=ct(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Io("Cannot call useEmulator() after instance has already been initialized.");let s=e._repoInternal,r;if(s.repoInfo_.nodeAdmin)i.mockUserToken&&Io('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),r=new _p(_p.OWNER);else if(i.mockUserToken){let o=typeof i.mockUserToken=="string"?i.mockUserToken:Dc(i.mockUserToken,e.app.options.projectId);r=new _p(o)}Rme(s,t,n,r)}function Pme(e){gpe(Bo),Nt(new Ot("database",(t,{instanceIdentifier:n})=>{let i=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return Ime(i,s,r,n)},"PUBLIC").setMultipleInstances(!0)),Se(RU,IU,e),Se(RU,IU,"esm2017")}VA.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};VA.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};Pme();var xp=class{constructor(t){return t}},gj="database",KA=class{constructor(){return Fn(gj)}};var QA=new te("angularfire2.database-instances");function Fme(e,t){let n=Bn(gj,e,t);return n&&new xp(n)}function xme(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new xp(i)}}var Ome={provide:KA,deps:[[new Le,QA]]},Nme={provide:xp,useFactory:Fme,deps:[[new Le,QA],$t]};function mj(e,...t){return Se("angularfire",Bt.full,"rtdb"),mt([Nme,Ome,{provide:QA,useFactory:xme(e),multi:!0,deps:[de,Ge,Xt,un,[new Le,Ws],[new Le,ii],...t]}])}var vj=je(fj,!0);var wj="functions";var YA=class{constructor(t,n,i){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||i.get().then(s=>this.appCheck=s,()=>{})}getAuthToken(){return x(this,null,function*(){if(this.auth)try{let t=yield this.auth.getToken();return t?.accessToken}catch{return}})}getMessagingToken(){return x(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(t){return x(this,null,function*(){if(this.appCheck){let n=t?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return n.error?null:n.token}return null})}getContext(t){return x(this,null,function*(){let n=yield this.getAuthToken(),i=yield this.getMessagingToken(),s=yield this.getAppCheckToken(t);return{authToken:n,messagingToken:i,appCheckToken:s}})}};var JA="us-central1";var XA=class{constructor(t,n,i,s,r=JA,o){this.app=t,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new YA(n,i,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(r);this.customDomain=a.origin,this.region=JA}catch{this.customDomain=null,this.region=r}}_delete(){return this.deleteService()}_url(t){let n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${n}.cloudfunctions.net/${t}`}};function kme(e,t,n){e.emulatorOrigin=`http://${t}:${n}`}var Cj="@firebase/functions",yj="0.11.6";var Lme="auth-internal",Vme="app-check-internal",Bme="messaging-internal";function Gme(e,t){let n=(i,{instanceIdentifier:s})=>{let r=i.getProvider("app").getImmediate(),o=i.getProvider(Lme),a=i.getProvider(Bme),l=i.getProvider(Vme);return new XA(r,o,a,l,s,e)};Nt(new Ot(wj,n,"PUBLIC").setMultipleInstances(!0)),Se(Cj,yj,t),Se(Cj,yj,"esm2017")}function Sj(e=gn(),t=JA){let i=on(ct(e),wj).getImmediate({identifier:t}),s=Vo("functions");return s&&_j(i,...s),i}function _j(e,t,n){kme(ct(e),t,n)}Gme(fetch.bind(self));var Op=class{constructor(t){return t}},bj="functions",ZA=class{constructor(){return Fn(bj)}};var eM=new te("angularfire2.functions-instances");function Hme(e,t){let n=Bn(bj,e,t);return n&&new Op(n)}function Ume(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new Op(i)}}var Wme={provide:ZA,deps:[[new Le,eM]]},jme={provide:Op,useFactory:Hme,deps:[[new Le,eM],$t]};function Ej(e,...t){return Se("angularfire",Bt.full,"fn"),mt([jme,Wme,{provide:eM,useFactory:Ume(e),multi:!0,deps:[de,Ge,Xt,un,[new Le,Ws],[new Le,ii],...t]}])}var Dj=je(Sj,!0);var zme="/firebase-messaging-sw.js",$me="/firebase-cloud-messaging-push-scope",Pj="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",qme="https://fcmregistrations.googleapis.com/v1",Fj="google.c.a.c_id",Kme="google.c.a.c_l",Qme="google.c.a.ts",Yme="google.c.a.e";var hw=function(e){return e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked",e}(hw||{});function Ao(e){let t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Jme(e){let t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),i=atob(n),s=new Uint8Array(i.length);for(let r=0;r<i.length;++r)s[r]=i.charCodeAt(r);return s}var tM="fcm_token_details_db",Xme=5,Tj="fcm_token_object_Store";function Zme(e){return x(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(r=>r.name).includes(tM))return null;let t=null;return(yield uh(tM,Xme,{upgrade:(i,s,r,o)=>x(this,null,function*(){var a;if(s<2||!i.objectStoreNames.contains(Tj))return;let l=o.objectStore(Tj),c=yield l.index("fcmSenderId").get(e);if(yield l.clear(),!!c){if(s===2){let u=c;if(!u.auth||!u.p256dh||!u.endpoint)return;t={token:u.fcmToken,createTime:(a=u.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:typeof u.vapidKey=="string"?u.vapidKey:Ao(u.vapidKey)}}}else if(s===3){let u=c;t={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Ao(u.auth),p256dh:Ao(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Ao(u.vapidKey)}}}else if(s===4){let u=c;t={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Ao(u.auth),p256dh:Ao(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Ao(u.vapidKey)}}}}})})).close(),yield lg(tM),yield lg("fcm_vapid_details_db"),yield lg("undefined"),eve(t)?t:null})}function eve(e){if(!e||!e.subscriptionOptions)return!1;let{subscriptionOptions:t}=e;return typeof e.createTime=="number"&&e.createTime>0&&typeof e.token=="string"&&e.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}var tve="firebase-messaging-database",nve=1,Np="firebase-messaging-store",nM=null;function xj(){return nM||(nM=uh(tve,nve,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Np)}}})),nM}function ive(e){return x(this,null,function*(){let t=Oj(e),i=yield(yield xj()).transaction(Np).objectStore(Np).get(t);if(i)return i;{let s=yield Zme(e.appConfig.senderId);if(s)return yield rM(e,s),s}})}function rM(e,t){return x(this,null,function*(){let n=Oj(e),s=(yield xj()).transaction(Np,"readwrite");return yield s.objectStore(Np).put(t,n),yield s.done,t})}function Oj({appConfig:e}){return e.appId}var sve={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},di=new or("messaging","Messaging",sve);function rve(e,t){return x(this,null,function*(){let n=yield aM(e),i=Nj(t),s={method:"POST",headers:n,body:JSON.stringify(i)},r;try{r=yield(yield fetch(oM(e.appConfig),s)).json()}catch(o){throw di.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(r.error){let o=r.error.message;throw di.create("token-subscribe-failed",{errorInfo:o})}if(!r.token)throw di.create("token-subscribe-no-token");return r.token})}function ove(e,t){return x(this,null,function*(){let n=yield aM(e),i=Nj(t.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(i)},r;try{r=yield(yield fetch(`${oM(e.appConfig)}/${t.token}`,s)).json()}catch(o){throw di.create("token-update-failed",{errorInfo:o?.toString()})}if(r.error){let o=r.error.message;throw di.create("token-update-failed",{errorInfo:o})}if(!r.token)throw di.create("token-update-no-token");return r.token})}function ave(e,t){return x(this,null,function*(){let i={method:"DELETE",headers:yield aM(e)};try{let r=yield(yield fetch(`${oM(e.appConfig)}/${t}`,i)).json();if(r.error){let o=r.error.message;throw di.create("token-unsubscribe-failed",{errorInfo:o})}}catch(s){throw di.create("token-unsubscribe-failed",{errorInfo:s?.toString()})}})}function oM({projectId:e}){return`${qme}/projects/${e}/registrations`}function aM(n){return x(this,arguments,function*({appConfig:e,installations:t}){let i=yield t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${i}`})})}function Nj({p256dh:e,auth:t,endpoint:n,vapidKey:i}){let s={web:{endpoint:n,auth:t,p256dh:e}};return i!==Pj&&(s.web.applicationPubKey=i),s}var lve=7*24*60*60*1e3;function cve(e){return x(this,null,function*(){let t=yield dve(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:Ao(t.getKey("auth")),p256dh:Ao(t.getKey("p256dh"))},i=yield ive(e.firebaseDependencies);if(i){if(hve(i.subscriptionOptions,n))return Date.now()>=i.createTime+lve?uve(e,{token:i.token,createTime:Date.now(),subscriptionOptions:n}):i.token;try{yield ave(e.firebaseDependencies,i.token)}catch(s){console.warn(s)}return Rj(e.firebaseDependencies,n)}else return Rj(e.firebaseDependencies,n)})}function uve(e,t){return x(this,null,function*(){try{let n=yield ove(e.firebaseDependencies,t),i=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return yield rM(e.firebaseDependencies,i),n}catch(n){throw n}})}function Rj(e,t){return x(this,null,function*(){let i={token:yield rve(e,t),createTime:Date.now(),subscriptionOptions:t};return yield rM(e,i),i.token})}function dve(e,t){return x(this,null,function*(){let n=yield e.pushManager.getSubscription();return n||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Jme(t)})})}function hve(e,t){let n=t.vapidKey===e.vapidKey,i=t.endpoint===e.endpoint,s=t.auth===e.auth,r=t.p256dh===e.p256dh;return n&&i&&s&&r}function Ij(e){let t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return fve(t,e),pve(t,e),gve(t,e),t}function fve(e,t){if(!t.notification)return;e.notification={};let n=t.notification.title;n&&(e.notification.title=n);let i=t.notification.body;i&&(e.notification.body=i);let s=t.notification.image;s&&(e.notification.image=s);let r=t.notification.icon;r&&(e.notification.icon=r)}function pve(e,t){t.data&&(e.data=t.data)}function gve(e,t){var n,i,s,r,o;if(!t.fcmOptions&&!(!((n=t.notification)===null||n===void 0)&&n.click_action))return;e.fcmOptions={};let a=(s=(i=t.fcmOptions)===null||i===void 0?void 0:i.link)!==null&&s!==void 0?s:(r=t.notification)===null||r===void 0?void 0:r.click_action;a&&(e.fcmOptions.link=a);let l=(o=t.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(e.fcmOptions.analyticsLabel=l)}function mve(e){return typeof e=="object"&&!!e&&Fj in e}kj("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o");kj("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function kj(e,t){let n=[];for(let i=0;i<e.length;i++)n.push(e.charAt(i)),i<t.length&&n.push(t.charAt(i));return n.join("")}function vve(e){if(!e||!e.options)throw iM("App Configuration Object");if(!e.name)throw iM("App Name");let t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(let i of t)if(!n[i])throw iM(i);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function iM(e){return di.create("missing-app-config-values",{valueName:e})}var sM=class{constructor(t,n,i){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let s=vve(t);this.firebaseDependencies={app:t,appConfig:s,installations:n,analyticsProvider:i}}_delete(){return Promise.resolve()}};function Cve(e){return x(this,null,function*(){try{e.swRegistration=yield navigator.serviceWorker.register(zme,{scope:$me}),e.swRegistration.update().catch(()=>{})}catch(t){throw di.create("failed-service-worker-registration",{browserErrorMessage:t?.message})}})}function yve(e,t){return x(this,null,function*(){if(!t&&!e.swRegistration&&(yield Cve(e)),!(!t&&e.swRegistration)){if(!(t instanceof ServiceWorkerRegistration))throw di.create("invalid-sw-registration");e.swRegistration=t}})}function wve(e,t){return x(this,null,function*(){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=Pj)})}function Sve(e,t){return x(this,null,function*(){if(!navigator)throw di.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw di.create("permission-blocked");return yield wve(e,t?.vapidKey),yield yve(e,t?.serviceWorkerRegistration),cve(e)})}function _ve(e,t,n){return x(this,null,function*(){let i=bve(t);(yield e.firebaseDependencies.analyticsProvider.get()).logEvent(i,{message_id:n[Fj],message_name:n[Kme],message_time:n[Qme],message_device_time:Math.floor(Date.now()/1e3)})})}function bve(e){switch(e){case hw.NOTIFICATION_CLICKED:return"notification_open";case hw.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Eve(e,t){return x(this,null,function*(){let n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===hw.PUSH_RECEIVED&&(typeof e.onMessageHandler=="function"?e.onMessageHandler(Ij(n)):e.onMessageHandler.next(Ij(n)));let i=n.data;mve(i)&&i[Yme]==="1"&&(yield _ve(e,n.messageType,i))})}var Aj="@firebase/messaging",Mj="0.12.10";var Dve=e=>{let t=new sM(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>Eve(t,n)),t},Tve=e=>{let t=e.getProvider("messaging").getImmediate();return{getToken:i=>Sve(t,i)}};function Rve(){Nt(new Ot("messaging",Dve,"PUBLIC")),Nt(new Ot("messaging-internal",Tve,"PRIVATE")),Se(Aj,Mj),Se(Aj,Mj,"esm2017")}function lM(){return x(this,null,function*(){try{yield Wa()}catch{return!1}return typeof window<"u"&&Is()&&oh()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function Lj(e=gn()){return lM().then(t=>{if(!t)throw di.create("unsupported-browser")},t=>{throw di.create("indexed-db-unsupported")}),on(ct(e),"messaging").getImmediate()}Rve();var kp=class{constructor(t){return t}},Vj="messaging",cM=class{constructor(){return Fn(Vj)}};var Bj="__angularfire_symbol__messagingIsSupported",uM="__angularfire_symbol__messagingIsSupportedValue";globalThis[Bj]||=lM().then(e=>globalThis[uM]=e).catch(()=>globalThis[uM]=!1);var fw={async:()=>globalThis[Bj],sync:()=>{let e=globalThis[uM];if(e===void 0)throw new Error(Du("Messaging"));return e}},dM=new te("angularfire2.messaging-instances");function Ive(e,t){if(!fw.sync())return null;let n=Bn(Vj,e,t);return n&&new kp(n)}function Ave(e){return(t,n)=>{if(!fw.sync())return null;let i=t.runOutsideAngular(()=>e(n));return new kp(i)}}var Mve={provide:cM,deps:[[new Le,dM]]},Pve={provide:kp,useFactory:Ive,deps:[[new Le,dM],$t]};function Gj(e,...t){return Se("angularfire",Bt.full,"fcm"),mt([Pve,Mve,{provide:vr,useValue:fw.async,multi:!0},{provide:dM,useFactory:Ave(e),multi:!0,deps:[de,Ge,Xt,un,...t]}])}var zWe=fw.async;var Hj=je(Lj,!0);var qj="firebasestorage.googleapis.com",Fve="storageBucket",xve=2*60*1e3,Ove=10*60*1e3;var Lr=class e extends As{constructor(t,n,i=0){super(hM(t),`Firebase Storage: ${n} (${hM(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,e.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return hM(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Po=function(e){return e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment",e}(Po||{});function hM(e){return"storage/"+e}function Nve(){let e="An unknown error occurred, please check the error payload for server response.";return new Lr(Po.UNKNOWN,e)}function kve(){return new Lr(Po.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Lve(){return new Lr(Po.CANCELED,"User canceled the upload/download.")}function Vve(e){return new Lr(Po.INVALID_URL,"Invalid URL '"+e+"'.")}function Bve(e){return new Lr(Po.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Uj(e){return new Lr(Po.INVALID_ARGUMENT,e)}function Kj(){return new Lr(Po.APP_DELETED,"The Firebase app was deleted.")}function Gve(e){return new Lr(Po.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var Mo=class e{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let i;try{i=e.makeFromUrl(t,n)}catch{return new e(t,"")}if(i.path==="")return i;throw Bve(t)}static makeFromUrl(t,n){let i=null,s="([A-Za-z0-9.\\-_]+)";function r(F){F.path.charAt(F.path.length-1)==="/"&&(F.path_=F.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(F){F.path_=decodeURIComponent(F.path)}let u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${u}/b/${s}/o${f}`,"i"),v={bucket:1,path:3},y=n===qj?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",E=new RegExp(`^https?://${y}/${s}/${C}`,"i"),R=[{regex:a,indices:l,postModify:r},{regex:p,indices:v,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let F=0;F<R.length;F++){let $=R[F],k=$.regex.exec(t);if(k){let b=k[$.indices.bucket],S=k[$.indices.path];S||(S=""),i=new e(b,S),$.postModify(i);break}}if(i==null)throw Vve(t);return i}},fM=class{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}};function Hve(e,t,n){let i=1,s=null,r=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...C){c||(c=!0,t.apply(null,C))}function h(C){s=setTimeout(()=>{s=null,e(p,l())},C)}function f(){r&&clearTimeout(r)}function p(C,...E){if(c){f();return}if(C){f(),u.call(null,C,...E);return}if(l()||o){f(),u.call(null,C,...E);return}i<64&&(i*=2);let R;a===1?(a=2,R=0):R=(i+Math.random())*1e3,h(R)}let v=!1;function y(C){v||(v=!0,f(),!c&&(s!==null?(C||(a=2),clearTimeout(s),h(0)):C||(a=1)))}return h(0),r=setTimeout(()=>{o=!0,y(!0)},n),y}function Uve(e){e(!1)}function Wve(e){return e!==void 0}function Wj(e,t,n,i){if(i<t)throw Uj(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw Uj(`Invalid value for '${e}'. Expected ${n} or less.`)}function jve(e){let t=encodeURIComponent,n="?";for(let i in e)if(e.hasOwnProperty(i)){let s=t(i)+"="+t(e[i]);n=n+s+"&"}return n=n.slice(0,-1),n}var pM=function(e){return e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT",e}(pM||{});function zve(e,t){let n=e>=500&&e<600,s=[408,429].indexOf(e)!==-1,r=t.indexOf(e)!==-1;return n||s||r}var gM=class{constructor(t,n,i,s,r,o,a,l,c,u,h,f=!0){this.url_=t,this.method_=n,this.headers_=i,this.body_=s,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,v)=>{this.resolve_=p,this.reject_=v,this.start_()})}start_(){let t=(i,s)=>{if(s){i(!1,new kd(!1,null,!0));return}let r=this.connectionFactory_();this.pendingConnection_=r;let o=a=>{let l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&r.addUploadProgressListener(o),r.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(o),this.pendingConnection_=null;let a=r.getErrorCode()===pM.NO_ERROR,l=r.getStatus();if(!a||zve(l,this.additionalRetryCodes_)&&this.retry){let u=r.getErrorCode()===pM.ABORT;i(!1,new kd(!1,null,u));return}let c=this.successCodes_.indexOf(l)!==-1;i(!0,new kd(c,r))})},n=(i,s)=>{let r=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{let l=this.callback_(a,a.getResponse());Wve(l)?r(l):r()}catch(l){o(l)}else if(a!==null){let l=Nve();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){let l=this.appDelete_?Kj():Lve();o(l)}else{let l=kve();o(l)}};this.canceled_?n(!1,new kd(!1,null,!0)):this.backoffId_=Hve(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Uve(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},kd=class{constructor(t,n,i){this.wasSuccessCode=t,this.connection=n,this.canceled=!!i}};function $ve(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function qve(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Kve(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Qve(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function Yve(e,t,n,i,s,r,o=!0){let a=jve(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return Kve(c,t),$ve(c,n),qve(c,r),Qve(c,i),new gM(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,o)}function Jve(e){if(e.length===0)return null;let t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function Xve(e){let t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}var JWe=256*1024;var mM=class e{constructor(t,n){this._service=t,n instanceof Mo?this._location=n:this._location=Mo.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new e(t,n)}get root(){let t=new Mo(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Xve(this._location.path)}get storage(){return this._service}get parent(){let t=Jve(this._location.path);if(t===null)return null;let n=new Mo(this._location.bucket,t);return new e(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw Gve(t)}};function jj(e,t){let n=t?.[Fve];return n==null?null:Mo.makeFromBucketSpec(n,e)}function Zve(e,t,n,i={}){e.host=`${t}:${n}`,e._protocol="http";let{mockUserToken:s}=i;s&&(e._overrideAuthToken=typeof s=="string"?s:Dc(s,e.app.options.projectId))}var vM=class{constructor(t,n,i,s,r){this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=s,this._firebaseVersion=r,this._bucket=null,this._host=qj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=xve,this._maxUploadRetryTime=Ove,this._requests=new Set,s!=null?this._bucket=Mo.makeFromBucketSpec(s,this._host):this._bucket=jj(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Mo.makeFromBucketSpec(this._url,t):this._bucket=jj(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Wj("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Wj("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){return x(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let t=this._authProvider.getImmediate({optional:!0});if(t){let n=yield t.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return x(this,null,function*(){let t=this._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new mM(this,t)}_makeRequest(t,n,i,s,r=!0){if(this._deleted)return new fM(Kj());{let o=Yve(t,this._appId,i,s,n,this._firebaseVersion,r);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(t,n){return x(this,null,function*(){let[i,s]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,i,s).getPromise()})}},zj="@firebase/storage",$j="0.12.6";var Qj="storage";function Yj(e=gn(),t){e=ct(e);let i=on(e,Qj).getImmediate({identifier:t}),s=Vo("storage");return s&&Jj(i,...s),i}function Jj(e,t,n,i={}){Zve(e,t,n,i)}function eCe(e,{instanceIdentifier:t}){let n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new vM(n,i,s,t,Bo)}function tCe(){Nt(new Ot(Qj,eCe,"PUBLIC").setMultipleInstances(!0)),Se(zj,$j,""),Se(zj,$j,"esm2017")}tCe();var Lp=class{constructor(t){return t}},Xj="storage",CM=class{constructor(){return Fn(Xj)}};var yM=new te("angularfire2.storage-instances");function nCe(e,t){let n=Bn(Xj,e,t);return n&&new Lp(n)}function iCe(e){return(t,n)=>{let i=t.runOutsideAngular(()=>e(n));return new Lp(i)}}var sCe={provide:CM,deps:[[new Le,yM]]},rCe={provide:Lp,useFactory:nCe,deps:[[new Le,yM],$t]};function Zj(e,...t){return Se("angularfire",Bt.full,"gcs"),mt([rCe,sCe,{provide:yM,useFactory:iCe(e),multi:!0,deps:[de,Ge,Xt,un,[new Le,Ws],[new Le,ii],...t]}])}var ez=je(Yj,!0);var wM="@firebase/remote-config",tz="0.4.8";var nz="remote-config";var oCe={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},Ai=new or("remoteconfig","Remote Config",oCe);function iz(e=gn()){return e=ct(e),on(e,nz).getImmediate()}function sz(e){let t=ct(e);return t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(()=>{t._isInitializationComplete=!0})),t._initializePromise}var SM=class{constructor(t,n,i,s){this.client=t,this.storage=n,this.storageCache=i,this.logger=s}isCachedDataFresh(t,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let i=Date.now()-n,s=i<=t;return this.logger.debug(`Config fetch cache check. Cache age millis: ${i}. Cache max age millis (minimumFetchIntervalMillis setting): ${t}. Is cache hit: ${s}.`),s}fetch(t){return x(this,null,function*(){let[n,i]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(i&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n))return i;t.eTag=i&&i.eTag;let s=yield this.client.fetch(t),r=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return s.status===200&&r.push(this.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(r),s})}};function aCe(e=navigator){return e.languages&&e.languages[0]||e.language}var _M=class{constructor(t,n,i,s,r,o){this.firebaseInstallations=t,this.sdkVersion=n,this.namespace=i,this.projectId=s,this.apiKey=r,this.appId=o}fetch(t){return x(this,null,function*(){let[n,i]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),r=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,o={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:i,app_id:this.appId,language_code:aCe()},l={method:"POST",headers:o,body:JSON.stringify(a)},c=fetch(r,l),u=new Promise((C,E)=>{t.signal.addEventListener(()=>{let T=new Error("The operation was aborted.");T.name="AbortError",E(T)})}),h;try{yield Promise.race([c,u]),h=yield c}catch(C){let E="fetch-client-network";throw C?.name==="AbortError"&&(E="fetch-timeout"),Ai.create(E,{originalErrorMessage:C?.message})}let f=h.status,p=h.headers.get("ETag")||void 0,v,y;if(h.status===200){let C;try{C=yield h.json()}catch(E){throw Ai.create("fetch-client-parse",{originalErrorMessage:E?.message})}v=C.entries,y=C.state}if(y==="INSTANCE_STATE_UNSPECIFIED"?f=500:y==="NO_CHANGE"?f=304:(y==="NO_TEMPLATE"||y==="EMPTY_CONFIG")&&(v={}),f!==304&&f!==200)throw Ai.create("fetch-status",{httpStatus:f});return{status:f,eTag:p,config:v}})}};function lCe(e,t){return new Promise((n,i)=>{let s=Math.max(t-Date.now(),0),r=setTimeout(n,s);e.addEventListener(()=>{clearTimeout(r),i(Ai.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function cCe(e){if(!(e instanceof As)||!e.customData)return!1;let t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var bM=class{constructor(t,n){this.client=t,this.storage=n}fetch(t){return x(this,null,function*(){let n=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(t,n)})}attemptFetch(s,r){return x(this,arguments,function*(t,{throttleEndTimeMillis:n,backoffCount:i}){yield lCe(t.signal,n);try{let o=yield this.client.fetch(t);return yield this.storage.deleteThrottleMetadata(),o}catch(o){if(!cCe(o))throw o;let a={throttleEndTimeMillis:Date.now()+Tc(i),backoffCount:i+1};return yield this.storage.setThrottleMetadata(a),this.attemptFetch(t,a)}})}};var uCe=60*1e3,dCe=12*60*60*1e3,EM=class{constructor(t,n,i,s,r){this.app=t,this._client=n,this._storageCache=i,this._storage=s,this._logger=r,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:uCe,minimumFetchIntervalMillis:dCe},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}};function pw(e,t){let n=e.target.error||void 0;return Ai.create(t,{originalErrorMessage:n&&n?.message})}var pc="app_namespace_store",hCe="firebase_remote_config",fCe=1;function pCe(){return new Promise((e,t)=>{try{let n=indexedDB.open(hCe,fCe);n.onerror=i=>{t(pw(i,"storage-open"))},n.onsuccess=i=>{e(i.target.result)},n.onupgradeneeded=i=>{let s=i.target.result;switch(i.oldVersion){case 0:s.createObjectStore(pc,{keyPath:"compositeKey"})}}}catch(n){t(Ai.create("storage-open",{originalErrorMessage:n?.message}))}})}var DM=class{constructor(t,n,i,s=pCe()){this.appId=t,this.appName=n,this.namespace=i,this.openDbPromise=s}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(t){return this.set("last_fetch_status",t)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(t){return this.set("last_successful_fetch_timestamp_millis",t)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(t){return this.set("last_successful_fetch_response",t)}getActiveConfig(){return this.get("active_config")}setActiveConfig(t){return this.set("active_config",t)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(t){return this.set("active_config_etag",t)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(t){return this.set("throttle_metadata",t)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(t){return x(this,null,function*(){let n=yield this.openDbPromise;return new Promise((i,s)=>{let o=n.transaction([pc],"readonly").objectStore(pc),a=this.createCompositeKey(t);try{let l=o.get(a);l.onerror=c=>{s(pw(c,"storage-get"))},l.onsuccess=c=>{let u=c.target.result;i(u?u.value:void 0)}}catch(l){s(Ai.create("storage-get",{originalErrorMessage:l?.message}))}})})}set(t,n){return x(this,null,function*(){let i=yield this.openDbPromise;return new Promise((s,r)=>{let a=i.transaction([pc],"readwrite").objectStore(pc),l=this.createCompositeKey(t);try{let c=a.put({compositeKey:l,value:n});c.onerror=u=>{r(pw(u,"storage-set"))},c.onsuccess=()=>{s()}}catch(c){r(Ai.create("storage-set",{originalErrorMessage:c?.message}))}})})}delete(t){return x(this,null,function*(){let n=yield this.openDbPromise;return new Promise((i,s)=>{let o=n.transaction([pc],"readwrite").objectStore(pc),a=this.createCompositeKey(t);try{let l=o.delete(a);l.onerror=c=>{s(pw(c,"storage-delete"))},l.onsuccess=()=>{i()}}catch(l){s(Ai.create("storage-delete",{originalErrorMessage:l?.message}))}})})}createCompositeKey(t){return[this.appId,this.appName,this.namespace,t].join()}};var TM=class{constructor(t){this.storage=t}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){return x(this,null,function*(){let t=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),i=this.storage.getActiveConfig(),s=yield t;s&&(this.lastFetchStatus=s);let r=yield n;r&&(this.lastSuccessfulFetchTimestampMillis=r);let o=yield i;o&&(this.activeConfig=o)})}setLastFetchStatus(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)}setLastSuccessfulFetchTimestampMillis(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)}setActiveConfig(t){return this.activeConfig=t,this.storage.setActiveConfig(t)}};function gCe(){Nt(new Ot(nz,e,"PUBLIC").setMultipleInstances(!0)),Se(wM,tz),Se(wM,tz,"esm2017");function e(t,{instanceIdentifier:n}){let i=t.getProvider("app").getImmediate(),s=t.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ai.create("registration-window");if(!Is())throw Ai.create("indexed-db-unavailable");let{projectId:r,apiKey:o,appId:a}=i.options;if(!r)throw Ai.create("registration-project-id");if(!o)throw Ai.create("registration-api-key");if(!a)throw Ai.create("registration-app-id");n=n||"firebase";let l=new DM(a,i.name,n),c=new TM(l),u=new lr(wM);u.logLevel=Fi.ERROR;let h=new _M(s,Bo,n,r,o,a),f=new bM(h,l),p=new SM(f,l,c,u),v=new EM(i,p,c,l,u);return sz(v),v}}function rz(){return x(this,null,function*(){if(!Is())return!1;try{return yield Wa()}catch{return!1}})}gCe();var Vp=class{constructor(t){return t}},oz="remote-config",RM=class{constructor(){return Fn(oz)}};var IM="__angularfire_symbol__remoteConfigIsSupportedValue",az="__angularfire_symbol__remoteConfigIsSupported";globalThis[az]||=rz().then(e=>globalThis[IM]=e).catch(()=>globalThis[IM]=!1);var gw={async:()=>globalThis[az],sync:()=>{let e=globalThis[IM];if(e===void 0)throw new Error(Du("RemoteConfig"));return e}},AM=new te("angularfire2.remote-config-instances");function mCe(e,t){if(!gw.sync())return null;let n=Bn(oz,e,t);return n&&new Vp(n)}function vCe(e){return(t,n)=>{if(!gw.sync())return null;let i=t.runOutsideAngular(()=>e(n));return new Vp(i)}}var CCe={provide:RM,deps:[[new Le,AM]]},yCe={provide:Vp,useFactory:mCe,deps:[[new Le,AM],$t]};function lz(e,...t){return Se("angularfire",Bt.full,"rc"),mt([yCe,CCe,{provide:vr,useValue:gw.async,multi:!0},{provide:AM,useFactory:vCe(e),multi:!0,deps:[de,Ge,Xt,un,...t]}])}var Kje=gw.async;var cz=je(iz,!0);var MM={firebaseConfig:{projectId:"expense-tracker-app-ee455",appId:"1:652658231358:web:16ee9e447afa0f2385696f",storageBucket:"expense-tracker-app-ee455.appspot.com",apiKey:"AIzaSyDOMgJPMGTfIHUNZDV8k4z4jXNGEaXMZBo",authDomain:"expense-tracker-app-ee455.firebaseapp.com",messagingSenderId:"652658231358",measurementId:"G-8E6SEFV1FX"}};var Gp="Service workers are disabled or not supported by this browser";function wCe(e){return Qa(()=>Uo(new Error(e)))}var Ld=class{constructor(t){if(this.serviceWorker=t,!t)this.worker=this.events=this.registration=wCe(Gp);else{let i=Kt(t,"controllerchange").pipe(oe(()=>t.controller)),s=Qa(()=>X(t.controller)),r=ns(s,i);this.worker=r.pipe(Ye(u=>!!u)),this.registration=this.worker.pipe(ke(()=>t.getRegistration()));let c=Kt(t,"message").pipe(oe(u=>u.data)).pipe(Ye(u=>u&&u.type)).pipe(lS());c.connect(),this.events=c}}postMessage(t,n){return this.worker.pipe(ut(1),pt(i=>{i.postMessage(B({action:t},n))})).toPromise().then(()=>{})}postMessageWithOperation(t,n,i){let s=this.waitForOperationCompleted(i),r=this.postMessage(t,n);return Promise.all([r,s]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(t){let n;return typeof t=="string"?n=i=>i.type===t:n=i=>t.includes(i.type),this.events.pipe(Ye(n))}nextEventOfType(t){return this.eventsOfType(t).pipe(ut(1))}waitForOperationCompleted(t){return this.eventsOfType("OPERATION_COMPLETED").pipe(Ye(n=>n.nonce===t),ut(1),oe(n=>{if(n.result!==void 0)return n.result;throw new Error(n.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},SCe=(()=>{let t=class t{get isEnabled(){return this.sw.isEnabled}constructor(i){if(this.sw=i,this.pushManager=null,this.subscriptionChanges=new Me,!i.isEnabled){this.messages=zo,this.notificationClicks=zo,this.subscription=zo;return}this.messages=this.sw.eventsOfType("PUSH").pipe(oe(r=>r.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(oe(r=>r.data)),this.pushManager=this.sw.registration.pipe(oe(r=>r.pushManager));let s=this.pushManager.pipe(ke(r=>r.getSubscription()));this.subscription=jo(s,this.subscriptionChanges)}requestSubscription(i){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(Gp));let s={userVisibleOnly:!0},r=this.decodeBase64(i.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),o=new Uint8Array(new ArrayBuffer(r.length));for(let a=0;a<r.length;a++)o[a]=r.charCodeAt(a);return s.applicationServerKey=o,this.pushManager.pipe(ke(a=>a.subscribe(s)),ut(1)).toPromise().then(a=>(this.subscriptionChanges.next(a),a))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Gp));let i=s=>{if(s===null)throw new Error("Not subscribed to push notifications.");return s.unsubscribe().then(r=>{if(!r)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(ut(1),ke(i)).toPromise()}decodeBase64(i){return atob(i)}};t.\u0275fac=function(s){return new(s||t)(Z(Ld))},t.\u0275prov=Y({token:t,factory:t.\u0275fac});let e=t;return e})(),_Ce=(()=>{let t=class t{get isEnabled(){return this.sw.isEnabled}constructor(i){if(this.sw=i,!i.isEnabled){this.versionUpdates=zo,this.unrecoverable=zo;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Gp));let i=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:i},i)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Gp));let i=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:i},i)}};t.\u0275fac=function(s){return new(s||t)(Z(Ld))},t.\u0275prov=Y({token:t,factory:t.\u0275fac});let e=t;return e})();var uz=new te("");function bCe(e,t,n,i){return()=>{if(!(au(i)&&"serviceWorker"in navigator&&n.enabled!==!1))return;navigator.serviceWorker.addEventListener("controllerchange",()=>{navigator.serviceWorker.controller!==null&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})});let s;if(typeof n.registrationStrategy=="function")s=n.registrationStrategy();else{let[o,...a]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":s=X(null);break;case"registerWithDelay":s=dz(+a[0]||0);break;case"registerWhenStable":s=a[0]?jo(hz(e),dz(+a[0])):hz(e);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}e.get(de).runOutsideAngular(()=>s.pipe(ut(1)).subscribe(()=>navigator.serviceWorker.register(t,{scope:n.scope}).catch(o=>console.error("Service worker registration failed with:",o))))}}function dz(e){return X(null).pipe(Ch(e))}function hz(e){return e.get(Hi).isStable.pipe(Ye(n=>n))}function ECe(e,t){return new Ld(au(t)&&e.enabled!==!1?navigator.serviceWorker:void 0)}var Bp=class{};function fz(e,t={}){return mt([SCe,_Ce,{provide:uz,useValue:e},{provide:Bp,useValue:t},{provide:Ld,useFactory:ECe,deps:[Bp,jt]},{provide:vr,useFactory:bCe,deps:[Ge,uz,Bp,jt],multi:!0}])}var pz={providers:[{provide:Jv,useValue:MM.firebaseConfig},dk(B2),MN(),Vk(()=>Bk(MM.firebaseConfig)),jk(()=>qk()),TU(()=>EU()),DU,kI,YB(()=>eG()),mj(()=>vj()),Ej(()=>Dj()),Gj(()=>Hj()),Zj(()=>ez()),lz(()=>cz()),fz("ngsw-worker.js",{enabled:!Wh(),registrationStrategy:"registerWhenStable:30000"})]};var gz=(()=>{let t=class t{constructor(i){this.auth=i}ngOnInit(){this.auth.user$.subscribe(i=>{i?this.auth.currentUserSig.set({email:i.email,username:i.displayName}):this.auth.currentUserSig.set(null),console.log(this.auth.currentUserSig())})}};t.\u0275fac=function(s){return new(s||t)(Q(hs))},t.\u0275cmp=_e({type:t,selectors:[["app-root"]],standalone:!0,features:[os([KL()]),be],decls:1,vars:0,template:function(s,r){s&1&&ne(0,"router-outlet")},dependencies:[Mt,df]});let e=t;return e})();AN(gz,pz).catch(e=>console.error(e));
